<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer194">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     10
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-192">
    <span class="koboSpan" id="kobo.2.1">
     Behind the Scenes of React and Optimization Opportunities
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Avoid unnecessary code execution via the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.6.1">
        useMemo()
       </span>
      </code>
      <span class="koboSpan" id="kobo.7.1">
       and
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.8.1">
        useCallback()
       </span>
      </code>
      <span class="koboSpan" id="kobo.9.1">
       Hooks
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.10.1">
       Load optional code lazily, only when it’s needed, via React’s
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.11.1">
        lazy()
       </span>
      </code>
      <span class="koboSpan" id="kobo.12.1">
       function
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.13.1">
       Use React’s developer tools to analyze and optimize your app
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.14.1">
       Explore the React Compiler for automatic performance improvements
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-193">
    <span class="koboSpan" id="kobo.15.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.16.1">
     Using all the features covered up to this point, you can build non-trivial React apps and therefore highly interactive and reactive UIs.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.17.1">
     This chapter, while introducing some new functions and concepts, will not provide you with tools that will enable you to build even more advanced web apps.
    </span>
    <span class="koboSpan" id="kobo.17.2">
     You will not learn about groundbreaking, key concepts such as state or props (though you will learn about more advanced concepts in later chapters).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     Instead, this chapter allows you to look behind the scenes of React.
    </span>
    <span class="koboSpan" id="kobo.18.2">
     You will learn how React calculates required DOM updates, and how it ensures that such updates happen without impacting performance in an unacceptable way.
    </span>
    <span class="koboSpan" id="kobo.18.3">
     You will also learn about some other optimization techniques employed by React—all with the goal of ensuring that your React app runs as smoothly as possible.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.19.1">
     Besides this look behind the scenes, you will learn about various built-in functions and concepts that can be used to further optimize app performance.
    </span>
    <span class="koboSpan" id="kobo.19.2">
     This chapter will not only introduce those concepts but also explain
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.20.1">
      why
     </span>
    </strong>
    <span class="koboSpan" id="kobo.21.1">
     they exist,
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.22.1">
      how
     </span>
    </strong>
    <span class="koboSpan" id="kobo.23.1">
     they should be used, and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.24.1">
      when
     </span>
    </strong>
    <span class="koboSpan" id="kobo.25.1">
     to use which feature.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-194">
    <span class="koboSpan" id="kobo.26.1">
     Revisiting Component Evaluations and Updates
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.27.1">
     Before exploring React’s internal workings, it makes sense to briefly revisit React’s logic for executing component functions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.28.1">
     Component
    </span>
    <a id="_idIndexMarker455">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     functions are executed whenever some state (managed via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.30.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.31.1">
     ) changes or their parent component function is executed
    </span>
    <a id="_idIndexMarker456">
    </a>
    <span class="koboSpan" id="kobo.32.1">
     again.
    </span>
    <span class="koboSpan" id="kobo.32.2">
     The latter happens because, if a parent component function is called, its entire JSX code (which points at the child component function) is re-evaluated.
    </span>
    <span class="koboSpan" id="kobo.32.3">
     Any component functions referenced in that JSX code are therefore also invoked again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.33.1">
     Consider a component structure like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.34.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.35.1">NestedChild</span></span><span class="koboSpan" id="kobo.36.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.37.1">console</span></span><span class="koboSpan" id="kobo.38.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.39.1">log</span></span><span class="koboSpan" id="kobo.40.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.41.1">'&lt;NestedChild /&gt; is called.'</span></span><span class="koboSpan" id="kobo.42.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.43.1">return</span></span><span class="koboSpan" id="kobo.44.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.45.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.46.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.47.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.48.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.49.1">"nested-child"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.50.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.51.1">      A component, deeply nested into the component tree.</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.52.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.53.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.54.1">&gt;</span></span><span class="koboSpan" id="kobo.55.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.56.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.57.1">Child</span></span><span class="koboSpan" id="kobo.58.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.59.1">console</span></span><span class="koboSpan" id="kobo.60.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.61.1">log</span></span><span class="koboSpan" id="kobo.62.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.63.1">'&lt;Child /&gt; is called.'</span></span><span class="koboSpan" id="kobo.64.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.65.1">return</span></span><span class="koboSpan" id="kobo.66.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.67.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.68.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.69.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.70.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.71.1">"child"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.72.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.73.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.74.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.75.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.76.1">        A component, rendered inside another component, </span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.77.1">        containing yet another component.</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.78.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.79.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.80.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.81.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.82.1">NestedChild</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.83.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.84.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.85.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.86.1">&gt;</span></span><span class="koboSpan" id="kobo.87.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.88.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.89.1">Parent</span></span><span class="koboSpan" id="kobo.90.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.91.1">console</span></span><span class="koboSpan" id="kobo.92.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.93.1">log</span></span><span class="koboSpan" id="kobo.94.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.95.1">'&lt;Parent /&gt; is called.'</span></span><span class="koboSpan" id="kobo.96.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.97.1">const</span></span><span class="koboSpan" id="kobo.98.1"> [counter, setCounter] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.99.1">useState</span></span><span class="koboSpan" id="kobo.100.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.101.1">0</span></span><span class="koboSpan" id="kobo.102.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.103.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.104.1">handleIncCounter</span></span><span class="koboSpan" id="kobo.105.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.106.1">setCounter</span></span><span class="koboSpan" id="kobo.107.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.108.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.109.1">prevCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.110.1">) =&gt;</span></span><span class="koboSpan" id="kobo.111.1"> prevCounter + </span><span class="hljs-number"><span class="koboSpan" id="kobo.112.1">1</span></span><span class="koboSpan" id="kobo.113.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.114.1">return</span></span><span class="koboSpan" id="kobo.115.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.116.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.117.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.118.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.119.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.120.1">"parent"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.121.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.122.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.123.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.124.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.125.1">        A component, nested into App, </span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.126.1">        containing another component (Child).</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.127.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.128.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.129.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.130.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.131.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.132.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.133.1">Counter: {counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.134.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.135.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.136.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.137.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.138.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.139.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.140.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.141.1">{handleIncCounter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.142.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.143.1">Increment</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.144.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.145.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.146.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.147.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.148.1">Child</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.149.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.150.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.151.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.152.1">&gt;</span></span><span class="koboSpan" id="kobo.153.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.154.1">
     In this
    </span>
    <a id="_idIndexMarker457">
    </a>
    <span class="koboSpan" id="kobo.155.1">
     example structure, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.156.1">
      Parent
     </span>
    </code>
    <span class="koboSpan" id="kobo.157.1">
     component renders a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.158.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.159.1">
     with two paragraphs, a button, and another component: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.160.1">
      Child
     </span>
    </code>
    <span class="koboSpan" id="kobo.161.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.161.2">
     That component in turn outputs a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.162.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.163.1">
     with a paragraph and yet another
    </span>
    <a id="_idIndexMarker458">
    </a>
    <span class="koboSpan" id="kobo.164.1">
     component: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.165.1">
      NestedChild
     </span>
    </code>
    <span class="koboSpan" id="kobo.166.1">
     component (which then only outputs a paragraph).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.167.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.168.1">
      Parent
     </span>
    </code>
    <span class="koboSpan" id="kobo.169.1">
     component also manages some state (a dummy counter), which is changed whenever the button is clicked.
    </span>
    <span class="koboSpan" id="kobo.169.2">
     All three components print a message via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.170.1">
      console.log()
     </span>
    </code>
    <span class="koboSpan" id="kobo.171.1">
     , simply to make it easy to spot when each component is called by React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.172.1">
     The following screenshot shows those components in action—after the button was clicked:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.173.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.174.1">
     Figure 10.1: Each component function is executed
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.175.1">
     In this screenshot, you can not only see how the components are nested into each other but also
    </span>
    <a id="_idIndexMarker459">
    </a>
    <span class="koboSpan" id="kobo.176.1">
     how they are all invoked by React when the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.177.1">
      Increment
     </span>
    </code>
    <span class="koboSpan" id="kobo.178.1">
     button is clicked.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.179.1">
      Child
     </span>
    </code>
    <span class="koboSpan" id="kobo.180.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.181.1">
      NestedChild
     </span>
    </code>
    <span class="koboSpan" id="kobo.182.1">
     are invoked even though they don’t
    </span>
    <a id="_idIndexMarker460">
    </a>
    <span class="koboSpan" id="kobo.183.1">
     manage or use any state.
    </span>
    <span class="koboSpan" id="kobo.183.2">
     But since they are a child (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.184.1">
      Child
     </span>
    </code>
    <span class="koboSpan" id="kobo.185.1">
     ) or descendent (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.186.1">
      NestedChild
     </span>
    </code>
    <span class="koboSpan" id="kobo.187.1">
     ) of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.188.1">
      Parent
     </span>
    </code>
    <span class="koboSpan" id="kobo.189.1">
     component, which did receive a state change, the nested component functions are called as well.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.190.1">
     Understanding this flow of component function execution is important because this flow implies that any component function invocation also influences its descendent components.
    </span>
    <span class="koboSpan" id="kobo.190.2">
     It also shows you how frequently component functions may be invoked by React and how many component functions may be affected by a single state change.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.191.1">
     Therefore, there’s one important question that should be answered: what happens to the actual page DOM (i.e., to the loaded and rendered website in the browser) when one or more component functions are invoked?
    </span>
    <span class="koboSpan" id="kobo.191.2">
     Is the DOM recreated?
    </span>
    <span class="koboSpan" id="kobo.191.3">
     Is the rendered UI updated?
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-195">
    <span class="koboSpan" id="kobo.192.1">
     What Happens When a Component Function Is Called
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.193.1">
     Whenever a component function is executed, React evaluates whether or not the rendered
    </span>
    <a id="_idIndexMarker461">
    </a>
    <span class="koboSpan" id="kobo.194.1">
     UI (i.e., the DOM of the loaded page) must be updated.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.195.1">
     This is important: React
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.196.1">
      evaluates
     </span>
    </strong>
    <span class="koboSpan" id="kobo.197.1">
     whether an update is needed.
    </span>
    <span class="koboSpan" id="kobo.197.2">
     It’s not forcing an update automatically!
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.198.1">
     Internally, React does not take the JSX code returned by a component (or multiple components) and replace the page DOM with it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.199.1">
     That could be done, but it would mean that every component function execution would lead to some form of DOM manipulation—even if it’s just a replacement of the old DOM content with a new, similar version.
    </span>
    <span class="koboSpan" id="kobo.199.2">
     In the example shown above, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.200.1">
      Child
     </span>
    </code>
    <span class="koboSpan" id="kobo.201.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.202.1">
      NestedChild
     </span>
    </code>
    <span class="koboSpan" id="kobo.203.1">
     JSX code would be used to replace the currently rendered DOM every time those component functions were executed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.204.1">
     As you can see in the example above, those component functions are executed quite frequently.
    </span>
    <span class="koboSpan" id="kobo.204.2">
     But the returned JSX code is always the same because it’s static.
    </span>
    <span class="koboSpan" id="kobo.204.3">
     It does not contain any dynamic values (e.g., state or props).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.205.1">
     If the actual page DOM were replaced with the DOM elements implied by the returned JSX code, the visual result would always be the same.
    </span>
    <span class="koboSpan" id="kobo.205.2">
     But there still would be some DOM manipulation behind the scenes.
    </span>
    <span class="koboSpan" id="kobo.205.3">
     And that’s a problem because manipulating the DOM is quite a performance-intensive task—especially when done with a high frequency.
    </span>
    <span class="koboSpan" id="kobo.205.4">
     Removing and adding or updating DOM elements should therefore only be done when needed—not unnecessarily.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.206.1">
     Because of this, React does not throw away the current DOM and replace it with the new DOM (implied by the JSX code) just because a component function was executed.
    </span>
    <span class="koboSpan" id="kobo.206.2">
     Instead, React first checks whether an update is needed.
    </span>
    <span class="koboSpan" id="kobo.206.3">
     And if it’s needed, only the parts of the DOM that need to change are replaced or updated.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.207.1">
     To determine whether an update is needed (and where), React uses a concept called the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.208.1">
      virtual DOM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.209.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-196">
    <span class="koboSpan" id="kobo.210.1">
     The Virtual DOM vs the Real DOM
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.211.1">
     To determine
    </span>
    <a id="_idIndexMarker462">
    </a>
    <span class="koboSpan" id="kobo.212.1">
     whether (and where) a DOM update might be
    </span>
    <a id="_idIndexMarker463">
    </a>
    <span class="koboSpan" id="kobo.213.1">
     needed, React (specifically, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.214.1">
      react-dom
     </span>
    </code>
    <span class="koboSpan" id="kobo.215.1">
     package) compares the current DOM structure to the structure implied by the JSX code returned by the executed component functions.
    </span>
    <span class="koboSpan" id="kobo.215.2">
     If there’s a difference, the DOM is updated accordingly; otherwise, it’s left untouched.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.216.1">
     However, just as manipulating the DOM is relatively performance-intensive, reading the DOM is as well.
    </span>
    <span class="koboSpan" id="kobo.216.2">
     Even without changing anything in the DOM, reaching out to it, traversing the DOM elements, and deriving the structure from it is something you typically want to reduce to a minimum.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.217.1">
     If multiple component functions are executed and each triggers a process where the rendered DOM elements are read and compared to the JSX structure implied by the invoked component functions, the rendered DOM will be hit with read operations multiple times within a very short time frame.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.218.1">
     For bigger React apps that are made up of dozens, hundreds, or even thousands of components, it’s highly probable that dozens of component function executions might occur within
    </span>
    <a id="_idIndexMarker464">
    </a>
    <span class="koboSpan" id="kobo.219.1">
     a single second.
    </span>
    <span class="koboSpan" id="kobo.219.2">
     If that were to lead to the same
    </span>
    <a id="_idIndexMarker465">
    </a>
    <span class="koboSpan" id="kobo.220.1">
     amount of DOM read operations, there’s a quite high chance that the web app would feel slow or laggy to the user.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.221.1">
     That’s why React does not use the real DOM to determine whether any UI updates are needed.
    </span>
    <span class="koboSpan" id="kobo.221.2">
     Instead, it constructs and manages a virtual DOM internally—an in-memory representation of the DOM that’s rendered in the browser.
    </span>
    <span class="koboSpan" id="kobo.221.3">
     The virtual DOM is not a browser feature, but a React feature.
    </span>
    <span class="koboSpan" id="kobo.221.4">
     You can think of it as a deeply nested JavaScript object that reflects the components of your web app, including all the built-in HTML components such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.222.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.223.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.224.1">
      &lt;p&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.225.1">
     , etc.
    </span>
    <span class="koboSpan" id="kobo.225.2">
     (that is, the actual HTML elements that should show up on the page in the end).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.226.1">
     <img alt="A diagram of a computer program  Description automatically generated" src="image/B31339_10_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.227.1">
     Figure 10.2: React manages a virtual representation of the expected element structure
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.228.1">
     In the
    </span>
    <a id="_idIndexMarker466">
    </a>
    <span class="koboSpan" id="kobo.229.1">
     figure above, you can see that the expected element structure (in other words, the expected final DOM) is actually stored as a JavaScript
    </span>
    <a id="_idIndexMarker467">
    </a>
    <span class="koboSpan" id="kobo.230.1">
     object (or an array with a list of objects).
    </span>
    <span class="koboSpan" id="kobo.230.2">
     This is the virtual DOM, which is managed by React and used for identifying required DOM updates.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.231.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.232.1">
      Please note that the actual structure of the virtual DOM is more complex than the structure shown in the image.
     </span>
     <span class="koboSpan" id="kobo.232.2">
      The chart above aims to give you an idea of what the virtual DOM is and how it might look.
     </span>
     <span class="koboSpan" id="kobo.232.3">
      It’s not an exact technical representation of the JavaScript data structure managed by React.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.233.1">
     React manages this virtual DOM because comparing this virtual DOM to the expected UI state is much less performance-intensive than reaching out to the real DOM.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.234.1">
     Whenever a component function is called, React compares the returned JSX code to the respective virtual DOM nodes stored in the virtual DOM.
    </span>
    <span class="koboSpan" id="kobo.234.2">
     If differences are detected, React will determine which changes are needed to update the DOM.
    </span>
    <span class="koboSpan" id="kobo.234.3">
     Once the required adjustments are derived, these changes are applied to both the virtual and the real DOM.
    </span>
    <span class="koboSpan" id="kobo.234.4">
     This ensures that the real DOM reflects the expected UI state without having to reach out to it or update it all the time.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.235.1">
     <img alt="A diagram of a computer program  Description automatically generated" src="image/B31339_10_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.236.1">
     Figure 10.3: React detects required updates via the virtual DOM
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.237.1">
     In the figure above, you can see how React compares the current DOM and the expected
    </span>
    <a id="_idIndexMarker468">
    </a>
    <span class="koboSpan" id="kobo.238.1">
     structure with the help of the virtual DOM first, before reaching out to the real DOM to manipulate it accordingly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.239.1">
     As a React
    </span>
    <a id="_idIndexMarker469">
    </a>
    <span class="koboSpan" id="kobo.240.1">
     developer, you don’t need to actively interact with the virtual DOM.
    </span>
    <span class="koboSpan" id="kobo.240.2">
     Technically, you don’t even need to know that it exists and that React uses it internally.
    </span>
    <span class="koboSpan" id="kobo.240.3">
     But it’s always helpful to understand the tool (React, in this case) you’re working with.
    </span>
    <span class="koboSpan" id="kobo.240.4">
     It’s good to know that React does various performance optimizations for you and that you get those on top of the many other features that make your life as a developer (hopefully) easier.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-197">
    <span class="koboSpan" id="kobo.241.1">
     State Batching
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.242.1">
     Since React
    </span>
    <a id="_idIndexMarker470">
    </a>
    <span class="koboSpan" id="kobo.243.1">
     uses the concept of a virtual DOM, frequent
    </span>
    <a id="_idIndexMarker471">
    </a>
    <span class="koboSpan" id="kobo.244.1">
     component function executions aren’t a huge problem.
    </span>
    <span class="koboSpan" id="kobo.244.2">
     But of course, even if comparisons are only conducted virtually, there is still some internal code that must be executed.
    </span>
    <span class="koboSpan" id="kobo.244.3">
     Even with the virtual DOM, performance could degrade if lots of unnecessary (and at the same time quite complex) virtual DOM comparisons must be made.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.245.1">
     One scenario where unnecessary comparisons are performed is in the execution of multiple sequential state updates.
    </span>
    <span class="koboSpan" id="kobo.245.2">
     Since each state update causes the component function to
    </span>
    <a id="_idIndexMarker472">
    </a>
    <span class="koboSpan" id="kobo.246.1">
     be executed again (as well as all potential nested components), multiple state updates
    </span>
    <a id="_idIndexMarker473">
    </a>
    <span class="koboSpan" id="kobo.247.1">
     that are performed together (for example, in the same event handler function) will cause multiple component function invocations.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.248.1">
     Consider this example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.249.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.250.1">App</span></span><span class="koboSpan" id="kobo.251.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.252.1">const</span></span><span class="koboSpan" id="kobo.253.1"> [counter, setCounter] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.254.1">useState</span></span><span class="koboSpan" id="kobo.255.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.256.1">0</span></span><span class="koboSpan" id="kobo.257.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.258.1">const</span></span><span class="koboSpan" id="kobo.259.1"> [showCounter, setShowCounter] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.260.1">useState</span></span><span class="koboSpan" id="kobo.261.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.262.1">false</span></span><span class="koboSpan" id="kobo.263.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.264.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.265.1">handleIncCounter</span></span><span class="koboSpan" id="kobo.266.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.267.1">setCounter</span></span><span class="koboSpan" id="kobo.268.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.269.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.270.1">prevCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.271.1">) =&gt;</span></span><span class="koboSpan" id="kobo.272.1"> prevCounter + </span><span class="hljs-number"><span class="koboSpan" id="kobo.273.1">1</span></span><span class="koboSpan" id="kobo.274.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.275.1">setShowCounter</span></span><span class="koboSpan" id="kobo.276.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.277.1">true</span></span><span class="koboSpan" id="kobo.278.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.279.1">return</span></span><span class="koboSpan" id="kobo.280.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.281.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.282.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.283.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.284.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.285.1">Click to increment + show or hide the counter</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.286.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.287.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.288.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.289.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.290.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.291.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.292.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.293.1">{handleIncCounter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.294.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.295.1">Increment</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.296.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.297.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.298.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.299.1">      {showCounter &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.300.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.301.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.302.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.303.1">Counter: {counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.304.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.305.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.306.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.307.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.308.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.309.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.310.1">
     This component contains two state values:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.311.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.312.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.313.1">
      showCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.314.1">
     .
    </span>
    <span class="koboSpan" id="kobo.314.2">
     When the button is clicked, the counter is incremented by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.315.1">
      1
     </span>
    </code>
    <span class="koboSpan" id="kobo.316.1">
     .
    </span>
    <span class="koboSpan" id="kobo.316.2">
     In addition,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.317.1">
      showCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.318.1">
     is set to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.319.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.320.1">
     .
    </span>
    <span class="koboSpan" id="kobo.320.2">
     Therefore, the first time the button is clicked, both the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.321.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.322.1">
     and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.323.1">
      showCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.324.1">
     states are changed (because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.325.1">
      showCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.326.1">
     is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.327.1">
      false
     </span>
    </code>
    <span class="koboSpan" id="kobo.328.1">
     initially).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.329.1">
     Since two state values are changed, the expectation would be that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.330.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.331.1">
     component function is called twice by React—because every state update causes the connected component function to be invoked again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.332.1">
     However, if you add a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.333.1">
      console.log()
     </span>
    </code>
    <span class="koboSpan" id="kobo.334.1">
     statement to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.335.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.336.1">
     component function (to track how often it’s executed), you will see that it’s only invoked once, when the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.337.1">
      Increment
     </span>
    </code>
    <span class="koboSpan" id="kobo.338.1">
     button is clicked:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.339.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.340.1">
     Figure 10.4: Only one console log message is displayed
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.341.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.342.1">
      If you see two log messages instead of one, make sure you’re not using React’s “Strict Mode.”
     </span>
     <span class="koboSpan" id="kobo.342.2">
      When running in Strict Mode during development, React executes component functions more often than it normally would.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.343.1">
      If necessary, you can disable Strict Mode by removing the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.344.1">
       &lt;React.StrictMode&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.345.1">
      component from your
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.346.1">
       main.jsx
      </span>
     </code>
     <span class="koboSpan" id="kobo.347.1">
      file.
     </span>
     <span class="koboSpan" id="kobo.347.2">
      You will learn more about React’s Strict Mode toward the end of this chapter.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.348.1">
     This behavior
    </span>
    <a id="_idIndexMarker474">
    </a>
    <span class="koboSpan" id="kobo.349.1">
     is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.350.1">
      state batching
     </span>
    </strong>
    <span class="koboSpan" id="kobo.351.1">
     .
    </span>
    <span class="koboSpan" id="kobo.351.2">
     React performs state batching
    </span>
    <a id="_idIndexMarker475">
    </a>
    <span class="koboSpan" id="kobo.352.1">
     when multiple state updates are initiated from the same place in your code (e.g., from inside the same event handler function).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.353.1">
     It’s a built-in functionality that ensures that your component functions are not called more often than needed.
    </span>
    <span class="koboSpan" id="kobo.353.2">
     This prevents unnecessary virtual DOM comparisons.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.354.1">
     State batching is a very useful mechanism.
    </span>
    <span class="koboSpan" id="kobo.354.2">
     But there is another kind of unnecessary component evaluation that it does not prevent: child component functions that get executed when the parent component function is called.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-198">
    <span class="koboSpan" id="kobo.355.1">
     Avoiding Unnecessary Child Component Evaluations
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.356.1">
     Whenever
    </span>
    <a id="_idIndexMarker476">
    </a>
    <span class="koboSpan" id="kobo.357.1">
     a component function is invoked (because its state changed, for example), any nested component functions will be called as well.
    </span>
    <span class="koboSpan" id="kobo.357.2">
     See the first section of this chapter for more details.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.358.1">
     As you saw in the example in the first section of this chapter, it is often the case that those nested components don’t actually need to be evaluated again.
    </span>
    <span class="koboSpan" id="kobo.358.2">
     They might not depend on the state value that changed in the parent component.
    </span>
    <span class="koboSpan" id="kobo.358.3">
     They might not even depend on any values of the parent component at all.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.359.1">
     Here’s
    </span>
    <a id="_idIndexMarker477">
    </a>
    <span class="koboSpan" id="kobo.360.1">
     an example where the parent component function contains some state that is not used by the child component:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.361.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.362.1">Error</span></span><span class="koboSpan" id="kobo.363.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.364.1">{ message }</span></span><span class="koboSpan" id="kobo.365.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.366.1">if</span></span><span class="koboSpan" id="kobo.367.1"> (!message) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.368.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.369.1">null</span></span><span class="koboSpan" id="kobo.370.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.371.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.372.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.373.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.374.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.375.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.376.1">{classes.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.377.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.378.1">{message}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.379.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.380.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.381.1">&gt;</span></span><span class="koboSpan" id="kobo.382.1">;
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.383.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.384.1">Form</span></span><span class="koboSpan" id="kobo.385.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.386.1">const</span></span><span class="koboSpan" id="kobo.387.1"> [enteredEmail, setEnteredEmail] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.388.1">useState</span></span><span class="koboSpan" id="kobo.389.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.390.1">''</span></span><span class="koboSpan" id="kobo.391.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.392.1">const</span></span><span class="koboSpan" id="kobo.393.1"> [errorMessage, setErrorMessage] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.394.1">useState</span></span><span class="koboSpan" id="kobo.395.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.396.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.397.1">handleUpdateEmail</span></span><span class="koboSpan" id="kobo.398.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.399.1">event</span></span><span class="koboSpan" id="kobo.400.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.401.1">setEnteredEmail</span></span><span class="koboSpan" id="kobo.402.1">(event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.403.1">target</span></span><span class="koboSpan" id="kobo.404.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.405.1">value</span></span><span class="koboSpan" id="kobo.406.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.407.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.408.1">handleSubmit</span></span><span class="koboSpan" id="kobo.409.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.410.1">event</span></span><span class="koboSpan" id="kobo.411.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.412.1">preventDefault</span></span><span class="koboSpan" id="kobo.413.1">();
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.414.1">if</span></span><span class="koboSpan" id="kobo.415.1"> (!enteredEmail.</span><span class="hljs-title"><span class="koboSpan" id="kobo.416.1">endsWith</span></span><span class="koboSpan" id="kobo.417.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.418.1">'.com'</span></span><span class="koboSpan" id="kobo.419.1">)) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.420.1">setErrorMessage</span></span><span class="koboSpan" id="kobo.421.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.422.1">'Email must end with .com.'</span></span><span class="koboSpan" id="kobo.423.1">);
    }
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.424.1">return</span></span><span class="koboSpan" id="kobo.425.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.426.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.427.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.428.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.429.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.430.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.431.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.432.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.433.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.434.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.435.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.436.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.437.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.438.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.439.1">{classes.control}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.440.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.441.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.442.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.443.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.444.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.445.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.446.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.447.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.448.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.449.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.450.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.451.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.452.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.453.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.454.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.455.1">"email"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.456.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.457.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.458.1">"email"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.459.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.460.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.461.1">{enteredEmail}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.462.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.463.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.464.1">{handleUpdateEmail}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.465.1">        /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.466.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.467.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.468.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.469.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.470.1">Error</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.471.1">message</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.472.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.473.1">{errorMessage}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.474.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.475.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.476.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.477.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.478.1">Sign Up</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.479.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.480.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.481.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.482.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.483.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.484.1">&gt;</span></span><span class="koboSpan" id="kobo.485.1">
  );
}
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.486.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.487.1">
      You can find the complete example code on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/examples/03-memo">
      <span class="url">
       <span class="koboSpan" id="kobo.488.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/examples/03-memo
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.489.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.490.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.491.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.492.1">
     component relies on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.493.1">
      message
     </span>
    </code>
    <span class="koboSpan" id="kobo.494.1">
     prop, which is set to the value
    </span>
    <a id="_idIndexMarker478">
    </a>
    <span class="koboSpan" id="kobo.495.1">
     stored in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.496.1">
      errorMessage
     </span>
    </code>
    <span class="koboSpan" id="kobo.497.1">
     state of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.498.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.499.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.499.2">
     However, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.500.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.501.1">
     component also manages an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.502.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.503.1">
     state, which is not used (not received via props) by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.504.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.505.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.505.2">
     Therefore, changes to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.506.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.507.1">
     state will cause the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.508.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.509.1">
     component to be executed again, despite the component not needing that value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.510.1">
     You can track the unnecessary
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.511.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.512.1">
     component function invocations by adding a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.513.1">
      console.log()
     </span>
    </code>
    <span class="koboSpan" id="kobo.514.1">
     statement to that component function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.515.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.516.1">Error</span></span><span class="koboSpan" id="kobo.517.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.518.1">{ message }</span></span><span class="koboSpan" id="kobo.519.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.520.1">console</span></span><span class="koboSpan" id="kobo.521.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.522.1">log</span></span><span class="koboSpan" id="kobo.523.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.524.1">'&lt;Error /&gt; component function is executed.'</span></span><span class="koboSpan" id="kobo.525.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.526.1">if</span></span><span class="koboSpan" id="kobo.527.1"> (!message) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.528.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.529.1">null</span></span><span class="koboSpan" id="kobo.530.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.531.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.532.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.533.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.534.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.535.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.536.1">{classes.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.537.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.538.1">{message}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.539.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.540.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.541.1">&gt;</span></span><span class="koboSpan" id="kobo.542.1">;
}
</span></code></pre>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.543.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.544.1">
     Figure 10.5: The Error component function is executed for every keystroke
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.545.1">
     In the preceding screenshot, you can see that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.546.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.547.1">
     component function is executed for every keystroke on the input field (that is, once for every
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.548.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.549.1">
     state change).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.550.1">
     This is in line with what you have learned previously, but it is also unnecessary.
    </span>
    <span class="koboSpan" id="kobo.550.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.551.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.552.1">
     component does depend on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.553.1">
      errorMessage
     </span>
    </code>
    <span class="koboSpan" id="kobo.554.1">
     state and should certainly be re-evaluated whenever that state changes, but executing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.555.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.556.1">
     component function because the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.557.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.558.1">
     state value was updated is clearly not required.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.559.1">
     That’s
    </span>
    <a id="_idIndexMarker479">
    </a>
    <span class="koboSpan" id="kobo.560.1">
     why React offers another built-in function that you can use to control (and prevent) this behavior: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.561.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.562.1">
     function.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.563.1">
      memo
     </span>
    </code>
    <span class="koboSpan" id="kobo.564.1">
     is imported from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.565.1">
      react
     </span>
    </code>
    <span class="koboSpan" id="kobo.566.1">
     and is used like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.567.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.568.1"> { memo } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.569.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.570.1">'react'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.571.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.572.1">import</span></span><span class="koboSpan" id="kobo.573.1"> classes </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.574.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.575.1">'./Error.module.css'</span></span><span class="koboSpan" id="kobo.576.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.577.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.578.1">Error</span></span><span class="koboSpan" id="kobo.579.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.580.1">{ message }</span></span><span class="koboSpan" id="kobo.581.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.582.1">console</span></span><span class="koboSpan" id="kobo.583.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.584.1">log</span></span><span class="koboSpan" id="kobo.585.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.586.1">'&lt;Error /&gt; component function is executed.'</span></span><span class="koboSpan" id="kobo.587.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.588.1">if</span></span><span class="koboSpan" id="kobo.589.1"> (!message) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.590.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.591.1">null</span></span><span class="koboSpan" id="kobo.592.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.593.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.594.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.595.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.596.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.597.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.598.1">{classes.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.599.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.600.1">{message}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.601.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.602.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.603.1">&gt;</span></span><span class="koboSpan" id="kobo.604.1">;
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.605.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.606.1">default</span></span> <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.607.1">memo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.608.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.609.1">Error</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.610.1">);</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.611.1">
     You wrap the component function that should be protected from unnecessary, parent-initiated re-evaluations with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.612.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.613.1">
     .
    </span>
    <span class="koboSpan" id="kobo.613.2">
     This causes React to check whether the component’s props did change, compared to the last time the component function was called.
    </span>
    <span class="koboSpan" id="kobo.613.3">
     If prop values are equal, React knows that the component function does not need to be executed again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.614.1">
     By adding
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.615.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.616.1">
     , the unnecessary component function invocations are avoided, as shown below:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.617.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.618.1">
     Figure 10.6: No console log messages appear
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.619.1">
     As you can see in the figure, no messages are printed to the console.
    </span>
    <span class="koboSpan" id="kobo.619.2">
     This proves that unnecessary component executions are avoided (remember: before adding
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.620.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.621.1">
     , many
    </span>
    <a id="_idIndexMarker480">
    </a>
    <span class="koboSpan" id="kobo.622.1">
     messages were printed to the console).
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.623.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.624.1">
     also takes an optional second argument that can be used to add your own logic to determine whether prop values have changed or not.
    </span>
    <span class="koboSpan" id="kobo.624.2">
     This can be useful if you’re dealing with more complex prop values (e.g., objects or arrays) where custom comparison logic might be needed, as in the following example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.625.1">memo</span></span><span class="koboSpan" id="kobo.626.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.627.1">SomeComponent</span></span><span class="koboSpan" id="kobo.628.1">, </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.629.1">function</span></span><span class="koboSpan" id="kobo.630.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.631.1">prevProps, nextProps</span></span><span class="koboSpan" id="kobo.632.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.633.1">return</span></span><span class="koboSpan" id="kobo.634.1"> prevProps.</span><span class="hljs-property"><span class="koboSpan" id="kobo.635.1">user</span></span><span class="koboSpan" id="kobo.636.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.637.1">firstName</span></span><span class="koboSpan" id="kobo.638.1"> !== nextProps.</span><span class="hljs-property"><span class="koboSpan" id="kobo.639.1">user</span></span><span class="koboSpan" id="kobo.640.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.641.1">firstName</span></span><span class="koboSpan" id="kobo.642.1">;
});
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.643.1">
     The (optional) second argument passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.644.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.645.1">
     must be a function that automatically receives the previous props object and the next props object.
    </span>
    <span class="koboSpan" id="kobo.645.2">
     The function then must return
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.646.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.647.1">
     if the component (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.648.1">
      SomeComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.649.1">
     , in this example) should be re-evaluated and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.650.1">
      false
     </span>
    </code>
    <span class="koboSpan" id="kobo.651.1">
     if it should not.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.652.1">
     Often, the second argument is not needed because the default behavior of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.653.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.654.1">
     (where it compares all props for inequality) is exactly what you need.
    </span>
    <span class="koboSpan" id="kobo.654.2">
     But if more customization or control is needed,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.655.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.656.1">
     allows you to add your custom logic.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.657.1">
     With
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.658.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.659.1">
     in your toolbox, it’s tempting to wrap every React component function with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.660.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.661.1">
     .
    </span>
    <span class="koboSpan" id="kobo.661.2">
     Why wouldn’t you do it?
    </span>
    <span class="koboSpan" id="kobo.661.3">
     After all, it avoids unnecessary component function executions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.662.1">
     You definitely can use it on all components—but it’s not necessarily helpful to do that because avoiding unnecessary component re-evaluations by using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.663.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.664.1">
     comes at a cost: comparing props (old versus new) also requires some code to run.
    </span>
    <span class="koboSpan" id="kobo.664.2">
     It’s not “free.”
    </span>
    <span class="koboSpan" id="kobo.664.3">
     It’s not a huge cost, though.
    </span>
    <span class="koboSpan" id="kobo.664.4">
     Using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.665.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.666.1">
     on many (or all) components will likely not slow down your app significantly.
    </span>
    <span class="koboSpan" id="kobo.666.2">
     But it’s still unnecessary if you have components that do need to be re-evaluated a lot.
    </span>
    <span class="koboSpan" id="kobo.666.3">
     Using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.667.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.668.1">
     on components that receive props that change a lot simply does not do anything useful.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.669.1">
     Hence
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.670.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.671.1">
     makes the most sense if you have relatively simple props (i.e., props with no deeply nested objects that you need to compare manually with a custom comparison function) and most parent component state changes don’t affect those props of the child component.
    </span>
    <span class="koboSpan" id="kobo.671.2">
     And even in those cases, if you have a relatively simple component function (i.e., without any complex logic in it), using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.672.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.673.1">
     still might not yield any measurable benefit.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.674.1">
     The
    </span>
    <a id="_idIndexMarker481">
    </a>
    <span class="koboSpan" id="kobo.675.1">
     example code above (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.676.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.677.1">
     component) is a good example: in theory, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.678.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.679.1">
     makes sense here.
    </span>
    <span class="koboSpan" id="kobo.679.2">
     Most state changes in the parent component won’t affect
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.680.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.681.1">
     , and the prop comparison will be very simple because it’s just one prop (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.682.1">
      message
     </span>
    </code>
    <span class="koboSpan" id="kobo.683.1">
     prop, which holds a string) that must be compared.
    </span>
    <span class="koboSpan" id="kobo.683.2">
     But despite that, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.684.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.685.1">
     to wrap
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.686.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.687.1">
     will very likely not be worth it.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.688.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.689.1">
     is an extremely basic component with no complex logic in it.
    </span>
    <span class="koboSpan" id="kobo.689.2">
     It simply doesn’t matter if the component function gets invoked frequently.
    </span>
    <span class="koboSpan" id="kobo.689.3">
     Hence, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.690.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.691.1">
     in this spot would be absolutely fine—but so is not using it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.692.1">
     A great spot to use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.693.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.694.1">
     , on the other hand, is a component that’s relatively close to the top of the component tree (or of a deeply nested branch of components in the component tree).
    </span>
    <span class="koboSpan" id="kobo.694.2">
     If you are able to avoid unnecessary executions of that one component via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.695.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.696.1">
     , you’ll also implicitly avoid unnecessary executions of all nested components beneath that one component.
    </span>
    <span class="koboSpan" id="kobo.696.2">
     This is illustrated in the diagram below:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.697.1">
     <img alt="img" src="image/B31339_10_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.698.1">
     Figure 10.7: Using memo at the start of a component tree branch
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.699.1">
     In the
    </span>
    <a id="_idIndexMarker482">
    </a>
    <span class="koboSpan" id="kobo.700.1">
     preceding figure,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.701.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.702.1">
     is used on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.703.1">
      Shop
     </span>
    </code>
    <span class="koboSpan" id="kobo.704.1">
     component, which has multiple nested descendent components.
    </span>
    <span class="koboSpan" id="kobo.704.2">
     Without
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.705.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.706.1">
     , whenever the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.707.1">
      Shop
     </span>
    </code>
    <span class="koboSpan" id="kobo.708.1">
     component function gets invoked,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.709.1">
      Products
     </span>
    </code>
    <span class="koboSpan" id="kobo.710.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.711.1">
      ProdItem
     </span>
    </code>
    <span class="koboSpan" id="kobo.712.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.713.1">
      Cart
     </span>
    </code>
    <span class="koboSpan" id="kobo.714.1">
     , etc.
    </span>
    <span class="koboSpan" id="kobo.714.2">
     would also be executed.
    </span>
    <span class="koboSpan" id="kobo.714.3">
     With
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.715.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.716.1">
     , assuming that it’s able to avoid some unnecessary executions of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.717.1">
      Shop
     </span>
    </code>
    <span class="koboSpan" id="kobo.718.1">
     component function, all those descendent components are no longer evaluated.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-199">
    <span class="koboSpan" id="kobo.719.1">
     Avoiding Costly Computations
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.720.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.721.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.722.1">
     function can help avoid unnecessary component function executions.
    </span>
    <span class="koboSpan" id="kobo.722.2">
     As mentioned in the previous section, this is especially valuable if a component function performs
    </span>
    <a id="_idIndexMarker483">
    </a>
    <span class="koboSpan" id="kobo.723.1">
     a lot of work (e.g., sorting a long list).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.724.1">
     But as a React developer, you will also encounter situations in which you have a work-intensive component that needs to be executed again because some prop value changed.
    </span>
    <span class="koboSpan" id="kobo.724.2">
     In such cases, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.725.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.726.1">
     won’t prevent the component function from executing again.
    </span>
    <span class="koboSpan" id="kobo.726.2">
     However, the prop that changed might not be needed for the performance-intensive task that is performed as part of the component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.727.1">
     Consider the following example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.728.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.729.1">sortItems</span></span><span class="koboSpan" id="kobo.730.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.731.1">items</span></span><span class="koboSpan" id="kobo.732.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.733.1">console</span></span><span class="koboSpan" id="kobo.734.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.735.1">log</span></span><span class="koboSpan" id="kobo.736.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.737.1">'Sorting'</span></span><span class="koboSpan" id="kobo.738.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.739.1">return</span></span><span class="koboSpan" id="kobo.740.1"> items.</span><span class="hljs-title"><span class="koboSpan" id="kobo.741.1">sort</span></span><span class="koboSpan" id="kobo.742.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.743.1">function</span></span><span class="koboSpan" id="kobo.744.1"> (</span><span class="hljs-params"><span class="koboSpan" id="kobo.745.1">a, b</span></span><span class="koboSpan" id="kobo.746.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.747.1">if</span></span><span class="koboSpan" id="kobo.748.1"> (a.</span><span class="hljs-property"><span class="koboSpan" id="kobo.749.1">id</span></span><span class="koboSpan" id="kobo.750.1"> &gt; b.</span><span class="hljs-property"><span class="koboSpan" id="kobo.751.1">id</span></span><span class="koboSpan" id="kobo.752.1">) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.753.1">return</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.754.1">1</span></span><span class="koboSpan" id="kobo.755.1">;
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.756.1">else</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.757.1">if</span></span><span class="koboSpan" id="kobo.758.1"> (a.</span><span class="hljs-property"><span class="koboSpan" id="kobo.759.1">id</span></span><span class="koboSpan" id="kobo.760.1"> &lt; b.</span><span class="hljs-property"><span class="koboSpan" id="kobo.761.1">id</span></span><span class="koboSpan" id="kobo.762.1">) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.763.1">return</span></span><span class="koboSpan" id="kobo.764.1"> -</span><span class="hljs-number"><span class="koboSpan" id="kobo.765.1">1</span></span><span class="koboSpan" id="kobo.766.1">;
    }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.767.1">return</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.768.1">0</span></span><span class="koboSpan" id="kobo.769.1">;
  });
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.770.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.771.1">List</span></span><span class="koboSpan" id="kobo.772.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.773.1">{ items, maxNumber }</span></span><span class="koboSpan" id="kobo.774.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.775.1">const</span></span><span class="koboSpan" id="kobo.776.1"> sortedItems = </span><span class="hljs-title"><span class="koboSpan" id="kobo.777.1">sortItems</span></span><span class="koboSpan" id="kobo.778.1">(items);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.779.1">const</span></span><span class="koboSpan" id="kobo.780.1"> listItems = sortedItems.</span><span class="hljs-title"><span class="koboSpan" id="kobo.781.1">slice</span></span><span class="koboSpan" id="kobo.782.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.783.1">0</span></span><span class="koboSpan" id="kobo.784.1">, maxNumber);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.785.1">return</span></span><span class="koboSpan" id="kobo.786.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.787.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.788.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.789.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.790.1">      {listItems.map((item) =&gt; (</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.791.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.792.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.793.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.794.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.795.1">{item.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.796.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.797.1">          {item.title} (ID: {item.id})</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.798.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.799.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.800.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.801.1">      ))}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.802.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.803.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.804.1">&gt;</span></span><span class="koboSpan" id="kobo.805.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.806.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.807.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.808.1">List</span></span><span class="koboSpan" id="kobo.809.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.810.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.811.1">
      List
     </span>
    </code>
    <span class="koboSpan" id="kobo.812.1">
     component
    </span>
    <a id="_idIndexMarker484">
    </a>
    <span class="koboSpan" id="kobo.813.1">
     receives two prop values:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.814.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.815.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.816.1">
      maxNumber
     </span>
    </code>
    <span class="koboSpan" id="kobo.817.1">
     .
    </span>
    <span class="koboSpan" id="kobo.817.2">
     It then calls
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.818.1">
      sortItems()
     </span>
    </code>
    <span class="koboSpan" id="kobo.819.1">
     to sort the items by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.820.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.821.1">
     .
    </span>
    <span class="koboSpan" id="kobo.821.2">
     Thereafter, the sorted list is limited to a certain amount (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.822.1">
      maxNumber
     </span>
    </code>
    <span class="koboSpan" id="kobo.823.1">
     ) of items.
    </span>
    <span class="koboSpan" id="kobo.823.2">
     As a last step, the sorted and shortened list is then rendered to the screen via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.824.1">
      map()
     </span>
    </code>
    <span class="koboSpan" id="kobo.825.1">
     in the JSX code.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.826.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.827.1">
      A full example app can be found on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/examples/04-usememo">
      <span class="url">
       <span class="koboSpan" id="kobo.828.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/examples/04-usememo
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.829.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.830.1">
     Depending on the number of items passed to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.831.1">
      List
     </span>
    </code>
    <span class="koboSpan" id="kobo.832.1">
     component, sorting it can take a significant amount of time (for very long lists, even up to a few seconds).
    </span>
    <span class="koboSpan" id="kobo.832.2">
     It’s definitely not an operation you want to perform unnecessarily or too frequently.
    </span>
    <span class="koboSpan" id="kobo.832.3">
     The list needs to be sorted whenever
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.833.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.834.1">
     changes, but it should not be sorted if
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.835.1">
      maxNumber
     </span>
    </code>
    <span class="koboSpan" id="kobo.836.1">
     changes—because this does not impact the items in the list (i.e., it doesn’t affect the order).
    </span>
    <span class="koboSpan" id="kobo.836.2">
     But with the
    </span>
    <a id="_idIndexMarker485">
    </a>
    <span class="koboSpan" id="kobo.837.1">
     code snippet shared above,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.838.1">
      sortItems()
     </span>
    </code>
    <span class="koboSpan" id="kobo.839.1">
     will be executed whenever either of the two prop values changes, no matter whether it’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.840.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.841.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.842.1">
      maxNumber
     </span>
    </code>
    <span class="koboSpan" id="kobo.843.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.844.1">
     As a result, when running the app and changing the number of displayed items, you can see multiple
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.845.1">
      "Sorting"
     </span>
    </code>
    <span class="koboSpan" id="kobo.846.1">
     log messages—implying that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.847.1">
      sortItems()
     </span>
    </code>
    <span class="koboSpan" id="kobo.848.1">
     was executed every time the number of items was changed.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.849.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_08.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.850.1">
     Figure 10.8: Multiple “Sorting” log messages appear in the console
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.851.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.852.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.853.1">
     function won’t
    </span>
    <a id="_idIndexMarker486">
    </a>
    <span class="koboSpan" id="kobo.854.1">
     help here because the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.855.1">
      List
     </span>
    </code>
    <span class="koboSpan" id="kobo.856.1">
     component function should (and will) execute whenever
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.857.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.858.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.859.1">
      maxNumber
     </span>
    </code>
    <span class="koboSpan" id="kobo.860.1">
     changes.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.861.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.862.1">
     does not help control partial code execution inside the component function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.863.1">
     For that, you can use another feature provided by React: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.864.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.865.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.866.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.867.1">
     can be
    </span>
    <a id="_idIndexMarker487">
    </a>
    <span class="koboSpan" id="kobo.868.1">
     used to wrap a compute-intensive operation.
    </span>
    <span class="koboSpan" id="kobo.868.2">
     For it to work correctly, you also must define a list of dependencies that should cause the operation to be executed again.
    </span>
    <span class="koboSpan" id="kobo.868.3">
     To some extent, it’s similar to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.869.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.870.1">
     (which also wraps an operation and defines a list of dependencies), but the key difference is that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.871.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.872.1">
     runs at the same time as the rest of the code in the component function, whereas
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.873.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.874.1">
     executes the wrapped logic after the component function execution has finished.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.875.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.876.1">
     should not be used for optimizing compute-intensive tasks but for side effects.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.877.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.878.1">
     , on the
    </span>
    <a id="_idIndexMarker488">
    </a>
    <span class="koboSpan" id="kobo.879.1">
     other hand, exists to control the execution of performance-intensive tasks.
    </span>
    <span class="koboSpan" id="kobo.879.2">
     Applied to the example mentioned above, the code can be adjusted like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.880.1">import</span></span><span class="koboSpan" id="kobo.881.1"> { useMemo } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.882.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.883.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.884.1">react'</span></span><span class="koboSpan" id="kobo.885.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.886.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.887.1">List</span></span><span class="koboSpan" id="kobo.888.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.889.1">{ items, maxNumber }</span></span><span class="koboSpan" id="kobo.890.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.891.1">const</span></span><span class="koboSpan" id="kobo.892.1"> sortedItems = </span><span class="hljs-title"><span class="koboSpan" id="kobo.893.1">useMemo</span></span><span class="koboSpan" id="kobo.894.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.895.1">function</span></span><span class="koboSpan" id="kobo.896.1">() {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.897.1">console</span></span><span class="koboSpan" id="kobo.898.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.899.1">log</span></span><span class="koboSpan" id="kobo.900.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.901.1">'Sorting'</span></span><span class="koboSpan" id="kobo.902.1">);
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.903.1">return</span></span><span class="koboSpan" id="kobo.904.1"> items.</span><span class="hljs-title"><span class="koboSpan" id="kobo.905.1">sort</span></span><span class="koboSpan" id="kobo.906.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.907.1">function</span></span><span class="koboSpan" id="kobo.908.1"> (</span><span class="hljs-params"><span class="koboSpan" id="kobo.909.1">a, b</span></span><span class="koboSpan" id="kobo.910.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.911.1">if</span></span><span class="koboSpan" id="kobo.912.1"> (a.</span><span class="hljs-property"><span class="koboSpan" id="kobo.913.1">id</span></span><span class="koboSpan" id="kobo.914.1"> &gt; b.</span><span class="hljs-property"><span class="koboSpan" id="kobo.915.1">id</span></span><span class="koboSpan" id="kobo.916.1">) {
          </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.917.1">return</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.918.1">1</span></span><span class="koboSpan" id="kobo.919.1">;
        } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.920.1">else</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.921.1">if</span></span><span class="koboSpan" id="kobo.922.1"> (a.</span><span class="hljs-property"><span class="koboSpan" id="kobo.923.1">id</span></span><span class="koboSpan" id="kobo.924.1"> &lt; b.</span><span class="hljs-property"><span class="koboSpan" id="kobo.925.1">id</span></span><span class="koboSpan" id="kobo.926.1">) {
          </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.927.1">return</span></span><span class="koboSpan" id="kobo.928.1"> -</span><span class="hljs-number"><span class="koboSpan" id="kobo.929.1">1</span></span><span class="koboSpan" id="kobo.930.1">;
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.931.1">return</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.932.1">0</span></span><span class="koboSpan" id="kobo.933.1">;
      });
    },
    [items]
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.934.1">const</span></span><span class="koboSpan" id="kobo.935.1"> listItems = sortedItems.</span><span class="hljs-title"><span class="koboSpan" id="kobo.936.1">slice</span></span><span class="koboSpan" id="kobo.937.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.938.1">0</span></span><span class="koboSpan" id="kobo.939.1">, maxNumber);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.940.1">return</span></span><span class="koboSpan" id="kobo.941.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.942.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.943.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.944.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.945.1">      {listItems.map((item) =&gt; (</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.946.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.947.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.948.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.949.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.950.1">{item.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.951.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.952.1">          {item.title} (ID: {item.id})</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.953.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.954.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.955.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.956.1">      ))}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.957.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.958.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.959.1">&gt;</span></span><span class="koboSpan" id="kobo.960.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.961.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.962.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.963.1">List</span></span><span class="koboSpan" id="kobo.964.1">;
</span></code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.965.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.966.1">
     wraps an anonymous function (the function that previously existed as a named function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.967.1">
      sortItems
     </span>
    </code>
    <span class="koboSpan" id="kobo.968.1">
     ), which contains the entire sorting code.
    </span>
    <span class="koboSpan" id="kobo.968.2">
     The second argument passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.969.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.970.1">
     is the array of dependencies for which the function should be executed again (when a dependency value changes).
    </span>
    <span class="koboSpan" id="kobo.970.2">
     In this case,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.971.1">
      items
     </span>
    </code>
    <span class="koboSpan" id="kobo.972.1">
     is the only dependency of the wrapped function, and so that value is added to the array.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.973.1">
     With
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.974.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.975.1">
     used like this, the sorting logic will only execute when items change, not when
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.976.1">
      maxNumber
     </span>
    </code>
    <span class="koboSpan" id="kobo.977.1">
     (or anything else) changes.
    </span>
    <span class="koboSpan" id="kobo.977.2">
     As a result, you see
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.978.1">
      "
     </span>
    </code>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.979.1">
      Sorting"
     </span>
    </code>
    <span class="koboSpan" id="kobo.980.1">
     being output in the
    </span>
    <a id="_idIndexMarker489">
    </a>
    <span class="koboSpan" id="kobo.981.1">
     developer tools console only once:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.982.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_09.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.983.1">
     Figure 10.9: Only one “Sorting” output in the console
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.984.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.985.1">
     can be very useful for controlling code execution inside of your component functions.
    </span>
    <span class="koboSpan" id="kobo.985.2">
     It can be a great addition to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.986.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.987.1">
     (which controls the overall component function execution).
    </span>
    <span class="koboSpan" id="kobo.987.2">
     But, also like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.988.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.989.1">
     , you should not start wrapping all your logic with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.990.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.991.1">
     .
    </span>
    <span class="koboSpan" id="kobo.991.2">
     Only use it for very performance-intensive computations since checking for dependency changes and storing and retrieving past computation results (which
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.992.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.993.1">
     does internally) also comes at a performance cost.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-200">
    <span class="koboSpan" id="kobo.994.1">
     Utilizing useCallback()
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.995.1">
     In the previous chapters, you learned about
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.996.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.997.1">
     .
    </span>
    <span class="koboSpan" id="kobo.997.2">
     Just like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.998.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.999.1">
     can be used for “expensive” calculations,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1000.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1001.1">
     can be used to prevent unnecessary function
    </span>
    <a id="_idIndexMarker490">
    </a>
    <span class="koboSpan" id="kobo.1002.1">
     re-creations.
    </span>
    <span class="koboSpan" id="kobo.1002.2">
     In the context of this chapter,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1003.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1004.1">
     can be helpful because, in conjunction with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1005.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1006.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1007.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1008.1">
     , it can help you avoid unnecessary code execution.
    </span>
    <span class="koboSpan" id="kobo.1008.2">
     It can help you in cases where a function is passed as a prop (i.e., where you might use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1009.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1010.1">
     ) or is used as a dependency in some “expensive” computation (i.e., possibly solved via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1011.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1012.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1013.1">
     Here’s an example where
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1014.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1015.1">
     can be combined with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1016.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1017.1">
     to prevent unnecessary component function executions:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1018.1">import</span></span><span class="koboSpan" id="kobo.1019.1"> { memo } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1020.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1021.1">'react'</span></span><span class="koboSpan" id="kobo.1022.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1023.1">import</span></span><span class="koboSpan" id="kobo.1024.1"> classes </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1025.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1026.1">'./Error.module.css'</span></span><span class="koboSpan" id="kobo.1027.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1028.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1029.1">Error</span></span><span class="koboSpan" id="kobo.1030.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1031.1">{ message, onClearError }</span></span><span class="koboSpan" id="kobo.1032.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1033.1">console</span></span><span class="koboSpan" id="kobo.1034.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1035.1">log</span></span><span class="koboSpan" id="kobo.1036.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1037.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1038.1">&lt;Error /&gt; component function is executed.'</span></span><span class="koboSpan" id="kobo.1039.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1040.1">if</span></span><span class="koboSpan" id="kobo.1041.1"> (!message) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1042.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.1043.1">null</span></span><span class="koboSpan" id="kobo.1044.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1045.1">return</span></span><span class="koboSpan" id="kobo.1046.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1047.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1048.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1049.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1050.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1051.1">{classes.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1052.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1053.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1054.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1055.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1056.1">{message}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1057.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1058.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1059.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1060.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1061.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1062.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1063.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1064.1">{classes.errorBtn}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1065.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1066.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1067.1">{onClearError}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1068.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1069.1">X</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1070.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1071.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1072.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1073.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1074.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1075.1">&gt;</span></span><span class="koboSpan" id="kobo.1076.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1077.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1078.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1079.1">memo</span></span><span class="koboSpan" id="kobo.1080.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1081.1">Error</span></span><span class="koboSpan" id="kobo.1082.1">);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1083.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1084.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1085.1">
     component is wrapped with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1086.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1087.1">
     function and so will only execute if one of
    </span>
    <a id="_idIndexMarker491">
    </a>
    <span class="koboSpan" id="kobo.1088.1">
     the received prop values changes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1089.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1090.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1091.1">
     component is used by another component, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1092.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1093.1">
     component, like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1094.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1095.1">Form</span></span><span class="koboSpan" id="kobo.1096.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1097.1">const</span></span><span class="koboSpan" id="kobo.1098.1"> [enteredEmail, setEnteredEmail] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1099.1">useState</span></span><span class="koboSpan" id="kobo.1100.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1101.1">''</span></span><span class="koboSpan" id="kobo.1102.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1103.1">const</span></span><span class="koboSpan" id="kobo.1104.1"> [errorMessage, setErrorMessage] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1105.1">useState</span></span><span class="koboSpan" id="kobo.1106.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1107.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1108.1">handleUpdateEmail</span></span><span class="koboSpan" id="kobo.1109.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1110.1">event</span></span><span class="koboSpan" id="kobo.1111.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1112.1">setEnteredEmail</span></span><span class="koboSpan" id="kobo.1113.1">(event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1114.1">target</span></span><span class="koboSpan" id="kobo.1115.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1116.1">value</span></span><span class="koboSpan" id="kobo.1117.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1118.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1119.1">handleSubmit</span></span><span class="koboSpan" id="kobo.1120.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1121.1">event</span></span><span class="koboSpan" id="kobo.1122.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1123.1">preventDefault</span></span><span class="koboSpan" id="kobo.1124.1">();
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1125.1">if</span></span><span class="koboSpan" id="kobo.1126.1"> (!enteredEmail.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1127.1">endsWith</span></span><span class="koboSpan" id="kobo.1128.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1129.1">'.com'</span></span><span class="koboSpan" id="kobo.1130.1">)) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1131.1">setErrorMessage</span></span><span class="koboSpan" id="kobo.1132.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1133.1">'Email must end with .com.'</span></span><span class="koboSpan" id="kobo.1134.1">);
    }
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1135.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1136.1">handleClearError</span></span><span class="koboSpan" id="kobo.1137.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1138.1">setErrorMessage</span></span><span class="koboSpan" id="kobo.1139.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1140.1">null</span></span><span class="koboSpan" id="kobo.1141.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1142.1">return</span></span><span class="koboSpan" id="kobo.1143.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1144.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1145.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1146.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1147.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1148.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1149.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1150.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1151.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1152.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1153.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1154.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1155.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1156.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1157.1">{classes.control}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1158.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1159.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1160.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1161.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1162.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1163.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1164.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1165.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1166.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1167.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1168.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1169.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1170.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1171.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1172.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1173.1">"email"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1174.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1175.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1176.1">"email"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1177.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1178.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1179.1">{enteredEmail}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1180.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1181.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1182.1">{handleUpdateEmail}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1183.1">        /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1184.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1185.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1186.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1187.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1188.1">Error</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1189.1">message</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1190.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1191.1">{errorMessage}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1192.1">onClearError</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1193.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1194.1">{handleClearError}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1195.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1196.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1197.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1198.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1199.1">Sign Up</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1200.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1201.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1202.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1203.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1204.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1205.1">&gt;</span></span><span class="koboSpan" id="kobo.1206.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1207.1">
     In this
    </span>
    <a id="_idIndexMarker492">
    </a>
    <span class="koboSpan" id="kobo.1208.1">
     component, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1209.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1210.1">
     component receives a pointer to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1211.1">
      handleClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1212.1">
     function (as a value for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1213.1">
      onClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1214.1">
     prop).
    </span>
    <span class="koboSpan" id="kobo.1214.2">
     You might recall a very similar example from earlier in this chapter (from the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1215.1">
      Avoiding Unnecessary Child Component Evaluations
     </span>
    </em>
    <span class="koboSpan" id="kobo.1216.1">
     section).
    </span>
    <span class="koboSpan" id="kobo.1216.2">
     There,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1217.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1218.1">
     was used to ensure that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1219.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1220.1">
     component function was not invoked when
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1221.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.1222.1">
     changed (because its value was not used in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1223.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1224.1">
     component function at all).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1225.1">
     Now, with the adjusted example and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1226.1">
      handleClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1227.1">
     function pointer passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1228.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1229.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1230.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1231.1">
     unfortunately isn’t preventing component function executions anymore.
    </span>
    <span class="koboSpan" id="kobo.1231.2">
     Why?
    </span>
    <span class="koboSpan" id="kobo.1231.3">
     Because functions are objects in JavaScript and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1232.1">
      handleClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1233.1">
     function is recreated every time the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1234.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1235.1">
     component function is executed (which happens on every state change, including changes to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1236.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.1237.1">
     state).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1238.1">
     Since a new function object is created for every state change,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1239.1">
      handleClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1240.1">
     is technically a different value for every execution of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1241.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1242.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.1242.2">
     Therefore, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1243.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1244.1">
     component receives a new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1245.1">
      onClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1246.1">
     prop value whenever the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1247.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1248.1">
     component function is invoked.
    </span>
    <span class="koboSpan" id="kobo.1248.2">
     To
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1249.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1250.1">
     , the old and new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1251.1">
      handleClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1252.1">
     function objects are different from each other, and it therefore will not stop the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1253.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1254.1">
     component function from running again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1255.1">
     That’s exactly where
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1256.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1257.1">
     can help:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1258.1">const</span></span><span class="koboSpan" id="kobo.1259.1"> handleClearError = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1260.1">useCallback</span></span><span class="koboSpan" id="kobo.1261.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1262.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1263.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1264.1">setErrorMessage</span></span><span class="koboSpan" id="kobo.1265.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1266.1">null</span></span><span class="koboSpan" id="kobo.1267.1">);
}, []);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1268.1">
     By wrapping
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1269.1">
      handleClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1270.1">
     with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1271.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1272.1">
     , the re-creation of the function is prevented, and so no new function object is passed to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1273.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1274.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.1274.2">
     Hence,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1275.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1276.1">
     is able
    </span>
    <a id="_idIndexMarker493">
    </a>
    <span class="koboSpan" id="kobo.1277.1">
     to detect equality between the old and new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1278.1">
      onClearError
     </span>
    </code>
    <span class="koboSpan" id="kobo.1279.1">
     prop value and prevents unnecessary function component executions again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1280.1">
     Similarly,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1281.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1282.1">
     can be used in conjunction with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1283.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1284.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1284.2">
     If the compute-intensive operation wrapped with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1285.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1286.1">
     uses a function as a dependency, you can use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1287.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1288.1">
     to ensure that this dependent function is not recreated unnecessarily.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-201">
    <span class="koboSpan" id="kobo.1289.1">
     Using the React Compiler
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1290.1">
     Considering and using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1291.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1292.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1293.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1294.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1295.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1296.1">
     to prevent unnecessary component
    </span>
    <a id="_idIndexMarker494">
    </a>
    <span class="koboSpan" id="kobo.1297.1">
     re-evaluations can be a chore.
    </span>
    <span class="koboSpan" id="kobo.1297.2">
     Even though performance optimization is important, as a React developer, you typically want to focus on building great UIs and implementing helpful features in them.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1298.1">
     That’s why the React team developed a compiler that aims to optimize code for you – a standalone tool that can be added to React projects that will automatically wrap your components with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1299.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1300.1">
     , use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1301.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1302.1">
     when needed, and wrap functions with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1303.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1304.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1305.1">
     Therefore, when using this compiler, you don’t have to think about or use these optimization functions and Hooks anymore.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1306.1">
     In other words, the React compiler will optimize your code for you.
    </span>
    <span class="koboSpan" id="kobo.1306.2">
     At least, that’s the theory.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1307.1">
     However, at the time of writing, this compiler is only available in experimental mode.
    </span>
    <span class="koboSpan" id="kobo.1307.2">
     This means that you shouldn’t use it for production and that there may be bugs or suboptimal compilation results.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1308.1">
     Nonetheless, you can give it a try when working on a project that uses React 19 or higher (the compiler won’t work with older React versions).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1309.1">
     Adding the compiler to a project is easy since it’s just an extra dependency that must be installed in your project:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1310.1">npm install babel-plugin-react-compiler
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1311.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1312.1">
      Since the compiler is not stable yet, it’s possible that installation steps and usage instructions will change over time.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1313.1">
      Therefore, you should
     </span>
     <a id="_idIndexMarker495">
     </a>
     <span class="koboSpan" id="kobo.1314.1">
      visit the official React compiler documentation page for the latest details and instructions:
     </span>
     <a href="https://react.dev/learn/react-compiler">
      <span class="url">
       <span class="koboSpan" id="kobo.1315.1">
        https://react.dev/learn/react-compiler
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1316.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1317.1">
     With the
    </span>
    <a id="_idIndexMarker496">
    </a>
    <span class="koboSpan" id="kobo.1318.1">
     compiler plugin installed, you must adjust your build process configuration such that the compiler is used.
    </span>
    <span class="koboSpan" id="kobo.1318.2">
     When working on a Vite-based project, you just have to edit the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1319.1">
      vite.config.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1320.1">
     file, which should exist in your root project folder:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1321.1">// vite.config.js</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1322.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1323.1">ReactCompilerConfig</span></span><span class="koboSpan" id="kobo.1324.1"> = { </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1325.1">/* ... </span><span class="koboSpan" id="kobo.1325.2">*/</span></span><span class="koboSpan" id="kobo.1326.1"> };
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1327.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1328.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1329.1">defineConfig</span></span><span class="koboSpan" id="kobo.1330.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1331.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1332.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1333.1">return</span></span><span class="koboSpan" id="kobo.1334.1"> {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1335.1">plugins</span></span><span class="koboSpan" id="kobo.1336.1">: [
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1337.1">react</span></span><span class="koboSpan" id="kobo.1338.1">({
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1339.1">babel</span></span><span class="koboSpan" id="kobo.1340.1">: {
          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1341.1">plugins</span></span><span class="koboSpan" id="kobo.1342.1">: [
            [</span><span class="hljs-string"><span class="koboSpan" id="kobo.1343.1">"babel-plugin-react-compiler"</span></span><span class="koboSpan" id="kobo.1344.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1345.1">ReactCompilerConfig</span></span><span class="koboSpan" id="kobo.1346.1">],
          ],
        },
      }),
    ],
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1347.1">// ...</span></span><span class="koboSpan" id="kobo.1348.1">
  };
});
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1349.1">
     If you’re using another project setup, you can follow the installation instructions on the official compiler documentation page.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1350.1">
     With the compiler installed, it will automatically be executed to analyze and adjust your code to include optimizations like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1351.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1352.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1353.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1354.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1354.2">
     Keep in mind that those optimizations are performed as part of the build process that’s invoked by running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1355.1">
      npm run dev
     </span>
    </code>
    <span class="koboSpan" id="kobo.1356.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1357.1">
      npm run build
     </span>
    </code>
    <span class="koboSpan" id="kobo.1358.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1358.2">
     Therefore, your original source code will not change—instead, the compiler optimizes your code
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1359.1">
      “behind the scenes.”
     </span>
    </em>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1360.1">
     Once the
    </span>
    <a id="_idIndexMarker497">
    </a>
    <span class="koboSpan" id="kobo.1361.1">
     React compiler is stable, it will very likely be a standard tool that’s part of every React project’s build process.
    </span>
    <span class="koboSpan" id="kobo.1361.2">
     Therefore, you won’t have to use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1362.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1363.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1364.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1365.1">
     , or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1366.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1367.1">
     manually in your code anymore.
    </span>
    <span class="koboSpan" id="kobo.1367.2">
     But until that’s the case, or in React projects that can’t use the compiler, you’ll still have to optimize the code manually.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-202">
    <span class="koboSpan" id="kobo.1368.1">
     Avoiding Unnecessary Code Download
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1369.1">
     Thus far, this chapter has mostly discussed strategies for avoiding unnecessary code execution.
    </span>
    <span class="koboSpan" id="kobo.1369.2">
     But it’s not just the execution of code that can be an issue.
    </span>
    <span class="koboSpan" id="kobo.1369.3">
     It’s also not great if your
    </span>
    <a id="_idIndexMarker498">
    </a>
    <span class="koboSpan" id="kobo.1370.1">
     website visitors have to download lots of code that might never be executed at all.
    </span>
    <span class="koboSpan" id="kobo.1370.2">
     Because every kilobyte of JavaScript code that has to be downloaded will slow down the initial loading time of your web page—not just because of the time it takes to download the code bundle (which can be significant, if users are on a slow network and code bundles are big) but also because the browser has to parse all the downloaded code before your page becomes interactive.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1371.1">
     For this reason, a lot of community and ecosystem effort is spent on reducing JavaScript code bundle sizes.
    </span>
    <span class="koboSpan" id="kobo.1371.2">
     Minification (automatic shortening of variable names and other measures to reduce the final code) and compression can help a lot and is therefore a common technique.
    </span>
    <span class="koboSpan" id="kobo.1371.3">
     Actually, projects created with Vite already come with a build workflow (initiated by running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1372.1">
      npm run build
     </span>
    </code>
    <span class="koboSpan" id="kobo.1373.1">
     ), which will produce a production-optimized code bundle that is as small as possible.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1374.1">
     But there also are steps that can be taken by you, the developer, to reduce the overall code bundle size:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1375.1">
      Try to write short and concise code.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1376.1">
      Be thoughtful about including third-party libraries and don’t use them unless you really need to.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1377.1">
      Consider using code-splitting techniques.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1378.1">
     The first point should be fairly obvious.
    </span>
    <span class="koboSpan" id="kobo.1378.2">
     If you write less code, your website visitors have less code to download.
    </span>
    <span class="koboSpan" id="kobo.1378.3">
     Therefore, trying to be concise and write optimized code makes sense.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1379.1">
     The second point should also make sense.
    </span>
    <span class="koboSpan" id="kobo.1379.2">
     For some tasks, you will actually save code by including third-party libraries that may be much more elaborate than the code solution you might come up with.
    </span>
    <span class="koboSpan" id="kobo.1379.3">
     But there are also situations and tasks in which you might get away with
    </span>
    <a id="_idIndexMarker499">
    </a>
    <span class="koboSpan" id="kobo.1380.1">
     writing your own code or using some built-in function instead of including a third-party library.
    </span>
    <span class="koboSpan" id="kobo.1380.2">
     You should at least always think about this alternative and only include third-party libraries you absolutely need.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1381.1">
     The last point is something React can help with.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-203">
    <span class="koboSpan" id="kobo.1382.1">
     Reducing Bundle Sizes via Code Splitting (Lazy Loading)
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1383.1">
     React exposes a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1384.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1385.1">
     function that can be used to load component code conditionally—meaning only when it’s actually needed (instead of upfront).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1386.1">
     Consider
    </span>
    <a id="_idIndexMarker500">
    </a>
    <span class="koboSpan" id="kobo.1387.1">
     the following example, consisting of two components working together.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1388.1">
     A
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1389.1">
      DateCalculator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1390.1">
     component is defined like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1391.1">import</span></span><span class="koboSpan" id="kobo.1392.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1393.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1394.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1395.1">react'</span></span><span class="koboSpan" id="kobo.1396.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1397.1">import</span></span><span class="koboSpan" id="kobo.1398.1"> { add, differenceInDays, format, parseISO } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1399.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1400.1">'date-fns'</span></span><span class="koboSpan" id="kobo.1401.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1402.1">import</span></span><span class="koboSpan" id="kobo.1403.1"> classes </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1404.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1405.1">'./DateCalculator.module.css'</span></span><span class="koboSpan" id="kobo.1406.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1407.1">const</span></span><span class="koboSpan" id="kobo.1408.1"> initialStartDate = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1409.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1410.1">Date</span></span><span class="koboSpan" id="kobo.1411.1">();
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1412.1">const</span></span><span class="koboSpan" id="kobo.1413.1"> initialEndDate = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1414.1">add</span></span><span class="koboSpan" id="kobo.1415.1">(initialStartDate, { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1416.1">days</span></span><span class="koboSpan" id="kobo.1417.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1418.1">1</span></span><span class="koboSpan" id="kobo.1419.1"> });
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1420.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1421.1">DateCalculator</span></span><span class="koboSpan" id="kobo.1422.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1423.1">const</span></span><span class="koboSpan" id="kobo.1424.1"> [startDate, setStartDate] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1425.1">useState</span></span><span class="koboSpan" id="kobo.1426.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1427.1">format</span></span><span class="koboSpan" id="kobo.1428.1">(initialStartDate, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1429.1">'yyyy-MM-dd'</span></span><span class="koboSpan" id="kobo.1430.1">)
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1431.1">const</span></span><span class="koboSpan" id="kobo.1432.1"> [endDate, setEndDate] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1433.1">useState</span></span><span class="koboSpan" id="kobo.1434.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1435.1">format</span></span><span class="koboSpan" id="kobo.1436.1">(initialEndDate, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1437.1">'yyyy-MM-dd'</span></span><span class="koboSpan" id="kobo.1438.1">)
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1439.1">const</span></span><span class="koboSpan" id="kobo.1440.1"> daysDiff = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1441.1">differenceInDays</span></span><span class="koboSpan" id="kobo.1442.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1443.1">parseISO</span></span><span class="koboSpan" id="kobo.1444.1">(endDate), 
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1445.1">parseISO</span></span><span class="koboSpan" id="kobo.1446.1">(startDate)
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1447.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1448.1">handleUpdateStartDate</span></span><span class="koboSpan" id="kobo.1449.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1450.1">event</span></span><span class="koboSpan" id="kobo.1451.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1452.1">setStartDate</span></span><span class="koboSpan" id="kobo.1453.1">(event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1454.1">target</span></span><span class="koboSpan" id="kobo.1455.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1456.1">value</span></span><span class="koboSpan" id="kobo.1457.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1458.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1459.1">handleUpdateEndDate</span></span><span class="koboSpan" id="kobo.1460.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1461.1">event</span></span><span class="koboSpan" id="kobo.1462.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1463.1">setEndDate</span></span><span class="koboSpan" id="kobo.1464.1">(event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1465.1">target</span></span><span class="koboSpan" id="kobo.1466.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1467.1">value</span></span><span class="koboSpan" id="kobo.1468.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1469.1">return</span></span><span class="koboSpan" id="kobo.1470.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1471.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1472.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1473.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1474.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1475.1">{classes.calculator}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1476.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1477.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1478.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1479.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1480.1">Calculate the difference (in days) between two dates.</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1481.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1482.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1483.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1484.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1485.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1486.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1487.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1488.1">{classes.control}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1489.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1490.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1491.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1492.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1493.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1494.1">"start"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1495.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1496.1">Start Date</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1497.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1498.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1499.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1500.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1501.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1502.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1503.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1504.1">"start"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1505.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1506.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1507.1">"date"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1508.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1509.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1510.1">{startDate}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1511.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1512.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1513.1">{handleUpdateStartDate}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1514.1">        /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1515.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1516.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1517.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1518.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1519.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1520.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1521.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1522.1">{classes.control}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1523.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1524.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1525.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1526.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1527.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1528.1">"end"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1529.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1530.1">End Date</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1531.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1532.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1533.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1534.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1535.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1536.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1537.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1538.1">"end"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1539.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1540.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1541.1">"date"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1542.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1543.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1544.1">{endDate}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1545.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1546.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1547.1">{handleUpdateEndDate}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1548.1">        /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1549.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1550.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1551.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1552.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1553.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1554.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1555.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1556.1">{classes.difference}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1557.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1558.1">        Difference: {daysDiff} days</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1559.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1560.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1561.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1562.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1563.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1564.1">&gt;</span></span><span class="koboSpan" id="kobo.1565.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1566.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1567.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1568.1">DateCalculator</span></span><span class="koboSpan" id="kobo.1569.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1570.1">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1571.1">
      DateCalculator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1572.1">
     component
    </span>
    <a id="_idIndexMarker501">
    </a>
    <span class="koboSpan" id="kobo.1573.1">
     is then rendered conditionally by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1574.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1575.1">
     component:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1576.1">import</span></span><span class="koboSpan" id="kobo.1577.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1578.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1579.1">'react'</span></span><span class="koboSpan" id="kobo.1580.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1581.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1582.1">DateCalculator</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1583.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1584.1">'./components/DateCalculator.jsx'</span></span><span class="koboSpan" id="kobo.1585.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1586.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1587.1">App</span></span><span class="koboSpan" id="kobo.1588.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1589.1">const</span></span><span class="koboSpan" id="kobo.1590.1"> [showDateCalc, setShowDateCalc] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1591.1">useState</span></span><span class="koboSpan" id="kobo.1592.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1593.1">false</span></span><span class="koboSpan" id="kobo.1594.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1595.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1596.1">handleOpenDateCalc</span></span><span class="koboSpan" id="kobo.1597.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1598.1">setShowDateCalc</span></span><span class="koboSpan" id="kobo.1599.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1600.1">true</span></span><span class="koboSpan" id="kobo.1601.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1602.1">return</span></span><span class="koboSpan" id="kobo.1603.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1604.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1605.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1606.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1607.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1608.1">This app might be doing all kinds of things.</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1609.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1610.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1611.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1612.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1613.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1614.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1615.1">        But you can also open a calculator which calculates </span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1616.1">        the difference between two dates.</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1617.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1618.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1619.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1620.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1621.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1622.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1623.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1624.1">{handleOpenDateCalc}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1625.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1626.1">Open Calculator</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1627.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1628.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1629.1">&gt;</span></span>
<span class="language-xml">      </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1630.1">{showDateCalc &amp;&amp; </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1631.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1632.1">DateCalculator</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1633.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1634.1">}</span></strong></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1635.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1636.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1637.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1638.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1639.1">App</span></span><span class="koboSpan" id="kobo.1640.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1641.1">
     In this
    </span>
    <a id="_idIndexMarker502">
    </a>
    <span class="koboSpan" id="kobo.1642.1">
     example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1643.1">
      DateCalculator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1644.1">
     component uses a third-party library (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1645.1">
      date-fns
     </span>
    </code>
    <span class="koboSpan" id="kobo.1646.1">
     library) to access various date-related utility functions (for example, a function for calculating the difference between two dates, or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1647.1">
      differenceInDays
     </span>
    </code>
    <span class="koboSpan" id="kobo.1648.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1649.1">
     The component then accepts two date values and calculates the difference between those dates in days—though the actual logic of the component isn’t too important here.
    </span>
    <span class="koboSpan" id="kobo.1649.2">
     What is important is the fact that a third-party library and various utility functions are used.
    </span>
    <span class="koboSpan" id="kobo.1649.3">
     This adds quite a bit of JavaScript code to the overall code bundle, and all that code must be downloaded when the entire website is loaded for the first time, even though the date calculator isn’t even visible at that point in time (because it is rendered conditionally).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1650.1">
     After building the app for production (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1651.1">
      npm run build
     </span>
    </code>
    <span class="koboSpan" id="kobo.1652.1">
     ), when previewing that production version (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1653.1">
      npm run preview
     </span>
    </code>
    <span class="koboSpan" id="kobo.1654.1">
     ), you can see one main code bundle file being downloaded in the following screenshot:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1655.1">
     <img alt="img" src="image/B31339_10_10.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1656.1">
     Figure 10.10: One main bundle file is downloaded
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1657.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1658.1">
      Network
     </span>
    </code>
    <span class="koboSpan" id="kobo.1659.1">
     tab in the browser’s developer tools reveals outgoing network requests.
    </span>
    <span class="koboSpan" id="kobo.1659.2">
     As you
    </span>
    <a id="_idIndexMarker503">
    </a>
    <span class="koboSpan" id="kobo.1660.1">
     can see in the screenshot, one main JavaScript bundle file is downloaded.
    </span>
    <span class="koboSpan" id="kobo.1660.2">
     You won’t see any extra requests being sent when the button is clicked.
    </span>
    <span class="koboSpan" id="kobo.1660.3">
     This implies that all the code, including the code needed for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1661.1">
      DateCalculator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1662.1">
     , was downloaded upfront.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1663.1">
     That’s where code splitting with React’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1664.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1665.1">
     function becomes useful.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1666.1">
     This function can be wrapped around a dynamic import to load the imported component only once it’s needed.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1667.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1668.1">
      Dynamic imports are a native JavaScript feature that allows for dynamically importing JavaScript code files.
     </span>
     <span class="koboSpan" id="kobo.1668.2">
      For further information on this topic, visit
     </span>
     <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import">
      <span class="url">
       <span class="koboSpan" id="kobo.1669.1">
        https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1670.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1671.1">
     In the preceding example, it would be used like this in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1672.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1673.1">
     component file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1674.1">import</span></span><span class="koboSpan" id="kobo.1675.1"> { lazy, useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1676.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1677.1">'react'</span></span><span class="koboSpan" id="kobo.1678.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1679.1">const</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1680.1">DateCalculator</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1681.1"> = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1682.1">lazy</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1683.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1684.1">() =&gt;</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1685.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1686.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1687.1">'./components/DateCalculator.jsx'</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1688.1">  )</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1689.1">);</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1690.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1691.1">App</span></span><span class="koboSpan" id="kobo.1692.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1693.1">const</span></span><span class="koboSpan" id="kobo.1694.1"> [showDateCalc, setShowDateCalc] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1695.1">useState</span></span><span class="koboSpan" id="kobo.1696.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1697.1">false</span></span><span class="koboSpan" id="kobo.1698.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1699.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1700.1">handleOpenDateCalc</span></span><span class="koboSpan" id="kobo.1701.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1702.1">setShowDateCalc</span></span><span class="koboSpan" id="kobo.1703.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1704.1">true</span></span><span class="koboSpan" id="kobo.1705.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1706.1">return</span></span><span class="koboSpan" id="kobo.1707.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1708.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1709.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1710.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1711.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1712.1">This app might be doing all kinds of things.</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1713.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1714.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1715.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1716.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1717.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1718.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1719.1">        But you can also open a calculator which calculates </span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1720.1">        the difference between two dates.</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1721.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1722.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1723.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1724.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1725.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1726.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1727.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1728.1">{handleOpenDateCalc}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1729.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1730.1">Open Calculator</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1731.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1732.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1733.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1734.1">      {showDateCalc &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1735.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1736.1">DateCalculator</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1737.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1738.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1739.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1740.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1741.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1742.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1743.1">App</span></span><span class="koboSpan" id="kobo.1744.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1745.1">
     This
    </span>
    <a id="_idIndexMarker504">
    </a>
    <span class="koboSpan" id="kobo.1746.1">
     alone won’t do the trick though.
    </span>
    <span class="koboSpan" id="kobo.1746.2">
     You must also wrap the conditional JSX code, where the dynamically imported component is used, with another component provided by React – the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1747.1">
      &lt;Suspense&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1748.1">
     component – like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1749.1">import</span></span><span class="koboSpan" id="kobo.1750.1"> { lazy, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1751.1">Suspense</span></strong></span><span class="koboSpan" id="kobo.1752.1">, useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1753.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1754.1">'react'</span></span><span class="koboSpan" id="kobo.1755.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1756.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1757.1">DateCalculator</span></span><span class="koboSpan" id="kobo.1758.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1759.1">lazy</span></span><span class="koboSpan" id="kobo.1760.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1761.1">() =&gt;</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1762.1">import</span></span><span class="koboSpan" id="kobo.1763.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1764.1">'./components/DateCalculator.jsx'</span></span><span class="koboSpan" id="kobo.1765.1">
  )
);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1766.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1767.1">App</span></span><span class="koboSpan" id="kobo.1768.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1769.1">const</span></span><span class="koboSpan" id="kobo.1770.1"> [showDateCalc, setShowDateCalc] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1771.1">useState</span></span><span class="koboSpan" id="kobo.1772.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1773.1">false</span></span><span class="koboSpan" id="kobo.1774.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1775.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1776.1">handleOpenDateCalc</span></span><span class="koboSpan" id="kobo.1777.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1778.1">setShowDateCalc</span></span><span class="koboSpan" id="kobo.1779.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1780.1">true</span></span><span class="koboSpan" id="kobo.1781.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1782.1">return</span></span><span class="koboSpan" id="kobo.1783.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1784.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1785.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1786.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1787.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1788.1">This app might be doing all kinds of things.</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1789.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1790.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1791.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1792.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1793.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1794.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1795.1">        But you can also open a calculator which calculates </span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1796.1">        the difference between two dates.</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1797.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1798.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1799.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1800.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1801.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1802.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1803.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1804.1">{handleOpenDateCalc}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1805.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1806.1">Open Calculator</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1807.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1808.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1809.1">&gt;</span></span>
<span class="language-xml">      </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1810.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1811.1">Suspense</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1812.1">fallback</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1813.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1814.1">{</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1815.1">&lt;</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1816.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1817.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1818.1">Loading...</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1819.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1820.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1821.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1822.1">}&gt;</span></strong></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1823.1">        {showDateCalc &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1824.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1825.1">DateCalculator</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1826.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1827.1">}</span></span>
<span class="language-xml">      </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1828.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1829.1">Suspense</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1830.1">&gt;</span></strong></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1831.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1832.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1833.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1834.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1835.1">App</span></span><span class="koboSpan" id="kobo.1836.1">;
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1837.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1838.1">
      You can find the finished example code on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/examples/06-code-splitting">
      <span class="url">
       <span class="koboSpan" id="kobo.1839.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/examples/06-code-splitting
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1840.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1841.1">
      Suspense
     </span>
    </code>
    <span class="koboSpan" id="kobo.1842.1">
     is a component built into React that aims to display fallback content while some
    </span>
    <a id="_idIndexMarker505">
    </a>
    <span class="koboSpan" id="kobo.1843.1">
     resource or data is loading.
    </span>
    <span class="koboSpan" id="kobo.1843.2">
     Therefore, when using it for lazy loading, you must wrap it around any conditional code that uses React’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1844.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1845.1">
     function.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1846.1">
      Suspense
     </span>
    </code>
    <span class="koboSpan" id="kobo.1847.1">
     also has one mandatory prop that must be provided, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1848.1">
      fallback
     </span>
    </code>
    <span class="koboSpan" id="kobo.1849.1">
     prop, which expects a JSX value that will be rendered as fallback content until the dynamically loaded content is available.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1850.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1851.1">
     leads to the overall JavaScript code being split up into multiple bundles.
    </span>
    <span class="koboSpan" id="kobo.1851.2">
     The bundle that contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1852.1">
      DateCalculator
     </span>
    </code>
    <span class="koboSpan" id="kobo.1853.1">
     component (and its dependencies, such as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1854.1">
      date-fns
     </span>
    </code>
    <span class="koboSpan" id="kobo.1855.1">
     library code) is only downloaded when it’s needed—that is, when the button in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1856.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1857.1">
     component is clicked.
    </span>
    <span class="koboSpan" id="kobo.1857.2">
     If that download were to take a bit longer, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1858.1">
      fallback
     </span>
    </code>
    <span class="koboSpan" id="kobo.1859.1">
     content of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1860.1">
      Suspense
     </span>
    </code>
    <span class="koboSpan" id="kobo.1861.1">
     would be shown on the screen in the meantime.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1862.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1863.1">
      React’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1864.1">
       Suspense
      </span>
     </code>
     <span class="koboSpan" id="kobo.1865.1">
      component is not limited to being used in conjunction with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1866.1">
       lazy()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1867.1">
      function.
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1868.1">
       Chapter 14
      </span>
     </em>
     <span class="koboSpan" id="kobo.1869.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1870.1">
       Managing Data with React Router
      </span>
     </em>
     <span class="koboSpan" id="kobo.1871.1">
      , and
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1872.1">
       Chapter 17
      </span>
     </em>
     <span class="koboSpan" id="kobo.1873.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1874.1">
       Understanding React Suspense &amp; The use() Hook
      </span>
     </em>
     <span class="koboSpan" id="kobo.1875.1">
      , will explore how the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1876.1">
       Suspense
      </span>
     </code>
     <span class="koboSpan" id="kobo.1877.1">
      component may be used to show fallback content while fetching data.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1878.1">
     After adding
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1879.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1880.1">
     and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1881.1">
      Suspense
     </span>
    </code>
    <span class="koboSpan" id="kobo.1882.1">
     component as described, a smaller bundle is initially
    </span>
    <a id="_idIndexMarker506">
    </a>
    <span class="koboSpan" id="kobo.1883.1">
     downloaded.
    </span>
    <span class="koboSpan" id="kobo.1883.2">
     In addition, if the button is clicked, more code files are downloaded:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1884.1">
     <img alt="img" src="image/B31339_10_11.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1885.1">
     Figure 10.11: After clicking the button, an extra code file is downloaded
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1886.1">
     Just as with all the other optimization techniques described thus far, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1887.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1888.1">
     function is not a function you should start wrapping around all your imports.
    </span>
    <span class="koboSpan" id="kobo.1888.2">
     If an imported component is very small and simple (and doesn’t use any third-party code), splitting the code isn’t really worth it, especially since you have to consider that the additional HTTP request required for downloading the extra bundle also comes with some overhead.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1889.1">
     It also doesn’t make sense to use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1890.1">
      lazy()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1891.1">
     on components that will be loaded initially anyway.
    </span>
    <span class="koboSpan" id="kobo.1891.2">
     Only consider using it on conditionally loaded components.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-204">
    <span class="koboSpan" id="kobo.1892.1">
     Strict Mode
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1893.1">
     Throughout this chapter, you have learned a lot about React’s internals and various optimization
    </span>
    <a id="_idIndexMarker507">
    </a>
    <span class="koboSpan" id="kobo.1894.1">
     techniques.
    </span>
    <span class="koboSpan" id="kobo.1894.2">
     Not really an optimization technique, but still related, is another feature offered by React, called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1895.1">
      Strict Mode
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1896.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1897.1">
     You may have stumbled across code like this before:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1898.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1899.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1900.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1901.1">'react'</span></span><span class="koboSpan" id="kobo.1902.1">;
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.1903.1">// ... </span><span class="koboSpan" id="kobo.1903.2">other code ...</span></span><span class="koboSpan" id="kobo.1904.1">
root.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1905.1">render</span></span><span class="koboSpan" id="kobo.1906.1">(</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1907.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1908.1">React.StrictMode</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1909.1">&gt;&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1910.1">App</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1911.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1912.1">&lt;/React.StrictMode &gt;);</span></span>
</code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1913.1">
      &lt;React.StrictMode&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1914.1">
     is another built-in component provided by React.
    </span>
    <span class="koboSpan" id="kobo.1914.2">
     It doesn’t render a visual element, but it will enable some extra checks that are performed behind the scenes by React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1915.1">
     Most checks are related to identifying the use of unsafe or legacy code (i.e., features that will be removed in the future).
    </span>
    <span class="koboSpan" id="kobo.1915.2">
     But there are also some checks that aim to help you identify potential problems with your code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1916.1">
     For example, when using Strict Mode, React will execute component functions twice and also unmount and remount every component whenever it mounts for the first time.
    </span>
    <span class="koboSpan" id="kobo.1916.2">
     This is done to ensure that you’re managing your state and side effects in a consistent and correct way (for example, that you do have cleanup functions in your effect functions).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1917.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1918.1">
      Strict Mode only affects your app and its behavior during development.
     </span>
     <span class="koboSpan" id="kobo.1918.2">
      It does not influence your app once you build it for production.
     </span>
     <span class="koboSpan" id="kobo.1918.3">
      Extra checks of effects such as double component function execution will not be performed in production.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1919.1">
     Building React apps with Strict Mode enabled can sometimes lead to confusion or annoying error messages.
    </span>
    <span class="koboSpan" id="kobo.1919.2">
     You might, for example, wonder why your component effects are executing too often.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1920.1">
     Therefore, it’s your personal decision whether you want to use Strict Mode or not.
    </span>
    <span class="koboSpan" id="kobo.1920.2">
     Enabling it can help you catch and fix errors early though.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-205">
    <span class="koboSpan" id="kobo.1921.1">
     Debugging Code and the React Developer Tools
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1922.1">
     Earlier in this chapter, you learned that component functions may execute quite frequently
    </span>
    <a id="_idIndexMarker508">
    </a>
    <span class="koboSpan" id="kobo.1923.1">
     and that you can prevent unnecessary executions using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1924.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1925.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1926.1">
      useMemo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1927.1">
     (and that you shouldn’t always prevent them).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1928.1">
     Identifying component executions by adding
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1929.1">
      console.log()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1930.1">
     inside the component functions is one way of gaining insight into a component.
    </span>
    <span class="koboSpan" id="kobo.1930.2">
     It’s the approach used throughout this chapter.
    </span>
    <span class="koboSpan" id="kobo.1930.3">
     However, for large React apps with dozens, hundreds, or even thousands of components, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1931.1">
      console.log()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1932.1">
     can get tedious.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1933.1">
     That’s why the React team also built an official tool to help with gaining app insights.
    </span>
    <span class="koboSpan" id="kobo.1933.2">
     React Developer Tools is
    </span>
    <a id="_idIndexMarker509">
    </a>
    <span class="koboSpan" id="kobo.1934.1">
     an extension that can be installed on all major browsers (Chrome, Firefox, and Edge).
    </span>
    <span class="koboSpan" id="kobo.1934.2">
     You can find and install the extension by simply searching the web for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1935.1">
      "&lt;your browser&gt; react developer tools"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1936.1">
     (e.g.,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1937.1">
      chrome react developer tools
     </span>
    </em>
    <span class="koboSpan" id="kobo.1938.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1939.1">
     Once you have installed the extension, you can access it directly from inside the browser.
    </span>
    <span class="koboSpan" id="kobo.1939.2">
     For example, when using Chrome, you can access the React Developer Tools extension directly from inside Chrome’s developer tools (which can be opened via the menu in Chrome).
    </span>
    <span class="koboSpan" id="kobo.1939.3">
     Explore the specific extension documentation (in your browser’s extensions store) for details on how to access it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1940.1">
     The React Developer Tools extension offers two areas: a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1941.1">
      Components
     </span>
    </code>
    <span class="koboSpan" id="kobo.1942.1">
     page and a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1943.1">
      Profile
     </span>
    </code>
    <span class="koboSpan" id="kobo.1944.1">
     page:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1945.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_12.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1946.1">
     Figure 10.12: React Developer Tools can be accessed via browser developer tools
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1947.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1948.1">
      Components
     </span>
    </code>
    <span class="koboSpan" id="kobo.1949.1">
     page can be used to analyze the component structure of the currently rendered page.
    </span>
    <span class="koboSpan" id="kobo.1949.2">
     You
    </span>
    <a id="_idIndexMarker510">
    </a>
    <span class="koboSpan" id="kobo.1950.1">
     can use this page to understand the structure of
    </span>
    <a id="_idIndexMarker511">
    </a>
    <span class="koboSpan" id="kobo.1951.1">
     your components (i.e., the “tree of components”), how components are nested into each other, and even the configuration (props, state) of components.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1952.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_13.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1953.1">
     Figure 10.13: Component relations and data are shown
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1954.1">
     This page can be very useful when attempting to understand the current state of a component, how a component is related to other components, and which other components may therefore influence a component (e.g., cause it to be re-evaluated).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1955.1">
     However, in the context of this chapter, the more useful page is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1956.1">
      Profiler
     </span>
    </code>
    <span class="koboSpan" id="kobo.1957.1">
     page:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1958.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_14.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1959.1">
     Figure 10.14: The Profiler page (without any data gathered)
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1960.1">
     On this page, you
    </span>
    <a id="_idIndexMarker512">
    </a>
    <span class="koboSpan" id="kobo.1961.1">
     can begin recording component evaluations (i.e., component function executions).
    </span>
    <span class="koboSpan" id="kobo.1961.2">
     You can do this by simply clicking the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1962.1">
      Record
     </span>
    </code>
    <span class="koboSpan" id="kobo.1963.1">
     button in the
    </span>
    <a id="_idIndexMarker513">
    </a>
    <span class="koboSpan" id="kobo.1964.1">
     top-left corner (the blue circle).
    </span>
    <span class="koboSpan" id="kobo.1964.2">
     This button will then be replaced by a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1965.1">
      Stop
     </span>
    </code>
    <span class="koboSpan" id="kobo.1966.1">
     button, which you can click to end the recording.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1967.1">
     After recording the React app for a couple of seconds (and interacting with it during that period), an example result could look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1968.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_15.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1969.1">
     Figure 10.15: The Profiler page shows various bars after recording has finished
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1970.1">
     This result consists of two main areas:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1971.1">
      A list of bars, indicating the number of component re-evaluations (every bar reflects one re-evaluation cycle that affected one or more components).
     </span>
     <span class="koboSpan" id="kobo.1971.2">
      You can click these bars to explore more details about a specific cycle.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1972.1">
      For the selected evaluation cycle, a list of the affected components is presented.
     </span>
     <span class="koboSpan" id="kobo.1972.2">
      You can identify affected components easily as their bars are colored and timing information is displayed for them.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1973.1">
     You can select
    </span>
    <a id="_idIndexMarker514">
    </a>
    <span class="koboSpan" id="kobo.1974.1">
     any render cycle from
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1975.1">
      1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1976.1">
     (in this case, there are two for this recording session) to view which components were affected.
    </span>
    <span class="koboSpan" id="kobo.1976.2">
     The bottom part of the window (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1977.1">
      2
     </span>
    </em>
    <span class="koboSpan" id="kobo.1978.1">
     ) shows all affected components by highlighting them with some color and
    </span>
    <a id="_idIndexMarker515">
    </a>
    <span class="koboSpan" id="kobo.1979.1">
     outputting the overall amount of time taken by the components to be re-evaluated (for example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1980.1">
      0.1ms of 0.3ms
     </span>
    </code>
    <span class="koboSpan" id="kobo.1981.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1982.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1983.1">
      It’s worth noting that this tool also proves that component evaluation is extremely fast—
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1984.1">
       0.1ms
      </span>
     </code>
     <span class="koboSpan" id="kobo.1985.1">
      for re-evaluating a component is way too fast for any human to realize that something happened behind the scenes.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1986.1">
     On the right side of the window, you also learn more about this component evaluation cycle.
    </span>
    <span class="koboSpan" id="kobo.1986.2">
     For example, you learn where it was triggered.
    </span>
    <span class="koboSpan" id="kobo.1986.3">
     In this case, it was triggered by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1987.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1988.1">
     component (it’s the same example as discussed earlier in this chapter, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1989.1">
      Avoiding Unnecessary Child Component Evaluations
     </span>
    </em>
    <span class="koboSpan" id="kobo.1990.1">
     section).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1991.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1992.1">
      Profiler
     </span>
    </code>
    <span class="koboSpan" id="kobo.1993.1">
     page can therefore also help you to identify component evaluation cycles and determine which components are affected.
    </span>
    <span class="koboSpan" id="kobo.1993.2">
     In this example, you can see a difference if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1994.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1995.1">
     function is wrapped around the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1996.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1997.1">
     component:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1998.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_16.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1999.1">
     Figure 10.16: Only the Form component is affected, not the Error component
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2000.1">
     After re-adding the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2001.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2002.1">
     function as a wrapper around the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2003.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.2004.1">
     component (as explained earlier in this chapter), you can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2005.1">
      Profiler
     </span>
    </code>
    <span class="koboSpan" id="kobo.2006.1">
     page of React Developer Tools to confirm that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2007.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.2008.1">
     component is no longer unnecessarily evaluated.
    </span>
    <span class="koboSpan" id="kobo.2008.2">
     To do this, you should start a new recording session and reproduce the situation, where previously, without
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2009.1">
      memo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2010.1">
     , the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2011.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.2012.1">
     component would’ve been called again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2013.1">
     The diagonal
    </span>
    <a id="_idIndexMarker516">
    </a>
    <span class="koboSpan" id="kobo.2014.1">
     grayed-out lines across the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2015.1">
      Error
     </span>
    </code>
    <span class="koboSpan" id="kobo.2016.1">
     component in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2017.1">
      Profiler
     </span>
    </code>
    <span class="koboSpan" id="kobo.2018.1">
     window signal that this component was not affected by some other component function invocation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2019.1">
     React Developer
    </span>
    <a id="_idIndexMarker517">
    </a>
    <span class="koboSpan" id="kobo.2020.1">
     Tools can therefore be used to gain deeper insights into your React app and your components.
    </span>
    <span class="koboSpan" id="kobo.2020.2">
     You can use them in addition or instead of calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2021.1">
      console.log()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2022.1">
     in a component function.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-206">
    <span class="koboSpan" id="kobo.2023.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2024.1">
      React components are re-evaluated (executed) whenever their state changes or the parent component is evaluated.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2025.1">
      React optimizes component evaluation by calculating required UI changes with the help of a virtual DOM first.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2026.1">
      Multiple state updates that occur at the same time and in the same place are batched together by React.
     </span>
     <span class="koboSpan" id="kobo.2026.2">
      This ensures that unnecessary component evaluations are avoided.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2027.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2028.1">
       memo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2029.1">
      function can be used to control component function executions.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2030.1">
       memo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2031.1">
      looks for prop value differences (old props versus new props) to determine whether a component function must be executed again.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2032.1">
       useMemo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2033.1">
      can be used to wrap performance-intensive computations and only perform them if key dependencies changed.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2034.1">
      Both
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2035.1">
       memo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2036.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2037.1">
       useMemo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2038.1">
      should be used carefully since they also come at a cost (the comparisons performed).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2039.1">
      When working with React 19 or higher, you can install and enable the (experimental) React compiler to automatically optimize your code during the build process.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2040.1">
      The initial code download size can be reduced with the help of code splitting via the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2041.1">
       lazy()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2042.1">
      function (in conjunction with the built-in
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2043.1">
       Suspense
      </span>
     </code>
     <span class="koboSpan" id="kobo.2044.1">
      component)
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2045.1">
      React’s Strict Mode can be enabled (via the built-in
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2046.1">
       &lt;React.StrictMode&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2047.1">
      component) to perform various extra checks and detect potential bugs in your application.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2048.1">
      React Developer Tools can be used to gain deeper insights into your React app (for example, component structure and re-evaluation cycles).
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-207">
    <span class="koboSpan" id="kobo.2049.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2050.1">
     As a developer, you should always know and understand the tool you’re working with—in this case, React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2051.1">
     This chapter allowed you to get a better idea of how React works under the hood and which optimizations are implemented automatically.
    </span>
    <span class="koboSpan" id="kobo.2051.2">
     In addition, you also learned about various optimization techniques that can be implemented by you.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2052.1">
     The next chapter will go back to solving actual problems you might face when trying to build React apps.
    </span>
    <span class="koboSpan" id="kobo.2052.2">
     Instead of optimizing React apps, you will learn more about techniques and features that can be used to solve more complex problems related to component and application state management.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-208">
    <span class="koboSpan" id="kobo.2053.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2054.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.2054.2">
     You can then compare your answers to examples that can be found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/10-behind-scenes/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.2055.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/10-behind-scenes/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.2056.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2057.1">
      Why does React use a virtual DOM to detect required DOM updates?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2058.1">
      How is the real DOM affected when a component function is executed?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2059.1">
      Which components are great candidates for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2060.1">
       memo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2061.1">
      function?
     </span>
     <span class="koboSpan" id="kobo.2061.2">
      Which components are bad candidates?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2062.1">
      How is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2063.1">
       useMemo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2064.1">
      different from
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2065.1">
       memo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2066.1">
      ?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2067.1">
      What’s the idea behind code splitting and the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2068.1">
       lazy()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2069.1">
      function?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-209">
    <span class="koboSpan" id="kobo.2070.1">
     Apply What You Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2071.1">
     With your newly gained knowledge about React’s internals and some of the optimization techniques you can employ in order to improve your apps, you can now apply this knowledge in the following activity.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-210">
    <span class="koboSpan" id="kobo.2072.1">
     Activity 10.1: Optimize an Existing App
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2073.1">
     In this activity, you’re handed an existing React app that could be optimized in various places.
    </span>
    <span class="koboSpan" id="kobo.2073.2">
     Your task is to identify optimization opportunities and implement appropriate solutions.
    </span>
    <span class="koboSpan" id="kobo.2073.3">
     Keep in mind that too much optimization can actually lead to a worse result.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2074.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2075.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/activities/practice-1-start">
      <span class="url">
       <span class="koboSpan" id="kobo.2076.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/activities/practice-1-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2077.1">
      .
     </span>
     <span class="koboSpan" id="kobo.2077.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.2077.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2078.1">
       activities/practice-1-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.2079.1">
      in this case) to use the right code snapshot.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2080.1">
      The provided project also uses many features covered in earlier chapters.
     </span>
     <span class="koboSpan" id="kobo.2080.2">
      Take the time to analyze it and understand the provided code.
     </span>
     <span class="koboSpan" id="kobo.2080.3">
      This is a great practice and allows you to see many key concepts in action.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2081.1">
     Once you have downloaded the code and run
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2082.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.2083.1">
     in the project folder (to install all required dependencies), you can start the development server via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2084.1">
      npm run dev
     </span>
    </code>
    <span class="koboSpan" id="kobo.2085.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2085.2">
     As a result, upon visiting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2086.1">
      localhost:5173
     </span>
    </code>
    <span class="koboSpan" id="kobo.2087.1">
     , you should see the following UI:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2088.1">
     <img alt="img" src="image/B31339_10_17.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2089.1">
     Figure 10.17: The running starting project
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2090.1">
     Take your time to get acquainted with the provided project.
    </span>
    <span class="koboSpan" id="kobo.2090.2">
     Experiment with the different buttons in the UI, fill in some dummy data in the form input fields, and analyze the provided code.
    </span>
    <span class="koboSpan" id="kobo.2090.3">
     Please note that this dummy project does not send any HTTP requests to any server.
    </span>
    <span class="koboSpan" id="kobo.2090.4">
     All entered data is discarded the moment it is entered.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2091.1">
     To complete the activity, the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2092.1">
      Find optimization opportunities by looking for unnecessary component function executions.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2093.1">
      Also, identify unnecessary code execution inside of component functions (where the overall component function invocation can’t be prevented).
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2094.1">
      Determine which code could be loaded lazily instead of eagerly.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2095.1">
      Use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2096.1">
       memo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2097.1">
      function, the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2098.1">
       useMemo()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2099.1">
      Hook, and React’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2100.1">
       lazy()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2101.1">
      function to improve the code.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2102.1">
     You can tell that you came up with a good solution and sensible adjustments if you can see extra code fetching network requests (in the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2103.1">
      Network
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2104.1">
     tab of your browser developer tools) for clicking on the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2105.1">
      Reset password
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2106.1">
     or
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2107.1">
      Create a new account
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2108.1">
     buttons:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2109.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_18.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2110.1">
     Figure 10.18: In the final solution, some code is lazy loaded
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2111.1">
     In addition, you should see no
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2112.1">
      Validated password.
     </span>
    </code>
    <span class="koboSpan" id="kobo.2113.1">
     console message when typing into the email input fields (
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2114.1">
      Email
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2115.1">
     and
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2116.1">
      Confirm Email
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2117.1">
     ) of the signup form (that is, the form you switch to when clicking
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2118.1">
      Create a new account
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2119.1">
     ):
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2120.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_19.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2121.1">
     Figure 10.19: No “Validated password.”
    </span>
    <span class="koboSpan" id="kobo.2121.2">
     output in the console
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2122.1">
     You also shouldn’t get any console outputs when clicking the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2123.1">
      More Information
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2124.1">
     button:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2125.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_10_20.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2126.1">
     Figure 10.20: No console messages when clicking “More Information”
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2127.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2128.1">
      All code files used for this activity, and the solution, can be found at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.2129.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/10-behind-scenes/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2130.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>