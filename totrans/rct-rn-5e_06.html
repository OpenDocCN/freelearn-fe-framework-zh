<html><head></head><body>
  <div id="_idContainer059" class="Basic-Text-Frame">
    <h1 class="chapterNumber">5</h1>
    <h1 id="_idParaDest-81" class="chapterTitle">Crafting Reusable Components</h1>
    <p class="normal">The aim of this chapter is to show you how to implement React components that serve more than just one purpose. After reading this chapter, you’ll feel confident about how to compose application features.</p>
    <p class="normal">The chapter starts with a brief look at HTML elements and how they work in terms of helping to implement features versus having a high level of utility. Then, you’ll see the implementation of a <strong class="keyWord">monolithic component</strong> and discover the issues that it will cause down the road. The next section is devoted to re-implementing the monolithic component in such a way that the feature is composed of smaller components.</p>
    <p class="normal">Finally, the chapter ends with a discussion of rendering trees of React components and gives you some tips on how to avoid introducing too much complexity as a result of decomposing components. I’ll close the final section by reiterating the concept of high-level feature components versus utility components.</p>
    <p class="normal">The following topics will be covered in this chapter:</p>
    <ul>
      <li class="bulletList">Reusable HTML elements</li>
      <li class="bulletList">The difficulty with monolithic components</li>
      <li class="bulletList">Refactoring component structures</li>
      <li class="bulletList">Render props</li>
      <li class="bulletList">Rendering component trees</li>
    </ul>
    <h1 id="_idParaDest-82" class="heading-1">Technical requirements</h1>
    <p class="normal">You can find the code files for this chapter on GitHub at <a href="https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter05"><span class="url">https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter05</span></a>.</p>
    <h1 id="_idParaDest-83" class="heading-1">Reusable HTML elements</h1>
    <p class="normal">Let’s think about <a id="_idIndexMarker175"/>HTML elements for a moment. Depending on the type of HTML element, it’s either feature-centric or utility-centric. Utility-centric HTML elements are more reusable than feature-centric HTML elements. For example, consider the <code class="inlineCode">&lt;section&gt;</code> element. This is a generic element that can be used just about anywhere but its primary purpose is to compose the structural aspects of a feature: the outer shell of the feature and the inner sections of the feature. This is where the <code class="inlineCode">&lt;section&gt;</code> element is most useful.</p>
    <p class="normal">On the other side of the fence, you have elements such as <code class="inlineCode">&lt;p&gt;</code>, <code class="inlineCode">&lt;span&gt;</code>, and <code class="inlineCode">&lt;button&gt;</code>. These elements provide a high level of utility because they’re generic by design. You’re supposed to use <code class="inlineCode">&lt;button&gt;</code> elements whenever you have something that’s clickable by the user, resulting in an action. This is a level lower than the concept of a feature.</p>
    <p class="normal">While it’s easy to talk about HTML elements that have a high level of utility versus those that are geared toward specific features, the discussion is more detailed when data is involved. HTML is static markup; React components combine static markup with data. The question is, how do you make sure that you’re creating the right feature-centric and utility-centric components?</p>
    <p class="normal">The aim of this chapter is to find out how to go from a monolithic React component that defines a feature to a smaller feature-centric component combined with utility components.</p>
    <h1 id="_idParaDest-84" class="heading-1">The diffculty with monolithic components</h1>
    <p class="normal">If you could implement <a id="_idIndexMarker176"/>just one component for any given feature, it would simplify your job. At the very least, there wouldn’t be many components to maintain, and there wouldn’t be many communication paths for data to flow through because everything would be internal to the component.</p>
    <p class="normal">However, this idea doesn’t work for a number of reasons. Having monolithic feature components makes it difficult to coordinate any kind of team development effort, such as <strong class="keyWord">version control</strong>, <strong class="keyWord">merge conflicts</strong>, and <strong class="keyWord">parallel development</strong>. The bigger the monolithic components become, the more difficult they are to refactor into something better later on. </p>
    <p class="normal">There’s also the problem of feature overlap and feature communication. Overlap happens because of similarities between features; it’s unlikely that an application will have a set of features that are completely unique to one another. That would make the application very difficult to learn and use. Component communication essentially means that the state of something in one feature will impact the state of something in another feature. State is difficult to deal with, and even more so when there is a lot of state packaged up in a monolithic component.</p>
    <p class="normal">The best way to<a id="_idIndexMarker177"/> learn how to avoid monolithic components is to experience one firsthand. You’ll spend the remainder of this section implementing a monolithic component. In the following section, you’ll see how this component can be refactored into something a little more sustainable.</p>
    <h2 id="_idParaDest-85" class="heading-2">The JSX markup</h2>
    <p class="normal">The <strong class="keyWord">monolithic component</strong> we’re<a id="_idIndexMarker178"/> going to implement is a feature that lists articles. It’s just for illustrative purposes, so we don’t want to go overboard on the size of the component. It’ll be simple yet monolithic. The user can add new items to the list, toggle the summary of items in the list, and remove items from the list.</p>
    <p class="normal">Here is the JSX markup of the component:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;section&gt;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">header</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>Articles<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Title"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{title}</span><span class="hljs-tag"> </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeTitle}</span><span class="hljs-tag"> /&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span>
<span class="hljs-tag">          </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Summary"</span>
<span class="hljs-tag">          </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{summary}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeSummary}</span>
<span class="hljs-tag">        /&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickAdd}</span><span class="hljs-tag">&gt;</span>Add<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">header</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">article</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
          {articles.map((i) =&gt; (
            <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{i.id}</span><span class="hljs-tag">&gt;</span>
              <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span>
<span class="hljs-tag">                </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'#${</span><span class="hljs-attr">i.id</span><span class="hljs-tag">}'}</span>
<span class="hljs-tag">                </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Toggle Summary"</span>
<span class="hljs-tag">                </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickToggle(i.id)}
              &gt;
                {i.title}
              <span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>
              <span class="hljs-symbol">&amp;nbsp;</span>
              <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span>
<span class="hljs-tag">                </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'#${</span><span class="hljs-attr">i.id</span><span class="hljs-tag">}'}</span>
<span class="hljs-tag">                </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Remove"</span>
<span class="hljs-tag">                </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickRemove(i.id)}
              &gt;
                <span class="hljs-symbol">&amp;#10007;</span>
              <span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
              <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{{</span><span class="hljs-tag"> </span><span class="hljs-attr">display:</span><span class="hljs-tag"> </span><span class="hljs-attr">i.display</span><span class="hljs-tag"> }}&gt;</span>{i.summary}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;/</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">article</span><span class="hljs-tag">&gt;</span>
    &lt;/section&gt;
</code></pre>
    <p class="normal">This is definitely more <a id="_idIndexMarker179"/>JSX than is necessary in one place. We’ll improve on this in the following section, but for now, let’s implement the initial state for this component.</p>
    <h2 id="_idParaDest-86" class="heading-2">Initial state</h2>
    <p class="normal">Now, let’s look at the initial state of this<a id="_idIndexMarker180"/> component:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-keyword">const</span> [articles, setArticles] = <span class="hljs-title">React</span>.<span class="hljs-title">useState</span>([
    {
      <span class="hljs-attr">id</span>: id.<span class="hljs-title">next</span>(),
      <span class="hljs-attr">title</span>: <span class="hljs-string">"Article 1"</span>,
      <span class="hljs-attr">summary</span>: <span class="hljs-string">"Article 1 Summary"</span>,
      <span class="hljs-attr">display</span>: <span class="hljs-string">"none"</span>,
    },
    {
      <span class="hljs-attr">id</span>: id.<span class="hljs-title">next</span>(),
      <span class="hljs-attr">title</span>: <span class="hljs-string">"Article 2"</span>,
      <span class="hljs-attr">summary</span>: <span class="hljs-string">"Article 2 Summary"</span>,
      <span class="hljs-attr">display</span>: <span class="hljs-string">"none"</span>,
    },
  ]);
  <span class="hljs-keyword">const</span> [title, setTitle] = <span class="hljs-title">React</span>.<span class="hljs-title">useState</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">const</span> [summary, setSummary] = <span class="hljs-title">React</span>.<span class="hljs-title">useState</span>(<span class="hljs-string">""</span>);
</code></pre>
    <p class="normal">The state <a id="_idIndexMarker181"/>consists of an array of <code class="inlineCode">articles</code>, a <code class="inlineCode">title</code> string, and a <code class="inlineCode">summary</code> string. Each article object in the <code class="inlineCode">articles</code> array has several string fields to help render the article and an <code class="inlineCode">id</code> field, which is a number. The number is generated by <code class="inlineCode">id.next().</code></p>
    <p class="normal">Let’s take a look at how this works:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> id = (<span class="hljs-keyword">function</span>* () {
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">yield</span> i;
    i += <span class="hljs-number">1</span>;
  }
})();
</code></pre>
    <p class="normal">The <code class="inlineCode">id</code> constant is a generator. It is created by defining an inline generator function and calling it right away. This generator will yield numbers infinitely. So, calling <code class="inlineCode">id.next()</code> the first time returns <code class="inlineCode">1</code>, the next is <code class="inlineCode">2</code>, and so on. This simple utility will come in handy when it’s time to add new articles and we need a new unique ID.</p>
    <h2 id="_idParaDest-87" class="heading-2">Event handler implementation</h2>
    <p class="normal">At this point, you have the initial state and the <a id="_idIndexMarker182"/>JSX of the component. Now, it’s time to implement the event handlers:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-keyword">const</span> onChangeTitle = <span class="hljs-title">useCallback</span>(<span class="hljs-function">(</span><span class="hljs-params">e</span><span class="hljs-function">) =&gt;</span> {
    <span class="hljs-title">setTitle</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
  }, []);
  <span class="hljs-keyword">const</span> onChangeSummary = <span class="hljs-title">useCallback</span>(<span class="hljs-function">(</span><span class="hljs-params">e</span><span class="hljs-function">) =&gt;</span> {
    <span class="hljs-title">setSummary</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
  }, []);
</code></pre>
    <p class="normal">The <code class="inlineCode">onChangeTitle()</code> and <code class="inlineCode">onChangeSummary()</code> methods use the hook’s <code class="inlineCode">setState()</code> to update the <code class="inlineCode">title</code> and <code class="inlineCode">summary</code> state values, respectively. The new values come from the <code class="inlineCode">target.value</code> property of the <code class="inlineCode">event</code> argument, which<a id="_idIndexMarker183"/> is the value that the user types into the text input:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-keyword">const</span> onClickAdd = <span class="hljs-title">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title">setArticles</span>(<span class="hljs-function">(</span><span class="hljs-params">state</span><span class="hljs-function">) =&gt;</span> [
      ...state,
      {
        <span class="hljs-attr">id</span>: id.<span class="hljs-title">next</span>(),
        <span class="hljs-attr">title</span>: title,
        <span class="hljs-attr">summary</span>: summary,
        <span class="hljs-attr">display</span>: <span class="hljs-string">"none"</span>,
      },
    ]);
    <span class="hljs-title">setTitle</span>(<span class="hljs-string">""</span>);
    <span class="hljs-title">setSummary</span>(<span class="hljs-string">""</span>);
  }, [summary, title]);
</code></pre>
    <p class="normal">The <code class="inlineCode">onClickAdd()</code> method adds a new article to the <code class="inlineCode">articles</code> state. This state value is an array. We use the spread operator to build a new array from the existing array (<code class="inlineCode">[...state]</code>), and the new object gets added to the end of the new array. The reason we’re building a new array and passing it to <code class="inlineCode">setArticles()</code> is so that there are no surprises. In other words, we’re treating state values as immutable so that other code that updates the same state doesn’t accidentally cause problems. Next, we’ll use a handler to remove the article:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-keyword">const</span> onClickRemove = <span class="hljs-title">useCallback</span>(<span class="hljs-function">(</span><span class="hljs-params">id</span><span class="hljs-function">) =&gt;</span> {
    <span class="hljs-title">setArticles</span>(<span class="hljs-function">(</span><span class="hljs-params">state</span><span class="hljs-function">) =&gt;</span> 
      state.<span class="hljs-title">filter</span>(<span class="hljs-function">(</span><span class="hljs-params">article</span><span class="hljs-function">) =&gt;</span> article.<span class="hljs-property">id</span> !== id)
    );
  }, []);
</code></pre>
    <p class="normal">The <code class="inlineCode">onClickRemove()</code> method removes the article with the given ID from the <code class="inlineCode">articles</code> state. It does this by calling <code class="inlineCode">filter()</code> on the array, which returns a new array, so the operation is immutable. The filter removes the object with the given ID:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-keyword">const</span> onClickToggle = <span class="hljs-title">useCallback</span>(<span class="hljs-function">(</span><span class="hljs-params">id</span><span class="hljs-function">) =&gt;</span> {
    <span class="hljs-title">setArticles</span>(<span class="hljs-function">(</span><span class="hljs-params">state</span><span class="hljs-function">) =&gt;</span> {
      <span class="hljs-keyword">const</span> articles = [...state];
      <span class="hljs-keyword">const</span> index = articles.<span class="hljs-title">findIndex</span>(<span class="hljs-function">(</span><span class="hljs-params">article</span><span class="hljs-function">) =&gt;</span> article.<span class="hljs-property">id</span> === id);
      articles[index] = {
        ...articles[index],
        <span class="hljs-attr">display</span>: articles[index].<span class="hljs-property">display</span> ? <span class="hljs-string">""</span> : <span class="hljs-string">"none"</span>,
      };
      <span class="hljs-keyword">return</span> articles;
    });
  }, []);
</code></pre>
    <p class="normal">The <code class="inlineCode">onClickToggle()</code> method<a id="_idIndexMarker184"/> toggles the visibility of the article with the given ID. We carry out two immutable operations in this method. First, we build a new <code class="inlineCode">articles</code> array. Then, based on the index of the given ID, we replace the article object at the index with a new object. We use the object spread operator to fill in the properties (<code class="inlineCode">{...articles[index]}</code>), and then the display property value is toggled based on the existing display value.</p>
    <p class="normal">Here’s a screenshot of the output rendered:</p>
    <figure class="mediaobject"><img src="../Images/B19636_05_01.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 5.1: Rendered articles</p>
    <p class="normal">At this point, we have a component that does everything that we need our feature to do. However, it’s monolithic and difficult to maintain. Imagine if we had other places in our app that use the same pieces of <code class="inlineCode">MyFeature</code>. They have to re-invent them because they cannot be shared. In the following section, we’ll work on breaking down <code class="inlineCode">MyFeature</code> into smaller reusable components.</p>
    <h1 id="_idParaDest-88" class="heading-1">Refactoring component structures</h1>
    <p class="normal">You have a monolithic<a id="_idIndexMarker185"/> feature component: <em class="italic">now what</em>? Let’s make it better.</p>
    <p class="normal">In this section, you’ll learn how to take the feature component that you just implemented in the preceding section and split it into more maintainable components. You’ll start with the <strong class="keyWord">JSX</strong>, as this is probably the best refactor starting point. Then, you’ll implement new components for the feature. </p>
    <p class="normal">Next, you’ll make these new components functional instead of class-based. Finally, you’ll learn how to use <strong class="keyWord">render props</strong> to reduce the number of direct component dependencies in your application, and how to remove classes entirely by using hooks to manage state within functional components.</p>
    <h2 id="_idParaDest-89" class="heading-2">Starting with the JSX</h2>
    <p class="normal">The <strong class="keyWord">JSX</strong> of any <strong class="keyWord">monolithic component</strong> is the <a id="_idIndexMarker186"/>best starting point for figuring out how to refactor it into smaller components. Let’s visualize the structure of the component that we’re currently refactoring:</p>
    <figure class="mediaobject"><img src="../Images/B19636_05_02.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 5.2: Visualization of the JSX that makes up a React component</p>
    <p class="normal">The top part of the JSX is the form controls, so this could easily become its own component:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;header&gt;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>Articles<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span>
<span class="hljs-tag">    </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Title"</span><span class="hljs-tag"> </span>
<span class="hljs-tag">    </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{title}</span><span class="hljs-tag"> </span>
<span class="hljs-tag">    </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeTitle}</span><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span>
<span class="hljs-tag">    </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Summary"</span><span class="hljs-tag"> </span>
<span class="hljs-tag">    </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{summary}</span><span class="hljs-tag"> </span>
<span class="hljs-tag">    </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeSummary}</span><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickAdd}</span><span class="hljs-tag">&gt;</span>Add<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
&lt;/header&gt;;
</code></pre>
    <p class="normal">Next, you have the list of articles:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;ul&gt;
  {articles.<span class="hljs-title">map</span>(<span class="hljs-function">(</span><span class="hljs-params">i</span><span class="hljs-function">) =&gt;</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{i.id}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span>
<span class="hljs-tag">        </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">`#${</span><span class="hljs-attr">i.id</span><span class="hljs-tag">}`}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Toggle Summary"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickToggle(i.id)}
      &gt;
        {i.title}
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>
      &amp;nbsp;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span>
<span class="hljs-tag">        </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'#${</span><span class="hljs-attr">i.id</span><span class="hljs-tag">}'}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Remove"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickRemove(i.id)}
      &gt;
        <span class="hljs-symbol">&amp;#10007;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{{</span><span class="hljs-tag"> </span><span class="hljs-attr">display:</span><span class="hljs-tag"> </span><span class="hljs-attr">i.display</span><span class="hljs-tag"> }}&gt;</span>{i.summary}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    &lt;<span class="hljs-regexp">/li&gt;</span>
<span class="hljs-regexp">  ))}</span>
<span class="hljs-regexp">&lt;/u</span>l&gt;
</code></pre>
    <p class="normal">Within this list, there’s potential for an article component, which would be everything in the <code class="inlineCode">&lt;li&gt;</code> tag. Let’s try building this next.</p>
    <h2 id="_idParaDest-90" class="heading-2">Implementing an article list component</h2>
    <p class="normal">Here’s what the<a id="_idIndexMarker187"/> ArticleList component implementation looks like:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span> <span class="hljs-title">ArticleList</span>(<span class="hljs-params">{ articles, onClickToggle, onClickRemove }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
      {articles.map((i) =&gt; (
        <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{i.id}</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span>
<span class="hljs-tag">            </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'#${</span><span class="hljs-attr">i.id</span><span class="hljs-tag">}'}</span>
<span class="hljs-tag">            </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Toggle Summary"</span>
<span class="hljs-tag">            </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickToggle(i.id)}
          &gt;
            {i.title}
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-symbol">&amp;nbsp;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span>
<span class="hljs-tag">            </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'#${</span><span class="hljs-attr">i.id</span><span class="hljs-tag">}'}</span>
<span class="hljs-tag">            </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Remove"</span>
<span class="hljs-tag">            </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickRemove(i.id)}
          &gt;
            <span class="hljs-symbol">&amp;#10007;</span>
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{{</span><span class="hljs-tag"> </span><span class="hljs-attr">display:</span><span class="hljs-tag"> </span><span class="hljs-attr">i.display</span><span class="hljs-tag"> }}&gt;</span>{i.summary}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">We’re taking the relevant<a id="_idIndexMarker188"/> JSX out of the monolithic component and putting it here. Now, let’s see what the feature component of JSX looks like:</p>
    <pre class="programlisting code"><code class="hljs-code">    &lt;section&gt;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">header</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>Articles<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Title"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{title}</span><span class="hljs-tag"> </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeTitle}</span><span class="hljs-tag"> /&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span>
<span class="hljs-tag">          </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Summary"</span>
<span class="hljs-tag">          </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{summary}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeSummary}</span>
<span class="hljs-tag">        /&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickAdd}</span><span class="hljs-tag">&gt;</span>Add<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">header</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">ArticleList</span>
<span class="hljs-tag">        </span><span class="hljs-attr">articles</span><span class="hljs-tag">=</span><span class="hljs-string">{articles}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onClickRemove</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickRemove}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onClickToggle</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickToggle}</span>
<span class="hljs-tag">      /&gt;</span>
    &lt;/section&gt;
</code></pre>
    <p class="normal">The list of articles<a id="_idIndexMarker189"/> is now rendered by the <code class="inlineCode">ArticleList</code> component. The list of articles to render is passed to this component as a property along with two of the event handlers.</p>
    <div class="note">
      <p class="normal">Why are we passing event handlers to a child component? The reason is so that the <code class="inlineCode">ArticleList</code> component doesn’t have to worry about the state or how the state changes. All it cares about is rendering content and making sure the appropriate event callbacks are hooked up to the appropriate DOM elements. This is a container component concept that I’ll expand upon later in this chapter.</p>
    </div>
    <p class="normal">Now that we have an <code class="inlineCode">ArticleList</code> component, let’s see whether we can further break it down into smaller reusable components.</p>
    <h2 id="_idParaDest-91" class="heading-2">Implementing an article item component</h2>
    <p class="normal">After<a id="_idIndexMarker190"/> implementing the article list component, you might decide that it’s a good idea to break this component.</p>
    <p class="normal">Another way to look at it is this: if it turns out that we don’t actually need the item as its own component, this new component doesn’t introduce much indirection or complexity. Without further ado, here’s the article item component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span> <span class="hljs-title">ArticleItem</span>(<span class="hljs-params">{ article, onClickRemove }</span>) {
  <span class="hljs-keyword">const</span> [isOpened, setIsOpened] = <span class="hljs-title">React</span>.<span class="hljs-title">useState</span>(article.<span class="hljs-property">display</span> !== <span class="hljs-string">"none"</span>);
  <span class="hljs-keyword">const</span> onClickToggle = <span class="hljs-title">React</span>.<span class="hljs-title">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title">setIsOpened</span>(<span class="hljs-function">(</span><span class="hljs-params">state</span><span class="hljs-function">) =&gt;</span> !state);
  }, []);
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'</span><span class="hljs-tag">#${</span><span class="hljs-attr">article.id</span><span class="hljs-tag">}'} </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Toggle Summary"</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickToggle}</span><span class="hljs-tag">&gt;</span>
        {article.title}
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-symbol">&amp;nbsp;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span>
<span class="hljs-tag">        </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">'#${</span><span class="hljs-attr">article.id</span><span class="hljs-tag">}'}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">"Remove"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> onClickRemove(article.id)}
      &gt;
        <span class="hljs-symbol">&amp;#10007;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{{</span><span class="hljs-tag"> </span><span class="hljs-attr">display:</span><span class="hljs-tag"> </span><span class="hljs-attr">isOpened</span><span class="hljs-tag"> ? "</span><span class="hljs-attr">block</span><span class="hljs-tag">" </span><span class="hljs-attr">:</span><span class="hljs-tag"> "</span><span class="hljs-attr">none</span><span class="hljs-tag">" }}&gt;</span>{article.summary}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">Essentially, the <a id="_idIndexMarker191"/>component remains unchanged except for one enhancement: we have relocated the logic for expanding and collapsing the article to the <code class="inlineCode">ArticleItem</code> component, which offers several advantages. Firstly, we reduced the original <code class="inlineCode">MyFeature</code> component, since it doesn’t need to know when we hide or expand an article at all. Secondly, we have improved the performance of the application due to the fact that when expanding an article, we no longer recreate the array of articles using the spread operator but only change the state locally. As a result, when expanding the article, the list of articles remains the same and React does not re-render the page, but only one component is re-rendered.</p>
    <p class="normal">Here’s the new <code class="inlineCode">ArticleItem</code> component being rendered by the <code class="inlineCode">ArticleList</code> component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span> <span class="hljs-title">ArticleList</span>(<span class="hljs-params">{ articles, onClickRemove }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
      {articles.map((article) =&gt; (
        <span class="hljs-tag">&lt;</span><span class="hljs-name">ArticleItem</span>
<span class="hljs-tag">          </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{article.id.value}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">article</span><span class="hljs-tag">=</span><span class="hljs-string">{article}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">onClickRemove</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickRemove}</span>
<span class="hljs-tag">        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">Do you see how this list just maps the list of articles? What if you wanted to implement another article list that does some filtering too? If so, it’s beneficial to have a reusable <code class="inlineCode">ArticleItem</code> component. Next, we’ll move the add article markup into its own component.</p>
    <h2 id="_idParaDest-92" class="heading-2">Implementing an AddArticle component</h2>
    <p class="normal">Now that we’re done <a id="_idIndexMarker192"/>with the article list, it’s time to think about the form controls used to add a new article. Let’s implement a component for this aspect of the feature:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span> <span class="hljs-title">AddArticle</span>(<span class="hljs-params">{</span>
<span class="hljs-params">  name,</span>
<span class="hljs-params">  title,</span>
<span class="hljs-params">  summary,</span>
<span class="hljs-params">  onChangeTitle,</span>
<span class="hljs-params">  onChangeSummary,</span>
<span class="hljs-params">  onClickAdd,</span>
<span class="hljs-params">}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">section</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>{name}<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Title"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{title}</span><span class="hljs-tag"> </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeTitle}</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Summary"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{summary}</span><span class="hljs-tag"> </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeSummary}</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickAdd}</span><span class="hljs-tag">&gt;</span>Add<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">section</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">Now, our feature component only needs to render <code class="inlineCode">&lt;AddArticle&gt;</code> and <code class="inlineCode">&lt;ArticleList&gt;</code> components:</p>
    <pre class="programlisting code"><code class="hljs-code">&lt;section&gt;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">AddArticle</span>
<span class="hljs-tag">    </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"Articles"</span>
<span class="hljs-tag">    </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">{title}</span>
<span class="hljs-tag">    </span><span class="hljs-attr">summary</span><span class="hljs-tag">=</span><span class="hljs-string">{summary}</span>
<span class="hljs-tag">    </span><span class="hljs-attr">onChangeTitle</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeTitle}</span>
<span class="hljs-tag">    </span><span class="hljs-attr">onChangeSummary</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeSummary}</span>
<span class="hljs-tag">    </span><span class="hljs-attr">onClickAdd</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickAdd}</span>
<span class="hljs-tag">  /&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">ArticleList</span><span class="hljs-tag"> </span><span class="hljs-attr">articles</span><span class="hljs-tag">=</span><span class="hljs-string">{articles}</span><span class="hljs-tag"> </span><span class="hljs-attr">onClickRemove</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickRemove}</span><span class="hljs-tag"> /&gt;</span>
&lt;/section&gt;
</code></pre>
    <p class="normal">The focus of this component is on the feature data, while it defers to other components for rendering UI elements. In the next section, we’ll look at how render props make it possible to pass components around as properties instead of directly importing them as dependencies.</p>
    <h1 id="_idParaDest-93" class="heading-1">Render props</h1>
    <p class="normal">Imagine implementing a <a id="_idIndexMarker193"/>feature that is composed of several smaller components, like what you’ve been working on in this chapter. The <code class="inlineCode">MyFeature</code> component depends on <code class="inlineCode">ArticleList</code> and <code class="inlineCode">AddArticle</code>. Now, imagine using <code class="inlineCode">MyFeature</code> in different parts of your application where it makes sense to use a different implementation of <code class="inlineCode">ArticleList</code> or <code class="inlineCode">AddArticle</code>. The fundamental challenge is substituting one component for another.</p>
    <p class="normal"><strong class="keyWord">Render props</strong> are a nice way to address this challenge. The idea is that you pass a property to your component whose value is a function that returns a component to render. This way, instead of having the feature component directly depend on its child components, you can configure them as you like; they pass them in as render prop values. Let’s look at an example. Instead of having <code class="inlineCode">MyFeature</code> directly depend on <code class="inlineCode">AddArticle</code> and <code class="inlineCode">ArticleList</code>, you can pass them as render props. Here’s what the <code class="inlineCode">MyFeature</code> looks like when it’s using render props to fill in the holes where <code class="inlineCode">add</code> used to be:</p>
    <pre class="programlisting code"><code class="hljs-code">    &lt;section&gt;
      {<span class="hljs-title">addArticle</span>({
        title,
        summary,
        onChangeTitle,
        onChangeSummary,
        onClickAdd,
      })}
      {<span class="hljs-title">articleList</span>({ articles, onClickRemove })}
    &lt;/section&gt;
</code></pre>
    <p class="normal">The <code class="inlineCode">addArticle()</code> and <code class="inlineCode">articleList()</code> functions are called with the same property values that would have been passed to <code class="inlineCode">&lt;AddArticle&gt;</code> and <code class="inlineCode">&lt;ArticleList&gt;</code>, respectively. The difference now is that this module no longer imports <code class="inlineCode">AddArticle</code> or <code class="inlineCode">ArticleList</code> as dependencies.</p>
    <p class="normal">Now, let’s take a look at the <code class="inlineCode">main.js</code> file where <code class="inlineCode">&lt;MyFeature&gt;</code> is rendered:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> root = <span class="hljs-title">ReactDOM</span>.<span class="hljs-title">createRoot</span>(<span class="hljs-variable">document</span>.<span class="hljs-title">getElementById</span>(<span class="hljs-string">"root"</span>));
root.<span class="hljs-title">render</span>(
  <span class="hljs-tag">&lt;</span><span class="hljs-name">MyFeature</span>
<span class="hljs-tag">    </span><span class="hljs-attr">addArticle</span><span class="hljs-tag">=</span><span class="hljs-string">{({</span>
<span class="hljs-tag">      </span><span class="hljs-attr">title</span><span class="hljs-tag">,</span>
<span class="hljs-tag">      </span><span class="hljs-attr">summary</span><span class="hljs-tag">,</span>
<span class="hljs-tag">      </span><span class="hljs-attr">onChangeTitle</span><span class="hljs-tag">,</span>
<span class="hljs-tag">      </span><span class="hljs-attr">onChangeSummary</span><span class="hljs-tag">,</span>
<span class="hljs-tag">      </span><span class="hljs-attr">onClickAdd</span><span class="hljs-tag">,</span>
<span class="hljs-tag">    }) =&gt;</span> (
      <span class="hljs-tag">&lt;</span><span class="hljs-name">AddArticle</span>
<span class="hljs-tag">        </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"Articles"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">title</span><span class="hljs-tag">=</span><span class="hljs-string">{title}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">summary</span><span class="hljs-tag">=</span><span class="hljs-string">{summary}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onChangeTitle</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeTitle}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onChangeSummary</span><span class="hljs-tag">=</span><span class="hljs-string">{onChangeSummary}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onClickAdd</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickAdd}</span>
<span class="hljs-tag">      /&gt;</span>
    )}
    articleList={({ articles, onClickRemove }) =&gt; (
      <span class="hljs-tag">&lt;</span><span class="hljs-name">ArticleList</span><span class="hljs-tag"> </span><span class="hljs-attr">articles</span><span class="hljs-tag">=</span><span class="hljs-string">{articles}</span><span class="hljs-tag"> </span><span class="hljs-attr">onClickRemove</span><span class="hljs-tag">=</span><span class="hljs-string">{onClickRemove}</span><span class="hljs-tag"> /&gt;</span>
    )}
  /&gt;
);
</code></pre>
    <p class="normal">There’s a lot more going on here now than there was when it was just <code class="inlineCode">&lt;MyFeature&gt;</code> being rendered. Let’s break down why that is. Here is where you pass the <code class="inlineCode">addArticle</code> and <code class="inlineCode">articleList</code> render props. These prop values are functions that accept argument values from <code class="inlineCode">MyComponent</code>. For example, the <code class="inlineCode">onClickRemove()</code> function comes from <code class="inlineCode">MyFeature</code> and is used to change the state of that component. You can use the <strong class="keyWord">render prop</strong> function to pass<a id="_idIndexMarker194"/> this to the component that will be rendered, along with any other values. The return value of these functions is what is ultimately rendered.</p>
    <p class="normal">In this section, you learned that by passing render property values: functions that render JSX markup: you can avoid hardcoding dependencies in places where you might want to share functionality. Passing a different property value to a component is usually easier than changing the dependencies used by a given module.</p>
    <h1 id="_idParaDest-94" class="heading-1">Rendering component trees</h1>
    <p class="normal">Let’s take a moment<a id="_idIndexMarker195"/> to reflect on what we’ve accomplished so far in this chapter. The feature component that was once monolithic ended up focusing almost entirely on the state data. It handled the initial state and handled transforming the state and it would handle network requests that fetch state, if there were any. This is a typical container component in a React application, and it’s the starting point for data.</p>
    <p class="normal">The new components that you implemented to better compose the feature were the recipients of this data. The difference between these components and their container is that they only care about the properties that are passed into them at the time they’re rendered. In other words, they only care about data snapshots at a particular point in time. From here, these components might pass the property data into their own child components as properties. The generic pattern for composing React components is as follows:</p>
    <figure class="mediaobject"><img src="../Images/B19636_05_03.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 5.3: A pattern for composing larger React components from smaller components</p>
    <p class="normal">The <strong class="keyWord">container component</strong> will typically contain one direct <strong class="keyWord">child</strong>. In this diagram, you can see that the container has either an <strong class="keyWord">item detail component</strong> or a <strong class="keyWord">list component</strong>. Of course, there will be variations in these two categories, as every application is different. This generic pattern has three levels of component composition. Data flows in one direction from the <strong class="keyWord">container</strong> all the way down to the <strong class="keyWord">utility</strong> components.</p>
    <p class="normal">Once you add more than three layers, the application architecture becomes difficult to comprehend. There <a id="_idIndexMarker196"/>will be the odd case where you’ll need to add four layers of React components but, as a rule of thumb, you should avoid this.</p>
    <h2 id="_idParaDest-95" class="heading-2">Feature components and utility components</h2>
    <p class="normal">In the <strong class="keyWord">monolithic component</strong> example that we have worked on in this chapter, you started with a single component that was entirely focused on a feature. This means that the component has very little utility elsewhere in the application.</p>
    <p class="normal">The reason for this is that top-level components deal with the application state. <strong class="keyWord">Stateful components</strong> are difficult<a id="_idIndexMarker197"/> to use in any other context. As you refactored the monolithic feature component, you created new components that moved further away from the data. The general rule is that the further your components move from stateful data, the more utility they have because their property values could be passed in from anywhere in the application.</p>
    <h1 id="_idParaDest-96" class="heading-1">Summary</h1>
    <p class="normal">This chapter was about avoiding a monolithic component design. However, monoliths are often a necessary starting point in the design of any React component.</p>
    <p class="normal">You began by learning about how the different HTML elements have varying degrees of utility. Next, you learned about the issues with monolithic React components and walked through the implementation of a monolithic component.</p>
    <p class="normal">Then, you spent several sections learning how to refactor the monolithic component into a more sustainable design. From this exercise, you learned that container components should only have to think in terms of handling state, while smaller components have more utility because their property values can be passed from anywhere. You also learned that you could use render props for better control over component dependencies and substitution.</p>
    <p class="normal">In the next chapter, you’ll learn about the component props validation and type checking.</p>
  </div>
</body></html>