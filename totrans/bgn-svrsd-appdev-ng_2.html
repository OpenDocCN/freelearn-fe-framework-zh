<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Creating the Application Module and Components"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Creating the Application Module and Components</h1></div></div></div><p>In this lesson, we will start by creating a <code class="literal">PostsModule</code> that contains all the code related to displaying the posts that come from our API.</p><p>Inside this module, we will add various components, a service, and two resolvers.</p><p>The components are used to display the data in the browser. We will go over their use in this lesson. The service is used to retrieve the data from the API. Lastly, we will add resolvers to our app; resolvers make sure the data from the service is available at the moment we navigate from one route to another.</p><div class="section" title="Lesson Objectives"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl4sec02"/>Lesson Objectives</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Explore the types of components that will be used in our app</li><li class="listitem" style="list-style-type: disc">Create and load the PostsModule</li><li class="listitem" style="list-style-type: disc">Create the container components, such as PostsComponent and ProfileComponent</li><li class="listitem" style="list-style-type: disc">Add dummy posts and profiles</li><li class="listitem" style="list-style-type: disc">Create a service to retrieve data</li><li class="listitem" style="list-style-type: disc">Create the presentational components, such as PostListComponent, PostItemComponent, and ProfileItemComponent</li><li class="listitem" style="list-style-type: disc">Create and import resolvers</li></ul></div></div></div>
<div class="section" title="Types of Components"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec13"/>Types of Components</h1></div></div></div><p>In this<a class="indexterm" id="id45"/> section, we will take a look at how we can differentiate our components by making a distinction between <span class="strong"><strong>container</strong></span> and <span class="strong"><strong>presentational</strong></span> components. Sometimes, they are also called <span class="emphasis"><em>smart</em></span> and <span class="emphasis"><em>dumb</em></span> components, referring to how much <span class="emphasis"><em>knowledge</em></span> of the world outside of the components each of them has.</p><p>The main <a class="indexterm" id="id46"/>difference we can make is the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A presentational component is responsible for <span class="emphasis"><em>how things look</em></span></li><li class="listitem" style="list-style-type: disc">A container component is responsible for <span class="emphasis"><em>how things work</em></span></li></ul></div><p>We will dive into more details of why this distinction is important when we create them, but we can give away a few things already.</p><div class="section" title="Presentational Components"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec24"/>Presentational Components</h2></div></div></div><p>We can <a class="indexterm" id="id47"/>say the following <a class="indexterm" id="id48"/>about presentational components:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">They get their data <span class="emphasis"><em>passed in</em></span> using the <code class="literal">@Input()</code> decorator</li><li class="listitem" style="list-style-type: disc">Any operations are <span class="emphasis"><em>passed up</em></span> using the <code class="literal">@Output()</code> decorator</li><li class="listitem" style="list-style-type: disc">They handle the markup and the styling of the application</li><li class="listitem" style="list-style-type: disc">They mostly just contain other presentational components</li><li class="listitem" style="list-style-type: disc">They have no knowledge (or dependencies) on any routes or services from the app</li></ul></div></div><div class="section" title="Container Components"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec25"/>Container Components</h2></div></div></div><p>We can say the <a class="indexterm" id="id49"/>following<a class="indexterm" id="id50"/> about container components:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">They retrieve their data from a service or a resolver</li><li class="listitem" style="list-style-type: disc">They handle the operations that they receive from the presentational components</li><li class="listitem" style="list-style-type: disc">They have very little markup and styling</li><li class="listitem" style="list-style-type: disc">They will often contain both presentational and container components</li></ul></div></div><div class="section" title="Folder Structure"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec26"/>Folder Structure</h2></div></div></div><p>To make the <a class="indexterm" id="id51"/>distinction clear in our project, we will use different folders for each type of component:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">src/&lt;module&gt;/components</code> folder is where the presentational components live</li><li class="listitem" style="list-style-type: disc">The <code class="literal">src/&lt;module&gt;/containers</code> folder is where the container components live</li></ul></div></div></div>
<div class="section" title="Generate and Lazy Load the PostsModule"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec14"/>Generate and Lazy Load the PostsModule</h1></div></div></div><p>We <a class="indexterm" id="id52"/>will generate the <code class="literal">PostsModule</code> using the <code class="literal">ng</code> command and lazy load the <code class="literal">PostsModule</code> in the <code class="literal">AppRoutingModule</code>.</p><p>Using the <code class="literal">ng generate</code> command, we can generate or scaffold out all sorts of code that can be used in our Angular application.</p><p>We will use the <code class="literal">ng generate module</code> command to generate our <code class="literal">PostsModule</code>.</p><p>This command has one required parameter, which is the name. In our application, we will call this module <code class="literal">posts</code>. A second optional parameter is passed in in order to create a separate file to hold the routes for this module, the <code class="literal">PostsRoutingModule</code>:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g m posts --routing</pre></div></li></ol></div><p>As you can see from the output of the command, our <code class="literal">PostsModule</code> is generated in the new folder <code class="literal">src/app/posts</code>:</p><div class="mediaobject"><img alt="Generate and Lazy Load the PostsModule" src="graphics/1.33.jpg"/></div><p>In<a class="indexterm" id="id53"/> contrast to how we load our <code class="literal">UiModule</code> by importing it into our <code class="literal">AppModule</code>, we will lazy load our <code class="literal">PostsModule</code> using our <code class="literal">AppRoutingModule</code>.</p><p>This is an optimization of how our application is built and it makes sure that our application has a smaller initial file to download by using a technology<a class="indexterm" id="id54"/> called <span class="strong"><strong>code splitting</strong></span>. This basically bundles each lazy loaded module into its own file and the browser is instructed to download this file when needed, but not before.</p><p>We will add two routes to our main application file. The first route is a route with a blank <code class="literal">path</code> property (our default route) and its function is to redirect to the <code class="literal">/posts</code> route.</p><p>The second route is the <code class="literal">/posts</code> route and it lazy loads the <code class="literal">PostsModule</code>.</p><p>If the user <a class="indexterm" id="id55"/>navigates to the app, the first route that will be found is our blank redirect route. This will tell the router to navigate to <code class="literal">/posts</code>. The router finds the <code class="literal">/posts</code> route and navigates the user to that module:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the project in your editor.</li><li class="listitem">Open the <code class="literal">src/app/app-routing.module.ts</code> file.</li><li class="listitem">Locate our only existing route object that is defined in the <code class="literal">routes</code> property.</li><li class="listitem">Inside this new <code class="literal">children</code> array, we create two routes that look like this:<div class="informalexample"><pre class="programlisting">{ path: '', redirectTo: '/posts', pathMatch: 'full'},
{ path: 'posts', loadChildren: './posts/posts.module#PostsModule' },</pre></div><div class="informalexample"><pre class="programlisting">const routes: Routes = [
  { path: '', component: LayoutComponent, children: [
    { path: '', redirectTo: '/posts', pathMatch: 'full'},
    { path: 'posts', loadChildren: './posts/posts.module#PostsModule' },
  ] },
];</pre></div></li></ol></div><p>Here are a<a class="indexterm" id="id56"/> few things to explain how this works:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">First, we define that we want to have children to our main route. This makes sure that all of our children get rendered in the <code class="literal">&lt;router-outlet&gt;</code> that is defined in the <code class="literal">LayoutComponent</code> in the <span class="emphasis"><em>Creating the LayoutComponent</em></span> section.</li><li class="listitem" style="list-style-type: disc">We define our first route to respond to all paths (that's what the empty string does), and we tell it to redirect to the <code class="literal">/posts</code> route.</li><li class="listitem" style="list-style-type: disc">Lastly, we create a <code class="literal">posts</code> route and we tell it to load its children from our new module. The <code class="literal">loadChildren</code> property is what enables the lazy loading.</li></ul></div><p>When we refresh our page in the browser, we can see that nothing changes in the app itself, but we can see that our URL has changed; it has redirected to <code class="literal">/posts</code>.</p><p>Let's move on to the next section to create our container components so that we can start<a class="indexterm" id="id57"/> seeing data!</p></div>
<div class="section" title="Creating the Container Components"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec15"/>Creating the Container Components</h1></div></div></div><p>In this<a class="indexterm" id="id58"/> section, we will use <code class="literal">ng generate</code> to create the <code class="literal">PostsComponent</code> and <code class="literal">ProfileComponent</code> inside the <code class="literal">PostsModule</code>, add routes to both components, and add dummy data that we can use to build our presentational components.</p><div class="section" title="Creating PostsComponent and ProfileComponent"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec27"/>Creating PostsComponent and ProfileComponent</h2></div></div></div><p>We will be using the <code class="literal">ng generate</code> command to create our <code class="literal">PostsComponent</code>. This is the component that will eventually list an overview for all our posts.</p><p>The application route to this component will be <code class="literal">/posts:</code>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g c posts/containers/posts</pre></div><div class="mediaobject"><img alt="Creating PostsComponent and ProfileComponent" src="graphics/1.35.jpg"/></div></li><li class="listitem">Open the <code class="literal">src/app/posts/posts-routing.module.ts</code> file.</li><li class="listitem">Import the <code class="literal">PostsComponent</code>:<div class="informalexample"><pre class="programlisting">import { PostsComponent } from './containers/posts/posts.component'</pre></div></li><li class="listitem">Add the <a class="indexterm" id="id59"/>following route to the <code class="literal">routes</code> array:<div class="informalexample"><pre class="programlisting">{ path: '', component: PostsComponent },</pre></div></li></ol></div><p>Now when we refresh the page in our app, we should see the text <span class="strong"><strong>posts works!</strong></span> between our header and footer:</p><div class="mediaobject"><img alt="Creating PostsComponent and ProfileComponent" src="graphics/1.37.jpg"/></div><p>Very similar to<a class="indexterm" id="id60"/> how we created the PostsComponent, we will now create the <code class="literal">ProfileComponent</code>. This is the component that will be responsible for displaying the profile that made the post.</p><p>The application route to this component will be <code class="literal">/posts/&lt;id&gt;</code>, where <code class="literal">&lt;id&gt;</code> is the identifier of the profile we want to display:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g c posts/containers/profile</pre></div><div class="mediaobject"><img alt="Creating PostsComponent and ProfileComponent" src="graphics/1.38.jpg"/></div></li><li class="listitem">Open the <code class="literal">src/app/posts/posts-routing.module.ts</code> file.</li><li class="listitem">Import <a class="indexterm" id="id61"/>the <code class="literal">ProfileComponent</code>:<div class="informalexample"><pre class="programlisting">import { ProfileComponent } from './containers/profile/profile.component'</pre></div></li><li class="listitem">Add the following route to the <code class="literal">routes</code> array:<div class="informalexample"><pre class="programlisting">{ path: ':profileId', component: ProfileComponent },</pre></div></li></ol></div><p>When our <a class="indexterm" id="id62"/>application refreshes and we navigate our browser to <code class="literal">http://localhost:4200/posts/1</code>, we should see the text <span class="strong"><strong>profile works!</strong></span>:</p><div class="mediaobject"><img alt="Creating PostsComponent and ProfileComponent" src="graphics/1.40.jpg"/></div></div><div class="section" title="Adding Dummy Post and Profile Data"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec28"/>Adding Dummy Post and Profile Data</h2></div></div></div><p>In order to <a class="indexterm" id="id63"/>get a feel of how our application works, we will add some dummy data to our components so we have something to work with. We will add a service to retrieve the data from our API:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/containers/posts/posts.component.ts</code> file.</li><li class="listitem">Create a new property called <code class="literal">posts</code> and define it with the following structure:<div class="informalexample"><pre class="programlisting">public posts = []</pre></div></li><li class="listitem">Add the following import to the top of the file:<div class="informalexample"><pre class="programlisting">import { ActivatedRoute } from '@angular/router';</pre></div></li><li class="listitem">The <code class="literal">items</code> array inside our <code class="literal">posts</code> object is what will eventually hold our posts. We will use a simple loop to add a few dummy items.</li><li class="listitem">Locate<a class="indexterm" id="id64"/> the <code class="literal">ngOnInit()</code> method and add the following code to the method body. This code creates 10 dummy elements in our <code class="literal">posts</code> array so we can display some data. The details are not relevant as this block will be obsolete in the next lesson when we retrieve data from our API:<div class="informalexample"><pre class="programlisting">for(let i = 1; i &lt; 10; i++) {
   this.posts.push({ id: i, text: 'This is post with id: ' + i })
 }</pre></div></li><li class="listitem">For the last step, we need to update our template. Remove all the content from the <code class="literal">template</code> property and replace it with the following markup:<div class="informalexample"><pre class="programlisting">&lt;div *ngFor="let post of posts"&gt;
   &lt;a [routerLink]="post.id"&gt;
     {{post.text}}
   &lt;/a&gt;
 &lt;/div&gt;</pre></div></li></ol></div><p>The code in <a class="indexterm" id="id65"/>our template uses the <code class="literal">ngFor</code> directive to loop over the content of the <code class="literal">posts</code> array. For each of those items, it prints an <code class="literal">a</code> tag that links to the post by <code class="literal">id</code> using the <code class="literal">routerLink</code> directive. The link text is set to <code class="literal">post.text</code>.</p><p>This is what we get in the browser:</p><div class="mediaobject"><img alt="Adding Dummy Post and Profile Data" src="graphics/1.42.jpg"/></div><p>Lastly, we <a class="indexterm" id="id66"/>will add some dummy data to our <code class="literal">ProfileComponent:</code>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/containers/profile/profile.component.ts</code> file.</li><li class="listitem">Create a new property called <code class="literal">profile</code> and define it with the following structure:<div class="informalexample"><pre class="programlisting">public profile = { id: null };</pre></div></li><li class="listitem">Add the following <code class="literal">import</code> to the top of the file:<div class="informalexample"><pre class="programlisting">import { ActivatedRoute } from '@angular/router';</pre></div></li><li class="listitem">Locate the <code class="literal">constructor()</code> method and add the following code to the method parameters:<div class="informalexample"><pre class="programlisting">constructor(private route:ActivatedRoute){}</pre></div></li><li class="listitem">Locate the <code class="literal">ngOnInit()</code> method and add the following code to the method body. This code <span class="emphasis"><em>subscribes</em></span> to the parameters of the current route and when it changes, it reads the value of the <code class="literal">profileId</code> property in the URL and assigns it to the <code class="literal">id</code> property of <code class="literal">this.profile</code>:<div class="informalexample"><pre class="programlisting">this.route.params.subscribe(res =&gt; this.profile.id = 'profileId = ' + res['profileId'])</pre></div></li><li class="listitem">For the<a class="indexterm" id="id67"/> last step, we need to update our template. Remove all the content from the <code class="literal">template</code> property and replace it with the following markup:<div class="informalexample"><pre class="programlisting">&lt;p&gt;
  {{profile.id}}
&lt;/p&gt;</pre></div></li></ol></div><p>When<a class="indexterm" id="id68"/> we go to <code class="literal">http://localhost:4200/posts/5</code>, we will see the following:</p><div class="mediaobject"><img alt="Adding Dummy Post and Profile Data" src="graphics/1.44.jpg"/></div><p>The code in the <code class="literal">ngOnInit</code> block <span class="emphasis"><em>subscribes</em></span> to the parameters of the <span class="emphasis"><em>activated route</em></span>. When we retrieve that on that subscription, we use it to append the ID to the string in the <code class="literal">post.text</code> property, making the content dynamic.</p><p>We can now<a class="indexterm" id="id69"/> click through from the <code class="literal">PostsContainer</code> to the <code class="literal">ProfileContainer</code> component. We can use the Back button or the link in the header to go back.</p><p>Our container components are set up and the routes work. Let's add some real data from the API!</p></div></div>
<div class="section" title="Creating a Service to Retrieve Data"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec16"/>Creating a Service to Retrieve Data</h1></div></div></div><p>In this <a class="indexterm" id="id70"/>section, we will use <code class="literal">ng generate</code> to create the <code class="literal">PostsService</code>, use <code class="literal">environment</code> to store the API URL, and use the <code class="literal">PostsService</code> in our components. We will then define our API calls in the <code class="literal">PostsService</code> and leverage the <code class="literal">HttpClientModule</code> to enable HTTP access.</p><div class="section" title="Generating the Service"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec29"/>Generating the Service</h2></div></div></div><p>We will use the <code class="literal">ng generate service</code> command to generate a service that will handle the interaction with our API:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g s posts/services/posts --module posts/posts</pre></div><div class="mediaobject"><img alt="Generating the Service" src="graphics/1.45.jpg"/></div></li></ol></div></div><div class="section" title="Storing Our API URL"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec30"/>Storing Our API URL</h2></div></div></div><p>We will use the <code class="literal">environment</code> of Angular CLI to store our API URL. Using the <code class="literal">environment</code>, we can define a different URL for development and production environments.</p><p>By default, the application generated with Angular CLI comes with two predefined environments. These environments are defined in <code class="literal">.angular-cli.json</code> in the project root.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/environments/environment.ts</code> file.</li><li class="listitem">Inside the <code class="literal">environment</code> variable, add an <code class="literal">apiUrl</code> key and assign as the value the string <code class="literal">http://localhost:3000/api</code>, which is the URL to the development API:<div class="mediaobject"><img alt="Storing Our API URL" src="graphics/1.46.jpg"/></div></li><li class="listitem">Open <a class="indexterm" id="id71"/>the <code class="literal">src/environments/environment.prod.ts</code> file.</li><li class="listitem">Inside the <code class="literal">environment</code> variable, add an <code class="literal">apiUrl</code> key and assign as the value the string <code class="literal">https://packt-angular-social.now.sh/api</code>, which is the URL to the production API:<div class="mediaobject"><img alt="Storing Our API URL" src="graphics/1.47.jpg"/></div></li></ol></div></div><div class="section" title="Referencing Our New PostsService in Our Container Components"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec31"/>Referencing Our New PostsService in Our Container Components</h2></div></div></div><p>In this<a class="indexterm" id="id72"/> service, we will reference our new <code class="literal">PostsService</code> in our container components and that way define what our service should look like.</p><p>We will use the <code class="literal">OnInit</code> component life cycle hook provided by Angular to call into our inject service and invoke the <code class="literal">getPosts</code> method on that service.</p><p>We will <span class="emphasis"><em>map</em></span> over the result to only get the items and then we will subscribe and set the result of the method to our <code class="literal">posts</code> property.</p><p>Note that we do the same thing for both the <code class="literal">PostsComponent</code> and the <code class="literal">ProfileComponent</code>:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/containers/posts/posts.component.ts</code> file.</li><li class="listitem">Add an <code class="literal">import</code> statement for our new <code class="literal">PostsService</code>:<div class="informalexample"><pre class="programlisting">import { PostsService } from '../../services/posts.service';</pre></div></li><li class="listitem">Update<a class="indexterm" id="id73"/> the constructor to <span class="emphasis"><em>inject</em></span> the <code class="literal">PostsService</code> and make it available under the <code class="literal">private postsService</code> variable:<div class="informalexample"><pre class="programlisting">constructor(private postsService: PostsService) { }</pre></div></li><li class="listitem">Remove the contents of the <code class="literal">ngOnInit</code> method and update it as follows:<div class="informalexample"><pre class="programlisting">  ngOnInit() {
     this.postsService.getPosts()
       .map(res =&gt; res['items'])
       .subscribe((result: any) =&gt; this.posts = result)
   }</pre></div></li><li class="listitem">Open the <code class="literal">src/app/posts/containers/posts/profile.component.ts</code> file.</li><li class="listitem">Add an <code class="literal">import</code> statement for our new <code class="literal">PostsService</code>:<div class="informalexample"><pre class="programlisting">import { PostsService } from '../services/posts.service';</pre></div></li><li class="listitem">Update <a class="indexterm" id="id74"/>the constructor to <span class="emphasis"><em>inject</em></span> the <code class="literal">PostsService</code>, and make sure to leave our <code class="literal">private route</code> dependency in place:<div class="informalexample"><pre class="programlisting">constructor(private route: ActivatedRoute, private postsService: PostsService) { }</pre></div></li><li class="listitem">Remove the contents of the <code class="literal">ngOnInit</code> method and update it as follows:<div class="informalexample"><pre class="programlisting">this.postsService.getProfile(this.route.snapshot.params['profileId'])
  .subscribe((result: any) =&gt; this.profile = result)</pre></div></li></ol></div></div><div class="section" title="Defining the Public Methods"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec32"/>Defining the Public Methods</h2></div></div></div><p>The <a class="indexterm" id="id75"/>next step is to define our public methods in our <code class="literal">PostsService</code> and make sure that these retrieve the data we need from our API.</p><p>We will add<a class="indexterm" id="id76"/> two methods in our <code class="literal">PostsService</code>. The first method is the <code class="literal">getPosts</code> method, which does not take any arguments and returns all the posts from the API. The second method is the <code class="literal">getProfile</code> method, which takes the <code class="literal">profileId</code> as an argument. It returns the profile related to the <code class="literal">profileId</code> that is passed in as the argument, and includes all the related <a class="indexterm" id="id77"/>posts that are made by that profile:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/services/posts.service.ts</code> file.</li><li class="listitem">Add an <code class="literal">import</code> statement to import the <code class="literal">HttpClient</code> from <code class="literal">@angular/common/http</code> and a reference to the <code class="literal">environment</code> where we have our API URL defined:<div class="informalexample"><pre class="programlisting">import { HttpClient } from '@angular/common/http';
import { environment } from '../../../environments/environment'</pre></div></li><li class="listitem">Update the constructor to inject the <code class="literal">HttpClient</code> and make it available under the <code class="literal">private http</code> variable:<div class="informalexample"><pre class="programlisting">constructor(private http: HttpClient) { }</pre></div></li><li class="listitem">Create a new method called <code class="literal">getPosts() {}</code> and add the following content:<div class="informalexample"><pre class="programlisting">getPosts() {
   const url = `${environment.apiUrl}/posts/timeline?filter[where][type]=text`
   return this.http.get(url)
}</pre></div></li><li class="listitem">Create a new method called <code class="literal">getProfile(profileId) { }</code> and add the following content:<div class="informalexample"><pre class="programlisting">getProfile(profileId) {
   const url = `${environment.apiUrl}/profiles/${profileId}?filter[include]=posts`
   return this.http.get(url)
 }</pre></div></li></ol></div></div><div class="section" title="Importing HttpClientModule in Our AppModule"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec33"/>Importing HttpClientModule in Our AppModule</h2></div></div></div><p>We are<a class="indexterm" id="id78"/> almost done creating our <code class="literal">PostsService</code>, but there is still one thing we need to fix. When we refresh our application in our browser, we see that we have an error message in our <span class="strong"><strong>Console</strong></span> tab:</p><div class="mediaobject"><img alt="Importing HttpClientModule in Our AppModule" src="graphics/1.50.jpg"/></div><p>The<a class="indexterm" id="id79"/> reason we get this error is because we have used the <code class="literal">HttpClient</code> in our service, but Angular does not know where this module comes from. In order to fix this, we need to import <code class="literal">HttpClientModule</code> in our <code class="literal">AppModule:</code>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/app.module.ts</code> file.</li><li class="listitem">Add an <code class="literal">import</code> statement to import the <code class="literal">HttpClientModule</code> from <code class="literal">@angular/common/http</code>:<div class="informalexample"><pre class="programlisting">import { HttpClientModule } from '@angular/common/http';</pre></div></li><li class="listitem">Update the <code class="literal">imports</code> array in the <code class="literal">NgModule</code> decorator to import <code class="literal">HttpClientModule</code>:<div class="informalexample"><pre class="programlisting">@NgModule({
   ...
   imports: [
     ...
     HttpClientModule,
     ...
   ],
   ...
 })</pre></div><div class="mediaobject"><img alt="Importing HttpClientModule in Our AppModule" src="graphics/1.51.jpg"/></div></li></ol></div><p>When we <a class="indexterm" id="id80"/>now check the <span class="strong"><strong>Console</strong></span> tab, we see that there is another error message, <span class="strong"><strong>.map is not a function</strong></span>:</p><div class="mediaobject"><img alt="Importing HttpClientModule in Our AppModule" src="graphics/1.52.jpg"/></div><p>To fix this, we need to import the <code class="literal">map</code> operator from the <code class="literal">rxjs</code> library.</p><p>The <code class="literal">rxjs</code> library is <a class="indexterm" id="id81"/>one of the main <a class="indexterm" id="id82"/>dependencies of Angular and is used to implement the <span class="emphasis"><em>Observable</em></span> pattern in Angular. It is used by Angular itself in the router and the HTTP client.</p><p>The <code class="literal">map</code> operator is <a class="indexterm" id="id83"/>one of the operators shipped by <code class="literal">rxjs</code> and it can be used to map over the data before you subscribe to it. This is useful if you want to manipulate the data you work with:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/app.module.ts</code> file.</li><li class="listitem">Add an <code class="literal">import</code> statement to import the <code class="literal">map</code> operator from the <code class="literal">rxjs</code> library:<div class="informalexample"><pre class="programlisting">import 'rxjs/add/operator/map';</pre></div></li></ol></div><p>When we <a class="indexterm" id="id84"/>now refresh our application, we should see a list of posts retrieved from the API!</p><p>Let's continue to add some presentational components to give our posts some style!</p></div></div>
<div class="section" title="Creating the Presentational Components"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec17"/>Creating the Presentational Components</h1></div></div></div><p>In this <a class="indexterm" id="id85"/>section, we will use <code class="literal">ng generate component</code> to create the <code class="literal">PostListComponent</code> and <code class="literal">PostItemComponent</code> inside the <code class="literal">PostsModule</code>. We will then add a UI to these components and use these components in our container components.</p><p>The <code class="literal">PostListComponent</code> is responsible for taking in an array of posts using its <span class="emphasis"><em>Input</em></span>, and it loops over each of these posts and invokes the <code class="literal">PostItemComponent</code>.</p><p>The <code class="literal">PostItemComponent</code> accepts a single post as its <span class="emphasis"><em>Input</em></span> and displays that post.</p><div class="section" title="Creating the PostListComponent"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec34"/>Creating the PostListComponent</h2></div></div></div><p>We will be using the <code class="literal">ng generate</code> command to create our <code class="literal">PostListComponent</code>. This is the component that will loop over our posts and will be called from our <code class="literal">PostsComponent:</code>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/container/posts/posts.component.ts</code> file.</li><li class="listitem">Update the template to the following:<div class="informalexample"><pre class="programlisting">&lt;app-post-list [posts]="posts"&gt;&lt;/app-post-list&gt;</pre></div></li><li class="listitem">Open your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g c posts/components/post-list</pre></div><div class="mediaobject"><img alt="Creating the PostListComponent" src="graphics/1.54.jpg"/></div></li><li class="listitem">Open the <code class="literal">src/app/posts/components/post-list/post-list.component.ts</code> file.</li><li class="listitem">Import the <code class="literal">Input</code> from <code class="literal">@angular/core</code> by adding it to the existing <code class="literal">import</code> statement.</li><li class="listitem">Add the<a class="indexterm" id="id86"/> following property in the component class:<div class="informalexample"><pre class="programlisting">@Input() posts: any[]</pre></div></li><li class="listitem">Update the template to the following:<div class="informalexample"><pre class="programlisting">&lt;div *ngFor="let post of posts" class="mb-3"&gt;
   &lt;app-post-item [post]="post"&gt;&lt;/app-post-item&gt;
 &lt;/div&gt;</pre></div></li></ol></div></div><div class="section" title="Creating the PostItemComponent"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec35"/>Creating the PostItemComponent</h2></div></div></div><p>We will be using the <code class="literal">ng generate</code> command to create our <code class="literal">PostItemComponent:</code>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open <a class="indexterm" id="id87"/>your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g c posts/components/post-item</pre></div><div class="mediaobject"><img alt="Creating the PostItemComponent" src="graphics/1.56.jpg"/></div></li><li class="listitem">Open the <code class="literal">src/app/posts/components/post-item/post-item.component.ts</code> file.</li><li class="listitem">Import the <code class="literal">Input</code> from <code class="literal">@angular/core</code> by adding it to the existing <code class="literal">import</code> statement.</li><li class="listitem">Add<a class="indexterm" id="id88"/> the following property in the component class:<div class="informalexample"><pre class="programlisting">@Input() post: any;</pre></div></li><li class="listitem">Update the template to the following:<div class="informalexample"><pre class="programlisting">&lt;!-- The row and the col make sure the content is always centered --&gt;
 &lt;div class="row"&gt;
   &lt;div class="col-md-8 offset-md-2"&gt;
     &lt;!-- The card is where the message is shown --&gt;
     &lt;div class="card"&gt;
       &lt;div class="card-body"&gt;
         &lt;!-- We use the Bootstrap 'media' component to show an avatar with content --&gt;
         &lt;div class="media"&gt;
           &lt;img class="avatar mr-3 rounded" [attr.src]="post?.profile?.avatar"&gt;
           &lt;div class="media-body"&gt;
             &lt;!-- The full name of the author is used to navigate to the post detail --&gt;
             &lt;h5&gt;
               &lt;a [routerLink]="post?.profile?.id"&gt; {{post?.profile?.fullName}} &lt;/a&gt;
               &lt;span class="date float-right text-muted"&gt;

               &lt;/span&gt;
             &lt;/h5&gt;
             &lt;!-- The text of the post is shown in a simple paragraph tag--&gt;
             &lt;p&gt;{{post?.text}}&lt;/p&gt;
           &lt;/div&gt;
         &lt;/div&gt; &lt;!-- End media --&gt;
       &lt;/div&gt;
     &lt;/div&gt; &lt;!-- End card --&gt;
   &lt;/div&gt;
 &lt;/div&gt; &lt;!-- End row--&gt;</pre></div></li><li class="listitem">Update the <code class="literal">styles</code> property<a class="indexterm" id="id89"/> from our component to the following:<div class="informalexample"><pre class="programlisting">styles: [`
   img.avatar {
     height: 60px;
     width: 60px;
   }
   span.date {
     font-size: small;
   }
 `],</pre></div></li></ol></div><p>If we refresh our <a class="indexterm" id="id90"/>browser now, this is how our page will look:</p><div class="mediaobject"><img alt="Creating the PostItemComponent" src="graphics/1.58.jpg"/></div></div><div class="section" title="Creating the ProfileItemComponent"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec36"/>Creating the ProfileItemComponent</h2></div></div></div><p>We will be using the <code class="literal">ng generate</code> command to create our <code class="literal">ProfileItemComponent:</code>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/container/posts/profile.component.ts</code> file.</li><li class="listitem">Update the template to the following:<div class="informalexample"><pre class="programlisting">&lt;app-profile-item [profile]="profile"&gt;&lt;/app-profile-item&gt;</pre></div></li><li class="listitem">Open your terminal and navigate to the project directory.</li><li class="listitem">Run the following command from inside the project directory:<div class="informalexample"><pre class="programlisting">ng g c posts/components/profile-item
  create src/app/posts/components/profile-item/profile-item.
component.spec.ts (664 bytes)
  create src/app/posts/components/profile-item/profile-item.component.ts (273 bytes)
  update src/app/posts/posts.module.ts (846 bytes)</pre></div></li><li class="listitem">Open<a class="indexterm" id="id91"/> the <code class="literal">src/app/posts/components/profile-item/profile-item.component.ts</code> file.</li><li class="listitem">Import the <code class="literal">Input</code> from <code class="literal">@angular/core</code> by adding it to the existing <code class="literal">import</code> statement.</li><li class="listitem">Add the following property in the component class:<div class="informalexample"><pre class="programlisting">@Input() profile: any;</pre></div></li><li class="listitem">Update the template to the following:<div class="informalexample"><pre class="programlisting">&lt;div class="row"&gt;
 &lt;div class="col-md-8 offset-md-2"&gt;
   &lt;div class="card mb-3" *ngFor="let post of profile.posts"&gt;
     &lt;div class="card-body"&gt;
       &lt;div class="media"&gt;
         &lt;img class="avatar mr-3 rounded" [attr.src]="profile?.avatar"&gt;
         &lt;div class="media-body"&gt;
           &lt;h5&gt;
             &lt;a [routerLink]="profile?.id"&gt; {{profile?.fullName}} &lt;/a&gt;
             &lt;span class="date float-right text-muted"&gt;

             &lt;/span&gt;
           &lt;/h5&gt;
           &lt;p&gt;{{post?.text}}&lt;/p&gt;
         &lt;/div&gt;
       &lt;/div&gt;
     &lt;/div&gt;
   &lt;/div&gt;
 &lt;/div&gt;</pre></div></li><li class="listitem">Update the <code class="literal">styles</code> property from our component to the following:<div class="informalexample"><pre class="programlisting">styles: [`
  img.avatar {
   height: 60px;
    width: 60px;
  }
  span.date {
    font-size: small;
  }
`],</pre></div></li></ol></div><p>When we now refresh the application in our browser, we see that the content is <a class="indexterm" id="id92"/>styled and that the navigation still works as expected:</p><div class="mediaobject"><img alt="Creating the ProfileItemComponent" src="graphics/1.60.jpg"/></div><p>We have successfully separated the concerns of retrieving the data and displaying it.</p><p>It's generally a good idea to keep components as small and simple as possible; in particular, our <code class="literal">PostItemComponent</code> could probably be split up into multiple components.</p><p>For our purpose, this works perfectly and we can continue with our last step in this lesson, which is to properly handle retrieving our data using the Angular router.</p></div></div>
<div class="section" title="Creating Resolvers to Retrieve Data Using the Router"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec18"/>Creating Resolvers to Retrieve Data Using the Router</h1></div></div></div><p>In this section, we <a class="indexterm" id="id93"/>will manually create two Injectable classes that act as resolvers and then configure our router to use these resolvers. We <a class="indexterm" id="id94"/>will then update our container components to use this resolved data.</p><p>A resolver is a class that we can use to fetch the data that we use in our component <span class="emphasis"><em>before</em></span> the component is displayed. We call the resolvers in the routes where we need the data. In our implementation, the resolvers retrieve the data from the API and return it so it can be displayed in the components.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>More information about <a class="indexterm" id="id95"/>resolvers can be found at: <a class="ulink" href="https://angular.io/guide/router#resolve-pre-fetching-component-data">https://angular.io/guide/router#resolve-pre-fetching-component-data</a>.</p></div></div><p>Our application is quite neatly structured already, but there is one thing that we can optimize.</p><p>In order to see what our problem is, open Chrome Developer Tools and then the <span class="strong"><strong>Performance</strong></span> tab:</p><div class="mediaobject"><img alt="Creating Resolvers to Retrieve Data Using the Router" src="graphics/1.61.jpg"/></div><p>Hit <a class="indexterm" id="id96"/>the cog icon and set <span class="strong"><strong>Network</strong></span> to <span class="strong"><strong>Slow 3G</strong></span>:</p><div class="mediaobject"><img alt="Creating Resolvers to Retrieve Data Using the Router" src="graphics/1.62.jpg"/></div><p>If we now click around in our application, we will see that that our page navigation still works, but we are presented with empty pages.</p><p>The <a class="indexterm" id="id97"/>reason for this is that while our components are loaded correctly, they still need to retrieve the data after they are loaded. This is because our components call into the <code class="literal">PostsService</code> from our <code class="literal">ngOnInit</code> method.</p><p>It would be better if our router could make sure that the component has all the needed data loaded before entering the page.</p><p>Fortunately, the Angular router provides a way to handle this using resolvers. They will resolve the data before entering the route, and in our component, we can just take this resolved data and display it.</p><p>The resolvers that we create need the <code class="literal">@Injectable()</code> decorator to make sure they are part of the dependency injection in Angular.</p><div class="section" title="Creating Resolvers"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec37"/>Creating Resolvers</h2></div></div></div><p>Now we will create a resolver that resolves our post:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a terminal and run the following command:<div class="informalexample"><pre class="programlisting">ng g class posts/resolvers/posts-resolver</pre></div><div class="mediaobject"><img alt="Creating Resolvers" src="graphics/1.63.jpg"/></div></li><li class="listitem">Open the <code class="literal">src/app/posts/resolvers/posts-resolver.ts</code> file.</li><li class="listitem">Start the file by defining the needed imports:<div class="informalexample"><pre class="programlisting">import { Injectable } from '@angular/core'
import { Resolve } from '@angular/router'
import { PostsService } from '../services/posts.service'</pre></div></li><li class="listitem">Decorate <a class="indexterm" id="id98"/>the <code class="literal">PostsResolver</code> class with the <code class="literal">@Injectable</code> operator:<div class="informalexample"><pre class="programlisting">@Injectable()
export class PostsResolver {}</pre></div></li><li class="listitem">Make the class implement <code class="literal">Resolve&lt;any&gt;</code>:<div class="informalexample"><pre class="programlisting">@Injectable()
export class PostsResolver implements Resolve&lt;any&gt; {
}</pre></div></li><li class="listitem">Inside the class, create a constructor and inject our <code class="literal">PostsService</code>:<div class="informalexample"><pre class="programlisting">constructor(private postsService: PostsService) {}</pre></div></li><li class="listitem">Below the<a class="indexterm" id="id99"/> constructor, create a class method called <code class="literal">resolve</code> and make it return the <code class="literal">getPosts()</code> method from our <code class="literal">PostsService</code>:<div class="informalexample"><pre class="programlisting">resolve() {
  return this.postsService.getPosts()
}</pre></div></li></ol></div><p>This is the resolver that will be used to retrieve all our posts, just like how we do this currently in our <code class="literal">PostsComponent</code>.</p><p>Now we <a class="indexterm" id="id100"/>will create a resolver that resolves our profile:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open a terminal and run the following command:<div class="informalexample"><pre class="programlisting">ng g class posts/resolvers/profile-resolver</pre></div><div class="mediaobject"><img alt="Creating Resolvers" src="graphics/1.65.jpg"/></div></li><li class="listitem">Open the <code class="literal">src/app/posts/resolvers/profile-resolver.ts</code> file.</li><li class="listitem">Start the file by defining the needed imports:<div class="informalexample"><pre class="programlisting">import { Injectable } from '@angular/core'
import { ActivatedRouteSnapshot, Resolve } from '@angular/router'
import { PostsService } from '../services/posts.service'</pre></div></li><li class="listitem">Decorate the <code class="literal">ProfileResolver</code> class with the <code class="literal">@Injectable</code> operator:<div class="informalexample"><pre class="programlisting">@Injectable()
export class ProfileResolver {}</pre></div></li><li class="listitem">Make the class implement <code class="literal">Resolve&lt;any&gt;</code>:<div class="informalexample"><pre class="programlisting">@Injectable()
export class ProfileResolver implements Resolve&lt;any&gt; {
}</pre></div></li><li class="listitem">Inside<a class="indexterm" id="id101"/> the class, create a constructor and inject our <code class="literal">PostsService</code>:<div class="informalexample"><pre class="programlisting">constructor(private postsService: PostsService) {}</pre></div></li><li class="listitem">Below the constructor, create a class method called <code class="literal">resolve</code>, and pass the <code class="literal">route: ActivatedRouteSnapshot</code> class into it:<div class="informalexample"><pre class="programlisting">resolve(route: ActivatedRouteSnapshot) {
}</pre></div></li><li class="listitem">Inside the <code class="literal">resolve</code> method, we return the <code class="literal">getProfile()</code> method from our <code class="literal">PostsService</code> while getting the <code class="literal">params['profileid']</code> off our route:<div class="informalexample"><pre class="programlisting">resolve(route: ActivatedRouteSnapshot) {
  return this.postsService.getProfile(route.params['profileId'])
}</pre></div></li></ol></div><p>This is the resolver that will be <a class="indexterm" id="id102"/>used to retrieve the posts that we have navigated to in our route.</p></div><div class="section" title="Importing Our Resolvers"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec38"/>Importing Our Resolvers</h2></div></div></div><p>We will add our two new resolvers to the <code class="literal">PostsRoutingModule</code>. We do this by importing the resolvers and then adding a <code class="literal">resolve</code> property to both of our routes. The <code class="literal">resolve</code> property takes an object where the key is how the data will be available in the router after it is resolved, and the value is a reference to the imported resolver:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/posts-routing.module.ts</code> file.</li><li class="listitem">Import <a class="indexterm" id="id103"/>our two freshly created resolvers:<div class="informalexample"><pre class="programlisting">import { PostsResolver } from './resolvers/posts-resolver'
import { ProfileResolver } from './resolvers/profile-resolver'</pre></div></li><li class="listitem">Update both our routes to add a <code class="literal">resolve</code> property and call to the resolvers:<div class="informalexample"><pre class="programlisting">{ path: '', component: PostsComponent, resolve: { posts: PostsResolver } },
{ path: ':profileId', component: ProfileComponent, resolve: { profile: ProfileResolver } },</pre></div></li></ol></div><p>When we now refresh our page, we see that we get no output displayed and that we<a class="indexterm" id="id104"/> have an error in the browser console:</p><div class="mediaobject"><img alt="Importing Our Resolvers" src="graphics/1.68.jpg"/></div><p>In order to fix this error, we need to <span class="emphasis"><em>provide</em></span> the resolvers in our module, just like how we do it with <a class="indexterm" id="id105"/>other Injectables, such as services:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/posts.module.ts</code> file.</li><li class="listitem">Import the two resolvers:<div class="informalexample"><pre class="programlisting">import { PostsResolver } from './resolvers/posts-resolver'
import { ProfileResolver } from './resolvers/profile-resolver'</pre></div></li><li class="listitem">Add a reference to both resolvers to the <code class="literal">providers</code> array:<div class="informalexample"><pre class="programlisting">providers: [PostsService, PostsResolver, ProfileResolver]</pre></div></li></ol></div><p>When the <a class="indexterm" id="id106"/>application refreshes, we see that the error in the console is gone.</p><p>If we check in the <span class="strong"><strong>Network</strong></span> tab in Chrome Developer Tools, we see that we make two requests to the <a class="indexterm" id="id107"/>same endpoint. This is because we retrieve the data twice, in our resolver and in our component. Let's update our container components and let them use the data resolved by the router.</p></div><div class="section" title="Using the Data Resolved by the Router"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec39"/>Using the Data Resolved by the Router</h2></div></div></div><p>We will update our <code class="literal">PostsComponent</code> to read the data that has been resolved by our router. We subscribe to the data of the active route and we map over that data twice. In the first map command, the <code class="literal">posts</code> value relates to the <a class="indexterm" id="id108"/>object key we used in our resolver object for this route:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/container/posts/posts.component.ts</code> file.</li><li class="listitem">Import <code class="literal">ActivatedRoute</code> from <code class="literal">@angular/router</code>:<div class="informalexample"><pre class="programlisting">import { ActivatedRoute } from '@angular/router'</pre></div></li><li class="listitem">Remove the <code class="literal">PostsService</code> import as we are no longer going to use it here.</li><li class="listitem">Update the constructor to inject <code class="literal">private route: ActivatedRoute</code>:<div class="informalexample"><pre class="programlisting">constructor(private route: ActivatedRoute) { }</pre></div></li><li class="listitem">Update the <code class="literal">ngOnInit()</code> method and replace the content as follows:<div class="informalexample"><pre class="programlisting">ngOnInit() {
  this.route.data
    .map(data =&gt; data['posts'])
    .map(data =&gt; data['items'])
    .subscribe((result: any) =&gt; this.posts = result)
}</pre></div></li><li class="listitem">Because we will always have data available when arriving on the route, we can remove the assignment from our <code class="literal">posts</code> property, so it looks like this:<div class="informalexample"><pre class="programlisting">public posts: any</pre></div></li></ol></div><p>Refresh the page and make sure the data is still loaded.</p><p>Now, we will <a class="indexterm" id="id109"/>update our <code class="literal">ProfileComponent</code> to read the data that has been resolved by our router. We subscribe to the data of the active route and we map over that data. In our map command, the value <code class="literal">profile</code> relates to the object key we used in our resolver object for this route:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">src/app/posts/container/profile/profile.component.ts</code> file.</li><li class="listitem">Remove the <code class="literal">PostsService</code> import as we are no longer going to use it here.</li><li class="listitem">Update the constructor to only inject <code class="literal">private route: ActivatedRoute</code>:<div class="informalexample"><pre class="programlisting">constructor(private route: ActivatedRoute) { }</pre></div></li><li class="listitem">Update the <code class="literal">ngOnInit()</code> method and replace the content as follows:<div class="informalexample"><pre class="programlisting">this.route.data
  .map(data =&gt; data['profile'])
  .subscribe((result: any) =&gt; this.profile = result)</pre></div></li><li class="listitem">Remove the assignment <a class="indexterm" id="id110"/>from the <code class="literal">public profile</code> property so it looks like this:<div class="informalexample"><pre class="programlisting">public profile: any;</pre></div></li></ol></div><p>And we are done! Our basic application is built and even though there are enough things to add <a class="indexterm" id="id111"/>and optimize, it's well-structured and works using Angular's best practices.</p><p>In this section, we created our container components and added dummy data. We also created presentational components and implemented resolvers for our app. In the next lesson, we will add support for server-side rendering by adding Angular Universal.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec19"/>Summary</h1></div></div></div><p>In this lesson, we learned the different types of components and how to create them. We then learned how to create resolvers to retrieve data using the router.</p><p>In the next lesson, we will look at implementing server-side rendering in our app.</p></div></body></html>