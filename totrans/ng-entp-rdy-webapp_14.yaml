- en: '14'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '14'
- en: Google Analytics and Advanced Cloud Ops
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Analytics和高级云操作
- en: You have designed, developed, and deployed a world-class web application; however,
    that is only the beginning of the story of your app. The web is an ever-evolving,
    living, breathing environment that demands attention in order to continue to succeed
    as a business. In *Chapter 13*, *Highly Available Cloud Infrastructure on AWS*,
    we went over the basic concepts and costs of ownership of a cloud infrastructure.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经设计、开发和部署了一个世界级的网络应用程序；然而，这只是你应用程序故事的开端。网络是一个不断演变、充满活力、生机勃勃的环境，需要关注才能继续作为企业取得成功。在*第13章*，*AWS上的高可用云基础设施*中，我们讨论了云基础设施的基本概念和拥有成本。
- en: In this chapter, we will dig deeper in to truly understanding how users actually
    use our application with Google Analytics. We will then use that information to
    create realistic load tests to simulate actual user behavior to understand the
    true capacity of a single instance of our server. Knowing the capacity of a single
    server, we can fine-tune how our infrastructure scales out to reduce waste and
    discuss the implications of various scaling strategies.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将深入了解如何真正理解用户实际使用我们的应用程序，我们将使用Google Analytics来获取这些信息。然后，我们将利用这些信息创建逼真的负载测试来模拟实际用户行为，以了解我们服务器单个实例的真实容量。了解单个服务器的容量后，我们可以微调我们的基础设施扩展方式，以减少浪费并讨论各种扩展策略的影响。
- en: Finally, we will go over advanced analytics concepts, such as custom events,
    to gain a more granular understanding and tracking of user behavior.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将讨论高级分析概念，例如自定义事件，以获得对用户行为的更精细理解和跟踪。
- en: 'In this chapter, you will learn about the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学习以下主题：
- en: Collecting analytics
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集分析
- en: Budgeting and scaling
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预算和扩展
- en: Advanced load testing to predict capacity
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高级负载测试以预测容量
- en: Reliable cloud scaling
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可靠的云扩展
- en: Measuring actual use with custom analytics events
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用自定义分析事件测量实际使用情况
- en: Throughout the chapter, you will be setting up Google Analytics, Google Tag
    Manager, and OctoPerf accounts.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将设置Google Analytics、Google Tag Manager和OctoPerf账户。
- en: The most up-to-date versions of the sample code for this book can be found on
    GitHub at the following repository link. The repository contains the final and
    completed state of the code. You can verify your progress at the end of this chapter
    by looking for the end-of-chapter snapshot of code under the `projects` folder.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本书样本代码的最新版本可以在GitHub上的以下存储库链接中找到。该存储库包含代码的最终和完成状态。你可以在本章结束时通过查找`projects`文件夹下的代码末尾快照来验证你的进度。
- en: 'In the case of *Chapter 14*:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第14章*的情况下：
- en: 'Clone the repo: [https://github.com/duluca/lemon-mart](https://github.com/duluca/lemon-mart).'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 克隆仓库：[https://github.com/duluca/lemon-mart](https://github.com/duluca/lemon-mart)。
- en: Execute `npm install` on the root folder to install dependencies.
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在根目录下执行`npm install`以安装依赖项。
- en: 'The code sample for this chapter can be found under the following subfolder:'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本章的代码示例可以在以下子文件夹中找到：
- en: '[PRE0]'
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To run the Angular app for this chapter, execute the following command:'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要运行本章的Angular应用程序，请执行以下命令：
- en: '[PRE1]'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'To run Angular unit tests for this chapter, execute the following command:'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要运行本章的Angular单元测试，请执行以下命令：
- en: '[PRE2]'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'To run Angular e2e tests for this chapter, execute the following command:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要运行本章的Angular e2e测试，请执行以下命令：
- en: '[PRE3]'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'To build a production-ready Angular app for this chapter, execute the following
    command:'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要构建本章的生产就绪Angular应用程序，请执行以下命令：
- en: '[PRE4]'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note that the `dist/ch14` folder at the root of the repository will contain
    the compiled result.
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，存储库根目录下的`dist/ch14`文件夹将包含编译结果。
- en: Beware that the source code in the book or on GitHub may not always match the
    code generated by the Angular CLI. There may also be slight differences in implementation
    between the code in the book and what's on GitHub because the ecosystem is ever-evolving.
    It is natural for the sample code to change over time. Also, on GitHub, expect
    to find corrections, fixes to support newer versions of libraries, or side-by-side
    implementations of multiple techniques for the reader to observe. The reader is
    only expected to implement the ideal solution recommended in the book. If you
    find errors or have questions, please create an issue or submit a pull request
    on GitHub for the benefit of all readers.
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，书中或GitHub上的源代码可能并不总是与Angular CLI生成的代码相匹配。由于生态系统不断演变，书中代码与GitHub上代码之间的实现可能也存在细微差异。随着时间的推移，示例代码发生变化是自然的。在GitHub上，您可能会找到更正、修复以支持库的新版本，或者为读者提供观察的多种技术的并排实现。读者只需实现书中推荐的理想解决方案即可。如果您发现错误或有问题，请创建一个GitHub上的问题或提交一个pull
    request，以惠及所有读者。
- en: You can read more about updating Angular in *Appendix C*, *Keeping Angular and
    Tools Evergreen*. You can find this appendix online from [https://static.packt-cdn.com/downloads/9781838648800_Appendix_C_Keeping_Angular_and_Tools_Evergreen.pdf](https://static.packt-cdn.com/downloads/9781838648800_Appendix_C_Keeping_Angular_and_Tools_Evergreen.)
    or at [https://expertlysimple.io/stay-evergreen](https://expertlysimple.io/stay-evergreen).
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以在 *附录C* 中了解更多关于更新Angular的信息，*保持Angular和工具常青*。您可以从 [https://static.packt-cdn.com/downloads/9781838648800_Appendix_C_Keeping_Angular_and_Tools_Evergreen.pdf](https://static.packt-cdn.com/downloads/9781838648800_Appendix_C_Keeping_Angular_and_Tools_Evergreen.)
    或 [https://expertlysimple.io/stay-evergreen](https://expertlysimple.io/stay-evergreen)
    在线找到此附录。
- en: Let's begin by covering the basics of web analytics.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从了解网络分析的基本知识开始。
- en: Collecting analytics
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 收集分析数据
- en: Now that our site is up and running, we need to start collecting metrics to
    understand how it is being used. Metrics are key to operating a web application.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们网站已经上线并运行，我们需要开始收集指标以了解其使用情况。指标对于运营网络应用程序至关重要。
- en: 'Google Analytics has many facets. The main three are as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: Google Analytics有许多方面。以下是主要三个方面：
- en: Acquisition, which measures how visitors arrive at your website
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取，衡量访客如何到达您的网站
- en: Behavior, which measures how visitors interact with your website
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 行为，衡量访客如何与您的网站互动
- en: Conversions, which measure how visitors completed various goals on your website
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转化，衡量访客如何在您的网站上完成各种目标
- en: 'Here''s a look at the **BEHAVIOR** | **Overview** page from my website [https://thejavascriptpromise.com/](https://thejavascriptpromise.com/):'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我的网站 [https://thejavascriptpromise.com/](https://thejavascriptpromise.com/)
    上的 **行为** | **概览** 页面的一个查看：
- en: '![](img/B14094_14_01.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14094_14_01.png)'
- en: 'Figure 14.1: Google Analytics behavior overview'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图14.1：Google Analytics行为概览
- en: '[https://thejavascriptpromise.com/](https://thejavascriptpromise.com/) is a
    simple single-page HTML site, hence the metrics are quite simple. Let''s go over
    the various metrics on the screen:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://thejavascriptpromise.com/](https://thejavascriptpromise.com/) 是一个简单的单页HTML网站，因此指标相当简单。让我们回顾一下屏幕上的各种指标：'
- en: '**Pageviews** shows the number of visitors.'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**页面浏览量**显示访客数量。'
- en: '**Unique Pageviews** shows the number of unique visitors.'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**独立页面浏览量**显示独立访客数量。'
- en: '**Avg. Time on Page** shows the amount of time each user spent on the site.'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**平均页面停留时间**显示每位用户在网站上花费的时间。'
- en: '**Bounce Rate** shows that users left the site without navigating to a subpage
    or interacting with the site in any manner, such as clicking on a link or button
    with a custom event.'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**跳出率**显示用户在没有导航到子页面或以任何方式与网站互动（如点击带有自定义事件的链接或按钮）的情况下离开网站。'
- en: '**% Exit** indicates how often users leave the site after viewing a particular
    page or set of pages.'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**%退出率**表示用户在查看特定页面或一组页面后离开网站的频率。'
- en: At a high level, in 2017, the site had about 1,090 unique visitors and, on average,
    each visitor spent about 2.5 minutes, or 157 seconds, on the site. Given that
    this is just a single-page site, bounce rate and % exit metrics do not apply in
    any meaningful manner. Later, we use the number of unique visitors to calculate
    the cost per user.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在2017年，网站大约有1,090位独立访客，平均每位访客在网站上花费约2.5分钟，即157秒。鉴于这是一个单页网站，跳出率和%退出率在任何有意义的层面上都不适用。后来，我们使用独立访客数量来计算每位用户的成本。
- en: 'As a point of comparison, the LemonMart app from the book served 162,396 lemons
    between April 2018 and April 2020:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 作为比较，书中提到的LemonMart应用在2018年4月至2020年4月之间共服务了162,396个柠檬：
- en: '![](img/B14094_14_02.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14094_14_02.png)'
- en: 'Figure 14.2: LemonMart behavior overview'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.2：LemonMart 行为概览
- en: 'In addition to page views, Google Analytics can also capture specific events,
    such as clicking on a button that triggers a server request. These events can
    then be viewed on the **Events** | **Overview** page, as shown:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 除了页面浏览量之外，Google Analytics 还可以捕获特定事件，例如点击按钮触发服务器请求。这些事件可以在 **事件** | **概览** 页面上查看，如下所示：
- en: '![](img/B14094_14_03.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14094_14_03.png)'
- en: 'Figure 14.3: Google Analytics Events Overview'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.3：Google Analytics 事件概览
- en: It is possible to capture metrics on the server side as well, but this will
    give requests-over-time statistics. You will require additional code and state
    management to track the behavior of a particular user so that you can calculate
    users-over-time statistics. By implementing such tracking on the client side with
    Google Analytics, you gain a far more detailed understanding as to where the user
    came from, what they did, whether they succeeded or not, and when they left your
    app without adding unnecessary code complexity and infrastructure load to your
    backend.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以在服务器端捕获指标，但这将提供随时间推移的请求统计。您将需要额外的代码和状态管理来跟踪特定用户的行为，以便您可以计算随时间推移的用户统计。通过在客户端使用
    Google Analytics 实现此类跟踪，您可以获得对用户来源、所做行为、是否成功以及何时离开您的应用程序的更详细理解，而无需在您的后端添加不必要的代码复杂性和基础设施负载。
- en: Adding Google Tag Manager to your Angular app
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将 Google Tag Manager 添加到您的 Angular 应用程序中
- en: Let's start capturing analytics in your Angular app. Google is in the process
    of phasing out the legacy `ga.js` and `analytics.js` products that are shipped
    with Google Analytics, replacing these with its new, more flexible global site
    tag, `gtag.js`, that ships with Google Tag Manager. This is by no means an end
    to Google Analytics; instead, it represents a shift toward an easier-to-configure
    and manage analytics tool. The global site tag can be configured and managed remotely
    via Google Tag Manager. Tags are snippets of JavaScript tracking code that is
    delivered to the client, and they can enable tracking of new metrics and integration
    with multiple analytics tools without having to change code that has already been
    deployed. You can still continue to use Google Analytics to analyze and view your
    analytics data. Another major advantage of Google Tag Manager is that it is version
    controlled, meaning that you can experiment with different kinds of tags that
    are triggered under various kinds of conditions without fear of doing any irreversible
    damage to your analytics configuration.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在您的 Angular 应用程序中开始捕获分析数据。Google 正在逐步淘汰与 Google Analytics 一起提供的旧版 `ga.js`
    和 `analytics.js` 产品，用其新的、更灵活的全局站点标签 `gtag.js` 取代这些产品，该标签与 Google Tag Manager 一起提供。这绝不是
    Google Analytics 的终结；相反，它代表了对一个更容易配置和管理分析工具的转变。全局站点标签可以通过 Google Tag Manager 远程配置和管理。标签是发送到客户端的
    JavaScript 跟踪代码片段，它们可以启用对新的指标的跟踪以及与多个分析工具的集成，而无需更改已部署的代码。您仍然可以使用 Google Analytics
    来分析和查看您的分析数据。Google Tag Manager 的另一个主要优点是它具有版本控制功能，这意味着您可以在各种条件下触发不同类型的标签进行实验，而无需担心对您的分析配置造成不可逆的损害。
- en: Setting up Google Tag Manager
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置 Google Tag Manager
- en: 'Let''s begin by setting up a Google Tag Manager account for your application:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从为您的应用程序设置一个 Google Tag Manager 账户开始：
- en: Sign in to Google Tag Manager at [https://tagmanager.google.com/](https://tagmanager.google.com/).
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 [https://tagmanager.google.com/](https://tagmanager.google.com/) 登录 Google
    Tag Manager。
- en: Add a new account with a **Web** container, as follows:![](img/B14094_14_04.png)
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下步骤添加一个带有 **Web** 容器的新的账户：![](img/B14094_14_04.png)
- en: 'Figure 14.4: Google Tag Manager'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.4：Google Tag Manager
- en: 'Paste the generated scripts at or near the top `<head>` and `<body>` sections
    of your `index.html` file, as instructed on the website:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照网站上的说明，将生成的脚本粘贴到 `index.html` 文件的顶部或接近顶部的 `<head>` 和 `<body>` 部分：
- en: '[PRE5]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Note that the `<noscript>` tag will only execute if the user has disabled JavaScript
    execution in their browser. This way, we can collect metrics from such users,
    rather than being blind to their presence.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，如果用户在其浏览器中禁用了 JavaScript 执行，则 `<noscript>` 标签才会执行。这样，我们可以收集此类用户的指标，而不是对他们的存在视而不见。
- en: Submit and publish your tag manager container.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提交并发布您的标签管理器容器。
- en: You should see the initial setup of your tag manager completed, as shown in
    the following screenshot:![](img/B14094_14_05.png)
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您应该看到您的标签管理器的初始设置已完成，如下截图所示：![](img/B14094_14_05.png)
- en: 'Figure 14.5: Published tag'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.5：已发布的标签
- en: Verify that your Angular app runs without any errors.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证您的 Angular 应用程序运行时没有错误。
- en: Note that if you don't publish your tag manager container, you will see a `404`
    error when loading `gtm.js` in the dev console or the **Network** tab.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，如果你没有发布你的标签管理器容器，你将在开发控制台或**网络**标签加载`gtm.js`时看到`404`错误。
- en: Setting up Google Analytics
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置Google Analytics
- en: 'Now, let''s generate a tracking ID through Google Analytics. This is a universally
    unique identifier for your app to correlate your analytics data:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们通过Google Analytics生成一个跟踪ID。这是你应用的通用唯一标识符，用于关联你的分析数据：
- en: Log in to Google Analytics at [https://analytics.google.com](https://analytics.google.com).
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[https://analytics.google.com](https://analytics.google.com/)登录Google Analytics。
- en: Open the **Admin console**, using the gear icon in the bottom-left corner of
    the screen, as shown in the following screenshot:![](img/B14094_14_06.png)
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**管理控制台**，使用屏幕左下角的齿轮图标，如图所示：![](img/B14094_14_06.png)
- en: 'Figure 14.6: Google Analytics admin console'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.6：Google Analytics管理控制台
- en: Create a new analytics account.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的分析账户。
- en: 'Using the steps from the preceding screenshot as a guide, perform the following
    steps:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用前一张截图中的步骤作为指南，执行以下步骤：
- en: Add a new **Property**, `LemonMart`.
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个新的**属性**，`LemonMart`。
- en: Configure the property to your preferences.
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将属性配置为你的偏好。
- en: Click on **Tracking Code**.
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**跟踪代码**。
- en: Copy the **Tracking ID** that starts with `UA-xxxxxxxxxx-1`.
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制以`UA-xxxxxxxxxx-1`开头的**跟踪ID**。
- en: Ignore the `gtag.js` code provided.
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 忽略提供的`gtag.js`代码。
- en: With your tracking ID on hand, we can configure Google Tag Manager so that it
    can collect analytics.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有你的跟踪ID后，我们可以配置Google Tag Manager，使其能够收集分析数据。
- en: Configuring Google Analytics Tag in Tag Manager
  id: totrans-81
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 在标签管理器中配置Google Analytics标签
- en: 'Now, let''s connect our Google Analytics ID to Google Tag Manager:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们将我们的Google Analytics ID连接到Google Tag Manager：
- en: At [https://tagmanager.google.com](https://tagmanager.google.com), open the
    **Workspace** tab.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[https://tagmanager.google.com](https://tagmanager.google.com)，打开**工作区**标签。
- en: Click on **Add a new tag**.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加新标签**。
- en: Name it `Google Analytics`.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将其命名为`Google Analytics`。
- en: Click on **Tag Configuration** and select **Universal Analytics**.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**标签配置**并选择**通用分析**。
- en: Under **Google Analytics Settings**, add a new variable.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**Google Analytics设置**下添加一个新变量。
- en: Paste the tracking ID you copied in the previous section.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将上一节复制的跟踪ID粘贴。
- en: Click on **Triggers** and add the **All Pages** trigger.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**触发器**并添加**所有页面**触发器。
- en: Click on **Save**, as shown in the following screenshot:![](img/B14094_14_07.png)
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**，如图所示：![](img/B14094_14_07.png)
- en: 'Figure 14.7: Creating a Google Analytics tag'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.7：创建Google Analytics标签
- en: Submit and publish your changes, and observe the version summary with one tag,
    as shown:![](img/B14094_14_08.png)
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提交并发布你的更改，并观察带有单个标签的版本摘要，如图所示：![](img/B14094_14_08.png)
- en: 'Figure 14.8: Version Summary showing one tag'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.8：显示一个标签的版本摘要
- en: Now refresh your Angular app, where you'll be on the `/home` route.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在刷新你的Angular应用，你将在`/home`路由上。
- en: In a private window, open a new instance of your Angular app and navigate to
    the `/manager/home` route.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在一个私有窗口中，打开你的Angular应用的新实例并导航到`/manager/home`路由。
- en: At [https://analytics.google.com/](https://analytics.google.com/), open the
    **REAL-TIME** | **Overview** pane, as shown in the following screenshot:![](img/B14094_14_09.png)
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[https://analytics.google.com/](https://analytics.google.com/)，打开**实时** | **概览**面板，如图所示：![](img/B14094_14_09.png)
- en: 'Figure 14.9: Google Analytics REAL-TIME Overview'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.9：Google Analytics实时概览
- en: Note that the two active users are being tracked.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注意，两个活跃用户正在被跟踪。
- en: Under **Top Active Pages**, you should see the pages that the users are on.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**顶部活跃页面**下，你应该能看到用户所在的页面。
- en: By leveraging Google Tag Manager and Google Analytics together, we have been
    able to accomplish page tracking without changing any code inside our Angular
    app.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 通过利用Google Tag Manager和Google Analytics一起，我们能够在不更改Angular应用内部任何代码的情况下完成页面跟踪。
- en: '**Search engine optimization** (**SEO**) is an important part of analytics.
    To gain a better understanding of how crawlers perceive your Angular site, use
    the Google Search Console dashboard, found at [https://www.google.com/webmasters/tools](https://www.google.com/webmasters/tools),
    to identify optimizations. In addition, consider using Angular Universal to render
    certain dynamic content on the server-side so that crawlers can index your dynamic
    data sources and drive more traffic to your site.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '**搜索引擎优化**（**SEO**）是分析的重要组成部分。为了更好地理解爬虫如何感知你的Angular网站，请使用位于[https://www.google.com/webmasters/tools](https://www.google.com/webmasters/tools)的Google
    Search Console仪表板来识别优化。此外，考虑使用Angular Universal在服务器端渲染某些动态内容，以便爬虫可以索引你的动态数据源，并为你的网站带来更多流量。'
- en: Budgeting and scaling
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预算和扩展
- en: In the *AWS Billing* section of *Chapter 13*, *Highly Available Cloud Infrastructure
    on AWS*, we covered the monthly costs of operating a web server, ranging from
    $5/month to $45/month, from a single-server instance scenario to a highly available
    infrastructure. For most needs, budgeting discussions will begin and end with
    this monthly number. You can execute load tests, as suggested in the *Advanced
    load testing* section, to predict your per-server user capacity and get a general
    idea of how many servers you may require. In a dynamically scaling cloud environment
    with dozens of servers running 24/7, this is an overly simplistic way to calculate
    a budget.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在第13章的*AWS计费*部分，*AWS上的高可用云基础设施*中，我们介绍了运营一个Web服务器的月度成本，从每月5美元到每月45美元不等，从单服务器实例场景到高可用基础设施。对于大多数需求，预算讨论将从这一月度数字开始和结束。你可以执行如*高级负载测试*部分所建议的负载测试，以预测每服务器的用户容量，并大致了解你可能需要多少服务器。在一个有数十个服务器全天候运行的动态扩展云环境中，这是一种过于简单化的预算计算方法。
- en: If you operate a web property of any significant scale, things invariably get
    complicated. You will be operating multiple servers on different tech stacks,
    serving different purposes. It can be difficult to gauge or justify how much of
    a budget to spare for seemingly excess capacity or unnecessarily high-performance
    servers. Somehow, you need to be able to communicate the efficiency of your infrastructure
    given the number of users you serve and ensure that your infrastructure is fine-tuned
    so that you don't lose users due to an unresponsive application or overpay because
    you're using more capacity than you require.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你运营的是一个规模较大的网站，事情往往会变得复杂。你将需要在不同的技术栈上运行多个服务器，服务于不同的目的。很难衡量或证明为看似过剩的容量或不必要的高性能服务器预留多少预算。无论如何，你需要能够根据你服务的用户数量来传达你基础设施的效率，并确保你的基础设施经过精细调整，这样你就不会因为一个无响应的应用程序而失去用户，或者因为使用了比你需要的更多容量而过度付费。
- en: For this reason, we will take a user-centered approach and translate our IT
    infrastructure costs to a per-user cost metric that the business and the marketing
    side of your organization can make sense of.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们将采取以用户为中心的方法，将我们的IT基础设施成本转换为每用户成本指标，这样业务和营销部门都能理解。
- en: In the next section, we will investigate what it means to calculate the per-user
    cost of your infrastructure and how these calculations change when cloud scaling
    comes in to play using one of my websites as an example.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将探讨计算你基础设施的每用户成本意味着什么，以及当云扩展介入时，这些计算如何变化。我们将以我的一个网站为例。
- en: Calculating the per-user cost
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 计算每用户成本
- en: 'We will be leveraging behavior metrics from Google Analytics with the goal
    of calculating the per-user cost over a given period of time:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将利用Google Analytics中的行为指标，目标是计算给定时间段的每用户成本：
- en: 'Per-user cost is calculated as follows:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 每用户成本的计算方法如下：
- en: '![](img/B14094_14_001.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_001.png)'
- en: Using the [https://thejavascriptpromise.com/](https://thejavascriptpromise.com/)
    data from earlier, let's plug in the data to the formula to calculate *perUserCost/month*.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 使用之前从[https://thejavascriptpromise.com/](https://thejavascriptpromise.com/)获取的数据，让我们将数据输入公式来计算*每用户成本/月*。
- en: 'This website is deployed on an Ubuntu server on DigitalOcean, so the monthly
    infrastructure cost, including weekly backups, is $6 a month. From Google Analytics,
    we know there were 1,090 unique visitors in 2017:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 这个网站部署在DigitalOcean上的Ubuntu服务器上，因此每月的基础设施成本（包括每周备份）为每月6美元。从Google Analytics中，我们知道2017年有1,090位独立访客：
- en: '![](img/B14094_14_002.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_002.png)'
- en: In 2017, I have paid 7 cents per user. Money well spent? At $6/month, I don't
    mind it. In 2017, [https://thejavascriptpromise.com/](https://thejavascriptpromise.com/)
    was deployed on a traditional server setup as a static site that doesn't scale
    out or in. These conditions make it very straightforward to use the unique visitor
    metric and find the per-user cost. The very same simplicity that allows for an
    easy calculation also leads to a suboptimal infrastructure. If I were to serve
    1,000,000 users on the same infrastructure, my costs would add up to $70,000 a
    year. If I were to earn $100 for every 1,000 users through Google ads, my site
    would make $100,000 per year. After taxes, development expenses, and our unreasonable
    hosting expenses, the operation would likely lose money.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在2017年，我每个用户支付了7美分。这笔钱花得值吗？每月6美元，我并不介意。在2017年，[https://thejavascriptpromise.com/](https://thejavascriptpromise.com/)
    部署在一个传统的服务器设置上，作为一个静态网站，无法扩展或缩减。这些条件使得使用独立访客指标和找到每个用户的成本变得非常直接。正是这种简单的计算方式，也导致了基础设施的低效。如果我要在相同的基础设施上服务100万用户，我的年度成本将达到70,000美元。如果我能通过谷歌广告为每1000个用户赚取100美元，我的网站每年将赚取100,000美元。在扣除税费、开发费用以及我们不合理的主机费用后，运营可能会亏损。
- en: If you were to take advantage of cloud scaling, where instances can scale out
    or in dynamically based on current user demand, the preceding formula becomes
    useless pretty quickly because you must take provisioning time and target server
    utilization into account.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要利用云扩展，即根据当前用户需求动态扩展或缩减实例，那么上述公式很快就会变得毫无用处，因为你必须考虑配置时间和目标服务器利用率。
- en: Provisioning time is the amount of time it takes your cloud provider to start
    a new server from scratch. Target server utilization is the maximum usage metric
    of a given server, where a scale-out alert must be sent out so that a new server
    is ready before your current servers max out their capacity. In order to calculate
    these variables, we must execute a series of load tests against our servers.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 配置时间是你的云提供商从零开始启动新服务器所需的时间。目标服务器利用率是给定服务器的最大使用指标，其中必须发出扩展警报，以便在当前服务器达到最大容量之前，新服务器已经准备好。为了计算这些变量，我们必须对我们的服务器执行一系列负载测试。
- en: Page views are an overly simplistic way to determine user behavior in SPAs such
    as Angular, where page views do not necessarily correlate to a request, or vice
    versa. If we execute load tests simply based on page views, we won't get a realistic
    simulation of how your platform may perform under load.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 页面浏览量是确定单页应用（如Angular）中用户行为的过于简单的方法，在这些应用中，页面浏览量不一定与请求相关，或者反之亦然。如果我们仅仅基于页面浏览量执行负载测试，我们就无法得到一个关于你的平台在负载下可能如何表现的现实模拟。
- en: User behavior, or how users actually use your app, can drastically impact your
    performance forecasts and wildly fluctuate budget numbers. You can use Google
    Analytics custom events to capture complicated sets of actions that result in
    various types of requests served by your platform. Later in this chapter, we will
    explore how you can measure actual use in the *Measuring actual use* section.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 用户行为，或者说用户实际如何使用你的应用，可以极大地影响你的性能预测，并使预算数字大幅波动。你可以使用谷歌分析自定义事件来捕捉由你的平台提供各种类型请求的复杂动作集。在本章的后面部分，我们将探讨如何在“测量实际使用”部分测量实际使用情况。
- en: Initially, you won't have any of the aforementioned metrics, and any metrics
    you may have will be invalidated any time you make a meaningful change to your
    software or hardware stack. Therefore, it is imperative to execute load tests
    on a regular basis to simulate realistic user loads.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 初始时，你将没有上述任何指标，而且任何你可能拥有的指标，在你对软件或硬件栈进行任何有意义的更改时都会被无效化。因此，定期执行负载测试以模拟真实用户负载是至关重要的。
- en: Advanced load testing
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级负载测试
- en: In order to be able to predict capacity, we need to run load tests. In *Chapter
    13*, *Highly Available Cloud Infrastructure on AWS*, I discussed a simple load
    testing technique of just sending a bunch of web requests to a server. In a relative
    comparison scenario, this works fine for testing raw power. However, actual users
    generate dozens of requests at varying intervals while they navigate your website,
    resulting in a wide variety of API calls to your backend server.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够预测容量，我们需要运行负载测试。在*第13章*，“AWS上的高可用云基础设施”中，我讨论了一种简单的负载测试技术，即向服务器发送大量网络请求。在相对比较场景中，这对于测试原始功率来说效果不错。然而，实际用户在浏览你的网站时会产生数十个不同间隔的请求，这导致了对后端服务器的各种API调用。
- en: We must be able to model virtual users and unleash a whole bunch of them on
    our servers to find the breaking point of our server. OctoPerf is an easy-to-use
    service to execute such load tests, and it's located at [https://octoperf.com](https://octoperf.com).
    OctoPerf offers a free tier that allows for 50 concurrent users/test over unlimited
    test runs with two load generators.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须能够模拟虚拟用户，并在我们的服务器上释放大量用户以找到服务器的瓶颈。OctoPerf 是一个易于使用的服务，用于执行此类负载测试，位于 [https://octoperf.com](https://octoperf.com)。OctoPerf
    提供了一个免费层，允许在无限次测试运行中使用两个负载生成器进行 50 个并发用户/测试。
- en: 'OctoPerf is the ideal tool to get us quickly started with advanced testing
    capability. Let''s create an account and see what it can do for us:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: OctoPerf 是一个理想的工具，可以帮助我们快速开始高级测试功能。让我们创建一个账户，看看它能为我们做什么：
- en: Create an OctoPerf account.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个 OctoPerf 账户。
- en: Log in and add a new project for LemonMart, as shown:![](img/B14094_14_10.png)
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录并添加一个新的 LemonMart 项目，如图所示：![图片](img/B14094_14_10.png)
- en: 'Figure 14.10: Adding a project in OctoPerf'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.10：在 OctoPerf 中添加项目
- en: OctoPerf allows you to create multiple virtual users with different usage characteristics.
    Since it is a URL-based setup, any click-based user action can also be simulated
    by directly calling the application server URL with test parameters.
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: OctoPerf 允许您创建具有不同使用特性的多个虚拟用户。由于它是一个基于 URL 的设置，任何基于点击的用户操作也可以通过直接调用应用程序服务器 URL
    并传递测试参数来模拟。
- en: Create two virtual users, one as a `Manager` who navigates to manager-based
    pages, and a second as a `POS` user who sticks to POS functions.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建两个虚拟用户，一个作为 `经理`，导航到基于经理的页面，另一个作为 `POS` 用户，坚持使用 POS 功能。
- en: Click on **Create scenario**:![](img/B14094_14_11.png)
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建场景**：![图片](img/B14094_14_11.png)
- en: 'Figure 14.11: POS User scenario'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.11：POS 用户场景
- en: Name the scenario `Evening Rush`.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将场景命名为 `晚间高峰`。
- en: You can add a mixture of **Manager** and **POS User** types, as shown:![](img/B14094_14_12.png)
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以添加 **经理** 和 **POS 用户** 类型的混合，如图所示：![图片](img/B14094_14_12.png)
- en: 'Figure 14.12: Evening Rush scenario'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.12：晚间高峰场景
- en: Click on the **Launch 50 VUs** button to start the load test.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **启动 50 VUs** 按钮以开始负载测试。
- en: 'You can observe the number of **users** and **hits/sec** being achieved in
    real-time, as shown in the following screenshot:'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以观察实时达到的 **用户数** 和 **每秒点击数**，如下面的屏幕截图所示：
- en: '![](img/B14094_14_13.png)'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_13.png)'
- en: 'Figure 14.13: Evening Rush load test underway'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.13：晚间高峰负载测试进行中
- en: ECS service metrics also give us a high-level idea of real-time utilization,
    as shown in the following screenshot:![](img/B14094_14_14.png)
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ECS 服务指标还给我们提供了一个关于实时利用率的总体概念，如下面的屏幕截图所示：![图片](img/B14094_14_14.png)
- en: 'Figure 14.14: ECS real-time metrics'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 14.14：ECS 实时指标
- en: Analyze the load test results.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分析负载测试结果。
- en: 'You can get more accurate results from ECS by clicking on the **CPUUtilization**
    link from **ECS Service Metrics** or by navigating to the **CloudWatch** | **Metrics**
    section, as follows:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过点击 **ECS 服务指标** 中的 **CPUUtilization** 链接或通过导航到 **CloudWatch** | **指标**
    部分来从 ECS 获取更准确的结果，如下所示：
- en: '![](img/B14094_14_15.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_15.png)'
- en: 'Figure 14.15: AWS CloudWatch Metrics'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.15：AWS CloudWatch 指标
- en: 'As you can see in the preceding graph, CPU utilization was fairly consistent,
    at around 1.3%, given a sustained user load of 50 over a period of 10 minutes.
    During this period, there were no request errors, as shown in the statistics summary
    from OctoPerf:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，在 10 分钟的持续用户负载为 50 的情况下，CPU 利用率相当稳定，大约为 1.3%。在此期间，没有请求错误，如 OctoPerf 的统计摘要所示：
- en: '![](img/B14094_14_16.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_16.png)'
- en: 'Figure 14.16: OctoPerf Statistics summary'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.16：OctoPerf 统计摘要
- en: 'Ideally, we would measure maximum users/second until the moment errors were
    being generated. However, given only 50 virtual users and the information we already
    have, we can predict how many users could be handled at 100% utilization:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，我们会测量每秒最大用户数，直到错误开始产生。然而，鉴于只有 50 个虚拟用户和我们已经拥有的信息，我们可以预测在 100% 利用率下可以处理多少用户：
- en: '![](img/B14094_14_003.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_003.png)'
- en: Our load test results reveal that our infrastructure can handle 3,846 users/second.
    Given this information, we can calculate cost per user in a scalable environment
    in the next section. However, performance and reliability go hand in hand. How
    you choose to architect your infrastructure will also provide important information
    in terms of budgeting, because the level of reliability you need will dictate
    the minimum number of instances you must keep around at all times.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的负载测试结果显示，我们的基础设施可以处理每秒3,846个用户。鉴于这一信息，我们可以在下一节计算可扩展环境中的每用户成本。然而，性能和可靠性是相辅相成的。你选择如何架构你的基础设施也将为预算提供重要信息，因为所需的可靠性水平将决定你必须始终保留的最小实例数量。
- en: Reliable cloud scaling
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可靠的云扩展
- en: Reliability can be expressed in terms of your organization’s **recovery point
    objective** (**RPO**) and **recovery time objective** (**RTO**). RPO represents
    how much data you’re willing to lose, while RTO represents how fast you can rebuild
    your infrastructure in the event of a failure.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 可靠性可以用你组织的**恢复点目标（RPO**）和**恢复时间目标（RTO**）来表示。RPO代表你愿意丢失多少数据，而RTO代表在发生故障的情况下，你可以多快重建你的基础设施。
- en: Let’s suppose that you run an e-commerce site. Around noon every weekday, you
    reach peak sales. Every time a user adds an item to their shopping cart, you store
    the items on a server-side cache so that users can resume their shopping spree
    later at home. In addition, you process hundreds of transactions per minute. Business
    is good, your infrastructure is scaling out beautifully, and everything is going
    smoothly. Meanwhile, a hungry rat or an overly charged lightning cloud decides
    to strike your data center. Initially, a seemingly harmless power unit goes down,
    but it’s fine, because nearby power units can pick up the slack. However, this
    is the lunch rush; other websites on the data center are also facing a high traffic
    volume. As a result, several power units overheat and fail. There aren’t enough
    power units to pick up the slack, so in quick succession, power units overheat
    one by one and start failing, triggering a cascade of failures that end up taking
    down the entire data center. Meanwhile, some of your users just clicked on **Add
    to cart**, others on the **Pay** button, and some others are just about to arrive
    on your site. If your RPO is 1 hour, meaning you persisted your shopping cart
    cache every hour, then you can say goodbye to valuable data and potential sales
    by those night-time shoppers. If your RTO is 1 hour, it will take you up to 1
    hour to get your site back up and running again, and you can rest assured that
    most of those customers who just clicked on the buy button or arrived to an unresponsive
    site won’t be making a purchase on your site that day.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你运营一个电子商务网站。在每周工作日的中午左右，你达到销售高峰。每次用户将商品添加到购物车时，你都会在服务器端缓存中存储这些商品，以便用户可以在家后继续购物。此外，你每分钟处理数百笔交易。生意兴隆，你的基础设施正在扩展，一切都很顺利。与此同时，一只饥饿的老鼠或过度充电的闪电云决定攻击你的数据中心。最初，一个看似无害的电源单元出现故障，但没关系，因为附近的电源单元可以填补空缺。然而，这是午餐高峰期；数据中心上的其他网站也面临着高流量。结果，几个电源单元过热并发生故障。没有足够的电源单元来填补空缺，因此，电源单元一个接一个地过热并开始故障，引发了一系列连锁反应，最终导致整个数据中心崩溃。与此同时，一些用户刚刚点击了**加入购物车**，其他人点击了**支付**按钮，还有一些人正准备到达你的网站。如果你的RPO是1小时，意味着你每小时持久化一次购物车缓存，那么你将不得不与那些夜间购物者失去宝贵的数据和潜在的销售。如果你的RTO是1小时，那么你需要1小时的时间才能让你的网站重新上线并运行，你可以放心，那些刚刚点击购买按钮或到达无响应网站的大部分客户那天不会在你的网站上购买。
- en: A well-thought-out RPO and RTO is a critical business need, but they must also
    be paired with the right infrastructure that makes it possible to implement your
    objectives in a cost-effective manner. AWS is made up of more than two dozen regions
    around the world, each region containing at least their **availability zones**
    (**AZs**). Each AZ is a physically separated infrastructure that is not affected
    by a failure in another AZ.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 一个周全的RPO（恢复点目标）和RTO（恢复时间目标）是关键的商业需求，但它们还必须与正确的基础设施相匹配，这样才能以成本效益的方式实现你的目标。AWS由全球二十多个地区组成，每个地区至少包含它们的**可用区（AZ**）。每个AZ是一个物理上分离的基础设施，不会受到另一个AZ故障的影响。
- en: A highly available configuration on AWS means that your application is up and
    running on at least two AZs, so if a server instance fails, or even if the entire
    data center fails, you have another instance already live in a physically separate
    data center that is able to pick up incoming requests seamlessly.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在AWS上，高可用配置意味着您的应用程序至少在两个可用区（AZ）上运行，因此如果服务器实例失败，或者整个数据中心失败，您已经在物理上分开的数据中心中有一个实例已经运行，能够无缝地接收传入的请求。
- en: A fault-tolerant architecture means that your application is deployed across
    multiple regions. Even if an entire region goes down due to a natural disaster,
    a **distributed denial-of-service** (**DDoS**) attack, or a bad software update,
    your infrastructure remains standing and is able to respond to user requests.
    Your data is protected by layer upon layer of security and via staggered backups
    of backups.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 容错架构意味着您的应用程序部署在多个区域。即使整个区域因自然灾害、DDoS攻击或软件更新不当而完全中断，您的基础设施仍然屹立不倒，并且能够响应用户请求。您的数据通过多层安全措施和备份的备份进行保护。
- en: AWS offers great services, including **Shield** to protect against DDoS attacks
    targeted against your website, a **Pilot Light** service to keep a minimal infrastructure
    waiting dormant in another region that can scale to full capacity if needed, while
    keeping operational costs down, and a **Glacier** service to store large amounts
    for data for long periods of time in an affordable manner.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: AWS提供优质的服务，包括**Shield**服务，用于保护您的网站免受DDoS攻击，**Pilot Light**服务以最低的基础设施在另一个区域保持等待休眠状态，如果需要，可以扩展到全容量，同时保持运营成本较低，以及**Glacier**服务，以经济实惠的方式存储大量数据长达数年。
- en: A highly available configuration will require a minimum of two instances in
    a multi-AZ setup at all times. For a fault-tolerant setup, you require two highly
    available configurations in at least two regions. Most AWS cloud services, such
    as DynamoDB for data storage or Redis for caching, are highly available by default,
    including serverless technologies such as Lambda. Lambda charges on a per-use
    basis and can scale to match any need you can throw at it in a cost-effective
    manner. If you can move heavy compute tasks to Lambda, you can reduce your server
    utilization and your scaling needs dramatically in the process. When planning
    your infrastructure, you should consider all these variables to set up the right
    scalable environment for your needs.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 高可用配置始终需要在多AZ设置中至少有两个实例。对于容错设置，您需要在至少两个区域中拥有两个高可用配置。大多数AWS云服务，如用于数据存储的DynamoDB或用于缓存的Redis，默认都是高可用的，包括无服务器技术如Lambda。Lambda按使用量收费，并且可以以成本效益的方式扩展以满足任何需求。如果您可以将重计算任务移动到Lambda，您可以在过程中显著降低服务器利用率和扩展需求。在规划您的基础设施时，您应该考虑所有这些变量，以设置满足您需求的正确可扩展环境。
- en: Cost per user in a scalable environment
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可扩展环境中的每用户成本
- en: In a scalable environment, you cannot plan on 100% utilization. It takes time
    to provision a new server. A server that is at 100% utilization can’t process
    additional incoming requests in a timely manner, which results in dropped or erroneous
    requests from the users’ perspective. So, the server in question must send a trigger
    well before it reaches 100% utilization so that no requests are dropped. Earlier
    in the chapter, I suggested a 60-80% target utilization before scaling. The exact
    number will largely depend on your specific choice of software and hardware stack.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在可扩展环境中，您不能指望100%的利用率。部署新服务器需要时间。利用率达到100%的服务器无法及时处理额外的传入请求，这会导致用户看到请求丢失或错误请求。因此，相关的服务器必须在达到100%利用率之前发送触发信号，以确保不会丢失任何请求。在本章早期，我建议在扩展之前设定60-80%的目标利用率。确切的数字将很大程度上取决于您选择的特定软件和硬件堆栈。
- en: Given your custom utilization target, we can calculate the number of users your
    infrastructure is expected to serve on average per instance. Using this information,
    you can calculate a more accurate cost per user, which should allow the correct
    sizing of your IT budget, given your specific needs. It is equally as bad to underspend
    as it is to overspend. You may be forgoing more growth, security, data, reliability,
    and resilience than may be considered acceptable.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您自定义的利用率目标，我们可以计算出您的基础设施平均每个实例预期要服务的用户数量。利用这些信息，您可以计算出更准确的每用户成本，这应该能够根据您的具体需求正确调整您的IT预算。过度支出和不足支出同样糟糕。您可能正在放弃比可接受水平更多的增长、安全、数据、可靠性和弹性。
- en: In the next section, we will walk through the calculation of an optimal target
    server utilization metric so that you can calculate a more accurate per-user cost.
    Then, we will explore scaling that can occur during preplanned time frames and
    software deployments.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将介绍如何计算最佳目标服务器利用率指标，以便您可以计算更准确的每用户成本。然后，我们将探讨在预先计划的时间框架和软件部署过程中可能发生的扩展。
- en: Calculating target server utilization
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 计算目标服务器利用率
- en: 'First, calculate your custom server utilization target, which is the point
    where your server is experiencing increased volumes of traffic and triggers a
    new server to provision with enough time so that the original server does not
    reach 100% utilization and drops requests. Consider this formula:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，计算您自定义的服务器利用率目标，这是您的服务器经历增加流量并触发新服务器配置的时间点，以便原始服务器不会达到100%的利用率并丢弃请求。考虑以下公式：
- en: '![](img/B14094_14_004.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14094_14_004.png)'
- en: 'Let’s demonstrate how the formula works with the help of a concrete example:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一个具体的例子来展示公式的应用：
- en: 'Load test your instances to establish user capacity per instance:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对您的实例进行负载测试以确定每个实例的用户容量：
- en: '*Load test results*: 3,846 users/second.'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*负载测试结果*：每秒3,846用户。'
- en: Requests/sec and users/sec are not the same, since a user makes multiple requests
    to complete an action and may execute multiple requests/sec. Advanced load testing
    tools such as OctoPerf are necessary to execute realistic and varied workloads
    and measure user capacity over request capacity.
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 每秒请求数和每秒用户数并不相同，因为一个用户可能需要多次请求来完成一个操作，并且可能每秒执行多个请求。需要像 OctoPerf 这样的高级负载测试工具来执行真实且多样化的工作负载，并测量用户容量相对于请求容量的情况。
- en: 'Measure instance provisioning speed, from creation/cold boot to the request
    fulfilled first:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测量实例配置速度，从创建/冷启动到首次满足请求：
- en: '*Measured instance provisioning speed*: 60 seconds.'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*测量的实例配置速度*：60秒。'
- en: In order to measure this speed, you can put the stopwatch away. Depending on
    your exact setup, AWS provides event and application logs in the ECS Service Events
    tab, CloudWatch, and CloudTrail to correlate enough information to figure out
    when a new instance was requested and how long it took for the instance to be
    ready to fulfill requests.
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了测量这个速度，您可以放下秒表。根据您的具体设置，AWS在ECS服务事件标签页、CloudWatch和CloudTrail中提供事件和应用日志，以关联足够的信息来找出何时请求了新实例以及实例准备就绪以处理请求所需的时间。
- en: For example, in the **ECS Service Events** tab, take the target registration
    event as the beginning time. Once the task has been initiated, click on the task
    ID to see the creation time. Using the task ID, check the task’s logs in CloudWatch
    to see the time at which the task served its first web request as the end time
    and then calculate the duration.
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，在**ECS服务事件**标签页中，以目标注册事件作为开始时间。一旦任务已启动，点击任务ID以查看创建时间。使用任务ID，检查CloudWatch中的任务日志以查看任务首次处理Web请求的时间作为结束时间，然后计算持续时间。
- en: 'Measure the 95th percentile user growth rate, excluding known capacity increases:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测量第95百分位数的用户增长率，排除已知的容量增加：
- en: '*95th percentile user growth rate*: 10 users/second.'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*第95百分位数用户增长率*：每秒10用户。'
- en: The 95th percentile is a common metric to calculate overall network usage. It
    means that 95% of the time, usage will be below the stated amount, making it a
    good number to use for planning, as explained by Barb Dijker in her article entitled
    *What the heck is this 95th Percentile number?*, available at [http://www2.arnes.si/~gljsentvid10/pct.html](http://www2.arnes.si/~gljsentvid10/pct.html).
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 第95百分位数是一个常用的指标来计算整体网络使用情况。这意味着95%的时间内，使用量将低于所声明的数量，这使得它是一个很好的数字用于规划，正如Barb
    Dijker在她的文章《这个95百分位数是什么意思？》中所解释的，该文章可在[http://www2.arnes.si/~gljsentvid10/pct.html](http://www2.arnes.si/~gljsentvid10/pct.html)找到。
- en: If you don’t have prior metrics, initially defining user growth rate will be
    an educated guess at best. However, once you start collecting data, you can update
    your assumptions. In addition, it is impossible to operate an infrastructure that
    can respond to any imaginable outlier without dropping a request in a cost-effective
    manner. Given your metrics, a business decision should be consciously made as
    to what percentile of outliers should be ignored as an acceptable business risk.
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您没有先前的指标，最初定义用户增长率将最多是一个有根据的猜测。然而，一旦您开始收集数据，您就可以更新您的假设。此外，不可能运营一个能够以经济有效的方式应对任何可想象到的异常值的基础设施，而不会丢弃请求。根据您的指标，您应该有意识地做出业务决策，确定应该忽略多少百分比的异常值作为可接受的业务风险。
- en: 'Let’s plug in the numbers to the formula:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将数字代入公式：
- en: '![](img/B14094_14_005.png)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_005.png)'
- en: The custom target utilization rate, rounded down, would be 84%. Setting your
    scale-out trigger at 84% will avoid instances from being over provisioned, while
    preventing user requests from being dropped.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义目标利用率率，向下取整，将是84%。将你的扩展触发器设置为84%将避免实例过度配置，同时防止用户请求丢失。
- en: 'With this custom target utilization in mind, let’s update the per-user cost
    formula with scaling in mind:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑到这个自定义目标利用率的情况下，让我们更新包含扩展的每个用户成本公式：
- en: '![](img/B14094_14_006.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_006.png)'
- en: 'So, if our infrastructure cost was $100 per month serving 150 users, at 100%
    utilization, you calculate the per-user cost to be $0.67/user/month. If you were
    to take scaling into account, the cost would be as follows:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果我们的基础设施每月为150个用户提供服务，成本为100美元，在100%的利用率下，你计算出的每个用户的成本将是0.67美元/用户/月。如果你考虑扩展，成本将如下所示：
- en: '![](img/B14094_14_007.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/B14094_14_007.png)'
- en: Scaling without dropping requests would cost 16% more of the original $0.67
    at $0.79 per user per month. However, it is important to keep in mind that your
    infrastructure won’t always be so efficient. At lower utilization targets, or
    when these are misconfigured with scaling triggers, costs can easily double, triple,
    or quadruple the original cost. The ultimate goal here is to find the sweet spot,
    meaning that you will be paying the right amount per user.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 不丢失请求的扩展将比原始的0.67美元/用户/月多16%，达到0.79美元/用户/月。然而，重要的是要记住，你的基础设施并不总是如此高效。在较低的利用率目标下，或者当这些目标与扩展触发器配置不当时，成本可以轻易地翻倍、三倍或四倍于原始成本。这里的最终目标是找到最佳平衡点，这意味着你将为每个用户支付正确的金额。
- en: There’s no prescriptive per-user cost you should be targeting for. However,
    if you are running a service where you charge users $5 per month after all other
    operational costs and profit margins are accounted for, and you’re still left
    with a surplus budget *and* your users complaining about poor performance, then
    you’re underspending. However, if you’re eating into your profit margins or, even
    worse, only breaking even, then you may be overspending or you may need to reconsider
    your business model.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 没有规定的每个用户成本你应该追求。然而，如果你提供的服务在扣除所有其他运营成本和利润率后，每个用户每月收费5美元，并且你仍有剩余预算*并且*你的用户抱怨性能不佳，那么你可能支出不足。然而，如果你正在侵蚀你的利润率，或者更糟糕的是，仅仅收支平衡，那么你可能支出过多，或者你可能需要重新考虑你的商业模式。
- en: There are several other factors that can impact your per-user cost, including
    blue/green deployments, which we’ll cover in a moment. You can also increase the
    efficiency of your scaling by leveraging prescheduled provisioning.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个其他因素会影响你的每个用户成本，包括我们稍后将讨论的蓝绿部署。你还可以通过利用预定配置来提高扩展的效率。
- en: Prescheduled provisioning
  id: totrans-187
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 预定配置
- en: Dynamic scaling out and then back in is what defines cloud computing. However,
    the algorithms currently available still require some planning if you know that
    certain days, weeks, or months of a year will require uncharacteristically higher
    resource capacity. Given a sudden deluge of new traffic, your infrastructure will
    attempt to dynamically scale out, but if the rate of increase in traffic is logarithmic,
    even an optimized server utilization target won’t help. Servers will frequently
    reach and operate at 100% utilization, resulting in dropped or erroneous requests.
    To prevent this from happening, you should proactively provision additional capacity
    during such predictable periods of high demand.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 动态扩展和收缩然后再次扩展是定义云计算的关键。然而，目前可用的算法仍然需要一些规划，如果你知道一年中的某些日子、周或月将需要不寻常的高资源容量。面对突然涌入的新流量，你的基础设施将尝试动态扩展，但如果流量的增长速度是对数级的，即使优化了服务器利用率目标也无济于事。服务器将频繁达到并运行在100%的利用率，导致请求丢失或错误。为了防止这种情况发生，你应该在可预测的高需求期间主动提供额外的容量。
- en: Blue/green deployments
  id: totrans-189
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 蓝绿部署
- en: In *Chapter 13*, *Highly Available Cloud Infrastructure on AWS*, you configured
    no-downtime blue/green deployments. Blue/green deployments are reliable code deployments
    that ensure continuous uptime of your site, while minimizing the risk of bad deployments.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在第13章“AWS上的高可用云基础设施”中，你配置了无停机时间的蓝绿部署。蓝绿部署是可靠的代码部署，确保你的网站持续在线，同时最大限度地降低不良部署的风险。
- en: Let’s presume that you have a highly available deployment, meaning you have
    two instances active at any given time. During a blue/green deployment, two additional
    instances would be provisioned. Once these additional instances are ready to fulfill
    requests, their health is determined using your predefined health metric.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您有一个高可用性部署，这意味着在任何给定时间都有两个实例处于活动状态。在蓝/绿部署期间，将配置两个额外的实例。一旦这些额外的实例准备好满足请求，它们的健康状态将使用您预定义的健康指标来确定。
- en: If your new instances are found to be healthy, this means they’re in working
    order. There will be a period of time, say 5 minutes, during which connections
    in the original instance are drained and rerouted to the new instances. At this
    time, the original instances are deprovisioned.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 如果发现您的新实例是健康的，这意味着它们处于正常工作状态。将有一段时间，比如说5分钟，在这段时间内，原始实例中的连接会被耗尽并重新路由到新实例。在这段时间内，原始实例将被取消配置。
- en: If the new instances are found to be unhealthy, then these new instances will
    be deprovisioned, resulting in a failed deployment. However, a service will remain
    available without interruption because the original instance will remain intact
    and keep serving users during the entire process.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 如果发现新实例不健康，则这些新实例将被取消配置，导致部署失败。然而，服务将保持不间断的可用性，因为原始实例将保持完整，在整个过程中继续为用户提供服务。
- en: Revising estimates with metrics
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用指标修订估计
- en: Load testing and predicting user growth rates give you an idea of how your system
    may behave in production. Collecting more granular metrics and data is critical
    in revising your estimates and nailing down a more accurate IT budget.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 压力测试和预测用户增长率可以帮助您了解系统在生产环境中的行为。收集更细粒度的指标和数据对于修订您的估计并确定更准确的IT预算至关重要。
- en: Measuring actual use
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测量实际使用
- en: As we discussed earlier, keeping track of page views alone isn’t reflective
    of the number of requests that a user sends to the server. With Google Tag Manager
    and Google Analytics, you can keep track of more than just page views with ease.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前讨论的，仅跟踪页面浏览量并不能反映用户向服务器发送的请求数量。使用Google Tag Manager和Google Analytics，您可以轻松跟踪页面浏览量以外的更多内容。
- en: 'As of the time of publication, here are some of the default events you can
    configure across various categories. This list will grow over time:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 到出版时为止，以下是一些您可以在各个类别中配置的默认事件。随着时间的推移，此列表将不断增长：
- en: 'Page View: Used to track whether a user is sticking around as page resources
    load and the page is fully rendered:'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面浏览：用于跟踪用户在页面资源加载和页面完全渲染时是否停留：
- en: Page View; fired at the first opportunity
  id: totrans-200
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页面浏览；在首次机会触发
- en: DOM Ready; when the DOM structure is loaded
  id: totrans-201
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: DOM就绪；当DOM结构加载完成时
- en: Window Loaded; when all elements are finished loading
  id: totrans-202
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 窗口加载完成；当所有元素都加载完成时
- en: 'Click: Used to track a user’s click interactions with the page:'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击：用于跟踪用户与页面的点击交互：
- en: All Elements
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有元素
- en: Just Links
  id: totrans-205
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅链接
- en: 'User Engagement: Tracks user behavior:'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户参与度：跟踪用户行为：
- en: Element Visibility; whether elements have been shown
  id: totrans-207
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 元素可见性；元素是否已被显示
- en: Form Submission; whether a form was submitted
  id: totrans-208
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表单提交；是否提交了表单
- en: Scroll Depth; how far they scrolled down the page
  id: totrans-209
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 滚动深度；他们滚动了页面多远
- en: YouTube Video; if they played an embedded YouTube Video
  id: totrans-210
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: YouTube视频；如果他们播放了嵌入的YouTube视频
- en: 'Other event tracking:'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他事件跟踪：
- en: Custom Event; defined by a programmer to track a single or multistep event,
    such as a user going through the steps of a checkout process
  id: totrans-212
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自定义事件；由程序员定义以跟踪单个或多个步骤的事件，例如用户完成结账流程的步骤
- en: History Change; whether the user navigates back in the browser’s history
  id: totrans-213
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 历史更改；用户是否在浏览器的历史记录中导航回
- en: JavaScript Error; whether JavaScript errors have been generated
  id: totrans-214
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: JavaScript错误；是否生成了JavaScript错误
- en: Timer; to trigger or delay time-based analytics events
  id: totrans-215
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计时器；用于触发或延迟基于时间的分析事件
- en: Most of these events don’t require any extra coding to implement, so we will
    implement a custom event to demonstrate how you can capture any single event or
    series of events you want with custom coding. Capturing workflows with a series
    of events can reveal where you should be focusing your development efforts.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数这些事件不需要任何额外的编码来实现，因此我们将实现一个自定义事件来演示您如何通过自定义编码捕获任何单个事件或一系列事件。通过一系列事件捕获工作流程可以揭示您应该将开发精力集中在哪些方面。
- en: For more information on Google Tag Manager events, triggers, or tips and tricks,
    I recommend that you check out the blog by Simo Ahava at [https://www.simoahava.com/](https://www.simoahava.com/).
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 关于Google Tag Manager事件、触发器或技巧和窍门，我建议您查看Simo Ahava的博客[https://www.simoahava.com/](https://www.simoahava.com/)以获取更多信息。
- en: Creating a custom event
  id: totrans-218
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建自定义事件
- en: 'For this example, we will capture the event for when a customer is successfully
    checked out and a sale is completed. We will implement two events, one for checkout
    initiation, and the other for when the transaction has been completed successfully:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，我们将捕获客户成功结账并完成销售的事件。我们将实现两个事件，一个用于结账发起，另一个用于交易成功完成：
- en: Log on to your Google Tag Manager workspace at [https://tagmanager.google.com](https://tagmanager.google.com).
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录您的Google Tag Manager工区[https://tagmanager.google.com](https://tagmanager.google.com)。
- en: Under the **Triggers** menu, click on **NEW**, as indicated here:![](img/B14094_14_17.png)
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**触发器**菜单下，单击**新建**，如图所示：![](img/B14094_14_17.png)
- en: 'Figure 14.17: Tag Manager workspace'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.17：标签管理器工区
- en: Name your trigger.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为您的触发器命名。
- en: Click on the empty trigger card to select the event type.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击空触发器卡以选择事件类型。
- en: Select **Custom Event**.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**自定义事件**。
- en: Create a custom event named `checkoutCompleted`, as illustrated:![](img/B14094_14_18.png)
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`checkoutCompleted`的自定义事件，如图所示：![](img/B14094_14_18.png)
- en: 'Figure 14.18: Custom Checkout event'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.18：自定义结账事件
- en: 'By selecting the **Some Custom Events** option, you can limit or control the
    collection of a particular event, that is, only when on a particular page or a
    domain, such as on `lemonmart.com`. In the following screenshot, you can see a
    custom rule that would filter out any checkout event that didn’t happen on `lemonmart.com`
    to weed out development or test data:'
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通过选择**某些自定义事件**选项，您可以限制或控制特定事件的收集，即仅在特定页面或域名上，例如在`lemonmart.com`上。在以下截图中，您可以看到一个自定义规则，该规则会过滤掉在`lemonmart.com`上未发生的任何结账事件，以排除开发或测试数据：
- en: '![](img/B14094_14_19.png)'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B14094_14_19.png)'
- en: 'Figure 14.19: Some Custom Events'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.19：某些自定义事件
- en: '**Save** your new event.'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**保存**您的新事件。'
- en: Repeat the process for an event named `Checkout Initiated`.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为名为`Checkout Initiated`的事件重复此过程。
- en: Add two new Google Analytics event tags, as highlighted here:![](img/B14094_14_20.png)
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加两个新的Google Analytics事件标签，如下截图所示：![](img/B14094_14_20.png)
- en: 'Figure 14.20: New custom event tags'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.20：新的自定义事件标签
- en: Configure the event and attach the relevant trigger you created to it, as shown
    in the following screenshot:![](img/B14094_14_21.png)
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置事件并将其与您创建的相关触发器附加到它，如下截图所示：![](img/B14094_14_21.png)
- en: 'Figure 14.21: Trigger setup'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.21：触发器设置
- en: Submit and publish your workspace.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提交并发布您的工区。
- en: We are now ready to receive custom events in our analytics environment.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已准备好在我们的分析环境中接收自定义事件。
- en: Adding custom events in Angular
  id: totrans-239
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Angular中添加自定义事件
- en: 'Now, let’s edit the Angular code to trigger the events:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们编辑Angular代码以触发事件：
- en: 'Consider the POS template with a checkout button:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 考虑带有结账按钮的POS模板：
- en: '[PRE6]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The circular checkout button is indicated in the bottom-left corner of the
    following diagram:'
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下图中的圆形结账按钮位于左下角：
- en: '![](img/B14094_14_22.png)'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B14094_14_22.png)'
- en: 'Figure 14.22: POS page with checkout button'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图14.22：带有结账按钮的POS页面
- en: 'Optionally, you can add an `onclick` event handler directly in the template,
    such as `onclick=”dataLayer.push({‘event’: ‘checkoutInitiated’})”` on the checkout
    button. This pushes the `checkoutInitiated` event to the `dataLayer` object, made
    available by `gtm.js`.'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '可选地，您可以直接在模板中添加一个`onclick`事件处理器，例如在结账按钮上`onclick="dataLayer.push({''event'':
    ''checkoutInitiated''})"`。这会将`checkoutInitiated`事件推送到由`gtm.js`提供的`dataLayer`对象。'
- en: 'Define an `ITransaction` interface:'
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个`ITransaction`接口：
- en: '[PRE7]'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Define a `TransactionType` enum:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个`TransactionType`枚举：
- en: '[PRE8]'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Implement a `TransactionService` that has a `processTransaction` function:'
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实现一个具有`processTransaction`函数的`TransactionService`：
- en: '[PRE9]'
  id: totrans-252
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '`‘5a6352c6810c19729de860ea’` is a random string that represents a transaction
    ID.'
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`‘5a6352c6810c19729de860ea’`是一个表示交易ID的随机字符串。'
- en: 'In `PosComponent`, declare an interface for `dataLayer` events that you intend
    to push:'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在`PosComponent`中声明一个用于推送`dataLayer`事件的接口：
- en: '[PRE10]'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Import dependencies and initialize `currentTransaction`:'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 导入依赖项并初始化`currentTransaction`：
- en: '[PRE11]'
  id: totrans-257
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Create the `checkout` function to call `checkoutInitiated` before a service
    call is made.
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在发起服务调用之前创建`checkout`函数以调用`checkoutInitiated`。
- en: 'Simulate a fake transaction using `setTimeout` and call the `checkoutCompleted`
    event when the timeout ends:'
  id: totrans-259
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用`setTimeout`模拟假交易并在超时结束时调用`checkoutCompleted`事件：
- en: '[PRE12]'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: To prevent any data loss during your analytics collection, consider covering
    failure cases as well, such as adding multiple `checkoutFailed` events that cover
    various failure cases.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 为了防止在分析收集过程中丢失任何数据，请考虑覆盖失败情况，例如添加多个`checkoutFailed`事件，以涵盖各种失败情况。
- en: 'Now, we are ready to see the analytics in action:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经准备好看到分析的实际应用：
- en: Run your app.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 运行您的应用。
- en: On the POS page, click on the **Checkout** button.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 在 POS 页面上，点击**结账**按钮。
- en: In Google Analytics, observe the **REAL-TIME** | **Events** tab to see events
    as they occur.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Google Analytics 中，观察**实时** | **事件**标签以查看事件发生的情况。
- en: 'After 5-10 minutes, the events will also show up under the **BEHAVIOR** | **Events**
    tab, as shown:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 5-10分钟后，事件也会在**行为** | **事件**标签下显示，如下所示：
- en: '![](img/B14094_14_23.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14094_14_23.png)'
- en: 'Figure 14.23: Google Analytics Top Events'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.23：Google Analytics 顶级事件
- en: Using custom events, you can keep track of various nuanced user behaviors happening
    on your site. By collecting `checkoutInitiated` and `checkoutCompleted` events,
    you can calculate a conversion rate of how many initiated checkouts are taken
    to completion. In the case of a point-of-sale system, that rate should be very
    high; otherwise, it means you may have systematic issues in place.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 使用自定义事件，您可以跟踪您网站上发生的各种细微的用户行为。通过收集`checkoutInitiated`和`checkoutCompleted`事件，您可以计算有多少发起的结账被完成，从而计算转化率。在销售点系统中，这个比率应该非常高；否则，这可能意味着您可能存在系统性的问题。
- en: Advanced analytics events
  id: totrans-270
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高级分析事件
- en: It is possible to collect additional metadata along with each event, such as
    the payment amount or type, when checkout is initiated, or `transactionId` when
    checkout is completed.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 在结账开始时，可以收集与每个事件相关的附加元数据，例如支付金额或类型，或者当结账完成时的`transactionId`。
- en: 'To work with these more advanced features, I would recommend that you check
    out `angulartics2`, which can be found at [https://www.npmjs.com/package/angulartics2](https://www.npmjs.com/package/angulartics2).
    `angulartics2` is a vendor-agnostic analytics library for Angular that can enable
    unique and granular event tracking needs using popular vendors, such as Google
    Tag Manager, Google Analytics, Adobe, Facebook, Baidu and more, as highlighted
    on the tool’s home page, shown here:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用这些更高级的功能，我建议您查看`angulartics2`，它可以在[https://www.npmjs.com/package/angulartics2](https://www.npmjs.com/package/angulartics2)找到。`angulartics2`是一个对供应商无关的
    Angular 分析库，可以使用流行的供应商，如 Google Tag Manager、Google Analytics、Adobe、Facebook、百度等，如工具主页上所强调的，如下所示：
- en: '![](img/B14094_14_24.png)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14094_14_24.png)'
- en: 'Figure 14.24: Angulartics2'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.24：Angulartics2
- en: '`angulartics2` integrates with the Angular router and the UI router, with the
    ability to implement custom rules and exceptions on a route-per-route basis. The
    library makes it easy to implement custom events and enables metadata tracking
    with data binding.'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '`angulartics2`与 Angular 路由和 UI 路由集成，能够在每个路由的基础上实现自定义规则和异常。该库使得实现自定义事件和通过数据绑定进行元数据跟踪变得容易。'
- en: 'Check out the following example:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 查看以下示例：
- en: '[PRE13]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: We can keep track of a `click` event named `DownloadClick`, which would have
    a `category` and a `label` attached to it for rich event tracking within Google
    Analytics.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以跟踪一个名为`DownloadClick`的`click`事件，该事件将附加一个`category`和一个`label`，以便在 Google
    Analytics 中进行丰富的事件跟踪。
- en: With advanced analytics under your belt, you can use actual usage data to inform
    how you improve or host your app. This topic concludes a journey that started
    by creating pencil-drawn mockups at the beginning of this book, covering a wide
    variety of tools, techniques, and technologies that a full-stack web developer
    must be familiar with in today’s web in order to succeed. We dove deep into Angular,
    Angular Material, Docker, and automation in general to make you the most productive
    developer you can be, delivering the highest quality web app, while juggling a
    lot of complexity along the way. Good luck out there!
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 在掌握高级分析之后，您可以使用实际的使用数据来指导您如何改进或托管您的应用。这个主题结束了一个旅程，这个旅程始于本书开头创建铅笔草图，涵盖了全栈网络开发者必须熟悉的各种工具、技术和技术，以便在今天的网络中取得成功。我们深入研究了
    Angular、Angular Material、Docker 和自动化，以使您成为最富有生产力的开发者，交付最高质量的网络应用，同时在这个过程中处理大量的复杂性。祝您好运！
- en: Summary
  id: totrans-280
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you have rounded out your knowledge of developing web apps.
    You learned how to work with Google Tag Manager and Google Analytics to capture
    page views of your Angular application. Using high-level metrics, we went over
    how you can calculate the cost of your infrastructure per user. We then investigated
    the nuances of the effect that high availability and scaling can have on your
    budget. We covered the load testing of complex user workflows to estimate how
    many users any given server can host concurrently. Using this information, we
    calculated a target server utilization to fine-tune your scaling settings.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你完善了你对开发 Web 应用程序的知识。你学习了如何使用 Google Tag Manager 和 Google Analytics 来捕获你的
    Angular 应用程序的页面浏览量。使用高级指标，我们讨论了你可以如何计算每用户的 Infrastructure 成本。然后我们探讨了高可用性和扩展对预算的影响的细微差别。我们涵盖了复杂用户工作流程的负载测试，以估计任何给定服务器可以同时托管多少用户。使用这些信息，我们计算了目标服务器利用率以微调你的扩展设置。
- en: All of our pre-release calculations were mostly estimates and educated guesses.
    We went over the kinds of metrics and custom events you can use to measure the
    actual use of your application. When your application goes live and you start
    gathering these metrics, you can update your calculations to gain a better understanding
    of the viability and the affordability of your infrastructure.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的所有预发布计算基本上都是估计和有根据的猜测。我们讨论了你可以用来衡量你应用程序实际使用的各种指标和自定义事件。当你的应用程序上线并开始收集这些指标时，你可以更新你的计算以更好地理解你基础设施的可行性和成本效益。
- en: Congratulations! You have completed your journey. I hope you enjoyed it! Feel
    free to use this book as a reference, including the appendices.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！你已经完成了你的旅程。我希望你玩得开心！请随意使用这本书作为参考，包括附录。
- en: Follow me on Twitter `@duluca` and stay tuned to [https://expertlysimple.io](https://expertlysimple.io)
    for updates.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 关注我的 Twitter `@duluca` 并关注 [https://expertlysimple.io](https://expertlysimple.io)
    以获取更新。
- en: Further reading
  id: totrans-285
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Google Analytics and Google Tag Manager Blog, by Simo Ahava: [https://www.simoahava.com](https://www.simoahava.com).'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google Analytics 和 Google Tag Manager 博客，由 Simo Ahava 提供：[https://www.simoahava.com](https://www.simoahava.com)。
- en: Questions
  id: totrans-287
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: Answer the following questions as best as you can to ensure that you've understood
    the key concepts from this chapter without Googling. Do you need help answering
    the questions? See *Appendix D*, *Self-Assessment Answers* online at [https://static.packt-cdn.com/downloads/9781838648800_Appendix_D_Self-Assessment_Answers.pdf](https://static.packt-cdn.com/downloads/9781838648800_Appendix_D_Self-Assessment_Answers.pdf)
    or visit [https://expertlysimple.io/angular-self-assessment](https://expertlysimple.io/angular-self-assessment).
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 尽可能好地回答以下问题，以确保你已理解本章的关键概念，而无需使用 Google。你需要帮助回答这些问题吗？请参阅 *附录 D*，*自我评估答案*，在线位于
    [https://static.packt-cdn.com/downloads/9781838648800_Appendix_D_Self-Assessment_Answers.pdf](https://static.packt-cdn.com/downloads/9781838648800_Appendix_D_Self-Assessment_Answers.pdf)
    或访问 [https://expertlysimple.io/angular-self-assessment](https://expertlysimple.io/angular-self-assessment)。
- en: What are the benefits of load testing?
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 负载测试的好处是什么？
- en: What are some of the considerations as regards reliable cloud scaling?
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关于可靠的云扩展，有哪些考虑因素？
- en: What is the value of measuring user behavior?
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测量用户行为的价值是什么？
