# 前言

欢迎阅读《高效 Angular》：*通过使用 Nx、RxJS、NgRx 和 Cypress 有效地使用 Angular，开发任何规模的应用程序*。本书是掌握 Angular 和利用其强大生态系统构建可扩展和专业的 Web 应用程序的综合指南。无论你是经验丰富的 Angular 开发者还是刚开始你的旅程，这本书都将为你提供构建可扩展、企业级应用程序所需的知识和技能。

Angular 是由 Google 开发和维护的一个强大的前端框架。自其诞生以来，它已成为构建动态 Web 应用程序最受欢迎的框架之一。Angular 的基于组件的架构，结合其强大的 TypeScript 基础，为开发者提供了一个强大且可扩展的平台，用于构建现代应用程序。

在本书中，我们将深入研究 Angular 的复杂性，引导你了解其功能和最佳实践。本书不仅关于编写代码，还关于理解使 Angular 成为构建任何规模应用程序的多功能工具的底层原理。从使用 Nx 设置可扩展的环境到掌握 RxJS 和 NgRx 的响应式编程，每一章都旨在为你提供实用的见解和可以直接应用于你项目的真实世界示例。

你将学习如何使用 Nx 设计可扩展的前端架构并设置 Angular monorepos。深入探索 Angular 最强大的功能，包括依赖注入、路由、Signals、指令、管道、动画和独立组件。你将发现如何使用 NgRx 管理应用程序状态，并理解使用 RxJS 和 Angular Signals 的响应式编程，确保你的应用程序既高效又可扩展。

本书将引导你了解 Angular 生态系统的复杂性，使你能够轻松构建专业级的应用程序。

# 本书面向对象

本书专为希望提升 Angular 技能的前端工程师量身定制。无论你是经验丰富的开发者还是刚开始，本书都将引导你了解 Angular 生态系统的复杂性，使你能够轻松构建专业级的应用程序。你将学习如何利用 Angular 框架中的强大功能构建任何规模的应用程序。动手实例将教你关于最新 Angular 功能，如独立组件、Signals 和控制流。你将了解前端架构，使用 Nx 构建 Angular monorepo 应用程序，使用 RxJS 进行响应式编程，以及使用 NgRx 管理应用程序状态。到本书结束时，你将了解所有 Angular 功能，以便有效地使用它们。

# 本书涵盖内容

*第一章*，*适用于 Angular 应用的可扩展前端架构*，为您提供有关前端架构的知识，使您在设置工作空间和开发可扩展的前端系统时能做出正确的决策。在本章中，您还将创建自己的 Nx 单一仓库，轻松处理数百个 Angular 应用程序和库，无需费劲。

*第二章*，*强大的 Angular 功能*，让您了解最新的发展动态，并涵盖了 Angular 框架中最强大的功能。您将了解新的概念，如独立组件和信号。此外，本章将深入探讨 Angular 路由、组件通信和依赖注入。

*第三章*，*使用指令、管道和动画增强您的应用程序*，向您展示如何通过利用指令和管道来编写更可重用的代码。您将了解在开发自定义管道和指令或使用 Angular 框架的内置选项时，最佳实践、常见陷阱和设计选择。此外，本章还将教授您如何在 Angular 框架内创建和重用 UI 动画，以使您的网络应用程序更加生动。

*第四章*，*像专业人士一样构建表单*，提供了一步一步的指南，用于开发模板驱动、响应式和动态表单。您将了解如何为每种方法验证输入字段以及如何处理错误消息。到本章结束时，您将构建一个模板驱动表单，将其转换为响应式表单，并最终使用动态表单方法构建相同的表单。

*第五章*，*创建动态 Angular 组件*，专注于开发满足复杂设计需求的可重用组件。您将了解内容投影、投影槽、模板变量和引用、动态创建组件、懒加载非路由组件以及开发自己的小部件组件，这些组件可以根据用户输入按需加载和挂载组件。

*第六章*，*在 Angular 中应用代码约定和设计模式*，讨论了如何将结构和模式融入您的 Angular 应用程序。从代码约定和最佳实践到常用的设计模式，如外观模式、装饰者和工厂模式，本章将为您提供开发可扩展和健壮的 Angular 应用程序所需的知识和结构。我们将通过开发一个通用的类型安全 HTTP 服务来结束本章，该服务具有模型适配器，可自动将您的 DTO 转换为视图模型，反之亦然。

*第七章*，*精通 Angular 中的响应式编程*，强调响应式编程的优势，并展示您如何在 Angular 应用程序中使用 RxJS 和信号来实现它。您将学习如何使用 RxJS 处理异步数据流，以及使用信号处理同步数据。我们将探讨如何结合 RxJS 和信号，并区分在 Angular 应用程序中处理响应性时何时使用 RxJS 和何时使用信号。

*第八章*，*优雅地处理应用程序状态*，教您了解应用程序状态以及如何在 Angular 应用程序中优雅地处理它的所有必要知识。我们将创建一个门面服务来连接您的组件层与您的应用程序状态，并实现三种不同的方法来处理全局应用程序状态。我们将首先创建一个使用 RxJS 的自定义应用程序状态解决方案。然后，我们将将其转换为使用信号的自定义解决方案。最后，我们将探讨 RxJS 和信号在处理复杂应用程序的全局应用程序状态时的不足，并实现 NgRx 来减轻这些不足。

*第九章*，*提升 Angular 应用程序的性能和安全性*，通过详细解释 Angular 变更检测机制并展示影响应用程序性能的其他因素，帮助您开发出性能更优的 Angular 应用程序，并展示如何减少这些因素的影响。此外，本章还教您如何通过探索恶意行为者的可能攻击面以及如何减轻它们来开发安全的 Angular 应用程序。

*第十章*，*Angular 应用程序的国际化、本地化和无障碍性*，使您能够开发出对不同障碍、说不同语言或习惯不同格式的人群都无障碍的 Angular 应用程序。您将实现 Transloco 库用于 i18n 和 i10n，并了解 Web 无障碍指南。

*第十一章*，*测试 Angular 应用程序*，为您提供编写 Angular 应用程序自动化测试的实践经验。您将了解在前端应用程序中使用的不同类型的测试，以及如何使用 Jest 编写和运行单元测试，以及如何使用 Cypress 测试框架编写和运行端到端测试。

*第十二章**,* *部署 Angular 应用程序*，概述了在 Nx 单仓库中构建和部署 Angular 应用程序的步骤。您将学习如何分析您的包大小、运行 linting 和构建命令，以及如何在 Nx 单仓库中为一个或多个项目运行。

# 为了充分利用这本书

要充分利用本书，您应该有使用现代前端框架构建小型到中型前端应用的经验。您还应该至少了解 Angular 框架的基础知识。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Angular 17.1 | Windows、macOS 或 Linux |
| TypeScript 5.3.3 |  |
| Nx 18.0.3 |  |
| Cypress 13.0.0 |  |
| Jest 29.4.1 |  |

**如果您使用的是本书的数字版，我们建议您亲自输入代码或从本书的 GitHub 仓库（下一节中提供链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件 [`github.com/PacktPublishing/Effective-Angular`](https://github.com/PacktPublishing/Effective-Angular)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的书籍和视频目录的代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 获取。查看它们！

# 使用的约定

在本书中使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。以下是一个例子：“我将在 Nx monorepo 根目录下的 `jest.preset.js` 中仅添加以下配置。”

代码块应如下设置：

```js
const mockTranslationService = {
  translocoService: { translate: jest.fn() },
  translationsLoaded: signal(false) as WritableSignal<boolean>,
};
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
TestBed.overrideComponent(AppComponent, {
  add: {
    imports: [StubNavbarComponent],
  },
  remove: {
    imports: [NavbarComponent],
  },
});
```

任何命令行输入或输出都应如下编写：

```js
npx nx run <project-name>:test
```

**粗体**: 表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以粗体显示。以下是一个例子：“在浏览器中，你会看到**支出概览**，就像之前一样。”

小贴士或重要注意事项

看起来是这样的。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**: 如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及本书标题。

**勘误**: 尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将不胜感激，如果您能向我们报告此错误。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过电子邮件发送至 copyright@packt.com，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《Effective Angular》，我们很乐意听到您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1-805-12553-2)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法随身携带您的印刷书籍吗？

您的电子书购买是否与您选择的设备不兼容？

别担心，现在每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件

按照以下简单步骤获取好处：

1.  扫描二维码或访问以下链接

![](img/B21625_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-80512-553-2`](https://packt.link/free-ebook/978-1-80512-553-2)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件中

# 第一部分：Angular 基础知识及设置可扩展的 Nx 工作空间

在本部分中，您将了解前端架构以及创建工作空间时需要考虑的内容。此外，您将设置自己的 Nx 单仓库，该仓库可以处理数百个 Angular 应用程序和库。在创建您的 Nx 单仓库后，您将了解 Angular 框架中的最新功能，例如信号和独立组件。当您完全了解 Angular 框架的最新发展时，您将深入了解 Angular 路由、组件通信和依赖注入。然后，您将获得 Angular 指令、管道和动画的实际操作经验，并了解最佳实践、它们对性能的影响以及使用指令、管道或动画时的常见陷阱。您将通过创建模板驱动、响应式和动态表单来完成第一部分，了解您使用每种方法时的差异以及如何充分验证它们。

本部分包括以下章节：

+   *第一章*，*为 Angular 应用程序构建可扩展的前端架构*

+   *第二章*，*强大的 Angular 功能*

+   *第三章*，*使用指令、管道和动画增强您的应用程序*

+   *第四章*，*像专业人士一样构建表单*
