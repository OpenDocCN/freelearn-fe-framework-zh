# 前言

欢迎来到《使用 Remix 的全栈网络开发》。我们正处于网络开发的激动人心时期。现代网络应用程序复杂，它们运行在复杂的业务逻辑上。作为网络开发者，我们的任务是提供出色的用户体验，使用最新的网络开发进步，并应对当今业务需求复杂性。

React 是构建现代网络应用程序的事实标准，但它明确界定了其职责的结束。它允许你从可重用组件中组合你的 UI，但 React 并不涵盖你应用程序的其他关键元素。这就是 React 需要全栈网络框架来补充的地方。今天的网络框架提供了路由、数据获取和变更、缓存、会话管理、渐进增强、乐观 UI 以及许多其他对于构建最先进网络体验至关重要的抽象。这正是 Remix 发挥作用的地方。

Remix 是一个面向 React 应用程序的全栈网络框架。它是基于不同的部署目标构建的，并利用网络标准来解锁网络平台的全部潜力。Remix 提供了优秀的原语、约定和杠杆，使我们能够更快地构建现代应用程序和出色的用户体验。最重要的是，Remix 基于一个简单的思维模型，通过利用渐进增强的哲学，以降低复杂性来构建复杂用户界面。构建挂起、乐观和实时用户界面从未如此简单。就我个人而言，我从未在构建网络时感到如此高效，也从未如此享受过这个过程！

本书遵循一个真实世界项目，该项目超越了 Remix 文档、教程和工作坊所能提供的内容。在本书结束时，你将能够应用并阐述许多最佳实践，以便与 Remix 一起工作。你将进一步使用网络标准，并学习如何通过 Remix 解锁网络平台的全部潜力。最后，你将了解在应用程序架构中利用网络服务器环境的优势。让我们深入探讨《使用 Remix 的全栈网络开发》并了解 Remix 如何使我们更快地构建更好的用户体验。

# 本书面向的对象

本书是为希望使用全栈框架来解锁网络平台全部潜力的 React 开发者而写的。本书也将有助于评估和证明迁移到 Remix 的合理性。

如果你符合以下条件，本书适合你：

+   一位希望利用网络标准来构建快速、流畅和弹性用户体验的网页开发者。

+   一位对全栈网络开发以及将网络服务器环境添加到前端的好处感到好奇的 React 开发者。

+   一位正在评估从单页应用程序迁移到 Remix 的技术负责人，希望了解更多关于当今全栈网络框架的信息。

# 本书涵盖的内容

*第一章*, *全栈 Web 框架时代*，介绍了 Remix 作为全栈 Web 框架，并强调了 Remix 为 React 开发者提供的优势。本章进一步讨论了 Remix 的哲学，并建立了原语、约定和杠杆的心理模型。最后，本章解释了 Remix 在底层是如何工作的。

*第二章*, *创建新的 Remix 应用*，开始了你的 Remix 开发之旅。本章指导你使用 Remix 的`create-remix` CLI 脚本来创建新的 Remix 应用程序。本章还提供了 Remix 的文件和文件夹结构的概述以及 Remix 的两个环境——客户端和服务器。最后，本章为 Remix 项目提供了故障排除指南。

*第三章*, *部署目标、适配器和堆栈*，概述了 Remix 的不同部署目标，并讨论了选择适合你应用程序的正确目标时的考虑因素。本章进一步详细说明了如何在适配器之间切换，以及如何使用 Remix 堆栈来使用现有的应用程序模板。最后，本章介绍了本书的演示应用程序 BeeRich。

*第四章*, *Remix 中的路由*，回顾了基于文件的 Remix 路由约定。本章指导你创建独立页面、嵌套路由、参数化路由、无路径布局路由以及其他路由概念。本章还讨论了 Remix 中的页面导航。

*第五章*, *获取和变异数据*，深入探讨了 Remix 中的数据获取和变异。本章记录了 Remix 的请求-响应生命周期，并提供了与 Remix 的客户端侧`loader`和`action`函数一起工作的详细实践。本章还解释了 Remix 内置的数据验证。

*第六章*, *提升用户体验*，正式介绍了在 Remix 中渐进增强的工作方式。本章随后重点介绍了高级数据获取和变异概念，例如预加载和处理并发变异。

*第七章*, *Remix 中的错误处理*，概述了在 Remix 中处理预期和意外错误以开发弹性用户体验的方法。

*第八章*, *会话管理*，指导你在 BeeRich 中实现搜索功能和登录/注册流程。本章提供了使用 Web 标准和 Remix 原语管理 UI 和会话状态的实用深入探讨。

*第九章*, *资源和元数据处理*，专注于 Remix 中的元标签和静态资源。本章包括暴露静态资源和与自定义字体一起工作的实践。最后，本章讨论了如何使用 Remix 管理图像。

*第十章*，*处理文件上传*，向您介绍了 Remix 的文件上传辅助工具。本章指导您在 BeeRich 中实现上传用户文件，并强调仅限授权用户访问上传的文件。

*第十一章*，*乐观 UI*，讨论了乐观 UI 的权衡。本章进一步指导您在 BeeRich 中使用 Remix 的原语来处理乐观 UI。最后，本章强调了 Remix 通过其原语和内置数据重新验证简化乐观 UI 实现的方式。

*第十二章*，*缓存策略*，概述了不同的缓存策略以改善 Remix 应用的性能。首先，本章回顾了不同的 HTTP 缓存策略，然后讨论内存缓存。本章提供了使用 BeeRich 演示应用程序的实用示例。

*第十三章*，*延迟加载器数据*，向您介绍了 Remix 的延迟加载器数据概念。本章进一步解释了 HTML 流，并说明了其使用和用例，以使用流来延迟数据请求。

*第十四章*，*使用 Remix 实现实时性*，考察了流行的实时技术，并允许您使用 Remix 资源路由和服务器端事件在 BeeRich 中实现实时数据更新。

*第十五章*，*高级会话管理*，探讨了额外的会话和 UI 状态管理用例。本章提供了 Remix 的 cookie 辅助原语与它的会话辅助原语的概览。本章进一步指导您在 BeeRich 中实现分页。

*第十六章*，*边缘开发*，详细定义了“边缘”这一术语，并考虑了将 Remix 应用程序部署到边缘环境的优势和劣势。

*第十七章*，*迁移和升级策略*，总结了本书的学习之旅，并概述了不同的迁移到 Remix 的策略。本章还解释了 Remix 的未来标志以及如何使用它们来简化主要版本升级。

# 为了充分利用本书

本书将引导您使用 Remix 开发全栈 Web 应用程序。每一章都介绍新的概念，并包含实际示例以获得实践经验。如果您有一些使用 React 或类似的前端框架或库构建 Web 应用的经验，您将能从本书中获得最大收益。由于本书的演示应用程序是用 TypeScript 编写的，因此对 TypeScript 的先前了解也将有助于您跟随代码示例。

要跟随本书中的动手练习，您需要一个已安装 Node.js 和 npm 的计算机。我们建议使用 Node.js 的最新 LTS 版本（目前为 v18）。您可以从这里下载 Node.js 和 npm：[`nodejs.org/en`](https://nodejs.org/en)。VS Code 等编辑器也被推荐使用。

每一章都附有一份或多份`README.md`文件，位于书的 GitHub 仓库中。如果需要，`README.md`文件包含每个章节的额外指导和设置说明。

**如果您正在使用这本书的数字版，我们建议您亲自输入代码或从书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误**。

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件：[`github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix`](https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

**文本中的代码**：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“`routes`文件夹的根目录映射到`/`路径。”

代码块按以下方式设置：

```js
import { H1 } from '~/components/headings';export default function LoginPage() {
  return (
    <main>
      <H1>Login!</H1>
    </main>
  );
}
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
<Routes>  <Route file="root.tsx">
    <Route index file="routes/index.tsx" />
    <Route path="demo" file="routes/demo.tsx" />
  </Route>
</Routes>
```

任何命令行输入或输出都按以下方式编写：

```js
npx remix routes
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“请注意，有一条路径被标记为**索引**，而演示路径有一个**路径**属性，这与它的文件名相匹配。”

提示或重要注意事项

看起来像这样。

# 联系我们

欢迎读者反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误表**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您能向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过 mailto:copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《使用 Remix 进行全栈 Web 开发》，我们非常乐意听到您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1-801-07529-8)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走？您的电子书购买是否与您选择的设备不兼容？

不要担心，现在，每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和丰富的免费内容，每天直接发送到您的邮箱。

按照以下简单步骤获取好处：

1.  扫描下面的二维码或访问以下链接

![](img/B17399_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781801075299`](https://dev.packt.link/free-ebook/9781801071109)

1.  提交您的购买证明

1.  就这些！我们将直接将免费 PDF 和其他好处发送到您的邮箱。

# 第一部分 – Remix 入门

在本第一部分，您将了解 Remix。您将了解 Remix 的哲学，并理解 Remix 是如何在底层工作的。然后，您将创建您的第一个 Remix 应用程序，并了解 Remix 可以部署到不同的环境和运行时。最后，您将使用本书的示例应用程序 BeeRich 开始您的开发之旅，并了解 Remix 的路由约定。

本部分包含以下章节：

+   *第一章*，*全栈 Web 框架时代*

+   *第二章*，*创建新的 Remix 应用程序*

+   *第三章*，*部署目标、适配器和堆栈*

+   *第四章*，*Remix 中的路由*
