<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer238">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     9
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-161">
    <span class="koboSpan" id="kobo.2.1">
     Navigating through Applications with Routing
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     In previous chapters, we did a great job of separating concerns and adding different layers of abstraction to increase the maintainability of an Angular application.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     However, we have barely focused on the application’s UX.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.4.1">
     Our user interface is bloated, with components scattered across a single screen.
    </span>
    <span class="koboSpan" id="kobo.4.2">
     We must provide a better navigational experience for users and a logical way to change the application’s view intuitively.
    </span>
    <span class="koboSpan" id="kobo.4.3">
     Now is the right time to incorporate routing and split the different areas of interest into pages, connected by a grid of links and URLs.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.5.1">
     So, how do we deploy a navigation scheme between components of an Angular application?
    </span>
    <span class="koboSpan" id="kobo.5.2">
     We use the Angular router and create custom links for our components to react to.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.6.1">
     This chapter contains the following sections:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.7.1">
      Introducing the Angular router
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.8.1">
      Configuring the main routes
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.9.1">
      Organizing application routes
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.10.1">
      Passing parameters to routes
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.11.1">
      Enhancing navigation with advanced features
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-162">
    <span class="koboSpan" id="kobo.12.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.13.1">
     The chapter contains various code samples to walk you through routing in the Angular framework.
    </span>
    <span class="koboSpan" id="kobo.13.2">
     You can find the related source code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.14.1">
      ch09
     </span>
    </code>
    <span class="koboSpan" id="kobo.15.1">
     folder of the following GitHub repository:
    </span>
   </p>
   <p class="normal">
    <a href="https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition ">
     <span class="url">
      <span class="koboSpan" id="kobo.16.1">
       https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition
      </span>
     </span>
    </a>
   </p>
   <h1 class="heading-1" id="_idParaDest-163">
    <span class="koboSpan" id="kobo.17.1">
     Introducing the Angular router
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     In traditional web
    </span>
    <a id="_idIndexMarker508">
    </a>
    <span class="koboSpan" id="kobo.19.1">
     applications, when we wanted to change from one view to another, we needed to request a new page from the server.
    </span>
    <span class="koboSpan" id="kobo.19.2">
     The browser would create a URL for the view and send it to the server.
    </span>
    <span class="koboSpan" id="kobo.19.3">
     The browser would then reload the page as soon as the client received a response.
    </span>
    <span class="koboSpan" id="kobo.19.4">
     It was a process that resulted in round trip time delays and a bad user experience for our applications:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.20.1">
     <img alt="Εικόνα που περιέχει κείμενο, γραμμή, στιγμιότυπο οθόνης, αριθμός  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.21.1">
     Figure 9.1: Routing in traditional web applications
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     Modern web
    </span>
    <a id="_idIndexMarker509">
    </a>
    <span class="koboSpan" id="kobo.23.1">
     applications using JavaScript frameworks such as Angular follow a different approach.
    </span>
    <span class="koboSpan" id="kobo.23.2">
     They handle changes between views or components on the client side without bothering the server.
    </span>
    <span class="koboSpan" id="kobo.23.3">
     They contact the server once during bootstrapping to get the main HTML file.
    </span>
    <span class="koboSpan" id="kobo.23.4">
     The router on the client intercepts and handles any subsequent
    </span>
    <a id="_idIndexMarker510">
    </a>
    <span class="koboSpan" id="kobo.24.1">
     URL changes.
    </span>
    <span class="koboSpan" id="kobo.24.2">
     These applications are called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.25.1">
      Single-Page Applications (SPAs)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.26.1">
     because
    </span>
    <a id="_idIndexMarker511">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     they do not cause a full reload of a page:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.28.1">
     <img alt="Εικόνα που περιέχει κείμενο, παράλληλα, διάγραμμα, γραμμή  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.29.1">
     Figure 9.2: SPA architecture
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.30.1">
     The Angular framework provides the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.31.1">
      @angular/router
     </span>
    </code>
    <span class="koboSpan" id="kobo.32.1">
     npm package, which we can use to navigate between different components in an Angular application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.33.1">
     Adding routing in an Angular application involves the following steps:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.34.1">
      Specifying the base path for the Angular application
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.35.1">
      Using an appropriate directive or service from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.36.1">
       @angular/router
      </span>
     </code>
     <span class="koboSpan" id="kobo.37.1">
      npm package
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.38.1">
      Configuring different routes for the Angular application
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.39.1">
      Deciding where to render components upon navigation
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.40.1">
     In the following sections, we will learn the basics of Angular routing before diving deeper into
    </span>
    <a id="_idIndexMarker512">
    </a>
    <span class="koboSpan" id="kobo.41.1">
     hands-on examples.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-164">
    <span class="koboSpan" id="kobo.42.1">
     Specifying a base path
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.43.1">
     As we have already
    </span>
    <a id="_idIndexMarker513">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     seen, modern and traditional web applications react differently when a URL changes inside the application.
    </span>
    <span class="koboSpan" id="kobo.44.2">
     The architecture of each browser plays an essential part in this behavior.
    </span>
    <span class="koboSpan" id="kobo.44.3">
     Older browsers initiate a new request to the server when the URL changes.
    </span>
    <span class="koboSpan" id="kobo.44.4">
     Modern browsers, also known
    </span>
    <a id="_idIndexMarker514">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.46.1">
      evergreen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.47.1">
     browsers, can change the URL and the browser history when navigating in different views without sending a request to the server, using a technique
    </span>
    <a id="_idIndexMarker515">
    </a>
    <span class="koboSpan" id="kobo.48.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.49.1">
      pushState
     </span>
    </strong>
    <span class="koboSpan" id="kobo.50.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.51.1">
      HTML5 pushState allows in-app navigation without causing a full reload of a page and is supported by all modern browsers.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.52.1">
     An Angular application must set the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.53.1">
      &lt;base&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.54.1">
     HTML tag in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.55.1">
      index.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.56.1">
     file to enable pushState routing:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.57.1">&lt;!doctype </span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.58.1">html</span></span><span class="hljs-meta"><span class="koboSpan" id="kobo.59.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.60.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.61.1">html</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.62.1">lang</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.63.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.64.1">"en"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.65.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.66.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.67.1">head</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.68.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.69.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.70.1">meta</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.71.1">charset</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.72.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.73.1">"utf-8"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.74.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.75.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.76.1">title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.77.1">&gt;</span></span><span class="koboSpan" id="kobo.78.1">MyApp</span><span class="hljs-tag"><span class="koboSpan" id="kobo.79.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.80.1">title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.81.1">&gt;</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.82.1">&lt;base href="/"&gt;</span></strong></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.83.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.84.1">meta</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.85.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.86.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.87.1">"viewport"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.88.1">content</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.89.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.90.1">"width=device-width, initial-scale=1"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.91.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.92.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.93.1">link</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.94.1">rel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.95.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.96.1">"icon"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.97.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.98.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.99.1">"image/x-icon"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.100.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.101.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.102.1">"favicon.ico"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.103.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.104.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.105.1">head</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.106.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.107.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.108.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.109.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.110.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.111.1">app-root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.112.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.113.1">app-root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.114.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.115.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.116.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.117.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.118.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.119.1">html</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.120.1">&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.121.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.122.1">
      href
     </span>
    </code>
    <span class="koboSpan" id="kobo.123.1">
     attribute informs the browser of the path it should follow when loading application resources.
    </span>
    <span class="koboSpan" id="kobo.123.2">
     The Angular CLI automatically adds the tag when creating a new application and sets the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.124.1">
      href
     </span>
    </code>
    <span class="koboSpan" id="kobo.125.1">
     value to the application root,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.126.1">
      /
     </span>
    </code>
    <span class="koboSpan" id="kobo.127.1">
     .
    </span>
    <span class="koboSpan" id="kobo.127.2">
     If your application resides in a different folder from the root, you should name it after that folder.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-165">
    <span class="koboSpan" id="kobo.128.1">
     Enabling routing in Angular applications
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.129.1">
     The Angular router
    </span>
    <a id="_idIndexMarker516">
    </a>
    <span class="koboSpan" id="kobo.130.1">
     is enabled by default in new Angular applications, as indicated by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.131.1">
      provideRouter
     </span>
    </code>
    <span class="koboSpan" id="kobo.132.1">
     method in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.133.1">
      app.config.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.134.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.135.1">import</span></span><span class="koboSpan" id="kobo.136.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.137.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.138.1">, provideZoneChangeDetection } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.139.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.140.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.141.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.142.1">import { provideRouter } from '@angular/router';</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.143.1">import { routes } from './app.routes';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.144.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.145.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.146.1">appConfig</span></span><span class="koboSpan" id="kobo.147.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.148.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.149.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.150.1">providers</span></span><span class="koboSpan" id="kobo.151.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.152.1">provideZoneChangeDetection</span></span><span class="koboSpan" id="kobo.153.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.154.1">eventCoalescing</span></span><span class="koboSpan" id="kobo.155.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.156.1">true</span></span><span class="koboSpan" id="kobo.157.1"> }),
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.158.1">provideRouter(routes)</span></strong></span><span class="koboSpan" id="kobo.159.1">
  ]
};
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.160.1">
      In applications built with older versions of the Angular framework, the router is enabled by importing the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.161.1">
       RouterModule
      </span>
     </code>
     <span class="koboSpan" id="kobo.162.1">
      class in the main application module and using its
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.163.1">
       forRoot
      </span>
     </code>
     <span class="koboSpan" id="kobo.164.1">
      method to define the routing configuration.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.165.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.166.1">
      provideRouter
     </span>
    </code>
    <span class="koboSpan" id="kobo.167.1">
     method enables us to use a set of Angular artifacts related to routing:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.168.1">
      Services to perform common routing tasks such as navigation
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.169.1">
      Directives that we can use in our components to enrich them with navigation logic
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.170.1">
     It accepts a single parameter, which is the routing configuration of the application, and is defined by default in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.171.1">
      app.routes.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.172.1">
     file.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-166">
    <span class="koboSpan" id="kobo.173.1">
     Configuring the router
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.174.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.175.1">
      app.routes.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.176.1">
     file
    </span>
    <a id="_idIndexMarker517">
    </a>
    <span class="koboSpan" id="kobo.177.1">
     contains a list of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.178.1">
      Routes
     </span>
    </code>
    <span class="koboSpan" id="kobo.179.1">
     objects that specify which routes exist in the application and which components should respond to a specific route.
    </span>
    <span class="koboSpan" id="kobo.179.2">
     It looks like the following:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.180.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.181.1">routes</span></span><span class="koboSpan" id="kobo.182.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.183.1">Routes</span></span><span class="koboSpan" id="kobo.184.1"> = [ 
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.185.1">path</span></span><span class="koboSpan" id="kobo.186.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.187.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.188.1">products'</span></span><span class="koboSpan" id="kobo.189.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.190.1">component</span></span><span class="koboSpan" id="kobo.191.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.192.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.193.1"> }, 
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.194.1">path</span></span><span class="koboSpan" id="kobo.195.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.196.1">'**'</span></span><span class="koboSpan" id="kobo.197.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.198.1">component</span></span><span class="koboSpan" id="kobo.199.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.200.1">PageNotFoundComponent</span></span><span class="koboSpan" id="kobo.201.1"> } 
];
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.202.1">
      In applications built with older versions of the Angular framework, you may notice that the route configuration is defined in a dedicated
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.203.1">
       app-routing.module.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.204.1">
      file.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.205.1">
     Each route definition object contains a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.206.1">
      path
     </span>
    </code>
    <span class="koboSpan" id="kobo.207.1">
     property, which is the URL path of the route, and a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.208.1">
      component
     </span>
    </code>
    <span class="koboSpan" id="kobo.209.1">
     property that defines which component will be loaded when the application navigates to that path.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.210.1">
      The value of a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.211.1">
       path
      </span>
     </code>
     <span class="koboSpan" id="kobo.212.1">
      property should not contain a leading
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.213.1">
       /
      </span>
     </code>
     <span class="koboSpan" id="kobo.214.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.215.1">
     Navigation in an Angular application can occur manually by changing the browser URL or navigating using in-app links.
    </span>
    <span class="koboSpan" id="kobo.215.2">
     The browser will cause the application to reload in the first scenario, while the second will instruct the router to navigate at runtime.
    </span>
    <span class="koboSpan" id="kobo.215.3">
     In our case, when the browser URL contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.216.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.217.1">
     path, the router renders the product list component on the page.
    </span>
    <span class="koboSpan" id="kobo.217.2">
     On the contrary, when the application navigates to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.218.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.219.1">
     by code, the router follows the same procedure and updates the browser URL.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.220.1">
     If the user tries to navigate to a URL that does not match any route, Angular activates a custom type of route
    </span>
    <a id="_idIndexMarker518">
    </a>
    <span class="koboSpan" id="kobo.221.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.222.1">
      wildcard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.223.1">
     or
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.224.1">
      fallback
     </span>
    </strong>
    <span class="koboSpan" id="kobo.225.1">
     .
    </span>
    <span class="koboSpan" id="kobo.225.2">
     The wildcard
    </span>
    <a id="_idIndexMarker519">
    </a>
    <span class="koboSpan" id="kobo.226.1">
     route
    </span>
    <a id="_idIndexMarker520">
    </a>
    <span class="koboSpan" id="kobo.227.1">
     has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.228.1">
      path
     </span>
    </code>
    <span class="koboSpan" id="kobo.229.1">
     property with two asterisks and matches any URL.
    </span>
    <span class="koboSpan" id="kobo.229.2">
     The component property for this is usually an application-specific
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.230.1">
      PageNotFoundComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.231.1">
     or the main component of the application.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-167">
    <span class="koboSpan" id="kobo.232.1">
     Rendering components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.233.1">
     The template of the
    </span>
    <a id="_idIndexMarker521">
    </a>
    <span class="koboSpan" id="kobo.234.1">
     main application component contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.235.1">
      &lt;router-outlet&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.236.1">
     element, which is one of the main directives of the Angular router.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     It resides inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.237.1">
      app.component.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.238.1">
     file and is used as a placeholder for components activated with routing.
    </span>
    <span class="koboSpan" id="kobo.238.2">
     These components are rendered as a sibling element of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.239.1">
      &lt;router-outlet&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.240.1">
     element.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.241.1">
     We have covered the basics and provided a minimal router setup.
    </span>
    <span class="koboSpan" id="kobo.241.2">
     In the next section, we will look at a more realistic example and expand our knowledge of routing.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-168">
    <span class="koboSpan" id="kobo.242.1">
     Configuring the main routes
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.243.1">
     When we start
    </span>
    <a id="_idIndexMarker522">
    </a>
    <span class="koboSpan" id="kobo.244.1">
     designing the architecture of
    </span>
    <a id="_idIndexMarker523">
    </a>
    <span class="koboSpan" id="kobo.245.1">
     an Angular application with routing, it is easiest to think about its main features, such as menu links that users can click to access.
    </span>
    <span class="koboSpan" id="kobo.245.2">
     Products and shopping carts are basic features of the e-shop application we are currently building.
    </span>
    <span class="koboSpan" id="kobo.245.3">
     Adding links and configuring them to activate certain features of an Angular application is part of the route configuration of the application.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.246.1">
      You will need the source code of the Angular application we created in
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.247.1">
       Chapter 8
      </span>
     </em>
     <span class="koboSpan" id="kobo.248.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.249.1">
       Communicating with Data Services over HTTP
      </span>
     </em>
     <span class="koboSpan" id="kobo.250.1">
      , to follow along with the rest of the chapter.
     </span>
     <span class="koboSpan" id="kobo.250.2">
      After you get the code, we suggest you take the following actions for simplicity:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.251.1">
       Remove the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.252.1">
        auth.interceptor.ts
       </span>
      </code>
      <span class="koboSpan" id="kobo.253.1">
       and its unit test file.
      </span>
      <span class="koboSpan" id="kobo.253.2">
       Actual calls in the Fake Store API do not need authentication.
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.254.1">
       Modify the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.255.1">
        app.config.ts
       </span>
      </code>
      <span class="koboSpan" id="kobo.256.1">
       file so that the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.257.1">
        provideHttpClient
       </span>
      </code>
      <span class="koboSpan" id="kobo.258.1">
       method does not use the interceptor.
      </span>
     </li>
    </ul>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.259.1">
     To set up the route configuration of our application, we need to follow the steps below:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.260.1">
      Run the following command to create a new Angular component for the shopping cart:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.261.1">ng generate component cart
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.262.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.263.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.264.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.265.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.266.1">
      statements:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.267.1">import</span></span><span class="koboSpan" id="kobo.268.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.269.1">CartComponent</span></span><span class="koboSpan" id="kobo.270.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.271.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.272.1">'./cart/cart.component'</span></span><span class="koboSpan" id="kobo.273.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.274.1">import</span></span><span class="koboSpan" id="kobo.275.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.276.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.277.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.278.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.279.1">'./product-list/product-list.component'</span></span><span class="koboSpan" id="kobo.280.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.281.1">
      Add two route definition objects in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.282.1">
       routes
      </span>
     </code>
     <span class="koboSpan" id="kobo.283.1">
      variable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.284.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.285.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.286.1">routes</span></span><span class="koboSpan" id="kobo.287.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.288.1">Routes</span></span><span class="koboSpan" id="kobo.289.1"> = [
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.290.1">{ path: 'products', component: ProductListComponent },</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.291.1">{ path: 'cart', component: CartComponent }</span></strong></span><span class="koboSpan" id="kobo.292.1">
];
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.293.1">
     In the preceding snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.294.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.295.1">
     route will activate the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.296.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.297.1">
     , and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.298.1">
      cart
     </span>
    </code>
    <span class="koboSpan" id="kobo.299.1">
     route will activate the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.300.1">
      CartComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.301.1">
     .
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.302.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.303.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.304.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.305.1">
       &lt;header&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.306.1">
      HTML element as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.307.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.308.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.309.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.310.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.311.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.312.1">&gt;</span></span><span class="koboSpan" id="kobo.313.1">{{ settings.title }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.314.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.315.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.316.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.317.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.318.1">span</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.319.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.320.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.321.1">"spacer"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.322.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.323.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.324.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.325.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.326.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.327.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.328.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.329.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.330.1">menu-links"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.331.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.332.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.333.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.334.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.335.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.336.1">"/products"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.337.1">&gt;</span></span><span class="koboSpan" id="kobo.338.1">Products</span><span class="hljs-tag"><span class="koboSpan" id="kobo.339.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.340.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.341.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.342.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.343.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.344.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.345.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.346.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.347.1">/cart"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.348.1">&gt;</span></span><span class="koboSpan" id="kobo.349.1">My Cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.350.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.351.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.352.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.353.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.354.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.355.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.356.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.357.1">app-auth</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.358.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.359.1">app-auth</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.360.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.361.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.362.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.363.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.364.1">
     In the preceding template, we apply the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.365.1">
      routerLink
     </span>
    </code>
    <span class="koboSpan" id="kobo.366.1">
     directive to anchor HTML elements and assign the route path we want to navigate.
    </span>
    <span class="koboSpan" id="kobo.366.2">
     Notice that the path should start with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.367.1">
      /
     </span>
    </code>
    <span class="koboSpan" id="kobo.368.1">
     as opposed to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.369.1">
      path
     </span>
    </code>
    <span class="koboSpan" id="kobo.370.1">
     property in the route definition object.
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.371.1">
     How the path starts depends on whether we want to use absolute or relative routing in
    </span>
    <a id="_idIndexMarker524">
    </a>
    <span class="koboSpan" id="kobo.372.1">
     our application, as we
    </span>
    <a id="_idIndexMarker525">
    </a>
    <span class="koboSpan" id="kobo.373.1">
     will learn later in the chapter.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.374.1">
      Move the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.375.1">
       &lt;router-outlet&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.376.1">
      HTML element inside the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.377.1">
       &lt;div&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.378.1">
      element with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.379.1">
       content
      </span>
     </code>
     <span class="koboSpan" id="kobo.380.1">
      class selector and remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.381.1">
       &lt;app-product-list&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.382.1">
      component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.383.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.384.1">main</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.385.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.386.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.387.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.388.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.389.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.390.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.391.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.392.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.393.1">"content"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.394.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.395.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.396.1">router-outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.397.1"> /&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.398.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.399.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.400.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.401.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.402.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.403.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.404.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.405.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.406.1">
      file, remove any references to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.407.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.408.1">
      class, and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.409.1">
       RouterLink
      </span>
     </code>
     <span class="koboSpan" id="kobo.410.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.411.1">import</span></span><span class="koboSpan" id="kobo.412.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.413.1">Component</span></span><span class="koboSpan" id="kobo.414.1">, inject } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.415.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.416.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.417.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.418.1">import</span></span><span class="koboSpan" id="kobo.419.1"> { </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.420.1">RouterLink</span></strong></span><span class="koboSpan" id="kobo.421.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.422.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.423.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.424.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.425.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.426.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.427.1">import</span></span><span class="koboSpan" id="kobo.428.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.429.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.430.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.431.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.432.1">'./copyright.directive'</span></span><span class="koboSpan" id="kobo.433.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.434.1">import</span></span><span class="koboSpan" id="kobo.435.1"> { </span><span class="hljs-variable"><span class="koboSpan" id="kobo.436.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.437.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.438.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.439.1">'./app.settings'</span></span><span class="koboSpan" id="kobo.440.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.441.1">import</span></span><span class="koboSpan" id="kobo.442.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.443.1">AuthComponent</span></span><span class="koboSpan" id="kobo.444.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.445.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.446.1">'./auth/auth.component'</span></span><span class="koboSpan" id="kobo.447.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.448.1">@Component</span></span><span class="koboSpan" id="kobo.449.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.450.1">selector</span></span><span class="koboSpan" id="kobo.451.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.452.1">'app-root'</span></span><span class="koboSpan" id="kobo.453.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.454.1">imports</span></span><span class="koboSpan" id="kobo.455.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.456.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.457.1">,
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.458.1">RouterLink</span></strong></span><span class="koboSpan" id="kobo.459.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.460.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.461.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.462.1">AuthComponent</span></span><span class="koboSpan" id="kobo.463.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.464.1">templateUrl</span></span><span class="koboSpan" id="kobo.465.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.466.1">'./app.component.html'</span></span><span class="koboSpan" id="kobo.467.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.468.1">styleUrl</span></span><span class="koboSpan" id="kobo.469.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.470.1">'./app.component.css'</span></span><span class="koboSpan" id="kobo.471.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.472.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.473.1">
       app.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.474.1">
      file and replace every CSS style related to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.475.1">
       .social-links
      </span>
     </code>
     <span class="koboSpan" id="kobo.476.1">
      selector
     </span>
     <a id="_idIndexMarker526">
     </a>
     <span class="koboSpan" id="kobo.477.1">
      with the following
     </span>
     <a id="_idIndexMarker527">
     </a>
     <span class="koboSpan" id="kobo.478.1">
      styles:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.479.1">header</span></span><span class="koboSpan" id="kobo.480.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.481.1">display</span></span><span class="koboSpan" id="kobo.482.1">: flex;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.483.1">flex-direction</span></span><span class="koboSpan" id="kobo.484.1">: row;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.485.1">gap</span></span><span class="koboSpan" id="kobo.486.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.487.1">0.73rem</span></span><span class="koboSpan" id="kobo.488.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.489.1">justify-content</span></span><span class="koboSpan" id="kobo.490.1">: end;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.491.1">margin-top</span></span><span class="koboSpan" id="kobo.492.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.493.1">1.5rem</span></span><span class="koboSpan" id="kobo.494.1">;
}
</span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.495.1">.menu-links</span></span><span class="koboSpan" id="kobo.496.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.497.1">display</span></span><span class="koboSpan" id="kobo.498.1">: flex;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.499.1">align-items</span></span><span class="koboSpan" id="kobo.500.1">: center;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.501.1">gap</span></span><span class="koboSpan" id="kobo.502.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.503.1">0.73rem</span></span><span class="koboSpan" id="kobo.504.1">;
}
</span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.505.1">.menu-links</span></span> <span class="hljs-selector-tag"><span class="koboSpan" id="kobo.506.1">a</span></span><span class="koboSpan" id="kobo.507.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.508.1">transition</span></span><span class="koboSpan" id="kobo.509.1">: fill </span><span class="hljs-number"><span class="koboSpan" id="kobo.510.1">0.3s</span></span><span class="koboSpan" id="kobo.511.1"> ease;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.512.1">color</span></span><span class="koboSpan" id="kobo.513.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.514.1">var</span></span><span class="koboSpan" id="kobo.515.1">(--gray-</span><span class="hljs-number"><span class="koboSpan" id="kobo.516.1">400</span></span><span class="koboSpan" id="kobo.517.1">);
}
</span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.518.1">.menu-links</span></span> <span class="hljs-selector-tag"><span class="koboSpan" id="kobo.519.1">a</span></span><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.520.1">:hover</span></span><span class="koboSpan" id="kobo.521.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.522.1">color</span></span><span class="koboSpan" id="kobo.523.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.524.1">var</span></span><span class="koboSpan" id="kobo.525.1">(--gray-</span><span class="hljs-number"><span class="koboSpan" id="kobo.526.1">900</span></span><span class="koboSpan" id="kobo.527.1">);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.528.1">
      Finally, open the global
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.529.1">
       styles.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.530.1">
      file and add the following CSS styles:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.531.1">a</span></span><span class="koboSpan" id="kobo.532.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.533.1">text-decoration</span></span><span class="koboSpan" id="kobo.534.1">: none;
}
</span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.535.1">.spacer</span></span><span class="koboSpan" id="kobo.536.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.537.1">flex</span></span><span class="koboSpan" id="kobo.538.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.539.1">1</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.540.1">1</span></span><span class="koboSpan" id="kobo.541.1"> auto;
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.542.1">
     We are now ready to preview our Angular application:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.543.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.544.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.545.1">
      command and navigate to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.546.1">
       http://localhost:4200
      </span>
     </code>
     <span class="koboSpan" id="kobo.547.1">
      .
     </span>
     <span class="koboSpan" id="kobo.547.2">
      Initially, the application page displays the application header and the copyright information only.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.548.1">
      Click on the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.549.1">
       Products
      </span>
     </strong>
     <span class="koboSpan" id="kobo.550.1">
      link.
     </span>
     <span class="koboSpan" id="kobo.550.2">
      The application should display the product list and update the browser URL to match the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.551.1">
       /products
      </span>
     </code>
     <span class="koboSpan" id="kobo.552.1">
      path.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.553.1">
      Now navigate to the root path at
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.554.1">
       http://localhost:4200
      </span>
     </code>
     <span class="koboSpan" id="kobo.555.1">
      and append the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.556.1">
       /cart
      </span>
     </code>
     <span class="koboSpan" id="kobo.557.1">
      path at the end of the browser URL.
     </span>
     <span class="koboSpan" id="kobo.557.2">
      The application should replace the product list view with the cart component:
     </span>
    </li>
   </ol>
   <p class="normal-one">
    <strong class="screenText">
     <span class="koboSpan" id="kobo.558.1">
      cart works!
     </span>
    </strong>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.559.1">
      Routing in Angular works bi-directionally.
     </span>
     <span class="koboSpan" id="kobo.559.2">
      It enables us to navigate to an Angular component using the in-app links or the browser address bar.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.560.1">
     Congratulations!
    </span>
    <span class="koboSpan" id="kobo.560.2">
     Your Angular application now supports in-app navigation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.561.1">
     We have barely
    </span>
    <a id="_idIndexMarker528">
    </a>
    <span class="koboSpan" id="kobo.562.1">
     scratched the surface of Angular routing.
    </span>
    <span class="koboSpan" id="kobo.562.2">
     There
    </span>
    <a id="_idIndexMarker529">
    </a>
    <span class="koboSpan" id="kobo.563.1">
     are many features for us to investigate in the following sections.
    </span>
    <span class="koboSpan" id="kobo.563.2">
     For now, let’s try to break our components into more routes so that we can manage them easily.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-169">
    <span class="koboSpan" id="kobo.564.1">
     Organizing application routes
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.565.1">
     Our application
    </span>
    <a id="_idIndexMarker530">
    </a>
    <span class="koboSpan" id="kobo.566.1">
     displays the product list along with the product details and the product create components.
    </span>
    <span class="koboSpan" id="kobo.566.2">
     We need to organize the routing configuration so that different routes activate each component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.567.1">
     In this section, we will add a new route for the product create component.
    </span>
    <span class="koboSpan" id="kobo.567.2">
     Later, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.568.1">
      Passing parameters to routes
     </span>
    </em>
    <span class="koboSpan" id="kobo.569.1">
     section, we will add a separate route for the product details component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.570.1">
     Let’s get started with the product create component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.571.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.572.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.573.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.574.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.575.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.576.1">import</span></span><span class="koboSpan" id="kobo.577.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.578.1">ProductCreateComponent</span></span><span class="koboSpan" id="kobo.579.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.580.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.581.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.582.1">./product-create/product-create.component'</span></span><span class="koboSpan" id="kobo.583.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.584.1">
      Add the following route definition object in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.585.1">
       routes
      </span>
     </code>
     <span class="koboSpan" id="kobo.586.1">
      variable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.587.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.588.1">path</span></span><span class="koboSpan" id="kobo.589.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.590.1">'products/new'</span></span><span class="koboSpan" id="kobo.591.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.592.1">component</span></span><span class="koboSpan" id="kobo.593.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.594.1">ProductCreateComponent</span></span><span class="koboSpan" id="kobo.595.1"> }
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.596.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.597.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.598.1">
      file and remove any references to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.599.1">
       ProductCreateComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.600.1">
      class.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.601.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.602.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.603.1">
      file and remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.604.1">
       &lt;app-product-create&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.605.1">
      element.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.606.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.607.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.608.1">
      command to start the application, click on the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.609.1">
       Products
      </span>
     </strong>
     <span class="koboSpan" id="kobo.610.1">
      link, and verify that the product create form is not displayed.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.611.1">
     Currently, the product create component is only accessible using the browser URL, and we cannot reach it
    </span>
    <a id="_idIndexMarker531">
    </a>
    <span class="koboSpan" id="kobo.612.1">
     using the application UI.
    </span>
    <span class="koboSpan" id="kobo.612.2">
     In the following section, we will learn how to accomplish that task and imperatively navigate to a route.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-170">
    <span class="koboSpan" id="kobo.613.1">
     Navigating imperatively to a route
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.614.1">
     The product
    </span>
    <a id="_idIndexMarker532">
    </a>
    <span class="koboSpan" id="kobo.615.1">
     create component can only be activated by entering the address
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.616.1">
      http://localhost:4200/products/new
     </span>
    </code>
    <span class="koboSpan" id="kobo.617.1">
     in the browser address bar.
    </span>
    <span class="koboSpan" id="kobo.617.2">
     Let’s add a button in the product list that will navigate us from the UI also:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.618.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.619.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.620.1">
      file and modify the second
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.621.1">
       @if
      </span>
     </code>
     <span class="koboSpan" id="kobo.622.1">
      block as follows:
     </span>
    </li>
   </ol>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.623.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.624.1">
       &lt;path&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.625.1">
      element below might be tricky to type out manually.
     </span>
     <span class="koboSpan" id="kobo.625.2">
      Alternatively, you can find the code in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.626.1">
       ch09
      </span>
     </code>
     <span class="koboSpan" id="kobo.627.1">
      folder in the book’s GitHub repository and copy it from there.
     </span>
    </p>
   </div>
   <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.628.1">@if (products) {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.629.1">&lt;div class="caption"&gt;</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.630.1">&lt;h1&gt;Products ({{products.length}})&lt;/h1&gt;</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.631.1">&lt;a routerLink="new"&gt;</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.632.1">&lt;svg</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.633.1">width="24"</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.634.1">height="24"</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.635.1"/></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.636.1">fill-rule="evenodd"</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.637.1">clip-rule="evenodd"&gt;</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.638.1">&lt;path d="M11.5 0c6.347 0 11.5 5.153 11.5 11.5s-5.153 11.5-11.5 11.5-11.5-5.153-11.5-11.5 5.153-11.5 11.5-11.5zm0 1c5.795 0 10.5 4.705 10.5 10.5s-4.705 10.5-10.5 10.5-10.5-4.705-10.5-10.5 4.705-10.5 10.5-10.5zm.5 10h6v1h-6v6h-1v-6h-6v-1h6v-6h1v6z"/&gt;</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.639.1">&lt;/svg&gt;</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.640.1">&lt;/a&gt;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.641.1">&lt;/div&gt;</span></strong></span><span class="koboSpan" id="kobo.642.1">
}
</span></code></pre>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.643.1">
     In the preceding snippet, we added an anchor element that will navigate us to the product create component, as indicated by the value of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.644.1">
      routerLink
     </span>
    </code>
    <span class="koboSpan" id="kobo.645.1">
     directive.
    </span>
   </p>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.646.1">
      The value of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.647.1">
       routerLink
      </span>
     </code>
     <span class="koboSpan" id="kobo.648.1">
      directive is
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.649.1">
       new
      </span>
     </code>
     <span class="koboSpan" id="kobo.650.1">
      and not
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.651.1">
       /products/new
      </span>
     </code>
     <span class="koboSpan" id="kobo.652.1">
      as someone would expect.
     </span>
     <span class="koboSpan" id="kobo.652.2">
      The preceding behavior is because the button resides in the product list component, which is already activated by the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.653.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.654.1">
      part of the route.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.655.1">
      The Angular router can synthesize the destination route by all activated routes, but if you don’t want to start from the root, you can add a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.656.1">
       /
      </span>
     </code>
     <span class="koboSpan" id="kobo.657.1">
      before the route.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.658.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.659.1">
       product-list.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.660.1">
      file and
     </span>
     <a id="_idIndexMarker533">
     </a>
     <span class="koboSpan" id="kobo.661.1">
      add the following CSS styles:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-class"><span class="koboSpan" id="kobo.662.1">.caption</span></span><span class="koboSpan" id="kobo.663.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.664.1">display</span></span><span class="koboSpan" id="kobo.665.1">: flex;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.666.1">align-items</span></span><span class="koboSpan" id="kobo.667.1">: center;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.668.1">gap</span></span><span class="koboSpan" id="kobo.669.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.670.1">1.25rem</span></span><span class="koboSpan" id="kobo.671.1">;
}
</span><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.672.1">path</span></span><span class="koboSpan" id="kobo.673.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.674.1">transition</span></span><span class="koboSpan" id="kobo.675.1">: fill </span><span class="hljs-number"><span class="koboSpan" id="kobo.676.1">0.3s</span></span><span class="koboSpan" id="kobo.677.1"> ease;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.678.1">fill</span></span><span class="koboSpan" id="kobo.679.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.680.1">var</span></span><span class="koboSpan" id="kobo.681.1">(--gray-</span><span class="hljs-number"><span class="koboSpan" id="kobo.682.1">400</span></span><span class="koboSpan" id="kobo.683.1">);
}
</span><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.684.1">a</span></span><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.685.1">:hover</span></span> <span class="hljs-selector-tag"><span class="koboSpan" id="kobo.686.1">svg</span></span> <span class="hljs-selector-tag"><span class="koboSpan" id="kobo.687.1">path</span></span><span class="koboSpan" id="kobo.688.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.689.1">fill</span></span><span class="koboSpan" id="kobo.690.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.691.1">var</span></span><span class="koboSpan" id="kobo.692.1">(--gray-</span><span class="hljs-number"><span class="koboSpan" id="kobo.693.1">900</span></span><span class="koboSpan" id="kobo.694.1">);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.695.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.696.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.697.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.698.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.699.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.700.1">import</span></span><span class="koboSpan" id="kobo.701.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.702.1">RouterLink</span></span><span class="koboSpan" id="kobo.703.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.704.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.705.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.706.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.707.1">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.708.1">
       RouterLink
      </span>
     </code>
     <span class="koboSpan" id="kobo.709.1">
      class in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.710.1">
       imports
      </span>
     </code>
     <span class="koboSpan" id="kobo.711.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.712.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.713.1">
      decorator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.714.1">@Component</span></span><span class="koboSpan" id="kobo.715.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.716.1">selector</span></span><span class="koboSpan" id="kobo.717.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.718.1">'app-product-list'</span></span><span class="koboSpan" id="kobo.719.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.720.1">imports</span></span><span class="koboSpan" id="kobo.721.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.722.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.723.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.724.1">SortPipe</span></span><span class="koboSpan" id="kobo.725.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.726.1">AsyncPipe</span></span><span class="koboSpan" id="kobo.727.1">,
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.728.1">RouterLink</span></strong></span><span class="koboSpan" id="kobo.729.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.730.1">templateUrl</span></span><span class="koboSpan" id="kobo.731.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.732.1">'./product-list.component.html'</span></span><span class="koboSpan" id="kobo.733.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.734.1">styleUrl</span></span><span class="koboSpan" id="kobo.735.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.736.1">'./product-list.component.css'</span></span><span class="koboSpan" id="kobo.737.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.738.1">
      Open
     </span>
     <a id="_idIndexMarker534">
     </a>
     <span class="koboSpan" id="kobo.739.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.740.1">
       product-create.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.741.1">
      file and add the following CSS style:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.742.1">:host</span></span><span class="koboSpan" id="kobo.743.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.744.1">width</span></span><span class="koboSpan" id="kobo.745.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.746.1">400px</span></span><span class="koboSpan" id="kobo.747.1">;
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.748.1">
     In the preceding style, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.749.1">
      :host
     </span>
    </code>
    <span class="koboSpan" id="kobo.750.1">
     selector targets the host element of the product create component.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.751.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.752.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.753.1">
      command to start the application and navigate to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.754.1">
       http://localhost:4200/products
      </span>
     </code>
     <span class="koboSpan" id="kobo.755.1">
      :
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.756.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.757.1">
     Figure 9.3: Product list
    </span>
   </p>
   <ol>
    <li class="numberedList" value="7">
     <span class="koboSpan" id="kobo.758.1">
      Click the
     </span>
     <a id="_idIndexMarker535">
     </a>
     <span class="koboSpan" id="kobo.759.1">
      button with the plus sign.
     </span>
     <span class="koboSpan" id="kobo.759.2">
      The application redirects you to the /
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.760.1">
       products/new
      </span>
     </code>
     <span class="koboSpan" id="kobo.761.1">
      route and activates the product create component:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.762.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, αριθμός  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.763.1">
     Figure 9.4: Product create form
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.764.1">
     Although the
    </span>
    <a id="_idIndexMarker536">
    </a>
    <span class="koboSpan" id="kobo.765.1">
     product create component remains functional, our change introduced a flaw in the application’s UX.
    </span>
    <span class="koboSpan" id="kobo.765.2">
     The user does not have a visual indication when a new product is created because the product list belongs to a different route.
    </span>
    <span class="koboSpan" id="kobo.765.3">
     We must modify the logic of the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.766.1">
      Create
     </span>
    </strong>
    <span class="koboSpan" id="kobo.767.1">
     button so that it redirects the user to the product list upon successful creation of a product:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.768.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.769.1">
       product-create.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.770.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.771.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.772.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.773.1">import</span></span><span class="koboSpan" id="kobo.774.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.775.1">Router</span></span><span class="koboSpan" id="kobo.776.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.777.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.778.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.779.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.780.1">
      Inject the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.781.1">
       Router
      </span>
     </code>
     <span class="koboSpan" id="kobo.782.1">
      service in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.783.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.784.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.785.1">
       ProductCreateComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.786.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.787.1">constructor</span></span><span class="koboSpan" id="kobo.788.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.789.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.790.1">productsService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.791.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.792.1">ProductsService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.793.1">, </span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.794.1">private router: Router</span></strong></span><span class="koboSpan" id="kobo.795.1">) {}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.796.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.797.1">
       createProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.798.1">
      method as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.799.1">createProduct</span></span><span class="koboSpan" id="kobo.800.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.801.1">title</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.802.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.803.1">string</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.804.1">, </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.805.1">price</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.806.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.807.1">string</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.808.1">, </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.809.1">category</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.810.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.811.1">string</span></span><span class="koboSpan" id="kobo.812.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.813.1">this</span></span><span class="koboSpan" id="kobo.814.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.815.1">productsService</span></span><span class="koboSpan" id="kobo.816.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.817.1">addProduct</span></span><span class="koboSpan" id="kobo.818.1">({
    title,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.819.1">price</span></span><span class="koboSpan" id="kobo.820.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.821.1">Number</span></span><span class="koboSpan" id="kobo.822.1">(price),
    category
  }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.823.1">subscribe</span></span><span class="koboSpan" id="kobo.824.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.825.1">() =&gt; this.router.navigate(['/products'])</span></strong></span><span class="koboSpan" id="kobo.826.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.827.1">
     In the
    </span>
    <a id="_idIndexMarker537">
    </a>
    <span class="koboSpan" id="kobo.828.1">
     preceding method, we call the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.829.1">
      navigate
     </span>
    </code>
    <span class="koboSpan" id="kobo.830.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.831.1">
      Router
     </span>
    </code>
    <span class="koboSpan" id="kobo.832.1">
     service to navigate into the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.833.1">
      /products
     </span>
    </code>
    <span class="koboSpan" id="kobo.834.1">
     route of the application.
    </span>
   </p>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.835.1">
      We use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.836.1">
       /
      </span>
     </code>
     <span class="koboSpan" id="kobo.837.1">
      character because we are using absolute routing by default.
     </span>
    </p>
   </div>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.838.1">
     It accepts a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.839.1">
      link parameters array
     </span>
    </strong>
    <span class="koboSpan" id="kobo.840.1">
     containing the destination route path we want to navigate.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.841.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.842.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.843.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.844.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.845.1">
      method so that it uses the Fake Store API when there is no local product data:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.846.1">getProducts</span></span><span class="koboSpan" id="kobo.847.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.848.1">Observable</span></span><span class="koboSpan" id="kobo.849.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.850.1">Product</span></span><span class="koboSpan" id="kobo.851.1">[]&gt; {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.852.1">if (this.products.length === 0) {</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.853.1">const</span></span><span class="koboSpan" id="kobo.854.1"> options = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.855.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.856.1">HttpParams</span></span><span class="koboSpan" id="kobo.857.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.858.1">set</span></span><span class="koboSpan" id="kobo.859.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.860.1">'limit'</span></span><span class="koboSpan" id="kobo.861.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.862.1">10</span></span><span class="koboSpan" id="kobo.863.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.864.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.865.1">this</span></span><span class="koboSpan" id="kobo.866.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.867.1">http</span></span><span class="koboSpan" id="kobo.868.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.869.1">get</span></span><span class="koboSpan" id="kobo.870.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.871.1">Product</span></span><span class="koboSpan" id="kobo.872.1">[]&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.873.1">this</span></span><span class="koboSpan" id="kobo.874.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.875.1">productsUrl</span></span><span class="koboSpan" id="kobo.876.1">, {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.877.1">params</span></span><span class="koboSpan" id="kobo.878.1">: options
    }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.879.1">pipe</span></span><span class="koboSpan" id="kobo.880.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.881.1">map</span></span><span class="koboSpan" id="kobo.882.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.883.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.884.1"> =&gt;</span></span><span class="koboSpan" id="kobo.885.1"> {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.886.1">this</span></span><span class="koboSpan" id="kobo.887.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.888.1">products</span></span><span class="koboSpan" id="kobo.889.1"> = products;
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.890.1">return</span></span><span class="koboSpan" id="kobo.891.1"> products;
    }));
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.892.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.893.1">return of(this.products);</span></strong></span><span class="koboSpan" id="kobo.894.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.895.1">
     If we do not make the preceding change, the product list component will always return data from the Fake Store API.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.896.1">
     Our application now redirects users to the product list whenever they create a new product so that they can see it on the list.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.897.1">
     So far, we have configured the application routing to activate components according to a given path.
    </span>
    <span class="koboSpan" id="kobo.897.2">
     However, our application does not show any components in the following situations:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.898.1">
      When we navigate to the root path of the application
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.899.1">
      When we try to navigate to a non-existing route
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.900.1">
     In the
    </span>
    <a id="_idIndexMarker538">
    </a>
    <span class="koboSpan" id="kobo.901.1">
     following section, we will learn how to use the built-in route paths that Angular router provides and improve the application UX.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-171">
    <span class="koboSpan" id="kobo.902.1">
     Using built-in route paths
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.903.1">
     When we want to
    </span>
    <a id="_idIndexMarker539">
    </a>
    <span class="koboSpan" id="kobo.904.1">
     define a component that
    </span>
    <a id="_idIndexMarker540">
    </a>
    <span class="koboSpan" id="kobo.905.1">
     will be loaded when we navigate to the root path, we create a route definition object and set the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.906.1">
      path
     </span>
    </code>
    <span class="koboSpan" id="kobo.907.1">
     property to an empty string.
    </span>
    <span class="koboSpan" id="kobo.907.2">
     A route with an empty string
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.908.1">
      path
     </span>
    </code>
    <span class="koboSpan" id="kobo.909.1">
     is called
    </span>
    <a id="_idIndexMarker541">
    </a>
    <span class="koboSpan" id="kobo.910.1">
     the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.911.1">
      default
     </span>
    </strong>
    <span class="koboSpan" id="kobo.912.1">
     route of the Angular application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.913.1">
     In our case, we want the default route to display the product list component.
    </span>
    <span class="koboSpan" id="kobo.913.2">
     Open the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.914.1">
      app.routes.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.915.1">
     file and add the following route at the end of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.916.1">
      routes
     </span>
    </code>
    <span class="koboSpan" id="kobo.917.1">
     variable:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.918.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.919.1">path</span></span><span class="koboSpan" id="kobo.920.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.921.1">''</span></span><span class="koboSpan" id="kobo.922.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.923.1">redirectTo</span></span><span class="koboSpan" id="kobo.924.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.925.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.926.1">products'</span></span><span class="koboSpan" id="kobo.927.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.928.1">pathMatch</span></span><span class="koboSpan" id="kobo.929.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.930.1">'full'</span></span><span class="koboSpan" id="kobo.931.1"> }
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.932.1">
     In the preceding snippet, we tell the router to redirect to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.933.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.934.1">
     path when the application navigates to the default route.
    </span>
    <span class="koboSpan" id="kobo.934.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.935.1">
      pathMatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.936.1">
     property tells the router how to match the URL to the root path property.
    </span>
    <span class="koboSpan" id="kobo.936.2">
     In this case, the router redirects to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.937.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.938.1">
     path only when the URL matches the root path, which is the empty string.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.939.1">
     If we run the application, we will notice that when the browser URL points to the root path of our application, we are redirected to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.940.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.941.1">
     path, and the product list is displayed on the screen.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.942.1">
      We added the default route after all other routes because the order of the routes is important.
     </span>
     <span class="koboSpan" id="kobo.942.2">
      The router selects routes with a first-match-wins strategy.
     </span>
     <span class="koboSpan" id="kobo.942.3">
      More specific routes should be defined before less specific ones.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.943.1">
     We have encountered the concept of unknown routes in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.944.1">
      Introducing the Angular router
     </span>
    </em>
    <span class="koboSpan" id="kobo.945.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.945.2">
     We saw briefly
    </span>
    <a id="_idIndexMarker542">
    </a>
    <span class="koboSpan" id="kobo.946.1">
     how to set up a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.947.1">
      wildcard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.948.1">
     route to display a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.949.1">
      PageNotFoundComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.950.1">
     when our application tries to navigate to a route that does not exist.
    </span>
    <span class="koboSpan" id="kobo.950.2">
     In real-world applications, it is common to create such a component, especially if you want to display additional information to the user, such as what next steps they can follow.
    </span>
    <span class="koboSpan" id="kobo.950.3">
     In our case, which is simpler, we will redirect to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.951.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.952.1">
     route.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.953.1">
     Open the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.954.1">
      app.routes.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.955.1">
     file and add the following route at the end of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.956.1">
      routes
     </span>
    </code>
    <span class="koboSpan" id="kobo.957.1">
     variable:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.958.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.959.1">path</span></span><span class="koboSpan" id="kobo.960.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.961.1">'**'</span></span><span class="koboSpan" id="kobo.962.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.963.1">redirectTo</span></span><span class="koboSpan" id="kobo.964.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.965.1">'products'</span></span><span class="koboSpan" id="kobo.966.1"> }
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.967.1">
      The wildcard route must be the last entry in the route list because the application should only reach it if there are no matching routes.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.968.1">
     If we run our application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.969.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.970.1">
     command and navigate to an unknown path, our application will display the product list.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.971.1">
     Until now, we have
    </span>
    <a id="_idIndexMarker543">
    </a>
    <span class="koboSpan" id="kobo.972.1">
     relied on the address bar of the
    </span>
    <a id="_idIndexMarker544">
    </a>
    <span class="koboSpan" id="kobo.973.1">
     browser to indicate which route is active at any given time.
    </span>
    <span class="koboSpan" id="kobo.973.2">
     As we will learn in the following section, we could improve the user experience using CSS styling.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-172">
    <span class="koboSpan" id="kobo.974.1">
     Styling router links
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.975.1">
     The application
    </span>
    <a id="_idIndexMarker545">
    </a>
    <span class="koboSpan" id="kobo.976.1">
     header contains the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.977.1">
      Products
     </span>
    </strong>
    <span class="koboSpan" id="kobo.978.1">
     and the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.979.1">
      My Cart
     </span>
    </strong>
    <span class="koboSpan" id="kobo.980.1">
     links.
    </span>
    <span class="koboSpan" id="kobo.980.2">
     When
    </span>
    <a id="_idIndexMarker546">
    </a>
    <span class="koboSpan" id="kobo.981.1">
     we navigate to each one, it is not clear which route has been activated.
    </span>
    <span class="koboSpan" id="kobo.981.2">
     The Angular router exports the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.982.1">
      routerLinkActive
     </span>
    </code>
    <span class="koboSpan" id="kobo.983.1">
     directive, which we can use to change the style of a link when the corresponding route is active.
    </span>
    <span class="koboSpan" id="kobo.983.2">
     It works similarly to the class binding we learned about in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.984.1">
      Chapter 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.985.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.986.1">
      Structuring User Interfaces with Components
     </span>
    </em>
    <span class="koboSpan" id="kobo.987.1">
     .
    </span>
    <span class="koboSpan" id="kobo.987.2">
     It accepts a list of class names or a class that is added when the link is active and removed when it becomes inactive.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.988.1">
     Let’s see how to use it in our application:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.989.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.990.1">
       app.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.991.1">
      file and add the following CSS style:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-class"><span class="koboSpan" id="kobo.992.1">.menu-links</span></span> <span class="hljs-selector-tag"><span class="koboSpan" id="kobo.993.1">a</span></span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.994.1">.active</span></span><span class="koboSpan" id="kobo.995.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.996.1">color</span></span><span class="koboSpan" id="kobo.997.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.998.1">var</span></span><span class="koboSpan" id="kobo.999.1">(--electric-violet);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1000.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1001.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1002.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1003.1">
       RouterLinkActive
      </span>
     </code>
     <span class="koboSpan" id="kobo.1004.1">
      class from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1005.1">
       @angular/router
      </span>
     </code>
     <span class="koboSpan" id="kobo.1006.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1007.1">import</span></span><span class="koboSpan" id="kobo.1008.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1009.1">RouterLink</span></span><span class="koboSpan" id="kobo.1010.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1011.1">RouterLinkActive</span></strong></span><span class="koboSpan" id="kobo.1012.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1013.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.1014.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1015.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1016.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.1017.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1018.1">
      Add
     </span>
     <a id="_idIndexMarker547">
     </a>
     <span class="koboSpan" id="kobo.1019.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1020.1">
       RouterLinkActive
      </span>
     </code>
     <span class="koboSpan" id="kobo.1021.1">
      class in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1022.1">
       imports
      </span>
     </code>
     <span class="koboSpan" id="kobo.1023.1">
      array
     </span>
     <a id="_idIndexMarker548">
     </a>
     <span class="koboSpan" id="kobo.1024.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1025.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.1026.1">
      decorator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1027.1">@Component</span></span><span class="koboSpan" id="kobo.1028.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1029.1">selector</span></span><span class="koboSpan" id="kobo.1030.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1031.1">'app-root'</span></span><span class="koboSpan" id="kobo.1032.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1033.1">imports</span></span><span class="koboSpan" id="kobo.1034.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1035.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.1036.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1037.1">RouterLink</span></span><span class="koboSpan" id="kobo.1038.1">,
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1039.1">RouterLinkActive</span></strong></span><span class="koboSpan" id="kobo.1040.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1041.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.1042.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1043.1">AuthComponent</span></span><span class="koboSpan" id="kobo.1044.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1045.1">templateUrl</span></span><span class="koboSpan" id="kobo.1046.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1047.1">'./app.component.html'</span></span><span class="koboSpan" id="kobo.1048.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1049.1">styleUrl</span></span><span class="koboSpan" id="kobo.1050.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1051.1">'./app.component.css'</span></span><span class="koboSpan" id="kobo.1052.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1053.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1054.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1055.1">
      file and add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1056.1">
       routerLinkActive
      </span>
     </code>
     <span class="koboSpan" id="kobo.1057.1">
      directive to both links:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1058.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1059.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1060.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1061.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1062.1">"menu-links"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1063.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1064.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1065.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1066.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1067.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1068.1">"/products"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1069.1">routerLinkActive="active"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1070.1">&gt;</span></span><span class="koboSpan" id="kobo.1071.1">Products</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1072.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1073.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1074.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1075.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1076.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1077.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1078.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1079.1">"/cart"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1080.1">routerLinkActive="active"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1081.1">&gt;</span></span><span class="koboSpan" id="kobo.1082.1">My Cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1083.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1084.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1085.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1086.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1087.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1088.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1089.1">
     Now, when we click on an application link in the header, its color changes to denote the link is active.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1090.1">
     We have learned how to use routing and activate components that do not need any parameters.
    </span>
    <span class="koboSpan" id="kobo.1090.2">
     However, the
    </span>
    <a id="_idIndexMarker549">
    </a>
    <span class="koboSpan" id="kobo.1091.1">
     product details component
    </span>
    <a id="_idIndexMarker550">
    </a>
    <span class="koboSpan" id="kobo.1092.1">
     accepts the product ID as a parameter.
    </span>
    <span class="koboSpan" id="kobo.1092.2">
     In the next section, we will learn how to activate the component using dynamic route parameters.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-173">
    <span class="koboSpan" id="kobo.1093.1">
     Passing parameters to routes
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1094.1">
     A common scenario in
    </span>
    <a id="_idIndexMarker551">
    </a>
    <span class="koboSpan" id="kobo.1095.1">
     enterprise web applications is to have a list of items, and when you click on one of them, the page changes the current view and displays details of the selected item.
    </span>
    <span class="koboSpan" id="kobo.1095.2">
     The previous approach resembles a master-detail browsing functionality, where each generated URL on the master page contains the identifiers required to load each item on the detail page.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1096.1">
     We can represent the previous scenario with two routes navigating to different components.
    </span>
    <span class="koboSpan" id="kobo.1096.2">
     One component is the list of items, and the other is the item details.
    </span>
    <span class="koboSpan" id="kobo.1096.3">
     So, we need to find a way to create and pass dynamic item-specific data from one route to the other.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1097.1">
     We are tackling double trouble here: creating URLs with dynamic parameters at runtime and parsing the value of these parameters.
    </span>
    <span class="koboSpan" id="kobo.1097.2">
     No problem: the Angular router has our back, and we will see how with a real example.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-174">
    <span class="koboSpan" id="kobo.1098.1">
     Building a detail page using route parameters
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1099.1">
     The product list in
    </span>
    <a id="_idIndexMarker552">
    </a>
    <span class="koboSpan" id="kobo.1100.1">
     our application currently displays a list of products.
    </span>
    <span class="koboSpan" id="kobo.1100.2">
     When we click on a product, the product details appear below the list.
    </span>
    <span class="koboSpan" id="kobo.1100.3">
     We need to refactor the previous workflow so that the component responsible for displaying product details is rendered on a different page from the list.
    </span>
    <span class="koboSpan" id="kobo.1100.4">
     We will use the Angular router to redirect the user to the new page upon clicking on a product from the list.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1101.1">
     The product list component currently passes the selected product ID via input binding.
    </span>
    <span class="koboSpan" id="kobo.1101.2">
     We will use the Angular router to pass the product ID as a route parameter instead:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1102.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1103.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1104.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1105.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1106.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1107.1">import</span></span><span class="koboSpan" id="kobo.1108.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1109.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1110.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1111.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1112.1">'./product-detail/product-detail.component'</span></span><span class="koboSpan" id="kobo.1113.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1114.1">
      Add the following route definition in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1115.1">
       routes
      </span>
     </code>
     <span class="koboSpan" id="kobo.1116.1">
      variable after the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1117.1">
       products/new
      </span>
     </code>
     <span class="koboSpan" id="kobo.1118.1">
      route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1119.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1120.1">path</span></span><span class="koboSpan" id="kobo.1121.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1122.1">'products/:id'</span></span><span class="koboSpan" id="kobo.1123.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1124.1">component</span></span><span class="koboSpan" id="kobo.1125.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1126.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1127.1"> }
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1128.1">
     The colon character denotes
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1129.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1130.1">
     as a route parameter in the new route definition object.
    </span>
    <span class="koboSpan" id="kobo.1130.2">
     If a route has multiple parameters, we separate them with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1131.1">
      /
     </span>
    </code>
    <span class="koboSpan" id="kobo.1132.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1132.2">
     As we will learn later, the parameter name is important when we want to consume its value in our components.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.1133.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1134.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1135.1">
      file and add an anchor element for the product
     </span>
     <a id="_idIndexMarker553">
     </a>
     <span class="koboSpan" id="kobo.1136.1">
      title so that it uses the new route definition:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1137.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1138.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1139.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1140.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1141.1">"pill-group"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1142.1">&gt;</span></span><span class="koboSpan" id="kobo.1143.1">
  @for (product of products | sort; track product.id) {
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1144.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1145.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1146.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1147.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1148.1">"pill"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1149.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1150.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1151.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1152.1">"selectedProduct = product"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1153.1">&gt;</span></span><span class="koboSpan" id="kobo.1154.1">
      @switch (product.category) {
        @case ('electronics') { </span><span class="koboSpan" id="kobo.1155.1"><img alt="img" src="../Images/Icon-041.png"/></span><span class="koboSpan" id="kobo.1156.1"> }
        @case ('jewelery') { </span><span class="koboSpan" id="kobo.1157.1"><img alt="img" src="../Images/Icon-101.png"/></span><span class="koboSpan" id="kobo.1158.1"> }
        @default { </span><span class="koboSpan" id="kobo.1159.1"><img alt="img" src="../Images/Icon-09.png"/></span><span class="koboSpan" id="kobo.1160.1"> }
      }
      </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1161.1">&lt;a [routerLink]="[product.id]"&gt;{{product.title}}&lt;/a&gt;</span></strong></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1162.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1163.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1164.1">&gt;</span></span><span class="koboSpan" id="kobo.1165.1">
  } @empty {
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1166.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1167.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1168.1">&gt;</span></span><span class="koboSpan" id="kobo.1169.1">No products found!</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1170.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1171.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1172.1">&gt;</span></span><span class="koboSpan" id="kobo.1173.1">
  }
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1174.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1175.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1176.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1177.1">
     In the preceding snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1178.1">
      routerLink
     </span>
    </code>
    <span class="koboSpan" id="kobo.1179.1">
     directive uses property binding to set its value in a link parameters array.
    </span>
    <span class="koboSpan" id="kobo.1179.2">
     We pass the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1180.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1181.1">
     of the product template reference variable as a parameter in the array.
    </span>
   </p>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1182.1">
      We do not need to prefix the value of the link parameters array with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1183.1">
       /products
      </span>
     </code>
     <span class="koboSpan" id="kobo.1184.1">
      because that route already activates the product list.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.1185.1">
      Remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1186.1">
       &lt;app-product-detail&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1187.1">
      component and the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1188.1">
       click
      </span>
     </code>
     <span class="koboSpan" id="kobo.1189.1">
      event binding from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1190.1">
       &lt;li&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1191.1">
      tag.
     </span>
    </li>
   </ol>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1192.1">
      We can refactor the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1193.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1194.1">
      file and remove any code that uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1195.1">
       selectedProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.1196.1">
      property and the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1197.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1198.1">
      class.
     </span>
     <span class="koboSpan" id="kobo.1198.2">
      The product list does not need to keep the selected product in its local state because we are navigating away from the list upon choosing a product.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1199.1">
     We can now proceed by modifying the product detail component so that it works with routing:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1200.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1201.1">
       product-detail.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1202.1">
      file and add a CSS style to set the width of the host element:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.1203.1">:host</span></span><span class="koboSpan" id="kobo.1204.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1205.1">width</span></span><span class="koboSpan" id="kobo.1206.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1207.1">450px</span></span><span class="koboSpan" id="kobo.1208.1">;
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1209.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1210.1">
       product-detail.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1211.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1212.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1213.1">
      statements
     </span>
     <a id="_idIndexMarker554">
     </a>
     <span class="koboSpan" id="kobo.1214.1">
      as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1215.1">import</span></span><span class="koboSpan" id="kobo.1216.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1217.1">CommonModule</span></span><span class="koboSpan" id="kobo.1218.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1219.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1220.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.1221.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1222.1">import</span></span><span class="koboSpan" id="kobo.1223.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1224.1">Component</span></span><span class="koboSpan" id="kobo.1225.1">, input, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1226.1">OnInit</span></span><span class="koboSpan" id="kobo.1227.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1228.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1229.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1230.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1231.1">import</span></span><span class="koboSpan" id="kobo.1232.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1233.1">ActivatedRoute</span></span><span class="koboSpan" id="kobo.1234.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1235.1">Router</span></span><span class="koboSpan" id="kobo.1236.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1237.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1238.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.1239.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1240.1">import</span></span><span class="koboSpan" id="kobo.1241.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1242.1">Product</span></span><span class="koboSpan" id="kobo.1243.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1244.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1245.1">'../product'</span></span><span class="koboSpan" id="kobo.1246.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1247.1">import</span></span><span class="koboSpan" id="kobo.1248.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1249.1">Observable</span></span><span class="koboSpan" id="kobo.1250.1">, switchMap } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1251.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1252.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1253.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1254.1">import</span></span><span class="koboSpan" id="kobo.1255.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1256.1">ProductsService</span></span><span class="koboSpan" id="kobo.1257.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1258.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1259.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1260.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1261.1">import</span></span><span class="koboSpan" id="kobo.1262.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1263.1">AuthService</span></span><span class="koboSpan" id="kobo.1264.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1265.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1266.1">'../auth.service'</span></span><span class="koboSpan" id="kobo.1267.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1268.1">
     The Angular router exports the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1269.1">
      ActivatedRoute
     </span>
    </code>
    <span class="koboSpan" id="kobo.1270.1">
     service, which we can use to retrieve information about the currently activated route, including any parameters.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.1271.1">
      Modify the component
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1272.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1273.1">
      to inject the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1274.1">
       ActivatedRoute
      </span>
     </code>
     <span class="koboSpan" id="kobo.1275.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1276.1">
       Router
      </span>
     </code>
     <span class="koboSpan" id="kobo.1277.1">
      services:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1278.1">constructor</span></span><span class="koboSpan" id="kobo.1279.1">(
</span><span class="hljs-params">  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1280.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1281.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1282.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1283.1">ProductsService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1284.1">,</span></span>
<span class="hljs-params">  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1285.1">public</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1286.1">authService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1287.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1288.1">AuthService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1289.1">,</span></span>
<span class="hljs-params">  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1290.1">private route: ActivatedRoute,</span></strong></span>
<span class="hljs-params">  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1291.1">private router: Router</span></strong></span><span class="koboSpan" id="kobo.1292.1">
) { }
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1293.1">
      Modify the list of implemented interfaces of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1294.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1295.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1296.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1297.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1298.1">ProductDetailComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1299.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1300.1">OnInit</span></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1301.1">
      Create the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1302.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1303.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1304.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1305.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1306.1">void</span></span><span class="koboSpan" id="kobo.1307.1"> {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1308.1">this</span></span><span class="koboSpan" id="kobo.1309.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1310.1">product$</span></span><span class="koboSpan" id="kobo.1311.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1312.1">this</span></span><span class="koboSpan" id="kobo.1313.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1314.1">route</span></span><span class="koboSpan" id="kobo.1315.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1316.1">paramMap</span></span><span class="koboSpan" id="kobo.1317.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1318.1">pipe</span></span><span class="koboSpan" id="kobo.1319.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1320.1">switchMap</span></span><span class="koboSpan" id="kobo.1321.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1322.1">params</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1323.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1324.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1325.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1326.1">this</span></span><span class="koboSpan" id="kobo.1327.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1328.1">productService</span></span><span class="koboSpan" id="kobo.1329.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1330.1">getProduct</span></span><span class="koboSpan" id="kobo.1331.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1332.1">Number</span></span><span class="koboSpan" id="kobo.1333.1">(params.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1334.1">get</span></span><span class="koboSpan" id="kobo.1335.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1336.1">'id'</span></span><span class="koboSpan" id="kobo.1337.1">)));
    })
  );
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1338.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1339.1">
      ActivatedRoute
     </span>
    </code>
    <span class="koboSpan" id="kobo.1340.1">
     service contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1341.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1342.1">
     observable, which we can use to subscribe and get route parameter values.
    </span>
    <span class="koboSpan" id="kobo.1342.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1343.1">
      switchMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1344.1">
     RxJS operator is used
    </span>
    <a id="_idIndexMarker555">
    </a>
    <span class="koboSpan" id="kobo.1345.1">
     when we want to get a value from an observable, complete it, and pass the value down to another observable.
    </span>
    <span class="koboSpan" id="kobo.1345.2">
     We use it, in this case, to pipe the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1346.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1347.1">
     parameter from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1348.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1349.1">
     observable to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1350.1">
      getProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.1351.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1352.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1353.1">
     class.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.1354.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1355.1">
       changePrice
      </span>
     </code>
     <span class="koboSpan" id="kobo.1356.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1357.1">
       remove
      </span>
     </code>
     <span class="koboSpan" id="kobo.1358.1">
      methods so that the application will redirect to the product list upon completion of each action:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1359.1">changePrice</span></span><span class="koboSpan" id="kobo.1360.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1361.1">product</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1362.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1363.1">Product</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1364.1">, </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1365.1">price</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1366.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1367.1">string</span></span><span class="koboSpan" id="kobo.1368.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1369.1">this</span></span><span class="koboSpan" id="kobo.1370.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1371.1">productService</span></span><span class="koboSpan" id="kobo.1372.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1373.1">updateProduct</span></span><span class="koboSpan" id="kobo.1374.1">(product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1375.1">id</span></span><span class="koboSpan" id="kobo.1376.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1377.1">Number</span></span><span class="koboSpan" id="kobo.1378.1">(price)).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1379.1">subscribe</span></span><span class="koboSpan" id="kobo.1380.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1381.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1382.1"> {
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1383.1">this.router.navigate(['/products']);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1384.1">}</span></strong></span><span class="koboSpan" id="kobo.1385.1">);
}
</span><span class="hljs-title"><span class="koboSpan" id="kobo.1386.1">remove</span></span><span class="koboSpan" id="kobo.1387.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1388.1">product</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1389.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1390.1">Product</span></span><span class="koboSpan" id="kobo.1391.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1392.1">this</span></span><span class="koboSpan" id="kobo.1393.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1394.1">productService</span></span><span class="koboSpan" id="kobo.1395.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1396.1">deleteProduct</span></span><span class="koboSpan" id="kobo.1397.1">(product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1398.1">id</span></span><span class="koboSpan" id="kobo.1399.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1400.1">subscribe</span></span><span class="koboSpan" id="kobo.1401.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1402.1">() =&gt; {</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1403.1">this.router.navigate(['/products']);</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1404.1">}</span></strong></span><span class="koboSpan" id="kobo.1405.1">);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1406.1">
      Remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1407.1">
       ngOnChanges
      </span>
     </code>
     <span class="koboSpan" id="kobo.1408.1">
      method because the component and its bindings are initialized every time the route is activated.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1409.1">
      Remove the output event emitters because the product list component is not a parent component anymore.
     </span>
     <span class="koboSpan" id="kobo.1409.2">
      Leave the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1410.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1411.1">
      input property as is because we will use it later in the chapter.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1412.1">
      Leave the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1413.1">
       addToCart
      </span>
     </code>
     <span class="koboSpan" id="kobo.1414.1">
      method empty for now.
     </span>
     <span class="koboSpan" id="kobo.1414.2">
      We will use it later in
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.1415.1">
       Chapter 10
      </span>
     </em>
     <span class="koboSpan" id="kobo.1416.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1417.1">
       Collecting User Data with Forms
      </span>
     </em>
     <span class="koboSpan" id="kobo.1418.1">
      .
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1419.1">
     It is also worth noting the following:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1420.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1421.1">
       paramMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1422.1">
      observable returns an object of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1423.1">
       ParamMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1424.1">
      type.
     </span>
     <span class="koboSpan" id="kobo.1424.2">
      We can use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1425.1">
       get
      </span>
     </code>
     <span class="koboSpan" id="kobo.1426.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1427.1">
       ParamMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1428.1">
      object to pass the parameter name we defined in the route configuration and access its value.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1429.1">
      We convert the value of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1430.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1431.1">
      parameter to a number because route parameter values are always strings.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1432.1">
     If we run the
    </span>
    <a id="_idIndexMarker556">
    </a>
    <span class="koboSpan" id="kobo.1433.1">
     application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1434.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.1435.1">
     command and click on a product from the list, the application navigates us to the product details component:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1436.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, σχεδίαση  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1437.1">
     Figure 9.5: Product Details page
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1438.1">
      If you refresh the browser, the application will not display the product because the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1439.1">
       getProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.1440.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1441.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1442.1">
      class works only with the cached version of product data.
     </span>
     <span class="koboSpan" id="kobo.1442.2">
      You must go to the product list again and select a product because the local cache has been reset.
     </span>
     <span class="koboSpan" id="kobo.1442.3">
      Note that this behavior is based on the current implementation of the e-shop application and is not tied to the Angular router architecture.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1443.1">
     In the previous example, we used the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1444.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1445.1">
     property to get route parameters as an observable.
    </span>
    <span class="koboSpan" id="kobo.1445.2">
     So, ideally, our component could be notified of new values during its lifetime.
    </span>
    <span class="koboSpan" id="kobo.1445.3">
     But the component is destroyed each time we want to select a different product from the list, and so is the subscription to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1446.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1447.1">
     observable.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1448.1">
     Alternatively, we
    </span>
    <a id="_idIndexMarker557">
    </a>
    <span class="koboSpan" id="kobo.1449.1">
     can avoid using observables by reusing the instance of a component as soon as it remains rendered on the screen during consecutive navigations.
    </span>
    <span class="koboSpan" id="kobo.1449.2">
     We can achieve this behavior using child routes, as we will learn in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-175">
    <span class="koboSpan" id="kobo.1450.1">
     Reusing components using child routes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1451.1">
     Child routes are a
    </span>
    <a id="_idIndexMarker558">
    </a>
    <span class="koboSpan" id="kobo.1452.1">
     perfect solution
    </span>
    <a id="_idIndexMarker559">
    </a>
    <span class="koboSpan" id="kobo.1453.1">
     when we want a landing page component that will provide routing to other components.
    </span>
    <span class="koboSpan" id="kobo.1453.2">
     The component should contain a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1454.1">
      &lt;router-outlet&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1455.1">
     element in which child routes will be loaded.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1456.1">
     Suppose that we want to define the layout of our Angular application like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1457.1">
     <img alt="Shape  Description automatically generated with medium confidence" src="../Images/B21418_09_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1458.1">
     Figure 9.6: Master-detail layout
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1459.1">
     The scenario in the previous diagram requires the product list component to contain a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1460.1">
      &lt;router-outlet&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1461.1">
     element
    </span>
    <a id="_idIndexMarker560">
    </a>
    <span class="koboSpan" id="kobo.1462.1">
     to render the
    </span>
    <a id="_idIndexMarker561">
    </a>
    <span class="koboSpan" id="kobo.1463.1">
     product details component when the related route is activated.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1464.1">
     The product details component will be rendered in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1465.1">
      &lt;router-outlet&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1466.1">
     of the product list component and not in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1467.1">
      &lt;router-outlet&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1468.1">
     of the main application component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1469.1">
     The product details component is not destroyed when we navigate from one product to another.
    </span>
    <span class="koboSpan" id="kobo.1469.2">
     Instead, it remains in the DOM tree, and its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1470.1">
      ngOnInit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1471.1">
     method is called once, the first time we select a product.
    </span>
    <span class="koboSpan" id="kobo.1471.2">
     When we choose a new product from the list, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1472.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1473.1">
     observable emits the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1474.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1475.1">
     of the new product.
    </span>
    <span class="koboSpan" id="kobo.1475.2">
     The new product is fetched using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1476.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1477.1">
     class, and the component template is refreshed to reflect the new changes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1478.1">
     The route configuration of the application, in this case, would be as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1479.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1480.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1481.1">routes</span></span><span class="koboSpan" id="kobo.1482.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1483.1">Routes</span></span><span class="koboSpan" id="kobo.1484.1"> = [
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1485.1">{</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1486.1">path: 'products',</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1487.1">component: ProductListComponent,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1488.1">children: [</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1489.1">{ path: 'new', component: ProductCreateComponent },</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1490.1">{ path: ':id', component: ProductDetailComponent },</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1491.1">]</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1492.1">}</span></strong></span><span class="koboSpan" id="kobo.1493.1">,
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1494.1">path</span></span><span class="koboSpan" id="kobo.1495.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1496.1">'cart'</span></span><span class="koboSpan" id="kobo.1497.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1498.1">component</span></span><span class="koboSpan" id="kobo.1499.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1500.1">CartComponent</span></span><span class="koboSpan" id="kobo.1501.1"> },
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1502.1">path</span></span><span class="koboSpan" id="kobo.1503.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1504.1">''</span></span><span class="koboSpan" id="kobo.1505.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1506.1">redirectTo</span></span><span class="koboSpan" id="kobo.1507.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1508.1">'products'</span></span><span class="koboSpan" id="kobo.1509.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1510.1">pathMatch</span></span><span class="koboSpan" id="kobo.1511.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1512.1">'full'</span></span><span class="koboSpan" id="kobo.1513.1"> },
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1514.1">path</span></span><span class="koboSpan" id="kobo.1515.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1516.1">'**'</span></span><span class="koboSpan" id="kobo.1517.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1518.1">redirectTo</span></span><span class="koboSpan" id="kobo.1519.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1520.1">'products'</span></span><span class="koboSpan" id="kobo.1521.1"> }
];
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1522.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1523.1">
      children
     </span>
    </code>
    <span class="koboSpan" id="kobo.1524.1">
     property of the route definition object to define child routes containing a list of route definition objects.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1525.1">
      Notice also that we removed the word
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1526.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.1527.1">
      from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1528.1">
       path
      </span>
     </code>
     <span class="koboSpan" id="kobo.1529.1">
      property of the children routes because the parent route will append it.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1530.1">
     A parent route can also provide services to its children by using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1531.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.1532.1">
     property of the route definition
    </span>
    <a id="_idIndexMarker562">
    </a>
    <span class="koboSpan" id="kobo.1533.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.1533.2">
     Providing
    </span>
    <a id="_idIndexMarker563">
    </a>
    <span class="koboSpan" id="kobo.1534.1">
     services in a route is very helpful when we want to limit access to a subset of the routing configuration.
    </span>
    <span class="koboSpan" id="kobo.1534.2">
     If we wanted to restrict the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1535.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1536.1">
     class only to the product-related components, we should do the following:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1537.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1538.1">path</span></span><span class="koboSpan" id="kobo.1539.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1540.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1541.1">products'</span></span><span class="koboSpan" id="kobo.1542.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1543.1">component</span></span><span class="koboSpan" id="kobo.1544.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1545.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.1546.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1547.1">children</span></span><span class="koboSpan" id="kobo.1548.1">: [
    { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1549.1">path</span></span><span class="koboSpan" id="kobo.1550.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1551.1">'new'</span></span><span class="koboSpan" id="kobo.1552.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1553.1">component</span></span><span class="koboSpan" id="kobo.1554.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1555.1">ProductCreateComponent</span></span><span class="koboSpan" id="kobo.1556.1"> },
    { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1557.1">path</span></span><span class="koboSpan" id="kobo.1558.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1559.1">':id'</span></span><span class="koboSpan" id="kobo.1560.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1561.1">component</span></span><span class="koboSpan" id="kobo.1562.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1563.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1564.1"> },
  ],
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1565.1">providers: [ProductsService]</span></strong></span><span class="koboSpan" id="kobo.1566.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1567.1">
     Angular creates a separate injector when providing services in route definition objects, which is an immediate child of the root injector.
    </span>
    <span class="koboSpan" id="kobo.1567.2">
     Suppose the service is also provided in the root injector, and suppose the cart component uses that.
    </span>
    <span class="koboSpan" id="kobo.1567.3">
     In that case, the instance created by one of the product-related components will differ from that of the cart component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1568.1">
     We have
    </span>
    <a id="_idIndexMarker564">
    </a>
    <span class="koboSpan" id="kobo.1569.1">
     learned how to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1570.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1571.1">
     observable
    </span>
    <a id="_idIndexMarker565">
    </a>
    <span class="koboSpan" id="kobo.1572.1">
     in Angular routing.
    </span>
    <span class="koboSpan" id="kobo.1572.2">
     In the following section, we will discuss an alternative approach using snapshots.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-176">
    <span class="koboSpan" id="kobo.1573.1">
     Taking a snapshot of route parameters
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1574.1">
     When we select a
    </span>
    <a id="_idIndexMarker566">
    </a>
    <span class="koboSpan" id="kobo.1575.1">
     product from the list, the product list component is removed from the DOM tree, and the product details component is added.
    </span>
    <span class="koboSpan" id="kobo.1575.2">
     To choose a different product, we need to click on either the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.1576.1">
      Products
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1577.1">
     link or the back button of our browser.
    </span>
    <span class="koboSpan" id="kobo.1577.2">
     Consequently, the product details component is replaced by the product list component in the DOM.
    </span>
    <span class="koboSpan" id="kobo.1577.3">
     So, we are in a situation where only one component is displayed on the screen at any time.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1578.1">
     When the product details component is destroyed, so is its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1579.1">
      ngOnInit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1580.1">
     method and the subscription to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1581.1">
      paramMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1582.1">
     observable.
    </span>
    <span class="koboSpan" id="kobo.1582.2">
     So, we do not benefit from using observables at this point.
    </span>
    <span class="koboSpan" id="kobo.1582.3">
     Alternatively, we could use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1583.1">
      snapshot
     </span>
    </code>
    <span class="koboSpan" id="kobo.1584.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1585.1">
      ActivatedRoute
     </span>
    </code>
    <span class="koboSpan" id="kobo.1586.1">
     service to get values for route parameters, as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1587.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1588.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1589.1">void</span></span><span class="koboSpan" id="kobo.1590.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1591.1">const</span></span><span class="koboSpan" id="kobo.1592.1"> id = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1593.1">this</span></span><span class="koboSpan" id="kobo.1594.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1595.1">route</span></span><span class="koboSpan" id="kobo.1596.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1597.1">snapshot</span></span><span class="koboSpan" id="kobo.1598.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1599.1">params</span></span><span class="koboSpan" id="kobo.1600.1">[</span><span class="hljs-string"><span class="koboSpan" id="kobo.1601.1">'id'</span></span><span class="koboSpan" id="kobo.1602.1">];
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1603.1">this</span></span><span class="koboSpan" id="kobo.1604.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1605.1">product$</span></span><span class="koboSpan" id="kobo.1606.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1607.1">this</span></span><span class="koboSpan" id="kobo.1608.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1609.1">productService</span></span><span class="koboSpan" id="kobo.1610.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1611.1">getProduct</span></span><span class="koboSpan" id="kobo.1612.1">(id);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1613.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1614.1">
      snapshot
     </span>
    </code>
    <span class="koboSpan" id="kobo.1615.1">
     property represents the current value of a route parameter, which also happens to be the initial value.
    </span>
    <span class="koboSpan" id="kobo.1615.2">
     It contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1616.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.1617.1">
     property, an object of route parameter key-value pairs we can access.
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.1618.1">
      If you are sure your component will not be reused, use the snapshot approach.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1619.1">
     So far, we have dealt with routing parameters in the form of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1620.1">
      products/:id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1621.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1621.2">
     We use these parameters to navigate to a component that requires the parameter.
    </span>
    <span class="koboSpan" id="kobo.1621.3">
     In our case, the product details component requires the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1622.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1623.1">
     parameter to get specific product details.
    </span>
    <span class="koboSpan" id="kobo.1623.2">
     However, there is another type of route parameter when we need it to be optional, as we will learn in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-177">
    <span class="koboSpan" id="kobo.1624.1">
     Filtering data using query parameters
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1625.1">
     In
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1626.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.1627.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1628.1">
      Communicating with Data Services over HTTP
     </span>
    </em>
    <span class="koboSpan" id="kobo.1629.1">
     , we learned how to pass query parameters
    </span>
    <a id="_idIndexMarker567">
    </a>
    <span class="koboSpan" id="kobo.1630.1">
     to a request
    </span>
    <a id="_idIndexMarker568">
    </a>
    <span class="koboSpan" id="kobo.1631.1">
     using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1632.1">
      HttpParams
     </span>
    </code>
    <span class="koboSpan" id="kobo.1633.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.1633.2">
     The Angular router also supports passing query parameters through the application’s URL.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1634.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1635.1">
      getProducts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1636.1">
     method in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1637.1">
      products.service.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1638.1">
     file uses HTTP query parameters to limit product results returned from the Fake Store API:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1639.1">getProducts</span></span><span class="koboSpan" id="kobo.1640.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1641.1">Observable</span></span><span class="koboSpan" id="kobo.1642.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1643.1">Product</span></span><span class="koboSpan" id="kobo.1644.1">[]&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1645.1">if</span></span><span class="koboSpan" id="kobo.1646.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1647.1">this</span></span><span class="koboSpan" id="kobo.1648.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1649.1">products</span></span><span class="koboSpan" id="kobo.1650.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1651.1">length</span></span><span class="koboSpan" id="kobo.1652.1"> === </span><span class="hljs-number"><span class="koboSpan" id="kobo.1653.1">0</span></span><span class="koboSpan" id="kobo.1654.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1655.1">const</span></span><span class="koboSpan" id="kobo.1656.1"> options = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1657.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1658.1">HttpParams</span></span><span class="koboSpan" id="kobo.1659.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1660.1">set</span></span><span class="koboSpan" id="kobo.1661.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1662.1">'limit'</span></span><span class="koboSpan" id="kobo.1663.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1664.1">10</span></span><span class="koboSpan" id="kobo.1665.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1666.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1667.1">this</span></span><span class="koboSpan" id="kobo.1668.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1669.1">http</span></span><span class="koboSpan" id="kobo.1670.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1671.1">get</span></span><span class="koboSpan" id="kobo.1672.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1673.1">Product</span></span><span class="koboSpan" id="kobo.1674.1">[]&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1675.1">this</span></span><span class="koboSpan" id="kobo.1676.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1677.1">productsUrl</span></span><span class="koboSpan" id="kobo.1678.1">, {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1679.1">params</span></span><span class="koboSpan" id="kobo.1680.1">: options
    }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1681.1">pipe</span></span><span class="koboSpan" id="kobo.1682.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1683.1">map</span></span><span class="koboSpan" id="kobo.1684.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1685.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1686.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1687.1"> {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1688.1">this</span></span><span class="koboSpan" id="kobo.1689.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1690.1">products</span></span><span class="koboSpan" id="kobo.1691.1"> = products;
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1692.1">return</span></span><span class="koboSpan" id="kobo.1693.1"> products;
    }));
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1694.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1695.1">of</span></span><span class="koboSpan" id="kobo.1696.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1697.1">this</span></span><span class="koboSpan" id="kobo.1698.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1699.1">products</span></span><span class="koboSpan" id="kobo.1700.1">);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1701.1">
     It uses a hardcoded value for setting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1702.1">
      limit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1703.1">
     query parameter.
    </span>
    <span class="koboSpan" id="kobo.1703.2">
     We will modify the application so that the
    </span>
    <a id="_idIndexMarker569">
    </a>
    <span class="koboSpan" id="kobo.1704.1">
     product list component passes the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1705.1">
      limit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1706.1">
     value dynamically:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1707.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1708.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1709.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1710.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1711.1">
      method so that the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1712.1">
       limit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1713.1">
      is passed as a parameter:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1714.1">getProducts</span></span><span class="koboSpan" id="kobo.1715.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1716.1">limit?: number</span></strong></span><span class="koboSpan" id="kobo.1717.1">): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1718.1">Observable</span></span><span class="koboSpan" id="kobo.1719.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1720.1">Product</span></span><span class="koboSpan" id="kobo.1721.1">[]&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1722.1">if</span></span><span class="koboSpan" id="kobo.1723.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1724.1">this</span></span><span class="koboSpan" id="kobo.1725.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1726.1">products</span></span><span class="koboSpan" id="kobo.1727.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1728.1">length</span></span><span class="koboSpan" id="kobo.1729.1"> === </span><span class="hljs-number"><span class="koboSpan" id="kobo.1730.1">0</span></span><span class="koboSpan" id="kobo.1731.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1732.1">const</span></span><span class="koboSpan" id="kobo.1733.1"> options = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1734.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1735.1">HttpParams</span></span><span class="koboSpan" id="kobo.1736.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1737.1">set</span></span><span class="koboSpan" id="kobo.1738.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1739.1">'limit'</span></span><span class="koboSpan" id="kobo.1740.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1741.1">limit ||</span></strong></span> <span class="hljs-number"><span class="koboSpan" id="kobo.1742.1">10</span></span><span class="koboSpan" id="kobo.1743.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1744.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1745.1">this</span></span><span class="koboSpan" id="kobo.1746.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1747.1">http</span></span><span class="koboSpan" id="kobo.1748.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1749.1">get</span></span><span class="koboSpan" id="kobo.1750.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1751.1">Product</span></span><span class="koboSpan" id="kobo.1752.1">[]&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1753.1">this</span></span><span class="koboSpan" id="kobo.1754.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1755.1">productsUrl</span></span><span class="koboSpan" id="kobo.1756.1">, {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1757.1">params</span></span><span class="koboSpan" id="kobo.1758.1">: options
    }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1759.1">pipe</span></span><span class="koboSpan" id="kobo.1760.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1761.1">map</span></span><span class="koboSpan" id="kobo.1762.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1763.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1764.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1765.1"> {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1766.1">this</span></span><span class="koboSpan" id="kobo.1767.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1768.1">products</span></span><span class="koboSpan" id="kobo.1769.1"> = products;
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1770.1">return</span></span><span class="koboSpan" id="kobo.1771.1"> products;
    }));
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1772.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1773.1">of</span></span><span class="koboSpan" id="kobo.1774.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1775.1">this</span></span><span class="koboSpan" id="kobo.1776.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1777.1">products</span></span><span class="koboSpan" id="kobo.1778.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1779.1">
     In the preceding method, if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1780.1">
      limit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1781.1">
     value is
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1782.1">
      falsy
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1783.1">
     , we pass a default value of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1784.1">
      10
     </span>
    </code>
    <span class="koboSpan" id="kobo.1785.1">
     to the query parameter.
    </span>
   </p>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1786.1">
      A falsy value evaluates to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1787.1">
       False
      </span>
     </code>
     <span class="koboSpan" id="kobo.1788.1">
      in a Boolean context and can be
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1789.1">
       null
      </span>
     </code>
     <span class="koboSpan" id="kobo.1790.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1791.1">
       undefined
      </span>
     </code>
     <span class="koboSpan" id="kobo.1792.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1793.1">
       0
      </span>
     </code>
     <span class="koboSpan" id="kobo.1794.1">
      , or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1795.1">
       False
      </span>
     </code>
     <span class="koboSpan" id="kobo.1796.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1796.2">
      You can read more at
     </span>
     <a href="https://developer.mozilla.org/docs/Glossary/Falsy">
      <span class="url">
       <span class="koboSpan" id="kobo.1797.1">
        https://developer.mozilla.org/docs/Glossary/Falsy
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1798.1">
      .
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.1799.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1800.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1801.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1802.1">
       ActivatedRoute
      </span>
     </code>
     <span class="koboSpan" id="kobo.1803.1">
      service and the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1804.1">
       switchMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1805.1">
      RxJS operator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1806.1">import</span></span><span class="koboSpan" id="kobo.1807.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1808.1">RouterLink</span></span><span class="koboSpan" id="kobo.1809.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1810.1">ActivatedRoute</span></strong></span><span class="koboSpan" id="kobo.1811.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1812.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1813.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.1814.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1815.1">import</span></span><span class="koboSpan" id="kobo.1816.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1817.1">Observable</span></span><span class="koboSpan" id="kobo.1818.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1819.1">switchMap</span></strong></span><span class="koboSpan" id="kobo.1820.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1821.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1822.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1823.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1824.1">
      Inject the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1825.1">
       ActivatedRoute
      </span>
     </code>
     <span class="koboSpan" id="kobo.1826.1">
      service in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1827.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1828.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1829.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1830.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1831.1">constructor</span></span><span class="koboSpan" id="kobo.1832.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1833.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1834.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1835.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1836.1">ProductsService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1837.1">, </span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1838.1">private route: ActivatedRoute</span></strong></span><span class="koboSpan" id="kobo.1839.1">) {}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1840.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1841.1">
       ActivatedRoute
      </span>
     </code>
     <span class="koboSpan" id="kobo.1842.1">
      service contains a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1843.1">
       queryParamMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1844.1">
      observable that we can subscribe to
     </span>
     <a id="_idIndexMarker570">
     </a>
     <span class="koboSpan" id="kobo.1845.1">
      get query
     </span>
     <a id="_idIndexMarker571">
     </a>
     <span class="koboSpan" id="kobo.1846.1">
      parameter values.
     </span>
     <span class="koboSpan" id="kobo.1846.2">
      It returns a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1847.1">
       ParamMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1848.1">
      object, similar to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1849.1">
       paramMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1850.1">
      observable we saw earlier, which we can query to get parameter values.
     </span>
     <span class="koboSpan" id="kobo.1850.2">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1851.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1852.1">
      method to use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1853.1">
       queryParamMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1854.1">
      observable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1855.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1856.1">getProducts</span></span><span class="koboSpan" id="kobo.1857.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1858.1">this</span></span><span class="koboSpan" id="kobo.1859.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1860.1">products$</span></span><span class="koboSpan" id="kobo.1861.1"> = </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1862.1">this.route.queryParamMap.pipe(</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1863.1">switchMap(params =&gt; {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1864.1">return this.productService.getProducts(Number(params.get('limit')));</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1865.1">})</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1866.1">);</span></strong></span><span class="koboSpan" id="kobo.1867.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1868.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1869.1">
      switchMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1870.1">
     RxJS operator to pipe the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1871.1">
      limit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1872.1">
     parameter from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1873.1">
      queryParamMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1874.1">
     observable to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1875.1">
      getProducts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1876.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1877.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1878.1">
     class as a number.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.1879.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1880.1">
       ng
      </span>
     </code>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1881.1">
       serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.1882.1">
      command to start the application and navigate to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1883.1">
       http://localhost:4200?limit=5
      </span>
     </code>
     <span class="koboSpan" id="kobo.1884.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1884.2">
      You should see a list of 5 products:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1885.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1886.1">
     Figure 9.7: Filtered product list
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1887.1">
     Try to experiment with different values for the limit parameter and observe the output.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1888.1">
     Query parameters in routing are powerful and can be used for various use cases, such as filtering and sorting
    </span>
    <a id="_idIndexMarker572">
    </a>
    <span class="koboSpan" id="kobo.1889.1">
     data.
    </span>
    <span class="koboSpan" id="kobo.1889.2">
     They can also
    </span>
    <a id="_idIndexMarker573">
    </a>
    <span class="koboSpan" id="kobo.1890.1">
     be used when working with snapshot-based routing.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1891.1">
     In the following section, we will explore a new innovative way to pass route parameters using component input properties.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-178">
    <span class="koboSpan" id="kobo.1892.1">
     Binding input properties to routes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1893.1">
     We have already
    </span>
    <a id="_idIndexMarker574">
    </a>
    <span class="koboSpan" id="kobo.1894.1">
     learned, in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1895.1">
      Chapter 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1896.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1897.1">
      Structuring User Interfaces with Components
     </span>
    </em>
    <span class="koboSpan" id="kobo.1898.1">
     , that we use input and output bindings to inter-communicate between components.
    </span>
    <span class="koboSpan" id="kobo.1898.2">
     An input binding can also pass route parameters while navigating to a component.
    </span>
    <span class="koboSpan" id="kobo.1898.3">
     We will see an example using the product detail component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1899.1">
      The input binding with route parameters is not enabled by default in the Angular router.
     </span>
     <span class="koboSpan" id="kobo.1899.2">
      We must activate it from the application configuration file.
     </span>
     <span class="koboSpan" id="kobo.1899.3">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1900.1">
       app.config.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1901.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1902.1">
       withComponentInputBinding
      </span>
     </code>
     <span class="koboSpan" id="kobo.1903.1">
      function from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1904.1">
       @angular/router
      </span>
     </code>
     <span class="koboSpan" id="kobo.1905.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1906.1">import</span></span><span class="koboSpan" id="kobo.1907.1"> { provideRouter, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1908.1">withComponentInputBinding</span></strong></span><span class="koboSpan" id="kobo.1909.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1910.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1911.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.1912.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1913.1">
      Pass the preceding function as the second parameter in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1914.1">
       provideRouter
      </span>
     </code>
     <span class="koboSpan" id="kobo.1915.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1916.1">provideRouter</span></span><span class="koboSpan" id="kobo.1917.1">(routes, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1918.1">withComponentInputBinding()</span></strong></span><span class="koboSpan" id="kobo.1919.1">),
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1920.1">
      Now, open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1921.1">
       product-detail.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1922.1">
      file and change the type of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1923.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1924.1">
      component property to a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1925.1">
       string
      </span>
     </code>
     <span class="koboSpan" id="kobo.1926.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1927.1">id = input&lt;</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1928.1">string</span></strong></span><span class="koboSpan" id="kobo.1929.1">&gt;();
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1930.1">
     We must change
    </span>
    <a id="_idIndexMarker575">
    </a>
    <span class="koboSpan" id="kobo.1931.1">
     the property type because routing parameters are passed as strings.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.1932.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1933.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1934.1">
      method to use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1935.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1936.1">
      parameter to fetch a product:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1937.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1938.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1939.1">void</span></span><span class="koboSpan" id="kobo.1940.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1941.1">this.product$ = this.productService.getProduct(Number(this.id()!));</span></strong></span><span class="koboSpan" id="kobo.1942.1">
} 
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1943.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1944.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.1945.1">
      command and verify that the product details are displayed upon selecting a product from the list.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1946.1">
     Binding route parameters to component input properties has the following advantages:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1947.1">
      The TypeScript component class is simpler because we do not have asynchronous calls with observables
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1948.1">
      We can access existing components that work with input and output bindings using a route
     </span>
    </li>
   </ul>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1949.1">
      Input binding works with components that are activated via routing.
     </span>
     <span class="koboSpan" id="kobo.1949.2">
      If we want to access any route parameter from another component, we must use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1950.1">
       ActivatedRoute
      </span>
     </code>
     <span class="koboSpan" id="kobo.1951.1">
      service.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1952.1">
     Now that we have learned all the different ways to pass parameters during navigation, we have covered all the essential information we need to start building Angular applications with
    </span>
    <a id="_idIndexMarker576">
    </a>
    <span class="koboSpan" id="kobo.1953.1">
     routing.
    </span>
    <span class="koboSpan" id="kobo.1953.2">
     In the following sections, we will focus on advanced practices that enhance the user experience when using in-app navigation in Angular applications.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-179">
    <span class="koboSpan" id="kobo.1954.1">
     Enhancing navigation with advanced features
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1955.1">
     So far, we have
    </span>
    <a id="_idIndexMarker577">
    </a>
    <span class="koboSpan" id="kobo.1956.1">
     covered basic routing with route and query parameters.
    </span>
    <span class="koboSpan" id="kobo.1956.2">
     The Angular router is quite capable, though, and able to do much more, such as the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1957.1">
      Controlling access to a route
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1958.1">
      Preventing navigation away from a route
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1959.1">
      Prefetching data to improve application UX
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1960.1">
      Lazy-loading routes to speed up response time
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1961.1">
     In the following sections, we will learn about all these techniques in more detail.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-180">
    <span class="koboSpan" id="kobo.1962.1">
     Controlling route access
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1963.1">
     When we want to
    </span>
    <a id="_idIndexMarker578">
    </a>
    <span class="koboSpan" id="kobo.1964.1">
     control access to
    </span>
    <a id="_idIndexMarker579">
    </a>
    <span class="koboSpan" id="kobo.1965.1">
     a particular route, we use a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1966.1">
      guard
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1967.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1967.2">
     To create a guard, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1968.1">
      ng generate
     </span>
    </code>
    <span class="koboSpan" id="kobo.1969.1">
     command of the Angular CLI, passing the word
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1970.1">
      guard
     </span>
    </code>
    <span class="koboSpan" id="kobo.1971.1">
     and its name as parameters:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1972.1">ng generate guard auth
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1973.1">
     When we execute the previous command, the Angular CLI asks what type of guard we would like to create.
    </span>
    <span class="koboSpan" id="kobo.1973.2">
     There are multiple types of guards that we can create according to the functionality that they provide:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1974.1">
       CanActivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.1975.1">
      : Controls whether a route can be activated
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1976.1">
       CanActivateChild
      </span>
     </code>
     <span class="koboSpan" id="kobo.1977.1">
      : Controls whether children routes can be activated
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1978.1">
       CanDeactivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.1979.1">
      : Controls whether a route can be deactivated
     </span>
    </li>
   </ul>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1980.1">
      Deactivation happens when we navigate away from a route.
     </span>
    </p>
   </div>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1981.1">
       CanMatch
      </span>
     </code>
     <span class="koboSpan" id="kobo.1982.1">
      : Controls whether a route can be accessed at all
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1983.1">
     Select
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1984.1">
      CanActivate
     </span>
    </code>
    <span class="koboSpan" id="kobo.1985.1">
     and press
    </span>
    <em class="keystroke">
     <span class="koboSpan" id="kobo.1986.1">
      Enter
     </span>
    </em>
    <span class="koboSpan" id="kobo.1987.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1987.2">
     The Angular CLI creates the following
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1988.1">
      auth.guard.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1989.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1990.1">import</span></span><span class="koboSpan" id="kobo.1991.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1992.1">CanActivateFn</span></span><span class="koboSpan" id="kobo.1993.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1994.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1995.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.1996.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1997.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1998.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1999.1">authGuard</span></span><span class="koboSpan" id="kobo.2000.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2001.1">CanActivateFn</span></span><span class="koboSpan" id="kobo.2002.1"> = </span><span class="hljs-function"><span class="koboSpan" id="kobo.2003.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2004.1">route, state</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2005.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2006.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2007.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2008.1">true</span></span><span class="koboSpan" id="kobo.2009.1">;
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2010.1">
     The guard that we created is a function of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2011.1">
      CanActivateFn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2012.1">
     , which accepts two parameters:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2013.1">
       route
      </span>
     </code>
     <span class="koboSpan" id="kobo.2014.1">
      : Indicates the route that will be activated
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2015.1">
       state
      </span>
     </code>
     <span class="koboSpan" id="kobo.2016.1">
      : Contains the state of the router upon successful navigation
     </span>
    </li>
   </ul>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2017.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2018.1">
       CanActivateFn
      </span>
     </code>
     <span class="koboSpan" id="kobo.2019.1">
      function can return a boolean value, either synchronously or asynchronously.
     </span>
     <span class="koboSpan" id="kobo.2019.2">
      In the latter case, the router will wait for the observable or the promise to resolve before continuing.
     </span>
     <span class="koboSpan" id="kobo.2019.3">
      If the asynchronous event does not complete, the navigation will not continue.
     </span>
     <span class="koboSpan" id="kobo.2019.4">
      It can also return a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2020.1">
       UrlTree
      </span>
     </code>
     <span class="koboSpan" id="kobo.2021.1">
      object, which will cause new navigation to a defined route.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2022.1">
     Our guard
    </span>
    <a id="_idIndexMarker580">
    </a>
    <span class="koboSpan" id="kobo.2023.1">
     returns
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2024.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.2025.1">
     immediately, allowing
    </span>
    <a id="_idIndexMarker581">
    </a>
    <span class="koboSpan" id="kobo.2026.1">
     free access to the route.
    </span>
    <span class="koboSpan" id="kobo.2026.2">
     Let’s add custom logic to control access based on whether the user is logged in:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2027.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2028.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2029.1">
      statements as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2030.1">import { inject } from '@angular/core';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2031.1">import</span></span><span class="koboSpan" id="kobo.2032.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2033.1">CanActivateFn</span></span><span class="koboSpan" id="kobo.2034.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2035.1">Router</span></strong></span><span class="koboSpan" id="kobo.2036.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2037.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2038.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2039.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2040.1">import { AuthService } from './auth.service';</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2041.1">
      Replace the body of the arrow function with the following snippet:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2042.1">const</span></span><span class="koboSpan" id="kobo.2043.1"> authService = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2044.1">inject</span></span><span class="koboSpan" id="kobo.2045.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2046.1">AuthService</span></span><span class="koboSpan" id="kobo.2047.1">);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2048.1">const</span></span><span class="koboSpan" id="kobo.2049.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2050.1">inject</span></span><span class="koboSpan" id="kobo.2051.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2052.1">Router</span></span><span class="koboSpan" id="kobo.2053.1">);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2054.1">if</span></span><span class="koboSpan" id="kobo.2055.1"> (authService.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2056.1">isLoggedIn</span></span><span class="koboSpan" id="kobo.2057.1">()) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2058.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2059.1">true</span></span><span class="koboSpan" id="kobo.2060.1">;
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2061.1">return</span></span><span class="koboSpan" id="kobo.2062.1"> router.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2063.1">parseUrl</span></span><span class="koboSpan" id="kobo.2064.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2065.1">'/'</span></span><span class="koboSpan" id="kobo.2066.1">);
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2067.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2068.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.2069.1">
     method to inject the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2070.1">
      AuthService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2071.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2072.1">
      Router
     </span>
    </code>
    <span class="koboSpan" id="kobo.2073.1">
     services into the function.
    </span>
    <span class="koboSpan" id="kobo.2073.2">
     We then check the value of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2074.1">
      isLoggedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2075.1">
     signal.
    </span>
    <span class="koboSpan" id="kobo.2075.2">
     If it is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2076.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.2077.1">
     , we allow the application to navigate to the requested route.
    </span>
    <span class="koboSpan" id="kobo.2077.2">
     Otherwise, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2078.1">
      parseUrl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2079.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2080.1">
      Router
     </span>
    </code>
    <span class="koboSpan" id="kobo.2081.1">
     service to navigate to the root path of the Angular application.
    </span>
   </p>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.2082.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2083.1">
       parseUrl
      </span>
     </code>
     <span class="koboSpan" id="kobo.2084.1">
      method returns a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2085.1">
       UrlTree
      </span>
     </code>
     <span class="koboSpan" id="kobo.2086.1">
      object, which effectively cancels the previous navigation and redirects the user to the URL passed in the parameter.
     </span>
     <span class="koboSpan" id="kobo.2086.2">
      It is advised to use it over the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2087.1">
       navigate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2088.1">
      method, which may introduce unexpected behavior and can lead to complex navigation issues.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.2089.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2090.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2091.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2092.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2093.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2094.1">import</span></span><span class="koboSpan" id="kobo.2095.1"> { authGuard } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2096.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2097.1">'./auth.guard'</span></span><span class="koboSpan" id="kobo.2098.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2099.1">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2100.1">
       authGuard
      </span>
     </code>
     <span class="koboSpan" id="kobo.2101.1">
      function
     </span>
     <a id="_idIndexMarker582">
     </a>
     <span class="koboSpan" id="kobo.2102.1">
      in
     </span>
     <a id="_idIndexMarker583">
     </a>
     <span class="koboSpan" id="kobo.2103.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2104.1">
       canActivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2105.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2106.1">
       cart
      </span>
     </code>
     <span class="koboSpan" id="kobo.2107.1">
      route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2108.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2109.1">path</span></span><span class="koboSpan" id="kobo.2110.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2111.1">'cart'</span></span><span class="koboSpan" id="kobo.2112.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2113.1">component</span></span><span class="koboSpan" id="kobo.2114.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2115.1">CartComponent</span></span><span class="koboSpan" id="kobo.2116.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2117.1">canActivate: [authGuard]</span></strong></span><span class="koboSpan" id="kobo.2118.1">
}
</span></code></pre>
    </li>
   </ol>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2119.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2120.1">
       canActivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2121.1">
      property is an array because multiple guards can control route activation.
     </span>
     <span class="koboSpan" id="kobo.2121.2">
      The order of guards in the array is important.
     </span>
     <span class="koboSpan" id="kobo.2121.3">
      If one of the guards fails to pass, Angular will prevent access to the route.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2122.1">
     Only authenticated users can now access the shopping cart.
    </span>
    <span class="koboSpan" id="kobo.2122.2">
     If you run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2123.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.2124.1">
     command and click the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2125.1">
      My Cart
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2126.1">
     link, you will notice that nothing happens.
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.2127.1">
      When you try to access the shopping cart from the product list, you always remain on the same page.
     </span>
     <span class="koboSpan" id="kobo.2127.2">
      This is because the redirection that happens due to the authentication guard does not have any effect when you are already in the redirected route.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2128.1">
     Another guard
    </span>
    <a id="_idIndexMarker584">
    </a>
    <span class="koboSpan" id="kobo.2129.1">
     type related to the
    </span>
    <a id="_idIndexMarker585">
    </a>
    <span class="koboSpan" id="kobo.2130.1">
     activation of a route is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2131.1">
      CanDeactivate
     </span>
    </code>
    <span class="koboSpan" id="kobo.2132.1">
     guard.
    </span>
    <span class="koboSpan" id="kobo.2132.2">
     In the following section, we will learn how to use it to prevent a user leaving a route.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-181">
    <span class="koboSpan" id="kobo.2133.1">
     Preventing navigation away from a route
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2134.1">
     A guard that
    </span>
    <a id="_idIndexMarker586">
    </a>
    <span class="koboSpan" id="kobo.2135.1">
     controls if a route can be deactivated is a function of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2136.1">
      CanDeactivateFn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2137.1">
     type.
    </span>
    <span class="koboSpan" id="kobo.2137.2">
     We will learn how to use it by implementing a guard that notifies the user of pending products in the cart when they navigate away from the cart component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2138.1">
      Run the following command to generate a new guard:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2139.1">ng generate guard checkout
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2140.1">
      Select the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2141.1">
       CanDeactivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2142.1">
      type from the list and press
     </span>
     <em class="keystroke">
      <span class="koboSpan" id="kobo.2143.1">
       Enter
      </span>
     </em>
     <span class="koboSpan" id="kobo.2144.1">
      .
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2145.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2146.1">
       checkout.guard.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2147.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2148.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2149.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2150.1">import</span></span><span class="koboSpan" id="kobo.2151.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2152.1">CartComponent</span></span><span class="koboSpan" id="kobo.2153.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2154.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2155.1">'./cart/cart.component'</span></span><span class="koboSpan" id="kobo.2156.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2157.1">
      Change the generic of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2158.1">
       CanDeactivateFn
      </span>
     </code>
     <span class="koboSpan" id="kobo.2159.1">
      to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2160.1">
       CartComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.2161.1">
      and remove the parameters of the arrow function.
     </span>
    </li>
   </ol>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.2162.1">
      In a real-world scenario, we will probably need to add more components in the generics to create a generic guard.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.2163.1">
      Replace the body of the arrow function with the following snippet:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2164.1">const</span></span><span class="koboSpan" id="kobo.2165.1"> confirmation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2166.1">confirm</span></span><span class="koboSpan" id="kobo.2167.1">(
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.2168.1">'You have pending items in your cart. </span><span class="koboSpan" id="kobo.2168.2">Do you want to continue?'</span></span><span class="koboSpan" id="kobo.2169.1">
);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2170.1">return</span></span><span class="koboSpan" id="kobo.2171.1"> confirmation;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2172.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2173.1">
      confirm
     </span>
    </code>
    <span class="koboSpan" id="kobo.2174.1">
     method of the global
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2175.1">
      window
     </span>
    </code>
    <span class="koboSpan" id="kobo.2176.1">
     object to display a confirmation dialog before navigating away from the cart component.
    </span>
    <span class="koboSpan" id="kobo.2176.2">
     The application execution will wait until the confirmation dialog is dismissed as a user interaction.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.2177.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2178.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2179.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2180.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2181.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2182.1">import</span></span><span class="koboSpan" id="kobo.2183.1"> { checkoutGuard } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2184.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2185.1">'./checkout.guard'</span></span><span class="koboSpan" id="kobo.2186.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2187.1">
      A route definition object contains a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2188.1">
       canDeactivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2189.1">
      array similar to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2190.1">
       canActivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2191.1">
      .
     </span>
     <span class="koboSpan" id="kobo.2191.2">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2192.1">
       checkoutGuard
      </span>
     </code>
     <span class="koboSpan" id="kobo.2193.1">
      function to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2194.1">
       canDeactivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2195.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2196.1">
       cart
      </span>
     </code>
     <span class="koboSpan" id="kobo.2197.1">
      route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2198.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2199.1">path</span></span><span class="koboSpan" id="kobo.2200.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2201.1">'cart'</span></span><span class="koboSpan" id="kobo.2202.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2203.1">component</span></span><span class="koboSpan" id="kobo.2204.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2205.1">CartComponent</span></span><span class="koboSpan" id="kobo.2206.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2207.1">canActivate</span></span><span class="koboSpan" id="kobo.2208.1">: [authGuard],
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2209.1">canDeactivate: [checkoutGuard]</span></strong></span><span class="koboSpan" id="kobo.2210.1">
}
</span></code></pre>
    </li>
   </ol>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2211.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2212.1">
       canDeactivate
      </span>
     </code>
     <span class="koboSpan" id="kobo.2213.1">
      property is an array because multiple guards can control route deactivation.
     </span>
     <span class="koboSpan" id="kobo.2213.2">
      The order of guards in the array is important.
     </span>
     <span class="koboSpan" id="kobo.2213.3">
      If one of the guards fails to pass, Angular will prevent a user leaving the route.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2214.1">
     For such a simple
    </span>
    <a id="_idIndexMarker587">
    </a>
    <span class="koboSpan" id="kobo.2215.1">
     scenario, we could have written the logic of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2216.1">
      checkoutGuard
     </span>
    </code>
    <span class="koboSpan" id="kobo.2217.1">
     function inline to avoid the creation of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2218.1">
      checkout.guard.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2219.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2220.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2221.1">path</span></span><span class="koboSpan" id="kobo.2222.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2223.1">'cart'</span></span><span class="koboSpan" id="kobo.2224.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2225.1">component</span></span><span class="koboSpan" id="kobo.2226.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2227.1">CartComponent</span></span><span class="koboSpan" id="kobo.2228.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2229.1">canActivate</span></span><span class="koboSpan" id="kobo.2230.1">: [authGuard],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2231.1">canDeactivate</span></span><span class="koboSpan" id="kobo.2232.1">: [</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2233.1">() =&gt; confirm('You have pending items in your cart. </span><span class="koboSpan" id="kobo.2233.2">Do you want to continue?')</span></strong></span><span class="koboSpan" id="kobo.2234.1">]
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2235.1">
     Run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2236.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.2237.1">
     command and click the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2238.1">
      My Cart
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2239.1">
     link after you have logged in.
    </span>
    <span class="koboSpan" id="kobo.2239.2">
     If you then click on the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2240.1">
      Products
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2241.1">
     link or press the back button of the browser, you should see a dialog with the following message:
    </span>
   </p>
   <p class="normal">
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2242.1">
      You have pending items in your cart.
     </span>
     <span class="koboSpan" id="kobo.2242.2">
      Do you want to continue?
     </span>
    </strong>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2243.1">
     If you click the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2244.1">
      Cancel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2245.1">
     button, the navigation is canceled, and the application remains in its current state.
    </span>
    <span class="koboSpan" id="kobo.2245.2">
     If you click the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2246.1">
      OK
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2247.1">
     button, you will be redirected to the product list.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-182">
    <span class="koboSpan" id="kobo.2248.1">
     Prefetching route data
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2249.1">
     You may have
    </span>
    <a id="_idIndexMarker588">
    </a>
    <span class="koboSpan" id="kobo.2250.1">
     noticed that
    </span>
    <a id="_idIndexMarker589">
    </a>
    <span class="koboSpan" id="kobo.2251.1">
     when you navigate to the root path of the application for the first time, there is a delay in displaying the product list.
    </span>
    <span class="koboSpan" id="kobo.2251.2">
     It is reasonable since we are making an HTTP request to the backend API.
    </span>
    <span class="koboSpan" id="kobo.2251.3">
     However, the product list component was already initialized at that time.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2252.1">
     The preceding behavior may lead to unwanted effects if the component contains logic that interacts with data during initialization.
    </span>
    <span class="koboSpan" id="kobo.2252.2">
     To solve this problem, we can use a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2253.1">
      resolver
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2254.1">
     to prefetch the product list and load the component when data are available.
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.2255.1">
      A resolver can be handy when handling possible errors before activating a route.
     </span>
     <span class="koboSpan" id="kobo.2255.2">
      It would be more appropriate to navigate to an error page if the request to the API does not succeed instead of displaying a blank page.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2256.1">
     To create a resolver, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2257.1">
      ng generate
     </span>
    </code>
    <span class="koboSpan" id="kobo.2258.1">
     command of the Angular CLI, passing the word
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2259.1">
      resolver
     </span>
    </code>
    <span class="koboSpan" id="kobo.2260.1">
     and its name as parameters:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2261.1">ng generate resolver products
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2262.1">
     The preceding command creates the following
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2263.1">
      products.resolver.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2264.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2265.1">import</span></span><span class="koboSpan" id="kobo.2266.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2267.1">ResolveFn</span></span><span class="koboSpan" id="kobo.2268.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2269.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2270.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2271.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2272.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2273.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2274.1">productsResolver</span></span><span class="koboSpan" id="kobo.2275.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2276.1">ResolveFn</span></span><span class="koboSpan" id="kobo.2277.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2278.1">boolean</span></span><span class="koboSpan" id="kobo.2279.1">&gt; = </span><span class="hljs-function"><span class="koboSpan" id="kobo.2280.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2281.1">route, state</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2282.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2283.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2284.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2285.1">true</span></span><span class="koboSpan" id="kobo.2286.1">;
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2287.1">
     The resolver that we created is a function of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2288.1">
      ResolveFn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2289.1">
     , which accepts two parameters:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2290.1">
       route
      </span>
     </code>
     <span class="koboSpan" id="kobo.2291.1">
      : Indicates the route that will be activated
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2292.1">
       state
      </span>
     </code>
     <span class="koboSpan" id="kobo.2293.1">
      : Contains the state of the activated route
     </span>
    </li>
   </ul>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2294.1">
      A
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2295.1">
       ResolveFn
      </span>
     </code>
     <span class="koboSpan" id="kobo.2296.1">
      function can return an observable or promise.
     </span>
     <span class="koboSpan" id="kobo.2296.2">
      The router will wait for the observable or the promise to resolve before continuing.
     </span>
     <span class="koboSpan" id="kobo.2296.3">
      If the asynchronous event does not complete, the navigation will not continue.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2297.1">
     Currently, our resolver returns a boolean value.
    </span>
    <span class="koboSpan" id="kobo.2297.2">
     Let’s add custom logic so that it returns an array of products:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2298.1">
      Add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2299.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2300.1">
      statements:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2301.1">import</span></span><span class="koboSpan" id="kobo.2302.1"> { inject } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2303.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2304.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2305.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2306.1">import</span></span><span class="koboSpan" id="kobo.2307.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2308.1">Product</span></span><span class="koboSpan" id="kobo.2309.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2310.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2311.1">'./product'</span></span><span class="koboSpan" id="kobo.2312.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2313.1">import</span></span><span class="koboSpan" id="kobo.2314.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2315.1">ProductsService</span></span><span class="koboSpan" id="kobo.2316.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2317.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2318.1">'./products.service'</span></span><span class="koboSpan" id="kobo.2319.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2320.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2321.1">
       productsResolver
      </span>
     </code>
     <span class="koboSpan" id="kobo.2322.1">
      function so that it returns a product array:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2323.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2324.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2325.1">productsResolver</span></span><span class="koboSpan" id="kobo.2326.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2327.1">ResolveFn</span></span><span class="koboSpan" id="kobo.2328.1">&lt;</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2329.1">Product[]</span></strong></span><span class="koboSpan" id="kobo.2330.1">&gt; = </span><span class="hljs-function"><span class="koboSpan" id="kobo.2331.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2332.1">route, state</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2333.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2334.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2335.1">return</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2336.1">[]</span></strong></span><span class="koboSpan" id="kobo.2337.1">;
};
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2338.1">
      Use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2339.1">
       inject
      </span>
     </code>
     <span class="koboSpan" id="kobo.2340.1">
      method to inject
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2341.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.2342.1">
      in the function body:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2343.1">const</span></span><span class="koboSpan" id="kobo.2344.1"> productService = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2345.1">inject</span></span><span class="koboSpan" id="kobo.2346.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2347.1">ProductsService</span></span><span class="koboSpan" id="kobo.2348.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2349.1">
      Use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2350.1">
       queryParamMap
      </span>
     </code>
     <span class="koboSpan" id="kobo.2351.1">
      property
     </span>
     <a id="_idIndexMarker590">
     </a>
     <span class="koboSpan" id="kobo.2352.1">
      to
     </span>
     <a id="_idIndexMarker591">
     </a>
     <span class="koboSpan" id="kobo.2353.1">
      get the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2354.1">
       limit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2355.1">
      parameter value from the current route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2356.1">const</span></span><span class="koboSpan" id="kobo.2357.1"> limit = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2358.1">Number</span></span><span class="koboSpan" id="kobo.2359.1">(route.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2360.1">queryParamMap</span></span><span class="koboSpan" id="kobo.2361.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2362.1">get</span></span><span class="koboSpan" id="kobo.2363.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2364.1">'limit'</span></span><span class="koboSpan" id="kobo.2365.1">));
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2366.1">
      Replace the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2367.1">
       return
      </span>
     </code>
     <span class="koboSpan" id="kobo.2368.1">
      statement with the following:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2369.1">return</span></span><span class="koboSpan" id="kobo.2370.1"> productService.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2371.1">getProducts</span></span><span class="koboSpan" id="kobo.2372.1">(limit);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2373.1">
      The resulting function should look like the following:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2374.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2375.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2376.1">productsResolver</span></span><span class="koboSpan" id="kobo.2377.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2378.1">ResolveFn</span></span><span class="koboSpan" id="kobo.2379.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2380.1">Product</span></span><span class="koboSpan" id="kobo.2381.1">[]&gt; = </span><span class="hljs-function"><span class="koboSpan" id="kobo.2382.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2383.1">route, state</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2384.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2385.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2386.1">const</span></span><span class="koboSpan" id="kobo.2387.1"> productService = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2388.1">inject</span></span><span class="koboSpan" id="kobo.2389.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2390.1">ProductsService</span></span><span class="koboSpan" id="kobo.2391.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2392.1">const</span></span><span class="koboSpan" id="kobo.2393.1"> limit = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2394.1">Number</span></span><span class="koboSpan" id="kobo.2395.1">(route.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2396.1">queryParamMap</span></span><span class="koboSpan" id="kobo.2397.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2398.1">get</span></span><span class="koboSpan" id="kobo.2399.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2400.1">'limit'</span></span><span class="koboSpan" id="kobo.2401.1">));
 
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2402.1">return</span></span><span class="koboSpan" id="kobo.2403.1"> productService.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2404.1">getProducts</span></span><span class="koboSpan" id="kobo.2405.1">(limit);
};
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2406.1">
     Now that we have created the resolver, we can connect it with the product list component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2407.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2408.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2409.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2410.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2411.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2412.1">import</span></span><span class="koboSpan" id="kobo.2413.1"> { productsResolver } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2414.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2415.1">'./products.resolver'</span></span><span class="koboSpan" id="kobo.2416.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2417.1">
      Add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2418.1">
       resolve
      </span>
     </code>
     <span class="koboSpan" id="kobo.2419.1">
      property to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2420.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.2421.1">
      route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2422.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2423.1">path</span></span><span class="koboSpan" id="kobo.2424.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2425.1">'products'</span></span><span class="koboSpan" id="kobo.2426.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2427.1">component</span></span><span class="koboSpan" id="kobo.2428.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2429.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.2430.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2431.1">resolve: {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2432.1">products: productsResolver</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2433.1">}</span></strong></span><span class="koboSpan" id="kobo.2434.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2435.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2436.1">
      resolve
     </span>
    </code>
    <span class="koboSpan" id="kobo.2437.1">
     property is an object that contains a unique name as a key and the resolver function as a value.
    </span>
    <span class="koboSpan" id="kobo.2437.2">
     The key name is important because we will use it in our components to access the resolved data.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.2438.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2439.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2440.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2441.1">
       of
      </span>
     </code>
     <span class="koboSpan" id="kobo.2442.1">
      operator from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2443.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.2444.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2445.1">import</span></span><span class="koboSpan" id="kobo.2446.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2447.1">Observable</span></span><span class="koboSpan" id="kobo.2448.1">, switchMap, </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2449.1">of</span></span><span class="koboSpan" id="kobo.2450.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2451.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2452.1">'rxjs'</span></span><span class="koboSpan" id="kobo.2453.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2454.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2455.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2456.1">
      method
     </span>
     <a id="_idIndexMarker592">
     </a>
     <span class="koboSpan" id="kobo.2457.1">
      so
     </span>
     <a id="_idIndexMarker593">
     </a>
     <span class="koboSpan" id="kobo.2458.1">
      that it subscribes to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2459.1">
       data
      </span>
     </code>
     <span class="koboSpan" id="kobo.2460.1">
      property of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2461.1">
       ActivatedRoute
      </span>
     </code>
     <span class="koboSpan" id="kobo.2462.1">
      service:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2463.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2464.1">getProducts</span></span><span class="koboSpan" id="kobo.2465.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2466.1">this</span></span><span class="koboSpan" id="kobo.2467.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2468.1">products$</span></span><span class="koboSpan" id="kobo.2469.1"> = </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2470.1">this.route.data.pipe(</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2471.1">switchMap(data =&gt; of(data['products']))</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2472.1">);</span></strong></span><span class="koboSpan" id="kobo.2473.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2474.1">
     In the preceding snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2475.1">
      data
     </span>
    </code>
    <span class="koboSpan" id="kobo.2476.1">
     observable emits an object whose value exists in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2477.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.2478.1">
     key.
    </span>
    <span class="koboSpan" id="kobo.2478.2">
     Notice that we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2479.1">
      switchMap
     </span>
    </code>
    <span class="koboSpan" id="kobo.2480.1">
     operator to return products in a new observable.
    </span>
   </p>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.2481.1">
      At this point, we can also remove any references to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2482.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.2483.1">
      class because it is not needed anymore.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.2484.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2485.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.2486.1">
      command to start the application and verify that the product list is displayed when navigating to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2487.1">
       http://localhost:4200
      </span>
     </code>
     <span class="koboSpan" id="kobo.2488.1">
      .
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2489.1">
     Angular resolvers improve application performance when complex initialization logic exists in routed components.
    </span>
    <span class="koboSpan" id="kobo.2489.2">
     Another way to improve the application performance is to load components or
    </span>
    <a id="_idIndexMarker594">
    </a>
    <span class="koboSpan" id="kobo.2490.1">
     child routes on
    </span>
    <a id="_idIndexMarker595">
    </a>
    <span class="koboSpan" id="kobo.2491.1">
     demand, as we will learn in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-183">
    <span class="koboSpan" id="kobo.2492.1">
     Lazy-loading parts of the application
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2493.1">
     Our application may
    </span>
    <a id="_idIndexMarker596">
    </a>
    <span class="koboSpan" id="kobo.2494.1">
     grow at some point, and the amount of data we put into it may also increase.
    </span>
    <span class="koboSpan" id="kobo.2494.2">
     The application may take a long time to start initially, or certain parts can take a long time to load.
    </span>
    <span class="koboSpan" id="kobo.2494.3">
     To overcome these problems, we can use a technique
    </span>
    <a id="_idIndexMarker597">
    </a>
    <span class="koboSpan" id="kobo.2495.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2496.1">
      lazy loading
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2497.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2498.1">
     Lazy loading means we don’t initially load certain application parts, such as Angular components or routes.
    </span>
    <span class="koboSpan" id="kobo.2498.2">
     There are many advantages of lazy loading in an Angular application:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2499.1">
      Components and routes can be loaded upon request from the user
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2500.1">
      Users who visit certain areas of your application can significantly benefit from this technique
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2501.1">
      We can add more features in a lazy-loaded area without affecting the overall application bundle size
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2502.1">
     To understand how lazy loading in Angular works, we will create a new component that displays the current user profile.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2503.1">
      A good practice is to lazy-load parts of the application that are not used frequently, such as the profile of the currently logged-in user.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2504.1">
     Let’s get started:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2505.1">
      Run the following command to create an Angular component:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2506.1">ng generate component user
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2507.1">
      Create a file named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2508.1">
       user.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2509.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2510.1">
       src\app
      </span>
     </code>
     <span class="koboSpan" id="kobo.2511.1">
      folder and add the following content:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2512.1">import</span></span><span class="koboSpan" id="kobo.2513.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2514.1">UserComponent</span></span><span class="koboSpan" id="kobo.2515.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2516.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2517.1">'./user/user.component'</span></span><span class="koboSpan" id="kobo.2518.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2519.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2520.1">default</span></span><span class="koboSpan" id="kobo.2521.1"> [
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2522.1">path</span></span><span class="koboSpan" id="kobo.2523.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2524.1">''</span></span><span class="koboSpan" id="kobo.2525.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2526.1">component</span></span><span class="koboSpan" id="kobo.2527.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2528.1">UserComponent</span></span><span class="koboSpan" id="kobo.2529.1"> }
];
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2530.1">
     In the preceding snippet, we set the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2531.1">
      path
     </span>
    </code>
    <span class="koboSpan" id="kobo.2532.1">
     property to an empty string to activate the route by default.
    </span>
    <span class="koboSpan" id="kobo.2532.2">
     We also use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2533.1">
      default
     </span>
    </code>
    <span class="koboSpan" id="kobo.2534.1">
     keyword to benefit from the default export feature in lazy loading.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.2535.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2536.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2537.1">
      file and add the following route definition in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2538.1">
       routes
      </span>
     </code>
     <span class="koboSpan" id="kobo.2539.1">
      variable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2540.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2541.1">path</span></span><span class="koboSpan" id="kobo.2542.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2543.1">'user'</span></span><span class="koboSpan" id="kobo.2544.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2545.1">loadChildren</span></span><span class="koboSpan" id="kobo.2546.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.2547.1">() =&gt;</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2548.1">import</span></span><span class="koboSpan" id="kobo.2549.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2550.1">'./user.routes'</span></span><span class="koboSpan" id="kobo.2551.1">) }
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2552.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2553.1">
      loadChildren
     </span>
    </code>
    <span class="koboSpan" id="kobo.2554.1">
     property of a route definition object is used to lazy-load Angular routes.
    </span>
    <span class="koboSpan" id="kobo.2554.2">
     It returns an arrow function that uses a dynamic
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2555.1">
      import
     </span>
    </code>
    <span class="koboSpan" id="kobo.2556.1">
     statement to lazy-load the routes file.
    </span>
    <span class="koboSpan" id="kobo.2556.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2557.1">
      import
     </span>
    </code>
    <span class="koboSpan" id="kobo.2558.1">
     function accepts the relative path of the routes file we want to import.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.2559.1">
      Add a new anchor
     </span>
     <a id="_idIndexMarker598">
     </a>
     <span class="koboSpan" id="kobo.2560.1">
      element to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2561.1">
       &lt;header&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2562.1">
      element of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2563.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.2564.1">
      file that links to the newly created route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2565.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2566.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2567.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2568.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2569.1">"menu-links"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2570.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.2571.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2572.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2573.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2574.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2575.1">"/products"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2576.1">routerLinkActive</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2577.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2578.1">"active"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2579.1">&gt;</span></span><span class="koboSpan" id="kobo.2580.1">Products</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2581.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2582.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2583.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.2584.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2585.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2586.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2587.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2588.1">"/cart"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2589.1">routerLinkActive</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2590.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2591.1">"active"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2592.1">&gt;</span></span><span class="koboSpan" id="kobo.2593.1">My Cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2594.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2595.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2596.1">&gt;</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2597.1">&lt;a routerLink="/user" routerLinkActive="active"&gt;My Profile&lt;/a&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2598.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2599.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2600.1">&gt;</span></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2601.1">
      Run the command
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2602.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.2603.1">
      and observe the output in the console window.
     </span>
     <span class="koboSpan" id="kobo.2603.2">
      It should look similar to the following:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2604.1">Initial chunk files | Names         |  Raw size
polyfills.js        | polyfills     |  82.71 kB | 
main.js             | main          |  47.22 kB | 
styles.css          | styles        |   1.14 kB | 
                    | Initial total | 131.07 kB
Lazy chunk files    | Names         |  Raw size
chunk-D3RURZVV.js   | user-routes   |   1.26 kB | 
Application bundle generation complete. </span><span class="koboSpan" id="kobo.2604.2">[1.234 seconds]
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2605.1">
     In the preceding output, we can see that the Angular CLI has created a lazy chunk file named
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2606.1">
      user-routes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2607.1">
     in addition to the initial chunk files of the application.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.2608.1">
      Navigate with your browser to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2609.1">
       http://localhost:4200
      </span>
     </code>
     <span class="koboSpan" id="kobo.2610.1">
      and open the developer tools.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2611.1">
      Click the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2612.1">
       My Profile
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2613.1">
      link and inspect the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2614.1">
       Network
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2615.1">
      requests tab:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2616.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, αριθμός  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_09_08.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2617.1">
     Figure 9.8: Lazy-loaded route
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2618.1">
     The application
    </span>
    <a id="_idIndexMarker599">
    </a>
    <span class="koboSpan" id="kobo.2619.1">
     initiates a new request to the chunk file, which is the bundle of the user route.
    </span>
    <span class="koboSpan" id="kobo.2619.2">
     The Angular framework creates a new bundle for each lazy-loaded artifact and does not include it in the main application bundle.
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2620.1">
     If you navigate away and click the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2621.1">
      My Profile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2622.1">
     link again, you will notice that the application does not make a new request to load the bundle file.
    </span>
    <span class="koboSpan" id="kobo.2622.2">
     As soon as a lazy-loaded route is requested, it is kept in memory and can be used for subsequent requests.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2623.1">
     Lazy loading works not only with routes but also with components.
    </span>
    <span class="koboSpan" id="kobo.2623.2">
     We could have lazy-loaded the user component instead of the whole route by modifying the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2624.1">
      user
     </span>
    </code>
    <span class="koboSpan" id="kobo.2625.1">
     route as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2626.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2627.1">path</span></span><span class="koboSpan" id="kobo.2628.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2629.1">'user'</span></span><span class="koboSpan" id="kobo.2630.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2631.1">loadComponent</span></span><span class="koboSpan" id="kobo.2632.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.2633.1">() =&gt;</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2634.1">import</span></span><span class="koboSpan" id="kobo.2635.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2636.1">'./user/user.component'</span></span><span class="koboSpan" id="kobo.2637.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.2638.1">then</span></span><span class="koboSpan" id="kobo.2639.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2640.1">c</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2641.1"> =&gt;</span></span><span class="koboSpan" id="kobo.2642.1"> c.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2643.1">UserComponent</span></span><span class="koboSpan" id="kobo.2644.1">),
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2645.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2646.1">
      loadComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.2647.1">
     property to import the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2648.1">
      user.component.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2649.1">
     file dynamically.
    </span>
    <span class="koboSpan" id="kobo.2649.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2650.1">
      import
     </span>
    </code>
    <span class="koboSpan" id="kobo.2651.1">
     function returns a promise that we chain with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2652.1">
      then
     </span>
    </code>
    <span class="koboSpan" id="kobo.2653.1">
     method to load the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2654.1">
      UserComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.2655.1">
     class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2656.1">
     The user route is
    </span>
    <a id="_idIndexMarker600">
    </a>
    <span class="koboSpan" id="kobo.2657.1">
     currently accessible for all users, even if not authenticated.
    </span>
    <span class="koboSpan" id="kobo.2657.2">
     In the following section, we will learn how to protect them using guards.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-184">
    <span class="koboSpan" id="kobo.2658.1">
     Protecting a lazy-loaded route
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.2659.1">
     We can control unauthorized
    </span>
    <a id="_idIndexMarker601">
    </a>
    <span class="koboSpan" id="kobo.2660.1">
     access to a lazy-loaded route similarly to how we can on normal routes.
    </span>
    <span class="koboSpan" id="kobo.2660.2">
     However, our guards need to support a function type named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2661.1">
      CanMatchFn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2662.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2663.1">
     We will extend our authentication guard for use with lazy-loaded routes:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2664.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2665.1">
       auth.guard.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2666.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2667.1">
       CanMatchFn
      </span>
     </code>
     <span class="koboSpan" id="kobo.2668.1">
      type from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2669.1">
       @angular/router
      </span>
     </code>
     <span class="koboSpan" id="kobo.2670.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2671.1">import</span></span><span class="koboSpan" id="kobo.2672.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2673.1">CanActivateFn</span></span><span class="koboSpan" id="kobo.2674.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2675.1">CanMatchFn</span></strong></span><span class="koboSpan" id="kobo.2676.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2677.1">Router</span></span><span class="koboSpan" id="kobo.2678.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2679.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2680.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2681.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2682.1">
      Modify the signature of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2683.1">
       authGuard
      </span>
     </code>
     <span class="koboSpan" id="kobo.2684.1">
      function as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2685.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2686.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2687.1">authGuard</span></span><span class="koboSpan" id="kobo.2688.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2689.1">CanActivateFn</span></span><span class="koboSpan" id="kobo.2690.1"> | </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2691.1">CanMatchFn = ()</span></strong></span><span class="hljs-function"><span class="koboSpan" id="kobo.2692.1"> =&gt;</span></span><span class="koboSpan" id="kobo.2693.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2694.1">const</span></span><span class="koboSpan" id="kobo.2695.1"> authService = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2696.1">inject</span></span><span class="koboSpan" id="kobo.2697.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2698.1">AuthService</span></span><span class="koboSpan" id="kobo.2699.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2700.1">const</span></span><span class="koboSpan" id="kobo.2701.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2702.1">inject</span></span><span class="koboSpan" id="kobo.2703.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2704.1">Router</span></span><span class="koboSpan" id="kobo.2705.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2706.1">if</span></span><span class="koboSpan" id="kobo.2707.1"> (authService.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2708.1">isLoggedIn</span></span><span class="koboSpan" id="kobo.2709.1">()) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2710.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.2711.1">true</span></span><span class="koboSpan" id="kobo.2712.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2713.1">return</span></span><span class="koboSpan" id="kobo.2714.1"> router.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2715.1">parseUrl</span></span><span class="koboSpan" id="kobo.2716.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2717.1">'/'</span></span><span class="koboSpan" id="kobo.2718.1">);
};
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2719.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2720.1">
       app.routes.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2721.1">
      file and add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2722.1">
       authGuard
      </span>
     </code>
     <span class="koboSpan" id="kobo.2723.1">
      function in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2724.1">
       canMatch
      </span>
     </code>
     <span class="koboSpan" id="kobo.2725.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2726.1">
       user
      </span>
     </code>
     <span class="koboSpan" id="kobo.2727.1">
      route:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2728.1">{
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2729.1">path</span></span><span class="koboSpan" id="kobo.2730.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2731.1">'user'</span></span><span class="koboSpan" id="kobo.2732.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2733.1">loadChildren</span></span><span class="koboSpan" id="kobo.2734.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.2735.1">() =&gt;</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2736.1">import</span></span><span class="koboSpan" id="kobo.2737.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2738.1">'./user.routes'</span></span><span class="koboSpan" id="kobo.2739.1">),
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2740.1">canMatch: [authGuard]</span></strong></span><span class="koboSpan" id="kobo.2741.1">
}
</span></code></pre>
     <div class="note">
      <p class="normal">
       <span class="koboSpan" id="kobo.2742.1">
        The
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.2743.1">
         canMatch
        </span>
       </code>
       <span class="koboSpan" id="kobo.2744.1">
        property is an array because multiple guards can control route matching.
       </span>
       <span class="koboSpan" id="kobo.2744.2">
        The order of guards in the array is important.
       </span>
       <span class="koboSpan" id="kobo.2744.3">
        If one of the guards fails to match with a route, Angular will prevent access to the route.
       </span>
      </p>
     </div>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2745.1">
     If we now run the application and click the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2746.1">
      My Profile
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2747.1">
     link, we will notice that we cannot navigate to the respective component unless we are authenticated.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2748.1">
     Lazy loading is a technique preferred when the application performance is critical.
    </span>
    <span class="koboSpan" id="kobo.2748.2">
     Angular has also introduced a more performant feature to delay loading parts of an Angular application
    </span>
    <a id="_idIndexMarker602">
    </a>
    <span class="koboSpan" id="kobo.2749.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2750.1">
      deferrable views
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2751.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2751.2">
     Deferrable views give developers more fine-grained control over the conditions
    </span>
    <a id="_idIndexMarker603">
    </a>
    <span class="koboSpan" id="kobo.2752.1">
     under which a part of the application will be loaded.
    </span>
    <span class="koboSpan" id="kobo.2752.2">
     We will explore deferrable views in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.2753.1">
      Chapter 15
     </span>
    </em>
    <span class="koboSpan" id="kobo.2754.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2755.1">
      Optimizing Application Performance
     </span>
    </em>
    <span class="koboSpan" id="kobo.2756.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-185">
    <span class="koboSpan" id="kobo.2757.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2758.1">
     We have now uncovered the power of the Angular router, and we hope you have enjoyed this journey into the intricacies of this library.
    </span>
    <span class="koboSpan" id="kobo.2758.2">
     One of the things that shines in the Angular router is the vast number of options and scenarios we can cover with such a simple but powerful implementation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2759.1">
     We have learned the basics of setting up routing and handling different types of parameters.
    </span>
    <span class="koboSpan" id="kobo.2759.2">
     We have also learned about more advanced features, such as child routing.
    </span>
    <span class="koboSpan" id="kobo.2759.3">
     Furthermore, we have learned how to protect our routes from unauthorized access.
    </span>
    <span class="koboSpan" id="kobo.2759.4">
     Finally, we have shown the full power of routing and how you can improve response time with lazy loading and prefetching.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2760.1">
     In the next chapter, we will beef up our application components to showcase the mechanisms underlying web forms in Angular and the best strategies to grab user input with form controls.
    </span>
   </p>
  </div>
 </body></html>