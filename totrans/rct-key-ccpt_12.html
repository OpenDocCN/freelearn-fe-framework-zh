<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer224">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     12
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-233">
    <span class="koboSpan" id="kobo.2.1">
     Building Custom React Hooks
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Build your own React Hooks
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.6.1">
       Use custom and default React Hooks in your components
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-234">
    <span class="koboSpan" id="kobo.7.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.8.1">
     Throughout this book, one key React feature has been referenced repeatedly in many different variations.
    </span>
    <span class="koboSpan" id="kobo.8.2">
     That feature is React Hooks.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.9.1">
     Hooks power almost all core functionalities and concepts offered by React—from state management in a single component to accessing cross-component state (context) in multiple components.
    </span>
    <span class="koboSpan" id="kobo.9.2">
     They enable you to access JSX elements via refs and allow you to handle side effects inside of component functions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.10.1">
     Without Hooks, modern React would not work, and building feature-rich applications would be impossible.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.11.1">
     Thus far, only built-in Hooks have been introduced and used.
    </span>
    <span class="koboSpan" id="kobo.11.2">
     However, you can build your own custom Hooks as well—or you can use custom Hooks built by other developers (e.g., by using third-party libraries).
    </span>
    <span class="koboSpan" id="kobo.11.3">
     In this chapter, you will learn why you might want to do this and how it works.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-235">
    <span class="koboSpan" id="kobo.12.1">
     Introducing Custom Hooks
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.13.1">
     Before starting to build custom Hooks, it’s very important to understand what exactly custom Hooks are.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.14.1">
     In React apps, custom
    </span>
    <a id="_idIndexMarker574">
    </a>
    <span class="koboSpan" id="kobo.15.1">
     Hooks are regular JavaScript functions that satisfy the following conditions:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.16.1">
      The function name starts with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.17.1">
       use
      </span>
     </code>
     <span class="koboSpan" id="kobo.18.1">
      (just as all built-in Hooks start with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.19.1">
       use
      </span>
     </code>
     <span class="koboSpan" id="kobo.20.1">
      :
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.21.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.22.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.23.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.24.1">
      , etc.).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.25.1">
      The function calls another React Hook (a built-in one or a custom one—doesn’t matter).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.26.1">
      The function does not just return JSX code (otherwise, it would essentially be a React component), though it could return some JSX code—as long as that’s not the only value returned.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.27.1">
     If a function meets these three conditions, it can (and should) be called a custom (React) Hook.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     So, custom Hooks are really just normal functions with special names (starting with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.28.1">
      use
     </span>
    </code>
    <span class="koboSpan" id="kobo.29.1">
     ) that call other (custom or built-in) Hooks and that do not (just) return JSX code.
    </span>
    <span class="koboSpan" id="kobo.29.2">
     If you try to call a (custom or built-in) Hook in some other place (e.g., outside of any function or in a regular, non-Hook function), you might get a warning (depending on your project setup; see below).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.30.1">
     For example, the following function uses the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.31.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.32.1">
     Hook but has a name that does not start with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.33.1">
      use
     </span>
    </code>
    <span class="koboSpan" id="kobo.34.1">
     .
    </span>
    <span class="koboSpan" id="kobo.34.2">
     It is therefore not in line with the official naming recommendation:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.35.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.36.1">sendAnalyticsEvent</span></span><span class="koboSpan" id="kobo.37.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.38.1">event</span></span><span class="koboSpan" id="kobo.39.1">) {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.40.1">useEffect</span></span><span class="koboSpan" id="kobo.41.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.42.1">() =&gt;</span></span><span class="koboSpan" id="kobo.43.1"> {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.44.1">fetch</span></span><span class="koboSpan" id="kobo.45.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.46.1">'https://my-analytics-backend.com/events'</span></span><span class="koboSpan" id="kobo.47.1">, {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.48.1">method</span></span><span class="koboSpan" id="kobo.49.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.50.1">'POST'</span></span><span class="koboSpan" id="kobo.51.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.52.1">body</span></span><span class="koboSpan" id="kobo.53.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.54.1">JSON</span></span><span class="koboSpan" id="kobo.55.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.56.1">stringify</span></span><span class="koboSpan" id="kobo.57.1">(event)
    })
  }, []);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.58.1">
     In projects that perform code linting to check your code for rule violations, this code would produce a warning because this function doesn’t qualify as a custom Hook (due to its name).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.59.1">
     <img alt="img" src="image/B31339_12_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.60.1">
     Figure 12.1: React complains if you call a Hook function in the wrong place
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.61.1">
     As the warning states, Hooks, whether custom or built-in, must only be called inside component functions.
    </span>
    <span class="koboSpan" id="kobo.61.2">
     And, even though the warning message doesn’t explicitly mention it, they may also be called inside of custom Hooks.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.62.1">
     So, if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.63.1">
      sendAnalyticsEvent()
     </span>
    </code>
    <span class="koboSpan" id="kobo.64.1">
     function is renamed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.65.1">
      useSendAnalyticsEvent()
     </span>
    </code>
    <span class="koboSpan" id="kobo.66.1">
     , the warning disappears since the function now qualifies as a custom Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.67.1">
     Even though
    </span>
    <a id="_idIndexMarker575">
    </a>
    <span class="koboSpan" id="kobo.68.1">
     it’s technically not a hard rule that’s enforced by React itself, it’s a strong recommendation to follow this naming convention.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.69.1">
     Being able to build custom Hooks is an extremely important feature because it means that you can build reusable non-component functions that can contain state logic (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.70.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.71.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.72.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.73.1">
     ), handle side effects in your reusable custom Hook functions (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.74.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.75.1">
     ), or use any other React Hook.
    </span>
    <span class="koboSpan" id="kobo.75.2">
     With normal, non-Hook functions, none of these would be possible, and you would therefore be unable to outsource any logic that involves a React Hook into such functions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.76.1">
     In this way, custom Hooks complement the concept of React components.
    </span>
    <span class="koboSpan" id="kobo.76.2">
     While React components are reusable UI building blocks (which may contain stateful logic), custom Hooks are reusable logic snippets that can be used in your component functions.
    </span>
    <span class="koboSpan" id="kobo.76.3">
     Thus, custom Hooks help you reuse shared logic across components.
    </span>
    <span class="koboSpan" id="kobo.76.4">
     For example, custom Hooks enable you to outsource the logic for sending an HTTP request and handling the related states (loading, error, etc.).
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-236">
    <span class="koboSpan" id="kobo.77.1">
     Why Would You Build Custom Hooks?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.78.1">
     In the
    </span>
    <a id="_idIndexMarker576">
    </a>
    <span class="koboSpan" id="kobo.79.1">
     previous chapter (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.80.1">
      Chapter 11
     </span>
    </em>
    <span class="koboSpan" id="kobo.81.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.82.1">
      Working with Complex State
     </span>
    </em>
    <span class="koboSpan" id="kobo.83.1">
     ), when the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.84.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.85.1">
     Hook was introduced, an example was provided in which the Hook was utilized in sending an HTTP request.
    </span>
    <span class="koboSpan" id="kobo.85.2">
     Here’s the relevant, final code again:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.86.1">const</span></span><span class="koboSpan" id="kobo.87.1"> initialHttpState = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.88.1">data</span></span><span class="koboSpan" id="kobo.89.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.90.1">null</span></span><span class="koboSpan" id="kobo.91.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.92.1">isLoading</span></span><span class="koboSpan" id="kobo.93.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.94.1">false</span></span><span class="koboSpan" id="kobo.95.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.96.1">error</span></span><span class="koboSpan" id="kobo.97.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.98.1">null</span></span><span class="koboSpan" id="kobo.99.1">,
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.100.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.101.1">httpReducer</span></span><span class="koboSpan" id="kobo.102.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.103.1">state, action</span></span><span class="koboSpan" id="kobo.104.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.105.1">if</span></span><span class="koboSpan" id="kobo.106.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.107.1">type</span></span><span class="koboSpan" id="kobo.108.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.109.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.110.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.111.1">return</span></span><span class="koboSpan" id="kobo.112.1"> {
      ...state, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.113.1">// copying the existing state</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.114.1">isLoading</span></span><span class="koboSpan" id="kobo.115.1">: state.</span><span class="hljs-property"><span class="koboSpan" id="kobo.116.1">data</span></span><span class="koboSpan" id="kobo.117.1"> ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.118.1">false</span></span><span class="koboSpan" id="kobo.119.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.120.1">true</span></span><span class="koboSpan" id="kobo.121.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.122.1">error</span></span><span class="koboSpan" id="kobo.123.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.124.1">null</span></span><span class="koboSpan" id="kobo.125.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.126.1">if</span></span><span class="koboSpan" id="kobo.127.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.128.1">type</span></span><span class="koboSpan" id="kobo.129.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.130.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.131.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.132.1">return</span></span><span class="koboSpan" id="kobo.133.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.134.1">data</span></span><span class="koboSpan" id="kobo.135.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.136.1">null</span></span><span class="koboSpan" id="kobo.137.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.138.1">isLoading</span></span><span class="koboSpan" id="kobo.139.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.140.1">false</span></span><span class="koboSpan" id="kobo.141.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.142.1">error</span></span><span class="koboSpan" id="kobo.143.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.144.1">payload</span></span><span class="koboSpan" id="kobo.145.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.146.1">if</span></span><span class="koboSpan" id="kobo.147.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.148.1">type</span></span><span class="koboSpan" id="kobo.149.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.150.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.151.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.152.1">return</span></span><span class="koboSpan" id="kobo.153.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.154.1">data</span></span><span class="koboSpan" id="kobo.155.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.156.1">payload</span></span><span class="koboSpan" id="kobo.157.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.158.1">isLoading</span></span><span class="koboSpan" id="kobo.159.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.160.1">false</span></span><span class="koboSpan" id="kobo.161.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.162.1">error</span></span><span class="koboSpan" id="kobo.163.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.164.1">null</span></span><span class="koboSpan" id="kobo.165.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.166.1">return</span></span><span class="koboSpan" id="kobo.167.1"> initialHttpState; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.168.1">// default value for unknown actions</span></span><span class="koboSpan" id="kobo.169.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.170.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.171.1">App</span></span><span class="koboSpan" id="kobo.172.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.173.1">const</span></span><span class="koboSpan" id="kobo.174.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.175.1">useReducer</span></span><span class="koboSpan" id="kobo.176.1">(
    httpReducer, 
    initialHttpState
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.177.1">const</span></span><span class="koboSpan" id="kobo.178.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.179.1">useCallback</span></span><span class="koboSpan" id="kobo.180.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.181.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.182.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.183.1">fetchPosts</span></span><span class="koboSpan" id="kobo.184.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.185.1">dispatch</span></span><span class="koboSpan" id="kobo.186.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.187.1">type</span></span><span class="koboSpan" id="kobo.188.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.189.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.190.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.191.1">try</span></span><span class="koboSpan" id="kobo.192.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.193.1">const</span></span><span class="koboSpan" id="kobo.194.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.195.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.196.1">fetch</span></span><span class="koboSpan" id="kobo.197.1">(
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.198.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.199.1">
      );
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.200.1">if</span></span><span class="koboSpan" id="kobo.201.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.202.1">ok</span></span><span class="koboSpan" id="kobo.203.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.204.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.205.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.206.1">Error</span></span><span class="koboSpan" id="kobo.207.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.208.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.209.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.210.1">const</span></span><span class="koboSpan" id="kobo.211.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.212.1">await</span></span><span class="koboSpan" id="kobo.213.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.214.1">json</span></span><span class="koboSpan" id="kobo.215.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.216.1">dispatch</span></span><span class="koboSpan" id="kobo.217.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.218.1">type</span></span><span class="koboSpan" id="kobo.219.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.220.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.221.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.222.1">payload</span></span><span class="koboSpan" id="kobo.223.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.224.1">catch</span></span><span class="koboSpan" id="kobo.225.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.226.1">dispatch</span></span><span class="koboSpan" id="kobo.227.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.228.1">type</span></span><span class="koboSpan" id="kobo.229.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.230.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.231.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.232.1">payload</span></span><span class="koboSpan" id="kobo.233.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.234.1">message</span></span><span class="koboSpan" id="kobo.235.1"> });
    }
  }, []);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.236.1">useEffect</span></span><span class="koboSpan" id="kobo.237.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.238.1">function</span></span><span class="koboSpan" id="kobo.239.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.240.1">fetchPosts</span></span><span class="koboSpan" id="kobo.241.1">();
    },
    [fetchPosts]
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.242.1">return</span></span><span class="koboSpan" id="kobo.243.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.244.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.245.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.246.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.247.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.248.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.249.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.250.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.251.1">Complex State Blog</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.252.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.253.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.254.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.255.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.256.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.257.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.258.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.259.1">{fetchPosts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.260.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.261.1">Load Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.262.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.263.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.264.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.265.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.266.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.267.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.268.1">      {httpState.isLoading &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.269.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.270.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.271.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.272.1">Loading...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.273.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.274.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.275.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.276.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.277.1">      {httpState.error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.278.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.279.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.280.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.281.1">{httpState.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.282.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.283.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.284.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.285.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.286.1">      {httpState.data &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.287.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.288.1">BlogPosts</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.289.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.290.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.291.1">{httpState.data}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.292.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.293.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.294.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.295.1">
  );
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.296.1">
     In this
    </span>
    <a id="_idIndexMarker577">
    </a>
    <span class="koboSpan" id="kobo.297.1">
     code example, an HTTP request is sent whenever the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.298.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.299.1">
     component is rendered for the first time.
    </span>
    <span class="koboSpan" id="kobo.299.2">
     The HTTP request fetches a list of (dummy) posts.
    </span>
    <span class="koboSpan" id="kobo.299.3">
     Until the request finishes, a loading message (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.300.1">
      &lt;p&gt;Loading…&lt;/p&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.301.1">
     ) is displayed to the user.
    </span>
    <span class="koboSpan" id="kobo.301.2">
     If there’s an error, an error message is displayed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.302.1">
     As you can see, quite a lot of code must be written to handle this relatively basic use case.
    </span>
    <span class="koboSpan" id="kobo.302.2">
     And, especially in bigger React apps, it is quite likely that multiple components will need to send HTTP requests.
    </span>
    <span class="koboSpan" id="kobo.302.3">
     They probably won’t need to send the exact same request to the same URL (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.303.1">
      https://jsonplaceholder.typicode.com/posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.304.1">
     , in this example), but it’s definitely possible that different components will fetch different data from different URLs.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.305.1">
     Therefore, almost the exact same code must be written over and over again in multiple components.
    </span>
    <span class="koboSpan" id="kobo.305.2">
     And it’s not just the code for sending the HTTP request (i.e., the function wrapped by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.306.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.307.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.307.2">
     Instead, the HTTP-related state management (done via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.308.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.309.1">
     , in this example), as well as the request initialization via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.310.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.311.1">
     , must be repeated in all those components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.312.1">
     And that is
    </span>
    <a id="_idIndexMarker578">
    </a>
    <span class="koboSpan" id="kobo.313.1">
     where custom Hooks come in to save the day.
    </span>
    <span class="koboSpan" id="kobo.313.2">
     Custom Hooks help you avoid this repetition by allowing you to build reusable, potentially stateful “logic snippets” that can be shared across components.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-237">
    <span class="koboSpan" id="kobo.314.1">
     A First Custom Hook
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.315.1">
     Before
    </span>
    <a id="_idIndexMarker579">
    </a>
    <span class="koboSpan" id="kobo.316.1">
     exploring advanced scenarios and solving the HTTP request problem mentioned previously, here’s a more basic example of a first, custom Hook:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.317.1">import</span></span><span class="koboSpan" id="kobo.318.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.319.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.320.1">'react'</span></span><span class="koboSpan" id="kobo.321.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.322.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.323.1">useCounter</span></span><span class="koboSpan" id="kobo.324.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.325.1">const</span></span><span class="koboSpan" id="kobo.326.1"> [counter, setCounter] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.327.1">useState</span></span><span class="koboSpan" id="kobo.328.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.329.1">0</span></span><span class="koboSpan" id="kobo.330.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.331.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.332.1">increment</span></span><span class="koboSpan" id="kobo.333.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.334.1">setCounter</span></span><span class="koboSpan" id="kobo.335.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.336.1">oldCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.337.1"> =&gt;</span></span><span class="koboSpan" id="kobo.338.1"> oldCounter + </span><span class="hljs-number"><span class="koboSpan" id="kobo.339.1">1</span></span><span class="koboSpan" id="kobo.340.1">);
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.341.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.342.1">decrement</span></span><span class="koboSpan" id="kobo.343.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.344.1">setCounter</span></span><span class="koboSpan" id="kobo.345.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.346.1">oldCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.347.1"> =&gt;</span></span><span class="koboSpan" id="kobo.348.1"> oldCounter - </span><span class="hljs-number"><span class="koboSpan" id="kobo.349.1">1</span></span><span class="koboSpan" id="kobo.350.1">);
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.351.1">return</span></span><span class="koboSpan" id="kobo.352.1"> { counter, increment, decrement };
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.353.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.354.1">default</span></span><span class="koboSpan" id="kobo.355.1"> useCounter;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.356.1">
     This code can be stored in a file named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.357.1">
      use-counter.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.358.1">
     inside a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.359.1">
      hooks/
     </span>
    </code>
    <span class="koboSpan" id="kobo.360.1">
     folder—though both names are totally up to you.
    </span>
    <span class="koboSpan" id="kobo.360.2">
     There are no rules regarding the file or the folder name (or, in general, the place where you store this code).
    </span>
    <span class="koboSpan" id="kobo.360.3">
     The file extension is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.361.1">
      .js
     </span>
    </code>
    <span class="koboSpan" id="kobo.362.1">
     instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.363.1">
      .jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.364.1">
     since this file contains no JSX code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.365.1">
     As you can see,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.366.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.367.1">
     is a regular JavaScript function.
    </span>
    <span class="koboSpan" id="kobo.367.2">
     The name of the function starts with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.368.1">
      use
     </span>
    </code>
    <span class="koboSpan" id="kobo.369.1">
     , and therefore this function qualifies as a custom Hook (meaning you won’t get any warning messages when using other Hooks inside of it).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.370.1">
     Inside
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.371.1">
      useCounter()
     </span>
    </code>
    <span class="koboSpan" id="kobo.372.1">
     , a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.373.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.374.1">
     state is managed via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.375.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.376.1">
     .
    </span>
    <span class="koboSpan" id="kobo.376.2">
     The state is changed via two nested functions (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.377.1">
      increment
     </span>
    </code>
    <span class="koboSpan" id="kobo.378.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.379.1">
      decrement
     </span>
    </code>
    <span class="koboSpan" id="kobo.380.1">
     ), and the state, as well as the functions, is returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.381.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.382.1">
     (grouped together in a JavaScript object).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.383.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.384.1">
      The syntax used to group
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.385.1">
       counter
      </span>
     </code>
     <span class="koboSpan" id="kobo.386.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.387.1">
       increment
      </span>
     </code>
     <span class="koboSpan" id="kobo.388.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.389.1">
       decrement
      </span>
     </code>
     <span class="koboSpan" id="kobo.390.1">
      together uses a regular JavaScript feature: shorthand property names.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.391.1">
      If a property name in an object literally matches the name of the variable whose value is assigned to the property, you can use this shorter notation.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.392.1">
      Instead of writing
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.393.1">
       { counter: counter, increment: increment, decrement: decrement }
      </span>
     </code>
     <span class="koboSpan" id="kobo.394.1">
      , you can use the shorthand notation
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.395.1">
       { counter, increment, decrement }
      </span>
     </code>
     <span class="koboSpan" id="kobo.396.1">
      shown in the snippet above.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.397.1">
     This custom
    </span>
    <a id="_idIndexMarker580">
    </a>
    <span class="koboSpan" id="kobo.398.1">
     Hook can be stored in a separate file (e.g., in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.399.1">
      hooks
     </span>
    </code>
    <span class="koboSpan" id="kobo.400.1">
     folder inside the React project, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.401.1">
      src/hooks/use-counter.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.402.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.402.2">
     Thereafter, it can be used in any React component, and you can use it in as many React components as needed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.403.1">
     For example, the following two components (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.404.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.405.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.406.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.407.1">
     ) could use this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.408.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.409.1">
     Hook as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.410.1">import</span></span><span class="koboSpan" id="kobo.411.1"> useCounter </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.412.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.413.1">'./hooks/use-counter.js'</span></span><span class="koboSpan" id="kobo.414.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.415.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.416.1">Demo1</span></span><span class="koboSpan" id="kobo.417.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.418.1">const</span></span><span class="koboSpan" id="kobo.419.1"> { counter, increment, decrement } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.420.1">useCounter</span></span><span class="koboSpan" id="kobo.421.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.422.1">return</span></span><span class="koboSpan" id="kobo.423.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.424.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.425.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.426.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.427.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.428.1">{counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.429.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.430.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.431.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.432.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.433.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.434.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.435.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.436.1">{increment}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.437.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.438.1">Inc</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.439.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.440.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.441.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.442.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.443.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.444.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.445.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.446.1">{decrement}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.447.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.448.1">Dec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.449.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.450.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.451.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.452.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.453.1">
  );
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.454.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.455.1">Demo2</span></span><span class="koboSpan" id="kobo.456.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.457.1">const</span></span><span class="koboSpan" id="kobo.458.1"> { counter, increment, decrement } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.459.1">useCounter</span></span><span class="koboSpan" id="kobo.460.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.461.1">return</span></span><span class="koboSpan" id="kobo.462.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.463.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.464.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.465.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.466.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.467.1">{counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.468.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.469.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.470.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.471.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.472.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.473.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.474.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.475.1">{increment}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.476.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.477.1">Inc</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.478.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.479.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.480.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.481.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.482.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.483.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.484.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.485.1">{decrement}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.486.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.487.1">Dec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.488.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.489.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.490.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.491.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.492.1">
  );
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.493.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.494.1">App</span></span><span class="koboSpan" id="kobo.495.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.496.1">return</span></span><span class="koboSpan" id="kobo.497.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.498.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.499.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.500.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.501.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.502.1">Demo1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.503.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.504.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.505.1">Demo2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.506.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.507.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.508.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.509.1">&gt;</span></span><span class="koboSpan" id="kobo.510.1">
  );
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.511.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.512.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.513.1">App</span></span><span class="koboSpan" id="kobo.514.1">;
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.515.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.516.1">
      You will find the full example code at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/examples/01-first-hook">
      <span class="url">
       <span class="koboSpan" id="kobo.517.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/examples/01-first-hook
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.518.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.519.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.520.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.521.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.522.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.523.1">
     components both execute
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.524.1">
      useCounter()
     </span>
    </code>
    <span class="koboSpan" id="kobo.525.1">
     inside of their component
    </span>
    <a id="_idIndexMarker581">
    </a>
    <span class="koboSpan" id="kobo.526.1">
     functions.
    </span>
    <span class="koboSpan" id="kobo.526.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.527.1">
      useCounter()
     </span>
    </code>
    <span class="koboSpan" id="kobo.528.1">
     function is called a normal function because it is a regular JavaScript function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.529.1">
     Since the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.530.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.531.1">
     Hook returns an object with three properties (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.532.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.533.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.534.1">
      increment
     </span>
    </code>
    <span class="koboSpan" id="kobo.535.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.536.1">
      decrement
     </span>
    </code>
    <span class="koboSpan" id="kobo.537.1">
     ),
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.538.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.539.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.540.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.541.1">
     use object destructuring to store the property values in local constants.
    </span>
    <span class="koboSpan" id="kobo.541.2">
     These values are then used in the JSX code to output the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.542.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.543.1">
     value and connect the two
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.544.1">
      &lt;button&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.545.1">
     elements to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.546.1">
      increment
     </span>
    </code>
    <span class="koboSpan" id="kobo.547.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.548.1">
      decrement
     </span>
    </code>
    <span class="koboSpan" id="kobo.549.1">
     functions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.550.1">
     After pressing the buttons a couple of times each, the resulting user interface might look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.551.1">
     <img alt="A screenshot of a calendar  Description automatically generated" src="image/B31339_12_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.552.1">
     Figure 12.2: Two independent counters
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.553.1">
     In this screenshot, you can also see a very interesting and important behavior of custom Hooks.
    </span>
    <span class="koboSpan" id="kobo.553.2">
     That is, if the
    </span>
    <a id="_idIndexMarker582">
    </a>
    <span class="koboSpan" id="kobo.554.1">
     same stateful custom Hook is used in multiple components, every component gets its own state.
    </span>
    <span class="koboSpan" id="kobo.554.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.555.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.556.1">
     state is not shared.
    </span>
    <span class="koboSpan" id="kobo.556.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.557.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.558.1">
     component manages its own
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.559.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.560.1">
     state (through the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.561.1">
      useCounter()
     </span>
    </code>
    <span class="koboSpan" id="kobo.562.1">
     custom Hook), and so does the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.563.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.564.1">
     component.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-238">
    <span class="koboSpan" id="kobo.565.1">
     Custom Hooks: A Flexible Feature
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.566.1">
     The two independent states of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.567.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.568.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.569.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.570.1">
     show a very important feature of custom Hooks: you
    </span>
    <a id="_idIndexMarker583">
    </a>
    <span class="koboSpan" id="kobo.571.1">
     use them to share logic, not state.
    </span>
    <span class="koboSpan" id="kobo.571.2">
     If you needed to share state across components, you would do so with React context (see the previous chapter).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.572.1">
     When using Hooks, every component uses its own “instance” (or “version”) of that Hook.
    </span>
    <span class="koboSpan" id="kobo.572.2">
     It’s always the same logic, but any state or side effects handled by a Hook are handled on a per-component basis.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.573.1">
     It’s also worth noting that custom Hooks
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.574.1">
      can
     </span>
    </strong>
    <span class="koboSpan" id="kobo.575.1">
     be stateful but
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.576.1">
      don’t have to be
     </span>
    </strong>
    <span class="koboSpan" id="kobo.577.1">
     .
    </span>
    <span class="koboSpan" id="kobo.577.2">
     They can manage state via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.578.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.579.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.580.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.581.1">
     , but you could also build custom Hooks that only handle side effects (without any state management).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.582.1">
     There’s only one thing you implicitly have to do in custom Hooks: you must use some other React Hook (custom or built-in).
    </span>
    <span class="koboSpan" id="kobo.582.2">
     This is because if you didn’t include any other Hook, there would be no need to build a custom Hook in the first place.
    </span>
    <span class="koboSpan" id="kobo.582.3">
     A custom Hook is just a regular JavaScript function (with a name starting with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.583.1">
      use
     </span>
    </code>
    <span class="koboSpan" id="kobo.584.1">
     ) with which you are allowed to use other Hooks.
    </span>
    <span class="koboSpan" id="kobo.584.2">
     If you don’t need to use any other Hooks, you can simply build a normal JavaScript function with a name that does not start with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.585.1">
      use
     </span>
    </code>
    <span class="koboSpan" id="kobo.586.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.587.1">
     You also have a lot of flexibility regarding the logic inside the Hook, its parameters, and the value it returns.
    </span>
    <span class="koboSpan" id="kobo.587.2">
     Regarding the Hook logic, you can add as much logic as needed.
    </span>
    <span class="koboSpan" id="kobo.587.3">
     You can manage
    </span>
    <a id="_idIndexMarker584">
    </a>
    <span class="koboSpan" id="kobo.588.1">
     no state or multiple state values.
    </span>
    <span class="koboSpan" id="kobo.588.2">
     You can include other custom Hooks or only use built-in Hooks.
    </span>
    <span class="koboSpan" id="kobo.588.3">
     You can manage multiple side effects, work with refs, or perform complex calculations.
    </span>
    <span class="koboSpan" id="kobo.588.4">
     There are no restrictions regarding what can be done in a custom Hook.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-239">
    <span class="koboSpan" id="kobo.589.1">
     Custom Hooks and Parameters
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.590.1">
     You can also accept and use parameters in your custom Hook functions.
    </span>
    <span class="koboSpan" id="kobo.590.2">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.591.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.592.1">
     Hook from the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.593.1">
      A First Custom Hook
     </span>
    </em>
    <span class="koboSpan" id="kobo.594.1">
     section can be adjusted to take an initial counter
    </span>
    <a id="_idIndexMarker585">
    </a>
    <span class="koboSpan" id="kobo.595.1">
     value and separate values by which the counter should be increased or decreased, as shown in the following snippet:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.596.1">import</span></span><span class="koboSpan" id="kobo.597.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.598.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.599.1">'react'</span></span><span class="koboSpan" id="kobo.600.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.601.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.602.1">useCounter</span></span><span class="koboSpan" id="kobo.603.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.604.1">initialValue, incVal, decVal</span></span><span class="koboSpan" id="kobo.605.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.606.1">const</span></span><span class="koboSpan" id="kobo.607.1"> [counter, setCounter] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.608.1">useState</span></span><span class="koboSpan" id="kobo.609.1">(initialValue);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.610.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.611.1">increment</span></span><span class="koboSpan" id="kobo.612.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.613.1">setCounter</span></span><span class="koboSpan" id="kobo.614.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.615.1">oldCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.616.1"> =&gt;</span></span><span class="koboSpan" id="kobo.617.1"> oldCounter + incVal);
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.618.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.619.1">decrement</span></span><span class="koboSpan" id="kobo.620.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.621.1">setCounter</span></span><span class="koboSpan" id="kobo.622.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.623.1">oldCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.624.1"> =&gt;</span></span><span class="koboSpan" id="kobo.625.1"> oldCounter - decVal);
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.626.1">return</span></span><span class="koboSpan" id="kobo.627.1"> { counter, increment, decrement };
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.628.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.629.1">default</span></span><span class="koboSpan" id="kobo.630.1"> useCounter;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.631.1">
     In this adjusted example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.632.1">
      initialValue
     </span>
    </code>
    <span class="koboSpan" id="kobo.633.1">
     parameter is used to set the initial state via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.634.1">
      useState(initialValue)
     </span>
    </code>
    <span class="koboSpan" id="kobo.635.1">
     .
    </span>
    <span class="koboSpan" id="kobo.635.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.636.1">
      incVal
     </span>
    </code>
    <span class="koboSpan" id="kobo.637.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.638.1">
      decVal
     </span>
    </code>
    <span class="koboSpan" id="kobo.639.1">
     parameters are used in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.640.1">
      increment
     </span>
    </code>
    <span class="koboSpan" id="kobo.641.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.642.1">
      decrement
     </span>
    </code>
    <span class="koboSpan" id="kobo.643.1">
     functions to change the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.644.1">
      counter
     </span>
    </code>
    <span class="koboSpan" id="kobo.645.1">
     state with different values.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.646.1">
     Of course, once parameters are used in a custom Hook, fitting parameter values must be provided
    </span>
    <a id="_idIndexMarker586">
    </a>
    <span class="koboSpan" id="kobo.647.1">
     when the custom Hook is called in a component function (or in another custom Hook).
    </span>
    <span class="koboSpan" id="kobo.647.2">
     Therefore, the code for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.648.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.649.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.650.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.651.1">
     components must also be adjusted—for example, like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.652.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.653.1">Demo1</span></span><span class="koboSpan" id="kobo.654.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.655.1">const</span></span><span class="koboSpan" id="kobo.656.1"> { counter, increment, decrement } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.657.1">useCounter</span></span><span class="koboSpan" id="kobo.658.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.659.1">1</span></span><span class="koboSpan" id="kobo.660.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.661.1">2</span></span><span class="koboSpan" id="kobo.662.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.663.1">1</span></span><span class="koboSpan" id="kobo.664.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.665.1">return</span></span><span class="koboSpan" id="kobo.666.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.667.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.668.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.669.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.670.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.671.1">{counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.672.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.673.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.674.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.675.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.676.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.677.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.678.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.679.1">{increment}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.680.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.681.1">Inc</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.682.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.683.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.684.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.685.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.686.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.687.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.688.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.689.1">{decrement}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.690.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.691.1">Dec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.692.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.693.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.694.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.695.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.696.1">
  );
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.697.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.698.1">Demo2</span></span><span class="koboSpan" id="kobo.699.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.700.1">const</span></span><span class="koboSpan" id="kobo.701.1"> { counter, increment, decrement } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.702.1">useCounter</span></span><span class="koboSpan" id="kobo.703.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.704.1">0</span></span><span class="koboSpan" id="kobo.705.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.706.1">1</span></span><span class="koboSpan" id="kobo.707.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.708.1">2</span></span><span class="koboSpan" id="kobo.709.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.710.1">return</span></span><span class="koboSpan" id="kobo.711.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.712.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.713.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.714.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.715.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.716.1">{counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.717.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.718.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.719.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.720.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.721.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.722.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.723.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.724.1">{increment}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.725.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.726.1">Inc</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.727.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.728.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.729.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.730.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.731.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.732.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.733.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.734.1">{decrement}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.735.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.736.1">Dec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.737.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.738.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.739.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.740.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.741.1">
  );
};
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.742.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.743.1">
      You can also find this code on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/examples/02-parameters">
      <span class="url">
       <span class="koboSpan" id="kobo.744.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/examples/02-parameters
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.745.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.746.1">
     Now, both components pass different parameter values to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.747.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.748.1">
     Hook function.
    </span>
    <span class="koboSpan" id="kobo.748.2">
     Therefore, they can reuse the same Hook and its internal logic dynamically.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-240">
    <span class="koboSpan" id="kobo.749.1">
     Custom Hooks and Return Values
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.750.1">
     As shown with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.751.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.752.1">
     , custom Hooks may return values.
    </span>
    <span class="koboSpan" id="kobo.752.2">
     And this is important: they
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.753.1">
      may
     </span>
    </strong>
    <span class="koboSpan" id="kobo.754.1">
     return values, but they don’t have to.
    </span>
    <span class="koboSpan" id="kobo.754.2">
     If you build a custom Hook that only handles some side
    </span>
    <a id="_idIndexMarker587">
    </a>
    <span class="koboSpan" id="kobo.755.1">
     effects (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.756.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.757.1">
     ), you don’t have to return any value (because there probably isn’t any value that should be returned).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.758.1">
     But if you do need to return a value, you decide which type of value you want to return.
    </span>
    <span class="koboSpan" id="kobo.758.2">
     You could return a single number or string.
    </span>
    <span class="koboSpan" id="kobo.758.3">
     If your Hook must return multiple values (like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.759.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.760.1">
     does), you can group these values into an array or object.
    </span>
    <span class="koboSpan" id="kobo.760.2">
     You can also return arrays that contain objects or vice versa.
    </span>
    <span class="koboSpan" id="kobo.760.3">
     In short, you can return anything.
    </span>
    <span class="koboSpan" id="kobo.760.4">
     It is a normal JavaScript function, after all.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.761.1">
     Some built-in Hooks such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.762.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.763.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.764.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.765.1">
     return arrays (with a fixed number of elements).
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.766.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.767.1">
     , on the other hand, returns an object (which always has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.768.1">
      current
     </span>
    </code>
    <span class="koboSpan" id="kobo.769.1">
     property).
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.770.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.771.1">
     returns nothing.
    </span>
    <span class="koboSpan" id="kobo.771.2">
     Your Hooks can therefore return whatever you want.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.772.1">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.773.1">
      useCounter
     </span>
    </code>
    <span class="koboSpan" id="kobo.774.1">
     Hook from previously could be rewritten to return an array instead:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.775.1">import</span></span><span class="koboSpan" id="kobo.776.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.777.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.778.1">'react'</span></span><span class="koboSpan" id="kobo.779.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.780.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.781.1">useCounter</span></span><span class="koboSpan" id="kobo.782.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.783.1">initialValue, incVal, decVal</span></span><span class="koboSpan" id="kobo.784.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.785.1">const</span></span><span class="koboSpan" id="kobo.786.1"> [counter, setCounter] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.787.1">useState</span></span><span class="koboSpan" id="kobo.788.1">(initialValue);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.789.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.790.1">increment</span></span><span class="koboSpan" id="kobo.791.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.792.1">setCounter</span></span><span class="koboSpan" id="kobo.793.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.794.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.795.1">oldCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.796.1">) =&gt;</span></span><span class="koboSpan" id="kobo.797.1"> oldCounter + incVal);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.798.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.799.1">decrement</span></span><span class="koboSpan" id="kobo.800.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.801.1">setCounter</span></span><span class="koboSpan" id="kobo.802.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.803.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.804.1">oldCounter</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.805.1">) =&gt;</span></span><span class="koboSpan" id="kobo.806.1"> oldCounter - decVal);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.807.1">return</span></span><span class="koboSpan" id="kobo.808.1"> [counter, increment, decrement];
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.809.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.810.1">default</span></span><span class="koboSpan" id="kobo.811.1"> useCounter;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.812.1">
     To use the returned values, then, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.813.1">
      Demo1
     </span>
    </code>
    <span class="koboSpan" id="kobo.814.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.815.1">
      Demo2
     </span>
    </code>
    <span class="koboSpan" id="kobo.816.1">
     components need to switch from object destructuring to array destructuring, as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.817.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.818.1">Demo1</span></span><span class="koboSpan" id="kobo.819.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.820.1">const</span></span><span class="koboSpan" id="kobo.821.1"> [counter, increment, decrement] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.822.1">useCounter</span></span><span class="koboSpan" id="kobo.823.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.824.1">1</span></span><span class="koboSpan" id="kobo.825.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.826.1">2</span></span><span class="koboSpan" id="kobo.827.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.828.1">1</span></span><span class="koboSpan" id="kobo.829.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.830.1">return</span></span><span class="koboSpan" id="kobo.831.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.832.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.833.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.834.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.835.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.836.1">{counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.837.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.838.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.839.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.840.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.841.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.842.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.843.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.844.1">{increment}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.845.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.846.1">Inc</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.847.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.848.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.849.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.850.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.851.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.852.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.853.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.854.1">{decrement}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.855.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.856.1">Dec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.857.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.858.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.859.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.860.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.861.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.862.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.863.1">Demo2</span></span><span class="koboSpan" id="kobo.864.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.865.1">const</span></span><span class="koboSpan" id="kobo.866.1"> [counter, increment, decrement] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.867.1">useCounter</span></span><span class="koboSpan" id="kobo.868.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.869.1">0</span></span><span class="koboSpan" id="kobo.870.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.871.1">1</span></span><span class="koboSpan" id="kobo.872.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.873.1">2</span></span><span class="koboSpan" id="kobo.874.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.875.1">return</span></span><span class="koboSpan" id="kobo.876.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.877.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.878.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.879.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.880.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.881.1">{counter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.882.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.883.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.884.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.885.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.886.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.887.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.888.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.889.1">{increment}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.890.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.891.1">Inc</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.892.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.893.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.894.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.895.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.896.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.897.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.898.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.899.1">{decrement}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.900.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.901.1">Dec</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.902.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.903.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.904.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.905.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.906.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.907.1">
     The two
    </span>
    <a id="_idIndexMarker588">
    </a>
    <span class="koboSpan" id="kobo.908.1">
     components behave like before, so you can decide which return value you prefer.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.909.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.910.1">
      This finished code can also be found on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/examples/03-return-values">
      <span class="url">
       <span class="koboSpan" id="kobo.911.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/examples/03-return-values
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.912.1">
      .
     </span>
    </p>
   </div>
   <h1 class="heading-1" id="_idParaDest-241">
    <span class="koboSpan" id="kobo.913.1">
     A More Complex Example
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.914.1">
     The previous
    </span>
    <a id="_idIndexMarker589">
    </a>
    <span class="koboSpan" id="kobo.915.1">
     examples were deliberately rather simple.
    </span>
    <span class="koboSpan" id="kobo.915.2">
     Now that the basics of custom Hooks are clear, it makes sense to dive into a slightly more advanced and realistic example.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.916.1">
     Consider the HTTP request example from the beginning of this chapter:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.917.1">const</span></span><span class="koboSpan" id="kobo.918.1"> initialHttpState = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.919.1">data</span></span><span class="koboSpan" id="kobo.920.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.921.1">null</span></span><span class="koboSpan" id="kobo.922.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.923.1">isLoading</span></span><span class="koboSpan" id="kobo.924.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.925.1">false</span></span><span class="koboSpan" id="kobo.926.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.927.1">error</span></span><span class="koboSpan" id="kobo.928.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.929.1">null</span></span><span class="koboSpan" id="kobo.930.1">,
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.931.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.932.1">httpReducer</span></span><span class="koboSpan" id="kobo.933.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.934.1">state, action</span></span><span class="koboSpan" id="kobo.935.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.936.1">if</span></span><span class="koboSpan" id="kobo.937.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.938.1">type</span></span><span class="koboSpan" id="kobo.939.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.940.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.941.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.942.1">return</span></span><span class="koboSpan" id="kobo.943.1"> {
      ...state, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.944.1">// copying the existing state</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.945.1">isLoading</span></span><span class="koboSpan" id="kobo.946.1">: state.</span><span class="hljs-property"><span class="koboSpan" id="kobo.947.1">data</span></span><span class="koboSpan" id="kobo.948.1"> ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.949.1">false</span></span><span class="koboSpan" id="kobo.950.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.951.1">true</span></span><span class="koboSpan" id="kobo.952.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.953.1">error</span></span><span class="koboSpan" id="kobo.954.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.955.1">null</span></span><span class="koboSpan" id="kobo.956.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.957.1">if</span></span><span class="koboSpan" id="kobo.958.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.959.1">type</span></span><span class="koboSpan" id="kobo.960.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.961.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.962.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.963.1">return</span></span><span class="koboSpan" id="kobo.964.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.965.1">data</span></span><span class="koboSpan" id="kobo.966.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.967.1">null</span></span><span class="koboSpan" id="kobo.968.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.969.1">isLoading</span></span><span class="koboSpan" id="kobo.970.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.971.1">false</span></span><span class="koboSpan" id="kobo.972.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.973.1">error</span></span><span class="koboSpan" id="kobo.974.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.975.1">payload</span></span><span class="koboSpan" id="kobo.976.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.977.1">if</span></span><span class="koboSpan" id="kobo.978.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.979.1">type</span></span><span class="koboSpan" id="kobo.980.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.981.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.982.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.983.1">return</span></span><span class="koboSpan" id="kobo.984.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.985.1">data</span></span><span class="koboSpan" id="kobo.986.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.987.1">payload</span></span><span class="koboSpan" id="kobo.988.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.989.1">isLoading</span></span><span class="koboSpan" id="kobo.990.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.991.1">false</span></span><span class="koboSpan" id="kobo.992.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.993.1">error</span></span><span class="koboSpan" id="kobo.994.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.995.1">null</span></span><span class="koboSpan" id="kobo.996.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.997.1">return</span></span><span class="koboSpan" id="kobo.998.1"> initialHttpState; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.999.1">// default value for unknown actions</span></span><span class="koboSpan" id="kobo.1000.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1001.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1002.1">App</span></span><span class="koboSpan" id="kobo.1003.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1004.1">const</span></span><span class="koboSpan" id="kobo.1005.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1006.1">useReducer</span></span><span class="koboSpan" id="kobo.1007.1">(
    httpReducer, 
    initialHttpState
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1008.1">const</span></span><span class="koboSpan" id="kobo.1009.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1010.1">useCallback</span></span><span class="koboSpan" id="kobo.1011.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1012.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1013.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1014.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1015.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1016.1">dispatch</span></span><span class="koboSpan" id="kobo.1017.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1018.1">type</span></span><span class="koboSpan" id="kobo.1019.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1020.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1021.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1022.1">try</span></span><span class="koboSpan" id="kobo.1023.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1024.1">const</span></span><span class="koboSpan" id="kobo.1025.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1026.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1027.1">fetch</span></span><span class="koboSpan" id="kobo.1028.1">(
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.1029.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1030.1">
      );
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1031.1">if</span></span><span class="koboSpan" id="kobo.1032.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1033.1">ok</span></span><span class="koboSpan" id="kobo.1034.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1035.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1036.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1037.1">Error</span></span><span class="koboSpan" id="kobo.1038.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1039.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1040.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1041.1">const</span></span><span class="koboSpan" id="kobo.1042.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1043.1">await</span></span><span class="koboSpan" id="kobo.1044.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1045.1">json</span></span><span class="koboSpan" id="kobo.1046.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1047.1">dispatch</span></span><span class="koboSpan" id="kobo.1048.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1049.1">type</span></span><span class="koboSpan" id="kobo.1050.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1051.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1052.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1053.1">payload</span></span><span class="koboSpan" id="kobo.1054.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1055.1">catch</span></span><span class="koboSpan" id="kobo.1056.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1057.1">dispatch</span></span><span class="koboSpan" id="kobo.1058.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1059.1">type</span></span><span class="koboSpan" id="kobo.1060.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1061.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1062.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1063.1">payload</span></span><span class="koboSpan" id="kobo.1064.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1065.1">message</span></span><span class="koboSpan" id="kobo.1066.1"> });
    }
  }, []);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1067.1">useEffect</span></span><span class="koboSpan" id="kobo.1068.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1069.1">function</span></span><span class="koboSpan" id="kobo.1070.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1071.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1072.1">();
    },
    [fetchPosts]
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1073.1">return</span></span><span class="koboSpan" id="kobo.1074.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1075.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1076.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1077.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1078.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1079.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1080.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1081.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1082.1">Complex State Blog</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1083.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1084.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1085.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1086.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1087.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1088.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1089.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1090.1">{fetchPosts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1091.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1092.1">Load Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1093.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1094.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1095.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1096.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1097.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1098.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1099.1">      {httpState.isLoading &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1100.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1101.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1102.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1103.1">Loading...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1104.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1105.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1106.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1107.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1108.1">      {httpState.error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1109.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1110.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1111.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1112.1">{httpState.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1113.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1114.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1115.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1116.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1117.1">      {httpState.data &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1118.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1119.1">BlogPosts</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1120.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1121.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1122.1">{httpState.data}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1123.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1124.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1125.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1126.1">
  );
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1127.1">
     In that
    </span>
    <a id="_idIndexMarker590">
    </a>
    <span class="koboSpan" id="kobo.1128.1">
     example, the entire
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1129.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1130.1">
     logic (including the reducer function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1131.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1132.1">
     ) and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1133.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1134.1">
     call can be outsourced into a custom Hook.
    </span>
    <span class="koboSpan" id="kobo.1134.2">
     The result would be a very lean
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1135.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1136.1">
     component and a reusable Hook that could be used in other components as well.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-242">
    <span class="koboSpan" id="kobo.1137.1">
     Building a First Version of the Custom Hook
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1138.1">
     This custom
    </span>
    <a id="_idIndexMarker591">
    </a>
    <span class="koboSpan" id="kobo.1139.1">
     Hook could be named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1140.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1141.1">
     (since it fetches data), and it could be stored in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1142.1">
      hooks/use-fetch.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1143.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1143.2">
     Of course, both the Hook name as well as the file storage path are up to you.
    </span>
    <span class="koboSpan" id="kobo.1143.3">
     Here’s how the first
    </span>
    <a id="_idIndexMarker592">
    </a>
    <span class="koboSpan" id="kobo.1144.1">
     version of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1145.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1146.1">
     might look:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1147.1">import</span></span><span class="koboSpan" id="kobo.1148.1"> { useCallback, useEffect, useReducer } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1149.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1150.1">'react'</span></span><span class="koboSpan" id="kobo.1151.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1152.1">const</span></span><span class="koboSpan" id="kobo.1153.1"> initialHttpState = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1154.1">data</span></span><span class="koboSpan" id="kobo.1155.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1156.1">null</span></span><span class="koboSpan" id="kobo.1157.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1158.1">isLoading</span></span><span class="koboSpan" id="kobo.1159.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1160.1">false</span></span><span class="koboSpan" id="kobo.1161.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1162.1">error</span></span><span class="koboSpan" id="kobo.1163.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1164.1">null</span></span><span class="koboSpan" id="kobo.1165.1">,
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1166.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1167.1">httpReducer</span></span><span class="koboSpan" id="kobo.1168.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1169.1">state, action</span></span><span class="koboSpan" id="kobo.1170.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1171.1">// same reducer code as before</span></span><span class="koboSpan" id="kobo.1172.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1173.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1174.1">useFetch</span></span><span class="koboSpan" id="kobo.1175.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1176.1">const</span></span><span class="koboSpan" id="kobo.1177.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1178.1">useReducer</span></span><span class="koboSpan" id="kobo.1179.1">(
    httpReducer, 
    initialHttpState
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1180.1">const</span></span><span class="koboSpan" id="kobo.1181.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1182.1">useCallback</span></span><span class="koboSpan" id="kobo.1183.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1184.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1185.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1186.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1187.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1188.1">dispatch</span></span><span class="koboSpan" id="kobo.1189.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1190.1">type</span></span><span class="koboSpan" id="kobo.1191.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1192.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1193.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1194.1">try</span></span><span class="koboSpan" id="kobo.1195.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1196.1">const</span></span><span class="koboSpan" id="kobo.1197.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1198.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1199.1">fetch</span></span><span class="koboSpan" id="kobo.1200.1">(
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.1201.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1202.1">
      );
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1203.1">if</span></span><span class="koboSpan" id="kobo.1204.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1205.1">ok</span></span><span class="koboSpan" id="kobo.1206.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1207.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1208.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1209.1">Error</span></span><span class="koboSpan" id="kobo.1210.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1211.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1212.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1213.1">const</span></span><span class="koboSpan" id="kobo.1214.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1215.1">await</span></span><span class="koboSpan" id="kobo.1216.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1217.1">json</span></span><span class="koboSpan" id="kobo.1218.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1219.1">dispatch</span></span><span class="koboSpan" id="kobo.1220.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1221.1">type</span></span><span class="koboSpan" id="kobo.1222.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1223.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1224.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1225.1">payload</span></span><span class="koboSpan" id="kobo.1226.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1227.1">catch</span></span><span class="koboSpan" id="kobo.1228.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1229.1">dispatch</span></span><span class="koboSpan" id="kobo.1230.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1231.1">type</span></span><span class="koboSpan" id="kobo.1232.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1233.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1234.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1235.1">payload</span></span><span class="koboSpan" id="kobo.1236.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1237.1">message</span></span><span class="koboSpan" id="kobo.1238.1"> });
    }
  }, []);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1239.1">useEffect</span></span><span class="koboSpan" id="kobo.1240.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1241.1">function</span></span><span class="koboSpan" id="kobo.1242.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1243.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1244.1">();
    },
    [fetchPosts]
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1245.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1246.1">default</span></span><span class="koboSpan" id="kobo.1247.1"> useFetch;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1248.1">
     Please note that this is not the final version.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1249.1">
     In this first version, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1250.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1251.1">
     Hook contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1252.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1253.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1254.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1255.1">
     logic.
    </span>
    <span class="koboSpan" id="kobo.1255.2">
     It’s
    </span>
    <a id="_idIndexMarker593">
    </a>
    <span class="koboSpan" id="kobo.1256.1">
     worth noting that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1257.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1258.1">
     function is created outside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1259.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1260.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1260.2">
     This ensures that the function is not recreated unnecessarily when
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1261.1">
      useFetch()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1262.1">
     is re-executed (which will happen often as it is called every time the component that uses this Hook is re-evaluated).
    </span>
    <span class="koboSpan" id="kobo.1262.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1263.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1264.1">
     function will therefore only be created once (for the entire application lifetime), and that same function instance will be shared by all components that use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1265.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1266.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1267.1">
     Since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1268.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1269.1">
     is a pure function (that is, it always produces new return values that are based purely on the parameter values), sharing this function instance is fine and won’t cause any unexpected bugs.
    </span>
    <span class="koboSpan" id="kobo.1269.2">
     If
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1270.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1271.1">
     were to store or manipulate any values that are not based on function inputs, it should be created inside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1272.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1273.1">
     instead.
    </span>
    <span class="koboSpan" id="kobo.1273.2">
     This way, you avoid having multiple components accidentally manipulate and use shared values.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1274.1">
     However, this version of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1275.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1276.1">
     Hook has two big issues:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1277.1">
      Currently, no value is returned.
     </span>
     <span class="koboSpan" id="kobo.1277.2">
      Therefore, components that use this Hook won’t get access to the fetched data or the loading state.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1278.1">
      The HTTP request URL is hardcoded into
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1279.1">
       useFetch
      </span>
     </code>
     <span class="koboSpan" id="kobo.1280.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1280.2">
      As a result, all components that use this Hook will send the same kind of request to the same URL.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1281.1">
     Therefore, to improve this Hook, these two issues must be tackled—starting with the first one.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-243">
    <span class="koboSpan" id="kobo.1282.1">
     Making the Hook Useful by Returning Values
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1283.1">
     The first
    </span>
    <a id="_idIndexMarker594">
    </a>
    <span class="koboSpan" id="kobo.1284.1">
     issue can be solved by returning the fetched data (or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1285.1">
      undefined
     </span>
    </code>
    <span class="koboSpan" id="kobo.1286.1">
     , if no data was fetched yet), the loading state value, and the error value.
    </span>
    <span class="koboSpan" id="kobo.1286.2">
     Since these values are exactly the values that make up the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1287.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1288.1">
     object
    </span>
    <a id="_idIndexMarker595">
    </a>
    <span class="koboSpan" id="kobo.1289.1">
     returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1290.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1291.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1292.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1293.1">
     can simply return that entire
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1294.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1295.1">
     object, as shown here:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1296.1">// httpReducer function and initial state did not change, </span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.1297.1">// hence omitted here</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1298.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1299.1">useFetch</span></span><span class="koboSpan" id="kobo.1300.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1301.1">const</span></span><span class="koboSpan" id="kobo.1302.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1303.1">useReducer</span></span><span class="koboSpan" id="kobo.1304.1">(
    httpReducer, 
    initialHttpState
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1305.1">const</span></span><span class="koboSpan" id="kobo.1306.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1307.1">useCallback</span></span><span class="koboSpan" id="kobo.1308.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1309.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1310.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1311.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1312.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1313.1">dispatch</span></span><span class="koboSpan" id="kobo.1314.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1315.1">type</span></span><span class="koboSpan" id="kobo.1316.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1317.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1318.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1319.1">try</span></span><span class="koboSpan" id="kobo.1320.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1321.1">const</span></span><span class="koboSpan" id="kobo.1322.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1323.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1324.1">fetch</span></span><span class="koboSpan" id="kobo.1325.1">(
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.1326.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1327.1">
      );
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1328.1">if</span></span><span class="koboSpan" id="kobo.1329.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1330.1">ok</span></span><span class="koboSpan" id="kobo.1331.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1332.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1333.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1334.1">Error</span></span><span class="koboSpan" id="kobo.1335.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1336.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1337.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1338.1">const</span></span><span class="koboSpan" id="kobo.1339.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1340.1">await</span></span><span class="koboSpan" id="kobo.1341.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1342.1">json</span></span><span class="koboSpan" id="kobo.1343.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1344.1">dispatch</span></span><span class="koboSpan" id="kobo.1345.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1346.1">type</span></span><span class="koboSpan" id="kobo.1347.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1348.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1349.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1350.1">payload</span></span><span class="koboSpan" id="kobo.1351.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1352.1">catch</span></span><span class="koboSpan" id="kobo.1353.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1354.1">dispatch</span></span><span class="koboSpan" id="kobo.1355.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1356.1">type</span></span><span class="koboSpan" id="kobo.1357.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1358.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1359.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1360.1">payload</span></span><span class="koboSpan" id="kobo.1361.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1362.1">message</span></span><span class="koboSpan" id="kobo.1363.1"> });
    }
  }, []);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1364.1">useEffect</span></span><span class="koboSpan" id="kobo.1365.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1366.1">function</span></span><span class="koboSpan" id="kobo.1367.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1368.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1369.1">();
    },
    [fetchPosts]
  );
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1370.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1371.1"> httpState;</span></strong></span><span class="koboSpan" id="kobo.1372.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1373.1">
     The only thing that changed in this code snippet is the last line of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1374.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1375.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.1375.2">
     With
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1376.1">
      return httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1377.1">
     , the state managed by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1378.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1379.1">
     (and therefore by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1380.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1381.1">
     function) is returned by the custom Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1382.1">
     With that
    </span>
    <a id="_idIndexMarker596">
    </a>
    <span class="koboSpan" id="kobo.1383.1">
     first issue fixed, the next step is to also make the Hook more reusable.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-244">
    <span class="koboSpan" id="kobo.1384.1">
     Improving Reusability by Accepting an Input Parameter
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1385.1">
     To fix
    </span>
    <a id="_idIndexMarker597">
    </a>
    <span class="koboSpan" id="kobo.1386.1">
     the second problem (i.e., the hardcoded URL), a parameter should be added to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1387.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1388.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1389.1">// httpReducer function and initial state did not change, hence omitted here</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1390.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1391.1">useFetch</span></span><span class="koboSpan" id="kobo.1392.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1393.1">url</span></strong></span><span class="koboSpan" id="kobo.1394.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1395.1">const</span></span><span class="koboSpan" id="kobo.1396.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1397.1">useReducer</span></span><span class="koboSpan" id="kobo.1398.1">(
    httpReducer, 
    initialHttpState
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1399.1">const</span></span><span class="koboSpan" id="kobo.1400.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1401.1">useCallback</span></span><span class="koboSpan" id="kobo.1402.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1403.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1404.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1405.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1406.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1407.1">dispatch</span></span><span class="koboSpan" id="kobo.1408.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1409.1">type</span></span><span class="koboSpan" id="kobo.1410.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1411.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1412.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1413.1">try</span></span><span class="koboSpan" id="kobo.1414.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1415.1">const</span></span><span class="koboSpan" id="kobo.1416.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1417.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1418.1">fetch</span></span><span class="koboSpan" id="kobo.1419.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1420.1">url</span></strong></span><span class="koboSpan" id="kobo.1421.1">);
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1422.1">if</span></span><span class="koboSpan" id="kobo.1423.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1424.1">ok</span></span><span class="koboSpan" id="kobo.1425.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1426.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1427.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1428.1">Error</span></span><span class="koboSpan" id="kobo.1429.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1430.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1431.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1432.1">const</span></span><span class="koboSpan" id="kobo.1433.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1434.1">await</span></span><span class="koboSpan" id="kobo.1435.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1436.1">json</span></span><span class="koboSpan" id="kobo.1437.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1438.1">dispatch</span></span><span class="koboSpan" id="kobo.1439.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1440.1">type</span></span><span class="koboSpan" id="kobo.1441.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1442.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1443.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1444.1">payload</span></span><span class="koboSpan" id="kobo.1445.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1446.1">catch</span></span><span class="koboSpan" id="kobo.1447.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1448.1">dispatch</span></span><span class="koboSpan" id="kobo.1449.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1450.1">type</span></span><span class="koboSpan" id="kobo.1451.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1452.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1453.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1454.1">payload</span></span><span class="koboSpan" id="kobo.1455.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1456.1">message</span></span><span class="koboSpan" id="kobo.1457.1"> });
    }
  }, [</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1458.1">url</span></strong></span><span class="koboSpan" id="kobo.1459.1">]);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1460.1">useEffect</span></span><span class="koboSpan" id="kobo.1461.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1462.1">function</span></span><span class="koboSpan" id="kobo.1463.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1464.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1465.1">();
    },
    [fetchPosts]
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1466.1">return</span></span><span class="koboSpan" id="kobo.1467.1"> httpState;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1468.1">
     In this snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1469.1">
      url
     </span>
    </code>
    <span class="koboSpan" id="kobo.1470.1">
     parameter was added to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1471.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1472.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1472.2">
     This parameter value is then used inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1473.1">
      try
     </span>
    </code>
    <span class="koboSpan" id="kobo.1474.1">
     block when calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1475.1">
      fetch(url)
     </span>
    </code>
    <span class="koboSpan" id="kobo.1476.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1476.2">
     Please note that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1477.1">
      url
     </span>
    </code>
    <span class="koboSpan" id="kobo.1478.1">
     was also added as a dependency to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1479.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1480.1">
     dependencies array.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1481.1">
     Since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1482.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1483.1">
     is wrapped around the fetching function (to prevent infinite loops by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1484.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1485.1">
     ), any external values used inside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1486.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1487.1">
     must be added to its dependencies array.
    </span>
    <span class="koboSpan" id="kobo.1487.2">
     Since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1488.1">
      url
     </span>
    </code>
    <span class="koboSpan" id="kobo.1489.1">
     is an external value (meaning it’s not defined inside of the wrapped function), it must be added.
    </span>
    <span class="koboSpan" id="kobo.1489.2">
     This also makes sense logically: if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1490.1">
      url
     </span>
    </code>
    <span class="koboSpan" id="kobo.1491.1">
     parameter were to change (i.e., if the component that uses
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1492.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1493.1">
     changes it), a new HTTP request should be sent.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1494.1">
     This
    </span>
    <a id="_idIndexMarker598">
    </a>
    <span class="koboSpan" id="kobo.1495.1">
     final version of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1496.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1497.1">
     Hook can now be used in all components to send HTTP requests to different URLs and use the HTTP state values as needed by the components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1498.1">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1499.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1500.1">
     component can use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1501.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1502.1">
     like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1503.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1504.1">BlogPosts</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1505.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1506.1">'./components/BlogPosts.jsx'</span></span><span class="koboSpan" id="kobo.1507.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1508.1">import</span></span><span class="koboSpan" id="kobo.1509.1"> useFetch </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1510.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1511.1">'./hooks/use-fetch.js'</span></span><span class="koboSpan" id="kobo.1512.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1513.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1514.1">App</span></span><span class="koboSpan" id="kobo.1515.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1516.1">const</span></span><span class="koboSpan" id="kobo.1517.1"> { data, isLoading, error } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1518.1">useFetch</span></span><span class="koboSpan" id="kobo.1519.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1520.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1521.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1522.1">return</span></span><span class="koboSpan" id="kobo.1523.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1524.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1525.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1526.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1527.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1528.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1529.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1530.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1531.1">Complex State Blog</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1532.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1533.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1534.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1535.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1536.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1537.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1538.1">      {isLoading &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1539.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1540.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1541.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1542.1">Loading...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1543.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1544.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1545.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1546.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1547.1">      {error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1548.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1549.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1550.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1551.1">{error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1552.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1553.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1554.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1555.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1556.1">      {data &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1557.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1558.1">BlogPosts</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1559.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1560.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1561.1">{data}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1562.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1563.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1564.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1565.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1566.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1567.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1568.1">App</span></span><span class="koboSpan" id="kobo.1569.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1570.1">
     The component imports and calls
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1571.1">
      useFetch()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1572.1">
     (with the appropriate URL as an argument) and uses object destructuring to get the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1573.1">
      data
     </span>
    </code>
    <span class="koboSpan" id="kobo.1574.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1575.1">
      isLoading
     </span>
    </code>
    <span class="koboSpan" id="kobo.1576.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1577.1">
      error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1578.1">
     properties from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1579.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1580.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.1580.2">
     These values are then used in the JSX code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1581.1">
     Of
    </span>
    <a id="_idIndexMarker599">
    </a>
    <span class="koboSpan" id="kobo.1582.1">
     course, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1583.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1584.1">
     Hook could also return a pointer to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1585.1">
      fetchPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1586.1">
     function (in addition to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1587.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1588.1">
     ) to allow components such as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1589.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1590.1">
     component to manually trigger a new request, as shown here:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1591.1">// httpReducer function and initial state did not change, hence omitted here</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1592.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1593.1">useFetch</span></span><span class="koboSpan" id="kobo.1594.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1595.1">url</span></span><span class="koboSpan" id="kobo.1596.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1597.1">const</span></span><span class="koboSpan" id="kobo.1598.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1599.1">useReducer</span></span><span class="koboSpan" id="kobo.1600.1">(
    httpReducer, 
    initialHttpState
   );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1601.1">const</span></span><span class="koboSpan" id="kobo.1602.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1603.1">useCallback</span></span><span class="koboSpan" id="kobo.1604.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1605.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1606.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1607.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1608.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1609.1">dispatch</span></span><span class="koboSpan" id="kobo.1610.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1611.1">type</span></span><span class="koboSpan" id="kobo.1612.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1613.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1614.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1615.1">try</span></span><span class="koboSpan" id="kobo.1616.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1617.1">const</span></span><span class="koboSpan" id="kobo.1618.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1619.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1620.1">fetch</span></span><span class="koboSpan" id="kobo.1621.1">(url);
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1622.1">if</span></span><span class="koboSpan" id="kobo.1623.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1624.1">ok</span></span><span class="koboSpan" id="kobo.1625.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1626.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1627.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1628.1">Error</span></span><span class="koboSpan" id="kobo.1629.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1630.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1631.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1632.1">const</span></span><span class="koboSpan" id="kobo.1633.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1634.1">await</span></span><span class="koboSpan" id="kobo.1635.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1636.1">json</span></span><span class="koboSpan" id="kobo.1637.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1638.1">dispatch</span></span><span class="koboSpan" id="kobo.1639.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1640.1">type</span></span><span class="koboSpan" id="kobo.1641.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1642.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1643.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1644.1">payload</span></span><span class="koboSpan" id="kobo.1645.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1646.1">catch</span></span><span class="koboSpan" id="kobo.1647.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1648.1">dispatch</span></span><span class="koboSpan" id="kobo.1649.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1650.1">type</span></span><span class="koboSpan" id="kobo.1651.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1652.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1653.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1654.1">payload</span></span><span class="koboSpan" id="kobo.1655.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1656.1">message</span></span><span class="koboSpan" id="kobo.1657.1"> });
    }
  }, [url]);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1658.1">useEffect</span></span><span class="koboSpan" id="kobo.1659.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1660.1">function</span></span><span class="koboSpan" id="kobo.1661.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1662.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1663.1">();
    },
    [fetchPosts]
  );
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1664.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1665.1"> [ httpState, fetchPosts ];</span></strong></span><span class="koboSpan" id="kobo.1666.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1667.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1668.1">
      return
     </span>
    </code>
    <span class="koboSpan" id="kobo.1669.1">
     statement was changed.
    </span>
    <span class="koboSpan" id="kobo.1669.2">
     Instead of returning just
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1670.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1671.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1672.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1673.1">
     now returns an array that contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1674.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1675.1">
     object and a pointer to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1676.1">
      fetchPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1677.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.1677.2">
     Alternatively,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1678.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1679.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1680.1">
      fetchPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1681.1">
     could have been merged into an object (instead of an array).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1682.1">
     In
    </span>
    <a id="_idIndexMarker600">
    </a>
    <span class="koboSpan" id="kobo.1683.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1684.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1685.1">
     component,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1686.1">
      useFetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1687.1">
     could now be used like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1688.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1689.1">BlogPosts</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1690.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1691.1">'./components/BlogPosts.jsx'</span></span><span class="koboSpan" id="kobo.1692.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1693.1">import</span></span><span class="koboSpan" id="kobo.1694.1"> useFetch </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1695.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1696.1">'./hooks/use-fetch.js'</span></span><span class="koboSpan" id="kobo.1697.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1698.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1699.1">App</span></span><span class="koboSpan" id="kobo.1700.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1701.1">const</span></span><span class="koboSpan" id="kobo.1702.1"> [{ data, isLoading, error }, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1703.1">fetchPosts</span></strong></span><span class="koboSpan" id="kobo.1704.1">] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1705.1">useFetch</span></span><span class="koboSpan" id="kobo.1706.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1707.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1708.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1709.1">return</span></span><span class="koboSpan" id="kobo.1710.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1711.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1712.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1713.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1714.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1715.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1716.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1717.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1718.1">Complex State Blog</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1719.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1720.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1721.1">&gt;</span></span>
        <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1722.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1723.1">button</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1724.1">onClick</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1725.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1726.1">{fetchPosts}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1727.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1728.1">Load Posts</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1729.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1730.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1731.1">&gt;</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1732.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1733.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1734.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1735.1">      {isLoading &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1736.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1737.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1738.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1739.1">Loading...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1740.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1741.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1742.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1743.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1744.1">      {error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1745.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1746.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1747.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1748.1">{error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1749.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1750.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1751.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1752.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1753.1">      {data &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1754.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1755.1">BlogPosts</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1756.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1757.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1758.1">{data}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1759.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1760.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1761.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1762.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1763.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1764.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1765.1">App</span></span><span class="koboSpan" id="kobo.1766.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1767.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1768.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1769.1">
     component uses array and object destructuring combined to extract the returned values (and the values nested in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1770.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1771.1">
     object).
    </span>
    <span class="koboSpan" id="kobo.1771.2">
     A newly added
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1772.1">
      &lt;button&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1773.1">
     element is then used to trigger the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1774.1">
      fetchPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1775.1">
     function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1776.1">
     This example effectively shows how custom Hooks can lead to much leaner component functions by allowing easy logic reuse, with or without state or side effects.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1777.1">
     In addition, Hooks can also enable some interesting patterns—for example, related to React’s Context API.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-245">
    <span class="koboSpan" id="kobo.1778.1">
     Using Custom Hooks for Context Access
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1779.1">
     As hinted in the previous chapter, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1780.1">
      Outsourcing Context Logic into Separate Components
     </span>
    </em>
    <span class="koboSpan" id="kobo.1781.1">
     section, you can use custom Hooks to improve the process of consuming context
    </span>
    <a id="_idIndexMarker601">
    </a>
    <span class="koboSpan" id="kobo.1782.1">
     values in components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1783.1">
     For
    </span>
    <a id="_idIndexMarker602">
    </a>
    <span class="koboSpan" id="kobo.1784.1">
     example, if you provide some context named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1785.1">
      BookmarkContext
     </span>
    </code>
    <span class="koboSpan" id="kobo.1786.1">
     (e.g., via a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1787.1">
      &lt;BookmarkContextProvider&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1788.1">
     component), you can access this context value inside components like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1789.1">import</span></span><span class="koboSpan" id="kobo.1790.1"> { use } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1791.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1792.1">'react'</span></span><span class="koboSpan" id="kobo.1793.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1794.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1795.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1796.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1797.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.1798.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1799.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1800.1">BookmarkSummary</span></span><span class="koboSpan" id="kobo.1801.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1802.1">const</span></span><span class="koboSpan" id="kobo.1803.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1804.1">use</span></span><span class="koboSpan" id="kobo.1805.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1806.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.1807.1">);
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1808.1">// other component code, including returned JSX code</span></span><span class="koboSpan" id="kobo.1809.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1810.1">
     However, instead of directly accessing the context value like this, you could also build the following custom Hook (e.g., stored in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1811.1">
      store/use-bookmark-context.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1812.1">
     file):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1813.1">import</span></span><span class="koboSpan" id="kobo.1814.1"> { use } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1815.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1816.1">'react'</span></span><span class="koboSpan" id="kobo.1817.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1818.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1819.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1820.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1821.1">'./bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.1822.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1823.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1824.1">useBookmarkContext</span></span><span class="koboSpan" id="kobo.1825.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1826.1">const</span></span><span class="koboSpan" id="kobo.1827.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1828.1">use</span></span><span class="koboSpan" id="kobo.1829.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1830.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.1831.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1832.1">return</span></span><span class="koboSpan" id="kobo.1833.1"> bookmarkCtx;
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1834.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1835.1">default</span></span><span class="koboSpan" id="kobo.1836.1"> useBookmarkContext;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1837.1">
     But, of course, this Hook doesn’t really provide any advantages compared to directly consuming the context value in a component via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1838.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1839.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1840.1">
     That changes once you enrich this custom Hook with more useful logic—for example, with error handling if it’s used in a place where the context is not available:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1841.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1842.1">useBookmarkContext</span></span><span class="koboSpan" id="kobo.1843.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1844.1">const</span></span><span class="koboSpan" id="kobo.1845.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1846.1">use</span></span><span class="koboSpan" id="kobo.1847.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1848.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.1849.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1850.1">if</span></span><span class="koboSpan" id="kobo.1851.1">(!bookmarkCtx) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1852.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1853.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1854.1">Error</span></span><span class="koboSpan" id="kobo.1855.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1856.1">'BookmarkContext must be provided!'</span></span><span class="koboSpan" id="kobo.1857.1">)
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1858.1">return</span></span><span class="koboSpan" id="kobo.1859.1"> bookmarkCtx;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1860.1">
     This Hook can then be used in your components to get hold of the context value like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1861.1">import</span></span><span class="koboSpan" id="kobo.1862.1"> useBookmarkContext </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1863.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1864.1">'../../store/use-bookmark-context.js'</span></span><span class="koboSpan" id="kobo.1865.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1866.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1867.1">BookmarkSummary</span></span><span class="koboSpan" id="kobo.1868.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1869.1">const</span></span><span class="koboSpan" id="kobo.1870.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1871.1">useBookmarkContext</span></span><span class="koboSpan" id="kobo.1872.1">();
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1873.1">// other component code, including returned JSX code</span></span><span class="koboSpan" id="kobo.1874.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1875.1">
     This
    </span>
    <a id="_idIndexMarker603">
    </a>
    <span class="koboSpan" id="kobo.1876.1">
     therefore is not just another example
    </span>
    <a id="_idIndexMarker604">
    </a>
    <span class="koboSpan" id="kobo.1877.1">
     of a custom Hook, but also a common pattern you should know.
    </span>
    <span class="koboSpan" id="kobo.1877.2">
     It’s a pattern that’s used in many React projects since it ensures that you don’t accidentally try to use the context value in a place where it’s not accessible (i.e., in a component that’s not wrapped by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1878.1">
      BookmarkContextProvider
     </span>
    </code>
    <span class="koboSpan" id="kobo.1879.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1880.1">
     Of course, it’s not a pattern you must use, though.
    </span>
    <span class="koboSpan" id="kobo.1880.2">
     But it’s something you could consider using to get an early error if you’re trying to access your context in the wrong place.
    </span>
    <span class="koboSpan" id="kobo.1880.3">
     If you’re distributing a library that exposes some context, it’s an especially helpful pattern since it warns your library users in case they forget to provide the context.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-246">
    <span class="koboSpan" id="kobo.1881.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1882.1">
      You can create custom Hooks to outsource and reuse logic that relies on other built-in or custom Hooks.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1883.1">
      Custom Hooks are regular JavaScript functions with names that start with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1884.1">
       use
      </span>
     </code>
     <span class="koboSpan" id="kobo.1885.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1886.1">
      Custom Hooks can call any other Hooks.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1887.1">
      Therefore, custom Hooks can, for example, manage state or perform side effects.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1888.1">
      All components can use custom Hooks by simply calling them like any other (built-in) Hooks.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1889.1">
      When multiple components use the same custom Hook, every component receives its own “instance” (i.e., its own state value, etc.).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1890.1">
      Inside custom Hooks, you can accept any parameter values and return any values of your choice.
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-247">
    <span class="koboSpan" id="kobo.1891.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1892.1">
     Custom Hooks are a key React feature since they help you to write leaner components and reuse (stateful) logic across them.
    </span>
    <span class="koboSpan" id="kobo.1892.2">
     Especially when building more complex React apps (consisting of dozens or even hundreds of components), custom Hooks can lead to tremendously more manageable code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1893.1">
     Combined with components, props, state (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1894.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1895.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1896.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1897.1">
     ), side effects, and all the other concepts covered in this and previous chapters, you now have a very solid foundation that allows you to build production-ready React apps.
    </span>
    <span class="koboSpan" id="kobo.1897.2">
     Therefore, you’re now prepared to dive into more advanced React concepts as well as crucial third-party packages that you should know about.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1898.1">
     For example, most React apps don’t just consist of one single page—instead, at least on most websites, users should be able to switch between multiple pages.
    </span>
    <span class="koboSpan" id="kobo.1898.2">
     For example, an online shop has a list of products, product detail pages, a shopping cart page, and many other pages.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1899.1">
     The next chapter will therefore explore how you can build such multipage apps with React and the popular React Router third-party package.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-248">
    <span class="koboSpan" id="kobo.1900.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1901.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.1901.2">
     You can then compare your answers to examples that can be found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/12-custom-hooks/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.1902.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/12-custom-hooks/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1903.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1904.1">
      What is the definition of a custom Hook?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1905.1">
      Which special feature can be used inside a custom Hook?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1906.1">
      What happens when multiple components use the same custom Hook?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1907.1">
      How can custom Hooks be made more reusable?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-249">
    <span class="koboSpan" id="kobo.1908.1">
     Apply What You Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1909.1">
     Apply your knowledge about custom Hooks.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-250">
    <span class="koboSpan" id="kobo.1910.1">
     Activity 12.1: Build a Custom Keyboard Input Hook
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1911.1">
     In this activity, your task is to refactor a provided component such that it’s leaner and no longer contains any state or side-effect logic.
    </span>
    <span class="koboSpan" id="kobo.1911.2">
     Instead, you should create a custom Hook that contains that logic.
    </span>
    <span class="koboSpan" id="kobo.1911.3">
     This Hook could then potentially be used in other areas of the React application as well.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1912.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1913.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/activities/practice-1-start">
      <span class="url">
       <span class="koboSpan" id="kobo.1914.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/activities/practice-1-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1915.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1915.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.1915.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1916.1">
       activities/practice-1-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.1917.1">
      , in this case) to use the right code snapshot.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1918.1">
      The provided project also uses many features covered in earlier chapters.
     </span>
     <span class="koboSpan" id="kobo.1918.2">
      Take your time to analyze it and understand the provided code.
     </span>
     <span class="koboSpan" id="kobo.1918.3">
      This is a great practice and allows you to see many key concepts in action.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1919.1">
     Once you have downloaded the code and run
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1920.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.1921.1">
     in the project folder to install all required dependencies, you can start the development server via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1922.1">
      npm run dev
     </span>
    </code>
    <span class="koboSpan" id="kobo.1923.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1923.2">
     As a result, upon visiting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1924.1">
      localhost:5173
     </span>
    </code>
    <span class="koboSpan" id="kobo.1925.1">
     , you should see the following user interface:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1926.1">
     <img alt="A close up of a sign  Description automatically generated" src="image/B31339_12_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1927.1">
     Figure 12.3: The running starting project
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1928.1">
     To complete the activity, the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1929.1">
      Create a new custom Hook file (e.g., in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1930.1">
       src/hooks
      </span>
     </code>
     <span class="koboSpan" id="kobo.1931.1">
      folder) and create a Hook function in that file.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1932.1">
      Move the side effect and state management logic into that new Hook function.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1933.1">
      Make the custom Hook more reusable by accepting and using a parameter that controls which keys are allowed.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1934.1">
      Return the state managed by the custom Hook.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1935.1">
      Use the custom Hook and its returned value in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1936.1">
       App
      </span>
     </code>
     <span class="koboSpan" id="kobo.1937.1">
      component.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1938.1">
     The user interface should be the same once you have completed the activity, but the code of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1939.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1940.1">
     component should change.
    </span>
    <span class="koboSpan" id="kobo.1940.2">
     After finishing the activity,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1941.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1942.1">
     should contain only this code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1943.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1944.1">App</span></span><span class="koboSpan" id="kobo.1945.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1946.1">const</span></span><span class="koboSpan" id="kobo.1947.1"> pressedKey = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1948.1">useKeyEvent</span></span><span class="koboSpan" id="kobo.1949.1">([</span><span class="hljs-string"><span class="koboSpan" id="kobo.1950.1">'s'</span></span><span class="koboSpan" id="kobo.1951.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1952.1">'c'</span></span><span class="koboSpan" id="kobo.1953.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.1954.1">'p'</span></span><span class="koboSpan" id="kobo.1955.1">]); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1956.1">// this is your Hook!</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1957.1">let</span></span><span class="koboSpan" id="kobo.1958.1"> output = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1959.1">''</span></span><span class="koboSpan" id="kobo.1960.1">;
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1961.1">if</span></span><span class="koboSpan" id="kobo.1962.1"> (pressedKey === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1963.1">'s'</span></span><span class="koboSpan" id="kobo.1964.1">) {
    output = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1965.1">''</span></span><span class="koboSpan" id="kobo.1966.1">;
  } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1967.1">else</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1968.1">if</span></span><span class="koboSpan" id="kobo.1969.1"> (pressedKey === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1970.1">'c'</span></span><span class="koboSpan" id="kobo.1971.1">) {
    output = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1972.1">''</span></span><span class="koboSpan" id="kobo.1973.1">;
  } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1974.1">else</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1975.1">if</span></span><span class="koboSpan" id="kobo.1976.1"> (pressedKey === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1977.1">'p'</span></span><span class="koboSpan" id="kobo.1978.1">) {
    output = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1979.1">''</span></span><span class="koboSpan" id="kobo.1980.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1981.1">return</span></span><span class="koboSpan" id="kobo.1982.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1983.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1984.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1985.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1986.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1987.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1988.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1989.1">Press a key!</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1990.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1991.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1992.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1993.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1994.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1995.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1996.1">        Supported keys: </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1997.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1998.1">kbd</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1999.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2000.1">s</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2001.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2002.1">kbd</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2003.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2004.1">, </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2005.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2006.1">kbd</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2007.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2008.1">c</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2009.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2010.1">kbd</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2011.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2012.1">, </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2013.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2014.1">kbd</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2015.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2016.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2017.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2018.1">kbd</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2019.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2020.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2021.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2022.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2023.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2024.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2025.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2026.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2027.1">"output"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2028.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2029.1">{output}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2030.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2031.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2032.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2033.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2034.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2035.1">&gt;</span></span><span class="koboSpan" id="kobo.2036.1">
  );
}
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2037.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2038.1">
      All code files used for this activity, and an example solution, can be found at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.2039.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/12-custom-hooks/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2040.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>