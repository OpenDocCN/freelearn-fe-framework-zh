<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Setting Up a Development Environment</h1>
                </header>
            
            <article>
                
<p class="mce-root">In addition to being a new syntax for OCaml, Reason is a toolchain that makes it easy to get started. In this chapter, we'll do the following:</p>
<ul class="calibre9">
<li class="calibre10">Learn about the Reason toolchain</li>
<li class="calibre10">Configure our editor</li>
<li class="calibre10">Use <kbd class="calibre11">bsb</kbd> to start a pure Reason project</li>
<li class="calibre10">Learn about <kbd class="calibre11">bsconfig.json</kbd></li>
<li class="calibre10">Write an example pure Reason application that manipulates the DOM</li>
<li class="calibre10">Use <kbd class="calibre11">bsb</kbd> to start a ReasonReact project</li>
<li class="calibre10">Get comfortable using <kbd class="calibre11">webpack</kbd> within a Reason project</li>
</ul>
<p class="mce-root">To follow along, clone this book's GitHub repository and start from this chapter's directory. You're also welcome to start from a blank project:</p>
<pre class="calibre16"><strong class="calibre1">git clone https://github.com/PacktPublishing/ReasonML-Quick-Start-Guide.git</strong><br class="title-page-name"/><strong class="calibre1">cd ReasonML-Quick-Start-Guide</strong><br class="title-page-name"/><strong class="calibre1">cd Chapter02/pure-reason-start<br class="title-page-name"/>npm install</strong></pre>
<p class="mce-root"><span class="calibre5">This chapter is meant to get you comfortable with the Reason toolchain. We'll have separate development environments for the pure Reason project and the ReasonReact one. After following along, you'll be comfortable enough to tweak the development environment to your liking. Don't worry about messing anything up, since we'll start fresh in <a href="21586d11-fa31-446f-99f1-dae3beecdb9b.xhtml" target="_blank" class="calibre8">Chapter 3</a>, <em class="calibre15">Creating ReasonReact Components</em>, from another directory.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The Reason toolchain</h1>
                </header>
            
            <article>
                
<p class="mce-root">At the time of writing, the <span class="calibre5">Reason toolchain is essentially BuckleScript—Reason's partner project—and the familiar JavaScript toolchain, namely <kbd class="calibre11">npm</kbd> and <kbd class="calibre11">webpack</kbd> (or another JavaScript module bundler).</span></p>
<p class="mce-root">There's no longer a need for <kbd class="calibre11">babel</kbd>, since BuckleScript compiles to the ES5 version of JavaScript. The compiled output can be configured to use either the CommonJS, AMD, or ES module formats. Reason's powerful static-type system replaces the need for Flow and ESlint. Additionally, Reason's editor plugins all come with <kbd class="calibre11">refmt</kbd>, which is essentially <kbd class="calibre11">prettier</kbd> for Reason.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing BuckleScript</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span class="calibre5">B</span><span class="calibre5">uckleScript is a compiler that takes the OCaml AST and emits clean, readable, and performant JavaScript. </span>It can be installed via <kbd class="calibre11">npm</kbd>, as follows:</p>
<pre class="calibre16"><strong class="calibre1">npm install -g bs-platform</strong></pre>
<p class="mce-root">Installing <kbd class="calibre11">bs-platform</kbd> provides a binary called <kbd class="calibre11">bsb</kbd>, which is BuckleScript's build system.</p>
<div class="packt_infobox"><span>In the future, the Reason toolchain will make it much easier to target native platforms as well as JavaScript. Currently, Reason compiles to native by using a fork of <kbd class="calibre20">bsb</kbd>, called </span><kbd class="calibre20">bsb-native</kbd><span>.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Editor configuration</h1>
                </header>
            
            <article>
                
<p class="mce-root">Reason supports a variety of editors, including VSCode, Sublime Text, Atom, Vim, and Emacs. VSCode is the recommended editor. To configure VSCode, simply install the <kbd class="calibre11">reason-vscode</kbd> extension. That's it!</p>
<p class="mce-root">See the documentation for editor-specific instructions.</p>
<div class="packt_infobox">The Reason editor support documentation can be found at <a href="https://reasonml.github.io/docs/editor-plugins" class="calibre17">https://reasonml.github.io/docs/editor-plugins.</a></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up a pure Reason project</h1>
                </header>
            
            <article>
                
<p class="mce-root">The <kbd class="calibre11">bsb</kbd> binary includes a project generator. We'll use it to create a pure Reason project using the <kbd class="calibre11">basic-reason</kbd> theme. Run <kbd class="calibre11">bsb -themes</kbd> to see all available project templates:</p>
<pre class="calibre16">Available themes: <br class="title-page-name"/>basic<br class="title-page-name"/>basic-reason<br class="title-page-name"/>generator<br class="title-page-name"/>minimal<br class="title-page-name"/>node<br class="title-page-name"/>react<br class="title-page-name"/>react-lite<br class="title-page-name"/>tea</pre>
<p class="mce-root">Since BuckleScript works with both OCaml and Reason, some themes are only for OCaml projects. That being said, feel free to mix OCaml's <kbd class="calibre11">.ml</kbd> files with Reason's <kbd class="calibre11">.re</kbd> files within any BuckleScript project.</p>
<p class="mce-root">In this chapter, we'll focus on using the <kbd class="calibre11">basic-reason</kbd> and <kbd class="calibre11">react</kbd> templates. If you're curious, the <kbd class="calibre11">react-lite</kbd> theme is like the <kbd class="calibre11">react</kbd> one, except <kbd class="calibre11">webpack</kbd> is replaced with a simpler, faster, and more reliable module bundler that is intended only for development purposes.</p>
<p class="mce-root">Let's first create a pure Reason project:</p>
<pre class="calibre16"><strong class="calibre1"><span>bsb -init my-first-app -theme basic-reason<br class="title-page-name"/>cd my-first-app</span></strong></pre>
<p class="mce-root">When we open the project in our editor, we see the following project structure:</p>
<pre class="calibre16">├── .gitignore<br class="title-page-name"/>├── README.md<br class="title-page-name"/>├── bsconfig.json<br class="title-page-name"/>├── node_modules<br class="title-page-name"/>│   ├── .bin<br class="title-page-name"/>│   │   ├── bsb<br class="title-page-name"/>│   │   ├── bsc<br class="title-page-name"/>│   │   └── bsrefmt<br class="title-page-name"/>│   └── bs-platform<br class="title-page-name"/>├── package.json<br class="title-page-name"/>└── src<br class="title-page-name"/>    └── Demo.re</pre>
<p class="mce-root"><span class="calibre5">Overall, there isn't much here, which is kind of refreshing coming from JavaScript. In <kbd class="calibre11">node_modules</kbd>, we see <kbd class="calibre11">bs-platform</kbd> along with some binaries:</span></p>
<ul class="calibre9">
<li class="calibre10"><kbd class="calibre11">bsb</kbd>: The build system</li>
<li class="calibre10"><kbd class="calibre11">bsc</kbd><span>: The compiler</span></li>
<li class="calibre10"><kbd class="calibre11">bsrefmt</kbd><span>: This is essentially JavaScript's <kbd class="calibre11">prettier</kbd>, but for Reason</span></li>
</ul>
<p class="mce-root">As we'll soon see, the <kbd class="calibre11">bsb</kbd> binary is used within <kbd class="calibre11">npm</kbd> scripts. This <kbd class="calibre11">bsc</kbd> binary is rarely used directly. The <kbd class="calibre11">bsrefmt</kbd> binary is used by editor plugins.</p>
<p class="mce-root"><span class="calibre5">In <kbd class="calibre11">Demo.re</kbd>, we see a simple log message:</span></p>
<pre class="calibre16">/* Demo.re */<br class="title-page-name"/>Js.log("Hello, BuckleScript and Reason!");</pre>
<p class="mce-root"><kbd class="calibre11">package.json</kbd> looks somewhat familiar. The<span class="calibre5"> </span><kbd class="calibre11">scripts</kbd><span class="calibre5"> </span>field shows our currently available<span class="calibre5"> </span><kbd class="calibre11">npm</kbd><span class="calibre5"> scripts</span>:</p>
<pre class="calibre16">/* package.json */<br class="title-page-name"/>{<br class="title-page-name"/>  "name": "my-first-app",<br class="title-page-name"/>  "version": "0.1.0",<br class="title-page-name"/>  "scripts": {<br class="title-page-name"/>    "build": "bsb -make-world",<br class="title-page-name"/>    "start": "bsb -make-world -w",<br class="title-page-name"/>    "clean": "bsb -clean-world"<br class="title-page-name"/>  },<br class="title-page-name"/>  "keywords": [<br class="title-page-name"/>    "BuckleScript"<br class="title-page-name"/>  ],<br class="title-page-name"/>  "author": "",<br class="title-page-name"/>  "license": "MIT",<br class="title-page-name"/>  "devDependencies": {<br class="title-page-name"/>    "bs-platform": "^4.0.5"<br class="title-page-name"/>  }<br class="title-page-name"/>}</pre>
<p class="mce-root">Run <kbd class="calibre11">npm run build</kbd> to compile <kbd class="calibre11">Demo.re</kbd> to JavaScript. By default, the compiled output appears right beside the source file as <kbd class="calibre11">Demo.bs.js</kbd>. How does it know which files to compile, and where to output them? That's where <kbd class="calibre11">bsconfig.json</kbd> comes in.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The bsconfig.json file</h1>
                </header>
            
            <article>
                
<p class="mce-root">The<span class="calibre5"> </span><kbd class="calibre11">bsconfig.json</kbd> file is a required file for all BuckleScript projects. Let's explore it:</p>
<pre class="calibre16">// This is the configuration file used by BuckleScript's build system bsb. Its documentation lives here: http://bucklescript.github.io/bucklescript/docson/#build-schema.json<br class="title-page-name"/>// BuckleScript comes with its own parser for bsconfig.json, which is normal JSON, with the extra support of comments and trailing commas.<br class="title-page-name"/>{<br class="title-page-name"/>  "name": "my-first-app",<br class="title-page-name"/>  "version": "0.1.0",<br class="title-page-name"/>  "sources": {<br class="title-page-name"/>    "dir" : "src",<br class="title-page-name"/>    "subdirs" : true<br class="title-page-name"/>  },<br class="title-page-name"/>  "package-specs": {<br class="title-page-name"/>    "module": "commonjs",<br class="title-page-name"/>    "in-source": true<br class="title-page-name"/>  },<br class="title-page-name"/>  "suffix": ".bs.js",<br class="title-page-name"/>  "bs-dependencies": [<br class="title-page-name"/>      // add your dependencies here. You'd usually install them normally through `npm install my-dependency`. If my-dependency has a bsconfig.json too, then everything will work seamlessly.<br class="title-page-name"/>  ],<br class="title-page-name"/>  "warnings": {<br class="title-page-name"/>    "error" : "+101"<br class="title-page-name"/>  },<br class="title-page-name"/>  "namespace": true,<br class="title-page-name"/>  "refmt": 3<br class="title-page-name"/>}</pre>
<p class="mce-root">We'll soon be changing some of these defaults to get more comfortable with BuckleScript's configuration file. Let's first add the following code to<span class="calibre5"> </span><kbd class="calibre11">Demo.re</kbd>:</p>
<pre class="calibre16">type decision =<br class="title-page-name"/>  | Yes<br class="title-page-name"/>  | No<br class="title-page-name"/>  | Maybe;<br class="title-page-name"/><br class="title-page-name"/>let decision = Maybe;<br class="title-page-name"/><br class="title-page-name"/>let response =<br class="title-page-name"/>  switch (decision) {<br class="title-page-name"/>  | Yes =&gt; "Yes!"<br class="title-page-name"/>  | No =&gt; "I'm afraid not."<br class="title-page-name"/>  };<br class="title-page-name"/><br class="title-page-name"/>Js.log(response);</pre>
<p class="mce-root"><span class="calibre5">As you can see, the</span><span class="calibre5"> </span><kbd class="calibre11">switch</kbd><span class="calibre5"> </span><span class="calibre5">expression isn't handling all possible cases of</span><span class="calibre5"> </span><kbd class="calibre11">decision</kbd><span class="calibre5">. </span>Running<span class="calibre5"> </span><kbd class="calibre11">npm run build</kbd><span class="calibre5"> </span>results in the following output:</p>
<pre class="calibre16">ninja: Entering directory `lib/bs'<br class="title-page-name"/>[3/3] Building src/Demo.mlast.d<br class="title-page-name"/>[1/1] Building src/Demo-MyFirstApp.cmj<br class="title-page-name"/><br class="title-page-name"/>  Warning number 8<br class="title-page-name"/>  .../Demo.re 9:3-12:3<br class="title-page-name"/>  <br class="title-page-name"/>   7 │ <br class="title-page-name"/>   8 │ let response =<br class="title-page-name"/>   9 │ switch (decision) {<br class="title-page-name"/>  10 │ | Yes =&gt; "Yes!"<br class="title-page-name"/>  11 │ | No =&gt; "I'm afraid not."<br class="title-page-name"/>  12 │ };<br class="title-page-name"/>  13 │ <br class="title-page-name"/>  14 │ Js.log(response);<br class="title-page-name"/>  <br class="title-page-name"/>  You forgot to handle a possible value here, for example: <br class="title-page-name"/>Maybe</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The warnings field</h1>
                </header>
            
            <article>
                
<p class="mce-root">If we wanted to force this warning to throw an error instead, we note the error number from the preceding  snippet and change the<span class="calibre5"> </span><kbd class="calibre11">warnings</kbd><span class="calibre5"> </span>field of<span class="calibre5"> </span><kbd class="calibre11">bsconfig.json</kbd><span class="calibre5"> </span>to the following:</p>
<pre class="calibre16">"warnings": {<br class="title-page-name"/>  "error": "+101+8" // added "+8"<br class="title-page-name"/>},</pre>
<p class="mce-root">To turn all warnings into errors, use the following code:</p>
<pre class="calibre16">"warnings": {<br class="title-page-name"/>  "error": "A"<br class="title-page-name"/>},</pre>
<div class="packt_infobox">For a complete list of warning numbers, check out <a href="https://caml.inria.fr/pub/docs/manual-ocaml/comp.html#sec281" class="calibre17">https://caml.inria.fr/pub/docs/manual-ocaml/comp.html#sec281</a><span> </span>(scroll down a bit).</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The package-specs field</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span class="calibre5">The</span><span class="calibre5"> </span><kbd class="calibre11">package-specs</kbd><span class="calibre5"> </span><span class="calibre5">field contains two fields:</span><span class="calibre5"> </span><kbd class="calibre11">module</kbd><span class="calibre5"> </span><span class="calibre5">and</span><span class="calibre5"> </span><kbd class="calibre11">in-source</kbd><span class="calibre5">.</span></p>
<p class="mce-root">The <kbd class="calibre11">module</kbd> field controls the JavaScript module format. The default is<span class="calibre5"> </span><kbd class="calibre11">commonjs</kbd><span class="calibre5">, </span>and other available options include<span class="calibre5"> </span><kbd class="calibre11">amdjs</kbd>,<span class="calibre5"> </span><kbd class="calibre11">amdjs-global</kbd>, <kbd class="calibre11">es6</kbd>, and<span class="calibre5"> </span><kbd class="calibre11">es6-global</kbd>. The<span class="calibre5"> </span><kbd class="calibre11">-global</kbd> part tells BuckleScript to resolve <kbd class="calibre11">node_modules</kbd><span class="calibre5"> </span>to relative paths for browsers.</p>
<p class="mce-root">The <kbd class="calibre11">in-source</kbd> field controls the destination of the generated JavaScript files;<span class="calibre5"> </span><kbd class="calibre11">true</kbd> results in the generated files being placed along side source files, and<span class="calibre5"> </span><kbd class="calibre11">false</kbd> results in the generated files being placed in <span class="calibre5"><kbd class="calibre11">lib/js</kbd>. Setting <kbd class="calibre11">in-source</kbd> to <kbd class="calibre11">false</kbd> is useful when using Reason within an existing JavaScript project so that the existing build pipeline can be used without having to change.</span></p>
<p class="mce-root"><span class="calibre5">Let's use the </span><kbd class="calibre11">"es6"</kbd><span class="calibre5"> module format for now, and place our compiled assets in <kbd class="calibre11">lib/js</kbd>:</span></p>
<pre class="calibre16">"package-specs": {<br class="title-page-name"/>  "module": "es6",<br class="title-page-name"/>  "in-source": false<br class="title-page-name"/>},</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The suffix field</h1>
                </header>
            
            <article>
                
<p class="mce-root">The <kbd class="calibre11">suffix</kbd> field configures the extension of the generated JavaScript files. It's generally best to keep the <kbd class="calibre11">".bs.js"</kbd> suffix since this helps <kbd class="calibre11">bsb</kbd> better track the generated artifacts.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The sources field</h1>
                </header>
            
            <article>
                
<p class="mce-root">BuckleScript knew to look in the <kbd class="calibre11">src</kbd> directory because of the following configuration:</p>
<pre class="calibre16">"sources": {<br class="title-page-name"/>  "dir" : "src",<br class="title-page-name"/>  "subdirs" : true<br class="title-page-name"/>},</pre>
<p class="mce-root">If <kbd class="calibre11">subdirs</kbd> were <kbd class="calibre11">false</kbd>, any <kbd class="calibre11">.re</kbd> and <kbd class="calibre11">.ml</kbd> files located in subdirectories of <kbd class="calibre11">src</kbd> wouldn't be compiled.</p>
<div class="packt_infobox"><span>For more information regarding <kbd class="calibre20">bsconfig.json</kbd>, see the following section of the BuckleScript documentation: </span><a href="https://bucklescript.github.io/docs/build-configuration" class="calibre17">https://bucklescript.github.io/docs/build-configuration</a>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Working with DOM</h1>
                </header>
            
            <article>
                
<p class="mce-root">Let's try working with the DOM in pure Reason before jumping into ReasonReact. We'll write a module that does the following:</p>
<ul class="calibre9">
<li class="calibre10">Creates a DOM element</li>
<li class="calibre10">Sets the <kbd class="calibre11">innerText</kbd> of that element</li>
<li class="calibre10">Appends that element to the body of the document</li>
</ul>
<p class="mce-root">Create an<span class="calibre5"> </span><kbd class="calibre11">index.html</kbd><span class="calibre5"> file in the project's root </span>with the following content:</p>
<pre class="calibre16">&lt;html&gt;<br class="title-page-name"/>  &lt;head&gt;&lt;/head&gt;<br class="title-page-name"/>  &lt;body&gt;<br class="title-page-name"/>    &lt;!-- if "in-source": false --&gt;<br class="title-page-name"/>    &lt;script type="module" src="lib/es6/src/Demo.bs.js"&gt;&lt;/script&gt;<br class="title-page-name"/><br class="title-page-name"/>    &lt;!-- if "in-source": true --&gt;<br class="title-page-name"/>    &lt;!-- &lt;script type="module" src="src/Demo.bs.js"&gt;&lt;/script&gt; --&gt;<br class="title-page-name"/>  &lt;/body&gt;<br class="title-page-name"/>&lt;/html&gt;</pre>
<p class="mce-root">Notice the <kbd class="calibre11">type="module"</kbd> attribute on the <kbd class="calibre11">script</kbd> tag. If all module dependencies are <strong class="calibre4">ES Module</strong> (<strong class="calibre4">ESM</strong>) compliant, and they are all available from within the browser, you don't need a module bundler to get started (assuming you're using a browser that supports ES modules).</p>
<p class="mce-root">In<span class="calibre5"> </span><kbd class="calibre11">Greeting.re</kbd>, add the following greeting function:</p>
<pre class="calibre16">let greeting = name =&gt; {j|hello $name|j};</pre>
<p class="mce-root">And in<span class="calibre5"> </span><kbd class="calibre11">Demo.re</kbd>, add the following code:</p>
<pre class="calibre16">[@bs.val] [@bs.scope "document"]<br class="title-page-name"/>external createElement : string =&gt; Dom.element = "";<br class="title-page-name"/><br class="title-page-name"/>[@bs.set] external setInnerText : (Dom.element, string) =&gt; unit = "innerText";<br class="title-page-name"/><br class="title-page-name"/>[@bs.val] [@bs.scope "document.body"]<br class="title-page-name"/>external appendChild : Dom.element =&gt; Dom.element = "";<br class="title-page-name"/><br class="title-page-name"/>let div = createElement("div");<br class="title-page-name"/>setInnerText(div, Greeting.greeting("world"));<br class="title-page-name"/>appendChild(div);</pre>
<p class="mce-root">Using BuckleScript's powerful interoperability features (which we will dive into in <a href="201d7348-8175-4caf-b4f3-285b669b9cf1.xhtml" target="_blank" class="calibre8">Chapter 4</a>, <em class="calibre15">BuckleScript, Belt and Interoperability</em>) the preceding code binds to existing browser APIs, namely<span class="calibre5"> </span><kbd class="calibre11">document.createElement</kbd>,<span class="calibre5"> </span><kbd class="calibre11">innerText</kbd><span class="calibre5">, </span>and<span class="calibre5"> </span><kbd class="calibre11">document.body.appendChild</kbd>, and then uses those bindings to create a<span class="calibre5"> </span><kbd class="calibre11">div</kbd><span class="calibre5"> </span>with some text that is appended to the body of the document.</p>
<p class="mce-root">Run<span class="calibre5"> </span><kbd class="calibre11">npm run build</kbd>, start a server (perhaps with<span class="calibre5"> </span><kbd class="calibre11">php -S localhost:3000</kbd> in a new console tab) at the root of the project, and then navigate to<span class="calibre5"> </span><kbd class="calibre11">http://localhost:3000</kbd> to see our newly-created DOM element:</p>
<p class="cdpaligncenter"><img src="assets/7b54adea-c4aa-49c7-8222-63c1556608c3.png" class="calibre21"/></p>
<p class="mce-root">The <span class="calibre5">takeaway is that </span>having to work with the DOM in this way is really tedious. It's hard to type DOM APIs due to JavaScript's dynamic nature. For example, <kbd class="calibre11">Element.innerText</kbd><span class="calibre5"> </span>is used both to get and set an element's<span class="calibre5"> </span><kbd class="calibre11">innerText</kbd>, depending on how it's used, which therefore would result in two different type signatures:</p>
<pre class="calibre16">[@bs.get] external getInnerText: Dom.element =&gt; string = "innerText";<br class="title-page-name"/>[@bs.set] external setInnerText : (Dom.element, string) =&gt; unit = "innerText";</pre>
<p class="mce-root">Luckily, we have React, which largely abstracts the DOM for us. Using React, we don't need to worry about typing the DOM APIs. It's nice to know that when we want to interact with various browser APIs, BuckleScript has the tools we need to get the job done. While it's certainly possible to write frontend web applications in pure Reason, it's a much more pleasant experience when using ReasonReact, especially when first getting started with Reason.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up a ReasonReact project</h1>
                </header>
            
            <article>
                
<p class="mce-root">To create a new ReasonReact project, run the following command:</p>
<pre class="calibre16"><span><strong class="calibre1">bsb -init my-reason-react-app -theme react</strong><br class="title-page-name"/><strong class="calibre1">cd my-reason-react-app</strong><br class="title-page-name"/></span></pre>
<p class="mce-root">After opening our text editor, we see that a couple of things have changed. T<span class="calibre5">he </span><kbd class="calibre11">package.json</kbd><span class="calibre5"> file lists the relevant React and webpack dependencies. Let's install them:</span></p>
<pre class="calibre16"><strong class="calibre1">npm install</strong></pre>
<p class="mce-root"><span class="calibre5">We also have the following webpack-related npm scripts:</span></p>
<pre class="calibre16">"webpack": "webpack -w",<br class="title-page-name"/>"webpack:production": "NODE_ENV=production webpack"</pre>
<p class="mce-root">In <kbd class="calibre11">bsconfig.json</kbd>, we have a new field that turns on JSX for ReasonReact:</p>
<pre class="calibre16">"reason": {<br class="title-page-name"/>  "react-jsx": 2<br class="title-page-name"/>},</pre>
<p class="mce-root">We have a simple <kbd class="calibre11">webpack.config.js</kbd> file:</p>
<pre class="calibre16">const path = require("path");<br class="title-page-name"/>const outputDir = path.join(__dirname, "build/");<br class="title-page-name"/><br class="title-page-name"/>const isProd = process.env.NODE_ENV === "production";<br class="title-page-name"/><br class="title-page-name"/>module.exports = {<br class="title-page-name"/>  entry: "./src/Index.bs.js",<br class="title-page-name"/>  mode: isProd ? "production" : "development",<br class="title-page-name"/>  output: {<br class="title-page-name"/>    path: outputDir,<br class="title-page-name"/>    publicPath: outputDir,<br class="title-page-name"/>    filename: "Index.js"<br class="title-page-name"/>  }<br class="title-page-name"/>};</pre>
<p class="mce-root">Note how the configured entry point is <kbd class="calibre11">"./src/Index.bs.js"</kbd>, which makes sense since, by default, <kbd class="calibre11">"in-source"</kbd> is set to <kbd class="calibre11">true</kbd> in <kbd class="calibre11">bsconfig.json</kbd>. The rest is just normal webpack stuff.</p>
<p class="mce-root">To run this project, we need to run both <kbd class="calibre11">bsb</kbd> and <kbd class="calibre11">webpack</kbd>:</p>
<pre class="calibre16"><strong class="calibre1">npm start</strong><br class="title-page-name"/><br class="title-page-name"/>/* in another shell */<br class="title-page-name"/><strong class="calibre1">npm run webpack</strong><br class="title-page-name"/><br class="title-page-name"/>/* in another shell */<br class="title-page-name"/><strong class="calibre1">php -S localhost:3000</strong></pre>
<p class="mce-root">Since the <kbd class="calibre11">index.html</kbd> file is located within the <kbd class="calibre11">src</kbd> directory, we visit <kbd class="calibre11">http://localhost:3000/src</kbd> to see the default application.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Improving the developer experience</h1>
                </header>
            
            <article>
                
<p class="mce-root">Now that we've seen how the toolchain works at a basic level, let's improve our developer experience so that we can start our project with just one command. We'll need to install a couple of dependencies, as follows:</p>
<pre class="calibre16"><strong class="calibre1">npm install webpack-dev-server --save-dev</strong><br class="title-page-name"/><strong class="calibre1">npm install npm-run-all --save-dev</strong></pre>
<p class="mce-root">Now, we can update our npm scripts:</p>
<pre class="calibre16">"scripts": {<br class="title-page-name"/>  "start": "npm-run-all --parallel start:*",<br class="title-page-name"/>  "start:bsb": "bsb -clean-world -make-world -w",<br class="title-page-name"/>  "start:webpack": "webpack-dev-server --port 3000",<br class="title-page-name"/>  "build": "npm-run-all build:*",<br class="title-page-name"/>  "build:bsb": "bsb -clean-world -make-world",<br class="title-page-name"/>  "build:webpack": "NODE_ENV=production webpack",<br class="title-page-name"/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br class="title-page-name"/>},</pre>
<p class="mce-root">Next, to get <kbd class="calibre11">webpack-dev-server</kbd> to serve the <kbd class="calibre11">index.html</kbd> file on <kbd class="calibre11">http://localhost:3000</kbd> instead of <kbd class="calibre11">http://localhost:3000/src</kbd>, we need to install <span class="calibre5">and configure</span> <kbd class="calibre11">HtmlWebpackPlugin</kbd>:</p>
<pre class="calibre16"><strong class="calibre1">npm install html-webpack-plugin --save-dev</strong></pre>
<p class="mce-root">We can remove the default <kbd class="calibre11">&lt;script src="../build/Index.js"&gt;&lt;/script&gt;</kbd> tag in <kbd class="calibre11">src/index.html</kbd>, since <kbd class="calibre11">HTMLWebpackPlugin</kbd> will insert the script tag automatically.</p>
<p class="mce-root">We also remove the <kbd class="calibre11">publicPath</kbd> setting so that the default path of <kbd class="calibre11">"/"</kbd> will be used:</p>
<pre class="calibre16">const path = require("path");<br class="title-page-name"/>const HtmlWebpackPlugin = require("html-webpack-plugin");<br class="title-page-name"/><br class="title-page-name"/>const isProd = process.env.NODE_ENV === "production";<br class="title-page-name"/><br class="title-page-name"/>module.exports = {<br class="title-page-name"/>  entry: "./src/Index.bs.js",<br class="title-page-name"/>  mode: isProd ? "production" : "development",<br class="title-page-name"/>  output: {<br class="title-page-name"/>    path: path.join(__dirname, "build/"),<br class="title-page-name"/>    filename: "Index.js"<br class="title-page-name"/>  },<br class="title-page-name"/>  plugins: [<br class="title-page-name"/>    new HtmlWebpackPlugin({<br class="title-page-name"/>      template: "./src/index.html"<br class="title-page-name"/>    })<br class="title-page-name"/>  ]<br class="title-page-name"/>};</pre>
<p class="mce-root">Now, we run <kbd class="calibre11">npm start</kbd> and visit <kbd class="calibre11">http://localhost:3000</kbd> to see the same ReasonReact application running.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span class="calibre5">In this chapter, we saw just how easy it is to get started with Reason. </span>In <a href="21586d11-fa31-446f-99f1-dae3beecdb9b.xhtml" target="_blank" class="calibre8">Chapter 3</a>, <em class="calibre15">Creating ReasonReact Components</em>, we'll start to build a ReasonReact application that we'll use throughout this book. This application will help to provide context as we learn more about Reason semantics, BuckleScript interoperability, and ReasonReact specifics.</p>
<p class="mce-root"><span class="calibre5">Don't worry if you don't yet understand everything within these generated projects. By the end of <a href="21586d11-fa31-446f-99f1-dae3beecdb9b.xhtml" target="_blank" class="calibre8">Chapter 3</a>, <em class="calibre15">Creating ReasonReact Components</em>, you'll be a lot more comfortable. However, if you have questions along the way, please don't hesitate to reach out on Reason's Discord channel for real-time assistance: </span><a href="https://discord.gg/reasonml" class="calibre8">https://discord.gg/reasonml</a>.</p>
<p class="mce-root">I hope you'll find the Reason community as welcoming and helpful as I have.</p>


            </article>

            
        </section>
    </body></html>