<html><head></head><body>
<div id="_idContainer190">
<h1 class="chapter-number" id="_idParaDest-132"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.1.1">6</span></h1>
<h1 id="_idParaDest-133"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.2.1">Global Component Composition</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, we learned how to use Composition API to create component logic and how to write custom reusable composables in a Vue application. </span><span class="koboSpan" id="kobo.3.2">There are many approaches to sharing similar logic between other components besides composables. </span><span class="koboSpan" id="kobo.3.3">In this chapter, we will learn how to use mixins, plugins, and how to render </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">dynamic components.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">By the end of this chapter, you will be ready to organize your code using mixins and plugins, achieve global composition, and keep code </span><strong class="bold"><span class="koboSpan" id="kobo.6.1">DRY</span></strong><span class="koboSpan" id="kobo.7.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.8.1">Don’t Repeat Yourself</span></strong><span class="koboSpan" id="kobo.9.1">) in any project. </span><span class="koboSpan" id="kobo.9.2">You will also understand the advantages and drawbacks of global composition, thus deciding the right approach to maximize a </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">component’s flexibility.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">This chapter covers the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">following topics:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.13.1">Understanding mixins</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.14.1">Understanding plugins</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Registering </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">components globally</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Understanding </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">component tags</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Writing </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">functional components</span></span></li>
</ul>
<h1 id="_idParaDest-134"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.21.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.22.1">In this chapter, you need to set up a basic Vue project following the instructions in </span><a href="B18645_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.23.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.24.1">, </span><em class="italic"><span class="koboSpan" id="kobo.25.1">Starting Your First Vue Project</span></em><span class="koboSpan" id="kobo.26.1">. </span><span class="koboSpan" id="kobo.26.2">It’s recommended to create a single-file Vue component to practice the examples and concepts </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">mentioned easily.</span></span></p>
<p><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.28.1">You can find this chapter’s source code </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">here: </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06"><span class="No-Break"><span class="koboSpan" id="kobo.30.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.31.1">.</span></span></p>
<h1 id="_idParaDest-135"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.32.1">Understanding mixins</span></h1>
<p><span class="koboSpan" id="kobo.33.1">With mixins, we can add additional </span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.34.1">methods, data properties, and life cycle methods to a component’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">option</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1"> object.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">In the following example, we first define a mixin that contains a </span><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">greet</span></strong><span class="koboSpan" id="kobo.39.1"> method and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">greeting</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.41.1">data field:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.42.1">
/** greeter.js */
export default {
  methods: {
    greet(name) {
        return `${this.greeting}, ${name}!`;
    }
  },
  data() {
    return {
      greeting: 'Hello'
    }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.43.1">Then we can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.44.1">greeter</span></strong><span class="koboSpan" id="kobo.45.1"> mixin by importing and assigning it as part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.46.1">mixins</span></strong><span class="koboSpan" id="kobo.47.1"> field in the component’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.48.1">option</span></strong><span class="koboSpan" id="kobo.49.1"> object, </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.51.1">
&lt;script&gt;
import greeter from './mixins/greeter.js'
export default {
  mixins: [greeter]
}
&lt;/script&gt;</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">mixins</span></strong><span class="koboSpan" id="kobo.53.1"> is an array that accepts any mixin as its element, while a </span><strong class="source-inline"><span class="koboSpan" id="kobo.54.1">mixin</span></strong><span class="koboSpan" id="kobo.55.1"> is in fact a component’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.56.1">option</span></strong><span class="koboSpan" id="kobo.57.1"> object. </span><span class="koboSpan" id="kobo.57.2">Mixins allow multiple components to share common data and logic </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">definitions independently.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">Once we add a mixin to a component, Vue will merge all the data and methods into the existing data and methods (mix in). </span><span class="koboSpan" id="kobo.59.2">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.60.1">mixin</span></strong><span class="koboSpan" id="kobo.61.1">’s properties and methods are then available in the </span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.62.1">component for use as its own data and methods, like how we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">greet</span></strong><span class="koboSpan" id="kobo.64.1"> method from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.65.1">greeter</span></strong><span class="koboSpan" id="kobo.66.1"> mixin in the </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">following template:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.68.1">
&lt;template&gt;
  &lt;div&gt;{{ greet('World') }}&lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.69.1">And in the browser, we will see the </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">following message:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer171">
<span class="koboSpan" id="kobo.71.1"><img alt="Figure 6.1 – Display Hello World using a greeter mixin" src="image/B18645_06_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.72.1">Figure 6.1 – Display Hello World using a greeter mixin</span></p>
<p><span class="koboSpan" id="kobo.73.1">When there is an overlapping of naming data properties or methods, Vue will prioritize the component’s own options. </span><span class="koboSpan" id="kobo.73.2">We can explain this mechanism as the component adopting the mixin as its default options unless a similar declaration already exists. </span><span class="koboSpan" id="kobo.73.3">In this case, the instance will ignore the mixin’s definition and take the component’s </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">definition instead.</span></span></p>
<p><span class="koboSpan" id="kobo.75.1">For example, let’s add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">data()</span></strong><span class="koboSpan" id="kobo.77.1"> initializer, which returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">greeting</span></strong><span class="koboSpan" id="kobo.79.1"> data with the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">Hi</span></strong><span class="koboSpan" id="kobo.81.1"> to the component that uses the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">greeter</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.83.1"> mixin:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.84.1">
&lt;script&gt;
import greeter from './mixins/greeter.js'
export default {
  mixins: [greeter],
  data() {
    return {
      greeting: 'Hi'
    }
  }
}
&lt;/script&gt;</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.85.1">greeter</span></strong><span class="koboSpan" id="kobo.86.1"> also defines </span><strong class="source-inline"><span class="koboSpan" id="kobo.87.1">greeting</span></strong><span class="koboSpan" id="kobo.88.1">, but so does the component. </span><span class="koboSpan" id="kobo.88.2">In this case, the component </span><em class="italic"><span class="koboSpan" id="kobo.89.1">wins</span></em><span class="koboSpan" id="kobo.90.1">, and we will see </span><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">Hi</span></strong><span class="koboSpan" id="kobo.92.1"> displayed instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">Hello</span></strong><span class="koboSpan" id="kobo.94.1"> (as defined in the mixin), as in the </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer172">
<span class="koboSpan" id="kobo.96.1"><img alt="Figure 6.2 – Component displays Hi World with overridden greeting data value" src="image/B18645_06_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.97.1">Figure 6.2 – Component displays Hi World with overridden greeting data value</span></p>
<p><span class="koboSpan" id="kobo.98.1">However, this</span><a id="_idIndexMarker685"/><span class="koboSpan" id="kobo.99.1"> mechanism doesn’t apply to life cycle hooks. </span><span class="koboSpan" id="kobo.99.2">The hooks defined in the mixins will take priority in execution, and Vue always triggers the component’s hooks last. </span><span class="koboSpan" id="kobo.99.3">If there is more than one mixin added to the component, the execution order follows their order of appearance in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">mixins</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.101.1"> field.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">We can observe this execution order in the following example. </span><span class="koboSpan" id="kobo.102.2">Let’s create two mixins that implement the </span><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">mounted</span></strong><span class="koboSpan" id="kobo.104.1"> life cycle hook – </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">firstMixin</span></strong><span class="koboSpan" id="kobo.106.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.107.1">secondMixin</span></strong><span class="koboSpan" id="kobo.108.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.110.1">
const firstMixin = {
  mounted() {
    console.log('First mixin mounted hook')
  }
}
const secondMixin = {
  mounted() {
    console.log('Second mixin mounted hook')
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.111.1">Then we also implement the same hook in the component, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.113.1">
export default {
  mixins: [firstMixin, secondMixin],
  mounted() {
    console.log('Component mounted hook')
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.114.1">The full code will</span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.115.1"> look like </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.117.1">
&lt;template&gt;
  &lt;div&gt;Mixin lifecycle hooks demo&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
const firstMixin = {
  mounted() {
    console.log('First mixin mounted hook')
  }
}
const secondMixin = {
  mounted() {
    console.log('Second mixin mounted hook')
  }
}
export default {
  mixins: [firstMixin, secondMixin],
  mounted() {
    console.log('Component mounted hook')
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.118.1">The browser’s console output for this component will be </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer173">
<span class="koboSpan" id="kobo.120.1"><img alt="Figure 6.3 – Console log outputs demonstrate the order of execution for the hooks of mixins and components﻿" src="image/B18645_06_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.121.1">Figure 6.3 – Console log outputs demonstrate the order of execution for the hooks of mixins and components</span><a id="_idTextAnchor221"/></p>
<p><span class="koboSpan" id="kobo.122.1">Now let’s practice </span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.123.1">what we have learned so far by implementing your first mixin in the </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">next exercise.</span></span></p>
<h2 id="_idParaDest-136"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.125.1">Exercise 6.01 – creating your mixin</span></h2>
<p><span class="koboSpan" id="kobo.126.1">In this exercise, we will create </span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.127.1">a mixin called </span><strong class="source-inline"><span class="koboSpan" id="kobo.128.1">debugger</span></strong><span class="koboSpan" id="kobo.129.1">. </span><span class="koboSpan" id="kobo.129.2">It contains a </span><strong class="source-inline"><span class="koboSpan" id="kobo.130.1">debug</span></strong><span class="koboSpan" id="kobo.131.1"> method that receives </span><strong class="source-inline"><span class="koboSpan" id="kobo.132.1">Object</span></strong><span class="koboSpan" id="kobo.133.1"> as its argument and returns a string representing its structure using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.134.1">JSON.stringify()</span></strong><span class="koboSpan" id="kobo.135.1"> function. </span><span class="koboSpan" id="kobo.135.2">This method is handy for printing data in a readable format when debugging Vue.js on the browser instead of </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">the console</span><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.137.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.138.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Exercise6.01"><span class="No-Break"><span class="koboSpan" id="kobo.140.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Exercise6.01</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.141.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.142.1">Execute the following steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">this exercis</span><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.144.1">e:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.145.1">Use the application generated with </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.147.1"> as a starting point, or within the root folder of the code repository, navigate to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">Chapter06/Exercise6.01</span></strong><span class="koboSpan" id="kobo.149.1"> folder, by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.151.1">&gt; cd Chapter06/Exercise6.01/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.152.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.153.1">Open the exercise project in your VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">code .</span></strong><span class="koboSpan" id="kobo.155.1"> command within the project directory), or your </span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.157.1">Create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">src/mixins</span></strong><span class="koboSpan" id="kobo.159.1"> folder and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">src/mixins/debugger.js</span></strong><span class="koboSpan" id="kobo.161.1"> file where we will define the skeleton of </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">our mixin:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.163.1">
export default {}</span></pre></li>
<li><span class="koboSpan" id="kobo.164.1">We add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">debug</span></strong><span class="koboSpan" id="kobo.166.1"> method </span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.167.1">under </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">methods</span></strong><span class="koboSpan" id="kobo.169.1">. </span><span class="koboSpan" id="kobo.169.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">debug</span></strong><span class="koboSpan" id="kobo.171.1"> method will take an </span><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">obj</span></strong><span class="koboSpan" id="kobo.173.1"> parameter and return the output of </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">JSON.stringify</span></strong><span class="koboSpan" id="kobo.175.1"> for that input parameter. </span><span class="koboSpan" id="kobo.175.2">We will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">JSON.stringify(obj, null, 2)</span></strong><span class="koboSpan" id="kobo.177.1"> to output two-space </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">pretty-printed JSON:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.179.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.180.1">
  methods: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.181.1">
    debug(obj) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.182.1">
      return JSON.stringify(obj, null, 2)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.183.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.184.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.185.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.186.1">We are now able to import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">debugger</span></strong><span class="koboSpan" id="kobo.188.1"> mixin in </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.190.1"> and register it under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">mixins</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.192.1"> property:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.193.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.194.1">
import debug from './mixins/debugger.js'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.195.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.196.1">
  mixins: [debugger],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.197.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.198.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.199.1">To see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">debug</span></strong><span class="koboSpan" id="kobo.201.1"> method in</span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.202.1"> action, we will add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">data</span></strong><span class="koboSpan" id="kobo.204.1"> method that returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">myObj</span></strong><span class="koboSpan" id="kobo.206.1"> data property and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">created</span></strong><span class="koboSpan" id="kobo.208.1"> hook where we will compute the output of </span><strong class="source-inline"><span class="koboSpan" id="kobo.209.1">debug</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.210.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">myObj</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.213.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.214.1">
// imports</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.215.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.216.1">
  // other component properties</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.217.1">
  data() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.218.1">
    return {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.219.1">
      myObj: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.220.1">
        some: 'data',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.221.1">
        other: 'values'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.222.1">
      }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.223.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.224.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.225.1">
  created() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.226.1">
    console.log(this.debug(this.myObj))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.227.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.228.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.229.1">
&lt;/script&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.230.1">You should get the </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">following output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer174">
<span class="koboSpan" id="kobo.232.1"><img alt="Figure 6.4 – Browser console output due to the created hook" src="image/B18645_06_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.233.1">Figure 6.4 – Browser console output due to the created hook</span></p>
<ol>
<li value="7"><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">debug</span></strong><span class="koboSpan" id="kobo.235.1"> is also available in</span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.236.1"> the template. </span><span class="koboSpan" id="kobo.236.2">We can display its output wrapped with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">pre</span></strong><span class="koboSpan" id="kobo.238.1"> tag so that whitespace </span><span class="No-Break"><span class="koboSpan" id="kobo.239.1">is respected:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.240.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.241.1">
  &lt;div id="app"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.242.1">
    &lt;pre&gt;{{ debug(myObj) }}&lt;/pre&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.243.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.244.1">
&lt;/template&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.245.1">The application, as well as this template, will look </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer175">
<span class="koboSpan" id="kobo.247.1"><img alt="Figure 6.5 – Browser printing myObj using the debug method from the mixin" src="image/B18645_06_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.248.1">Figure 6.5 – Browser printing myObj using the debug method from the mixin</span></p>
<p><span class="koboSpan" id="kobo.249.1">We have learned how we can use mixins to inject shared logic and data into multiple components in a manner that is quite explicit (a </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">mixins</span></strong><span class="koboSpan" id="kobo.251.1"> property). </span><span class="koboSpan" id="kobo.251.2">However, due to the mechanism of data overriding and executing for hooks, mixins can lead to potential bugs and unwanted behaviors in a large code base. </span><em class="italic"><span class="koboSpan" id="kobo.252.1">Thus, we recommend considering creating shared logic and data as composable with Composition API whenever </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.253.1">possible instead</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.254.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.255.1">We will now look at how to inject instance and global functionality and distribute it </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">through plugi</span><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.257.1">ns.</span></span></p>
<h1 id="_idParaDest-137"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.258.1">Understanding plugins</span></h1>
<p><span class="koboSpan" id="kobo.259.1">Vue plugins are</span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.260.1"> a way to add custom functionality to Vue.js globally. </span><span class="koboSpan" id="kobo.260.2">Classic examples of plugin candidates are translation/internationalization libraries (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.261.1">i18n-next</span></strong><span class="koboSpan" id="kobo.262.1">) and HTTP clients (such as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">axios</span></strong><span class="koboSpan" id="kobo.264.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">fetch</span></strong><span class="koboSpan" id="kobo.266.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">GraphQL</span></strong><span class="koboSpan" id="kobo.268.1"> clients). </span><span class="koboSpan" id="kobo.268.2">The plugin initializer has access to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">Vue</span></strong><span class="koboSpan" id="kobo.270.1"> instance, so it can be a good way to wrap global directives and components and inject resources across </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.272.1">A Vue plugin is an object that exposes an </span><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">install</span></strong><span class="koboSpan" id="kobo.274.1"> method. </span><span class="koboSpan" id="kobo.274.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">install</span></strong><span class="koboSpan" id="kobo.276.1"> function is called with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">app</span></strong><span class="koboSpan" id="kobo.278.1"> instance </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.280.1">options</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.282.1">
const plugin = {
  install(app, options) {}
}</span></pre>
<p><span class="koboSpan" id="kobo.283.1">Within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">install</span></strong><span class="koboSpan" id="kobo.285.1"> method, we can register directives and components and add global and instance properties </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">and methods:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.287.1">
const plugin = {
  install(app, options) {
    app.directive('fade', { bind() {} })
    app.component(/*Register component globally*/)
    app.provide(/*Provide a resource to be injectable*/)
    app.config.globalProperties.$globalValue = 'very-
      global-value'
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.288.1">We can register a plugin using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">use</span></strong><span class="koboSpan" id="kobo.290.1"> instance method, </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.292.1">
import plugin from './plugin'
const app = createApp(/*…*/)
app.use(plugin)</span></pre>
<p><span class="koboSpan" id="kobo.293.1">We can pass an options as the second argument to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">use()</span></strong><span class="koboSpan" id="kobo.295.1"> method. </span><span class="koboSpan" id="kobo.295.2">These options are passed to </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">the plugin:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.297.1">
app.use(plugin, { optionProperty: true })</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.298.1">use()</span></strong><span class="koboSpan" id="kobo.299.1"> does not allow you to register the same plugin twice, avoiding edge case behavior when attempting to instantiate or install the same plugin </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">multiple times.</span></span></p>
<p><span class="koboSpan" id="kobo.301.1">A popular HTTP client to use in combination with Vue is Axios. </span><span class="koboSpan" id="kobo.301.2">It is common to configure Axios with interceptors</span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.302.1"> or Axios options to achieve things such as retries, passing cookies, or </span><span class="No-Break"><span class="koboSpan" id="kobo.303.1">following redirects.</span></span></p>
<p><span class="koboSpan" id="kobo.304.1">Axios can be installed using </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">npm install –save axios</span></strong><span class="koboSpan" id="kobo.306.1">. </span><span class="koboSpan" id="kobo.306.2">In the next exercise, we will create a plugin wrapping Axios inside </span><span class="No-Break"><span class="koboSpan" id="kobo.307.1">our applica</span><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.308.1">tion.</span></span></p>
<h2 id="_idParaDest-138"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.309.1">Exercise 6.02 – creating a custom Axios plugin</span></h2>
<p><span class="koboSpan" id="kobo.310.1">In order to avoid</span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.311.1"> having to add </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">import axios from 'axios'</span></strong><span class="koboSpan" id="kobo.313.1"> or having to wrap our custom Axios instance under an </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">http</span></strong><span class="koboSpan" id="kobo.315.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">transport</span></strong><span class="koboSpan" id="kobo.317.1"> internal module, we’ll inject our custom Axios instance into the Vue object and Vue component instances under </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">Vue.axios</span></strong><span class="koboSpan" id="kobo.319.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.320.1">this.axios</span></strong><span class="koboSpan" id="kobo.321.1">. </span><span class="koboSpan" id="kobo.321.2">This will make it easier and more ergonomic to use in our application, which needs to call out to an API using Axios as the </span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">HTTP client.</span></span></p>
<p><span class="koboSpan" id="kobo.323.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Exercise6.02"><span class="No-Break"><span class="koboSpan" id="kobo.325.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Exercise6.02</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.326.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.327.1">Execute the following steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">this exercise:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.329.1">Use the application generated with </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.331.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">Chapter06/Exercise6.02</span></strong><span class="koboSpan" id="kobo.333.1"> folder, by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.335.1">&gt; cd Chapter06/Exercise6.02/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.336.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.337.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">code .</span></strong><span class="koboSpan" id="kobo.339.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.341.1">To organize our code properly, we will create a new folder in </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">src/plugins</span></strong><span class="koboSpan" id="kobo.343.1"> and a new file for our </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">axios</span></strong><span class="koboSpan" id="kobo.345.1"> plugin at </span><strong class="source-inline"><span class="koboSpan" id="kobo.346.1">src/plugins/axios.js</span></strong><span class="koboSpan" id="kobo.347.1">. </span><span class="koboSpan" id="kobo.347.2">In the new file, we will scaffold the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">axios</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.349.1"> plugin:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.350.1">
import axios from 'axios'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.351.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.352.1">
  install(app, options) {}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.353.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.354.1">We will now register our </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">axios</span></strong><span class="koboSpan" id="kobo.356.1"> plugin</span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.357.1"> on the Vue.js instance </span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">src/main.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.361.1">
// other imports</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.362.1">
import axiosPlugin from './plugins/axios.js'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.363.1">
// Vue instantiation code</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.364.1">
const app = createApp(App)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.365.1">
app.use(axiosPlugin)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.366.1">
app.mount('#app')</span></pre></li>
<li><span class="koboSpan" id="kobo.367.1">We will now install Axios through npm using the following command. </span><span class="koboSpan" id="kobo.367.2">This will allow us to import Axios and expose it on Vue through </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">a plugin:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.369.1">npm install --save axios</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.370.1">We will now add Axios to Vue as a global property </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.372.1">src/plugins/axios.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.373.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.374.1">
import axios from 'axios'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.375.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.376.1">
  install(app) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.377.1">
    app.config.globalProperties.$axios = axios</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.378.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.379.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.380.1">Axios is now available on Vue. </span><span class="koboSpan" id="kobo.380.2">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.382.1">, we can make a request to an API that will populate </span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.383.1">a list </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">todos</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.387.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.388.1">
  &lt;div id="app"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.389.1">
    &lt;div v-for="todo in todos" :key="todo.id"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.390.1">
      &lt;ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.391.1">
        &lt;li&gt;Title: {{ todo.title }}&lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.392.1">
        &lt;li&gt;Status: {{ todo.completed ? </span><span class="koboSpan" id="kobo.392.2">"Completed" :</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.393.1">
          "Not Completed" }}&lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.394.1">
      &lt;/ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.395.1">
    &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.396.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.397.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.398.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.399.1">
import Vue from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.400.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.401.1">
  async mounted() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.402.1">
    const { data: todos } = await</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.403.1">
      this.$axios(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.404.1">
        'https://jsonplaceholder.typicode.com/todos'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.405.1">
      )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.406.1">
    this.todos = todos</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.407.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.408.1">
  data() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.409.1">
    return { todos: [] }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.410.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.411.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.412.1">
&lt;/script&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.413.1">The following is the </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">expected output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer176">
<span class="koboSpan" id="kobo.415.1"><img alt="Figure 6.6 – Global this.$axios todo display sample" src="image/B18645_06_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.416.1">Figure 6.6 – Global this.$axios todo display sample</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.417.1">We can also provide </span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.418.1">Axios as an injectable when necessary, instead of making it available in every component, by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">app.provide()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.420.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.421.1">
// imports</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.422.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.423.1">
  install(app, options) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.424.1">
    // other plugin code</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.425.1">
    app.provide('axios', axios)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.426.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.427.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.428.1">Now we can access Axios through </span><strong class="source-inline"><span class="koboSpan" id="kobo.429.1">this.axios</span></strong><span class="koboSpan" id="kobo.430.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.431.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.432.1"> if we inject </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">'axios'</span></strong><span class="koboSpan" id="kobo.434.1"> into this</span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.435.1"> component by using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">inject</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.437.1"> property:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.438.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.439.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.440.1">
  inject: ['axios'],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.441.1">
  async mounted() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.442.1">
    const { data: todos } = await this.axios(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.443.1">
       'https://jsonplaceholder.typicode.com/todos'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.444.1">
      )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.445.1">
    this.todos = todos</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.446.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.447.1">
  data() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.448.1">
    return { todos: [] }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.449.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.450.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.451.1">
&lt;/script&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.452.1">The output of the above code stays the same as in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.453.1">Figure 6</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.454.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.456.1">With that, we have used a plugin to inject both global and instance-level properties </span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">and methods.</span></span></p>
<p><span class="koboSpan" id="kobo.458.1">We will now look at how globally registering components can help reduce boilerplate for high-usage components in a </span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">c</span><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.460.1">ode base.</span></span></p>
<h1 id="_idParaDest-139"><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.461.1">Globally registering components</span></h1>
<p><span class="koboSpan" id="kobo.462.1">A reason for using </span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.463.1">plugins is to reduce boilerplate in all Vue application files by removing </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">imports</span></strong><span class="koboSpan" id="kobo.465.1"> and replacing it with access </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">this</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.469.1">Vue.js components are usually defined in a single-file component and imported explicitly. </span><span class="koboSpan" id="kobo.469.2">Much for the same reasons as we define global methods and properties, we might want to register components globally. </span><span class="koboSpan" id="kobo.469.3">This will allow us to use these components in all our other component templates without having to import them and register them under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.471.1"> property.</span></span></p>
<p><span class="koboSpan" id="kobo.472.1">A situation where this can be very useful is when using a design system or when a component is used across the </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">code base.</span></span></p>
<p><span class="koboSpan" id="kobo.474.1">Globally registering a component helps with some types of updates, such as if the filename is not exposed to the consumer so that when changing the filename, there is only one path to update as opposed to one </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">per user.</span></span></p>
<p><span class="koboSpan" id="kobo.476.1">Let’s assume we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.477.1">CustomButton</span></strong><span class="koboSpan" id="kobo.478.1"> component in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.479.1">CustomButton.vue</span></strong><span class="koboSpan" id="kobo.480.1"> file that looks </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.482.1">
&lt;template&gt;
  &lt;button @click="$emit('click', $event)"&gt;
    &lt;slot /&gt;
  &lt;/button&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.483.1">We can register </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">CustomButton</span></strong><span class="koboSpan" id="kobo.485.1"> globally as follows (this is usually done in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">main.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.487.1"> file):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.488.1">
// other imports
import CustomButton from './components/CustomButton.vue'
app.component('CustomButton', CustomButton)</span></pre>
<p><span class="koboSpan" id="kobo.489.1">We can now use it in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">App.vue</span></strong><span class="koboSpan" id="kobo.491.1"> file without locally registering it or </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">importing it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.493.1">
&lt;template&gt;
  &lt;div&gt;
    &lt;CustomButton&gt;Click Me&lt;/CustomButton&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.494.1">This renders as expected, with a button called </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.495.1">Click Me</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer177">
<span class="koboSpan" id="kobo.497.1"><img alt="Figure 6.7 – CustomButton rendering with a Click Me button" src="image/B18645_06_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.498.1">Figure 6.7 – CustomButton rendering with a Click Me button</span></p>
<p><span class="koboSpan" id="kobo.499.1">With that, we have</span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.500.1"> explored how globally registering components can cut down on boilerplate when components are used often across a </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">code base.</span></span></p>
<p><span class="koboSpan" id="kobo.502.1">The next section is dedicated to deepening our understanding of Vue.js components by learning how to use them without </span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">.</span><a id="_idTextAnchor231"/></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.505.1"> files.</span></span></p>
<h2 id="_idParaDest-140"><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.506.1">Using non-SFC Vue components</span></h2>
<p><span class="koboSpan" id="kobo.507.1">Most of the examples </span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.508.1">we have seen of Vue.js components have leveraged </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">.vue</span></strong><span class="koboSpan" id="kobo.510.1"> single-file components. </span><span class="koboSpan" id="kobo.510.2">This is not the only way to define a Vue.js component. </span><span class="koboSpan" id="kobo.510.3">In this section, we will look at four different ways to define Vue.js components without using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.511.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.513.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.514.1">Evaluating these options will help us understand what a Vue.js component is a</span><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.515.1">t </span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">its core.</span></span></p>
<h3><span class="koboSpan" id="kobo.517.1">Runtime definition with a string template</span></h3>
<p><span class="koboSpan" id="kobo.518.1">A component can use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.519.1">template</span></strong><span class="koboSpan" id="kobo.520.1"> property that </span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.521.1">accepts a string value. </span><span class="koboSpan" id="kobo.521.2">This is commonly called a </span><strong class="bold"><span class="koboSpan" id="kobo.522.1">string template</span></strong><span class="koboSpan" id="kobo.523.1">. </span><span class="koboSpan" id="kobo.523.2">This template</span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.524.1"> is evaluated at runtime (in </span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">the browser).</span></span></p>
<p><span class="koboSpan" id="kobo.526.1">We can define a component in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">StringTemplate.js</span></strong><span class="koboSpan" id="kobo.528.1"> file by defining an object with a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">template</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.530.1"> property:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.531.1">
export default {
  template: '&lt;div&gt;String Template Component&lt;/div&gt;'
}</span></pre>
<p><span class="koboSpan" id="kobo.532.1">This can then be consumed from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">App.vue</span></strong><span class="koboSpan" id="kobo.534.1"> file, </span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.536.1">
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;StringTemplate /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import StringTemplate from './components/StringTemplate.js'
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.537.1">Unfortunately, the</span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.538.1"> browser won’t display the content of </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">StringTemplate</span></strong><span class="koboSpan" id="kobo.540.1">, and in the console log, you will find the following </span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">Vue warning:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer178">
<span class="koboSpan" id="kobo.542.1"><img alt="Figure 6.8 – Vue runtime compiler missing warning" src="image/B18645_06_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.543.1">Figure 6.8 – Vue runtime compiler missing warning</span></p>
<p><span class="koboSpan" id="kobo.544.1">For this component to work, we need to include the Vue runtime compiler. </span><span class="koboSpan" id="kobo.544.2">We can do so by manually adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">'vue/dist/vue.esm-bundler.js'</span></strong><span class="koboSpan" id="kobo.546.1"> as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">vue</span></strong><span class="koboSpan" id="kobo.548.1"> alias for the Vite engine </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">to resolve.</span></span></p>
<p><span class="koboSpan" id="kobo.550.1">Your </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">vite.config.js</span></strong><span class="koboSpan" id="kobo.552.1"> file should look like </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.554.1">
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./src",
        import.meta.url)),
      vue: "vue/dist/vue.esm-bundler.js",
    },
  },
});</span></pre>
<p><span class="koboSpan" id="kobo.555.1">After re-starting the</span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.556.1"> development server, a message from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">StringTemplate</span></strong><span class="koboSpan" id="kobo.558.1"> component appears in </span><span class="No-Break"><span class="koboSpan" id="kobo.559.1">the browser:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.560.1">
String Template Component</span></pre>
<p><span class="koboSpan" id="kobo.561.1">Next, let’s explore how to create components using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.562.1">re</span><a id="_idTextAnchor234"/><span class="koboSpan" id="kobo.563.1">nder</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.564.1"> function.</span></span></p>
<h3><span class="koboSpan" id="kobo.565.1">Understanding the render function</span></h3>
<p><span class="koboSpan" id="kobo.566.1">Behind the scenes, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">template</span></strong><span class="koboSpan" id="kobo.568.1"> section </span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.569.1">gets compiled into a </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">render</span></strong><span class="koboSpan" id="kobo.571.1"> function at </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">build time.</span></span></p>
<p><span class="koboSpan" id="kobo.573.1">Starting from Vue 3, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">render</span></strong><span class="koboSpan" id="kobo.575.1"> method in</span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.576.1"> a component’s options no longer takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">createElement</span></strong><span class="koboSpan" id="kobo.578.1"> argument and then returns a virtual DOM node received from the execution of </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">createElement</span></strong><span class="koboSpan" id="kobo.580.1">. </span><span class="koboSpan" id="kobo.580.2">Instead, Vue provides an </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">h</span></strong><span class="koboSpan" id="kobo.582.1"> function, which performs the </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">same thing.</span></span></p>
<p><span class="koboSpan" id="kobo.584.1">We can define a component in a JavaScript file (</span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">RenderFunction.js</span></strong><span class="koboSpan" id="kobo.586.1">) with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">render</span></strong><span class="koboSpan" id="kobo.588.1"> property </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.590.1">
import { h } from 'vue'
export default {
  render() {
    return h(
      'h2',
      'Render Function Component'
    )
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.591.1">This can be rendered in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">App.vue</span></strong><span class="koboSpan" id="kobo.593.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.595.1">
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;RenderFunction /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import RenderFunction from './components/RenderFunction.js'
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.596.1">This component</span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.597.1"> displays an </span><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">h2</span></strong><span class="koboSpan" id="kobo.599.1"> with the text </span><strong class="source-inline"><span class="koboSpan" id="kobo.600.1">Render Function Component</span></strong><span class="koboSpan" id="kobo.601.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">the browser:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.603.1">
Render Function Component</span></pre>
<p><span class="koboSpan" id="kobo.604.1">Beyond writing components in non </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">.vue</span></strong><span class="koboSpan" id="kobo.606.1"> files, </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">render</span></strong><span class="koboSpan" id="kobo.608.1"> functions can be useful for highly </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">dy</span><a id="_idTextAnchor235"/><span class="koboSpan" id="kobo.610.1">namic components.</span></span></p>
<h3><span class="koboSpan" id="kobo.611.1">JSX</span></h3>
<p><strong class="bold"><span class="koboSpan" id="kobo.612.1">JSX</span></strong><span class="koboSpan" id="kobo.613.1"> is a superset of JavaScript</span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.614.1"> that allows HTML-style tags and interpolation using braces in React, like SFC </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">to Vue.</span></span></p>
<p><span class="koboSpan" id="kobo.616.1">React, like Vue, does not</span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.617.1"> render the raw JSX to the DOM. </span><span class="koboSpan" id="kobo.617.2">React also use </span><strong class="source-inline"><span class="koboSpan" id="kobo.618.1">render</span></strong><span class="koboSpan" id="kobo.619.1"> to render a component’s content to the Virtual DOM. </span><span class="koboSpan" id="kobo.619.2">The Virtual DOM is then </span><em class="italic"><span class="koboSpan" id="kobo.620.1">reconciled</span></em><span class="koboSpan" id="kobo.621.1"> (synced) with the </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">real DOM.</span></span></p>
<p><span class="koboSpan" id="kobo.623.1">Vite and Vue CLI both support the JSX compiler out of the box for the Vue application. </span><span class="koboSpan" id="kobo.623.2">You just need to turn on JSX support during the installation configuration when using </span><strong class="source-inline"><span class="koboSpan" id="kobo.624.1">create-vue</span></strong><span class="koboSpan" id="kobo.625.1">. </span><span class="koboSpan" id="kobo.625.2">This means we can write the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.626.1">JSXRender.js</span></strong><span class="koboSpan" id="kobo.627.1"> file, which is the equivalent of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.628.1">RenderFunction</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.629.1"> component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.630.1">
export default {
  render() {
    return &lt;h2&gt;JSX Render Function Component&lt;/h2&gt;
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.631.1">The equivalent </span><strong class="source-inline"><span class="koboSpan" id="kobo.632.1">render</span></strong><span class="koboSpan" id="kobo.633.1"> function without JSX looks </span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.635.1">
import { h } from 'vue'
export default {
  render() {
    return h(
      'h2',
      'JSX Render Function Component'
    )
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.636.1">The following </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">App.vue</span></strong><span class="koboSpan" id="kobo.638.1"> file </span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.639.1">renders </span><strong class="source-inline"><span class="koboSpan" id="kobo.640.1">JSXRender</span></strong><span class="koboSpan" id="kobo.641.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">the browser:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.643.1">
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;JSXRender /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import JSXRender from './components/JSXRender.js'
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.644.1">Now, we can see </span><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">h2</span></strong><span class="koboSpan" id="kobo.646.1"> from </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">JSXRender</span></strong><span class="koboSpan" id="kobo.648.1"> on the screen with the </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">expected content:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.650.1">
JSX Render Function Component</span></pre>
<p><span class="koboSpan" id="kobo.651.1">We will now look at how components can </span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.652.1">be rendered dynamically from runtime data using the </span><a id="_idTextAnchor236"/><span class="koboSpan" id="kobo.653.1">
Vue.js </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.655.1"> tag.</span></span></p>
<h1 id="_idParaDest-141"><a id="_idTextAnchor237"/><span class="koboSpan" id="kobo.656.1">Understanding components</span></h1>
<p><span class="koboSpan" id="kobo.657.1">JSX and </span><strong class="source-inline"><span class="koboSpan" id="kobo.658.1">render</span></strong><span class="koboSpan" id="kobo.659.1"> functions are</span><a id="_idIndexMarker713"/><span class="koboSpan" id="kobo.660.1"> great for situations where the component being rendered needs to be very dynamic. </span><span class="koboSpan" id="kobo.660.2">We can also achieve this capability using the </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">Vue </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.664.1">To render a dynamic component, we use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">component</span></strong><span class="koboSpan" id="kobo.666.1"> tag with a bound </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">is</span></strong><span class="koboSpan" id="kobo.668.1"> property (here, we are using the shorthand </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">:is</span></strong><span class="koboSpan" id="kobo.670.1">, which is equivalent </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">v-bind:is</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.674.1">
&lt;component :is="componentName" /&gt;</span></pre>
<p><span class="koboSpan" id="kobo.675.1">We will now learn how to render dynamic components using a name o</span><a id="_idTextAnchor238"/><span class="koboSpan" id="kobo.676.1">r </span><span class="No-Break"><span class="koboSpan" id="kobo.677.1">component reference.</span></span></p>
<h2 id="_idParaDest-142"><a id="_idTextAnchor239"/><span class="koboSpan" id="kobo.678.1">Rendering dynamic components by name or component reference</span></h2>
<p><span class="koboSpan" id="kobo.679.1">Let’s say we have</span><a id="_idIndexMarker714"/><span class="koboSpan" id="kobo.680.1"> a grid that contains items whose display can be toggled between a card display (a design element with an image and text) or an </span><span class="No-Break"><span class="koboSpan" id="kobo.681.1">image-only view.</span></span></p>
<p><span class="koboSpan" id="kobo.682.1">First, we need to import the relevant components and register them as components. </span><span class="koboSpan" id="kobo.682.2">We will also set some fixture data to loop through for </span><span class="No-Break"><span class="koboSpan" id="kobo.683.1">the grid:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.684.1">
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;div class="grid"&gt;
      &lt;component
        class="grid-item"
        v-for="item in items"
        :key="item.id"
      /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Card from './components/Card.vue';
import ImageEntry from './components/ImageEntry.vue';
export default {
  components: {
    Card,
    ImageEntry
  },
  data() {
    return {
      items: [
        {
          id: '10',
          title: 'Forest Shot',
          url: 'https://picsum.photos/id/10/1000/750.jpg',
        },
        {
          id: '1000',
          title: 'Cold cross',
          url:
            'https://picsum.photos/id/1000/1000/750.jpg',
        },
        {
          id: '1002',
          title: 'NASA shot',
          url:
            'https://picsum.photos/id/1002/1000/750.jpg',
        },
        {
          id: '866',
          title: 'Peak',
          url: 'https://picsum.photos/id/866/1000/750.jpg'
        },
      ]
    }
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.685.1">We can then reference the </span><a id="_idIndexMarker715"/><span class="koboSpan" id="kobo.686.1">components by name – that is, </span><strong class="source-inline"><span class="koboSpan" id="kobo.687.1">Card</span></strong><span class="koboSpan" id="kobo.688.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.689.1">ImageEntry</span></strong><span class="koboSpan" id="kobo.690.1"> – and set </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">itemComponent</span></strong><span class="koboSpan" id="kobo.692.1"> as the value </span><span class="No-Break"><span class="koboSpan" id="kobo.693.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">is</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.695.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.696.1">
&lt;template&gt;
    &lt;!-- rest of template --&gt;
    &lt;component
      :is="itemComponent"
      class="grid-item"
      v-for="item in items"
      :key="item.id"
    /&gt;
    &lt;!-- rest of template --&gt;
&lt;/template&gt;
&lt;script&gt;
// rest of script
export default {
  // other component properties
  data() {
    return {
      itemComponent: 'Card',
      // other data properties eg. </span><span class="koboSpan" id="kobo.696.2">'items'
    }
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.697.1">In the preceding code, Vue</span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.698.1"> will render the </span><strong class="source-inline"><span class="koboSpan" id="kobo.699.1">Card</span></strong><span class="koboSpan" id="kobo.700.1"> component since we set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.701.1">itemComponent</span></strong><span class="koboSpan" id="kobo.702.1"> value </span><span class="No-Break"><span class="koboSpan" id="kobo.703.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.704.1">card</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.705.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.706.1">If we set </span><strong class="source-inline"><span class="koboSpan" id="kobo.707.1">itemComponent</span></strong><span class="koboSpan" id="kobo.708.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.709.1">image-entry</span></strong><span class="koboSpan" id="kobo.710.1">, Vue renders the </span><strong class="source-inline"><span class="koboSpan" id="kobo.711.1">ImageEntry</span></strong><span class="koboSpan" id="kobo.712.1"> component. </span><span class="koboSpan" id="kobo.712.2">This switch can be made as follows </span><span class="No-Break"><span class="koboSpan" id="kobo.713.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">v-model</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.716.1">
&lt;template&gt;
  &lt;!-- rest of template --&gt;
  Display mode:
  &lt;input
    type="radio"
    name="style"
    value="Card"
    v-model="itemComponent"
    id="card-radio"
  /&gt;
  &lt;label for="card-radio"&gt;Card&lt;/label&gt;
  &lt;input
    type="radio"
    name="style"
    value="ImageEntry"
    v-model="itemComponent"
    id="image-radio"
  /&gt;
  &lt;label for="image-radio"&gt;Image&lt;/label&gt;
  &lt;!-- rest of template --&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.717.1">We can also pass</span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.718.1"> components to </span><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">is</span></strong><span class="koboSpan" id="kobo.720.1"> using the component reference itself (instead of using the name). </span><span class="koboSpan" id="kobo.720.2">For example, we could set </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">itemComponent</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.722.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">Card</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.725.1">
&lt;script&gt;
// rest of script
export default {
  // other component properties
  data() {
    return {
      itemComponent: 'Card',
      // other data properties eg. </span><span class="koboSpan" id="kobo.725.2">'items'
    }
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.726.1">In this case, switching between card and image views would be more difficult since we would need to use component references instead of </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">using names.</span></span></p>
<p><span class="koboSpan" id="kobo.728.1">We can pass props to</span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.729.1"> components that have been dynamically rendered with </span><strong class="source-inline"><span class="koboSpan" id="kobo.730.1">component</span></strong><span class="koboSpan" id="kobo.731.1"> like we would pass regular props either with </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">v-bind:prop-name</span></strong><span class="koboSpan" id="kobo.733.1"> or the </span><strong class="source-inline"><span class="koboSpan" id="kobo.734.1">:</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.735.1">prop-name</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.736.1"> shorthand:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.737.1">
&lt;template&gt;
    &lt;!-- rest of template --&gt;
    &lt;component
      class="grid-item"
      v-for="item in items"
      :key="item.id"
      :is="itemComponent"
      :url="item.url"
      :title="item.title"
    /&gt;
    &lt;!-- rest of template --&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.738.1">Given the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.739.1">Card</span></strong><span class="koboSpan" id="kobo.740.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1">ImageEntry</span></strong><span class="koboSpan" id="kobo.742.1"> components, we get an application that has toggleable views for </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">grid items.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.744.1">Card.vue</span></strong><span class="koboSpan" id="kobo.745.1"> renders</span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.746.1"> the image and the title and has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.747.1">150px</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.748.1">maximum width:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.749.1">
&lt;template&gt;
  &lt;div class="card"&gt;
    &lt;img :src="url" width="100" /&gt;
    &lt;h3&gt;{{ title }}&lt;/h3&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  props: {
    url: String,
    title: String
  }
}
&lt;/script&gt;
&lt;style scoped&gt;
.card {
  margin: 10px;
  max-width: 150px;
}
h3 {
  font-weight: normal;
}
&lt;/style&gt;</span></pre>
<p><span class="koboSpan" id="kobo.750.1">Your output will display the entries in the card view, </span><span class="No-Break"><span class="koboSpan" id="kobo.751.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer179">
<span class="koboSpan" id="kobo.752.1"><img alt="Figure 6.9 – Grid rendering entries in the card view" src="image/B18645_06_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.753.1">Figure 6.9 – Grid rendering entries in the card view</span></p>
<p><span class="koboSpan" id="kobo.754.1">Use </span><strong class="source-inline"><span class="koboSpan" id="kobo.755.1">ImageEntry.vue</span></strong><span class="koboSpan" id="kobo.756.1"> to render </span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.757.1">only the image at double the width of the </span><span class="No-Break"><span class="koboSpan" id="kobo.758.1">card view:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.759.1">
&lt;template&gt;
  &lt;img class="image" :src="url" /&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  props: {
    url: String
  }
}
&lt;/script&gt;
&lt;style scoped&gt;
.image {
  margin: 20px;
  max-width: 300px;
}
&lt;/style&gt;</span></pre>
<p><span class="koboSpan" id="kobo.760.1">You will now see the entries in the image view, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<span class="koboSpan" id="kobo.762.1"><img alt="Figure 6.10 – Grid rendering entries in the image view" src="image/B18645_06_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.763.1">Figure 6.10 – Grid rendering entries in the image view</span></p>
<p><span class="koboSpan" id="kobo.764.1">A caveat of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.765.1">component</span></strong><span class="koboSpan" id="kobo.766.1"> tag is that the rendered dynamic component gets completely torn down </span><a id="_idIndexMarker721"/><span class="koboSpan" id="kobo.767.1">when it is not displayed anymore. </span><span class="koboSpan" id="kobo.767.2">In this example, the dynamic components being rendered do not have any state, so this teardown does not create </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">any issues.</span></span></p>
<p><span class="koboSpan" id="kobo.769.1">We will now learn how a dynamic component state </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">is cached.</span></span></p>
<h2 id="_idParaDest-143"><a id="_idTextAnchor240"/><span class="koboSpan" id="kobo.771.1">Caching a dynamic component state with keep-alive</span></h2>
<p><span class="koboSpan" id="kobo.772.1">Components that are </span><a id="_idIndexMarker722"/><span class="koboSpan" id="kobo.773.1">dynamically rendered </span><a id="_idIndexMarker723"/><span class="koboSpan" id="kobo.774.1">through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.775.1">component</span></strong><span class="koboSpan" id="kobo.776.1"> tag can have state, such as in a multipart form, with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.777.1">name</span></strong><span class="koboSpan" id="kobo.778.1"> field and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.779.1">address</span></strong><span class="koboSpan" id="kobo.780.1"> field on the </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">next page.</span></span></p>
<p><span class="koboSpan" id="kobo.782.1">Let’s</span><a id="_idIndexMarker724"/><span class="koboSpan" id="kobo.783.1"> implement this </span><a id="_idIndexMarker725"/><span class="koboSpan" id="kobo.784.1">with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.785.1">component</span></strong><span class="koboSpan" id="kobo.786.1"> tag, </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.788.1">
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;component
      :is="activeStep"
      @next="activeStep = 'second-step'"
      @back="activeStep = 'first-step'"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import FirstStep from './components/FirstStep.vue'
import SecondStep from './components/SecondStep.vue'
export default {
  components: {
    FirstStep,
    SecondStep
  },
  data() {
    return {
      activeStep: 'first-step',
    }
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.789.1">And in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">FirstStep</span></strong><span class="koboSpan" id="kobo.791.1"> component, we will implement</span><a id="_idIndexMarker726"/><span class="koboSpan" id="kobo.792.1"> an </span><strong class="source-inline"><span class="koboSpan" id="kobo.793.1">input</span></strong><span class="koboSpan" id="kobo.794.1"> field that requires the user’s name, </span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">as </span></span><span class="No-Break"><a id="_idIndexMarker727"/></span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.797.1">
&lt;template&gt;
  &lt;label&gt; Name: &lt;input v-model="name" /&gt; &lt;/label&gt;
  &lt;button @click="next"&gt;Next&lt;/button&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { ref } from "vue";
const name = ref("");
const emits = defineEmits(["next"]);
const next = () =&gt; {
  emits('next', name.value);
};
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.798.1">And for </span><strong class="source-inline"><span class="koboSpan" id="kobo.799.1">SecondStep.vue</span></strong><span class="koboSpan" id="kobo.800.1">, we will implement another input field with two buttons to navigate back and forward, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.801.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.802.1">
&lt;template&gt;
  &lt;label&gt; Address: &lt;input v-model="address" /&gt; &lt;/label&gt;
    &lt;button @click="next"&gt;Next&lt;/button&gt;
    &lt;button @click="back"&gt;Back&lt;/button&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { ref } from "vue";
const emits = defineEmits(["next", "back"]);
const next = () =&gt; {
  emits("next", name.value);
};
const back = () =&gt; {
  emits("back");
};
const address = ref("");
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.803.1">By doing this, we can enter data in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.804.1">Name</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.805.1"> field:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer181">
<span class="koboSpan" id="kobo.806.1"><img alt="Figure 6.11 – “My name is” is entered in the name field" src="image/B18645_06_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.807.1">Figure 6.11 – “My name is” is entered in the name field</span></p>
<p><span class="koboSpan" id="kobo.808.1">If we navigate, using </span><strong class="bold"><span class="koboSpan" id="kobo.809.1">Next</span></strong><span class="koboSpan" id="kobo.810.1">, to the </span><a id="_idIndexMarker728"/><span class="koboSpan" id="kobo.811.1">address part of the form and then use </span><strong class="bold"><span class="koboSpan" id="kobo.812.1">Back</span></strong><span class="koboSpan" id="kobo.813.1">, the name will disappear, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.814.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer182">
<span class="koboSpan" id="kobo.815.1"><img alt="Figure 6.12 – Empty Name field upon clicking Next and then Back in the address step" src="image/B18645_06_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.816.1">Figure 6.12 – Empty Name field upon clicking Next and then Back in the address step</span></p>
<p><span class="koboSpan" id="kobo.817.1">This is due to the component being unmounted when it is not the currently rendered </span><span class="No-Break"><span class="koboSpan" id="kobo.818.1">dynamic component.</span></span></p>
<p><span class="koboSpan" id="kobo.819.1">To fix this, we </span><a id="_idIndexMarker729"/><span class="koboSpan" id="kobo.820.1">can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">keep-alive</span></strong><span class="koboSpan" id="kobo.822.1"> element around the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.824.1"> tag:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.825.1">
&lt;template&gt;
  &lt;!-- rest of template --&gt;
  &lt;keep-alive&gt;
    &lt;component
      :is="activeStep"
      @next="activeStep = 'second-step'"
      @back="activeStep = 'first-step'"
    /&gt;
  &lt;/keep-alive&gt;
  &lt;!-- rest of template --&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.826.1">In this manner, filling out the name and going back from the address section of the form shows </span><span class="No-Break"><span class="koboSpan" id="kobo.827.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer183">
<span class="koboSpan" id="kobo.828.1"><img alt="Figure 6.12 – “My name is” is still the value in the Name field after navigation" src="image/B18645_06_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.829.1">Figure 6.12 – “My name is” is still the value in the Name field after navigation</span></p>
<p><span class="koboSpan" id="kobo.830.1">We have learned how to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.831.1">component</span></strong><span class="koboSpan" id="kobo.832.1"> tag to denote an area within which we can dynamically display a component based on a string or the component itself (as imported). </span><span class="koboSpan" id="kobo.832.2">We have also</span><a id="_idIndexMarker730"/><span class="koboSpan" id="kobo.833.1"> explored how to</span><a id="_idIndexMarker731"/><span class="koboSpan" id="kobo.834.1"> work around the main gotcha of </span><strong class="source-inline"><span class="koboSpan" id="kobo.835.1">component</span></strong><span class="koboSpan" id="kobo.836.1">; namely, how to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.837.1">keep-alive</span></strong><span class="koboSpan" id="kobo.838.1"> to maintain the component state when it is not the component being actively used in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.840.1"> tag.</span></span></p>
<p><span class="koboSpan" id="kobo.841.1">Now let’s practice wh</span><a id="_idTextAnchor241"/><span class="koboSpan" id="kobo.842.1">at we learned in the </span><span class="No-Break"><span class="koboSpan" id="kobo.843.1">next exercise.</span></span></p>
<h2 id="_idParaDest-144"><a id="_idTextAnchor242"/><span class="koboSpan" id="kobo.844.1">Exercise 6.03 – creating a dynamic card layout with the component tag</span></h2>
<p><span class="koboSpan" id="kobo.845.1">A modern application layout</span><a id="_idIndexMarker732"/><span class="koboSpan" id="kobo.846.1"> is a grid with cards. </span><span class="koboSpan" id="kobo.846.2">Card layouts have the benefit of being well suited to mobile, desktop, and tablet displays. </span><span class="koboSpan" id="kobo.846.3">In this </span><a id="_idIndexMarker733"/><span class="koboSpan" id="kobo.847.1">exercise, we will create a dynamic card layout with three different modes and a way to select between the three of them. </span><span class="koboSpan" id="kobo.847.2">This layout will allow the user to select how much information is displayed on the screen to suit </span><span class="No-Break"><span class="koboSpan" id="kobo.848.1">their preference:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.849.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.850.1">Rich</span></strong><span class="koboSpan" id="kobo.851.1"> view will display all the details for an item, including the image, the title, and </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">the description</span></span></li>
<li><span class="koboSpan" id="kobo.853.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">Compressed</span></strong><span class="koboSpan" id="kobo.855.1"> view will display all the details but not the </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">image preview</span></span></li>
<li><span class="koboSpan" id="kobo.857.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.858.1">List</span></strong><span class="koboSpan" id="kobo.859.1"> view will only display the title and should be a </span><span class="No-Break"><span class="koboSpan" id="kobo.860.1">vertical layout</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.861.1">Each of the card views will be implemented as a separate component that will then be dynamically rendered using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.862.1">component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.863.1"> tag.</span></span></p>
<p><span class="koboSpan" id="kobo.864.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.865.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Exercise6.03"><span class="No-Break"><span class="koboSpan" id="kobo.866.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Exercise6.03</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.867.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.868.1">Execute the following steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.869.1">this exercise:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.870.1">Use the application generated with </span><strong class="source-inline"><span class="koboSpan" id="kobo.871.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.872.1"> as a starting point, or within the root </span><a id="_idIndexMarker734"/><span class="koboSpan" id="kobo.873.1">folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.874.1">Chapter06/Exercise6.03</span></strong><span class="koboSpan" id="kobo.875.1"> folder, by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.877.1">&gt; cd Chapter06/Exercise6.03/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.878.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.879.1">Open the exercise project in your VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.880.1">code .</span></strong><span class="koboSpan" id="kobo.881.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.883.1">Create the rich layout at </span><strong class="source-inline"><span class="koboSpan" id="kobo.884.1">src/components/Rich.vue</span></strong><span class="koboSpan" id="kobo.885.1">. </span><span class="koboSpan" id="kobo.885.2">It contains three props called </span><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">url</span></strong><span class="koboSpan" id="kobo.887.1"> (the</span><a id="_idIndexMarker735"/><span class="koboSpan" id="kobo.888.1"> image URL), </span><strong class="source-inline"><span class="koboSpan" id="kobo.889.1">title</span></strong><span class="koboSpan" id="kobo.890.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.891.1">description</span></strong><span class="koboSpan" id="kobo.892.1"> and renders the image, the title, and the </span><span class="No-Break"><span class="koboSpan" id="kobo.893.1">description, respectively:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.894.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.895.1">
  &lt;div class="card"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.896.1">
    &lt;img :src="url" width="200" /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.897.1">
    &lt;h3&gt;{{ title }}&lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.898.1">
    &lt;p&gt;{{ description }}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.899.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.900.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.901.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.902.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.903.1">
const { url, title, description } = defineProps(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.904.1">
    ['url', 'title', 'description']</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.905.1">
)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.906.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.907.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.908.1">
.card {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.909.1">
  display: flex;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.910.1">
  flex-direction: column;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.911.1">
  max-width: 200px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.912.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.913.1">
h3 {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.914.1">
  font-weight: normal;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.915.1">
  margin-bottom: 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.916.1">
  padding-bottom: 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.917.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.918.1">
&lt;/style&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.919.1">Set up </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.921.1"> with </span><a id="_idIndexMarker736"/><span class="koboSpan" id="kobo.922.1">some </span><span class="No-Break"><span class="koboSpan" id="kobo.923.1">fixture </span></span><span class="No-Break"><a id="_idIndexMarker737"/></span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">data:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.925.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.926.1">
  &lt;div id="app"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.927.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.928.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.929.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.930.1">
const items = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.931.1">
       {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.932.1">
         id: '10',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.933.1">
         title: 'Forest Shot',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.934.1">
         description: 'Recent shot of a forest</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.935.1">
           overlooking a lake',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.936.1">
         url:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.937.1">
         'https://picsum.photos/id/10/1000/750.jpg',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.938.1">
       },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.939.1">
       {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.940.1">
         id: '1000',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.941.1">
         title: 'Cold cross',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.942.1">
         description: 'Mountaintop cross with</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.943.1">
           snowfall from Jan 2018',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.944.1">
         url:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.945.1">
         'https://picsum.photos/id/1000/1000/750.jpg',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.946.1">
       },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.947.1">
     ]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.948.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.949.1">Import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.950.1">Rich</span></strong><span class="koboSpan" id="kobo.951.1"> view </span><a id="_idIndexMarker738"/><span class="koboSpan" id="kobo.952.1">component into </span><strong class="source-inline"><span class="koboSpan" id="kobo.953.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.954.1"> and register </span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">it</span></span><span class="No-Break"><a id="_idIndexMarker739"/></span><span class="No-Break"><span class="koboSpan" id="kobo.956.1"> locally:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.957.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.958.1">
import Rich from './components/Rich.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.959.1">
// other component properties, eg. </span><span class="koboSpan" id="kobo.959.2">"data"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.960.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.961.1">Once we have got the </span><strong class="source-inline"><span class="koboSpan" id="kobo.962.1">Rich</span></strong><span class="koboSpan" id="kobo.963.1"> view component, wire it into the application in </span><strong class="source-inline"><span class="koboSpan" id="kobo.964.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.965.1">, render it with </span><strong class="source-inline"><span class="koboSpan" id="kobo.966.1">component</span></strong><span class="koboSpan" id="kobo.967.1">, and pass the relevant </span><span class="No-Break"><span class="koboSpan" id="kobo.968.1">props through:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.969.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.970.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.971.1">
      &lt;component</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.972.1">
        v-for="item in items"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.973.1">
        :key="item.id"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.974.1">
        :is="layout"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.975.1">
        :title="item.title"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.976.1">
        :description="item.description"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.977.1">
        :url="item.url"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.978.1">
      /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.979.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.980.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.981.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.982.1">
  import { shallowRef } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.983.1">
  const layout = shallowRef(Rich)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.984.1">
  // other data definitions eg. </span><span class="koboSpan" id="kobo.984.2">'items'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.985.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.986.1">This is a good point to </span><a id="_idIndexMarker740"/><span class="koboSpan" id="kobo.987.1">add a bit of styling to</span><a id="_idIndexMarker741"/><span class="koboSpan" id="kobo.988.1"> make the grid look like </span><span class="No-Break"><span class="koboSpan" id="kobo.989.1">a grid:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.990.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.991.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.992.1">
    &lt;div class="grid"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.993.1">
      &lt;component</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.994.1">
        v-for="item in items"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.995.1">
        :key="item.id"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.996.1">
        :is="layout"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.997.1">
        :title="item.title"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.998.1">
        :description="item.description"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.999.1">
        :url="item.url"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1000.1">
      /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1001.1">
    &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1002.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1003.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1004.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1005.1">
.grid {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1006.1">
  display: flex;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1007.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1008.1">
&lt;/style&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1009.1">This displays the </span><a id="_idIndexMarker742"/><span class="No-Break"><span class="koboSpan" id="kobo.1010.1">following </span></span><span class="No-Break"><a id="_idIndexMarker743"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1011.1">output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer184">
<span class="koboSpan" id="kobo.1012.1"><img alt="Figure 6.14 – Rich component rendering dynamically" src="image/B18645_06_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1013.1">Figure 6.14 – Rich component rendering dynamically</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.1014.1">Now, implement the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1015.1">Compressed</span></strong><span class="koboSpan" id="kobo.1016.1"> view, which</span><a id="_idIndexMarker744"/><span class="koboSpan" id="kobo.1017.1"> is just the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1018.1">Rich</span></strong><span class="koboSpan" id="kobo.1019.1"> view without the image</span><a id="_idIndexMarker745"/><span class="koboSpan" id="kobo.1020.1"> in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1021.1">Compressed.vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1"> file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1023.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1024.1">
  &lt;div class="card"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1025.1">
    &lt;h3&gt;{{ title }}&lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1026.1">
    &lt;p&gt;{{ description }}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1027.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1028.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1029.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1030.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1031.1">
const { title, description } = defineProps(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1032.1">
    ['title', 'description']</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1033.1">
)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1034.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1035.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1036.1">
.card {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1037.1">
  display: flex;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1038.1">
  flex-direction: column;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1039.1">
  min-width: 200px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1040.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1041.1">
h3 {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1042.1">
  font-weight: normal;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1043.1">
  padding-bottom: 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1044.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1045.1">
p {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1046.1">
 margin: 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1047.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1048.1">
&lt;/style&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1049.1">Import and register the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1050.1">Compressed</span></strong><span class="koboSpan" id="kobo.1051.1"> component in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1052.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.1053.1">. </span><span class="koboSpan" id="kobo.1053.2">Then create our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1054.1">layoutOptions</span></strong><span class="koboSpan" id="kobo.1055.1"> array with</span><a id="_idIndexMarker746"/><span class="koboSpan" id="kobo.1056.1"> two elements. </span><span class="koboSpan" id="kobo.1056.2">Each has two fields: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1057.1">name</span></strong><span class="koboSpan" id="kobo.1058.1"> of the layout and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1059.1">component</span></strong><span class="koboSpan" id="kobo.1060.1"> instance for the</span><a id="_idIndexMarker747"/><span class="koboSpan" id="kobo.1061.1"> two components – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1062.1">Rich</span></strong><span class="koboSpan" id="kobo.1063.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1064.1">Compressed</span></strong><span class="koboSpan" id="kobo.1065.1"> respectively, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1066.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1067.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1068.1">
// other imports</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1069.1">
import Compressed from './components/Compressed.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1070.1">
const layoutOptions = [ {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1071.1">
  name: 'Rich',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1072.1">
  component: Rich</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1073.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1074.1">
  name: 'Compressed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1075.1">
  component: Compressed</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1076.1">
}]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1077.1">
  // other component properties</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1078.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1079.1">Add </span><strong class="source-inline"><span class="koboSpan" id="kobo.1080.1">select</span></strong><span class="koboSpan" id="kobo.1081.1"> to switch between</span><a id="_idIndexMarker748"/><span class="koboSpan" id="kobo.1082.1"> views. </span><span class="koboSpan" id="kobo.1082.2">It will take</span><a id="_idIndexMarker749"/><span class="koboSpan" id="kobo.1083.1"> options from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1084.1">layoutOptions</span></strong><span class="koboSpan" id="kobo.1085.1"> array using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1086.1">v-for</span></strong><span class="koboSpan" id="kobo.1087.1">, and bind its selected value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1088.1">layout</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1089.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1090.1">v-model</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1091.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1092.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1093.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1094.1">
  Layout: &lt;select v-model="layout"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1095.1">
    &lt;option</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1096.1">
      v-for="(option, index) in layoutOptions"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1097.1">
      :key="index"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1098.1">
      :value="option.component"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1099.1">
      &gt;{{option.name}}&lt;/option&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1100.1">
    &lt;/select&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1101.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1102.1">
&lt;/template&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1103.1">Using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1104.1">select</span></strong><span class="koboSpan" id="kobo.1105.1">, we can</span><a id="_idIndexMarker750"/><span class="koboSpan" id="kobo.1106.1"> switch to the </span><strong class="bold"><span class="koboSpan" id="kobo.1107.1">Compressed</span></strong><span class="koboSpan" id="kobo.1108.1"> layout, which looks </span><span class="No-Break"><span class="koboSpan" id="kobo.1109.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer185">
<span class="koboSpan" id="kobo.1110.1"><img alt="Figure 6.15 – Compressed layout with options dropdown for selection" src="image/B18645_06_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1111.1">Figure 6.15 – Compressed layout with options dropdown for selection</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.1112.1">Add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1113.1">List</span></strong><span class="koboSpan" id="kobo.1114.1"> layout to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1115.1">src/components/List.vue</span></strong><span class="koboSpan" id="kobo.1116.1">. </span><span class="koboSpan" id="kobo.1116.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1117.1">List</span></strong><span class="koboSpan" id="kobo.1118.1"> view is the compressed view </span><a id="_idIndexMarker751"/><span class="koboSpan" id="kobo.1119.1">but without </span><span class="No-Break"><span class="koboSpan" id="kobo.1120.1">the </span></span><span class="No-Break"><a id="_idIndexMarker752"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1121.1">description:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1122.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1123.1">
  &lt;h3&gt;{{ title }}&lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1124.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1125.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1126.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1127.1">
const { title } = defineProps(['title'])</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1128.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1129.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1130.1">
h3 {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1131.1">
  width: 100%;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1132.1">
  font-weight: normal;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1133.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1134.1">
&lt;/style&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1135.1">Import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1136.1">List</span></strong><span class="koboSpan" id="kobo.1137.1"> component</span><a id="_idIndexMarker753"/><span class="koboSpan" id="kobo.1138.1"> into </span><strong class="source-inline"><span class="koboSpan" id="kobo.1139.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.1140.1"> and register</span><a id="_idIndexMarker754"/> <span class="No-Break"><span class="koboSpan" id="kobo.1141.1">it locally:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1142.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1143.1">
// other imports</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1144.1">
import List from './components/List.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1145.1">
const layoutOptions = [ {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1146.1">
  name: 'Rich',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1147.1">
  component: Rich</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1148.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1149.1">
  name: 'Compressed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1150.1">
  component: Compressed</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1151.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1152.1">
  name: 'List',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1153.1">
  component: List</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1154.1">
}]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1155.1">
  // other component properties</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1156.1">
&lt;/script&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1157.1">When switching to the </span><strong class="bold"><span class="koboSpan" id="kobo.1158.1">List</span></strong><span class="koboSpan" id="kobo.1159.1"> layout, the items are displayed in a horizontal row, </span><span class="No-Break"><span class="koboSpan" id="kobo.1160.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer186">
<span class="koboSpan" id="kobo.1161.1"><img alt="Figure 6.16 – List view with incorrect horizontal stacking" src="image/B18645_06_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1162.1">Figure 6.16 – List view with incorrect horizontal stacking</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.1163.1">To fix this horizontal </span><a id="_idIndexMarker755"/><span class="koboSpan" id="kobo.1164.1">stacking, create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1165.1">grid-column</span></strong><span class="koboSpan" id="kobo.1166.1"> class that sets </span><strong class="source-inline"><span class="koboSpan" id="kobo.1167.1">flex-direction: column</span></strong><span class="koboSpan" id="kobo.1168.1"> (as opposed</span><a id="_idIndexMarker756"/><span class="koboSpan" id="kobo.1169.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1170.1">row</span></strong><span class="koboSpan" id="kobo.1171.1">, which is the default) and conditionally applies it when the layout </span><span class="No-Break"><span class="koboSpan" id="kobo.1172.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1173.1">List</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1174.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1175.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1176.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1177.1">
    &lt;div class="grid" :class="{ 'grid-column': layout</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1178.1">
      === List }"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1179.1">
      &lt;!-- grid using component tag --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1180.1">
    &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1181.1">
  &lt;!-- rest of template --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1182.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1183.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1184.1">
/* existing rules */</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1185.1">
.grid-column {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1186.1">
  flex-direction: column;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1187.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1188.1">
&lt;/style&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1189.1">Our </span><strong class="bold"><span class="koboSpan" id="kobo.1190.1">List</span></strong><span class="koboSpan" id="kobo.1191.1"> layout now looks </span><a id="_idIndexMarker757"/><span class="No-Break"><span class="koboSpan" id="kobo.1192.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer187">
<span class="koboSpan" id="kobo.1193.1"><img alt="Figure 6.17 – List view with vertical stacking" src="image/B18645_06_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1194.1">Figure 6.17 – List view with vertical stacking</span></p>
<p><span class="koboSpan" id="kobo.1195.1">With that, we have learned how to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1196.1">component</span></strong><span class="koboSpan" id="kobo.1197.1"> tag to dynamically render different components both by name and by using the component object itself. </span><span class="koboSpan" id="kobo.1197.2">We have also explored the pitfalls of stateful dynamic components, namely the teardown of components when they are not displayed anymore and how to circumvent them using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1198.1">keep-alive</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1199.1"> element.</span></span></p>
<p><span class="koboSpan" id="kobo.1200.1">We will now look at how simple </span><a id="_idIndexMarker758"/><span class="koboSpan" id="kobo.1201.1">components can be</span><a id="_idIndexMarker759"/><span class="koboSpan" id="kobo.1202.1"> implemented using only a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">r</span><a id="_idTextAnchor243"/><span class="koboSpan" id="kobo.1204.1">ender</span></strong><span class="koboSpan" id="kobo.1205.1"> function or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1206.1">template</span></strong><span class="koboSpan" id="kobo.1207.1"> tag using </span><span class="No-Break"><span class="koboSpan" id="kobo.1208.1">functional components.</span></span></p>
<h1 id="_idParaDest-145"><a id="_idTextAnchor244"/><span class="koboSpan" id="kobo.1209.1">Writing functional components</span></h1>
<p><span class="koboSpan" id="kobo.1210.1">In Vue 2.0, you can declare a</span><a id="_idIndexMarker760"/><span class="koboSpan" id="kobo.1211.1"> component as a functional one by setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1212.1">functional</span></strong><span class="koboSpan" id="kobo.1213.1"> field to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1214.1">true</span></strong><span class="koboSpan" id="kobo.1215.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1216.1">component’s options:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1217.1">
export default {
  functional: true,
}</span></pre>
<p><span class="koboSpan" id="kobo.1218.1">This can also be done by setting </span><strong class="source-inline"><span class="koboSpan" id="kobo.1219.1">functional</span></strong><span class="koboSpan" id="kobo.1220.1"> directly on the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1221.1">template</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1222.1"> tag:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1223.1">
&lt;template functional&gt;
  &lt;!— template code --&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1224.1">And you can set how to render the component using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1225.1">render()</span></strong><span class="koboSpan" id="kobo.1226.1"> method of the component or the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1227.1">template</span></strong><span class="koboSpan" id="kobo.1228.1"> section. </span><span class="koboSpan" id="kobo.1228.2">However, if both fields exist, Vue takes the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1229.1">render()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1230.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.1231.1">In Vue 3.0 onward, however, Vue removed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1232.1">functional</span></strong><span class="koboSpan" id="kobo.1233.1"> attribute and you can only declare a </span><a id="_idIndexMarker761"/><span class="koboSpan" id="kobo.1234.1">functional component using a JavaScript function, which is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1235.1">render</span></strong><span class="koboSpan" id="kobo.1236.1"> function Vue will trigger to create </span><span class="No-Break"><span class="koboSpan" id="kobo.1237.1">the component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1238.1">
const functionComp = (props, context) =&gt; {
 return h(/*…*/)
}</span></pre>
<p><span class="koboSpan" id="kobo.1239.1">Once declared as functional, the component does not have any reactive state, and you can’t access </span><strong class="source-inline"><span class="koboSpan" id="kobo.1240.1">this</span></strong><span class="koboSpan" id="kobo.1241.1"> instance since it is not available. </span><span class="koboSpan" id="kobo.1241.2">Instead, Vue triggers the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1242.1">render</span></strong><span class="koboSpan" id="kobo.1243.1"> function and passes to it the component’s props and necessary context including </span><strong class="source-inline"><span class="koboSpan" id="kobo.1244.1">attrs</span></strong><span class="koboSpan" id="kobo.1245.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1246.1">slots</span></strong><span class="koboSpan" id="kobo.1247.1">, and the passed event </span><span class="No-Break"><span class="koboSpan" id="kobo.1248.1">handler’s </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1249.1">emit</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1250.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1251.1">
const functionComp = (props, { attrs, slots, emit }) =&gt; {
 return h(/*…*/)
}</span></pre>
<p><span class="koboSpan" id="kobo.1252.1">You can also define the accepted props and events by directly setting its field </span><strong class="source-inline"><span class="koboSpan" id="kobo.1253.1">props</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1254.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1255.1">emits</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1256.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1257.1">
functionComp.props = [/* props */]
functionComp.emits = [/* emits */]</span></pre>
<p><span class="koboSpan" id="kobo.1258.1">To start using JSX code, you will need to create the Vue project with JSX support enabled using Vite. </span><span class="koboSpan" id="kobo.1258.2">Otherwise, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1259.1">vite.config.js</span></strong><span class="koboSpan" id="kobo.1260.1">, you will need to manually import </span><strong class="source-inline"><span class="koboSpan" id="kobo.1261.1">vueJsx</span></strong><span class="koboSpan" id="kobo.1262.1"> from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1263.1">'@vitejs/plugin-vue-jsx'</span></strong><span class="koboSpan" id="kobo.1264.1"> package, </span><span class="No-Break"><span class="koboSpan" id="kobo.1265.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1266.1">
import vueJsx from '@vitejs/plugin-vue-jsx'</span></pre>
<p><span class="koboSpan" id="kobo.1267.1">And then add the imported </span><strong class="source-inline"><span class="koboSpan" id="kobo.1268.1">vueJsx</span></strong><span class="koboSpan" id="kobo.1269.1"> plugin to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1270.1">plugins</span></strong><span class="koboSpan" id="kobo.1271.1"> array, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1272.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1273.1">
plugins: [vue(), vueJsx()],</span></pre>
<p><span class="koboSpan" id="kobo.1274.1">With the preceding </span><a id="_idIndexMarker762"/><span class="koboSpan" id="kobo.1275.1">configuration, your Vue project created by Vite now supports functional components with JSX, which we will demonstrate in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1276.1">following example.</span></span></p>
<p><span class="koboSpan" id="kobo.1277.1">The following code block is an example of how we define a functional component, </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1278.1">GreetComponent.jsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1279.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1280.1">
import { h } from 'vue';
export function GreetComponent(props, context) {
  return h(
    &lt;div&gt;
      &lt;h2&gt;{ props.greeting} {props.audience} &lt;/h2&gt;
      &lt;button
        onClick={() =&gt; context.emit('acknowledge', true) }
      &gt;
        Acknowledge
      &lt;/button&gt;
    &lt;/div&gt;
  )
}</span></pre>
<p><span class="koboSpan" id="kobo.1281.1">We also declare </span><strong class="source-inline"><span class="koboSpan" id="kobo.1282.1">props</span></strong><span class="koboSpan" id="kobo.1283.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1284.1">emits</span></strong><span class="koboSpan" id="kobo.1285.1"> explicitly </span><span class="No-Break"><span class="koboSpan" id="kobo.1286.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1287.1">GreetComponent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1288.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1289.1">
GreetComponent.props = {
    greeting: String,
    audience: String,
}
GreetComponent.emits = ['acknowledge']</span></pre>
<p><span class="koboSpan" id="kobo.1290.1">Note that here, since we use JSX syntax to define the component, we need to make sure the file extension of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1291.1">GreetComponent</span></strong><span class="koboSpan" id="kobo.1292.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1293.1">.jsx</span></strong><span class="koboSpan" id="kobo.1294.1"> and not </span><strong class="source-inline"><span class="koboSpan" id="kobo.1295.1">.js</span></strong><span class="koboSpan" id="kobo.1296.1"> (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1297.1">GreetComponent.jsx</span></strong><span class="koboSpan" id="kobo.1298.1">). </span><span class="koboSpan" id="kobo.1298.2">Also, we need to make sure we turn on JSX support when creating the project with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1299.1">create-vue</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1300.1">command (Vite).</span></span></p>
<p><span class="koboSpan" id="kobo.1301.1">Now we can import </span><a id="_idIndexMarker763"/><span class="koboSpan" id="kobo.1302.1">and use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1303.1">GreetComponent</span></strong><span class="koboSpan" id="kobo.1304.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1305.1">App.vue</span></strong><span class="koboSpan" id="kobo.1306.1"> as a </span><span class="No-Break"><span class="koboSpan" id="kobo.1307.1">regular component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1308.1">
&lt;script setup&gt;
import { GreetComponent } from './components/GreetComponent.jsx'
const acknowledge = () =&gt; {
  console.log('Acknowledged')
}
&lt;/script&gt;
&lt;template&gt;
    &lt;GreetComponent
      greeting="Hi"
      audience="World"
      @acknowledge="acknowledge"
    /&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1309.1">This renders the following to </span><span class="No-Break"><span class="koboSpan" id="kobo.1310.1">the browser:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer188">
<span class="koboSpan" id="kobo.1311.1"><img alt="Figure 6.18 – Functional component rendering" src="image/B18645_06_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1312.1">Figure 6.18 – Functional component rendering</span></p>
<p><span class="koboSpan" id="kobo.1313.1">You can also combine with </span><a id="_idIndexMarker764"/><span class="koboSpan" id="kobo.1314.1">Composition API to create functional components with states. </span><span class="koboSpan" id="kobo.1314.2">In the following example, we create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1315.1">Message</span></strong><span class="koboSpan" id="kobo.1316.1"> component with a </span><span class="No-Break"><span class="koboSpan" id="kobo.1317.1">reactive message:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1318.1">
import { ref } from 'vue'
export function Message(props, context) {
  const message = ref('Hello World')
  return (
    &lt;div&gt;
      &lt;span&gt;{ message.value }&lt;/span&gt;
    &lt;/div&gt;
  )
}</span></pre>
<p><span class="koboSpan" id="kobo.1319.1">Note that here, we display the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1320.1">message</span></strong><span class="koboSpan" id="kobo.1321.1"> value by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1322.1">message.value</span></strong><span class="koboSpan" id="kobo.1323.1">, not </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1324.1">message</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1325.1"> directly.</span></span></p>
<p><span class="koboSpan" id="kobo.1326.1">At this point, we have learned how to write functional components – stateless or stateful – using Composition API. </span><span class="koboSpan" id="kobo.1326.2">We will now build a to-do application that u</span><a id="_idTextAnchor245"/><span class="koboSpan" id="kobo.1327.1">ses all the patterns we have looked at throughout </span><span class="No-Break"><span class="koboSpan" id="kobo.1328.1">this chapter.</span></span></p>
<h2 id="_idParaDest-146"><a id="_idTextAnchor246"/><span class="koboSpan" id="kobo.1329.1">Activity 6.01 – building a Vue.js application with plugins and reusable components</span></h2>
<p><span class="koboSpan" id="kobo.1330.1">To access the code file for this activity, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.1331.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Activity6.01"><span class="No-Break"><span class="koboSpan" id="kobo.1332.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter06/Activity6.01</span></span></a></p>
<p><span class="koboSpan" id="kobo.1333.1">In this activity, we will</span><a id="_idIndexMarker765"/><span class="koboSpan" id="kobo.1334.1"> build a to-do app that integrates </span><strong class="source-inline"><span class="koboSpan" id="kobo.1335.1">jsonplaceholder</span></strong><span class="koboSpan" id="kobo.1336.1"> as a </span><span class="No-Break"><span class="koboSpan" id="kobo.1337.1">data source.</span></span></p>
<p><span class="koboSpan" id="kobo.1338.1">Our to-do app will load todos and display them as a list. </span><span class="koboSpan" id="kobo.1338.2">It will display a checkbox based on whether the to-do has been completed, as well as the name of </span><span class="No-Break"><span class="koboSpan" id="kobo.1339.1">the to-do.</span></span></p>
<p><span class="koboSpan" id="kobo.1340.1">When checking off a to-do, the application will sync it to </span><span class="No-Break"><span class="koboSpan" id="kobo.1341.1">the API.</span></span></p>
<p><span class="koboSpan" id="kobo.1342.1">We will inject Axios as a plugin to query </span><span class="No-Break"><span class="koboSpan" id="kobo.1343.1">against </span></span><a href="https://jsonplaceholder.typicode.com"><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">https://jsonplaceholder.typicode.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1345.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1346.1">Follow these steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.1347.1">this activity:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1348.1">Install </span><strong class="source-inline"><span class="koboSpan" id="kobo.1349.1">axios</span></strong><span class="koboSpan" id="kobo.1350.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.1351.1">the project.</span></span></li>
<li><span class="koboSpan" id="kobo.1352.1">To inject </span><strong class="source-inline"><span class="koboSpan" id="kobo.1353.1">axios</span></strong><span class="koboSpan" id="kobo.1354.1"> as a property into </span><strong class="source-inline"><span class="koboSpan" id="kobo.1355.1">this</span></strong><span class="koboSpan" id="kobo.1356.1"> component instances, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1357.1">src/plugins/axios.js</span></strong><span class="koboSpan" id="kobo.1358.1"> plugin file that, on install, will mean component instances have an injectable </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1359.1">axios</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1360.1"> property.</span></span></li>
<li><span class="koboSpan" id="kobo.1361.1">For the plugin to work, import and register it </span><span class="No-Break"><span class="koboSpan" id="kobo.1362.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1363.1">src/main.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1364.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1365.1">We also want to inject our API’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1366.1">$baseUrl</span></strong><span class="koboSpan" id="kobo.1367.1"> into all our components as a global scope. </span><span class="koboSpan" id="kobo.1367.2">We will create a plugin inline with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1368.1">src/main.js</span></strong><span class="koboSpan" id="kobo.1369.1"> file to </span><span class="No-Break"><span class="koboSpan" id="kobo.1370.1">do this.</span></span></li>
<li><span class="koboSpan" id="kobo.1371.1">We now want to fetch all the to-dos from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1372.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.1373.1">. </span><span class="koboSpan" id="kobo.1373.2">A good place to do this is in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1374.1">mounted</span></strong><span class="koboSpan" id="kobo.1375.1"> life </span><span class="No-Break"><span class="koboSpan" id="kobo.1376.1">cycle method.</span></span></li>
<li><span class="koboSpan" id="kobo.1377.1">To display the to-do list, we will create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1378.1">TodoList</span></strong><span class="koboSpan" id="kobo.1379.1"> component in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1380.1">src/components/TodoList.vue</span></strong><span class="koboSpan" id="kobo.1381.1"> that takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1382.1">todos</span></strong><span class="koboSpan" id="kobo.1383.1"> prop, loops through the items, and defers rendering of the to-do under a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1384.1">todo</span></strong><span class="koboSpan" id="kobo.1385.1"> scoped slot that binds </span><span class="No-Break"><span class="koboSpan" id="kobo.1386.1">the to-do.</span></span></li>
<li><span class="koboSpan" id="kobo.1387.1">We can now use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1388.1">TodoList</span></strong><span class="koboSpan" id="kobo.1389.1"> component to render out the </span><em class="italic"><span class="koboSpan" id="kobo.1390.1">todos</span></em><span class="koboSpan" id="kobo.1391.1"> we have already fetched </span><span class="No-Break"><span class="koboSpan" id="kobo.1392.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1393.1">src/App.vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1394.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1395.1">We now need to create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1396.1">TodoEntry</span></strong><span class="koboSpan" id="kobo.1397.1"> component where we will implement most of the to-do-specific logic. </span><span class="koboSpan" id="kobo.1397.2">A good practice for components is to have the props be very specific to the component’s role. </span><span class="koboSpan" id="kobo.1397.3">In this case, the properties of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1398.1">todo</span></strong><span class="koboSpan" id="kobo.1399.1"> object we will tackle are </span><strong class="source-inline"><span class="koboSpan" id="kobo.1400.1">id</span></strong><span class="koboSpan" id="kobo.1401.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1402.1">title</span></strong><span class="koboSpan" id="kobo.1403.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1404.1">completed</span></strong><span class="koboSpan" id="kobo.1405.1">, so those should be the props that our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1406.1">TodoEntry</span></strong><span class="koboSpan" id="kobo.1407.1"> component receives. </span><span class="koboSpan" id="kobo.1407.2">We will not make </span><strong class="source-inline"><span class="koboSpan" id="kobo.1408.1">TodoEntry</span></strong><span class="koboSpan" id="kobo.1409.1"> a functional component since we will need a component instance to create </span><span class="No-Break"><span class="koboSpan" id="kobo.1410.1">HTTP requests.</span></span></li>
<li><span class="koboSpan" id="kobo.1411.1">We will then update </span><strong class="source-inline"><span class="koboSpan" id="kobo.1412.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.1413.1"> so that it consumes </span><strong class="source-inline"><span class="koboSpan" id="kobo.1414.1">TodoEntry</span></strong><span class="koboSpan" id="kobo.1415.1"> (making sure to bind </span><strong class="source-inline"><span class="koboSpan" id="kobo.1416.1">id</span></strong><span class="koboSpan" id="kobo.1417.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1418.1">title</span></strong><span class="koboSpan" id="kobo.1419.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1420.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1421.1">completed</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1422.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.1423.1">Add the ability to toggle the </span><strong class="bold"><span class="koboSpan" id="kobo.1424.1">Complete</span></strong><span class="koboSpan" id="kobo.1425.1"> status of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1426.1">todo</span></strong><span class="koboSpan" id="kobo.1427.1">. </span><span class="koboSpan" id="kobo.1427.2">We will implement the majority of this in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1428.1">src/components/TodoEntry.vue</span></strong><span class="koboSpan" id="kobo.1429.1">. </span><span class="koboSpan" id="kobo.1429.2">We will listen to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1430.1">input</span></strong><span class="koboSpan" id="kobo.1431.1"> change</span><a id="_idIndexMarker766"/><span class="koboSpan" id="kobo.1432.1"> event. </span><span class="koboSpan" id="kobo.1432.2">On changing, we will want to read the new value and send a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1433.1">PATCH</span></strong><span class="koboSpan" id="kobo.1434.1"> request to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1435.1">/todos/{todoId}</span></strong><span class="koboSpan" id="kobo.1436.1"> with an object containing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1437.1">completed</span></strong><span class="koboSpan" id="kobo.1438.1"> set to the new value. </span><span class="koboSpan" id="kobo.1438.2">We will also want to emit a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1439.1">completedChange</span></strong><span class="koboSpan" id="kobo.1440.1"> event in Vue.js so that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1441.1">App</span></strong><span class="koboSpan" id="kobo.1442.1"> component can update the data that’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1443.1">in memory.</span></span></li>
<li><span class="koboSpan" id="kobo.1444.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.1445.1">App.vue</span></strong><span class="koboSpan" id="kobo.1446.1">, we will want to update the relevant </span><strong class="source-inline"><span class="koboSpan" id="kobo.1447.1">todo</span></strong><span class="koboSpan" id="kobo.1448.1"> when </span><strong class="source-inline"><span class="koboSpan" id="kobo.1449.1">completeChange</span></strong><span class="koboSpan" id="kobo.1450.1"> is triggered. </span><span class="koboSpan" id="kobo.1450.2">Since </span><strong class="source-inline"><span class="koboSpan" id="kobo.1451.1">completeChange</span></strong><span class="koboSpan" id="kobo.1452.1"> does not include the ID of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1453.1">todo</span></strong><span class="koboSpan" id="kobo.1454.1">, we will need to read that from the context when setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1455.1">handleCompleteChange</span></strong><span class="koboSpan" id="kobo.1456.1"> function to listen </span><span class="No-Break"><span class="koboSpan" id="kobo.1457.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1458.1">completeChange</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1459.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1460.1">The expected output is </span><span class="No-Break"><span class="koboSpan" id="kobo.1461.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer189">
<span class="koboSpan" id="kobo.1462.1"><img alt="Figure 6.19 – Our to-do app using jsonplaceholder data" src="image/B18645_06_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1463.1">Figure 6.19 – Our to-do app using jsonplaceholder data</span></p>
<h1 id="_idParaDest-147"><a id="_idTextAnchor247"/><span class="koboSpan" id="kobo.1464.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1465.1">Throughout this chapter, we have looked at global composition patterns and advanced component setups that we can take advantage of to create a reusable code base for a Vue.js application. </span><span class="koboSpan" id="kobo.1465.2">We learned about mixins, plugins, how to use component tags for dynamic component rendering, and functional components, both stateful </span><span class="No-Break"><span class="koboSpan" id="kobo.1466.1">and stateless.</span></span></p>
<p><span class="koboSpan" id="kobo.1467.1">So far, we have learned how to build applications in terms of components, mixins, and plugins. </span><span class="koboSpan" id="kobo.1467.2">To build applications that span multiple pages, we need to implement routing. </span><span class="koboSpan" id="kobo.1467.3">This is what we will tackle in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1468.1">next chapter.</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer191">
</div>
</div>
</body></html>