<html><head></head><body>
<div id="_idContainer061">
<h1 class="chapter-number" id="_idParaDest-222"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.1.1">16</span></h1>
<h1 id="_idParaDest-223"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.2.1">Developing for the Edge</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.3.1">Edge</span></strong><span class="koboSpan" id="kobo.4.1"> is a</span><a id="_idIndexMarker584"/><span class="koboSpan" id="kobo.5.1"> multifaceted term that can mean different things in different contexts. </span><span class="koboSpan" id="kobo.5.2">It might denote a location, a runtime, or a computing paradigm. </span><span class="koboSpan" id="kobo.5.3">You may recall from </span><a href="B17399_03.xhtml#_idTextAnchor043"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Deployment Targets, Adapters, and Stacks</span></em><span class="koboSpan" id="kobo.9.1">, that Remix can be deployed to various server environments, including edge environments. </span><span class="koboSpan" id="kobo.9.2">In this chapter, we will dive deeper into developing for the edge and explore what it means to develop Remix applications that run on </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">edge environments.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">The chapter is split into </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">two sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.13.1">Living on </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">the edge</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Understanding the edge’s benefits </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">and limitations</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.17.1">First, we will discuss edge computing and define related concepts. </span><span class="koboSpan" id="kobo.17.2">Next, we will consider the benefits and limitations of hosting Remix at </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">the edge.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">After reading this chapter, you will understand what it means to deploy to the edge and know what to consider when working with Remix in edge environments. </span><span class="koboSpan" id="kobo.19.2">Further, you will know about popular edge providers and be able to discuss the pros, cons, and limitations of the edge as a location </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">and runtime.</span></span></p>
<h1 id="_idParaDest-224"><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.21.1">Living on the edge</span></h1>
<p><span class="koboSpan" id="kobo.22.1">Edge computing </span><a id="_idIndexMarker585"/><span class="koboSpan" id="kobo.23.1">is a paradigm that has been around for many years but has picked up steam in association with</span><a id="_idIndexMarker586"/><span class="koboSpan" id="kobo.24.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.25.1">Internet of Things</span></strong><span class="koboSpan" id="kobo.26.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.27.1">IoT</span></strong><span class="koboSpan" id="kobo.28.1">). </span><span class="koboSpan" id="kobo.28.2">The term also found a new meaning in web development when CDNs started offering new JavaScript runtimes to host web applications on the edge. </span><span class="koboSpan" id="kobo.28.3">In this section, we will define what it means to run websites on the edge and see what edge development with Remix looks like. </span><span class="koboSpan" id="kobo.28.4">First, let’s take a step back and understand the different meanings of the </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">term “edge.”</span></span></p>
<h2 id="_idParaDest-225"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.30.1">Computing at the edge</span></h2>
<p><span class="koboSpan" id="kobo.31.1">Edge computing</span><a id="_idIndexMarker587"/><span class="koboSpan" id="kobo.32.1"> is a paradigm of computer science that contrasts cloud computing. </span><span class="koboSpan" id="kobo.32.2">It describes a system architecture where the compute is located as close as possible to its utilization. </span><span class="koboSpan" id="kobo.32.3">While cloud computing happens in offsite data centers, edge computing aims to locate computing at the edge of a given network. </span><span class="koboSpan" id="kobo.32.4">This is why we often use the term edge to describe a location that contrasts the massive data centers of </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">the cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.34.1">The goal of edge computing is to reduce round-trip times from the client to the server by moving the server closer to the user. </span><span class="koboSpan" id="kobo.34.2">Among other things, edge computing is enabled by the increased availability and reduced cost of computing. </span><span class="koboSpan" id="kobo.34.3">Why not compute closer to the user if the computing power </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">is available?</span></span></p>
<p><span class="koboSpan" id="kobo.36.1">Think about a security camera designed to automatically detect movement and set off an alarm in case of suspicious activity. </span><span class="koboSpan" id="kobo.36.2">In a cloud-based setup, the camera sends its video feed to a central data center for analysis. </span><span class="koboSpan" id="kobo.36.3">If it detects movement, the central system triggers the building's alarm. </span><span class="koboSpan" id="kobo.36.4">On the other hand, with an edge-based architecture, the camera may process the feed right on the device. </span><span class="koboSpan" id="kobo.36.5">If it spots movement, the camera itself sends an alert to the building's central server, which then activates the </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">alarm system.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">Edge computing requires available computation capabilities on the network’s edge, while cloud computing takes advantage of the computation capabilities of centralized data centers. </span><span class="koboSpan" id="kobo.38.2">With edge computing, we can decrease response times and network bandwidth by avoiding round trips to the cloud. </span><span class="koboSpan" id="kobo.38.3">However, the required computation capabilities must be available. </span><span class="koboSpan" id="kobo.38.4">Sometimes, we may need to rethink our application and its runtime to make it lighter and suitable for the edge. </span><span class="koboSpan" id="kobo.38.5">This is why we may use the term edge to describe optimized runtime environments for </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">the edge.</span></span></p>
<p><span class="koboSpan" id="kobo.40.1">To clarify, we won’t try to deploy and run Remix on security cameras. </span><span class="koboSpan" id="kobo.40.2">Edge computing is a distributed computing paradigm that can be applied to many use cases, such as the Internet of Things. </span><span class="koboSpan" id="kobo.40.3">The Internet of Things is one example of edge computing, where smart devices communicate in an edge network without the need to stream the collected data directly to the cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">for processing.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">In web development, edge computing takes place in highly geographically distributed data centers that heavily increase proximity to users compared to the centralized data centers of traditional cloud computing offerings. </span><span class="koboSpan" id="kobo.42.2">Next, let’s review today’s edge offerings for </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">web apps.</span></span></p>
<h2 id="_idParaDest-226"><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.44.1">Running web apps on the edge</span></h2>
<p><span class="koboSpan" id="kobo.45.1">CDNs have </span><a id="_idIndexMarker588"/><span class="koboSpan" id="kobo.46.1">served content on the edge of the internet for decades. </span><span class="koboSpan" id="kobo.46.2">Conclusively, edge computing is not a new concept within web development. </span><span class="koboSpan" id="kobo.46.3">What’s cutting-edge (pun intended) is the ability to host dynamic web applications on </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">the edge.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">Traditionally, CDNs are used to deliver static content, including web page assets (HTML, CSS, and JavaScript files) and media files (images and videos). </span><span class="koboSpan" id="kobo.48.2">CDNs maintain geographically distributed data centers in as many locations as possible and are optimized for reliability, scale, and performance. </span><span class="koboSpan" id="kobo.48.3">This makes CDNs perfect not just for caching and serving static content but also for acting as edge </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">computing providers.</span></span></p>
<p><span class="koboSpan" id="kobo.50.1">In recent years, CDNs have expanded their scope to handle dynamic content and offer web application hosting services. </span><span class="koboSpan" id="kobo.50.2">Popular CDNs that offer edge runtimes are Cloudflare and Fastly. </span><span class="koboSpan" id="kobo.50.3">Additionally, a growing list of hosting providers, such as Netlify and Vercel, partner with CDNs to offer edge environments through their </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">hosting platforms.</span></span></p>
<p><span class="koboSpan" id="kobo.52.1">Remix is one of the first web frameworks to support deploying and running on the edge. </span><span class="koboSpan" id="kobo.52.2">As you know from the previous chapters of this book, Remix was developed with various runtime environment requirements in mind. </span><span class="koboSpan" id="kobo.52.3">In the next section, we will learn more about today’s edge </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">hosting providers.</span></span></p>
<h2 id="_idParaDest-227"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.54.1">Remixing the edge</span></h2>
<p><span class="koboSpan" id="kobo.55.1">In theory, Remix can</span><a id="_idIndexMarker589"/><span class="koboSpan" id="kobo.56.1"> run on any server that can execute JavaScript. </span><span class="koboSpan" id="kobo.56.2">This is possible because Remix utilizes an adapter architecture. </span><span class="koboSpan" id="kobo.56.3">Remix uses adapters to translate requests and responses between the native server runtime and Remix. </span><span class="koboSpan" id="kobo.56.4">This allows Remix to work together with various web server libraries and runtimes. </span><span class="koboSpan" id="kobo.56.5">In this section, we will review how to deploy Remix at </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">the edge.</span></span></p>
<p><span class="koboSpan" id="kobo.58.1">Remix maintains official adapters for many popular deployment targets, but the adapter architecture also allows the community to build adapters for any environment. </span><span class="koboSpan" id="kobo.58.2">At the time of writing, there are Remix templates for the following edge and edge-like </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">deployment targets:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.60.1">Cloudflare Pages</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.61.1">Cloudflare Workers</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.62.1">Deno Deploy</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.63.1">Fastly Compute@Edge</span></span></li>
<li><span class="koboSpan" id="kobo.64.1">Netlify </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">Edge Functions</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.66.1">Fly.io</span></span></li>
<li><span class="koboSpan" id="kobo.67.1">Vercel </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">Edge Functions</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.69.1">Deploying </span><a id="_idIndexMarker590"/><span class="koboSpan" id="kobo.70.1">Remix to the edge is as easy as picking an edge template and deploying it to the associated provider service. </span><span class="koboSpan" id="kobo.70.2">Try it out by running the </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.72.1">
npx create-remix@2 --template remix-run/remix/templates/cloudflare-workers</span></pre>
<p><span class="koboSpan" id="kobo.73.1">Follow the instructions of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">create-remix</span></strong><span class="koboSpan" id="kobo.75.1"> script and then open the bootstrapped </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">README.md</span></strong><span class="koboSpan" id="kobo.77.1"> file. </span><span class="koboSpan" id="kobo.77.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">README.md</span></strong><span class="koboSpan" id="kobo.79.1"> will guide you through deploying the app to Cloudflare Workers. </span><span class="koboSpan" id="kobo.79.2">Just like that, you deployed to the edge </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">with Remix.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">Note that there are differences between the listed edge and edge-like deployment targets. </span><span class="koboSpan" id="kobo.81.2">CDNs utilize lightweight JavaScript runtimes that are not compatible with Node.js. </span><span class="koboSpan" id="kobo.81.3">Edge-like deployment targets such as Deno Deploy and Fly.io provide regional distribution but may offer less proximity than their CDN counterparts. </span><span class="koboSpan" id="kobo.81.4">You can refer to </span><a href="B17399_03.xhtml#_idTextAnchor043"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.82.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.83.1">, </span><em class="italic"><span class="koboSpan" id="kobo.84.1">Deployment Targets, Adapters, and Stacks</span></em><span class="koboSpan" id="kobo.85.1">, to learn more about Remix’s different deployment targets and their runtimes </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">and environments.</span></span></p>
<p><span class="koboSpan" id="kobo.87.1">In this section, you learned that edge computing is a distributed computing paradigm and understood how it differs from cloud computing. </span><span class="koboSpan" id="kobo.87.2">You further reviewed available edge deployment targets for Remix and deployed a Remix app to the edge. </span><span class="koboSpan" id="kobo.87.3">You also learned how serving from the edge can improve response times. </span><span class="koboSpan" id="kobo.87.4">Maybe you’re wondering why we didn’t build BeeRich to run on the edge. </span><span class="koboSpan" id="kobo.87.5">In the next section, we will consider the limitations of running at the edge and discuss further pros </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">and cons.</span></span></p>
<h1 id="_idParaDest-228"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.89.1">Understanding the edge’s benefits and limitations</span></h1>
<p><span class="koboSpan" id="kobo.90.1">In the </span><a id="_idIndexMarker591"/><span class="koboSpan" id="kobo.91.1">previous section, you learned that edge computing is about performance. </span><span class="koboSpan" id="kobo.91.2">By moving the </span><a id="_idIndexMarker592"/><span class="koboSpan" id="kobo.92.1">compute closer to the user, we can reduce response times and, consequently, improve the user experience. </span><span class="koboSpan" id="kobo.92.2">Let’s dive deeper and learn more about the edge’s pros </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">and cons.</span></span></p>
<p><span class="koboSpan" id="kobo.94.1">Edge environments follow a serverless programming model. </span><span class="koboSpan" id="kobo.94.2">Each incoming request starts up a new edge function. </span><span class="koboSpan" id="kobo.94.3">The function runs the web application (our Remix app) to fulfill the request and shuts down afterward. </span><span class="koboSpan" id="kobo.94.4">The serverless programming model makes edge environments highly scalable but also increases the complexity of the associated system architecture as it limits what can be done within the </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.96.1">Serverless </span><a id="_idIndexMarker593"/><span class="koboSpan" id="kobo.97.1">execution avoids wasting computing power on idle applications. </span><span class="koboSpan" id="kobo.97.2">However, serverless also reduces the capabilities of web applications to short-lived functions that shut down after handling an incoming request. </span><span class="koboSpan" id="kobo.97.3">For example, serverless functions cannot be used for long-running tasks, such as maintaining server-sent event endpoints or </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">WebSocket servers.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">Like most </span><a id="_idIndexMarker594"/><span class="koboSpan" id="kobo.100.1">serverless environments, edge functions also do not have access to a filesystem and cannot write and read files. </span><span class="koboSpan" id="kobo.100.2">This requires us to utilize a remote service to store files. </span><span class="koboSpan" id="kobo.100.3">Additionally, edge functions do not offer long-living application states that can be shared between different requests. </span><span class="koboSpan" id="kobo.100.4">This prevents us from caching data or managing user sessions </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">in memory.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">Edge providers utilize lightweight runtimes to make web applications less computation-intensive. </span><span class="koboSpan" id="kobo.102.2">Most of today’s CDN-based edge runtimes operate on V8 isolates, isolated contexts within the V8 engine. </span><span class="koboSpan" id="kobo.102.3">Booting up a V8 isolate is faster than booting up containers or virtual machines. </span><span class="koboSpan" id="kobo.102.4">This makes edge applications handle a request within milliseconds. </span><span class="koboSpan" id="kobo.102.5">Most traditional serverless functions suffer from cold start times of several hundred milliseconds to start after being dormant for a while. </span><span class="koboSpan" id="kobo.102.6">Edge functions do not suffer from the same cold </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">start problem.</span></span></p>
<p><span class="koboSpan" id="kobo.104.1">Most edge-native runtimes, such as workerd from Cloudflare, are designed with web standards in mind but do not support executing Node.js standard libraries. </span><span class="koboSpan" id="kobo.104.2">This makes them incompatible with Node.js. </span><span class="koboSpan" id="kobo.104.3">Conclusively, we can only use npm packages if these packages do not use Node.js standard libraries internally. </span><span class="koboSpan" id="kobo.104.4">This may or may not be an issue, depending on the use case of the application, but it certainly is a point </span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">to consider.</span></span></p>
<p><span class="koboSpan" id="kobo.106.1">The big advantage the edge has over traditional web hosting is global distribution. </span><span class="koboSpan" id="kobo.106.2">Most server and serverless environments do not automatically distribute applications across different regions, at least not without additional configuration overhead and costs. </span><span class="koboSpan" id="kobo.106.3">Edge computing allows us to distribute web applications globally with minimal configuration efforts and significantly lower price points. </span><span class="koboSpan" id="kobo.106.4">However, geographical distribution also increases the complexity of the associated </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">system architecture.</span></span></p>
<p><span class="koboSpan" id="kobo.108.1">Regional distribution only decreases response times if it decreases the total round-trip time behind a request. </span><span class="koboSpan" id="kobo.108.2">Refer to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.109.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.110.1">.2</span></em><span class="koboSpan" id="kobo.111.1"> in </span><a href="B17399_13.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.112.1">Chapter 13</span></em></span></a><span class="koboSpan" id="kobo.113.1">, </span><em class="italic"><span class="koboSpan" id="kobo.114.1">Deferring Loader Data</span></em><span class="koboSpan" id="kobo.115.1">, where we illustrated how Remix reduces response times by removing client-server round trips. </span><span class="koboSpan" id="kobo.115.2">Instead of doing fetch requests from the client to the server, we can execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">loader</span></strong><span class="koboSpan" id="kobo.117.1"> functions on the document request and query the closely located database. </span><span class="koboSpan" id="kobo.117.2">Notice that in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.118.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.119.1">.2</span></em><span class="koboSpan" id="kobo.120.1">, the round-trip time from the server to the database is </span><a id="_idIndexMarker595"/><span class="koboSpan" id="kobo.121.1">very small. </span><span class="koboSpan" id="kobo.121.2">We assume that the database is closely located to the server – for instance, in the same cloud region, data center, or even on the same. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.122.1">Figure 16</span></em></span><em class="italic"><span class="koboSpan" id="kobo.123.1">.1</span></em><span class="koboSpan" id="kobo.124.1"> illustrates how the</span><a id="_idIndexMarker596"/><span class="koboSpan" id="kobo.125.1"> response time may increase if the database is distant from </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">the server:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer060">
<span class="koboSpan" id="kobo.127.1"><img alt="Figure 16.1 – Edge response waterfall with distant database" src="image/Figure_16.01_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.128.1">Figure 16.1 – Edge response waterfall with distant database</span></p>
<p><span class="koboSpan" id="kobo.129.1">By moving the server close to the user, we may be able to reduce client-server round trips. </span><span class="koboSpan" id="kobo.129.2">However, each client-server round trip might trigger several server-database round trips. </span><span class="koboSpan" id="kobo.129.3">If these round trips increase due to the distance between the server and the database, we may decrease </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">performance overall.</span></span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.131.1">Figure 16</span></em></span><em class="italic"><span class="koboSpan" id="kobo.132.1">.1</span></em><span class="koboSpan" id="kobo.133.1"> assumes we make two separate database queries to fulfill the document request. </span><span class="koboSpan" id="kobo.133.2">As we can see, we further assume that we can make both database requests in parallel. </span><span class="koboSpan" id="kobo.133.3">However, sometimes, we may need to make subsequent requests. </span><span class="koboSpan" id="kobo.133.4">Notice how such requests would further delay the </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">response time.</span></span></p>
<p><span class="koboSpan" id="kobo.135.1">The performance of today’s web applications heavily depends on the distance between the server and the database. </span><span class="koboSpan" id="kobo.135.2">In cloud data centers and regions, databases are usually close to the web servers. </span><span class="koboSpan" id="kobo.135.3">However, to accomplish proximity between the server and the database on the edge, we must distribute </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">our database.</span></span></p>
<p><span class="koboSpan" id="kobo.137.1">Geographically</span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.138.1"> distributed database offerings exist and CDNs have also started to offer distributed key-value and SQL databases, but it is important to consider the costs and complexity of a globally distributed </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">system architecture.</span></span></p>
<p><span class="koboSpan" id="kobo.140.1">You may notice a </span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.141.1">pattern here. </span><span class="koboSpan" id="kobo.141.2">Edge functions provide computational and geographical scalability but introduce additional complexity. </span><span class="koboSpan" id="kobo.141.3">You must weigh the discussed benefits and considerations carefully when evaluating the edge for </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">a project.</span></span></p>
<p><span class="koboSpan" id="kobo.143.1">Let’s wrap up by doing a short thought experiment. </span><span class="koboSpan" id="kobo.143.2">What pieces of BeeRich would require a rework to make BeeRich run on an edge environment? </span><span class="koboSpan" id="kobo.143.3">For edge-like environments such as Fly.io or Deno Deploy, not many. </span><span class="koboSpan" id="kobo.143.4">However, for true edge environments such as Cloudflare Workers and Pages, we would need to make </span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">signification changes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.145.1">SQLite databases run on the same machine and require filesystem access. </span><span class="koboSpan" id="kobo.145.2">SQLite is not supported by edge runtimes. </span><span class="koboSpan" id="kobo.145.3">We would need to use a </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">different database.</span></span></li>
<li><span class="koboSpan" id="kobo.147.1">The expense and invoice attachment file upload feature would require a rework. </span><span class="koboSpan" id="kobo.147.2">We currently use the server’s filesystem. </span><span class="koboSpan" id="kobo.147.3">We would need to use a third-party file storage service or build a </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">custom one.</span></span></li>
<li><span class="koboSpan" id="kobo.149.1">The real-time update feature would require a rework. </span><span class="koboSpan" id="kobo.149.2">We currently use a server-sent events endpoint to update clients about data changes. </span><span class="koboSpan" id="kobo.149.3">Server-sent events require long-running connections that are not supported by edge runtimes. </span><span class="koboSpan" id="kobo.149.4">We must deploy the server-sent events endpoint to a different </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">long-running server.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.151.1">This example illustrates that long-running servers support simpler application designs, while serverless edge runtimes introduce limitations due to their scalable and </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">performance-driven nature.</span></span></p>
<p><span class="koboSpan" id="kobo.153.1">In this section, you learned about the benefits and limitations of the edge. </span><span class="koboSpan" id="kobo.153.2">We also discussed what is not possible in edge environments. </span><span class="koboSpan" id="kobo.153.3">Equipped with these considerations, you can now evaluate whether moving to the edge is worthwhile for a </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">given project.</span></span></p>
<h1 id="_idParaDest-229"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.155.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.156.1">In this chapter, you learned about the edge as a computing paradigm, a location, and a runtime. </span><span class="koboSpan" id="kobo.156.2">You now understand that edge computing contrasts cloud computing and aims to move the compute as close as possible to the users to reduce </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">response times.</span></span></p>
<p><span class="koboSpan" id="kobo.158.1">You further learned that CDNs can serve as the edge of the internet. </span><span class="koboSpan" id="kobo.158.2">Running Remix on the edge moves the web server much closer to the user compared to the regionally centralized data centers of </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">the cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.160.1">Remix offers adapters for several edge deployment targets, and you practiced deploying to the edge by using Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">create-remix</span></strong><span class="koboSpan" id="kobo.162.1"> script. </span><span class="koboSpan" id="kobo.162.2">You now understand how easy it is to set up a Remix application on </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">the edge.</span></span></p>
<p><span class="koboSpan" id="kobo.164.1">We discussed both the benefits and limitations of the edge as a deployment target. </span><span class="koboSpan" id="kobo.164.2">You now understand that the edge follows a serverless programming model, which makes it highly scalable but also introduces complexity. </span><span class="koboSpan" id="kobo.164.3">Edge runtimes use lightweight container technologies to optimize for geographical distribution and performance. </span><span class="koboSpan" id="kobo.164.4">Geographical distribution introduces additional considerations, such as the distance to </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">the databases.</span></span></p>
<p><span class="koboSpan" id="kobo.166.1">Finally, you learned what cannot be done on the edge, such as accessing the filesystem, sharing application states in memory across requests, and handling long-running tasks </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">and connections.</span></span></p>
<p><span class="koboSpan" id="kobo.168.1">In the next and last chapter, we will review what we have learned. </span><span class="koboSpan" id="kobo.168.2">We will further touch upon some final topics, such as migration strategies and </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">Remix’s versioning.</span></span></p>
<h1 id="_idParaDest-230"><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.170.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.171.1">Review the Remix documentation for a list of official and community </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">adapters: </span></span><a href="https://remix.run/docs/en/2/other-api/adapter"><span class="No-Break"><span class="koboSpan" id="kobo.173.1">https://remix.run/docs/en/2/other-api/adapter</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.174.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.175.1">You can find more information about Fastly’s Remix adapter </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">here: </span></span><a href="https://www.fastly.com/blog/host-your-remix-app-on-fastly-compute-edge"><span class="No-Break"><span class="koboSpan" id="kobo.177.1">https://www.fastly.com/blog/host-your-remix-app-on-fastly-compute-edge</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.178.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.179.1">Refer to this article to learn how to deploy your Remix application to Netlify’s edge </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">functions: </span></span><a href="https://www.netlify.com/blog/how-to-use-remix-framework-with-edge-functions/"><span class="No-Break"><span class="koboSpan" id="kobo.181.1">https://www.netlify.com/blog/how-to-use-remix-framework-with-edge-functions/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.182.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.183.1">If you want to learn more about edge environments, have a look at Cloudflare’s learning </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">resources: </span></span><a href="https://developers.cloudflare.com/workers/learning/how-workers-works/"><span class="No-Break"><span class="koboSpan" id="kobo.185.1">https://developers.cloudflare.com/workers/learning/how-workers-works/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.186.1">.</span></span></p>
</div>
</body></html>