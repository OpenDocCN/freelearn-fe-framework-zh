- en: <st c="0">5</st>
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="0">5</st>
- en: <st c="2">Testing Angular Pipes, Forms, and Reactive Programming</st>
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试Angular管道、表单和响应式编程<st c="2">。</st>
- en: <st c="56">One of the main features of the Angular framework is its ability
    to easily handle data manipulation and form entry through the use of pipes, forms,
    and</st> <st c="209">reactive programming.</st>
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Angular框架的主要特点之一是它能够通过使用管道、表单和响应式编程轻松处理数据操作和表单输入<st c="56">。</st> <st c="209">。</st>
- en: <st c="230">Pipes in Angular allow data to be transformed before displaying
    it to the user.</st> <st c="311">Pipes can be used to format dates and currency,
    or even to apply custom logic to manipulate the data in any desired way.</st>
    <st c="432">Testing these pipes ensures that they are functioning correctly and
    producing the</st> <st c="514">expected output.</st>
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Angular中的管道允许在向用户显示之前转换数据<st c="230">，</st> <st c="311">管道可用于格式化日期和货币，甚至可以应用自定义逻辑以按任何所需方式操作数据<st
    c="432">。</st> <st c="514">测试这些管道确保它们按预期工作并产生预期的输出</st>。</st>
- en: <st c="530">Forms in Angular are an essential component for collecting and validating
    user input.</st> <st c="617">Testing Angular forms involves verifying that the
    form fields are correctly bound to the model, validating the input, and handling
    form submissions.</st> <st c="766">By testing forms, developers can ensure that
    the form behaves as expected and provides a seamless</st> <st c="864">user experience.</st>
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在Angular中，表单是收集和验证用户输入的必要组件<st c="530">，测试Angular表单涉及验证表单字段是否正确绑定到模型，验证输入，并处理表单提交<st
    c="617">。</st> <st c="766">通过测试表单，开发人员可以确保表单按预期运行并提供无缝的<st c="864">用户体验</st>。</st>
- en: <st c="880">Reactive programming is a paradigm that handles asynchronous data
    streams and events.</st> <st c="967">In Angular, reactive programming is commonly
    used with the ReactiveForms module, which provides a way to manage form state
    and data flow in a</st> <st c="1109">reactive manner.</st>
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 响应式编程是一种处理异步数据流和事件的范例<st c="880">，在Angular中，响应式编程通常与ReactiveForms模块一起使用，该模块提供了一种以响应式方式管理表单状态和数据流的方法<st
    c="967">。</st> <st c="1109">。</st>
- en: <st c="1125">In this chapter, we will explore the different approaches and best
    practices for testing Angular pipes, forms, and reactive programming.</st> <st
    c="1263">We will cover the tools and techniques available for writing effective
    tests, as well as common pitfalls and tips for troubleshooting.</st> <st c="1398">By
    the end of this chapter, you will have a solid understanding of how to test these
    crucial aspects of your Angular applications and ensure their reliability</st>
    <st c="1557">and accuracy.</st>
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将探讨测试Angular管道、表单和响应式编程的不同方法和最佳实践<st c="1125">，我们将介绍编写有效测试可用的工具和技术，以及常见的故障排除技巧和提示<st
    c="1263">。</st> <st c="1398">在本章结束时，您将深入了解如何测试Angular应用程序的这些关键方面，并确保它们的可靠性和准确性<st
    c="1557">。</st>
- en: <st c="1570">In summary, here are the main topics that will be covered in</st>
    <st c="1632">this chapter:</st>
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 概括来说，以下是本章将涵盖的主要主题<st c="1570">：</st> <st c="1632">：</st>
- en: <st c="1645">Testing an Angular pipe as used in</st> <st c="1681">our project</st>
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的项目中使用的Angular管道的测试<st c="1645">，</st> <st c="1681">我们的项目</st>
- en: <st c="1692">Applying test-driven development to our</st> <st c="1733">reactive
    form</st>
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将测试驱动开发应用于我们的响应式表单<st c="1692">，</st> <st c="1733">响应式表单</st>
- en: <st c="1746">Technical requirements</st>
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求<st c="1746">
- en: <st c="1769">To follow along with the examples and exercises in this chapter,
    you will need to have a basic understanding of Angular and TypeScript, as well
    as access to</st> <st c="1927">the following:</st>
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟随本章中的示例和练习，您需要对Angular和TypeScript有一个基本的了解，以及访问以下内容<st c="1769">：</st> <st
    c="1927">以下内容：</st>
- en: <st c="1941">Node.js and npm installed on</st> <st c="1971">your computer</st>
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的计算机上安装的Node.js和npm<st c="1941">，</st> <st c="1971">您的计算机</st>
- en: <st c="1984">Angular CLI</st> <st c="1997">installed globally</st>
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装全局的Angular CLI<st c="1984">，</st> <st c="1997">全局安装</st>
- en: <st c="2015">A code editor, such as Visual Studio Code, installed on</st> <st
    c="2072">your computer</st>
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的计算机上安装的代码编辑器，例如Visual Studio Code<st c="2015">，</st> <st c="2072">您的计算机</st>
- en: <st c="2085">The code files of this chapter can be found</st> <st c="2130">at</st>
    [<st c="2133">https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205</st>](https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205)<st
    c="2231">.</st>
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的代码文件可以在以下位置找到<st c="2085">[<st c="2133">https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205</st>](https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205)<st
    c="2231">。</st>
- en: <st c="2232">Testing an Angular pipe as used in our project</st>
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="2232">测试我们在项目中使用的 Angular 管道</st>
- en: <st c="2279">Our calculator application is a</st> <st c="2312">simple tool that
    performs basic arithmetic operations, including addition, subtraction, multiplication,
    and division.</st> <st c="2430">Let’s suppose we have a feature that allows us
    to represent a number as a percentage.</st> <st c="2516">To do this, we will be
    using a pipe.</st> <st c="2553">We’ll call our</st> <st c="2568">pipe</st> `<st
    c="2573">percent</st>`<st c="2580">.</st>
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2279">我们的计算器应用程序是一个</st> <st c="2312">简单的工具，执行基本的算术运算，包括加法、减法、乘法和除法。</st>
    <st c="2430">假设我们有一个功能，允许我们以百分比的形式表示一个数字。</st> <st c="2516">为此，我们将使用一个管道。</st>
    <st c="2553">我们将称我们的</st> <st c="2568">管道</st> `<st c="2573">percent</st>`<st
    c="2580">。</st>
- en: <st c="2581">In our</st> `<st c="2589">core</st>` <st c="2593">folder, we’ll
    create a</st> `<st c="2617">pipes</st>` <st c="2622">folder.</st> <st c="2631">We’ll
    access this folder via our terminal and then run the following command to create
    our</st> `<st c="2722">percent</st>` <st c="2729">pipe:</st>
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2581">在我们的</st> `<st c="2589">core</st>` <st c="2593">文件夹中，我们将创建一个</st>
    `<st c="2617">pipes</st>` <st c="2622">文件夹。</st> <st c="2631">我们将通过我们的终端访问此文件夹，然后运行以下命令来创建我们的</st>
    `<st c="2722">percent</st>` <st c="2729">管道：</st>
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: <st c="2768">After pipe generation, this is the tree structure you</st> <st
    c="2823">should see:</st>
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2768">管道生成后，你应该看到以下树结构：</st>
- en: '![Figure 5.1 – The pipe folder](img/B21146_05_1.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.1 – 管道文件夹](img/B21146_05_1.jpg)'
- en: <st c="2886">Figure 5.1 – The pipe folder</st>
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2886">图 5.1 – 管道文件夹</st>
- en: <st c="2914">In relation to the contents of</st> `<st c="2946">percent.pipe.spec.ts</st>`<st
    c="2966">, this is what</st> <st c="2981">we have:</st>
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="2914">与</st> `<st c="2946">percent.pipe.spec.ts</st>`<st c="2966">的内容相关，这是我们所拥有的：</st>
- en: '[PRE1]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: <st c="3167">Following the principles of</st> **<st c="3196">test-driven development</st>**
    <st c="3219">(</st>**<st c="3221">TDD</st>**<st c="3224">), we will create a test
    suite that includes the</st> <st c="3274">following</st> <st c="3284">tests:</st>
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="3167">遵循</st> **<st c="3196">测试驱动开发</st>** <st c="3219">(</st>**<st c="3221">TDD</st>**<st
    c="3224">)，我们将创建一个包含以下</st> <st c="3274">测试</st> <st c="3284">的测试套件：</st>
- en: <st c="3290">A test that formats a positive number</st> <st c="3328">to a</st>
    <st c="3334">percentage string</st>
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="3290">一个将正数格式化为</st> <st c="3328">百分比字符串</st> 的测试
- en: <st c="3351">A test that formats a negative number to a</st> <st c="3395">percentage
    string</st>
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="3351">一个将负数格式化为</st> <st c="3395">百分比字符串</st> 的测试
- en: <st c="3412">A test that formats a decimal number to a</st> <st c="3455">percentage
    string</st>
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="3412">一个将小数格式化为</st> <st c="3455">百分比字符串</st> 的测试
- en: <st c="3472">A test that formats a non-number to a</st> <st c="3511">percentage
    string</st>
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="3472">一个将非数字格式化为</st> <st c="3511">百分比字符串</st> 的测试
- en: <st c="3528">Let’s</st> <st c="3535">get started.</st>
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="3528">让我们</st> <st c="3535">开始吧。</st>
- en: <st c="3547">Positive number to percentage string formatting test</st>
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="3547">正数转换为百分比字符串格式化测试</st>
- en: <st c="3600">Our goal here is very simple.</st> <st c="3631">If we</st> <st
    c="3636">have a positive number, such as</st> `<st c="3669">123</st>`<st c="3672">,
    its percentage format must be</st> `<st c="3704">12300%</st>`<st c="3710">. In
    our</st> `<st c="3719">percent.pipe.spec.ts</st>` <st c="3739">file, we will add
    the following</st> <st c="3772">test suit</st><st c="3781">e:</st>
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="3600">我们的目标非常简单。</st> <st c="3631">如果我们</st> <st c="3636">有一个正数，例如</st>
    `<st c="3669">123</st>`<st c="3672">，它的百分比格式必须是</st> `<st c="3704">12300%</st>`<st
    c="3710">。在我们的</st> `<st c="3719">percent.pipe.spec.ts</st>` <st c="3739">文件中，我们将添加以下</st>
    <st c="3772">测试套件</st><st c="3781">e：</st>
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: <st c="3959">In our terminal, after running the</st> `<st c="3995">ng test</st>`
    <st c="4002">command, we will</st> <st c="4020">have this:</st>
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="3959">在我们的终端中，运行</st> `<st c="3995">ng test</st>` <st c="4002">命令后，我们将</st>
    <st c="4020">得到以下结果：</st>
- en: '![Figure 5.2 – Positive number to percentage string formatting test failed
    in the terminal](img/B21146_05_2.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.2 – 正数转换为百分比字符串格式化测试在终端中失败](img/B21146_05_2.jpg)'
- en: <st c="4477">Figure 5.2 – Positive number to percentage string formatting test
    failed in the terminal</st>
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="4477">图 5.2 – 正数转换为百分比字符串格式化测试在终端中失败</st>
- en: <st c="4565">In our browser, we will have</st> <st c="4594">this result:</st>
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="4565">在我们的浏览器中，我们将得到以下结果：</st>
- en: '![Figure 5.3 – Positive number to percentage string formatting test failed
    in the browser](img/B21146_05_3.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.3 – 正数转换为百分比字符串格式化测试在浏览器中失败](img/B21146_05_3.jpg)'
- en: <st c="5202">Figure 5.3 – Positive number to percentage string formatting test
    failed in the browser</st>
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5202">图 5.3 – 正数转换为百分比字符串格式化测试在浏览器中失败</st>
- en: <st c="5289">It’s quite normal for our test to fail.</st> <st c="5330">Remember,
    we’re following the principles of TDD.</st> <st c="5379">So, we’ve thought about
    what’s expected when our number is formatted as a percentage, and we’ve written
    the test sequence that should correspond to it.</st> <st c="5531">Now we’re going
    to write the minimum amount of code required for our test</st> <st c="5605">to
    pass.</st>
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5289">我们的测试失败是很正常的。</st> <st c="5330">记住，我们正在遵循TDD的原则。</st> <st c="5379">因此，我们已经考虑了当我们的数字被格式化为百分比时预期的结果，并编写了相应的测试序列。</st>
    <st c="5531">现在我们将编写测试通过所需的最少代码。</st>
- en: <st c="5613">Now let’s open our</st> `<st c="5633">percent.pipe.ts</st>` <st
    c="5648">file and find out what it contains.</st> <st c="5685">We’ll see</st>
    <st c="5695">the following:</st>
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5613">现在让我们打开我们的</st> `<st c="5633">percent.pipe.ts</st>` <st c="5648">文件，看看它包含什么。</st>
    <st c="5685">我们将看到以下内容：</st>
- en: '![Figure 5.4 – Code in the percent.pipe.ts file](img/B21146_05_4.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![图5.4 – percent.pipe.ts文件中的代码](img/B21146_05_4.jpg)'
- en: <st c="5909">Figure 5.4 – Code in the percent.pipe.ts file</st>
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5909">图5.4 – percent.pipe.ts文件中的代码</st>
- en: <st c="5954">So, let’s add our algorithm.</st> <st c="5984">This will allow
    us to</st> <st c="6006">take our previous test to the green stage with the minimum
    amount of</st> <st c="6075">code required:</st>
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5954">因此，让我们添加我们的算法。</st> <st c="5984">这将使我们能够</st> <st c="6006">以最少的代码将之前的测试带到绿色阶段：</st>
- en: '[PRE3]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: <st c="6192">All we’ve done here is taken the number to be formatted as a percentage,
    multiplied it by 100, and concatenated it with the</st> `<st c="6317">%</st>`
    <st c="6318">symbol to get the desired rendering.</st> <st c="6356">Now, when
    we go to our test terminal, our test will</st> <st c="6408">turn green:</st>
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="6192">我们在这里所做的一切只是将需要格式化为百分比的数字乘以100，并将其与</st> `<st c="6317">%</st>`
    <st c="6318">符号连接起来，以获得所需的渲染。</st> <st c="6356">现在，当我们进入我们的测试终端时，我们的测试将</st> <st
    c="6408">变为绿色：</st>
- en: '![Figure 5.5 – Positive number to percentage string formatting test succeeded
    in the terminal](img/B21146_05_5.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图5.5 – 正数转换为百分比字符串格式化测试在终端中成功](img/B21146_05_5.jpg)'
- en: <st c="7626">Figure 5.5 – Positive number to percentage string formatting test
    succeeded in the terminal</st>
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7626">图5.5 – 正数转换为百分比字符串格式化测试在终端中成功</st>
- en: <st c="7717">And in our browser, we</st> <st c="7740">will have</st> <st c="7751">this
    result:</st>
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7717">在我们的浏览器中，我们将得到以下</st> <st c="7740">结果：</st>
- en: '![Figure 5.6 – Positive number to percentage string formatting test succeeded
    in the browser](img/B21146_05_6.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图5.6 – 正数转换为百分比字符串格式化测试在浏览器中成功](img/B21146_05_6.jpg)'
- en: <st c="7855">Figure 5.6 – Positive number to percentage string formatting test
    succeeded in the browser</st>
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7855">图5.6 – 正数转换为百分比字符串格式化测试在浏览器中成功</st>
- en: <st c="7945">In the next section, we’ll look at the test for formatting a negative
    number as</st> <st c="8026">a percentage.</st>
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7945">在下一节中，我们将查看将负数格式化为</st> <st c="8026">百分比的测试。</st>
- en: <st c="8039">Negative number to percentage string formatting test</st>
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="8039">负数转换为百分比字符串格式化测试</st>
- en: <st c="8092">As we have seen, our objective here is also very</st> <st c="8141">simple.</st>
    <st c="8150">If we have a negative number, such as</st> `<st c="8188">-123</st>`<st
    c="8192">, its percentage format must be</st> `<st c="8224">-12300%</st>`<st c="8231">.
    So, in our</st> `<st c="8244">percent.pipe.spec.ts</st>` <st c="8264">file, we’ll</st>
    <st c="8277">add the following</st> <st c="8295">test suit</st><st c="8304">e:</st>
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="8092">正如我们所见，我们的目标也非常</st> <st c="8141">简单。</st> <st c="8150">如果我们有一个负数，例如</st>
    `<st c="8188">-123</st>`<st c="8192">，它的百分比格式必须是</st> `<st c="8224">-12300%</st>`<st
    c="8231">。因此，在我们的</st> `<st c="8244">percent.pipe.spec.ts</st>` <st c="8264">文件中，我们将</st>
    <st c="8277">添加以下</st> <st c="8295">测试套件</st><st c="8304">e：</st>
- en: '[PRE4]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: <st c="8484">In our terminal, after running the</st> `<st c="8520">ng test</st>`
    <st c="8527">command, we have</st> <st c="8545">this result:</st>
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="8484">在我们的终端中，运行</st> `<st c="8520">ng test</st>` <st c="8527">命令后，我们得到以下</st>
    <st c="8545">结果：</st>
- en: '![Figure 5.7 – Negative number to percentage string formatting test succeeded
    in the terminal](img/B21146_05_7.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![图5.7 – 负数转换为百分比字符串格式化测试在终端中成功](img/B21146_05_7.jpg)'
- en: <st c="9186">Figure 5.7 – Negative number to percentage string formatting test
    succeeded in the terminal</st>
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="9186">图5.7 – 负数转换为百分比字符串格式化测试在终端中成功</st>
- en: <st c="9277">In our browser, we</st> <st c="9296">have the</st> <st c="9306">following</st>
    <st c="9315">result:</st>
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="9277">在我们的浏览器中，我们有以下</st> <st c="9296">结果：</st>
- en: '![Figure 5.8 – Negative number to percentage string formatting test succeeded
    in the browser](img/B21146_05_8.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![图5.8 – 负数转换为百分比字符串格式化测试在浏览器中成功](img/B21146_05_8.jpg)'
- en: <st c="9982">Figure 5.8 – Negative number to percentage string formatting test
    succeeded in the browser</st>
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="9982">图5.8 – 负数转换为百分比字符串格式化测试在浏览器中成功</st>
- en: <st c="10072">We can conclude that the minimum amount of code written in our</st>
    `<st c="10136">percent.pipe.ts</st>` <st c="10151">to format positive numbers
    as percentages is also valid for negative numbers, as we didn’t need to add any
    code for the test</st> <st c="10277">to pass.</st>
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10072">我们可以得出结论，我们</st> <st c="10136">percent.pipe.ts</st> <st c="10151">文件中编写的最小代码量，用于将正数格式化为百分比，也适用于负数，因为我们不需要添加任何代码来通过测试</st>
    <st c="10277">。</st>
- en: <st c="10285">In the next section, we’ll look at the test for formatting a decimal
    number as</st> <st c="10365">a percentage.</st>
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10285">在下一节中，我们将查看将小数格式化为</st> <st c="10365">百分比的测试。</st>
- en: <st c="10378">Decimal number to percentage string formatting test</st>
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="10378">小数转换为百分比字符串格式化测试</st>
- en: <st c="10430">This time we’ll do the same exercise with a decimal number.</st>
    <st c="10491">If we have a decimal number such as</st> `<st c="10527">123.45</st>`<st
    c="10533">, its percentage</st> <st c="10550">format must be</st> `<st c="10565">12345%</st>`<st
    c="10571">. In our</st> `<st c="10580">percent.pipe.spec.ts</st>` <st c="10600">file,
    we’ll add the</st> <st c="10620">following</st> <st c="10631">test seque</st><st
    c="10641">nce:</st>
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10430">这次我们将用小数进行相同的练习。</st> <st c="10491">如果我们有一个小数，例如</st> `<st c="10527">123.45</st>`<st
    c="10533">，它的百分比</st> <st c="10550">格式必须是</st> `<st c="10565">12345%</st>`<st
    c="10571">。在我们的</st> `<st c="10580">percent.pipe.spec.ts</st>` <st c="10600">文件中，我们将添加以下</st>
    <st c="10620">以下</st> <st c="10631">测试序列：</st>
- en: '[PRE5]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: <st c="10823">In our terminal, after running the</st> `<st c="10859">ng test</st>`
    <st c="10866">command, we</st> <st c="10879">have this:</st>
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10823">在我们的终端中，运行</st> `<st c="10859">ng test</st>` <st c="10866">命令后，我们</st>
    <st c="10879">得到以下结果：</st>
- en: '![Figure 5.9 – Decimal number to a percentage string formatting test succeeded
    in the terminal](img/B21146_05_9.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图5.9 – 十进制数字转换为百分比字符串格式化测试在终端中成功](img/B21146_05_9.jpg)'
- en: <st c="11665">Figure 5.9 – Decimal number to a percentage string formatting
    test succeeded in the terminal</st>
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="11665">图5.9 – 十进制数字转换为百分比字符串格式化测试在终端中成功</st>
- en: <st c="11757">In our browser, we have</st> <st c="11782">this result:</st>
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="11757">在我们的浏览器中，我们有</st> <st c="11782">以下结果：</st>
- en: '![Figure 5.10 – Decimal number to a percentage string formatting test succeeded
    in the browser](img/B21146_05_10.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![图5.10 – 十进制数字转换为百分比字符串格式化测试在浏览器中成功](img/B21146_05_10.jpg)'
- en: <st c="12528">Figure 5.10 – Decimal number to a percentage string formatting
    test succeeded in the browser</st>
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12528">图5.10 – 十进制数字转换为百分比字符串格式化测试在浏览器中成功</st>
- en: <st c="12620">We can conclude that</st> <st c="12641">the minimal amount of
    code written in our</st> `<st c="12684">percent.pipe.ts</st>` <st c="12699">to
    format positive and negative</st> <st c="12732">numbers as percentages is also
    valid for decimal numbers, since we didn’t need to add any code for the test</st>
    <st c="12840">to pass.</st>
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12620">我们可以得出结论，</st> <st c="12641">我们</st> <st c="12684">percent.pipe.ts</st>
    <st c="12699">文件中编写的最小代码量，用于将正数和负数格式化为百分比，也适用于小数，因为我们不需要添加任何代码来通过测试</st> <st c="12840">。</st>
- en: <st c="12848">In the next section, we’ll look at the test for</st> <st c="12897">formatting
    a non-number expression, such as</st> **<st c="12941">not a number</st>** <st
    c="12953">(</st>**<st c="12955">NaN</st>**<st c="12958">), as</st> <st c="12965">a
    percentage.</st>
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12848">在下一节中，我们将查看将非数字表达式，例如</st> **<st c="12941">不是一个数字</st>** <st c="12953">(**<st
    c="12955">NaN</st>**<st c="12958">**)，格式化为</st> <st c="12965">百分比的测试。</st>
- en: <st c="12978">Non-number to percentage string formatting test</st>
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="12978">非数字转换为百分比字符串格式化测试</st>
- en: <st c="13026">In this case, the aim is to manage an exception.</st> <st c="13076">Let’s</st>
    <st c="13081">assume that the number to be turned into a percentage isn’t a number.</st>
    <st c="13152">Normally, we’d</st> <st c="13166">get an error message, such as</st>
    `<st c="13344">percent.pipe.spec.ts</st>` <st c="13364">file, we will add the
    following</st> <st c="13397">test</st> <st c="13401">suite:</st>
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="13026">在这种情况下，目标是处理一个异常。</st> <st c="13076">让我们</st> <st c="13081">假设要转换成百分比的数字实际上不是一个数字。</st>
    <st c="13152">通常情况下，我们会</st> <st c="13166">收到一个错误信息，例如</st> `<st c="13344">percent.pipe.spec.ts</st>`
    <st c="13364">文件，我们将添加以下</st> <st c="13397">测试</st> <st c="13401">套件：</st>
- en: '[PRE6]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: <st c="13585">In our terminal, after</st> <st c="13608">running the</st> `<st
    c="13621">ng test</st>` <st c="13628">command, we</st> <st c="13641">have this:</st>
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的终端中，在运行了`<st c="13621">ng test</st>`命令之后，我们得到如下结果：
- en: '![Figure 5.11 – Non-number to percentage string formatting test failed in the
    terminal](img/B21146_05_11.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.11 – 在终端中非数字转换为百分比字符串格式化测试失败](img/B21146_05_11.jpg)'
- en: <st c="14082">Figure 5.11 – Non-number to percentage string formatting test
    failed in the terminal</st>
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.11 – 在终端中非数字转换为百分比字符串格式化测试失败
- en: <st c="14166">In our browser, we have</st> <st c="14191">this result:</st>
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的浏览器中，我们有如下结果：
- en: '![Figure 5.12 – Non-number to percentage string formatting test succeeded in
    the browser](img/B21146_05_12.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.12 – 在浏览器中非数字转换为百分比字符串格式化测试成功](img/B21146_05_12.jpg)'
- en: <st c="14858">Figure 5.12 – Non-number to percentage string formatting test
    succeeded in the browser</st>
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.12 – 在浏览器中非数字转换为百分比字符串格式化测试成功
- en: <st c="14944">As you may have noticed, we have some errors and our test has
    failed.</st> <st c="15015">This is normal, as we haven’t solved this problem using</st>
    <st c="15071">our</st> `<st c="15075">PercentPipe</st>`<st c="15086">.</st>
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如您可能已经注意到的，我们有一些错误，并且我们的测试失败了。这是正常的，因为我们还没有使用我们的`<st c="15075">PercentPipe</st>`来解决这个问题的。
- en: <st c="15087">To fix our test, we’ll go to</st> `<st c="15117">percent.pipe.ts</st>`
    <st c="15132">and add the minimum code needed to handle</st> <st c="15175">this
    exception:</st>
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 为了修复我们的测试，我们将前往`<st c="15117">percent.pipe.ts</st>`并添加处理这个异常所需的最少代码：
- en: '[PRE7]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: <st c="15228">This bit of code needs to be</st> <st c="15257">added to the</st>
    `<st c="15271">transform()</st>` <st c="15282">function.</st> <st c="15293">The
    following is the complete code</st> <st c="15327">for the</st> `<st c="15336">transform()</st>`
    <st c="15347">f</st><st c="15349">unction:</st>
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码需要添加到`<st c="15271">transform()</st>`函数中。以下是对`<st c="15336">transform()</st>`函数的完整代码：
- en: '[PRE8]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: <st c="15497">In our terminal, after</st> <st c="15520">running the</st> `<st
    c="15533">ng test</st>` <st c="15540">command, we will</st> <st c="15558">have
    this:</st>
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的终端中，在运行了`<st c="15533">ng test</st>`命令之后，我们将得到如下结果：
- en: '![Figure 5.13 – Non-number to percentage string formatting test succeeded in
    the terminal](img/B21146_05_13.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.13 – 在终端中非数字转换为百分比字符串格式化测试成功](img/B21146_05_13.jpg)'
- en: <st c="15721">Figure 5.13 – Non-number to percentage string formatting test
    succeeded in the terminal</st>
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.13 – 在终端中非数字转换为百分比字符串格式化测试成功
- en: <st c="15808">In our browser, we will have</st> <st c="15838">this result:</st>
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的浏览器中，我们将得到如下结果：
- en: '![Figure 5.14 – Test cases for PercentPipe succeeded in the browser](img/B21146_05_14.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.14 – 在浏览器中PercentPipe的测试用例成功](img/B21146_05_14.jpg)'
- en: <st c="16158">Figure 5.14 – Test cases for PercentPipe succeeded in the browser</st>
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.14 – 在浏览器中PercentPipe的测试用例成功
- en: <st c="16223">The last step is to go to</st> `<st c="16250">CalculatorComponent</st>`
    <st c="16269">to test our</st> `<st c="16282">PercentPipe</st>` <st c="16293">in
    our</st> `<st c="16301">calculator.component.html</st>` <st c="16326">template.</st>
    <st c="16337">To</st> <st c="16340">do this, we’ll declare our</st> `<st c="16367">PercentPipe</st>`
    <st c="16378">in the</st> `<st c="16386">calculator.module.ts</st>` <st c="16406">module
    so that we can use it in our template.</st> <st c="16453">This is what</st> <st
    c="16466">we’ll get:</st>
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是前往`<st c="16250">CalculatorComponent</st>`来测试我们在`<st c="16301">calculator.component.html</st>`模板中的`<st
    c="16282">PercentPipe</st>`。为了做到这一点，我们将在`<st c="16386">calculator.module.ts</st>`模块中声明我们的`<st
    c="16367">PercentPipe</st>`，这样我们就可以在模板中使用它了。这将是我们得到的结果：
- en: '![Figure 5.15 – PercentPipe implementation in our component](img/B21146_05_15.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.15 – 我们组件中的PercentPipe实现](img/B21146_05_15.jpg)'
- en: <st c="17141">Figure 5.15 – PercentPipe implementation in our component</st>
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.15 – 我们组件中的PercentPipe实现
- en: <st c="17198">Everything</st> <st c="17210">works perfectly!</st>
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 所有的东西都工作得非常完美！
- en: <st c="17226">In the next section, we’ll set up</st> <st c="17260">our calculator’s
    user interface.</st> <st c="17294">So far, there’s been no user interaction.</st>
    <st c="17336">We’ve just been manipulating our code to play with variable states.</st>
    <st c="17404">To set up the user interface, we’ll use</st> <st c="17443">reactive
    forms and see how we can apply the principles</st> <st c="17499">of TDD.</st>
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17226">在下一节中，我们将设置</st> <st c="17260">计算器的用户界面。</st> <st c="17294">到目前为止，还没有用户交互。</st>
    <st c="17336">我们只是操作代码来玩转变量状态。</st> <st c="17404">为了设置用户界面，我们将使用</st> <st c="17443">响应式表单，并看看我们如何应用TDD的原则。</st>
- en: <st c="17506">Implementing TDD for the Reactive Form in our calcul</st><st c="17559">ator
    app</st>
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="17506">在我们的计算器应用中实现响应式表单的TDD</st><st c="17559">测试</st>
- en: <st c="17568">A reactive form is a type of form that uses reactive programming
    principles to update the form state in response to user input.</st> <st c="17697">Reactive
    forms are often used in web applications, as they can be used to create dynamic</st>
    <st c="17786">and responsive</st> <st c="17801">user interfaces.</st>
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17568">响应式表单是一种使用响应式编程原则来根据用户输入更新表单状态的表单类型。</st> <st c="17697">响应式表单常用于Web应用程序中，因为它们可以用来创建动态</st>
    <st c="17786">和响应式</st> <st c="17801">的用户界面。</st>
- en: <st c="17817">In this section, we will discuss how to implement a reactive form
    user interface for our calculator app.</st> <st c="17923">We will use TDD to ensure
    that our form is valid and that our calculator component works</st> <st c="18012">as
    expected.</st>
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17817">在本节中，我们将讨论如何为我们的计算器应用实现响应式表单用户界面。</st> <st c="17923">我们将使用TDD来确保我们的表单是有效的，并且计算器组件按预期工作。</st>
    <st c="18012">编写计算器表单的测试</st>
- en: <st c="18024">Here are the benefits of using a reactive form user interface
    for</st> <st c="18091">a calculator:</st>
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="18024">使用响应式表单用户界面为计算器带来的好处如下：</st> <st c="18091">一个计算器：</st>
- en: '**<st c="18104">Dynamic and responsive</st>**<st c="18127">: Reactive forms
    can be used to create dynamic and responsive user interfaces.</st> <st c="18207">For
    example, you could use a reactive form to create a calculator that updates the
    result as the user enters values into the</st> <st c="18332">input fields.</st>'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18104">动态和响应式</st>**<st c="18127">：响应式表单可以用来创建动态和响应式的用户界面。</st> <st
    c="18207">例如，你可以使用响应式表单创建一个计算器，当用户在输入字段中输入值时，它会更新结果。</st>'
- en: '**<st c="18345">Valid</st>**<st c="18351">: Reactive forms provide validation
    features that can be used to ensure that the user input is valid.</st> <st c="18454">For
    example, you could use a reactive form to create a calculator that validates that
    the operands are numbers, and that the operator is a valid</st> <st c="18599">mathematical
    operator.</st>'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18345">有效性</st>**<st c="18351">：响应式表单提供验证功能，可以用来确保用户输入是有效的。</st> <st
    c="18454">例如，你可以使用响应式表单创建一个计算器，验证操作数是否为数字，以及运算符是否为有效的</st> <st c="18599">数学运算符。</st>'
- en: '**<st c="18621">Testable</st>**<st c="18630">: Reactive forms are easy to test
    using TDD.</st> <st c="18676">This ensures that your form is valid and that your
    calculator component works</st> <st c="18754">as expected.</st>'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18621">可测试性</st>**<st c="18630">：响应式表单易于使用TDD进行测试。</st> <st c="18676">这确保了你的表单是有效的，并且计算器组件按预期工作。</st>'
- en: <st c="18766">To implement a reactive form</st> <st c="18795">user interface
    for using a calculator with TDD, you will need to</st> <st c="18860">follow the</st>
    <st c="18872">ensuing steps.</st>
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="18766">要实现一个用于使用计算器的TDD响应式表单用户界面，你需要遵循</st> <st c="18795">以下步骤。</st>
- en: <st c="18886">Writing a test for the calculator form</st>
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="18886">编写计算器表单的测试</st>
- en: <st c="18925">The first step is to write a test for the</st> <st c="18968">calc</st><st
    c="18972">ulator form.</st> <st c="18986">This test will ensure that the form
    is valid when all of the fields are filled in correctly.</st> <st c="19079">In
    our</st> `<st c="19086">calculator.component.spec.ts</st>`<st c="19114">, we will
    add the following</st> <st c="19141">test suite:</st>
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="18925">第一步是为</st> <st c="18968">calc</st><st c="18972">ulator</st> <st
    c="18986">表单编写测试。</st> <st c="18986">这个测试将确保当所有字段都正确填写时，表单是有效的。</st> <st c="19079">在我们的</st>
    `<st c="19086">calculator.component.spec.ts</st>`<st c="19114">中，我们将添加以下</st>
    <st c="19141">测试套件：</st>
- en: '[PRE9]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: <st c="19394">Don’t forget to import</st> `<st c="19418">ReactiveFormModule</st>`
    <st c="19436">as shown in the</st> <st c="19453">following code:</st>
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="19394">不要忘记导入</st> `<st c="19418">ReactiveFormModule</st>` <st c="19436">，如以下代码所示：</st>
- en: '[PRE10]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: <st c="19563">As you can see, we now have a test suite linked to the management
    of our reactive form in the event that it is valid.</st> <st c="19682">When</st>
    <st c="19687">we run the</st> `<st c="19698">ng test</st>` <st c="19705">command,
    this will be</st> <st c="19728">the result:</st>
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="19563">正如你所见，我们现在有一个测试套件与我们的响应式表单管理相关联，以防它是有效的。</st> <st c="19682">当我们</st>
    <st c="19687">运行</st> `<st c="19698">ng test</st>` <st c="19705">命令时，这将</st> <st
    c="19728">是结果：</st>
- en: '![Figure 5.16 – Calculator form test succeeded in the terminal](img/B21146_05_16.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图5.16 – 计算器表单测试在终端中成功](img/B21146_05_16.jpg)'
- en: <st c="19877">Figure 5.16 – Calculator form test succeeded in the terminal</st>
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="19877">图5.16 – 计算器表单测试在终端中成功</st>
- en: <st c="19937">In our browser, we will have</st> <st c="19967">this result:</st>
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="19937">在我们的浏览器中，我们将得到</st> <st c="19967">以下结果：</st>
- en: '![Figure 5.17 – Calculator form test succeeded in the browser](img/B21146_05_17.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![图5.17 – 计算器表单测试在浏览器中成功](img/B21146_05_17.jpg)'
- en: <st c="20845">Figure 5.17 – Calculator form test succeeded in the browser</st>
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="20845">图5.17 – 计算器表单测试在浏览器中成功</st>
- en: <st c="20904">Our test suite is on!</st> <st c="20927">No surprise there!</st>
    <st c="20946">In fact, we have created an instance of our form directly within
    our test.</st> <st c="21021">As we haven’t interacted with our calculator component’s
    form, we’ll do that now by modifying our</st> <st c="21118">test suite</st> <st
    c="21129">as follows:</st>
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="20904">我们的测试套件启动了！</st> <st c="20927">这并不令人惊讶！</st> <st c="20946">实际上，我们在测试中直接创建了我们表单的实例。</st>
    <st c="21021">由于我们尚未与计算器组件的表单交互，我们现在将通过修改我们的</st> `<st c="21118">test suite</st>`
    <st c="21129">来完成这一点：</st>
- en: '[PRE11]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: <st c="21449">In our terminal, after running the</st> `<st c="21485">ng test</st>`
    <st c="21492">command, we will</st> <st c="21510">have this:</st>
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="21449">在我们的终端中，运行</st> `<st c="21485">ng test</st>` <st c="21492">命令后，我们将</st>
    <st c="21510">得到以下结果：</st>
- en: '![Figure 5.18 – Calculator form build failed in the terminal](img/B21146_05_18.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图5.18 – 计算器表单构建在终端中失败](img/B21146_05_18.jpg)'
- en: <st c="22227">Figure 5.18 – Calculator form build failed in the terminal</st>
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="22227">图5.18 – 计算器表单构建在终端中失败</st>
- en: <st c="22285">The result we get is normal because</st> `<st c="22322">calculatorForm</st>`
    <st c="22336">doesn’t exist in our</st> `<st c="22358">CalculatorComponent</st>`<st
    c="22377">. We need to add it as an attribute to our class</st> <st c="22426">as
    follows:</st>
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="22285">我们得到的结果是正常的，因为</st> `<st c="22322">calculatorForm</st>` <st c="22336">不在我们的</st>
    `<st c="22358">CalculatorComponent</st>`<st c="22377">中。我们需要将其作为属性添加到我们的类中</st>
    <st c="22426">如下所示：</st>
- en: '![Figure 5.19 – Declaration of calculatorForm as FormGroup module in our component](img/B21146_05_19.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![图5.19 – 在我们的组件中将calculatorForm声明为FormGroup模块](img/B21146_05_19.jpg)'
- en: <st c="22567">Figure 5.19 – Declaration of calculatorForm as FormGroup module
    in our component</st>
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="22567">图5.19 – 在我们的组件中将calculatorForm声明为FormGroup模块</st>
- en: <st c="22647">Now that we have added</st> `<st c="22671">calculatorForm</st>`<st
    c="22685">, we’ll also add the three input fields by initializing our</st> `<st
    c="22745">calculatorForm</st>` <st c="22759">using</st> <st c="22765">the following:</st>
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="22647">现在我们已经添加了</st> `<st c="22671">calculatorForm</st>`<st c="22685">，我们还将通过以下方式初始化我们的</st>
    `<st c="22745">calculatorForm</st>` <st c="22759">来添加三个输入字段：</st>
- en: '[PRE12]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![Figure 5.20 – Initialization of our FormGroup module calculatorForm](img/B21146_05_20.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![图5.20 – 初始化我们的FormGroup模块calculatorForm](img/B21146_05_20.jpg)'
- en: <st c="23229">Figure 5.20 – Initialization of our FormGroup module calculatorForm</st>
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="23229">图5.20 – 初始化我们的FormGroup模块calculatorForm</st>
- en: <st c="23296">In our terminal, after running the</st> `<st c="23332">ng test</st>`
    <st c="23339">command, we will</st> <st c="23357">have this:</st>
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="23296">在我们的终端中，运行</st> `<st c="23332">ng test</st>` <st c="23339">命令后，我们将</st>
    <st c="23357">得到以下结果：</st>
- en: '![Figure 5.21 – Calculator form test succeeded in the terminal](img/B21146_05_21.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![图5.21 – 计算器表单测试在终端中成功](img/B21146_05_21.jpg)'
- en: <st c="23678">Figure 5.21 – Calculator form test succeeded in the terminal</st>
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="23678">图5.21 – 计算器表单测试在终端中成功</st>
- en: <st c="23738">In our browser, we will have</st> <st c="23768">this result:</st>
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="23738">在我们的浏览器中，我们将得到</st> <st c="23768">以下结果：</st>
- en: "![Fig\uFEFFure 5.22 – Calculator form test succeeded in the browser](img/B21146_05_22.jpg)"
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![图5.22 – 计算器表单测试在浏览器中成功](img/B21146_05_22.jpg)'
- en: <st c="24645">Fig</st><st c="24648">ure 5.22 – Calculator form test succeeded
    in the browser</st>
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="24645">图</st><st c="24648">5.22 – 计算器表单测试在浏览器中成功</st>
- en: <st c="24705">We’ll do another test to make sure</st> <st c="24740">the opposite
    is true, that is, when the form</st> <st c="24786">is invalid.</st>
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="24705">我们将进行另一个测试以确保</st> <st c="24740">相反的情况是正确的，即当表单</st> <st c="24786">无效时。</st>
- en: <st c="24797">Since all fields are mandatory, if a field is not filled in, the
    form must be invalid.</st> <st c="24885">In our</st> `<st c="24892">calculator.component.spec.ts</st>`
    <st c="24920">file, we’ll add the following</st> <st c="24951">test</st> <st c="24956">sequence:</st>
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="24797">由于所有字段都是必填的，如果某个字段未填写，则表单必须无效。</st> <st c="24885">在我们的</st> `<st
    c="24892">calculator.component.spec.ts</st>` <st c="24920">文件中，我们将添加以下</st> <st
    c="24951">测试</st> <st c="24956">序列：</st>
- en: '[PRE13]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: <st c="25221">In our terminal, after running the</st> `<st c="25257">ng test</st>`
    <st c="25264">command, we will</st> <st c="25282">have this:</st>
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="25221">在我们的终端中，运行</st> `<st c="25257">ng test</st>` <st c="25264">命令后，我们将看到以下内容：</st>
- en: '![Figure 5.23 – Calculator form test succeeded in the terminal](img/B21146_05_23.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.23 – 在终端中计算器表单测试成功](img/B21146_05_23.jpg)'
- en: <st c="25448">Figure 5.23 – Calculator form test succeeded in the terminal</st>
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="25448">图 5.23 – 在终端中计算器表单测试成功</st>
- en: <st c="25508">In our browser, we will have</st> <st c="25538">this result:</st>
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="25508">在我们的浏览器中，我们将看到以下结果：</st>
- en: '![Figure 5.24 – Calculator form test succeeded in the browser](img/B21146_05_24.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.24 – 在浏览器中计算器表单测试成功](img/B21146_05_24.jpg)'
- en: <st c="26478">Figure 5.24 – Calculator form test succeeded in the browser</st>
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="26478">图 5.24 – 在浏览器中计算器表单测试成功</st>
- en: <st c="26537">In the next section, we’ll implement</st> <st c="26574">the user
    interface for our</st> <st c="26602">calculator application.</st>
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="26537">在下一节中，我们将实现</st> <st c="26574">我们的计算器应用程序的用户</st> <st c="26602">界面。</st>
- en: <st c="26625">Implementing the user interface</st>
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="26625">实现用户界面</st>
- en: <st c="26657">Let’s implement our calculator’s user</st> <st c="26695">interface
    in our</st> `<st c="26713">calculator.component.html</st>` <st c="26738">file
    using</st> <st c="26750">the following:</st>
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="26657">让我们在我们的</st> <st c="26695">`calculator.component.html`</st> <st
    c="26713">文件中使用以下内容来</st> <st c="26738">实现我们的计算器用户</st> <st c="26750">界面：</st>
- en: '[PRE14]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: <st c="27213">Don’t forget to add</st> `<st c="27234">ReactiveFormsModu</st><st
    c="27251">le</st>` <st c="27254">to the</st> `<st c="27262">imports</st>` <st
    c="27269">arra</st><st c="27274">y and the</st> `<st c="27285">calculate()</st>`
    <st c="27296">method in</st> <st c="27306">the right place.</st> <st c="27324">You
    can check the source code if you have any errors.</st> <st c="27378">This can
    be found</st> <st c="27396">at</st> [<st c="27399">https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205/getting-started-angular-tdd/src/app/calculator</st>](https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205/getting-started-angular-tdd/src/app/calculator)<st
    c="27544">.</st>
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27213">别忘了将</st> `<st c="27234">ReactiveFormsModu</st><st c="27251">le</st>`
    <st c="27254">添加到</st> `<st c="27262">导入</st> <st c="27269">数组</st> <st c="27274">和</st>
    `<st c="27285">calculate()</st>` <st c="27296">方法</st> <st c="27306">的正确位置。</st>
    <st c="27324">如果您有任何错误，可以检查源代码。</st> <st c="27378">这可以在</st> <st c="27396">[<st
    c="27399">https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205/getting-started-angular-tdd/src/app/calculator</st>](https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development/tree/main/Chapter%205/getting-started-angular-tdd/src/app/calculator)<st
    c="27544">找到。</st>
- en: <st c="27545">In our terminal, after running the</st> `<st c="27581">ng serve
    -o</st>` <st c="27592">command, we will have this in</st> <st c="27623">our browser:</st>
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27545">在我们的终端中，运行</st> `<st c="27581">ng serve -o</st>` <st c="27592">命令后，我们将在</st>
    <st c="27623">我们的浏览器中看到以下内容：</st>
- en: '![Figure 5.25 – Calculator user interface in the browser](img/B21146_05_25.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.25 – 在浏览器中计算器用户界面](img/B21146_05_25.jpg)'
- en: <st c="27651">Figure 5.25 – Calculator user interface in the browser</st>
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27651">图 5.25 – 在浏览器中计算器用户界面</st>
- en: <st c="27705">In the next section, we will implement the business</st> <st c="27757">log</st><st
    c="27761">ic of our</st> `<st c="27772">calculate()</st>` <st c="27783">button.</st>
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27705">在下一节中，我们将实现我们</st> <st c="27757">`calculate()`</st> <st c="27761">按钮的</st>
    <st c="27772">业务</st> <st c="27783">逻辑。</st>
- en: <st c="27791">Writing tests for the calculator component</st>
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: <st c="27791">为计算器组件编写测试</st>
- en: <st c="27834">Based on the principles of TDD, we</st> <st c="27870">will implement
    the busines</st><st c="27896">s lo</st><st c="27901">gic of our</st> `<st c="27913">calculate()</st>`
    <st c="27924">button.</st>
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27834">基于TDD的原则，我们将实现我们</st> <st c="27870">`calculate()`</st> <st c="27896">按钮的</st>
    <st c="27901">业务</st> <st c="27913">逻辑。</st>
- en: <st c="27932">We’ll start by adding functionality related to the addition of
    two numbers entered by the user.</st> <st c="28029">In our</st> `<st c="28036">calculator.component.spec.ts</st>`
    <st c="28064">file, we will add the following</st> <st c="28097">t</st><st c="28098">est
    suite:</st>
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27932">我们将从添加与用户输入的两个数字相加的功能开始。</st> <st c="28029">在我们的</st> `<st c="28036">calculator.component.spec.ts</st>`
    <st c="28064">文件中，我们将添加以下</st> <st c="28097">测试套件：</st>
- en: '[PRE15]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: <st c="28440">In our terminal, after</st> <st c="28463">running the</st> `<st
    c="28476">ng test</st>` <st c="28483">command, we will</st> <st c="28501">have
    this:</st>
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="28440">在我们的终端中，运行</st> <st c="28463">命令后，我们将</st> <st c="28476">得到以下结果：</st>
- en: '![Figure 5.26 – Calculator operator (+) choice test failed in the terminal](img/B21146_05_26.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![图5.26 – 计算器运算符（+）选择测试在终端中失败](img/B21146_05_26.jpg)'
- en: <st c="29091">Figure 5.26 – Calculator operator (+) choice test failed in the
    terminal</st>
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="29091">图5.26 – 计算器运算符（+）选择测试在终端中失败</st>
- en: <st c="29163">In our browser, we will have</st> <st c="29193">this result:</st>
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="29163">在我们的浏览器中，我们将得到</st> <st c="29193">以下结果：</st>
- en: '![Figure 5.27 – Calculator operator (+) choice test failed in the browser](img/B21146_05_27.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![图5.27 – 计算器运算符（+）选择测试在浏览器中失败](img/B21146_05_27.jpg)'
- en: <st c="29816">Figure 5.27 – Calculator operator (+) choice test failed in the
    browser</st>
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="29816">图5.27 – 计算器运算符（+）选择测试在浏览器中失败</st>
- en: <st c="29887">As we can see, our test has failed, and that’s perfectly normal
    be</st><st c="29954">cause the</st> `<st c="29965">calculate()</st>` <st c="29976">method
    is currently empty in our</st> `<st c="30010">CalculatorComponent</st>`<st c="30029">.
    We now need to add the minimum code required to make it functional.</st> <st c="30099">We
    need to take into consideration the previous functions contained in the class
    that we had to add in the previous chapters.</st> <st c="30225">Here’s how it</st>
    <st c="30239">looks when we</st> <st c="30253">update the</st> `<st c="30264">calculate()</st>`
    <st c="30275">method in the</st> `<st c="30290">calculator.component.ts</st>`
    <st c="30313">file:</st>
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="29887">正如我们所见，我们的测试失败了，这是完全正常的，因为我们的</st> `<st c="29965">calculate()</st>`
    <st c="29976">方法目前在我们的</st> `<st c="30010">CalculatorComponent</st>`<st c="30029">中是空的。我们现在需要添加使它功能化的最小代码。</st>
    <st c="30099">我们需要考虑之前在前面章节中必须添加到类中的函数。</st> <st c="30225">以下是当我们</st> <st c="30239">更新</st>
    `<st c="30264">calculate()</st>` <st c="30275">方法在</st> `<st c="30290">calculator.component.ts</st>`
    <st c="30313">文件中的样子：</st>
- en: '![Figure 5.28 – Calculator operator (+) choice](img/B21146_05_28.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![图5.28 – 计算器运算符（+）选择](img/B21146_05_28.jpg)'
- en: <st c="30537">Figure 5.28 – Calculator operator (+) choice</st>
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="30537">图5.28 – 计算器运算符（+）选择</st>
- en: <st c="30581">In our terminal, after running the</st> `<st c="30617">ng test</st>`
    <st c="30624">command, we will</st> <st c="30642">have this:</st>
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="30581">在我们的终端中，运行</st> `<st c="30617">ng test</st>` <st c="30624">命令后，我们将</st>
    <st c="30642">得到以下结果：</st>
- en: '![Figure 5.29 – Calculator operator (+) choice test succeeded in the terminal](img/B21146_05_29.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![图5.29 – 计算器运算符（+）选择测试在终端中成功](img/B21146_05_29.jpg)'
- en: <st c="30808">Figure 5.29 – Calculator operator (+) choice test succeeded in
    the terminal</st>
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="30808">图5.29 – 计算器运算符（+）选择测试在终端中成功</st>
- en: <st c="30883">In our browser, we will have</st> <st c="30913">this result:</st>
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="30883">在我们的浏览器中，我们将得到</st> <st c="30913">以下结果：</st>
- en: '![Figure 5.30 – Calculator operator choice (+) test succeeded in the browser](img/B21146_05_30.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![图5.30 – 计算器运算符选择（+）测试在浏览器中成功](img/B21146_05_30.jpg)'
- en: <st c="31887">Figure 5.30 – Calculator operator choice (+) test succeeded in
    the browser</st>
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="31887">图5.30 – 计算器运算符选择（+）测试在浏览器中成功</st>
- en: <st c="31961">Now we’ll do the same for</st> <st c="31987">the subtraction functionality.</st>
    <st c="32019">In our</st> `<st c="32026">calculator.component.spec.ts</st>` <st
    c="32054">file, we will add the following</st> <st c="32087">tes</st><st c="32090">t
    suite:</st>
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="31961">现在我们将对</st> <st c="31987">减法功能</st> <st c="32019">进行相同的操作。</st>
    <st c="32026">在我们的</st> `<st c="32026">calculator.component.spec.ts</st>` <st
    c="32054">文件中，我们将添加以下</st> <st c="32087">测试套件：</st>
- en: '[PRE16]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: <st c="32431">In our terminal, after running the</st> `<st c="32467">ng test</st>`
    <st c="32474">command, we will</st> <st c="32492">have this:</st>
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="32431">在我们的终端中，运行</st> `<st c="32467">ng test</st>` <st c="32474">命令后，我们将</st>
    <st c="32492">得到以下结果：</st>
- en: '![Figure 5.31 – Calculator operator choice (-) test failed in the terminal](img/B21146_05_31.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![图5.31 – 计算器运算符选择（-）测试在终端中失败](img/B21146_05_31.jpg)'
- en: <st c="33066">Figure 5.31 – Calculator operator choice (-) test failed in the
    terminal</st>
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="33066">图5.31 – 计算器运算符选择（-）测试在终端中失败</st>
- en: <st c="33138">In our browser, we will have</st> <st c="33168">this result:</st>
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="33138">在我们的浏览器中，我们将得到</st> <st c="33168">这个结果：</st>
- en: '![Figure 5.32 – Calculator operator choice (-) test failed in the terminal](img/B21146_05_32.jpg)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.32 – 计算器运算符选择（-）测试在终端中失败](img/B21146_05_32.jpg)'
- en: <st c="33899">Figure 5.32 – Calculator operator choice (-) test failed in the
    terminal</st>
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="33899">图 5.32 – 计算器运算符选择（-）测试在终端中失败</st>
- en: <st c="33971">Our test failed, and that’s perfectly normal because our</st>
    `<st c="34029">calculate()</st>` <st c="34040">method doesn’t currently handle
    subtraction in our</st> `<st c="34092">CalculatorComponent</st>`<st c="34111">.
    We now need to add the minimum code</st> <st c="34148">required to make it functional.</st>
    <st c="34181">We need to take into account the previous functions contained in
    the class that we had to add in the previous chapters.</st> <st c="34301">Here’s
    how it looks when we update the</st> `<st c="34340">calculate()</st>` <st c="34351">method
    in the</st> `<st c="34366">calculator.component.ts</st>` <st c="34389">file:</st>
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="33971">我们的测试失败了，这是完全正常的，因为我们的</st> `<st c="34029">calculate()</st>` <st
    c="34040">方法目前还没有处理我们</st> `<st c="34092">CalculatorComponent</st>`<st c="34111">中的减法。我们现在需要添加最少的代码</st>
    <st c="34148">来使其功能化。</st> <st c="34181">我们需要考虑之前在前面章节中添加到类中的函数。</st> <st c="34301">以下是我们在</st>
    `<st c="34340">calculate()</st>` <st c="34351">方法中更新</st> `<st c="34366">calculator.component.ts</st>`
    <st c="34389">文件时的样子：</st>
- en: '![Figure 5.33 – Calculator operator choice (-)](img/B21146_05_33.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.33 – 计算器运算符选择（-）](img/B21146_05_33.jpg)'
- en: <st c="34604">Figure 5.33 – Calculator operator choice (-)</st>
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="34604">图 5.33 – 计算器运算符选择（-）</st>
- en: <st c="34648">In our terminal, after running the</st> `<st c="34684">ng test</st>`
    <st c="34691">command, we will</st> <st c="34709">have this:</st>
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="34648">在我们的终端中，在运行</st> `<st c="34684">ng test</st>` <st c="34691">命令后，我们将得到</st>
    <st c="34709">这个：</st>
- en: '![Figure 5.34 – Calculator operator choice (-) test succeeded in the terminal](img/B21146_05_34.jpg)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.34 – 计算器运算符选择（-）测试在终端中成功](img/B21146_05_34.jpg)'
- en: <st c="34875">Figure 5.34 – Calculator operator choice (-) test succeeded in
    the terminal</st>
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="34875">图 5.34 – 计算器运算符选择（-）测试在终端中成功</st>
- en: <st c="34950">In our browser, we will</st> <st c="34975">have</st> <st c="34980">this
    result:</st>
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="34950">在我们的浏览器中，我们将</st> <st c="34975">得到</st> <st c="34980">这个结果：</st>
- en: '![Figure 5.35 – Calculator operator choice (-) test succeeded in the browser](img/B21146_05_35.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.35 – 计算器运算符选择（-）测试在浏览器中成功](img/B21146_05_35.jpg)'
- en: <st c="36015">Figure 5.35 – Calculator operator choice (-) test succeeded in
    the browser</st>
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="36015">图 5.35 – 计算器运算符选择（-）测试在浏览器中成功</st>
- en: <st c="36089">Next is the multiplication functionality.</st> <st c="36132">In
    our</st> `<st c="36139">calculator.component.spec.ts</st>` <st c="36167">file,
    we’ll add this</st> <st c="36189">test suite:</st>
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="36089">接下来是乘法功能。</st> <st c="36132">在我们的</st> `<st c="36139">calculator.component.spec.ts</st>`
    <st c="36167">文件中，我们将添加这个</st> <st c="36189">测试套件：</st>
- en: '[PRE17]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: <st c="36531">In our terminal, after</st> <st c="36555">running the</st> `<st
    c="36567">ng test</st>` <st c="36574">command, we will</st> <st c="36592">have
    this:</st>
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="36531">在我们的终端中，在运行</st> <st c="36555">`<st c="36567">ng test</st>`</st>
    <st c="36574">命令后，我们将得到</st> <st c="36592">这个：</st>
- en: '![Figure 5.36 – Calculator operator choice (*) test failed in the terminal](img/B21146_05_36.jpg)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.36 – 计算器运算符选择（*）测试在终端中失败](img/B21146_05_36.jpg)'
- en: <st c="37142">Figure 5.36 – Calculator operator choice (*) test failed in the
    terminal</st>
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="37142">图 5.36 – 计算器运算符选择（*）测试在终端中失败</st>
- en: <st c="37214">In our browser, we will have</st> <st c="37244">this result:</st>
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="37214">在我们的浏览器中，我们将得到</st> <st c="37244">这个结果：</st>
- en: '![Figure 5.37 – Calculator operator choice (*) test failed in the browser](img/B21146_05_37.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.37 – 计算器运算符选择（*）测试在浏览器中失败](img/B21146_05_37.jpg)'
- en: <st c="37866">Figure 5.37 – Calculator operator choice (*) test failed in the
    browser</st>
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="37866">图 5.37 – 计算器运算符选择（*）测试在浏览器中失败</st>
- en: <st c="37937">Our test failed, and that’s perfectly normal because our</st>
    `<st c="37995">calculate()</st>` <st c="38006">method doesn’t currently handle
    multiplication in our</st> `<st c="38061">CalculatorComponent</st>`<st c="38080">.
    We now need to add the minimum code required to make it functional.</st> <st c="38150">We
    need to take into account the previous functions contained in the class that we
    had to add in the previous chapters.</st> <st c="38270">Here’s how it looks when
    we update the</st> `<st c="38309">calculate()</st>` <st c="38320">method in the</st>
    `<st c="38335">calculator.component.ts</st>` <st c="38358">file:</st>
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的测试失败了，这是完全正常的，因为我们的 `<st c="37995">calculate()</st>` 方法目前还没有处理 `<st c="38061">CalculatorComponent</st>`
    中的乘法。我们现在需要添加最少的代码来使其功能正常。<st c="38150">我们需要考虑之前在前面章节中添加到类中的函数。</st> <st c="38270">以下是我们在
    `<st c="38309">calculate()</st>` 方法中更新 `<st c="38335">calculator.component.ts</st>`
    文件时的样子：</st>
- en: '![Figure 5.38 – Calculator operator choice (*)](img/B21146_05_38.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.38 – 计算器运算符选择 (*)](img/B21146_05_38.jpg)'
- en: <st c="38517">Figure 5.38 – Calculator operator choice (*)</st>
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.38 – 计算器运算符选择 (*)](img/B21146_05_38.jpg)'
- en: <st c="38561">In our terminal, after running the</st> `<st c="38597">ng test</st>`
    <st c="38604">command, we will</st> <st c="38622">have this:</st>
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的终端中，运行 `<st c="38597">ng test</st>` 命令后，我们将得到以下结果：
- en: '![Figure 5.39 – Calculator operator choice (*) test succeeded in the terminal](img/B21146_05_39.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.39 – 终端中计算器运算符选择 (*) 测试成功](img/B21146_05_39.jpg)'
- en: <st c="38786">Figure 5.39 – Calculator operator choice (*) test succeeded in
    the terminal</st>
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.39 – 终端中计算器运算符选择 (*) 测试成功](img/B21146_05_39.jpg)'
- en: <st c="38861">In our browser, we</st> <st c="38881">will have</st> <st c="38891">this
    result:</st>
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的浏览器中，我们将得到以下结果：
- en: '![Figure 5.40 – Calculator operator choice (*) test succeeded in the browser](img/B21146_05_40.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.40 – 计算器运算符选择 (*) 测试成功在浏览器中](img/B21146_05_40.jpg)'
- en: <st c="39997">Figure 5.40 – Calculator operator choice (*) test succeeded in
    the browser</st>
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.40 – 计算器运算符选择 (*) 测试成功在浏览器中](img/B21146_05_40.jpg)'
- en: <st c="40071">Finally, we’ll set up the last operation, that is,</st> `<st c="40123">divide</st>`<st
    c="40129">. In our</st> `<st c="40138">calculator.component.spec.ts</st>` <st
    c="40166">file, we’ll add this</st> <st c="40188">test suite:</st>
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将设置最后一个操作，即 `<st c="40123">divide</st>`<st c="40129">。在我们的 `<st c="40138">calculator.component.spec.ts</st>`
    文件中，我们将添加这个 `<st c="40188">测试套件</st>`：
- en: '[PRE18]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: <st c="40533">In our terminal, after running the</st> `<st c="40569">ng test</st>`
    <st c="40576">command, we will</st> <st c="40594">have this:</st>
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的终端中，运行 `<st c="40569">ng test</st>` 命令后，我们将得到以下结果：
- en: '![Figure 5.41 – Calculator operator choice (/) test failed in the terminal](img/B21146_05_41.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.41 – 计算器运算符选择 (/) 测试失败在终端中](img/B21146_05_41.jpg)'
- en: <st c="41160">Figure 5.41 – Calculator operator choice (/) test failed in the
    terminal</st>
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.41 – 计算器运算符选择 (/) 测试失败在终端中](img/B21146_05_41.jpg)'
- en: <st c="41232">In our browser, we will</st> <st c="41257">have</st> <st c="41262">this
    result:</st>
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的浏览器中，我们将得到以下结果：
- en: '![Figure 5.42 – Calculator operator choice (/) test failed in the browser](img/B21146_05_42.jpg)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.42 – 浏览器中计算器运算符选择 (/) 测试失败](img/B21146_05_42.jpg)'
- en: <st c="41950">Figure 5.42 – Calculator operator choice (/) test failed in the
    browser</st>
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.42 – 计算器运算符选择 (/) 测试失败在浏览器中](img/B21146_05_42.jpg)'
- en: <st c="42021">Our test failed, and that’s perfectly normal because our</st>
    `<st c="42079">calculate()</st>` <st c="42090">method doesn’t currently handle
    division in our</st> `<st c="42139">CalculatorComponent</st>`<st c="42158">. We
    now need to add the minimum code required to make it functional.</st> <st c="42228">We
    need to take into account the previous functions contained in the class that we
    had to add in the previous chapters.</st> <st c="42348">Here’s how it looks when
    we update the</st> `<st c="42387">calculate()</st>` <st c="42398">method in the</st>
    `<st c="42413">calculator.component.ts</st>` <st c="42436">file:</st>
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的测试失败了，这是完全正常的，因为我们的 `<st c="42079">calculate()</st>` 方法目前还没有处理 `<st c="42139">CalculatorComponent</st>`
    中的除法。我们现在需要添加最少的代码来使其功能正常。<st c="42228">我们需要考虑之前在前面章节中添加到类中的函数。</st> <st c="42348">以下是我们在
    `<st c="42387">calculate()</st>` 方法中更新 `<st c="42413">calculator.component.ts</st>`
    文件时的样子：</st>
- en: '![Figure 5.43 – Calculator operator choice (/)](img/B21146_05_43.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.43 – 计算器运算符选择 (/)](img/B21146_05_43.jpg)'
- en: <st c="42582">Figure 5.43 – Calculator operator choice (/)</st>
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="42582">图 5.43 – 计算器运算符选择 (/)</st>
- en: <st c="42626">In our terminal, after running the</st> `<st c="42662">ng test</st>`
    <st c="42669">command, we will</st> <st c="42687">have this:</st>
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="42626">在我们的终端中，运行</st> `<st c="42662">ng test</st>` <st c="42669">命令后，我们将</st>
    <st c="42687">得到以下结果：</st>
- en: '![Figure 5.44 – Calculator operator choice (/) test succeeded in the terminal](img/B21146_05_44.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.44 – 计算器运算符选择 (/) 测试在终端中成功](img/B21146_05_44.jpg)'
- en: <st c="42846">Figure 5.44 – Calculator operator choice (/) test succeeded in
    the terminal</st>
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="42846">图 5.44 – 计算器运算符选择 (/) 测试在终端中成功</st>
- en: <st c="42921">In our browser, we will</st> <st c="42945">have</st> <st c="42951">this
    result:</st>
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="42921">在我们的浏览器中，我们将</st> <st c="42945">得到</st> <st c="42951">以下结果：</st>
- en: '![Figure 5.45 – Calculator operator choice (/) test succeeded in the browser](img/B21146_05_45.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.45 – 计算器运算符选择 (/) 测试在浏览器中成功](img/B21146_05_45.jpg)'
- en: <st c="44198">Figure 5.45 – Calculator operator choice (/) test succeeded in
    the browser</st>
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44198">图 5.45 – 计算器运算符选择 (/) 测试在浏览器中成功</st>
- en: <st c="44272">We can now run the</st> `<st c="44292">ng serve -o</st>` <st c="44303">command
    to see how our</st> <st c="44327">application behaves:</st>
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44272">现在我们可以运行</st> `<st c="44292">ng serve -o</st>` <st c="44303">命令来查看我们的</st>
    <st c="44327">应用程序的行为：</st>
- en: '![Figure 5.46 – Calculator user interface test](img/B21146_05_46.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.46 – 计算器用户界面测试](img/B21146_05_46.jpg)'
- en: <st c="44448">Figure 5.46 – Calculator user interface test</st>
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44448">图 5.46 – 计算器用户界面测试</st>
- en: <st c="44492">Summary</st>
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="44492">摘要</st>
- en: <st c="44500">In this chapter, we learned how to test Angular pipes and apply
    TDD to reactive forms for</st> <st c="44591">r</st><st c="44592">eactive programming.</st>
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44500">在本章中，我们学习了如何测试 Angular 管道并将 TDD 应用于反应式编程的 Angular。</st> <st c="44591">r</st><st
    c="44592">eactive programming。</st>
- en: <st c="44612">We explored the testing of Angular pipes, which are essential
    components used to transform input data for display in the view.</st> <st c="44740">The
    process involved creating test cases that covered different scenarios and edge
    cases to ensure the pipe behaved</st> <st c="44856">as expected.</st>
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44612">我们探讨了 Angular 管道的测试，这些管道是用于在视图中显示输入数据的必要组件。</st> <st c="44740">这个过程涉及创建覆盖不同场景和边缘情况的测试用例，以确保管道按预期行为。</st>
- en: <st c="44868">We delved into the application of TDD to reactive forms in Angular.</st>
    <st c="44937">TDD is a software development approach that involves writing tests
    before the code, and these tests drive the development of the code.</st> <st c="45072">This
    approach ensures that the code is robust, reliable, and</st> <st c="45133">well
    tested.</st>
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="44868">我们深入研究了 TDD 在 Angular 反应式表单中的应用。</st> <st c="44937">TDD 是一种软件开发方法，涉及在编写代码之前编写测试，这些测试驱动代码的开发。</st>
    <st c="45072">这种方法确保代码是健壮的、可靠的，并且</st> <st c="45133">经过良好测试的。</st>
- en: <st c="45145">In the next chapter, we will explore end-to-end testing with Protractor,
    Cypress,</st> <st c="45228">and Playwright.</st>
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="45145">在下一章中，我们将探讨使用 Protractor、Cypress</st> <st c="45228">和 Playwright
    进行端到端测试。</st>
- en: '<st c="0">Part 3: End-to-End Testing</st>'
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="0">第三部分：端到端测试</st>
- en: <st c="27">In this part, you’ll get an overview of end-to-end testing with Protractor,
    Cypress, and Playwright.</st> <st c="129">Then, you’ll explore in depth how to
    use Cypress to write</st> <st c="187">end-to-end tests.</st>
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="27">在本部分，您将了解使用 Protractor、Cypress 和 Playwright 进行端到端测试的概述。</st> <st
    c="129">然后，您将深入了解如何使用 Cypress 编写</st> <st c="187">端到端测试。</st>
- en: <st c="204">This part has the</st> <st c="223">following chapters:</st>
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="204">本部分包含以下章节：</st>
- en: '[*<st c="242">Chapter 6</st>*](B21146_06.xhtml#_idTextAnchor251)<st c="252">,</st>
    *<st c="254">Exploring End-to-End Testing with Protractor, Cypress, and Playwright</st>*'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*<st c="242">第六章</st>*](B21146_06.xhtml#_idTextAnchor251)<st c="252">,</st>
    *<st c="254">使用 Protractor、Cypress 和 Playwright 探索端到端测试</st>*'
- en: '[*<st c="323">Chapter 7</st>*](B21146_07.xhtml#_idTextAnchor273)<st c="333">,</st>
    *<st c="335">Understanding Cypress and its Role in End-to-End Tests for Web Applications</st>*'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*<st c="323">第七章</st>*](B21146_07.xhtml#_idTextAnchor273)<st c="333">,</st>
    *<st c="335">理解 Cypress 及其在 Web 应用程序端到端测试中的作用</st>*'
- en: '[*<st c="410">Chapter 8</st>*](B21146_08.xhtml#_idTextAnchor290)<st c="420">,</st>
    *<st c="422">Writing Effective End-to-End Component Tests with Cypress</st>*'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*<st c="410">第八章</st>*](B21146_08.xhtml#_idTextAnchor290)<st c="420">,</st>
    *<st c="422">使用 Cypress 编写有效的端到端组件测试</st>*'
