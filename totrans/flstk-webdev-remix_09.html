<html><head></head><body>
<div id="_idContainer042">
<h1 class="chapter-number" id="_idParaDest-140"><a id="_idTextAnchor137"/><span class="koboSpan" id="kobo.1.1">9</span></h1>
<h1 id="_idParaDest-141"><a id="_idTextAnchor138"/><span class="koboSpan" id="kobo.2.1">Assets and Metadata Handling</span></h1>
<p><span class="koboSpan" id="kobo.3.1">So far, we’ve practiced routing, data loading and mutations, handling errors, and managing state and sessions in Remix. </span><span class="koboSpan" id="kobo.3.2">However, building for the web also involves managing static assets to ensure a smooth and efficient </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">user experience.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this chapter, we will learn how to manage static assets and meta tags in Remix. </span><span class="koboSpan" id="kobo.5.2">This chapter is split into </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">three sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.7.1">Using meta tags </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">in Remix</span></span></li>
<li><span class="koboSpan" id="kobo.9.1">Handling fonts, images, stylesheets, and </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">other assets</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Exposing assets with </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">loader functions</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.13.1">First, we will use Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.14.1">meta</span></strong><span class="koboSpan" id="kobo.15.1"> export to create dynamic meta tags based on loader data. </span><span class="koboSpan" id="kobo.15.2">Next, we will investigate how to expose static assets in Remix. </span><span class="koboSpan" id="kobo.15.3">We will create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.16.1">robots.txt</span></strong><span class="koboSpan" id="kobo.17.1"> file, add a custom font, and experiment with nested stylesheets. </span><span class="koboSpan" id="kobo.17.2">After that, we will discuss managing images in Remix. </span><span class="koboSpan" id="kobo.17.3">Finally, we will see how we can create assets dynamically in </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.18.1">loader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.19.1"> functions.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">After reading this chapter, you will understand how to work with meta tags in Remix. </span><span class="koboSpan" id="kobo.20.2">You will also know how to expose and access static assets and how to link external resources. </span><span class="koboSpan" id="kobo.20.3">Finally, you will know how to expose dynamic assets via </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.21.1">loader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.22.1"> functions.</span></span></p>
<h1 id="_idParaDest-142"><a id="_idTextAnchor139"/><span class="koboSpan" id="kobo.23.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.24.1">You can find the code for this chapter here: </span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/09-assets-and-meta-data-handling"><span class="koboSpan" id="kobo.25.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/09-assets-and-meta-data-handling</span></a><span class="koboSpan" id="kobo.26.1">. </span><span class="koboSpan" id="kobo.26.2">You can go ahead and use the end solution from the previous chapter. </span><span class="koboSpan" id="kobo.26.3">No additional setup steps are required for </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">this chapter.</span></span></p>
<h1 id="_idParaDest-143"><a id="_idTextAnchor140"/><span class="koboSpan" id="kobo.28.1">Using meta tags in Remix</span></h1>
<p><span class="koboSpan" id="kobo.29.1">Meta tags are </span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.30.1">used to describe the content of an HTML document. </span><span class="koboSpan" id="kobo.30.2">They are important</span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.31.1"> for </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">Search Engine Optimization</span></strong><span class="koboSpan" id="kobo.33.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.34.1">SEO</span></strong><span class="koboSpan" id="kobo.35.1">) and are used by web crawlers to </span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.36.1">understand the content of your site. </span><span class="koboSpan" id="kobo.36.2">Meta tags are also used to configure browser behavior, link previews, and the site’s appearance in the bookmark list and </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">search results.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">For example, the title, description, and image meta tags are used on link previews and search pages, like Google's search results. </span><span class="koboSpan" id="kobo.38.2">The title meta tag is also used together with the favicon to display the website in the </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">bookmark list.</span></span></p>
<p><span class="koboSpan" id="kobo.40.1">In this section, you will learn how to add meta tags to your </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">Remix application.</span></span></p>
<h2 id="_idParaDest-144"><a id="_idTextAnchor141"/><span class="koboSpan" id="kobo.42.1">Declaring global meta tags</span></h2>
<p><span class="koboSpan" id="kobo.43.1">An application</span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.44.1"> usually exposes some global meta tags that must be included on every page. </span><span class="koboSpan" id="kobo.44.2">Since Remix allows us to manage the full HTML </span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.45.1">document in React, including the head, we can inline global meta tags in the root of </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">our application:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.47.1">
&lt;head&gt;  </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">&lt;meta charSet="utf-8" /&gt;</span></strong><span class="koboSpan" id="kobo.49.1">
  </span><strong class="bold"><span class="koboSpan" id="kobo.50.1">&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</span></strong><span class="koboSpan" id="kobo.51.1">
  &lt;Meta /&gt;
  &lt;Links /&gt;
&lt;/head&gt;</span></pre>
<p><span class="koboSpan" id="kobo.52.1">Review the </span><strong class="source-inline"><span class="koboSpan" id="kobo.53.1">Document</span></strong><span class="koboSpan" id="kobo.54.1"> component in </span><strong class="source-inline"><span class="koboSpan" id="kobo.55.1">root.tsx</span></strong><span class="koboSpan" id="kobo.56.1">. </span><span class="koboSpan" id="kobo.56.2">Notice that we export two global meta tags to set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.57.1">charSet</span></strong><span class="koboSpan" id="kobo.58.1"> attribute and </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">viewport</span></strong><span class="koboSpan" id="kobo.60.1"> meta tag of the application. </span><span class="koboSpan" id="kobo.60.2">As always, you can find more information about browser APIs and the web platform in the MDN </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">Web Docs:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.62.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">viewport</span></strong><span class="koboSpan" id="kobo.64.1"> meta </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">tag: </span></span><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag"><span class="No-Break"><span class="koboSpan" id="kobo.66.1">https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag</span></span></a></li>
<li><span class="koboSpan" id="kobo.67.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">charSet</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.69.1">attribute: </span></span><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#attributes"><span class="No-Break"><span class="koboSpan" id="kobo.70.1">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#attributes</span></span></a></li>
</ul>
<p><span class="koboSpan" id="kobo.71.1">Content-aware </span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.72.1">meta tags, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">title</span></strong><span class="koboSpan" id="kobo.74.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.75.1">description</span></strong><span class="koboSpan" id="kobo.76.1">, must </span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.77.1">be set dynamically for every page. </span><span class="koboSpan" id="kobo.77.2">In Remix, we can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">meta</span></strong><span class="koboSpan" id="kobo.79.1"> export to inject meta tags into the head of our application. </span><span class="koboSpan" id="kobo.79.2">Let’s see how </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">that works.</span></span></p>
<h2 id="_idParaDest-145"><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.81.1">Exporting the meta function</span></h2>
<p><span class="koboSpan" id="kobo.82.1">Every route module</span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.83.1"> in Remix can export a </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">meta</span></strong><span class="koboSpan" id="kobo.85.1"> function. </span><span class="koboSpan" id="kobo.85.2">Remix follows the route hierarchy to find the closest </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">meta</span></strong><span class="koboSpan" id="kobo.87.1"> export and injects it into the head of the HTML document. </span><span class="koboSpan" id="kobo.87.2">Let’s jump into the code of our BeeRich application and investigate how the </span><strong class="source-inline"><span class="koboSpan" id="kobo.88.1">meta</span></strong><span class="koboSpan" id="kobo.89.1"> export is used to define </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">meta tags:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.91.1"> Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.92.1">app/root.tsx</span></strong><span class="koboSpan" id="kobo.93.1"> file and look for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.94.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.95.1"> export:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.96.1">
export const meta: MetaFunction = () =&gt; {  </span><strong class="bold"><span class="koboSpan" id="kobo.97.1">return [{ title: 'BeeRich' }];</span></strong><span class="koboSpan" id="kobo.98.1">};</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.99.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">meta</span></strong><span class="koboSpan" id="kobo.101.1"> function returns a list of metadata objects. </span><span class="koboSpan" id="kobo.101.2">Currently, we only return a title metadata object. </span></p></li> <li><span class="koboSpan" id="kobo.102.1">Run BeeRich locally with </span><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">run dev</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.106.1">Open the app in a browser window by navigating </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">to </span></span><a href="http://localhost:3000/"><span class="No-Break"><span class="koboSpan" id="kobo.108.1">http://localhost:3000/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.109.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.110.1">Inspect the HTML by using the developer tools of your browser. </span><span class="koboSpan" id="kobo.110.2">The head element’s content should look </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.112.1">
&lt;head&gt;  &lt;meta charset="utf-8"&gt;  &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;  </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">&lt;title&gt;BeeRich&lt;/title&gt;</span></strong><span class="koboSpan" id="kobo.114.1">  &lt;link rel="stylesheet" href="/build/_assets/tailwind-QJKU32GV.css"&gt;&lt;/head&gt;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.115.1">Notice</span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.116.1"> that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.117.1">title</span></strong><span class="koboSpan" id="kobo.118.1"> element made it into the head of the </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">HTML document.</span></span></p></li> <li><span class="koboSpan" id="kobo.120.1">Add a description metadata object to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">meta</span></strong><span class="koboSpan" id="kobo.122.1"> function’s return value </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.124.1">root.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.126.1">
export const meta: MetaFunction = () =&gt; {  return [    { title: 'BeeRich' },    {      </span><strong class="bold"><span class="koboSpan" id="kobo.127.1">name: 'description',</span></strong><span class="koboSpan" id="kobo.128.1">      </span><strong class="bold"><span class="koboSpan" id="kobo.129.1">content:</span></strong><span class="koboSpan" id="kobo.130.1">        'Bee in control of your finances with BeeRich - the buzzworthy expense and income tracker with a modern interface. </span><span class="koboSpan" id="kobo.130.2">Keep your finances organized and make honey with your money!',    },  ];};</span></pre></li> <li><span class="koboSpan" id="kobo.131.1">Refresh the browser window and inspect the head element in the developer tools. </span><span class="koboSpan" id="kobo.131.2">You can see that the description meta tag </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">was added.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.133.1">The question is, how does Remix inject the </span><strong class="source-inline"><span class="koboSpan" id="kobo.134.1">meta</span></strong><span class="koboSpan" id="kobo.135.1"> export into the head of our app? </span><span class="koboSpan" id="kobo.135.2">The answer can be found in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.136.1">root.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.137.1"> file.</span></span></p></li>
<li><span class="koboSpan" id="kobo.138.1">Inspect the JSX of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">Document</span></strong><span class="koboSpan" id="kobo.140.1"> component </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.142.1">root.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.144.1">
&lt;head&gt;  &lt;meta charSet="utf-8" /&gt;  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;  </span><strong class="bold"><span class="koboSpan" id="kobo.145.1">&lt;Meta /&gt;</span></strong><span class="koboSpan" id="kobo.146.1">  &lt;Links /&gt;&lt;/head&gt;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.147.1">Note that</span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.148.1"> we render Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.149.1">Meta</span></strong><span class="koboSpan" id="kobo.150.1"> component. </span><span class="koboSpan" id="kobo.150.2">Remix uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.151.1">Meta</span></strong><span class="koboSpan" id="kobo.152.1"> component to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">meta</span></strong><span class="koboSpan" id="kobo.154.1"> exports to our application. </span><span class="koboSpan" id="kobo.154.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">Meta</span></strong><span class="koboSpan" id="kobo.156.1"> component receives the content of the closest </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">meta</span></strong><span class="koboSpan" id="kobo.158.1"> export and injects its content into our </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">React application.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.160.1">By default, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">Meta</span></strong><span class="koboSpan" id="kobo.162.1"> component is rendered in the head of our Remix application. </span><span class="koboSpan" id="kobo.162.2">If we were to remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1">Meta</span></strong><span class="koboSpan" id="kobo.164.1"> component, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">meta</span></strong><span class="koboSpan" id="kobo.166.1"> exports would not end up in our </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">document anymore.</span></span></p></li> </ol>
<p><span class="koboSpan" id="kobo.168.1">Next, let’s investigate how Remix manages nested </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.169.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.170.1"> exports.</span></span></p>
<h2 id="_idParaDest-146"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.171.1">Nesting meta exports</span></h2>
<p><span class="koboSpan" id="kobo.172.1">In this </span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.173.1">section, we’ll add some </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">meta</span></strong><span class="koboSpan" id="kobo.175.1"> exports to nested </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">route modules:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.177.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">_layout.login.tsx</span></strong><span class="koboSpan" id="kobo.179.1"> route module and add the </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">following code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.181.1">
import type { ActionFunctionArgs, LoaderFunctionArgs, </span><strong class="bold"><span class="koboSpan" id="kobo.182.1">MetaFunction</span></strong><span class="koboSpan" id="kobo.183.1"> } from '@remix-run/node';export const meta: MetaFunction = () =&gt; {  return [    { title: 'Log In | BeeRich' },    { name: 'description', content: 'Log into your BeeRich account to track your expenses and income.' </span><span class="koboSpan" id="kobo.183.2">},  ];};</span></pre></li> <li><span class="koboSpan" id="kobo.184.1">Run BeeRich locally by executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">npm run dev</span></strong><span class="koboSpan" id="kobo.186.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">your terminal.</span></span></li>
<li><span class="koboSpan" id="kobo.188.1">Open </span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.189.1">the login page by navigating to </span><a href="http://localhost:3000/login"><span class="koboSpan" id="kobo.190.1">http://localhost:3000/login</span></a><span class="koboSpan" id="kobo.191.1"> and inspect the content of the </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">head element.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.193.1">Note that the title and description defined in </span><strong class="source-inline"><span class="koboSpan" id="kobo.194.1">root.tsx</span></strong><span class="koboSpan" id="kobo.195.1"> are overridden by the nested </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.197.1"> export.</span></span></p></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.198.1">Use the meta export in nested route modules to override parent meta tags</span></p>
<p class="callout"><span class="koboSpan" id="kobo.199.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">meta</span></strong><span class="koboSpan" id="kobo.201.1"> route module export lets us define meta tags at any level in the route hierarchy. </span><span class="koboSpan" id="kobo.201.2">Remix uses the closest </span><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">meta</span></strong><span class="koboSpan" id="kobo.203.1"> function return values and adds them to the head of the document by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">Meta</span></strong><span class="koboSpan" id="kobo.205.1"> component. </span><span class="koboSpan" id="kobo.205.2">Nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">meta</span></strong><span class="koboSpan" id="kobo.207.1"> exports replace parent </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.209.1"> exports.</span></span></p>
<p><span class="koboSpan" id="kobo.210.1">Remix initially renders on the server. </span><span class="koboSpan" id="kobo.210.2">The rendered document includes all declared meta tags and ensures that crawlers can inspect all meta tags without the need to execute client-side JavaScript. </span><span class="koboSpan" id="kobo.210.3">This is great </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">for SEO.</span></span></p>
<p><span class="koboSpan" id="kobo.212.1">Often, the content of the meta tags depends on dynamic data. </span><span class="koboSpan" id="kobo.212.2">For example, you may want to use the title and summary of an article for the title and description meta tags. </span><span class="koboSpan" id="kobo.212.3">Let’s see how we can access loader data in </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.214.1"> functions.</span></span></p>
<h2 id="_idParaDest-147"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.215.1">Using loader data in meta functions</span></h2>
<p><span class="koboSpan" id="kobo.216.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">meta</span></strong><span class="koboSpan" id="kobo.218.1"> function</span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.219.1"> runs both on the client and the server. </span><span class="koboSpan" id="kobo.219.2">On initial render, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">meta</span></strong><span class="koboSpan" id="kobo.221.1"> function is called during server-side rendering. </span><span class="koboSpan" id="kobo.221.2">For all subsequent client-side navigations, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.222.1">meta</span></strong><span class="koboSpan" id="kobo.223.1"> function is executed on the client after the loader data has been fetched from the server. </span><span class="koboSpan" id="kobo.223.2">In both cases, Remix passes the route’s loader data and a hash map of all parent loader data to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.225.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.226.1">In this section, we will add the current user’s name to the title of the BeeRich dashboard and explore how we can take advantage of loader data in </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.228.1"> functions:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.229.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.231.1"> route module in </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">your editor.</span></span></li>
<li><span class="koboSpan" id="kobo.233.1">Update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">loader</span></strong><span class="koboSpan" id="kobo.235.1"> function in </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.237.1"> to return the current </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">user's name.</span></span><pre class="source-code"><span class="koboSpan" id="kobo.239.1">
import { </span><strong class="bold"><span class="koboSpan" id="kobo.240.1">getUser</span></strong><span class="koboSpan" id="kobo.241.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">logout</span></strong><span class="koboSpan" id="kobo.243.1"> } from '~/modules/session/session.server';export async function loader({ request }: LoaderFunctionArgs) {  </span><strong class="bold"><span class="koboSpan" id="kobo.244.1">const user = await getUser(request);</span></strong><span class="koboSpan" id="kobo.245.1">  </span><strong class="bold"><span class="koboSpan" id="kobo.246.1">if (!user) return logout(request);</span></strong><span class="koboSpan" id="kobo.247.1">  const expenseQuery = db.expense.findFirst({    orderBy: { createdAt: 'desc' },    where: { userId: </span><strong class="bold"><span class="koboSpan" id="kobo.248.1">user.id</span></strong><span class="koboSpan" id="kobo.249.1"> },  });  const invoiceQuery = db.invoice.findFirst({    orderBy: { createdAt: 'desc' },    where: { userId: </span><strong class="bold"><span class="koboSpan" id="kobo.250.1">user.id</span></strong><span class="koboSpan" id="kobo.251.1"> },  });  const [firstExpense, firstInvoice] = await Promise.all([expenseQuery, invoiceQuery]);  return json({ firstExpense, firstInvoice, </span><strong class="bold"><span class="koboSpan" id="kobo.252.1">username: user.name</span></strong><span class="koboSpan" id="kobo.253.1"> });}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.254.1">Previously, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">requireUserId</span></strong><span class="koboSpan" id="kobo.256.1"> helper function was used to get </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">userId</span></strong><span class="koboSpan" id="kobo.258.1"> from the </span><a id="_idIndexMarker386"/><span class="koboSpan" id="kobo.259.1">session cookie and authenticate </span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">the user.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.261.1">Now, we replace the usage of </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">requireUserId</span></strong><span class="koboSpan" id="kobo.263.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">getUser</span></strong><span class="koboSpan" id="kobo.265.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">logout</span></strong><span class="koboSpan" id="kobo.267.1">. </span><span class="koboSpan" id="kobo.267.2">We use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">getUser</span></strong><span class="koboSpan" id="kobo.269.1"> helper functions to query for the user object. </span><span class="koboSpan" id="kobo.269.2">We then check whether the user object exists; otherwise, we call </span><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">logout</span></strong><span class="koboSpan" id="kobo.271.1"> to clear the session. </span><span class="koboSpan" id="kobo.271.2">Finally, we return the user name as part of the </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">loader data.</span></span></p></li> <li><span class="koboSpan" id="kobo.273.1">Next, add</span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.274.1"> the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">meta</span></strong><span class="koboSpan" id="kobo.276.1"> function export to the </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">route module:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.278.1">
import type { LoaderFunctionArgs, </span><strong class="bold"><span class="koboSpan" id="kobo.279.1">MetaFunction</span></strong><span class="koboSpan" id="kobo.280.1">, SerializeFrom } from '@remix-run/node';export const meta: </span><strong class="bold"><span class="koboSpan" id="kobo.281.1">MetaFunction&lt;typeof loader&gt;</span></strong><span class="koboSpan" id="kobo.282.1"> = (</span><strong class="bold"><span class="koboSpan" id="kobo.283.1">{ data }</span></strong><span class="koboSpan" id="kobo.284.1">) =&gt; {  </span><strong class="bold"><span class="koboSpan" id="kobo.285.1">const title = data?.username ? </span><span class="koboSpan" id="kobo.285.2">`${data.username}'s Dashboard | BeeRich` : 'Dashboard | BeeRich';</span></strong><span class="koboSpan" id="kobo.286.1">  return [{ title }, { name: 'robots', content: 'noindex' }];};</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.287.1">We access the route’s loader data using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">data</span></strong><span class="koboSpan" id="kobo.289.1"> property. </span><span class="koboSpan" id="kobo.289.2">Then, we read the </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">username</span></strong><span class="koboSpan" id="kobo.291.1"> property to dynamically create a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">title</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.293.1"> tag.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.294.1">We also set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">robots</span></strong><span class="koboSpan" id="kobo.296.1"> meta tag to </span><strong class="source-inline"><span class="koboSpan" id="kobo.297.1">noindex</span></strong><span class="koboSpan" id="kobo.298.1"> as the dashboard is hidden behind a login page. </span><span class="koboSpan" id="kobo.298.2">Web crawlers should not attempt to index our dashboard pages. </span><span class="koboSpan" id="kobo.298.3">All nested routes will inherit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">noindex</span></strong><span class="koboSpan" id="kobo.300.1"> value if they don’t export a </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">meta</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.302.1">function themselves.</span></span></p></li> </ol>
<p><span class="koboSpan" id="kobo.303.1">Great! </span><span class="koboSpan" id="kobo.303.2">Just like that, we can use dynamic data to create metatags. </span><span class="koboSpan" id="kobo.303.3">However, one question remains: Why do we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">?</span></strong><span class="koboSpan" id="kobo.305.1"> operator to check whether the (loader) </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">data</span></strong><span class="koboSpan" id="kobo.307.1"> property is defined before </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">accessing </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.309.1">username</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">?</span></span></p>
<p><span class="koboSpan" id="kobo.311.1">Note that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">meta</span></strong><span class="koboSpan" id="kobo.313.1"> function is also executed if an error occurs. </span><span class="koboSpan" id="kobo.313.2">This ensures our meta tags are added even when an error boundary is rendered. </span><span class="koboSpan" id="kobo.313.3">If we render an error boundary, then the loader data won’t be available. </span><span class="koboSpan" id="kobo.313.4">Conclusively, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">meta</span></strong><span class="koboSpan" id="kobo.315.1">, we must always check whether the </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">data</span></strong><span class="koboSpan" id="kobo.317.1"> property is defined before accessing </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">its properties.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.319.1">Meta functions run on the client, the server, and on error</span></p>
<p class="callout"><span class="koboSpan" id="kobo.320.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">meta</span></strong><span class="koboSpan" id="kobo.322.1"> function runs even if the route’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">loader</span></strong><span class="koboSpan" id="kobo.324.1"> function throws an error. </span><span class="koboSpan" id="kobo.324.2">Hence, it is important to check whether the expected loader data exists before accessing it. </span><span class="koboSpan" id="kobo.324.3">Additionally, we must ensure that our </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">meta</span></strong><span class="koboSpan" id="kobo.326.1"> functions can be safely executed on both the client and the server since they run in both environments. </span><span class="koboSpan" id="kobo.326.2">Any server-side logic must be executed in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">loader</span></strong><span class="koboSpan" id="kobo.328.1"> functions (on the server), and any required data should be forwarded to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">meta</span></strong><span class="koboSpan" id="kobo.330.1"> function via </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">loader data.</span></span></p>
<p><span class="koboSpan" id="kobo.332.1">Web crawlers </span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.333.1">use meta tags to understand the content of your page. </span><span class="koboSpan" id="kobo.333.2">Remix’s declarative approach to managing meta tags in nested route modules ensures the co-location of meta tags and the related loader data. </span><span class="koboSpan" id="kobo.333.3">However, sometimes, we can avoid refetching data if that data has already been fetched in another active </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">loader</span></strong><span class="koboSpan" id="kobo.335.1">. </span><span class="koboSpan" id="kobo.335.2">Let’s see what that </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">looks like.</span></span></p>
<h2 id="_idParaDest-148"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.337.1">Using matches data in meta functions</span></h2>
<p><span class="koboSpan" id="kobo.338.1">In Remix, </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">meta</span></strong><span class="koboSpan" id="kobo.340.1"> functions</span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.341.1"> are executed after all loaders have run. </span><span class="koboSpan" id="kobo.341.2">This means we have access to all currently active loader data. </span><span class="koboSpan" id="kobo.341.3">In this section, we’ll learn about Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">matches</span></strong><span class="koboSpan" id="kobo.343.1"> array and how to access the loader data of other routes </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.347.1">Remember that we already fetch the user data in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">root.tsx</span></strong> <span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.349.1">loader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.350.1"> function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.351.1">
export async function loader({ request }: LoaderFunctionArgs) {  const user = await getUser(request);
  return { user };
}</span></pre>
<p><span class="koboSpan" id="kobo.352.1">There is no need to refetch the user object in </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.354.1"> . </span><span class="koboSpan" id="kobo.354.2">We can optimize our code and access the user object from the root loader data. </span><span class="koboSpan" id="kobo.354.3">This way, we avoid querying the database again in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.356.1"> route module’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">loader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.358.1"> function:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.359.1">First, import the root </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">loader</span></strong><span class="koboSpan" id="kobo.361.1"> function from </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">root.tsx</span></strong><span class="koboSpan" id="kobo.363.1"> as a </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">type import:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.365.1">
import type { loader as rootLoader } from '~/root';</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.366.1">We import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">loader</span></strong><span class="koboSpan" id="kobo.368.1"> function as a type import as we only use it for type inference. </span><span class="koboSpan" id="kobo.368.2">Note that we must rename the </span><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">loader</span></strong><span class="koboSpan" id="kobo.370.1"> import to </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">rootLoader</span></strong><span class="koboSpan" id="kobo.372.1"> to avoid a naming collision with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.374.1"> route module’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">loader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.376.1"> function.</span></span></p></li> <li><span class="koboSpan" id="kobo.377.1">Next, update the meta function in </span><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.379.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.381.1">
export const meta: MetaFunction&lt;typeof loader, </span><strong class="bold"><span class="koboSpan" id="kobo.382.1">{ root: typeof rootLoader }</span></strong><span class="koboSpan" id="kobo.383.1">&gt; = ({ matches }) =&gt; {  </span><strong class="bold"><span class="koboSpan" id="kobo.384.1">const root = matches.find((match) =&gt; match.id === 'root');</span></strong><span class="koboSpan" id="kobo.385.1">  </span><strong class="bold"><span class="koboSpan" id="kobo.386.1">const userName = root?.data?.user?.name || null;</span></strong><span class="koboSpan" id="kobo.387.1">  const title = userName ? </span><span class="koboSpan" id="kobo.387.2">`${userName}'s Dashboard | BeeRich` : 'Dashboard | BeeRich';  return [{ title }, { name: 'robots', content: 'noindex' }];};</span></pre><p class="list-inset"><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">MetaFunction</span></strong><span class="koboSpan" id="kobo.389.1"> supports a second generic type parameter that can be used to type the </span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.390.1">loader data of </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">other routes.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.392.1">We pass the following type </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">MetaFunction</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.396.1">{ root: typeof rootLoader }</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.397.1">We specify that a route exists with </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">root</span></strong><span class="koboSpan" id="kobo.399.1"> as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">id</span></strong><span class="koboSpan" id="kobo.401.1"> parameter, of which the loader data is of the type returned by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">rootLoader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.403.1"> function.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.404.1">Next, we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">matches</span></strong><span class="koboSpan" id="kobo.406.1"> parameter to find the matching route with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">id</span></strong><span class="koboSpan" id="kobo.408.1"> parameter of </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">root</span></strong><span class="koboSpan" id="kobo.410.1"> and retrieve its (loader) data. </span><span class="koboSpan" id="kobo.410.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.411.1">matches</span></strong><span class="koboSpan" id="kobo.412.1"> array contains a list of route objects that currently match the URL and are active on </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">the page.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.414.1">Remix assigns every route module a unique identifier. </span><span class="koboSpan" id="kobo.414.2">These identifiers are based on the route module filenames, but the easiest way to identify a route module identifier is by logging the matches array </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">during development.</span></span></p></li> <li><span class="koboSpan" id="kobo.416.1">Now that we’re using the loader data of another matching route, revert the changes to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.418.1"> route module’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">loader</span></strong><span class="koboSpan" id="kobo.420.1"> function. </span><span class="koboSpan" id="kobo.420.2">Replace the </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">getUser</span></strong><span class="koboSpan" id="kobo.422.1"> function call with </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">requireUserId</span></strong><span class="koboSpan" id="kobo.424.1">. </span><span class="koboSpan" id="kobo.424.2">This avoids a database query and optimizes our code. </span><span class="koboSpan" id="kobo.424.3">Finally, remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">username</span></strong><span class="koboSpan" id="kobo.426.1"> parameter that we added </span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.427.1">to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">loader</span></strong><span class="koboSpan" id="kobo.429.1"> function </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">return object.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.431.1">In this section, you learned how to type and work with Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">matches</span></strong><span class="koboSpan" id="kobo.433.1"> array and how to access the loader data of other routes in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">meta</span></strong><span class="koboSpan" id="kobo.435.1"> function. </span><span class="koboSpan" id="kobo.435.2">Next, let’s learn about handling static assets </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">in Remix.</span></span></p>
<h1 id="_idParaDest-149"><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.437.1">Handling fonts, images, stylesheets, and other assets</span></h1>
<p><span class="koboSpan" id="kobo.438.1">Fonts, images, and stylesheets are examples of static assets that need to be efficiently managed </span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.439.1">when building for </span><a id="_idIndexMarker393"/><span class="koboSpan" id="kobo.440.1">the web. </span><span class="koboSpan" id="kobo.440.2">To ensure a fast user experience, it is</span><a id="_idIndexMarker394"/><span class="koboSpan" id="kobo.441.1"> necessary to optimize, minimize, and cache</span><a id="_idIndexMarker395"/><span class="koboSpan" id="kobo.442.1"> these assets. </span><span class="koboSpan" id="kobo.442.2">Proper management of static assets can significantly improve page load times and enhance the overall user experience. </span><span class="koboSpan" id="kobo.442.3">In this section, you will learn how to access and manage static assets in Remix. </span><span class="koboSpan" id="kobo.442.4">Let’s start by reviewing how to access a simple static file </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">in Remix.</span></span></p>
<h2 id="_idParaDest-150"><a id="_idTextAnchor147"/><span class="koboSpan" id="kobo.444.1">Working with static assets</span></h2>
<p><span class="koboSpan" id="kobo.445.1">We can </span><a id="_idIndexMarker396"/><span class="koboSpan" id="kobo.446.1">host static assets on our web server so that our client application can access them. </span><span class="koboSpan" id="kobo.446.2">As we learned previously, Remix is not a web server but an HTTP request handler. </span><span class="koboSpan" id="kobo.446.3">As such, Remix does not offer a built-in way to serve static assets. </span><span class="koboSpan" id="kobo.446.4">It’s the underlying web server’s responsibility to set up access for </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1">public assets.</span></span></p>
<p><span class="koboSpan" id="kobo.448.1">Luckily, Remix’s starter templates follow the common pattern of offering a </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">public</span></strong><span class="koboSpan" id="kobo.450.1"> folder to expose static assets over the web and come with the required boilerplate code to do so. </span><span class="koboSpan" id="kobo.450.2">For instance, BeeRich – which was bootstrapped via the </span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">create-remix</span></strong><span class="koboSpan" id="kobo.452.1"> CLI tool using the Express.js adapter – contains a bootstrapped </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">server.js</span></strong><span class="koboSpan" id="kobo.454.1"> file that sets up Express.js to serve </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">static assets:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.456.1">
app.use(express.static('public', { maxAge: '1h' }));</span></pre> <p><span class="koboSpan" id="kobo.457.1">So far, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.458.1">public</span></strong><span class="koboSpan" id="kobo.459.1"> folder of the BeeRich application contains a </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">favicon.ico</span></strong><span class="koboSpan" id="kobo.461.1"> file, which</span><a id="_idIndexMarker397"/><span class="koboSpan" id="kobo.462.1"> serves as the favicon of our site. </span><span class="koboSpan" id="kobo.462.2">Let’s also add a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">robots.txt</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.464.1"> file:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.465.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">robots.txt</span></strong><span class="koboSpan" id="kobo.467.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">/public</span></strong><span class="koboSpan" id="kobo.469.1"> folder and add </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">this content:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.471.1">
User-agent: *Disallow: /dashboard/Allow: /loginAllow: /signupAllow: /$</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.472.1">Web crawlers request the </span><strong class="source-inline"><span class="koboSpan" id="kobo.473.1">/robots.txt</span></strong><span class="koboSpan" id="kobo.474.1"> file from your web server to find directives for which content to crawl on </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">your site.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.476.1">We specify that web crawlers are allowed to crawl the login, signup, and index pages of our application. </span><span class="koboSpan" id="kobo.476.2">However, since the dashboard is behind a login page, we prevent crawlers from attempting to crawl any of our </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">dashboard pages.</span></span></p></li> <li><span class="koboSpan" id="kobo.478.1">Now, run BeeRich with </span><strong class="source-inline"><span class="koboSpan" id="kobo.479.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">run dev</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.482.1">Visit </span><a href="http://localhost:3000/robots.txt"><span class="koboSpan" id="kobo.483.1">http://localhost:3000/robots.txt</span></a><span class="koboSpan" id="kobo.484.1"> in your browser. </span><span class="koboSpan" id="kobo.484.2">You should now see the content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">robots.txt</span></strong><span class="koboSpan" id="kobo.486.1"> text file displayed in </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">your browser.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.488.1">We use the underlying web server to serve the static contents of our Remix app. </span><span class="koboSpan" id="kobo.488.2">Similarly, we can expose fonts, images, stylesheets, third-party scripts, and any other static assets by simply placing them as files in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">public</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.490.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.491.1">Note that some assets, such as images, should be optimized before you access them from the browser. </span><span class="koboSpan" id="kobo.491.2">Usually, images and other big assets are better off hosted and optimized in dedicated services such as CDNs and static </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">file storage.</span></span></p>
<p><span class="koboSpan" id="kobo.493.1">Third-party assets, such as third-party stylesheets and fonts, can also be referenced by using HTML link tags so that we don’t have to manage them ourselves in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">public</span></strong><span class="koboSpan" id="kobo.495.1"> folder. </span><span class="koboSpan" id="kobo.495.2">Let’s learn about exposing link tags </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">in Remix.</span></span></p>
<h2 id="_idParaDest-151"><a id="_idTextAnchor148"/><span class="koboSpan" id="kobo.497.1">Managing links in Remix</span></h2>
<p><span class="koboSpan" id="kobo.498.1">HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">link</span></strong><span class="koboSpan" id="kobo.500.1"> elements are </span><a id="_idIndexMarker398"/><span class="koboSpan" id="kobo.501.1">used to reference third-party resources such as stylesheets and fonts. </span><span class="koboSpan" id="kobo.501.2">In Remix, links can be declared via the </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">links</span></strong><span class="koboSpan" id="kobo.503.1"> route module export. </span></p>
<p><span class="koboSpan" id="kobo.504.1">Remix offers a </span><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">Links</span></strong><span class="koboSpan" id="kobo.506.1"> component to inject all </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">links</span></strong><span class="koboSpan" id="kobo.508.1"> return values into the head of the HTML document. </span><span class="koboSpan" id="kobo.508.2">You may have already noticed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">Links</span></strong><span class="koboSpan" id="kobo.510.1"> component previously when inspecting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.511.1">Document</span></strong><span class="koboSpan" id="kobo.512.1"> component </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">root.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.515.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.516.1">
&lt;head&gt;  &lt;Meta /&gt;
</span><strong class="bold"><span class="koboSpan" id="kobo.517.1">  &lt;Links /&gt;</span></strong><span class="koboSpan" id="kobo.518.1">
&lt;/head&gt;</span></pre>
<p><span class="koboSpan" id="kobo.519.1">So far, we only have one </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">links</span></strong><span class="koboSpan" id="kobo.521.1"> export in BeeRich in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">root.tsx</span></strong><span class="koboSpan" id="kobo.523.1"> route module to link to our global Tailwind </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">CSS stylesheet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.525.1">
import </span><strong class="bold"><span class="koboSpan" id="kobo.526.1">tailwindCSS</span></strong><span class="koboSpan" id="kobo.527.1"> from './styles/tailwind.css';export const links: LinksFunction = () =&gt; [{ rel: 'stylesheet', href: </span><strong class="bold"><span class="koboSpan" id="kobo.528.1">tailwindCSS</span></strong><span class="koboSpan" id="kobo.529.1"> }];</span></pre>
<p><span class="koboSpan" id="kobo.530.1">Let’s add a font from Google Fonts to practice working with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">links</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.532.1"> export:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.533.1">Visit </span><a href="https://fonts.google.com/specimen/Ubuntu"><span class="koboSpan" id="kobo.534.1">https://fonts.google.com/specimen/Ubuntu</span></a><span class="koboSpan" id="kobo.535.1"> to inspect the </span><strong class="bold"><span class="koboSpan" id="kobo.536.1">Ubuntu</span></strong><span class="koboSpan" id="kobo.537.1"> font that we want to use. </span><span class="koboSpan" id="kobo.537.2">Google Fonts lists the required link tags that we need to add to </span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">our application.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.539.1">Copy the link tags from </span><a href="https://fonts.google.com/"><span class="koboSpan" id="kobo.540.1">fonts.google.com</span></a><span class="koboSpan" id="kobo.541.1"> and update the return value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">links</span></strong><span class="koboSpan" id="kobo.543.1"> function </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">root.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.547.1">
export const links: LinksFunction = () =&gt; [  { rel: 'stylesheet', href: tailwindCSS },</span><strong class="bold"><span class="koboSpan" id="kobo.548.1">  { rel: 'preconnect', href: 'https://fonts.googleapis.com' },</span></strong><strong class="bold"><span class="koboSpan" id="kobo.549.1">  { rel: 'preconnect', href: 'https://fonts.gstatic.com', crossOrigin: 'anonymous' },</span></strong><strong class="bold"><span class="koboSpan" id="kobo.550.1">  {</span></strong><strong class="bold"><span class="koboSpan" id="kobo.551.1">    rel: 'stylesheet',</span></strong><strong class="bold"><span class="koboSpan" id="kobo.552.1">    href: 'https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&amp;display=swap',</span></strong><strong class="bold"><span class="koboSpan" id="kobo.553.1">  },</span></strong><span class="koboSpan" id="kobo.554.1">];</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.555.1">Google Fonts</span><a id="_idIndexMarker399"/><span class="koboSpan" id="kobo.556.1"> specifies three links that we need to add to our </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">links</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.558.1"> function.</span></span></p></li> <li><span class="koboSpan" id="kobo.559.1">Next, update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.560.1">`tailwind.config.ts`</span></strong><span class="koboSpan" id="kobo.561.1"> file in the project’s root to make </span><strong class="bold"><span class="koboSpan" id="kobo.562.1">Ubuntu</span></strong><span class="koboSpan" id="kobo.563.1"> the default sans </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">serif font:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.565.1">import defaultTheme from 'tailwindcss/defaultTheme';</span></strong><span class="koboSpan" id="kobo.566.1">export default {  content: ['./app/**/*.{ts,tsx,jsx,js}'],  darkMode: 'media', // or 'media' or 'class'  theme: {    extend: {      colors: {        …      },</span><strong class="bold"><span class="koboSpan" id="kobo.567.1">      fontFamily: {</span></strong><strong class="bold"><span class="koboSpan" id="kobo.568.1">        sans: ['Ubuntu', ...defaultTheme.fontFamily.sans],</span></strong><strong class="bold"><span class="koboSpan" id="kobo.569.1">      },</span></strong><span class="koboSpan" id="kobo.570.1">    },  },  plugins: [],} satisfies Config;</span></pre></li> <li><span class="koboSpan" id="kobo.571.1">Next, run </span><a id="_idIndexMarker400"/><span class="koboSpan" id="kobo.572.1">BeeRich locally by executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">npm run dev</span></strong><span class="koboSpan" id="kobo.574.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">your terminal.</span></span></li>
<li><span class="koboSpan" id="kobo.576.1">Open BeeRich in a browser window. </span><span class="koboSpan" id="kobo.576.2">The new font should now be applied to all text on </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">the page.</span></span></li>
<li><span class="koboSpan" id="kobo.578.1">Open the developer tools to inspect the application’s </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">network activity.</span></span></li>
<li><span class="koboSpan" id="kobo.580.1">Refresh the page to reset the displayed activities on the </span><strong class="bold"><span class="koboSpan" id="kobo.581.1">Network</span></strong><span class="koboSpan" id="kobo.582.1"> tab and review the </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">displayed results:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer039">
<span class="koboSpan" id="kobo.584.1"><img alt="Figure 9.1 – Screenshot of the Network tab downloading a Google font" src="image/Figure_9.01_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.585.1">Figure 9.1 – Screenshot of the Network tab downloading a Google font</span></p>
<p><span class="koboSpan" id="kobo.586.1">As </span><a id="_idIndexMarker401"/><span class="koboSpan" id="kobo.587.1">visible in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.588.1">Figure 9</span></em></span><em class="italic"><span class="koboSpan" id="kobo.589.1">.1</span></em><span class="koboSpan" id="kobo.590.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">links</span></strong><span class="koboSpan" id="kobo.592.1"> export works as expected. </span><span class="koboSpan" id="kobo.592.2">We make a request for our global Tailwind CSS stylesheet and a request to </span><a href="http://fonts.googleapis.com/css2"><span class="koboSpan" id="kobo.593.1">fonts.googleapis.com/css2</span></a><span class="koboSpan" id="kobo.594.1">. </span><span class="koboSpan" id="kobo.594.2">The request to </span><a href="http://fonts.googleapis"><span class="koboSpan" id="kobo.595.1">fonts.googleapis</span></a><span class="koboSpan" id="kobo.596.1"> then triggers the download of the required </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">font assets.</span></span></p>
<p><span class="koboSpan" id="kobo.598.1">Just like that, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.599.1">links</span></strong><span class="koboSpan" id="kobo.600.1"> export lets us declare external resources declaratively within our nested </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">route hierarchy.</span></span></p>
<p><span class="koboSpan" id="kobo.602.1">In BeeRich, we use one global Tailwind CSS stylesheet for our application. </span><span class="koboSpan" id="kobo.602.2">However, Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">links</span></strong><span class="koboSpan" id="kobo.604.1"> exports also work well when managing route-specific stylesheets. </span><span class="koboSpan" id="kobo.604.2">Let’s see how we can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">links</span></strong><span class="koboSpan" id="kobo.606.1"> export for modular stylesheets </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">in Remix.</span></span></p>
<h2 id="_idParaDest-152"><a id="_idTextAnchor149"/><span class="koboSpan" id="kobo.608.1">Styling in Remix</span></h2>
<p><span class="koboSpan" id="kobo.609.1">Remix supports </span><a id="_idIndexMarker402"/><span class="koboSpan" id="kobo.610.1">any styling solution that exposes a stylesheet. </span><span class="koboSpan" id="kobo.610.2">This includes </span><a id="_idIndexMarker403"/><span class="koboSpan" id="kobo.611.1">popular choices such as PostCSS, Tailwind CSS, and vanilla-extract. </span><span class="koboSpan" id="kobo.611.2">Once we have a path to a stylesheet, we can reference it with a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">link</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.613.1"> element.</span></span></p>
<p><span class="koboSpan" id="kobo.614.1">In BeeRich, we use Tailwind CSS. </span><span class="koboSpan" id="kobo.614.2">Tailwind outputs one global stylesheet, which we can reference in a global link tag for our application. </span><span class="koboSpan" id="kobo.614.3">Remix also provides built-in support for compiling the Tailwind CSS stylesheet. </span><span class="koboSpan" id="kobo.614.4">You can read more about Remix’s Tailwind CSS integration </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">here: </span></span><a href="https://remix.run/docs/en/2/styling/tailwind"><span class="No-Break"><span class="koboSpan" id="kobo.616.1">https://remix.run/docs/en/2/styling/tailwind</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.617.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.618.1">Additionally, Remix offers support for working with modular CSS solutions. </span><span class="koboSpan" id="kobo.618.2">Let’s review how </span><span class="No-Break"><span class="koboSpan" id="kobo.619.1">that works.</span></span></p>
<h3><span class="koboSpan" id="kobo.620.1">Route-scoped stylesheets</span></h3>
<p><span class="koboSpan" id="kobo.621.1">Let’s</span><a id="_idIndexMarker404"/><span class="koboSpan" id="kobo.622.1"> experiment with nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">links</span></strong><span class="koboSpan" id="kobo.624.1"> exports by creating a scoped CSS stylesheet for our </span><span class="No-Break"><span class="koboSpan" id="kobo.625.1">login page:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.626.1">Create a stylesheet called </span><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">login.css</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.628.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">app/styles</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.630.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.631.1">Add the following content to </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">the file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.633.1">
* {  background-color: beige;}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.634.1">We use this global CSS rule as an example for some custom styling that we only want to apply to the login route. </span><span class="koboSpan" id="kobo.634.2">Other routes, such as the signup route, should be unaffected by </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">this CSS.</span></span></p></li> <li><span class="koboSpan" id="kobo.636.1">Import the stylesheet in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">_layout.login.tsx</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.638.1">route module:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.639.1">
import loginCSS from '~/styles/login.css';</span></pre></li> <li><span class="koboSpan" id="kobo.640.1">Create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.641.1">links</span></strong><span class="koboSpan" id="kobo.642.1"> export and add the content of the stylesheet import </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">to it:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.644.1">
import type { ActionFunctionArgs, </span><strong class="bold"><span class="koboSpan" id="kobo.645.1">LinksFunction</span></strong><span class="koboSpan" id="kobo.646.1">, LoaderFunctionArgs, MetaFunction } from '@remix-run/node';export const links: LinksFunction = () =&gt; [{ rel: 'stylesheet', href: loginCSS }];</span></pre></li> <li><span class="koboSpan" id="kobo.647.1">Run BeeRich locally by executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">run dev</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.650.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.651.1">Visit the login route in a browser window and open the </span><strong class="bold"><span class="koboSpan" id="kobo.652.1">Network</span></strong><span class="koboSpan" id="kobo.653.1"> tab of the developer tools to inspect what’s going </span><span class="No-Break"><span class="koboSpan" id="kobo.654.1">on (</span></span><a href="http://localhost:3000/login"><span class="No-Break"><span class="koboSpan" id="kobo.655.1">http://localhost:3000/login</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.656.1">).</span></span><p class="list-inset"><span class="koboSpan" id="kobo.657.1">Make </span><a id="_idIndexMarker405"/><span class="koboSpan" id="kobo.658.1">sure you log out first before visiting the login route as you will be redirected </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">away otherwise.</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer040">
<span class="koboSpan" id="kobo.660.1"><img alt="Figure 9.2 – Loading a nested stylesheet for the login route" src="image/Figure_9.02_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.661.1">Figure 9.2 – Loading a nested stylesheet for the login route</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.662.1">Notice that the nested stylesheet loads in parallel with our global linked resources. </span><span class="koboSpan" id="kobo.662.2">Remix merges the return values of all </span><strong class="source-inline"><span class="koboSpan" id="kobo.663.1">links</span></strong><span class="koboSpan" id="kobo.664.1"> functions together and uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">Links</span></strong><span class="koboSpan" id="kobo.666.1"> component to inject the content into the head of the </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">HTML document.</span></span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.668.1">Our login page now has the questionable appearance we wanted. </span><span class="koboSpan" id="kobo.668.2">But what happens if we navigate to </span><span class="No-Break"><span class="koboSpan" id="kobo.669.1">another URL?</span></span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.670.1">Click the </span><strong class="bold"><span class="koboSpan" id="kobo.671.1">Sign up</span></strong><span class="koboSpan" id="kobo.672.1"> button in the top-right corner to trigger a client-side transition away from the </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">login route.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.674.1">Notice that the beige background </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">color disappears.</span></span></p></li>
</ol>
<p><span class="koboSpan" id="kobo.676.1">For nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.677.1">links</span></strong><span class="koboSpan" id="kobo.678.1"> exports, Remix unmounts all resources once we leave the associated route. </span><span class="koboSpan" id="kobo.678.2">This is particularly useful when working with nested stylesheets. </span><span class="koboSpan" id="kobo.678.3">Remix makes it easy to scope stylesheets to a specific nested route or subset </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">of routes.</span></span></p>
<p><span class="koboSpan" id="kobo.680.1">Since Remix knows of all </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">links</span></strong><span class="koboSpan" id="kobo.682.1"> exports, it can also prefetch linked resources when using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">Link</span></strong><span class="koboSpan" id="kobo.684.1"> export’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">prefetch</span></strong><span class="koboSpan" id="kobo.686.1"> property, which we will review in the </span><span class="No-Break"><span class="koboSpan" id="kobo.687.1">next section.</span></span></p>
<h3><span class="koboSpan" id="kobo.688.1">Prefetching linked resources</span></h3>
<p><span class="koboSpan" id="kobo.689.1">Let’s </span><a id="_idIndexMarker406"/><span class="koboSpan" id="kobo.690.1">investigate how Remix prefetches </span><span class="No-Break"><span class="koboSpan" id="kobo.691.1">linked</span></span><span class="No-Break"><a id="_idIndexMarker407"/></span><span class="No-Break"><span class="koboSpan" id="kobo.692.1"> resources:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.693.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">_layout.tsx</span></strong><span class="koboSpan" id="kobo.695.1"> route module in </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">your editor.</span></span></li>
<li><span class="koboSpan" id="kobo.697.1">Add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">prefetch</span></strong><span class="koboSpan" id="kobo.699.1"> property to all </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">NavLink</span></strong><span class="koboSpan" id="kobo.701.1"> components rendered in the route’s component and set its value </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">"intent"</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.705.1">
&lt;NavLink to="/" </span><strong class="bold"><span class="koboSpan" id="kobo.706.1">prefetch="intent"</span></strong><span class="koboSpan" id="kobo.707.1">&gt;  Home&lt;/NavLink&gt;&lt;NavLink to="/dashboard" </span><strong class="bold"><span class="koboSpan" id="kobo.708.1">prefetch="intent"</span></strong><span class="koboSpan" id="kobo.709.1">&gt;  Dashboard&lt;/NavLink&gt;&lt;NavLink to="/login" </span><strong class="bold"><span class="koboSpan" id="kobo.710.1">prefetch="intent"</span></strong><span class="koboSpan" id="kobo.711.1">&gt;  Log in&lt;/NavLink&gt;&lt;NavLink to="/signup" </span><strong class="bold"><span class="koboSpan" id="kobo.712.1">prefetch="intent"</span></strong><span class="koboSpan" id="kobo.713.1">&gt;  Sign up&lt;/NavLink&gt;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.714.1">Note that we redacted other markup from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.715.1">_layout.tsx</span></strong><span class="koboSpan" id="kobo.716.1"> route module component </span><span class="No-Break"><span class="koboSpan" id="kobo.717.1">for readability.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.718.1">As discussed in </span><a href="B17399_06.xhtml#_idTextAnchor090"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.719.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.720.1">, </span><em class="italic"><span class="koboSpan" id="kobo.721.1">Enhancing the User Experience</span></em><span class="koboSpan" id="kobo.722.1">, we can add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">prefetch</span></strong><span class="koboSpan" id="kobo.724.1"> property to Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">Link</span></strong><span class="koboSpan" id="kobo.726.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.727.1">NavLink</span></strong><span class="koboSpan" id="kobo.728.1"> components to prefetch the content of the new matching route modules. </span><span class="koboSpan" id="kobo.728.2">Setting </span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1">prefetch</span></strong><span class="koboSpan" id="kobo.730.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">intent</span></strong><span class="koboSpan" id="kobo.732.1"> prefetches the content of all newly matching route modules on hover </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">or focus.</span></span></p></li> <li><span class="koboSpan" id="kobo.734.1">Now, visit the signup page in your browser </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">window (</span></span><a href="http://localhost:3000/signup"><span class="No-Break"><span class="koboSpan" id="kobo.736.1">http://localhost:3000/signup</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.737.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.738.1">Open the </span><strong class="bold"><span class="koboSpan" id="kobo.739.1">Network</span></strong><span class="koboSpan" id="kobo.740.1"> tab and clear any logged entries for </span><span class="No-Break"><span class="koboSpan" id="kobo.741.1">better visibility.</span></span></li>
<li><span class="koboSpan" id="kobo.742.1">Next, hover</span><a id="_idIndexMarker408"/><span class="koboSpan" id="kobo.743.1"> over or focus the </span><strong class="bold"><span class="koboSpan" id="kobo.744.1">Log in</span></strong><span class="koboSpan" id="kobo.745.1"> anchor</span><a id="_idIndexMarker409"/><span class="koboSpan" id="kobo.746.1"> tag in the navigation bar and inspect the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.747.1">Network</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.748.1"> tab:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer041">
<span class="koboSpan" id="kobo.749.1"><img alt="Figure 9.3 – Prefetching linked resources" src="image/Figure_9.03_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.750.1">Figure 9.3 – Prefetching linked resources</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.751.1">Notice that Remix prefetches linked resources together with the loader data and the login route JavaScript module. </span><span class="koboSpan" id="kobo.751.2">Based on the request waterfall, we can tell that Remix first fetches the loader data and JavaScript modules before prefetching the </span><span class="No-Break"><span class="koboSpan" id="kobo.752.1">linked resources.</span></span></p>
<p><span class="koboSpan" id="kobo.753.1">Remix must first fetch the new route’s loader data and JavaScript bundle to know what links to fetch. </span><span class="koboSpan" id="kobo.753.2">Once this information has been fetched, Remix prefetches all linked resources </span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">in parallel.</span></span></p>
<p><span class="koboSpan" id="kobo.755.1">Remix allows us to declare meta tags and links in nested route modules. </span><span class="koboSpan" id="kobo.755.2">When using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.756.1">links</span></strong><span class="koboSpan" id="kobo.757.1"> export, Remix enables us to prefetch linked resources together with the loader data and route’s JavaScript modules using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">prefetch</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.759.1"> property.</span></span></p>
<p><span class="koboSpan" id="kobo.760.1">Remix also unloads all external resources once the associated route has been unmounted during a transition. </span><span class="koboSpan" id="kobo.760.2">This ensures that scoped stylesheets and other resources do not affect </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">other routes.</span></span></p>
<p><span class="koboSpan" id="kobo.762.1">Next, let's go over some tips for working with images </span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">in Remix.</span></span></p>
<h2 id="_idParaDest-153"><a id="_idTextAnchor150"/><span class="koboSpan" id="kobo.764.1">Working with images in Remix</span></h2>
<p><span class="koboSpan" id="kobo.765.1">Following best </span><a id="_idIndexMarker410"/><span class="koboSpan" id="kobo.766.1">practices to deliver the most performant image to users is no simple task. </span><span class="koboSpan" id="kobo.766.2">We need to use web-friendly formats like webp, but also provide fallbacks for browsers that don't support them. </span><span class="koboSpan" id="kobo.766.3">On top of that, we have to offer different image sizes for various device screens. </span><span class="koboSpan" id="kobo.766.4">That's why using a specialized service for handling images is often a better choice than hosting them on your own </span><span class="No-Break"><span class="koboSpan" id="kobo.767.1">web server.</span></span></p>
<p><span class="koboSpan" id="kobo.768.1">Remix doesn't </span><a id="_idIndexMarker411"/><span class="koboSpan" id="kobo.769.1">have built-in tools or features specifically for handling images, unlike some other frameworks. </span><span class="koboSpan" id="kobo.769.2">You can put images in the public folder just like any other static files. </span><span class="koboSpan" id="kobo.769.3">But since images need to be optimized, it's often best to use a dedicated service to manage and </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">deliver them.</span></span></p>
<p><span class="koboSpan" id="kobo.771.1">While image optimization is not the focus of this book, it’s still an important consideration. </span><span class="koboSpan" id="kobo.771.2">To help you get started with image optimization in Remix, we recommend checking out the open source </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">unpic-img</span></strong><span class="koboSpan" id="kobo.773.1"> project. </span><strong class="source-inline"><span class="koboSpan" id="kobo.774.1">unpic-img</span></strong><span class="koboSpan" id="kobo.775.1"> provides a minimal React component that can be set up with several popular CDNs. </span><span class="koboSpan" id="kobo.775.2">Check out the project on GitHub at </span><a href="https://github.com/ascorbic/unpic-img"><span class="koboSpan" id="kobo.776.1">https://github.com/ascorbic/unpic-img</span></a><span class="koboSpan" id="kobo.777.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.778.1">get started.</span></span></p>
<p><span class="koboSpan" id="kobo.779.1">In this section, you learned how to expose static assets in Remix and how to work with link elements. </span><span class="koboSpan" id="kobo.779.2">You practiced using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.780.1">links</span></strong><span class="koboSpan" id="kobo.781.1"> function to declare external resources. </span><span class="koboSpan" id="kobo.781.2">We also experimented with nested stylesheets and discussed the importance of </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">image optimization.</span></span></p>
<p><span class="koboSpan" id="kobo.783.1">Remix also provides a way to serve assets via </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">loader</span></strong><span class="koboSpan" id="kobo.785.1"> functions in resource routes. </span><span class="koboSpan" id="kobo.785.2">In the next section, we will use our </span><strong class="source-inline"><span class="koboSpan" id="kobo.786.1">robots.txt</span></strong><span class="koboSpan" id="kobo.787.1"> file as an example of how to use resource routes and </span><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">loader</span></strong><span class="koboSpan" id="kobo.789.1"> functions to expose </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1">static assets.</span></span></p>
<h1 id="_idParaDest-154"><a id="_idTextAnchor151"/><span class="koboSpan" id="kobo.791.1">Exposing assets with loader functions</span></h1>
<p><span class="koboSpan" id="kobo.792.1">Earlier in </span><a id="_idIndexMarker412"/><span class="koboSpan" id="kobo.793.1">this chapter, we created a </span><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">robots.txt</span></strong><span class="koboSpan" id="kobo.795.1"> file and exposed it by placing it into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">public</span></strong><span class="koboSpan" id="kobo.797.1"> folder. </span><span class="koboSpan" id="kobo.797.2">However, we can also use </span><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">loader</span></strong><span class="koboSpan" id="kobo.799.1"> functions in resource routes to expose assets. </span><span class="koboSpan" id="kobo.799.2">This is particularly useful when we want to dynamically create these assets on the fly or manage user access. </span><span class="koboSpan" id="kobo.799.3">To get started, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.800.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.801.1">Delete the existing </span><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">robots.txt</span></strong><span class="koboSpan" id="kobo.803.1"> file from the public folder as it will override our API </span><span class="No-Break"><span class="koboSpan" id="kobo.804.1">route otherwise.</span></span></li>
<li><span class="koboSpan" id="kobo.805.1">Create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.806.1">robots[.txt].tsx</span></strong><span class="koboSpan" id="kobo.807.1"> file in the </span><span class="No-Break"><span class="koboSpan" id="kobo.808.1">routes folder.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.809.1">The square brackets let us escape parts of the route name. </span><span class="koboSpan" id="kobo.809.2">Instead of creating a </span><strong class="source-inline"><span class="koboSpan" id="kobo.810.1">.txt</span></strong><span class="koboSpan" id="kobo.811.1"> file, we create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.812.1">.tsx</span></strong><span class="koboSpan" id="kobo.813.1"> file but ensure that the route matches the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.814.1">robots.txt</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.815.1"> path.</span></span></p></li>
<li><span class="koboSpan" id="kobo.816.1">Add the </span><a id="_idIndexMarker413"/><span class="koboSpan" id="kobo.817.1">following content to the newly created </span><span class="No-Break"><span class="koboSpan" id="kobo.818.1">resource route:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.819.1">
const textContent = `User-agent: *Disallow: /dashboard/Allow: /loginAllow: /signupAllow: /$`;export function loader() {  return new Response(textContent, { headers: { 'Content-Type': 'text/plain' } });}</span></pre></li> </ol>
<p><span class="koboSpan" id="kobo.820.1">Remix lets us return any kind of HTTP response in </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">loader</span></strong><span class="koboSpan" id="kobo.822.1"> functions. </span><span class="koboSpan" id="kobo.822.2">Any route without a route component becomes a resource route that can receive HTTP GET requests. </span><span class="koboSpan" id="kobo.822.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">loader</span></strong><span class="koboSpan" id="kobo.824.1"> function in </span><strong class="source-inline"><span class="koboSpan" id="kobo.825.1">robots[.txt].tsx</span></strong><span class="koboSpan" id="kobo.826.1"> responds to incoming GET requests to </span><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">/robots.txt</span></strong><span class="koboSpan" id="kobo.828.1"> and returns a text file with the specified </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">text content.</span></span></p>
<p><span class="koboSpan" id="kobo.830.1">Resource routes and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.831.1">Response</span></strong><span class="koboSpan" id="kobo.832.1"> API are powerful tools that let us generate PDFs, images, text content, or JSON data on the fly. </span><span class="koboSpan" id="kobo.832.2">The bracket annotation (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.833.1">[.txt]</span></strong><span class="koboSpan" id="kobo.834.1">) is used to escape parts of the </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">route name.</span></span></p>
<p><span class="koboSpan" id="kobo.836.1">Using </span><strong class="source-inline"><span class="koboSpan" id="kobo.837.1">loader</span></strong><span class="koboSpan" id="kobo.838.1"> functions to generate assets allows us to run dynamic computations on incoming requests. </span><span class="koboSpan" id="kobo.838.2">For example, we can authenticate user sessions or dynamically generate the asset. </span><span class="koboSpan" id="kobo.838.3">Our </span><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">robots.txt</span></strong><span class="koboSpan" id="kobo.840.1"> file is currently static and does not require additional computations. </span><span class="koboSpan" id="kobo.840.2">In this case, it is sufficient to store the file in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.841.1">public</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.842.1"> folder.</span></span></p>
<h1 id="_idParaDest-155"><a id="_idTextAnchor152"/><span class="koboSpan" id="kobo.843.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.844.1">In this chapter, you learned how to handle static assets and meta tags </span><span class="No-Break"><span class="koboSpan" id="kobo.845.1">in Remix.</span></span></p>
<p><span class="koboSpan" id="kobo.846.1">First, we introduced you to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.847.1">meta</span></strong><span class="koboSpan" id="kobo.848.1"> route module export. </span><span class="koboSpan" id="kobo.848.2">You learned that Remix injects the </span><strong class="source-inline"><span class="koboSpan" id="kobo.849.1">meta</span></strong><span class="koboSpan" id="kobo.850.1"> function’s return value into the head of the HTML element by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.851.1">Meta</span></strong><span class="koboSpan" id="kobo.852.1"> component. </span><span class="koboSpan" id="kobo.852.2">Remix will always use the closest </span><strong class="source-inline"><span class="koboSpan" id="kobo.853.1">meta</span></strong><span class="koboSpan" id="kobo.854.1"> function export and ignore all other </span><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">meta</span></strong><span class="koboSpan" id="kobo.856.1"> function exports higher up in the </span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">route hierarchy.</span></span></p>
<p><span class="koboSpan" id="kobo.858.1">You also learned that Remix runs </span><strong class="source-inline"><span class="koboSpan" id="kobo.859.1">meta</span></strong><span class="koboSpan" id="kobo.860.1"> functions both on the client and server. </span><span class="koboSpan" id="kobo.860.2">Remix passes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.861.1">meta</span></strong><span class="koboSpan" id="kobo.862.1"> function, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.863.1">data</span></strong><span class="koboSpan" id="kobo.864.1"> property that can be used to access the route’s loader data. </span><span class="koboSpan" id="kobo.864.2">After following this chapter, you should understand that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.865.1">data</span></strong><span class="koboSpan" id="kobo.866.1"> property of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.867.1">meta</span></strong><span class="koboSpan" id="kobo.868.1"> function can potentially be undefined if a </span><strong class="source-inline"><span class="koboSpan" id="kobo.869.1">loader</span></strong><span class="koboSpan" id="kobo.870.1"> function throws an error. </span><span class="koboSpan" id="kobo.870.2">Hence, it is important to only conditionally access loader data in </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.871.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.872.1"> functions.</span></span></p>
<p><span class="koboSpan" id="kobo.873.1">You also practiced typing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.874.1">matches</span></strong><span class="koboSpan" id="kobo.875.1"> parameter and learned how to access other matching route data in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.876.1">meta</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.877.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.878.1">Next, you learned about handling static assets. </span><span class="koboSpan" id="kobo.878.2">You now understand that static assets are served by the underlying web server and not by Remix directly. </span><span class="koboSpan" id="kobo.878.3">Remix’s starter templates set up a </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">public</span></strong><span class="koboSpan" id="kobo.880.1"> folder and the necessary </span><span class="No-Break"><span class="koboSpan" id="kobo.881.1">server code.</span></span></p>
<p><span class="koboSpan" id="kobo.882.1">You also learned about the </span><strong class="source-inline"><span class="koboSpan" id="kobo.883.1">links</span></strong><span class="koboSpan" id="kobo.884.1"> route module export. </span><span class="koboSpan" id="kobo.884.2">You now know that Remix prefetches linked resources when using the prefetch property on </span><strong class="source-inline"><span class="koboSpan" id="kobo.885.1">Link</span></strong><span class="koboSpan" id="kobo.886.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.887.1">NavLink</span></strong><span class="koboSpan" id="kobo.888.1"> components. </span><span class="koboSpan" id="kobo.888.2">You also practiced creating route-scoped CSS stylesheets by declaring nested </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.889.1">links</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.890.1"> exports.</span></span></p>
<p><span class="koboSpan" id="kobo.891.1">After reading this chapter, you know the importance of image optimization and where you can get started. </span><span class="koboSpan" id="kobo.891.2">You understand that images must be optimized before being served. </span><span class="koboSpan" id="kobo.891.3">You also know that CDNs and other services can be used to handle image optimization </span><span class="No-Break"><span class="koboSpan" id="kobo.892.1">for us.</span></span></p>
<p><span class="koboSpan" id="kobo.893.1">Finally, you learned that you can use resource routes to serve static assets. </span><span class="koboSpan" id="kobo.893.2">We used the square bracket notation to escape sections of a route name (for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.894.1">[.txt]</span></strong><span class="koboSpan" id="kobo.895.1">). </span><span class="koboSpan" id="kobo.895.2">With that, we created a resource route that matches the </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">/robots.txt</span></strong><span class="koboSpan" id="kobo.897.1"> path and implemented a </span><strong class="source-inline"><span class="koboSpan" id="kobo.898.1">loader</span></strong><span class="koboSpan" id="kobo.899.1"> function that returns a text </span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">file response.</span></span></p>
<p><span class="koboSpan" id="kobo.901.1">In the next chapter, we will add file-uploading capabilities to BeeRich and use a resource route to manage user access to user files. </span><span class="koboSpan" id="kobo.901.2">This will conclude part two of this book and enable us to kick off advanced topics in </span><span class="No-Break"><span class="koboSpan" id="kobo.902.1">part three.</span></span></p>
<h1 id="_idParaDest-156"><a id="_idTextAnchor153"/><span class="koboSpan" id="kobo.903.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.904.1">You can find more information about meta tags in the MDN Web </span><span class="No-Break"><span class="koboSpan" id="kobo.905.1">Docs: </span></span><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta"><span class="No-Break"><span class="koboSpan" id="kobo.906.1">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.907.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.908.1">You can learn more about Remix’s route module meta export in the Remix </span><span class="No-Break"><span class="koboSpan" id="kobo.909.1">documentation: </span></span><a href="https://remix.run/docs/en/2.0.0/route/meta"><span class="No-Break"><span class="koboSpan" id="kobo.910.1">https://remix.run/docs/en/2.0.0/route/meta</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.911.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.912.1">You can read more about </span><strong class="source-inline"><span class="koboSpan" id="kobo.913.1">robots.txt</span></strong><span class="koboSpan" id="kobo.914.1"> files in the Google </span><span class="No-Break"><span class="koboSpan" id="kobo.915.1">documentation: </span></span><a href="https://developers.google.com/search/docs/crawling-indexing/robots/intro"><span class="No-Break"><span class="koboSpan" id="kobo.916.1">https://developers.google.com/search/docs/crawling-indexing/robots/intro</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.917.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.918.1">Review the MDN Web Docs if you want to learn more about link </span><span class="No-Break"><span class="koboSpan" id="kobo.919.1">tags: </span></span><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link"><span class="No-Break"><span class="koboSpan" id="kobo.920.1">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.921.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.922.1">You can find more information about handling styling in Remix in the Remix </span><span class="No-Break"><span class="koboSpan" id="kobo.923.1">documentation: </span></span><a href="https://remix.run/docs/en/2/styling/css"><span class="No-Break"><span class="koboSpan" id="kobo.924.1">https://remix.run/docs/en/2/styling/css</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.925.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.926.1">You can learn more about working with resource routes in the Remix </span><span class="No-Break"><span class="koboSpan" id="kobo.927.1">documentation: </span></span><a href="https://remix.run/docs/en/2/guides/resource-routes"><span class="No-Break"><span class="koboSpan" id="kobo.928.1">https://remix.run/docs/en/2/guides/resource-routes</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.929.1">.</span></span></p>
</div>
</body></html>