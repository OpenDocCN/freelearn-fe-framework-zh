<html><head></head><body>
<div id="_idContainer016">
<h1 class="chapter-number" id="_idParaDest-60"><a id="_idTextAnchor057"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-61"><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.2.1">Routing in Remix</span></h1>
<p class="author-quote"><span class="koboSpan" id="kobo.3.1">“Routing is possibly the most important concept to understand in Remix.”</span></p>
<p class="author-quote"><span class="koboSpan" id="kobo.4.1">– Remix documentation</span></p>
<p><span class="koboSpan" id="kobo.5.1">Michael Jackson and Ryan Florence spent years building React Router. </span><span class="koboSpan" id="kobo.5.2">It is not a surprise that routing plays an integral role in Remix. </span><span class="koboSpan" id="kobo.5.3">One core idea that Michael and Ryan brought over from React Router to Remix is nested routing. </span><span class="koboSpan" id="kobo.5.4">Nested routing is a powerful feature that enables the composition of </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">route components.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">In this chapter, you will learn about routing in Remix. </span><span class="koboSpan" id="kobo.7.2">We’ll cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.9.1">Working with Remix's route </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">module API</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Composing pages from </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">nested routes</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Using route parameters for </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">dynamic routing</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.15.1">Sharing layouts</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Handling navigations </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">in Remix</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.18.1">In this chapter, we will dive into nested routing and cover Remix’s route convention. </span><span class="koboSpan" id="kobo.18.2">We will start by creating standalone pages and reviewing Remix’s route module exports. </span><span class="koboSpan" id="kobo.18.3">Next, we will review nested, index, dynamic, and (pathless) layout routes. </span><span class="koboSpan" id="kobo.18.4">Finally, we will learn how to transition between routes and learn about the global </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">navigation object.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">By the end of this chapter, you will understand the core principles behind Remix’s routing solution. </span><span class="koboSpan" id="kobo.20.2">You will have practiced creating new route modules and know which exports Remix supports. </span><span class="koboSpan" id="kobo.20.3">You will understand the advantages of nested routing and layout routes. </span><span class="koboSpan" id="kobo.20.4">You will also practice how to work with route parameters. </span><span class="koboSpan" id="kobo.20.5">Finally, you will know how to work with Remix’s global </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">navigation object.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1">In this chapter, we will add a login and a signup page to the BeeRich application. </span><span class="koboSpan" id="kobo.22.2">We will further create a dashboard route with nested expenses and income child routes. </span><span class="koboSpan" id="kobo.22.3">Then, we will create a shared layout for the index, login, and signup pages. </span><span class="koboSpan" id="kobo.22.4">Finally, we will animate page transitions using the global navigation object. </span><span class="koboSpan" id="kobo.22.5">Let’s jump right into it and create our first routes </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">in Remix.</span></span></p>
<h1 id="_idParaDest-62"><a id="_idTextAnchor059"/><span class="koboSpan" id="kobo.24.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.25.1">In </span><a href="B17399_03.xhtml#_idTextAnchor043"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.26.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.27.1">, </span><em class="italic"><span class="koboSpan" id="kobo.28.1">Deployment Targets, Adapters, and Stacks</span></em><span class="koboSpan" id="kobo.29.1">, we set up the demo application for this book. </span><span class="koboSpan" id="kobo.29.2">If you haven’t already, make sure to follow the instructions of </span><a href="B17399_03.xhtml#_idTextAnchor043"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.30.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.31.1">, as we will continue working with BeeRich in </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.33.1">You can find the solution code and additional information to this chapter on </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">GitHub: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/04-routing-in-remix"><span class="No-Break"><span class="koboSpan" id="kobo.35.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/04-routing-in-remix</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.36.1">.</span></span></p>
<h1 id="_idParaDest-63"><a id="_idTextAnchor060"/><span class="koboSpan" id="kobo.37.1">Working with Remix's route module API</span></h1>
<p><span class="koboSpan" id="kobo.38.1">Remix takes</span><a id="_idIndexMarker102"/><span class="koboSpan" id="kobo.39.1"> on the responsibilities of a compiler, a runtime, and a router. </span><span class="koboSpan" id="kobo.39.2">In Remix, you create routes (route modules) as part of a hierarchy. </span><span class="koboSpan" id="kobo.39.3">Among</span><a id="_idIndexMarker103"/><span class="koboSpan" id="kobo.40.1"> other things, Remix’s router determines which route modules to match and render on </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">a request.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">This section will walk you through the creation of route modules in Remix. </span><span class="koboSpan" id="kobo.42.2">You will learn how to create standalone pages and understand how routes tie back to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.43.1">root.tsx</span></strong><span class="koboSpan" id="kobo.44.1"> file. </span><span class="koboSpan" id="kobo.44.2">You will further understand how index routes fit into the picture (or, I should say, on a screen). </span><span class="koboSpan" id="kobo.44.3">Finally, the section will introduce you to the different available exports that route modules </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">can expose.</span></span></p>
<h2 id="_idParaDest-64"><a id="_idTextAnchor061"/><span class="koboSpan" id="kobo.46.1">Route file-naming conventions</span></h2>
<p><span class="koboSpan" id="kobo.47.1">Before</span><a id="_idIndexMarker104"/><span class="koboSpan" id="kobo.48.1"> we get started, note that Remix switched to a new route file-naming convention with Remix v2. </span><span class="koboSpan" id="kobo.48.2">This book follows </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">that convention.</span></span></p>
<p><span class="koboSpan" id="kobo.50.1">If you are new to Remix, then this chapter will get you started with Remix’s latest convention. </span><span class="koboSpan" id="kobo.50.2">If you have prior experience with Remix’s v1 filesystem route convention, you can refer to this guide to learn what has </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">changed: </span></span><a href="https://remix.run/docs/en/1.19.3/file-conventions/route-files-v2"><span class="No-Break"><span class="koboSpan" id="kobo.52.1">https://remix.run/docs/en/1.19.3/file-conventions/route-files-v2</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.53.1">.</span></span></p>
<h2 id="_idParaDest-65"><a id="_idTextAnchor062"/><span class="koboSpan" id="kobo.54.1">Working with file-based routing</span></h2>
<p><span class="koboSpan" id="kobo.55.1">We start by</span><a id="_idIndexMarker105"/><span class="koboSpan" id="kobo.56.1"> inspecting the current route structure of BeeRich. </span><span class="koboSpan" id="kobo.56.2">We </span><a id="_idIndexMarker106"/><span class="koboSpan" id="kobo.57.1">will continue with the BeeRich code from the previous chapter. </span><span class="koboSpan" id="kobo.57.2">Alternatively, you can find the start code for this chapter </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">here: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/03-deployment-targets-adapters-and-stacks/bee-rich"><span class="No-Break"><span class="koboSpan" id="kobo.59.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/03-deployment-targets-adapters-and-stacks/bee-rich</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.60.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.61.1">Let’s review the current </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">route hierarchy:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.63.1">Run the following command in a terminal at the root of your </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">Remix project:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.65.1">npx remix routes</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.66.1">This command prints the current routes hierarchy to </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">the terminal:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.68.1">&lt;Routes&gt;  &lt;Route file="root.tsx"&gt;    &lt;Route index file="routes/_index.tsx" /&gt;    &lt;Route path="demo" file="routes/demo.tsx" /&gt;  &lt;/Route&gt;&lt;/Routes&gt;</span></pre></li> <li><span class="koboSpan" id="kobo.69.1">Next, open the BeeRich project in your editor and inspect the </span><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">app/routes</span></strong><span class="koboSpan" id="kobo.71.1"> folder. </span><span class="koboSpan" id="kobo.71.2">We can see that there are currently two files in </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">the folder:</span></span><ul><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">demo.tsx</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">_index.tsx</span></strong></span></li></ul><p class="list-inset"><span class="koboSpan" id="kobo.75.1">You will find that this matches the hierarchy displayed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">remix route</span></strong><span class="koboSpan" id="kobo.77.1"> command. </span><span class="koboSpan" id="kobo.77.2">The hierarchy can be interpreted as a tree. </span><span class="koboSpan" id="kobo.77.3">Everything starts at the root (</span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">root.tsx</span></strong><span class="koboSpan" id="kobo.79.1">). </span><span class="koboSpan" id="kobo.79.2">Nested, we have two child routes, each pointing to a file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">routes</span></strong><span class="koboSpan" id="kobo.81.1"> folder. </span><span class="koboSpan" id="kobo.81.2">Since the two route modules themselves have no children, they </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">are leaves.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.83.1">Note that one route is flagged as </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">index</span></strong><span class="koboSpan" id="kobo.85.1">, while the demo route has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">path</span></strong><span class="koboSpan" id="kobo.87.1"> property, which matches its filename. </span><span class="koboSpan" id="kobo.87.2">Each route segment in the routes hierarchy can have one</span><a id="_idIndexMarker107"/><span class="koboSpan" id="kobo.88.1"> index file. </span><span class="koboSpan" id="kobo.88.2">The index file is the default child route for a parent route and its URL path segment. </span><span class="koboSpan" id="kobo.88.3">The root of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">routes</span></strong><span class="koboSpan" id="kobo.90.1"> folder maps to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">/</span></strong><span class="koboSpan" id="kobo.92.1">path. </span><span class="koboSpan" id="kobo.92.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">_index.tsx</span></strong><span class="koboSpan" id="kobo.94.1"> file on the root level of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.95.1">routes</span></strong><span class="koboSpan" id="kobo.96.1"> folder acts as the default route module for that path </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">segment (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.98.1">/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">).</span></span></p></li>
<li><span class="koboSpan" id="kobo.100.1">Let’s </span><a id="_idIndexMarker108"/><span class="koboSpan" id="kobo.101.1">run our application locally by executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">npm run dev</span></strong><span class="koboSpan" id="kobo.103.1"> in a terminal. </span></li>
<li><span class="koboSpan" id="kobo.104.1">Open the application in your browser by navigating to </span><a href="http://localhost:3000/"><span class="koboSpan" id="kobo.105.1">http://localhost:3000/</span></a><span class="koboSpan" id="kobo.106.1">. </span><span class="koboSpan" id="kobo.106.2">This routes us to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.107.1">/</span></strong><span class="koboSpan" id="kobo.108.1">path of the application. </span><span class="koboSpan" id="kobo.108.2">Welcome (again) </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">to BeeRich!</span></span></li>
<li><span class="koboSpan" id="kobo.110.1">Back in your editor, open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.111.1">app/routes/_index.tsx</span></strong><span class="koboSpan" id="kobo.112.1"> file. </span><span class="koboSpan" id="kobo.112.2">The file contains the </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">following code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.114.1">
import { H1 } from '~/components/headings';</span><strong class="bold"><span class="koboSpan" id="kobo.115.1">export default</span></strong><span class="koboSpan" id="kobo.116.1"> function Component() {  return (    &lt;main&gt;      &lt;H1&gt;Welcome to BeeRich!&lt;/H1&gt;    &lt;/main&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.117.1">The route defines a React component, which is exported as the default export of </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">the module.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.119.1">Compare the JSX code to the content of the current page in your browser window. </span><span class="koboSpan" id="kobo.119.2">It matches! </span><span class="koboSpan" id="kobo.119.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">_index.tsx</span></strong><span class="koboSpan" id="kobo.121.1"> route module maps to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">/</span></strong><span class="koboSpan" id="kobo.123.1">path of the application. </span><span class="koboSpan" id="kobo.123.2">It is the default child route of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.124.1">routes</span></strong><span class="koboSpan" id="kobo.125.1"> foler and renders when we visit the homepage of BeeRich. </span><span class="koboSpan" id="kobo.125.2">We will later see that this pattern holds true for every nested index file inside the </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">routes hierarchy.</span></span></p></li> <li><span class="koboSpan" id="kobo.127.1">Now, let’s visit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.128.1">/demo</span></strong><span class="koboSpan" id="kobo.129.1"> page. </span><span class="koboSpan" id="kobo.129.2">Add </span><strong class="source-inline"><span class="koboSpan" id="kobo.130.1">demo</span></strong><span class="koboSpan" id="kobo.131.1"> to the URL in the address bar of your browser. </span><span class="koboSpan" id="kobo.131.2">The</span><a id="_idIndexMarker109"/><span class="koboSpan" id="kobo.132.1"> demo page showcases available reusable components that we can use to build our </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">BeeRich application.</span></span></li>
<li><span class="koboSpan" id="kobo.134.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.135.1">app/routes/demo.tsx</span></strong><span class="koboSpan" id="kobo.136.1"> file. </span><span class="koboSpan" id="kobo.136.2">Note that we again export a React component as the default export of </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">the module.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.138.1">There is </span><a id="_idIndexMarker110"/><span class="koboSpan" id="kobo.139.1">some magic at play here. </span><span class="koboSpan" id="kobo.139.2">We didn’t need to specify the routes hierarchy to Remix explicitly through code. </span><span class="koboSpan" id="kobo.139.3">No configuration file maps components to pathnames. </span><span class="koboSpan" id="kobo.139.4">This is the power of </span><strong class="bold"><span class="koboSpan" id="kobo.140.1">file-based routing</span></strong><span class="koboSpan" id="kobo.141.1">. </span><span class="koboSpan" id="kobo.141.2">It </span><a id="_idIndexMarker111"/><span class="koboSpan" id="kobo.142.1">reduces configuration overhead. </span><span class="koboSpan" id="kobo.142.2">Remix compiles your code during build time and parses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">routes</span></strong><span class="koboSpan" id="kobo.144.1"> folder’s hierarchy. </span><span class="koboSpan" id="kobo.144.2">It creates an </span><strong class="bold"><span class="koboSpan" id="kobo.145.1">asset manifest</span></strong><span class="koboSpan" id="kobo.146.1"> that </span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.147.1">includes the route hierarchy of </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.149.1">When visiting a page, Remix knows which route components to render. </span><span class="koboSpan" id="kobo.149.2">Exporting the route component as the default export is a convention so that Remix can find </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">your code.</span></span></p>
<p><span class="koboSpan" id="kobo.151.1">Let’s dive into the conventions of Remix’s file-based routing and create some </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">standalone pages.</span></span></p>
<h2 id="_idParaDest-66"><a id="_idTextAnchor063"/><span class="koboSpan" id="kobo.153.1">Creating route modules</span></h2>
<p><span class="koboSpan" id="kobo.154.1">In </span><a href="B17399_08.xhtml#_idTextAnchor119"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.155.1">Chapter 8</span></em></span></a><span class="koboSpan" id="kobo.156.1">, </span><em class="italic"><span class="koboSpan" id="kobo.157.1">Session Management</span></em><span class="koboSpan" id="kobo.158.1">, we will add a signup and login authentication flow to BeeRich. </span><span class="koboSpan" id="kobo.158.2">In </span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.159.1">this chapter, we will set up the general route</span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.160.1"> structure to </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">do so:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.162.1">Create a new file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1">routes</span></strong><span class="koboSpan" id="kobo.164.1"> folder and name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">login.tsx</span></strong><span class="koboSpan" id="kobo.166.1">. </span></li>
<li><span class="koboSpan" id="kobo.167.1">Next, use the address bar of your browser to navigate to the newly created </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">page (</span></span><a href="http://localhost:3000/login"><span class="No-Break"><span class="koboSpan" id="kobo.169.1">http://localhost:3000/login</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.170.1">).</span></span><p class="list-inset"><span class="koboSpan" id="kobo.171.1">We will see the following error pop up on </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">the screen:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.173.1">
Error: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: object. </span><strong class="bold"><span class="koboSpan" id="kobo.174.1">You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.175.1">Remix communicates that we did not adhere to its convention. </span><span class="koboSpan" id="kobo.175.2">When creating a route, we must define it as</span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.176.1"> either a </span><strong class="bold"><span class="koboSpan" id="kobo.177.1">resource route</span></strong><span class="koboSpan" id="kobo.178.1"> (more on this later) or a </span><strong class="bold"><span class="koboSpan" id="kobo.179.1">UI route</span></strong><span class="koboSpan" id="kobo.180.1">. </span><span class="koboSpan" id="kobo.180.2">By</span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.181.1"> using the browser to request the page (a </span><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">GET</span></strong><span class="koboSpan" id="kobo.183.1"> request for an HTML document), Remix</span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.184.1"> looked for a default export of a React component. </span><span class="koboSpan" id="kobo.184.2">However, we did not</span><a id="_idIndexMarker118"/><span class="koboSpan" id="kobo.185.1"> specify a default export, or even a React component for </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">that matter.</span></span></p></li> </ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.187.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.188.1">A UI route must export a React component as its default export. </span><span class="koboSpan" id="kobo.188.2">This is part of the conventions of Remix’s </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">file-based routing.</span></span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.190.1">To remove the error from the screen, switch to your editor and add a React component to the newly created </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">login.tsx</span></strong><span class="koboSpan" id="kobo.192.1"> file. </span><span class="koboSpan" id="kobo.192.2">The following code should suffice </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">for now:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.194.1">
import { H1 } from '~/components/headings';export default function Component() {  return &lt;H1&gt;Login!&lt;/H1&gt;;}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.195.1">Note that we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">H1</span></strong><span class="koboSpan" id="kobo.197.1">, a reusable component from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">app/components</span></strong><span class="koboSpan" id="kobo.199.1"> folder, to avoid rewriting a bunch of </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">custom styling.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.201.1">Also, note that the import path starts with a tilde symbol (</span><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">~</span></strong><span class="koboSpan" id="kobo.203.1">). </span><span class="koboSpan" id="kobo.203.2">This is a neat TypeScript feature. </span><span class="koboSpan" id="kobo.203.3">We map the </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">app</span></strong><span class="koboSpan" id="kobo.205.1"> folder to </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">~</span></strong><span class="koboSpan" id="kobo.207.1"> in our </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">tsconfig.json</span></strong><span class="koboSpan" id="kobo.209.1"> path configuration. </span><span class="koboSpan" id="kobo.209.2">This allows us to use the tilde symbol as a shorthand to target any file or folder in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">app</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.211.1"> folder.</span></span></p></li> <li><span class="koboSpan" id="kobo.212.1">Refresh the browser window. </span><span class="koboSpan" id="kobo.212.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">/login</span></strong><span class="koboSpan" id="kobo.214.1"> page should now render correctly. </span><span class="koboSpan" id="kobo.214.2">Awesome! </span><span class="koboSpan" id="kobo.214.3">You just created your first standalone page </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">with Remix!</span></span></li>
<li><span class="koboSpan" id="kobo.216.1">Next, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">signup.tsx</span></strong><span class="koboSpan" id="kobo.218.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">routes</span></strong><span class="koboSpan" id="kobo.220.1"> folder. </span><span class="koboSpan" id="kobo.220.2">Then, copy and paste the code</span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.221.1"> from the login page and adapt the code to better fit the </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">signup page.</span></span></li>
<li><span class="koboSpan" id="kobo.223.1">Use the </span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.224.1">address bar of your browser to navigate to the newly created </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">page (</span></span><a href="http://localhost:3000/signup"><span class="No-Break"><span class="koboSpan" id="kobo.226.1">http://localhost:3000/signup</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.227.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.228.1">Let’s run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">remix routes</span></strong><span class="koboSpan" id="kobo.230.1"> command again to see how the routes hierarchy grew. </span><span class="koboSpan" id="kobo.230.2">Execute the following command in </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">your terminal:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.232.1">npx remix routes</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.233.1">This yields the following </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">route hierarchy:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.235.1">&lt;Routes&gt;  &lt;Route file="root.tsx"&gt;    &lt;Route index file="routes/_index.tsx" /&gt;    &lt;Route path="signup" file="routes/signup.tsx" /&gt;    &lt;Route path="login" file="routes/login.tsx" /&gt;    &lt;Route path="demo" file="routes/demo.tsx" /&gt;  &lt;/Route&gt;&lt;/Routes&gt;</span></pre></li> </ol>
<p><span class="koboSpan" id="kobo.236.1">As expected, the routes hierarchy grew by two leave routes. </span><span class="koboSpan" id="kobo.236.2">Each leaf route represents a page in the application. </span><span class="koboSpan" id="kobo.236.3">Our application now handles the following </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">four pathnames:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">/</span></strong></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">demo</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">login</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">signup</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.245.1">So far, all our route modules in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">routes</span></strong><span class="koboSpan" id="kobo.247.1"> folder are document/UI routes that render React </span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.248.1">components</span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.249.1"> as part of the route hierarchy to the page. </span><span class="koboSpan" id="kobo.249.2">In the following section, we will provide a short overview of available route module exports and discuss the differences between UI and </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">resource routes.</span></span></p>
<h2 id="_idParaDest-67"><a id="_idTextAnchor064"/><span class="koboSpan" id="kobo.251.1">Available route module exports</span></h2>
<p><span class="koboSpan" id="kobo.252.1">In Remix, we </span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.253.1">distinguish between resource routes and UI routes. </span><span class="koboSpan" id="kobo.253.2">Each UI route must export a React component as the default export. </span><span class="koboSpan" id="kobo.253.3">Resource routes do not export a React component as the default export. </span><span class="koboSpan" id="kobo.253.4">Instead, resource routes must export an </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">action</span></strong><span class="koboSpan" id="kobo.255.1"> and/or a </span><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">loader</span></strong><span class="koboSpan" id="kobo.257.1"> function. </span><span class="koboSpan" id="kobo.257.2">Among other things, resource routes can expose API endpoints, handle Webhooks, or create assets on the fly. </span><span class="koboSpan" id="kobo.257.3">We will create our first resource route later in </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.259.1">Remix inspects </span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.260.1">the exported functions of a route module to determine whether it is a UI or a resource route. </span><span class="koboSpan" id="kobo.260.2">While resource routes only support exporting an </span><strong class="source-inline"><span class="koboSpan" id="kobo.261.1">action</span></strong><span class="koboSpan" id="kobo.262.1"> or a </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">loader</span></strong><span class="koboSpan" id="kobo.264.1"> function, UI routes can export the following </span><span class="No-Break"><span class="koboSpan" id="kobo.265.1">named exports:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">action</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">ErrorBoundary</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">handle</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">headers</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">links</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">loader</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">meta</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">shouldRevalidate</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.274.1">We will learn more about the role of these exports in the following chapters. </span><span class="koboSpan" id="kobo.274.2">For now, let’s focus on how Remix uses the route module exports. </span><span class="koboSpan" id="kobo.274.3">Remix compiles the route hierarchy during </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">build time.</span></span></p>
<p><span class="koboSpan" id="kobo.276.1">In your file explorer, navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">public/build/</span></strong><span class="koboSpan" id="kobo.278.1"> and open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.279.1">manifest-*.js</span></strong><span class="koboSpan" id="kobo.280.1"> file. </span><span class="koboSpan" id="kobo.280.2">The manifest file is created after building the application (</span><strong class="source-inline"><span class="koboSpan" id="kobo.281.1">npm run build</span></strong><span class="koboSpan" id="kobo.282.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.283.1">npm run dev</span></strong><span class="koboSpan" id="kobo.284.1">) and includes a routes section. </span><span class="koboSpan" id="kobo.284.2">The routes section contains an entry for every route module in the app. </span><span class="koboSpan" id="kobo.284.3">The entry for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.285.1">demo.tsx</span></strong><span class="koboSpan" id="kobo.286.1"> route looks </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.288.1">
'routes/demo': {    id: 'routes/demo',
    parentId: 'root',
    path: 'demo',
    module: '/build/routes/demo-EKLEFBX2.js',
    imports: ['/build/_shared/chunk-AATHADRZ.js'],
    hasAction: false,
    hasLoader: false,
    hasErrorBoundary: false,
},</span></pre>
<p><span class="koboSpan" id="kobo.289.1">As shown</span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.290.1"> in the code, Remix keeps track of the exported functions via Boolean flags. </span><span class="koboSpan" id="kobo.290.2">The Boolean flags are set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.291.1">false</span></strong><span class="koboSpan" id="kobo.292.1">, since our demo route </span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.293.1">does not export </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">action</span></strong><span class="koboSpan" id="kobo.295.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">loader</span></strong><span class="koboSpan" id="kobo.297.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">ErrorBoundary</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.301.1">Remix’s route module exports are part of the file-based route convention. </span><span class="koboSpan" id="kobo.301.2">Remix compiles the content of the route folder and generates a manifest file. </span><span class="koboSpan" id="kobo.301.3">This is how Remix lets us avoid a route hierarchy configuration in code and instead promotes a convention-based </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">route hierarchy.</span></span></p>
<p><span class="koboSpan" id="kobo.303.1">In this section, we created two new route modules and learned about the supported named exports of route modules in Remix. </span><span class="koboSpan" id="kobo.303.2">We also used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">remix routes</span></strong><span class="koboSpan" id="kobo.305.1"> command to visualize our routes hierarchy. </span><span class="koboSpan" id="kobo.305.2">In the following section, we will dive into </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">nested routing.</span></span></p>
<h1 id="_idParaDest-68"><a id="_idTextAnchor065"/><span class="koboSpan" id="kobo.307.1">Composing pages from nested routes</span></h1>
<p><span class="koboSpan" id="kobo.308.1">BeeRich is a </span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.309.1">personal bookkeeping application. </span><span class="koboSpan" id="kobo.309.2">Users should be able to view their expenses and sources of income. </span><span class="koboSpan" id="kobo.309.3">In this section, we will create a hierarchy of nested routes to compose</span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.310.1"> the dashboard pages </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">of BeeRich.</span></span></p>
<p><span class="koboSpan" id="kobo.312.1">So far, we have seen </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">Outlet</span></strong><span class="koboSpan" id="kobo.314.1"> being used in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.315.1">root.tsx</span></strong><span class="koboSpan" id="kobo.316.1"> file. </span><span class="koboSpan" id="kobo.316.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1">Outlet</span></strong><span class="koboSpan" id="kobo.318.1"> component declares the location of the child route inside the markup of the parent route. </span><span class="koboSpan" id="kobo.318.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">Outlet</span></strong><span class="koboSpan" id="kobo.320.1"> component in </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">root.tsx</span></strong><span class="koboSpan" id="kobo.322.1"> is rendered inside the HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">body</span></strong><span class="koboSpan" id="kobo.324.1">. </span><span class="koboSpan" id="kobo.324.2">Hence, all child routes are wrapped inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">body</span></strong><span class="koboSpan" id="kobo.326.1"> element. </span><span class="koboSpan" id="kobo.326.2">This is the power of nested routing. </span><span class="koboSpan" id="kobo.326.3">With nested routing, you can compose pages out of several </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">route modules.</span></span></p>
<p><span class="koboSpan" id="kobo.328.1">Let’s use </span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.329.1">nested routing and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">Outlet</span></strong><span class="koboSpan" id="kobo.331.1"> component to construct our dashboard. </span><span class="koboSpan" id="kobo.331.2">The two routes, </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">/dashboard/expenses</span></strong><span class="koboSpan" id="kobo.333.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">/dashboard/income</span></strong><span class="koboSpan" id="kobo.335.1">, will serve as our </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">overview pages:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.337.1">First, add two files inside the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.339.1"> folder:</span></span><ul><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">dashboard.expenses.tsx</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">dashboard.income.tsx</span></strong></span></li></ul><p class="list-inset"><span class="koboSpan" id="kobo.342.1">Note that we use dot delimiters (</span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">.</span></strong><span class="koboSpan" id="kobo.344.1">) to separate path segments (</span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">/</span></strong><span class="koboSpan" id="kobo.346.1">) in </span><span class="No-Break"><span class="koboSpan" id="kobo.347.1">the URL.</span></span></p></li>
<li><span class="koboSpan" id="kobo.348.1">Add a simple route component to both files. </span><span class="koboSpan" id="kobo.348.2">Review </span><strong class="source-inline"><span class="koboSpan" id="kobo.349.1">login.tsx</span></strong><span class="koboSpan" id="kobo.350.1"> for reference. </span><span class="koboSpan" id="kobo.350.2">In both files, export the component as the </span><span class="No-Break"><span class="koboSpan" id="kobo.351.1">default export.</span></span></li>
<li><span class="koboSpan" id="kobo.352.1">Then, run the application (</span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">npm run dev</span></strong><span class="koboSpan" id="kobo.354.1">), and review the changes in a </span><span class="No-Break"><span class="koboSpan" id="kobo.355.1">browser window.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.356.1">The goal is to list all expenses and sources of income (invoices), respectively. </span><span class="koboSpan" id="kobo.356.2">For now, we will mock the data and focus on setting up the </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">route hierarchy.</span></span></p></li>
<li><span class="koboSpan" id="kobo.358.1">Add the following code to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">dashboard.expenses.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.360.1"> file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.361.1">
import { H1 } from '~/components/headings';export default function Component() {  return (    &lt;div className="w-full"&gt;      &lt;H1&gt;Your expenses&lt;/H1&gt;      &lt;div className="mt-10 w-full flex flex-col-reverse         lg:flex-row"&gt;        &lt;section className="lg:p-8 w-full lg:max-w-2xl"&gt;          &lt;h2 className="sr-only"&gt;All expenses&lt;/h2&gt;          &lt;ul className="flex flex-col"&gt;            &lt;li&gt;              &lt;p className="text-xl font-semibold"&gt;Food&lt;/p&gt;              &lt;p&gt;$100&lt;/p&gt;            &lt;/li&gt;            &lt;li&gt;              &lt;p className="text-xl font-semibold"&gt;Transport&lt;/p&gt;              &lt;p&gt;$100&lt;/p&gt;            &lt;/li&gt;            &lt;li&gt;              &lt;p className="text-xl font-semibold"&gt;Entertainment                 &lt;/p&gt;              &lt;p&gt;$100&lt;/p&gt;            &lt;/li&gt;          &lt;/ul&gt;        &lt;/section&gt;      &lt;/div&gt;    &lt;/div&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.362.1">The provided code renders a hardcoded list of expenses to </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">the page.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.364.1">You can also find the final code for this chapter on </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">GitHub: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/04-routing-in-remix/bee-rich/solution"><span class="No-Break"><span class="koboSpan" id="kobo.366.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/04-routing-in-remix/bee-rich/solution</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.367.1">.</span></span></p></li> <li><span class="koboSpan" id="kobo.368.1">Similarly, we </span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.369.1">want to render a list of all </span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.370.1">sources of income on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">/dashboard/income</span></strong><span class="koboSpan" id="kobo.372.1"> page. </span><span class="koboSpan" id="kobo.372.2">Copy the code from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.374.1"> file, and adapt it to render hardcoded invoices instead of expenses </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">dashboard.income.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.377.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.378.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.379.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.380.1">.1</span></em><span class="koboSpan" id="kobo.381.1">, both pages now render a list of items. </span><span class="koboSpan" id="kobo.381.2">In the future, users should also be able to edit an expense or invoice. </span><span class="koboSpan" id="kobo.381.3">For that, we will now create a nested </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">details view.</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer012">
<span class="koboSpan" id="kobo.383.1"><img alt="Figure 4.1 – A screenshot of the expenses overview page" src="image/Figure_4.01_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.384.1">Figure 4.1 – A screenshot of the expenses overview page</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.385.1">So far, we have navigated between pages by changing the URL in the address bar of the browser. </span><span class="koboSpan" id="kobo.385.2">Now, it’s time to add anchor tags. </span><span class="koboSpan" id="kobo.385.3">A user should be able to click on a list item in the expenses overview to view the details view of the expense. </span><span class="koboSpan" id="kobo.385.4">Let’s </span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.386.1">wrap the content of the hardcoded list items with anchor tags. </span><span class="koboSpan" id="kobo.386.2">The first list item might look </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.388.1">
&lt;li&gt;  &lt;a href="</span><strong class="bold"><span class="koboSpan" id="kobo.389.1">/dashboard/expenses/1</span></strong><span class="koboSpan" id="kobo.390.1">"&gt;    &lt;p className="text-xl font-semibold"&gt;Food&lt;/p&gt;    &lt;p&gt;$100&lt;/p&gt;  &lt;/a&gt;&lt;/li&gt;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.391.1">Make sure to wrap each item with an </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">anchor tag.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.393.1">Each list</span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.394.1"> item now links to a unique URL that includes the mock identifier of the expense. </span><span class="koboSpan" id="kobo.394.2">In the following section, we will learn more about dynamic routes with parameters. </span><span class="koboSpan" id="kobo.394.3">For now, let’s work with made-up mock identifiers to focus on the </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">route structure.</span></span></p></li> <li><span class="koboSpan" id="kobo.396.1">In your browser window, click on one of the list items. </span><span class="koboSpan" id="kobo.396.2">A click on an item should navigate you to a </span><strong class="bold"><span class="koboSpan" id="kobo.397.1">404 Not Found</span></strong><span class="koboSpan" id="kobo.398.1"> page. </span><span class="koboSpan" id="kobo.398.2">That’s expected, considering we did not create the associated route </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">module yet.</span></span></li>
<li><span class="koboSpan" id="kobo.400.1">Let’s add a hardcoded details page for the expense with the identifier </span><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">1</span></strong><span class="koboSpan" id="kobo.402.1">. </span><span class="koboSpan" id="kobo.402.2">Create a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">dashboard.expenses.1.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.404.1"> file.</span></span></li>
<li><span class="koboSpan" id="kobo.405.1">Add the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">dashboard.expenses.1.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.409.1">
import { H2 } from '~/components/headings';export default function Component() {  return (    &lt;div className="w-full h-full p-8"&gt;      &lt;H2&gt;Food&lt;/H2&gt;      &lt;p&gt;$100&lt;/p&gt;    &lt;/div&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.410.1">The newly </span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.411.1">created details route is dedicated to the expense with the identifier </span><strong class="source-inline"><span class="koboSpan" id="kobo.412.1">1</span></strong><span class="koboSpan" id="kobo.413.1">. </span><span class="koboSpan" id="kobo.413.2">By clicking on a list item in the expenses overview, we should be redirected to the details view of the </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">list item.</span></span></p></li> <li><span class="koboSpan" id="kobo.415.1">Let’s test </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.416.1">our implementation. </span><span class="koboSpan" id="kobo.416.2">Use the address bar to navigate back to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">/dashboard/expenses/</span></strong><span class="koboSpan" id="kobo.418.1"> page. </span><span class="koboSpan" id="kobo.418.2">Then, click on the list item with the </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">identifier </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.422.1">Snap! </span><span class="koboSpan" id="kobo.422.2">Something is wrong! </span><span class="koboSpan" id="kobo.422.3">We can see that the URL changes as expected. </span><span class="koboSpan" id="kobo.422.4">A click on the list item updates the pathname of the URL to </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">/dashboard/expenses/1</span></strong><span class="koboSpan" id="kobo.424.1">. </span><span class="koboSpan" id="kobo.424.2">However, the content of the page does not update. </span><span class="koboSpan" id="kobo.424.3">We still see the content of the expenses overview page. </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">What’s wrong?</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.426.1">We created a nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">dashboard.expenses.1.tsx</span></strong><span class="koboSpan" id="kobo.428.1"> file within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.429.1">/expenses</span></strong><span class="koboSpan" id="kobo.430.1"> path. </span><span class="koboSpan" id="kobo.430.2">But why is the content of the file not appearing on the page? </span><span class="koboSpan" id="kobo.430.3">Remix only seems to render the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.431.1">dashboard.expenses.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.432.1"> file.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.433.1">The issue is that </span><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.435.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">dashboard.expenses.1.tsx</span></strong><span class="koboSpan" id="kobo.437.1"> both match the same path (</span><strong class="source-inline"><span class="koboSpan" id="kobo.438.1">/dashboard/expenses/</span></strong><span class="koboSpan" id="kobo.439.1">). </span><span class="koboSpan" id="kobo.439.2">By doing so, we promoted the </span><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.441.1"> file to be a parent layout route module (such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">root.tsx</span></strong><span class="koboSpan" id="kobo.443.1">). </span><span class="koboSpan" id="kobo.443.2">If we want to display either the content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.444.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.445.1"> file or the content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">dashboard.expenses.1.tsx</span></strong><span class="koboSpan" id="kobo.447.1"> file, then we need to make </span><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.449.1"> a sibling instead of a </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">parent route.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.451.1">You learned earlier that index routes are used as the default child routes of a URL path segment. </span><span class="koboSpan" id="kobo.451.2">Let’s try to fix the issue by adding an </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">index route.</span></span></p></li>
<li><span class="koboSpan" id="kobo.453.1">Rename the </span><strong class="source-inline"><span class="koboSpan" id="kobo.454.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.455.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">dashboard.expenses._index.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.459.1">By doing so, we </span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.460.1">declare the two route modules in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">expenses</span></strong><span class="koboSpan" id="kobo.462.1"> path as siblings. </span><span class="koboSpan" id="kobo.462.2">Sibling route modules always match </span><span class="No-Break"><span class="koboSpan" id="kobo.463.1">different pathnames.</span></span></p></li>
<li><span class="koboSpan" id="kobo.464.1">In your </span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.465.1">browser window, navigate back to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">/dashboard/expenses/</span></strong><span class="koboSpan" id="kobo.467.1"> page. </span><span class="koboSpan" id="kobo.467.2">Now, click on the list item to navigate </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">/dashboard/expenses/1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.471.1">The UI now updates as expected between the two pages. </span><span class="koboSpan" id="kobo.471.2">By declaring the two route modules as siblings, we either show the overview or the details </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">page content.</span></span></p></li>
</ol>
<p><span class="koboSpan" id="kobo.473.1">Remix’s route hierarchy distinguishes </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.474.1">parent and sibling routes of a specific URL path. </span><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.476.1"> is a </span><strong class="bold"><span class="koboSpan" id="kobo.477.1">parent layout route</span></strong><span class="koboSpan" id="kobo.478.1"> (or parent route for short) for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.479.1">/</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">expenses</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.481.1"> path.</span></span></p>
<p><span class="koboSpan" id="kobo.482.1">A parent route utilizes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.483.1">Outlet</span></strong><span class="koboSpan" id="kobo.484.1"> component to declare where its child components should be rendered alongside its own layout. </span><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">root.tsx</span></strong><span class="koboSpan" id="kobo.486.1"> is the top-level </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">parent route.</span></span></p>
<p><span class="koboSpan" id="kobo.488.1">Let’s try </span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">it out:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.490.1">Undo your changes. </span><span class="koboSpan" id="kobo.490.2">Rename the </span><strong class="source-inline"><span class="koboSpan" id="kobo.491.1">dashboard.expenses._index.tsx</span></strong><span class="koboSpan" id="kobo.492.1"> file back </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">dashboard.expenses.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.495.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.496.1">Now, import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">Outlet</span></strong><span class="koboSpan" id="kobo.498.1"> component from Remix, and add it below the </span><strong class="bold"><span class="koboSpan" id="kobo.499.1">All </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.500.1">expenses</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.501.1"> section:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.502.1">import { Outlet } from '@remix-run/react';</span></strong><span class="koboSpan" id="kobo.503.1">import { H1 } from '~/components/headings';export default function Component() {  return (    &lt;div&gt;      &lt;H1&gt;Your expenses&lt;/H1&gt;      &lt;div&gt;        &lt;section&gt;          &lt;h2&gt;All expenses&lt;/h2&gt;          &lt;ul&gt;            &lt;li&gt;              &lt;a href="/dashboard/expenses/1"&gt;                &lt;p&gt;Food&lt;/p&gt;                &lt;p&gt;$100&lt;/p&gt;              &lt;/a&gt;            &lt;/li&gt;          &lt;/ul&gt;        &lt;/section&gt;        </span><strong class="bold"><span class="koboSpan" id="kobo.504.1">&lt;Outlet /&gt;</span></strong><span class="koboSpan" id="kobo.505.1">      &lt;/div&gt;    &lt;/div&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.506.1">Note </span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.507.1">that we redacted the </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">className</span></strong><span class="koboSpan" id="kobo.509.1"> attributes and the last two list items from this example for easier readability. </span><span class="koboSpan" id="kobo.509.2">You can find the complete code </span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">on GitHub.</span></span></p></li> <li><span class="koboSpan" id="kobo.511.1">Refresh your </span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.512.1">browser window. </span><span class="koboSpan" id="kobo.512.2">You should now see the expenses overview and the details view side by side when </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">visiting </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">/dashboard/expenses/1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.515.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer013">
<span class="koboSpan" id="kobo.516.1"><img alt="Figure 4.2 – A screenshot of the expenses overview page with the nested details view" src="image/Figure_4.02_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.517.1">Figure 4.2 – A screenshot of the expenses overview page with the nested details view</span></p>
<p><span class="koboSpan" id="kobo.518.1">Awesome! </span><span class="koboSpan" id="kobo.518.2">We </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.519.1">created our first layout route to compose a page from different route modules. </span><span class="koboSpan" id="kobo.519.2">By using nested routing, we map different segments of the URL to different route modules. </span><span class="koboSpan" id="kobo.519.3">This creates a hierarchically nested structure. </span><span class="koboSpan" id="kobo.519.4">Parent routes utilize the </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">Outlet</span></strong><span class="koboSpan" id="kobo.521.1"> component to declare where the child route should be rendered on </span><span class="No-Break"><span class="koboSpan" id="kobo.522.1">the page.</span></span></p>
<p><span class="koboSpan" id="kobo.523.1">Note that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">/dashboard</span></strong><span class="koboSpan" id="kobo.525.1"> path is not accompanied by a </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.527.1"> file. </span><span class="koboSpan" id="kobo.527.2">This should tell us that layout route modules are optional. </span><span class="koboSpan" id="kobo.527.3">We can use layout routes to share a common layout across all child routes or create complex pages that are made up of different route modules. </span><span class="koboSpan" id="kobo.527.4">However, if they're not needed, they can </span><span class="No-Break"><span class="koboSpan" id="kobo.528.1">be omitted.</span></span></p>
<p><span class="koboSpan" id="kobo.529.1">For BeeRich, we want to use a parent layout route instead of an index route to render the overview page. </span><span class="koboSpan" id="kobo.529.2">With this page architecture, a user can see all expense-related information on </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">one page.</span></span></p>
<p><span class="koboSpan" id="kobo.531.1">To practice</span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.532.1"> working with parent layout routes, make sure to update the income pages and add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">Outlet</span></strong><span class="koboSpan" id="kobo.534.1"> component to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.535.1">dashboard.income.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.536.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.537.1">In this section, you learned how you can compose a page out of different route modules. </span><span class="koboSpan" id="kobo.537.2">Remix maps segments of the URL to different route modules in the routes hierarchy. </span><span class="koboSpan" id="kobo.537.3">With parent layout routes, we can nest and render child routes inside parent routes. </span><span class="koboSpan" id="kobo.537.4">Each page is then made up of code from different nested route modules. </span><span class="koboSpan" id="kobo.537.5">Next, we will refactor</span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.538.1"> the hardcoded parameter routes and utilize parameterized path segments to create dynamic expense </span><span class="No-Break"><span class="koboSpan" id="kobo.539.1">details pages.</span></span></p>
<h1 id="_idParaDest-69"><a id="_idTextAnchor066"/><span class="koboSpan" id="kobo.540.1">Using route parameters for dynamic routing</span></h1>
<p><span class="koboSpan" id="kobo.541.1">URLs often </span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.542.1">include parameters such as identifiers to specify associated resources. </span><span class="koboSpan" id="kobo.542.2">This allows the application to retrieve the right data for </span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.543.1">the request. </span><span class="koboSpan" id="kobo.543.2">In this section, you will learn how to work with URL parameters </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">in Remix.</span></span></p>
<p><span class="koboSpan" id="kobo.545.1">So far, we have created a route module for a hardcoded expenses details page (</span><strong class="source-inline"><span class="koboSpan" id="kobo.546.1">/dashboard.expenses.1.tsx</span></strong><span class="koboSpan" id="kobo.547.1">). </span><span class="koboSpan" id="kobo.547.2">The number </span><strong class="source-inline"><span class="koboSpan" id="kobo.548.1">1</span></strong><span class="koboSpan" id="kobo.549.1"> in the URL refers to the expense with the expense identifier </span><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">1</span></strong><span class="koboSpan" id="kobo.551.1">. </span><span class="koboSpan" id="kobo.551.2">However, the goal is to create a dynamic route module capable of handling variable identifiers. </span><span class="koboSpan" id="kobo.551.3">Luckily, Remix provides a convention for how to define a parameterized </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">route segment.</span></span></p>
<h2 id="_idParaDest-70"><a id="_idTextAnchor067"/><span class="koboSpan" id="kobo.553.1">Parameterized route segments</span></h2>
<p><span class="koboSpan" id="kobo.554.1">In Remix, dynamic segments</span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.555.1"> of the URL are referred to as parameterized segments. </span><span class="koboSpan" id="kobo.555.2">We use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.556.1">$</span></strong><span class="koboSpan" id="kobo.557.1"> symbol to declare a route parameter. </span><span class="koboSpan" id="kobo.557.2">This turns the URL segment into a parameter that we can access and use to </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">fetch data.</span></span></p>
<p><span class="koboSpan" id="kobo.559.1">Let’s see how we can </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.560.1">use a parameterized segment in BeeRich for the expenses </span><span class="No-Break"><span class="koboSpan" id="kobo.561.1">details route:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.562.1">Rename </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">dashboard.expenses.1.tsx</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.564.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.565.1">dashboard.expenses.$id.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.567.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">$</span></strong><span class="koboSpan" id="kobo.569.1"> symbol is part of Remix’s routing convention and declares a parameter for a dynamic </span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">route segment.</span></span></p></li>
<li><span class="koboSpan" id="kobo.571.1">Next, update</span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.572.1"> the code inside the file and add the following </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">mock data:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.574.1">
const data = [  {    id: 1,    title: 'Food',    amount: 100,  },  {    id: 2,    title: 'Transport',    amount: 100,  },  {    id: 3,    title: 'Entertainment',    amount: 100,  },];</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.575.1">The mock data acts as our data source for now. </span><span class="koboSpan" id="kobo.575.2">We will add a real database in </span><a href="B17399_05.xhtml#_idTextAnchor078"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.576.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.577.1">, </span><em class="italic"><span class="koboSpan" id="kobo.578.1">Fetching and </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.579.1">Mutating Data</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">.</span></span></p></li> <li><span class="koboSpan" id="kobo.581.1">After that, add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.582.1">loader</span></strong><span class="koboSpan" id="kobo.583.1"> function with the </span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">following code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.585.1">
import type { LoaderFunctionArgs } from '@remix-run/node';import { json } from '@remix-run/node';export function loader({ </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">params</span></strong><span class="koboSpan" id="kobo.587.1"> }: LoaderFunctionArgs) {  </span><strong class="bold"><span class="koboSpan" id="kobo.588.1">const { id } = params;</span></strong><span class="koboSpan" id="kobo.589.1">  const expense = data.find((expense) =&gt; expense.id === Number(id));  if (!expense) throw new Response('Not found', { status: 404 });  </span><strong class="bold"><span class="koboSpan" id="kobo.590.1">return json(expense);</span></strong><span class="koboSpan" id="kobo.591.1">}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.592.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">loader</span></strong><span class="koboSpan" id="kobo.594.1"> function</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.595.1"> runs server-side before its route component is rendered. </span><span class="koboSpan" id="kobo.595.2">It is the perfect place to fetch data (on the server) dynamically based on </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">route parameters.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.597.1">Remix exposes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">LoaderFunctionArgs</span></strong><span class="koboSpan" id="kobo.599.1"> type to type the </span><strong class="source-inline"><span class="koboSpan" id="kobo.600.1">loader</span></strong><span class="koboSpan" id="kobo.601.1"> function’s arguments. </span><span class="koboSpan" id="kobo.601.2">As visible in the code, Remix provides a </span><strong class="source-inline"><span class="koboSpan" id="kobo.602.1">params</span></strong><span class="koboSpan" id="kobo.603.1"> argument that can be used to access the route parameters of the </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">current URL.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.605.1">Using a parameterized route, we can now utilize the </span><strong class="source-inline"><span class="koboSpan" id="kobo.606.1">params</span></strong><span class="koboSpan" id="kobo.607.1"> argument to access the dynamic values of our URL. </span><span class="koboSpan" id="kobo.607.2">We access the </span><strong class="source-inline"><span class="koboSpan" id="kobo.608.1">id</span></strong><span class="koboSpan" id="kobo.609.1"> parameter from the parameter argument and use it to find the right expense from our </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">mock data.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.611.1">We then return the expense object (using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">json</span></strong><span class="koboSpan" id="kobo.613.1"> helper function provided by Remix). </span><span class="koboSpan" id="kobo.613.2">We will learn more about server-side data fetching and Remix’s server-side conventions and primitives in </span><a href="B17399_05.xhtml#_idTextAnchor078"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.614.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.615.1">, </span><em class="italic"><span class="koboSpan" id="kobo.616.1">Fetching and </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.617.1">Mutating Data</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">.</span></span></p></li> <li><span class="koboSpan" id="kobo.619.1">In the file’s route component, we can access the loader response data with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">useLoaderData</span></strong><span class="koboSpan" id="kobo.621.1"> hook. </span><span class="koboSpan" id="kobo.621.2">Update the existing component code </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.623.1">
import { useLoaderData } from '@remix-run/react';export default function Component {</span><strong class="bold"><span class="koboSpan" id="kobo.624.1">  const expense = useLoaderData&lt;typeof loader&gt;();</span></strong><span class="koboSpan" id="kobo.625.1">  return (    &lt;div className="w-full h-full p-8"&gt;      &lt;H2&gt;{</span><strong class="bold"><span class="koboSpan" id="kobo.626.1">expense.title</span></strong><span class="koboSpan" id="kobo.627.1">}&lt;/H2&gt;      &lt;p&gt;${</span><strong class="bold"><span class="koboSpan" id="kobo.628.1">expense.amount</span></strong><span class="koboSpan" id="kobo.629.1">}&lt;/p&gt;    &lt;/div&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.630.1">Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">useLoaderData</span></strong><span class="koboSpan" id="kobo.632.1"> hook provides access to the route module’s loader data. </span><span class="koboSpan" id="kobo.632.2">In our case, we returned an expense object that we can now access in our </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">React application.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.634.1">We </span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.635.1">pass </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">typeof loader</span></strong><span class="koboSpan" id="kobo.637.1"> as the generic type variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.638.1">userLoaderData</span></strong><span class="koboSpan" id="kobo.639.1"> to infer the type of the loader data, based on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.640.1">loader</span></strong><span class="koboSpan" id="kobo.641.1"> function’s return value. </span><span class="koboSpan" id="kobo.641.2">These type hints are great </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">for autocompletion.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.643.1">With that, we have created a dynamic route that renders its content based on </span><span class="No-Break"><span class="koboSpan" id="kobo.644.1">the URL!</span></span></p></li> <li><span class="koboSpan" id="kobo.645.1">Make sure to test the implementation. </span><span class="koboSpan" id="kobo.645.2">Use the anchor tags of the expenses list to navigate between the different expenses </span><span class="No-Break"><span class="koboSpan" id="kobo.646.1">details routes.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.647.1">As visible in the code, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">loader</span></strong><span class="koboSpan" id="kobo.649.1"> function throws a </span><strong class="bold"><span class="koboSpan" id="kobo.650.1">404 Not Found</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.651.1">Response</span></strong><span class="koboSpan" id="kobo.652.1"> if no expense identifier matches the route parameter. </span><span class="koboSpan" id="kobo.652.2">If you see an error, double-check that the identifier exists in the mock expenses array. </span><span class="koboSpan" id="kobo.652.3">And yes, you can throw </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">Response</span></strong><span class="koboSpan" id="kobo.654.1"> objects with Remix – something we will explore in the </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">next section.</span></span></p></li>
</ol>
<p><span class="koboSpan" id="kobo.656.1">Once you have tested your implementation, create a similar experience for the income page. </span><span class="koboSpan" id="kobo.656.2">This will help you practice what you have learned </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">so far.</span></span></p>
<p><span class="koboSpan" id="kobo.658.1">If you haven’t already, wrap </span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.659.1">each list element in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">dashboard.income.tsx</span></strong><span class="koboSpan" id="kobo.661.1"> file with an anchor element. </span><span class="koboSpan" id="kobo.661.2">Then, create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">dashboard.income.$id.tsx</span></strong><span class="koboSpan" id="kobo.663.1"> file and implement the </span><strong class="source-inline"><span class="koboSpan" id="kobo.664.1">loader</span></strong><span class="koboSpan" id="kobo.665.1"> function. </span><span class="koboSpan" id="kobo.665.2">In case you get stuck, review the implementation of the expenses details route and apply it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.666.1">dashboard.income.$id.tsx</span></strong><span class="koboSpan" id="kobo.667.1">. </span><span class="koboSpan" id="kobo.667.2">You can also refer to the troubleshooting process from </span><a href="B17399_02.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.668.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.669.1">, </span><em class="italic"><span class="koboSpan" id="kobo.670.1">Creating a New Remix App</span></em><span class="koboSpan" id="kobo.671.1">. </span><span class="koboSpan" id="kobo.671.2">Finally, you can find the final solution for this chapter </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">here: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/04-routing-in-remix/bee-rich"><span class="No-Break"><span class="koboSpan" id="kobo.673.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/04-routing-in-remix/bee-rich</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.674.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.675.1">In this section, </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.676.1">you learned how </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.677.1">to work with dynamic route segments and how to declare route parameters. </span><span class="koboSpan" id="kobo.677.2">You also got a short introduction to Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.678.1">loader</span></strong><span class="koboSpan" id="kobo.679.1"> function and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">useLoaderData</span></strong><span class="koboSpan" id="kobo.681.1"> hook. </span><span class="koboSpan" id="kobo.681.2">In the following section, we will utilize shared layouts to improve our application’s look </span><span class="No-Break"><span class="koboSpan" id="kobo.682.1">and feel.</span></span></p>
<h1 id="_idParaDest-71"><a id="_idTextAnchor068"/><span class="koboSpan" id="kobo.683.1">Sharing layouts</span></h1>
<p><span class="koboSpan" id="kobo.684.1">Nested routing </span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.685.1">enables us to compose a page from a nested route hierarchy. </span><span class="koboSpan" id="kobo.685.2">In this section, we will utilize parent routes to reuse layouts between nested child routes. </span><span class="koboSpan" id="kobo.685.3">We will also learn how to share code between routes without creating new segments in the URL, with pathless </span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">layout routes.</span></span></p>
<h2 id="_idParaDest-72"><a id="_idTextAnchor069"/><span class="koboSpan" id="kobo.687.1">Using parent layout routes</span></h2>
<p><span class="koboSpan" id="kobo.688.1">Let’s improve the</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.689.1"> look and feel of the BeeRich </span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.690.1">dashboard. </span><span class="koboSpan" id="kobo.690.2">Ideally, a user should be able to quickly switch between the income and expenses overview pages. </span><span class="koboSpan" id="kobo.690.3">It’s time to add a </span><span class="No-Break"><span class="koboSpan" id="kobo.691.1">navigation bar.</span></span></p>
<p><span class="koboSpan" id="kobo.692.1">We already utilized parent layout routes for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.693.1">dashboard/expenses</span></strong><span class="koboSpan" id="kobo.694.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">dashboard/income</span></strong><span class="koboSpan" id="kobo.696.1"> pages. </span><span class="koboSpan" id="kobo.696.2">By rendering the list of expenses and income in a parent route (</span><strong class="source-inline"><span class="koboSpan" id="kobo.697.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.698.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.699.1">dashboard.income.tsx</span></strong><span class="koboSpan" id="kobo.700.1">, respectively), we nested the content of the child routes on the </span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">same page.</span></span></p>
<p><span class="koboSpan" id="kobo.702.1">Now, we will take advantage of nested routing again to add a shared navigation bar to all dashboard pages. </span><span class="koboSpan" id="kobo.702.2">Follow </span><span class="No-Break"><span class="koboSpan" id="kobo.703.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.704.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.705.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.706.1"> file inside the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.707.1">routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.708.1"> folder.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.709.1">Since the </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.711.1"> route module matches the </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">dashboard</span></strong><span class="koboSpan" id="kobo.713.1"> path segment, it acts as the parent route for the segment’s nested </span><span class="No-Break"><span class="koboSpan" id="kobo.714.1">route modules.</span></span></p></li>
<li><span class="koboSpan" id="kobo.715.1">Add the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">dashboard.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.719.1">
import { Outlet } from '@remix-run/react';import { Container } from '~/components/containers';export default function Component() {  return (    &lt;&gt;      &lt;header&gt;        &lt;Container className="p-4 mb-10"&gt;          &lt;nav&gt;            &lt;ul className="w-full flex flex-row gap-5 font-bold               text-lg lg:text-2xl"&gt;              &lt;li&gt;                &lt;a href="/"&gt;BeeRich&lt;/a&gt;              &lt;/li&gt;              &lt;li className="ml-auto"&gt;                &lt;a href="/404"&gt;Log out&lt;/a&gt;              &lt;/li&gt;            &lt;/ul&gt;            &lt;ul className="mt-10 w-full flex flex-row gap-5"&gt;              &lt;li className="ml-auto"&gt;                &lt;a href="/dashboard/income"&gt;Income&lt;/a&gt;              &lt;/li&gt;              &lt;li className="mr-auto"&gt;                &lt;a href="/dashboard/expenses"&gt;Expenses&lt;/a&gt;              &lt;/li&gt;            &lt;/ul&gt;          &lt;/nav&gt;        &lt;/Container&gt;      &lt;/header&gt;      &lt;main className="p-4 w-full flex justify-center items-        center"&gt;        &lt;Outlet /&gt;      &lt;/main&gt;    &lt;/&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.720.1">The code adds a navigation bar inside an HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">header</span></strong><span class="koboSpan" id="kobo.722.1"> element and renders Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">Outlet</span></strong><span class="koboSpan" id="kobo.724.1"> component inside a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">main</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.726.1"> element.</span></span></p></li> <li><span class="koboSpan" id="kobo.727.1">Run the</span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.728.1"> app (</span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1">npm run dev</span></strong><span class="koboSpan" id="kobo.730.1">), and </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.731.1">visit </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">/dashboard/expenses</span></strong><span class="koboSpan" id="kobo.733.1"> in your browser window to review </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">the changes.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.735.1">As visible in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.736.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.737.1">.3</span></em><span class="koboSpan" id="kobo.738.1">, by adding a parent route module, we wrap every child route of </span><strong class="source-inline"><span class="koboSpan" id="kobo.739.1">dashboard</span></strong><span class="koboSpan" id="kobo.740.1"> with the markup rendered inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.742.1">. </span><span class="koboSpan" id="kobo.742.2">Layout routes provide a great way to wrap all child routes in a </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">common layout.</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer014">
<span class="koboSpan" id="kobo.744.1"><img alt="Figure 4.3 – A screenshot of the expenses page with a shared dashboard layout" src="image/Figure_4.03_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.745.1">Figure 4.3 – A screenshot of the expenses page with a shared dashboard layout</span></p>
<p><span class="koboSpan" id="kobo.746.1">Let’s also add a navigation bar to our login, signup, and home (</span><strong class="source-inline"><span class="koboSpan" id="kobo.747.1">_index.tsx</span></strong><span class="koboSpan" id="kobo.748.1">) pages. </span><span class="koboSpan" id="kobo.748.2">We could again use a parent layout route to share a common layout. </span><span class="koboSpan" id="kobo.748.3">However, this would add a new </span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.749.1">route segment to the path. </span><span class="koboSpan" id="kobo.749.2">It turns out that adding a parent route is not what we want. </span><span class="koboSpan" id="kobo.749.3">A parent route would alter the URL, but the </span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.750.1">home page should be located at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.751.1">/</span></strong><span class="koboSpan" id="kobo.752.1">path. </span><span class="koboSpan" id="kobo.752.2">Likewise, we want the login page to be located at </span><strong class="source-inline"><span class="koboSpan" id="kobo.753.1">/login</span></strong><span class="koboSpan" id="kobo.754.1"> and signup at </span><strong class="source-inline"><span class="koboSpan" id="kobo.755.1">/signup</span></strong><span class="koboSpan" id="kobo.756.1">. </span><span class="koboSpan" id="kobo.756.2">Instead, let’s see how we can make a layout </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">route pathless.</span></span></p>
<h2 id="_idParaDest-73"><a id="_idTextAnchor070"/><span class="koboSpan" id="kobo.758.1">Using pathless layout routes</span></h2>
<p><span class="koboSpan" id="kobo.759.1">Luckily, Remix </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.760.1">has a way of declaring </span><strong class="bold"><span class="koboSpan" id="kobo.761.1">pathless layout routes</span></strong><span class="koboSpan" id="kobo.762.1">, or pathless routes for short. </span><span class="koboSpan" id="kobo.762.2">Like how the </span><strong class="source-inline"><span class="koboSpan" id="kobo.763.1">$</span></strong><span class="koboSpan" id="kobo.764.1"> symbol declares a parameterized route </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.765.1">module, using an underscore prefix (</span><strong class="source-inline"><span class="koboSpan" id="kobo.766.1">_</span></strong><span class="koboSpan" id="kobo.767.1">) declares a pathless layout route. </span><span class="koboSpan" id="kobo.767.2">Pathless routes behave just like parent layout routes but do not add segments to the </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">URL path.</span></span></p>
<p><span class="koboSpan" id="kobo.769.1">Let’s add a pathless layout route to share a layout between the login, signup, and </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">home pages:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.771.1">Create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">_layout.tsx</span></strong><span class="koboSpan" id="kobo.773.1"> file in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.774.1">routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.775.1"> folder.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.776.1">The underscore tells Remix to treat the route module as pathless. </span><span class="koboSpan" id="kobo.776.2">The route module’s name will not be added to the URL. </span><span class="koboSpan" id="kobo.776.3">You already know the underscore prefix from index routes, which serves a </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">similar purpose.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.778.1">Note that the chosen name, </span><strong class="source-inline"><span class="koboSpan" id="kobo.779.1">layout</span></strong><span class="koboSpan" id="kobo.780.1">, is not part of the convention – you can name the route module as </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">you like.</span></span></p></li>
<li><span class="koboSpan" id="kobo.782.1">Next, add the following code to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.783.1">routes/_layout.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.784.1"> file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.785.1">
import { Outlet } from '@remix-run/react';export default function Component() {  return (    &lt;&gt;      &lt;header className="mb-4 lg:mb-10"&gt;        &lt;nav className="p-4"&gt;          &lt;ul className="w-full flex flex-row gap-5 text-lg             lg:text-2xl font-bold"&gt;            &lt;li&gt;              &lt;a href="/"&gt;Home&lt;/a&gt;            &lt;/li&gt;            &lt;li className="ml-auto"&gt;              &lt;a href="/login"&gt;Log in&lt;/a&gt;            &lt;/li&gt;            &lt;li&gt;              &lt;a href="/signup"&gt;Sign up&lt;/a&gt;            &lt;/li&gt;          &lt;/ul&gt;        &lt;/nav&gt;      &lt;/header&gt;      &lt;main className="p-4 w-full flex justify-center items-        center"&gt;        &lt;Outlet /&gt;      &lt;/main&gt;    &lt;/&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.786.1">The </span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.787.1">code </span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.788.1">adds a navigation bar and renders </span><strong class="source-inline"><span class="koboSpan" id="kobo.789.1">Outlet</span></strong><span class="koboSpan" id="kobo.790.1"> in a styled </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.791.1">main</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.792.1"> element.</span></span></p></li> <li><span class="koboSpan" id="kobo.793.1">Rename the </span><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">_index.tsx</span></strong><span class="koboSpan" id="kobo.795.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">login.tsx</span></strong><span class="koboSpan" id="kobo.797.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">signup.tsx</span></strong><span class="koboSpan" id="kobo.799.1"> route modules </span><strong class="source-inline"><span class="koboSpan" id="kobo.800.1">_layout._index.tsx</span></strong><span class="koboSpan" id="kobo.801.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">_layout.login.tsx</span></strong><span class="koboSpan" id="kobo.803.1">, and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.804.1">_layout.signup.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">, respectively.</span></span></li>
<li><span class="koboSpan" id="kobo.806.1">Remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.807.1">main</span></strong><span class="koboSpan" id="kobo.808.1"> HTML tag from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.809.1">_index.tsx</span></strong><span class="koboSpan" id="kobo.810.1"> JSX code, as it is now already rendered by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">__layout.tsx</span></strong><span class="koboSpan" id="kobo.812.1"> module. </span><span class="koboSpan" id="kobo.812.2">That is the power of composition and nested routing. </span><span class="koboSpan" id="kobo.812.3">We can reduce code duplication and </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">reuse layouts.</span></span></li>
<li><span class="koboSpan" id="kobo.814.1">As always, make</span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.815.1"> sure to test your changes before moving on. </span><span class="koboSpan" id="kobo.815.2">Run the application, and visit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.816.1">/</span></strong><span class="koboSpan" id="kobo.817.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.818.1">/login</span></strong><span class="koboSpan" id="kobo.819.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.820.1">/signup</span></strong><span class="koboSpan" id="kobo.821.1"> pages by trying out the new </span><span class="No-Break"><span class="koboSpan" id="kobo.822.1">navigation bar.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.823.1">In this section, you</span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.824.1"> learned how to utilize layout routes to add common structure and styling to nested child routes. </span><span class="koboSpan" id="kobo.824.2">You were also introduced to pathless layout routes to share a layout without adding route segments to the URL path. </span><span class="koboSpan" id="kobo.824.3">In the following section, we will learn more about page navigations </span><span class="No-Break"><span class="koboSpan" id="kobo.825.1">in Remix.</span></span></p>
<h1 id="_idParaDest-74"><a id="_idTextAnchor071"/><span class="koboSpan" id="kobo.826.1">Handling navigations in Remix</span></h1>
<p><span class="koboSpan" id="kobo.827.1">So far, we have </span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.828.1">used anchor tags to navigate between pages. </span><span class="koboSpan" id="kobo.828.2">You might have noticed that every navigation – using an anchor tag – triggers a</span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.829.1"> full-page reload. </span><span class="koboSpan" id="kobo.829.2">This is the browser’s default behavior when navigating between pages. </span><span class="koboSpan" id="kobo.829.3">However, Remix also offers primitives for </span><span class="No-Break"><span class="koboSpan" id="kobo.830.1">client-side navigations.</span></span></p>
<p><span class="koboSpan" id="kobo.831.1">In this section, we will introduce you to Remix’s link components and Remix’s global navigation object. </span><span class="koboSpan" id="kobo.831.2">We will practice utilizing the navigation object to indicate page loads and learn more about server-side redirects </span><span class="No-Break"><span class="koboSpan" id="kobo.832.1">with Remix.</span></span></p>
<h2 id="_idParaDest-75"><a id="_idTextAnchor072"/><span class="koboSpan" id="kobo.833.1">Navigating with Remix’s link components</span></h2>
<p><span class="koboSpan" id="kobo.834.1">By default, a page navigation triggers a document request to the web server of the resource. </span><span class="koboSpan" id="kobo.834.2">The web server </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.835.1">forwards the request to </span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.836.1">Remix (our HTTP request handler). </span><span class="koboSpan" id="kobo.836.2">Remix then renders a new document on the server to fulfill the request and responds with the rendered HTML document (or any other </span><span class="No-Break"><span class="koboSpan" id="kobo.837.1">HTTP response).</span></span></p>
<p><span class="koboSpan" id="kobo.838.1">When utilizing </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.839.1">Remix’s link components, Remix prevents the browser’s default behavior from making full-page requests. </span><span class="koboSpan" id="kobo.839.2">Instead, Remix </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.840.1">executes fetch requests using the web's Fetch API to fetch the required data for the requested URL. </span><span class="koboSpan" id="kobo.840.2">We avoid a full-page reload and instead execute a client-side navigation. </span><span class="koboSpan" id="kobo.840.3">Let's replace the anchor tags in BeeRich with Remix’s links components – </span><strong class="source-inline"><span class="koboSpan" id="kobo.841.1">Link</span></strong><span class="koboSpan" id="kobo.842.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.843.1">NavLink</span></strong><span class="koboSpan" id="kobo.844.1">. </span><span class="koboSpan" id="kobo.844.2">You can find styled example implementations for both link components in </span><strong class="source-inline"><span class="koboSpan" id="kobo.845.1">/app/components/links.tsx</span></strong><span class="koboSpan" id="kobo.846.1">. </span><span class="koboSpan" id="kobo.846.2">For more information about the two components, visit the React Router </span><span class="No-Break"><span class="koboSpan" id="kobo.847.1">documentation: </span></span><a href="https://reactrouter.com/en/6.15.0/components/nav-link"><span class="No-Break"><span class="koboSpan" id="kobo.848.1">https://reactrouter.com/en/6.15.0/components/nav-link</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.849.1">:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.850.1">Fiirst, replace the anchor tags in </span><strong class="source-inline"><span class="koboSpan" id="kobo.851.1">routes/_layout.tsx</span></strong><span class="koboSpan" id="kobo.852.1"> with. </span><span class="koboSpan" id="kobo.852.2">Update the code </span><span class="No-Break"><span class="koboSpan" id="kobo.853.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.854.1">
import { Outlet } from '@remix-run/react';</span><strong class="bold"><span class="koboSpan" id="kobo.855.1">import { NavLink } from '~/components/links';</span></strong><span class="koboSpan" id="kobo.856.1">export default function Component() {  return (    &lt;&gt;      &lt;header className="mb-4 lg:mb-10"&gt;        &lt;nav className="p-4"&gt;          &lt;ul className="w-full flex flex-row gap-5 text-lg             lg:text-2xl font-bold"&gt;            &lt;li&gt;              </span><strong class="bold"><span class="koboSpan" id="kobo.857.1">&lt;NavLink to="/"&gt;Home&lt;/NavLink&gt;</span></strong><span class="koboSpan" id="kobo.858.1">            &lt;/li&gt;            &lt;li className="ml-auto"&gt;              </span><strong class="bold"><span class="koboSpan" id="kobo.859.1">&lt;NavLink to="/login"&gt;Log in&lt;/NavLink&gt;</span></strong><span class="koboSpan" id="kobo.860.1">            &lt;/li&gt;            &lt;li&gt;              </span><strong class="bold"><span class="koboSpan" id="kobo.861.1">&lt;NavLink to="/signup"&gt;Sign up&lt;/NavLink&gt;</span></strong><span class="koboSpan" id="kobo.862.1">            &lt;/li&gt;          &lt;/ul&gt;        &lt;/nav&gt;      &lt;/header&gt;      &lt;main className="p-4 w-full flex justify-center items-        center"&gt;        &lt;Outlet /&gt;      &lt;/main&gt;    &lt;/&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.863.1">Instead of using Remix's NavLink component directly, we use a styled </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">wrapper component.</span></span></p></li> <li><span class="koboSpan" id="kobo.865.1">Next, run the application (`npm run dev`) and open it in a browser window. </span><span class="koboSpan" id="kobo.865.2">Navigate to the home page of the app. </span><span class="koboSpan" id="kobo.865.3">The </span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.866.1">navigation bar should now show three decently </span><span class="No-Break"><span class="koboSpan" id="kobo.867.1">styled links.</span></span></li>
<li><span class="koboSpan" id="kobo.868.1">On the home page, click on either the </span><strong class="bold"><span class="koboSpan" id="kobo.869.1">Log in</span></strong><span class="koboSpan" id="kobo.870.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.871.1">Sign up</span></strong><span class="koboSpan" id="kobo.872.1"> link. </span><span class="koboSpan" id="kobo.872.2">You should see that the favicon in the tab of the browser window no longer indicates a full-page reload. </span><span class="koboSpan" id="kobo.872.3">Instead, Remix now fetches the required data and assets using JavaScript’s Fetch API, performing a client-side navigation. </span><span class="koboSpan" id="kobo.872.4">With these changes, our Remix app feels much more like </span><span class="No-Break"><span class="koboSpan" id="kobo.873.1">an SPA.</span></span></li>
<li><span class="koboSpan" id="kobo.874.1">Now, let’s refactor the code of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.875.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.876.1"> parent route. </span><span class="koboSpan" id="kobo.876.2">Import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.877.1">Container</span></strong><span class="koboSpan" id="kobo.878.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">NavLink</span></strong><span class="koboSpan" id="kobo.880.1"> components from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.881.1">components</span></strong><span class="koboSpan" id="kobo.882.1"> folder, import </span><strong class="source-inline"><span class="koboSpan" id="kobo.883.1">Link</span></strong><span class="koboSpan" id="kobo.884.1"> from </span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.885.1">Remix, and apply </span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.886.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.887.1">following changes:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.888.1">
import { </span><strong class="bold"><span class="koboSpan" id="kobo.889.1">Link as RemixLink</span></strong><span class="koboSpan" id="kobo.890.1">, Outlet } from '@remix-run/react';</span><strong class="bold"><span class="koboSpan" id="kobo.891.1">import { Container } from '~/components/containers';</span></strong><strong class="bold"><span class="koboSpan" id="kobo.892.1">import { NavLink } from '~/components/links';</span></strong><span class="koboSpan" id="kobo.893.1">export default function Component() {  return (    &lt;&gt;      &lt;header&gt;        </span><strong class="bold"><span class="koboSpan" id="kobo.894.1">&lt;Container className="p-4 mb-10"&gt;</span></strong><span class="koboSpan" id="kobo.895.1">          &lt;nav&gt;            &lt;ul className="w-full flex flex-row gap-5 font-bold               text-lg lg:text-2xl"&gt;              &lt;li&gt;                </span><strong class="bold"><span class="koboSpan" id="kobo.896.1">&lt; RemixLink to="/"&gt;BeeRich&lt;/RemixLink&gt;</span></strong><span class="koboSpan" id="kobo.897.1">              &lt;/li&gt;              &lt;li className="ml-auto"&gt;                </span><strong class="bold"><span class="koboSpan" id="kobo.898.1">&lt;RemixLink to="/404"&gt;Log out&lt;/RemixLink&gt;</span></strong><span class="koboSpan" id="kobo.899.1">              &lt;/li&gt;            &lt;/ul&gt;            &lt;ul className="mt-10 w-full flex flex-row gap-5"&gt;              &lt;li className="ml-auto"&gt;                </span><strong class="bold"><span class="koboSpan" id="kobo.900.1">&lt;NavLink to="/dashboard/income"&gt;Income&lt;/NavLink&gt;</span></strong><span class="koboSpan" id="kobo.901.1">              &lt;/li&gt;              &lt;li className="mr-auto"&gt;                </span><strong class="bold"><span class="koboSpan" id="kobo.902.1">&lt;NavLink to="/dashboard/expenses"&gt;Expenses&lt;/                  NavLink&gt;</span></strong><span class="koboSpan" id="kobo.903.1">              &lt;/li&gt;            &lt;/ul&gt;          &lt;/nav&gt;        </span><strong class="bold"><span class="koboSpan" id="kobo.904.1">&lt;/Container&gt;</span></strong><span class="koboSpan" id="kobo.905.1">      &lt;/header&gt;      &lt;main className="p-4 w-full flex justify-center items-        center"&gt;        &lt;Outlet /&gt;      &lt;/main&gt;    &lt;/&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.906.1">We renamed Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.907.1">Link</span></strong><span class="koboSpan" id="kobo.908.1"> components </span><strong class="source-inline"><span class="koboSpan" id="kobo.909.1">RemixLink</span></strong><span class="koboSpan" id="kobo.910.1"> to highlight that we are not using our own </span><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">Link</span></strong><span class="koboSpan" id="kobo.912.1"> wrapper component. </span><span class="koboSpan" id="kobo.912.2">We </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.913.1">also utilize another wrapper </span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.914.1">component – </span><strong class="source-inline"><span class="koboSpan" id="kobo.915.1">Container</span></strong><span class="koboSpan" id="kobo.916.1"> – to reuse some </span><span class="No-Break"><span class="koboSpan" id="kobo.917.1">additional styling.</span></span></p></li> <li><span class="koboSpan" id="kobo.918.1">Next, refactor </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.919.1">the </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">dashboard.expenses.tsx</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.921.1">route module:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.922.1">
import { Outlet } from '@remix-run/react';import { H1 } from '~/components/headings';</span><strong class="bold"><span class="koboSpan" id="kobo.923.1">import { ListLinkItem } from '~/components/links';</span></strong><span class="koboSpan" id="kobo.924.1">export default function Component() {  return (    &lt;div className="w-full"&gt;      &lt;H1&gt;Your expenses&lt;/H1&gt;      &lt;div className="mt-10 w-full flex flex-col-reverse         lg:flex-row"&gt;        &lt;section className="lg:p-8 w-full lg:max-w-2xl"&gt;          &lt;h2 className="sr-only"&gt;All expenses&lt;/h2&gt;          &lt;ul className="flex flex-col"&gt;            </span><strong class="bold"><span class="koboSpan" id="kobo.925.1">&lt;ListLinkItem to="/dashboard/expenses/1"&gt;</span></strong><span class="koboSpan" id="kobo.926.1">              &lt;p className="text-xl font-semibold"&gt;Food&lt;/p&gt;              &lt;p&gt;$100&lt;/p&gt;            </span><strong class="bold"><span class="koboSpan" id="kobo.927.1">&lt;/ListLinkItem&gt;</span></strong><span class="koboSpan" id="kobo.928.1">            </span><strong class="bold"><span class="koboSpan" id="kobo.929.1">&lt;ListLinkItem to="/dashboard/expenses/2"&gt;</span></strong><span class="koboSpan" id="kobo.930.1">              &lt;p className="text-xl font-semibold"&gt;Transport&lt;/p&gt;              &lt;p&gt;$100&lt;/p&gt;            </span><strong class="bold"><span class="koboSpan" id="kobo.931.1">&lt;/ListLinkItem&gt;</span></strong><span class="koboSpan" id="kobo.932.1">            </span><strong class="bold"><span class="koboSpan" id="kobo.933.1">&lt;ListLinkItem to="/dashboard/expenses/3"&gt;</span></strong><span class="koboSpan" id="kobo.934.1">              &lt;p className="text-xl font-semibold"&gt;Entertainment                 &lt;/p&gt;              &lt;p&gt;$100&lt;/p&gt;            </span><strong class="bold"><span class="koboSpan" id="kobo.935.1">&lt;/ListLinkItem&gt;</span></strong><span class="koboSpan" id="kobo.936.1">          &lt;/ul&gt;        &lt;/section&gt;        &lt;Outlet /&gt;      &lt;/div&gt;    &lt;/div&gt;  );}</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.937.1">We use </span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.938.1">the reusable </span><strong class="source-inline"><span class="koboSpan" id="kobo.939.1">ListLinkItem</span></strong><span class="koboSpan" id="kobo.940.1"> component from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">components</span></strong><span class="koboSpan" id="kobo.942.1"> folder to add custom styling to the</span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.943.1"> expenses list. </span><span class="koboSpan" id="kobo.943.2">Under the hood, the component renders Remix’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">NavLink</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.945.1"> component.</span></span></p></li> <li><span class="koboSpan" id="kobo.946.1">Also, replace the anchor tags in </span><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">dashboard.income.tsx</span></strong><span class="koboSpan" id="kobo.948.1"> with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.949.1">ListLinkItem</span></strong><span class="koboSpan" id="kobo.950.1"> component. </span><span class="koboSpan" id="kobo.950.2">Use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.952.1"> file </span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">for reference.</span></span></li>
<li><span class="koboSpan" id="kobo.954.1">Run the application locally, and visit a browser window. </span><span class="koboSpan" id="kobo.954.2">Test the links on the expenses and income overview pages. </span><span class="koboSpan" id="kobo.954.3">Note how Remix no longer executes full-page reloads to navigate between </span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">the pages.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.956.1">Opting for Remix’s link components avoids page reloads. </span><span class="koboSpan" id="kobo.956.2">With full-page reloads, we must re-fetch all data on every navigation. </span><span class="koboSpan" id="kobo.956.3">When using Remix’s link components, Remix only fetches the data required for newly added route modules. </span><span class="koboSpan" id="kobo.956.4">However, we can also see that Remix works just fine when using anchor tags. </span><span class="koboSpan" id="kobo.956.5">Remix enhances the experience with JavaScript where possible but can fall back to a browser’s default behavior </span><span class="No-Break"><span class="koboSpan" id="kobo.957.1">if necessary.</span></span></p>
<p><span class="koboSpan" id="kobo.958.1">Sometimes, when </span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.959.1">we </span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.960.1">attempt to enhance the experience with JavaScript, we might accidentally degrade the experience instead. </span><span class="koboSpan" id="kobo.960.2">By default, a browser replaces the tab's favicon with a loading indicator during page load. </span><span class="koboSpan" id="kobo.960.3">Without a full-page reload, we lose any indication that a page transition is happening. </span><span class="koboSpan" id="kobo.960.4">This is especially frustrating for users with slower internet connections. </span><span class="koboSpan" id="kobo.960.5">In the following section, we will utilize Remix’s global transition object to re-add page </span><span class="No-Break"><span class="koboSpan" id="kobo.961.1">loading indicators.</span></span></p>
<h2 id="_idParaDest-76"><a id="_idTextAnchor073"/><span class="koboSpan" id="kobo.962.1">Indicating page transitions</span></h2>
<p><span class="koboSpan" id="kobo.963.1">You might </span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.964.1">ask yourself why we would need page load indicators. </span><span class="koboSpan" id="kobo.964.2">Navigations are so fast on </span><strong class="source-inline"><span class="koboSpan" id="kobo.965.1">localhost</span></strong><span class="koboSpan" id="kobo.966.1"> that you barely notice them. </span><span class="koboSpan" id="kobo.966.2">However, they can feel brutally long on </span><strong class="bold"><span class="koboSpan" id="kobo.967.1">slow 3G</span></strong><span class="koboSpan" id="kobo.968.1"> connections. </span><span class="koboSpan" id="kobo.968.2">Let’s prove that page transitions </span><span class="No-Break"><span class="koboSpan" id="kobo.969.1">are necessary:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.970.1">Run BeeRich by executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.971.1">npm run dev</span></strong><span class="koboSpan" id="kobo.972.1"> in the project’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.973.1">root</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.974.1"> folder.</span></span></li>
<li><span class="koboSpan" id="kobo.975.1">Open the application in your browser by </span><span class="No-Break"><span class="koboSpan" id="kobo.976.1">visiting </span></span><a href="http://localhost:3000"><span class="No-Break"><span class="koboSpan" id="kobo.977.1">http://localhost:3000</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.978.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.979.1">Open the developer tools of your browser, and navigate to the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.980.1">Network</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.981.1"> tab.</span></span></li>
<li><span class="koboSpan" id="kobo.982.1">Search for the throttling functionality, and select </span><strong class="bold"><span class="koboSpan" id="kobo.983.1">Slow 3G</span></strong><span class="koboSpan" id="kobo.984.1"> from the </span><span class="No-Break"><span class="koboSpan" id="kobo.985.1">provided dropdown.</span></span></li>
<li><span class="koboSpan" id="kobo.986.1">Also, check the </span><strong class="bold"><span class="koboSpan" id="kobo.987.1">Disable cache</span></strong><span class="koboSpan" id="kobo.988.1"> checkbox to simulate a user’s </span><span class="No-Break"><span class="koboSpan" id="kobo.989.1">first visit.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.990.1">All popular browsers offer similar settings. </span><span class="koboSpan" id="kobo.990.2">Search on Google if you can’t find the described throttle and </span><span class="No-Break"><span class="koboSpan" id="kobo.991.1">cache functionalities.</span></span></p></li>
<li><span class="koboSpan" id="kobo.992.1">Make sure to reload the browser window to reset the </span><span class="No-Break"><span class="koboSpan" id="kobo.993.1">browser cache.</span></span></li>
<li><span class="koboSpan" id="kobo.994.1">Finally, navigate between the different pages of </span><span class="No-Break"><span class="koboSpan" id="kobo.995.1">your app.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer015">
<span class="koboSpan" id="kobo.996.1"><img alt="Figure 4.4 – A screenshot of the Network tab of the Chrome DevTools" src="image/Figure_4.04_B17399.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.997.1">Figure 4.4 – A screenshot of the Network tab of the Chrome DevTools</span></p>
<p><span class="koboSpan" id="kobo.998.1">How is the </span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.999.1">experience? </span><span class="koboSpan" id="kobo.999.2">Using a slow internet connection shows how important loading indicators are. </span><span class="koboSpan" id="kobo.999.3">By removing the browser’s default behavior (the loading spinner on the browser window tab), we robbed the user of a clear loading indication. </span><span class="koboSpan" id="kobo.999.4">We degraded the user experience. </span><span class="koboSpan" id="kobo.999.5">Luckily, Remix provides a global navigation object, which we can use to re-add loading indicators </span><span class="No-Break"><span class="koboSpan" id="kobo.1000.1">with JavaScript.</span></span></p>
<p><span class="koboSpan" id="kobo.1001.1">First, let’s add a loading indicator to the expense and income </span><span class="No-Break"><span class="koboSpan" id="kobo.1002.1">detail views:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1003.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1004.1">/routes/dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.1005.1"> file, and import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1006.1">useNavigation</span></strong><span class="koboSpan" id="kobo.1007.1"> hook </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">from Remix:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1009.1">
import { Outlet, </span><strong class="bold"><span class="koboSpan" id="kobo.1010.1">useNavigation</span></strong><span class="koboSpan" id="kobo.1011.1"> } from '@remix-run/react';</span></pre></li> <li><span class="koboSpan" id="kobo.1012.1">Call the hook inside the route component to access the global </span><span class="No-Break"><span class="koboSpan" id="kobo.1013.1">navigation object:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1014.1">
  const navigation = </span><strong class="bold"><span class="koboSpan" id="kobo.1015.1">useNavigation();</span></strong><span class="koboSpan" id="kobo.1016.1">  console.log(navigation.state);</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.1017.1">The</span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.1018.1"> global navigation object provides information about the current navigation state. </span><span class="koboSpan" id="kobo.1018.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1019.1">navigation.state</span></strong><span class="koboSpan" id="kobo.1020.1"> property can have one of the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1021.1">three values:</span></span></p><ul><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1022.1">idle</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1023.1">loading</span></strong></span></li><li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1024.1">submitting</span></strong></span></li></ul></li> <li><span class="koboSpan" id="kobo.1025.1">Let’s see for ourselves! </span><span class="koboSpan" id="kobo.1025.2">Open a browser window, and navigate to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1026.1">expenses</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1027.1"> page.</span></span></li>
<li><span class="koboSpan" id="kobo.1028.1">Open the </span><strong class="bold"><span class="koboSpan" id="kobo.1029.1">Console</span></strong><span class="koboSpan" id="kobo.1030.1"> tab in the browser’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1031.1">developer tools.</span></span></li>
<li><span class="koboSpan" id="kobo.1032.1">Click on the different expenses in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1033.1">expenses list.</span></span><p class="list-inset"><strong class="source-inline"><span class="koboSpan" id="kobo.1034.1">navigation.state</span></strong><span class="koboSpan" id="kobo.1035.1"> is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1036.1">idle</span></strong><span class="koboSpan" id="kobo.1037.1"> if there is no page navigation. </span><span class="koboSpan" id="kobo.1037.2">On </span><strong class="source-inline"><span class="koboSpan" id="kobo.1038.1">GET</span></strong><span class="koboSpan" id="kobo.1039.1"> requests, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1040.1">navigation.state</span></strong><span class="koboSpan" id="kobo.1041.1"> is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1042.1">loading</span></strong><span class="koboSpan" id="kobo.1043.1">. </span><span class="koboSpan" id="kobo.1043.2">On form submissions, the state is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1044.1">submitting</span></strong><span class="koboSpan" id="kobo.1045.1"> and then </span><strong class="source-inline"><span class="koboSpan" id="kobo.1046.1">loading</span></strong><span class="koboSpan" id="kobo.1047.1"> (as every submission also involves a </span><span class="No-Break"><span class="koboSpan" id="kobo.1048.1">page navigation).</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.1049.1">With Remix, we can easily display pending UIs by checking the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1050.1">navigation.state</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1051.1"> value.</span></span></p></li>
<li><span class="koboSpan" id="kobo.1052.1">Let’s add a simple CSS animation to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1053.1">dashboard.expenses.tsx</span></strong><span class="koboSpan" id="kobo.1054.1">. </span><span class="koboSpan" id="kobo.1054.2">First, import </span><strong class="source-inline"><span class="koboSpan" id="kobo.1055.1">clsx</span></strong><span class="koboSpan" id="kobo.1056.1"> to manage the Tailwind </span><span class="No-Break"><span class="koboSpan" id="kobo.1057.1">CSS classes:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1058.1">
import clsx from 'clsx';</span></pre></li> <li><span class="koboSpan" id="kobo.1059.1">Then, wrap the existing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1060.1">Outlet</span></strong><span class="koboSpan" id="kobo.1061.1"> component by a </span><span class="No-Break"><span class="koboSpan" id="kobo.1062.1">styled section:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1063.1">&lt;section className={clsx('lg:p-8 w-full', navigation.state === 'loading' &amp;&amp; 'motion-safe:animate-pulse')}&gt;</span></strong><span class="koboSpan" id="kobo.1064.1">  &lt;Outlet /&gt;</span><strong class="bold"><span class="koboSpan" id="kobo.1065.1">&lt;/section&gt;</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.1066.1">We will check whether the navigation object is currently in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1067.1">loading</span></strong><span class="koboSpan" id="kobo.1068.1"> state and conditionally render Tailwind’s built-in </span><span class="No-Break"><span class="koboSpan" id="kobo.1069.1">pulse animation.</span></span></p></li> <li><span class="koboSpan" id="kobo.1070.1">Ensure</span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.1071.1"> that your browser window is still throttling the network bandwidth. </span><span class="koboSpan" id="kobo.1071.2">Click on the expense items in the expenses overview list, and note that the details view pulses when page navigations are </span><span class="No-Break"><span class="koboSpan" id="kobo.1072.1">in progress.</span></span></li>
<li><span class="koboSpan" id="kobo.1073.1">Add the same animation to`dashboard.income.tsx` to practice working with Remix's </span><span class="No-Break"><span class="koboSpan" id="kobo.1074.1">navigation object.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1075.1">Let’s also add a global progress bar to </span><span class="No-Break"><span class="koboSpan" id="kobo.1076.1">the application:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1077.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1078.1">root.tsx</span></strong><span class="koboSpan" id="kobo.1079.1"> file in </span><span class="No-Break"><span class="koboSpan" id="kobo.1080.1">your editor.</span></span></li>
<li><span class="koboSpan" id="kobo.1081.1">Import </span><strong class="source-inline"><span class="koboSpan" id="kobo.1082.1">PageTransitionProgressBar</span></strong><span class="koboSpan" id="kobo.1083.1"> from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1084.1">components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1085.1"> folder:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1086.1">
import { PageTransitionProgressBar } from './components/progress';</span></pre></li> <li><span class="koboSpan" id="kobo.1087.1">Then, render the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1088.1">PageTransitionProgressBar</span></strong><span class="koboSpan" id="kobo.1089.1"> component inside the root component. </span><span class="koboSpan" id="kobo.1089.2">This ensures that the component is rendered across all routes and pages of our application. </span><span class="koboSpan" id="kobo.1089.3">We place the component inside the body above the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1090.1">Outlet</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1091.1"> component:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1092.1">
&lt;body className="bg-background dark:bg-darkBackground text-lg text-text dark:text-darkText"&gt;  </span><strong class="bold"><span class="koboSpan" id="kobo.1093.1">&lt;PageTransitionProgressBar /&gt;</span></strong><span class="koboSpan" id="kobo.1094.1">  &lt;Outlet /&gt;  &lt;ScrollRestoration /&gt;  &lt;Scripts /&gt;  &lt;LiveReload /&gt;&lt;/body&gt;</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.1095.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1096.1">PageTransitionProgressBar</span></strong><span class="koboSpan" id="kobo.1097.1"> component uses the navigation object and tracks a CSS animation across the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1098.1">idle</span></strong><span class="koboSpan" id="kobo.1099.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1100.1">loading</span></strong><span class="koboSpan" id="kobo.1101.1">, and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1102.1">submitting</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1103.1"> states.</span></span></p></li> <li><span class="koboSpan" id="kobo.1104.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1105.1">components/progress</span></strong><span class="koboSpan" id="kobo.1106.1"> file in your editor, and review the implementation</span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.1107.1"> of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1108.1">PageTransitionProgressBar</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1109.1"> component.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1110.1">In this section, you learned how to utilize the navigation object and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1111.1">useNavigation</span></strong><span class="koboSpan" id="kobo.1112.1"> hook to indicate loading states to a user. </span><span class="koboSpan" id="kobo.1112.2">Now, we will wrap up the chapter by introducing </span><span class="No-Break"><span class="koboSpan" id="kobo.1113.1">server-side redirects.</span></span></p>
<h2 id="_idParaDest-77"><a id="_idTextAnchor074"/><span class="koboSpan" id="kobo.1114.1">Redirecting a user from the server</span></h2>
<p><span class="koboSpan" id="kobo.1115.1">Sometimes, the</span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.1116.1"> right place to trigger a navigation is on the server. </span><span class="koboSpan" id="kobo.1116.2">In Remix, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1117.1">loader</span></strong><span class="koboSpan" id="kobo.1118.1"> functions are a great place to check whether the requested resources exist and whether the user can access it. </span><span class="koboSpan" id="kobo.1118.2">In this section, you will learn more about server-side redirects </span><span class="No-Break"><span class="koboSpan" id="kobo.1119.1">in Remix.</span></span></p>
<p><span class="koboSpan" id="kobo.1120.1">Review the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1121.1">dashboard.expenses.$id.tsx</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1122.1">route file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1123.1">
export function loader({ params }: LoaderFunctionArgs) {  const { id } = params;
  const expense = data.find((expense) =&gt; expense.id === Number(id));
  if (!expense) </span><strong class="bold"><span class="koboSpan" id="kobo.1124.1">throw new Response('Not found', { status: 404 });</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1125.1">  return json(expense);</span></strong><span class="koboSpan" id="kobo.1126.1">
}</span></pre>
<p><span class="koboSpan" id="kobo.1127.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1128.1">loader</span></strong><span class="koboSpan" id="kobo.1129.1"> function, we access the route parameter to find the matching expense in the mock data. </span><span class="koboSpan" id="kobo.1129.2">If we cannot find an expense that matches the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1130.1">id</span></strong><span class="koboSpan" id="kobo.1131.1"> parameter, we throw a </span><strong class="bold"><span class="koboSpan" id="kobo.1132.1">404 Not found</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.1133.1">Response</span></strong><span class="koboSpan" id="kobo.1134.1">. </span><span class="koboSpan" id="kobo.1134.2">Throwing responses is a great way to stop the execution early and return an error response. </span><span class="koboSpan" id="kobo.1134.3">We will learn </span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.1135.1">more about how to handle thrown </span><strong class="source-inline"><span class="koboSpan" id="kobo.1136.1">Response</span></strong><span class="koboSpan" id="kobo.1137.1"> objects in </span><a href="B17399_07.xhtml#_idTextAnchor105"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1138.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.1139.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1140.1">Error Handling </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1141.1">in Remix</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1142.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1143.1">For now, let's focus on Remix's </span><strong class="source-inline"><span class="koboSpan" id="kobo.1144.1">request/response</span></strong><span class="koboSpan" id="kobo.1145.1"> flow. </span><span class="koboSpan" id="kobo.1145.2">It's important to understand that Remix operates both a frontend and a backend, following the client/server model of the web. </span><span class="koboSpan" id="kobo.1145.3">Our frontend app runs in the browser and makes requests to the web server (backend). </span><span class="koboSpan" id="kobo.1145.4">The backend application handles incoming HTTP requests and answers with </span><span class="No-Break"><span class="koboSpan" id="kobo.1146.1">HTTP responses.</span></span></p>
<p><span class="koboSpan" id="kobo.1147.1">The great thing about Remix's request/response model is that instead of being custom, it follows the web's Fetch API standard. </span><span class="koboSpan" id="kobo.1147.2">In `loader` functions, we return `Response` objects, following the Fetch API's `Response` </span><span class="No-Break"><span class="koboSpan" id="kobo.1148.1">specification: </span></span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><span class="No-Break"><span class="koboSpan" id="kobo.1149.1">https://developer.mozilla.org/en-US/docs/Web/API/Response</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1150.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1151.1">On top of that, Remix provides primitives to create </span><strong class="source-inline"><span class="koboSpan" id="kobo.1152.1">Response</span></strong><span class="koboSpan" id="kobo.1153.1"> objects. </span><span class="koboSpan" id="kobo.1153.2">Instead of creating </span><strong class="source-inline"><span class="koboSpan" id="kobo.1154.1">Response</span></strong><span class="koboSpan" id="kobo.1155.1"> objects ourselves, we can also use the following three </span><span class="No-Break"><span class="koboSpan" id="kobo.1156.1">helper functions:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1157.1">defer</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1158.1">json</span></strong></span></li>
<li><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1159.1">redirect</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1160.1">We have already used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1161.1">json</span></strong><span class="koboSpan" id="kobo.1162.1"> helper in our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1163.1">loader</span></strong><span class="koboSpan" id="kobo.1164.1"> function. </span><span class="koboSpan" id="kobo.1164.2">The helper returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1165.1">Response</span></strong><span class="koboSpan" id="kobo.1166.1"> object, with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1167.1">Content-Type</span></strong><span class="koboSpan" id="kobo.1168.1"> HTTP header to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1169.1">application/json</span></strong><span class="koboSpan" id="kobo.1170.1">. </span><span class="koboSpan" id="kobo.1170.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1171.1">redirect</span></strong><span class="koboSpan" id="kobo.1172.1"> helper creates </span><strong class="source-inline"><span class="koboSpan" id="kobo.1173.1">Response</span></strong><span class="koboSpan" id="kobo.1174.1"> with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1175.1">302</span></strong><span class="koboSpan" id="kobo.1176.1"> status code. </span><span class="koboSpan" id="kobo.1176.2">`defer` is an advanced helper for streaming responses. </span><span class="koboSpan" id="kobo.1176.3">We will practice working with defer in </span><a href="B17399_13.xhtml#_idTextAnchor194"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1177.1">Chapter 13</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.1178.1">, Deferring </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1179.1">Loader Data</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1180.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1181.1">Let’s use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1182.1">redirect</span></strong><span class="koboSpan" id="kobo.1183.1"> to fix a bug in our app. </span><span class="koboSpan" id="kobo.1183.2">Have you noticed what happens if you directly navigate to </span><a href="http://localhost:300/dashboard"><span class="koboSpan" id="kobo.1184.1">http://localhost:300/dashboard</span></a><span class="koboSpan" id="kobo.1185.1">? </span><span class="koboSpan" id="kobo.1185.2">We render an </span><span class="No-Break"><span class="koboSpan" id="kobo.1186.1">empty dashboard.</span></span></p>
<p><span class="koboSpan" id="kobo.1187.1">Can you think of a reason for that behavior? </span><span class="koboSpan" id="kobo.1187.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">/dashboard</span></strong><span class="koboSpan" id="kobo.1189.1"> path segment currently has no default child (a nested index route module). </span><span class="koboSpan" id="kobo.1189.2">Conclusively, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1190.1">/dashboard</span></strong><span class="koboSpan" id="kobo.1191.1"> path matches with neither of the child routes when visiting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1192.1">/dashboard</span></strong><span class="koboSpan" id="kobo.1193.1"> path. </span><span class="koboSpan" id="kobo.1193.2">When visiting </span><a href="http://localhost:300/dashboard"><span class="koboSpan" id="kobo.1194.1">http://localhost:300/dashboard</span></a><span class="koboSpan" id="kobo.1195.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1196.1">Outlet</span></strong><span class="koboSpan" id="kobo.1197.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1198.1">dashboard.tsx</span></strong><span class="koboSpan" id="kobo.1199.1"> returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1200.1">null</span></strong><span class="koboSpan" id="kobo.1201.1">, and our dashboard </span><span class="No-Break"><span class="koboSpan" id="kobo.1202.1">remains empty.</span></span></p>
<p><span class="koboSpan" id="kobo.1203.1">Sometimes, not having a default child route is not an issue. </span><span class="koboSpan" id="kobo.1203.2">On the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1204.1">/dashboard/expenses</span></strong><span class="koboSpan" id="kobo.1205.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1206.1">/dashboard/income</span></strong><span class="koboSpan" id="kobo.1207.1"> overview pages, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1208.1">Outlet</span></strong><span class="koboSpan" id="kobo.1209.1"> also returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1210.1">null</span></strong><span class="koboSpan" id="kobo.1211.1"> when no identifier is added to the URL. </span><span class="koboSpan" id="kobo.1211.2">Displaying an overview list without rendering a details view </span><span class="No-Break"><span class="koboSpan" id="kobo.1212.1">seems fine.</span></span></p>
<p><span class="koboSpan" id="kobo.1213.1">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.1214.1">/dashboard</span></strong><span class="koboSpan" id="kobo.1215.1">, we should think of a better solution than rendering an empty dashboard. </span><span class="koboSpan" id="kobo.1215.2">For instance, we could create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1216.1">dashboard._index.tsx</span></strong><span class="koboSpan" id="kobo.1217.1"> file and export a route component that renders a simple welcome message. </span><span class="koboSpan" id="kobo.1217.2">Or we redirect the user to </span><span class="No-Break"><span class="koboSpan" id="kobo.1218.1">another page!</span></span></p>
<p><span class="koboSpan" id="kobo.1219.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1220.1">dashboard._index.tsx</span></strong><span class="koboSpan" id="kobo.1221.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1222.1">routes</span></strong><span class="koboSpan" id="kobo.1223.1"> folder, and add the </span><span class="No-Break"><span class="koboSpan" id="kobo.1224.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1225.1">
import { </span><strong class="bold"><span class="koboSpan" id="kobo.1226.1">redirect</span></strong><span class="koboSpan" id="kobo.1227.1"> } from '@remix-run/node';export function loader() {
</span><strong class="bold"><span class="koboSpan" id="kobo.1228.1">  return redirect('/dashboard/expenses');</span></strong><span class="koboSpan" id="kobo.1229.1">
}</span></pre>
<p><span class="koboSpan" id="kobo.1230.1">With these </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.1231.1">simple four lines of code, we create our first resource route. </span><span class="koboSpan" id="kobo.1231.2">A resource route does not export a route component (otherwise, it would be a UI route). </span><span class="koboSpan" id="kobo.1231.3">Instead, a resource route exports a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1232.1">loader</span></strong><span class="koboSpan" id="kobo.1233.1"> function and/or </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1234.1">action</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1235.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.1236.1">Here, we use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1237.1">loader</span></strong><span class="koboSpan" id="kobo.1238.1"> function to immediately redirect the user to the expenses overview page. </span><span class="koboSpan" id="kobo.1238.2">If a user enters </span><a href="http://localhost:3000/dashboard"><span class="koboSpan" id="kobo.1239.1">http://localhost:3000/dashboard</span></a><span class="koboSpan" id="kobo.1240.1"> into the address bar, then the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1241.1">loader</span></strong><span class="koboSpan" id="kobo.1242.1"> function returns a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">Response</span></strong><span class="koboSpan" id="kobo.1244.1"> with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1245.1">30x</span></strong><span class="koboSpan" id="kobo.1246.1"> status code – </span><span class="No-Break"><span class="koboSpan" id="kobo.1247.1">a redirect.</span></span></p>
<p><span class="koboSpan" id="kobo.1248.1">Try it out by navigating to </span><a href="http://localhost:3000/dashboard"><span class="koboSpan" id="kobo.1249.1">http://localhost:3000/dashboard</span></a><span class="koboSpan" id="kobo.1250.1">. </span><span class="koboSpan" id="kobo.1250.2">In your terminal, the server logs should look </span><span class="No-Break"><span class="koboSpan" id="kobo.1251.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1252.1">
GET /dashboard 302 - - 2.918 msGET /dashboard/expenses 200 - - 8.031 ms</span></pre>
<p><span class="koboSpan" id="kobo.1253.1">On navigation to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1254.1">/dashboard</span></strong><span class="koboSpan" id="kobo.1255.1">, we redirect (the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1256.1">302</span></strong><span class="koboSpan" id="kobo.1257.1"> status code) to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1258.1">/dashboard/expenses</span></strong><span class="koboSpan" id="kobo.1259.1"> route, which is then served (the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1260.1">200</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1261.1">status code).</span></span></p>
<p><span class="koboSpan" id="kobo.1262.1">Note that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1263.1">redirect</span></strong><span class="koboSpan" id="kobo.1264.1"> is just a helper function to create a redirect </span><strong class="source-inline"><span class="koboSpan" id="kobo.1265.1">Response</span></strong><span class="koboSpan" id="kobo.1266.1"> object. </span><span class="koboSpan" id="kobo.1266.2">It is nothing more than a simple wrapper </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">for convenience:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.1268.1">
return new Response(null, {  status: </span><strong class="bold"><span class="koboSpan" id="kobo.1269.1">302</span></strong><span class="koboSpan" id="kobo.1270.1">,
  headers: {
    Location: </span><strong class="bold"><span class="koboSpan" id="kobo.1271.1">'/dashboard/expenses'</span></strong><span class="koboSpan" id="kobo.1272.1">,
  },
});</span></pre>
<p><span class="koboSpan" id="kobo.1273.1">Remix provides full access to the web platform. </span><span class="koboSpan" id="kobo.1273.2">You can create and return </span><strong class="source-inline"><span class="koboSpan" id="kobo.1274.1">Response</span></strong><span class="koboSpan" id="kobo.1275.1"> objects with varying status codes, instance properties, caching headers, and much more. </span><span class="koboSpan" id="kobo.1275.2">All you need to do is follow the MDN Web Docs (</span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"><span class="koboSpan" id="kobo.1276.1">https://developer.mozilla.org/en-US/docs/Web/API/Response</span></a><span class="koboSpan" id="kobo.1277.1">). </span><span class="koboSpan" id="kobo.1277.2">Later in this book, we will implement real-time functionality, add caching headers, and elegantly handle authentication errors, all by using the web platform’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1278.1">Response</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1279.1"> API.</span></span></p>
<p><span class="koboSpan" id="kobo.1280.1">In this section, you</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.1281.1"> learned about server-side redirects. </span><span class="koboSpan" id="kobo.1281.2">You now understand that Remix executes </span><strong class="source-inline"><span class="koboSpan" id="kobo.1282.1">loader</span></strong><span class="koboSpan" id="kobo.1283.1"> functions on the server and that </span><strong class="source-inline"><span class="koboSpan" id="kobo.1284.1">loader</span></strong><span class="koboSpan" id="kobo.1285.1"> functions must return a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1286.1">Response</span></strong><span class="koboSpan" id="kobo.1287.1"> object (or something that Remix can parse into a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1288.1">Response</span></strong><span class="koboSpan" id="kobo.1289.1"> object). </span><span class="koboSpan" id="kobo.1289.2">You also practiced redirecting a user from a resource route to a UI route. </span><span class="koboSpan" id="kobo.1289.3">Now, let’s reflect on what you learned in </span><span class="No-Break"><span class="koboSpan" id="kobo.1290.1">this chapter.</span></span></p>
<h1 id="_idParaDest-78"><a id="_idTextAnchor075"/><span class="koboSpan" id="kobo.1291.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1292.1">Remix provides a convention-based file-based router. </span><span class="koboSpan" id="kobo.1292.2">Arguably the most powerful feature of Remix’s router is nested routing. </span><span class="koboSpan" id="kobo.1292.3">In Remix, you create routes (route modules) as part of a hierarchy. </span><span class="koboSpan" id="kobo.1292.4">Remix’s router maps the pathname of the URL to a set of matching route modules. </span><span class="koboSpan" id="kobo.1292.5">Route modules make up the pages of your </span><span class="No-Break"><span class="koboSpan" id="kobo.1293.1">Remix application.</span></span></p>
<p><span class="koboSpan" id="kobo.1294.1">In this chapter, you created your first routes in Remix. </span><span class="koboSpan" id="kobo.1294.2">We started off by creating two standalone pages. </span><span class="koboSpan" id="kobo.1294.3">You learned about the special role of index routes as the default children of their parent routes. </span><span class="koboSpan" id="kobo.1294.4">You were also introduced to the exports available in Remix’s </span><span class="No-Break"><span class="koboSpan" id="kobo.1295.1">route modules.</span></span></p>
<p><span class="koboSpan" id="kobo.1296.1">Next, we created a nested route hierarchy for our dashboard. </span><span class="koboSpan" id="kobo.1296.2">We used parent layout routes and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1297.1">Outlet</span></strong><span class="koboSpan" id="kobo.1298.1"> component to reuse styling and content across different </span><span class="No-Break"><span class="koboSpan" id="kobo.1299.1">child routes.</span></span></p>
<p><span class="koboSpan" id="kobo.1300.1">We also used a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1301.1">loader</span></strong><span class="koboSpan" id="kobo.1302.1"> function and a route parameter to create routes for our income and expenses details views. </span><span class="koboSpan" id="kobo.1302.2">You learned how to declare parameterized route modules using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1303.1">$</span></strong><span class="koboSpan" id="kobo.1304.1"> syntax. </span><span class="koboSpan" id="kobo.1304.2">You also used Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1305.1">userLoaderData</span></strong><span class="koboSpan" id="kobo.1306.1"> hook to access JSON data returned from a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1307.1">loader</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1308.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.1309.1">Thereafter, we used pathless layout routes to share layouts across different child routes without adding a path segment to a URL. </span><span class="koboSpan" id="kobo.1309.2">You created a pathless route that wraps the login, signup, and home pages </span><span class="No-Break"><span class="koboSpan" id="kobo.1310.1">of BeeRich.</span></span></p>
<p><span class="koboSpan" id="kobo.1311.1">You also learned about navigations and transitions in Remix. </span><span class="koboSpan" id="kobo.1311.2">We replaced the HTML anchor tags with Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1312.1">Link</span></strong><span class="koboSpan" id="kobo.1313.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1314.1">NavLink</span></strong><span class="koboSpan" id="kobo.1315.1"> components. </span><span class="koboSpan" id="kobo.1315.2">Now, you understand the benefits of avoiding full-page reloads and know that Remix fetches required scripts and data on each </span><span class="No-Break"><span class="koboSpan" id="kobo.1316.1">page request.</span></span></p>
<p><span class="koboSpan" id="kobo.1317.1">You further learned about the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1318.1">useNavigation</span></strong><span class="koboSpan" id="kobo.1319.1"> hook and Remix’s navigation object. </span><span class="koboSpan" id="kobo.1319.2">You practiced adding loading indicators to a page by using the state property of the navigation object. </span><span class="koboSpan" id="kobo.1319.3">Finally, you learned more about the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1320.1">Request</span></strong><span class="koboSpan" id="kobo.1321.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1322.1">Response</span></strong><span class="koboSpan" id="kobo.1323.1"> model in Remix and how to redirect a user from </span><span class="No-Break"><span class="koboSpan" id="kobo.1324.1">the server.</span></span></p>
<p><span class="koboSpan" id="kobo.1325.1">In the following chapter, you will learn about data loading and mutations in Remix. </span><span class="koboSpan" id="kobo.1325.2">We will use Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1326.1">action</span></strong><span class="koboSpan" id="kobo.1327.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1328.1">loader</span></strong><span class="koboSpan" id="kobo.1329.1"> functions to implement the UI necessary to manage our expenses and income data </span><span class="No-Break"><span class="koboSpan" id="kobo.1330.1">in BeeRich.</span></span></p>
<h1 id="_idParaDest-79"><a id="_idTextAnchor076"/><span class="koboSpan" id="kobo.1331.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.1332.1">In this chapter, you learned about the key concepts of Remix’s routing solution. </span><span class="koboSpan" id="kobo.1332.2">You can find more concepts, such as optional route modules, in Remix’s route </span><span class="No-Break"><span class="koboSpan" id="kobo.1333.1">documentation: </span></span><a href="https://remix.run/docs/en/2/file-conventions/routes"><span class="No-Break"><span class="koboSpan" id="kobo.1334.1">https://remix.run/docs/en/2/file-conventions/routes</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1335.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1336.1">Read about Remix’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1337.1">Link</span></strong><span class="koboSpan" id="kobo.1338.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1339.1">NavLink</span></strong><span class="koboSpan" id="kobo.1340.1"> components in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1341.1">Remix documentation:</span></span></p>
<ul>
<li><a href="https://remix.run/docs/en/2/components/link"><span class="No-Break"><span class="koboSpan" id="kobo.1342.1">https://remix.run/docs/en/2/components/link</span></span></a></li>
<li><a href="https://remix.run/docs/en/2/components/nav-link"><span class="No-Break"><span class="koboSpan" id="kobo.1343.1">https://remix.run/docs/en/2/components/nav-link</span></span></a></li>
</ul>
<p><span class="koboSpan" id="kobo.1344.1">You can read more about the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1345.1">Request</span></strong><span class="koboSpan" id="kobo.1346.1">/</span><strong class="source-inline"><span class="koboSpan" id="kobo.1347.1">Response</span></strong><span class="koboSpan" id="kobo.1348.1"> model of the Fetch API </span><span class="No-Break"><span class="koboSpan" id="kobo.1349.1">here: </span></span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><span class="No-Break"><span class="koboSpan" id="kobo.1350.1">https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1351.1">.</span></span></p>
</div>


<div class="Content" id="_idContainer017">
<h1 id="_idParaDest-80" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor077"/><span class="koboSpan" id="kobo.1.1">Part 2 – Working with Remix and the Web Platform</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In this part, you will gain hands-on experience with Remix’s primitives, conventions, and levers and build a full stack web application from start to finish. </span><span class="koboSpan" id="kobo.2.2">You will gain a deep understanding of Remix’s request-response flow, progressive enhancement, and how to build robust user experiences with error and session management in mind. </span><span class="koboSpan" id="kobo.2.3">Finally, you will practice working with web assets and file uploads </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">in Remix.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B17399_05.xhtml#_idTextAnchor078"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Fetching and Mutating Data</span></em></li>
<li><a href="B17399_06.xhtml#_idTextAnchor090"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 6</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">Enhancing the User Experience</span></em></li>
<li><a href="B17399_07.xhtml#_idTextAnchor105"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 7</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Error Handling in Remix</span></em></li>
<li><a href="B17399_08.xhtml#_idTextAnchor119"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 8</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Session Management</span></em></li>
<li><a href="B17399_09.xhtml#_idTextAnchor137"><em class="italic"><span class="koboSpan" id="kobo.18.1">Chapter 9</span></em></a><span class="koboSpan" id="kobo.19.1">, </span><em class="italic"><span class="koboSpan" id="kobo.20.1">Assets and Metadata Handling</span></em></li>
<li><a href="B17399_10.xhtml#_idTextAnchor154"><em class="italic"><span class="koboSpan" id="kobo.21.1">Chapter 10</span></em></a><span class="koboSpan" id="kobo.22.1">, </span><em class="italic"><span class="koboSpan" id="kobo.23.1">Working with File Uploads</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer018">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer019">
</div>
</div>
</body></html>