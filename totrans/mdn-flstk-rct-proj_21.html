<html><head></head><body>
<div id="_idContainer143" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-288"><a id="_idTextAnchor291" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.1.1">16</span></h1>
<h1 id="_idParaDest-289" class="calibre5"><a id="_idTextAnchor292" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.2.1">Getting Started with Next.js</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.3.1">Up until now, we have been using various libraries and tools to develop full-stack web applications. </span><span class="kobospan" id="kobo.3.2">Now, we introduce Next.js as an enterprise-ready full-stack web application framework for React. </span><span class="kobospan" id="kobo.3.3">Next.js combines all the functions and tools you need for full-stack web development in one package. </span><span class="kobospan" id="kobo.3.4">In this book, we use Next.js because it is currently the most popular framework supporting all new React features, such as React Server Components and Server Actions, which are the future of full-stack React development. </span><span class="kobospan" id="kobo.3.5">However, there are other frameworks for full-stack React, such as Remix, which have recently also started supporting the new </span><span><span class="kobospan" id="kobo.4.1">React features.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.5.1">In this chapter, we will learn how Next.js works and what its advantages are. </span><span class="kobospan" id="kobo.5.2">Then, we will re-create our blog project in Next.js to highlight the differences between using a simple bundler such as Vite, and a full framework such as Next.js. </span><span class="kobospan" id="kobo.5.3">Along the way, we will learn how the Next.js App Router works. </span><span class="kobospan" id="kobo.5.4">Finally, we are going to re-create our (static) blog app by creating components and pages and then defining links </span><span><span class="kobospan" id="kobo.6.1">between them.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.7.1">In this chapter, we are going to cover the following </span><span><span class="kobospan" id="kobo.8.1">main topics:</span></span></p>
<ul class="calibre10">
<li class="calibre11"><span class="kobospan" id="kobo.9.1">What </span><span><span class="kobospan" id="kobo.10.1">is Next.js?</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.11.1">Setting </span><span><span class="kobospan" id="kobo.12.1">up Next.js</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.13.1">Introducing the </span><span><span class="kobospan" id="kobo.14.1">App Router</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.15.1">Creating static components </span><span><span class="kobospan" id="kobo.16.1">and pages</span></span></li>
</ul>
<h1 id="_idParaDest-290" class="calibre5"><a id="_idTextAnchor293" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.17.1">Technical requirements</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.18.1">Before we start, please install all the requirements from </span><a href="B19385_01.xhtml#_idTextAnchor016" class="calibre6 pcalibre1 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.19.1">Chapter 1</span></em></span></a><em class="italic"><span class="kobospan" id="kobo.20.1">, Preparing for Full-Stack Development</span></em><span class="kobospan" id="kobo.21.1">, and </span><a href="B19385_02.xhtml#_idTextAnchor028" class="calibre6 pcalibre1 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.22.1">Chapter 2</span></em></span></a><em class="italic"><span class="kobospan" id="kobo.23.1">, Getting to Know Node.js </span></em><span><em class="italic"><span class="kobospan" id="kobo.24.1">and MongoDB</span></em></span><span><span class="kobospan" id="kobo.25.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.26.1">The versions listed in those chapters are the ones used in the book. </span><span class="kobospan" id="kobo.26.2">While installing a newer version should not be an issue, please note that certain steps might work differently on a newer version. </span><span class="kobospan" id="kobo.26.3">If you are having an issue with the code and steps provided in this book, please try using the versions mentioned in </span><em class="italic"><span class="kobospan" id="kobo.27.1">Chapters 1</span></em> <span><span class="kobospan" id="kobo.28.1">and </span></span><span><em class="italic"><span class="kobospan" id="kobo.29.1">2</span></em></span><span><span class="kobospan" id="kobo.30.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.31.1">You can find the code for this chapter on </span><span><span class="kobospan" id="kobo.32.1">GitHub: </span></span><a href="https://github.com/PacktPublishing/Modern-Full-Stack-React-Projects/tree/main/ch16" class="calibre6 pcalibre1 pcalibre"><span><span class="kobospan" id="kobo.33.1">https://github.com/PacktPublishing/Modern-Full-Stack-React-Projects/tree/main/ch16</span></span></a><span><span class="kobospan" id="kobo.34.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.35.1">The CiA video for this chapter can be found </span><span><span class="kobospan" id="kobo.36.1">at: </span></span><a href="https://youtu.be/jQFCZqCspoc" class="calibre6 pcalibre1 pcalibre"><span><span class="kobospan" id="kobo.37.1">https://youtu.be/jQFCZqCspoc</span></span></a><span><span class="kobospan" id="kobo.38.1">.</span></span></p>
<h1 id="_idParaDest-291" class="calibre5"><a id="_idTextAnchor294" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.39.1">What is Next.js?</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.40.1">Next.js</span><a id="_idIndexMarker867" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.41.1"> is a React framework that puts together everything you need to create a full-stack web application with React. </span><span class="kobospan" id="kobo.41.2">Its main features</span><a id="_idIndexMarker868" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.42.1"> are </span><span><span class="kobospan" id="kobo.43.1">as follows:</span></span></p>
<ul class="calibre10">
<li class="calibre11"><span class="kobospan" id="kobo.44.1">Good developer experience out of the box, including hot module reloading, error handling, </span><span><span class="kobospan" id="kobo.45.1">and more.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.46.1">File-based routing and nested layouts, route handlers to define API endpoints, all </span><span><span class="kobospan" id="kobo.47.1">from Next.js.</span></span></li>
<li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.48.1">Internationalization</span></strong><span class="kobospan" id="kobo.49.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.50.1">i18n</span></strong><span class="kobospan" id="kobo.51.1">) support </span><a id="_idIndexMarker869" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.52.1">in routing, allowing us to create </span><span><span class="kobospan" id="kobo.53.1">internationalized routes.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.54.1">Enhanced server-side and client-side data fetching with caching out of </span><span><span class="kobospan" id="kobo.55.1">the box.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.56.1">Middleware to run code before requests </span><span><span class="kobospan" id="kobo.57.1">are completed.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.58.1">Options to run API endpoints on </span><span><span class="kobospan" id="kobo.59.1">serverless runtimes.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.60.1">Out-of-the-box support for static generation </span><span><span class="kobospan" id="kobo.61.1">of pages.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.62.1">Dynamic streaming of components when they are needed, allowing us to show an initial page quickly, and then load other </span><span><span class="kobospan" id="kobo.63.1">components later.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.64.1">Advanced client and server rendering, allowing us to not only render React components on the server </span><a id="_idIndexMarker870" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.65.1">side (</span><strong class="bold"><span class="kobospan" id="kobo.66.1">server-side rendering</span></strong><span class="kobospan" id="kobo.67.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.68.1">SSR</span></strong><span class="kobospan" id="kobo.69.1">)) but also make use of </span><strong class="bold"><span class="kobospan" id="kobo.70.1">React Server Components</span></strong><span class="kobospan" id="kobo.71.1">, which allow us to render React components exclusively on the server without sending additional JavaScript to </span><span><span class="kobospan" id="kobo.72.1">the client.</span></span></li>
<li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.73.1">Server Actions</span></strong><span class="kobospan" id="kobo.74.1"> to progressively enhance forms and actions sent from the client to the server, allowing us to submit forms even without JavaScript on </span><span><span class="kobospan" id="kobo.75.1">the client.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.76.1">Built-in optimizations for images, fonts, and scripts to improve Core </span><span><span class="kobospan" id="kobo.77.1">Web Vitals.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.78.1">Additionally, Next.js </span><a id="_idIndexMarker871" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.79.1">provides a platform to easily deploy our apps on – </span><span><span class="kobospan" id="kobo.80.1">Vercel.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.81.1">All in all, Next.js puts together everything we have learned about full-stack development throughout this book, refines each concept and makes it more advanced and customizable, and provides all of that in one single package. </span><span class="kobospan" id="kobo.81.2">We are now going to re-create the blog application from earlier chapters, but from scratch with Next.js. </span><span class="kobospan" id="kobo.81.3">Doing so will allow us to see the differences between developing an app with and without a </span><span><span class="kobospan" id="kobo.82.1">full-stack framework.</span></span></p>
<h1 id="_idParaDest-292" class="calibre5"><a id="_idTextAnchor295" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.83.1">Setting up Next.js</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.84.1">We are now going to set </span><a id="_idIndexMarker872" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.85.1">up a new project using the </span><strong class="source-inline"><span class="kobospan" id="kobo.86.1">create-next-app</span></strong><span class="kobospan" id="kobo.87.1"> tool, which sets up everything automatically for us. </span><span class="kobospan" id="kobo.87.2">Follow these steps to </span><span><span class="kobospan" id="kobo.88.1">get started:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.89.1">Open a new Terminal window. </span><span class="kobospan" id="kobo.89.2">Make sure you are outside of any project folders. </span><span class="kobospan" id="kobo.89.3">Run the following command to create a new folder and initialize a Next.js </span><span><span class="kobospan" id="kobo.90.1">project there:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.91.1">$ npx create-next-app@14.1.0</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.92.1">When asked if it’s </span><strong class="bold"><span class="kobospan" id="kobo.93.1">Ok to proceed?</span></strong><span class="kobospan" id="kobo.94.1">, press </span><strong class="source-inline1"><span class="kobospan" id="kobo.95.1">y</span></strong><span class="kobospan" id="kobo.96.1"> and confirm by </span><span><span class="kobospan" id="kobo.97.1">pressing </span></span><span><em class="italic"><span class="kobospan" id="kobo.98.1">Return/Enter</span></em></span><span><span class="kobospan" id="kobo.99.1">.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.100.1">Give the project a name, such </span><span><span class="kobospan" id="kobo.101.1">as </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.102.1">ch16</span></strong></span><span><span class="kobospan" id="kobo.103.1">.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.104.1">Answer the questions </span><span><span class="kobospan" id="kobo.105.1">as follows:</span></span><ul class="calibre16"><li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.106.1">Would you like to use </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.107.1">TypeScript?</span></strong></span><span><span class="kobospan" id="kobo.108.1">: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.109.1">No</span></strong></span></li><li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.110.1">Would you like to use </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.111.1">ESLint?</span></strong></span><span><span class="kobospan" id="kobo.112.1">: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.113.1">Yes</span></strong></span></li><li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.114.1">Would you like to use Tailwind </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.115.1">CSS?</span></strong></span><span><span class="kobospan" id="kobo.116.1">: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.117.1">No</span></strong></span></li><li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.118.1">Would you like to use `src/` </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.119.1">directory?</span></strong></span><span><span class="kobospan" id="kobo.120.1">: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.121.1">Yes</span></strong></span></li><li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.122.1">Would you like to use App </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.123.1">Router?</span></strong></span><span><span class="kobospan" id="kobo.124.1">: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.125.1">Yes</span></strong></span></li><li class="calibre11"><strong class="bold"><span class="kobospan" id="kobo.126.1">Would you like to customize the default import </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.127.1">alias?</span></strong></span><span><span class="kobospan" id="kobo.128.1">: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.129.1">No</span></strong></span></li></ul></li>
<li class="calibre11"><span class="kobospan" id="kobo.130.1">After answering all the questions, a new Next.js app will be created in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.131.1">ch16</span></strong><span class="kobospan" id="kobo.132.1"> folder. </span><span class="kobospan" id="kobo.132.2">The </span><a id="_idIndexMarker873" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.133.1">output should look </span><span><span class="kobospan" id="kobo.134.1">as follows:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer138">
<span class="kobospan" id="kobo.135.1"><img alt="Figure 16.1 – Creating a new Next.js project" src="image/B19385_16_1.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.136.1">Figure 16.1 – Creating a new Next.js project</span></p>
<ol class="calibre15">
<li value="6" class="calibre11"><span class="kobospan" id="kobo.137.1">Open the newly created </span><strong class="source-inline1"><span class="kobospan" id="kobo.138.1">ch16</span></strong><span class="kobospan" id="kobo.139.1"> folder in </span><span><span class="kobospan" id="kobo.140.1">VS Code.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.141.1">In the new VS Code window, open a Terminal and run the project with the </span><span><span class="kobospan" id="kobo.142.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.143.1">$ npm run dev</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.144.1">Open </span><strong class="source-inline1"><span class="kobospan" id="kobo.145.1">http://localhost:3000</span></strong><span class="kobospan" id="kobo.146.1"> in your browser to see the Next.js app running! </span><span class="kobospan" id="kobo.146.2">The </span><a id="_idIndexMarker874" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.147.1">app should look </span><span><span class="kobospan" id="kobo.148.1">as follows:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer139">
<span class="kobospan" id="kobo.149.1"><img alt="Figure 16.2 – Our newly created Next.js app running in the browser" src="image/B19385_16_2.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.150.1">Figure 16.2 – Our newly created Next.js app running in the browser</span></p>
<ol class="calibre15">
<li value="9" class="calibre11"><span class="kobospan" id="kobo.151.1">Unfortunately, </span><strong class="source-inline1"><span class="kobospan" id="kobo.152.1">create-next-app</span></strong><span class="kobospan" id="kobo.153.1"> does not set up Prettier for us, so let’s quickly do that now. </span><span class="kobospan" id="kobo.153.2">Install Prettier by running the </span><span><span class="kobospan" id="kobo.154.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.155.1">$ npm install --save-dev prettier@2.8.4 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.156.1">  eslint-config-prettier@8.6.0</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.157.1">Create a </span><a id="_idIndexMarker875" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.158.1">new </span><strong class="source-inline1"><span class="kobospan" id="kobo.159.1">.prettierrc.json</span></strong><span class="kobospan" id="kobo.160.1"> file in the root of the project, with the </span><span><span class="kobospan" id="kobo.161.1">following contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.162.1">
{
  "trailingComma": "all",
  "tabWidth": 2,
  "printWidth": 80,
  "semi": false,
  "jsxSingleQuote": true,
  "singleQuote": true
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.163.1">Edit the existing </span><strong class="source-inline1"><span class="kobospan" id="kobo.164.1">.eslintrc.json</span></strong><span class="kobospan" id="kobo.165.1"> to extend from </span><strong class="source-inline1"><span class="kobospan" id="kobo.166.1">prettier</span></strong><span class="kobospan" id="kobo.167.1">, </span><span><span class="kobospan" id="kobo.168.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.169.1">
{
  "extends": </span><strong class="bold1"><span class="kobospan1" id="kobo.170.1">[</span></strong><span class="kobospan1" id="kobo.171.1">"next/core-web-vitals"</span><strong class="bold1"><span class="kobospan1" id="kobo.172.1">, "prettier"]</span></strong><span class="kobospan1" id="kobo.173.1">
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.174.1">Go to the VS Code workspace settings, change the </span><strong class="bold"><span class="kobospan" id="kobo.175.1">Editor: Default Formatter</span></strong><span class="kobospan" id="kobo.176.1"> setting</span><a id="_idIndexMarker876" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.177.1"> to </span><strong class="bold"><span class="kobospan" id="kobo.178.1">Prettier</span></strong><span class="kobospan" id="kobo.179.1">, and check the checkbox for </span><strong class="bold"><span class="kobospan" id="kobo.180.1">Editor: Format </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.181.1">On Save</span></strong></span><span><span class="kobospan" id="kobo.182.1">.</span></span></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.183.1">Now we have successfully created a new Next.js project with ESLint and Prettier! </span><span class="kobospan" id="kobo.183.2">We could still set up Husky and lint-staged, just like we have done before, but for now, we are going to stick with this simple setup. </span><span class="kobospan" id="kobo.183.3">Next, we are going to learn more about how apps are structured </span><span><span class="kobospan" id="kobo.184.1">in Next.js.</span></span></p>
<h1 id="_idParaDest-293" class="calibre5"><a id="_idTextAnchor296" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.185.1">Introducing the App Router</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.186.1">Next.js comes with a </span><a id="_idIndexMarker877" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.187.1">special paradigm for structuring applications called the App Router. </span><span class="kobospan" id="kobo.187.2">The App Router makes use of the folder structure in the </span><strong class="source-inline"><span class="kobospan" id="kobo.188.1">src/app/</span></strong><span class="kobospan" id="kobo.189.1"> folder to create routes for our apps. </span><span class="kobospan" id="kobo.189.2">The root folder (</span><strong class="source-inline"><span class="kobospan" id="kobo.190.1">/</span></strong><span class="kobospan" id="kobo.191.1"> path) is </span><strong class="source-inline"><span class="kobospan" id="kobo.192.1">src/app/</span></strong><span class="kobospan" id="kobo.193.1">. </span><span class="kobospan" id="kobo.193.2">If we want to define a path, such as </span><strong class="source-inline"><span class="kobospan" id="kobo.194.1">/posts</span></strong><span class="kobospan" id="kobo.195.1">, we need to create a </span><strong class="source-inline"><span class="kobospan" id="kobo.196.1">src/app/posts/</span></strong><span class="kobospan" id="kobo.197.1"> folder. </span><span class="kobospan" id="kobo.197.2">To make this folder a valid route, we need to put a </span><strong class="source-inline"><span class="kobospan" id="kobo.198.1">page.js</span></strong><span class="kobospan" id="kobo.199.1"> file inside it, which contains the page component that will be rendered when visiting </span><span><span class="kobospan" id="kobo.200.1">that route.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.201.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.202.1">Alternatively, we can put a </span><strong class="source-inline1"><span class="kobospan" id="kobo.203.1">route.js</span></strong><span class="kobospan" id="kobo.204.1"> file into a folder to turn it into an API route instead of rendering a page. </span><span class="kobospan" id="kobo.204.2">We are going to learn more about API routes in </span><a href="B19385_18.xhtml#_idTextAnchor321" class="calibre6 pcalibre1 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.205.1">Chapter 18</span></em></span></a><em class="italic"><span class="kobospan" id="kobo.206.1">, Advanced Next.js Concepts </span></em><span><em class="italic"><span class="kobospan" id="kobo.207.1">and Optimizations</span></em></span><span><span class="kobospan" id="kobo.208.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.209.1">Additionally, Next.js allows us to define a </span><strong class="source-inline"><span class="kobospan" id="kobo.210.1">layout.js</span></strong><span class="kobospan" id="kobo.211.1"> file, which will be used as the layout for a certain path. </span><span class="kobospan" id="kobo.211.2">The layout component accepts children, which can contain other layouts or pages. </span><span class="kobospan" id="kobo.211.3">This flexibility allows us to define nested routes </span><span><span class="kobospan" id="kobo.212.1">with sub-layouts.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.213.1">There are other special files in the </span><a id="_idIndexMarker878" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.214.1">App Router paradigm, such as the </span><strong class="source-inline"><span class="kobospan" id="kobo.215.1">error.js</span></strong><span class="kobospan" id="kobo.216.1"> file, which will be rendered when there is an error on the page, and the </span><strong class="source-inline"><span class="kobospan" id="kobo.217.1">loading.js</span></strong><span class="kobospan" id="kobo.218.1"> file, which will be rendered while the page is loading (using </span><span><span class="kobospan" id="kobo.219.1">React Suspense).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.220.1">Take a look at the following example of a folder structure with the </span><span><span class="kobospan" id="kobo.221.1">App Router:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer140">
<span class="kobospan" id="kobo.222.1"><img alt="Figure 16.3 – Example of a folder structure with the App Router" src="image/B19385_16_3.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.223.1">Figure 16.3 – Example of a folder structure with the App Router</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.224.1">In the preceding example, we have a </span><strong class="source-inline"><span class="kobospan" id="kobo.225.1">dashboard/settings/</span></strong><span class="kobospan" id="kobo.226.1"> route, defined by the </span><strong class="source-inline"><span class="kobospan" id="kobo.227.1">dashboard</span></strong><span class="kobospan" id="kobo.228.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.229.1">settings</span></strong><span class="kobospan" id="kobo.230.1"> folders. </span><span class="kobospan" id="kobo.230.2">The </span><strong class="source-inline"><span class="kobospan" id="kobo.231.1">dashboard</span></strong><span class="kobospan" id="kobo.232.1"> folder does not have a </span><strong class="source-inline"><span class="kobospan" id="kobo.233.1">page.js</span></strong><span class="kobospan" id="kobo.234.1"> file, so going to </span><strong class="source-inline"><span class="kobospan" id="kobo.235.1">dashboard/</span></strong><span class="kobospan" id="kobo.236.1"> will result in a </span><strong class="source-inline"><span class="kobospan" id="kobo.237.1">404 Not Found</span></strong><span class="kobospan" id="kobo.238.1"> error. </span><span class="kobospan" id="kobo.238.2">However, the </span><strong class="source-inline"><span class="kobospan" id="kobo.239.1">dashboard</span></strong><span class="kobospan" id="kobo.240.1"> folder has a </span><strong class="source-inline"><span class="kobospan" id="kobo.241.1">layout.js</span></strong><span class="kobospan" id="kobo.242.1"> file, which defines the main layout of the dashboard. </span><span class="kobospan" id="kobo.242.2">The </span><strong class="source-inline"><span class="kobospan" id="kobo.243.1">settings</span></strong><span class="kobospan" id="kobo.244.1"> folder has another </span><strong class="source-inline"><span class="kobospan" id="kobo.245.1">layout.js</span></strong><span class="kobospan" id="kobo.246.1"> file, which defines the layout of the settings page on the dashboard. </span><span class="kobospan" id="kobo.246.2">It also has a </span><strong class="source-inline"><span class="kobospan" id="kobo.247.1">page.js</span></strong><span class="kobospan" id="kobo.248.1"> file, which will be rendered when the </span><strong class="source-inline"><span class="kobospan" id="kobo.249.1">dashboard/settings/</span></strong><span class="kobospan" id="kobo.250.1"> route is visited. </span><span class="kobospan" id="kobo.250.2">Additionally, it has a </span><strong class="source-inline"><span class="kobospan" id="kobo.251.1">loading.js</span></strong><span class="kobospan" id="kobo.252.1"> file, which is rendered inside the settings layout, while the settings page is loading. </span><span class="kobospan" id="kobo.252.2">It also contains an </span><strong class="source-inline"><span class="kobospan" id="kobo.253.1">error.js</span></strong><span class="kobospan" id="kobo.254.1"> file, which is rendered inside the settings layout if there is an error while loading the </span><span><span class="kobospan" id="kobo.255.1">settings page.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.256.1">As we can see, the</span><a id="_idIndexMarker879" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.257.1"> App Router makes it easy to implement common use cases, such as nested routes, layouts, errors, and loading components. </span><span class="kobospan" id="kobo.257.2">Let’s now get started with defining the folder structure for our </span><span><span class="kobospan" id="kobo.258.1">blog app.</span></span></p>
<h2 id="_idParaDest-294" class="calibre7"><a id="_idTextAnchor297" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.259.1">Defining the folder structure</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.260.1">Let’s recap and refine the </span><a id="_idIndexMarker880" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.261.1">routing structure of the blog application from </span><span><span class="kobospan" id="kobo.262.1">previous chapters:</span></span></p>
<ul class="calibre10">
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.263.1">/</span></strong><span class="kobospan" id="kobo.264.1"> – the index page of our blog, containing a list </span><span><span class="kobospan" id="kobo.265.1">of posts</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.266.1">/login</span></strong><span class="kobospan" id="kobo.267.1"> – the login page to login to an </span><span><span class="kobospan" id="kobo.268.1">existing account</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.269.1">/signup</span></strong><span class="kobospan" id="kobo.270.1"> – the signup page to create a </span><span><span class="kobospan" id="kobo.271.1">new account</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.272.1">/create</span></strong><span class="kobospan" id="kobo.273.1"> – a page to create a new blog post (this route </span><span><span class="kobospan" id="kobo.274.1">is new)</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.275.1">/posts/:id</span></strong><span class="kobospan" id="kobo.276.1"> – a page to view a single </span><span><span class="kobospan" id="kobo.277.1">blog post</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.278.1">All of these pages share a common layout with a navigation bar at the top, allowing us to navigate between the various pages of </span><span><span class="kobospan" id="kobo.279.1">our app.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.280.1">Let’s now create this routing structure as a folder structure in the </span><span><span class="kobospan" id="kobo.281.1">App Router:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><em class="italic"><span class="kobospan" id="kobo.282.1">Delete</span></em><span class="kobospan" id="kobo.283.1"> the existing </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.284.1">src/app/</span></strong></span><span><span class="kobospan" id="kobo.285.1"> folder.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.286.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.287.1">src/app/</span></strong><span class="kobospan" id="kobo.288.1"> folder. </span><span class="kobospan" id="kobo.288.2">Inside it, create a </span><strong class="source-inline1"><span class="kobospan" id="kobo.289.1">src/app/layout.js</span></strong><span class="kobospan" id="kobo.290.1"> file with the </span><span><span class="kobospan" id="kobo.291.1">following contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.292.1">
export const metadata = {
  title: 'Full-Stack Next.js Blog',
  description: 'A blog about React and Next.js',
}
export default function RootLayout({ children }) {
  return (
    &lt;html lang="en"&gt;
      &lt;body&gt;
        &lt;main&gt;{children}&lt;/main&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  )
}</span></pre><p class="calibre3"><span class="kobospan" id="kobo.293.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.294.1">metadata</span></strong><span class="kobospan" id="kobo.295.1"> object is a special exported object in Next.js used to provide meta tags, such as the </span><strong class="source-inline"><span class="kobospan" id="kobo.296.1">&lt;title&gt;</span></strong><span class="kobospan" id="kobo.297.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.298.1">&lt;meta </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.299.1">name="description"&gt;</span></strong></span><span><span class="kobospan" id="kobo.300.1"> tags.</span></span></p><p class="calibre3"><span class="kobospan" id="kobo.301.1">The default export of files in the App Router needs to be the component that should be rendered for the </span><span><span class="kobospan" id="kobo.302.1">respective layout/page.</span></span></p></li> <li class="calibre11"><span class="kobospan" id="kobo.303.1">Create a </span><a id="_idIndexMarker881" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.304.1">new </span><strong class="source-inline1"><span class="kobospan" id="kobo.305.1">src/app/page.js</span></strong><span class="kobospan" id="kobo.306.1"> file, with the following </span><span><span class="kobospan" id="kobo.307.1">placeholder contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.308.1">
export default function HomePage() {
  return &lt;strong&gt;Blog home page&lt;/strong&gt;
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.309.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.310.1">src/app/login/</span></strong><span class="kobospan" id="kobo.311.1"> folder. </span><span class="kobospan" id="kobo.311.2">Inside it, create a </span><strong class="source-inline1"><span class="kobospan" id="kobo.312.1">src/app/login/page.js</span></strong><span class="kobospan" id="kobo.313.1"> file with the following </span><span><span class="kobospan" id="kobo.314.1">placeholder contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.315.1">
export default function LoginPage() {
  return &lt;strong&gt;Login&lt;/strong&gt;
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.316.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.317.1">src/app/signup/</span></strong><span class="kobospan" id="kobo.318.1"> folder. </span><span class="kobospan" id="kobo.318.2">Inside it, create a </span><strong class="source-inline1"><span class="kobospan" id="kobo.319.1">src/app/signup/page.js</span></strong><span class="kobospan" id="kobo.320.1"> file with the following </span><span><span class="kobospan" id="kobo.321.1">placeholder contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.322.1">
export default function SignupPage() {
  return &lt;strong&gt;Signup&lt;/strong&gt;
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.323.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.324.1">src/app/create/</span></strong><span class="kobospan" id="kobo.325.1"> folder. </span><span class="kobospan" id="kobo.325.2">Inside it, create a </span><strong class="source-inline1"><span class="kobospan" id="kobo.326.1">src/app/create/page.js</span></strong><span class="kobospan" id="kobo.327.1"> file with the following </span><span><span class="kobospan" id="kobo.328.1">placeholder contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.329.1">
export default function CreatePostPage() {
  return &lt;strong&gt;CreatePost&lt;/strong&gt;
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.330.1">Create a </span><a id="_idIndexMarker882" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.331.1">new </span><strong class="source-inline1"><span class="kobospan" id="kobo.332.1">src/app/posts/</span></strong><span class="kobospan" id="kobo.333.1"> folder. </span><span class="kobospan" id="kobo.333.2">Inside it, create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.334.1">src/app/posts/[id]/</span></strong><span class="kobospan" id="kobo.335.1"> folder. </span><span class="kobospan" id="kobo.335.2">This is a special folder containing a route parameter </span><strong class="source-inline1"><span class="kobospan" id="kobo.336.1">id</span></strong><span class="kobospan" id="kobo.337.1">, which we can use when rendering </span><span><span class="kobospan" id="kobo.338.1">the page.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.339.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.340.1">src/app/posts/[id]/page.js</span></strong><span class="kobospan" id="kobo.341.1"> file with the following </span><span><span class="kobospan" id="kobo.342.1">placeholder contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.343.1">
export default function ViewPostPage({ params }) {
  return &lt;strong&gt;ViewPost {params.id}&lt;/strong&gt;
}</span></pre><p class="calibre3"><span class="kobospan" id="kobo.344.1">As you can see, we are getting the </span><strong class="source-inline"><span class="kobospan" id="kobo.345.1">id</span></strong><span class="kobospan" id="kobo.346.1"> from the </span><strong class="source-inline"><span class="kobospan" id="kobo.347.1">params</span></strong><span class="kobospan" id="kobo.348.1"> object provided </span><span><span class="kobospan" id="kobo.349.1">by Next.js.</span></span></p></li> <li class="calibre11"><span class="kobospan" id="kobo.350.1">If it’s not running anymore, start the Next.js dev server with the </span><span><span class="kobospan" id="kobo.351.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.352.1">$ npm run dev</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.353.1">Then go to </span><strong class="source-inline1"><span class="kobospan" id="kobo.354.1">http://localhost:3000/</span></strong><span class="kobospan" id="kobo.355.1"> (or refresh the page) in your browser to see the main route working. </span><span class="kobospan" id="kobo.355.2">Go to the different routes, such as </span><strong class="source-inline1"><span class="kobospan" id="kobo.356.1">/login</span></strong><span class="kobospan" id="kobo.357.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.358.1">/posts/123</span></strong><span class="kobospan" id="kobo.359.1">, to see the different pages being rendered and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.360.1">route</span></strong> <span><span class="kobospan" id="kobo.361.1">param</span></span><span><a id="_idIndexMarker883" class="calibre6 pcalibre1 pcalibre"/></span><span><span class="kobospan" id="kobo.362.1"> working!</span></span></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.363.1">Now that we defined the folder structure for our project, let’s continue by creating static components </span><span><span class="kobospan" id="kobo.364.1">and pages.</span></span></p>
<h1 id="_idParaDest-295" class="calibre5"><a id="_idTextAnchor298" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.365.1">Creating static components and pages</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.366.1">For the components</span><a id="_idIndexMarker884" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.367.1"> in our blog, we can reuse a lot of the code we wrote in previous </span><a id="_idIndexMarker885" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.368.1">chapters, as it is not that much different in Next.js than it is in plain React. </span><span class="kobospan" id="kobo.368.2">Only specific components, such as the navigation bar, will be different, because Next.js has its own router. </span><span class="kobospan" id="kobo.368.3">We are going to create most of our components in a separate </span><strong class="source-inline"><span class="kobospan" id="kobo.369.1">src/components/</span></strong><span class="kobospan" id="kobo.370.1"> folder. </span><span class="kobospan" id="kobo.370.2">This folder will only contain React components that can be reused across multiple pages. </span><span class="kobospan" id="kobo.370.3">All page and layout components will still be </span><span><span class="kobospan" id="kobo.371.1">in </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.372.1">src/app/</span></strong></span><span><span class="kobospan" id="kobo.373.1">.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.374.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.375.1">In Next.js, it is also possible to co-locate regular components with the page and layout components, which should be done in large-scale projects for components that are only used on those specific pages. </span><span class="kobospan" id="kobo.375.2">In small projects, it does not really matter as much, and we can just put all our regular components in a separate folder to make them easier to distinguish from page and </span><span><span class="kobospan" id="kobo.376.1">layout components.</span></span></p>
<h2 id="_idParaDest-296" class="calibre7"><a id="_idTextAnchor299" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.377.1">Defining components</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.378.1">Let’s now get started with creating the</span><a id="_idIndexMarker886" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.379.1"> components for our </span><span><span class="kobospan" id="kobo.380.1">blog app:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.381.1">Create a new </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.382.1">src/components/</span></strong></span><span><span class="kobospan" id="kobo.383.1"> folder.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.384.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.385.1">src/components/Login.jsx</span></strong><span class="kobospan" id="kobo.386.1"> file. </span><span class="kobospan" id="kobo.386.2">Inside it, define a </span><strong class="source-inline1"><span class="kobospan" id="kobo.387.1">&lt;form&gt;</span></strong><span class="kobospan" id="kobo.388.1"> with a </span><strong class="source-inline1"><span class="kobospan" id="kobo.389.1">username</span></strong><span class="kobospan" id="kobo.390.1"> field, a </span><strong class="source-inline1"><span class="kobospan" id="kobo.391.1">password</span></strong><span class="kobospan" id="kobo.392.1"> field, and a </span><span><span class="kobospan" id="kobo.393.1">submit button:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.394.1">
export function Login() {
  return (
    &lt;form&gt;
      &lt;div&gt;
        &lt;label htmlFor='username'&gt;Username: &lt;/label&gt;
        &lt;input type='text' name='username' id='username' /&gt;
      &lt;/div&gt;
      &lt;br /&gt;
      &lt;div&gt;
        &lt;label htmlFor='password'&gt;Password: &lt;/label&gt;
        &lt;input type='password' name='password' id='password' /&gt;
      &lt;/div&gt;
      &lt;br /&gt;
      &lt;input type='submit' value='Log In' /&gt;
    &lt;/form&gt;
  )
}</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.395.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.396.1">We use uncontrolled input fields (so, no </span><strong class="source-inline1"><span class="kobospan" id="kobo.397.1">useState</span></strong><span class="kobospan" id="kobo.398.1"> hooks) here on purpose, as it is not necessary to make controlled input fields for submitting forms with Server Actions, which we are going to learn about in the next chapter, </span><a href="B19385_17.xhtml#_idTextAnchor303" class="calibre6 pcalibre1 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.399.1">Chapter 17</span></em></span></a><em class="italic"><span class="kobospan" id="kobo.400.1">, Introducing React Server Components</span></em><span class="kobospan" id="kobo.401.1">. </span><span class="kobospan" id="kobo.401.2">However, it is important to properly define the </span><strong class="source-inline1"><span class="kobospan" id="kobo.402.1">name</span></strong><span class="kobospan" id="kobo.403.1"> property of input fields, as that is what will be used to identify the field when the form </span><span><span class="kobospan" id="kobo.404.1">is submitted.</span></span></p>
<ol class="calibre15">
<li value="3" class="calibre11"><span class="kobospan" id="kobo.405.1">In a similar</span><a id="_idIndexMarker887" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.406.1"> fashion, create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.407.1">src/components/Signup.jsx</span></strong><span class="kobospan" id="kobo.408.1"> file and define a form with the </span><span><span class="kobospan" id="kobo.409.1">same fields:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.410.1">
export function Signup() {
  return (
    &lt;form&gt;
      &lt;div&gt;
        &lt;label htmlFor='username'&gt;Username: &lt;/label&gt;
        &lt;input type='text' name='username' id='username' /&gt;
      &lt;/div&gt;
      &lt;br /&gt;
      &lt;div&gt;
        &lt;label htmlFor='password'&gt;Password: &lt;/label&gt;
        &lt;input type='password' name='password' id='password' /&gt;
      &lt;/div&gt;
      &lt;br /&gt;
      &lt;input type='submit' value='Sign Up' /&gt;
    &lt;/form&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.411.1">Create a </span><a id="_idIndexMarker888" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.412.1">new </span><strong class="source-inline1"><span class="kobospan" id="kobo.413.1">src/components/CreatePost.jsx</span></strong><span class="kobospan" id="kobo.414.1"> file and define a form with a required </span><strong class="source-inline1"><span class="kobospan" id="kobo.415.1">title</span></strong><span class="kobospan" id="kobo.416.1"> input field, a </span><strong class="source-inline1"><span class="kobospan" id="kobo.417.1">textarea</span></strong><span class="kobospan" id="kobo.418.1"> to define the </span><strong class="source-inline1"><span class="kobospan" id="kobo.419.1">contents</span></strong><span class="kobospan" id="kobo.420.1">, and a </span><span><span class="kobospan" id="kobo.421.1">submit button:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.422.1">
export function CreatePost() {
  return (
    &lt;form&gt;
      &lt;div&gt;
        &lt;label htmlFor='title'&gt;Title: &lt;/label&gt;
        &lt;input type='text' name='title' id='title' required /&gt;
      &lt;/div&gt;
      &lt;br /&gt;
      &lt;textarea name='contents' id='contents' /&gt;
      &lt;br /&gt;
      &lt;br /&gt;
      &lt;input type='submit' value='Create' /&gt;
    &lt;/form&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.423.1">Create a </span><a id="_idIndexMarker889" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.424.1">new </span><strong class="source-inline1"><span class="kobospan" id="kobo.425.1">src/components/Post.jsx</span></strong><span class="kobospan" id="kobo.426.1"> file. </span><span class="kobospan" id="kobo.426.2">As an improvement over the structure from previous chapters, the </span><strong class="source-inline1"><span class="kobospan" id="kobo.427.1">Post</span></strong><span class="kobospan" id="kobo.428.1"> component will be used in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.429.1">PostList</span></strong><span class="kobospan" id="kobo.430.1">, and only show the </span><strong class="source-inline1"><span class="kobospan" id="kobo.431.1">title</span></strong><span class="kobospan" id="kobo.432.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.433.1">author</span></strong><span class="kobospan" id="kobo.434.1"> of a blog post, with a link to the </span><span><span class="kobospan" id="kobo.435.1">full post:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.436.1">
import PropTypes from 'prop-types'
export function Post({ _id, title, author }) {
  return (
    &lt;article&gt;
      &lt;h3&gt;{title}&lt;/h3&gt;
      &lt;em&gt;
        Written by &lt;strong&gt;{author.username}&lt;/strong&gt;
      &lt;/em&gt;
    &lt;/article&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.437.1">We also need to define </span><strong class="source-inline1"><span class="kobospan" id="kobo.438.1">propTypes</span></strong><span class="kobospan" id="kobo.439.1">. </span><span class="kobospan" id="kobo.439.2">In this case, we will use a structure similar to the result from a database query, as we will be able to directly use database results when </span><a id="_idIndexMarker890" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.440.1">we introduce React Server Components in the </span><span><span class="kobospan" id="kobo.441.1">next chapter:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.442.1">
Post.propTypes = {
  _id: PropTypes.string.isRequired,
  title: PropTypes.string.isRequired,
  author: PropTypes.shape({
    username: PropTypes.string.isRequired,
  }).isRequired,
  contents: PropTypes.string,
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.443.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.444.1">src/components/PostList.jsx</span></strong><span class="kobospan" id="kobo.445.1"> file. </span><span class="kobospan" id="kobo.445.2">Here, we are going to reuse the </span><strong class="source-inline1"><span class="kobospan" id="kobo.446.1">propTypes</span></strong><span class="kobospan" id="kobo.447.1"> from the </span><strong class="source-inline1"><span class="kobospan" id="kobo.448.1">Post</span></strong><span class="kobospan" id="kobo.449.1"> component, so let’s also import the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.450.1">Post</span></strong></span><span><span class="kobospan" id="kobo.451.1"> component:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.452.1">
import { Fragment } from 'react'
import PropTypes from 'prop-types'
import { Post } from './Post.jsx'</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.453.1">Then, we define the </span><strong class="source-inline1"><span class="kobospan" id="kobo.454.1">PostList</span></strong><span class="kobospan" id="kobo.455.1"> component, which renders each blog post with the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.456.1">Post</span></strong></span><span><span class="kobospan" id="kobo.457.1"> component:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.458.1">
export function PostList({ posts = [] }) {
  return (
    &lt;div&gt;
      {posts.map((post) =&gt; (
        &lt;Fragment key={`post-${post._id}`}&gt;
          &lt;Post _id={post._id} title={post.title} author={post.author} /&gt;
          &lt;hr /&gt;
        &lt;/Fragment&gt;
      ))}
    &lt;/div&gt;
  )
}</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.459.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.460.1">It is best practice to use a unique ID for the </span><strong class="source-inline1"><span class="kobospan" id="kobo.461.1">key</span></strong><span class="kobospan" id="kobo.462.1"> prop, such as a database ID, so that React can keep track of items changing in </span><span><span class="kobospan" id="kobo.463.1">a list.</span></span></p>
<ol class="calibre15">
<li value="9" class="calibre11"><span class="kobospan" id="kobo.464.1">We now </span><a id="_idIndexMarker891" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.465.1">define the </span><strong class="source-inline1"><span class="kobospan" id="kobo.466.1">propTypes</span></strong><span class="kobospan" id="kobo.467.1"> for the </span><strong class="source-inline1"><span class="kobospan" id="kobo.468.1">PostList</span></strong><span class="kobospan" id="kobo.469.1"> component by making use of the </span><span><span class="kobospan" id="kobo.470.1">existing </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.471.1">Post.propTypes</span></strong></span><span><span class="kobospan" id="kobo.472.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.473.1">
PostList.propTypes = {
  posts: PropTypes.arrayOf(
    PropTypes.shape(Post.propTypes)
  ).isRequired,
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.474.1">Lastly, we create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.475.1">src/components/FullPost.jsx</span></strong><span class="kobospan" id="kobo.476.1"> file, in which we display the full post with all </span><span><span class="kobospan" id="kobo.477.1">its contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.478.1">
import PropTypes from 'prop-types'
export function FullPost({ title, contents, author }) {
  return (
    &lt;article&gt;
      &lt;h3&gt;{title}&lt;/h3&gt;
      &lt;div&gt;{contents}&lt;/div&gt;
      &lt;br /&gt;
      &lt;em&gt;
        Written by &lt;strong&gt;{author.username}&lt;/strong&gt;
      &lt;/em&gt;
    &lt;/article&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.479.1">Instead of </span><a id="_idIndexMarker892" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.480.1">reusing </span><strong class="source-inline1"><span class="kobospan" id="kobo.481.1">propTypes</span></strong><span class="kobospan" id="kobo.482.1"> from the </span><strong class="source-inline1"><span class="kobospan" id="kobo.483.1">Post</span></strong><span class="kobospan" id="kobo.484.1"> component, we are redefining them here, because the </span><strong class="source-inline1"><span class="kobospan" id="kobo.485.1">FullPost</span></strong><span class="kobospan" id="kobo.486.1"> component needs different props than the </span><strong class="source-inline1"><span class="kobospan" id="kobo.487.1">Post</span></strong><span class="kobospan" id="kobo.488.1"> component (it does not have the </span><strong class="source-inline1"><span class="kobospan" id="kobo.489.1">_id</span></strong><span class="kobospan" id="kobo.490.1"> prop, but instead has the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.491.1">contents</span></strong></span><span><span class="kobospan" id="kobo.492.1"> prop):</span></span><pre class="source-code"><span class="kobospan1" id="kobo.493.1">
FullPost.propTypes = {
  title: PropTypes.string.isRequired,
  author: PropTypes.shape({
    username: PropTypes.string.isRequired,
  }).isRequired,
  contents: PropTypes.string,
}</span></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.494.1">Now that we have defined all the components we are going to need for our blog app, let’s move on to properly defining the </span><span><span class="kobospan" id="kobo.495.1">page components.</span></span></p>
<h2 id="_idParaDest-297" class="calibre7"><a id="_idTextAnchor300" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.496.1">Defining pages</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.497.1">After creating various components that we are going</span><a id="_idIndexMarker893" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.498.1"> to need for our blog app, let’s now replace the placeholder page components with proper pages that render the appropriate components. </span><span class="kobospan" id="kobo.498.2">Follow these steps to </span><span><span class="kobospan" id="kobo.499.1">get started:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.500.1">Edit </span><strong class="source-inline1"><span class="kobospan" id="kobo.501.1">src/app/login/page.js</span></strong><span class="kobospan" id="kobo.502.1"> and import the </span><strong class="source-inline1"><span class="kobospan" id="kobo.503.1">Login</span></strong><span class="kobospan" id="kobo.504.1"> component, then </span><span><span class="kobospan" id="kobo.505.1">render it:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.506.1">import { Login } from '@/components/Login'</span></strong><span class="kobospan1" id="kobo.507.1">
export default function LoginPage() {
</span><strong class="bold1"><span class="kobospan1" id="kobo.508.1">  return &lt;Login /&gt;</span></strong><span class="kobospan1" id="kobo.509.1">
}</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.510.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.511.1">Remember when we set up Next.js and were asked if we wanted to customize the default import alias? </span><span class="kobospan" id="kobo.511.2">This import alias allows us to reference the </span><strong class="source-inline1"><span class="kobospan" id="kobo.512.1">src/</span></strong><span class="kobospan" id="kobo.513.1"> folder of our project, making our imports absolute rather than relative. </span><span class="kobospan" id="kobo.513.2">By default, this is done using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.514.1">@</span></strong><span class="kobospan" id="kobo.515.1"> alias. </span><span class="kobospan" id="kobo.515.2">So, we can now just import from </span><strong class="source-inline1"><span class="kobospan" id="kobo.516.1">@/components/Login</span></strong><span class="kobospan" id="kobo.517.1"> to import from the </span><strong class="source-inline1"><span class="kobospan" id="kobo.518.1">src/components/Login.jsx</span></strong><span class="kobospan" id="kobo.519.1"> file, instead of having to import from </span><strong class="source-inline1"><span class="kobospan" id="kobo.520.1">../../components/Login.jsx</span></strong><span class="kobospan" id="kobo.521.1">. </span><span class="kobospan" id="kobo.521.2">Absolute imports with import aliases become especially useful in large projects and make it easy to re-structure </span><span><span class="kobospan" id="kobo.522.1">projects later.</span></span></p>
<ol class="calibre15">
<li value="2" class="calibre11"><span class="kobospan" id="kobo.523.1">Edit </span><strong class="source-inline1"><span class="kobospan" id="kobo.524.1">src/app/signup/page.js</span></strong><span class="kobospan" id="kobo.525.1"> and, in a similar fashion, import and render the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.526.1">Signup</span></strong></span><span><span class="kobospan" id="kobo.527.1"> component:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.528.1">import { Signup } from '@/components/Signup'</span></strong><span class="kobospan1" id="kobo.529.1">
export default function SignupPage() {
</span><strong class="bold1"><span class="kobospan1" id="kobo.530.1">  return &lt;Signup /&gt;</span></strong><span class="kobospan1" id="kobo.531.1">
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.532.1">Repeat the</span><a id="_idIndexMarker894" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.533.1"> process by editing the </span><strong class="source-inline1"><span class="kobospan" id="kobo.534.1">src/app/create/page.js</span></strong><span class="kobospan" id="kobo.535.1"> file </span><span><span class="kobospan" id="kobo.536.1">as follows:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.537.1">import { CreatePost } from '@/components/CreatePost'</span></strong><span class="kobospan1" id="kobo.538.1">
export default function CreatePostPage() {
</span><strong class="bold1"><span class="kobospan1" id="kobo.539.1">  return &lt;CreatePost /&gt;</span></strong><span class="kobospan1" id="kobo.540.1">
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.541.1">Now, edit the </span><strong class="source-inline1"><span class="kobospan" id="kobo.542.1">src/app/posts/[id]/page.js</span></strong><span class="kobospan" id="kobo.543.1"> file and import the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.544.1">FullPost</span></strong></span><span><span class="kobospan" id="kobo.545.1"> component:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.546.1">
import { FullPost } from '@/components/FullPost'</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.547.1">Then, define a sample </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.548.1">post</span></strong></span><span><span class="kobospan" id="kobo.549.1"> object:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.550.1">
export default function ViewPostPage({ params }) {
</span><strong class="bold1"><span class="kobospan1" id="kobo.551.1">  const post = {</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.552.1">    title: `Hello Next.js (${params.id})`,</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.553.1">    contents: 'This will be fetched from the database later',</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.554.1">    author: { username: 'Daniel Bugl' },</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.555.1">  }</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.556.1">To show that the param still works, we also put the </span><strong class="source-inline"><span class="kobospan" id="kobo.557.1">id</span></strong><span class="kobospan" id="kobo.558.1"> into </span><span><span class="kobospan" id="kobo.559.1">the </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.560.1">title</span></strong></span><span><span class="kobospan" id="kobo.561.1">.</span></span></p></li> <li class="calibre11"><span class="kobospan" id="kobo.562.1">Render the </span><strong class="source-inline1"><span class="kobospan" id="kobo.563.1">FullPost</span></strong><span class="kobospan" id="kobo.564.1"> component, </span><span><span class="kobospan" id="kobo.565.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.566.1">
  return (
    &lt;FullPost
      title={post.title}
      contents={post.contents}
      author={post.author}
    /&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.567.1">Lastly, edit </span><strong class="source-inline1"><span class="kobospan" id="kobo.568.1">src/app/page.js</span></strong><span class="kobospan" id="kobo.569.1"> by importing the </span><strong class="source-inline1"><span class="kobospan" id="kobo.570.1">PostList</span></strong><span class="kobospan" id="kobo.571.1"> component, creating an</span><a id="_idIndexMarker895" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.572.1"> example </span><strong class="source-inline1"><span class="kobospan" id="kobo.573.1">posts</span></strong><span class="kobospan" id="kobo.574.1"> array, and rendering the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.575.1">PostList</span></strong></span><span><span class="kobospan" id="kobo.576.1"> component:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.577.1">import { PostList } from '@/components/PostList'</span></strong><span class="kobospan1" id="kobo.578.1">
export default function HomePage() {
</span><strong class="bold1"><span class="kobospan1" id="kobo.579.1">  const posts = [</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.580.1">    { _id: '123', title: 'Hello Next.js', author: { username: 'Daniel Bugl' } },</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.581.1">  ]</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.582.1">  return &lt;PostList posts={posts} /&gt;</span></strong><span class="kobospan1" id="kobo.583.1">
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.584.1">Go to </span><strong class="source-inline1"><span class="kobospan" id="kobo.585.1">http://localhost:3000/posts/123</span></strong><span class="kobospan" id="kobo.586.1"> to see the </span><strong class="source-inline1"><span class="kobospan" id="kobo.587.1">FullPost</span></strong><span class="kobospan" id="kobo.588.1"> component being rendered with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.589.1">id</span></strong><span class="kobospan" id="kobo.590.1"> param in the title. </span><span class="kobospan" id="kobo.590.2">Feel free to change the </span><strong class="source-inline1"><span class="kobospan" id="kobo.591.1">id</span></strong><span class="kobospan" id="kobo.592.1"> in the URL to see how the title changes. </span><span class="kobospan" id="kobo.592.2">The following screenshot shows the </span><strong class="source-inline1"><span class="kobospan" id="kobo.593.1">FullPost</span></strong><span class="kobospan" id="kobo.594.1"> component being rendered on the </span><strong class="source-inline1"><span class="kobospan" id="kobo.595.1">/</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.596.1">posts/123</span></strong></span><span><span class="kobospan" id="kobo.597.1"> path:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer141">
<span class="kobospan" id="kobo.598.1"><img alt="Figure 16.4 – Rendering the FullPost component with a Next.js route param in the title" src="image/B19385_16_4.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.599.1">Figure 16.4 – Rendering the FullPost component with a Next.js route param in the title</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.600.1">After successfully </span><a id="_idIndexMarker896" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.601.1">defining all our pages, we still need a way to navigate between them, so let’s continue by adding links </span><span><span class="kobospan" id="kobo.602.1">between pages.</span></span></p>
<h2 id="_idParaDest-298" class="calibre7"><a id="_idTextAnchor301" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.603.1">Adding links between pages</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.604.1">As mentioned </span><a id="_idIndexMarker897" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.605.1">earlier in this chapter, Next.js provides its own routing solution – the App Router. </span><span class="kobospan" id="kobo.605.2">The routes are defined by the folder structure in the </span><strong class="source-inline"><span class="kobospan" id="kobo.606.1">src/app/</span></strong><span class="kobospan" id="kobo.607.1"> directory, and they all work already. </span><span class="kobospan" id="kobo.607.2">All that’s left to do now is to add links between them. </span><span class="kobospan" id="kobo.607.3">To do this, we need to use the </span><strong class="source-inline"><span class="kobospan" id="kobo.608.1">Link</span></strong><span class="kobospan" id="kobo.609.1"> component from </span><strong class="source-inline"><span class="kobospan" id="kobo.610.1">next/link</span></strong><span class="kobospan" id="kobo.611.1">. </span><span class="kobospan" id="kobo.611.2">Follow these steps to get started with implementing a </span><span><span class="kobospan" id="kobo.612.1">navigation bar:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.613.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.614.1">src/components/Navigation.jsx</span></strong><span class="kobospan" id="kobo.615.1"> file, where we import the </span><strong class="source-inline1"><span class="kobospan" id="kobo.616.1">Link</span></strong><span class="kobospan" id="kobo.617.1"> component </span><span><span class="kobospan" id="kobo.618.1">and </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.619.1">PropTypes</span></strong></span><span><span class="kobospan" id="kobo.620.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.621.1">
import Link from 'next/link'
import PropTypes from 'prop-types'</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.622.1">Define a </span><strong class="source-inline1"><span class="kobospan" id="kobo.623.1">UserBar</span></strong><span class="kobospan" id="kobo.624.1"> component, which will be rendered when the user is logged in and allow a user to access the </span><strong class="bold"><span class="kobospan" id="kobo.625.1">Create Post</span></strong><span class="kobospan" id="kobo.626.1"> page and </span><span><span class="kobospan" id="kobo.627.1">log out:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.628.1">
export function UserBar({ username }) {
  return (
    &lt;form&gt;
      &lt;Link href='/create'&gt;Create Post&lt;/Link&gt; | Logged in as{' '}
      &lt;strong&gt;{username}&lt;/strong&gt; &lt;button&gt;Logout&lt;/button&gt;
    &lt;/form&gt;
  )
}
UserBar.propTypes = {
  username: PropTypes.string.isRequired,
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.629.1">Then, define</span><a id="_idIndexMarker898" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.630.1"> a </span><strong class="source-inline1"><span class="kobospan" id="kobo.631.1">LoginSignupLinks</span></strong><span class="kobospan" id="kobo.632.1"> component, which will be rendered when the user is not logged in yet. </span><span class="kobospan" id="kobo.632.2">It provides links to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.633.1">/login</span></strong><span class="kobospan" id="kobo.634.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.635.1">/signup</span></strong><span class="kobospan" id="kobo.636.1"> pages to allow users to sign up and log in to </span><span><span class="kobospan" id="kobo.637.1">our app:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.638.1">
export function LoginSignupLinks() {
  return (
    &lt;div&gt;
      &lt;Link href='/login'&gt;Log In&lt;/Link&gt; | &lt;Link href='/signup'&gt;Sign Up&lt;/Link&gt;
    &lt;/div&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.639.1">Next, define</span><a id="_idIndexMarker899" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.640.1"> a </span><strong class="source-inline1"><span class="kobospan" id="kobo.641.1">Navigation</span></strong><span class="kobospan" id="kobo.642.1"> component, which adds a link to the home page, and then conditionally renders either the </span><strong class="source-inline1"><span class="kobospan" id="kobo.643.1">UserBar</span></strong><span class="kobospan" id="kobo.644.1"> component, or the </span><strong class="source-inline1"><span class="kobospan" id="kobo.645.1">LoginSignupLinks</span></strong><span class="kobospan" id="kobo.646.1"> component, depending on whether the user is logged in </span><span><span class="kobospan" id="kobo.647.1">or not:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.648.1">
export function Navigation({ username }) {
  return (
    &lt;&gt;
      &lt;Link href='/'&gt;Home&lt;/Link&gt;
      {username ? </span><span class="kobospan1" id="kobo.648.2">&lt;UserBar username={username} /&gt; : &lt;LoginSignupLinks /&gt;}
    &lt;/&gt;
  )
}
Navigation.propTypes = {
  username: PropTypes.string,
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.649.1">Now we just need to render the </span><strong class="source-inline1"><span class="kobospan" id="kobo.650.1">Navigation</span></strong><span class="kobospan" id="kobo.651.1"> component. </span><span class="kobospan" id="kobo.651.2">To make sure it appears on all pages of our blog app, we are going to put it in the root layout. </span><span class="kobospan" id="kobo.651.3">Edit </span><strong class="source-inline1"><span class="kobospan" id="kobo.652.1">src/app/layout.js</span></strong><span class="kobospan" id="kobo.653.1"> and import the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.654.1">Navigation</span></strong></span><span><span class="kobospan" id="kobo.655.1"> component:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.656.1">
import { Navigation } from '@/components/Navigation'</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.657.1">Then, define a sample </span><strong class="source-inline1"><span class="kobospan" id="kobo.658.1">user</span></strong><span class="kobospan" id="kobo.659.1"> object to simulate a user being </span><span><span class="kobospan" id="kobo.660.1">logged in:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.661.1">
export default function RootLayout({ children }) {
</span><strong class="bold1"><span class="kobospan1" id="kobo.662.1">  const user = { username: 'dan' }</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.663.1">Render the </span><strong class="source-inline1"><span class="kobospan" id="kobo.664.1">Navigation</span></strong><span class="kobospan" id="kobo.665.1"> component, </span><span><span class="kobospan" id="kobo.666.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.667.1">
  return (
    &lt;html lang='en'&gt;
      &lt;body&gt;
</span><strong class="bold1"><span class="kobospan1" id="kobo.668.1">        &lt;nav&gt;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.669.1">          &lt;Navigation username={user?.username} /&gt;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.670.1">        &lt;/nav&gt;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.671.1">        &lt;br /&gt;</span></strong><span class="kobospan1" id="kobo.672.1">
        &lt;main&gt;{children}&lt;/main&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  )
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.673.1">We still need to </span><a id="_idIndexMarker900" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.674.1">add a link from a single post in the list to the full post page. </span><span class="kobospan" id="kobo.674.2">Edit </span><strong class="source-inline1"><span class="kobospan" id="kobo.675.1">src/components/Post.jsx</span></strong><span class="kobospan" id="kobo.676.1"> and import the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.677.1">Link</span></strong></span><span><span class="kobospan" id="kobo.678.1"> component:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.679.1">
import Link from 'next/link'</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.680.1">Then, add a link to the title, </span><span><span class="kobospan" id="kobo.681.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.682.1">
export function Post({ _id, title, author }) {
  return (
    &lt;article&gt;
      &lt;h3&gt;
</span><strong class="bold1"><span class="kobospan1" id="kobo.683.1">        &lt;Link href={`/posts/${_id}`}&gt;{title}&lt;/Link&gt;</span></strong><span class="kobospan1" id="kobo.684.1">
      &lt;/h3&gt;</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.685.1">Go to </span><strong class="source-inline1"><span class="kobospan" id="kobo.686.1">http://localhost:3000/</span></strong><span class="kobospan" id="kobo.687.1"> and you will see the navigation bar being rendered with the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.688.1">UserBar</span></strong></span><span><span class="kobospan" id="kobo.689.1"> component.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.690.1">Click on the </span><strong class="bold"><span class="kobospan" id="kobo.691.1">Create Post</span></strong><span class="kobospan" id="kobo.692.1"> link to go to the corresponding page, then go back using the </span><strong class="bold"><span class="kobospan" id="kobo.693.1">Home</span></strong><span class="kobospan" id="kobo.694.1"> link. </span><span class="kobospan" id="kobo.694.2">Also, try going to the full post page by clicking on the title of the blog post on the </span><span><span class="kobospan" id="kobo.695.1">home page.</span></span></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.696.1">The following screenshot </span><a id="_idIndexMarker901" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.697.1">shows the </span><strong class="bold"><span class="kobospan" id="kobo.698.1">Home</span></strong><span class="kobospan" id="kobo.699.1"> page being rendered after we added the </span><span><span class="kobospan" id="kobo.700.1">navigation bar:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer142">
<span class="kobospan" id="kobo.701.1"><img alt="Figure 16.5 – Our (static) blog app re-created in Next.js!" src="image/B19385_16_5.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.702.1">Figure 16.5 – Our (static) blog app re-created in Next.js!</span></p>
<h1 id="_idParaDest-299" class="calibre5"><a id="_idTextAnchor302" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.703.1">Summary</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.704.1">In this chapter, we first learned what Next.js is and how it can be useful for full-stack development. </span><span class="kobospan" id="kobo.704.2">Then, we set up a new Next.js project and learned about the App Router paradigm. </span><span class="kobospan" id="kobo.704.3">Finally, we re-created the blog app in Next.js by creating components, pages, and a navigation bar, making use of the Next.js </span><strong class="source-inline"><span class="kobospan" id="kobo.705.1">Link</span></strong><span class="kobospan" id="kobo.706.1"> component to navigate between the different pages in </span><span><span class="kobospan" id="kobo.707.1">our app.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.708.1">In the next chapter, </span><a href="B19385_17.xhtml#_idTextAnchor303" class="calibre6 pcalibre1 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.709.1">Chapter 17</span></em></span></a><em class="italic"><span class="kobospan" id="kobo.710.1">, Introducing React Server Components</span></em><span class="kobospan" id="kobo.711.1">, we are going to learn how to make our blog app interactive by creating React Server Components, which are components that run on the server and can, for example, execute database queries. </span><span class="kobospan" id="kobo.711.2">Additionally, we are going to learn about Server Actions, which are used to submit forms, such as the Login, Signup, and Create </span><span><span class="kobospan" id="kobo.712.1">Post forms.</span></span></p>
</div>
</body></html>