<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" style="font-size:1.200rem;">
<head><title>Chapter&#160;3.&#160;Developing Web Components Using Polymer</title>
<link rel="stylesheet" href="../Styles/style0001.css" type="text/css"/>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/>
</head>
<body id="page">
<div class="chapter" title="Chapter&#160;3.&#160;Developing Web Components Using Polymer" id="aid-VF2I1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"></a>Chapter&#160;3.&#160;Developing Web Components Using Polymer</h1>
</div>
</div>
</div>
<p>In the previous chapter, you learned how to install and configure the Polymer library in a web page. Now it is time to explore a few more useful features and learn to develop a custom element.</p>
<div class="section" title="PolymerJS ready event"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec28"></a>PolymerJS ready event</h1>
</div>
</div>
</div>
<p>The Polymer library<a id="id271" class="indexterm"></a> can be included to a page by importing a <code class="literal">polymer.html</code> file. Polymer checks each and every element definition that registers it asynchronously. If we try to render the element before this, it will create the<a id="id272" class="indexterm"></a> <span class="strong"><strong>Flash of Unstyled Content</strong></span> (<span class="strong"><strong>FOUC</strong></span>) problem. To resolve this issue, we need to catch the <code class="literal">polymer-ready</code> event .We can hide the page elements before Polymer is ready, and once Polymer is ready, we can make them visible. The following code shows the use of the <code class="literal">polymer-ready</code> event:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;Polymer ready event listener example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script&gt;
<span class="strong"><strong>    document.addEventListener("DOMContentLoaded", function(event) {</strong></span>
<span class="strong"><strong>        console.log("DOMContentLoaded is fired at",new Date().getTime());</strong></span>
<span class="strong"><strong>    });</strong></span>
<span class="strong"><strong>    window.addEventListener('polymer-ready', function(e) {</strong></span>
<span class="strong"><strong>        console.log("polymer-ready is fired.",new Date().getTime());;</strong></span>
<span class="strong"><strong>    });</strong></span>
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>In the preceding code, we have two callback methods listening to <code class="literal">DOMContentLoaded</code> and <code class="literal">polymer-ready</code> events. In the callback code, the console logs the time when the event is fired. The<a id="id273" class="indexterm"></a> following screenshot shows the output of the preceding code, showing the time when <code class="literal">DOMContentLoaded</code> and <code class="literal">polymer-event</code> are fired:</p>
<div class="mediaobject"><img src="../Images/image00259.jpeg" alt="PolymerJS ready event"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>From the preceding screenshot, it is evident that once DOM is loaded, Polymer starts registering the element, and once it is completed, it fires the <code class="literal">polymer-ready</code> event.</p>
</div>
</div>


<div class="section" title="Polymer expressions"><div class="titlepage" id="aid-10DJ42"><div><div><h1 class="title"><a id="ch03lvl1sec29"></a>Polymer expressions</h1>
</div>
</div>
</div>
<p>The separation of concern<a id="id274" class="indexterm"></a> during development is an age-old topic of discussion. The goal of separation concern is to separate the rendering logic from the markup. It reduces the code maintenance cost and increases productivity. Polymer provides expression features that <a id="id275" class="indexterm"></a>can be used inline with HTML code, while the computation logic is present in another JavaScript file. The syntax for a Polymer expression is as follows:</p>
<div class="informalexample"><pre class="programlisting">{{Expression}}</pre>
</div>
<p>In the preceding syntax, the Polymer expression is wrapped around two curly braces. There are a few points to note down about Polymer expression:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Polymer expression is used as inline with HTML code for simple text value</li>
<li class="listitem">Polymer expression should not be used for HTML value</li>
<li class="listitem">The <code class="literal">Eval</code> method cannot be used inside the expression</li>
</ul>
</div>
<p>Polymer supports many<a id="id276" class="indexterm"></a> operations for working with expression. These operations are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Identifiers and paths</strong></span>: This represents the object and the properties present inside the current <a id="id277" class="indexterm"></a>page scope. Normally, paths are represented using dot (<code class="literal">.</code>) operator. The following code shows an example of identifier and paths:<div class="informalexample"><pre class="programlisting">{{student.name}}
{{student.subject.mark}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Array access</strong></span>: This represents the members present inside an array object. Normally, array access <a id="id278" class="indexterm"></a>can be represented using a square (<code class="literal">[]</code>) bracket. The following code shows an example of array access:<div class="informalexample"><pre class="programlisting">{{student[0].name}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Logical not operator</strong></span>: This represents<a id="id279" class="indexterm"></a> the Boolean operator to negate the truth value. The following code shows an example of not operator:<div class="informalexample"><pre class="programlisting">{{!flag}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Unary operators</strong></span>: This represents the unary operators like <code class="literal">+</code> and <code class="literal">–</code> to work with single operand. The<a id="id280" class="indexterm"></a> following code shows an example of unary operator:<div class="informalexample"><pre class="programlisting">{{-number}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Binary operators</strong></span>: This represents the binary operators to work with two operands. The<a id="id281" class="indexterm"></a> following code shows an example of binary operator:<div class="informalexample"><pre class="programlisting">{{number1*number2}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Comparators</strong></span>: This represents <code class="literal">&lt;, &gt;</code>, <code class="literal">&lt;=, &gt;=</code>, <code class="literal">==</code>, <code class="literal">!=</code>, <code class="literal">===</code>, <code class="literal">!==</code>, and returns a Boolean value. The<a id="id282" class="indexterm"></a> following code shows an example of comparator:<div class="informalexample"><pre class="programlisting">{{number1 &lt; number2}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Logical comparators</strong></span>: This represents logical operators like AND (<code class="literal">&amp;&amp;</code>) and OR(<code class="literal">||</code>), and returns a <a id="id283" class="indexterm"></a>Boolean value. The following code shows an example of logical comparator:<div class="informalexample"><pre class="programlisting">{{variable1 &amp;&amp; variable2}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Ternary operator</strong></span>: This represents ternary operators like the <code class="literal">if</code> condition. The following code shows <a id="id284" class="indexterm"></a>an example of ternary operator:<div class="informalexample"><pre class="programlisting">{{number1 &gt; number2 ? "number1 is greater" :  "number2 is greater"}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Parenthesis</strong></span>: This helps in grouping the expression to be evaluated. The following code shows<a id="id285" class="indexterm"></a> an example of parenthesis:<div class="informalexample"><pre class="programlisting">{{(number1 + number2)*number3}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Literal values</strong></span>: This represents literal identifiers<a id="id286" class="indexterm"></a> like null and undefined. The following code shows an example of literals:<div class="informalexample"><pre class="programlisting">{{null}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Array and object initializers</strong></span>: This represents the anonymous array and object declaration. The following<a id="id287" class="indexterm"></a> code shows an example of array initializer:<div class="informalexample"><pre class="programlisting">{{["Apple", "Orange"]}}</pre>
</div></li>
<li class="listitem"><span class="strong"><strong>Function</strong></span>: A function can be called using Polymer expression. The following code shows an example<a id="id288" class="indexterm"></a> of a function:<div class="informalexample"><pre class="programlisting">{{someFunction()}}</pre>
</div><div class="note" title="Note"><h3 class="title"><a id="note15"></a>Note</h3>
<p>To find out more about Polymer expression, refer to <a class="ulink" href="https://www.polymer-project.org/docs/polymer/expressions.html">https://www.polymer-project.org/docs/polymer/expressions.html</a>.</p>
</div></li>
</ul>
</div>
<p>We can also use filters on the Polymer expression. Before jumping into filter expression, let's learn about the Polymer template with auto-binding. The reason for looking at auto-binding first is that the examples in the coming section are independent and run in the current page scope.</p>
<div class="section" title="Polymer templating with auto-binding"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec37"></a>Polymer templating with auto-binding</h2>
</div>
</div>
</div>
<p>In <a class="link" title="Chapter&#160;1.&#160;Introducing Web Components" href="lrn-web-cmpn-dev_ch01.html#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Introducing Web Components</em></span>, we learned about the <code class="literal">&lt;template&gt;</code> element defined in the W3C web component specification. Polymer adds some additional features, such<a id="id289" class="indexterm"></a> as expressions and template binding. This means we can use expressions inside a template, which can be rendered to the<a id="id290" class="indexterm"></a> browser.</p>
<p>The Polymer templating <a id="id291" class="indexterm"></a>works differently than the traditional templating. The DOM model of a template instance remains in the browser as long as the respective data is in use. If there are any changes to the data, then Polymer compares and modifies the specific part of DOM. It results in the smallest changes into the DOM tree.</p>
<p>Polymer templating can be used on a page level by using the auto-binding feature. As we know, the <code class="literal">&lt;template&gt;</code> content is inert in nature until it is activated. Polymer template comes with a solution called auto-binding, where the template gets activated by considering the template, and the data model is present on the template itself. A template can be used as<a id="id292" class="indexterm"></a> auto-bound by using the <code class="literal">is</code> attribute auto-binding value. The syntax for the auto-binding a template is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;template is="auto-binding"&gt;
&lt;/template&gt;</pre>
</div>
<p>Let's check out a simple example of auto-binding a template. The code for the usage of the auto-binding feature is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt;&lt;/s cript&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;Polymer template auto binding example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;template is="auto-binding"&gt;
        &lt;h1&gt;This is an auto binding example&lt;/h1&gt;
    &lt;/template&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>In the preceding <a id="id293" class="indexterm"></a>code, the template has an auto-binding property and some content within the <code class="literal">h1</code> element. If we run this code in a browser, the <code class="literal">&lt;template&gt;</code> element gets activated due to the auto-binding feature, and then the content is rendered. The following screenshot shows the output and HTML inspection of the preceding code:</p>
<div class="mediaobject"><img src="../Images/image00260.jpeg" alt="Polymer templating with auto-binding"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>In the preceding<a id="id294" class="indexterm"></a> screenshot, we can see that the HTML instance markup generated by the template is appended just after it. This is a unique feature <a id="id295" class="indexterm"></a>of a template with auto-binding. The <code class="literal">&lt;template&gt;</code> element has the bind property attached to itself as the template is auto-bound.</p>
<div class="note" title="Note"><h3 class="title"><a id="note16"></a>Note</h3>
<p>To find out more<a id="id296" class="indexterm"></a> about the Polymer template auto-binding feature, refer to <a class="ulink" href="https://www.polymer-project.org/docs/polymer/databinding-advanced.html#autobinding">https://www.polymer-project.org/docs/polymer/databinding-advanced.html#autobinding</a>.</p>
</div>
<div class="section" title="Polymer template attributes"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec15"></a>Polymer template attributes</h3>
</div>
</div>
</div>
<p>Polymer <a id="id297" class="indexterm"></a>provides additional features to the <code class="literal">&lt;template&gt;</code> element to make it more useful. Polymer derives its templating mechanism from the<a id="id298" class="indexterm"></a> <code class="literal">TemplateBinding</code> library. You can<a id="id299" class="indexterm"></a> find more details about this library at <a class="ulink" href="https://github.com/polymer/TemplateBinding">https://github.com/polymer/TemplateBinding</a>. It provides many useful attributes to help in data binding. These attributes are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">bind</code>: This attribute <a id="id300" class="indexterm"></a>can be used to bind a template to a JavaScript object.</li>
<li class="listitem"><code class="literal">repeat</code>: This<a id="id301" class="indexterm"></a> attribute can be used to iterate a template by binding the template to a list.</li>
<li class="listitem"><code class="literal">if</code>: This<a id="id302" class="indexterm"></a> attribute can be used to check a logical condition by comparing a property of the bound JavaScript object.</li>
<li class="listitem"><code class="literal">ref</code>: This attribute <a id="id303" class="indexterm"></a>can be used to include another template in the current template. The <code class="literal">ref</code> attribute takes the ID of other templates to include it to the current template.</li>
</ul>
</div>
<p>Let's check out an example to help understand the use of these attributes in a template element. The<a id="id304" class="indexterm"></a> following code shows the use of these attributes:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt;&lt;/s cript&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;Polymer template attributes example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;template id="template1" is="auto-binding"
          <span class="strong"><strong>if="{{myData.myFlag}}</strong></span>"&gt;
    &lt;h1&gt;The value of myFlag is {{myData.myFlag}}&lt;/h1&gt;
&lt;/template&gt;
&lt;template id="template2" is="auto-binding"
          <span class="strong"><strong>repeat="{{studentName in students}}</strong></span>"&gt;
    &lt;h1&gt;{{studentName}}&lt;/h1&gt;
&lt;/template&gt;
&lt;template id="template3" is="auto-binding"
          <span class="strong"><strong>repeat="{{sub in subjects}}</strong></span>"&gt;
    &lt;template <span class="strong"><strong>bind="{{sub}}</strong></span>"&gt;
        &lt;h1&gt;Subject name is {{name}} and country is {{country}}&lt;/h1&gt;
    &lt;/template&gt;
&lt;/template&gt;
&lt;template <span class="strong"><strong>id="template4</strong></span>"&gt;
    &lt;h1&gt;Hello world !!!&lt;/h1&gt;
&lt;/template&gt;
&lt;template id="template5" is="auto-binding"
          <span class="strong"><strong>ref="template4</strong></span>"&gt;
&lt;/template&gt;

<span class="strong"><strong>&lt;script&gt;</strong></span>
<span class="strong"><strong>    (function () {</strong></span>
<span class="strong"><strong>        var template1 = document.querySelector("#template1"),</strong></span>
<span class="strong"><strong>            template2 = document.querySelector("#template2"),</strong></span>
<span class="strong"><strong>            template3 = document.querySelector("#template3");</strong></span>
<span class="strong"><strong>        template1.myData = {</strong></span>
<span class="strong"><strong>            "myFlag": true</strong></span>
<span class="strong"><strong>        };</strong></span>
<span class="strong"><strong>        template2.students = ["Sandeep", "Sangeeta", "Surabhi", "Sumanta"];</strong></span>
<span class="strong"><strong>        template3.subjects = [{"name": "Computer", "country": "India"}]</strong></span>
<span class="strong"><strong>    })();</strong></span>
<span class="strong"><strong>&lt;/script&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The template element with the <code class="literal">template1</code> ID has the <code class="literal">myData</code> model, which has the <code class="literal">myFlag</code> property with true Boolean value. The template has the <code class="literal">if</code> attribute, which <a id="id305" class="indexterm"></a>checks the <code class="literal">myFlag</code> value and displays the HTML content of <code class="literal">template1</code>.</li>
<li class="listitem">The template element with the <code class="literal">template2</code> ID has the <code class="literal">students</code> model containing an array of names. The <code class="literal">template2</code> element has the <code class="literal">repeat</code> attribute to iterate the array of names to render in the browser.</li>
<li class="listitem">The template element with the <code class="literal">template3</code> ID is bound with the <code class="literal">subjects</code> model containing objects having <code class="literal">name</code> and <code class="literal">country</code> property. The <code class="literal">template3</code> ID contains another nested template, which is bound to the <code class="literal">sub</code> instance of subject to display <code class="literal">name</code> and <code class="literal">country</code> values inside it.</li>
<li class="listitem">The template element with the <code class="literal">template5</code> ID has the <code class="literal">ref</code> attribute referring to <code class="literal">template4</code>. The <code class="literal">template4</code> ID has a text message wrapped inside the <code class="literal">h1</code> element. On activation of the <code class="literal">template5</code> element, the contents of <code class="literal">template4</code> are included and rendered in the browser.</li>
</ul>
</div>
<p>The output of the preceding code is listed in the following screenshot, which shows the use of the mentioned attributes:</p>
<div class="mediaobject"><img src="../Images/image00261.jpeg" alt="Polymer template attributes"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The following<a id="id306" class="indexterm"></a> screenshot shows the Chrome developer console, showing template attributes in action, and the generated HTML instances are inserted just after the template:</p>
<div class="mediaobject"><img src="../Images/image00262.jpeg" alt="Polymer template attributes"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>
<div class="section" title="Filtering expression"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec38"></a>Filtering expression</h2>
</div>
</div>
</div>
<p>Polymer <a id="id307" class="indexterm"></a>provides filter support to work with the expression. Filters are useful to modify the output of an expression. The syntax of using filter with an expression is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>{{Expression | filterName}}</strong></span>
</pre>
</div>
<p>In the previous code, an expression and filter is combined using a bar (<code class="literal">|</code>) symbol. The filter function takes the value of the given expression and modifies it based on the filter logic, and then renders it in the browser.</p>
</div>
<div class="section" title="Built-in filtering expression"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec39"></a>Built-in filtering expression</h2>
</div>
</div>
</div>
<p>Polymer has<a id="id308" class="indexterm"></a> two built-in filters to work with the expression. These two predefined filters are <code class="literal">tokenList</code> and <code class="literal">styleObject</code>. Let's explore these<a id="id309" class="indexterm"></a> built-in filters in more detail.</p>
<div class="section" title="The TokenList filter"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec16"></a>The TokenList filter</h3>
</div>
</div>
</div>
<p>The <code class="literal">tokenList</code> filter can be used for adding and removing a string based on the supplied object. It is a really good fit to programmatically modify the class names. However, for demonstration, we<a id="id310" class="indexterm"></a> have used a string. The following code shows the use of the <code class="literal">tokenList</code> filter with an expression:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt;&lt;/s cript&gt;
    &lt;link rel="importhref="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;PolymerJS tokenList Builtin Filter Expression&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;template id="template1" is="auto-binding"&gt;
        &lt;h1&gt;Name : {{student.name}}&lt;/h1&gt;
        &lt;h1&gt;Score : {{student.score}}&lt;/h1&gt;
        <span class="strong"><strong>&lt;h1&gt;Result : {{ {"Passed": student.score &gt; 60} | tokenList}}&lt;/h1&gt;</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
        (function(){
            var template1 = document.querySelector("#template1");
<span class="strong"><strong>            template1.student= {</strong></span>
<span class="strong"><strong>                "name":"Sandeep",</strong></span>
<span class="strong"><strong>                "score":70</strong></span>
<span class="strong"><strong>            }</strong></span>
        })();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">In the preceding code, <code class="literal">template1</code> is attached with the <code class="literal">student</code> object having two properties—<code class="literal">name</code> and <code class="literal">score</code>.</li>
<li class="listitem">Inside <code class="literal">template1</code>, the score of the student is compared against a passing marks <code class="literal">60</code> with the built-in filter <code class="literal">tokenList</code>. If the score is more than <code class="literal">60</code>, the <span class="strong"><strong>Passed</strong></span> string is rendered in place of an expression.</li>
</ul>
</div>
<p>The following screenshot shows the output of the preceding code containing the name of the student, score of the student, and their result. The score of the student is <code class="literal">70</code>, and compared with the pass <a id="id311" class="indexterm"></a>mark of <code class="literal">60</code>, it returns true and the <span class="strong"><strong>Passed</strong></span> string is rendered in a browser.</p>
<div class="mediaobject"><img src="../Images/image00263.jpeg" alt="The TokenList filter"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="The styleObject filter"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec17"></a>The styleObject filter</h3>
</div>
</div>
</div>
<p>The <code class="literal">styleObject</code> filter is <a id="id312" class="indexterm"></a>used for converting a JSON object into a string of key value pair. This filter is a good fit for working with the <code class="literal">style</code> attribute of an element. The following code shows the use of the <code class="literal">styleObject</code> filter with an expression:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt; &lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;PolymerJS styleObject Builtin Filter Expression&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;template id="template1" is="auto-binding"&gt;
<span class="strong"><strong>        &lt;div style="{{myStyle | styleObject}}"&gt;Name : {{student.name}}&lt;/div&gt;</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
        (function(){
            var template1 = document.querySelector("#template1");
            template1.student= {
                "name":"Sandeep"
            };
<span class="strong"><strong>            template1.myStyle= {</strong></span>
<span class="strong"><strong>                "color": "tomato",</strong></span>
<span class="strong"><strong>                "font-size":"30px",</strong></span>
<span class="strong"><strong>                "height":"40px",</strong></span>
<span class="strong"><strong>                "width":"200px",</strong></span>
<span class="strong"><strong>                "border":"1px solid green",</strong></span>
<span class="strong"><strong>                "padding":"20px"</strong></span>
<span class="strong"><strong>            };</strong></span>
        })();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the <a id="id313" class="indexterm"></a>preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">myStyle</code> property of the student object has a set of key/value pairs, containing CSS properties</li>
<li class="listitem">The template expression is used with the <code class="literal">styleObject</code> filter to convert the key/value pairs to complete the CSS string</li>
</ul>
</div>
<p>The output of the preceding code is listed in the following screenshot, where we can see that the <code class="literal">myStyle</code> object's key/value pairs are converted to CSS string and gets applied to the <code class="literal">style</code> attribute of the <code class="literal">div</code> element:</p>
<div class="mediaobject"><img src="../Images/image00264.jpeg" alt="The styleObject filter"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>
<div class="section" title="Custom filtering expression"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec40"></a>Custom filtering expression</h2>
</div>
</div>
</div>
<p>Polymer supports<a id="id314" class="indexterm"></a> development of our own custom filters to be used in the expression. Let's check out an example of creating a custom filter. The code for creating a custom filter and its use is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt; &lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;PolymerJS Custom Filter Expression&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;template id="template1" is="auto-binding"&gt;
        <span class="strong"><strong>&lt;h1&gt;{{student.name | sayHello}}&lt;/h1&gt;</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
        (function(){
            var template1 = document.querySelector("#template1");
            template1.student= {
                "name":"Sandeep"
            };
            <span class="strong"><strong>template1.sayHello= function(inputString){</strong></span>
<span class="strong"><strong>              return "Hello " + inputString;</strong></span>
<span class="strong"><strong>            };</strong></span>
        })();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">template1</code> variable has an expression for displaying the name of the student with a custom filter named <code class="literal">sayHello</code></li>
<li class="listitem">The definition of the <code class="literal">sayHello</code> filter method is present as a value of the <code class="literal">sayHello</code> attribute</li>
<li class="listitem">The <code class="literal">sayHello</code> filter method takes an expression value and prepends the <code class="literal">Hello</code> text before the name of the student</li>
</ul>
</div>
<p>The following screenshot shows the output of the preceding code, where the <span class="strong"><strong>Hello</strong></span> string is prepended to the name <span class="strong"><strong>Sandeep</strong></span> due to the <code class="literal">sayHello</code> filter:</p>
<div class="mediaobject"><img src="../Images/image00265.jpeg" alt="Custom filtering expression"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Global filtering expression"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec41"></a>Global filtering expression</h2>
</div>
</div>
</div>
<p>Polymer supports defining global filters to increase their reusability. A global filter is available as an<a id="id315" class="indexterm"></a> API to the application developer. A global filter can be created by using the <code class="literal">PolymerExpression</code> object. A new filter can be added to the Polymer by creating a new property of the <code class="literal">PolymerExpression</code> object by using the <code class="literal">prototype</code> attribute. The code for creating a global filter is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt; &lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;PolymerJS Global Custom Filter Expression&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;template id="template1" is="auto-binding"&gt;
        <span class="strong"><strong>&lt;h1&gt;{{student.name | sayBye}}&lt;/h1&gt;</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
        (function(){
            var template1 = document.querySelector("#template1");
            template1.student= {
                "name":"Sandeep"
            };
<span class="strong"><strong>            PolymerExpressions.prototype.sayBye = function(inputString) {</strong></span>
<span class="strong"><strong>                return "Bye " + inputString;</strong></span>
<span class="strong"><strong>            };</strong></span>
        })();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>In the preceding code, a global filter named <code class="literal">sayBye</code> is created by defining a new property in <code class="literal">PolymerExpression.prototype</code>. The output of the preceding code is listed in the following screenshot:</p>
<div class="mediaobject"><img src="../Images/image00266.jpeg" alt="Global filtering expression"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>


<div class="section" title="Developing Polymer custom elements"><div class="titlepage" id="aid-11C3M2"><div><div><h1 class="title"><a id="ch03lvl1sec30"></a>Developing Polymer custom elements</h1>
</div>
</div>
</div>
<p>Polymer has <a id="id316" class="indexterm"></a>built-in elements—core and paper. Polymer also supports development of our own custom element. Some of the benefits of developing custom elements are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">They are reusable</li>
<li class="listitem">They reduce the code size of the application</li>
<li class="listitem">They increase the developer's productivity</li>
<li class="listitem">They help in achieving encapsulation by hiding the definition of the element<div class="note" title="Note"><h3 class="title"><a id="note17"></a>Note</h3>
<p>In Polymer, everything is an element.</p>
</div></li>
</ul>
</div>
<p>In the following section, we will learn to develop a custom element. The steps for developing a custom element are as follows:</p>
<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Defining a custom element</li>
<li class="listitem">Defining element attributes</li>
<li class="listitem">Defining default attributes</li>
<li class="listitem">Defining public properties and methods</li>
<li class="listitem">Publishing properties</li>
<li class="listitem">Defining a lifecycle method</li>
<li class="listitem">Registering a custom element</li>
</ol>
<div style="height:10px; width: 1px"></div>
</div>
<div class="section" title="Defining a custom element"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec42"></a>Defining a custom element</h2>
</div>
</div>
</div>
<p>A custom element can be defined using the <code class="literal">&lt;polymer-element&gt;</code> tag. The code syntax for developing a <a id="id317" class="indexterm"></a>custom element is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;<span class="strong"><strong>polymer-element name</strong></span>="tag-name" <span class="strong"><strong>constructor</strong></span>="TagName"&gt;
  &lt;template&gt;
    &lt;!-- shadow DOM here --&gt;
  &lt;/template&gt;
  &lt;script&gt;
    <span class="strong"><strong>Polymer({</strong></span>
<span class="strong"><strong>      // properties and methods here</strong></span>
<span class="strong"><strong>    });</strong></span>
  &lt;/script&gt;
&lt;/<span class="strong"><strong>polymer-element</strong></span>&gt;</pre>
</div>
<p>The details of the preceding syntax are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">In the preceding code, a custom element definition has been wrapped within the <code class="literal">&lt;polymer-element&gt;</code> tag</li>
<li class="listitem">The definition contains the <code class="literal">&lt;template&gt;</code> element containing the HTML markup for the custom element</li>
<li class="listitem">The definition also contains the <code class="literal">&lt;script&gt;</code> element containing the properties and methods for the custom element</li>
<li class="listitem">The <code class="literal">&lt;polymer-element&gt;</code> tag takes the following attributes while defining a new custom element:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">Name</code>: This is a required field and represents the name of the custom element. The name must be separated with a hyphen (<code class="literal">-</code>).</li>
<li class="listitem"><code class="literal">Attributes</code>: This is an optional field and can be used for defining the attribute that the custom element can have.</li>
<li class="listitem"><code class="literal">Extends</code>: This is an optional field and can be used for extending another element through inheritance.</li>
<li class="listitem"><code class="literal">Noscript</code>: This is an optional attribute and can be used by a custom element while defining an attribute, when it does need any properties and methods. Put more simply, it creates a simple element that has only name and constructor.</li>
<li class="listitem"><code class="literal">Constructor</code>: This is an optional attribute and represents the name of the constructor that can be used by the programmer to create a new instance of the custom element, using the <code class="literal">new</code> keyword.</li>
</ul>
</div></li>
</ul>
</div>
</div>
<div class="section" title="Defining element attributes"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec43"></a>Defining element attributes</h2>
</div>
</div>
</div>
<p>Custom attributes<a id="id318" class="indexterm"></a> can be defined using the attribute property of <code class="literal">&lt;polymer-element&gt;</code>. This can take multiple attribute names separated by a <span class="emphasis"><em>space</em></span>. A property defined inside the attribute property is published by default .The syntax of the attribute declaration is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;polymer-element name="tag-name" 
                 <span class="strong"><strong>attributes="property1 property2...</strong></span>"&gt;
&lt;/polymer-element&gt;</pre>
</div>
</div>
<div class="section" title="Defining default attributes"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec44"></a>Defining default attributes</h2>
</div>
</div>
</div>
<p>We can define <a id="id319" class="indexterm"></a>default attributes to a custom element. The default attributes directly get attached with the custom element while rendering. The syntax for defining a default attribute is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;polymer-element name="tag-name" <span class="strong"><strong>myDefaultProperty1</strong></span>&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>In the preceding code a default property named <code class="literal">myDefaultProperty1</code> is defined. To define any default properties just add the name to the <code class="literal">&lt;polymer-element&gt;</code> element as an attribute.</p>
</div>
<div class="section" title="Defining public properties and methods"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec45"></a>Defining public properties and methods</h2>
</div>
</div>
</div>
<p>We can define <a id="id320" class="indexterm"></a>public properties and methods<a id="id321" class="indexterm"></a> for a custom element while also defining it. The following code shows the syntax of declaring public properties and methods:</p>
<div class="informalexample"><pre class="programlisting">&lt;polymer-element name="tag-name"&gt;
  &lt;script&gt;
    Polymer({
      <span class="strong"><strong>message</strong></span>: "Hi!",
      <span class="strong"><strong>get greeting</strong></span>() {
        return this.message + ' You are welcome.';
      },
      <span class="strong"><strong>sayBye</strong></span> : function(){
        return ' Bye.';
      }
    });
  &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">In the mentioned definition, <code class="literal">message</code> is a property with a <code class="literal">get</code> methods <code class="literal">greeting</code> function. The <code class="literal">get</code> method can access the message property with the <code class="literal">this</code> keyword. The <code class="literal">this</code> keyword refers to the custom element <code class="literal">&lt;tag-name&gt;</code>.</li>
<li class="listitem">In the<a id="id322" class="indexterm"></a> previous definition, the<a id="id323" class="indexterm"></a> <code class="literal">sayBye</code> method is a public function and returns a <code class="literal">Bye</code> string.</li>
</ul>
</div>
</div>
<div class="section" title="Publishing properties"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec46"></a>Publishing properties</h2>
</div>
</div>
</div>
<p>The properties<a id="id324" class="indexterm"></a> defined inside the attribute are by default public. There is another way to publish the properties of a custom element—using the <code class="literal">publish</code> attribute. The syntax for publishing properties is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;polymer-element name="tag-name"&gt;
  &lt;script&gt;
    Polymer({
<span class="strong"><strong>      publish: {</strong></span>
<span class="strong"><strong>         property1: "value1",</strong></span>
<span class="strong"><strong>         property2: "value2",</strong></span>
<span class="strong"><strong>      }</strong></span>
    });
  &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>In the preceding code, <code class="literal">property1</code> and <code class="literal">property2</code> are published using the <code class="literal">publish</code> keyword. Publishing properties using the attribute approach is the preferable way, as it follows a declarative method. However, the use of the publish keyword approach can be selected in if the following statements are true:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">If there are long lists of attributes that need to be published for a custom element</li>
<li class="listitem">If we need to define default values for the properties</li>
<li class="listitem">If we need two-way declarative binding to a published property</li>
</ul>
</div>
</div>
<div class="section" title="Defining a lifecycle method"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec47"></a>Defining a lifecycle method</h2>
</div>
</div>
</div>
<p>The Polymer element goes<a id="id325" class="indexterm"></a> through different states during its lifecycle. The following diagram shows the possible states of a custom element:</p>
<div class="mediaobject"><img src="../Images/image00267.jpeg" alt="Defining a lifecycle method"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The different states of a custom element are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Created</strong></span>: This is the state when an instance of the custom element is created</li>
<li class="listitem"><span class="strong"><strong>Ready</strong></span>: This is the state when the shadow DOM is ready, event listeners are attached, and the property observers are set up</li>
<li class="listitem"><span class="strong"><strong>Attached</strong></span>: This is the state when the custom element is attached to the DOM</li>
<li class="listitem"><span class="strong"><strong>DOMReady</strong></span>: This is the state when the initial sets of custom element children are exists in DOM</li>
<li class="listitem"><span class="strong"><strong>AttributeChanged</strong></span>: This is the state when one of the attribute values is changed</li>
<li class="listitem"><span class="strong"><strong>Detached</strong></span>: This is the state when the custom element is removed from the DOM</li>
</ul>
</div>
<p>The syntax of the <a id="id326" class="indexterm"></a>callback methods for the lifecycle states, to define our own custom logic, is as follows:</p>
<div class="informalexample"><pre class="programlisting">Polymer('tag-name', {
  <span class="strong"><strong>created</strong></span>: function() {
    //Code for created state callback
  },
  <span class="strong"><strong>ready</strong></span>: function() {
     //Code for ready state callback
  },
  <span class="strong"><strong>attached</strong></span>: function () {
    //Code for attached state callback
  },
  <span class="strong"><strong>domReady</strong></span>: function() {
    //Code for domReady state callback
  },
  <span class="strong"><strong>detached</strong></span>: function() {
    //Code for detached state callback
  },
  <span class="strong"><strong>attributeChanged</strong></span>: function(<span class="strong"><strong>attrName</strong></span>, <span class="strong"><strong>oldVal</strong></span>, <span class="strong"><strong>newVal</strong></span>) {
    // code for attribute changed state callback
  }
});</pre>
</div>
<p>In the preceding<a id="id327" class="indexterm"></a> syntax, we can see the callback method representing each lifecycle state of a custom element.</p>
</div>
<div class="section" title="Registering a custom element"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec48"></a>Registering a custom element</h2>
</div>
</div>
</div>
<p>The native<a id="id328" class="indexterm"></a> way of defining a custom element is using the <code class="literal">Polymer</code> method in the <code class="literal">&lt;polymer-element&gt;</code> tag. The syntax of registering an element is as follows:</p>
<div class="informalexample"><pre class="programlisting">Polymer([ tag-name, ] [prototype]);</pre>
</div>
</div>
</div>


<div class="section" title="Developing a sample custom element" id="aid-12AK81"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec31"></a>Developing a sample custom element</h1>
</div>
</div>
</div>
<p>Now, it is time to<a id="id329" class="indexterm"></a> develop a simple <code class="literal">&lt;say-hello&gt;</code> element with a <code class="literal">mytext</code> attribute with the default text <code class="literal">World!!!</code> and a template to render in the browser. The code definition for the <code class="literal">&lt;say-hello&gt;</code> element is present inside the <code class="literal">hello-component.html</code> file and is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;polymer-element name=<span class="strong"><strong>"say-hello</strong></span>" constructor=<span class="strong"><strong>"SayHello</strong></span>" attributes=<span class="strong"><strong>"mytext</strong></span>"&gt;
    &lt;template&gt;
       <span class="strong"><strong>&lt;h4&gt;Hello {{mytext}} !!!&lt;/h4&gt;</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
        <span class="strong"><strong>Polymer({</strong></span>
<span class="strong"><strong>            created: function() {</strong></span>
<span class="strong"><strong>               this.mytext = "World"</strong></span>
<span class="strong"><strong>            }</strong></span>
<span class="strong"><strong>        });</strong></span>
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A new custom element <code class="literal">&lt;say-hello&gt;</code> is defined using the <code class="literal">&lt;polymer-element&gt;</code> tag.</li>
<li class="listitem">The custom element has the <code class="literal">mytext</code> attribute, which is published as public and initialized with a default value <code class="literal">world</code> using the <code class="literal">created</code> callback method.</li>
<li class="listitem">The custom element has a constructor named <code class="literal">SayHello</code>. By using this constructor, we can programmatically create an instance of a <code class="literal">SayHello</code> element <a id="id330" class="indexterm"></a>using the <code class="literal">new</code> keyword. The syntax for using a <code class="literal">new</code> keyword is as follows:<div class="informalexample"><pre class="programlisting">var sayHello1 = new SayHello();</pre>
</div></li>
</ul>
</div>
<p>The following code shows the use of the <code class="literal">&lt;say-hello&gt;</code> element in an HTML page:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt; &lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    <span class="strong"><strong>&lt;link rel="import" href="hello-component.html"&gt;</strong></span>
    &lt;title&gt;Polymer sayHello component demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    <span class="strong"><strong>&lt;say-hello&gt;</strong></span>
<span class="strong"><strong>    &lt;/say-hello&gt;</strong></span>
<span class="strong"><strong>    &lt;say-hello mytext="John"&gt;&lt;/say-hello&gt;</strong></span>
    &lt;script&gt;
        //Using SayHello Constructor
        window.addEventListener('polymer-ready', function(e) {
<span class="strong"><strong>            var sayHello1 = new SayHello();</strong></span>
<span class="strong"><strong>            sayHello1.mytext = "PolymerJS"";</strong></span>
<span class="strong"><strong>            document.body.appendChild(sayHello1);</strong></span>
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>In the preceding code, we have called the <code class="literal">&lt;say-hello&gt;</code> element in the following three different ways:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Without the <code class="literal">mytext</code> attribute</li>
<li class="listitem">With the <code class="literal">mytext</code> attribute value as <code class="literal">John</code></li>
<li class="listitem">Using the JavaScript constructor <code class="literal">new SayHello</code> and assigning the <code class="literal">mytext</code> property to the <code class="literal">Polymer</code> string</li>
</ul>
</div>
<p>The output of the preceding code is shown in the following screenshot with three different<a id="id331" class="indexterm"></a> message generated by the <code class="literal">&lt;say-hello&gt;</code> element used:</p>
<div class="mediaobject"><img src="../Images/image00268.jpeg" alt="Developing a sample custom element"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>


<div class="section" title="Extending a custom element" id="aid-1394Q1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec32"></a>Extending a custom element</h1>
</div>
</div>
</div>
<p>A custom element <a id="id332" class="indexterm"></a>can be extended from another element using the <code class="literal">extends</code> attribute. We can only extend from one element at a time. Let's develop an element named <code class="literal">&lt;say-good&gt;</code>, which is extended from <code class="literal">&lt;say-hello&gt;</code>. The following code presents the <code class="literal">good-component.html</code> file and has the definition of <code class="literal">&lt;say-good&gt;</code> custom element:</p>
<div class="informalexample"><pre class="programlisting">&lt;link rel="import" href="hello-component.html"&gt;
&lt;polymer-element name=<span class="strong"><strong>"say-good" extends="say-hello</strong></span>"
                 constructor="SayGood" attributes="time"&gt;
    &lt;template&gt;
        <span class="strong"><strong>&lt;shadow&gt;&lt;/shadow&gt;Good {{time}}</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
        Polymer({
<span class="strong"><strong>            created:function(){</strong></span>
<span class="strong"><strong>                this.time="Morning";</strong></span>
<span class="strong"><strong>            }</strong></span>
        });
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A new custom element named <code class="literal">&lt;say-good&gt;</code> is created by extending the <code class="literal">&lt;say-hello&gt;</code> element with a published property named <code class="literal">time</code></li>
<li class="listitem">The default value of the <code class="literal">time</code> property is assigned to <code class="literal">Morning</code> using the <code class="literal">created</code> callback method</li>
<li class="listitem">The template of the <code class="literal">&lt;say-good&gt;</code> element contains a <a id="id333" class="indexterm"></a><span class="strong"><strong>shadow insertion point</strong></span> for the parent element markup with a text message <code class="literal">Good</code> and an expression <code class="literal">{{time}}</code></li>
</ul>
</div>
<p>The following <a id="id334" class="indexterm"></a>code shows the use of the <code class="literal">&lt;say-good&gt;</code> element:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt; &lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    <span class="strong"><strong>&lt;link rel="import" href="good-component.html"&gt;</strong></span>
    &lt;title&gt;Polymer sayGood component demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
<span class="strong"><strong>    &lt;say-good mytext="John" time="Night"&gt;</strong></span>
<span class="strong"><strong>    &lt;/say-good&gt;</strong></span>
    &lt;script&gt;
        //Using SayGood Constructor
        window.addEventListener(<span class="strong"><strong>'polymer-ready</strong></span>', function(e) {
<span class="strong"><strong>            var sayGood1 = new SayGood();</strong></span>
<span class="strong"><strong>            sayGood1.mytext = "Smith";</strong></span>
<span class="strong"><strong>            sayGood1.time = "Afternoon";</strong></span>
<span class="strong"><strong>            document.body.appendChild(sayGood1);</strong></span>
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;say-good&gt;</code> element is called using <code class="literal">mytext</code> and the <code class="literal">time</code> attribute with values <code class="literal">John</code> and <code class="literal">Night</code>, respectively.</li>
<li class="listitem">An object of the <code class="literal">SayGood</code> element is initialized using its constructor with the <code class="literal">new</code> keyword. The <code class="literal">mytext</code> object property and time is then assigned with values <code class="literal">Smith</code> and <code class="literal">Afternoon</code>, respectively.</li>
</ul>
</div>
<p>The output of the<a id="id335" class="indexterm"></a> preceding code is shown in the following screenshot, which shows the message from the parent element <code class="literal">&lt;say-hello&gt;</code> inserted in the shadow insertion point:</p>
<div class="mediaobject"><img src="../Images/image00269.jpeg" alt="Extending a custom element"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>


<div class="section" title="Polymer methods"><div class="titlepage" id="aid-147LC2"><div><div><h1 class="title"><a id="ch03lvl1sec33"></a>Polymer methods</h1>
</div>
</div>
</div>
<p>The PolymerJS library has some utility methods to deal with mixins, imports, and element registration. In the following section, we will learn how to use these methods.</p>
<div class="section" title="The Polymer mixin method"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec49"></a>The Polymer mixin method</h2>
</div>
</div>
</div>
<p>Polymer provides<a id="id336" class="indexterm"></a> mixins for sharing common methods among custom <a id="id337" class="indexterm"></a>elements. Mixin helps to reduce duplicate code. The syntax for creating a mixin is as follows:</p>
<div class="informalexample"><pre class="programlisting">Polymer.<span class="strong"><strong>mixin</strong></span>({ //Common methods });</pre>
</div>
<p>Let's check out an example of sharing common methods using mixins. The details of the example are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The common mixin methods are present in the <code class="literal">common-mixin.html</code> file. The <code class="literal">window.commonMixins</code> object will contain the shared methods. The code for the <code class="literal">common-mixin.html</code> file is as follows:<div class="informalexample"><pre class="programlisting">&lt;script&gt;
    window.<span class="strong"><strong>commonMixins</strong></span>={
        //reusable method returning local name of element
        <span class="strong"><strong>printMyName</strong></span>:function(){
            <span class="strong"><strong>return this.localName;</strong></span>
        }
    };
&lt;/script&gt;</pre>
</div></li>
<li class="listitem">The <code class="literal">commonMixins</code> object has a <code class="literal">printMyName</code> method and is shared to the custom components, which use it.</li>
<li class="listitem">A new custom <a id="id338" class="indexterm"></a>component <code class="literal">&lt;print-hi&gt;</code> is defined in the <code class="literal">printHi-component.html</code> file. The <code class="literal">&lt;print-hi&gt;</code> element has used the <code class="literal">commonMixins</code> object. The following code shows the definition of the <code class="literal">&lt;print-hi&gt;</code> component:<div class="informalexample"><pre class="programlisting">&lt;polymer-element name="print-hi" constructor="PrintHi"&gt;
    &lt;template&gt;
        &lt;h4&gt;Hi!!!&lt;/h4&gt;
    &lt;/template&gt;
    &lt;script&gt;
        Polymer(Polymer.mixin({
            //local method
            printHi: function(){
                return "Hi";
            }
        }, window.commonMixins));
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div></li>
<li class="listitem">Another custom element <code class="literal">&lt;print-bye&gt;</code> has been defined in the <code class="literal">printBye-component.html</code> file. This component also uses the <code class="literal">commonMixins</code> object to get access to the <code class="literal">printMyName</code> method. The <code class="literal">printMyName</code> method returns the local name of the custom element. The code for the <code class="literal">&lt;print-bye&gt;</code> element is as follows:<div class="informalexample"><pre class="programlisting">&lt;polymer-element name="print-bye" constructor="PrintBye"&gt;
    &lt;template&gt;
        &lt;h4&gt;Bye!!!&lt;/h4&gt;
    &lt;/template&gt;
    &lt;script&gt;
        Polymer(<span class="strong"><strong>Polymer.mixin</strong></span>({
            printBye:function(){
                return "Bye";
            }
        }, <span class="strong"><strong>window.commonMixins</strong></span>));
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div></li>
<li class="listitem">Now, it is time to test the mixin methods shared by these elements. The test code is present in <code class="literal">mixin-demo.html</code>. In this code, we have created two objects—one from the <code class="literal">PrintHi</code> constructor and the other is from the <code class="literal">PrintBye</code> constructor using the <code class="literal">new</code> keyword. Then, the <code class="literal">printMyName</code> name is called from <a id="id339" class="indexterm"></a>each object, which is logged in the console. The following code contains the test code for checking the mixin methods:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../../bower_components/webcomponentsjs/webcomponents.m in.js"&gt;&lt;/script&gt;
    &lt;link rel="import" href="../../bower_components/polymer/polymer.html"&gt;
    <span class="strong"><strong>&lt;link rel="import" href="common-mixin.html"&gt;</strong></span>
<span class="strong"><strong>    &lt;link rel="import" href="printHi-component.html"&gt;</strong></span>
<span class="strong"><strong>    &lt;link rel="import" href="printBye-component.html"&gt;</strong></span>
    &lt;title&gt;Polymer Mixin Demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script&gt;
    //Using SayGood Constructor
    window.addEventListener('polymer-ready', function(e) {
<span class="strong"><strong>        var printBye1 = new PrintBye(),</strong></span>
<span class="strong"><strong>            printHi1= new PrintHi(),</strong></span>
<span class="strong"><strong>            myName1 = printBye1.printMyName(),</strong></span>
<span class="strong"><strong>            myName2 = printHi1.printMyName();</strong></span>
<span class="strong"><strong>        console.log(myName1);</strong></span>
<span class="strong"><strong>        console.log(myName2);</strong></span>
    });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div></li>
<li class="listitem">The complete code can be downloaded from Packt's website. The following screenshot shows the output of the preceding code:<div class="mediaobject"><img src="../Images/image00270.jpeg" alt="The Polymer mixin method"/></div><p style="clear:both; height: 1em;"> </p></li>
</ul>
</div>
</div>
<div class="section" title="The Polymer import method"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec50"></a>The Polymer import method</h2>
</div>
</div>
</div>
<p>Polymer provides<a id="id340" class="indexterm"></a> the <code class="literal">Polymer.import</code> method for importing the external HTML file. Let's check out an example of using the <code class="literal">import</code> method. The details<a id="id341" class="indexterm"></a> of the example are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">number-detail.html</code> file contains a JavaScript file containing a variable <code class="literal">luckyNumber</code> assigned a value <code class="literal">7</code>. The code present inside the <code class="literal">number-detail.html</code> file is as follows:<div class="informalexample"><pre class="programlisting">&lt;script&gt;
<span class="strong"><strong>    var luckyNumber = 7;</strong></span>
&lt;/script&gt;</pre>
</div></li>
<li class="listitem">The <code class="literal">number-detail.html</code> file has been imported in the <code class="literal">import-method.html</code> file . Once the <code class="literal">number-detail.html</code> file is imported the lucky number is displayed in the browser as the template is using auto-binding feature. The following code shows the import of the <code class="literal">number-detail.html</code> file:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../../bower_components/webcomponentsjs/webcomponents.m in.js"&gt;&lt;/script&gt;
    &lt;link rel="import" href="../../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;Polymer Import Method Demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
<span class="strong"><strong>    &lt;template is="auto-binding" id="myTemplate"&gt;</strong></span>
<span class="strong"><strong>        &lt;h1&gt;Lucky number of the day is : {{myLuckyNumber}}&lt;/h1&gt;</strong></span>
<span class="strong"><strong>    &lt;/template&gt;</strong></span>
&lt;/body&gt;
&lt;script&gt;
    Polymer.import(['number-detail.html'], function () {
<span class="strong"><strong>        var myTemplate = document.querySelector("#myTemplate");</strong></span>
<span class="strong"><strong>            myTemplate.myLuckyNumber = luckyNumber;</strong></span>
    });
&lt;/script&gt;
&lt;/html&gt;</pre>
</div></li>
<li class="listitem">The following<a id="id342" class="indexterm"></a> screenshot shows the output of the preceding code, where the lucky number 7 is rendered in the browser:<div class="mediaobject"><img src="../Images/image00271.jpeg" alt="The Polymer import method"/></div><p style="clear:both; height: 1em;"> </p></li>
</ul>
</div>
</div>
<div class="section" title="The Polymer waitingFor method"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec51"></a>The Polymer waitingFor method</h2>
</div>
</div>
</div>
<p>Polymer provides the <a id="id343" class="indexterm"></a>
<code class="literal">waitingFor</code> method to detect the unregistered element in the application. This method returns a list of elements that are <a id="id344" class="indexterm"></a>not registered yet. Let's check out an example that demonstrates the usage of the <code class="literal">waitingFor</code> method. The details of the example are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A custom component <code class="literal">&lt;good-morning&gt;</code> is created, and intentionally we have delayed the registration for 3 seconds using the <code class="literal">setTimeout</code> method. Code for the <code class="literal">&lt;good-morning&gt;</code> element is present in the <code class="literal">morning-component.html</code> file and is listed as follows:<div class="informalexample"><pre class="programlisting">&lt;polymer-element name=<span class="strong"><strong>"good-morning</strong></span>"&gt;
    &lt;template&gt;
        &lt;h4&gt;Good Morning&lt;/h4&gt;
    &lt;/template&gt;
    &lt;script&gt;
<span class="strong"><strong>        window.setTimeout(function(){</strong></span>
<span class="strong"><strong>            Polymer("good-morning");</strong></span>
<span class="strong"><strong>        },3000)</strong></span>
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div></li>
<li class="listitem">In another HTML file, we have used the <code class="literal">waitingFor</code> method to check whether it contains the <code class="literal">&lt;good-morning&gt;</code> element inside the array during the initial 3 seconds. The<a id="id345" class="indexterm"></a> following code shows the use of the <code class="literal">waitingFor</code> method:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../../bower_components/webcomponentsjs/webcomponents.m in.js"&gt;&lt;/script&gt;
    &lt;link rel="import" href="../../bower_components/polymer/polymer.html"&gt;
    &lt;link rel="import" href="morning-component.html"&gt;
    &lt;title&gt;Polymer waitFor Method Demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    <span class="strong"><strong>&lt;good-morning&gt;&lt;/good-morning&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;
&lt;script&gt;
<span class="strong"><strong>    var elementList= Polymer.waitingFor(),</strong></span>
        length = elementList.length;
    for(var i=0; i&lt;length; i++){
        var aElement = elementList[0];
<span class="strong"><strong>        console.log("Element names waiting registration  are: ",aElement.name);</strong></span>
    }
&lt;/script&gt;</pre>
</div></li>
<li class="listitem">The following screenshot shows the output of the preceding code, which logs the unregistered element in a console:<div class="mediaobject"><img src="../Images/image00272.jpeg" alt="The Polymer waitingFor method"/></div><p style="clear:both; height: 1em;"> </p></li>
</ul>
</div>
</div>
<div class="section" title="The Polymer forceReady method"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec52"></a>The Polymer forceReady method</h2>
</div>
</div>
</div>
<p>Polymer provides<a id="id346" class="indexterm"></a> the <code class="literal">forceReady</code> method to notify Polymer to register all the elements to the<a id="id347" class="indexterm"></a> DOM. Let's check out an example that demonstrates the usage of the <code class="literal">forceReady</code> method. The code for the example is present in the <code class="literal">evening-component.html</code> file and the details are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A new custom component <code class="literal">&lt;good-evening&gt;</code> is created and intentionally delays the registration for 3 seconds. The following code contains the definition of the <code class="literal">&lt;good-evening&gt;</code> element:<div class="informalexample"><pre class="programlisting">&lt;polymer-element name=<span class="strong"><strong>"good-evening</strong></span>"&gt;
    &lt;template&gt;
        &lt;h4&gt;Good Evening&lt;/h4&gt;
    &lt;/template&gt;
    &lt;script&gt;
<span class="strong"><strong>        window.setTimeout(function(){</strong></span>
<span class="strong"><strong>            Polymer("good-evening");</strong></span>
<span class="strong"><strong>        },3000)</strong></span>
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div></li>
<li class="listitem">In another HTML file, we have used the <code class="literal">forceReady</code> method to register all the custom elements. A callback method <code class="literal">Polymer.whenReady</code> is then called, which tries to register the <code class="literal">&lt;good-evening&gt;</code> element. The following code contains the use of the <code class="literal">forceReady</code> method:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../../bower_components/webcomponentsjs/webcomponents.m in.js"&gt;&lt;/script&gt;
    &lt;link rel="import" href="../../bower_components/polymer/polymer.html"&gt;
    &lt;link rel="import" href="evening-component.html"&gt;
    &lt;title&gt;Polymer forceReady Method Demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
<span class="strong"><strong>    &lt;good-evening&gt;&lt;/good-evening&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;
&lt;script&gt;
<span class="strong"><strong>    Polymer.forceReady();</strong></span>
<span class="strong"><strong>    Polymer.whenReady(function() {</strong></span>
<span class="strong"><strong>        console.log("Polymer is ready now...");</strong></span>
<span class="strong"><strong>        //Testing registration of good-evening element</strong></span>
<span class="strong"><strong>        Polymer('good-evening');</strong></span>
<span class="strong"><strong>    })</strong></span>
&lt;/script&gt;</pre>
</div></li>
<li class="listitem">As the <code class="literal">&lt;good-evening&gt;</code> element method is already registered due to use of the <code class="literal">forceReady</code> <a id="id348" class="indexterm"></a>method, when we call the registration process again using <code class="literal">Polymer('good-evening')</code>, it will throw an error saying, it is already registered. The following screenshot shows the output of the preceding code with an error message logged in the console:<div class="mediaobject"><img src="../Images/image00273.jpeg" alt="The Polymer forceReady method"/></div><p style="clear:both; height: 1em;"> </p></li>
</ul>
</div>
</div>
</div>


<div class="section" title="Asynchronous task execution" id="aid-1565U1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec34"></a>Asynchronous task execution</h1>
</div>
</div>
</div>
<p>Polymer provides a<a id="id349" class="indexterm"></a> method named <code class="literal">async</code>, which helps with the execution of a code block after a curtailed period of time. The syntax of the <code class="literal">async</code> method is as follows:</p>
<div class="informalexample"><pre class="programlisting">async(method, arguments, timeout);</pre>
</div>
<p>Let's check out an example demonstrating the use of <code class="literal">async</code> method. The details of the example are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A new custom element <code class="literal">&lt;my-text&gt;</code> is created with the message property initialized to <code class="literal">Hello</code> in a <code class="literal">ready</code> block. An <code class="literal">async</code> method is used which will be executed after 2 seconds and another string is appended to the <code class="literal">message</code> property. The code for this example is as follows:<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt;&lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
    &lt;title&gt;Polymer async method demo&lt;/title&gt;
    &lt;polymer-element name=<span class="strong"><strong>"my-text</strong></span>"&gt;
        &lt;template&gt;
            {{message}}
        &lt;/template&gt;
        &lt;script&gt;
<span class="strong"><strong>            Polymer({</strong></span>
<span class="strong"><strong>                ready: function(){</strong></span>
<span class="strong"><strong>                    this.message= "Hello"</strong></span>
<span class="strong"><strong>                    this.async(function() {</strong></span>
<span class="strong"><strong>                        this.message += "---&gt;(after 2 second)---&gt;Bye";}, null, 2000);</strong></span>
<span class="strong"><strong>                }</strong></span>
<span class="strong"><strong>            });</strong></span>
        &lt;/script&gt;
    &lt;/polymer-element&gt;
&lt;/head&gt;
&lt;body&gt;
<span class="strong"><strong>&lt;my-text&gt;</strong></span>
<span class="strong"><strong>&lt;/my-text&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div></li>
<li class="listitem">The output of the preceding code is shown in the following screenshot, with two strings<a id="id350" class="indexterm"></a> appended after 2 seconds of page rendering:<div class="mediaobject"><img src="../Images/image00274.jpeg" alt="Asynchronous task execution"/></div><p style="clear:both; height: 1em;"> </p><div class="note" title="Note"><h3 class="title"><a id="note18"></a>Note</h3>
<p>To find out more about the <code class="literal">async</code> method, refer to <a class="ulink" href="https://www.polymer-project.org/docs/polymer/polymer.html#asyncmethod">https://www.polymer-project.org/docs/polymer/polymer.html#asyncmethod</a>.</p>
</div></li>
</ul>
</div>
</div>


<div class="section" title="Developing a digital clock" id="aid-164MG1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec35"></a>Developing a digital clock</h1>
</div>
</div>
</div>
<p>In the previous section, we <a id="id351" class="indexterm"></a>have learned about many concepts of Polymer. Now, it is time to develop a custom component. We will develop a digital clock that we have already created in <a class="link" title="Chapter&#160;1.&#160;Introducing Web Components" href="lrn-web-cmpn-dev_ch01.html#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Introducing Web Components</em></span>. In this section, we will develop the same digital clock using Polymer. The code definition of a digital clock is present in the <code class="literal">clock-component.html</code> file and is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;polymer-element name=<span class="strong"><strong>"ts-clock</strong></span>"&gt;
    &lt;<span class="strong"><strong>template</strong></span> bind="{{clock}}"&gt;
        &lt;style&gt;
            :host .clock{
                display: inline-flex;
                justify-content: space-around;
                background: floralwhite;

                font-size: 2rem;
                font-family: serif;
            }
            :host .clock .hour,:host .clock .minute, :host .clock .second{
                color: tomato;
                padding: 1.5rem;
                text-shadow: 0px 1px grey;
            }
        &lt;/style&gt;
<span class="strong"><strong>        &lt;div class="clock"&gt;</strong></span>
<span class="strong"><strong>            &lt;div class="hour"&gt;{{ clock.hour }}&lt;/div&gt;</strong></span>
<span class="strong"><strong>            &lt;div class="minute"&gt;{{ clock.minute }}&lt;/div&gt;</strong></span>
<span class="strong"><strong>            &lt;div class="second"&gt;{{ clock.second }}&lt;/div&gt;</strong></span>
<span class="strong"><strong>        &lt;/div&gt;</strong></span>
    &lt;<span class="strong"><strong>/template</strong></span>&gt;
    &lt;script&gt;
        Polymer({
<span class="strong"><strong>            ready:function(){</strong></span>
<span class="strong"><strong>                this.updateClock()</strong></span>
<span class="strong"><strong>            },</strong></span>
<span class="strong"><strong>            updateClock: function(){</strong></span>
<span class="strong"><strong>                var date = new Date();</strong></span>
<span class="strong"><strong>                this.clock ={</strong></span>
<span class="strong"><strong>                    hour : date.getHours(),</strong></span>
<span class="strong"><strong>                    minute : date.getMinutes(),</strong></span>
<span class="strong"><strong>                    second : date.getSeconds()</strong></span>
<span class="strong"><strong>                };</strong></span>
<span class="strong"><strong>                this.async(this.updateClock, null, 1000);</strong></span>
<span class="strong"><strong>            }</strong></span>
        });
    &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>The details<a id="id352" class="indexterm"></a> of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The name of the digital clock is <code class="literal">&lt;ts-clock&gt;</code>.</li>
<li class="listitem">The HTML markup is the same as that we used in the <a class="link" title="Chapter&#160;1.&#160;Introducing Web Components" href="lrn-web-cmpn-dev_ch01.html#aid-DB7S1">Chapter 1</a>, <span class="emphasis"><em>Introducing Web Components</em></span>, containing three <code class="literal">div</code> elements as a place holder for hours (HH), minutes (MM), and seconds (SS).</li>
<li class="listitem">The template is bound to the <code class="literal">clock</code> object using the <code class="literal">bind</code> attribute.</li>
<li class="listitem">The definition of the digital clock contains an <code class="literal">updateClock</code> method, which creates the <code class="literal">clock</code> object containing three properties—hour, minute, and second—which get the value from a <code class="literal">new Date()</code> object.</li>
<li class="listitem">The <code class="literal">updateClock</code> method is called recursively and asynchronously using the <code class="literal">this.async</code> method after 1 second. It means that every 1 second, the <code class="literal">clock</code> object gets updated with new values, which, in turn, updates the template.</li>
</ul>
</div>
<p>The following code shows the use of the <code class="literal">&lt;ts-clock&gt;</code> element in another HTML file:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="../bower_components/webcomponentsjs/webcomponents.min.js"&gt; &lt;/script&gt;
    &lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
<span class="strong"><strong>    &lt;link rel="import" href="clock-component.html"&gt;</strong></span>
    &lt;title&gt;Polymer clock component demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
<span class="strong"><strong>    &lt;ts-clock&gt;</strong></span>
<span class="strong"><strong>    &lt;/ts-clock&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The following <a id="id353" class="indexterm"></a>screenshot shows the output of the preceding code with the current time in hours, minutes, and seconds format:</p>
<div class="mediaobject"><img src="../Images/image00275.jpeg" alt="Developing a digital clock"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>


<div class="section" title="Working with Yeoman"><div class="titlepage" id="aid-173722"><div><div><h1 class="title"><a id="ch03lvl1sec36"></a>Working with Yeoman</h1>
</div>
</div>
</div>
<p>In <a class="link" title="Chapter&#160;2.&#160;Introducing Polymer" href="lrn-web-cmpn-dev_ch02.html#aid-PNV61">Chapter 2</a>, <span class="emphasis"><em>Introducing Polymer</em></span>, we installed Yeoman and explored some of the usage of Polymer. In this section, we will find more of them to work with Polymer. The <a id="id354" class="indexterm"></a>
<code class="literal">generator-polymer</code> module can be installed using the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install -g generator-polymer</strong></span>
</pre>
</div>
<p>Considering that we have already installed Yeoman and <code class="literal">generator-polymer</code>, let's learn about the element, seed, and GitHub page generator.</p>
<div class="section" title="Yeoman element generator"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec53"></a>Yeoman element generator</h2>
</div>
</div>
</div>
<p>Yeoman <a id="id355" class="indexterm"></a>provides an element generator to create a skeleton of a custom element. The command for generating a skeleton of a custom element is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>yo polymer: element my-element</strong></span>
</pre>
</div>
<p>Or</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>yo polymer: el my-element</strong></span>
</pre>
</div>
<p>The details of the preceding command are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The name of the custom element is <code class="literal">my-element</code>. We can provide our own name, which must be separated with a hyphen(<code class="literal">-</code>)</li>
<li class="listitem">The directory structure created by this command is <code class="literal">app/elements/elements.html</code></li>
</ul>
</div>
<p>Let's create a custom element <code class="literal">&lt;say-time&gt;</code> using Yeoman element generator. The command for generating a skeleton of the <code class="literal">&lt;say-time&gt;</code> element is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>yo polymer:element say-time</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with Yeoman element generator in effect:</p>
<div class="mediaobject"><img src="../Images/image00276.jpeg" alt="Yeoman element generator"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>On <a id="id356" class="indexterm"></a>successful execution of the preceding command, it creates a directory structure <code class="literal">app/element/say-time.html</code>. The skeleton of the generated custom element for the <code class="literal">&lt;say-time&gt;</code> element is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;link rel="import" href="../../bower_components/polymer/polymer.html"&gt;
&lt;polymer-element name="<span class="strong"><strong>say-time</strong></span>" attributes=""&gt;
  &lt;template&gt;
    &lt;style&gt;
      :host {
        display: block;
      }
    &lt;/style&gt;
  &lt;/template&gt;
  &lt;script&gt;
    (function () {
      Polymer({
        <span class="strong"><strong>// define element prototype here</strong></span>
      });
    })();
  &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>There are few changes we need to make to adjust the library path, and some code needed for our chapter demonstration. We have overridden the created callback method by assigning the <code class="literal">currentTime</code> attribute with a <code class="literal">new Date</code> object. The modified code of the <code class="literal">&lt;say-time&gt;</code> component is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;link rel="import" href="/Chapter3Code/bower_components/polymer/polymer.html"&gt;
&lt;polymer-element name="say-time"&gt;
  &lt;template&gt;
    &lt;style&gt;
      :host {
        display: block;
      }
    &lt;/style&gt;
    <span class="strong"><strong>{{currentTime}}</strong></span>
  &lt;/template&gt;
  &lt;script&gt;
    (function () {
      Polymer({
<span class="strong"><strong>        created: function(){</strong></span>
<span class="strong"><strong>          this.currentTime = new Date();</strong></span>
        }
      });
    })();
  &lt;/script&gt;
&lt;/polymer-element&gt;</pre>
</div>
<p>The following<a id="id357" class="indexterm"></a> code shows the use of the <code class="literal">&lt;say-time&gt;</code> custom element in a current page:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;script src="/Chapter3Code/bower_components/webcomponentsjs/webcomponents.min.js"&gt;
    &lt;/script&gt;
    <span class="strong"><strong>&lt;link rel="import" href="say-time.html"&gt;</strong></span>
    &lt;title&gt;Polymer sayTime component demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    <span class="strong"><strong>&lt;say-time&gt;</strong></span>
<span class="strong"><strong>    &lt;/say-time&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The output of the preceding code is rendered as the following screenshot, showing the current time due to the expression <code class="literal">{{currentTime}}</code> in the template:</p>
<div class="mediaobject"><img src="../Images/image00277.jpeg" alt="Yeoman element generator"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Yeoman seed generator"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec54"></a>Yeoman seed generator</h2>
</div>
</div>
</div>
<p>Yeoman Seed generator is<a id="id358" class="indexterm"></a> used for developing a reusable element. It creates all the necessary boilerplate directories and files needed to publish a new custom element. The command for running a seed generator is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>yo polymer: seed tag-name</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with a seed generator in effect:</p>
<div class="mediaobject"><img src="../Images/image00278.jpeg" alt="Yeoman seed generator"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Once the preceding command is executed successfully, a directory structure is created for developing a reusable component, as shown in the following screenshot:</p>
<div class="mediaobject"><img src="../Images/image00279.jpeg" alt="Yeoman seed generator"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>After the directory structure is generated, we can modify the definition of the <code class="literal">&lt;display-year&gt;</code> custom element in the <code class="literal">display-year.html</code> file. We have overridden the <code class="literal">created</code> callback <a id="id359" class="indexterm"></a>method with the <code class="literal">currentYear</code> property. The modified code is as follows:</p>
<div class="informalexample"><pre class="programlisting">ready: function() {
   this.currentYear = new Date().getFullYear();
}</pre>
</div>
<p>The modified template for the <code class="literal">&lt;display-year&gt;</code> element is as follows, with the added expression <code class="literal">{{currentYear}}</code>:</p>
<div class="informalexample"><pre class="programlisting">&lt;template&gt;
    <span class="strong"><strong>&lt;h1&gt;{{currentYear}}&lt;/h1&gt;</strong></span>
&lt;/template&gt;</pre>
</div>
<p>You can find the complete source code containing all the directory structures with dependent files from Packt's website.</p>
</div>
<div class="section" title="Yeoman GitHub page generator"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec55"></a>Yeoman GitHub page generator</h2>
</div>
</div>
</div>
<p>This generator is<a id="id360" class="indexterm"></a> used for creating a GitHub page for the custom element. The syntax of the command for the GitHub page generator is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>cd components/tag-name</strong></span>
<span class="strong"><strong>yo polymer:gh</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with the GitHub page generator in execution for the <code class="literal">&lt;display-year&gt;</code> custom element:</p>
<div class="mediaobject"><img src="../Images/image00280.jpeg" alt="Yeoman GitHub page generator"/></div>
<p style="clear:both; height: 1em;"> </p>
<div class="note" title="Note"><h3 class="title"><a id="note19"></a>Note</h3>
<p>To find out<a id="id361" class="indexterm"></a> more about the GitHub page generator, refer to <a class="ulink" href="https://github.com/yeoman/generator-polymer#gh">https://github.com/yeoman/generator-polymer#gh</a>.</p>
</div>
</div>
</div>


<div class="section" title="Preparing for production using vulcanize" id="aid-181NK1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec37"></a>Preparing for production using vulcanize</h1>
</div>
</div>
</div>
<p>In Polymer-based web application development, we may find a situation where we need to use a lot of HTML Import for a web page. Each HTML Import is an HTTP call to the server. This can really<a id="id362" class="indexterm"></a> hamper the application performance, and definitely the application is not a good candidate for production deployment. This problem can be solved by a vulcanize process that makes the Polymer application a more durable and production-ready application.</p>
<div class="section" title="Vulcanize installation"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec56"></a>Vulcanize installation</h2>
</div>
</div>
</div>
<p>
<span class="strong"><strong>Node package manager</strong></span> (<span class="strong"><strong>npm</strong></span>) is<a id="id363" class="indexterm"></a> required before installing the <span class="strong"><strong>vulcanize</strong></span> package. Considering npm is present in the system, use the following command to<a id="id364" class="indexterm"></a> start the installation of vulcanize:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install -g vulcanize</strong></span>
</pre>
</div>
<p>The preceding command will install vulcanize globally. The following screenshot shows the terminal with the vulcanize installation process:</p>
<div class="mediaobject"><img src="../Images/image00281.jpeg" alt="Vulcanize installation"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Running vulcanize process"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec57"></a>Running vulcanize process</h2>
</div>
</div>
</div>
<p>Once vulcanize is<a id="id365" class="indexterm"></a> installed in the system, we can run the process to optimize the files, to make them production ready. The syntax of the vulcanize command is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>Vulcanize –o targetFile.html sourceFile.html</strong></span>
</pre>
</div>
<p>The vulcanize process concatenates the files into a single file for deployment. The following screenshot shows the vulcanize process in progress for the <code class="literal">clockDemo.html</code> file:</p>
<div class="mediaobject"><img src="../Images/image00282.jpeg" alt="Running vulcanize process"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>On completion of the preceding command, the <code class="literal">build.html</code> file is generated, which concatenates the dependent files. Now, the <code class="literal">build.html</code> file is optimized and ready for production. Vulcanize is also available as Grunt <a id="id366" class="indexterm"></a>and Gulp tasks as well. Take a<a id="id367" class="indexterm"></a> look at <a class="ulink" href="https://www.npmjs.com/package/grunt-vulcanize">https://www.npmjs.com/package/grunt-vulcanize</a> for the <code class="literal">grunt-vulcanize</code> package and <a class="ulink" href="https://www.npmjs.com/package/gulp-vulcanize">https://www.npmjs.com/package/gulp-vulcanize</a> for the <code class="literal">gulp-vulcanize</code><a id="id368" class="indexterm"></a> package.</p>
<div class="note" title="Note"><h3 class="title"><a id="note20"></a>Note</h3>
<p>To find out more about the<a id="id369" class="indexterm"></a> vulcanize process, refer to <a class="ulink" href="https://github.com/Polymer/vulcanize">https://github.com/Polymer/vulcanize</a>.</p>
</div>
</div>
</div>


<div class="section" title="Summary" id="aid-190861"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec38"></a>Summary</h1>
</div>
</div>
</div>
<p>In this chapter, you learned about the key concepts of the Polymer library such as expression, filter expression, and element lifecycle. You have also explored custom element development using the Polymer library, followed by a sample digital clock development. In the next chapter, you will learn about Bosonic framework.</p>
</div>
</body>
</html>