<html><head></head><body>
		<div id="_idContainer267">
			<h1 id="_idParaDest-155"><em class="italic"><a id="_idTextAnchor156"/>Chapter 8</em>: Installing lottie-react-native</h1>
			<p>Before using <strong class="source-inline">lottie-react-native</strong>, we need to install the library into our React Native project as a node module so we can import it inside the code base of our app. To perform this installation, we have two different options:</p>
			<ul>
				<li>npm</li>
				<li>Yarn</li>
			</ul>
			<p>Both tools will result in the same output (<strong class="source-inline">lottie-react-native</strong>) and its dependencies will be installed inside the <strong class="source-inline">node_modules</strong> folder inside our React Native project folder. Using one tool or another will be up to each developer and should not influence the resulting product in any way.</p>
			<p>The topics we will cover in this chapter are as follows: </p>
			<ul>
				<li>Basic installation (using npm or Yarn)</li>
				<li>Dependencies of <strong class="source-inline">lottie-react-native</strong></li>
				<li>iOS requirements when installing <strong class="source-inline">lottie-react-native</strong></li>
				<li>Android requirements</li>
				<li>Installing previous versions of <strong class="source-inline">lottie-react-native</strong></li>
			</ul>
			<h1 id="_idParaDest-156"><a id="_idTextAnchor157"/>Basic installation</h1>
			<p>Installing <strong class="source-inline">lottie-react-native</strong> follows a similar process<a id="_idIndexMarker525"/> as any other npm library, taking into account that it's a library that depends on native libraries written in Swift and Java. Taking this into account, developers can always read about the installation process in the GitHub repository URL: <a href="https://github.com/lottie-react-native/lottie-react-native">https://github.com/lottie-react-native/lottie-react-native</a>.</p>
			<p>When installing <strong class="source-inline">lottie-react-native</strong>, developers<a id="_idIndexMarker526"/> should know that, because of the way it is built, the iOS native library for Lottie should also be installed to enable <strong class="source-inline">lottie-react-native</strong> to render Lottie animations in iOS apps.</p>
			<p>Let's take a look at the steps we need to follow in order to complete a successful installation.</p>
			<h2 id="_idParaDest-157"><a id="_idTextAnchor158"/>Using npm</h2>
			<p>Follow these steps<a id="_idIndexMarker527"/> to install the <strong class="source-inline">lottie-react-native</strong> library using<a id="_idIndexMarker528"/> npm:</p>
			<ol>
				<li>Navigate to our terminal in the React Native project root folder. Once we are there, we should run the following command:<p class="source-code"><strong class="bold">npm i --save lottie-react-native</strong></p></li>
			</ol>
			<p>This command will follow four different steps:</p>
			<ol>
				<li>Download the source files for the library from the npm repository.</li>
				<li>Create the container folder inside the <strong class="source-inline">node_modules</strong> folder.</li>
				<li>Install the source files in the created container folder.</li>
				<li>Update the <strong class="source-inline">package.json</strong> and <strong class="source-inline">package.json.lock</strong> files to mark the library as a dependency of the React Native project.</li>
			</ol>
			<p>npm detects and installs the latest version of the library from the npm public repository, but we could force a specific version of the library by specifying it after an <strong class="source-inline">@</strong> sign followed by the version number we would like to install.</p>
			<ol>
				<li value="2">Once npm is finished installing the library, we need to install its iOS dependency if we are going to require our Lottie animations to be rendered on iOS devices:<p class="source-code"><strong class="bold">npm i --save lottie-ios@3.2.3</strong></p></li>
			</ol>
			<p>Running this command will trigger the installation of <strong class="source-inline">lottie-ios</strong> on a very specific version, 3.2.3, which is the compatible version for <strong class="source-inline">lottie-react-native</strong> to work properly on iOS devices.</p>
			<ol>
				<li value="3">Once npm finishes installing <strong class="source-inline">lottie-ios</strong>, we need to install its pod dependencies. We will do so by going into the <strong class="source-inline">ios</strong> folder inside our React Native project and running the following:<p class="source-code"><strong class="bold">pod install</strong></p></li>
			</ol>
			<p>This action will trigger CocoaPods, a dependency management tool for iOS and macOS projects that will download and install all the dependencies required by <strong class="source-inline">lottie-ios</strong> to function.</p>
			<p>Once all these dependencies<a id="_idIndexMarker529"/> are installed, we can start using the <strong class="source-inline">lottie-react-native</strong> library<a id="_idIndexMarker530"/> inside our React Native app.</p>
			<h2 id="_idParaDest-158"><a id="_idTextAnchor159"/>Using Yarn</h2>
			<p>Using Yarn for installing <strong class="source-inline">lottie-react-native</strong> is similar<a id="_idIndexMarker531"/> to using npm.</p>
			<p>Let's see how to do so:</p>
			<ol>
				<li value="1">Navigate from our terminal into our React Native project root folder. Once in that folder, we will run the following command:<p class="source-code"><strong class="bold">yarn add lottie-react-native</strong></p></li>
			</ol>
			<p>This command will follow four different steps:</p>
			<ul>
				<li>Download the source files for the library from the npm public repository.</li>
				<li>Create the container folder inside the <strong class="source-inline">node_modules</strong> folder.</li>
				<li>Install the source files in the created container folder.</li>
				<li>Update the <strong class="source-inline">package.json</strong> and <strong class="source-inline">yarn.lock</strong> files to mark the library as a dependency of the React Native project.</li>
			</ul>
			<p>Yarn always looks for the latest version<a id="_idIndexMarker532"/> of the library in the npm<a id="_idIndexMarker533"/> public repository, but we could force a specific version of the library by specifying it after an <strong class="source-inline">@</strong> sign followed by the version number we would like to install.</p>
			<ol>
				<li value="2">Once Yarn has finished installing the library, we need to install its iOS dependency if we are going to need our Lottie animations to be rendered on iOS devices. We can install it by running the following command in our project's root folder:<p class="source-code"><strong class="bold">yarn add lottie-ios@3.2.3</strong></p></li>
			</ol>
			<p>Running this command will install <strong class="source-inline">lottie-ios</strong> on its version number 3.2.3, which is the compatible version for <strong class="source-inline">lottie-react-native</strong> to work properly on iOS devices.</p>
			<ol>
				<li value="3">Once Yarn finishes installing <strong class="source-inline">lottie-ios</strong>, we need to install its pod dependencies. We will do so by going into the <strong class="source-inline">ios</strong> folder inside our React Native project and running the following:<p class="source-code"><strong class="bold">pod install</strong></p></li>
			</ol>
			<p>This action will trigger CocoaPods, a dependency management tool for iOS and macOS projects that will download and install all the dependencies required by <strong class="source-inline">lottie-ios</strong> to function. </p>
			<p>Once all these dependencies are installed, we can start using the <strong class="source-inline">lottie-react-native</strong> library inside our React Native app. This library depends on other packages in order to deploy all its functionality. Let's take a look now at these packages.</p>
			<h1 id="_idParaDest-159"><a id="_idTextAnchor160"/>Other dependencies of lottie-react-native</h1>
			<p>As with many other libraries, <strong class="source-inline">lottie-react-native</strong> depends on a number<a id="_idIndexMarker534"/> of libraries that will be automatically installed when running npm or Yarn installations, as we did in the previous section of this chapter. The full list of dependencies is as follows:</p>
			<pre class="source-code">"peerDependencies": {</pre>
			<pre class="source-code">    "lottie-ios": "^3.2.3",</pre>
			<pre class="source-code">    "react": "*",</pre>
			<pre class="source-code">    "react-native": "<strong class="source-inline">|</strong>=0.46"</pre>
			<pre class="source-code">  },</pre>
			<pre class="source-code">  "dependencies": {</pre>
			<pre class="source-code">    "invariant": "^2.2.2",</pre>
			<pre class="source-code">    "prop-types": "^15.5.10",</pre>
			<pre class="source-code">    "react-native-safe-modules": "^1.0.3"</pre>
			<pre class="source-code">  }</pre>
			<p>As we can see, <strong class="source-inline">lottie-react-native</strong> needs to run on a project<a id="_idIndexMarker535"/> that contains at least three dependent libraries: <strong class="source-inline">lottie-ios</strong> (which should be installed using npm or Yarn, as we saw in the previous section of this chapter), <strong class="source-inline">react</strong>, and <strong class="source-inline">react-native</strong> (version 0.46 or higher).</p>
			<p>On top of those peer dependencies, <strong class="source-inline">lottie-react-native</strong> also requires three regular dependencies: <strong class="source-inline">invariant</strong>, <strong class="source-inline">prop-types</strong>, and <strong class="source-inline">react-native-safe-modules</strong>. All of them will be installed automatically by npm or Yarn so developers do not need to take any manual action to install them.</p>
			<p>Let's take a look now at the platform-specific requirements that <strong class="source-inline">lottie-react-native</strong> has.</p>
			<h1 id="_idParaDest-160"><a id="_idTextAnchor161"/>Installation requirements</h1>
			<p>Both platforms have specific requirements for <strong class="source-inline">lottie-react-native</strong> to be installed properly. Let's take a look now at what those differences are and how we can complete the installation in iOS and Android.</p>
			<h2 id="_idParaDest-161"><a id="_idTextAnchor162"/>iOS devices</h2>
			<p>For its iOS version, <strong class="source-inline">lottie-react-native</strong> depends on <strong class="source-inline">lottie-ios</strong>, which is a library<a id="_idIndexMarker536"/> built by Airbnb in Swift. This means we need to enable our React Native app to read and execute Swift code. In order to do so, we need to create a bridging header (if we haven't done it yet) so the Objective-C part of our app can communicate with the Swift part and therefore, send and receive messages to <strong class="source-inline">lottie-ios</strong>.</p>
			<p>If we don't have a bridging header in our project, we can create one by following these steps:</p>
			<ol>
				<li value="1">Open your <strong class="source-inline">&lt;project_name|/ios/&lt;project_name|.xcworkspace</strong> file in Xcode and go to <strong class="bold">File</strong> | <strong class="bold">New</strong> | <strong class="bold">File…</strong>:</li>
			</ol>
			<p class="figure-caption"> </p>
			<div>
				<div id="_idContainer256" class="IMG---Figure">
					<img src="image/Figure_8.1_B17930.jpg" alt="Figure 8.1 – Creating a new file in your Xcode project&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.1 – Creating a new file in your Xcode project</p>
			<ol>
				<li value="2">Select <strong class="bold">Swift File</strong> as the file type:</li>
			</ol>
			<div>
				<div id="_idContainer257" class="IMG---Figure">
					<img src="image/Figure_8.2_B17930.jpg" alt="Figure 8.2 – Selecting Swift as file type&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.2 – Selecting Swift as file type</p>
			<ol>
				<li value="3">Confirm the creation<a id="_idIndexMarker537"/> of a bridging header:</li>
			</ol>
			<div>
				<div id="_idContainer258" class="IMG---Figure">
					<img src="image/Figure_8.3_B17930.jpg" alt="Figure 8.3 – Confirming creation of bridging header&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.3 – Confirming creation of bridging header</p>
			<p>Upon finishing these steps, our app should be ready to start using <strong class="source-inline">lottie-react-native</strong> on any iOS and macOS device. Let's now prepare <a id="_idIndexMarker538"/>our app to run <strong class="source-inline">lottie-react-native</strong> on Android devices.</p>
			<h2 id="_idParaDest-162"><a id="_idTextAnchor163"/>Android devices</h2>
			<p>On some rare occasions, auto-linking<a id="_idIndexMarker539"/> may not work properly when installing <strong class="source-inline">lottie-react-native</strong> on Android devices. This will result in the app crashing when trying to build it. In this case, you would need to follow these steps to fix the issue:</p>
			<ol>
				<li value="1">Make the following changes in <strong class="source-inline">android/app/src/main/java/&lt;project_name|/MainApplication.java</strong>: <ol><li>Add <strong class="source-inline">import com.airbnb.android.react.lottie.LottiePackage;</strong> in the <strong class="source-inline">import</strong> section.</li><li>Add <strong class="source-inline">packages.add(new LottiePackage());</strong> in <strong class="source-inline">List&lt;ReactPackage| getPackages();</strong>.</li></ol></li>
				<li>Make the following change in <strong class="source-inline">android/app/build.gradle</strong>:<ol><li>Add <strong class="source-inline">implementation project(':lottie-react-native')</strong> in the dependencies block.</li></ol></li>
				<li>Add the following lines in <strong class="source-inline">android/settings.gradle</strong>:<p class="source-code">include ':lottie-react-native'</p><p class="source-code">project(':lottie-react-native').projectDir = new File(rootProject.projectDir, '../node_modules/lottie-react-native/src/android')</p></li>
			</ol>
			<p>When all these changes are done, rebuild the app for Android devices and check whether the crash is fixed. As we have our installation finished, let's move on now to see the limitations and possibilities of using the most well-known Lottie features.</p>
			<h1 id="_idParaDest-163"><a id="_idTextAnchor164"/>Limited features of the lottie-react-native library</h1>
			<p>Not all Adobe <strong class="bold">After Effects</strong> (<strong class="bold">AE</strong>) features<a id="_idIndexMarker540"/> are supported<a id="_idIndexMarker541"/> by <strong class="source-inline">lottie-react-native</strong>. In fact, Airbnb maintains a list of non-supported features on their website: <a href="https://github.com/airbnb/lottie/blob/master/supported-features.md">https://github.com/airbnb/lottie/blob/master/supported-features.md</a>.</p>
			<p>The support list for the most common features at the time of writing is as follows:</p>
			<ul>
				<li>Lottie support for basic geometric shapes in AE:</li>
			</ul>
			<div>
				<div id="_idContainer259" class="IMG---Figure">
					<img src="image/Figure_8.4_B17930.jpg" alt="Figure 8.4 – Support for shapes features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.4 – Support for shapes features</p>
			<ul>
				<li>Lottie support for basic text effects and formats in AE:</li>
			</ul>
			<div>
				<div id="_idContainer260" class="IMG---Figure">
					<img src="image/Figure_8.5_B17930.jpg" alt="Figure 8.5 – Support for text features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.5 – Support for text features</p>
			<ul>
				<li>Lottie support<a id="_idIndexMarker542"/> for masking effects in AE:</li>
			</ul>
			<div>
				<div id="_idContainer261" class="IMG---Figure">
					<img src="image/Figure_8.6_B17930.jpg" alt="Figure 8.6 – Support for masks features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.6 – Support for masks features</p>
			<ul>
				<li>Lottie support <a id="_idIndexMarker543"/>for layer effects in AE:</li>
			</ul>
			<div>
				<div id="_idContainer262" class="IMG---Figure">
					<img src="image/Figure_8.7_B17930.jpg" alt="Figure 8.7 – Support for layer effects features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.7 – Support for layer effects features</p>
			<ul>
				<li>Lottie support for shapes and graphics-driven transparencies in AE:</li>
			</ul>
			<div>
				<div id="_idContainer263" class="IMG---Figure">
					<img src="image/Figure_8.8_B17930.jpg" alt="Figure 8.8 – Support for mattes features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.8 – Support for mattes features</p>
			<ul>
				<li>Lottie support for shape<a id="_idIndexMarker544"/> combination techniques in AE:</li>
			</ul>
			<div>
				<div id="_idContainer264" class="IMG---Figure">
					<img src="image/Figure_8.9_B17930.jpg" alt="Figure 8.9 – Support for merge paths features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.9 – Support for merge paths features</p>
			<ul>
				<li>Lottie support for other effects in AE:</li>
			</ul>
			<div>
				<div id="_idContainer265" class="IMG---Figure">
					<img src="image/Figure_8.10_B17930.jpg" alt="Figure 8.10 – Support for other features&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.10 – Support for other features</p>
			<p>Let's now learn how to deal with previous versions of <strong class="source-inline">lottie-react-native</strong> in cases when our version of React Native requires a version other than the latest.</p>
			<h1 id="_idParaDest-164"><a id="_idTextAnchor165"/>Installing previous versions</h1>
			<p>Depending on which version of React Native we are building our project with, we will need to install a specific version or range of versions. The list of versions to be installed can be found in the previous chapter, so now we are going<a id="_idIndexMarker545"/> to learn how to install one of those specific versions:</p>
			<ol>
				<li value="1">Identify which React Native version our project is using. For this, we can check our <strong class="source-inline">package.json</strong> file at the root of our React Native app project. Inside this file, look for the <strong class="source-inline">react-native</strong> dependency and note down the version number:</li>
			</ol>
			<div>
				<div id="_idContainer266" class="IMG---Figure">
					<img src="image/Figure_8.11_B17930.jpg" alt="Figure 8.11 – Finding out your project's React Native version&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.11 – Finding out your project's React Native version</p>
			<ol>
				<li value="2">Look at the <strong class="source-inline">lottie-react-native</strong>/<strong class="source-inline">react-native</strong> compatibility list in the previous chapter and select the right <strong class="source-inline">lottie-react-native</strong> for your project.</li>
				<li>Install the selected version of <strong class="source-inline">lottie-react-native</strong> using npm or Yarn by specifying that version number after an <strong class="source-inline">@</strong> sign, for example, <strong class="source-inline">npm install –save lottie-react-native@4.1.3</strong> or <strong class="source-inline">yarn add lottie-react-native@4.1.3</strong>.</li>
				<li>As we saw in the previous section, we need to install <strong class="source-inline">lottie-ios</strong> as a dependency; the <strong class="source-inline">lottie-react-native</strong>/<strong class="source-inline">lottie-ios</strong> compatibility list can be also found in the previous chapter.</li>
				<li>Install the selected <a id="_idIndexMarker546"/>version of <strong class="source-inline">lottie-ios</strong> using npm or Yarn by specifying that version number after an <strong class="source-inline">@</strong> sign, for example, <strong class="source-inline">npm install –save lottie-ios@3.2.3</strong> or <strong class="source-inline">yarn add lottie-ios@3.2.3</strong>.</li>
			</ol>
			<h1 id="_idParaDest-165"><a id="_idTextAnchor166"/>Summary</h1>
			<p>We now have <strong class="source-inline">lottie-react-native</strong> and its dependencies properly installed and ready to be used to render Lottie animations within our React Native app.</p>
			<p>Our project can now be successfully built on both iOS and Android devices, so let's start the magic and integrate our first Lottie animation. We will cover how to do this in the next chapter.</p>
		</div>
	</body></html>