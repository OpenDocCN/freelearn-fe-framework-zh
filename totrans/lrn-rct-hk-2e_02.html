<html><head></head><body>
<div id="_idContainer040">
<h1 class="chapterNumber"><a id="_idTextAnchor016"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 class="chapterTitle" id="_idParaDest-16"><a id="_idTextAnchor017"/><span class="koboSpan" id="kobo.2.1">Introducing React and React Hooks</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">React is a JavaScript library used to build efficient and extensible web applications. </span><span class="koboSpan" id="kobo.3.2">React was developed by Meta and is used in many large-scale web applications, such as Facebook, Instagram, Netflix, Shopify, Airbnb, Cloudflare, and the BBC.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">In this book, we are going to learn how to build complex and efficient user interfaces with React, while keeping the code simple and extensible. </span><span class="koboSpan" id="kobo.4.2">Using the paradigm of React Hooks, we can greatly simplify dealing with state and effects in web applications, ensuring the potential for growing and extending the application later. </span><span class="koboSpan" id="kobo.4.3">We are also going to learn about </span><strong class="keyWord"><span class="koboSpan" id="kobo.5.1">React Context</span></strong><span class="koboSpan" id="kobo.6.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.7.1">React Suspense</span></strong><span class="koboSpan" id="kobo.8.1">, and </span><strong class="keyWord"><span class="koboSpan" id="kobo.9.1">Form Actions</span></strong><span class="koboSpan" id="kobo.10.1">, as well as how they can be used with Hooks. </span><span class="koboSpan" id="kobo.10.2">Finally, we are going to learn how to build our own Hooks and how to migrate existing applications from React class components to a React Hooks-based architecture.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.11.1">In this first chapter, we are going to learn about the fundamental principles of React and React Hooks. </span><span class="koboSpan" id="kobo.11.2">We will start by learning what React and React Hooks are, and why we should use them. </span><span class="koboSpan" id="kobo.11.3">Then, we will move on to learn about the inner workings of Hooks. </span><span class="koboSpan" id="kobo.11.4">Finally, you will be introduced to the Hooks that are provided by React, and a couple of Hooks provided by the community – such as data fetching and routing Hooks. </span><span class="koboSpan" id="kobo.11.5">By learning the fundamentals of React and React Hooks, we will be better able to understand the concepts that will be introduced throughout this book.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.12.1">In this chapter, we are going to cover the following main topics:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.13.1">Principles of React</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.14.1">Motivation to use React Hooks</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.15.1">Setting up the development environment</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.16.1">Getting started with React Hooks</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-17"><a id="_idTextAnchor018"/><span class="koboSpan" id="kobo.17.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.18.1">A fairly recent version of Node.js should already be installed. </span><span class="koboSpan" id="kobo.18.2">The Node Package Manager (</span><code class="inlineCode"><span class="koboSpan" id="kobo.19.1">npm</span></code><span class="koboSpan" id="kobo.20.1">) also needs to be installed (it should come with Node.js). </span><span class="koboSpan" id="kobo.20.2">For more information on how to install Node.js, please check out their official website: </span><a href="https://nodejs.org/"><span class="url"><span class="koboSpan" id="kobo.21.1">https://nodejs.org/</span></span></a><span class="koboSpan" id="kobo.22.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.23.1">We are going to use </span><strong class="keyWord"><span class="koboSpan" id="kobo.24.1">Visual Studio Code</span></strong><span class="koboSpan" id="kobo.25.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.26.1">VS Code</span></strong><span class="koboSpan" id="kobo.27.1">) for the guides in this book, but everything should work</span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.28.1"> similarly in any other editor. </span><span class="koboSpan" id="kobo.28.2">For more information on how to install VS Code, please refer to their official website: </span><a href="https://code.visualstudio.com"><span class="url"><span class="koboSpan" id="kobo.29.1">https://code.visualstudio.com</span></span></a><span class="koboSpan" id="kobo.30.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.31.1">In this book, we use the following versions:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.32.1">Node.js v22.14.0</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.33.1">npm</span></code><span class="koboSpan" id="kobo.34.1"> v10.9.2</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.35.1">Visual Studio Code v1.97.2</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.36.1">The versions mentioned in the preceding list are the ones used in the book. </span><span class="koboSpan" id="kobo.36.2">While installing a newer version should not be an issue, please note that certain steps might work differently on a newer version. </span><span class="koboSpan" id="kobo.36.3">If you are having an issue with the code and steps provided in this book, please try using the mentioned versions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.37.1">You can find the code for this chapter on GitHub: </span><a href="https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter01"><span class="url"><span class="koboSpan" id="kobo.38.1">https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter01</span></span></a><span class="koboSpan" id="kobo.39.1">.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.40.1">It is highly recommended that you write the code on your own. </span><span class="koboSpan" id="kobo.40.2">Do not simply run the code examples that are provided with the book. </span><span class="koboSpan" id="kobo.40.3">It is important to write the code yourself to be able to learn and understand it properly. </span><span class="koboSpan" id="kobo.40.4">However, if you run into any issues, you can always refer to the code example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-18"><a id="_idTextAnchor019"/><span class="koboSpan" id="kobo.41.1">Principles of React</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.42.1">Before we start learning how to set up a React project, let’s revisit the three fundamental principles of React. </span><span class="koboSpan" id="kobo.42.2">These </span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.43.1">principles allow us to easily write scalable web applications.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.44.1">React is based on three fundamental principles:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.45.1">Declarative</span></strong><span class="koboSpan" id="kobo.46.1">: Instead of telling React how to do things, we tell it what we want it to do. </span><span class="koboSpan" id="kobo.46.2">For example, if we change data, we don’t need to tell React which components need to be re-rendered. </span><span class="koboSpan" id="kobo.46.3">That </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.47.1">would be complex and error-prone. </span><span class="koboSpan" id="kobo.47.2">Instead, we just tell React that data has changed and all components using this data will be efficiently updated and re-rendered for us. </span><span class="koboSpan" id="kobo.47.3">React takes care of the details so that we can focus on the tasks at hand to easily develop our web application.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.48.1">Component-based</span></strong><span class="koboSpan" id="kobo.49.1">: React encapsulates </span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.50.1">components that manage their own state and views and then allows us to compose them in order to create complex user interfaces.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.51.1">Learn once, write anywhere</span></strong><span class="koboSpan" id="kobo.52.1">: React does not make assumptions about your technology stack and tries to</span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.53.1"> ensure that you can develop apps without rewriting existing code as much as possible.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.54.1">React’s three fundamental principles make it easy to write code, encapsulate components, and share code across multiple platforms. </span><span class="koboSpan" id="kobo.54.2">Instead of reinventing the wheel, React always tries to make use of existing JavaScript features as much as possible. </span><span class="koboSpan" id="kobo.54.3">As a result, we are going to learn about software design patterns that will be applicable in many more cases than just designing user interfaces.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.55.1">We just learned that React is component-based. </span><span class="koboSpan" id="kobo.55.2">In React, there are two types of components:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.56.1">Function components</span></strong><span class="koboSpan" id="kobo.57.1">: JavaScript functions that take the props as an argument, and return the user</span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.58.1"> interface (usually via JSX, which is an extension of the JavaScript syntax that allows us to write HTML-like markup directly within JavaScript code)</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.59.1">Class components</span></strong><span class="koboSpan" id="kobo.60.1">: JavaScript </span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.61.1">classes that provide a </span><code class="inlineCode"><span class="koboSpan" id="kobo.62.1">render</span></code><span class="koboSpan" id="kobo.63.1"> method, which returns the user interface (usually via JSX)</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.64.1">While function components are easier to define and understand, in the past, class components were needed to deal with state, contexts, and many more of React’s advanced features. </span><span class="koboSpan" id="kobo.64.2">However, with React Hooks, we can use most of React’s advanced features without needing a class component!</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.65.1">There are certain features of React that, at the time of writing, are not possible with function components and Hooks yet. </span><span class="koboSpan" id="kobo.65.2">For example, defining error boundaries still requires class components and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.66.1">componentDidCatch</span></code><span class="koboSpan" id="kobo.67.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.68.1">getDerivedStateFromError</span></code><span class="koboSpan" id="kobo.69.1"> lifecycle methods.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-19"><a id="_idTextAnchor020"/><span class="koboSpan" id="kobo.70.1">Motivation to use React Hooks</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.71.1">React always strives to make the developer experience as smooth as possible while ensuring to keep it performant enough, without the developer having to worry too much about how to optimize performance. </span><span class="koboSpan" id="kobo.71.2">However, throughout the years of using React, a couple of problems have been identified.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.72.1">The code snippets in the following </span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.73.1">subsections are just intended to give you an understanding of why Hooks were needed, by giving examples of how developers previously dealt with certain problems in React. </span><span class="koboSpan" id="kobo.73.2">If you are not familiar with those old ways, do not worry, it’s not necessary to understand the old ways to follow along. </span><span class="koboSpan" id="kobo.73.3">In the upcoming sections, we are going to learn how to deal with these problems in a better way using React Hooks.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.74.1">Let’s now take a look at these problems in the following subsections.</span></p>
<h2 class="heading-2" id="_idParaDest-20"><a id="_idTextAnchor021"/><span class="koboSpan" id="kobo.75.1">Confusing classes</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.76.1">In the past, we had to use class components with </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.77.1">special functions called life cycle methods, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.78.1">componentDidUpdate</span></code><span class="koboSpan" id="kobo.79.1">, and special </span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.80.1">state-handling methods such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.81.1">this.setState</span></code><span class="koboSpan" id="kobo.82.1">, to deal with state changes. </span><span class="koboSpan" id="kobo.82.2">React classes, and especially the </span><code class="inlineCode"><span class="koboSpan" id="kobo.83.1">this</span></code><span class="koboSpan" id="kobo.84.1"> context, are hard to read and understand for both developers and machines.</span></p>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.85.1">this</span></code><span class="koboSpan" id="kobo.86.1"> is a special keyword in JavaScript that always refers to the object that it belongs to:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.87.1">In a method, </span><code class="inlineCode"><span class="koboSpan" id="kobo.88.1">this</span></code><span class="koboSpan" id="kobo.89.1"> refers to the class object (instance of the class).</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.90.1">In an event handler, </span><code class="inlineCode"><span class="koboSpan" id="kobo.91.1">this</span></code><span class="koboSpan" id="kobo.92.1"> refers to the element that received the event.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.93.1">In a function or standing alone, </span><code class="inlineCode"><span class="koboSpan" id="kobo.94.1">this</span></code><span class="koboSpan" id="kobo.95.1"> refers to the global object. </span><span class="koboSpan" id="kobo.95.2">For example, in a browser, the global object is the </span><code class="inlineCode"><span class="koboSpan" id="kobo.96.1">Window</span></code><span class="koboSpan" id="kobo.97.1"> object.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.98.1">In strict mode, </span><code class="inlineCode"><span class="koboSpan" id="kobo.99.1">this</span></code><span class="koboSpan" id="kobo.100.1"> is </span><code class="inlineCode"><span class="koboSpan" id="kobo.101.1">undefined</span></code><span class="koboSpan" id="kobo.102.1"> in a function.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.103.1">Additionally, methods such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.104.1">call()</span></code><span class="koboSpan" id="kobo.105.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.106.1">apply()</span></code><span class="koboSpan" id="kobo.107.1"> can change the object that </span><code class="inlineCode"><span class="koboSpan" id="kobo.108.1">this</span></code><span class="koboSpan" id="kobo.109.1"> refers to, so it can refer to any object.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.110.1">For developers, classes are hard, because </span><code class="inlineCode"><span class="koboSpan" id="kobo.111.1">this</span></code><span class="koboSpan" id="kobo.112.1"> always refers to different things, so sometimes (for example, in event handlers) we need to manually rebind it to the class object. </span><span class="koboSpan" id="kobo.112.2">For machines, classes are hard, because they do not know which methods in a class will be called and how </span><code class="inlineCode"><span class="koboSpan" id="kobo.113.1">this</span></code><span class="koboSpan" id="kobo.114.1"> will be modified, making it hard to optimize performance and remove unused code.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.115.1">Additionally, classes sometimes require us to write code in multiple places at once. </span><span class="koboSpan" id="kobo.115.2">For example, if we want to fetch data when the component renders or props of a component change, we need to do this using two methods: once in </span><code class="inlineCode"><span class="koboSpan" id="kobo.116.1">componentDidMount</span></code><span class="koboSpan" id="kobo.117.1">, and once in </span><code class="inlineCode"><span class="koboSpan" id="kobo.118.1">componentDidUpdate</span></code><span class="koboSpan" id="kobo.119.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.120.1">To give an example, let’s define a class component that fetches data from an API:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.121.1">First, we define a class component by extending the </span><code class="inlineCode"><span class="koboSpan" id="kobo.122.1">React.Component</span></code><span class="koboSpan" id="kobo.123.1"> class:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.124.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.125.1">ExampleComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.126.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.127.1">React.Component</span></span><span class="koboSpan" id="kobo.128.1"> {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.129.1">Then, we define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.130.1">componentDidMount</span></code><span class="koboSpan" id="kobo.131.1"> life cycle method, where we pull data from an API:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.132.1">componentDidMount</span></span><span class="koboSpan" id="kobo.133.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.134.1">fetch</span></span><span class="koboSpan" id="kobo.135.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.136.1">`http://my.api/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.137.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.138.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.139.1">.props.name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.140.1">`</span></span><span class="koboSpan" id="kobo.141.1">)
      .</span><span class="hljs-title"><span class="koboSpan" id="kobo.142.1">then</span></span><span class="koboSpan" id="kobo.143.1">(…)
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.144.1">However, we also need to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.145.1">componentDidUpdate</span></code><span class="koboSpan" id="kobo.146.1"> life cycle method in case the </span><code class="inlineCode"><span class="koboSpan" id="kobo.147.1">name</span></code><span class="koboSpan" id="kobo.148.1"> prop changes. </span><span class="koboSpan" id="kobo.148.2">Additionally, we need to add a manual check here, to ensure that we only re-fetch data if the </span><code class="inlineCode"><span class="koboSpan" id="kobo.149.1">name</span></code><span class="koboSpan" id="kobo.150.1"> prop changed, and not when other props change:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.151.1">componentDidUpdate</span></span><span class="koboSpan" id="kobo.152.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.153.1">prevProps</span></span><span class="koboSpan" id="kobo.154.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.155.1">if</span></span><span class="koboSpan" id="kobo.156.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.157.1">this</span></span><span class="koboSpan" id="kobo.158.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.159.1">props</span></span><span class="koboSpan" id="kobo.160.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.161.1">name</span></span><span class="koboSpan" id="kobo.162.1"> !== prevProps.</span><span class="hljs-property"><span class="koboSpan" id="kobo.163.1">name</span></span><span class="koboSpan" id="kobo.164.1">) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.165.1">fetch</span></span><span class="koboSpan" id="kobo.166.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.167.1">`http://my.api/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.168.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.169.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.170.1">.props.name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.171.1">`</span></span><span class="koboSpan" id="kobo.172.1">)
        .</span><span class="hljs-title"><span class="koboSpan" id="kobo.173.1">then</span></span><span class="koboSpan" id="kobo.174.1">(...)
    }
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.175.1">To make the code</span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.176.1"> less repetitive, we could refactor our code by creating a separate method called </span><code class="inlineCode"><span class="koboSpan" id="kobo.177.1">fetchData</span></code><span class="koboSpan" id="kobo.178.1"> and fetch the data as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.179.1">fetchData</span></span><span class="koboSpan" id="kobo.180.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.181.1">fetch</span></span><span class="koboSpan" id="kobo.182.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.183.1">`http://my.api/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.184.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.185.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.186.1">.props.name}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.187.1">`</span></span><span class="koboSpan" id="kobo.188.1">)
      .</span><span class="hljs-title"><span class="koboSpan" id="kobo.189.1">then</span></span><span class="koboSpan" id="kobo.190.1">(...)
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.191.1">Then, we could call the method in </span><code class="inlineCode"><span class="koboSpan" id="kobo.192.1">componentDidMount</span></code><span class="koboSpan" id="kobo.193.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.194.1">componentDidUpdate</span></code><span class="koboSpan" id="kobo.195.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.196.1">componentDidMount</span></span><span class="koboSpan" id="kobo.197.1">() {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.198.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.199.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.200.1">fetchData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.201.1">()</span></strong></span><span class="koboSpan" id="kobo.202.1">
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.203.1">componentDidUpdate</span></span><span class="koboSpan" id="kobo.204.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.205.1">prevProps</span></span><span class="koboSpan" id="kobo.206.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.207.1">if</span></span><span class="koboSpan" id="kobo.208.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.209.1">this</span></span><span class="koboSpan" id="kobo.210.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.211.1">props</span></span><span class="koboSpan" id="kobo.212.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.213.1">name</span></span><span class="koboSpan" id="kobo.214.1"> !== prevProps.</span><span class="hljs-property"><span class="koboSpan" id="kobo.215.1">name</span></span><span class="koboSpan" id="kobo.216.1">) {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.217.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.218.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.219.1">fetchData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.220.1">()</span></strong></span><span class="koboSpan" id="kobo.221.1">
    }
  }
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.222.1">However, even then we still need to call the method in two places. </span><span class="koboSpan" id="kobo.222.2">Whenever we update arguments that are passed to the method, we need to update them in two places, which makes this pattern very prone to errors and future bugs.</span></p>
<h2 class="heading-2" id="_idParaDest-21"><a id="_idTextAnchor022"/><span class="koboSpan" id="kobo.223.1">Wrapper hell</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.224.1">Let’s assume we already implemented an </span><code class="inlineCode"><span class="koboSpan" id="kobo.225.1">authenticateUser</span></code><span class="koboSpan" id="kobo.226.1"> higher-order component function that adds authentication to </span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.227.1">one of our components, and a context called </span><code class="inlineCode"><span class="koboSpan" id="kobo.228.1">AuthenticationContext</span></code><span class="koboSpan" id="kobo.229.1"> to provide information about the authenticated user via render props. </span><span class="koboSpan" id="kobo.229.2">We would then use this context as follows:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.230.1">We start by importing the </span><code class="inlineCode"><span class="koboSpan" id="kobo.231.1">authenticateUser</span></code><span class="koboSpan" id="kobo.232.1"> function to wrap our component with the context, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.233.1">AuthenticationContext</span></code><span class="koboSpan" id="kobo.234.1"> component to be able to access the context:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.235.1">import</span></span><span class="koboSpan" id="kobo.236.1"> authenticateUser, { </span><span class="hljs-title"><span class="koboSpan" id="kobo.237.1">AuthenticationContext</span></span><span class="koboSpan" id="kobo.238.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.239.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.240.1">'./auth'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.241.1">Then, we define an </span><code class="inlineCode"><span class="koboSpan" id="kobo.242.1">App</span></code><span class="koboSpan" id="kobo.243.1"> component, where we make use of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.244.1">AuthenticationContext.Consumer</span></code><span class="koboSpan" id="kobo.245.1"> component and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.246.1">user</span></code><span class="koboSpan" id="kobo.247.1"> render prop:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.248.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.249.1">App</span></span><span class="koboSpan" id="kobo.250.1"> = () =&gt; (
  &lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.251.1">AuthenticationContext</span></span><span class="koboSpan" id="kobo.252.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.253.1">Consumer</span></span><span class="koboSpan" id="kobo.254.1">&gt;
    {</span><span class="hljs-params"><span class="koboSpan" id="kobo.255.1">user</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.256.1"> =&gt;</span></span>
</code></pre>
</li>
</ol>
<p class="normal-one"><strong class="keyWord"><span class="koboSpan" id="kobo.257.1">Render props</span></strong><span class="koboSpan" id="kobo.258.1"> are a way to </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.259.1">pass props down to the children of a component. </span><span class="koboSpan" id="kobo.259.2">As we </span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.260.1">can see here, the render prop allowed us to pass </span><code class="inlineCode"><span class="koboSpan" id="kobo.261.1">user</span></code><span class="koboSpan" id="kobo.262.1"> down to the children of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.263.1">AuthenticationContext.Consumer</span></code><span class="koboSpan" id="kobo.264.1"> component.</span></p>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.265.1">Now, we display different texts depending on whether the user is logged in or not:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.266.1">      user ? </span><span class="hljs-string"><span class="koboSpan" id="kobo.267.1">`</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.268.1">${user}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.269.1"> logged in`</span></span><span class="koboSpan" id="kobo.270.1"> : </span><span class="hljs-string"><span class="koboSpan" id="kobo.271.1">'not logged in'</span></span><span class="koboSpan" id="kobo.272.1">
    }
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.273.1">Here, we used two JavaScript concepts:</span></p>
<ul>
<li class="bulletList level-2"><span class="koboSpan" id="kobo.274.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.275.1">ternary operator</span></strong><span class="koboSpan" id="kobo.276.1">, which is an</span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.277.1"> inline version of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.278.1">if</span></code><span class="koboSpan" id="kobo.279.1"> conditional. </span><span class="koboSpan" id="kobo.279.2">It looks as follows: </span><code class="inlineCode"><span class="koboSpan" id="kobo.280.1">ifThisIsTrue ? </span><span class="koboSpan" id="kobo.280.2">returnThis : otherwiseReturnThis</span></code><span class="koboSpan" id="kobo.281.1">.</span></li>
<li class="bulletList level-2"><span class="koboSpan" id="kobo.282.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.283.1">template string</span></strong><span class="koboSpan" id="kobo.284.1">, which can be used to</span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.285.1"> insert variables into a string. </span><span class="koboSpan" id="kobo.285.2">It is defined with backticks (</span><code class="inlineCode"><span class="koboSpan" id="kobo.286.1">`</span></code><span class="koboSpan" id="kobo.287.1">) instead of normal single quotes (</span><code class="inlineCode"><span class="koboSpan" id="kobo.288.1">'</span></code><span class="koboSpan" id="kobo.289.1">). </span><span class="koboSpan" id="kobo.289.2">Variables can be inserted via the </span><code class="inlineCode"><span class="koboSpan" id="kobo.290.1">${variableName}</span></code><span class="koboSpan" id="kobo.291.1"> syntax. </span><span class="koboSpan" id="kobo.291.2">We can also use any JavaScript expressions within the </span><code class="inlineCode"><span class="koboSpan" id="kobo.292.1">${}</span></code><span class="koboSpan" id="kobo.293.1"> brackets – for example, </span><code class="inlineCode"><span class="koboSpan" id="kobo.294.1">${someValue + 1}</span></code><span class="koboSpan" id="kobo.295.1">.</span></li>
</ul>
<ol>
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.296.1">Finally, we export the component after wrapping it with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.297.1">authenticateUser</span></code><span class="koboSpan" id="kobo.298.1"> context, by making use of the higher-order component pattern:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.299.1">  &lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.300.1">AuthenticationContext</span></span><span class="koboSpan" id="kobo.301.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.302.1">Consumer</span></span><span class="koboSpan" id="kobo.303.1">&gt;
)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.304.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.305.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.306.1">authenticateUser</span></span><span class="koboSpan" id="kobo.307.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.308.1">App</span></span><span class="koboSpan" id="kobo.309.1">)
</span></code></pre>
</li>
</ol>
<p class="normal-one"><strong class="keyWord"><span class="koboSpan" id="kobo.310.1">Higher-order components</span></strong><span class="koboSpan" id="kobo.311.1"> are functions that wrap components and add functionality to them. </span><span class="koboSpan" id="kobo.311.2">They were needed to encapsulate and</span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.312.1"> reuse state management logic before Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.313.1">In this example, we used the </span><code class="inlineCode"><span class="koboSpan" id="kobo.314.1">authenticateUser</span></code><span class="koboSpan" id="kobo.315.1"> higher-order component function to add authentication logic to our existing component. </span><span class="koboSpan" id="kobo.315.2">We then used </span><code class="inlineCode"><span class="koboSpan" id="kobo.316.1">AuthenticationContext.Consumer</span></code><span class="koboSpan" id="kobo.317.1"> to inject the </span><code class="inlineCode"><span class="koboSpan" id="kobo.318.1">user</span></code><span class="koboSpan" id="kobo.319.1"> prop into our component through its render props.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.320.1">As you can imagine, using many higher-order components will result in a large tree with many sub-trees, which is an </span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.321.1">anti-pattern called </span><strong class="keyWord"><span class="koboSpan" id="kobo.322.1">wrapper hell</span></strong><span class="koboSpan" id="kobo.323.1">. </span><span class="koboSpan" id="kobo.323.2">For example, when we want to use three contexts, the wrapper hell looks</span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.324.1"> as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.325.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.326.1">AuthenticationContext</span></span><span class="koboSpan" id="kobo.327.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.328.1">Consumer</span></span><span class="koboSpan" id="kobo.329.1">&gt;
  {</span><span class="hljs-params"><span class="koboSpan" id="kobo.330.1">user</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.331.1"> =&gt;</span></span><span class="koboSpan" id="kobo.332.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.333.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.334.1">LanguageContext.Consumer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.335.1">&gt;</span></span><span class="koboSpan" id="kobo.336.1">
      {language =&gt; (
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.337.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.338.1">StatusContext.Consumer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.339.1">&gt;</span></span><span class="koboSpan" id="kobo.340.1">
          {status =&gt; (
            ...
          </span><span class="koboSpan" id="kobo.340.2">)}
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.341.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.342.1">StatusContext.Consumer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.343.1">&gt;</span></span><span class="koboSpan" id="kobo.344.1">
      )}
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.345.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.346.1">LanguageContext.Consumer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.347.1">&gt;</span></span><span class="koboSpan" id="kobo.348.1">
  )}
&lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.349.1">AuthenticationContext</span></span><span class="koboSpan" id="kobo.350.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.351.1">Consumer</span></span><span class="koboSpan" id="kobo.352.1">&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.353.1">This is not very easy to read or write and is also prone to errors if we need to change something later on. </span><span class="koboSpan" id="kobo.353.2">The wrapper hell makes debugging hard because we need to look at a large component tree, with many components just acting as wrappers.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.354.1">Now that we have learned about some common problems with React, let’s learn about the Hook pattern to better deal with these problems!</span></p>
<h2 class="heading-2" id="_idParaDest-22"><a id="_idTextAnchor023"/><span class="koboSpan" id="kobo.355.1">Hooks to the rescue!</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.356.1">React Hooks are based on the same fundamental principles as React. </span><span class="koboSpan" id="kobo.356.2">They encapsulate state management by using existing</span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.357.1"> JavaScript features. </span><span class="koboSpan" id="kobo.357.2">As a result, we do not need to learn and understand many specialized React features anymore; we can simply tap into our existing JavaScript knowledge to use Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.358.1">Using Hooks, we can come up with better solutions to the previously mentioned problems. </span><span class="koboSpan" id="kobo.358.2">Hooks are simply functions that can be called in function components. </span><span class="koboSpan" id="kobo.358.3">We also do not need to use render props for contexts anymore, because we can simply use a </span><strong class="keyWord"><span class="koboSpan" id="kobo.359.1">Context Hook</span></strong><span class="koboSpan" id="kobo.360.1"> to get the data that </span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.361.1">we need. </span><span class="koboSpan" id="kobo.361.2">Additionally, Hooks allow us to reuse stateful logic between components, without creating higher-order components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.362.1">For example, the aforementioned problems </span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.363.1">with life cycle methods could be solved using an </span><strong class="keyWord"><span class="koboSpan" id="kobo.364.1">Effect Hook</span></strong><span class="koboSpan" id="kobo.365.1">, as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.366.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.367.1">ExampleComponent</span></span><span class="koboSpan" id="kobo.368.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.369.1">{ name }</span></span><span class="koboSpan" id="kobo.370.1">) {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.371.1">useEffect</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.372.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.373.1">() =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.374.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.375.1">fetch</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.376.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.377.1">`http://my.api/</span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.378.1">${name}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.379.1">`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.380.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.381.1">      .</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.382.1">then</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.383.1">(...)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.384.1">  }, [name])</span></strong></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.385.1">// ...</span></span><span class="koboSpan" id="kobo.386.1">
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.387.1">This Effect Hook will automatically trigger when the component mounts, and whenever the </span><code class="inlineCode"><span class="koboSpan" id="kobo.388.1">name</span></code><span class="koboSpan" id="kobo.389.1"> prop changes.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.390.1">The wrapper hell mentioned earlier could be solved using Context Hooks, as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.391.1">const</span></span><span class="koboSpan" id="kobo.392.1"> user = </span><span class="hljs-title"><span class="koboSpan" id="kobo.393.1">useContext</span></span><span class="koboSpan" id="kobo.394.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.395.1">AuthenticationContext</span></span><span class="koboSpan" id="kobo.396.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.397.1">const</span></span><span class="koboSpan" id="kobo.398.1"> language = </span><span class="hljs-title"><span class="koboSpan" id="kobo.399.1">useContext</span></span><span class="koboSpan" id="kobo.400.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.401.1">LanguageContext</span></span><span class="koboSpan" id="kobo.402.1">)
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.403.1">const</span></span><span class="koboSpan" id="kobo.404.1"> status = </span><span class="hljs-title"><span class="koboSpan" id="kobo.405.1">useContext</span></span><span class="koboSpan" id="kobo.406.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.407.1">StatusContext</span></span><span class="koboSpan" id="kobo.408.1">)
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.409.1">As we can see, by using Hooks, we can keep our code clean and concise, making sure that our code stays easy to read and </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.410.1">maintain. </span><span class="koboSpan" id="kobo.410.2">Writing custom Hooks also makes it easy to reuse application logic in a project.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.411.1">Now that we know which problems Hooks can solve, we can get started using them in practice. </span><span class="koboSpan" id="kobo.411.2">First, however, we need to quickly set up our development environment.</span></p>
<h1 class="heading-1" id="_idParaDest-23"><a id="_idTextAnchor024"/><span class="koboSpan" id="kobo.412.1">Setting up the development environment</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.413.1">In this book, we are going to</span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.414.1"> use </span><strong class="keyWord"><span class="koboSpan" id="kobo.415.1">VS Code</span></strong><span class="koboSpan" id="kobo.416.1"> as our code editor. </span><span class="koboSpan" id="kobo.416.2">Feel free to use whichever editor you prefer, but keep in mind that the extensions used and settings configured may be slightly different in the editor of your choice.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.417.1">Let’s now install VS Code and</span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.418.1"> some useful extensions, and then continue setting up all the tools needed for our development environment.</span></p>
<h2 class="heading-2" id="_idParaDest-24"><a id="_idTextAnchor025"/><span class="koboSpan" id="kobo.419.1">Installing VS Code and extensions</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.420.1">Before we can get started </span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.421.1">developing and setting up the other tools, we need to</span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.422.1"> set up our code editor, by following these steps:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.423.1">Download VS Code for your operating system from the official website (at the time of writing, the URL is </span><a href="https://code.visualstudio.com/"><span class="url"><span class="koboSpan" id="kobo.424.1">https://code.visualstudio.com/</span></span></a><span class="koboSpan" id="kobo.425.1">). </span><span class="koboSpan" id="kobo.425.2">We are going to use version 1.97.2 in this book.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.426.1">After downloading and installing the application, open it, and you should see the following window:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.427.1"><img alt="Figure 1.1 – A fresh installation of Visual Studio Code (on macOS)" src="../Images/B31327_01_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.428.1">Figure 1.1 – A fresh installation of Visual Studio Code (on macOS)</span></p>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.429.1">To make things easier later, we are</span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.430.1"> going to install some extensions, so click on the </span><strong class="screenText"><span class="koboSpan" id="kobo.431.1">Extensions</span></strong><span class="koboSpan" id="kobo.432.1"> icon, which is the fifth icon from the top left in the screenshot.</span></li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.433.1">A sidebar should open, where</span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.434.1"> you can see </span><strong class="screenText"><span class="koboSpan" id="kobo.435.1">Search Extensions in Marketplace</span></strong><span class="koboSpan" id="kobo.436.1"> at the top. </span><span class="koboSpan" id="kobo.436.2">Enter an extension name here and click on </span><strong class="screenText"><span class="koboSpan" id="kobo.437.1">Install</span></strong><span class="koboSpan" id="kobo.438.1"> to install it. </span><span class="koboSpan" id="kobo.438.2">Let’s start by installing the </span><strong class="screenText"><span class="koboSpan" id="kobo.439.1">ESLint</span></strong><span class="koboSpan" id="kobo.440.1"> extension:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.441.1"><img alt="Figure 1.2 – Installing the ESLint extension in Visual Studio Code" src="../Images/B31327_01_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.442.1">Figure 1.2 – Installing the ESLint extension in Visual Studio Code</span></p>
<ol>
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.443.1">Make sure to install the following extensions:</span><ul>
<li class="bulletList level-2"><span class="koboSpan" id="kobo.444.1">ESLint (by Microsoft)</span></li>
<li class="bulletList level-2"><span class="koboSpan" id="kobo.445.1">Prettier – Code formatter (by Prettier)</span></li>
</ul>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.446.1">Support for JavaScript and </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.447.1">Node.js already comes built-in with VS Code.</span></p>
<ol>
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.448.1">Create a folder for the projects</span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.449.1"> made in this book (for example, you can call it </span><code class="inlineCode"><span class="koboSpan" id="kobo.450.1">Learn-React-Hooks-Second-Edition</span></code><span class="koboSpan" id="kobo.451.1">). </span><span class="koboSpan" id="kobo.451.2">Inside this folder, create a new folder called </span><code class="inlineCode"><span class="koboSpan" id="kobo.452.1">Chapter01_1</span></code><span class="koboSpan" id="kobo.453.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.454.1">Open the empty </span><code class="inlineCode"><span class="koboSpan" id="kobo.455.1">Chapter01_1</span></code><span class="koboSpan" id="kobo.456.1"> folder in VS Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.457.1">If you get a dialog asking </span><strong class="screenText"><span class="koboSpan" id="kobo.458.1">Do you trust the authors of the files in this folder?</span></strong><span class="koboSpan" id="kobo.459.1">, check </span><strong class="screenText"><span class="koboSpan" id="kobo.460.1">Trust the authors of all files in the parent folder ‘Learn-React-Hooks’</span></strong><span class="koboSpan" id="kobo.461.1"> and then click on the </span><strong class="screenText"><span class="koboSpan" id="kobo.462.1">Yes, I trust the authors</span></strong><span class="koboSpan" id="kobo.463.1"> button.</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.464.1"><img alt="Figure 1.3 – Allowing VS Code to execute files in our project folder" src="../Images/B31327_01_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.465.1">Figure 1.3 – Allowing VS Code to execute files in our project folder</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.466.1">You can safely ignore this warning in your own projects, as you can be sure that those do not contain malicious code. </span><span class="koboSpan" id="kobo.466.2">When opening folders from untrusted sources, you can press </span><strong class="screenText"><span class="koboSpan" id="kobo.467.1">No, I don’t trust the authors</span></strong><span class="koboSpan" id="kobo.468.1">, and still browse the code. </span><span class="koboSpan" id="kobo.468.2">However, when doing so, some features of VS Code will be disabled.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.469.1">We have now successfully set up VS Code and are ready to start setting up our project! </span><span class="koboSpan" id="kobo.469.2">If you cloned the folder from the GitHub code examples provided, a notification telling you that a Git repository was found will also</span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.470.1"> pop up. </span><span class="koboSpan" id="kobo.470.2">You can simply</span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.471.1"> close this one, as we only want to open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.472.1">Chapter01_1</span></code><span class="koboSpan" id="kobo.473.1"> folder.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.474.1">Now that VS Code is ready, let’s continue by setting up a new project with Vite.</span></p>
<h2 class="heading-2" id="_idParaDest-25"><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.475.1">Setting up a project with Vite</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.476.1">For this book, we are going to use </span><strong class="keyWord"><span class="koboSpan" id="kobo.477.1">Vite</span></strong><span class="koboSpan" id="kobo.478.1"> to set up </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.479.1">our project, as it is the most popular and liked local development server, according to </span><em class="italic"><span class="koboSpan" id="kobo.480.1">The State of JS 2024</span></em><span class="koboSpan" id="kobo.481.1"> survey (</span><a href="https://2024.stateofjs.com/"><span class="url"><span class="koboSpan" id="kobo.482.1">https://2024.stateofjs.com/</span></span></a><span class="koboSpan" id="kobo.483.1">). </span></p>
<p class="normal"><span class="koboSpan" id="kobo.484.1">Vite also makes it easy to set up a modern frontend </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.485.1">project while still making it possible to extend the configuration later if needed. </span><span class="koboSpan" id="kobo.485.2">Follow these steps to set up your project with Vite:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.486.1">In the VS Code menu bar, go to </span><strong class="screenText"><span class="koboSpan" id="kobo.487.1">Terminal</span></strong><span class="koboSpan" id="kobo.488.1"> | </span><strong class="screenText"><span class="koboSpan" id="kobo.489.1">New Terminal</span></strong><span class="koboSpan" id="kobo.490.1"> to open a new terminal.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.491.1">Inside the terminal, run the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.492.1">$ npm create vite@6.2.0 .
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.493.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.494.1">$</span></code><span class="koboSpan" id="kobo.495.1"> symbol shows that this is a command that needs to be entered into a terminal. </span><span class="koboSpan" id="kobo.495.2">Enter everything after the </span><code class="inlineCode"><span class="koboSpan" id="kobo.496.1">$</span></code><span class="koboSpan" id="kobo.497.1"> symbol into the terminal and confirm with </span><em class="italic"><span class="koboSpan" id="kobo.498.1">Return/Enter</span></em><span class="koboSpan" id="kobo.499.1"> to run the command. </span><span class="koboSpan" id="kobo.499.2">Make sure there is a period at the end of the command to create the project in the current folder instead of creating a new folder.</span></p>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.500.1">To keep the instructions in this book working even when new versions are released, we pin all packages to a fixed version. </span><span class="koboSpan" id="kobo.500.2">Please follow the instructions with the given versions. </span><span class="koboSpan" id="kobo.500.3">After finishing this book, when starting new projects on your own, you should always try using the latest versions, but keep in mind that changes might </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.501.1">be needed to get them working. </span><span class="koboSpan" id="kobo.501.2">Consult the documentation of the respective packages and follow the migration path from the book version to the latest version.</span></p>
</div>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.502.1">When asked whether </span><code class="inlineCode"><span class="koboSpan" id="kobo.503.1">create-vite</span></code><span class="koboSpan" id="kobo.504.1"> should be installed, simply type </span><code class="inlineCode"><span class="koboSpan" id="kobo.505.1">y</span></code><span class="koboSpan" id="kobo.506.1"> and press the </span><em class="italic"><span class="koboSpan" id="kobo.507.1">Return/Enter</span></em><span class="koboSpan" id="kobo.508.1"> key to proceed.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.509.1">If you are asked about the </span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.510.1">current directory not being empty, select the option </span><strong class="keyWord"><span class="koboSpan" id="kobo.511.1">Remove existing files and continue</span></strong><span class="koboSpan" id="kobo.512.1">, then press </span><em class="italic"><span class="koboSpan" id="kobo.513.1">Return/Enter</span></em><span class="koboSpan" id="kobo.514.1"> to confirm it.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.515.1">When asked for a package name, confirm the default suggestion by pressing </span><em class="italic"><span class="koboSpan" id="kobo.516.1">Return/Enter</span></em><span class="koboSpan" id="kobo.517.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.518.1">When asked about the framework, use the arrow keys to select </span><strong class="screenText"><span class="koboSpan" id="kobo.519.1">React</span></strong><span class="koboSpan" id="kobo.520.1"> and press </span><em class="italic"><span class="koboSpan" id="kobo.521.1">Return/Enter</span></em><span class="koboSpan" id="kobo.522.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.523.1">When asked about the variant, select </span><strong class="screenText"><span class="koboSpan" id="kobo.524.1">JavaScript</span></strong><span class="koboSpan" id="kobo.525.1">.</span><div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.526.1">For simplicity and to cater to a wider audience, we are only using plain JavaScript in this book. </span><span class="koboSpan" id="kobo.526.2">It should be noted that, nowadays, TypeScript is widely used in many projects, so you may want to consider adopting TypeScript in your own projects later. </span><span class="koboSpan" id="kobo.526.3">However, learning about TypeScript is outside of the scope of this book.</span></p>
</div>
</li>
</ol>
<ol>
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.527.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.528.1">package.json</span></code><span class="koboSpan" id="kobo.529.1"> and make sure that the versions of </span><code class="inlineCode"><span class="koboSpan" id="kobo.530.1">dependencies</span></code><span class="koboSpan" id="kobo.531.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.532.1">devDependencies</span></code><span class="koboSpan" id="kobo.533.1"> are as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.534.1">"dependencies"</span></span><span class="koboSpan" id="kobo.535.1">: {
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.536.1">"react"</span></span><span class="koboSpan" id="kobo.537.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.538.1">"19.0.0"</span></span><span class="koboSpan" id="kobo.539.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.540.1">"react-dom"</span></span><span class="koboSpan" id="kobo.541.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.542.1">"19.0.0"</span></span><span class="koboSpan" id="kobo.543.1">
  },
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.544.1">"devDependencies"</span></span><span class="koboSpan" id="kobo.545.1">: {
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.546.1">"@eslint/js"</span></span><span class="koboSpan" id="kobo.547.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.548.1">"9.19.0"</span></span><span class="koboSpan" id="kobo.549.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.550.1">"@types/react"</span></span><span class="koboSpan" id="kobo.551.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.552.1">"19.0.8"</span></span><span class="koboSpan" id="kobo.553.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.554.1">"@types/react-dom"</span></span><span class="koboSpan" id="kobo.555.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.556.1">"19.0.3"</span></span><span class="koboSpan" id="kobo.557.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.558.1">"@vitejs/plugin-react"</span></span><span class="koboSpan" id="kobo.559.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.560.1">"4.3.4"</span></span><span class="koboSpan" id="kobo.561.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.562.1">"eslint"</span></span><span class="koboSpan" id="kobo.563.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.564.1">"9.19.0"</span></span><span class="koboSpan" id="kobo.565.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.566.1">"eslint-plugin-react"</span></span><span class="koboSpan" id="kobo.567.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.568.1">"7.37.4"</span></span><span class="koboSpan" id="kobo.569.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.570.1">"eslint-plugin-react-hooks"</span></span><span class="koboSpan" id="kobo.571.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.572.1">"5.0.0"</span></span><span class="koboSpan" id="kobo.573.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.574.1">"eslint-plugin-react-refresh"</span></span><span class="koboSpan" id="kobo.575.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.576.1">"0.4.18"</span></span><span class="koboSpan" id="kobo.577.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.578.1">"globals"</span></span><span class="koboSpan" id="kobo.579.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.580.1">"15.14.0"</span></span><span class="koboSpan" id="kobo.581.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.582.1">"vite"</span></span><span class="koboSpan" id="kobo.583.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.584.1">"6.1.0"</span></span><span class="koboSpan" id="kobo.585.1">
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.586.1">Now our project is set up and </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.587.1">we can run </span><code class="inlineCode"><span class="koboSpan" id="kobo.588.1">npm install</span></code><span class="koboSpan" id="kobo.589.1"> in the terminal to install the dependencies.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.590.1">Afterward, run </span><code class="inlineCode"><span class="koboSpan" id="kobo.591.1">npm run dev</span></code><span class="koboSpan" id="kobo.592.1"> to start the </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.593.1">dev server, as shown in the following screenshot:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.594.1"><img alt="Figure 1.4 – The terminal after setting up a project with Vite and before starting the dev server" src="../Images/B31327_01_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.595.1">Figure 1.4 – The terminal after setting up a project with Vite and before starting the dev server</span></p>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.596.1">For simplicity of setup, we just used </span><code class="inlineCode"><span class="koboSpan" id="kobo.597.1">npm</span></code><span class="koboSpan" id="kobo.598.1"> directly. </span><span class="koboSpan" id="kobo.598.2">If you prefer </span><code class="inlineCode"><span class="koboSpan" id="kobo.599.1">yarn</span></code><span class="koboSpan" id="kobo.600.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.601.1">pnpm</span></code><span class="koboSpan" id="kobo.602.1">, you can instead run </span><code class="inlineCode"><span class="koboSpan" id="kobo.603.1">yarn create vite</span></code><span class="koboSpan" id="kobo.604.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.605.1">pnpm create vite</span></code><span class="koboSpan" id="kobo.606.1"> respectively.</span></p>
</div>
<ol>
<li class="numberedList" value="11"><span class="koboSpan" id="kobo.607.1">In the terminal, you will see a URL telling you where your app is running. </span><span class="koboSpan" id="kobo.607.2">You can either hold </span><em class="italic"><span class="koboSpan" id="kobo.608.1">Ctrl</span></em><span class="koboSpan" id="kobo.609.1"> (</span><em class="italic"><span class="koboSpan" id="kobo.610.1">Cmd</span></em><span class="koboSpan" id="kobo.611.1"> on macOS) and click on the link to open it in your browser, or manually enter the URL in a browser. </span><span class="koboSpan" id="kobo.611.2">Open the link in a browser now.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.612.1">To test whether your app is</span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.613.1"> interactive, click the button with the text </span><strong class="screenText"><span class="koboSpan" id="kobo.614.1">count is 0</span></strong><span class="koboSpan" id="kobo.615.1">, and it should increase the </span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.616.1">count every time it is pressed.</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.617.1"><img alt="Figure 1.5 – Our first React app running with Vite" src="../Images/B31327_01_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.618.1">Figure 1.5 – Our first React app running with Vite</span></p>
<h3 class="heading-3" id="_idParaDest-26"><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.619.1">Alternatives to Vite</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.620.1">Alternatives to Vite are bundlers, such as webpack, Rollup, and Parcel. </span><span class="koboSpan" id="kobo.620.2">These are highly configurable but often do not offer a</span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.621.1"> great experience for dev servers. </span><span class="koboSpan" id="kobo.621.2">They first must bundle all our code together before serving</span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.622.1"> it to the browser. </span><span class="koboSpan" id="kobo.622.2">Instead, Vite natively supports the </span><strong class="keyWord"><span class="koboSpan" id="kobo.623.1">ECMAScript Module</span></strong><span class="koboSpan" id="kobo.624.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.625.1">ESM</span></strong><span class="koboSpan" id="kobo.626.1">) standard. </span><span class="koboSpan" id="kobo.626.2">Furthermore, Vite requires very little configuration to get started. </span><span class="koboSpan" id="kobo.626.3">A downside of Vite is that it can be hard to configure certain more complex </span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.627.1">scenarios with it. </span><span class="koboSpan" id="kobo.627.2">An upcoming bundler that is promising is Rolldown (</span><a href="https://rolldown.rs"><span class="url"><span class="koboSpan" id="kobo.628.1">https://rolldown.rs</span></span></a><span class="koboSpan" id="kobo.629.1">); however, it is still very new at the time of writing.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.630.1">Now that our boilerplate project is up and running, let’s spend some time setting up tools that will enforce best practices and a consistent code style.</span></p>
<h2 class="heading-2" id="_idParaDest-27"><a id="_idTextAnchor028"/><span class="koboSpan" id="kobo.631.1">Setting up ESLint and Prettier to enforce best practices and code style</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.632.1">Now that our React app is set up, we are </span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.633.1">going to set up </span><strong class="keyWord"><span class="koboSpan" id="kobo.634.1">ESLint</span></strong><span class="koboSpan" id="kobo.635.1"> to enforce coding best practices with </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.636.1">JavaScript and React. </span><span class="koboSpan" id="kobo.636.2">We are also going to set up </span><strong class="keyWord"><span class="koboSpan" id="kobo.637.1">Prettier</span></strong><span class="koboSpan" id="kobo.638.1"> to enforce a code style and automatically format our code.</span></p>
<h3 class="heading-3" id="_idParaDest-28"><a id="_idTextAnchor029"/><span class="koboSpan" id="kobo.639.1">Installing the necessary dependencies</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.640.1">First, we are going to install all the </span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.641.1">necessary dependencies.</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.642.1">In the terminal, click on the </span><strong class="screenText"><span class="koboSpan" id="kobo.643.1">Split Terminal</span></strong><span class="koboSpan" id="kobo.644.1"> icon at the top right of the terminal pane to create a new terminal pane (alternatively, right-click on the terminal pane and select </span><strong class="screenText"><span class="koboSpan" id="kobo.645.1">Split Terminal</span></strong><span class="koboSpan" id="kobo.646.1">). </span><span class="koboSpan" id="kobo.646.2">This will keep our app running while we run other commands.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.647.1">Click on this newly opened pane to focus it. </span><span class="koboSpan" id="kobo.647.2">Then, enter the following command to install Prettier and the Prettier config for ESLint:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.648.1">$ npm install --save-dev --save-exact prettier@3.5.1 eslint-config-prettier@10.0.1
</span></code></pre>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.649.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.650.1">--save-dev</span></code><span class="koboSpan" id="kobo.651.1"> flag in </span><code class="inlineCode"><span class="koboSpan" id="kobo.652.1">npm</span></code><span class="koboSpan" id="kobo.653.1"> saves those dependencies as </span><code class="inlineCode"><span class="koboSpan" id="kobo.654.1">dev</span></code><span class="koboSpan" id="kobo.655.1"> dependencies, which means that they will only be installed for development. </span><span class="koboSpan" id="kobo.655.2">They will not be installed and included in a deployed app. </span><span class="koboSpan" id="kobo.655.3">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.656.1">--save-exact</span></code><span class="koboSpan" id="kobo.657.1"> flag ensures that the versions are pinned to the exact version provided by the book.</span></p>
</div>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.658.1">After the dependencies are installed, we need to configure Prettier and ESLint. </span><span class="koboSpan" id="kobo.658.2">We will start with configuring Prettier.</span></p>
<h3 class="heading-3" id="_idParaDest-29"><a id="_idTextAnchor030"/><span class="koboSpan" id="kobo.659.1">Configuring Prettier</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.660.1">Prettier will format the code for us and replace the </span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.661.1">default code formatter for JavaScript in VS Code. </span><span class="koboSpan" id="kobo.661.2">It will allow us to spend more time writing code, automatically formatting it for us properly when we save the file. </span><span class="koboSpan" id="kobo.661.3">Follow these steps to configure Prettier:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.662.1">Right-click below the files list in the left sidebar of VS Code (if it is not opened, click the </span><strong class="screenText"><span class="koboSpan" id="kobo.663.1">Files</span></strong><span class="koboSpan" id="kobo.664.1"> icon) and click on </span><strong class="screenText"><span class="koboSpan" id="kobo.665.1">New file...</span></strong><span class="koboSpan" id="kobo.666.1"> to create a new file. </span><span class="koboSpan" id="kobo.666.2">Call it </span><code class="inlineCode"><span class="koboSpan" id="kobo.667.1">.prettierrc.json</span></code><span class="koboSpan" id="kobo.668.1"> (do not forget the period at the beginning of the filename!).</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.669.1">The newly created file should open automatically; start writing the following configuration into it. </span><span class="koboSpan" id="kobo.669.2">We first create a new object and set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.670.1">trailingComma</span></code><span class="koboSpan" id="kobo.671.1"> option to </span><code class="inlineCode"><span class="koboSpan" id="kobo.672.1">all</span></code><span class="koboSpan" id="kobo.673.1"> to make sure objects and arrays that span over multiple lines always have a comma at the end, even for </span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.674.1">the last element. </span><span class="koboSpan" id="kobo.674.2">This reduces the number of touched lines when committing a change via Git:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.675.1">{
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.676.1">"trailingComma"</span></span><span class="koboSpan" id="kobo.677.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.678.1">"all"</span></span><span class="koboSpan" id="kobo.679.1">,
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.680.1">Then, we set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.681.1">tabWidth</span></code><span class="koboSpan" id="kobo.682.1"> option to two spaces:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.683.1">"tabWidth"</span></span><span class="koboSpan" id="kobo.684.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.685.1">2</span></span><span class="koboSpan" id="kobo.686.1">,
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.687.1">Set </span><code class="inlineCode"><span class="koboSpan" id="kobo.688.1">printWidth</span></code><span class="koboSpan" id="kobo.689.1"> to 80 characters per line to avoid long lines in our code:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.690.1">"printWidth"</span></span><span class="koboSpan" id="kobo.691.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.692.1">80</span></span><span class="koboSpan" id="kobo.693.1">,
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.694.1">Set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.695.1">semi</span></code><span class="koboSpan" id="kobo.696.1"> option to </span><code class="inlineCode"><span class="koboSpan" id="kobo.697.1">false</span></code><span class="koboSpan" id="kobo.698.1"> to avoid semicolons where not necessary:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.699.1">"semi"</span></span><span class="koboSpan" id="kobo.700.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.701.1">false</span></span><span class="koboSpan" id="kobo.702.1">,
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.703.1">Finally, we enforce the use of single quotes instead of double quotes:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.704.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.705.1">jsxSingleQuote"</span></span><span class="koboSpan" id="kobo.706.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.707.1">true</span></span><span class="koboSpan" id="kobo.708.1">,
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.709.1">"singleQuote"</span></span><span class="koboSpan" id="kobo.710.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.711.1">true</span></span><span class="koboSpan" id="kobo.712.1">
}
</span></code></pre>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.713.1">These settings for Prettier are just an example of a coding style convention. </span><span class="koboSpan" id="kobo.713.2">Of course, you are free to adjust these to your own preferences. </span><span class="koboSpan" id="kobo.713.3">There</span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.714.1"> are many more options, all of which can be found in the Prettier docs (</span><a href="https://prettier.io/docs/en/options.html"><span class="url"><span class="koboSpan" id="kobo.715.1">https://prettier.io/docs/en/options.html</span></span></a><span class="koboSpan" id="kobo.716.1">).</span></p>
</div>
</li>
</ol>
<h3 class="heading-3" id="_idParaDest-30"><a id="_idTextAnchor031"/><span class="koboSpan" id="kobo.717.1">Configuring the Prettier extension</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.718.1">Now that we have a </span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.719.1">configuration file for Prettier, we need to make sure the VS Code extension is properly configured to format the code for us:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.720.1">Open the VS Code settings by going to </span><strong class="screenText"><span class="koboSpan" id="kobo.721.1">File | Preferences... </span><span class="koboSpan" id="kobo.721.2">| Settings</span></strong><span class="koboSpan" id="kobo.722.1"> on Windows/Linux, or </span><strong class="screenText"><span class="koboSpan" id="kobo.723.1">Code | Settings... </span><span class="koboSpan" id="kobo.723.2">| Settings</span></strong><span class="koboSpan" id="kobo.724.1"> on macOS.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.725.1">In the newly opened settings editor, click on the </span><strong class="screenText"><span class="koboSpan" id="kobo.726.1">Workspace</span></strong><span class="koboSpan" id="kobo.727.1"> tab. </span><span class="koboSpan" id="kobo.727.2">This ensures that we save all our settings in a </span><code class="inlineCode"><span class="koboSpan" id="kobo.728.1">.vscode/settings.json</span></code><span class="koboSpan" id="kobo.729.1"> file in our project folder. </span><span class="koboSpan" id="kobo.729.2">When other developers open our project, they will automatically be using those settings as well.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.730.1">Search for </span><code class="inlineCode"><span class="koboSpan" id="kobo.731.1">editor format on save</span></code><span class="koboSpan" id="kobo.732.1"> and check the checkbox to enable formatting code on save.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.733.1">Search for </span><code class="inlineCode"><span class="koboSpan" id="kobo.734.1">editor default formatter</span></code><span class="koboSpan" id="kobo.735.1"> and select </span><strong class="screenText"><span class="koboSpan" id="kobo.736.1">Prettier - Code formatter</span></strong><span class="koboSpan" id="kobo.737.1"> from the list.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.738.1">To verify that Prettier works, open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.739.1">.prettierrc.json</span></code><span class="koboSpan" id="kobo.740.1"> file, add some extra spaces to the beginning of a line, and save the file. </span><span class="koboSpan" id="kobo.740.2">You should notice that Prettier reformatted the code to </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.741.1">adhere to the defined code style. </span><span class="koboSpan" id="kobo.741.2">It will reduce the number of spaces for indentation to 2.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.742.1">Now that Prettier is set up properly, we do not need to worry about formatting our code manually anymore. </span><span class="koboSpan" id="kobo.742.2">Feel free to just type in code as you go and save the file to get it formatted for you!</span></p>
<h3 class="heading-3" id="_idParaDest-31"><a id="_idTextAnchor032"/><span class="koboSpan" id="kobo.743.1">Creating a Prettier ignore file</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.744.1">To improve performance and avoid</span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.745.1"> running Prettier on files that should not be automatically formatted, we can ignore certain files and folders by creating a Prettier ignore file. </span><span class="koboSpan" id="kobo.745.2">Follow these steps:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.746.1">Create a new file called </span><code class="inlineCode"><span class="koboSpan" id="kobo.747.1">.prettierignore</span></code><span class="koboSpan" id="kobo.748.1"> in the root of our project, similar to how we created the </span><code class="inlineCode"><span class="koboSpan" id="kobo.749.1">.prettierrc.json</span></code><span class="koboSpan" id="kobo.750.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.751.1">Add the following contents to it, to ignore the transpiled source code:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.752.1">dist/
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.753.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.754.1">node_modules/</span></code><span class="koboSpan" id="kobo.755.1"> folder is automatically ignored by Prettier.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.756.1">Now that we have successfully set up Prettier, we are going to configure ESLint to enforce coding best practices.</span></p>
<h3 class="heading-3" id="_idParaDest-32"><a id="_idTextAnchor033"/><span class="koboSpan" id="kobo.757.1">Configuring ESLint</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.758.1">While Prettier focuses on the style and</span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.759.1"> formatting of our code, ESLint focuses on the actual code, avoiding common mistakes or unnecessary code. </span><span class="koboSpan" id="kobo.759.2">Let’s configure it now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.760.1">Open the automatically created </span><code class="inlineCode"><span class="koboSpan" id="kobo.761.1">eslint.config.js</span></code><span class="koboSpan" id="kobo.762.1"> file and add the following import to it:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.763.1">import</span></span><span class="koboSpan" id="kobo.764.1"> prettierConfig </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.765.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.766.1">'eslint-config-prettier'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.767.1">Scroll down to the bottom of the file, and add the Prettier config at the end of the array, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.768.1">'react-refresh/only-export-components'</span></span><span class="koboSpan" id="kobo.769.1">: [
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.770.1">'warn'</span></span><span class="koboSpan" id="kobo.771.1">,
        { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.772.1">allowConstantExport</span></span><span class="koboSpan" id="kobo.773.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.774.1">true</span></span><span class="koboSpan" id="kobo.775.1"> },
      ],
    },
  },
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.776.1">  prettierConfig,</span></strong></span><span class="koboSpan" id="kobo.777.1">
]
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.778.1">Additionally, disable the </span><code class="inlineCode"><span class="koboSpan" id="kobo.779.1">react/prop-types</span></code><span class="koboSpan" id="kobo.780.1"> rule, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-string"><span class="koboSpan" id="kobo.781.1">'react-refresh/only-export-components'</span></span><span class="koboSpan" id="kobo.782.1">: [
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.783.1">'warn'</span></span><span class="koboSpan" id="kobo.784.1">,
        { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.785.1">allowConstantExport</span></span><span class="koboSpan" id="kobo.786.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.787.1">true</span></span><span class="koboSpan" id="kobo.788.1"> },
      ],
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.789.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.790.1">react/prop-types'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.791.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.792.1">'off'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.793.1">,</span></strong></span><span class="koboSpan" id="kobo.794.1">
    },
  },
  prettierConfig,
]
</span></code></pre>
</li>
</ol>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.795.1">Since React 19, prop type checks are completely removed and will be silently ignored. </span><span class="koboSpan" id="kobo.795.2">The only way to add type checks to props is to use a full type-checking solution, such as TypeScript. </span><span class="koboSpan" id="kobo.795.3">Since we are focusing on learning plain React with Hooks in this book, using TypeScript is out of scope. </span><span class="koboSpan" id="kobo.795.4">However, if you haven’t yet, I strongly recommend learning TypeScript on your own after finishing this book.</span></p>
</div>
<ol>
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.796.1">Save the files and run </span><code class="inlineCode"><span class="koboSpan" id="kobo.797.1">npx eslint src</span></code><span class="koboSpan" id="kobo.798.1"> in the terminal to run the linter. </span><span class="koboSpan" id="kobo.798.2">You will see that there is no output, which </span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.799.1">means that everything was linted successfully and there were no errors!</span></li>
</ol>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.800.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.801.1">npx</span></code><span class="koboSpan" id="kobo.802.1"> command allows us to execute commands provided by </span><code class="inlineCode"><span class="koboSpan" id="kobo.803.1">npm</span></code><span class="koboSpan" id="kobo.804.1"> packages, in a similar context as running them in </span><code class="inlineCode"><span class="koboSpan" id="kobo.805.1">package.json</span></code><span class="koboSpan" id="kobo.806.1"> scripts would do. </span><span class="koboSpan" id="kobo.806.2">It can also run remote packages without installing them permanently. </span><span class="koboSpan" id="kobo.806.3">In the case that the package is not installed yet, it will ask you whether it should do this.</span></p>
</div>
<h3 class="heading-3" id="_idParaDest-33"><a id="_idTextAnchor034"/><span class="koboSpan" id="kobo.807.1">Adding a new script to run our linter</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.808.1">In the previous section, we have been </span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.809.1">calling the linter by running </span><code class="inlineCode"><span class="koboSpan" id="kobo.810.1">npx eslint src</span></code><span class="koboSpan" id="kobo.811.1"> manually. </span><span class="koboSpan" id="kobo.811.2">We are now going to add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.812.1">lint</span></code><span class="koboSpan" id="kobo.813.1"> script to our </span><code class="inlineCode"><span class="koboSpan" id="kobo.814.1">package.json</span></code><span class="koboSpan" id="kobo.815.1">:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.816.1">In the Terminal, run the following command to define a lint script in our </span><code class="inlineCode"><span class="koboSpan" id="kobo.817.1">package.json</span></code><span class="koboSpan" id="kobo.818.1"> file:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.819.1">$ npm pkg set scripts.lint="eslint src"
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.820.1">Now, run </span><code class="inlineCode"><span class="koboSpan" id="kobo.821.1">npm run lint</span></code><span class="koboSpan" id="kobo.822.1"> in the terminal. </span><span class="koboSpan" id="kobo.822.2">This should execute </span><code class="inlineCode"><span class="koboSpan" id="kobo.823.1">eslint src</span></code><span class="koboSpan" id="kobo.824.1"> successfully, just like </span><code class="inlineCode"><span class="koboSpan" id="kobo.825.1">npx eslint src</span></code><span class="koboSpan" id="kobo.826.1"> did:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.827.1"><img alt="Figure 1.6 – The linter running successfully, with no errors" src="../Images/B31327_01_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.828.1">Figure 1.6 – The linter running successfully, with no errors</span></p>
<p class="normal"><span class="koboSpan" id="kobo.829.1">Now that we have successfully set up our development environment, let’s move on to learning about using React class components versus React Hooks in practice!</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.830.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.831.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.832.1">Chapter01/Chapter01_1</span></code><span class="koboSpan" id="kobo.833.1"> folder. </span><span class="koboSpan" id="kobo.833.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.834.1">README.md</span></code><span class="koboSpan" id="kobo.835.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-34"><a id="_idTextAnchor035"/><span class="koboSpan" id="kobo.836.1">Getting started with React Hooks</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.837.1">As we learned earlier in this chapter, React Hooks solve many problems, especially in larger web applications. </span><span class="koboSpan" id="kobo.837.2">Hooks were added in React 16.8, and they </span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.838.1">allow us to use state, and various other React features, without writing a class. </span><span class="koboSpan" id="kobo.838.2">In this section, we will start by defining a class component, and then we will write the same component as a function component using Hooks. </span><span class="koboSpan" id="kobo.838.3">We will then discuss the advantages of Hooks and how to migrate from classes to a Hook-based solution.</span></p>
<h2 class="heading-2" id="_idParaDest-35"><a id="_idTextAnchor036"/><span class="koboSpan" id="kobo.839.1">Starting with a class component</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.840.1">Let’s start by creating a traditional React</span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.841.1"> class component, which lets us enter a name; this is then displayed in our app:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.842.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.843.1">Chapter01_1</span></code><span class="koboSpan" id="kobo.844.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.845.1">Chapter01_2</span></code><span class="koboSpan" id="kobo.846.1"> folder, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.847.1">$ cp -R Chapter01_1 Chapter01_2
</span></code></pre>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.848.1">On macOS, it is important to run the command with a capitalized </span><code class="inlineCode"><span class="koboSpan" id="kobo.849.1">-R</span></code><span class="koboSpan" id="kobo.850.1"> flag, not </span><code class="inlineCode"><span class="koboSpan" id="kobo.851.1">-r</span></code><span class="koboSpan" id="kobo.852.1">. </span><span class="koboSpan" id="kobo.852.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.853.1">-r</span></code><span class="koboSpan" id="kobo.854.1"> flag deals differently with symlinks and causes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.855.1">node_modules/</span></code><span class="koboSpan" id="kobo.856.1"> folder to break. </span><span class="koboSpan" id="kobo.856.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.857.1">-r</span></code><span class="koboSpan" id="kobo.858.1"> flag only exists for historical reasons and should not be used on macOS. </span><span class="koboSpan" id="kobo.858.2">Always prefer using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.859.1">-R</span></code><span class="koboSpan" id="kobo.860.1"> flag instead.</span></p>
</div>
</li>
</ol>
<ol>
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.861.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.862.1">Chapter01_2</span></code><span class="koboSpan" id="kobo.863.1"> folder in VS Code.</span></li>
<li class="numberedList"><em class="italic"><span class="koboSpan" id="kobo.864.1">Remove</span></em><span class="koboSpan" id="kobo.865.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.866.1">src/assets/</span></code><span class="koboSpan" id="kobo.867.1"> folder and all its contents.</span></li>
<li class="numberedList"><em class="italic"><span class="koboSpan" id="kobo.868.1">Remove</span></em><span class="koboSpan" id="kobo.869.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.870.1">src/App.css</span></code><span class="koboSpan" id="kobo.871.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.872.1">src/index.css</span></code><span class="koboSpan" id="kobo.873.1"> files.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.874.1">Open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.875.1">src/main.jsx</span></code><span class="koboSpan" id="kobo.876.1"> file and </span><em class="italic"><span class="koboSpan" id="kobo.877.1">remove</span></em><span class="koboSpan" id="kobo.878.1"> the following import:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.879.1">import</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.880.1">'./index.css'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.881.1">Additionally, adjust the import of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.882.1">App</span></code><span class="koboSpan" id="kobo.883.1"> component from a default import to a named import, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.884.1">import</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.885.1">{</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.886.1">App</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.887.1">}</span></strong></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.888.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.889.1">'./App.jsx'</span></span>
</code></pre>
<div class="packt_tip-one">
<p class="normal"><span class="koboSpan" id="kobo.890.1">In most cases, it’s preferable to use named exports/imports over default exports/imports. </span><span class="koboSpan" id="kobo.890.2">Using named exports/imports makes the code less error-prone when refactoring. </span><span class="koboSpan" id="kobo.890.3">For example, let’s imagine you have a </span><code class="inlineCode"><span class="koboSpan" id="kobo.891.1">Login</span></code><span class="koboSpan" id="kobo.892.1"> component and you copy and paste it to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.893.1">Register</span></code><span class="koboSpan" id="kobo.894.1"> component but forget to rename the component to </span><code class="inlineCode"><span class="koboSpan" id="kobo.895.1">Register</span></code><span class="koboSpan" id="kobo.896.1">. </span><span class="koboSpan" id="kobo.896.2">With default imports, it will still be possible to import it as </span><code class="inlineCode"><span class="koboSpan" id="kobo.897.1">Register</span></code><span class="koboSpan" id="kobo.898.1">, although the component is called </span><code class="inlineCode"><span class="koboSpan" id="kobo.899.1">Login</span></code><span class="koboSpan" id="kobo.900.1"> internally. </span><span class="koboSpan" id="kobo.900.2">However, when debugging in React dev tools or trying to find the component in your project, you will see it named </span><code class="inlineCode"><span class="koboSpan" id="kobo.901.1">Login</span></code><span class="koboSpan" id="kobo.902.1">, which can be confusing, especially in large-scale projects. </span><span class="koboSpan" id="kobo.902.2">When dealing with functions, using named exports is even more useful because it allows you to move them around in different files easily.</span></p>
</div>
</li>
</ol>
<ol>
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.903.1">Open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.904.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.905.1"> file and </span><em class="italic"><span class="koboSpan" id="kobo.906.1">remove</span></em><span class="koboSpan" id="kobo.907.1"> all existing code from it.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.908.1">Next, we import React, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.909.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.910.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.911.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.912.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.913.1">We then start defining a class component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.914.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.915.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.916.1">App</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.917.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.918.1">React.Component</span></span><span class="koboSpan" id="kobo.919.1"> {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.920.1">Next, we have to define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.921.1">constructor</span></code><span class="koboSpan" id="kobo.922.1"> method, where we set the initial </span><code class="inlineCode"><span class="koboSpan" id="kobo.923.1">state</span></code><span class="koboSpan" id="kobo.924.1"> object, which will be an empty string. </span><span class="koboSpan" id="kobo.924.2">Here, we also need to make sure to call </span><code class="inlineCode"><span class="koboSpan" id="kobo.925.1">super(props)</span></code><span class="koboSpan" id="kobo.926.1">, to let the </span><code class="inlineCode"><span class="koboSpan" id="kobo.927.1">React.Component</span></code><span class="koboSpan" id="kobo.928.1"> constructor know about the </span><code class="inlineCode"><span class="koboSpan" id="kobo.929.1">props</span></code><span class="koboSpan" id="kobo.930.1"> object:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.931.1">constructor</span></span><span class="koboSpan" id="kobo.932.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.933.1">props</span></span><span class="koboSpan" id="kobo.934.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.935.1">super</span></span><span class="koboSpan" id="kobo.936.1">(props)
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.937.1">this</span></span><span class="koboSpan" id="kobo.938.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.939.1">state</span></span><span class="koboSpan" id="kobo.940.1"> = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.941.1">name</span></span><span class="koboSpan" id="kobo.942.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.943.1">''</span></span><span class="koboSpan" id="kobo.944.1"> }
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.945.1">Now, we define a method to</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.946.1"> set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.947.1">name</span></code><span class="koboSpan" id="kobo.948.1"> variable, by using </span><code class="inlineCode"><span class="koboSpan" id="kobo.949.1">this.setState</span></code><span class="koboSpan" id="kobo.950.1">. </span><span class="koboSpan" id="kobo.950.2">As we will be using the method to handle input from a text field, we need to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.951.1">evt.target.value</span></code><span class="koboSpan" id="kobo.952.1"> to get the value from the input field:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.953.1">handleChange</span></span><span class="koboSpan" id="kobo.954.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.955.1">evt</span></span><span class="koboSpan" id="kobo.956.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.957.1">this</span></span><span class="koboSpan" id="kobo.958.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.959.1">setState</span></span><span class="koboSpan" id="kobo.960.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.961.1">name</span></span><span class="koboSpan" id="kobo.962.1">: evt.</span><span class="hljs-property"><span class="koboSpan" id="kobo.963.1">target</span></span><span class="koboSpan" id="kobo.964.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.965.1">value</span></span><span class="koboSpan" id="kobo.966.1"> })
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.967.1">Then, we define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.968.1">render</span></code><span class="koboSpan" id="kobo.969.1"> method, where we are going to display an input field and the name:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.970.1">render</span></span><span class="koboSpan" id="kobo.971.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.972.1">To get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.973.1">name</span></code><span class="koboSpan" id="kobo.974.1"> variable from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.975.1">this.state</span></code><span class="koboSpan" id="kobo.976.1"> object, we are going to use destructuring:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.977.1">const</span></span><span class="koboSpan" id="kobo.978.1"> { name } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.979.1">this</span></span><span class="koboSpan" id="kobo.980.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.981.1">state</span></span>
</code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.982.1">The previous statement is the equivalent of doing the following:</span></p>
<pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.983.1">const</span></span><span class="koboSpan" id="kobo.984.1"> name = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.985.1">this</span></span><span class="koboSpan" id="kobo.986.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.987.1">state</span></span><span class="koboSpan" id="kobo.988.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.989.1">name</span></span>
</code></pre>
<ol>
<li class="numberedList" value="14"><span class="koboSpan" id="kobo.990.1">Then, we display the currently entered </span><code class="inlineCode"><span class="koboSpan" id="kobo.991.1">name</span></code><span class="koboSpan" id="kobo.992.1"> state variable:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.993.1">return</span></span><span class="koboSpan" id="kobo.994.1"> (
      &lt;div&gt;
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.995.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.996.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.997.1">&gt;</span></span><span class="koboSpan" id="kobo.998.1">My name is: {name}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.999.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1000.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1001.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1002.1">We display an input field, passing the handler method to it:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1003.1">        &lt;input type=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1004.1">'text'</span></span><span class="koboSpan" id="kobo.1005.1"> value={name} onChange={</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1006.1">this</span></span><span class="koboSpan" id="kobo.1007.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1008.1">handleChange</span></span><span class="koboSpan" id="kobo.1009.1">} /&gt;
      &lt;/div&gt;
    )
  }
}
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.1010.1">If we were to run this code now, we would get the following error when entering text, because passing the handler method to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1011.1">onChange</span></code><span class="koboSpan" id="kobo.1012.1"> changes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1013.1">this</span></code><span class="koboSpan" id="kobo.1014.1"> context:</span></p>
<pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1015.1">Uncaught TypeError: Cannot read properties of undefined (reading 'setState')
</span></code></pre>
<p class="normal-one"><span class="koboSpan" id="kobo.1016.1">Or, on some browsers, you may get the following error instead:</span></p>
<pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1017.1">TypeError: undefined is not an object (evaluating 'this.setState')
</span></code></pre>
<ol>
<li class="numberedList" value="16"><span class="koboSpan" id="kobo.1018.1">So, now we need to adjust</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.1019.1"> the constructor method and rebind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1020.1">this</span></code><span class="koboSpan" id="kobo.1021.1"> context of our handler method to the class. </span><span class="koboSpan" id="kobo.1021.2">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1022.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.1023.1"> and add the following line in the constructor:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1024.1">constructor</span></span><span class="koboSpan" id="kobo.1025.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1026.1">props</span></span><span class="koboSpan" id="kobo.1027.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1028.1">super</span></span><span class="koboSpan" id="kobo.1029.1">(props)
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1030.1">this</span></span><span class="koboSpan" id="kobo.1031.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1032.1">state</span></span><span class="koboSpan" id="kobo.1033.1"> = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1034.1">name</span></span><span class="koboSpan" id="kobo.1035.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1036.1">''</span></span><span class="koboSpan" id="kobo.1037.1"> }
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1038.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1039.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1040.1">handleChange</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1041.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1042.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1043.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1044.1">handleChange</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1045.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1046.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1047.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1048.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1049.1">)</span></strong></span><span class="koboSpan" id="kobo.1050.1">
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1051.1">Run the dev server, by opening a terminal (</span><strong class="screenText"><span class="koboSpan" id="kobo.1052.1">Terminal</span></strong><span class="koboSpan" id="kobo.1053.1"> | </span><strong class="screenText"><span class="koboSpan" id="kobo.1054.1">New Terminal</span></strong><span class="koboSpan" id="kobo.1055.1"> menu option in VS Code), and executing the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1056.1">$ npm run dev
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1057.1">Open the link to the dev server in your browser, and you should see the component being rendered. </span><span class="koboSpan" id="kobo.1057.2">Try entering some text now and it should work!</span></li>
</ol>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.1058.1">Alternatively, since ES6, it is possible to use arrow functions as class methods to avoid having to rebind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1059.1">this</span></code><span class="koboSpan" id="kobo.1060.1"> context.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.1061.1">Finally, our component works! </span><span class="koboSpan" id="kobo.1061.2">As you can see, there is a lot of code required to get state handling to work properly with class components. </span><span class="koboSpan" id="kobo.1061.3">We also had to rebind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1062.1">this</span></code><span class="koboSpan" id="kobo.1063.1"> context; otherwise, our handler method would not work. </span><span class="koboSpan" id="kobo.1063.2">This is not very intuitive, and is easy to miss while developing, causing a frustrating developer experience.</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.1064.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.1065.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1066.1">Chapter01/Chapter01_2</span></code><span class="koboSpan" id="kobo.1067.1"> folder. </span><span class="koboSpan" id="kobo.1067.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1068.1">README.md</span></code><span class="koboSpan" id="kobo.1069.1"> file inside the folder for instructions</span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.1070.1"> on how to set up and run the example.</span></p>
</div>
<h2 class="heading-2" id="_idParaDest-36"><a id="_idTextAnchor037"/><span class="koboSpan" id="kobo.1071.1">Using Hooks instead</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1072.1">After using a traditional class component to</span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.1073.1"> create our app, we are going to write the same app using Hooks. </span><span class="koboSpan" id="kobo.1073.2">As before, our app is going to let us enter a name, which we then display in the app.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.1074.1">It is only possible to use Hooks in React function components. </span><span class="koboSpan" id="kobo.1074.2">You cannot use Hooks in a React class component.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.1075.1">Follow these steps to get started:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1076.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1077.1">Chapter01_2</span></code><span class="koboSpan" id="kobo.1078.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1079.1">Chapter01_3</span></code><span class="koboSpan" id="kobo.1080.1"> folder, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1081.1">$ cp -R Chapter01_2 Chapter01_3
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1082.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1083.1">Chapter01_3</span></code><span class="koboSpan" id="kobo.1084.1"> folder in VS Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1085.1">Open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1086.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.1087.1"> file and </span><em class="italic"><span class="koboSpan" id="kobo.1088.1">remove</span></em><span class="koboSpan" id="kobo.1089.1"> all existing code from it.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1090.1">First, we import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1091.1">useState</span></code><span class="koboSpan" id="kobo.1092.1"> Hook, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1093.1">import</span></span><span class="koboSpan" id="kobo.1094.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1095.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1096.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1097.1">We start with the function definition. </span><span class="koboSpan" id="kobo.1097.2">In our case, we do not pass any arguments, because our component does not have any props:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1098.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1099.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1100.1">App</span></span><span class="koboSpan" id="kobo.1101.1">() {
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.1102.1">The next step would be to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1103.1">name</span></code><span class="koboSpan" id="kobo.1104.1"> variable from the component state. </span><span class="koboSpan" id="kobo.1104.2">However, we cannot use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1105.1">this.state</span></code><span class="koboSpan" id="kobo.1106.1"> in function components. </span><span class="koboSpan" id="kobo.1106.2">We have already learned that Hooks are just JavaScript functions, but what does that really mean? </span><span class="koboSpan" id="kobo.1106.3">It means that we can simply use Hooks from function components, just like any other JavaScript function!</span></p>
<p class="normal-one"><span class="koboSpan" id="kobo.1107.1">To use state via Hooks, we call </span><code class="inlineCode"><span class="koboSpan" id="kobo.1108.1">useState()</span></code><span class="koboSpan" id="kobo.1109.1">, with our initial state as the argument. </span><span class="koboSpan" id="kobo.1109.2">This function returns an array with two elements:</span></p>
<ul>
<li class="bulletList level-2"><span class="koboSpan" id="kobo.1110.1">The current state</span></li>
<li class="bulletList level-2"><span class="koboSpan" id="kobo.1111.1">A setter function to set the state</span></li>
</ul>
<ol>
<li class="numberedList" value="6"><span class="koboSpan" id="kobo.1112.1">We can use destructuring to store these two elements in separate variables, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1113.1">const</span></span><span class="koboSpan" id="kobo.1114.1"> [name, setName] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1115.1">useState</span></span><span class="koboSpan" id="kobo.1116.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1117.1">''</span></span><span class="koboSpan" id="kobo.1118.1">)
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.1119.1">The previous code is equivalent to the following:</span></p>
<pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1120.1">const</span></span><span class="koboSpan" id="kobo.1121.1"> nameHook = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1122.1">useState</span></span><span class="koboSpan" id="kobo.1123.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1124.1">''</span></span><span class="koboSpan" id="kobo.1125.1">)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1126.1">const</span></span><span class="koboSpan" id="kobo.1127.1"> name = nameHook[</span><span class="hljs-number"><span class="koboSpan" id="kobo.1128.1">0</span></span><span class="koboSpan" id="kobo.1129.1">]
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1130.1">const</span></span><span class="koboSpan" id="kobo.1131.1"> setName = nameHook[</span><span class="hljs-number"><span class="koboSpan" id="kobo.1132.1">1</span></span><span class="koboSpan" id="kobo.1133.1">]
</span></code></pre>
<ol>
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.1134.1">Now, we define the input handler function, where we make use of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1135.1">setName</span></code><span class="koboSpan" id="kobo.1136.1"> setter function:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1137.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1138.1">handleChange</span></span><span class="koboSpan" id="kobo.1139.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1140.1">evt</span></span><span class="koboSpan" id="kobo.1141.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1142.1">setName</span></span><span class="koboSpan" id="kobo.1143.1">(evt.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1144.1">target</span></span><span class="koboSpan" id="kobo.1145.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1146.1">value</span></span><span class="koboSpan" id="kobo.1147.1">)
  }
</span></code></pre>
</li>
</ol>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.1148.1">As we are not dealing with classes now, there is no need to rebind </span><code class="inlineCode"><span class="koboSpan" id="kobo.1149.1">this</span></code><span class="koboSpan" id="kobo.1150.1"> anymore!</span></p>
</div>
<ol>
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.1151.1">Finally, we render our </span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.1152.1">user interface, by returning it from the function:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1153.1">return</span></span><span class="koboSpan" id="kobo.1154.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1155.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1156.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1157.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1158.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1159.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1160.1">&gt;</span></span><span class="koboSpan" id="kobo.1161.1">My name is: {name}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1162.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1163.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1164.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1165.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1166.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1167.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1168.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1169.1">'text'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1170.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1171.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1172.1">{name}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1173.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1174.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1175.1">{handleChange}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1176.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1177.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1178.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1179.1">&gt;</span></span><span class="koboSpan" id="kobo.1180.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1181.1">And that’s it – we have successfully used Hooks for the first time! </span><span class="koboSpan" id="kobo.1181.2">As you can see, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1182.1">useState</span></code><span class="koboSpan" id="kobo.1183.1"> Hook is a simple replacement for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1184.1">this.state</span></code><span class="koboSpan" id="kobo.1185.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1186.1">this.setState</span></code><span class="koboSpan" id="kobo.1187.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1188.1">Let’s run our app by executing </span><code class="inlineCode"><span class="koboSpan" id="kobo.1189.1">npm run dev</span></code><span class="koboSpan" id="kobo.1190.1"> in the Terminal and opening the URL in a browser:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1191.1"><img alt="Figure 1.7 – Our first React app using Hooks!" src="../Images/B31327_01_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1192.1">Figure 1.7 – Our first React app using Hooks!</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1193.1">After implementing the same app with a class component and a function component, let’s compare the solutions.</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.1194.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.1195.1">The example code for this section can </span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.1196.1">be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1197.1">Chapter01/Chapter01_3</span></code><span class="koboSpan" id="kobo.1198.1"> folder. </span><span class="koboSpan" id="kobo.1198.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1199.1">README.md</span></code><span class="koboSpan" id="kobo.1200.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<h2 class="heading-2" id="_idParaDest-37"><a id="_idTextAnchor038"/><span class="koboSpan" id="kobo.1201.1">Comparing the solutions</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1202.1">Let’s compare our two solutions to see the differences between class components and function components using Hooks.</span></p>
<h3 class="heading-3" id="_idParaDest-38"><a id="_idTextAnchor039"/><span class="koboSpan" id="kobo.1203.1">Class component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1204.1">The class component makes use </span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.1205.1">of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1206.1">constructor</span></code><span class="koboSpan" id="kobo.1207.1"> method to define state and needs to rebind </span><code class="inlineCode"><span class="koboSpan" id="kobo.1208.1">this</span></code><span class="koboSpan" id="kobo.1209.1"> to be able to pass the handler method to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1210.1">input</span></code><span class="koboSpan" id="kobo.1211.1"> field. </span><span class="koboSpan" id="kobo.1211.2">The full class component code looks as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1212.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1213.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1214.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1215.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1216.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1217.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1218.1">App</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1219.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1220.1">React.Component</span></span><span class="koboSpan" id="kobo.1221.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1222.1">constructor</span></span><span class="koboSpan" id="kobo.1223.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1224.1">props</span></span><span class="koboSpan" id="kobo.1225.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1226.1">super</span></span><span class="koboSpan" id="kobo.1227.1">(props)
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1228.1">this</span></span><span class="koboSpan" id="kobo.1229.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1230.1">state</span></span><span class="koboSpan" id="kobo.1231.1"> = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1232.1">name</span></span><span class="koboSpan" id="kobo.1233.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1234.1">''</span></span><span class="koboSpan" id="kobo.1235.1"> }
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1236.1">this</span></span><span class="koboSpan" id="kobo.1237.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1238.1">handleChange</span></span><span class="koboSpan" id="kobo.1239.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1240.1">this</span></span><span class="koboSpan" id="kobo.1241.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1242.1">handleChange</span></span><span class="koboSpan" id="kobo.1243.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1244.1">bind</span></span><span class="koboSpan" id="kobo.1245.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1246.1">this</span></span><span class="koboSpan" id="kobo.1247.1">)
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1248.1">handleChange</span></span><span class="koboSpan" id="kobo.1249.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1250.1">evt</span></span><span class="koboSpan" id="kobo.1251.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1252.1">this</span></span><span class="koboSpan" id="kobo.1253.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1254.1">setState</span></span><span class="koboSpan" id="kobo.1255.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1256.1">name</span></span><span class="koboSpan" id="kobo.1257.1">: evt.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1258.1">target</span></span><span class="koboSpan" id="kobo.1259.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1260.1">value</span></span><span class="koboSpan" id="kobo.1261.1"> })
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1262.1">render</span></span><span class="koboSpan" id="kobo.1263.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1264.1">const</span></span><span class="koboSpan" id="kobo.1265.1"> { name } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1266.1">this</span></span><span class="koboSpan" id="kobo.1267.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1268.1">state</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1269.1">return</span></span><span class="koboSpan" id="kobo.1270.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1271.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1272.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1273.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1274.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1275.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1276.1">&gt;</span></span><span class="koboSpan" id="kobo.1277.1">My name is: {name}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1278.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1279.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1280.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1281.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1282.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1283.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1284.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1285.1">'text'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1286.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1287.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1288.1">{name}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1289.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1290.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1291.1">{this.handleChange}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1292.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1293.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1294.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1295.1">&gt;</span></span><span class="koboSpan" id="kobo.1296.1">
    )
  }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1297.1">As we can see, the class component</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.1298.1"> needs a lot of boilerplate code to initialize the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1299.1">state</span></code><span class="koboSpan" id="kobo.1300.1"> object and handler functions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1301.1">Now, let’s take a look at the function component.</span></p>
<h3 class="heading-3" id="_idParaDest-39"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.1302.1">Function component with a Hook</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1303.1">The function component makes use </span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.1304.1">of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1305.1">useState</span></code><span class="koboSpan" id="kobo.1306.1"> Hook instead, so that we do not need to deal with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1307.1">this</span></code><span class="koboSpan" id="kobo.1308.1"> or a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1309.1">constructor</span></code><span class="koboSpan" id="kobo.1310.1"> method. </span><span class="koboSpan" id="kobo.1310.2">The full function component code looks as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1311.1">import</span></span><span class="koboSpan" id="kobo.1312.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1313.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1314.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1315.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1316.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1317.1">App</span></span><span class="koboSpan" id="kobo.1318.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1319.1">const</span></span><span class="koboSpan" id="kobo.1320.1"> [name, setName] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1321.1">useState</span></span><span class="koboSpan" id="kobo.1322.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1323.1">''</span></span><span class="koboSpan" id="kobo.1324.1">)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1325.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1326.1">handleChange</span></span><span class="koboSpan" id="kobo.1327.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1328.1">evt</span></span><span class="koboSpan" id="kobo.1329.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1330.1">setName</span></span><span class="koboSpan" id="kobo.1331.1">(evt.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1332.1">target</span></span><span class="koboSpan" id="kobo.1333.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1334.1">value</span></span><span class="koboSpan" id="kobo.1335.1">)
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1336.1">return</span></span><span class="koboSpan" id="kobo.1337.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1338.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1339.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1340.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1341.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1342.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1343.1">&gt;</span></span><span class="koboSpan" id="kobo.1344.1">My name is: {name}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1345.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1346.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1347.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1348.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1349.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1350.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1351.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1352.1">'text'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1353.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1354.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1355.1">{name}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1356.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1357.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1358.1">{handleChange}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1359.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1360.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1361.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1362.1">&gt;</span></span><span class="koboSpan" id="kobo.1363.1">
  )
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1364.1">As we can see, Hooks make our code much more concise and easier to reason about. </span><span class="koboSpan" id="kobo.1364.2">We do not need to worry about how</span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.1365.1"> things work internally anymore; we can simply use state, by accessing the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1366.1">useState</span></code><span class="koboSpan" id="kobo.1367.1"> function!</span></p>
<h2 class="heading-2" id="_idParaDest-40"><a id="_idTextAnchor041"/><span class="koboSpan" id="kobo.1368.1">Advantages of Hooks</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1369.1">Let’s remind ourselves about the first principle of React:</span></p>
<blockquote class="packt_quote">
<p class="quote"><span class="koboSpan" id="kobo.1370.1">Declarative: Instead of telling React how to do things, we tell it what we want it to do. </span><span class="koboSpan" id="kobo.1370.2">As a result, we can easily design our applications, and React will efficiently update and render just the right components when the data changes.</span></p>
</blockquote>
<p class="normal"><span class="koboSpan" id="kobo.1371.1">As we have learned in this chapter, Hooks allow</span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.1372.1"> us to write code that tells React what we want. </span><span class="koboSpan" id="kobo.1372.2">With class components, however, we need to tell React how to do things. </span><span class="koboSpan" id="kobo.1372.3">As a result, Hooks are much more declarative than class components, making them a better fit in the React ecosystem.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1373.1">Hooks being declarative also means that React can do various optimizations on our code, since it is easier to analyze functions and function calls rather than classes and their complex </span><code class="inlineCode"><span class="koboSpan" id="kobo.1374.1">this</span></code><span class="koboSpan" id="kobo.1375.1"> behavior. </span><span class="koboSpan" id="kobo.1375.2">Additionally, Hooks make it easier to abstract and share common stateful logic between components. </span><span class="koboSpan" id="kobo.1375.3">By using Hooks, we can avoid render props and higher-order components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1376.1">We can see that Hooks not only make our code more concise and are easier to reason about for developers but they also make the code easier to optimize for React.</span></p>
<h2 class="heading-2" id="_idParaDest-41"><a id="_idTextAnchor042"/><span class="koboSpan" id="kobo.1377.1">Migrating to Hooks</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1378.1">Now, you might be wondering whether that means class components are deprecated, and we need to migrate everything to Hooks </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.1379.1">now. </span><span class="koboSpan" id="kobo.1379.2">Of course not – Hooks are completely opt-in. </span><span class="koboSpan" id="kobo.1379.3">You can try Hooks in some of your components without rewriting any of your other code. </span><span class="koboSpan" id="kobo.1379.4">The React team also does not plan on removing classes at the moment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1380.1">There is no rush to migrate everything to Hooks right now. </span><span class="koboSpan" id="kobo.1380.2">It is recommended that you gradually adopt Hooks in certain components where they will be most useful. </span><span class="koboSpan" id="kobo.1380.3">For example, if you have many components that deal with similar logic, you can extract the logic to a Hook. </span><span class="koboSpan" id="kobo.1380.4">You can also use function components with Hooks side by side with class components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1381.1">Hooks are backward-compatible and provide a direct API to various React concepts that you already know about: </span><strong class="keyWord"><span class="koboSpan" id="kobo.1382.1">props</span></strong><span class="koboSpan" id="kobo.1383.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.1384.1">state</span></strong><span class="koboSpan" id="kobo.1385.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.1386.1">context</span></strong><span class="koboSpan" id="kobo.1387.1">, </span><strong class="keyWord"><span class="koboSpan" id="kobo.1388.1">refs</span></strong><span class="koboSpan" id="kobo.1389.1">, and the </span><strong class="keyWord"><span class="koboSpan" id="kobo.1390.1">life cycle</span></strong><span class="koboSpan" id="kobo.1391.1">. </span><span class="koboSpan" id="kobo.1391.2">Additionally, Hooks offer new ways to combine these concepts and encapsulate their logic in a much better way that does not lead to wrapper hell or similar problems.</span></p>
<h2 class="heading-2" id="_idParaDest-42"><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.1392.1">The Hooks mindset</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1393.1">The main goal of Hooks is to decouple stateful logic from rendering logic. </span><span class="koboSpan" id="kobo.1393.2">Hooks allow us to define logic in separate functions and reuse them </span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.1394.1">across multiple components. </span><span class="koboSpan" id="kobo.1394.2">With Hooks, we do not need to change our component hierarchy to implement stateful logic. </span><span class="koboSpan" id="kobo.1394.3">There is no need to define a separate component that provides the state logic to multiple components anymore, we can simply use a Hook instead!</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1395.1">However, Hooks require a completely different mindset from traditional React development. </span><span class="koboSpan" id="kobo.1395.2">We should not think about the life cycle of components anymore. </span><span class="koboSpan" id="kobo.1395.3">Instead, we should think about data flow. </span><span class="koboSpan" id="kobo.1395.4">For example, we can tell Hooks to trigger when certain props or values from other Hooks change. </span><span class="koboSpan" id="kobo.1395.5">We are going to learn more about this concept in </span><a href="Chapter_04.xhtml#_idTextAnchor103"><em class="italic"><span class="koboSpan" id="kobo.1396.1">Chapter 4</span></em></a><span class="koboSpan" id="kobo.1397.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1398.1">Using the Reducer and Effect Hooks</span></em><span class="koboSpan" id="kobo.1399.1">. </span><span class="koboSpan" id="kobo.1399.2">We should </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.1400.1">also not split components based on life cycle methods anymore. </span><span class="koboSpan" id="kobo.1400.2">Instead, we can use Hooks to deal with common functionalities, such as fetching data or setting up a data subscription.</span></p>
<h2 class="heading-2" id="_idParaDest-43"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.1401.1">Rules of Hooks</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1402.1">Hooks are very flexible. </span><span class="koboSpan" id="kobo.1402.2">However, there are certain limitations to using Hooks, which we should always keep in mind:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1403.1">Hooks can only be used in function components and inside other Hooks, not in class components or arbitrary functions</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1404.1">The order of Hook definitions </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.1405.1">matters and needs to stay the same; thus, we cannot put Hooks in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1406.1">if</span></code><span class="koboSpan" id="kobo.1407.1"> conditionals, loops, or nested functions</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.1408.1">Thankfully, Vite already configured an ESLint plugin for us that ensures that the rules of Hooks are not violated.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1409.1">We are going to discuss these limitations in more detail, as well as how to work around them, throughout this book.</span></p>
<h1 class="heading-1" id="_idParaDest-44"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.1410.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1411.1">In this first chapter of the book, we started by learning about the fundamental principles of React, and which types of components it provides. </span><span class="koboSpan" id="kobo.1411.2">We then moved on to learn about common problems with class components, using existing features of React, and how they break the fundamental principles. </span><span class="koboSpan" id="kobo.1411.3">Next, we implemented a simple application using class components and function components with Hooks, in order to be able to compare the differences between the two solutions. </span><span class="koboSpan" id="kobo.1411.4">As we found out, function components with Hooks are a much better fit for React’s fundamental principles; they do not suffer from the same problems as class components, and they make our code much more concise and easy to understand! </span><span class="koboSpan" id="kobo.1411.5">The React team now even recommends using function components instead of class components, making function components the state-of-the-art way to write React code. </span><span class="koboSpan" id="kobo.1411.6">After reading this chapter, the basics of React and React Hooks are clear. </span><span class="koboSpan" id="kobo.1411.7">We can now move on to learn about Hooks in detail.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1412.1">In the next chapter, we are going to gain an in-depth knowledge of how the State Hook works, by reimplementing it from scratch. </span><span class="koboSpan" id="kobo.1412.2">By doing so, we are going to get a grasp on how Hooks work internally, and what their limitations are. </span><span class="koboSpan" id="kobo.1412.3">Afterward, we are going to create a small blog application using the State Hook!</span></p>
<h1 class="heading-1" id="_idParaDest-45"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.1413.1">Questions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1414.1">To recap what we have learned in this chapter, try to answer the following questions:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1415.1">What are React’s three fundamental principles?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1416.1">What are the two types of components in React?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1417.1">What are the problems with class components in React?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1418.1">What is the problem when using higher-order components in React?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1419.1">Which tool can we use to set up a React project, and what is the command that we need to run to use it?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1420.1">What do we need to do if we get the following error with class components: </span><code class="inlineCode"><span class="koboSpan" id="kobo.1421.1">Uncaught TypeError: Cannot read properties of undefined (reading 'setState')</span></code><span class="koboSpan" id="kobo.1422.1">?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1423.1">How do we use React state with Hooks?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1424.1">What are the advantages of using function components with Hooks, in comparison to class components?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1425.1">Do we need to replace all class components with function components using Hooks when updating React?</span></li>
</ol>
<h1 class="heading-1" id="_idParaDest-46"><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.1426.1">Further reading</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1427.1">If you are interested in more information about the concepts that we have learned in this chapter, take a look at the following links:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1428.1">Information about function components: </span><a href="https://react.dev/reference/react/Component"><span class="url"><span class="koboSpan" id="kobo.1429.1">https://react.dev/reference/react/Component</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1430.1">RFC for React Hooks: </span><a href="https://github.com/reactjs/rfcs/blob/main/text/0068-react-hooks.md"><span class="url"><span class="koboSpan" id="kobo.1431.1">https://github.com/reactjs/rfcs/blob/main/text/0068-react-hooks.md</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1432.1">Destructuring: </span><a href="https://exploringjs.com/es6/ch_destructuring.html"><span class="url"><span class="koboSpan" id="kobo.1433.1">https://exploringjs.com/es6/ch_destructuring.html</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1434.1">Template strings: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals"><span class="url"><span class="koboSpan" id="kobo.1435.1">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1436.1">Ternary operator: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_operator"><span class="url"><span class="koboSpan" id="kobo.1437.1">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_operator</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.1438.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1439.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_01.xhtml"><span class="url"><span class="koboSpan" id="kobo.1440.1">https://packt.link/wnXT0</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.1441.1"><img alt="" src="../Images/image_%283%29.png"/></span></p>
</div>
</body></html>