<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Responsive Web Development with ReactJS"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Responsive Web Development with ReactJS</h1></div></div></div><p>A few years ago, building web apps was relatively easy. Your web apps were viewed on desktops and laptops with roughly the same screen sizes and could create a lightweight mobile version to serve the few mobile users who visited your site. Today the tables have turned and mobile devices are just as important, often even more so than desktops and laptops. The screen sizes today can vary from a 4" smartphone to a 9" tablet and any size in between.</p><p>In this chapter, we'll be looking at the practice of building a web app suitable to work on any device, regardless of size or whether the app will be viewed on a desktop or mobile browser. The goal is to create an app environment that moulds itself to the user's setup and provides a gratifying experience for everyone.</p><p>The term "<span class="strong"><strong>responsive development</strong></span>" is an <a class="indexterm" id="id156"/>umbrella term covering a range of <a class="indexterm" id="id157"/> design techniques <a class="indexterm" id="id158"/>such as <span class="strong"><strong>adaptive</strong></span>, <span class="strong"><strong>fluid</strong></span>, <span class="strong"><strong>liquid</strong></span>, or <span class="strong"><strong>elastic</strong></span> layouts, and <span class="strong"><strong>hybrid</strong></span> or <span class="strong"><strong>mobile</strong></span> development. It can be broken into<a class="indexterm" id="id159"/> two<a class="indexterm" id="id160"/> main <a class="indexterm" id="id161"/>components: a flexible layout and<a class="indexterm" id="id162"/> flexible media content.</p><p>We'll cover everything you need to create a responsive app in ReactJS in these topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Creating a flexible layout</li><li class="listitem" style="list-style-type: disc">Choosing the right framework</li><li class="listitem" style="list-style-type: disc">Setting up a responsive app with Bootstrap</li><li class="listitem" style="list-style-type: disc">Creating a flexible grid</li><li class="listitem" style="list-style-type: disc">Creating a responsive menu and navigation</li><li class="listitem" style="list-style-type: disc">Creating responsive wells</li><li class="listitem" style="list-style-type: disc">Creating responsive panels</li><li class="listitem" style="list-style-type: disc">Creating responsive alerts</li><li class="listitem" style="list-style-type: disc">Embedding media and video content</li><li class="listitem" style="list-style-type: disc">Creating responsive buttons</li><li class="listitem" style="list-style-type: disc">Creating dynamic progress bars</li><li class="listitem" style="list-style-type: disc">Creating fluid carousels</li><li class="listitem" style="list-style-type: disc">Working with fluid images and the picture element</li><li class="listitem" style="list-style-type: disc">Creating responsive form fields</li><li class="listitem" style="list-style-type: disc">Using glyph- and font-awesome icons</li><li class="listitem" style="list-style-type: disc">Creating a responsive landing page</li></ul></div><div class="section" title="Creating a flexible layout"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec18"/>Creating a flexible layout</h1></div></div></div><p>Flexible layouts <a class="indexterm" id="id163"/>change in width based on the size of a user's viewport. Viewport is a generic term for the viewable area of the user's device. It's preferred over terms such as a window or browser size because not all devices use Windows. You may design the layout to use a percentage of the user's width or not assign any width at all and have the layout fill up the viewport regardless of how big or small it is.</p><p>Before we talk about all the advantages of a <span class="strong"><strong>flexible</strong></span> layout, let's briefly look at its counterpart, the <a class="indexterm" id="id164"/>
<span class="strong"><strong>fixed width</strong></span> layout.</p><p>Fixed width means setting the overall width of a page to a predetermined pixel value and then designing the app elements with this constraint in mind. Before the explosive proliferation of web-enabled mobile devices, this was the primary design technique for developing web applications.</p><p>A fixed width design has certain benefits. The main benefit is that it gives designers complete control of the look. Basically, the user sees what the designer designs. It's also easier to structure, and working with fixed width elements, such as images and forms, is less of a hassle.</p><p>The obvious drawback with this type of design is that you end up with a rigid layout that doesn't change based on any variation in the user environment. You will often end with excessive white space for devices with large viewports, upsetting certain design principles, or a design that is too wide for devices with small viewports.</p><p>Going with a fixed width design may be appropriate for some use cases, but as it depends on your decision to guess which layout constraints work best for most users of your app, you're likely to exclude a potentially huge group of users from using your app.</p><p>For this reason, a responsive app should generally be designed with a flexible layout in order to remain usable for every user of your app.</p><p>An <span class="emphasis"><em>adaptive</em></span> app generally refers to an app that is easily modifiable when a change occurs, while <span class="emphasis"><em>responsive</em></span> means to react quickly to changes. The terms are interchangeable, and when we use the term "responsive", it's usually inferred that it should also be adaptive. <span class="emphasis"><em>Elastic</em></span> and <span class="emphasis"><em>fluid</em></span> roughly mean the same and usually describe a percentage-based design that molds to changes in browser or viewport size.</p><p>
<span class="emphasis"><em>Mobile</em></span> development, on the other hand, means creating a separate version of your app that is meant to run exclusively on cell phone browsers. This is occasionally a good approach, but it comes with several tradeoffs, such as maintaining a separate code base, relying on browser<a class="indexterm" id="id165"/> sniffing to send users to the mobile version, and problems with <span class="strong"><strong>search engine optimization</strong></span> (<span class="strong"><strong>SEO</strong></span>), since you have to maintain separate URLs for the mobile and the desktop version.</p><p>
<span class="emphasis"><em>Hybrid apps</em></span> refer to mobile apps that are developed in such a manner that they can be hosted inside a native application that utilizes a mobile platform's <span class="strong"><strong>WebView</strong></span>. You can think of WebView as <a class="indexterm" id="id166"/>an exclusive, full-screen browser for your app that is hooked inside the mobile platform's native environment. The benefit of this approach is that you can use standard development practices for the Web, and in addition, you can gain access to native capabilities that are often restricted to access from inside the mobile browsers. Another benefit is that you can publish your app on native app stores.</p><p>Developing native apps with ReactJS is an attractive proposition, and with the React Native project, it's also a viable option. With React Native, you can use everything that you've learned about ReactJS and apply it to develop apps that can run on Apple and Android devices and that can be published on Apple's App Store and Google Play.</p><div class="section" title="Choosing the right framework"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec37"/>Choosing the right framework</h2></div></div></div><p>While it's certainly <a class="indexterm" id="id167"/>possible to set up a flexible layout on your own, using a responsive framework makes a lot of sense. For reasons such as you'll save a lot of time using a framework that's already been battle tested and maintained for many years by a team of skilled designers. You can also take advantage of the fact that a widely used responsive framework has a lot of helpful resources on the Web. The <a class="indexterm" id="id168"/>drawback is that you will need to learn how the framework expects you to lay out your pages, and that sometimes, you may not entirely agree on the design decisions that the frameworks imposes on you.</p><p>With these considerations in mind, let's take a look at some of the major frameworks that are available for you:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Bootstrap</strong></span>: The <a class="indexterm" id="id169"/>undisputed leader of the pack is Bootstrap. It's massively popular and there are tons of resources and extensions available. The tie-in with the React-Bootstrap project also makes this a very obvious choice when developing web apps in ReactJS.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Zurb Foundation</strong></span>: Foundation<a class="indexterm" id="id170"/> is the second biggest player after Bootstrap and a natural choice if you decide that Bootstrap is not for you. It's a mature framework that offers a lot of complexity for very little effort.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pure</strong></span>: Pure by Yahoo! is <a class="indexterm" id="id171"/>a lightweight and modular framework. It's perfect if you're concerned about the byte size of other frameworks (this one checks in at around 4 KB, while Bootstrap checks in around 150 KB and Foundation at 350 KB).</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Material Design</strong></span>: Material Design <a class="indexterm" id="id172"/>by Google is a very strong contender. It brings a lot of fresh ideas to the table and is an exciting alternative to Bootstrap and Foundation. There's also a ReactJS implementation called <span class="strong"><strong>Material UI</strong></span> that brings<a class="indexterm" id="id173"/> together Material Design and ReactJS, which makes this an attractive alternative to Bootstrap and React-Bootstrap. Material Design is highly opinionated in how the UX elements it provides should behave and interact, while Bootstrap and the others give you more freedom on how you set up your interactions.</li></ul></div><p>It's obviously not easy to choose one framework that's right for every project. Another choice that we did not mention previously was doing it alone, that is, creating the grid and the flexible layout all on your own. It's absolutely a doable strategy, but it comes with certain drawbacks.</p><p>The major drawback is that you won't benefit from many years of tweaking and testing. Even though most modern browsers are quite capable, your code will often be run on a myriad of browsers and devices. It's very likely that your users will run into issues that you don't know about because you simply don't have the same hardware setup.</p><p>In the end, you have to decide whether you want to design apps or you desire to create a new flexible CSS framework. That choice should make it clear why in this chapter we have chosen a particular framework to focus on, and that framework is Bootstrap.</p><p>Bootstrap is without doubt the most mature and popular of the preceding frameworks and has excellent support in the community. The web landscape is still evolving at a fast pace, and you can be confident that Bootstrap will evolve with it.</p><div class="section" title="Setting up your app with Bootstrap"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec03"/>Setting up your app with Bootstrap</h3></div></div></div><p>We've already<a class="indexterm" id="id174"/> looked at an implementation of Bootstrap and React-Bootstrap in the previous chapter, but we only skimmed the surface as to what you can do. Let's take a closer look at what React-Bootstrap can provide us.</p><p>Start this project <a class="indexterm" id="id175"/>by making a copy of the scaffolding from <a class="link" href="ch01.html" title="Chapter 1. Diving Headfirst into ReactJS">Chapter 1</a>, <span class="emphasis"><em>Diving Headfirst into ReactJS</em></span>, and then add React-Bootstrap to your project. Open a terminal, go to the root of your project, and replace your <code class="literal">dependencies</code> or your <code class="literal">devDependencies</code> (whichever you prefer) with the following list, then issue an <code class="literal">npm install</code> command from your command line:</p><div class="informalexample"><pre class="programlisting">"devDependencies": {
  "babel-preset-es2015": "6.9.0",
  "babel-preset-react": "6.11.1",
  "babelify": "7.3.0",
  "browser-sync": "2.13.0",
  "browserify": "13.0.1",
  "browserify-middleware": "7.0.0",
  "history": "3.0.0",
  "jsxstyle": "0.0.18",
  "react": "15.1.0",
  "react-bootstrap": "0.29.5",
  "react-dom": "15.1.0",
  "react-router": "2.5.2",
  "reactify": "1.1.1",
  "serve-favicon": "2.3.0",
  "superagent": "2.1.0",
  "uglifyjs": "2.4.10",
  "watchify": "3.7.0"
},</pre></div><p>Additionally, you'll need to either download the Bootstrap CSS or use a CDN to include it in your <code class="literal">index.html</code> file. Then, add the following to the <code class="literal">&lt;head&gt;</code> section of <code class="literal">index.html</code>:</p><div class="informalexample"><pre class="programlisting">&lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

&lt;link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css"&gt;
&lt;link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" /&gt;</pre></div><div class="section" title="Creating a flexible grid"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec01"/>Creating a flexible grid</h4></div></div></div><p>At the heart of CSS frameworks such as Bootstrap lies the concept of the <a class="indexterm" id="id176"/>
<span class="strong"><strong>grid</strong></span>. The Grid is a structure <a class="indexterm" id="id177"/>that allows you to stack content horizontally and vertically in a consistent manner. It provides a predictable layout scaffolding that is easy to visualize when you code.</p><p>Grids are made up of two main components: rows and columns. Within each row, you can add a number of columns, from one to as many as 12, depending on the framework. Some frameworks, such as Bootstrap, also add a container that you can wrap around the rows and columns.</p><p>Using a grid is ideal for a responsive design. You can effortlessly craft websites that look great on both large desktop browsers as well as small mobile browsers.</p><p>It's all down to how you structure your columns. For instance, you can set up a column to be of full width when the browser width is less than or equal to 320 pixels (a typical mobile browser width), and one-third width when the browser width is greater than a given pixel size. The method you employ when toggling classes on browser dimension is called <span class="strong"><strong>media queries</strong></span>. All <a class="indexterm" id="id178"/>grid frameworks come with built-in classes for toggling sizes based on media queries; you will rarely need to write your own media queries.</p><p>The grid system in Bootstrap utilizes 12 columns and can optionally be set to be fluid by initializing it with <code class="literal">&lt;Grid fluid={true}&gt;</code>. It defaults to nonfluid, but it's worth noting that both settings return a responsive grid. The main difference is that a fluid grid has 100% width all the time and continually readjusts at every width change. A nonfluid grid is controlled by media queries and changes widths when the width of the viewport crosses certain thresholds.</p><p>Grid columns can be differentiated with these properties:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>xs</strong></span>: This is <a class="indexterm" id="id179"/>for extra small devices such as phones (&lt;768 px)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>sm</strong></span>: This is <a class="indexterm" id="id180"/>for small devices such as tablets (≥768 px)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>md</strong></span>: This is <a class="indexterm" id="id181"/>for medium devices such as desktops (≥992 px)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>lg</strong></span>: This<a class="indexterm" id="id182"/> is for large devices such as desktops (≥1200 px)</li></ul></div><p>You can also use <code class="literal">push</code> and <code class="literal">offset</code> in combination with the preceding properties, so, for instance, you can use <code class="literal">xsOffset</code> to offset a column visible on extra small devices, and so on. The difference between <code class="literal">offset</code> and <code class="literal">push</code> is that <code class="literal">offset</code> will force other columns to move, while <code class="literal">push</code> will overlap other columns.</p><p>Sizes bubble upwards. If you define an <code class="literal">xs</code> property but no <code class="literal">sm</code>, <code class="literal">md</code>, or <code class="literal">lg</code> properties, all columns will use the <code class="literal">xs</code> settings. If you define <code class="literal">xs</code> and <code class="literal">sm</code> properties, extra small viewports will use the <code class="literal">xs</code> property, while all other viewports will use the <code class="literal">sm</code> property.</p><p>Let's look at a practical example. Create a file in your <code class="literal">source/examples</code> folder (create the folder if it doesn't exist), call it <code class="literal">grid.jsx</code>, and add the following code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import {Grid,Row,Col} from "react-bootstrap";</pre></div><p>In our scripts, we only import what we currently need. In this example, we need <code class="literal">Grid</code>, <code class="literal">Row</code>, and <code class="literal">Col</code>, so we'll name these and make sure that they're imported and available under those names.</p><p>While it would<a class="indexterm" id="id183"/> be more convenient to import all the components without naming each one specifically, being specific with your imports makes it easier to understand what you require in the file you're working on. It will also potentially result in a smaller footprint when bundling your JavaScript code for deployment because the bundler can remove all components that are available but never used. Note <a class="indexterm" id="id184"/>that this is not true for current versions <a class="indexterm" id="id185"/>of <span class="strong"><strong>Browserify</strong></span> or <span class="strong"><strong>Webpack</strong></span> (which we'll talk about in <a class="link" href="ch06.html" title="Chapter 6. Advanced React">Chapter 6</a>, <span class="emphasis"><em>Advanced React</em></span>), but is in the pipeline, at least for Webpack.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>When you're importing a single component from a larger library, import it with this method:</p><div class="informalexample"><pre class="programlisting">const Row = require('react-bootstrap').Row;</pre></div><p>This will import just the desired component while ignoring the rest of the library. If you do this consistently, your bundle size will decrease.</p></div></div><p>Let's take a look at the following code:</p><div class="informalexample"><pre class="programlisting">const GridExample = React.createClass ({
  render: function () {
    return (
      &lt;div&gt;
        &lt;h2&gt;The grid&lt;/h2&gt;

        &lt;Grid fluid={true}&gt;
          &lt;Row&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
            &lt;Col xs = { 1 }&gt; 1 &lt;/Col&gt;
          &lt;/Row&gt;

          &lt;Row&gt;
            &lt;Col xs = { 2 } sm = { 4 }&gt; xs2 sm4 &lt;/Col&gt;
            &lt;Col xs = { 4 } sm = { 4 }&gt; xs4 sm4 &lt;/Col&gt;
            &lt;Col xs = { 6 } sm = { 4 }&gt; xs6 sm4 &lt;/Col&gt;
          &lt;/Row&gt;</pre></div><p>This row will <a class="indexterm" id="id186"/>show different column sizes for extra small devices and small to large devices:</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>Remember that sizes bubble upwards, but not downwards.</p></div></div><div class="informalexample"><pre class="programlisting">          &lt;Row&gt;
            &lt;Col
              xs = { 6 } 
              sm = { 4 } 
              md = { 8 } 
              lg = { 2 }&gt;
             xs6 sm4 md8 lg2
            &lt;/Col&gt;
            &lt;Col
              xs = { 6 } 
              sm = { 8 } 
              md = { 4 }&gt;
              xs6 sm8 md4 lg10
            &lt;/Col&gt;
          &lt;/Row&gt;</pre></div><p>This row shows two columns that change drastically depending on the viewport. On smart phones, the columns are of equal width. On small viewports, the left-hand side column covers one third of the row and the right-hand side column covers the rest. On medium viewports, the left-hand side column is suddenly the dominant column, but on very large viewports, the left-hand side column is again reduced to a much smaller proportion.</p><p>This is obviously a contrived setting meant to demonstrate the capabilities of the grid. This would be a very strange setting for a live app:</p><div class="informalexample"><pre class="programlisting">          &lt;Row&gt;
            &lt;Col
              xs = { 3 } 
              xsOffset = { 1 }&gt; 
              3 offset 1 
            &lt;/Col&gt;
            &lt;Col
              xs = { 7 } 
              xsOffset = { 1 }&gt; 
              7 offset 1 
            &lt;/Col&gt;
          &lt;/Row&gt;</pre></div><p>Both columns start with an offset here. This will create a column of empty space at the beginning of each column:</p><div class="informalexample"><pre class="programlisting">          &lt;Row&gt;
            &lt;Col
              xs = { 4 }
              xsPush = { 1 }&gt;
              4 push 1 (overlaps)
            &lt;/Col&gt;
            &lt;Col
              xs={ 7 }
              xsOffset = { 1 }&gt;
              7 offset 1 
            &lt;/Col&gt;
          &lt;/Row&gt;</pre></div><p>
<code class="literal">Push</code> moves <a class="indexterm" id="id187"/>the column to the right, but doesn't force the other column to move, so it will overlap the next column. This means that the offset in the second column will be overlapped by the contents of the first column:</p><div class="informalexample"><pre class="programlisting">        &lt;/Grid&gt;
      &lt;/div&gt;
    );
  }
});

module.exports = GridExample;</pre></div><p>In order to view this example, open <code class="literal">app.jsx</code> and replace the content with this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import ReactDom from 'react-dom';
import GridExample from './examples/grid.jsx';

ReactDom.render ((&lt;div&gt;
    &lt;GridExample /&gt;
  &lt;/div&gt;),
  document.getElementById('container')
);</pre></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>We'll create a lot of components in this chapter, and they can all be added to <code class="literal">app.jsx</code> by adding an <code class="literal">import</code> statement in the head of your code. ReactJS requires you to capitalize your components when you import them. The name you give to the import can then be used in your render code by adding the name in brackets.</p></div></div><p>When creating <a class="indexterm" id="id188"/>a grid, it can be very beneficial to make it visible while you're setting it up. You can add this to <code class="literal">app.css</code> to make it appear in your browser:</p><div class="informalexample"><pre class="programlisting">div[class*="col-"] {
  border: 1px dotted rgba(60, 60, 60, 0.5);
  padding: 10px;
  background-color: #eee;
  text-align: center;
  border-radius: 3px;
  min-height: 40px;
  line-height: 40px;
}</pre></div><p>This styling will make it easy to view and debug the columns that we're adding.</p><p>Bootstrap's grid system is very versatile and makes it easy to structure your page just the way you want it. The grid you've made in this example is visible and fluid on all devices you throw at it.</p><div class="mediaobject"><img alt="Creating a flexible grid" src="graphics/B04943_03_01.jpg"/></div></div><div class="section" title="Creating a responsive menu and navigation bar"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec02"/>Creating a responsive menu and navigation bar</h4></div></div></div><p>This was <a class="indexterm" id="id189"/>extensively covered in <a class="link" href="ch02.html" title="Chapter 2. Creating a Web Shop">Chapter 2</a>, <span class="emphasis"><em>Creating a Web Shop</em></span>, so we'll just set up a basic menu here and refer to the <a class="indexterm" id="id190"/>previous chapter for details on how to connect to a router and set up links that work.</p><p>Create a file in your <code class="literal">source/examples</code> folder, call it <code class="literal">navbar.jsx</code>, and add the following code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { Nav,
  Navbar,
  NavBrand,
  NavItem,
  NavDropdown,
  MenuItem
} from 'react-bootstrap';

const Navigation = React.createClass ({
  render() {
    return (
      &lt;Navbar inverse fixedTop&gt;
        &lt;Navbar.Header&gt;
          &lt;Navbar.Brand&gt;
            Responsive Web app
          &lt;/Navbar.Brand&gt;
          &lt;Navbar.Toggle/&gt;
        &lt;/Navbar.Header&gt;
        &lt;Navbar.Collapse&gt;</pre></div><p>Adding <code class="literal">Navbar.Collapse</code> automatically makes this a mobile-friendly navigation bar that<a class="indexterm" id="id191"/> replaces the menu items <a class="indexterm" id="id192"/>with a <span class="strong"><strong>Hamburger</strong></span> button when the viewport is less than 768 pixels:</p><div class="informalexample"><pre class="programlisting">          &lt;Nav role="navigation" eventKey={0} pullRight&gt;
            &lt;NavItem
              eventKey={ 1 }
              href = "#"&gt;
              Link
            &lt;/NavItem&gt;
            &lt;NavItem
              eventKey = { 2 }
              href = "#"&gt;
              Link
            &lt;/NavItem&gt;
            &lt;NavDropdown
              eventKey = { 3 }
              title = "Dropdown"
              id = "collapsible-nav-dropdown"&gt;
              &lt;MenuItem eventKey={ 3.1 }&gt;
                Action
              &lt;/MenuItem&gt;
              &lt;MenuItem eventKey={ 3.2 }&gt;
                Another action
              &lt;/MenuItem&gt;
              &lt;MenuItem eventKey={ 3.3 }&gt;
                Something else here
              &lt;/MenuItem&gt;
              &lt;MenuItem divider /&gt;
              &lt;MenuItem eventKey={ 3.3 }&gt;
                Separated link
              &lt;/MenuItem&gt;
            &lt;/NavDropdown&gt;
          &lt;/Nav&gt;
          &lt;Nav pullRight&gt;
            &lt;NavItem eventKey = { 1 } href = "#"&gt;
              Link Right
            &lt;/NavItem&gt;
            &lt;NavItem eventKey = { 2 } href = "#"&gt;
              Link Right
            &lt;/NavItem&gt;
          &lt;/Nav&gt;
        &lt;/Navbar.Collapse&gt;
      &lt;/Navbar&gt;
    );
  }
});

module.exports = Navigation;</pre></div><p>You can <a class="indexterm" id="id193"/>set the <a class="indexterm" id="id194"/>following <a class="indexterm" id="id195"/>properties on the main <code class="literal">Navbar</code> component:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">defaultExpanded</code>: This <a class="indexterm" id="id196"/>will expand <code class="literal">Navbar</code> on small devices if it is set to <code class="literal">true</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">expanded</code>: This sets <a class="indexterm" id="id197"/>the <code class="literal">Navbar</code> component expanded on runtime (requires <code class="literal">onToggle</code>)</li><li class="listitem" style="list-style-type: disc"><code class="literal">fixedBottom</code>: This <a class="indexterm" id="id198"/>will fix the <code class="literal">Navbar</code> component at the bottom of the viewport</li><li class="listitem" style="list-style-type: disc"><code class="literal">fixedTop</code>: This <a class="indexterm" id="id199"/>will fix the <code class="literal">Navbar</code> component at the top of the viewport</li><li class="listitem" style="list-style-type: disc"><code class="literal">staticTop</code>: This <a class="indexterm" id="id200"/>will float <code class="literal">Navbar</code> along with the page</li><li class="listitem" style="list-style-type: disc"><code class="literal">fluid</code>: This <a class="indexterm" id="id201"/>works in the same way as the fluid setting in the grid</li><li class="listitem" style="list-style-type: disc"><code class="literal">inverse</code>: This<a class="indexterm" id="id202"/> inverses the colors in <code class="literal">Navbar</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">onToggle</code>: This<a class="indexterm" id="id203"/> is a function that you can run when <code class="literal">Navbar</code> is toggled</li><li class="listitem" style="list-style-type: disc"><code class="literal">componentClass</code>: This<a class="indexterm" id="id204"/> is used to add your own classes to <code class="literal">Navbar</code></li></ul></div></div><div class="section" title="Creating responsive wells"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec03"/>Creating responsive wells</h4></div></div></div><p>A <a class="indexterm" id="id205"/>well is <a class="indexterm" id="id206"/>an inset that can be used for good effect. It's an easy, but effective way of emphasizing content. It's also very simple to set up in Bootstrap.</p><p>Add a new file in <code class="literal">source/examples</code>, name it <code class="literal">wells.jsx</code>, and add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { Well } from 'react-bootstrap';

const Wells = React.createClass ({
  render() {
    return (
      &lt;Well bsSize = "large"&gt;
        Hi, I'm a large well.
      &lt;/Well&gt;
    );
  }
});

module.exports = Wells;</pre></div><p>You can set the following properties on the <code class="literal">Wells</code> component:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">bsSize</code>: A well can be either <span class="emphasis"><em>small</em></span> or <span class="emphasis"><em>large</em></span></li></ul></div><div class="mediaobject"><img alt="Creating responsive wells" src="graphics/B04943_03_02.jpg"/></div></div><div class="section" title="Creating responsive panels"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec04"/>Creating responsive panels</h4></div></div></div><p>A <a class="indexterm" id="id207"/>panel is like a well, but with <a class="indexterm" id="id208"/>more information and functionality.</p><p>It can have a heading and it can be collapsible, so it's a good candidate for presenting information, containing forms, and so on.</p><p>Let's create a basic panel. Add a new file in <code class="literal">source/components</code>, name it <code class="literal">panels.jsx</code>, and add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { Panel, Button, PanelGroup, Accordion }
  from 'react-bootstrap';

const Panels = React.createClass ({
  getInitialState() {
    return {
      open: false,
      activeKey: 1
    }
  },
  render() {
    return (
      &lt;div&gt;
        &lt;h2&gt;Panels&lt;/h2&gt;
        &lt;div&gt;
          &lt;Button
            onClick = { ()=&gt; this.setState ({
              open: !this.state.open })}&gt;
            { !this.state.open ? "Open" : "Close" }
          &lt;/Button&gt;
          &lt;Panel
            collapsible
            expanded = { this.state.open }&gt;
              This text is hidden until you click the button.
          &lt;/Panel&gt;</pre></div><p>This <a class="indexterm" id="id209"/>panel is closed by default and controlled by the component's state variable, <code class="literal">open</code>. When you click on the button, it executes the internal <code class="literal">setState</code> function. The state simply reverses the Boolean value of the <code class="literal">open</code> variable using the rather clever <code class="literal">not </code>operator. When we use it, we say that we want the opposite of the current value, which is either <code class="literal">true</code> or <code class="literal">false</code>:</p><div class="informalexample"><pre class="programlisting">        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
});

module.exports = Panels;</pre></div><p>There's a bit more that we can do with the panel component, but let's briefly look at which other properties we can set on <code class="literal">Panel</code> first:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">header (string)</code>: Add <a class="indexterm" id="id210"/>this to the <code class="literal">Panel</code> initializer and pass a value to give the header some content.</li><li class="listitem" style="list-style-type: disc"><code class="literal">footer (string)</code>: This<a class="indexterm" id="id211"/> is the same as the header but creates the information block at the bottom instead of at the top.</li><li class="listitem" style="list-style-type: disc"><code class="literal">bsStyle (string)</code>: This <a class="indexterm" id="id212"/>makes the content meaningful by adding a context class. You can choose between all the common Bootstrap context names: <code class="literal">primary</code>, <code class="literal">success</code>, <code class="literal">danger</code>, <code class="literal">info</code>, <code class="literal">warning</code>, as well as <code class="literal">default</code>.</li><li class="listitem" style="list-style-type: disc"><code class="literal">expanded (boolean)</code>: This <a class="indexterm" id="id213"/>can either be <code class="literal">true</code> or <code class="literal">false</code>. This needs to be coupled with <code class="literal">collapsible</code>.</li><li class="listitem" style="list-style-type: disc"><code class="literal">defaultExpanded (boolean)</code>: This<a class="indexterm" id="id214"/> too can be <code class="literal">true</code> or <code class="literal">false</code>. This does not override the <code class="literal">expanded</code> function.</li></ul></div><p>You will often want to display more than one panel and group them together. This can be achieved by adding a component called <code class="literal">PanelGroup</code>.</p><p>
<code class="literal">PanelGroups</code> is <a class="indexterm" id="id215"/>a wrapper that you set around all the panels you want to group. The code looks like this if you want to group two panels:</p><div class="informalexample"><pre class="programlisting">&lt;PanelGroup
  activeKey = { this.state.activeKey }
  onSelect = { (activeKey)=&gt;
  this.setState({ activeKey: activeKey })}
  accordion&gt;
  
  &lt;Panel
    collapsible 
    expanded = { this.state.open }
    header = "Panel 1 - Controlled PanelGroup" 
    eventKey = "1" 
    bsStyle = "info"&gt;
      Panel 1 content
  &lt;/Panel&gt;

  &lt;Panel
    collapsible
    expanded = {this.state.open}
    header = "Panel 2 - Controlled PanelGroup"
    eventKey = "2"
    bsStyle = "info"&gt;
      Panel 2 content
  &lt;/Panel&gt;
&lt;/PanelGroup&gt;</pre></div><p>This is a controlled <code class="literal">PanelGroup</code> instance. This means that only one panel will be open at any time, and this is signified by adding the <code class="literal">activeKey</code> attribute to the <code class="literal">PanelGroup</code> initializer. When you click on the panels in the group, the function in the <code class="literal">onSelect()</code> method is called, and it updates the active panel state, which then tells ReactJS to open the active panel and close the inactive one.</p><p>You can also create an uncontrolled <code class="literal">PanelGroup</code> instance by simply dropping the <code class="literal">activeKey</code> and <code class="literal">onSelect</code> attributes from the <code class="literal">PanelGroup</code> initializer and the <code class="literal">expanded</code> attribute from the <code class="literal">Panel</code> initializers:</p><div class="informalexample"><pre class="programlisting">&lt;PanelGroup accordion&gt;
  &lt;Panel
    collapsible
    header = "Panel 3 - Uncontrolled PanelGroup"
    eventKey = "3"
    bsStyle = "info"&gt;
      Panel 3 content
  &lt;/Panel&gt;

  &lt;Panel
    collapsible 
    header = "Panel 4 - Uncontrolled PanelGroup"
    eventKey = "4" 
    bsStyle = "info"&gt;
      Panel 4 content
  &lt;/Panel&gt;
&lt;/PanelGroup&gt;</pre></div><p>The main <a class="indexterm" id="id216"/>difference between them is that with the controlled groups, one panel will be toggled open every time, but with uncontrolled groups, the user can close all panels.</p><p>Finally, if all you want are uncontrolled panel groups, you can ditch the <code class="literal">PanelGroup</code> component and import the <code class="literal">Accordion</code> component instead. <code class="literal">&lt;Accordion /&gt;</code> is an alias for <code class="literal">&lt;PanelGroup accordion /&gt;</code>. It doesn't really save you much code, but may be easier to remember. The code looks like this:</p><div class="informalexample"><pre class="programlisting">&lt;Accordion&gt;
  &lt;Panel
    collapsible
    header = "Panel 5 - Accordion"
    eventKey = "5" 
    bsStyle = "info"&gt;
      Panel 5 content
  &lt;/Panel&gt;

  &lt;Panel
    collapsible
    header = "Panel 6 - Accordion"
    eventKey = "6"
    bsStyle = "info"&gt;
      Panel 6 content
  &lt;/Panel&gt;
&lt;/Accordion&gt;</pre></div><div class="mediaobject"><img alt="Creating responsive panels" src="graphics/B04943_03_03.jpg"/></div></div><div class="section" title="Creating responsive alerts"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec05"/>Creating responsive alerts</h4></div></div></div><p>Much <a class="indexterm" id="id217"/>like panels, alerts <a class="indexterm" id="id218"/>are padded information blocks with a few added features, and they're good for displaying timely information to the user.</p><p>Let's take a look at what you can do with alerts.</p><p>Create a file called <code class="literal">examples/alerts.jsx</code> and add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { Alert, Button } from "react-bootstrap";

const AlertExample = React.createClass ({
  getInitialState() {
    return {
      alertVisible: true
    };
  },</pre></div><p>This is <a class="indexterm" id="id219"/>our flag to keep the alert visible. When this is set to <code class="literal">false</code>, the alert is hidden:</p><div class="informalexample"><pre class="programlisting">  render(){
    if(this.state.alertVisible){
    return (&lt;Alert bsStyle="danger" isDismissableonDismiss={()=&gt;{this.setState({alertVisible:false})}}&gt;</pre></div><p>Here, there are two attributes to be noted. The first is <code class="literal">isDismissable</code>, which renders a button that allows the user to dismiss the alert. This attribute is optional.</p><p>The second is <code class="literal">onDismiss</code>, which is a function that is called when the user clicks on the <span class="strong"><strong>Dismiss</strong></span> button. In this case, the <code class="literal">alertVisible</code> flag is set to 0, and the <code class="literal">render</code> function now returns <code class="literal">null</code> instead of an <code class="literal">Alert </code>component:</p><div class="informalexample"><pre class="programlisting">    &lt;h4&gt;An error has occurred!&lt;/h4&gt;
    &lt;p&gt;Try something else and hope for the best.&lt;/p&gt;
    &lt;p&gt;
      &lt;Button bsStyle="danger"&gt;Do this&lt;/Button&gt;
      &lt;span&gt; or &lt;/span&gt;
      &lt;Button onClick=
        {()=&gt;{this.setState({alertVisible:false})}}&gt;
        Forget it&lt;/Button&gt;</pre></div><p>The <span class="strong"><strong>Action</strong></span> button isn't set up to do anything, so clicking on it is fruitless at this time. The <span class="strong"><strong>Hide</strong></span> button receives a function that will set the <code class="literal">alertVisible</code> flag to 0 and hide the <code class="literal">Alert</code> box:</p><div class="informalexample"><pre class="programlisting">    &lt;/p&gt;
    &lt;/Alert&gt;)}
    else {
      return null;
    }
  }
});

module.exports = Alerts;</pre></div></div><div class="section" title="Responsively embedded media and video content"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec06"/>Responsively embedded media and video content</h4></div></div></div><p>Embedding YouTube videos can be a worthwhile addition to your site, so let's create a custom component to handle this.</p><p>For this <a class="indexterm" id="id220"/>module, we need another dependency, so go ahead and open a terminal, navigate to the root folder, and execute this <code class="literal">install</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>npm install --save classnames</strong></span>
</pre></div><p>The <code class="literal">classnames</code> component allows you to dynamically define classes that are to be included with simple <code class="literal">true</code> and <code class="literal">false</code> comparisons, and it is easier to use and understand than relying on string concatenation and <code class="literal">if...else</code> statements.</p><p>Create a folder called <code class="literal">components</code> and a file in that folder called <code class="literal">media.jsx</code>, and then, add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import ClassNames from 'classnames';

const Media = React.createClass ({
  propTypes: {
    wideScreen: React.PropTypes.bool,
    type: React.PropTypes.string,
    src: React.PropTypes.string.isRequired,
    width: React.PropTypes.number,
    height: React.PropTypes.number
  },
  getDefaultProps() {
    return {
      src: "",
      type: "video",
      wideScreen: false,
      allowFullScreen: false,
      width:0,
      height:0
    }
  },</pre></div><p>We will require one property: the YouTube source. The others are optional. If widescreen is not provided, the component will show the video in the 4:3 aspect ratio:</p><div class="informalexample"><pre class="programlisting">  render() {
    let responsiveStyle = ClassNames ({
      "embed-responsive": true,
      "embed-responsive-16by9": this.props.wideScreen,
      "embed-responsive-4by3": !this.props.wideScreen
    });
    let divStyle, ifStyle;
    divStyle = this.props.height ?
      {paddingBottom:this.props.height} : null;
    ifStyle = this.props.height ?
      {height:this.props.height, width:this.props.width} : null;

    if(this.props.src) {
      if(this.props.type === "video") {
        return (&lt;div className={responsiveStyle}
          style={divStyle}&gt;
          &lt;iframe className="embed-responsive-item"
            src={ this.props.src }
            style={ifStyle}
            allowFullScreen={ this.props.allowFullScreen }&gt;
          &lt;/iframe&gt;
        &lt;/div&gt;);
      } else {
        return (&lt;div className={ responsiveStyle }
          style={ divStyle }&gt;
          &lt;embed frameBorder='0'
          src={ this.props.src }
          style={ ifStyle }
          allowFullScreen={ this.props.allowFullScreen }/&gt;
        &lt;/div&gt;)
      }
    }
    else {
      return null;
    }
  }
});

module.exports = Media;</pre></div><p>This <a class="indexterm" id="id221"/>snippet returns an <code class="literal">iframe</code> or <code class="literal">embed</code> element based on the type of media being passed. The responsive classes are based on the ones provided by Bootstrap and will scale the media to any viewport automatically.</p><p>Open <code class="literal">app.jsx</code> and add this import:</p><div class="informalexample"><pre class="programlisting">import Media from './components/media;</pre></div><p>Then, add <code class="literal">&lt; Media src="//www.youtube.com/embed/x7cQ3mrcKaY"/&gt;</code> to the <code class="literal">render()</code> method (or any other video you want to display). You can also add the <code class="literal">wideScreen</code> optional attribute to show the video in a 16 x 9 size and <code class="literal">allowFullScreen</code> if you want to allow the user to view the video in full screen. You can also pass <code class="literal">height</code> and <code class="literal">width</code> parameters in order to make it consistent with your layout.</p><p>Of course, this<a class="indexterm" id="id222"/> component is not just for videos, but any type of media content. For instance, try replacing the code in <code class="literal">app.jsx</code> with this:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import ReactDom from 'react-dom';
import Media from './components/media.jsx';
import { Grid, Row, Col } from "react-bootstrap";

ReactDom.render((&lt;Grid fluid={true}&gt;
  &lt;Row&gt;
    &lt;Col xs={12} md={6}&gt;
      &lt;Media type="image/svg+xml"
      src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Black-crowned_Night_Heron.svg" /&gt;
    &lt;/Col&gt;
    &lt;Col xs = { 12 } md = { 6 }&gt;
      &lt;Media
        type = "video"
        src = "//www.youtube.com/embed/x7cQ3mrcKaY" /&gt;
    &lt;/Col&gt;
  &lt;/Row&gt;
&lt;/Grid&gt;),
document.getElementById( 'container' )
);</pre></div><p>This will show a grid with two columns, one with an SVG and the other with a video from YouTube.</p></div><div class="section" title="Creating responsive buttons"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec07"/>Creating responsive buttons</h4></div></div></div><p>Buttons <a class="indexterm" id="id223"/>are ubiquitous <a class="indexterm" id="id224"/>on any web app. They're responsible for a lot of user interaction that you'll do in your apps, so it's worth knowing the many types of buttons available to you.</p><p>Some of the options available to you are extra-small, small, and large buttons, full-width buttons, the active and disabled state, grouping, dropup and dropdown, and the loading state. Let's look at the code.</p><p>Create a file called <code class="literal">examples/buttons.jsx</code> and add the following code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { Button, ButtonGroup, ButtonToolbar, DropdownButton,
  MenuItem, SplitButton } from 'react-bootstrap';

const Buttons = React.createClass({
  getInitialState() {
    return {
      isLoading: false
    }
  },
  setLoading() {
    this.setState({ isLoading: true });
    setTimeout(() =&gt; {
      this.setState({ isLoading: false });
    }, 2000);
  },</pre></div><p>When <a class="indexterm" id="id225"/>we execute <code class="literal">setLoading</code>, we set the <code class="literal">isLoading</code> state to <code class="literal">true</code>, and then, we set a timer that reverts the state to <code class="literal">false</code> after 2 seconds:</p><div class="informalexample"><pre class="programlisting">  render() {
    let isLoading = this.state.isLoading;

    return (
      &lt;div&gt;
        &lt;h2&gt; Buttons &lt;/h2&gt;
        &lt;h5&gt; Simple buttons &lt;/h5&gt;
        &lt;ButtonToolbar&gt;</pre></div><p>
<code class="literal">ButtonToolbar</code> along with <code class="literal">ButtonGroup</code> are the two components that you can use for grouping buttons. The main difference between them is that <code class="literal">ButtonToolbar</code> will preserve the spacing between multiple inline buttons or button groups, whereas <code class="literal">ButtonGroup</code> will not:</p><div class="informalexample"><pre class="programlisting">          &lt;Button&gt; Default &lt;/Button&gt;

          &lt;Button bsStyle = "primary"&gt; Primary &lt;/Button&gt;

          &lt;Button bsStyle = "success"&gt; Success &lt;/Button&gt;

          &lt;Button bsStyle = "info"&gt; Info &lt;/Button&gt;

          &lt;Button bsStyle = "warning"&gt; Warning &lt;/Button&gt;

          &lt;Button bsStyle = "danger"&gt; Danger &lt;/Button&gt;

          &lt;Button bsStyle = "link"&gt; Link &lt;/Button&gt;</pre></div><p>The styles provide visual weight and identify the primary action of the button. The final style, <code class="literal">link</code>, makes<a class="indexterm" id="id226"/> the button look like a normal link but maintains the button's behavior:</p><div class="informalexample"><pre class="programlisting">        &lt;/ButtonToolbar&gt;

        &lt;h5&gt;Full-width buttons&lt;/h5&gt;
        &lt;ButtonToolbar&gt;
          &lt;Button
            bsStyle = "primary"
            bsSize = "xsmall"
            block&gt;
            Extra small block button (full-width)
          &lt;/Button&gt;
          &lt;Button
            bsStyle = "info"
            bsSize = "small"
            block&gt;
            Small block button (full-width)
          &lt;/Button&gt;
          &lt;Button
            bsStyle = "success"
            bsSize = "large"
            block&gt;
            Large block button (full-width)
          &lt;/Button&gt;
        &lt;/ButtonToolbar&gt;</pre></div><p>Adding <code class="literal">block</code> turns it into a full-width button. The <code class="literal">bsSize</code> attribute is available for all the buttons and can be <code class="literal">xsmall</code>, <code class="literal">small</code>, or <code class="literal">large</code>:</p><div class="informalexample"><pre class="programlisting">        &lt;h5&gt; Active, non-active and disabled buttons &lt;/h5&gt;
        &lt;ButtonToolbar&gt;
          &lt;Button&gt; Default button - Non-active &lt;/Button&gt;
          &lt;Button active&gt; Default button – Active &lt;/Button&gt;</pre></div><p>To set the button's active state, simply add the <code class="literal">active</code> attribute:</p><div class="informalexample"><pre class="programlisting">          &lt;Button disabled&gt; Default button – Disabled &lt;/Button&gt;
        &lt;/ButtonToolbar&gt;</pre></div><p>Adding the <code class="literal">disabled</code> attribute makes the button look unclickable by fading it to 50% of the original opacity:</p><div class="informalexample"><pre class="programlisting">        &lt;h5&gt;Loading state&lt;/h5&gt;
        &lt;Button
          bsStyle = "primary"
          disabled = { isLoading }
          onClick = { !isLoading ? this.setLoading : null }&gt;
          { isLoading ? 'Loading...' : 'Loading state' }
        &lt;/Button&gt;</pre></div><p>This <a class="indexterm" id="id227"/>button receives a <code class="literal">click</code> action and hands it over to the <code class="literal">setLoading</code> function, as shown in the preceding code. As long as the <code class="literal">isLoading</code> state is set to <code class="literal">false</code>, it will have a <code class="literal">disabled</code> attribute and show the text <span class="strong"><strong>Loading…</strong></span>:</p><div class="informalexample"><pre class="programlisting">        &lt;h5&gt; Groups and Toolbar &lt;/h5&gt;
        &lt;ButtonToolbar&gt;
          &lt;ButtonGroup&gt;
            &lt;Button&gt; 1 &lt;/Button&gt;
            &lt;Button&gt; 2 &lt;/Button&gt;
            &lt;Button&gt; 3 &lt;/Button&gt;
          &lt;/ButtonGroup&gt;

          &lt;ButtonGroup&gt;
            &lt;Button&gt; 4 &lt;/Button&gt;
            &lt;Button&gt; 5 &lt;/Button&gt;
          &lt;/ButtonGroup&gt;
        &lt;/ButtonToolbar&gt;
        </pre></div><p>This segment shows how you can combine <code class="literal">ButtonToolbar</code> and <code class="literal">ButtonGroup</code> to maintain two or more sets of visually grouped buttons. Another striking effect you can add to <code class="literal">ButtonGroup</code> is the <code class="literal">vertical</code> attribute, which will show the button stacked on top of each other instead of side by side:</p><div class="informalexample"><pre class="programlisting">        &lt;h5&gt; Dropdown buttons &lt;/h5&gt;
        &lt;ButtonToolbar&gt;
          &lt;DropdownButton
            title = "Dropdown"
            id = "bg-nested-dropdown"&gt;
            &lt;MenuItem
              bsStyle = "link"
              eventKey = "1"&gt;
               Dropdown link
            &lt;/MenuItem&gt;
            &lt;MenuItem
              bsStyle = "link"
              eventKey = "2"&gt;
               Dropdown link
            &lt;/MenuItem&gt;
          &lt;/DropdownButton&gt;</pre></div><p>Our final set of buttons shows us the various ways in which you can add drop-down and split-button <a class="indexterm" id="id228"/>effects. This preceding code is the simplest set of drop-down buttons that you can show, and all you need to do is wrap them inside the <code class="literal">DropdownButton</code> component:</p><div class="informalexample"><pre class="programlisting">          &lt;DropdownButton
            noCaret
            title = "Dropdown noCaret"
            id = "bg-nested-dropdown-nocaret"&gt;
            &lt;MenuItem
              bsStyle="link"
              eventKey="1"&gt;
                Dropdown link
            &lt;/MenuItem&gt;
            &lt;MenuItem
              bsStyle = "link"
              eventKey = "2"&gt;
                Dropdown link
            &lt;/MenuItem&gt;
          &lt;/DropdownButton&gt;</pre></div><p>This <a class="indexterm" id="id229"/>next set adds the <code class="literal">noCaret</code> attribute to illustrate how you can create a drop-down button without any visual clue that it will display a set of buttons when you click on it:</p><div class="informalexample"><pre class="programlisting">          &lt;DropdownButton
            dropup
            title = "Dropup"
            id="bg-nested-dropup"&gt;
              &lt;MenuItem
                bsStyle = "link"
                eventKey = "1"&gt;
                  Dropdown link
              &lt;/MenuItem&gt;
              &lt;MenuItem
                bsStyle = "link"
                eventKey = "2"&gt;
                  Dropdown link
              &lt;/MenuItem&gt;
          &lt;/DropdownButton&gt;</pre></div><p>You can turn the dropdown into a dropup instead by adding the <code class="literal">dropup</code> attribute:</p><div class="informalexample"><pre class="programlisting">          &lt;SplitButton
            bsStyle = "success"
            title="Splitbutton down"
            id="successbutton"&gt;
            &lt;MenuItem eventKey = "1"&gt; Action &lt;/MenuItem&gt;
            &lt;MenuItem eventKey = "2"&gt; Another action &lt;/MenuItem&gt;
          &lt;/SplitButton&gt;
          &lt;SplitButton
            dropup
            bsStyle = "success"
            title = "Splitbutton up"
            id = "successbutton"&gt;
            &lt;MenuItem eventKey = "1"&gt; Action &lt;/MenuItem&gt;
            &lt;MenuItem eventKey = "2"&gt; Another action &lt;/MenuItem&gt;
          &lt;/SplitButton&gt;</pre></div><p>Similarly, you <a class="indexterm" id="id230"/>can create a split button effect by wrapping the buttons inside the <code class="literal">SplitButton</code> component instead of the <code class="literal">DropdownButton</code> component:</p><div class="informalexample"><pre class="programlisting">        &lt;/ButtonToolbar&gt;

      &lt;/div&gt;
    );
  }
});

module.exports = Buttons;</pre></div><p>The following screenshot shows the output of this code:</p><div class="mediaobject"><img alt="Creating responsive buttons" src="graphics/B04943_03_04.jpg"/></div></div><div class="section" title="Creating dynamic progress bars"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec08"/>Creating dynamic progress bars</h4></div></div></div><p>Progress bars <a class="indexterm" id="id231"/>can be used to<a class="indexterm" id="id232"/> show users the state of a process and how much is left to process until it's finished.</p><p>Create a file called <code class="literal">examples/progressbars.jsx</code> and add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { ProgressBar } from 'react-bootstrap';
let tickInterval;</pre></div><p>In this component, we want to create an interval for progress bars. We create a variable to hold the interval because we want to be able to access it later in the <code class="literal">unmount</code> method:</p><div class="informalexample"><pre class="programlisting">const ProgressBars = React.createClass ({
  getInitialState() {
    return {
      progress: 0
    }
  },
  componentDidMount() {
    tickInterval = setInterval(this.tick, 500);
  },
  componentWillUnmount() {
    clearInterval(tickInterval);
  },</pre></div><p>We create <a class="indexterm" id="id233"/>an interval when we mount the component, telling it to execute our <code class="literal">tick</code> method every 500 milliseconds:</p><div class="informalexample"><pre class="programlisting">  tick() {
    this.setState({ progress: this.state.progress &lt; 100 ?
      ++this.state.progress : 0 })
  },</pre></div><p>The <code class="literal">tick()</code> method updates our internal <code class="literal">progress</code> variable by adding <code class="literal">1</code> to it if it's less than <code class="literal">100</code> or resetting to <code class="literal">0</code> if it isn't:</p><div class="informalexample"><pre class="programlisting">  render() {
    return (
      &lt;div&gt;
        &lt;h2&gt; ProgressBars &lt;/h2&gt;
        &lt;ProgressBar
          active
          now = { this.state.progress } /&gt;

        &lt;ProgressBar
          striped
          bsStyle = "success"
          now = { this.state.progress } /&gt;

        &lt;ProgressBar
          now = { this.state.progress }
          label = "%(percent)s%" /&gt;</pre></div><p>All of the progress bars will now update and display an ever-increasing progress until it completely fills up and then resets to <code class="literal">empty</code> when it does.</p><p>If you apply the <code class="literal">active</code> attribute, the progress bar will be animated. You can also furnish it with stripes by adding the <code class="literal">striped</code> attribute.</p><p>You can add your own custom label or use one of the following to interpolate the current value:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">%(percent)s%</code>: This adds a percentage value</li><li class="listitem" style="list-style-type: disc"><code class="literal">%(bsStyle)s</code>: This shows the current style</li><li class="listitem" style="list-style-type: disc"><code class="literal">%(now)s</code>: This shows the current value</li><li class="listitem" style="list-style-type: disc"><code class="literal">%(max)s</code>: This shows the max value (couple this by setting <code class="literal">max={x}</code>, where <span class="emphasis"><em>x</em></span> is any number)</li><li class="listitem" style="list-style-type: disc"><code class="literal">%(min)s</code>: This shows the minx value (couple this by setting <code class="literal">min={x}</code>, where <span class="emphasis"><em>x</em></span> is any number)</li></ul></div><p>Let's take a <a class="indexterm" id="id234"/>look at the following code snippet:</p><div class="informalexample"><pre class="programlisting">        &lt;ProgressBar&gt;
          &lt;ProgressBar
            bsStyle = "warning"
            now = { 20 }
            key = { 1 }
            label = "System Files" /&gt;
          &lt;ProgressBar
            bsStyle="danger"
            active
            striped
            now = { 40 }
            key = { 3 }
            label = "Crunching" /&gt;
        &lt;/ProgressBar&gt;</pre></div><p>It's possible to nest several progress bars on top of each other by wrapping them inside <code class="literal">ProgressBar</code>:</p><div class="informalexample"><pre class="programlisting">      &lt;/div&gt;
    );
  }
});

module.exports = ProgressBarExample;</pre></div></div><div class="section" title="Creating fluid carousels"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec09"/>Creating fluid carousels</h4></div></div></div><p>A <a class="indexterm" id="id235"/>carousel is <a class="indexterm" id="id236"/>a component that is used for cycling through elements, such as a slideshow. The functionality is quite complex, but can be achieved with very little code.</p><p>Let's take a look at it. Create a new file called <code class="literal">examples/carousels.jsx</code> and add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import {Carousel,CarouselItem} from 'react-bootstrap';

const Carousels = React.createClass({
  getInitialState() {
    return {
      index: 0,
      direction: null
    };
  },
  handleSelect(selectedIndex, selectedDirection) {
    this.setState({
      index: selectedIndex,
      direction: selectedDirection
    });
  },</pre></div><p>The <a class="indexterm" id="id237"/>direction can be either <code class="literal">prev</code> or <code class="literal">next</code>:</p><div class="informalexample"><pre class="programlisting">  render() {
    return (
      &lt;div&gt;
        &lt;h2&gt;Uncontrolled Carousel&lt;/h2&gt;
        &lt;Carousel&gt;
          &lt;CarouselItem&gt;
            &lt;img
              width = "100%"
              height = { 150 }
              alt = "600x150"
              src = "http://placehold.it/600x150"/&gt;
            &lt;div className = "carousel-caption"&gt;
              &lt;h3&gt; Slide label 1 &lt;/h3&gt;
              &lt;p&gt; Lorem ipsum dolor sit amet &lt;/p&gt;
            &lt;/div&gt;
          &lt;/CarouselItem&gt;
          &lt;CarouselItem&gt;
            &lt;img
               width = "100%"
               height = { 150 }
               alt = "600x150"
               src = "http://placehold.it/600x150"/&gt;
            &lt;div className = "carousel-caption"&gt;
              &lt;h3&gt; Slide label 2 &lt;/h3&gt;
              &lt;p&gt; Nulla vitae elit libero, a pharetra augue. &lt;/p&gt;
            &lt;/div&gt;
          &lt;/CarouselItem&gt;
        &lt;/Carousel&gt;</pre></div><p>The first <a class="indexterm" id="id238"/>carousel that we create is uncontrolled. That is, it animates itself automatically, but can be manually triggered by the user:</p><div class="informalexample"><pre class="programlisting">        &lt;h2&gt;Controlled Carousel&lt;/h2&gt;
        &lt;Carousel activeIndex = {this.state.index}
          direction = {this.state.direction}
          onSelect = {this.handleSelect}&gt;</pre></div><p>The second carousel is controlled and won't be animated until the user clicks on the left-hand side or the right-hand side arrow. When the user clicks on one of the arrows, the <code class="literal">handleSelect</code> function receives the desired direction and animates the carousel.</p><p>By default, the carousel uses the left and right arrow icons from the included <code class="literal">Glyphicon</code> set. You can specify your own arrows using the <code class="literal">nextIcon</code> and <code class="literal">prevIcon</code> attributes:</p><div class="informalexample"><pre class="programlisting">          &lt;CarouselItem&gt;
            &lt;img
              width = "100%"
              height = {150}
              alt = "600x150"
              src = "http://placehold.it/600x150"/&gt;
            &lt;div className = "carousel-caption"&gt;
              &lt;h3&gt; Slide label 1 &lt;/h3&gt;
              &lt;p&gt; Lorem ipsum dolor sit amet &lt;/p&gt;
            &lt;/div&gt;
          &lt;/CarouselItem&gt;
          &lt;CarouselItem&gt;
            &lt;img
              width = "100%"
              height = {150}
              alt = "600x150"
              src = "http://placehold.it/600x150"/&gt;
            &lt;div className = "carousel-caption"&gt;
              &lt;h3&gt; Slide label 2 &lt;/h3&gt;
              &lt;p&gt; Nulla vitae elit libero, a pharetra augue. &lt;/p&gt;
            &lt;/div&gt;
          &lt;/CarouselItem&gt;
        &lt;/Carousel
      &lt;/div&gt;
    );
  }
});

module.exports = CarouselExample;</pre></div><div class="mediaobject"><img alt="Creating fluid carousels" src="graphics/B04943_03_05.jpg"/></div></div><div class="section" title="Working with fluid images and the picture element"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec10"/>Working with fluid images and the picture element</h4></div></div></div><p>The topic<a class="indexterm" id="id239"/> of responsive images is a subject fraught with difficulty. On one hand, there's the issue of simply scaling <a class="indexterm" id="id240"/>and presenting the images in a responsive manner. On the other, you'll often want to download smaller images for small devices and hire images for desktops.</p><p>Let's look at how you can set up the responsive code first.</p><p>Create a file called <code class="literal">examples/images.jsx</code> and add the following code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import { Image, Thumbnail, Button, Grid, Row, Col }
  from 'react-bootstrap';

const Images = React.createClass ({
  render() {
    return (
      &lt;div&gt;
        &lt;h2&gt; Images &lt;/h2&gt;
        &lt;Grid fluid = { true }&gt;
          &lt;Row&gt;
            &lt;Col xs={ 12 } sm={ 4 }&gt;
              &lt;Image src="http://placehold.it/140x180" portrait /&gt;
            &lt;/Col&gt;
            &lt;Col xs={ 12 } sm={ 4 }&gt;
              &lt;Image src="http://placehold.it/140x180" circle /&gt;
            &lt;/Col&gt;
            &lt;Col xs={ 12 } sm={ 4 }&gt;
              &lt;Image src="http://placehold.it/140x180" rounded /&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;</pre></div><p>We'll start <a class="indexterm" id="id241"/>by defining <code class="literal">Grid</code> and then create a set of three columns (2 if on small mobile devices). In the columns, we <a class="indexterm" id="id242"/>add three images with three available attributes: <code class="literal">portrait</code>, <code class="literal">circle</code>, and <code class="literal">rounded</code>.</p><p>This will scale well to any viewport.</p><p>Next, we create another row, this time, using a component called <code class="literal">Thumbnail</code> rather than <code class="literal">Image</code>. This component makes it easy for us to add any kind of HTML data that goes along with your image, such as a headline, a description, and an action button:</p><div class="informalexample"><pre class="programlisting">          &lt;Row&gt;
            &lt;Col xs={ 12 } sm={ 4 }&gt;
              &lt;Thumbnail
                src = "http://placehold.it/140x180"&gt;
                &lt;h3&gt; Thumbnail label &lt;/h3&gt;
                &lt;p&gt; Description &lt;/p&gt;
                &lt;p&gt;
                  &lt;Button
                    bsSize = "large"
                    bsStyle = "danger"&gt;
                      Button
                  &lt;/Button&gt;
                &lt;/p&gt;
              &lt;/Thumbnail&gt;
            &lt;/Col&gt;

            &lt;Col xs={ 12 } sm={ 4 }&gt;
              &lt;Thumbnail
                src="http://placehold.it/140x180"&gt;
                  &lt;h3&gt; Thumbnail label &lt;/h3&gt;
                  &lt;p&gt; Description &lt;/p&gt;
                  &lt;p&gt;
                    &lt;Button
                      bsSize = "large"
                      bsStyle = "warning"&gt;
                        Button
                    &lt;/Button&gt;
                  &lt;/p&gt;
              &lt;/Thumbnail&gt;
            &lt;/Col&gt;

            &lt;Col xs={ 12 } sm={ 4 }&gt;
              &lt;Thumbnail
                src="http://placehold.it/140x180"&gt;
                  &lt;h3&gt; Thumbnail label &lt;/h3&gt;
                  &lt;p&gt; Description &lt;/p&gt;
                  &lt;p&gt;
                    &lt;Button
                      bsSize = "large"
                      bsStyle = "info"&gt;
                        Button
                     &lt;/Button&gt;
                  &lt;/p&gt;
              &lt;/Thumbnail&gt;
            &lt;/Col&gt;
          &lt;/Row&gt;
        &lt;/Grid&gt;
      &lt;/div&gt;
    );
  }
});

module.exports = Images;</pre></div><p>To show <a class="indexterm" id="id243"/>this component<a class="indexterm" id="id244"/> in your app, open <code class="literal">app.jsx</code> and add this import:</p><div class="informalexample"><pre class="programlisting">import Images from './examples/images.jsx';</pre></div><p>Then, add <code class="literal">&lt;Images /&gt;</code> to the <code class="literal">render()</code> method.</p><div class="mediaobject"><img alt="Working with fluid images and the picture element" src="graphics/B04943_03_06.jpg"/></div></div><div class="section" title="Reducing your footprint"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec11"/>Reducing your footprint</h4></div></div></div><p>When <a class="indexterm" id="id245"/>serving small devices, it's a good idea to limit the amount of data they need to download in order to view the contents of your app. After all, if your target audience is users with mobile phones, it's probably not a good idea to serve them with high-resolution images that may take several seconds to download.</p><p>There's no universal solution to this problem yet, but there are several decent ways of tackling it. Let's look at a few ways you can go about solving this problem.</p><p>One option is to look at the device your user is using to view your app. This is called <span class="strong"><strong>sniffing</strong></span> and<a class="indexterm" id="id246"/> usually means identifying metrics such as the user agent and viewport size in order to serve different images for desktops and mobile phones. The problem with this solution is that it's not very reliable. User agents can be faked, and a small viewport size doesn't automatically translate into a user surfing your app on a small device.</p><p>Another option is media queries (which we'll discuss in more depth a little bit later). This works well for static elements, such as images that you can place in your menus, toolbars, and other fixed content, but not so for dynamic elements.</p><p>One decent <a class="indexterm" id="id247"/>solution that's recently come into play is the use of a new element called <code class="literal">&lt;picture&gt;</code>. This element lets you use the concept of media queries dynamically and load different images based on the requirements that you specify.</p><p>Let's look at how this works in HTML:</p><div class="informalexample"><pre class="programlisting">&lt;picture&gt;
  &lt;source
    media="(min-width: 750px)"
    srcSet="http://placehold.it/500x300" /&gt;
  &lt;source
    media="(min-width: 375px)"
    srcSet="http://placehold.it/250x150" /&gt;
  &lt;img
    src="http://placehold.it/100x100"
    alt="The default image" /&gt;
&lt;/picture&gt;</pre></div><p>This block will download and show a large image if the browser viewport is at least 750 px; it will show a medium image if the viewport is at least 375 px, and a small image if neither conditions are met. This element scales gracefully, so if the user has a browser that doesn't support this element, it will show the image named in the <code class="literal">&lt;img&gt;</code> element.</p><p>The media query here is relatively simple. You can get pretty creative with your queries and <code class="literal">include</code> attributes, such as the orientation and pixel ratio. Here's a media query that matches smart phones in the portrait mode:</p><div class="informalexample"><pre class="programlisting">only screen and (max-device-width: 721px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 1.5), only screen and (max-device-width: 721px) and (orientation: portrait) and (min-device-pixel-ratio: 1.5), only screen and (max-width: 359px)</pre></div><p>This one matches tables with retina displays in the portrait mode:</p><div class="informalexample"><pre class="programlisting">only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2)</pre></div></div><div class="section" title="Creating a Reactified picture element"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec12"/>Creating a Reactified picture element</h4></div></div></div><p>We want<a class="indexterm" id="id248"/> to work within the confines of ReactJS, so we don't want segments such as the previous one where we break out of the mould and use plain HTML instead of a ReactJS component for our pictures. However, since it doesn't exist, we need to create one.</p><p>For this module, we <a class="indexterm" id="id249"/>need another dependency, so go ahead and execute the following command in your terminal (if you haven't done so already):</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>npm install --save classnames</strong></span>
</pre></div><p>Next, create a new file in your <code class="literal">components</code> folder and call it <code class="literal">picture.jsx</code>. Let's start using the following code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import ClassNames from 'classnames';

const Picture = React.createClass ({
  propTypes: {
    imgSet: React.PropTypes.arrayOf(
      React.PropTypes.shape({
        media: React.PropTypes.string.isRequired,
        src: React.PropTypes.string.isRequired
      }).isRequired
    ),
    defaultImage: React.PropTypes.shape ({
      src: React.PropTypes.string.isRequired,
      alt: React.PropTypes.string.isRequired
    }).isRequired,
    rounded: React.PropTypes.bool,
    circle: React.PropTypes.bool,
    thumbnail: React.PropTypes.bool,
    portrait: React.PropTypes.bool,
    width: React.PropTypes.any,
    height: React.PropTypes.any
  },
  getDefaultProps() {
    return {
      imgSet: [],
      defaultImage: {},
      rounded: false,
      circle: false,
      thumbnail: false,
      portrait: false,
      width: "auto",
      height: "auto"
    }
  },</pre></div><p>We'll start by adding a set of <code class="literal">property</code> types and their default values. Note that two of the values, <code class="literal">imgSet</code> and <code class="literal">defaultImage</code>, are defined as shapes. That's because we want to define the <code class="literal">property</code> types inside the objects and instruct ReactJS to let us know if we forget some values or pass the wrong value type.</p><p>We also require a <a class="indexterm" id="id250"/>few values that are specific to Bootstrap, and you'll probably recognize them from the preceding <code class="literal">Image</code> examples. Since we're creating our own image component, we want to be able to add attributes such as <code class="literal">rounded</code> and <code class="literal">portrait</code>, and this is how we make sure we do that:</p><div class="informalexample"><pre class="programlisting">  render() {
    let classes = ClassNames ({
      'img-responsive': this.props.responsive,
      'img-portrait': this.props.portrait,
      'img-rounded': this.props.rounded,
      'img-circle': this.props.circle,
      'img-thumbnail': this.props.thumbnail
    });</pre></div><p>Here, we use the <code class="literal">ClassNames</code> component to add the correct Bootstrap classes if we pass along the attributes we mentioned previously:</p><div class="informalexample"><pre class="programlisting">    return (
      &lt;picture&gt;
        { this.props.imgSet.map((img, idx)=&gt; {
          return &lt;source key={ idx }
          media={ img.media }
          srcSet={ img.src } /&gt;
        }) }</pre></div><p>For every element in <code class="literal">imgSet</code>, we add a <code class="literal">source</code> item:</p><div class="informalexample"><pre class="programlisting">        { &lt;img className={ classes }
            src={ this.props.defaultImage.src }
            width={ this.props.width }
            height={ this.props.height }
            alt={ this.props.defaultImage.alt }/&gt; }</pre></div><p>Then, we add the default image along with the <code class="literal">width</code> and <code class="literal">height</code> attributes. If you don't specify the width and height, it will be set to <code class="literal">auto</code>. It's usually a good idea to set the width and height because that makes it easier for the browser to lay out the page initially and prevents it from jumping in case the document is served before the images are completely downloaded:</p><div class="informalexample"><pre class="programlisting">      &lt;/picture&gt;
    )
  }
});

module.exports = Picture;</pre></div><p>Let's use the new component in <code class="literal">examples/images.jsx</code>. Open the file and add this import:</p><div class="informalexample"><pre class="programlisting">import Picture from './../components/picture';</pre></div><p>Immediately <a class="indexterm" id="id251"/>after the import line, add these variables:</p><div class="informalexample"><pre class="programlisting">let imgSet = [
  {media: "only screen and (min-width: 650px) and (orientation: landscape)", src: "http://placehold.it/500x300"},
  {media: "only screen and (min-width: 465px) and (orientation: portrait)", src: "http://placehold.it/200x500"},
  {media: "only screen and (min-width: 465px) and (orientation: landscape)", src: "http://placehold.it/250x150"}
];
let defaultImage = {src: "http://placehold.it/100x100",
  alt: "The default image"};</pre></div><p>Finally, add this code just before <code class="literal">&lt;/Grid&gt;</code> in the <code class="literal">render()</code> method:</p><div class="informalexample"><pre class="programlisting">&lt;Row&gt;
  &lt;Col xs={12}&gt;
    &lt;Picture
      imgSet={ imgSet }
      defaultImage={ defaultImage }
      circle /&gt;
  &lt;/Col&gt;
&lt;/Row&gt;</pre></div><p>When you reload the app in the browser, you'll see a rounded image in your browser, and depending on your viewport size, you'll either see an image with the dimensions 500 x 300, 200 x 500, 250 x 150, or 100 x 100. Resize the browser and play around with the settings to see how it works in practice.</p></div><div class="section" title="Creating responsive form fields"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec13"/>Creating responsive form fields</h4></div></div></div><p>Forms are <a class="indexterm" id="id252"/>tricky because you'll often need to verify the input and present some feedback in case the user does something you didn't expect. We'll look at both the issues here, creating responsive forms and presenting feedback to the user.</p><p>Create a new file, call it <code class="literal">examples/formfields.jsx</code>, and add this code:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import ClassNames from 'classnames';
import { FormGroup, FormControl, InputGroup, ButtonInput }
  from 'react-bootstrap';

const Formfields = React.createClass ({
  getInitialState() {
    return {
      name: '',
      email: '',
      password: ''
    };
  },

  validateEmail() {
    let length = this.state.email.length;
    let validEmail = this.state.email
      .match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
    if (validEmail) return 'success';
    else if (length &gt; 5) return 'warning';
    else if (length &gt; 0) return 'error';
  },</pre></div><p>When this <a class="indexterm" id="id253"/>function is executed, it gets the e-mail string from the state and then uses a rather complicated <code class="literal">regex</code> query to check whether the e-mail is written in the correct format. It's hardly foolproof, but it's good enough. If the e-mail is deemed valid, the function returns <code class="literal">'success'</code>. If not, it either returns <code class="literal">'error'</code> or <code class="literal">'warning'</code>, both providing visual clues to the user that the e-mail is not entered correctly:</p><div class="informalexample"><pre class="programlisting">  validatePassword() {
    let pw = this.state.password;
    if (pw.length &lt; 5) return null;
    let containsNumber = pw.match(/[0-9]/);
    let hasCapitalLetter = pw.toLowerCase() !== pw;
    return containsNumber &amp;&amp; hasCapitalLetter ? 'success' : 'error';
  },</pre></div><p>This simple validator function checks whether the password has a number and an uppercase letter. If it does and the length is five characters or more, it will return <code class="literal">'success'</code>. If not, it will return <code class="literal">'error'</code>:</p><div class="informalexample"><pre class="programlisting">  handlePasswordChange() {
    this.setState({password: this.refs.inputPassword.getValue()})
  },
  handleEmailChange() {
    this.setState({email: this.refs.inputEmail.getValue()})
  },</pre></div><p>These two functions fetch the input values via <code class="literal">this.refs</code> and stores them as state variables. Go back to <a class="link" href="ch01.html" title="Chapter 1. Diving Headfirst into ReactJS">Chapter 1</a>, <span class="emphasis"><em>Diving Headfirst into ReactJS</em></span>, if you want to learn more about refs:</p><div class="informalexample"><pre class="programlisting">  validateForm() {
    return (this.validateEmail() === this.validatePassword());
  },</pre></div><p>This function <a class="indexterm" id="id254"/>returns <code class="literal">true</code> if both validator functions return the <code class="literal">'success'</code> string:</p><div class="informalexample"><pre class="programlisting">  render() {
    return (
      &lt;form&gt;
        &lt;Input type="text" label="Name"
          placeholder="Enter your name"/&gt;
        &lt;Input type="email" label="Email Address"
          placeholder="Enter your email"
            onChange={this.handleEmailChange}
            ref="inputEmail"
            bsStyle={this.validateEmail()}/&gt;</pre></div><p>The second input field has several interesting attributes. It has an <code class="literal">onChange</code> attribute, which makes sure to call a function whenever new input is entered into the field. It has a <code class="literal">ref</code> attribute so that it's possible to find it later via <code class="literal">this.refs</code>. Finally it has a <code class="literal">bsStyle</code> attribute that can receive <code class="literal">null</code>, <code class="literal">'success'</code>, <code class="literal">'warning'</code>, or <code class="literal">'error'</code>. It will turn the border green on <code class="literal">'success'</code>, yellow on <code class="literal">'warning'</code>, and red on <code class="literal">'error'</code>:</p><div class="informalexample"><pre class="programlisting">        &lt;Input type="password"
          label="Password"
          onChange={ this.handlePasswordChange }
          ref="inputPassword"
          bsStyle={ this.validatePassword() }/&gt;
        &lt;ButtonInput type="submit"
          value="Submit this form"
          disabled={ !(this.validateForm()) }
        /&gt;</pre></div><p>This button is disabled as long as the validator functions don't return <code class="literal">'success'</code>. When they do, the user is allowed to proceed and push the button:</p><div class="informalexample"><pre class="programlisting">      &lt;/form&gt;
    );
  }
});

module.exports = Forms;</pre></div><p>To show this component in your app, open <code class="literal">app.jsx</code> and add this import:</p><div class="informalexample"><pre class="programlisting">import Formfields from './examples/formfields.jsx';</pre></div><p>Then, add <code class="literal">&lt;Formfields /&gt;</code> to the <code class="literal">render()</code> method.</p><p>The <code class="literal">Formfields</code> component <a class="indexterm" id="id255"/>we've created here can be extended with more input fields and more validators. Let's <a class="indexterm" id="id256"/>briefly look at the different input types that you can use:</p><p>
<span class="strong"><strong>Select</strong></span>:</p><div class="informalexample"><pre class="programlisting">&lt;Input type="select"
  label="Select"
  placeholder="select"
  ref="inputSelect"&gt;
  &lt;option value="1"&gt;First select&lt;/option&gt;
  &lt;option value="2"&gt;Second select&lt;/option&gt;
&lt;/Input&gt;
&lt;Input type="select"
  label="Multiple Select"
  multiple
  ref="inputMultipleSelect"&gt;
  &lt;option value="1"&gt;First select&lt;/option&gt;
  &lt;option value="2"&gt;Second select&lt;/option&gt;
&lt;/Input&gt;</pre></div><p>These two select fields let the user select from a list one at a time or several items at once by adding the <code class="literal">multiple</code> attribute.</p><p>
<span class="strong"><strong>File</strong></span>:</p><div class="informalexample"><pre class="programlisting">&lt;Input type="file" label="File" help="Instructions"/&gt;</pre></div><p>The text <a class="indexterm" id="id257"/>in <code class="literal">help</code> will be displayed underneath the file upload box. You can add an <code class="literal">onChange</code> handler to immediately upload files.</p><p>
<span class="strong"><strong>Checkbox</strong></span>:</p><div class="informalexample"><pre class="programlisting">&lt;Input type="checkbox"
  label="Checkbox"
  checked={ this.state.inputCheckBoxOne }
  onChange={ this.handleCheckboxChange }
  ref={ CheckBoxOne }
  readOnly={ false }
  ref="inputCheckboxOne"/&gt;</pre></div><p>Since <a class="indexterm" id="id258"/>ReactJS will render everything literally, you need to either explicitly control the checked status of your checkboxes or leave it out completely. In the <a class="indexterm" id="id259"/>preceding snippet, we control the checked status by setting the state of <code class="literal">CheckBoxOne</code> in <code class="literal">handleCheckboxChange</code>.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>Note that if you provide the <code class="literal">checked</code> attribute, you must provide an <code class="literal">onChange</code> handler; otherwise, ReactJS will throw a warning in your console. If you want to provide a checked value to a checkbox without controlling it, use the <code class="literal">defaultChecked</code> attribute instead.</p></div></div><p>
<span class="strong"><strong>Radio</strong></span>:</p><div class="informalexample"><pre class="programlisting">&lt;Input type="radio"
  label="Radio"
  checked={ this.state.checkedRadioButton=="RadioOne" }
  onChange={ this.handleRadioChange.bind(null,"RadioOne") }
  readOnly={ false }/&gt;
&lt;Input type="radio"
  label="Radio"
  checked={ this.state.checkedRadioButton=="RadioTwo" }
  onChange={ this.handleRadioChange.bind(null,"RadioTwo") }
  readOnly={ false } /&gt;</pre></div><p>Within a<a class="indexterm" id="id260"/> form, only one radio button can be checked. As with checkboxes, you can control the checked status by adding a <code class="literal">checked</code> attribute and an <code class="literal">onChange</code> handler or use <code class="literal">defaultChecked</code> if you want to precheck a radio button.</p><p>In the preceding snippet, we used <code class="literal">bind</code> instead of <code class="literal">refs</code> to pass the value along to the function. In JavaScript, <code class="literal">bind()</code> produces a new that will have <code class="literal">this</code> set to the first parameter passed to <code class="literal">bind()</code>. We're not interested in this; however, because that's just the synthetic mouse click event, we'll set <code class="literal">this</code> to <code class="literal">null</code> and fix another argument to the bind using <code class="literal">partial function application</code>. Simply put, we'll provide the radio button name to <code class="literal">handleRadioChange</code>.</p><p>The <code class="literal">handleRadioChange()</code> function looks like this:</p><div class="informalexample"><pre class="programlisting">handleRadioChange(val) {
  this.setState({ checkedRadioButton: val });
}</pre></div><p>The reason we're doing it this way is that it's difficult to know which radio button reference you need in order to fetch unless you create a unique <code class="literal">onChange</code> handler for each radio button. This is not uncommon though, and either way is fine.</p><p>
<span class="strong"><strong>Textarea</strong></span>:</p><div class="informalexample"><pre class="programlisting">    &lt;Input type="textarea"
      label="Text Area"
      placeholder="textarea" /&gt;</pre></div><p>Text areas <a class="indexterm" id="id261"/>are input fields where you can enter longer paragraphs of text. You can add an <code class="literal">onChange</code> handler if you need to apply functions when text is entered.</p><div class="mediaobject"><img alt="Creating responsive form fields" src="graphics/B04943_03_07.jpg"/></div></div><div class="section" title="Using Glyphicons and font-awesome icons"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec14"/>Using Glyphicons and font-awesome icons</h4></div></div></div><p>
<span class="strong"><strong>Glyphicons</strong></span> is a <a class="indexterm" id="id262"/>set of about 200 glyphs provided with Bootstrap. We <a class="indexterm" id="id263"/>added them to our <code class="literal">index.html</code> file in the beginning of the chapter, when we fetched Bootstrap from a CDN, so they're already included and ready to be used in your app.</p><p>You can <a class="indexterm" id="id264"/>use Glyphicons anywhere you would use a text string because they're provided as a font set rather than a set of images.</p><p>You add them to your code by importing them with this line of code:</p><div class="informalexample"><pre class="programlisting">import { Glyphicon } from "react-bootstrap";</pre></div><p>You can add a glyph in your code by writing <code class="literal">&lt;Glyphicon glyph="cloud"/&gt;</code> to add a cloud or <code class="literal">&lt;Glyphicon glyph="envelope"/&gt;</code> to add an envelope.</p><p>You can easily add glyphs to input elements using one of the sets of special attributes: <code class="literal">addonBefore</code>, <code class="literal">addonAfter</code>, <code class="literal">buttonBefore</code>, or <code class="literal">buttonAfter</code>.</p><p>For instance, if you want to add a dollar or a euro sign before an input field that takes money <a class="indexterm" id="id265"/>as an input parameter, use a code block like this:</p><div class="informalexample"><pre class="programlisting">const euro = &lt;Glyphicon glyph = "euro" /&gt;;
const usd = &lt;Glyphicon glyph = "usd" /&gt;;
&lt;Input type = "text"
  addonBefore={ usd }
  addonAfter = ".00" /&gt;
&lt;Input type = "text"
  addonBefore={ euro }
  addonAfter = ".00" /&gt;</pre></div><p>The complete <a class="indexterm" id="id266"/>set of glyphs and how they look is available in the code distributed with this book. It's in the <code class="literal">examples</code> folder and the file is called <code class="literal">glyphicons.jsx</code>. If you import this file and add it to <code class="literal">app.jsx</code>, the entire set will be displayed in your browser.</p><p>Bootstrap also provides another set of icons in <a class="indexterm" id="id267"/>
<span class="strong"><strong>font awesome</strong></span>. We included this library in the beginning of the chapter in addition to Glyphicons. Before you build your app, it's useful to decide between either font-awesome or Glyphicons icons so that you have one less library for your users to download.</p><p>Font-awesome library doesn't have a component equivalent to Glyphicons, so let's make one. Create a file called <code class="literal">fontawesome</code> in your <code class="literal">components</code> folder and add this code:</p><div class="informalexample"><pre class="programlisting">import React from 'react';

const FontAwesome = React.createClass ({
  propTypes: {
    icon: React.PropTypes.string
  },
  getDefaultProps() {
    return {
      icon: ""
    }
  },
  render() {
    if(this.props.icon){
      return (&lt;i className={ "fa fa-" + this.props.icon } /&gt;);
    } else {
      return null;
    }
  }
});

module.exports = FontAwesome;</pre></div><p>The <a class="indexterm" id="id268"/>preceding code should be very familiar. What it does is it takes a single property called <code class="literal">icon</code> and returns a font-awesome icon element. It doesn't verify that the icon exists, so you need to familiarize yourself with more than 500 icons in the set in advance.</p><p>To use this <a class="indexterm" id="id269"/>component, import it by adding <code class="literal">import FontAwesome from './components/fontawesome.jsx';</code> in <code class="literal">app.jsx</code>, and then in your render code, add <code class="literal">&lt;FontAwesome icon="facebook"/&gt;</code> to display a Facebook icon. You can use this component in the same manner as you would use the Glyphicon component, including the preceding input element example.</p></div><div class="section" title="Creating a responsive landing page"><div class="titlepage"><div><div><h4 class="title"><a id="ch03lvl4sec15"/>Creating a responsive landing page</h4></div></div></div><p>When <a class="indexterm" id="id270"/>developing responsive web apps, there comes a point when you need to differentiate between small and large devices in your code. Let's put together a landing page and demonstrate how you can use the size of the viewport in your code to present your app content.</p><p>This app will be entirely contained in <code class="literal">app.jsx</code>. Remove the existing code in <code class="literal">app.jsx</code> (or rename it to <code class="literal">example.jsx</code> if you want to keep a copy of what you've done), and remove all code in <code class="literal">app.css</code> as well. Add the following to <code class="literal">app.jsx</code>:</p><div class="informalexample"><pre class="programlisting">'use strict';
import React from 'react';
import ReactDom from 'react-dom';
import { Grid, Row, Col, Button, Carousel, CarouselItem,
  FormGroup, FormControl, InputGroup } from "react-bootstrap";
import FontAwesome from './components/fontawesome.jsx';</pre></div><p>We will be relying on the <code class="literal">FontAwesome</code> component that we created earlier:</p><div class="informalexample"><pre class="programlisting">const App = React.createClass ({
  getInitialState() {
    return {
      vHeight: 320,
      vWidth: 480
    }
  },</pre></div><p>We'll store the viewport height and width as state variables:</p><div class="informalexample"><pre class="programlisting">  componentDidMount() {
    window.addEventListener('resize', (e) =&gt; {
      this.calculateViewport();
    }, true);
    this.calculateViewport();
  },</pre></div><p>The state <a class="indexterm" id="id271"/>variables will initially be set to 320 x 480, but as soon as the app mounts, we'll calculate the real values. First, we'll add an event listener that will execute a function anytime the viewport changes. Second, we'll run the function for the first time:</p><div class="informalexample"><pre class="programlisting">  calculateViewport() {
    let vHeight = Math.max(document.documentElement.clientHeight,
      window.innerHeight || 0);
    let vWidth = Math.max(document.documentElement.clientWidth,
      window.innerWidth || 0);
    this.setState({
      vHeight: vHeight,
      vWidth: vWidth
    })
  },</pre></div><p>The viewport calculation will use the most appropriate value and store it as the component's state:</p><div class="informalexample"><pre class="programlisting">  renderSmallForm() {
    return (
      &lt;form style={{ paddingTop: 15 }}&gt;
      &lt;div
        style={{
          width: (this.state.vWidth/2),
          textAlign:'center',
          margin:'0 auto'
        }}&gt;
        &lt;FormGroup&gt;
          &lt;FormControl
            type="text"
            bsSize="large"
            placeholder="Enter your email address" /&gt;
          &lt;br/&gt;
          &lt;Button 
            bsSize="large" 
            bsStyle="primary" 
            onClick={ this.handleClick }&gt;
              Sign up
          &lt;/Button&gt;
        &lt;/FormGroup&gt;
      &lt;/div&gt;
    &lt;/form&gt;);
  },</pre></div><p>We'll <a class="indexterm" id="id272"/>create two <code class="literal">render</code> functions for the form on the landing page. Note that we set all CSS inline inside double curly braces, and that the width will automatically be half of the viewport width:</p><div class="informalexample"><pre class="programlisting">  renderLargeForm() {
    return (
      &lt;form style={{ paddingTop:30 }}&gt;
      &lt;div
        style = {{ width:(this.state.vWidth/2),
        textAlign:'center',
        margin:'0 auto' }}&gt;
        &lt;FormGroup&gt;
          &lt;FormControl
            type="text"
            bsSize="large"
            placeholder = "Enter your email address" /&gt;&lt;InputGroup.Button&gt;
                &lt;Button 
                  bsSize = "large" 
                  bsStyle = "primary" 
                  onClick = { this.handleClick }&gt;
                    Sign up
                &lt;/Button&gt;
              &lt;/InputGroup.Button&gt;
          &lt;/FormGroup&gt;
      &lt;/div&gt;
    &lt;/form&gt;);
  },</pre></div><p>The main difference between the small and the large form is that the large form uses input groups to show the input field and the <span class="strong"><strong>Submit</strong></span> button on the same horizontal line. The small form puts the button under the input field.</p><p>We added an <code class="literal">onClick</code> handler to our form, so let's proceed by adding this function:</p><div class="informalexample"><pre class="programlisting">handleClick(event){
  // process the input any way you like
  console.log(event.target.form[0].value);
},
</pre></div><p>We won't actually process the click event beyond logging the value, but the function shows you how to grab the value from the form based on the event that occurs when the user clicks on the <span class="strong"><strong>Submit</strong></span> button.</p><p>Next, we'll the functions for the social icons.</p><div class="informalexample"><pre class="programlisting">
renderSocialIcons() {
   
    return (&lt;Row&gt;
      &lt;Col xs={12} style={{fontSize:32,paddingTop:35,position:'fixed',
      bottom:10,textAlign:'center'}}&gt;
        &lt;a href="#" style={{color:'#eee'}}&gt;&lt;FontAwesome icon="google-plus"/&gt;&lt;/a&gt;
        &lt;a href="#" style={{paddingLeft:15,color:'#eee'}}&gt;&lt;FontAwesome icon="facebook"/&gt;&lt;/a&gt;
        &lt;a href="#" style={{paddingLeft:15,color:'#eee'}}&gt;&lt;FontAwesome icon="twitter"/&gt;&lt;/a&gt;
        &lt;a href="#" style={{paddingLeft:15,color:'#eee'}}&gt;&lt;FontAwesome icon="github"/&gt;&lt;/a&gt;
        &lt;a href="#" style={{paddingLeft:15,color:'#eee'}}&gt;&lt;FontAwesome icon="pinterest"/&gt;&lt;/a&gt;
      &lt;/Col&gt;
    &lt;/Row&gt;)
  },</pre></div><p>The <a class="indexterm" id="id273"/>social icons use the images from the <code class="literal">font-awesome</code> library. The font size is set to 32 pixels in order to show large, crisp buttons that are easy to hit with your fingers on smart phones:</p><div class="informalexample"><pre class="programlisting">  render() {
    let vWidth = this.state.vWidth;
    let vHeight = this.state.vHeight;
    let formCode = vWidth &lt;= 480 ? 
    this.renderSmallForm() : this.renderLargeForm();
    let socialIcons = vHeight &gt;= 320 ?
    this.renderSocialIcons() : null;</pre></div><p>This simple snippet toggles the rendering of small and large forms and hides the social icons whenever the viewport height is less than 320 pixels:</p><div class="informalexample"><pre class="programlisting">  return (&lt;div&gt;
    &lt;Grid fluid style = {{
    margin: '0 auto',
    width: '100%',
    minHeight: '100%',
    background: '#114',
    color: '#eee',
    overflow: 'hidden'
    }}&gt;
    &lt;Row style = {{ height: vHeight }}&gt;
      &lt;Col
        sm = {12}
        style = {{ marginTop: (vHeight/20) }}&gt;</pre></div><p>The <a class="indexterm" id="id274"/>margin top will be set to a dynamic pixel value that equals 1/20 of the viewport height:</p><div class="informalexample"><pre class="programlisting">        &lt;h1 style = {{ textAlign: 'center' }}&gt;
          Welcome!
        &lt;/h1&gt;
        &lt;div style = {{maxHeight: 250,
          maxWidth: 500,
          margin: '0 auto' }}&gt;
          &lt;Carousel&gt;
            &lt;CarouselItem
              style = {{ maxHeight: 250,
              maxWidth: 500 }}&gt;
              &lt;img
                width = "100%"
                alt = "500x200" src="http://placehold.it/500x220/f0f0f0/008800?text=It+will+amaze+you"/&gt;
            &lt;/CarouselItem&gt;
            &lt;CarouselItem
              style = {{ maxHeight: 250,
              maxWidth: 500 }}&gt;
              &lt;img
                width="100%"
                alt="500x200"    src="http://placehold.it/500x220/000000/f0f0f0?text=It+will+excite+you"/&gt;
            &lt;/CarouselItem&gt;
            &lt;CarouselItem
              style = {{ maxHeight: 250,
              maxWidth: 500 }}&gt;
              &lt;img
                width = "100%"
                alt = "500x200" src="http://placehold.it/500x220/880000/eeeeee?text=Sign+up+now!"/&gt;
            &lt;/CarouselItem&gt;
          &lt;/Carousel&gt;
        &lt;/div&gt;
      &lt;/Col&gt;
      &lt;Col xs = { 12 }&gt;
        { formCode }
      &lt;/Col&gt;
      &lt;Col xs = { 12 } &gt;
        &lt;p style = {{ textAlign:'center',
          paddingTop: 15 }}&gt;
          Your email will not be shared and will only be
          used once to notify you when the app 
          launches.
        &lt;/p&gt;
      &lt;/Col&gt;
    &lt;/Row&gt;
    { socialIcons }
    </pre></div><p>This is <a class="indexterm" id="id275"/>how we add the <code class="literal">socialIcons</code> variable. It will either be a ReactJS element or <code class="literal">null</code>:</p><div class="informalexample"><pre class="programlisting"> 
&lt;/Grid&gt;
  &lt;/div&gt;)
  }

});

ReactDom.render ((
  &lt;App /&gt;),
  document.getElementById( 'container' )
);</pre></div><p>We reused some of the components from this chapter in this simple app and added a few new techniques. You could get the same result using media queries and CSS, but you would write more code and split the logic between JavaScript and CSS. It may look strange to write style code inline, but one of the main benefits of this approach is that it enables you to write very advanced styling rules in the same programming language as the rest of your app.</p></div></div></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec19"/>Summary</h1></div></div></div><p>In this chapter, we've covered the aspects around creating a responsive web app that will work on any device. We looked at some of the different frameworks that are available for ReactJS, and we took a deep dive into using react-bootstrap for our purposes. In most cases, we could get by with using the components from React-Bootstrap, but in certain cases, such as pictures and media, we also made our own components.</p><p>Finally, we combined a few of the components we made earlier along with some new techniques, such as programmatic inline styling and event listeners to tackle viewport resizing, and made a simple, responsive landing page.</p><p>In the next chapter, we'll be working on a real-time search app. We'll be covering the concept of data stores and efficient querying and provide a smooth, responsive experience for users. Turn the page to get working.</p></div></body></html>