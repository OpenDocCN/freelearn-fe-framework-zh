<html><head></head><body>
		<div id="_idContainer058">
			<h1 id="_idParaDest-114"><em class="italic"><a id="_idTextAnchor120"/>Chapter 10</em>: Creating a Virtual Reality Application with React and Three.js</h1>
			<p>You're almost there—only one more chapter to go and then you can call yourself a React expert that has experienced React on every platform. Throughout this book, you've built nine applications with React and React Native. In this final chapter, we won't be creating a web or mobile application, but a <strong class="bold">Virtual Reality</strong> (<strong class="bold">VR</strong>) application with React and <strong class="bold">three.js</strong>. With three.js, you can create dynamic 2D, 3D, and VR experiences using JavaScript, and with the use of another library apply it within React. Although VR is still an emerging technology, the best use cases for VR are, for example, retail stores that want their customers to experience their stores or games online.</p>
			<p>In this chapter, you'll explore the very basics of what's possible with React together with three.js and how it relates to React. The application you will build will be able to render 360-degree panorama images and use state management to render between screens. Animated 3D objects will also be displayed by combining React and three.js with other libraries.</p>
			<p>The following topics will be covered in this chapter:</p>
			<ul>
				<li>Getting started with three.js</li>
				<li>Creating a panorama viewer with React and three.js</li>
				<li>Animating 3D objects </li>
			</ul>
			<h1 id="_idParaDest-115"><a id="_idTextAnchor121"/>Project overview</h1>
			<p>In this <a id="_idIndexMarker695"/>chapter, you will build a VR application with React and three.js that uses principles from both JavaScript and React. Both 2D panorama images and 3D objects will be added to this application, and the project can be run in the browser using Create React App.</p>
			<p>The build time is 1.5 hours.</p>
			<h1 id="_idParaDest-116"><a id="_idTextAnchor122"/>Getting started</h1>
			<p>The application<a id="_idIndexMarker696"/> for this chapter will be built from scratch and uses assets that can be found on GitHub at <a href="https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter10-assets">https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter10-assets</a>. These assets should be downloaded to your computer so that you can use them later on in this chapter. The complete code for this chapter can be found on GitHub at <a href="https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter10">https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter10</a>.</p>
			<h1 id="_idParaDest-117"><a id="_idTextAnchor123"/>Creating a VR application with React and Three.js</h1>
			<p>You can<a id="_idIndexMarker697"/> write <a id="_idIndexMarker698"/>2D <a id="_idIndexMarker699"/>and 3D VR applications in<a id="_idIndexMarker700"/> React by combining it with other libraries. Previously, you could write VR applications in React directly with React 360. But due to the emergence of other popular libraries, such as three.js, which is based on JavaScript, its development was discontinued. Three.js allows you to create applications with both 2D and 3D UI components without having to deal with complex setups for mobile or VR devices, which is similar to how React works. </p>
			<p>To render both 2D and 3D in browsers, three.js<a id="_idIndexMarker701"/> uses <strong class="bold">WebGL</strong>, which is a JavaScript API that runs directly in the browser. It's supported by all recent versions of popular browsers, such as Chrome, Firefox, and Microsoft Edge. </p>
			<h2 id="_idParaDest-118"><a id="_idTextAnchor124"/>Getting started with Three.js</h2>
			<p>Three.js is based on JavaScript and can be used together with React using a different library called <strong class="source-inline">@react-three/fiber</strong>, which is a React renderer for three.js that creates a link between the two. </p>
			<p>As we already did for our previous React applications that render in the browser, we can use Create React App as the starting point for this application. To get started with building 2D and 3D applications in React with three.js, we first need to create a new project with Create React App:</p>
			<p class="source-code">npx create-react-app chapter-10</p>
			<p>Secondly, we need to install both three.js and <strong class="source-inline">@react-three/fiber</strong> from npm:</p>
			<p class="source-code">npm install three @react-three/fiber</p>
			<p>We don't need any extra dependencies or configuration as Create React App already has the right configuration out of the box. If we move into the project's root directory, which is named <a id="_idIndexMarker702"/>after our project name, we will see that it has the<a id="_idIndexMarker703"/> following structure:</p>
			<p class="source-code">chapter-10</p>
			<p class="source-code">  |- /node_modules</p>
			<p class="source-code">  |- package.json</p>
			<p class="source-code">  |- /public</p>
			<p class="source-code">     |- index.html</p>
			<p class="source-code">  |- /src</p>
			<p class="source-code">    |- App.css</p>
			<p class="source-code">    |- App.js</p>
			<p class="source-code">    |- index.css</p>
			<p class="source-code">    |- index.js</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Not all files that were created by Create React App are mentioned above; instead, only the ones used in this chapter are listed.</p>
			<h2 id="_idParaDest-119"><a id="_idTextAnchor125"/>Creating 3D objects with Three.js</h2>
			<p>The base<a id="_idIndexMarker704"/> for<a id="_idIndexMarker705"/> the <a id="_idIndexMarker706"/>application has now been created with Create React App, and we've also installed three.js together with <strong class="source-inline">@react-three/fiber</strong>. This last library lets us render three.js elements as components inside React and makes multiple Hooks available to make changes. This way, we can use three.js in the same declarative and predictive way that we're already used to from learning React. There is no additional overhead incurred by using this library instead of three.js directly, as components are rendered outside the render loop of React.</p>
			<p>To create 3D objects<a id="_idIndexMarker707"/> in React with three.js, we need to<a id="_idIndexMarker708"/> take the<a id="_idIndexMarker709"/> following steps:</p>
			<ol>
				<li>Replace the contents of <strong class="source-inline">src/App.js</strong> with the following, so that it will return a <strong class="source-inline">Canvas</strong> component from <strong class="source-inline">@react-three/fiber</strong>:<p class="source-code">import { Canvas } from '@react-three/fiber';</p><p class="source-code">import './App.css';</p><p class="source-code">export default function App() {</p><p class="source-code">  return (</p><p class="source-code">    &lt;div id="Canvas-container"&gt;</p><p class="source-code">      &lt;Canvas&gt;&lt;Canvas /&gt;</p><p class="source-code">    &lt;/div&gt;</p><p class="source-code">  )</p><p class="source-code">}</p></li>
			</ol>
			<p>This code adds a <strong class="source-inline">Canvas</strong> component, which is important when we want to render three.js elements in React for multiple reasons. With the <strong class="source-inline">Canvas</strong> component, both a <strong class="bold">scene</strong> and a <strong class="bold">camera</strong> are created, the most important building blocks for this application. The scene handles whatever is rendered by three.js, while the camera is the perspective from which we're looking at the scene. This <strong class="source-inline">Canvas</strong> component will render our three.js components and elements outside of the DOM and automatically handles resizing.</p>
			<ol>
				<li value="2">The <strong class="source-inline">Canvas</strong> component will be resized to fit the <strong class="source-inline">div</strong> element it's rendered in, so you can control its size by changing the width and height of <strong class="source-inline">#canvas-container</strong> in CSS. This can be done by replacing the contents of <strong class="source-inline">src/App.css</strong> with the following:<p class="source-code">#Canvas-container {</p><p class="source-code">  height: 100vh;</p><p class="source-code">}</p></li>
				<li>To render something on the <strong class="source-inline">Canvas</strong>, we need to add a mesh element to this file, for which we don't need to import anything. The same as we can add <strong class="source-inline">div</strong> or any other elements in React, three.js elements will be treated as JSX elements<a id="_idIndexMarker710"/> automatically <a id="_idIndexMarker711"/>when placed <a id="_idIndexMarker712"/>inside a <strong class="source-inline">Canvas</strong> from <strong class="source-inline">@react-three/fiber</strong>:<p class="source-code">  import { Canvas } from '@react-three/fiber'</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id="Canvas-container"&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code"><strong class="bold">+         &lt;mesh&gt;</strong></p><p class="source-code"><strong class="bold">+           &lt;boxGeometry /&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;/mesh&gt;</strong></p><p class="source-code">      &lt;/Canvas&gt;</p><p class="source-code">    &lt;/div&gt;</p><p class="source-code">  )</p><p class="source-code">}</p><p class="callout-heading">Note</p><p class="callout">When we're adding a <strong class="source-inline">mesh</strong> element inside a <strong class="source-inline">Canvas</strong> component from <strong class="source-inline">@react-three/fiber</strong>, under the hood, it will create a <strong class="source-inline">THREE.Mesh</strong> object.</p></li>
				<li>This will render a small gray square using the <strong class="source-inline">boxGeometry</strong> element from three.js but has no additional features yet. Also, the square we have now is quite small. By adding the <strong class="source-inline">scale</strong> prop to the <strong class="source-inline">mesh</strong> element, we can increase the size<a id="_idIndexMarker713"/> of<a id="_idIndexMarker714"/> this <a id="_idIndexMarker715"/>element:<p class="source-code">  // ...</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id="Canvas-container"&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code"><strong class="bold">-         &lt;mesh&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;mesh scale={2}&gt;</strong></p><p class="source-code">            &lt;boxGeometry /&gt;</p><p class="source-code">            // ...</p></li>
				<li>To give the element some color, we first need to add a <strong class="source-inline">meshStandardMaterial</strong> with a <strong class="source-inline">color</strong> prop within our mesh element, and add another element called <strong class="source-inline">ambientLight</strong>. This element will add light to the component to make the color of the <strong class="source-inline">boxGeometry</strong> visible. On this <strong class="source-inline">ambientLight</strong> element, we can configure how bright the light must shine using the <strong class="source-inline">intensity</strong> prop:<p class="source-code">  // ...</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id='canvas-container'&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code">          &lt;mesh scale={2}&gt;</p><p class="source-code">            &lt;boxGeometry /&gt;</p><p class="source-code"><strong class="bold">+           &lt;meshStandardMaterial color='blue' /&gt;</strong></p><p class="source-code"><strong class="bold">+           &lt;ambientLight intensity={0.5} /&gt;</strong></p><p class="source-code">          &lt;/mesh&gt;</p><p class="source-code">        &lt;/Canvas&gt;</p><p class="source-code">      &lt;/div&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
			</ol>
			<p>In our application, we can now see a blue square being rendered instead of a gray one. You can see the effect of the <strong class="source-inline">ambientLight</strong> element by changing the intensity to see the square getting lighter or darker depending on the value of the intensity.</p>
			<p>Having a 2D square is cool, but with three.js, we can also build 3D components. For this, we need to <a id="_idIndexMarker716"/>make<a id="_idIndexMarker717"/> some <a id="_idIndexMarker718"/>changes to the component to interact with three.js directly outside of React to prevent performance issues. To make the element 3D, make the following changes:</p>
			<ol>
				<li value="1">Let's create a separate component for the <strong class="source-inline">boxGeometry</strong> element, so we can separate concerns and make it reusable. We can do this in a new file called <strong class="source-inline">Box.js</strong> under a new directory called <strong class="source-inline">components</strong> in our <strong class="source-inline">src</strong> directory:<p class="source-code">export default function Box() {</p><p class="source-code">  return (</p><p class="source-code">    &lt;mesh scale={2}&gt;</p><p class="source-code">      &lt;boxGeometry /&gt;</p><p class="source-code">      &lt;meshStandardMaterial color='blue' /&gt;</p><p class="source-code">    &lt;/mesh&gt;</p><p class="source-code">  );</p><p class="source-code">}</p></li>
				<li>We need to add a <strong class="source-inline">ref</strong> to the <strong class="source-inline">mesh</strong> so we can get access to it outside the scope of React, and alter it using three.js:<p class="source-code"><strong class="bold">+ import { useRef } from 'react';</strong></p><p class="source-code">  export default function Box() {</p><p class="source-code"><strong class="bold">+   const mesh = useRef();</strong></p><p class="source-code">  </p><p class="source-code">    return (</p><p class="source-code">      &lt;mesh</p><p class="source-code">        scale={2}</p><p class="source-code"><strong class="bold">+       ref={mesh}</strong></p><p class="source-code">      &gt;</p><p class="source-code">        &lt;boxGeometry /&gt;</p><p class="source-code">        &lt;meshStandardMaterial color='blue' /&gt;</p><p class="source-code">      &lt;/mesh&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
				<li>Altering the <strong class="source-inline">mesh</strong> element <a id="_idIndexMarker719"/>with three.js can be<a id="_idIndexMarker720"/> done by <a id="_idIndexMarker721"/>changing the values of the <strong class="source-inline">mesh</strong> that we can now access using the <strong class="source-inline">ref</strong>. These alterations must be done within a <strong class="source-inline">useFrame</strong> Hook from <strong class="source-inline">@react-three/fiber</strong>, which is triggered on every frame render by three.js. When a new frame is rendered, we can slightly alter the rotation of the mesh making it rotate:<p class="source-code">  import { useRef } from 'react';</p><p class="source-code"><strong class="bold">+ import { useFrame } from '@react-three/fiber';</strong></p><p class="source-code">  export default function Box() {</p><p class="source-code">    const mesh = useRef();</p><p class="source-code"><strong class="bold">+   useFrame(() =&gt; {</strong></p><p class="source-code"><strong class="bold">+     mesh.current.rotation.x =</strong></p><p class="source-code"><strong class="bold">      mesh.current.rotation.y += 0.01;</strong></p><p class="source-code"><strong class="bold">+   });</strong></p><p class="source-code">    return (</p><p class="source-code">      // ...</p><p class="callout-heading">Note</p><p class="callout">If you don't want to rotate the <strong class="source-inline">Box</strong> component continuously on every frame render, you can also use a <strong class="source-inline">useEffect</strong> Hook to rotate the mesh just once on the initial render or on a set interval.</p></li>
				<li>In the <strong class="source-inline">src/App.js</strong> file, we need to replace the <strong class="source-inline">boxGeometry</strong> element with this <a id="_idIndexMarker722"/>new <a id="_idIndexMarker723"/>component<a id="_idIndexMarker724"/> to make it visible in the application:<p class="source-code">  import { Canvas } from '@react-three/fiber';</p><p class="source-code"><strong class="bold">+ import Box from './components/Box';</strong></p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id='canvas-container'&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code"><strong class="bold">-         &lt;mesh&gt;</strong></p><p class="source-code"><strong class="bold">-           &lt;boxGeometry /&gt;</strong></p><p class="source-code"><strong class="bold">-           &lt;meshStandardMaterial color='blue' /&gt; */}</strong></p><p class="source-code"><strong class="bold">+           &lt;Box /&gt;</strong></p><p class="source-code">            &lt;ambientLight intensity={0.5} /&gt;</p><p class="source-code"><strong class="bold">-          &lt;/mesh&gt;</strong></p><p class="source-code">        &lt;/Canvas&gt;</p><p class="source-code">      &lt;/div&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
				<li>Finally, we<a id="_idIndexMarker725"/> need <a id="_idIndexMarker726"/>to <a id="_idIndexMarker727"/>add two more light elements to highlight that we're rendering a 3D element, which are the <strong class="source-inline">spotLight</strong> and <strong class="source-inline">pointLight</strong> elements:<p class="source-code">  // ...</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id='canvas-container'&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code">          &lt;Box /&gt;</p><p class="source-code">          &lt;ambientLight intensity={0.5} /&gt;</p><p class="source-code"><strong class="bold">+         &lt;spotLight position={[10, 10, 10]}</strong></p><p class="source-code"><strong class="bold">            angle={0.15} penumbra={1} /&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;pointLight position={[-10, -10, -10]} /&gt;</strong></p><p class="source-code">        &lt;/Canvas&gt;</p><p class="source-code">      &lt;/div&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="callout-heading">Note</p><p class="callout">The value for <strong class="source-inline">position</strong> is an array with three numbers. These numbers represent a <strong class="bold">Vector3</strong> position. This is a format to describe the position of an object in 3D space where the numbers are the <em class="italic">x</em>, <em class="italic">y</em>, and <em class="italic">z</em> values.</p></li>
			</ol>
			<p>By opening<a id="_idIndexMarker728"/> the<a id="_idIndexMarker729"/> application<a id="_idIndexMarker730"/> in the browser, you can now see a blue square box that is being rotated in 3D:</p>
			<p class="figure-caption">Figure 10.1 – Rendering a 3D element with Three.js</p>
			<p>Something else that we can do with three.js is control the <strong class="source-inline">Canvas</strong> using our mouse. The <strong class="source-inline">Box</strong> component<a id="_idIndexMarker731"/> is now rotating on every<a id="_idIndexMarker732"/> frame <a id="_idIndexMarker733"/>render, but we could also control the rotation of the entire <strong class="source-inline">Canvas</strong> using three.js. The <strong class="source-inline">Canvas</strong> component already sets up a camera that we can control using the <strong class="source-inline">OrbitControls</strong> component from three.js. To do this for our application, we need to do the following:</p>
			<ol>
				<li value="1">Disable the rotation of the <strong class="source-inline">Box</strong> component by adding a prop called <strong class="source-inline">rotate</strong>, which can be either <strong class="source-inline">true</strong> or <strong class="source-inline">false</strong>. If no value is provided, the default value will be <strong class="source-inline">false</strong>, meaning the <strong class="source-inline">Box</strong> component isn't rotating:<p class="source-code">  // ...</p><p class="source-code"><strong class="bold">- export default function Box() {</strong></p><p class="source-code"><strong class="bold">+ export default function Box({ rotate  = false }) {</strong></p><p class="source-code">    const mesh = useRef();</p><p class="source-code">    useFrame(() =&gt; {</p><p class="source-code"><strong class="bold">+     if (rotate) {</strong></p><p class="source-code">        mesh.current.rotation.x = </p><p class="source-code">        mesh.current.rotation.y += 0.01;</p><p class="source-code"><strong class="bold">+     }</strong></p><p class="source-code">    });</p><p class="source-code">    return (</p><p class="source-code">      // ...</p></li>
				<li>From the <strong class="source-inline">src/App.js</strong> file, we don't need to set this prop as we don't want the <strong class="source-inline">Box</strong> component<a id="_idIndexMarker734"/> to rotate. Instead, we will <a id="_idIndexMarker735"/>create a new component in<a id="_idIndexMarker736"/> the <strong class="source-inline">src/components/Controls.js</strong> file to control the rotation of the entire <strong class="source-inline">Canvas</strong> and thereby the camera of the application. To do this, we need to add the following content to this file:<p class="source-code">import { useEffect } from 'react';</p><p class="source-code">import { useThree } from '@react-three/fiber';</p><p class="source-code">import { OrbitControls } from </p><p class="source-code">  'three/examples/jsm/controls/OrbitControls';</p><p class="source-code">export default function Controls() {</p><p class="source-code">  const { camera, gl } = useThree();</p><p class="source-code">  useEffect(() =&gt; {</p><p class="source-code">    const controls = new OrbitControls(camera,</p><p class="source-code">      gl.domElement);</p><p class="source-code">    return () =&gt; {</p><p class="source-code">      controls.dispose();</p><p class="source-code">    };</p><p class="source-code">  }, [camera, gl]);</p><p class="source-code">  return null;</p><p class="source-code">};</p></li>
			</ol>
			<p>This will<a id="_idIndexMarker737"/> create<a id="_idIndexMarker738"/> the <strong class="source-inline">Controls</strong> component and use the <strong class="source-inline">OrbitControls</strong> component<a id="_idIndexMarker739"/> from three.js as its base. From the <strong class="source-inline">useThree</strong> Hook, it will take the <strong class="source-inline">camera</strong> and <strong class="source-inline">gl</strong> from three.js, where the first one is the view perspective and the second one is the render for WebGL. In the <strong class="source-inline">useEffect</strong> Hook, the <strong class="source-inline">OrbitControls</strong> component will be created and also cleaned up with the <strong class="source-inline">dispose</strong> method when it's no longer needed.</p>
			<ol>
				<li value="3">We need to import this new <strong class="source-inline">Controls</strong> component in the <strong class="source-inline">src/App.js</strong> file and place it inside the <strong class="source-inline">Canvas</strong> component:<p class="source-code">  import { Canvas } from '@react-three/fiber';</p><p class="source-code">  import Box from './components/Box';</p><p class="source-code"><strong class="bold">+ import Controls from './components/Controls';</strong></p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id='canvas-container'&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code"><strong class="bold">+         &lt;Controls /&gt;</strong></p><p class="source-code">          &lt;Box /&gt;</p><p class="source-code">          // ...</p></li>
				<li>With the previous change, we could already rotate the <strong class="source-inline">Box</strong> component while clicking<a id="_idIndexMarker740"/> and <a id="_idIndexMarker741"/>dragging <a id="_idIndexMarker742"/>around this component from the browser. To make this experience smoother, we can add a minimum and maximum control distance to this component in <strong class="source-inline">src/components/Box.js</strong>:<p class="source-code">  // ...</p><p class="source-code">  export default function Controls() {</p><p class="source-code">    // ...</p><p class="source-code">    useEffect(() =&gt; {</p><p class="source-code">      const controls = new OrbitControls(camera,</p><p class="source-code">        gl.domElement);</p><p class="source-code"><strong class="bold">+     controls.minDistance = 2;</strong></p><p class="source-code"><strong class="bold">+     controls.maxDistance = 20;</strong></p><p class="source-code">      </p><p class="source-code">      // ...</p><p class="source-code">  }, [camera, gl]);</p><p class="source-code">  return null;</p><p class="source-code">}</p></li>
				<li>Finally, we can allow the <strong class="source-inline">Controls</strong> component, for example, to zoom or pan. This can be done by setting the following values:<p class="source-code">  // ...</p><p class="source-code">  export default function Controls() {</p><p class="source-code">    // ...</p><p class="source-code">    useEffect(() =&gt; {</p><p class="source-code">      const controls = new OrbitControls(camera,</p><p class="source-code">        gl.domElement);</p><p class="source-code">      controls.minDistance = 2;</p><p class="source-code">      controls.maxDistance = 20;</p><p class="source-code"><strong class="bold">+     controls.enableZoom = true;</strong></p><p class="source-code"><strong class="bold">+     controls.enablePan = true;</strong></p><p class="source-code">      </p><p class="source-code">      // ...</p></li>
			</ol>
			<p>After adding these last two values, you can rotate, zoom, and pan the <strong class="source-inline">Box</strong> component in 3D from <a id="_idIndexMarker743"/>the <a id="_idIndexMarker744"/>browser <a id="_idIndexMarker745"/>with three.js and React. In the next section of this chapter, we'll be rendering 360-degree panorama images to interact with as well.</p>
			<h2 id="_idParaDest-120"><a id="_idTextAnchor126"/>Rendering 360-degree panorama images</h2>
			<p>The <a id="_idIndexMarker746"/>application is using a default background <a id="_idIndexMarker747"/>that is displayed for the scene, but it's also possible to dynamically change the background of our scene. For this application, we want our scene background to be either 360 degrees or in 3D. Online images can be found on numerous stock photo websites that meet the requirements. </p>
			<p>In this book's GitHub repository, you can find a selection of assets for this chapter under the <strong class="source-inline">chapter-10-assets</strong> directory, including two 360-degree panorama images. You need to download both the <strong class="source-inline">beach.jpeg</strong> and <strong class="source-inline">mountain.jpeg</strong> files and place them in the <strong class="source-inline">public</strong> directory of the application. The file structure for this chapter will therefore become <a id="_idIndexMarker748"/>the following:</p>
			<p class="source-code">chapter-10</p>
			<p class="source-code">  |- /node_modules</p>
			<p class="source-code">  |- package.json</p>
			<p class="source-code">  |- /public</p>
			<p class="source-code">     |- index.html</p>
			<p class="source-code">     |- beach.jpeg</p>
			<p class="source-code">     |- mountain.jpeg</p>
			<p class="source-code">  |- /src</p>
			<p class="source-code">     |- /components</p>
			<p class="source-code">        |- Box.js</p>
			<p class="source-code">        |- Controls.js</p>
			<p class="source-code">     |- App.css</p>
			<p class="source-code">     |- App.js</p>
			<p class="source-code">     |- index.css</p>
			<p class="source-code">     |- index.js</p>
			<p>After we've added the 360-degree panorama images to the project, we can proceed by rendering them in the background of our scene on the <strong class="source-inline">Canvas</strong>. Using components and Hooks from both three.js and <strong class="source-inline">@react-three/fiber</strong>, we can create a 360-degree view in which we can also render the 3D object that we created in the previous section of this chapter.</p>
			<p>To add a 360-degree background, we need to follow a couple of steps:</p>
			<ol>
				<li value="1">Create a new file called <strong class="source-inline">Panorama.js</strong> in the <strong class="source-inline">components</strong> directory in the <strong class="source-inline">src</strong> file of the project. In this file, the setup to create a new mesh with the 360-degree image as a texture is added. First, we need to import the dependencies:<p class="source-code">import { useLoader } from '@react-three/fiber';</p><p class="source-code">import * as THREE from 'three';</p><p class="source-code">import Box from './Box';</p></li>
				<li>Below the<a id="_idIndexMarker749"/> imports, we need to define the backgrounds that we want to use for this<a id="_idIndexMarker750"/> application:<p class="source-code">// ...</p><p class="source-code">const backgrounds = [</p><p class="source-code">  {</p><p class="source-code">    id: 1,</p><p class="source-code">    url: '/mountain.jpeg',</p><p class="source-code">  },</p><p class="source-code">  {</p><p class="source-code">    id: 2,</p><p class="source-code">    url: '/beach.jpeg',</p><p class="source-code">  },</p><p class="source-code">];</p></li>
				<li>At the bottom of this file, the actual <strong class="source-inline">Panorama</strong> component must be created, which uses a Hook from <strong class="source-inline">@react-three/fiber</strong> and returns a <strong class="source-inline">mesh</strong> element from three.js with two other three.js elements:<p class="source-code">// ...</p><p class="source-code">export default function Panorama() {</p><p class="source-code">  const background = useLoader(THREE.TextureLoader,</p><p class="source-code">    backgrounds[0].url);</p><p class="source-code">  return (</p><p class="source-code">    &lt;mesh&gt;</p><p class="source-code">      &lt;sphereBufferGeometry args={[500, 60, 40]} /&gt;</p><p class="source-code">      &lt;meshBasicMaterial map={background} </p><p class="source-code">        side={THREE.BackSide} /&gt;</p><p class="source-code">    &lt;/mesh&gt;</p><p class="source-code">  );</p><p class="source-code">}</p></li>
			</ol>
			<p>The <strong class="source-inline">useLoader</strong> Hook takes the <strong class="source-inline">THREE.TextureLoader</strong> and the background image to create<a id="_idIndexMarker751"/> an object that can be<a id="_idIndexMarker752"/> used by <strong class="source-inline">meshBasicMaterial</strong> as a texture. It will use the first entry of the <strong class="source-inline">backgrounds</strong> array, something we can make dynamic later on. The <strong class="source-inline">sphereBufferGeometry</strong> defines our 360-degree view within our scene on the <strong class="source-inline">Canvas</strong>.</p>
			<ol>
				<li value="4">This new <strong class="source-inline">Panorama</strong> component must be imported in <strong class="source-inline">src/App.js</strong> so it can be rendered. Make sure to render this component within a <strong class="source-inline">Suspense</strong> component from React, as it's a dynamic component due to the usage of the <strong class="source-inline">useLoader</strong> Hook:<p class="source-code"><strong class="bold">+ import { Suspense } from 'react';</strong></p><p class="source-code">  import { Canvas } from '@react-three/fiber';</p><p class="source-code"><strong class="bold">+ import Panorama from './components/Panorama';</strong></p><p class="source-code">  // ...</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id='Canvas-container'&gt;</p><p class="source-code">         &lt;Canvas&gt;</p><p class="source-code">           &lt;Controls /&gt;</p><p class="source-code"><strong class="bold">+          &lt;Suspense fallback={null}&gt;</strong></p><p class="source-code"><strong class="bold">+           &lt;Panorama /&gt;</strong></p><p class="source-code"><strong class="bold">+          &lt;/Suspense&gt;</strong></p><p class="source-code">           &lt;Box /&gt;</p><p class="source-code">           // ...</p></li>
			</ol>
			<p>You can now open<a id="_idIndexMarker753"/> the application in the browser again to see how the 360-degree panorama is<a id="_idIndexMarker754"/> rendered, also with our previously created 3D object:</p>
			<div>
				<div id="_idContainer055" class="IMG---Figure">
					<img src="image/Figure_10.2_B17390.jpg" alt="Figure 10.2 – Rendering a 360-degree panorama image"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.2 – Rendering a 360-degree panorama image</p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you try zooming in and out of the 360-degree panorama images, you'll notice that only the <strong class="source-inline">Box</strong> component is changing its size. The background images are set to cover the full background and are not in 3D.</p>
			<p>Besides rendering a 360-degree panorama image, we can also make this interactive. By adding more three.js elements and using React, we can let the user change the background image by clicking on, for example, the 3D box.</p>
			<p>To change the backgrounds, we need to combine three.js with React and use local state management to keep track of which 360-degree panorama image should be rendered. Three.js elements rendered by <strong class="source-inline">@react-three/fiber</strong> can also handle <strong class="source-inline">onClick</strong> events to make them clickable components. Let's implement this:</p>
			<ol>
				<li value="1">In<a id="_idIndexMarker755"/> the <strong class="source-inline">src/components/Panorama.js</strong> file, we need to import the <strong class="source-inline">useState</strong> Hook <a id="_idIndexMarker756"/>from React, and create a local state variable with it:<p class="source-code"><strong class="bold">+ import { useState } from 'react';</strong></p><p class="source-code">  import { useLoader } from '@react-three/fiber';</p><p class="source-code">  import * as THREE from 'three';</p><p class="source-code">  // ...</p><p class="source-code">  export default function Panorama() {</p><p class="source-code"><strong class="bold">+   const [activeBackground, setActiveBackground] =</strong></p><p class="source-code"><strong class="bold">      useState(1);</strong></p><p class="source-code">    </p><p class="source-code">    // ...</p></li>
				<li>Based on the value for <strong class="source-inline">activeBackground</strong>, we can select the 360-degree panorama<a id="_idIndexMarker757"/> image <a id="_idIndexMarker758"/>that should be rendered as the background. The <strong class="source-inline">id</strong> field of the <strong class="source-inline">backgrounds</strong> array is used to match the local state variable to the correct background:<p class="source-code">  // ...</p><p class="source-code">  export default function Panorama() {</p><p class="source-code">    const [activeBackground, setActiveBackground] =</p><p class="source-code">      useState(1);</p><p class="source-code">  </p><p class="source-code"><strong class="bold">-   const background = useLoader(THREE.TextureLoader, </strong></p><p class="source-code"><strong class="bold">      backgrounds[0].url);</strong></p><p class="source-code"><strong class="bold">+   const { url } = backgrounds.find(({ id }) =&gt; </strong></p><p class="source-code"><strong class="bold">      id === activeBackground);</strong></p><p class="source-code"><strong class="bold">+   const background = useLoader(</strong></p><p class="source-code"><strong class="bold">+     THREE.TextureLoader,</strong></p><p class="source-code"><strong class="bold">+     url</strong></p><p class="source-code"><strong class="bold">+   );</strong></p><p class="source-code">    return (</p><p class="source-code">      // ...</p></li>
				<li>In the return <a id="_idIndexMarker759"/>statement of this <strong class="source-inline">Panorama</strong> component, we<a id="_idIndexMarker760"/> need to wrap the returned <strong class="source-inline">mesh</strong> element in a <strong class="source-inline">group</strong> element. This <strong class="source-inline">group</strong> element lets three.js return multiple interactive elements at once: <p class="source-code">  // ...</p><p class="source-code">  export default function Panorama() {</p><p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code"><strong class="bold">+     &lt;group&gt;</strong></p><p class="source-code">        &lt;mesh&gt;</p><p class="source-code">          &lt;sphereBufferGeometry args={[500, 60, 40]} /&gt;</p><p class="source-code">          &lt;meshBasicMaterial map={background}</p><p class="source-code">            side={THREE.BackSide} /&gt;</p><p class="source-code">        &lt;/mesh&gt;</p><p class="source-code"><strong class="bold">+     &lt;/group&gt;</strong></p><p class="source-code">    );</p><p class="source-code">  }</p></li>
				<li>In this <strong class="source-inline">group</strong> element, we can add another clickable <strong class="source-inline">group</strong> element with the <strong class="source-inline">onClick</strong> event that will update the value for <strong class="source-inline">activeBackground</strong> when clicked on:  // ...And add the <strong class="source-inline">group</strong> element with the <strong class="source-inline">onClick</strong> event, which will update the<a id="_idIndexMarker761"/> value for <strong class="source-inline">activeBackground</strong> when<a id="_idIndexMarker762"/> clicked on:<p class="source-code">  // ...</p><p class="source-code">  export default function Panorama() {</p><p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      &lt;group&gt;</p><p class="source-code">        // ...</p><p class="source-code"><strong class="bold">+       &lt;group</strong></p><p class="source-code"><strong class="bold">+         onClick={(e) =&gt; {</strong></p><p class="source-code"><strong class="bold">+           e.stopPropagation();</strong></p><p class="source-code"><strong class="bold">+           setActiveBackground(activeBackground === </strong></p><p class="source-code"><strong class="bold">                                1 ? 2 : 1);</strong></p><p class="source-code"><strong class="bold">+         }}</strong></p><p class="source-code"><strong class="bold">+      &gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;Box /&gt;</strong></p><p class="source-code"><strong class="bold">+      &lt;/group&gt;</strong></p><p class="source-code">      &lt;/group&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
				<li>To prevent the <strong class="source-inline">Box</strong> component from being rendered multiple times, we need to remove it<a id="_idIndexMarker763"/> from the <strong class="source-inline">src/App.js</strong> file:<p class="source-code">  import { Suspense } from 'react';</p><p class="source-code">  import { Canvas } from '@react-three/fiber';</p><p class="source-code"><strong class="bold">- import Box from './components/Box';</strong></p><p class="source-code">  // ...</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;div id='Canvas-container'&gt;</p><p class="source-code">        &lt;Canvas&gt;</p><p class="source-code">          &lt;Controls /&gt;</p><p class="source-code"><strong class="bold">-         &lt;Box /&gt;</strong></p><p class="source-code">          // ...</p><p class="source-code">      &lt;/div&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
			</ol>
			<p>From our application, you can now change the 360-degree panorama image that is being rendered by clicking on the 3D square. We can improve the user experience more by making the <strong class="source-inline">mesh</strong> element interactive, for example, when the user hovers over the <strong class="source-inline">Box</strong>. </p>
			<ol>
				<li value="6">In the <strong class="source-inline">src/components/Box.js</strong> file, we can add a local state variable to check <a id="_idIndexMarker764"/>whether <a id="_idIndexMarker765"/>the component is <strong class="source-inline">hovered</strong>, which is triggered from the <strong class="source-inline">mesh</strong> element:<p class="source-code"><strong class="bold">- import { useRef } from 'react';</strong></p><p class="source-code"><strong class="bold">+ import { useRef, useState } from 'react';</strong></p><p class="source-code">  import { useFrame } from '@react-three/fiber';</p><p class="source-code">  export default function Box({ rotate = false }) {</p><p class="source-code">    const mesh = useRef();</p><p class="source-code"><strong class="bold">+   const [hovered, setHovered] = useState(false);</strong></p><p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      &lt;mesh</p><p class="source-code">        scale={2}</p><p class="source-code">        ref={mesh}</p><p class="source-code"><strong class="bold">+       onPointerOver={(e) =&gt; setHovered(true)}</strong></p><p class="source-code"><strong class="bold">+       onPointerOut={(e) =&gt; setHovered(false)}</strong></p><p class="source-code">      &gt;</p><p class="source-code">        &lt;boxGeometry /&gt;</p><p class="source-code">        &lt;meshStandardMaterial color='blue' /&gt;</p><p class="source-code">      &lt;/mesh&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
				<li>When the<a id="_idIndexMarker766"/> local<a id="_idIndexMarker767"/> state variable <strong class="source-inline">hovered</strong> is <strong class="source-inline">true</strong>, we want the <strong class="source-inline">color</strong> prop on the <strong class="source-inline">meshStandardMaterial</strong> element to change to a different color:<p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      // ...</p><p class="source-code">        &lt;boxGeometry /&gt;</p><p class="source-code"><strong class="bold">-       &lt;meshStandardMaterial color='blue' /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;meshStandardMaterial color={hovered ? </strong></p><p class="source-code"><strong class="bold">         'purple' : 'blue'} /&gt;</strong></p><p class="source-code">      &lt;/mesh&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p></li>
			</ol>
			<p>If you now<a id="_idIndexMarker768"/> open the application on <strong class="source-inline">http://localhost:3000</strong>, you <a id="_idIndexMarker769"/>can see the <strong class="source-inline">Box</strong> component changes from blue to purple when hovered over. Clicking on it will render a different 360-degree panorama image, which is the beach:</p>
			<p class="figure-caption">  </p>
			<div>
				<div id="_idContainer056" class="IMG---Figure">
					<img src="image/Figure_10.3_B17390.jpg" alt="Figure 10.3 – Hovering over and clicking on 3D elements &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.3 – Hovering over and clicking on 3D elements </p>
			<p>Besides rendering 360-degree backgrounds and creating interactive 3D components, we can also<a id="_idIndexMarker770"/> import external 3D objects in React with three.js <a id="_idIndexMarker771"/>and animate them. This will be shown in the next section, by adding <strong class="source-inline">react-spring</strong> to our application.</p>
			<h2 id="_idParaDest-121"><a id="_idTextAnchor127"/>Animating 3D objects</h2>
			<p>So far, all<a id="_idIndexMarker772"/> the components you've<a id="_idIndexMarker773"/> added in this chapter that were created with three.js didn't have animations. With three.js, you can also import external 3D objects and animate components with <strong class="source-inline">react-spring</strong>. This library works similar to the Animated API that we used for React Native earlier in this book.</p>
			<h3>Importing 3D objects</h3>
			<p>Before getting into animating 3D objects in React, let's import an external 3D object with<a id="_idIndexMarker774"/> three.js <a id="_idIndexMarker775"/>first. Three.js can import multiple file formats for 3D objects, including <strong class="source-inline">.obj</strong>, <strong class="source-inline">.gltf</strong>, and <strong class="source-inline">.glb</strong>. These file formats are the most common ones for creating 3D objects that can be used in other programs. For this chapter, we'll be using a <strong class="source-inline">.glb</strong> file with a 3D version of the Ingenuity Mars Helicopter from NASA. This file can be found in the repository for this book in the <strong class="source-inline">chapter-10-assets</strong> directory, and you can place it in the <strong class="source-inline">public</strong> directory next to the 360-degree panorama images that you downloaded in the previous section.</p>
			<p>Both <strong class="source-inline">.gltf</strong> and <strong class="source-inline">.glb</strong> files can be loaded into three.js with <strong class="source-inline">GLTFLoader</strong>, which can load GLTF objects. GLTF is one of the most popular formats for 3D objects, also <a id="_idIndexMarker776"/>called the <strong class="bold">JPEG of 3D</strong>. The 3D model from NASA that you've placed in the <strong class="source-inline">public</strong> directory can be imported into a component, in a new file called <strong class="source-inline">Helicopter.js</strong> in the <strong class="source-inline">components</strong> directory:</p>
			<p class="source-code">import { useLoader } from '@react-three/fiber';</p>
			<p class="source-code">import { GLTFLoader } from </p>
			<p class="source-code">  'three/examples/jsm/loaders/GLTFLoader';</p>
			<p class="source-code">export default function Helicopter() {</p>
			<p class="source-code">  const gltf = useLoader(GLTFLoader, './ Ingenuity_v3.glb' </p>
			<p class="source-code">);</p>
			<p class="source-code">  return (</p>
			<p class="source-code">    &lt;group position={[2, 2, 1]}&gt;</p>
			<p class="source-code">      &lt;primitive object={gltf.scene} /&gt;</p>
			<p class="source-code">    &lt;/group&gt;</p>
			<p class="source-code">  );</p>
			<p class="source-code">}</p>
			<p>This component again uses the <strong class="source-inline">useLoader</strong> Hook from <strong class="source-inline">@react-three/fiber</strong>, and also imports the <strong class="source-inline">GLTFLoader</strong> that it needs to render the 3D GLTF object. A primitive element with the GLTF object is returned within a <strong class="source-inline">group</strong> element that has a custom position.</p>
			<p>In <strong class="source-inline">src/App.js</strong>, we can return this new <strong class="source-inline">Helicopter</strong> component from within a <strong class="source-inline">Suspense</strong> component, as <a id="_idIndexMarker777"/>the <strong class="source-inline">useLoader</strong> Hook makes this a dynamic<a id="_idIndexMarker778"/> component:</p>
			<p class="source-code">  import { Suspense } from 'react';</p>
			<p class="source-code">  import { Canvas } from '@react-three/fiber';</p>
			<p class="source-code"><strong class="bold">+ import Helicopter from './components/Helicopter';</strong></p>
			<p class="source-code">  // ...</p>
			<p class="source-code">  export default function App() {</p>
			<p class="source-code">    return (</p>
			<p class="source-code">      &lt;div id='Canvas-container'&gt;</p>
			<p class="source-code">        &lt;Canvas&gt;</p>
			<p class="source-code">          // ...</p>
			<p class="source-code">          &lt;Suspense fallback={null}&gt;</p>
			<p class="source-code">            &lt;Panorama /&gt;</p>
			<p class="source-code"><strong class="bold">+           &lt;Helicopter /&gt;</strong></p>
			<p class="source-code">          &lt;/Suspense&gt;</p>
			<p class="source-code">        &lt;/Canvas&gt;</p>
			<p class="source-code">      &lt;/div&gt;</p>
			<p class="source-code">    );</p>
			<p class="source-code">  }</p>
			<p>This will add the Ingenuity Mars Helicopter from NASA to our application, rendered in a position close to our 3D box. You can see what this looks like in the following screenshot:</p>
			<div>
				<div id="_idContainer057" class="IMG---Figure">
					<img src="image/Figure_10.4_B17390.jpg" alt="Figure 10.4 – Rendering an external 3D object with three.js&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 10.4 – Rendering an external 3D object with three.js</p>
			<p>In the next part of this <a id="_idIndexMarker779"/>section, we'll animate this 3D object using a popular <a id="_idIndexMarker780"/>React library called <strong class="source-inline">react-spring</strong>.</p>
			<h3>Animating 3D objects with React</h3>
			<p>In a previous <a id="_idIndexMarker781"/>chapter<a id="_idIndexMarker782"/> of<a id="_idIndexMarker783"/> this book, we animated components in React Native with the Animated API. For web-based React applications, we can use another library for this, which is <strong class="source-inline">react-spring</strong>. Using this library, we can add animations to, for example, rotate, move, or fade components in and out of a frame. As has been the case in other examples of using React, this library provides Hooks to add these interactions.</p>
			<p>There is a special library from <strong class="source-inline">react-spring</strong> that works well with <strong class="source-inline">@react-three/fiber</strong>, which we can install from npm:</p>
			<p class="source-code">npm install @react-spring/three</p>
			<p>After the installation is complete, we can import the <strong class="source-inline">useSpring</strong> Hook and the <strong class="source-inline">animated</strong> element from this library in our <strong class="source-inline">Helicopter</strong> component in <strong class="source-inline">src/components/Helicopter.js</strong>:</p>
			<p class="source-code">  import { useLoader } from '@react-three/fiber';</p>
			<p class="source-code">  import { GLTFLoader } from </p>
			<p class="source-code">    'three/examples/jsm/loaders/GLTFLoader';</p>
			<p class="source-code"><strong class="bold">+ import { useSpring, animated } from </strong></p>
			<p class="source-code"><strong class="bold">    '@react-spring/three';</strong></p>
			<p class="source-code">  export default function Helicopter() {</p>
			<p class="source-code">    // ...</p>
			<p>We can pass the configuration for our animation to the <strong class="source-inline">useSpring</strong> Hook, so it will create the <a id="_idIndexMarker784"/>props<a id="_idIndexMarker785"/> we <a id="_idIndexMarker786"/>can pass to the element that we want to animate:</p>
			<p class="source-code">  // ...</p>
			<p class="source-code">  export default function Helicopter() {</p>
			<p class="source-code">    const gltf = </p>
			<p class="source-code">      useLoader(GLTFLoader, './Ingenuity_v3.glb');</p>
			<p class="source-code"><strong class="bold">+   const props = useSpring({</strong></p>
			<p class="source-code"><strong class="bold">+     loop: true,</strong></p>
			<p class="source-code"><strong class="bold">+     to: [</strong></p>
			<p class="source-code"><strong class="bold">+       { position: [2, 2, 3] },</strong></p>
			<p class="source-code"><strong class="bold">+       { position: [2, 2, 6] },</strong></p>
			<p class="source-code"><strong class="bold">+       { position: [2, 2, 9] },</strong></p>
			<p class="source-code"><strong class="bold">+       { position: [2, 4, 9] },</strong></p>
			<p class="source-code"><strong class="bold">+       { position: [2, 6, 9] },</strong></p>
			<p class="source-code"><strong class="bold">+     ],</strong></p>
			<p class="source-code"><strong class="bold">+     from: { position: [2, 2, 1] },</strong></p>
			<p class="source-code"><strong class="bold">+   });</strong></p>
			<p class="source-code">  return (</p>
			<p class="source-code">    // ...</p>
			<p>The object with our animation configuration describes that we want to change the <strong class="source-inline">position</strong> prop of our 3D object. The starting position is described and the different positions it should also move to. This animation will also be looped.</p>
			<p>The animated element from <strong class="source-inline">react-spring</strong> can then be used to extend the <strong class="source-inline">group</strong> element from three.js that is wrapping our 3D object. This <strong class="source-inline">group</strong> element will become an animated element that also takes the props that were created by the <strong class="source-inline">useSpring</strong> Hook:</p>
			<p class="source-code">    // ...  </p>
			<p class="source-code">    return (</p>
			<p class="source-code"><strong class="bold">-     &lt;group position={[2, 2, 1]}&gt;</strong></p>
			<p class="source-code"><strong class="bold">+     &lt;animated.group {...props}&gt;</strong></p>
			<p class="source-code">        &lt;primitive object={gltf.scene} /&gt;</p>
			<p class="source-code"><strong class="bold">+     &lt;/animated.group&gt;</strong></p>
			<p class="source-code"><strong class="bold">-     &lt;/group&gt;</strong></p>
			<p class="source-code">    );</p>
			<p class="source-code">  }</p>
			<p>Now, when <a id="_idIndexMarker787"/>you <a id="_idIndexMarker788"/>open<a id="_idIndexMarker789"/> the application, the helicopter will be moving around in different positions on the 360-degree panorama image.</p>
			<h1 id="_idParaDest-122"><a id="_idTextAnchor128"/>Summary</h1>
			<p>In this final chapter, you've combined all of the knowledge you have gathered from this book to create a VR application with React. We were able to do this by combining it with three.js, which is a JavaScript library for creating 3D applications. The project we created in this chapter serves a different and more niche use case than the other React projects in this book. It has basic animations, as well as a 3D helicopter object that flies away into the distance.</p>
			<p>With this final chapter, you've completed all 10 chapters of this book and have created 10 projects with React and React Native. Now, you have a solid understanding of everything that you can do with React and how to use it across different platforms. While React and React Native are already mature libraries, new features are added continuously. Even as you finish reading this book, there will probably be new features you can check out. My main advice would be to never stop learning and keep a close eye on the documentation whenever a new feature is announced.</p>
			<h1 id="_idParaDest-123"><a id="_idTextAnchor129"/>Further reading</h1>
			<ul>
				<li>Three.js: <a href="https://threejs.org/">https://threejs.org/</a></li>
				<li>@react-three/fiber: <a href="https://docs.pmnd.rs/react-three-fiber/getting-started/introduction">https://docs.pmnd.rs/react-three-fiber/getting-started/introduction</a></li>
				<li>NASA 3D images: <a href="https://mars.nasa.gov/3d/images/">https://mars.nasa.gov/3d/images/</a></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer059">
				<img src="image/Figure_10.1_B17390.png" alt="Figure 10.1 – Rendering a 3D element with Three.js"/>
			</div>
		</div>
	</body></html>