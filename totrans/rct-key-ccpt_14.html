<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer281">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     14
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-271">
    <span class="koboSpan" id="kobo.2.1">
     Managing Data with React Router
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Use React Router to fetch or send data without using
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.6.1">
        useEffect()
       </span>
      </code>
      <span class="koboSpan" id="kobo.7.1">
       or
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.8.1">
        useState()
       </span>
      </code>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.9.1">
       Share data between different routes without using React’s context feature
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.10.1">
       Update the UI based on the current data submission status
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.11.1">
       Create page and action routes
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.12.1">
       Improve the user experience by deferring the loading of non-critical data
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-272">
    <span class="koboSpan" id="kobo.13.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.14.1">
     In the preceding chapter, you learned how to use React Router to load different components for different URL paths.
    </span>
    <span class="koboSpan" id="kobo.14.2">
     This is an important feature as it allows you to build multipage websites while still using React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.15.1">
     Routing is a crucial feature for many web applications, and React Router is therefore a very important package.
    </span>
    <span class="koboSpan" id="kobo.15.2">
     But just as most websites need routing, almost all websites need to fetch and manipulate data.
    </span>
    <span class="koboSpan" id="kobo.15.3">
     For example, HTTP requests in most websites are sent to load data (such as a list of products or blog posts) or to mutate data (for example, to create a product or a blog post).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.16.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.17.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.18.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.19.1">
      Handling Side Effects
     </span>
    </em>
    <span class="koboSpan" id="kobo.20.1">
     , you learned that you can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.21.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.22.1">
     Hook and various other React features to send HTTP requests from inside a React application.
    </span>
    <span class="koboSpan" id="kobo.22.2">
     But if you’re using React Router, you get some new, even more powerful tools for working with data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.23.1">
     This chapter will explore which new features are made available by React Router and how they may be used to simplify the process of fetching or sending data.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-273">
    <span class="koboSpan" id="kobo.24.1">
     Data Fetching and Routing Are Tightly Coupled
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.25.1">
     As mentioned previously, most websites do need to fetch (or send) data, and most websites do
    </span>
    <a id="_idIndexMarker668">
    </a>
    <span class="koboSpan" id="kobo.26.1">
     need more than one page.
    </span>
    <span class="koboSpan" id="kobo.26.2">
     But it’s important to realize that these two concepts are typically closely related.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.27.1">
     Whenever a user visits a new page (such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.28.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.29.1">
     ), it’s likely that some data will need to be fetched.
    </span>
    <span class="koboSpan" id="kobo.29.2">
     In the case of a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.30.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.31.1">
     page, the required data is probably a list of blog posts that is retrieved from a backend server.
    </span>
    <span class="koboSpan" id="kobo.31.2">
     The rendered React component (such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.32.1">
      Posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.33.1">
     ) must therefore send an HTTP request to the backend server, wait for the response, handle the response (as well as potential errors), and, ultimately, display the fetched data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.34.1">
     Of course, not all pages
    </span>
    <a id="_idIndexMarker669">
    </a>
    <span class="koboSpan" id="kobo.35.1">
     need to fetch data.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     Landing pages, “About Us” pages, and “Terms &amp; Use” pages probably don’t need to fetch data when a user visits them.
    </span>
    <span class="koboSpan" id="kobo.35.3">
     Instead, data on those pages is likely to be static.
    </span>
    <span class="koboSpan" id="kobo.35.4">
     It might even be included in the source code as it doesn’t change frequently.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.36.1">
     But many pages do need to get data from a backend every time they’re loaded—for instance, “Products,” “News,” “Events,” or other infrequently updated pages like the “User Profile.”
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.37.1">
     And data fetching isn’t everything.
    </span>
    <span class="koboSpan" id="kobo.37.2">
     Most websites also contain features that require data submission—be it a blog post that can be created or updated, product data that’s administered, or a user comment that can be added.
    </span>
    <span class="koboSpan" id="kobo.37.3">
     Hence, sending data to a backend is also a very common use case.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.38.1">
     And beyond requests, components might also need to interact with other browser APIs, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.39.1">
      localStorage
     </span>
    </code>
    <span class="koboSpan" id="kobo.40.1">
     .
    </span>
    <span class="koboSpan" id="kobo.40.2">
     For example, user settings might need to be fetched from storage as a certain page loads.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.41.1">
     Naturally, all these interactions happen on pages.
    </span>
    <span class="koboSpan" id="kobo.41.2">
     But it might not be immediately obvious how tightly data fetching and submission are coupled to routing.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.42.1">
     Most of the time, data is fetched when a route becomes active, i.e., when a component (the page component) is rendered for the first time.
    </span>
    <span class="koboSpan" id="kobo.42.2">
     Sure, users might also be able to click a button to refresh the data, but while this is optional, data fetching upon initial page load is almost always required.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.43.1">
     And when it comes to sending data, there is also a close connection to routing.
    </span>
    <span class="koboSpan" id="kobo.43.2">
     At first sight, it’s not clear
    </span>
    <a id="_idIndexMarker670">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     how it’s related because, while it makes sense to fetch data upon page load, it’s less likely that you will need to send some data immediately (except perhaps tracking or analytics data).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.45.1">
     But it’s very likely that
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.46.1">
      after
     </span>
    </em>
    <span class="koboSpan" id="kobo.47.1">
     sending data, you will want to navigate to a different page, meaning that it’s actually the other way around, and instead of initiating data fetching as a page loads, you want
    </span>
    <a id="_idIndexMarker671">
    </a>
    <span class="koboSpan" id="kobo.48.1">
     to load a different page after sending some data.
    </span>
    <span class="koboSpan" id="kobo.48.2">
     For example, after an administrator enters some product data and submits the form, they should typically be redirected to a different page (for example, from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.49.1">
      /products/new
     </span>
    </code>
    <span class="koboSpan" id="kobo.50.1">
     to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.51.1">
      /products
     </span>
    </code>
    <span class="koboSpan" id="kobo.52.1">
     page).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.53.1">
     The connection between data fetching, submission, and routing can therefore be summarized by the following points:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.54.1">
       Data fetching
      </span>
     </strong>
     <span class="koboSpan" id="kobo.55.1">
      often should be initiated when a route becomes active (if that page needs data)
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.56.1">
      After
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.57.1">
       submitting data
      </span>
     </strong>
     <span class="koboSpan" id="kobo.58.1">
      , the user should often be redirected to another route
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.59.1">
     Because these concepts are tightly coupled, React Router provides extra features that vastly simplify the process of working with data.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-274">
    <span class="koboSpan" id="kobo.60.1">
     Sending HTTP Requests without React Router
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.61.1">
     Working with data is not just about sending HTTP requests.
    </span>
    <span class="koboSpan" id="kobo.61.2">
     As mentioned in the previous section, you may also need to store or retrieve data via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.62.1">
      localStorage
     </span>
    </code>
    <span class="koboSpan" id="kobo.63.1">
     or perform
    </span>
    <a id="_idIndexMarker672">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     some other operation as a page gets loaded.
    </span>
    <span class="koboSpan" id="kobo.64.2">
     But sending HTTP requests is an especially common scenario and will therefore be the main use case considered for the majority of this chapter.
    </span>
    <span class="koboSpan" id="kobo.64.3">
     Nonetheless, it’s vital to keep in mind that what you learn in this chapter is not limited to sending HTTP requests.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.65.1">
     As you will see, React Router provides various features that help with sending HTTP requests (or using other data fetching and manipulation APIs), but you can also send HTTP requests (or interact with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.66.1">
      localStorage
     </span>
    </code>
    <span class="koboSpan" id="kobo.67.1">
     or other APIs) without these features.
    </span>
    <span class="koboSpan" id="kobo.67.2">
     Indeed,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.68.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.69.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.70.1">
      Handling Side Effects
     </span>
    </em>
    <span class="koboSpan" id="kobo.71.1">
     , already taught you how HTTP requests can be sent from inside React components with the help of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.72.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.73.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.74.1">
     When
    </span>
    <a id="_idIndexMarker673">
    </a>
    <span class="koboSpan" id="kobo.75.1">
     using React Router’s data fetching capabilities, you can get rid of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.76.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.77.1">
     and manual state management.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.78.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.79.1">
      Besides jumping back in this book, you can also revisit how data fetching with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.80.1">
       useEffect()
      </span>
     </code>
     <span class="koboSpan" id="kobo.81.1">
      works via this code example on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/examples/01-data-fetching-classic">
      <span class="url">
       <span class="koboSpan" id="kobo.82.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/examples/01-data-fetching-classic
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.83.1">
      .
     </span>
    </p>
   </div>
   <h1 class="heading-1" id="_idParaDest-275">
    <span class="koboSpan" id="kobo.84.1">
     Loading Data with React Router
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.85.1">
     With
    </span>
    <a id="_idIndexMarker674">
    </a>
    <span class="koboSpan" id="kobo.86.1">
     React Router, fetching data can be simplified
    </span>
    <a id="_idIndexMarker675">
    </a>
    <span class="koboSpan" id="kobo.87.1">
     down to this, shorter, code snippet:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.88.1">import</span></span><span class="koboSpan" id="kobo.89.1"> { useLoaderData } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.90.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.91.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.92.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.93.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.94.1">Posts</span></span><span class="koboSpan" id="kobo.95.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.96.1">const</span></span><span class="koboSpan" id="kobo.97.1"> loadedPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.98.1">useLoaderData</span></span><span class="koboSpan" id="kobo.99.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.100.1">return</span></span><span class="koboSpan" id="kobo.101.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.102.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.103.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.104.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.105.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.106.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.107.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.108.1">Your Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.109.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.110.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.111.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.112.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.113.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.114.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.115.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.116.1">"posts"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.117.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.118.1">        {loadedPosts.map((post) =&gt; (</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.119.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.120.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.121.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.122.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.123.1">{post.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.124.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.125.1">{post.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.126.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.127.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.128.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.129.1">        ))}</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.130.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.131.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.132.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.133.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.134.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.135.1">&gt;</span></span><span class="koboSpan" id="kobo.136.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.137.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.138.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.139.1">Posts</span></span><span class="koboSpan" id="kobo.140.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.141.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.142.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.143.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.144.1">loader</span></span><span class="koboSpan" id="kobo.145.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.146.1">const</span></span><span class="koboSpan" id="kobo.147.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.148.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.149.1">fetch</span></span><span class="koboSpan" id="kobo.150.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.151.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.152.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.153.1">if</span></span><span class="koboSpan" id="kobo.154.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.155.1">ok</span></span><span class="koboSpan" id="kobo.156.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.157.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.158.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.159.1">Error</span></span><span class="koboSpan" id="kobo.160.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.161.1">'Could not fetch posts'</span></span><span class="koboSpan" id="kobo.162.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.163.1">return</span></span><span class="koboSpan" id="kobo.164.1"> response;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.165.1">
     Believe it or not, it really
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.166.1">
      is
     </span>
    </em>
    <span class="koboSpan" id="kobo.167.1">
     that much less code than in the examples shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.168.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.169.1">
     .
    </span>
    <span class="koboSpan" id="kobo.169.2">
     Back then, when using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.170.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.171.1">
     , separate state slices had to be managed to handle loading and error states as well as the received data.
    </span>
    <span class="koboSpan" id="kobo.171.2">
     Though, to be fair, the content that should be displayed in case of an error is missing here.
    </span>
    <span class="koboSpan" id="kobo.171.3">
     It’s in a separate file (which will be shown later), but it would only add three extra lines of code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.172.1">
     In the
    </span>
    <a id="_idIndexMarker676">
    </a>
    <span class="koboSpan" id="kobo.173.1">
     preceding code snippet, you see a couple of new features that haven’t been covered yet in the book.
    </span>
    <span class="koboSpan" id="kobo.173.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.174.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.175.1">
     function
    </span>
    <a id="_idIndexMarker677">
    </a>
    <span class="koboSpan" id="kobo.176.1">
     and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.177.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.178.1">
     Hook are added by React Router.
    </span>
    <span class="koboSpan" id="kobo.178.2">
     These features, along with many others that will be explored throughout this chapter, are made available by the React Router package.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.179.1">
     With that library installed, you can set an extra
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.180.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.181.1">
     prop on your route definitions.
    </span>
    <span class="koboSpan" id="kobo.181.2">
     This prop accepts a function that will be executed by React Router whenever this route (or one of its child routes, if defined) is activated:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.182.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.183.1">path</span></span><span class="koboSpan" id="kobo.184.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.185.1">'/posts'</span></span><span class="koboSpan" id="kobo.186.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.187.1">element</span></span><span class="koboSpan" id="kobo.188.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.189.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.190.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.191.1"> /&gt;</span></span><span class="koboSpan" id="kobo.192.1">, </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.193.1">loader</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.194.1">: </span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.195.1">() =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.196.1"> {...}</span></strong></span><span class="koboSpan" id="kobo.197.1"> }
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.198.1">
     This function can be used to perform any data fetching or other tasks required to successfully display the page component.
    </span>
    <span class="koboSpan" id="kobo.198.2">
     The logic for getting that required data can therefore be extracted from the component and moved into a separate function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.199.1">
     Since many websites have dozens or even hundreds of routes, adding these loader functions inline in the route definition objects quickly leads to complex and confusing route definitions.
    </span>
    <span class="koboSpan" id="kobo.199.2">
     For this reason, you will typically add (and export) the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.200.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.201.1">
     function in the same file that contains the component that needs the data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.202.1">
     When setting up the route definitions, you can then import the component and its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.203.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.204.1">
     function and use it like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.205.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.206.1">Posts</span></span><span class="koboSpan" id="kobo.207.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.208.1">{ loader </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.209.1">as</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.210.1"> postsLoader }</span></strong></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.211.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.212.1">'./components/Posts.jsx'</span></span><span class="koboSpan" id="kobo.213.1">;
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.214.1">// … other code …</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.215.1">const</span></span><span class="koboSpan" id="kobo.216.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.217.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.218.1">([
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.219.1">path</span></span><span class="koboSpan" id="kobo.220.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.221.1">'/posts'</span></span><span class="koboSpan" id="kobo.222.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.223.1">element</span></span><span class="koboSpan" id="kobo.224.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.225.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.226.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.227.1"> /&gt;</span></span><span class="koboSpan" id="kobo.228.1">, </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.229.1">loader</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.230.1">: postsLoader </span></strong></span><span class="koboSpan" id="kobo.231.1">}
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.232.1">
     Assigning an alias (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.233.1">
      postsLoader
     </span>
    </code>
    <span class="koboSpan" id="kobo.234.1">
     , in this example) to the imported
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.235.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.236.1">
     function is optional but recommended since you most likely have multiple
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.237.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.238.1">
     functions from different components, which would otherwise lead to name clashes.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.239.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.240.1">
      Technically, you don’t need to name your functions
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.241.1">
       loader
      </span>
     </code>
     <span class="koboSpan" id="kobo.242.1">
      .
     </span>
     <span class="koboSpan" id="kobo.242.2">
      You could use any name and assign them as values for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.243.1">
       loader
      </span>
     </code>
     <span class="koboSpan" id="kobo.244.1">
      property in the route definition.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.245.1">
      But using
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.246.1">
       loader
      </span>
     </code>
     <span class="koboSpan" id="kobo.247.1">
      as a function name does not just follow the convention; it also has the advantage that React Router’s built-in lazy loading support (covered in the previous chapter) lazy-loads the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.248.1">
       loader
      </span>
     </code>
     <span class="koboSpan" id="kobo.249.1">
      function when needed.
     </span>
     <span class="koboSpan" id="kobo.249.2">
      It fails to do that if you pick any other name.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.250.1">
     With this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.251.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.252.1">
     defined, React
    </span>
    <a id="_idIndexMarker678">
    </a>
    <span class="koboSpan" id="kobo.253.1">
     Router will execute
    </span>
    <a id="_idIndexMarker679">
    </a>
    <span class="koboSpan" id="kobo.254.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.255.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.256.1">
     function whenever a route is activated.
    </span>
    <span class="koboSpan" id="kobo.256.2">
     To be
    </span>
    <a id="_idIndexMarker680">
    </a>
    <span class="koboSpan" id="kobo.257.1">
     precise, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.258.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.259.1">
     function is called before the component function is executed (that is, before the component is rendered).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.260.1">
     <img alt="img" src="image/B31339_14_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.261.1">
     Figure 14.1: The Posts component is rendered after the loader is executed
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.262.1">
     This also explains why the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.263.1">
      Posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.264.1">
     component example at the beginning of this section contained no code that handled any loading state.
    </span>
    <span class="koboSpan" id="kobo.264.2">
     There simply
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.265.1">
      is
     </span>
    </em>
    <span class="koboSpan" id="kobo.266.1">
     no loading state since a component function is only executed after its loader has finished (and the data is available).
    </span>
    <span class="koboSpan" id="kobo.266.2">
     React Router won’t finish the page transition until the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.267.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.268.1">
     function has finished its job (though, as you will learn toward the end of this chapter, there is a way of changing this behavior).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.269.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.270.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.271.1">
     function can perform any operation of your choice (such as sending an HTTP request, or reaching out to browser storage via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.272.1">
      localStorage
     </span>
    </code>
    <span class="koboSpan" id="kobo.273.1">
     API).
    </span>
    <span class="koboSpan" id="kobo.273.2">
     Inside that function, you should return the data that should be exposed to the component function.
    </span>
    <span class="koboSpan" id="kobo.273.3">
     It’s also worth noting that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.274.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.275.1">
     function can return any kind of data.
    </span>
    <span class="koboSpan" id="kobo.275.2">
     It may also return a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.276.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.277.1">
     object that then resolves to any kind of data.
    </span>
    <span class="koboSpan" id="kobo.277.2">
     In that case, React Router will automatically wait for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.278.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.279.1">
     to be fulfilled before executing the related route component
    </span>
    <a id="_idIndexMarker681">
    </a>
    <span class="koboSpan" id="kobo.280.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.280.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.281.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.282.1">
     function can thus
    </span>
    <a id="_idIndexMarker682">
    </a>
    <span class="koboSpan" id="kobo.283.1">
     perform both asynchronous and synchronous tasks.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.284.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.285.1">
      It’s important to understand that the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.286.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.287.1">
      function, like all the other code that makes up your React app, executes on the client side (that is, in the browser of a website visitor).
     </span>
     <span class="koboSpan" id="kobo.287.2">
      Therefore, you may perform any action that could be performed anywhere else (for example, inside
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.288.1">
       useEffect()
      </span>
     </code>
     <span class="koboSpan" id="kobo.289.1">
      ) in your React app as well.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.290.1">
      You must not try to run code that belongs to the server side.
     </span>
     <span class="koboSpan" id="kobo.290.2">
      Directly reaching out to a database, writing to the file system, or performing any other server-side tasks will fail or introduce security risks, meaning that you might accidentally expose database credentials on the client side.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-276">
    <span class="koboSpan" id="kobo.291.1">
     Getting Access to Loaded Data
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.292.1">
     Of course, the component that belongs to a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.293.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.294.1">
     (that is, the component that’s part of the same route definition) needs the data returned by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.295.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.296.1">
     .
    </span>
    <span class="koboSpan" id="kobo.296.2">
     This is why React Router
    </span>
    <a id="_idIndexMarker683">
    </a>
    <span class="koboSpan" id="kobo.297.1">
     offers a new Hook for accessing that data: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.298.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.299.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.300.1">
     When called inside a component function, this Hook yields the data returned by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.301.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.302.1">
     that belongs to the active route.
    </span>
    <span class="koboSpan" id="kobo.302.2">
     If that returned data is a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.303.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.304.1">
     , React Router (as mentioned earlier) will automatically wait for that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.305.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.306.1">
     to resolve and provide the resolved data when
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.307.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.308.1">
     is called.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.309.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.310.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.311.1">
     function may also return an HTTP response object (or a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.312.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.313.1">
     resolving to a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.314.1">
      Response
     </span>
    </code>
    <span class="koboSpan" id="kobo.315.1">
     ) object.
    </span>
    <span class="koboSpan" id="kobo.315.2">
     This is the case in the preceding example because the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.316.1">
      fetch()
     </span>
    </code>
    <span class="koboSpan" id="kobo.317.1">
     function yields a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.318.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.319.1">
     that resolves to an object of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.320.1">
      Response
     </span>
    </code>
    <span class="koboSpan" id="kobo.321.1">
     .
    </span>
    <span class="koboSpan" id="kobo.321.2">
     In that instance, React Router automatically extracts the response body and provides direct access to the data that was attached to the response (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.322.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.323.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.324.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.325.1">
      If a response should
     </span>
     <a id="_idIndexMarker684">
     </a>
     <span class="koboSpan" id="kobo.326.1">
      be returned, the returned object must adhere to the standard
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.327.1">
       Response
      </span>
     </code>
     <span class="koboSpan" id="kobo.328.1">
      interface, as defined here:
     </span>
     <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">
      <span class="url">
       <span class="koboSpan" id="kobo.329.1">
        https://developer.mozilla.org/en-US/docs/Web/API/Response
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.330.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.331.1">
      Returning responses might be strange at first.
     </span>
     <span class="koboSpan" id="kobo.331.2">
      After all, the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.332.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.333.1">
      code is still executed inside the browser (not on a server).
     </span>
     <span class="koboSpan" id="kobo.333.2">
      Therefore, technically, no request was sent, and no response should be required (since the entire code is executed in the same environment, that is, the browser).
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.334.1">
      For that reason, you can but don’t have to return a response; you may return any kind of value.
     </span>
     <span class="koboSpan" id="kobo.334.2">
      React Router just also supports responses as one possible return value type.
     </span>
    </p>
   </div>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.335.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.336.1">
     can be called
    </span>
    <a id="_idIndexMarker685">
    </a>
    <span class="koboSpan" id="kobo.337.1">
     in any component rendered by the currently
    </span>
    <a id="_idIndexMarker686">
    </a>
    <span class="koboSpan" id="kobo.338.1">
     active route component.
    </span>
    <span class="koboSpan" id="kobo.338.2">
     That may be the route component itself (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.339.1">
      Posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.340.1">
     , in the preceding example), but it may also be any nested component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.341.1">
     For example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.342.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.343.1">
     can also be used in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.344.1">
      PostsList
     </span>
    </code>
    <span class="koboSpan" id="kobo.345.1">
     component that’s included in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.346.1">
      Posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.347.1">
     component (which has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.348.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.349.1">
     added to its route definition):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.350.1">import</span></span><span class="koboSpan" id="kobo.351.1"> { useLoaderData } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.352.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.353.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.354.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.355.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.356.1">PostsList</span></span><span class="koboSpan" id="kobo.357.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.358.1">const</span></span><span class="koboSpan" id="kobo.359.1"> loadedPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.360.1">useLoaderData</span></span><span class="koboSpan" id="kobo.361.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.362.1">return</span></span><span class="koboSpan" id="kobo.363.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.364.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.365.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.366.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.367.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.368.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.369.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.370.1">Your Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.371.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.372.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.373.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.374.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.375.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.376.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.377.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.378.1">"posts"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.379.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.380.1">        {loadedPosts.map((post) =&gt; (</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.381.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.382.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.383.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.384.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.385.1">{post.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.386.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.387.1">{post.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.388.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.389.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.390.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.391.1">        ))}</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.392.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.393.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.394.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.395.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.396.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.397.1">&gt;</span></span><span class="koboSpan" id="kobo.398.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.399.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.400.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.401.1">PostsList</span></span><span class="koboSpan" id="kobo.402.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.403.1">
     For this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.404.1">
      Posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.405.1">
     component file looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.406.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.407.1">PostsList</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.408.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.409.1">'../components/PostsList.jsx'</span></span><span class="koboSpan" id="kobo.410.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.411.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.412.1">Posts</span></span><span class="koboSpan" id="kobo.413.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.414.1">return</span></span><span class="koboSpan" id="kobo.415.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.416.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.417.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.418.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.419.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.420.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.421.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.422.1">Your Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.423.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.424.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.425.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.426.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.427.1">PostsList</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.428.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.429.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.430.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.431.1">&gt;</span></span><span class="koboSpan" id="kobo.432.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.433.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.434.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.435.1">Posts</span></span><span class="koboSpan" id="kobo.436.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.437.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.438.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.439.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.440.1">loader</span></span><span class="koboSpan" id="kobo.441.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.442.1">const</span></span><span class="koboSpan" id="kobo.443.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.444.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.445.1">fetch</span></span><span class="koboSpan" id="kobo.446.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.447.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.448.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.449.1">if</span></span><span class="koboSpan" id="kobo.450.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.451.1">ok</span></span><span class="koboSpan" id="kobo.452.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.453.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.454.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.455.1">Error</span></span><span class="koboSpan" id="kobo.456.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.457.1">'Could not fetch posts'</span></span><span class="koboSpan" id="kobo.458.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.459.1">return</span></span><span class="koboSpan" id="kobo.460.1"> response;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.461.1">
     This means that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.462.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.463.1">
     can be used in exactly the place where you need the data.
    </span>
    <span class="koboSpan" id="kobo.463.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.464.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.465.1">
     function can
    </span>
    <a id="_idIndexMarker687">
    </a>
    <span class="koboSpan" id="kobo.466.1">
     also be defined wherever you want but it must be added to the route where the data is required.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.467.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.468.1">
      Depending on the React Router version being used, you might get a warning related to “No HydrateFallback” element being provided.
     </span>
     <span class="koboSpan" id="kobo.468.2">
      You can ignore this warning as it only matters when using server-side rendering.
     </span>
    </p>
   </div>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.469.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.470.1">
      You can also explore this code example on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/examples/02-data-fetching-react-router">
      <span class="url">
       <span class="koboSpan" id="kobo.471.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/examples/02-data-fetching-react-router
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.472.1">
      .
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-277">
    <span class="koboSpan" id="kobo.473.1">
     Loading Data for Dynamic Routes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.474.1">
     For most
    </span>
    <a id="_idIndexMarker688">
    </a>
    <span class="koboSpan" id="kobo.475.1">
     websites, it’s unlikely that static, pre-defined
    </span>
    <a id="_idIndexMarker689">
    </a>
    <span class="koboSpan" id="kobo.476.1">
     routes alone will be sufficient
    </span>
    <a id="_idIndexMarker690">
    </a>
    <span class="koboSpan" id="kobo.477.1">
     to meet your needs.
    </span>
    <span class="koboSpan" id="kobo.477.2">
     For instance, if you created a blogging site with exclusively static routes, you would be limited to a simple list of blog posts on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.478.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.479.1">
     .
    </span>
    <span class="koboSpan" id="kobo.479.2">
     To add more details about a selected blog post on routes such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.480.1">
      /posts/1
     </span>
    </code>
    <span class="koboSpan" id="kobo.481.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.482.1">
      /posts/2
     </span>
    </code>
    <span class="koboSpan" id="kobo.483.1">
     (for posts with different
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.484.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.485.1">
     values) you would need to include dynamic routes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.486.1">
     Of course, React
    </span>
    <a id="_idIndexMarker691">
    </a>
    <span class="koboSpan" id="kobo.487.1">
     Router also supports data fetching with the help of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.488.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.489.1">
     function for dynamic routes:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.490.1">{ 
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.491.1">path</span></span><span class="koboSpan" id="kobo.492.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.493.1">"/posts/:id"</span></span><span class="koboSpan" id="kobo.494.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.495.1">element</span></span><span class="koboSpan" id="kobo.496.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.497.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.498.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.499.1"> /&gt;</span></span><span class="koboSpan" id="kobo.500.1">, 
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.501.1">loader</span></span><span class="koboSpan" id="kobo.502.1">: postDetailsLoader 
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.503.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.504.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.505.1">
     component
    </span>
    <a id="_idIndexMarker692">
    </a>
    <span class="koboSpan" id="kobo.506.1">
     and its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.507.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.508.1">
     function
    </span>
    <a id="_idIndexMarker693">
    </a>
    <span class="koboSpan" id="kobo.509.1">
     can be implemented like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.510.1">import</span></span><span class="koboSpan" id="kobo.511.1"> { useLoaderData } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.512.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.513.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.514.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.515.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.516.1">PostDetails</span></span><span class="koboSpan" id="kobo.517.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.518.1">const</span></span><span class="koboSpan" id="kobo.519.1"> post = </span><span class="hljs-title"><span class="koboSpan" id="kobo.520.1">useLoaderData</span></span><span class="koboSpan" id="kobo.521.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.522.1">return</span></span><span class="koboSpan" id="kobo.523.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.524.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.525.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.526.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.527.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.528.1">"post-details"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.529.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.530.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.531.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.532.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.533.1">{post.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.534.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.535.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.536.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.537.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.538.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.539.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.540.1">{post.body}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.541.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.542.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.543.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.544.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.545.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.546.1">&gt;</span></span><span class="koboSpan" id="kobo.547.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.548.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.549.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.550.1">PostDetails</span></span><span class="koboSpan" id="kobo.551.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.552.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.553.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.554.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.555.1">loader</span></span><span class="koboSpan" id="kobo.556.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.557.1">{ params, request }</span></span><span class="koboSpan" id="kobo.558.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.559.1">console</span></span><span class="koboSpan" id="kobo.560.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.561.1">log</span></span><span class="koboSpan" id="kobo.562.1">(request); 
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.563.1">const</span></span><span class="koboSpan" id="kobo.564.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.565.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.566.1">fetch</span></span><span class="koboSpan" id="kobo.567.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.568.1">'https://jsonplaceholder.typicode.com/posts/'</span></span><span class="koboSpan" id="kobo.569.1"> + params.</span><span class="hljs-property"><span class="koboSpan" id="kobo.570.1">id</span></span><span class="koboSpan" id="kobo.571.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.572.1">if</span></span><span class="koboSpan" id="kobo.573.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.574.1">ok</span></span><span class="koboSpan" id="kobo.575.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.576.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.577.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.578.1">Error</span></span><span class="koboSpan" id="kobo.579.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.580.1">'Could not fetch post for id '</span></span><span class="koboSpan" id="kobo.581.1"> + params.</span><span class="hljs-property"><span class="koboSpan" id="kobo.582.1">id</span></span><span class="koboSpan" id="kobo.583.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.584.1">return</span></span><span class="koboSpan" id="kobo.585.1"> response;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.586.1">
     If it looks very similar to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.587.1">
      Posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.588.1">
     component in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.589.1">
      Loading Data with React Router
     </span>
    </em>
    <span class="koboSpan" id="kobo.590.1">
     section, that’s no coincidence.
    </span>
    <span class="koboSpan" id="kobo.590.2">
     Because the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.591.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.592.1">
     function works in exactly the same way, there is just one extra feature being used to get hold of the dynamic path segment value: a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.593.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.594.1">
     object that’s made available by React Router.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.595.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.596.1">
      You can also explore this code example on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/examples/03-dynamic-routes">
      <span class="url">
       <span class="koboSpan" id="kobo.597.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/examples/03-dynamic-routes
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.598.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.599.1">
     When adding a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.600.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.601.1">
     function to a route definition, React Router calls that function whenever the route becomes active, right before the component is rendered.
    </span>
    <span class="koboSpan" id="kobo.601.2">
     When executing
    </span>
    <a id="_idIndexMarker694">
    </a>
    <span class="koboSpan" id="kobo.602.1">
     that function, React Router passes an object
    </span>
    <a id="_idIndexMarker695">
    </a>
    <span class="koboSpan" id="kobo.603.1">
     that contains extra information as an
    </span>
    <a id="_idIndexMarker696">
    </a>
    <span class="koboSpan" id="kobo.604.1">
     argument to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.605.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.606.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.607.1">
     This object passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.608.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.609.1">
     includes two main properties:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.610.1">
      A
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.611.1">
       request
      </span>
     </code>
     <span class="koboSpan" id="kobo.612.1">
      property that
     </span>
     <a id="_idIndexMarker697">
     </a>
     <span class="koboSpan" id="kobo.613.1">
      contains an object with more
     </span>
     <a id="_idIndexMarker698">
     </a>
     <span class="koboSpan" id="kobo.614.1">
      details about the request that led to the route activation
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.615.1">
      A
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.616.1">
       params
      </span>
     </code>
     <span class="koboSpan" id="kobo.617.1">
      property that
     </span>
     <a id="_idIndexMarker699">
     </a>
     <span class="koboSpan" id="kobo.618.1">
      yields an object containing
     </span>
     <a id="_idIndexMarker700">
     </a>
     <span class="koboSpan" id="kobo.619.1">
      a key-value map of all dynamic route parameters for the active route
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.620.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.621.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.622.1">
     object doesn’t matter for this example and will be discussed in the next section.
    </span>
    <span class="koboSpan" id="kobo.622.2">
     But the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.623.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.624.1">
     object contains an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.625.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.626.1">
     property that carries the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.627.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.628.1">
     value of the post for which the route is loaded.
    </span>
    <span class="koboSpan" id="kobo.628.2">
     The property is named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.629.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.630.1">
     because, in the route definition,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.631.1">
      /posts/:id
     </span>
    </code>
    <span class="koboSpan" id="kobo.632.1">
     was chosen as a path.
    </span>
    <span class="koboSpan" id="kobo.632.2">
     If a different placeholder name had been chosen, a property with that name would have been available on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.633.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.634.1">
     (for example, for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.635.1">
      /posts/:postId
     </span>
    </code>
    <span class="koboSpan" id="kobo.636.1">
     , this would be
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.637.1">
      params.postId
     </span>
    </code>
    <span class="koboSpan" id="kobo.638.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.638.2">
     This behavior is similar to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.639.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.640.1">
     object yielded by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.641.1">
      useParams()
     </span>
    </code>
    <span class="koboSpan" id="kobo.642.1">
     , as explained in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.643.1">
      Chapter 13
     </span>
    </em>
    <span class="koboSpan" id="kobo.644.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.645.1">
      Multipage Apps with React Router
     </span>
    </em>
    <span class="koboSpan" id="kobo.646.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.647.1">
     With the help of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.648.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.649.1">
     object and the post
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.650.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.651.1">
     , the appropriate post
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.652.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.653.1">
     can be included in the outgoing request URL (for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.654.1">
      fetch()
     </span>
    </code>
    <span class="koboSpan" id="kobo.655.1">
     request), and hence the correct post data can be loaded from the backend API.
    </span>
    <span class="koboSpan" id="kobo.655.2">
     Once the data arrives, React Router will render the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.656.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.657.1">
     component and expose the loaded post via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.658.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.659.1">
     Hook.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-278">
    <span class="koboSpan" id="kobo.660.1">
     Loaders, Requests, and Client-Side Code
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.661.1">
     In the preceding section, you learned about a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.662.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.663.1">
     object being provided to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.664.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.665.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.665.2">
     Getting such a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.666.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.667.1">
     object might be confusing because React Router is
    </span>
    <a id="_idIndexMarker701">
    </a>
    <span class="koboSpan" id="kobo.668.1">
     a client-side library—all the code executes in the browser, not on a server.
    </span>
    <span class="koboSpan" id="kobo.668.2">
     Therefore, no request should reach the React app (as HTTP requests are
    </span>
    <a id="_idIndexMarker702">
    </a>
    <span class="koboSpan" id="kobo.669.1">
     sent from the client to the server, not between JavaScript functions on the client side).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.670.1">
     And, indeed, there
    </span>
    <a id="_idIndexMarker703">
    </a>
    <span class="koboSpan" id="kobo.671.1">
     is no request being sent via HTTP.
    </span>
    <span class="koboSpan" id="kobo.671.2">
     Instead, React Router creates a request object via the browser’s built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.672.1">
      Request
     </span>
    </code>
    <span class="koboSpan" id="kobo.673.1">
     interface to use it as a “data vehicle.”
    </span>
    <span class="koboSpan" id="kobo.673.2">
     This request is not sent via HTTP, but it’s used as a value for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.674.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.675.1">
     property on the data object that is passed to your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.676.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.677.1">
     function.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.678.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.679.1">
      For more
     </span>
     <a id="_idIndexMarker704">
     </a>
     <span class="koboSpan" id="kobo.680.1">
      information on the built-in
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.681.1">
       Request
      </span>
     </code>
     <span class="koboSpan" id="kobo.682.1">
      interface, visit
     </span>
     <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">
      <span class="url">
       <span class="koboSpan" id="kobo.683.1">
        https://developer.mozilla.org/en-US/docs/Web/API/Request
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.684.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.685.1">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.686.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.687.1">
     object will be unnecessary in many
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.688.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.689.1">
     functions, but there are occasional scenarios in which you can extract useful information from that object—information that might be needed in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.690.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.691.1">
     to fetch the right data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.692.1">
     For example, you can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.693.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.694.1">
     object and its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.695.1">
      url
     </span>
    </code>
    <span class="koboSpan" id="kobo.696.1">
     property to get access to any search parameters (query parameters) that may be included in the currently active page’s URL:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.697.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.698.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.699.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.700.1">loader</span></span><span class="koboSpan" id="kobo.701.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.702.1">{ request }</span></span><span class="koboSpan" id="kobo.703.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.704.1">// e.g. </span><span class="koboSpan" id="kobo.704.2">for localhost:5173/posts?sort=desc</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.705.1">const</span></span><span class="koboSpan" id="kobo.706.1"> sortDirection = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.707.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.708.1">URL</span></span><span class="koboSpan" id="kobo.709.1">(request.</span><span class="hljs-property"><span class="koboSpan" id="kobo.710.1">url</span></span><span class="koboSpan" id="kobo.711.1">).</span><span class="hljs-property"><span class="koboSpan" id="kobo.712.1">searchParams</span></span><span class="koboSpan" id="kobo.713.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.714.1">get</span></span><span class="koboSpan" id="kobo.715.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.716.1">'sort'</span></span><span class="koboSpan" id="kobo.717.1">);
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.718.1">// Fetch sorted posts, based on local 'sort' query param value</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.719.1">const</span></span><span class="koboSpan" id="kobo.720.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.721.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.722.1">fetch</span></span><span class="koboSpan" id="kobo.723.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.724.1">'https://example.com/posts?sorting='</span></span><span class="koboSpan" id="kobo.725.1"> + sortDirection
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.726.1">return</span></span><span class="koboSpan" id="kobo.727.1"> response;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.728.1">
     In this code snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.729.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.730.1">
     value is used to get hold of a query parameter value that’s used in the React app URL.
    </span>
    <span class="koboSpan" id="kobo.730.2">
     That value is then used in an outgoing request.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.731.1">
     However, it is vital that you keep in mind that the code inside your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.732.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.733.1">
     function, just like
    </span>
    <a id="_idIndexMarker705">
    </a>
    <span class="koboSpan" id="kobo.734.1">
     all your other React code, always executes on the client side.
    </span>
    <span class="koboSpan" id="kobo.734.2">
     If, instead, you
    </span>
    <a id="_idIndexMarker706">
    </a>
    <span class="koboSpan" id="kobo.735.1">
     want to execute code on a server (and, for
    </span>
    <a id="_idIndexMarker707">
    </a>
    <span class="koboSpan" id="kobo.736.1">
     example, fetch data on the server side), you need to use
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.737.1">
      server-side rendering
     </span>
    </strong>
    <span class="koboSpan" id="kobo.738.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.739.1">
      SSR
     </span>
    </strong>
    <span class="koboSpan" id="kobo.740.1">
     ) or some
    </span>
    <a id="_idIndexMarker708">
    </a>
    <span class="koboSpan" id="kobo.741.1">
     React framework that implements SSR, like Next.js.
    </span>
    <span class="koboSpan" id="kobo.741.2">
     SSR and Next.js will be covered in the next chapter,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.742.1">
      Chapter 15
     </span>
    </em>
    <span class="koboSpan" id="kobo.743.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.744.1">
      Server-side Rendering &amp; Building Fullstack Apps with Next.js
     </span>
    </em>
    <span class="koboSpan" id="kobo.745.1">
     , and the chapters thereafter.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-279">
    <span class="koboSpan" id="kobo.746.1">
     Layouts Revisited
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.747.1">
     React Router supports the concept of layout routes.
    </span>
    <span class="koboSpan" id="kobo.747.2">
     These are routes that contain other routes and
    </span>
    <a id="_idIndexMarker709">
    </a>
    <span class="koboSpan" id="kobo.748.1">
     render those other routes as nested children.
    </span>
    <span class="koboSpan" id="kobo.748.2">
     As you may recall, this concept was introduced in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.749.1">
      Chapter 13
     </span>
    </em>
    <span class="koboSpan" id="kobo.750.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.751.1">
      Multipage Apps with React Router
     </span>
    </em>
    <span class="koboSpan" id="kobo.752.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.753.1">
     Conveniently, layout routes can also be used for sharing data across nested routes.
    </span>
    <span class="koboSpan" id="kobo.753.2">
     Consider this example website:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.754.1">
     <img alt="img" src="image/B31339_14_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.755.1">
     Figure 14.2: A website with a header, a sidebar, and some main content
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.756.1">
     This website has a header with a navigation bar, a sidebar showing a list of available posts, and a main area that displays the currently selected blog post.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.757.1">
     This example
    </span>
    <a id="_idIndexMarker710">
    </a>
    <span class="koboSpan" id="kobo.758.1">
     includes two layout routes that are nested into each other:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.759.1">
      The root layout route, which includes the top navigation bar that is shared across all pages
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.760.1">
      A posts layout route, which includes the sidebar and the main content of its child routes (for example, the details for a selected post)
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.761.1">
     The route definitions code looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.762.1">const</span></span><span class="koboSpan" id="kobo.763.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.764.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.765.1">([
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.766.1">path</span></span><span class="koboSpan" id="kobo.767.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.768.1">'/'</span></span><span class="koboSpan" id="kobo.769.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.770.1">element</span></span><span class="koboSpan" id="kobo.771.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.772.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.773.1">Root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.774.1"> /&gt;</span></span><span class="koboSpan" id="kobo.775.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.776.1">// main layout, adds navigation bar</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.777.1">children</span></span><span class="koboSpan" id="kobo.778.1">: [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.779.1">index</span></span><span class="koboSpan" id="kobo.780.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.781.1">true</span></span><span class="koboSpan" id="kobo.782.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.783.1">element</span></span><span class="koboSpan" id="kobo.784.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.785.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.786.1">Welcome</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.787.1"> /&gt;</span></span><span class="koboSpan" id="kobo.788.1"> },
      {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.789.1">path</span></span><span class="koboSpan" id="kobo.790.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.791.1">'/posts'</span></span><span class="koboSpan" id="kobo.792.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.793.1">element</span></span><span class="koboSpan" id="kobo.794.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.795.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.796.1">PostsLayout</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.797.1"> /&gt;</span></span><span class="koboSpan" id="kobo.798.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.799.1">// posts layout, adds posts sidebar</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.800.1">loader</span></span><span class="koboSpan" id="kobo.801.1">: postsLoader,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.802.1">children</span></span><span class="koboSpan" id="kobo.803.1">: [
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.804.1">index</span></span><span class="koboSpan" id="kobo.805.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.806.1">true</span></span><span class="koboSpan" id="kobo.807.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.808.1">element</span></span><span class="koboSpan" id="kobo.809.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.810.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.811.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.812.1"> /&gt;</span></span><span class="koboSpan" id="kobo.813.1"> },
          { 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.814.1">path</span></span><span class="koboSpan" id="kobo.815.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.816.1">':id'</span></span><span class="koboSpan" id="kobo.817.1">, 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.818.1">element</span></span><span class="koboSpan" id="kobo.819.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.820.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.821.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.822.1"> /&gt;</span></span><span class="koboSpan" id="kobo.823.1">, 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.824.1">loader</span></span><span class="koboSpan" id="kobo.825.1">: postDetailsLoader 
          },
        ],
      },
    ],
  },
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.826.1">
     With this setup, both the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.827.1">
      &lt;Posts /&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.828.1">
     and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.829.1">
      &lt;PostDetails /&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.830.1">
     components are rendered next to the sidebar (since the sidebar is part of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.831.1">
      &lt;PostsLayout /&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.832.1">
     element).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.833.1">
     The interesting part is that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.834.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.835.1">
     route (i.e., the layout route) loads the post data, as it has the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.836.1">
      postsLoader
     </span>
    </code>
    <span class="koboSpan" id="kobo.837.1">
     assigned to it, and so the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.838.1">
      PostsLayout
     </span>
    </code>
    <span class="koboSpan" id="kobo.839.1">
     component file looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.840.1">import</span></span><span class="koboSpan" id="kobo.841.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.842.1">Outlet</span></span><span class="koboSpan" id="kobo.843.1">, useLoaderData } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.844.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.845.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.846.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.847.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.848.1">PostsList</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.849.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.850.1">'../components/PostsList.jsx'</span></span><span class="koboSpan" id="kobo.851.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.852.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.853.1">PostsLayout</span></span><span class="koboSpan" id="kobo.854.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.855.1">const</span></span><span class="koboSpan" id="kobo.856.1"> loadedPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.857.1">useLoaderData</span></span><span class="koboSpan" id="kobo.858.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.859.1">return</span></span><span class="koboSpan" id="kobo.860.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.861.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.862.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.863.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.864.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.865.1">"posts-layout"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.866.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.867.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.868.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.869.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.870.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.871.1">PostsList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.872.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.873.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.874.1">{loadedPosts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.875.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.876.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.877.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.878.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.879.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.880.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.881.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.882.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.883.1">Outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.884.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.885.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.886.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.887.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.888.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.889.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.890.1">&gt;</span></span><span class="koboSpan" id="kobo.891.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.892.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.893.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.894.1">PostsLayout</span></span><span class="koboSpan" id="kobo.895.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.896.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.897.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.898.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.899.1">loader</span></span><span class="koboSpan" id="kobo.900.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.901.1">const</span></span><span class="koboSpan" id="kobo.902.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.903.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.904.1">fetch</span></span><span class="koboSpan" id="kobo.905.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.906.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.907.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.908.1">if</span></span><span class="koboSpan" id="kobo.909.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.910.1">ok</span></span><span class="koboSpan" id="kobo.911.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.912.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.913.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.914.1">Error</span></span><span class="koboSpan" id="kobo.915.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.916.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.917.1">Could not fetch posts'</span></span><span class="koboSpan" id="kobo.918.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.919.1">return</span></span><span class="koboSpan" id="kobo.920.1"> response;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.921.1">
     Since layout
    </span>
    <a id="_idIndexMarker711">
    </a>
    <span class="koboSpan" id="kobo.922.1">
     routes are also regular routes, you can add
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.923.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.924.1">
     functions and use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.925.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.926.1">
     just as you could in any other route.
    </span>
    <span class="koboSpan" id="kobo.926.2">
     However, because layout routes are activated for multiple child routes, their data is also displayed for different routes.
    </span>
    <span class="koboSpan" id="kobo.926.3">
     In the preceding example, the list of blog posts is always displayed on the left side of the screen, no matter if a user visits
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.927.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.928.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.929.1">
      /posts/10
     </span>
    </code>
    <span class="koboSpan" id="kobo.930.1">
     :
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.931.1">
     <img alt="img" src="image/B31339_14_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.932.1">
     Figure 14.3: The same layout and data are used for different child routes
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.933.1">
     In this screenshot, the layout and data used do not change as different child routes are activated.
    </span>
    <span class="koboSpan" id="kobo.933.2">
     React Router
    </span>
    <a id="_idIndexMarker712">
    </a>
    <span class="koboSpan" id="kobo.934.1">
     also avoids unnecessary data re-fetching (for the blog posts list data) as you switch between child routes.
    </span>
    <span class="koboSpan" id="kobo.934.2">
     It’s smart enough to realize that the surrounding layout hasn’t changed.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-280">
    <span class="koboSpan" id="kobo.935.1">
     Reusing Data across Routes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.936.1">
     Layout routes
    </span>
    <a id="_idIndexMarker713">
    </a>
    <span class="koboSpan" id="kobo.937.1">
     do not just help you share components and markup.
    </span>
    <span class="koboSpan" id="kobo.937.2">
     They also allow you to load and share data across a layout route and its child routes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.938.1">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.939.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.940.1">
     component (that is, the component that’s rendered for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.941.1">
      /posts/:id
     </span>
    </code>
    <span class="koboSpan" id="kobo.942.1">
     route) needs the data for a single post, and that data can be retrieved via a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.943.1">
      loader
     </span>
    </code>
    <span class="koboSpan" id="kobo.944.1">
     attached to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.945.1">
      /posts/:id
     </span>
    </code>
    <span class="koboSpan" id="kobo.946.1">
     route:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.947.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.948.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.949.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.950.1">loader</span></span><span class="koboSpan" id="kobo.951.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.952.1">{ params }</span></span><span class="koboSpan" id="kobo.953.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.954.1">const</span></span><span class="koboSpan" id="kobo.955.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.956.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.957.1">fetch</span></span><span class="koboSpan" id="kobo.958.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.959.1">'https://jsonplaceholder.typicode.com/posts/'</span></span><span class="koboSpan" id="kobo.960.1"> + params.</span><span class="hljs-property"><span class="koboSpan" id="kobo.961.1">id</span></span><span class="koboSpan" id="kobo.962.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.963.1">if</span></span><span class="koboSpan" id="kobo.964.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.965.1">ok</span></span><span class="koboSpan" id="kobo.966.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.967.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.968.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.969.1">Error</span></span><span class="koboSpan" id="kobo.970.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.971.1">'Could not fetch post for id '</span></span><span class="koboSpan" id="kobo.972.1"> + params.</span><span class="hljs-property"><span class="koboSpan" id="kobo.973.1">id</span></span><span class="koboSpan" id="kobo.974.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.975.1">return</span></span><span class="koboSpan" id="kobo.976.1"> response;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.977.1">
     This example was discussed earlier in this chapter in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.978.1">
      Loading Data for Dynamic Routes
     </span>
    </em>
    <span class="koboSpan" id="kobo.979.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.979.2">
     This approach is fine, but in some situations, this extra HTTP request can be avoided.
    </span>
    <span class="koboSpan" id="kobo.979.3">
     For example, the following route configuration can be simplified, and the extra
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.980.1">
      postDetailsLoader
     </span>
    </code>
    <span class="koboSpan" id="kobo.981.1">
     on the child route can be avoided:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.982.1">const</span></span><span class="koboSpan" id="kobo.983.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.984.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.985.1">([
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.986.1">path</span></span><span class="koboSpan" id="kobo.987.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.988.1">'/'</span></span><span class="koboSpan" id="kobo.989.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.990.1">element</span></span><span class="koboSpan" id="kobo.991.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.992.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.993.1">Root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.994.1"> /&gt;</span></span><span class="koboSpan" id="kobo.995.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.996.1">// main layout, adds navigation bar</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.997.1">children</span></span><span class="koboSpan" id="kobo.998.1">: [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.999.1">index</span></span><span class="koboSpan" id="kobo.1000.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1001.1">true</span></span><span class="koboSpan" id="kobo.1002.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1003.1">element</span></span><span class="koboSpan" id="kobo.1004.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1005.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1006.1">Welcome</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1007.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1008.1"> },
      {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1009.1">path</span></span><span class="koboSpan" id="kobo.1010.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1011.1">'/posts'</span></span><span class="koboSpan" id="kobo.1012.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1013.1">element</span></span><span class="koboSpan" id="kobo.1014.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1015.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1016.1">PostsLayout</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1017.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1018.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1019.1">// posts layout, adds posts sidebar</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.1020.1">loader</span></span><span class="koboSpan" id="kobo.1021.1">: postsLoader,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1022.1">children</span></span><span class="koboSpan" id="kobo.1023.1">: [
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1024.1">index</span></span><span class="koboSpan" id="kobo.1025.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1026.1">true</span></span><span class="koboSpan" id="kobo.1027.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1028.1">element</span></span><span class="koboSpan" id="kobo.1029.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1030.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1031.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1032.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1033.1"> },
          { 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1034.1">path</span></span><span class="koboSpan" id="kobo.1035.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1036.1">':id'</span></span><span class="koboSpan" id="kobo.1037.1">, 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1038.1">element</span></span><span class="koboSpan" id="kobo.1039.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1040.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1041.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1042.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1043.1">, 
            </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1044.1">loader</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1045.1">: postDetailsLoader</span></strong></span> <span class="hljs-comment"><span class="koboSpan" id="kobo.1046.1">// can be removed</span></span><span class="koboSpan" id="kobo.1047.1">
          },
        ],
      },
    ],
  },
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1048.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1049.1">
      PostsLayout
     </span>
    </code>
    <span class="koboSpan" id="kobo.1050.1">
     route already fetches a list of all posts.
    </span>
    <span class="koboSpan" id="kobo.1050.2">
     That layout component is also active for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1051.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.1052.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.1052.2">
     In such a scenario, fetching a single post is unnecessary, since all the data has already been fetched for the list of posts.
    </span>
    <span class="koboSpan" id="kobo.1052.3">
     Of course, a specific
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1053.1">
      postDetailsLoader
     </span>
    </code>
    <span class="koboSpan" id="kobo.1054.1">
     loader for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1055.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.1056.1">
     child route would be required if the
    </span>
    <a id="_idIndexMarker714">
    </a>
    <span class="koboSpan" id="kobo.1057.1">
     request for the list of posts (by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1058.1">
      postsLoader
     </span>
    </code>
    <span class="koboSpan" id="kobo.1059.1">
     on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1060.1">
      PostsLayout
     </span>
    </code>
    <span class="koboSpan" id="kobo.1061.1">
     route) didn’t yield all the data required by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1062.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.1063.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1064.1">
     But if all the data is available, React Router allows you to tap into the loader data of a parent route component via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1065.1">
      useRouteLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1066.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1067.1">
     This Hook can be used like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1068.1">const</span></span><span class="koboSpan" id="kobo.1069.1"> posts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1070.1">useRouteLoaderData</span></span><span class="koboSpan" id="kobo.1071.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1072.1">'posts'</span></span><span class="koboSpan" id="kobo.1073.1">);
</span></code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1074.1">
      useRouteLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1075.1">
     requires a route identifier as an argument.
    </span>
    <span class="koboSpan" id="kobo.1075.2">
     It requires an identifier assigned to the ancestor route that contains the data that should be reused.
    </span>
    <span class="koboSpan" id="kobo.1075.3">
     You can assign such an identifier via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1076.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1077.1">
     property to your routes as part of the route definitions code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1078.1">const</span></span><span class="koboSpan" id="kobo.1079.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1080.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.1081.1">([
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1082.1">path</span></span><span class="koboSpan" id="kobo.1083.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1084.1">'/'</span></span><span class="koboSpan" id="kobo.1085.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1086.1">element</span></span><span class="koboSpan" id="kobo.1087.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1088.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1089.1">Root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1090.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1091.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1092.1">// main layout, adds navigation bar</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1093.1">children</span></span><span class="koboSpan" id="kobo.1094.1">: [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1095.1">index</span></span><span class="koboSpan" id="kobo.1096.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1097.1">true</span></span><span class="koboSpan" id="kobo.1098.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1099.1">element</span></span><span class="koboSpan" id="kobo.1100.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1101.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1102.1">Welcome</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1103.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1104.1"> },
      {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1105.1">path</span></span><span class="koboSpan" id="kobo.1106.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1107.1">'/posts'</span></span><span class="koboSpan" id="kobo.1108.1">,
        </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1109.1">id</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1110.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1111.1">'posts'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1112.1">, </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1113.1">// the id value is up to you</span></strong></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.1114.1">element</span></span><span class="koboSpan" id="kobo.1115.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1116.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1117.1">PostsLayout</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1118.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1119.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1120.1">// posts layout, adds posts sidebar</span></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.1121.1">loader</span></span><span class="koboSpan" id="kobo.1122.1">: postsLoader,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1123.1">children</span></span><span class="koboSpan" id="kobo.1124.1">: [
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1125.1">index</span></span><span class="koboSpan" id="kobo.1126.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1127.1">true</span></span><span class="koboSpan" id="kobo.1128.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1129.1">element</span></span><span class="koboSpan" id="kobo.1130.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1131.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1132.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1133.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1134.1"> },
          { 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1135.1">path</span></span><span class="koboSpan" id="kobo.1136.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1137.1">':id'</span></span><span class="koboSpan" id="kobo.1138.1">, 
            </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1139.1">element</span></span><span class="koboSpan" id="kobo.1140.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1141.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1142.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1143.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1144.1">, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1145.1">// details loader was removed</span></span><span class="koboSpan" id="kobo.1146.1">
          },
        ],
      },
    ],
  },
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1147.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1148.1">
      useRouteLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1149.1">
     Hook then
    </span>
    <a id="_idIndexMarker715">
    </a>
    <span class="koboSpan" id="kobo.1150.1">
     returns the same data
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1151.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1152.1">
     yields in that route to which you added the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1153.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1154.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1154.2">
     In this example, it would
    </span>
    <a id="_idIndexMarker716">
    </a>
    <span class="koboSpan" id="kobo.1155.1">
     provide a list of blog posts.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1156.1">
     In
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1157.1">
      PostDetails
     </span>
    </code>
    <span class="koboSpan" id="kobo.1158.1">
     , this Hook can therefore be used like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1159.1">import</span></span><span class="koboSpan" id="kobo.1160.1"> { </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1161.1">useParams</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1162.1">useRouteLoaderData</span></strong></span><span class="koboSpan" id="kobo.1163.1">,  } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1164.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1165.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.1166.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1167.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1168.1">PostDetails</span></span><span class="koboSpan" id="kobo.1169.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1170.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1171.1"> params = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1172.1">useParams</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1173.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1174.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1175.1"> posts = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1176.1">useRouteLoaderData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1177.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1178.1">'posts'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1179.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1180.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1181.1"> post = posts.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1182.1">find</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1183.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1184.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1185.1">post</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1186.1">) =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1187.1"> post.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1188.1">id</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1189.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1190.1">toString</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1191.1">() === params.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1192.1">id</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1193.1">);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1194.1">return</span></span><span class="koboSpan" id="kobo.1195.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1196.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1197.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1198.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1199.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1200.1">"post-details"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1201.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1202.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1203.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1204.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1205.1">{post.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1206.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1207.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1208.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1209.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1210.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1211.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1212.1">{post.body}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1213.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1214.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1215.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1216.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1217.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1218.1">&gt;</span></span><span class="koboSpan" id="kobo.1219.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1220.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1221.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1222.1">PostDetails</span></span><span class="koboSpan" id="kobo.1223.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1224.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1225.1">
      useParams()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1226.1">
     Hook is used to
    </span>
    <a id="_idIndexMarker717">
    </a>
    <span class="koboSpan" id="kobo.1227.1">
     get access to the dynamic route parameter value, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1228.1">
      find()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1229.1">
     method is used on the list of posts to identify a single post with a fitting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1230.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1231.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.1231.2">
     In this example, you would thus avoid sending an unnecessary HTTP request by reusing data that’s already available.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1232.1">
     Therefore, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1233.1">
      postDetailsLoader
     </span>
    </code>
    <span class="koboSpan" id="kobo.1234.1">
     that was part of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1235.1">
      /posts/:id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1236.1">
     route definition can be removed.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-281">
    <span class="koboSpan" id="kobo.1237.1">
     Handling Errors
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1238.1">
     In the first
    </span>
    <a id="_idIndexMarker718">
    </a>
    <span class="koboSpan" id="kobo.1239.1">
     example at the very beginning of this chapter (where the HTTP request was sent with the help of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1240.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1241.1">
     ), the code did not just handle the success case but also possible errors.
    </span>
    <span class="koboSpan" id="kobo.1241.2">
     In all the React Router-based examples since then, error handling has been omitted.
    </span>
    <span class="koboSpan" id="kobo.1241.3">
     Error handling was not discussed up to this point because, while React Router plays an important role in error handling, it’s vital to first gain a solid understanding of how React Router works in general and how it helps with data fetching.
    </span>
    <span class="koboSpan" id="kobo.1241.4">
     But, of course, errors can’t always be avoided and definitely should not be ignored.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1242.1">
     Thankfully, handling errors is also very straightforward and easy when using React Router’s data capabilities.
    </span>
    <span class="koboSpan" id="kobo.1242.2">
     You can set an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1243.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1244.1">
     property on your route definitions and
    </span>
    <a id="_idIndexMarker719">
    </a>
    <span class="koboSpan" id="kobo.1245.1">
     define the element that should be rendered when an error occurs:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1246.1">// ... </span><span class="koboSpan" id="kobo.1246.2">other imports</span></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1247.1">import</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1248.1">Error</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1249.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1250.1">'./components/Error.jsx'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1251.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1252.1">const</span></span><span class="koboSpan" id="kobo.1253.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1254.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.1255.1">([
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1256.1">path</span></span><span class="koboSpan" id="kobo.1257.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1258.1">'/'</span></span><span class="koboSpan" id="kobo.1259.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1260.1">element</span></span><span class="koboSpan" id="kobo.1261.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1262.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1263.1">Root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1264.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1265.1">,
    </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1266.1">errorElement</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1267.1">: </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1268.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1269.1">Error</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1270.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1271.1">,</span></strong></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1272.1">children</span></span><span class="koboSpan" id="kobo.1273.1">: [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1274.1">index</span></span><span class="koboSpan" id="kobo.1275.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1276.1">true</span></span><span class="koboSpan" id="kobo.1277.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1278.1">element</span></span><span class="koboSpan" id="kobo.1279.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1280.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1281.1">Welcome</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1282.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1283.1"> },
      {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1284.1">path</span></span><span class="koboSpan" id="kobo.1285.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1286.1">'/posts'</span></span><span class="koboSpan" id="kobo.1287.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1288.1">id</span></span><span class="koboSpan" id="kobo.1289.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1290.1">'posts'</span></span><span class="koboSpan" id="kobo.1291.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1292.1">element</span></span><span class="koboSpan" id="kobo.1293.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1294.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1295.1">PostsLayout</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1296.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1297.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1298.1">loader</span></span><span class="koboSpan" id="kobo.1299.1">: postsLoader,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1300.1">children</span></span><span class="koboSpan" id="kobo.1301.1">: [
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1302.1">index</span></span><span class="koboSpan" id="kobo.1303.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1304.1">true</span></span><span class="koboSpan" id="kobo.1305.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1306.1">element</span></span><span class="koboSpan" id="kobo.1307.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1308.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1309.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1310.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1311.1"> },
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1312.1">path</span></span><span class="koboSpan" id="kobo.1313.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1314.1">':id'</span></span><span class="koboSpan" id="kobo.1315.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1316.1">element</span></span><span class="koboSpan" id="kobo.1317.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1318.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1319.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1320.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1321.1"> },
        ],
      },
    ],
  },
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1322.1">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1323.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1324.1">
     property can be set on any route definition of your choice, or even multiple route definitions simultaneously.
    </span>
    <span class="koboSpan" id="kobo.1324.2">
     React Router will render the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1325.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1326.1">
     of the route closest to the place where the error was thrown.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1327.1">
     In the preceding snippet, no matter which route produced an error, it would always be the root route’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1328.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1329.1">
     that was displayed (since that’s the only route definition with an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1330.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1331.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.1331.2">
     But if you also added an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1332.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1333.1">
     to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1334.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1335.1">
     route, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1336.1">
      :id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1337.1">
     route produced an error, it would be the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1338.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1339.1">
     of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1340.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1341.1">
     route that was shown on the screen, as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1342.1">const</span></span><span class="koboSpan" id="kobo.1343.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1344.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.1345.1">([
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1346.1">path</span></span><span class="koboSpan" id="kobo.1347.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1348.1">'/'</span></span><span class="koboSpan" id="kobo.1349.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1350.1">element</span></span><span class="koboSpan" id="kobo.1351.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1352.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1353.1">Root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1354.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1355.1">,
    </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1356.1">errorElement</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1357.1">: </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1358.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1359.1">Error</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1360.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1361.1">, </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1362.1">// for all errors not handled elsewhere</span></strong></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.1363.1">children</span></span><span class="koboSpan" id="kobo.1364.1">: [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1365.1">index</span></span><span class="koboSpan" id="kobo.1366.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1367.1">true</span></span><span class="koboSpan" id="kobo.1368.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1369.1">element</span></span><span class="koboSpan" id="kobo.1370.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1371.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1372.1">Welcome</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1373.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1374.1"> },
      {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1375.1">path</span></span><span class="koboSpan" id="kobo.1376.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1377.1">'/posts'</span></span><span class="koboSpan" id="kobo.1378.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1379.1">id</span></span><span class="koboSpan" id="kobo.1380.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1381.1">'posts'</span></span><span class="koboSpan" id="kobo.1382.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1383.1">element</span></span><span class="koboSpan" id="kobo.1384.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1385.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1386.1">PostsLayout</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1387.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1388.1">,
        </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1389.1">// used if /posts or /posts/:id throws an error</span></span>
        <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1390.1">errorElement</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1391.1">: </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1392.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1393.1">PostsError</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1394.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1395.1">, </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1396.1">// handles /posts related errors</span></strong></span>
        <span class="hljs-attr"><span class="koboSpan" id="kobo.1397.1">loader</span></span><span class="koboSpan" id="kobo.1398.1">: postsLoader,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1399.1">children</span></span><span class="koboSpan" id="kobo.1400.1">: [
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1401.1">index</span></span><span class="koboSpan" id="kobo.1402.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1403.1">true</span></span><span class="koboSpan" id="kobo.1404.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1405.1">element</span></span><span class="koboSpan" id="kobo.1406.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1407.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1408.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1409.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1410.1"> },
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1411.1">path</span></span><span class="koboSpan" id="kobo.1412.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1413.1">':id'</span></span><span class="koboSpan" id="kobo.1414.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1415.1">element</span></span><span class="koboSpan" id="kobo.1416.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1417.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1418.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1419.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1420.1"> },
        ],
      },
    ],
  },
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1421.1">
     This allows you, the developer, to set up fine-grained error handling.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1422.1">
     Inside the
    </span>
    <a id="_idIndexMarker720">
    </a>
    <span class="koboSpan" id="kobo.1423.1">
     component used as a value for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1424.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1425.1">
     , you can get access to the error that was thrown via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1426.1">
      useRouteError()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1427.1">
     Hook:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1428.1">import</span></span><span class="koboSpan" id="kobo.1429.1"> { useRouteError } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1430.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1431.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.1432.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1433.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1434.1">Error</span></span><span class="koboSpan" id="kobo.1435.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1436.1">const</span></span><span class="koboSpan" id="kobo.1437.1"> error = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1438.1">useRouteError</span></span><span class="koboSpan" id="kobo.1439.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1440.1">return</span></span><span class="koboSpan" id="kobo.1441.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1442.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1443.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1444.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1445.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1446.1">Oh no!</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1447.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1448.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1449.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1450.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1451.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1452.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1453.1">An error occurred</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1454.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1455.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1456.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1457.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1458.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1459.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1460.1">{error.message}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1461.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1462.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1463.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1464.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1465.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1466.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1467.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1468.1">Error</span></span><span class="koboSpan" id="kobo.1469.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1470.1">
     With this simple yet effective error-handling solution, React Router allows you to avoid managing error
    </span>
    <a id="_idIndexMarker721">
    </a>
    <span class="koboSpan" id="kobo.1471.1">
     states yourself.
    </span>
    <span class="koboSpan" id="kobo.1471.2">
     Instead, you simply define a standard React element (via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1472.1">
      element
     </span>
    </code>
    <span class="koboSpan" id="kobo.1473.1">
     prop) that should be displayed when things go right and an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1474.1">
      errorElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.1475.1">
     to be displayed if things go wrong.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-282">
    <span class="koboSpan" id="kobo.1476.1">
     Onward to Data Submission
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1477.1">
     Thus far, you’ve learned a lot about data fetching.
    </span>
    <span class="koboSpan" id="kobo.1477.2">
     But as mentioned earlier in this chapter, React Router
    </span>
    <a id="_idIndexMarker722">
    </a>
    <span class="koboSpan" id="kobo.1478.1">
     also helps with data submission.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1479.1">
     Consider the following example component:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1480.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1481.1">NewPost</span></span><span class="koboSpan" id="kobo.1482.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1483.1">return</span></span><span class="koboSpan" id="kobo.1484.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1485.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1486.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1487.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1488.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1489.1">"post-form"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1490.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1491.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1492.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1493.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1494.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1495.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1496.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1497.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1498.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1499.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1500.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1501.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1502.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1503.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1504.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1505.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1506.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1507.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1508.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1509.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1510.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1511.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1512.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1513.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1514.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1515.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1516.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1517.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1518.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1519.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1520.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1521.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1522.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1523.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1524.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1525.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1526.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1527.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1528.1">Text</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1529.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1530.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1531.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1532.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1533.1">textarea</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1534.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1535.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1536.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1537.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1538.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1539.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1540.1">rows</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1541.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1542.1">{3}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1543.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1544.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1545.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1546.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1547.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1548.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1549.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1550.1">Save Post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1551.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1552.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1553.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1554.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1555.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1556.1">&gt;</span></span><span class="koboSpan" id="kobo.1557.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1558.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1559.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1560.1">NewPost</span></span><span class="koboSpan" id="kobo.1561.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1562.1">
     This component renders a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1563.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1564.1">
     element that allows users to enter the details for a new post.
    </span>
    <span class="koboSpan" id="kobo.1564.2">
     Due to the following route configuration, the component is displayed whenever the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1565.1">
      /posts/new
     </span>
    </code>
    <span class="koboSpan" id="kobo.1566.1">
     route becomes active:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1567.1">const</span></span><span class="koboSpan" id="kobo.1568.1"> router = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1569.1">createBrowserRouter</span></span><span class="koboSpan" id="kobo.1570.1">([
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1571.1">path</span></span><span class="koboSpan" id="kobo.1572.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1573.1">'/'</span></span><span class="koboSpan" id="kobo.1574.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1575.1">element</span></span><span class="koboSpan" id="kobo.1576.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1577.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1578.1">Root</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1579.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1580.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1581.1">errorElement</span></span><span class="koboSpan" id="kobo.1582.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1583.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1584.1">Error</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1585.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1586.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1587.1">children</span></span><span class="koboSpan" id="kobo.1588.1">: [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1589.1">index</span></span><span class="koboSpan" id="kobo.1590.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1591.1">true</span></span><span class="koboSpan" id="kobo.1592.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1593.1">element</span></span><span class="koboSpan" id="kobo.1594.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1595.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1596.1">Welcome</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1597.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1598.1"> },
      {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1599.1">path</span></span><span class="koboSpan" id="kobo.1600.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1601.1">'/posts'</span></span><span class="koboSpan" id="kobo.1602.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1603.1">id</span></span><span class="koboSpan" id="kobo.1604.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1605.1">'posts'</span></span><span class="koboSpan" id="kobo.1606.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1607.1">element</span></span><span class="koboSpan" id="kobo.1608.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1609.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1610.1">PostsLayout</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1611.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1612.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1613.1">loader</span></span><span class="koboSpan" id="kobo.1614.1">: postsLoader,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1615.1">children</span></span><span class="koboSpan" id="kobo.1616.1">: [
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1617.1">index</span></span><span class="koboSpan" id="kobo.1618.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1619.1">true</span></span><span class="koboSpan" id="kobo.1620.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1621.1">element</span></span><span class="koboSpan" id="kobo.1622.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1623.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1624.1">Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1625.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1626.1"> },
          { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1627.1">path</span></span><span class="koboSpan" id="kobo.1628.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1629.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1630.1">:id'</span></span><span class="koboSpan" id="kobo.1631.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1632.1">element</span></span><span class="koboSpan" id="kobo.1633.1">: &lt;</span><span class="hljs-name"><span class="koboSpan" id="kobo.1634.1">PostDetails</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1635.1"> /&gt; },</span></span>
          <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1636.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1637.1">path</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1638.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1639.1">'new'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1640.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1641.1">element</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1642.1">: &lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1643.1">NewPost</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1644.1"> /&gt; },</span></strong></span><span class="koboSpan" id="kobo.1645.1">
        ],
      },
    ],
  },
]);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1646.1">
     Without React
    </span>
    <a id="_idIndexMarker723">
    </a>
    <span class="koboSpan" id="kobo.1647.1">
     Router’s data-related features, you might handle form submission like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1648.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1649.1">NewPost</span></span><span class="koboSpan" id="kobo.1650.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1651.1">const</span></span><span class="koboSpan" id="kobo.1652.1"> navigate = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1653.1">useNavigate</span></span><span class="koboSpan" id="kobo.1654.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1655.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1656.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1657.1">submitAction</span></span><span class="koboSpan" id="kobo.1658.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1659.1">formData</span></span><span class="koboSpan" id="kobo.1660.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1661.1">const</span></span><span class="koboSpan" id="kobo.1662.1"> enteredTitle = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1663.1">get</span></span><span class="koboSpan" id="kobo.1664.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1665.1">'title'</span></span><span class="koboSpan" id="kobo.1666.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1667.1">const</span></span><span class="koboSpan" id="kobo.1668.1"> enteredText = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1669.1">get</span></span><span class="koboSpan" id="kobo.1670.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1671.1">'text'</span></span><span class="koboSpan" id="kobo.1672.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1673.1">const</span></span><span class="koboSpan" id="kobo.1674.1"> postData = {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1675.1">title</span></span><span class="koboSpan" id="kobo.1676.1">: enteredTitle,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1677.1">text</span></span><span class="koboSpan" id="kobo.1678.1">: enteredText
    };
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1679.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1680.1">fetch</span></span><span class="koboSpan" id="kobo.1681.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1682.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1683.1">https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1684.1">, {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1685.1">method</span></span><span class="koboSpan" id="kobo.1686.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1687.1">'POST'</span></span><span class="koboSpan" id="kobo.1688.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1689.1">body</span></span><span class="koboSpan" id="kobo.1690.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1691.1">JSON</span></span><span class="koboSpan" id="kobo.1692.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1693.1">stringify</span></span><span class="koboSpan" id="kobo.1694.1">(postData),
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1695.1">headers</span></span><span class="koboSpan" id="kobo.1696.1">: {</span><span class="hljs-string"><span class="koboSpan" id="kobo.1697.1">'Content-Type'</span></span><span class="koboSpan" id="kobo.1698.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1699.1">'application/json'</span></span><span class="koboSpan" id="kobo.1700.1">}
    });
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1701.1">navigate</span></span><span class="koboSpan" id="kobo.1702.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1703.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1704.1">/posts'</span></span><span class="koboSpan" id="kobo.1705.1">);
  } 
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1706.1">return</span></span><span class="koboSpan" id="kobo.1707.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1708.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1709.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1710.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1711.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1712.1">{submitAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1713.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1714.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1715.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1716.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1717.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1718.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1719.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1720.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1721.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1722.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1723.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1724.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1725.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1726.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1727.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1728.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1729.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1730.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1731.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1732.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1733.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1734.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1735.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1736.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1737.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1738.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1739.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1740.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1741.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1742.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1743.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1744.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1745.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1746.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1747.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1748.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1749.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1750.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1751.1">Text</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1752.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1753.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1754.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1755.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1756.1">textarea</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1757.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1758.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1759.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1760.1">rows</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1761.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1762.1">{3}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1763.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1764.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1765.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1766.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1767.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1768.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1769.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1770.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1771.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1772.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1773.1">Save Post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1774.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1775.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1776.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1777.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1778.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1779.1">&gt;</span></span><span class="koboSpan" id="kobo.1780.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1781.1">
     Just as before when fetching data, this requires quite a bit of code and logic to be added to the component function.
    </span>
    <span class="koboSpan" id="kobo.1781.2">
     You must manually extract the submitted data, send the HTTP request, and navigate to a different page after receiving an HTTP response.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1782.1">
     In addition, you might also need to manage loading state and potential errors (excluded in the preceding example).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1783.1">
     Again, React
    </span>
    <a id="_idIndexMarker724">
    </a>
    <span class="koboSpan" id="kobo.1784.1">
     Router offers some help.
    </span>
    <span class="koboSpan" id="kobo.1784.2">
     Where a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1785.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1786.1">
     function can be added to handle data loading, an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1787.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1788.1">
     function can be defined to handle data submission.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1789.1">
     When using the new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1790.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1791.1">
     function, the preceding example component looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1792.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1793.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1794.1">Form</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1795.1">, redirect } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1796.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1797.1">'react-router-dom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1798.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1799.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1800.1">NewPost</span></span><span class="koboSpan" id="kobo.1801.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1802.1">return</span></span><span class="koboSpan" id="kobo.1803.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1804.1">&lt;</span></span><span class="code-highlight"><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1805.1">Form</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1806.1">method</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1807.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1808.1">"post"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1809.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1810.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1811.1">"post-form"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1812.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1813.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1814.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1815.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1816.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1817.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1818.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1819.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1820.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1821.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1822.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1823.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1824.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1825.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1826.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1827.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1828.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1829.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1830.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1831.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1832.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1833.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1834.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1835.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1836.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1837.1">/&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1838.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1839.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1840.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1841.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1842.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1843.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1844.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1845.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1846.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1847.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1848.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1849.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1850.1">Text</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1851.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1852.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1853.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1854.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1855.1">textarea</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1856.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1857.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1858.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1859.1">rows</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1860.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1861.1">{3}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1862.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1863.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1864.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1865.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1866.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1867.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1868.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1869.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1870.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1871.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1872.1">Save Post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1873.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1874.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1875.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1876.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1877.1">Form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1878.1">&gt;</span></span><span class="koboSpan" id="kobo.1879.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1880.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1881.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1882.1">NewPost</span></span><span class="koboSpan" id="kobo.1883.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1884.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1885.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1886.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1887.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1888.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1889.1">{ request }</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1890.1">) {</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1891.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1892.1"> formData = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1893.1">await</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1894.1"> request.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1895.1">formData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1896.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1897.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1898.1"> enteredTitle = formData.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1899.1">get</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1900.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1901.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1902.1">title'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1903.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1904.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1905.1"> enteredText = formData.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1906.1">get</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1907.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1908.1">'text'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1909.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1910.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1911.1"> postData = {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1912.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1913.1">: enteredTitle,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1914.1">text</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1915.1">: enteredText</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1916.1">};</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1917.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1918.1">fetch</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1919.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1920.1">'https://jsonplaceholder.typicode.com/posts'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1921.1">, {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1922.1">method</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1923.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1924.1">'POST'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1925.1">,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1926.1">body</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1927.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1928.1">JSON</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1929.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1930.1">stringify</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1931.1">(postData),</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1932.1">headers</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1933.1">: { </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1934.1">'Content-Type'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1935.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1936.1">'application/json'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1937.1"> },</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1938.1">});</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1939.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1940.1">redirect</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1941.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1942.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1943.1">/posts'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1944.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1945.1">}</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1946.1">
     This code might be similar in length but it has the advantage of moving all the data submission
    </span>
    <a id="_idIndexMarker725">
    </a>
    <span class="koboSpan" id="kobo.1947.1">
     logic out of the component function into a special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1948.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1949.1">
     function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1950.1">
     Besides the addition of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1951.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1952.1">
     function, the example code snippet includes the following important changes and features:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1953.1">
      A
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1954.1">
       &lt;Form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1955.1">
      component that’s used instead of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1956.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1957.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1958.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1959.1">
       method
      </span>
     </code>
     <span class="koboSpan" id="kobo.1960.1">
      prop is set on the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1961.1">
       &lt;Form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1962.1">
      (to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1963.1">
       "post"
      </span>
     </code>
     <span class="koboSpan" id="kobo.1964.1">
      ).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1965.1">
      The submitted data is extracted as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1966.1">
       FormData
      </span>
     </code>
     <span class="koboSpan" id="kobo.1967.1">
      by calling
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1968.1">
       request.formData()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1969.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1970.1">
      The user is redirected via a newly added
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1971.1">
       redirect()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1972.1">
      function (instead of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1973.1">
       useNavigate()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1974.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1975.1">
       navigate()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1976.1">
      ).
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1977.1">
     But what are these elements about?
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-283">
    <span class="koboSpan" id="kobo.1978.1">
     Working with action() and Form Data
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1979.1">
     Just
    </span>
    <a id="_idIndexMarker726">
    </a>
    <span class="koboSpan" id="kobo.1980.1">
     like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1981.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1982.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1983.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1984.1">
     is a special function
    </span>
    <a id="_idIndexMarker727">
    </a>
    <span class="koboSpan" id="kobo.1985.1">
     that can be added to route definitions, as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1986.1">import</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1987.1">NewPost</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1988.1">, { action </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1989.1">as</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1990.1"> newPostAction } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1991.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1992.1">'./components/NewPost.jsx'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1993.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1994.1">// ...</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1995.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1996.1">path</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1997.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1998.1">'new'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1999.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2000.1">element</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2001.1">: </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2002.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2003.1">NewPost</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2004.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2005.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2006.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2007.1">: newPostAction },</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2008.1">
     With the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2009.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.2010.1">
     prop set on a route definition, the assigned function is automatically called whenever a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2011.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2012.1">
     (not
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2013.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2014.1">
     !) targeting this route is submitted.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2015.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.2016.1">
     is a component provided by React Router that should be used instead of the default
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2017.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2018.1">
     element.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2019.1">
     Internally,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2020.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.2021.1">
     uses the
    </span>
    <a id="_idIndexMarker728">
    </a>
    <span class="koboSpan" id="kobo.2022.1">
     default
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2023.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2024.1">
     element but prevents the browser default of creating and sending an HTTP request
    </span>
    <a id="_idIndexMarker729">
    </a>
    <span class="koboSpan" id="kobo.2025.1">
     upon form submission.
    </span>
    <span class="koboSpan" id="kobo.2025.2">
     Instead, React Router creates a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2026.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.2027.1">
     object and calls the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2028.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2029.1">
     function defined for the route that’s targeted by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2030.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2031.1">
     , passing a request object, based on the built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2032.1">
      Request
     </span>
    </code>
    <span class="koboSpan" id="kobo.2033.1">
     interface, to it.
    </span>
    <span class="koboSpan" id="kobo.2033.2">
     The passed request object contains the form data generated by React Router.
    </span>
    <span class="koboSpan" id="kobo.2033.3">
     Later in this chapter, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2034.1">
      Controlling Which &lt;Form&gt; Triggers Which Action
     </span>
    </em>
    <span class="koboSpan" id="kobo.2035.1">
     section, you’ll learn how to control which
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2036.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2037.1">
     function of which route will be executed by React Router.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2038.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2039.1">
      Handling form submissions with the help of “actions” might sound familiar—
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.2040.1">
       Chapter 9
      </span>
     </em>
     <span class="koboSpan" id="kobo.2041.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.2042.1">
       Handling User Input &amp; Forms with Form Actions
      </span>
     </em>
     <span class="koboSpan" id="kobo.2043.1">
      , discussed a similar concept.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2044.1">
      But whereas
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.2045.1">
       Chapter 9
      </span>
     </em>
     <span class="koboSpan" id="kobo.2046.1">
      discussed a feature built into React (which was not related or dependent on routing), this chapter explores a core concept of React Router.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2047.1">
      Ultimately, you can use either approach for handling form submissions.
     </span>
     <span class="koboSpan" id="kobo.2047.2">
      Or you could use none of the two and instead handle the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2048.1">
       submit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2049.1">
      event manually via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2050.1">
       onSubmit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2051.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2052.1">
      But when using routing with React Router, you’ll often end up with cleaner, more concise code that integrates smoothly with other routing features like redirects when using React Router’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2053.1">
       &lt;Form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2054.1">
      component and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2055.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2056.1">
      function.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2057.1">
     The form data object that is created by calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2058.1">
      request.formData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2059.1">
     includes all form input values entered into the submitted form.
    </span>
    <span class="koboSpan" id="kobo.2059.2">
     To be registered, an input element such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2060.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2061.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2062.1">
      &lt;select&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2063.1">
     , or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2064.1">
      &lt;textarea&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2065.1">
     must have the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2066.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.2067.1">
     attribute assigned to it.
    </span>
    <span class="koboSpan" id="kobo.2067.2">
     The values set for those
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2068.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.2069.1">
     attributes can later be used to extract the entered data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2070.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2071.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.2072.1">
     object (that contains the form data) received by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2073.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2074.1">
     function is created by React Router when the form is submitted.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2075.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2076.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.2077.1">
     component
    </span>
    <a id="_idIndexMarker730">
    </a>
    <span class="koboSpan" id="kobo.2078.1">
     defines the HTTP method of the
    </span>
    <a id="_idIndexMarker731">
    </a>
    <span class="koboSpan" id="kobo.2079.1">
     request object.
    </span>
    <span class="koboSpan" id="kobo.2079.2">
     By setting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2080.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.2081.1">
     's
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2082.1">
      method
     </span>
    </code>
    <span class="koboSpan" id="kobo.2083.1">
     prop to either
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2084.1">
      "get"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2085.1">
     (the default) or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2086.1">
      "post"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2087.1">
     , you control what happens when the form is submitted.
    </span>
    <span class="koboSpan" id="kobo.2087.2">
     When setting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2088.1">
      method="get"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2089.1">
     (or when not setting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2090.1">
      method
     </span>
    </code>
    <span class="koboSpan" id="kobo.2091.1">
     at all), a regular URL navigation will occur—just as if a link to a certain path were clicked.
    </span>
    <span class="koboSpan" id="kobo.2091.2">
     Any entered form values will be encoded as URL search parameters in that case.
    </span>
    <span class="koboSpan" id="kobo.2091.3">
     To trigger an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2092.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2093.1">
     function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2094.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2095.1">
     's
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2096.1">
      method
     </span>
    </code>
    <span class="koboSpan" id="kobo.2097.1">
     must be set to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2098.1">
      "post"
     </span>
    </code>
    <span class="koboSpan" id="kobo.2099.1">
     instead.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2100.1">
     However, it’s important to understand that the request is not sent via HTTP since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2101.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2102.1">
     , just like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2103.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2104.1">
     or the component function, still executes in the browser rather than on a server.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2105.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2106.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2107.1">
     function then receives an object with a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2108.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.2109.1">
     property that contains the created request object with the included form data.
    </span>
    <span class="koboSpan" id="kobo.2109.2">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2110.1">
      request
     </span>
    </code>
    <span class="koboSpan" id="kobo.2111.1">
     object can be used to extract the values entered into the form input fields like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2112.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2113.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2114.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2115.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2116.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2117.1">{ request }</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2118.1">) {</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2119.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2120.1"> formData = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2121.1">await</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2122.1"> request.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2123.1">formData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2124.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2125.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2126.1"> postData = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2127.1">Object</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2128.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2129.1">fromEntries</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2130.1">(formData);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.2131.1">// ...</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2132.1">}</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2133.1">
     The built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2134.1">
      formData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2135.1">
     method yields a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2136.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.2137.1">
     that resolves to a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2138.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.2139.1">
     object that offers a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2140.1">
      get()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2141.1">
     method that can be used to get an entered value by its identifier (that is, by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2142.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.2143.1">
     attribute value set on the input element).
    </span>
    <span class="koboSpan" id="kobo.2143.2">
     For example, the value entered into
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2144.1">
      &lt;input name="title"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2145.1">
     could be retrieved via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2146.1">
      formData.get('title')
     </span>
    </code>
    <span class="koboSpan" id="kobo.2147.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2148.1">
     Alternatively, you can follow the approach chosen in the preceding code snippet and convert the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2149.1">
      formData
     </span>
    </code>
    <span class="koboSpan" id="kobo.2150.1">
     object to a simple key-value object via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2151.1">
      Object.fromEntries(formData)
     </span>
    </code>
    <span class="koboSpan" id="kobo.2152.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2152.2">
     This object (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2153.1">
      postData
     </span>
    </code>
    <span class="koboSpan" id="kobo.2154.1">
     , in the preceding example) contains the names set on the form input elements as properties and the entered values as values for those properties (meaning that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2155.1">
      postData.title
     </span>
    </code>
    <span class="koboSpan" id="kobo.2156.1">
     would yield the value entered in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2157.1">
      &lt;input name="title"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2158.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2159.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2160.1">
      React Router also supports the other main HTTP verbs (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2161.1">
       "patch"
      </span>
     </code>
     <span class="koboSpan" id="kobo.2162.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2163.1">
       "put"
      </span>
     </code>
     <span class="koboSpan" id="kobo.2164.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2165.1">
       "delete"
      </span>
     </code>
     <span class="koboSpan" id="kobo.2166.1">
      ), and setting
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2167.1">
       method
      </span>
     </code>
     <span class="koboSpan" id="kobo.2168.1">
      to one of these verbs will indeed also trigger the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2169.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2170.1">
      function.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2171.1">
      This can be useful when working with multiple forms that should trigger the same
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2172.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2173.1">
      .
     </span>
     <span class="koboSpan" id="kobo.2173.2">
      By using different methods, you can use one single action to run different code based on the value extracted from
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2174.1">
       request.method
      </span>
     </code>
     <span class="koboSpan" id="kobo.2175.1">
      inside the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2176.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2177.1">
      function.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2178.1">
      But it’s worth noting that using methods other than
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2179.1">
       'get'
      </span>
     </code>
     <span class="koboSpan" id="kobo.2180.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2181.1">
       'post'
      </span>
     </code>
     <span class="koboSpan" id="kobo.2182.1">
      is not in line with the HTML standard.
     </span>
     <span class="koboSpan" id="kobo.2182.2">
      Therefore, React Router could remove support for these methods in the future.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2183.1">
      Hence, when working with multiple forms that trigger the same
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2184.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2185.1">
      , a more stable solution can be to include a hidden input field with a unique identifier (e.g.,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2186.1">
       &lt;input type="hidden" name="_method" value="DELETE"&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2187.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.2187.2">
      This value can then be extracted and used (e.g., in an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2188.1">
       if
      </span>
     </code>
     <span class="koboSpan" id="kobo.2189.1">
      statement) in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2190.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2191.1">
      function.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2192.1">
     The extracted
    </span>
    <a id="_idIndexMarker732">
    </a>
    <span class="koboSpan" id="kobo.2193.1">
     data can then be used for any
    </span>
    <a id="_idIndexMarker733">
    </a>
    <span class="koboSpan" id="kobo.2194.1">
     operations of your choice.
    </span>
    <span class="koboSpan" id="kobo.2194.2">
     That could be an extra validation step or an HTTP request sent to some backend API, where the data may get stored in a database or file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2195.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2196.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2197.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2198.1">action</span></span><span class="koboSpan" id="kobo.2199.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2200.1">{ request }</span></span><span class="koboSpan" id="kobo.2201.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2202.1">const</span></span><span class="koboSpan" id="kobo.2203.1"> formData = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2204.1">await</span></span><span class="koboSpan" id="kobo.2205.1"> request.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2206.1">formData</span></span><span class="koboSpan" id="kobo.2207.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2208.1">const</span></span><span class="koboSpan" id="kobo.2209.1"> postData = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2210.1">Object</span></span><span class="koboSpan" id="kobo.2211.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2212.1">fromEntries</span></span><span class="koboSpan" id="kobo.2213.1">(formData);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2214.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2215.1">fetch</span></span><span class="koboSpan" id="kobo.2216.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2217.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.2218.1">, {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2219.1">method</span></span><span class="koboSpan" id="kobo.2220.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2221.1">'POST'</span></span><span class="koboSpan" id="kobo.2222.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2223.1">body</span></span><span class="koboSpan" id="kobo.2224.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2225.1">JSON</span></span><span class="koboSpan" id="kobo.2226.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2227.1">stringify</span></span><span class="koboSpan" id="kobo.2228.1">(postData),
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2229.1">headers</span></span><span class="koboSpan" id="kobo.2230.1">: { </span><span class="hljs-string"><span class="koboSpan" id="kobo.2231.1">'Content-Type'</span></span><span class="koboSpan" id="kobo.2232.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2233.1">'application/json'</span></span><span class="koboSpan" id="kobo.2234.1"> },
  });
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2235.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2236.1">redirect</span></span><span class="koboSpan" id="kobo.2237.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2238.1">'/posts'</span></span><span class="koboSpan" id="kobo.2239.1">);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2240.1">
     Finally, once all intended steps are performed, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2241.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2242.1">
     function must return a value—any value of any type, but at least
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2243.1">
      null
     </span>
    </code>
    <span class="koboSpan" id="kobo.2244.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2244.2">
     Not returning anything (i.e., omitting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2245.1">
      return
     </span>
    </code>
    <span class="koboSpan" id="kobo.2246.1">
     statement) is not allowed.
    </span>
    <span class="koboSpan" id="kobo.2246.2">
     Though, as with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2247.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2248.1">
     function, you may also return a response, for example, a redirect response like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2249.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2250.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2251.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2252.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2253.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2254.1">{ request }</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2255.1">) {</span></strong></span>
  <span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.2256.1">// action logic …</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2257.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2258.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2259.1">Response</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2260.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2261.1">""</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2262.1">, {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2263.1">status</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2264.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2265.1">302</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2266.1">,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2267.1">headers</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2268.1">: {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2269.1">Location</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2270.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2271.1">'/posts'</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2272.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2273.1">});</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2274.1">}</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2275.1">
     Indeed, for actions, it’s highly likely that you will want to navigate to a different page once the
    </span>
    <a id="_idIndexMarker734">
    </a>
    <span class="koboSpan" id="kobo.2276.1">
     action has been performed (e.g., once an HTTP request to an API has been sent).
    </span>
    <span class="koboSpan" id="kobo.2276.2">
     This may be required to navigate the user away
    </span>
    <a id="_idIndexMarker735">
    </a>
    <span class="koboSpan" id="kobo.2277.1">
     from the data input page to a page that displays all available data entries (for example, from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2278.1">
      /posts/new
     </span>
    </code>
    <span class="koboSpan" id="kobo.2279.1">
     to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2280.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2281.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2282.1">
     To simplify this common pattern, React Router provides a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2283.1">
      redirect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2284.1">
     function that yields a response object that causes React Router to switch to a different route.
    </span>
    <span class="koboSpan" id="kobo.2284.2">
     You can therefore return the result of calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2285.1">
      redirect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2286.1">
     in your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2287.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2288.1">
     function to ensure that the user is navigated to a different page.
    </span>
    <span class="koboSpan" id="kobo.2288.2">
     It’s the equivalent of calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2289.1">
      navigate()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2290.1">
     (via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2291.1">
      useNavigate()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2292.1">
     ) when manually handling form submissions.
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2293.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2294.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2295.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2296.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2297.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2298.1">{ request }</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2299.1">) {</span></strong></span>
  <span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.2300.1">// action logic …</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2301.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2302.1">redirect</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2303.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2304.1">'/posts'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2305.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2306.1">}</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2307.1">
     In this snippet, React Router’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2308.1">
      redirect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2309.1">
     function is used instead of manually constructing a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2310.1">
      Response
     </span>
    </code>
    <span class="koboSpan" id="kobo.2311.1">
     object.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-284">
    <span class="koboSpan" id="kobo.2312.1">
     Returning Data Instead of Redirecting
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2313.1">
     As mentioned, your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2314.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2315.1">
     functions may return anything.
    </span>
    <span class="koboSpan" id="kobo.2315.2">
     You don’t have to return a response
    </span>
    <a id="_idIndexMarker736">
    </a>
    <span class="koboSpan" id="kobo.2316.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.2316.2">
     While it is quite common to return a redirect response, you may occasionally want to return some raw data instead.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2317.1">
     One scenario in which you might
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2318.1">
      not
     </span>
    </em>
    <span class="koboSpan" id="kobo.2319.1">
     want to redirect the user is after validating the user’s input.
    </span>
    <span class="koboSpan" id="kobo.2319.2">
     Inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2320.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2321.1">
     function, before sending the entered data to some API, you may wish to validate the provided values first.
    </span>
    <span class="koboSpan" id="kobo.2321.2">
     If an invalid value (such as an empty title) is detected, a great user experience is typically achieved by keeping the user on the route with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2322.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2323.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2323.2">
     The values entered by the user shouldn’t be cleared and lost; instead, the form should be updated to present useful validation error information to the user.
    </span>
    <span class="koboSpan" id="kobo.2323.3">
     This information can be passed from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2324.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2325.1">
     to the component function so that it can be displayed there (for example, next to the form input fields).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2326.1">
     In situations
    </span>
    <a id="_idIndexMarker737">
    </a>
    <span class="koboSpan" id="kobo.2327.1">
     like this, you can return a “normal” value (that is, not a redirect response) from your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2328.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2329.1">
     function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2330.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2331.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2332.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2333.1">action</span></span><span class="koboSpan" id="kobo.2334.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2335.1">{ request }</span></span><span class="koboSpan" id="kobo.2336.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2337.1">const</span></span><span class="koboSpan" id="kobo.2338.1"> formData = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2339.1">await</span></span><span class="koboSpan" id="kobo.2340.1"> request.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2341.1">formData</span></span><span class="koboSpan" id="kobo.2342.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2343.1">const</span></span><span class="koboSpan" id="kobo.2344.1"> postData = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2345.1">Object</span></span><span class="koboSpan" id="kobo.2346.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2347.1">fromEntries</span></span><span class="koboSpan" id="kobo.2348.1">(formData);
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2349.1">let</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2350.1"> validationErrors = [];</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2351.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2352.1"> (postData.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2353.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2354.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2355.1">trim</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2356.1">().</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2357.1">length</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2358.1"> === </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2359.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2360.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2361.1">validationErrors.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2362.1">push</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2363.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2364.1">'Invalid post title provided.'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2365.1">)</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2366.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2367.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2368.1"> (postData.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2369.1">text</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2370.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2371.1">trim</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2372.1">().</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2373.1">length</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2374.1"> === </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2375.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2376.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2377.1">validationErrors.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2378.1">push</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2379.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2380.1">'Invalid post text provided.'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2381.1">)</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2382.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2383.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2384.1"> (validationErrors.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2385.1">length</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2386.1"> &gt; </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2387.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2388.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2389.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2390.1"> validationErrors;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2391.1">}</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2392.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2393.1">fetch</span></span><span class="koboSpan" id="kobo.2394.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2395.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.2396.1">, {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2397.1">method</span></span><span class="koboSpan" id="kobo.2398.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2399.1">'POST'</span></span><span class="koboSpan" id="kobo.2400.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2401.1">body</span></span><span class="koboSpan" id="kobo.2402.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2403.1">JSON</span></span><span class="koboSpan" id="kobo.2404.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2405.1">stringify</span></span><span class="koboSpan" id="kobo.2406.1">(postData),
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2407.1">headers</span></span><span class="koboSpan" id="kobo.2408.1">: { </span><span class="hljs-string"><span class="koboSpan" id="kobo.2409.1">'Content-Type'</span></span><span class="koboSpan" id="kobo.2410.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2411.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2412.1">application/json'</span></span><span class="koboSpan" id="kobo.2413.1"> },
  });
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2414.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2415.1">redirect</span></span><span class="koboSpan" id="kobo.2416.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2417.1">'/posts'</span></span><span class="koboSpan" id="kobo.2418.1">);
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2419.1">
     In this example, a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2420.1">
      validationErrors
     </span>
    </code>
    <span class="koboSpan" id="kobo.2421.1">
     array is returned if the entered
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2422.1">
      title
     </span>
    </code>
    <span class="koboSpan" id="kobo.2423.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2424.1">
      text
     </span>
    </code>
    <span class="koboSpan" id="kobo.2425.1">
     values are empty.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2426.1">
     Data returned by an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2427.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2428.1">
     function can be used in the route component (or any other nested component) via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2429.1">
      useActionData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2430.1">
     Hook:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2431.1">import</span></span><span class="koboSpan" id="kobo.2432.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2433.1">Form</span></span><span class="koboSpan" id="kobo.2434.1">, redirect, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2435.1">useActionData</span></strong></span><span class="koboSpan" id="kobo.2436.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2437.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2438.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.2439.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2440.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2441.1">NewPost</span></span><span class="koboSpan" id="kobo.2442.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2443.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2444.1"> validationErrors = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2445.1">useActionData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2446.1">();</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2447.1">return</span></span><span class="koboSpan" id="kobo.2448.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2449.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2450.1">Form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2451.1">method</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2452.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2453.1">"post"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2454.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2455.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2456.1">"post-form"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2457.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2458.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2459.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2460.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2461.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2462.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2463.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2464.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2465.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2466.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2467.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2468.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2469.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2470.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2471.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2472.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2473.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2474.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2475.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2476.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2477.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2478.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2479.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2480.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2481.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2482.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2483.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2484.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2485.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2486.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2487.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2488.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2489.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2490.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2491.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2492.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2493.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2494.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2495.1">Text</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2496.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2497.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2498.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2499.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2500.1">textarea</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2501.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2502.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2503.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2504.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2505.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2506.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2507.1">rows</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2508.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2509.1">{3}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2510.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2511.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2512.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2513.1">&gt;</span></span>
      <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2514.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2515.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2516.1">&gt;</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2517.1">{validationErrors &amp;&amp;</span></strong></span>
          <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2518.1">validationErrors.map((err) =&gt; </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2519.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2520.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2521.1">key</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2522.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2523.1">{err}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2524.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2525.1">{err}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2526.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2527.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2528.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2529.1">)}</span></strong></span>
      <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2530.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2531.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2532.1">&gt;</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2533.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2534.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2535.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2536.1">Save Post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2537.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2538.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2539.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2540.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2541.1">Form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2542.1">&gt;</span></span><span class="koboSpan" id="kobo.2543.1">
  );
}
</span></code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2544.1">
      useActionData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2545.1">
     works a lot like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2546.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2547.1">
     , but unlike
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2548.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2549.1">
     , it’s not guaranteed to yield any data.
    </span>
    <span class="koboSpan" id="kobo.2549.2">
     This is because while
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2550.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2551.1">
     functions always get called before the
    </span>
    <a id="_idIndexMarker738">
    </a>
    <span class="koboSpan" id="kobo.2552.1">
     route component is rendered, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2553.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2554.1">
     function only gets called once the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2555.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2556.1">
     is submitted.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2557.1">
     In this example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2558.1">
      useActionData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2559.1">
     is used to get access to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2560.1">
      validationErrors
     </span>
    </code>
    <span class="koboSpan" id="kobo.2561.1">
     returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2562.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2563.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2563.2">
     If
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2564.1">
      validationErrors
     </span>
    </code>
    <span class="koboSpan" id="kobo.2565.1">
     is truthy (that is, is not
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2566.1">
      undefined
     </span>
    </code>
    <span class="koboSpan" id="kobo.2567.1">
     ), the array will be mapped to a list of error items that are displayed to the user:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2568.1">
     <img alt="img" src="image/B31339_14_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2569.1">
     Figure 14.4: Validation errors are output below the input fields
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2570.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2571.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2572.1">
     function is therefore quite versatile in that you can use it to perform an action and
    </span>
    <a id="_idIndexMarker739">
    </a>
    <span class="koboSpan" id="kobo.2573.1">
     redirect away as well as to conduct more than one operation and return different values for different use cases.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-285">
    <span class="koboSpan" id="kobo.2574.1">
     Controlling Which &lt;Form&gt; Triggers Which Action
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2575.1">
     Earlier in this chapter, in the section
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2576.1">
      Working with action() and Form Data
     </span>
    </em>
    <span class="koboSpan" id="kobo.2577.1">
     , you learned that when
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2578.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2579.1">
     is used
    </span>
    <a id="_idIndexMarker740">
    </a>
    <span class="koboSpan" id="kobo.2580.1">
     instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2581.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2582.1">
     , React Router will execute the targeted
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2583.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2584.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.2584.2">
     But which
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2585.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2586.1">
     function is targeted by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2587.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2588.1">
     ?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2589.1">
     By default, it’s the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2590.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2591.1">
     function assigned to the route that also renders the form (either directly or via some descendent component).
    </span>
    <span class="koboSpan" id="kobo.2591.2">
     Consider this route definition:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2592.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2593.1">path</span></span><span class="koboSpan" id="kobo.2594.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2595.1">'/posts/new'</span></span><span class="koboSpan" id="kobo.2596.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2597.1">element</span></span><span class="koboSpan" id="kobo.2598.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2599.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2600.1">NewPost</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2601.1"> /&gt;</span></span><span class="koboSpan" id="kobo.2602.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2603.1">action</span></span><span class="koboSpan" id="kobo.2604.1">: newPostAction }
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2605.1">
     With this definition, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2606.1">
      newPostAction()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2607.1">
     function would be triggered whenever any
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2608.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2609.1">
     inside of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2610.1">
      NewPost
     </span>
    </code>
    <span class="koboSpan" id="kobo.2611.1">
     component (or any nested component) is submitted.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2612.1">
     In many cases, this default behavior is exactly what you want.
    </span>
    <span class="koboSpan" id="kobo.2612.2">
     But you can also target
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2613.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2614.1">
     functions defined on other routes by setting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2615.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.2616.1">
     prop on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2617.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2618.1">
     to the path of the route that contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2619.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2620.1">
     that should be executed:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2621.1">// form rendered in a component that belongs to /posts</span></span><span class="koboSpan" id="kobo.2622.1">
&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2623.1">Form</span></span><span class="koboSpan" id="kobo.2624.1"> method=</span><span class="hljs-string"><span class="koboSpan" id="kobo.2625.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2626.1">post"</span></span><span class="koboSpan" id="kobo.2627.1"> action=</span><span class="hljs-string"><span class="koboSpan" id="kobo.2628.1">"/save-data"</span></span><span class="koboSpan" id="kobo.2629.1">&gt;
  ...
</span><span class="koboSpan" id="kobo.2629.2">&lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.2630.1">Form</span></span><span class="koboSpan" id="kobo.2631.1">&gt;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2632.1">
     This form would cause React Router to execute the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2633.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.2634.1">
     belonging to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2635.1">
      /save-data
     </span>
    </code>
    <span class="koboSpan" id="kobo.2636.1">
     route—even though the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2637.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2638.1">
     component may be rendered as part of a component that belongs to a different route (e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2639.1">
      /posts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2640.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2641.1">
     It is worth noting, though, that targeting a different route will lead to a page transition to that route’s path, even if your action does not return a redirect response.
    </span>
    <span class="koboSpan" id="kobo.2641.2">
     In a later section of this chapter, entitled
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.2642.1">
      Behind-the-Scenes Data Fetching and Submission
     </span>
    </em>
    <span class="koboSpan" id="kobo.2643.1">
     , you will learn how that behavior can be avoided.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-286">
    <span class="koboSpan" id="kobo.2644.1">
     Reflecting the Current Navigation Status
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2645.1">
     After submitting a form, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2646.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2647.1">
     function that’s triggered may need some time to perform
    </span>
    <a id="_idIndexMarker741">
    </a>
    <span class="koboSpan" id="kobo.2648.1">
     all intended operations.
    </span>
    <span class="koboSpan" id="kobo.2648.2">
     Sending HTTP requests to APIs in particular can take up to a few seconds.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2649.1">
     Of course, it’s not a great user experience if the user doesn’t get any feedback about the current data submission status.
    </span>
    <span class="koboSpan" id="kobo.2649.2">
     It’s not immediately clear if anything happened at all after the submit button was clicked.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2650.1">
     For that reason, you might want to show a loading spinner or update the button caption while the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2651.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2652.1">
     function is running.
    </span>
    <span class="koboSpan" id="kobo.2652.2">
     Indeed, one common way of providing user feedback is to disable the submit button and change its caption like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2653.1">
     <img alt="img" src="image/B31339_14_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2654.1">
     Figure 14.5: The submit button is grayed out
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2655.1">
     You can get the current React Router status (that is, whether it’s currently transitioning to another route or executing an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2656.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2657.1">
     function) via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2658.1">
      useNavigation()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2659.1">
     Hook.
    </span>
    <span class="koboSpan" id="kobo.2659.2">
     This Hook provides a navigation object that contains various pieces of routing-related information.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2660.1">
     Most importantly, this object has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2661.1">
      state
     </span>
    </code>
    <span class="koboSpan" id="kobo.2662.1">
     property that yields a string describing the current navigation status.
    </span>
    <span class="koboSpan" id="kobo.2662.2">
     This property is set to one of the following three possible values:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2663.1">
       submitting
      </span>
     </code>
     <span class="koboSpan" id="kobo.2664.1">
      : If an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2665.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2666.1">
      function is currently executing
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2667.1">
       loading
      </span>
     </code>
     <span class="koboSpan" id="kobo.2668.1">
      : If a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2669.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2670.1">
      function is currently executing (for example, because of a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2671.1">
       redirect()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2672.1">
      response)
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2673.1">
       idle
      </span>
     </code>
     <span class="koboSpan" id="kobo.2674.1">
      : If no
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2675.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2676.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2677.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2678.1">
      functions are currently being executed
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2679.1">
     You can therefore use this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2680.1">
      state
     </span>
    </code>
    <span class="koboSpan" id="kobo.2681.1">
     property to find out whether React Router is currently navigating
    </span>
    <a id="_idIndexMarker742">
    </a>
    <span class="koboSpan" id="kobo.2682.1">
     to a different page or executing an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2683.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2684.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2684.2">
     Hence, the submit button can be updated as shown in the preceding screenshot via this code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2685.1">import</span></span><span class="koboSpan" id="kobo.2686.1"> { 
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.2687.1">Form</span></span><span class="koboSpan" id="kobo.2688.1">, 
  redirect, 
  useActionData, 
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2689.1">useNavigation</span></strong></span><span class="koboSpan" id="kobo.2690.1"> 
} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2691.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2692.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.2693.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2694.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2695.1">NewPost</span></span><span class="koboSpan" id="kobo.2696.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2697.1">const</span></span><span class="koboSpan" id="kobo.2698.1"> validationErrors = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2699.1">useActionData</span></span><span class="koboSpan" id="kobo.2700.1">();
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2701.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2702.1"> navigation = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2703.1">useNavigation</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2704.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2705.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2706.1"> isSubmitting = navigation.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2707.1">state</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2708.1"> !== </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2709.1">'idle'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2710.1">;</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2711.1">return</span></span><span class="koboSpan" id="kobo.2712.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2713.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2714.1">Form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2715.1">method</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2716.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2717.1">"post"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2718.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2719.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2720.1">"post-form"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2721.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2722.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2723.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2724.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2725.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2726.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2727.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2728.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2729.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2730.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2731.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2732.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2733.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2734.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2735.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2736.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2737.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2738.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2739.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2740.1">text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2741.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2742.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2743.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2744.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2745.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2746.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2747.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2748.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2749.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2750.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2751.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2752.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2753.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2754.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2755.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2756.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2757.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2758.1">"text"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2759.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2760.1">Text</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2761.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2762.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2763.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2764.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2765.1">textarea</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2766.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2767.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2768.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2769.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2770.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2771.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2772.1">text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2773.1">rows</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2774.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2775.1">{3}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2776.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2777.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2778.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2779.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2780.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2781.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2782.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2783.1">        {validationErrors &amp;&amp;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2784.1">          validationErrors.map((err) =&gt; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2785.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2786.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2787.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2788.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2789.1">{err}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2790.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2791.1">{err}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2792.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2793.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2794.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2795.1">)}</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2796.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2797.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2798.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2799.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2800.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2801.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2802.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2803.1">{isSubmitting}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2804.1">&gt;</span></span>
<span class="language-xml">        </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2805.1">{isSubmitting ? </span><span class="koboSpan" id="kobo.2805.2">'Saving...' </span><span class="koboSpan" id="kobo.2805.3">: 'Save Post'}</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2806.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2807.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2808.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2809.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2810.1">Form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2811.1">&gt;</span></span><span class="koboSpan" id="kobo.2812.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2813.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2814.1">
      isSubmitting
     </span>
    </code>
    <span class="koboSpan" id="kobo.2815.1">
     constant is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2816.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.2817.1">
     if the current navigation state is anything but
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2818.1">
      'idle'
     </span>
    </code>
    <span class="koboSpan" id="kobo.2819.1">
     .
    </span>
    <span class="koboSpan" id="kobo.2819.2">
     This constant is then used to disable the submit button (via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2820.1">
      disabled
     </span>
    </code>
    <span class="koboSpan" id="kobo.2821.1">
     attribute) and adjust the button’s caption.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-287">
    <span class="koboSpan" id="kobo.2822.1">
     Submitting Forms Programmatically
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2823.1">
     In some cases, you won’t want to instantly trigger an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2824.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2825.1">
     when a form is submitted—for example, if you need to ask the user for confirmation first such as when triggering
    </span>
    <a id="_idIndexMarker743">
    </a>
    <span class="koboSpan" id="kobo.2826.1">
     actions that delete or update data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2827.1">
     For such scenarios, React Router allows you to submit a form (and therefore trigger an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2828.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2829.1">
     function) programmatically.
    </span>
    <span class="koboSpan" id="kobo.2829.2">
     Instead of using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2830.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.2831.1">
     component provided by React Router, you handle the form submission manually using the default
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2832.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2833.1">
     element.
    </span>
    <span class="koboSpan" id="kobo.2833.2">
     As part of your code, you can then use a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2834.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2835.1">
     function provided by React Router’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2836.1">
      useSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2837.1">
     Hook to trigger the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2838.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2839.1">
     manually once you’re ready for it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2840.1">
     Consider this example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2841.1">import</span></span><span class="koboSpan" id="kobo.2842.1"> {
  redirect,
  useParams,
  useRouteLoaderData,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2843.1">useSubmit,</span></strong></span><span class="koboSpan" id="kobo.2844.1">
} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2845.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2846.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2847.1">react-router-dom'</span></span><span class="koboSpan" id="kobo.2848.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2849.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2850.1">PostDetails</span></span><span class="koboSpan" id="kobo.2851.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2852.1">const</span></span><span class="koboSpan" id="kobo.2853.1"> params = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2854.1">useParams</span></span><span class="koboSpan" id="kobo.2855.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2856.1">const</span></span><span class="koboSpan" id="kobo.2857.1"> posts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2858.1">useRouteLoaderData</span></span><span class="koboSpan" id="kobo.2859.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2860.1">'posts'</span></span><span class="koboSpan" id="kobo.2861.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2862.1">const</span></span><span class="koboSpan" id="kobo.2863.1"> post = posts.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2864.1">find</span></span><span class="koboSpan" id="kobo.2865.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2866.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2867.1">post</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2868.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2869.1"> post.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2870.1">id</span></span><span class="koboSpan" id="kobo.2871.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2872.1">toString</span></span><span class="koboSpan" id="kobo.2873.1">() === params.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2874.1">id</span></span><span class="koboSpan" id="kobo.2875.1">);
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2876.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2877.1"> submit = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2878.1">useSubmit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2879.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2880.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2881.1">handleSubmit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2882.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2883.1">event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2884.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2885.1">event.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2886.1">preventDefault</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2887.1">();</span></strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2888.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2889.1"> proceed = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2890.1">window</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2891.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2892.1">confirm</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2893.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2894.1">'Are you sure?'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2895.1">);</span></strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2896.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2897.1"> (proceed) {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2898.1">submit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2899.1">(</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2900.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2901.1">message</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2902.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2903.1">'Your submitted data, if needed'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2904.1"> },</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2905.1">{</span></strong></span>
          <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2906.1">method</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2907.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2908.1">'post'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2909.1">,</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2910.1">}</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2911.1">);</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2912.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2913.1">}</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2914.1">return</span></span><span class="koboSpan" id="kobo.2915.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2916.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2917.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2918.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2919.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2920.1">"post-details"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2921.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2922.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2923.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2924.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2925.1">{post.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2926.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2927.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2928.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2929.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2930.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2931.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2932.1">{post.body}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2933.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2934.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2935.1">&gt;</span></span>
<span class="language-xml">      </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2936.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2937.1">form</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2938.1">onSubmit</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2939.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2940.1">{handleSubmit}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2941.1">&gt;</span></strong></span>
        <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2942.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2943.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2944.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2945.1">Delete</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2946.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2947.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2948.1">&gt;</span></strong></span>
      <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2949.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2950.1">form</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2951.1">&gt;</span></strong></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2952.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2953.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2954.1">&gt;</span></span><span class="koboSpan" id="kobo.2955.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2956.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2957.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2958.1">PostDetails</span></span><span class="koboSpan" id="kobo.2959.1">;
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.2960.1">// action must be added to route definition!</span></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2961.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2962.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2963.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2964.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2965.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2966.1">{ request }</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2967.1">) {</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2968.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2969.1"> formData = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2970.1">await</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2971.1"> request.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2972.1">formData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2973.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2974.1">console</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2975.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2976.1">log</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2977.1">(formData.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2978.1">get</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2979.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2980.1">'message'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2981.1">));</span></strong></span>
  <span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2982.1">console</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2983.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2984.1">log</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2985.1">(request.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2986.1">method</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2987.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2988.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2989.1">redirect</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2990.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2991.1">'/posts'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2992.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2993.1">}</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2994.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2995.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2996.1">
     is manually triggered by programmatically submitting data via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2997.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2998.1">
     function provided by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2999.1">
      useSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3000.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3000.2">
     This approach is required as it would otherwise
    </span>
    <a id="_idIndexMarker744">
    </a>
    <span class="koboSpan" id="kobo.3001.1">
     be impossible to ask the user for confirmation (via the browser’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3002.1">
      window.confirm()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3003.1">
     method).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3004.1">
     Because data is submitted programmatically, the default
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3005.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3006.1">
     element should be used and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3007.1">
      submit
     </span>
    </code>
    <span class="koboSpan" id="kobo.3008.1">
     event handled manually.
    </span>
    <span class="koboSpan" id="kobo.3008.2">
     As part of this process, the browser’s default behavior of sending an HTTP request must also be prevented manually.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3009.1">
     Typically, using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3010.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3011.1">
     instead of programmatic submission is preferable.
    </span>
    <span class="koboSpan" id="kobo.3011.2">
     But in certain situations, such as the preceding example, being able to control form submission manually can be useful.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-288">
    <span class="koboSpan" id="kobo.3012.1">
     Behind-the-Scenes Data Fetching and Submission
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.3013.1">
     There are
    </span>
    <a id="_idIndexMarker745">
    </a>
    <span class="koboSpan" id="kobo.3014.1">
     also situations in which you may need to trigger an action or
    </span>
    <a id="_idIndexMarker746">
    </a>
    <span class="koboSpan" id="kobo.3015.1">
     load data without causing a page transition.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3016.1">
     A Like button would be an example.
    </span>
    <span class="koboSpan" id="kobo.3016.2">
     When it’s clicked, a process should be triggered in the background (such as storing information about the user and the liked post), but the user should
    </span>
    <a id="_idIndexMarker747">
    </a>
    <span class="koboSpan" id="kobo.3017.1">
     not be directed to a different page:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3018.1">
     <img alt="img" src="image/B31339_14_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3019.1">
     Figure 14.6: A Like button below a post
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3020.1">
     To achieve
    </span>
    <a id="_idIndexMarker748">
    </a>
    <span class="koboSpan" id="kobo.3021.1">
     this behavior, you could wrap the button into a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3022.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3023.1">
     and, at the end of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3024.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3025.1">
     function, simply redirect back to the page that is already active.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3026.1">
     But technically, this would still lead to an extra navigation action.
    </span>
    <span class="koboSpan" id="kobo.3026.2">
     Therefore,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3027.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3028.1">
     functions would be executed and other possible side-effects might occur (the current scroll position could be lost, for example).
    </span>
    <span class="koboSpan" id="kobo.3028.2">
     For that reason, you might want to avoid this kind of behavior.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3029.1">
     Thankfully, React Router offers a solution: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3030.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3031.1">
     Hook, which yields an object that contains a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3032.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3033.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.3033.2">
     Unlike the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3034.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3035.1">
     function provided by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3036.1">
      useSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3037.1">
     , the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3038.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3039.1">
     method yielded by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3040.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3041.1">
     is meant for triggering actions (or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3042.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3043.1">
     functions) without starting a page transition.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3044.1">
     A Like button, as described previously, can be implemented like this (with the help of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3045.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3046.1">
     ):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.3047.1">import</span></span><span class="koboSpan" id="kobo.3048.1"> {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3049.1">// ... </span><span class="koboSpan" id="kobo.3049.2">other imports</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3050.1">useFetcher,</span></strong></span><span class="koboSpan" id="kobo.3051.1">
} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3052.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3053.1">'react-router-dom'</span></span><span class="koboSpan" id="kobo.3054.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3055.1">import</span></span><span class="koboSpan" id="kobo.3056.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.3057.1">FaHeart</span></span><span class="koboSpan" id="kobo.3058.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3059.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3060.1">'react-icons/fa'</span></span><span class="koboSpan" id="kobo.3061.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3062.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3063.1">PostDetails</span></span><span class="koboSpan" id="kobo.3064.1">() {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3065.1">// ... </span><span class="koboSpan" id="kobo.3065.2">other code &amp; logic</span></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3066.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3067.1"> fetcher = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3068.1">useFetcher</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3069.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3070.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3071.1">handleLikePost</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3072.1">() {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3073.1">fetcher.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3074.1">submit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3075.1">(</span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.3076.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3077.1">, {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3078.1">method</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3079.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3080.1">'post'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3081.1">,</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3082.1">action</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3083.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3084.1">`/posts/</span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.3085.1">${post.id}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3086.1">/like`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3087.1">, </span></strong></span>
      <span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.3088.1">// targeting an action on another route</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3089.1">});</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3090.1">}</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.3091.1">return</span></span><span class="koboSpan" id="kobo.3092.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3093.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3094.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3095.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3096.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3097.1">"post-details"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3098.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3099.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3100.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3101.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.3102.1">{post.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3103.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3104.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3105.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3106.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3107.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3108.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.3109.1">{post.body}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3110.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3111.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3112.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3113.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3114.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3115.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3116.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3117.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3118.1">&gt;</span></span>
        <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3119.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3120.1">button</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3121.1">className</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3122.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3123.1">"icon-btn"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3124.1">onClick</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3125.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3126.1">{handleLikePost}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3127.1">&gt;</span></strong></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3128.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3129.1">FaHeart</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3130.1"> /&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3131.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3132.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3133.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.3134.1">Like this post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3135.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3136.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3137.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3138.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3139.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3140.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3141.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3142.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3143.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3144.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3145.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3146.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3147.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3148.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3149.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.3150.1">Delete</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3151.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3152.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3153.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3154.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3155.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3156.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3157.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3158.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3159.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3160.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3161.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3162.1">&gt;</span></span><span class="koboSpan" id="kobo.3163.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3164.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3165.1">
      fetcher
     </span>
    </code>
    <span class="koboSpan" id="kobo.3166.1">
     object
    </span>
    <a id="_idIndexMarker749">
    </a>
    <span class="koboSpan" id="kobo.3167.1">
     returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3168.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3169.1">
     has various properties.
    </span>
    <span class="koboSpan" id="kobo.3169.2">
     For example, it also contains
    </span>
    <a id="_idIndexMarker750">
    </a>
    <span class="koboSpan" id="kobo.3170.1">
     properties that provide information about the current status of
    </span>
    <a id="_idIndexMarker751">
    </a>
    <span class="koboSpan" id="kobo.3171.1">
     the triggered action or loader (including any data that may have been returned).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3172.1">
     But this object also includes two important methods:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3173.1">
       load()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3174.1">
      : To
     </span>
     <a id="_idIndexMarker752">
     </a>
     <span class="koboSpan" id="kobo.3175.1">
      trigger the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3176.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3177.1">
      function of a route (e.g.,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3178.1">
       fetcher.load('/route-path')
      </span>
     </code>
     <span class="koboSpan" id="kobo.3179.1">
      )
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3180.1">
       submit()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3181.1">
      : To
     </span>
     <a id="_idIndexMarker753">
     </a>
     <span class="koboSpan" id="kobo.3182.1">
      trigger an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3183.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3184.1">
      function with the provided data and configuration
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.3185.1">
     In the code snippet above, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3186.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3187.1">
     method is called to trigger the action defined on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3188.1">
      /posts/&lt;post-id&gt;/like
     </span>
    </code>
    <span class="koboSpan" id="kobo.3189.1">
     route.
    </span>
    <span class="koboSpan" id="kobo.3189.2">
     Without
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3190.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3191.1">
     (i.e., when using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3192.1">
      useSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3193.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3194.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3195.1">
     ), React Router would switch to the selected route path when triggering its action.
    </span>
    <span class="koboSpan" id="kobo.3195.2">
     With
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3196.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3197.1">
     , this is avoided, and the action of that route can be called from inside another route (meaning the action defined for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3198.1">
      /posts/&lt;post-id&gt;/like
     </span>
    </code>
    <span class="koboSpan" id="kobo.3199.1">
     is called while the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3200.1">
      /posts/&lt;post-id&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3201.1">
     route is active).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3202.1">
     This also
    </span>
    <a id="_idIndexMarker754">
    </a>
    <span class="koboSpan" id="kobo.3203.1">
     allows you to define routes that don’t render any element (that is, in which
    </span>
    <a id="_idIndexMarker755">
    </a>
    <span class="koboSpan" id="kobo.3204.1">
     there is no page component) and, instead, only contain a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3205.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3206.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3207.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3208.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.3208.2">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3209.1">
      /posts/&lt;post-id&gt;/like
     </span>
    </code>
    <span class="koboSpan" id="kobo.3210.1">
     route file (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3211.1">
      pages/like.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.3212.1">
     ) looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.3213.1">// there is no component function in this file!</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.3214.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3215.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3216.1">action</span></span><span class="koboSpan" id="kobo.3217.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.3218.1">{ params }</span></span><span class="koboSpan" id="kobo.3219.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3220.1">console</span></span><span class="koboSpan" id="kobo.3221.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3222.1">log</span></span><span class="koboSpan" id="kobo.3223.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.3224.1">'Triggered like action.'</span></span><span class="koboSpan" id="kobo.3225.1">);
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3226.1">console</span></span><span class="koboSpan" id="kobo.3227.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3228.1">log</span></span><span class="koboSpan" id="kobo.3229.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.3230.1">`Liking post with id </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.3231.1">${params.id}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3232.1">.`</span></span><span class="koboSpan" id="kobo.3233.1">);
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3234.1">// Do anything else</span></span>
  <span class="hljs-comment"><span class="koboSpan" id="kobo.3235.1">// May return data or response, including redirect() if needed</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.3236.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.3237.1">null</span></span><span class="koboSpan" id="kobo.3238.1">; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3239.1">// something must be returned, even if it's just null</span></span><span class="koboSpan" id="kobo.3240.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3241.1">
     As mentioned in the code snippet, any data may be returned in this action.
    </span>
    <span class="koboSpan" id="kobo.3241.2">
     But you must at least return
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3242.1">
      null
     </span>
    </code>
    <span class="koboSpan" id="kobo.3243.1">
     —avoiding the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3244.1">
      return
     </span>
    </code>
    <span class="koboSpan" id="kobo.3245.1">
     statement and not returning anything is not allowed and will cause an error.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3246.1">
     It’s registered as a route as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.3247.1">import</span></span><span class="koboSpan" id="kobo.3248.1"> { action </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3249.1">as</span></span><span class="koboSpan" id="kobo.3250.1"> likeAction } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3251.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3252.1">'./pages/like.js'</span></span><span class="koboSpan" id="kobo.3253.1">;
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.3254.1">// ...</span></span><span class="koboSpan" id="kobo.3255.1">
{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3256.1">path</span></span><span class="koboSpan" id="kobo.3257.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.3258.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3259.1">:id/like'</span></span><span class="koboSpan" id="kobo.3260.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3261.1">action</span></span><span class="koboSpan" id="kobo.3262.1">: likeAction },
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3263.1">
     This works because this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3264.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3265.1">
     is only triggered via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3266.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3267.1">
     method provided by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3268.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3269.1">
     .
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3270.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3271.1">
     and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3272.1">
      submit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3273.1">
     function yielded by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3274.1">
      useSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3275.1">
     would instead initiate a route transition to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3276.1">
      /posts/&lt;post-id&gt;/like
     </span>
    </code>
    <span class="koboSpan" id="kobo.3277.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3277.2">
     Without the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3278.1">
      element
     </span>
    </code>
    <span class="koboSpan" id="kobo.3279.1">
     property being set on the route definition, this transition would lead to an empty page, as shown here:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3280.1">
     <img alt="img" src="image/B31339_14_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3281.1">
     Figure 14.7: An empty (nested) page is displayed, along with a warning message
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3282.1">
     Because of
    </span>
    <a id="_idIndexMarker756">
    </a>
    <span class="koboSpan" id="kobo.3283.1">
     the extra flexibility it offers,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3284.1">
      useFetcher()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3285.1">
     can be very useful
    </span>
    <a id="_idIndexMarker757">
    </a>
    <span class="koboSpan" id="kobo.3286.1">
     when building highly interactive user interfaces.
    </span>
    <span class="koboSpan" id="kobo.3286.2">
     It’s not meant as a replacement for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3287.1">
      useSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3288.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3289.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3290.1">
     , but rather, as an additional tool for situations where no route transition is required or wanted.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-289">
    <span class="koboSpan" id="kobo.3291.1">
     Deferring Data Loading
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.3292.1">
     Up to this point in the chapter, all data fetching examples have assumed that a page should only
    </span>
    <a id="_idIndexMarker758">
    </a>
    <span class="koboSpan" id="kobo.3293.1">
     be displayed once all its data has been fetched.
    </span>
    <span class="koboSpan" id="kobo.3293.2">
     That’s why there was never any loading state that would have been managed (and hence no loading fallback content that would have been displayed).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3294.1">
     In many situations, this is exactly the behavior you want as it does not often make sense to show a loading spinner or similar fallback content for a fraction of a second just to then replace it with the actual page data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3295.1">
     But there are also situations in which the opposite behavior might be desirable—for example, if you know that a certain page will take quite a while to load its data (possibly due to a complex database query that must be executed on the backend) or if you have a page that loads different pieces of data and some pieces are much slower than others.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3296.1">
     In such scenarios, it may make sense to render the page component even though some data is still missing.
    </span>
    <span class="koboSpan" id="kobo.3296.2">
     React Router also supports this use case by allowing you to defer data loading, which, in turn, enables the page component to be rendered before the data is available.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3297.1">
     Deferring data
    </span>
    <a id="_idIndexMarker759">
    </a>
    <span class="koboSpan" id="kobo.3298.1">
     loading is as simple as returning a promise from the loader (instead of awaiting it there):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.3299.1">// ... </span><span class="koboSpan" id="kobo.3299.2">other imports</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.3300.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3301.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3302.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3303.1">loader</span></span><span class="koboSpan" id="kobo.3304.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3305.1">return</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3306.1">{</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3307.1">posts</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3308.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3309.1">getPosts</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3310.1">()</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3311.1">};</span></strong></span><span class="koboSpan" id="kobo.3312.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3313.1">
     In this example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3314.1">
      getPosts()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3315.1">
     is a function that returns a (slow)
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3316.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3317.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.3318.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3319.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3320.1">getPosts</span></span><span class="koboSpan" id="kobo.3321.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3322.1">const</span></span><span class="koboSpan" id="kobo.3323.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3324.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3325.1">fetch</span></span><span class="koboSpan" id="kobo.3326.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.3327.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.3328.1">
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3329.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3330.1">wait</span></span><span class="koboSpan" id="kobo.3331.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.3332.1">3</span></span><span class="koboSpan" id="kobo.3333.1">); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3334.1">// utility function, simulating a slow response</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.3335.1">if</span></span><span class="koboSpan" id="kobo.3336.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3337.1">ok</span></span><span class="koboSpan" id="kobo.3338.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3339.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3340.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3341.1">Error</span></span><span class="koboSpan" id="kobo.3342.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.3343.1">'Could not fetch posts'</span></span><span class="koboSpan" id="kobo.3344.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3345.1">const</span></span><span class="koboSpan" id="kobo.3346.1"> data = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3347.1">await</span></span><span class="koboSpan" id="kobo.3348.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3349.1">json</span></span><span class="koboSpan" id="kobo.3350.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3351.1">return</span></span><span class="koboSpan" id="kobo.3352.1"> data;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3353.1">
     React Router allows you to return raw promises.
    </span>
    <span class="koboSpan" id="kobo.3353.2">
     When doing so, you can wait for the actual values yielded by those promises in the client-side code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3354.1">
     Inside the component function where
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3355.1">
      useLoaderData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3356.1">
     is used, you must also use a new component provided by React Router: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3357.1">
      Await
     </span>
    </code>
    <span class="koboSpan" id="kobo.3358.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.3358.2">
     It’s used like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3359.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3360.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3361.1">Suspense</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3362.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3363.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3364.1">'react'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3365.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3366.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3367.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3368.1">Await</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3369.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3370.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3371.1">'react-router-dom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3372.1">;</span></strong></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.3373.1">// ... </span><span class="koboSpan" id="kobo.3373.2">other imports</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.3374.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3375.1">PostsLayout</span></span><span class="koboSpan" id="kobo.3376.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3377.1">const</span></span><span class="koboSpan" id="kobo.3378.1"> data = </span><span class="hljs-title"><span class="koboSpan" id="kobo.3379.1">useLoaderData</span></span><span class="koboSpan" id="kobo.3380.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3381.1">return</span></span><span class="koboSpan" id="kobo.3382.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3383.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3384.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3385.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3386.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3387.1">"posts-layout"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3388.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3389.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3390.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3391.1">&gt;</span></span>
<span class="language-xml">        </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3392.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3393.1">Suspense</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3394.1">fallback</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3395.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3396.1">{</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3397.1">&lt;</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3398.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3399.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3400.1">Loading posts...</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3401.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3402.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3403.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3404.1">}&gt;</span></strong></span>
          <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3405.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3406.1">Await</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3407.1">resolve</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3408.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3409.1">{data.posts}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3410.1">&gt;</span></strong></span>
            <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3411.1">{(loadedPosts) =&gt; </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3412.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3413.1">PostsList</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3414.1">posts</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3415.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3416.1">{loadedPosts}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3417.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3418.1">}</span></strong></span>
          <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3419.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3420.1">Await</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3421.1">&gt;</span></strong></span>
        <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3422.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3423.1">Suspense</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3424.1">&gt;</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3425.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3426.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3427.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3428.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3429.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3430.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3431.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3432.1">Outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3433.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3434.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3435.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3436.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3437.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3438.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3439.1">&gt;</span></span><span class="koboSpan" id="kobo.3440.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3441.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3442.1">
      &lt;Await&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3443.1">
     element takes a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3444.1">
      resolve
     </span>
    </code>
    <span class="koboSpan" id="kobo.3445.1">
     prop that receives a value of type
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3446.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3447.1">
     from the loader data.
    </span>
    <span class="koboSpan" id="kobo.3447.2">
     It’s wrapped by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3448.1">
      &lt;Suspense&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3449.1">
     component provided by React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3450.1">
     The value passed to resolve is a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3451.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3452.1">
     that was stored in the object returned by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3453.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3454.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.3454.2">
     There, a key named posts was used to hold that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3455.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3456.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3456.2">
     The value for that key was the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3457.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3458.1">
     returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3459.1">
      getPosts()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3460.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3460.2">
     It’s this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3461.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3462.1">
     that’s passed as a value to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3463.1">
      resolve
     </span>
    </code>
    <span class="koboSpan" id="kobo.3464.1">
     via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3465.1">
      &lt;Await resolve={data.posts}&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3466.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3466.2">
     If a different key name were used (e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3467.1">
      blogPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.3468.1">
     ), that key name had to be referenced when setting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3469.1">
      resolve
     </span>
    </code>
    <span class="koboSpan" id="kobo.3470.1">
     (e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3471.1">
      &lt;Await resolve={data.blogPosts}&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3472.1">
     ).
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3473.1">
      Await
     </span>
    </code>
    <span class="koboSpan" id="kobo.3474.1">
     automatically
    </span>
    <a id="_idIndexMarker760">
    </a>
    <span class="koboSpan" id="kobo.3475.1">
     waits for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3476.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3477.1">
     to resolve before then calling the function that’s passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3478.1">
      &lt;Await&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3479.1">
     as a child (that is, the function passed between the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3480.1">
      &lt;Await&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3481.1">
     opening and closing tags).
    </span>
    <span class="koboSpan" id="kobo.3481.2">
     This function is executed by React Router once the data of the deferred operation is available.
    </span>
    <span class="koboSpan" id="kobo.3481.3">
     Therefore, inside that function,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3482.1">
      loadedPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.3483.1">
     is received as a parameter, and the final user interface elements can be rendered.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3484.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3485.1">
      Suspense
     </span>
    </code>
    <span class="koboSpan" id="kobo.3486.1">
     component that’s used as a wrapper around
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3487.1">
      &lt;Await&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3488.1">
     defines some fallback content that is rendered as long as the deferred data is not yet available.
    </span>
    <span class="koboSpan" id="kobo.3488.2">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.3489.1">
      Chapter 10
     </span>
    </em>
    <span class="koboSpan" id="kobo.3490.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.3491.1">
      Behind the Scenes of React and Optimization Opportunities
     </span>
    </em>
    <span class="koboSpan" id="kobo.3492.1">
     , the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3493.1">
      Suspense
     </span>
    </code>
    <span class="koboSpan" id="kobo.3494.1">
     component was used to show some fallback content until the missing code was downloaded.
    </span>
    <span class="koboSpan" id="kobo.3494.2">
     Now, it’s used to bridge the time until the required data is available.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3495.1">
     As shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.3496.1">
      Figure 14.8
     </span>
    </em>
    <span class="koboSpan" id="kobo.3497.1">
     , when returning a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3498.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3499.1">
     (and using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3500.1">
      &lt;Await&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3501.1">
     ) like this, other parts of the website, that are not loaded via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3502.1">
      &lt;Await&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3503.1">
     , are already rendered and displayed while waiting for the posts data.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3504.1">
     <img alt="img" src="image/B31339_14_08.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3505.1">
     Figure 14.8: Post details are already visible while the list of posts is loading
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3506.1">
     Another big advantage of returning a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3507.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3508.1">
     and awaiting it in the client-side code is that you can easily combine multiple fetching processes and
    </span>
    <a id="_idIndexMarker761">
    </a>
    <span class="koboSpan" id="kobo.3509.1">
     control which processes should be deferred and which ones should not.
    </span>
    <span class="koboSpan" id="kobo.3509.2">
     For example, a route might be fetching different pieces of data.
    </span>
    <span class="koboSpan" id="kobo.3509.3">
     If only one process tends to be slow, you could defer only the slow one like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.3510.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3511.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3512.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3513.1">loader</span></span><span class="koboSpan" id="kobo.3514.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3515.1">return</span></span><span class="koboSpan" id="kobo.3516.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3517.1">posts</span></span><span class="koboSpan" id="kobo.3518.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.3519.1">getPosts</span></span><span class="koboSpan" id="kobo.3520.1">(), </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3521.1">// slow operation =&gt; deferred</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.3522.1">userData</span></span><span class="koboSpan" id="kobo.3523.1">: </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3524.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3525.1">getUserData</span></span><span class="koboSpan" id="kobo.3526.1">() </span><span class="hljs-comment"><span class="koboSpan" id="kobo.3527.1">// fast operation =&gt; NOT deferred</span></span><span class="koboSpan" id="kobo.3528.1">
    };
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.3529.1">
     In this example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3530.1">
      getUserData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3531.1">
     is not deferred because the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3532.1">
      await
     </span>
    </code>
    <span class="koboSpan" id="kobo.3533.1">
     keyword is added in front of it.
    </span>
    <span class="koboSpan" id="kobo.3533.2">
     Therefore, JavaScript waits for that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3534.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3535.1">
     (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3536.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.3537.1">
     returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3538.1">
      getUserData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3539.1">
     ) to resolve before returning from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3540.1">
      loader()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3541.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3541.2">
     Hence, the route component is rendered once
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3542.1">
      getUserData()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3543.1">
     finishes but before
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3544.1">
      getPosts()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3545.1">
     is done.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-290">
    <span class="koboSpan" id="kobo.3546.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.3547.1">
      React Router can help you with data fetching and submission.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.3548.1">
      You can register
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3549.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3550.1">
      functions for your routes, causing data fetching to be initialized as a route becomes active.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3551.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3552.1">
      functions return data (or responses, wrapping data) that can be accessed via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3553.1">
       useLoaderData()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3554.1">
      in your component functions.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3555.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3556.1">
      data can be used across components via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3557.1">
       useRouteLoaderData()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3558.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.3559.1">
      You can also register
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3560.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3561.1">
      functions on your routes that are triggered upon form submissions.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.3562.1">
      To trigger
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3563.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3564.1">
      functions, you must use React Router’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3565.1">
       &lt;Form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.3566.1">
      component or submit data programmatically via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3567.1">
       useSubmit()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3568.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3569.1">
       useFetcher()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3570.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3571.1">
       useFetcher()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3572.1">
      can be used to load or submit data without initiating a route transition.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.3573.1">
      When fetching slow data, you can return promises without awaiting them in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3574.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3575.1">
      to defer loading some or all of a route’s data.
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-291">
    <span class="koboSpan" id="kobo.3576.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.3577.1">
     Fetching and submitting data are extremely common tasks, especially when building more complex React applications.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3578.1">
     Typically, those tasks are closely connected to route transitions, and React Router is the perfect tool for handling this kind of operation.
    </span>
    <span class="koboSpan" id="kobo.3578.2">
     That’s why the React Router package offers powerful data management capabilities that vastly simplify these processes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3579.1">
     In this chapter, you learned how React Router assists you with fetching or submitting data and which advanced features help you handle both basic and more complex data manipulation scenarios.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3580.1">
     Therefore, this chapter concludes the list of core React Router features you need to know.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3581.1">
     The next chapters will explore React’s server-side capabilities and how you may build fullstack applications with React, load data on a server, and use the Next.js framework.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-292">
    <span class="koboSpan" id="kobo.3582.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.3583.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.3583.2">
     You can then compare your answers to the examples found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.3584.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.3585.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.3586.1">
      How are data fetching and submission related to routing?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3587.1">
      What’s the purpose of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3588.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3589.1">
      functions?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3590.1">
      What’s the purpose of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3591.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3592.1">
      functions?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3593.1">
      What’s the difference between
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3594.1">
       &lt;Form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.3595.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3596.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.3597.1">
      ?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3598.1">
      What’s the difference between
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3599.1">
       useSubmit()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3600.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3601.1">
       useFetcher()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3602.1">
      ?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3603.1">
      What’s the idea behind returning promises instead of awaiting them in a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3604.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3605.1">
      ?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-293">
    <span class="koboSpan" id="kobo.3606.1">
     Apply What You Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3607.1">
     Apply your knowledge about routing, combined with data manipulation, to the following activity.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-294">
    <span class="koboSpan" id="kobo.3608.1">
     Activity 14.1: A To-Dos App
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.3609.1">
     In this activity, your task is to create a basic to-do list web app that allows users to manage their daily to-do tasks.
    </span>
    <span class="koboSpan" id="kobo.3609.2">
     The finished page must allow users to add to-do items, update to-do items, delete to-do items, and view a list of to-do items.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.3610.1">
     The following paths must be supported:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3611.1">
       /
      </span>
     </code>
     <span class="koboSpan" id="kobo.3612.1">
      : The main page, responsible for loading and displaying a list of to-do items
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3613.1">
       /new
      </span>
     </code>
     <span class="koboSpan" id="kobo.3614.1">
      : A page, opened as a modal above the main page, allowing users to add a new to-do item
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3615.1">
       /:id
      </span>
     </code>
     <span class="koboSpan" id="kobo.3616.1">
      : A page, also opened as a modal above the main page, allowing users to update or delete a selected to-do item
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.3617.1">
     If no to-do items exist yet, a fitting info message should be shown on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3618.1">
      /
     </span>
    </code>
    <span class="koboSpan" id="kobo.3619.1">
     page.
    </span>
    <span class="koboSpan" id="kobo.3619.2">
     If users try to visit
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3620.1">
      /:id
     </span>
    </code>
    <span class="koboSpan" id="kobo.3621.1">
     with an invalid to-do ID, an error modal should be displayed.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.3622.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.3623.1">
      For this activity, there is no backend API you could use.
     </span>
     <span class="koboSpan" id="kobo.3623.2">
      Instead, use
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3624.1">
       localStorage
      </span>
     </code>
     <span class="koboSpan" id="kobo.3625.1">
      to manage the to-do data.
     </span>
     <span class="koboSpan" id="kobo.3625.2">
      Keep in mind that the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3626.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3627.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3628.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3629.1">
      functions are executed on the client side and can therefore use any browser APIs, including
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3630.1">
       localStorage
      </span>
     </code>
     <span class="koboSpan" id="kobo.3631.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.3632.1">
      You will find example implementations for adding, updating, deleting, and getting to-do items from
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3633.1">
       localStorage
      </span>
     </code>
     <span class="koboSpan" id="kobo.3634.1">
      at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/activities/practice-1/src/data/todos.js">
      <span class="url">
       <span class="koboSpan" id="kobo.3635.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/activities/practice-1/src/data/todos.js
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.3636.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.3637.1">
      Also, don’t be confused by the pages that open as modals above other pages.
     </span>
     <span class="koboSpan" id="kobo.3637.2">
      Ultimately, these are simply nested pages, styled as modal overlays.
     </span>
     <span class="koboSpan" id="kobo.3637.3">
      In case you get stuck, you can use the example
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3638.1">
       Modal
      </span>
     </code>
     <span class="koboSpan" id="kobo.3639.1">
      wrapper component found at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/activities/practice-1/src/components/Modal.jsx">
      <span class="url">
       <span class="koboSpan" id="kobo.3640.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/activities/practice-1/src/components/Modal.jsx
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.3641.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.3642.1">
      For this activity, you can write all CSS styles on your own if you so choose.
     </span>
     <span class="koboSpan" id="kobo.3642.2">
      But if you want to focus on the React and JavaScript logic, you can also use the finished CSS file from the solution at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/activities/practice-1/src/index.css">
      <span class="url">
       <span class="koboSpan" id="kobo.3643.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/14-routing-data/activities/practice-1/src/index.css
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.3644.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.3645.1">
      If you use that file, explore it carefully to ensure you understand which IDs or CSS classes might need to be added to certain JSX elements of your solution.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.3646.1">
     To complete the activity, perform the following steps:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.3647.1">
      Create a new React project and install the React Router package.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3648.1">
      Create components (with the content shown in the screenshots below) that will be loaded for the three required pages.
     </span>
     <span class="koboSpan" id="kobo.3648.2">
      Also, add links (or programmatic navigation) between these pages.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3649.1">
      Enable routing and add the route definitions for the three pages.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3650.1">
      Create
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3651.1">
       loader()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3652.1">
      functions to load (and use) all the data needed by the individual pages.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.3653.1">
      Add
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.3654.1">
       action()
      </span>
     </code>
     <span class="koboSpan" id="kobo.3655.1">
      functions for adding, updating, and deleting to-dos.
     </span>
    </li>
   </ol>
   <p class="normal-one">
    <em class="italic">
     <span class="koboSpan" id="kobo.3656.1">
      Hint:
     </span>
    </em>
    <span class="koboSpan" id="kobo.3657.1">
     If you need to submit multiple forms for different actions from the same page, you could include a hidden input field that sets some value you can check for in your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3658.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3659.1">
     function, e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3660.1">
      &lt;input type="hidden" name="_method" value="DELETE"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3661.1">
     .
    </span>
    <span class="koboSpan" id="kobo.3661.2">
     Alternatively, you can also set
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3662.1">
      &lt;Form method="delete"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.3663.1">
     (or set it to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3664.1">
      "patch"
     </span>
    </code>
    <span class="koboSpan" id="kobo.3665.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3666.1">
      "put"
     </span>
    </code>
    <span class="koboSpan" id="kobo.3667.1">
     , or other HTTP verbs) and check for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3668.1">
      request.method
     </span>
    </code>
    <span class="koboSpan" id="kobo.3669.1">
     in your
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.3670.1">
      action()
     </span>
    </code>
    <span class="koboSpan" id="kobo.3671.1">
     function.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.3672.1">
      Add error handling in case data loading or saving fails.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.3673.1">
     The finished pages should look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3674.1">
     <img alt="img" src="image/B31339_14_09.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3675.1">
     Figure 14.9: The main page displaying a list of to-dos
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3676.1">
     <img alt="img" src="image/B31339_14_10.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3677.1">
     Figure 14.10: The /new page, opened as a modal, allowing users to add a new to-do
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3678.1">
     <img alt="img" src="image/B31339_14_11.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3679.1">
     Figure 14.11: The /:id page, also opened as a modal, allowing users to edit or delete a to-do
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.3680.1">
     <img alt="img" src="image/B31339_14_12.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.3681.1">
     Figure 14.12: An info message, displayed if no to-dos were found
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.3682.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.3683.1">
      The full code, and solution, to this activity can be found at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.3684.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/14-routing-data/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.3685.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>