# 前言

**React**是一个革命性的开源 JavaScript 库，通过构建由称为组件的小型、隔离的块组成的复杂用户界面，为 Web 应用程序注入活力。本书作为一份路线图，引导您领略 React 的奇妙之处，通过引入一个高效的工作流程来提高您的生产力，同时不牺牲质量。

我们的旅程从深入 React 的核心开始，全面了解其内部机制和架构。在这个坚实的基础之上，我们将引导您编写干净且易于维护的代码，将复杂的概念分解成易于消化和管理的小块。

在我们继续旅程的过程中，我们将揭示构建组件的艺术，这些组件不仅仅是单一实体，而是可以在整个应用程序中重复使用的部件。我们将阐明构建应用程序结构的方法，使它们更加有序和易于管理。随着我们为您提供有效实现这一目标的策略和技术，创建功能表单的看似艰巨的任务将变得轻而易举。

随着我们进一步攀登，我们将沉浸在 React 组件的样式化中。您将学习如何通过美学吸引力使您的应用程序生动起来，同时确保它们保持快速和响应。此外，您还将发现提高应用程序性能的秘密，对您的组件进行微调以实现速度和效率。

在我们旅程的最后阶段，我们将深入研究有效的测试方法，提高您应用程序的质量和可靠性。您还将获得对贡献 React 及其繁荣生态系统的洞察，加入那些不断推动其发展的开发者行列。

到本书结束时，试错过程、开发障碍和猜测将成为过去。您将掌握 React 的力量，拥有构建和部署真实世界 React Web 应用程序所需的知识和技能，自信且优雅。

# 这本书面向谁

这本书是为那些希望提高他们对 React 的理解并将其应用于实际应用程序开发的网络开发者而写的。假设您具有中级 React 和 JavaScript 经验。

# 本书涵盖的内容

在*第一章*，*React 的初学者之旅*中，我们通过学习编写声明式代码和区分我们的组件与 React 的元素来开始理解 React 的旅程。我们还讨论了为什么我们在 React 中将逻辑和模板结合起来，这个决定最初颇具争议，但最终是有益的。在 JavaScript 快速发展的世界中，我们建议采取小而可控的步骤以避免疲劳。我们通过介绍新的`create-vite`工具来结束，为您在 React 中进行动手编码体验做好准备。

在*第二章*，*介绍 TypeScript*中，我们将学习 TypeScript 的基础知识，包括创建简单的类型、接口、使用枚举、命名空间和模板字符串。我们还将了解如何设置我们的第一个 TypeScript 配置文件（`tsconfig.json`），并将其分为两部分 - 一个公共部分和一个特定部分，这在与 MonoRepos 一起工作时特别有用。在本章之后，你将准备好深入使用 JSX/TSX 代码，并在下一章探索使你的代码更好的方法。准备好使用 TypeScript 使你的 React 应用易于使用和维护。

在*第三章*，*清理你的代码*中，我们将了解 JSX，包括它的编写方式和它能做什么。我们还将设置 Prettier 和 ESLint 以保持我们的代码整洁并防止错误。此外，我们将学习函数式编程，它使我们的代码更容易管理和测试。在整理好我们的代码后，我们将准备好更深入地学习 React，并在下一章学习如何制作我们可以重复使用的组件。通过养成良好的习惯，我们可以构建简单易管理、可扩展和可检查的 React 应用。

在*第四章*，*探索流行的组合模式*中，我们将学习如何使用“props”使我们的可重用组件更好地协同工作。使用 props 有助于保持我们的组件独立和定义明确。我们将探讨两种常见的组件组织方式：容器模式和展示模式，它们将组件的规则和外观分开。我们还将了解**高阶组件**（**HOCs**）用于处理上下文，而不会使我们的组件过于依赖，以及函数作为子组件的模式，用于动态创建组件。

在*第五章*，*为浏览器编写代码*中，我们将了解 React 如何在 Web 浏览器中用于创建表单、处理事件和动画 SVG。我们将学习`useRef`钩子，它是一种轻松访问 DOM 节点的方法。

使用 React 简单直接的方法，管理复杂的 Web 应用变得更容易。此外，如果需要，React 允许我们直接访问 DOM 节点，这使得我们可以轻松地将 React 与其他库一起使用。

在*第六章*，*让你的组件看起来很漂亮*中，我们将深入了解 React 中的样式。我们首先将探讨 CSS 在大项目中工作的问题，以 Meta 的经验为例。我们将学习如何在我们的 React 组件内部直接编写样式，这使我们的代码整洁且易于阅读。但我们也将了解这种方法的优势，并探索另一种样式方法，称为 CSS 模块，它允许我们在单独的文件中编写 CSS，但将样式限制在单个组件中。最后，我们将了解`styled-components`，这是一个流行的 React 样式库。到本章结束时，你将拥有许多使你的 React 应用看起来很棒的工具。

在*第七章*，*应避免的反模式*中，我们将讨论四种使用组件的方法，这些方法可能会减慢或破坏我们的 Web 应用。对于每个问题，我们将使用示例来展示出了什么问题以及如何修复它。我们将了解为什么使用属性设置状态可能会在状态和属性之间引起问题。我们还将看到如何使用错误的“key”属性破坏 React 更新组件的方式。最后，我们将了解为什么将非标准属性扩展到 DOM 元素是一个坏主意。理解这些问题将帮助我们更有效地使用 React 并避免常见错误。

在*第八章*，*React Hooks*中，我们将愉快地学习关于新 React Hooks 的知识。我们将了解它们是如何工作的，如何使用它们来获取数据，以及如何将类组件转换为 Hooks 组件。我们还将了解副作用以及`memo`、`useMemo`和`useCallback`之间的区别。最后，我们将看到`useReducer` Hook 是如何工作的，以及它与`react-redux`的不同之处。所有这些都将帮助我们使我们的 React 组件更快、更好。

在*第九章*，*React Router*中，我们将学习关于 React Router 的知识，这是我们与 React 一起使用来在单页应用中切换页面的工具。React 本身不这样做，所以我们使用 React Router。我们将了解如何使用它来使我们的应用响应不同的 URL 并管理导航。到本章结束时，你将了解 React Router 是如何工作的，以及如何在你的项目中使用它。我们将学习`react-router`、`react-router-dom`和`react-router-native`包之间的区别，如何设置 React Router，如何添加`<Routes>`组件，以及如何向路由添加参数。

在*第十章*，*React 18 新特性*中，我们将探索新的和改进的 React 18。它拥有众多特性，使得构建酷炫、交互式的 APP 变得更加容易。

通过自动状态更新分组、并发渲染、用于获取数据的 Suspense、更好的错误处理和新的组件类型，你可以创建引人入胜且快速的 APP。如果你使用 React，考虑升级到 React 18 是个不错的选择。我们还将探讨 Node 18 和 19 的一些重大新特性，这些特性可以使我们的 Web 项目更加出色。

在*第十一章*，*数据管理*中，我们将学习关于 React Context API 以及如何使用 React Suspense 与 SWR 的知识。我们将了解 Context API 的基础知识，包括创建和使用上下文以及`useContext`钩子如何使这一切变得更加简单。我们还将探讨 React Suspense 以及它是如何帮助我们更好地处理加载状态以提供更流畅的用户体验的。我们还将了解 SWR，它使得使用 React Suspense 获取和缓存数据变得更加容易。最后，我们将学习如何使用新的 Redux Toolkit。所有这些工具都将帮助我们构建更快、更用户友好的 React 应用。

在*第十二章*，*服务器端渲染*，我们将通过 React 完成对**服务器端渲染**（**SSR**）的旅程。现在你将知道如何创建一个使用 SSR 的应用程序，以及为什么它对搜索引擎优化（**SEO**）、社交分享和提升性能等方面很有用。我们将学习如何在服务器上加载数据并将其放入 HTML 模板中，以便在浏览器启动时客户端应用程序准备好。最后，我们将看到像 Next.js 这样的工具如何通过减少额外代码和隐藏一些复杂部分来简化在 React 中设置 SSR。

在*第十三章*，*通过真实项目理解 GraphQL*，我们将学习 GraphQL，这是一个帮助我们更高效地与 API 和数据工作的酷炫工具。与常规的 REST API 不同，GraphQL 允许我们请求我们需要的精确内容，而不需要更多。我们将用它来为真实项目制作一个简单的登录和用户注册系统。我们将学习如何安装 PostgreSQL，使用`.env`文件设置环境变量，设置 Apollo Server，执行 GraphQL 查询和突变，与解析器一起工作，创建 Sequelize 模型，使用 JWT，在 GraphQL Playground 中玩耍，并进行身份验证。到那时，你将知道如何在你的项目中使用 GraphQL。

在*第十四章*，*MonoRepo 架构*，我们将讨论一个称为“MonoRepo”的概念。通常，当我们构建应用程序时，我们有一个应用程序，一个 git 仓库和一个构建输出。但许多组织使用单个仓库来存储所有应用程序、组件和库，以简化开发。这就是我们所说的单仓库。这就像把所有的代码放在一个大篮子里，而不是许多小篮子里。这使得保持一切更新变得更容易，并且可以节省时间。我们还将讨论 MonoRepo 如何使代码重构、提高团队合作和加快更新包依赖项的过程变得更容易，而无需每次更新时发布新版本。

在*第十五章*，*提高应用程序的性能*，我们将探讨使你的应用程序运行得更顺畅、更快的技巧，以提供更好的用户体验。我们将深入了解 React 如何更新应用程序的显示，以及如何使用键来提高此过程的效率。我们将发现结构良好、任务导向的组件在提升应用程序性能方面的重要性。我们将讨论不可变性的概念及其在帮助`React.memo`和`shallowCompare`有效工作中的重要性。接近尾声时，我们将介绍各种工具和库，这些工具和库可以进一步加快你的应用程序。本章旨在为你提供宝贵的知识，以增强你应用程序的速度和性能。

在第十六章，*测试和调试*中，我们将学习有关测试的所有内容。你会发现为什么测试很重要，并探索检查我们的 React 组件是否按预期工作的不同工具和技术。我们将使用 React Testing Library 和 Jest 等库来编写和运行测试，甚至了解如何测试应用中的复杂部分，如高阶组件或字段众多的表单。此外，我们还将学习如何使用 React DevTools 和 Redux DevTools 等工具来帮助我们开发更好的应用。到本章结束时，你将牢固掌握如何通过有效的测试保持应用的良好运行状态。

在第十七章，*部署到生产环境*中，我们将把您构建的 React 应用分享给全世界！我们将使用一个名为 DigitalOcean 的云服务来完成这项工作。您将学习如何使用 Node.js 和 nginx 在服务器上运行您的应用，我们将使用 DigitalOcean 的 Ubuntu 服务器来完成这项工作。我们将向您介绍如何设置 DigitalOcean Droplet、配置它并将其链接到您的域名。我们还将向您介绍 CircleCI，这是一个帮助您自动确保应用始终为用户准备就绪的工具，无论您做了多少更改。到本章结束时，您的应用将可以在互联网上供所有人查看！

# 要充分利用本书

要掌握 React，你需要具备 JavaScript 和 Node.js 的基础知识。本书主要面向网页开发者，在撰写本书时，对读者的以下假设：

+   读者知道如何安装 Node.js 的最新版本。

+   读者是一位中级开发者，能够理解 JavaScript ES6 语法。

+   读者对 CLI 工具和 Node.js 语法有一些经验。

## 下载示例代码文件

本书代码包托管在 GitHub 上，网址为 [`github.com/PacktPublishing/React-18-Design-Patterns-and-Best-Practices-Fourth-Edition/`](https://github.com/PacktPublishing/React-18-Design-Patterns-and-Best-Practices-Fourth-Edition/)。

我们还从丰富的图书和视频目录中提供了其他代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 上找到。查看它们吧！

## 下载彩色图像

我们还提供了一份包含本书中使用的截图/图表彩色图像的 PDF 文件。您可以从这里下载：[`packt.link/o1WtB`](https://packt.link/o1WtB)。

## 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。例如：“在您创建此 `util` 之后，您需要在 `packages/utils/src/index.ts` 创建 `index.ts` 文件。”

代码块设置为以下格式：

```js
{
"name": "api",
"version": "1.0.0",
"main": "index.js",
"author": "",
"license": "ISC"
} 
```

任何命令行输入或输出都按以下方式编写：

```js
cd packages/api
npm init -y 
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。例如：“我们需要创建的第一个包，以便能够编译其他包，称为**devtools**。”

警告或重要说明看起来像这样。

小贴士和技巧看起来像这样。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：请通过`feedback@packtpub.com`发送电子邮件，并在邮件主题中提及书籍标题。如果您对此书的任何方面有疑问，请通过`questions@packtpub.com`发送电子邮件给我们。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在此书中发现错误，我们将不胜感激，如果您能向我们报告，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，点击**提交勘误**，并填写表格。

**盗版**：如果您在互联网上发现我们作品的任何形式的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packtpub.com`与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了*React 18 设计模式和最佳实践，第四版*，我们很乐意听到您的想法！请[点击此处直接转到此书的 Amazon 评论页面](https://packt.link/r/1803233109)并分享您的反馈。

您的评论对我们和科技社区非常重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

你喜欢在路上阅读，但无法携带你的印刷书籍到处走？你的电子书购买是否与你的选择设备不兼容？

不要担心，现在每购买一本 Packt 书籍，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止这些，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取好处：

1.  扫描下面的二维码或访问以下链接

![](img/B18414_Free_PDF_QR.png)

[`packt.link/free-ebook/978-1-80323-310-9`](https://packt.link/free-ebook/978-1-80323-310-9)

1.  提交您的购买证明

1.  就这些！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件。
