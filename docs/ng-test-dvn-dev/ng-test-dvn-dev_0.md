# 前言

本书将为读者提供一个关于 JavaScript 测试驱动开发（TDD）的完整指南，然后深入探讨 Angular 的方法。它将提供清晰的、逐步的示例，不断强调 TDD 的最佳实践。本书将同时关注使用 Karma 进行单元测试和使用 Protractor 进行端到端测试，不仅关注如何使用工具，还要理解它们的构建原因以及为什么应该使用它们。在整个过程中，将重点关注何时、何地以及如何使用这些工具，不断强调测试驱动开发生命周期（测试、执行和重构）的原则。

本书中的所有示例都基于 Angular v2，并与 Angular v4 兼容。

# 本书涵盖的内容

第一章*，测试驱动开发简介*，通过解释 TDD 如何在开发过程中发挥作用，向我们介绍了测试驱动开发的基本原理。

第二章*，JavaScript 测试的细节*，涵盖了 JavaScript 环境下的 TDD。本章探讨了 JavaScript 应用程序中需要的测试类型，如单元测试、行为测试、集成测试和端到端测试。还解释了不同类型的 JavaScript 测试工具、框架及其在 Angular 应用程序中的用途。

第三章*，Karma 之道*，探讨了 Karma 的起源以及为什么在任何 Angular 项目中都必须使用它。通过本章的学习，读者不仅将了解 Karma 解决的问题，还将通过一个完整的示例来使用 Karma。

第四章*，使用 Protractor 进行端到端测试*，深入研究了端到端测试应用程序，涵盖了应用程序的所有层。本章向读者介绍了 Protractor，Angular 团队的端到端测试工具。然后解释了 Protractor 的创建原因以及它如何解决问题。最后，它逐步指导读者如何在现有的 Angular 项目中安装、配置和使用 Protractor 进行 TDD。

第五章*，Protractor，领先一步*，深入探讨了 Protractor 并探索了一些高级配置。然后，它通过示例解释了测试套件的调试过程。这还探讨了一些常用的 Protractor API，并附有相关示例。

第六章*，第一步*，介绍了如何使用 TDD 来构建具有类、组件和服务的 Angular 应用程序的入门步骤。本章帮助读者开始 TDD 之旅，并看到基本原理的实际应用。到目前为止，本书专注于 TDD 和工具的基础。然后，通过向前迈进一步，它深入探讨了与 Angular 一起使用 TDD。

第七章*，翻转*，继续扩展我们对使用 TDD 与 Angular 功能的知识，例如路由和导航，以通过我们的示例 Angular 应用程序获得结果集。除了 Angular 功能，本书还指导读者如何使用 Protractor 的帮助对这些特定功能进行端到端测试。

第八章*，告诉世界*，涵盖了示例 Angular 应用程序的更多单元测试，包括路由和导航。除此之外，本章还重构了现有代码，使其更具可测试性。然后，在重构代码的同时介绍了 Angular 服务和事件广播，并引入了 MockBackend 来测试服务中的 HTTP 请求。

# 你需要为这本书做什么

在本书中，我们使用**Node Package Manager**（**npm**）作为运行应用程序和各种测试工具的命令工具。因此，全局安装 npm 是先决条件。要安装它，必须在操作系统上安装 Node.js。

我们不会讨论如何安装 Node.js 和 npm。已经有很多资源可用于在任何操作系统上安装它们。

# 这本书适合谁

这本书适合有基本的 Angular 经验但想要了解何时、为什么以及如何应用测试技术和最佳实践来创建高质量清晰代码的开发人员。要充分利用本书，您应该对 HTML、CSS 和 JavaScript 有很好的理解，并对带有 TypeScript 的 Angular 有基本的了解。

# 规范

在本书中，您会发现许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名显示如下："下面的代码行读取链接并将其分配给`Calculator`函数。"

代码块设置如下：

```ts
var calculator = {
   multiply : function(amount1, amount2) {
       return amount1 * amount2;
   }
};
```

当我们希望引起您对代码块的特定部分的注意时，相关的行或项目会以粗体显示：

```ts
<!DOCTYPE html>
<html>
  <head>
    <title>Test Runner</title>
  </head>
  <body>
    // ...
 **<script src="calculator.js"></script>**
  </body>
</html>
```

任何命令行输入或输出都以以下方式编写：

```ts
**$ npm install protractor
$ npm protractor --version**

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这种方式出现在文本中："为了下载新模块，我们将转到**文件** | **设置** | **项目名称** | **项目解释器**"。

### 注意

警告或重要说明会出现在这样的框中。

### 提示

提示和技巧会以这种方式出现。
