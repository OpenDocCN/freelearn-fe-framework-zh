<html><head></head><body>
<div id="_idContainer017" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-17"><a id="_idTextAnchor016" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-18" class="calibre5"><a id="_idTextAnchor017" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.2.1">Preparing for Full-Stack Development</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.3.1">In this chapter, I am first going to give a brief overview of the contents of the book and explain why the skills taught in this book are important in a modern development environment. </span><span class="kobospan" id="kobo.3.2">Then, we will jump into action and set up a project that will be used as a basis for the development of our full-stack projects. </span><span class="kobospan" id="kobo.3.3">At the end of this chapter, you will have </span><a id="_idIndexMarker000" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.4.1">an </span><strong class="bold"><span class="kobospan" id="kobo.5.1">integrated development environment</span></strong><span class="kobospan" id="kobo.6.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.7.1">IDE</span></strong><span class="kobospan" id="kobo.8.1">) and project set up and ready for full-stack development and will understand which tools can be used for setting up </span><span><span class="kobospan" id="kobo.9.1">such projects.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.10.1">In this chapter, we are going to cover the following </span><span><span class="kobospan" id="kobo.11.1">main topics:</span></span></p>
<ul class="calibre10">
<li class="calibre11"><span class="kobospan" id="kobo.12.1">Motivation to become a </span><span><span class="kobospan" id="kobo.13.1">full-stack developer</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.14.1">What is new in the </span><span><span class="kobospan" id="kobo.15.1">third edition?</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.16.1">Getting the most out of </span><span><span class="kobospan" id="kobo.17.1">this book</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.18.1">Setting up the </span><span><span class="kobospan" id="kobo.19.1">development environment</span></span></li>
</ul>
<h1 id="_idParaDest-19" class="calibre5"><a id="_idTextAnchor018" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.20.1">Technical requirements</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.21.1">This chapter will guide you through setting up all the necessary technologies needed for developing full-stack web applications throughout this book. </span><span class="kobospan" id="kobo.21.2">Before we start, please install the following, if you do not already have </span><span><span class="kobospan" id="kobo.22.1">them installed:</span></span></p>
<ul class="calibre10">
<li class="calibre11"><span><span class="kobospan" id="kobo.23.1">Node.js v20.10.0</span></span></li>
<li class="calibre11"><span><span class="kobospan" id="kobo.24.1">Git v2.43.0</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.25.1">Visual Studio </span><span><span class="kobospan" id="kobo.26.1">Code v1.84.2</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.27.1">Those versions are the ones used in the book. </span><span class="kobospan" id="kobo.27.2">While installing a newer version should not be an issue, please note that certain steps might work differently on a newer version. </span><span class="kobospan" id="kobo.27.3">If you are having an issue with the code and steps provided in this book, please try using the </span><span><span class="kobospan" id="kobo.28.1">mentioned versions.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.29.1">You can find the code for this chapter on </span><span><span class="kobospan" id="kobo.30.1">GitHub:</span></span><span> </span><a href="https://github.com/PacktPublishing/Modern-Full-Stack-React-Projects/tree/main/ch1" class="calibre6 pcalibre1 pcalibre"><span><span class="kobospan" id="kobo.31.1">https://github.com/PacktPublishing/Modern-Full-Stack-React-Projects/tree/main/ch1</span></span></a><span><span class="kobospan" id="kobo.32.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.33.1">The CiA video for this chapter can be found </span><span><span class="kobospan" id="kobo.34.1">at: </span></span><a href="https://youtu.be/dyf3nECvKAE" class="calibre6 pcalibre1 pcalibre"><span><span class="kobospan" id="kobo.35.1">https://youtu.be/dyf3nECvKAE</span></span></a><span><span class="kobospan" id="kobo.36.1">.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.37.1">Important</span></p>
<p class="callout"><span class="kobospan" id="kobo.38.1">If you cloned the full repository for the book, Husky may not find the </span><strong class="source-inline1"><span class="kobospan" id="kobo.39.1">.git</span></strong><span class="kobospan" id="kobo.40.1"> directory when running </span><strong class="source-inline1"><span class="kobospan" id="kobo.41.1">npm install</span></strong><span class="kobospan" id="kobo.42.1">. </span><span class="kobospan" id="kobo.42.2">In that case, just run </span><strong class="source-inline1"><span class="kobospan" id="kobo.43.1">git init</span></strong><span class="kobospan" id="kobo.44.1"> in the root of the corresponding </span><span><span class="kobospan" id="kobo.45.1">chapter folder.</span></span></p>
<h1 id="_idParaDest-20" class="calibre5"><a id="_idTextAnchor019" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.46.1">Motivation to become a full-stack developer</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.47.1">Understanding full-stack development is becoming increasingly important, as companies seek to increase the cooperation – and reduce the gap – between the frontend and the backend. </span><span class="kobospan" id="kobo.47.2">The frontend is becoming more deeply integrated with the backend, using technologies such as server-side rendering. </span><span class="kobospan" id="kobo.47.3">Throughout this book, we are going to learn about the development, integration, testing, and deployment of </span><span><span class="kobospan" id="kobo.48.1">full-stack projects.</span></span></p>
<h1 id="_idParaDest-21" class="calibre5"><a id="_idTextAnchor020" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.49.1">What is new in this release of Full-Stack React Projects?</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.50.1">Unlike previous releases of Full-Stack React Projects, this new release focuses more on the integration of the frontend with the backend than the previous two editions, and thus intentionally does not focus so much on creating</span><a id="_idIndexMarker001" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.51.1"> a </span><strong class="bold"><span class="kobospan" id="kobo.52.1">user interface</span></strong><span class="kobospan" id="kobo.53.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.54.1">UI</span></strong><span class="kobospan" id="kobo.55.1">) or using UI libraries, such as </span><strong class="bold"><span class="kobospan" id="kobo.56.1">Material UI</span></strong><span class="kobospan" id="kobo.57.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.58.1">MUI</span></strong><span class="kobospan" id="kobo.59.1">), on the</span><a id="_idIndexMarker002" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.60.1"> frontend. </span><span class="kobospan" id="kobo.60.2">This edition gives the essential knowledge for integrating and deploying full-stack web applications. </span><span class="kobospan" id="kobo.60.3">The deployment of apps was missing completely from previous editions, and testing was only briefly introduced. </span><span class="kobospan" id="kobo.60.4">This edition focuses more on these essential parts of full-stack development such that, after reading this book, you will be able to develop, integrate, test, and deploy a full-stack </span><span><span class="kobospan" id="kobo.61.1">web application.</span></span></p>
<h1 id="_idParaDest-22" class="calibre5"><a id="_idTextAnchor021" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.62.1">Getting the most out of this book</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.63.1">To keep the book short and to the point, we are going to use specific technologies and tools. </span><span class="kobospan" id="kobo.63.2">The concepts, however, apply to other technologies as well. </span><span class="kobospan" id="kobo.63.3">We will attempt to briefly introduce alternatives so that if something is not a good fit for your project, you can pick and choose different tools. </span><span class="kobospan" id="kobo.63.4">I recommend first trying out the technologies introduced in this book to be able to follow the instructions, but do not hesitate to try out the alternatives on your </span><span><span class="kobospan" id="kobo.64.1">own later.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.65.1">It is highly recommended that you write the code on your own. </span><span class="kobospan" id="kobo.65.2">Do not simply run the code examples that are provided. </span><span class="kobospan" id="kobo.65.3">It is important to write the code yourself in order to learn and understand it properly. </span><span class="kobospan" id="kobo.65.4">However, if you run into any issues, you can always refer to the </span><span><span class="kobospan" id="kobo.66.1">code examples.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.67.1">With that said, let’s start with setting up our development environment in the </span><span><span class="kobospan" id="kobo.68.1">next section.</span></span></p>
<h1 id="_idParaDest-23" class="calibre5"><a id="_idTextAnchor022" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.69.1">Setting up the development environment</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.70.1">In this book, we are going to </span><a id="_idIndexMarker003" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.71.1">use </span><strong class="bold"><span class="kobospan" id="kobo.72.1">Visual Studio Code</span></strong><span class="kobospan" id="kobo.73.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.74.1">VS Code</span></strong><span class="kobospan" id="kobo.75.1">) as our code editor. </span><span class="kobospan" id="kobo.75.2">Feel free to use whichever editor you prefer, but keep in mind that the extensions used and settings configured may be slightly different in the editor of </span><span><span class="kobospan" id="kobo.76.1">your choice.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.77.1">Let’s now install VS Code and useful extensions, and then continue setting up all the tools needed for our </span><span><span class="kobospan" id="kobo.78.1">development environment.</span></span></p>
<h2 id="_idParaDest-24" class="calibre7"><a id="_idTextAnchor023" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.79.1">Installing VS Code and extensions</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.80.1">Before we </span><a id="_idIndexMarker004" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.81.1">can get started developing and setting up the other tools, we need to set up our code editor by following </span><span><span class="kobospan" id="kobo.82.1">these steps:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.83.1">Download </span><a id="_idIndexMarker005" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.84.1">VS Code for your operating system from the official website (at the time of writing, the </span><a id="_idIndexMarker006" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.85.1">URL is </span><a href="https://code.visualstudio.com/" class="calibre6 pcalibre1 pcalibre"><span class="kobospan" id="kobo.86.1">https://code.visualstudio.com/</span></a><span class="kobospan" id="kobo.87.1">). </span><span class="kobospan" id="kobo.87.2">We are going to use version </span><em class="italic"><span class="kobospan" id="kobo.88.1">1.84.2</span></em><span class="kobospan" id="kobo.89.1"> in </span><span><span class="kobospan" id="kobo.90.1">this book.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.91.1">After downloading and installing the application, open it, and you should see the </span><span><span class="kobospan" id="kobo.92.1">following window:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer008">
<span class="kobospan" id="kobo.93.1"><img alt="Figure 1.1 – A fresh installation of VS Code (on macOS)" src="image/B19385_01_1.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.94.1">Figure 1.1 – A fresh installation of VS Code (on macOS)</span></p>
<ol class="calibre15">
<li value="3" class="calibre11"><span class="kobospan" id="kobo.95.1">To make things easier later, we are going to install some extensions, so click on the </span><strong class="bold"><span class="kobospan" id="kobo.96.1">Extensions</span></strong><span class="kobospan" id="kobo.97.1"> icon, which is the fifth icon from the top on the left in the screenshot. </span><span class="kobospan" id="kobo.97.2">A</span><a id="_idIndexMarker007" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.98.1"> sidebar should open, where you will see </span><strong class="bold"><span class="kobospan" id="kobo.99.1">Search Extensions in Marketplace</span></strong><span class="kobospan" id="kobo.100.1"> at the top. </span><span class="kobospan" id="kobo.100.2">Enter an extension name here and click on </span><strong class="bold"><span class="kobospan" id="kobo.101.1">Install</span></strong><span class="kobospan" id="kobo.102.1"> to install it. </span><span class="kobospan" id="kobo.102.2">Let’s start by installing the </span><span><strong class="bold"><span class="kobospan" id="kobo.103.1">Docker</span></strong></span><span><span class="kobospan" id="kobo.104.1"> extension:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer009">
<span class="kobospan" id="kobo.105.1"><img alt="Figure 1.2 – Installing the Docker extension in VS Code" src="image/B19385_01_2.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.106.1">Figure 1.2 – Installing the Docker extension in VS Code</span></p>
<ol class="calibre15">
<li value="4" class="calibre11"><span class="kobospan" id="kobo.107.1">Install the</span><a id="_idIndexMarker008" class="calibre6 pcalibre1 pcalibre"/> <span><span class="kobospan" id="kobo.108.1">following extensions:</span></span><ul class="calibre16"><li class="calibre11"><span class="kobospan" id="kobo.109.1">Docker (</span><span><span class="kobospan" id="kobo.110.1">by Microsoft)</span></span></li><li class="calibre11"><span class="kobospan" id="kobo.111.1">ESLint (</span><span><span class="kobospan" id="kobo.112.1">by Microsoft)</span></span></li><li class="calibre11"><span class="kobospan" id="kobo.113.1">Prettier – Code formatter (</span><span><span class="kobospan" id="kobo.114.1">by Prettier)</span></span></li><li class="calibre11"><span class="kobospan" id="kobo.115.1">MongoDB for VS Code (</span><span><span class="kobospan" id="kobo.116.1">by MongoDB)</span></span></li></ul><p class="calibre3"><span class="kobospan" id="kobo.117.1">Support for JavaScript and Node.js already comes built-in with </span><span><span class="kobospan" id="kobo.118.1">VS Code.</span></span></p></li>
<li class="calibre11"><span class="kobospan" id="kobo.119.1">Create a folder for the projects made in this book (for example, you can call it </span><strong class="source-inline1"><span class="kobospan" id="kobo.120.1">Full-Stack-React-Projects</span></strong><span class="kobospan" id="kobo.121.1">). </span><span class="kobospan" id="kobo.121.2">Inside this folder, create a new folder </span><span><span class="kobospan" id="kobo.122.1">called </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.123.1">ch1</span></strong></span><span><span class="kobospan" id="kobo.124.1">.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.125.1">Go to the </span><strong class="bold"><span class="kobospan" id="kobo.126.1">Files</span></strong><span class="kobospan" id="kobo.127.1"> tab (first icon from top) and </span><a id="_idIndexMarker009" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.128.1">click the </span><strong class="bold"><span class="kobospan" id="kobo.129.1">Open Folder</span></strong><span class="kobospan" id="kobo.130.1"> button to open the empty </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.131.1">ch1</span></strong></span><span><span class="kobospan" id="kobo.132.1"> folder.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.133.1">If you get a dialog asking </span><strong class="bold"><span class="kobospan" id="kobo.134.1">Do you trust the authors of the files in this folder?</span></strong><span class="kobospan" id="kobo.135.1">, check </span><strong class="bold"><span class="kobospan" id="kobo.136.1">Trust the authors of all files in the parent folder ‘Full-Stack-React-Projects’</span></strong><span class="kobospan" id="kobo.137.1"> and then click on the </span><strong class="bold"><span class="kobospan" id="kobo.138.1">Yes, I trust the </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.139.1">authors</span></strong></span><span><span class="kobospan" id="kobo.140.1"> button.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer010">
<span class="kobospan" id="kobo.141.1"><img alt="Figure 1.3 – Allowing VS Code to execute files in our project folder" src="image/B19385_01_3.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.142.1">Figure 1.3 – Allowing VS Code to execute files in our project folder</span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.143.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.144.1">You can safely ignore this warning in your own projects, as you can be sure that those do not contain malicious code. </span><span class="kobospan" id="kobo.144.2">When opening folders from untrusted sources, you can press </span><strong class="bold"><span class="kobospan" id="kobo.145.1">No, I don’t trust the authors</span></strong><span class="kobospan" id="kobo.146.1">, and still browse the code. </span><span class="kobospan" id="kobo.146.2">However, when doing so, some features of VS Code will </span><span><span class="kobospan" id="kobo.147.1">be disabled.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.148.1">We have now successfully set up</span><a id="_idIndexMarker010" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.149.1"> VS Code and are ready to start setting up our project! </span><span class="kobospan" id="kobo.149.2">If you have cloned the folder from the GitHub code examples provided, a notification telling you that a Git repository was found will also pop up. </span><span class="kobospan" id="kobo.149.3">You can simply close this one, as we only want to open the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.150.1">ch1</span></strong></span><span><span class="kobospan" id="kobo.151.1"> folder.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.152.1">Now that VS Code is ready, let’s continue by setting up a new project </span><span><span class="kobospan" id="kobo.153.1">with Vite.</span></span></p>
<h2 id="_idParaDest-25" class="calibre7"><a id="_idTextAnchor024" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.154.1">Setting up a project with Vite</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.155.1">For this book, we are going to</span><a id="_idIndexMarker011" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.156.1"> use </span><strong class="bold"><span class="kobospan" id="kobo.157.1">Vite</span></strong><span class="kobospan" id="kobo.158.1"> to set up our project, as it is the most popular and liked according to </span><em class="italic"><span class="kobospan" id="kobo.159.1">The State of JS 2022</span></em><span class="kobospan" id="kobo.160.1"> survey (</span><a href="https://2022.stateofjs.com/" class="calibre6 pcalibre1 pcalibre"><span class="kobospan" id="kobo.161.1">https://2022.stateofjs.com/</span></a><span class="kobospan" id="kobo.162.1">). </span><span class="kobospan" id="kobo.162.2">Vite also makes it easy to set up a modern frontend project, while still making it possible to extend the configuration later if needed. </span><span class="kobospan" id="kobo.162.3">Follow these steps to set up </span><a id="_idIndexMarker012" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.163.1">your </span><a id="_idIndexMarker013" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.164.1">project </span><span><span class="kobospan" id="kobo.165.1">with Vite:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.166.1">In the VS Code menu bar, go to </span><strong class="bold"><span class="kobospan" id="kobo.167.1">Terminal</span></strong><span class="kobospan" id="kobo.168.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.169.1">New Terminal</span></strong><span class="kobospan" id="kobo.170.1"> to open a </span><span><span class="kobospan" id="kobo.171.1">new Terminal.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.172.1">Inside the Terminal, run the </span><span><span class="kobospan" id="kobo.173.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.174.1">$ npm create vite@5.0.0 .</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.175.1">Make sure there is a period at the end of the command to create the project in the current folder instead of creating a </span><span><span class="kobospan" id="kobo.176.1">new folder.</span></span></p></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.177.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.178.1">To keep the instructions in this book working even when new versions are released, we pin all packages to a fixed version. </span><span class="kobospan" id="kobo.178.2">Please follow the instructions with the given versions. </span><span class="kobospan" id="kobo.178.3">After finishing this book, when starting new projects on your own, you should always try using the latest versions but keep in mind that changes might be needed to get them working. </span><span class="kobospan" id="kobo.178.4">Consult the documentation of the respective packages and follow the migration path from the book version to the </span><span><span class="kobospan" id="kobo.179.1">latest version.</span></span></p>
<ol class="calibre15">
<li value="3" class="calibre11"><span class="kobospan" id="kobo.180.1">When asked if </span><strong class="source-inline1"><span class="kobospan" id="kobo.181.1">create-vite</span></strong><span class="kobospan" id="kobo.182.1"> should be installed, simply type </span><strong class="source-inline1"><span class="kobospan" id="kobo.183.1">y</span></strong><span class="kobospan" id="kobo.184.1"> and press the </span><em class="italic"><span class="kobospan" id="kobo.185.1">Return/Enter</span></em><span class="kobospan" id="kobo.186.1"> key </span><span><span class="kobospan" id="kobo.187.1">to proceed.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.188.1">When asked about the framework, use the arrow keys to select </span><strong class="bold"><span class="kobospan" id="kobo.189.1">React</span></strong><span class="kobospan" id="kobo.190.1"> and press </span><em class="italic"><span class="kobospan" id="kobo.191.1">Return</span></em><span class="kobospan" id="kobo.192.1">. </span><span class="kobospan" id="kobo.192.2">If you are being asked for a project name, press </span><em class="italic"><span class="kobospan" id="kobo.193.1">Ctrl</span></em><span class="kobospan" id="kobo.194.1"> + </span><em class="italic"><span class="kobospan" id="kobo.195.1">C</span></em><span class="kobospan" id="kobo.196.1"> to cancel, then run the command again, making sure there is a period at the end to select the </span><span><span class="kobospan" id="kobo.197.1">current folder.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.198.1">When asked about the variant, </span><span><span class="kobospan" id="kobo.199.1">select </span></span><span><strong class="bold"><span class="kobospan" id="kobo.200.1">JavaScript</span></strong></span><span><span class="kobospan" id="kobo.201.1">.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.202.1">Now, our project is set up and we can run </span><strong class="source-inline1"><span class="kobospan" id="kobo.203.1">npm install</span></strong><span class="kobospan" id="kobo.204.1"> to install </span><span><span class="kobospan" id="kobo.205.1">the dependencies.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.206.1">Afterward, run </span><strong class="source-inline1"><span class="kobospan" id="kobo.207.1">npm run dev</span></strong><span class="kobospan" id="kobo.208.1"> to start the dev server, as shown in the </span><span><span class="kobospan" id="kobo.209.1">following screenshot:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer011">
<span class="kobospan" id="kobo.210.1"><img alt="Figure 1.4 – The ﻿Terminal after setting up a project with Vite and before starting the dev server" src="image/B19385_01_4.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.211.1">Figure 1.4 – The Terminal after setting up a project with Vite and before starting the dev server</span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.212.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.213.1">For simplicity in setting up, we just used </span><strong class="source-inline1"><span class="kobospan" id="kobo.214.1">npm</span></strong><span class="kobospan" id="kobo.215.1"> directly. </span><span class="kobospan" id="kobo.215.2">If you prefer </span><strong class="source-inline1"><span class="kobospan" id="kobo.216.1">yarn</span></strong><span class="kobospan" id="kobo.217.1"> or </span><strong class="source-inline1"><span class="kobospan" id="kobo.218.1">pnpm</span></strong><span class="kobospan" id="kobo.219.1">, you can instead run </span><strong class="source-inline1"><span class="kobospan" id="kobo.220.1">yarn create vite</span></strong><span class="kobospan" id="kobo.221.1"> or </span><strong class="source-inline1"><span class="kobospan" id="kobo.222.1">pnpm create </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.223.1">vite</span></strong></span><span><span class="kobospan" id="kobo.224.1">, respectively.</span></span></p>
<ol class="calibre15">
<li value="8" class="calibre11"><span class="kobospan" id="kobo.225.1">In the </span><a id="_idIndexMarker014" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.226.1">Terminal, you</span><a id="_idIndexMarker015" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.227.1"> will see a URL telling you where your app is running. </span><span class="kobospan" id="kobo.227.2">You can either hold </span><em class="italic"><span class="kobospan" id="kobo.228.1">Ctrl</span></em><span class="kobospan" id="kobo.229.1"> (</span><em class="italic"><span class="kobospan" id="kobo.230.1">Cmd</span></em><span class="kobospan" id="kobo.231.1"> on macOS) and click on the link to open it in your browser, or manually enter the URL in </span><span><span class="kobospan" id="kobo.232.1">a browser.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.233.1">To test</span><a id="_idIndexMarker016" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.234.1"> whether your app is interactive, click the button with the </span><a id="_idIndexMarker017" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.235.1">text </span><strong class="bold"><span class="kobospan" id="kobo.236.1">count is 0</span></strong><span class="kobospan" id="kobo.237.1">, and it should increase the count every time it </span><span><span class="kobospan" id="kobo.238.1">is pressed.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer012">
<span class="kobospan" id="kobo.239.1"><img alt="Figure 1.5 – Our first React app running with Vite" src="image/B19385_01_5.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.240.1">Figure 1.5 – Our first React app running with Vite</span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.241.1">Alternatives to Vite</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.242.1">Alternatives to </span><a id="_idIndexMarker018" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.243.1">Vite are bundlers, such as webpack, Rollup, and Parcel. </span><span class="kobospan" id="kobo.243.2">These are highly configurable but often do not offer a great experience for dev servers. </span><span class="kobospan" id="kobo.243.3">They first must bundle all our code together before serving it to the browser. </span><span class="kobospan" id="kobo.243.4">Instead, Vite natively supports </span><a id="_idIndexMarker019" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.244.1">the </span><strong class="bold"><span class="kobospan" id="kobo.245.1">ECMAScript module</span></strong><span class="kobospan" id="kobo.246.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.247.1">ESM</span></strong><span class="kobospan" id="kobo.248.1">) standard. </span><span class="kobospan" id="kobo.248.2">Furthermore, Vite requires very little configuration to get started. </span><span class="kobospan" id="kobo.248.3">A downside of Vite is that it can be hard to configure certain more complex scenarios with it. </span><span class="kobospan" id="kobo.248.4">An upcoming bundler that is promising is Turbopack; however, it is still very new at the time of writing. </span><span class="kobospan" id="kobo.248.5">For full-stack development with server-side rendering, we will later get to know Next.js, which is a React framework</span><a id="_idIndexMarker020" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.249.1"> that also provides a dev server out of </span><span><span class="kobospan" id="kobo.250.1">the box.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.251.1">Now that our boilerplate project is up and running, let’s spend some time setting up tools that will enforce best practices and a consistent </span><span><span class="kobospan" id="kobo.252.1">code style.</span></span></p>
<h2 id="_idParaDest-26" class="calibre7"><a id="_idTextAnchor025" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.253.1">Setting up ESLint and Prettier to enforce best practices and code style</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.254.1">Now that our React app is set up, we are going to set</span><a id="_idIndexMarker021" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.255.1"> up </span><strong class="bold"><span class="kobospan" id="kobo.256.1">ESLint</span></strong><span class="kobospan" id="kobo.257.1"> to enforce coding best practices with JavaScript and React. </span><span class="kobospan" id="kobo.257.2">We are also going to set up </span><strong class="bold"><span class="kobospan" id="kobo.258.1">Prettier</span></strong><span class="kobospan" id="kobo.259.1"> to enforce a </span><a id="_idIndexMarker022" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.260.1">code style and automatically format </span><span><span class="kobospan" id="kobo.261.1">our code.</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.262.1">Installing the necessary dependencies</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.263.1">First, we are going to install all the</span><a id="_idIndexMarker023" class="calibre6 pcalibre1 pcalibre"/> <span><span class="kobospan" id="kobo.264.1">necessary dependencies:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.265.1">In the Terminal, click on the </span><strong class="bold"><span class="kobospan" id="kobo.266.1">Split Terminal</span></strong><span class="kobospan" id="kobo.267.1"> icon at the top right of the </span><strong class="bold"><span class="kobospan" id="kobo.268.1">Terminal</span></strong><span class="kobospan" id="kobo.269.1"> pane to create a new </span><strong class="bold"><span class="kobospan" id="kobo.270.1">Terminal</span></strong><span class="kobospan" id="kobo.271.1"> pane. </span><span class="kobospan" id="kobo.271.2">This will keep our app running while we run </span><span><span class="kobospan" id="kobo.272.1">other commands.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.273.1">Click on this newly opened pane to focus it. </span><span class="kobospan" id="kobo.273.2">Then, enter the following command to install ESLint, Prettier, and the </span><span><span class="kobospan" id="kobo.274.1">relevant plugins:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.275.1">$ npm install --save-dev prettier@3.1.0 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.276.1">  eslint@8.54.0 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.277.1">  eslint-plugin-react@7.33.2 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.278.1">  eslint-config-prettier@9.0.0 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.279.1">  eslint-plugin-jsx-a11y@6.8.0</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.280.1">The packages installed are </span><span><span class="kobospan" id="kobo.281.1">the following:</span></span></p><ul class="calibre16"><li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.282.1">prettier</span></strong><span class="kobospan" id="kobo.283.1">: Formats our code automatically according to a defined </span><span><span class="kobospan" id="kobo.284.1">code style</span></span></li><li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.285.1">eslint</span></strong><span class="kobospan" id="kobo.286.1">: Analyzes our code and enforces </span><span><span class="kobospan" id="kobo.287.1">best practices</span></span></li><li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.288.1">eslint-config-react:</span></strong><span class="kobospan" id="kobo.289.1"> Enables rules in ESLint relevant to </span><span><span class="kobospan" id="kobo.290.1">React projects</span></span></li><li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.291.1">eslint-config-prettier:</span></strong><span class="kobospan" id="kobo.292.1"> Disables rules relating to code style in ESLint so that Prettier can handle </span><span><span class="kobospan" id="kobo.293.1">them instead</span></span></li><li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.294.1">eslint-plugin-jsx-a11y</span></strong><span class="kobospan" id="kobo.295.1">: Allows ESLint to</span><a id="_idIndexMarker024" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.296.1"> check for accessibility (</span><strong class="source-inline1"><span class="kobospan" id="kobo.297.1">a11y</span></strong><span class="kobospan" id="kobo.298.1">) issues in our </span><span><span class="kobospan" id="kobo.299.1">JSX code</span></span></li></ul></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.300.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.301.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.302.1">--save-dev</span></strong><span class="kobospan" id="kobo.303.1"> flag in </span><strong class="source-inline1"><span class="kobospan" id="kobo.304.1">npm</span></strong><span class="kobospan" id="kobo.305.1"> saves those dependencies as </span><strong class="source-inline1"><span class="kobospan" id="kobo.306.1">dev</span></strong><span class="kobospan" id="kobo.307.1"> dependencies, which means that they will only be installed for development. </span><span class="kobospan" id="kobo.307.2">They will not be installed and included in a deployed app. </span><span class="kobospan" id="kobo.307.3">This is important in order to keep the size of our containers as small as </span><span><span class="kobospan" id="kobo.308.1">possible later.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.309.1">After the dependencies are installed, we need to configure Prettier and ESLint. </span><span class="kobospan" id="kobo.309.2">We will start with </span><span><span class="kobospan" id="kobo.310.1">configuring Prettier.</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.311.1">Configuring Prettier</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.312.1">Prettier will </span><a id="_idIndexMarker025" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.313.1">format the code for us and replace the default code formatter for JavaScript in VS Code. </span><span class="kobospan" id="kobo.313.2">It will allow us to spend more time writing code, automatically formatting it for us properly when we save the file. </span><span class="kobospan" id="kobo.313.3">Follow these steps to </span><span><span class="kobospan" id="kobo.314.1">configure Prettier:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.315.1">Right-click below</span><a id="_idIndexMarker026" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.316.1"> the files list in the left sidebar of VS Code (if it is not opened, click the </span><strong class="bold"><span class="kobospan" id="kobo.317.1">Files</span></strong><span class="kobospan" id="kobo.318.1"> icon) and press </span><strong class="bold"><span class="kobospan" id="kobo.319.1">New file...</span></strong><span class="kobospan" id="kobo.320.1"> to create a new file. </span><span class="kobospan" id="kobo.320.2">Call it </span><strong class="source-inline1"><span class="kobospan" id="kobo.321.1">.prettierrc.json</span></strong><span class="kobospan" id="kobo.322.1"> (do not forget the period at the beginning of the </span><span><span class="kobospan" id="kobo.323.1">file name!).</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.324.1">The newly created file should open automatically, so we can start writing the following configuration into it. </span><span class="kobospan" id="kobo.324.2">We first create a new object and set the </span><strong class="source-inline1"><span class="kobospan" id="kobo.325.1">trailingComma</span></strong><span class="kobospan" id="kobo.326.1"> option to </span><strong class="source-inline1"><span class="kobospan" id="kobo.327.1">all</span></strong><span class="kobospan" id="kobo.328.1"> to make sure objects and arrays that span over multiple lines always have a comma at the end, even for the last element. </span><span class="kobospan" id="kobo.328.2">This reduces the number of touched lines when committing a change </span><span><span class="kobospan" id="kobo.329.1">via Git:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.330.1">
{
  "trailingComma": "all",</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.331.1">Then, we set the </span><strong class="source-inline1"><span class="kobospan" id="kobo.332.1">tabWidth</span></strong><span class="kobospan" id="kobo.333.1"> option to </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.334.1">2</span></strong></span><span><span class="kobospan" id="kobo.335.1"> spaces:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.336.1">
  "tabWidth": 2,</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.337.1">Set the </span><strong class="source-inline1"><span class="kobospan" id="kobo.338.1">printWidth</span></strong><span class="kobospan" id="kobo.339.1"> to </span><strong class="source-inline1"><span class="kobospan" id="kobo.340.1">80</span></strong><span class="kobospan" id="kobo.341.1"> characters per line to avoid long lines in </span><span><span class="kobospan" id="kobo.342.1">our code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.343.1">
  "printWidth": 80,</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.344.1">Set the </span><strong class="source-inline1"><span class="kobospan" id="kobo.345.1">semi</span></strong><span class="kobospan" id="kobo.346.1"> option to </span><strong class="source-inline1"><span class="kobospan" id="kobo.347.1">false</span></strong><span class="kobospan" id="kobo.348.1"> to avoid semicolons where </span><span><span class="kobospan" id="kobo.349.1">not necessary:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.350.1">
  "semi": false,</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.351.1">Finally, we</span><a id="_idIndexMarker027" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.352.1"> enforce the use of single quotes instead of </span><span><span class="kobospan" id="kobo.353.1">double quotes:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.354.1">
  "jsxSingleQuote": true,
  "singleQuote": true
}</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.355.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.356.1">These settings for Prettier are just an example of a coding style convention. </span><span class="kobospan" id="kobo.356.2">Of course, you are free to adjust these to your own preferences. </span><span class="kobospan" id="kobo.356.3">There are many more options, all of which can be found in the </span><a id="_idIndexMarker028" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.357.1">Prettier </span><span><span class="kobospan" id="kobo.358.1">docs (</span></span><a href="https://prettier.io/docs/en/options.html" class="calibre6 pcalibre1 pcalibre"><span><span class="kobospan" id="kobo.359.1">https://prettier.io/docs/en/options.html</span></span></a><span><span class="kobospan" id="kobo.360.1">).</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.361.1">Configuring the Prettier extension</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.362.1">Now that we </span><a id="_idIndexMarker029" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.363.1">have a configuration file for Prettier, we need to make sure the VS Code extension is properly configured to format the code </span><span><span class="kobospan" id="kobo.364.1">for us:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.365.1">Open the VS Code settings by going to </span><strong class="bold"><span class="kobospan" id="kobo.366.1">File</span></strong><span class="kobospan" id="kobo.367.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.368.1">Preferences...</span></strong><span class="kobospan" id="kobo.369.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.370.1">Settings</span></strong><span class="kobospan" id="kobo.371.1"> on Windows/Linux, or </span><strong class="bold"><span class="kobospan" id="kobo.372.1">Code</span></strong><span class="kobospan" id="kobo.373.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.374.1">Settings...</span></strong><span class="kobospan" id="kobo.375.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.376.1">Settings</span></strong> <span><span class="kobospan" id="kobo.377.1">on macOS.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.378.1">In the newly opened settings editor, click on the </span><strong class="bold"><span class="kobospan" id="kobo.379.1">Workspace</span></strong><span class="kobospan" id="kobo.380.1"> tab. </span><span class="kobospan" id="kobo.380.2">This ensures that we save all our settings in a </span><strong class="source-inline1"><span class="kobospan" id="kobo.381.1">.vscode/settings.json</span></strong><span class="kobospan" id="kobo.382.1"> file in our project folder. </span><span class="kobospan" id="kobo.382.2">When other developers open our project, they will automatically be using those settings </span><span><span class="kobospan" id="kobo.383.1">as well.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.384.1">Search for </span><strong class="source-inline1"><span class="kobospan" id="kobo.385.1">editor format on save</span></strong><span class="kobospan" id="kobo.386.1"> and check the checkbox to enable formatting code </span><span><span class="kobospan" id="kobo.387.1">on save.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.388.1">Search for </span><strong class="source-inline1"><span class="kobospan" id="kobo.389.1">editor default formatter</span></strong><span class="kobospan" id="kobo.390.1"> and select </span><strong class="bold"><span class="kobospan" id="kobo.391.1">Prettier - Code formatter</span></strong><span class="kobospan" id="kobo.392.1"> from </span><span><span class="kobospan" id="kobo.393.1">the list.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.394.1">To verify that Prettier works, open the </span><strong class="source-inline1"><span class="kobospan" id="kobo.395.1">.prettierrc.json</span></strong><span class="kobospan" id="kobo.396.1"> file, add some extra spaces to the beginning of a line, and save the file. </span><span class="kobospan" id="kobo.396.2">You should notice that Prettier reformatted the code to adhere to the defined code style. </span><span class="kobospan" id="kobo.396.3">It will reduce the number of spaces for indentation </span><span><span class="kobospan" id="kobo.397.1">to two.</span></span></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.398.1">Now that Prettier is set up properly, we do not need to worry about formatting our code manually anymore. </span><span class="kobospan" id="kobo.398.2">Feel free to just type in code as you go and save the file to get it formatted </span><span><span class="kobospan" id="kobo.399.1">for </span></span><span><a id="_idIndexMarker030" class="calibre6 pcalibre1 pcalibre"/></span><span><span class="kobospan" id="kobo.400.1">you!</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.401.1">Creating a Prettier ignore file</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.402.1">To improve </span><a id="_idIndexMarker031" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.403.1">performance and avoid running Prettier on files that should not be automatically formatted, we can ignore certain files and folders by creating a Prettier ignore file. </span><span class="kobospan" id="kobo.403.2">Follow </span><span><span class="kobospan" id="kobo.404.1">these steps:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.405.1">Create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.406.1">.prettierignore</span></strong><span class="kobospan" id="kobo.407.1"> in the root of our project, similar to how we created the </span><strong class="source-inline1"><span class="kobospan" id="kobo.408.1">.</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.409.1">prettierrc.json</span></strong></span><span><span class="kobospan" id="kobo.410.1"> file.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.411.1">Add the following contents to it to ignore the transpiled </span><span><span class="kobospan" id="kobo.412.1">source code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.413.1">
dist/</span></pre><p class="calibre3"><span class="kobospan" id="kobo.414.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.415.1">node_modules/</span></strong><span class="kobospan" id="kobo.416.1"> folder is automatically ignored </span><span><span class="kobospan" id="kobo.417.1">by Prettier.</span></span></p></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.418.1">Now that we have successfully set up Prettier, we are going to configure ESLint to enforce coding </span><span><span class="kobospan" id="kobo.419.1">best practices.</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.420.1">Configuring ESLint</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.421.1">While Prettier focuses on the</span><a id="_idIndexMarker032" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.422.1"> style and formatting of our code, ESLint focuses on the actual code, avoiding common mistakes or unnecessary code. </span><span class="kobospan" id="kobo.422.2">Let’s configure </span><span><span class="kobospan" id="kobo.423.1">it now:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.424.1">Delete the automatically created </span><strong class="source-inline1"><span class="kobospan" id="kobo.425.1">.</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.426.1">eslintrc.cjs</span></strong></span><span><span class="kobospan" id="kobo.427.1"> file.</span></span></li>
<li class="calibre11"><span class="kobospan" id="kobo.428.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.429.1">.eslintrc.json</span></strong><span class="kobospan" id="kobo.430.1"> file and start writing the following configuration into it. </span><span class="kobospan" id="kobo.430.2">First, we set </span><strong class="source-inline1"><span class="kobospan" id="kobo.431.1">root</span></strong><span class="kobospan" id="kobo.432.1"> to </span><strong class="source-inline1"><span class="kobospan" id="kobo.433.1">true</span></strong><span class="kobospan" id="kobo.434.1"> to make sure ESLint does not look at parent folders for </span><span><span class="kobospan" id="kobo.435.1">more configuration:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.436.1">
{
  "root": true,</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.437.1">Define an </span><strong class="source-inline1"><span class="kobospan" id="kobo.438.1">env</span></strong><span class="kobospan" id="kobo.439.1"> object, in which we set the browser environment to </span><strong class="source-inline1"><span class="kobospan" id="kobo.440.1">true</span></strong><span class="kobospan" id="kobo.441.1"> so that ESLint understands browser-specific globals such as </span><strong class="source-inline1"><span class="kobospan" id="kobo.442.1">document</span></strong> <span><span class="kobospan" id="kobo.443.1">and </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.444.1">window</span></strong></span><span><span class="kobospan" id="kobo.445.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.446.1">
  "env": {
    "browser": true
  },</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.447.1">Define a </span><strong class="source-inline1"><span class="kobospan" id="kobo.448.1">parserOptions</span></strong><span class="kobospan" id="kobo.449.1"> object, where we specify that we are using the latest ECMAScript version </span><span><span class="kobospan" id="kobo.450.1">and ESM:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.451.1">
  "parserOptions": {
    "ecmaVersion": "latest",
    "sourceType": "module"
  },</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.452.1">Define an </span><strong class="source-inline1"><span class="kobospan" id="kobo.453.1">extends</span></strong><span class="kobospan" id="kobo.454.1"> array to extend from recommended configurations. </span><span class="kobospan" id="kobo.454.2">Specifically, we extend from ESLint’s recommended rules and the recommended rules for the plugins </span><span><span class="kobospan" id="kobo.455.1">we installed:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.456.1">
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended",
    "plugin:react/jsx-runtime",
    "plugin:jsx-a11y/recommended",</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.457.1">As the last element of the array, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.458.1">prettier</span></strong><span class="kobospan" id="kobo.459.1"> to disable all code style-related rules in ESLint and let Prettier </span><span><span class="kobospan" id="kobo.460.1">handle it:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.461.1">
    "prettier"
  ],</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.462.1">Now, we define </span><a id="_idIndexMarker033" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.463.1">settings for the plugins. </span><span class="kobospan" id="kobo.463.2">First, we tell the </span><strong class="source-inline1"><span class="kobospan" id="kobo.464.1">react</span></strong><span class="kobospan" id="kobo.465.1"> plugin to detect our installed React </span><span><span class="kobospan" id="kobo.466.1">version automatically:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.467.1">
  "settings": {
    "react": {
      "version": "detect"
    }
  },</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.468.1">Finally, outside </span><a id="_idIndexMarker034" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.469.1">of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.470.1">settings</span></strong><span class="kobospan" id="kobo.471.1"> section, we define an </span><strong class="source-inline1"><span class="kobospan" id="kobo.472.1">overrides</span></strong><span class="kobospan" id="kobo.473.1"> array, in which we specify that ESLint should only lint </span><strong class="source-inline1"><span class="kobospan" id="kobo.474.1">.js</span></strong><span class="kobospan" id="kobo.475.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.476.1">.</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.477.1">jsx</span></strong></span><span><span class="kobospan" id="kobo.478.1"> files:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.479.1">
  "overrides": [
    {
      "files": ["*.js", "*.jsx"]
    }
  ]
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.480.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.481.1">.eslintignore</span></strong><span class="kobospan" id="kobo.482.1"> file, with the </span><span><span class="kobospan" id="kobo.483.1">following contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.484.1">
dist/
vite.config.js</span></pre><p class="calibre3"><span class="kobospan" id="kobo.485.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.486.1">node_modules/</span></strong><span class="kobospan" id="kobo.487.1"> folder is automatically ignored </span><span><span class="kobospan" id="kobo.488.1">by ESLint.</span></span></p></li> <li class="calibre11"><span class="kobospan" id="kobo.489.1">Save the files and run </span><strong class="source-inline1"><span class="kobospan" id="kobo.490.1">npx eslint src</span></strong><span class="kobospan" id="kobo.491.1"> in the Terminal to run the linter. </span><span class="kobospan" id="kobo.491.2">You will see that there are some errors already due to our configured rules not matching the source provided by the default project </span><span><span class="kobospan" id="kobo.492.1">in Vite:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer013">
<span class="kobospan" id="kobo.493.1"><img alt="Figure 1.6 – When running ESLint for the first time, we get some errors about rule violations" src="image/B19385_01_6.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.494.1">Figure 1.6 – When running ESLint for the first time, we get some errors about rule violations</span></p>
<ol class="calibre15">
<li value="11" class="calibre11"><span class="kobospan" id="kobo.495.1">Fortunately, all these issues are automatically fixable by ESLint. </span><span class="kobospan" id="kobo.495.2">Run </span><strong class="source-inline1"><span class="kobospan" id="kobo.496.1">npx eslint src --fix</span></strong><span class="kobospan" id="kobo.497.1"> to fix the issues automatically. </span><span class="kobospan" id="kobo.497.2">Now, when you run </span><strong class="source-inline1"><span class="kobospan" id="kobo.498.1">npx eslint src</span></strong><span class="kobospan" id="kobo.499.1"> again, you will not</span><a id="_idIndexMarker035" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.500.1"> get any output. </span><span class="kobospan" id="kobo.500.2">This means that there were no </span><span><span class="kobospan" id="kobo.501.1">linter errors!</span></span></li>
</ol>
<p class="callout-heading"><span class="kobospan" id="kobo.502.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.503.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.504.1">npx</span></strong><span class="kobospan" id="kobo.505.1"> command allows us to execute commands provided by </span><strong class="source-inline1"><span class="kobospan" id="kobo.506.1">npm</span></strong><span class="kobospan" id="kobo.507.1"> packages, in a similar context as running them in </span><strong class="source-inline1"><span class="kobospan" id="kobo.508.1">package.json</span></strong><span class="kobospan" id="kobo.509.1"> scripts would do. </span><span class="kobospan" id="kobo.509.2">It can also run remote packages without installing them permanently. </span><span class="kobospan" id="kobo.509.3">If the package is not installed yet, it will ask you whether it should </span><span><span class="kobospan" id="kobo.510.1">do this.</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.511.1">Adding a new script to run our linter</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.512.1">In the</span><a id="_idIndexMarker036" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.513.1"> previous section, we have been calling the linter by running </span><strong class="source-inline"><span class="kobospan" id="kobo.514.1">npx eslint src</span></strong><span class="kobospan" id="kobo.515.1"> manually. </span><span class="kobospan" id="kobo.515.2">We are now going to add a </span><strong class="source-inline"><span class="kobospan" id="kobo.516.1">lint</span></strong><span class="kobospan" id="kobo.517.1"> script </span><span><span class="kobospan" id="kobo.518.1">to </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.519.1">package.json</span></strong></span><span><span class="kobospan" id="kobo.520.1">:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.521.1">In the Terminal, run the following command to define a </span><strong class="source-inline1"><span class="kobospan" id="kobo.522.1">lint</span></strong><span class="kobospan" id="kobo.523.1"> script in the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.524.1">package.json</span></strong></span><span><span class="kobospan" id="kobo.525.1"> file:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.526.1">$ npm pkg set scripts.lint="eslint src"</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.527.1">Now, run </span><strong class="source-inline1"><span class="kobospan" id="kobo.528.1">npm run lint</span></strong><span class="kobospan" id="kobo.529.1"> in the Terminal. </span><span class="kobospan" id="kobo.529.2">This should execute </span><strong class="source-inline1"><span class="kobospan" id="kobo.530.1">eslint src</span></strong><span class="kobospan" id="kobo.531.1"> successfully, just like </span><strong class="source-inline1"><span class="kobospan" id="kobo.532.1">npx eslint </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.533.1">src</span></strong></span><span><span class="kobospan" id="kobo.534.1"> did:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer014">
<span class="kobospan" id="kobo.535.1"><img alt="Figure 1.7 – ﻿The linter running successfully, with no errors" src="image/B19385_01_7.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.536.1">Figure 1.7 – The linter running successfully, with no errors</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.537.1">After setting up ESLint and Prettier, we still need to make sure that they run before we commit code. </span><span class="kobospan" id="kobo.537.2">Let’s set up Husky to make sure we commit proper </span><span><span class="kobospan" id="kobo.538.1">code now.</span></span></p>
<h2 id="_idParaDest-27" class="calibre7"><a id="_idTextAnchor026" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.539.1">Setting up Husky to make sure we commit proper code</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.540.1">After setting up Prettier and ESLint, we will now get our code automatically formatted on save by Prettier and see errors from ESLint in VS Code when we make mistakes or ignore best practices. </span><span class="kobospan" id="kobo.540.2">However, we might miss some of these errors and accidentally commit code that is invalid. </span><span class="kobospan" id="kobo.540.3">To avoid this, we can set</span><a id="_idIndexMarker037" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.541.1"> up </span><strong class="bold"><span class="kobospan" id="kobo.542.1">Husky</span></strong><span class="kobospan" id="kobo.543.1"> and </span><strong class="bold"><span class="kobospan" id="kobo.544.1">lint-staged</span></strong><span class="kobospan" id="kobo.545.1">, which run</span><a id="_idIndexMarker038" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.546.1"> before we commit our code to Git and ensure that Prettier and ESLint are executed successfully on the source code before it </span><span><span class="kobospan" id="kobo.547.1">is committed.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.548.1">Important</span></p>
<p class="callout"><span class="kobospan" id="kobo.549.1">If you cloned the full repository for the book, Husky may not find the </span><strong class="source-inline1"><span class="kobospan" id="kobo.550.1">.git</span></strong><span class="kobospan" id="kobo.551.1"> directory when running </span><strong class="source-inline1"><span class="kobospan" id="kobo.552.1">npm install</span></strong><span class="kobospan" id="kobo.553.1">. </span><span class="kobospan" id="kobo.553.2">In that case, just run </span><strong class="source-inline1"><span class="kobospan" id="kobo.554.1">git init</span></strong><span class="kobospan" id="kobo.555.1"> in the root of the corresponding </span><span><span class="kobospan" id="kobo.556.1">chapter folder.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.557.1">Let’s set Husky</span><a id="_idIndexMarker039" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.558.1"> and lint-staged </span><a id="_idIndexMarker040" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.559.1">up by following </span><span><span class="kobospan" id="kobo.560.1">these steps:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.561.1">Run the following command to install Husky and lint-staged as </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.562.1">dev</span></strong></span><span><span class="kobospan" id="kobo.563.1"> dependencies:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.564.1">$ npm install --save-dev husky@8.0.3 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.565.1">  lint-staged@15.1.0</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.566.1">Open the </span><strong class="source-inline1"><span class="kobospan" id="kobo.567.1">package.json</span></strong><span class="kobospan" id="kobo.568.1"> file and add the following </span><strong class="source-inline1"><span class="kobospan" id="kobo.569.1">lint-staged</span></strong><span class="kobospan" id="kobo.570.1"> configuration to it in a new object after </span><strong class="source-inline1"><span class="kobospan" id="kobo.571.1">devDependencies</span></strong><span class="kobospan" id="kobo.572.1">, then save the file. </span><span class="kobospan" id="kobo.572.2">This will run Prettier and ESlint on all committed </span><strong class="source-inline1"><span class="kobospan" id="kobo.573.1">.js</span></strong><span class="kobospan" id="kobo.574.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.575.1">.jsx</span></strong><span class="kobospan" id="kobo.576.1"> files and attempt to automatically fix code style and linter errors, </span><span><span class="kobospan" id="kobo.577.1">if possible:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.578.1">
  "lint-staged": {
    "**/*.{js,jsx}": [
      "npx prettier --write",
      "npx eslint --fix"
    ]
  }</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.579.1">Initialize a Git repository in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.580.1">ch1</span></strong><span class="kobospan" id="kobo.581.1"> folder and make an initial commit with just the </span><strong class="source-inline1"><span class="kobospan" id="kobo.582.1">package.json</span></strong><span class="kobospan" id="kobo.583.1"> file, as lint-staged does not get executed on the </span><span><span class="kobospan" id="kobo.584.1">initial commit:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.585.1">$ git init</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.586.1">$ git add package.json</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.587.1">$ git commit -m "chore: initial commit"</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.588.1">Add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.589.1">husky install</span></strong><span class="kobospan" id="kobo.590.1"> script to a </span><strong class="source-inline1"><span class="kobospan" id="kobo.591.1">prepare</span></strong><span class="kobospan" id="kobo.592.1"> script in </span><strong class="source-inline1"><span class="kobospan" id="kobo.593.1">package.json</span></strong><span class="kobospan" id="kobo.594.1">, so that Husky gets </span><a id="_idIndexMarker041" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.595.1">installed automatically when the project is cloned</span><a id="_idIndexMarker042" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.596.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.597.1">npm install</span></strong> <span><span class="kobospan" id="kobo.598.1">is executed:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.599.1">$ npm pkg set scripts.prepare="husky install"</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.600.1">Since we do not need to run </span><strong class="source-inline1"><span class="kobospan" id="kobo.601.1">npm install</span></strong><span class="kobospan" id="kobo.602.1"> again right now, we need to manually run the </span><strong class="source-inline1"><span class="kobospan" id="kobo.603.1">prepare</span></strong><span class="kobospan" id="kobo.604.1"> script </span><span><span class="kobospan" id="kobo.605.1">this time:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.606.1">$ npm run prepare</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.607.1">Add a </span><strong class="source-inline1"><span class="kobospan" id="kobo.608.1">pre-commit</span></strong><span class="kobospan" id="kobo.609.1"> hook for lint-staged, so that ESLint and Prettier run every time we do </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.610.1">git commit</span></strong></span><span><span class="kobospan" id="kobo.611.1">:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.612.1">$ npx husky add .husky/pre-commit "npx lint-staged"</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.613.1">Now, add all files to Git and attempt to make </span><span><span class="kobospan" id="kobo.614.1">a commit:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.615.1">$ git add .</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.616.1">$ git commit -m "chore: basic project setup"</span></strong></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.617.1">If everything worked successfully, you should see </span><strong class="source-inline"><span class="kobospan" id="kobo.618.1">husky</span></strong><span class="kobospan" id="kobo.619.1"> running </span><strong class="source-inline"><span class="kobospan" id="kobo.620.1">lint-staged</span></strong><span class="kobospan" id="kobo.621.1">, which, in turn, runs </span><strong class="source-inline"><span class="kobospan" id="kobo.622.1">prettier</span></strong><span class="kobospan" id="kobo.623.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.624.1">eslint</span></strong><span class="kobospan" id="kobo.625.1">, after you run </span><strong class="source-inline"><span class="kobospan" id="kobo.626.1">git commit</span></strong><span class="kobospan" id="kobo.627.1">. </span><span class="kobospan" id="kobo.627.2">If you are getting a </span><a id="_idIndexMarker043" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.628.1">configuration error, ensure that all files are saved properly and </span><a id="_idIndexMarker044" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.629.1">then run </span><strong class="source-inline"><span class="kobospan" id="kobo.630.1">git </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.631.1">commit</span></strong></span><span><span class="kobospan" id="kobo.632.1"> again.</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer015">
<span class="kobospan" id="kobo.633.1"><img alt="Figure 1.8 – Husky and lint-staged successfully enforcing code style and best practices before we commit" src="image/B19385_01_8.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.634.1">Figure 1.8 – Husky and lint-staged successfully enforcing code style and best practices before we commit</span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.635.1">Setting up commitlint to enforce a standard for our commit messages</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.636.1">In addition to linting our</span><a id="_idIndexMarker045" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.637.1"> code, we can also lint our commit messages. </span><span class="kobospan" id="kobo.637.2">You may have noticed that we were prefixing our commit messages with a type already (the </span><strong class="source-inline"><span class="kobospan" id="kobo.638.1">chore</span></strong><span class="kobospan" id="kobo.639.1"> type). </span><span class="kobospan" id="kobo.639.2">Types make it easier to follow what was changed in a commit. </span><span class="kobospan" id="kobo.639.3">To enforce the use of types, we can set up </span><strong class="bold"><span class="kobospan" id="kobo.640.1">commitlint</span></strong><span class="kobospan" id="kobo.641.1">. </span><span class="kobospan" id="kobo.641.2">Follow these steps to set </span><span><span class="kobospan" id="kobo.642.1">it up:</span></span></p>
<ol class="calibre15">
<li class="calibre11"><span class="kobospan" id="kobo.643.1">Install commitlint and a conventional config </span><span><span class="kobospan" id="kobo.644.1">for commitlint:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.645.1">$ npm install --save-dev @commitlint/cli@18.4.3 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.646.1">  @commitlint/config-conventional@18.4.3</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.647.1">Create a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.648.1">.commitlintrc.json</span></strong><span class="kobospan" id="kobo.649.1"> file in the root of our project and add the </span><span><span class="kobospan" id="kobo.650.1">following contents:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.651.1">
{
  "extends": ["@commitlint/config-conventional"]
}</span></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.652.1">Add a </span><strong class="source-inline1"><span class="kobospan" id="kobo.653.1">commit-msg</span></strong><span class="kobospan" id="kobo.654.1"> hook </span><span><span class="kobospan" id="kobo.655.1">to Husky:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.656.1">$ npx husky add .husky/commit-msg \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.657.1">  'npx commitlint --edit ${1}'</span></strong></pre></li> <li class="calibre11"><span class="kobospan" id="kobo.658.1">Now, if we try adding our changed files and committing without a type or a wrong type, we will get an error from commitlint and will not be able to make such a commit. </span><span class="kobospan" id="kobo.658.2">If we add the correct type, it </span><span><span class="kobospan" id="kobo.659.1">will succeed:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.660.1">$ git add .</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.661.1">$ git commit -m "no type"</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.662.1">$ git commit -m "wrong: type"</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.663.1">$ git commit -m "chore: configure commitlint"</span></strong></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.664.1">The following figure shows </span><a id="_idIndexMarker046" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.665.1">Husky in action. </span><span class="kobospan" id="kobo.665.2">If we write an incorrect commit message, it will reject it and not let us commit the code. </span><span class="kobospan" id="kobo.665.3">Only if we enter a properly formatted commit message will the commit </span><span><span class="kobospan" id="kobo.666.1">go through:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer016">
<span class="kobospan" id="kobo.667.1"><img alt="Figure 1.9 – commitlint working successfully and preventing commits without a type and with wrong types" src="image/B19385_01_9.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.668.1">Figure 1.9 – commitlint working successfully and preventing commits without a type and with wrong types</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.669.1">Commit messages in the </span><a id="_idIndexMarker047" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.670.1">commitlint conventional config (</span><a href="https://www.conventionalcommits.org/" class="calibre6 pcalibre1 pcalibre"><span class="kobospan" id="kobo.671.1">https://www.conventionalcommits.org/</span></a><span class="kobospan" id="kobo.672.1">) are structured in a way where a type must be listed first, then an optional scope follows, and then the description follows, such </span><a id="_idIndexMarker048" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.673.1">as </span><strong class="source-inline"><span class="kobospan" id="kobo.674.1">type(scope): description</span></strong><span class="kobospan" id="kobo.675.1">. </span><span class="kobospan" id="kobo.675.2">Possible types are </span><span><span class="kobospan" id="kobo.676.1">as follows:</span></span></p>
<ul class="calibre10">
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.677.1">fix</span></strong><span class="kobospan" id="kobo.678.1">: For </span><span><span class="kobospan" id="kobo.679.1">bug fixes</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.680.1">feat</span></strong><span class="kobospan" id="kobo.681.1">: For </span><span><span class="kobospan" id="kobo.682.1">new features</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.683.1">refactor</span></strong><span class="kobospan" id="kobo.684.1">: For restructuring the code without adding features or </span><span><span class="kobospan" id="kobo.685.1">fixing bugs</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.686.1">build</span></strong><span class="kobospan" id="kobo.687.1">: For changes in the build system </span><span><span class="kobospan" id="kobo.688.1">or dependencies</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.689.1">ci</span></strong><span class="kobospan" id="kobo.690.1">: For changes in the </span><span><span class="kobospan" id="kobo.691.1">CI/CD configuration</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.692.1">docs</span></strong><span class="kobospan" id="kobo.693.1">: For changes in the </span><span><span class="kobospan" id="kobo.694.1">documentation only</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.695.1">perf</span></strong><span class="kobospan" id="kobo.696.1">: For </span><span><span class="kobospan" id="kobo.697.1">performance optimizations</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.698.1">style</span></strong><span class="kobospan" id="kobo.699.1">: For fixing </span><span><span class="kobospan" id="kobo.700.1">code formatting</span></span></li>
<li class="calibre11"><strong class="source-inline1"><span class="kobospan" id="kobo.701.1">test</span></strong><span class="kobospan" id="kobo.702.1">: For </span><a id="_idIndexMarker049" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.703.1">adding or </span><span><span class="kobospan" id="kobo.704.1">adjusting tests</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.705.1">The scope is optional and best used in a monorepo to specify that changes were made to a certain app or library </span><span><span class="kobospan" id="kobo.706.1">within it.</span></span></p>
<h1 id="_idParaDest-28" class="calibre5"><a id="_idTextAnchor027" class="calibre6 pcalibre1 pcalibre"/><span class="kobospan" id="kobo.707.1">Summary</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.708.1">Now that we have successfully set up our project and started enforcing standards, we can continue working on our project without worrying about a consistent code style, consistent commit messages, or making small mistakes. </span><span class="kobospan" id="kobo.708.2">ESLint, Prettier, Husky, and commitlint have got </span><span><span class="kobospan" id="kobo.709.1">us covered.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.710.1">In the next chapter, </span><a href="B19385_02.xhtml#_idTextAnchor028" class="calibre6 pcalibre1 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.711.1">Chapter 2</span></em></span></a><span class="kobospan" id="kobo.712.1">, </span><em class="italic"><span class="kobospan" id="kobo.713.1">Getting to Know Node.js and MongoDB</span></em><span class="kobospan" id="kobo.714.1">, we are going to learn how to write and run small Node.js scripts and how MongoDB, a database </span><span><span class="kobospan" id="kobo.715.1">system, works.</span></span></p>
</div>
</body></html>