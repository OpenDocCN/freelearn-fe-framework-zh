<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer307">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     15
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-295">
    <span class="koboSpan" id="kobo.2.1">
     Server-side Rendering &amp; Building Fullstack Apps with Next.js
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Describe the difference between client-side and server-side React
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.6.1">
       Determine which kind of React app to build
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.7.1">
       Build fullstack React apps with the help of the Next.js framework
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.8.1">
       Explain the key features and advantages of Next.js
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-296">
    <span class="koboSpan" id="kobo.9.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.10.1">
     Thus far in this book, you have learned a lot about building client-side React applications, that is, applications where the (transpiled) React code executes in the browsers of your website visitors.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.11.1">
     This makes sense because React was originally created to simplify the process of building interactive and reactive UIs by running JavaScript code on the client side.
    </span>
    <span class="koboSpan" id="kobo.11.2">
     To this date, most React features, including the ones covered up to this point in this book (e.g., state, context, and routing), exist to fulfill this purpose.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.12.1">
     But, as you will learn in this and the following chapters, you can actually also execute React code on the server side.
    </span>
    <span class="koboSpan" id="kobo.12.2">
     There are certain React features that may only be used there—for example, React Server Components, which will be covered in great detail in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.13.1">
      Chapter 16,
     </span>
    </em>
    <em class="italic">
     <span class="koboSpan" id="kobo.14.1">
      React Server Components &amp; Server Actions
     </span>
    </em>
    <span class="koboSpan" id="kobo.15.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.16.1">
     This chapter will get you started with React on the server side, briefly explain what
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.17.1">
      server-side rendering
     </span>
    </strong>
    <span class="koboSpan" id="kobo.18.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.19.1">
      SSR
     </span>
    </strong>
    <span class="koboSpan" id="kobo.20.1">
     ) is, and introduce you to Next.js, a popular and feature-rich fullstack framework for React that allows you to blend backend and frontend code.
    </span>
    <span class="koboSpan" id="kobo.20.2">
     You will learn how to create Next.js apps and how to use core Next.js features like file-based routing.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-297">
    <span class="koboSpan" id="kobo.21.1">
     What’s the Problem with Client-Side React Apps?
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     The big
    </span>
    <a id="_idIndexMarker762">
    </a>
    <span class="koboSpan" id="kobo.23.1">
     advantage of
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.24.1">
      single-page applications
     </span>
    </strong>
    <span class="koboSpan" id="kobo.25.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.26.1">
      SPAs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.27.1">
     ) and client-side React is that you can build highly reactive and interactive
    </span>
    <a id="_idIndexMarker763">
    </a>
    <span class="koboSpan" id="kobo.28.1">
     web UIs.
    </span>
    <span class="koboSpan" id="kobo.28.2">
     The UI can be updated almost instantly, visible page reloads and switches can be avoided, and hence your users benefit from a mobile-app-like user experience.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.29.1">
     But this reliance on client-side
    </span>
    <a id="_idIndexMarker764">
    </a>
    <span class="koboSpan" id="kobo.30.1">
     code (and, therefore, JavaScript) also has potential disadvantages:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.31.1">
      If users disable JavaScript, the website will be pretty much unusable.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.32.1">
      The initially fetched HTML document is almost empty—data fetching and content rendering only take place after that initial HTTP request and response.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.33.1">
     The first point might not matter too much, since only a small subset of all users will disable JavaScript and you can show an appropriate warning message via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.34.1">
      &lt;noscript&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.35.1">
     tag.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.36.1">
     But the second point can have significant consequences.
    </span>
    <span class="koboSpan" id="kobo.36.2">
     Since the initial HTML document is almost empty, users won’t see any content until all the JavaScript code has been fetched and executed.
    </span>
    <span class="koboSpan" id="kobo.36.3">
     While most users might not see a notable delay, depending on the device and internet connection of a user, this may take up to a few seconds for some users.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.37.1">
     In addition, search engine crawlers (e.g., Google’s crawler) will not necessarily wait for all your client-side JavaScript code to be fetched and executed when indexing your page.
    </span>
    <span class="koboSpan" id="kobo.37.2">
     Therefore, those crawlers may see a mostly empty page and hence rank your website badly (or not index it at all).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.38.1">
     <img alt="A screen shot of a computer  Description automatically generated" src="image/B31339_15_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.39.1">
     Figure 15.1: The page content is nowhere to be found in the page source code (i.e., the fetched HTML document)
    </span>
   </p>
   <p class="normal">
    <em class="italic">
     <span class="koboSpan" id="kobo.40.1">
      Figure 15.1
     </span>
    </em>
    <span class="koboSpan" id="kobo.41.1">
     shows the page source
    </span>
    <a id="_idIndexMarker765">
    </a>
    <span class="koboSpan" id="kobo.42.1">
     code (which can be inspected by right-clicking on the website) of a typical React app.
    </span>
    <span class="koboSpan" id="kobo.42.2">
     As you can see in that figure, there’s almost no content between the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.43.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.44.1">
     tags.
    </span>
    <span class="koboSpan" id="kobo.44.2">
     The title (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.45.1">
      "Hello World!"
     </span>
    </code>
    <span class="koboSpan" id="kobo.46.1">
     ) and the text below it are missing in that source code.
    </span>
    <span class="koboSpan" id="kobo.46.2">
     The content is missing there because it’s not part of the initial HTTP response.
    </span>
    <span class="koboSpan" id="kobo.46.3">
     Instead, it’s rendered by the transpiled React code after the page loaded (and after that code was downloaded from the server).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.47.1">
     Of course, these disadvantages won’t matter in all cases.
    </span>
    <span class="koboSpan" id="kobo.47.2">
     If you’re building some company-internal application, or a UI that’s hidden behind some login (and hence won’t be indexed anyway), or if you’re only targeting users with fast devices and internet connections, you might not need to worry about these potential problems.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.48.1">
     But if you’re building a public-facing website where search engine indexing matters or that may be visited by users with slow devices or internet connections, you might want to consider getting rid of these disadvantages.
    </span>
    <span class="koboSpan" id="kobo.48.2">
     And that’s precisely where
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.49.1">
      SSR
     </span>
    </strong>
    <span class="koboSpan" id="kobo.50.1">
     can help out.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-298">
    <span class="koboSpan" id="kobo.51.1">
     Making Sense of Server-side Rendering (SSR)
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.52.1">
     When working with React, SSR refers to the process of rendering web pages, and therefore your React components, on
    </span>
    <a id="_idIndexMarker766">
    </a>
    <span class="koboSpan" id="kobo.53.1">
     the server that handles the incoming HTTP request when a user visits your website.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.54.1">
     With SSR enabled, the server will render your React component tree and hence produce the actual HTML code yielded by your components and their JSX instructions.
    </span>
    <span class="koboSpan" id="kobo.54.2">
     It’s this finished HTML code that’s then sent back to the client.
    </span>
    <span class="koboSpan" id="kobo.54.3">
     As a result, website visitors will receive an HTML file that’s not empty anymore but that instead contains the actual page content.
    </span>
    <span class="koboSpan" id="kobo.54.4">
     Search engine crawlers will also see that content and index the page accordingly.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.55.1">
     <img alt="A diagram of a software development process  Description automatically generated" src="image/B31339_15_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.56.1">
     Figure 15.2: React SSR in action
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.57.1">
     Best of all, you don’t lose the client-side advantages of React because, when enabling SSR, React still works on the client side as it did before!
    </span>
    <span class="koboSpan" id="kobo.57.2">
     It’ll take over control once that initial HTML document has been received and provide users with the same SPA experience you were able to deliver without SSR.
    </span>
    <span class="koboSpan" id="kobo.57.3">
     Though, technically, when using SSR, React will be initialized slightly differently on the client.
    </span>
    <span class="koboSpan" id="kobo.57.4">
     Instead of re-rendering the entire DOM there, it’ll
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.58.1">
      hydrate
     </span>
    </strong>
    <span class="koboSpan" id="kobo.59.1">
     the page content that was rendered on the server.
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.60.1">
      Hydration
     </span>
    </strong>
    <span class="koboSpan" id="kobo.61.1">
     means that React will connect
    </span>
    <a id="_idIndexMarker767">
    </a>
    <span class="koboSpan" id="kobo.62.1">
     your component structure to the rendered HTML code (which was rendered based on that same structure, of course) and make it interactive.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.63.1">
     <img alt="A diagram of a software development process  Description automatically generated" src="image/B31339_15_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.64.1">
     Figure 15.3: After receiving the rendered HTML code, React hydrates the code on the client side
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.65.1">
     Consequently, you’ll get the best of both worlds: non-empty, pre-rendered pages for the initial HTTP request sent by the browser, and a highly reactive web application for the user to enjoy.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-299">
    <span class="koboSpan" id="kobo.66.1">
     Adding SSR to a React Application
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.67.1">
     It is extremely important to understand
    </span>
    <a id="_idIndexMarker768">
    </a>
    <span class="koboSpan" id="kobo.68.1">
     that SSR-enabled React applications need to execute code in two environments (server and browser), whereas client-side React applications only rely on the browser.
    </span>
    <span class="koboSpan" id="kobo.68.2">
     Therefore, to use SSR, a server-side environment must be added to the React project—it’s not enough to just adjust the React code in a few places.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.69.1">
     For example, standard Vite-based projects don’t support SSR out of the box.
    </span>
    <span class="koboSpan" id="kobo.69.2">
     Consequently, if you want to support SSR, you must edit your Vite project setup (and some of your project code files) to enable executing React code on both the client and server side.
    </span>
    <span class="koboSpan" id="kobo.69.3">
     For example, you must add some code that handles incoming HTTP requests and triggers React code
    </span>
    <a id="_idIndexMarker769">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     execution on the server side.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.71.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.72.1">
      Manually enabling SSR requires backend development and build process configuration knowledge—in addition to the React knowledge you need.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.73.1">
      Thankfully, though, as you’ll learn throughout this chapter, you often don’t need to go through that setup process.
     </span>
     <span class="koboSpan" id="kobo.73.2">
      Instead, you can rely on frameworks like Next.js to do the heavy lifting for you.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.74.1">
      If you’re interested in manually configuring SSR in Vite-based projects, the official Vite SSR documentation is a great place to learn more:
     </span>
     <a href="https://vitejs.dev/guide/ssr">
      <span class="url">
       <span class="koboSpan" id="kobo.75.1">
        https://vitejs.dev/guide/ssr
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.76.1">
      .
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.77.1">
      In addition, you can explore the following demo project that was set up according to the official Vite SSR instructions:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/02-ssr-enabled">
      <span class="url">
       <span class="koboSpan" id="kobo.78.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/02-ssr-enabled
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.79.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.80.1">
     The fact that manually enabling SSR is a non-trivial process that requires advanced Node.js and backend development knowledge is one of the reasons why the official React documentation recommends creating new React projects with the help of frameworks like Next.js (see
    </span>
    <a href="https://react.dev/learn/start-a-new-react-project">
     <span class="url">
      <span class="koboSpan" id="kobo.81.1">
       https://react.dev/learn/start-a-new-react-project
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.82.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.83.1">
     But it’s not the only reason.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-300">
    <span class="koboSpan" id="kobo.84.1">
     Server-side Data Fetching Is Not Trivial
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.85.1">
     Besides the non-trivial setup
    </span>
    <a id="_idIndexMarker770">
    </a>
    <span class="koboSpan" id="kobo.86.1">
     process, SSR-enabled projects also suffer from another possible problem: server-side data fetching is difficult.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.87.1">
     If you’re building a React app that needs to fetch data in some components (e.g., with the help of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.88.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.89.1">
     , as shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.90.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.91.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.92.1">
      Handling Side Effects
     </span>
    </em>
    <span class="koboSpan" id="kobo.93.1">
     ), you’ll find out that the data is not fetched when the component is rendered on the server.
    </span>
    <span class="koboSpan" id="kobo.93.2">
     Instead, the data fetching will only occur on the client side.
    </span>
    <span class="koboSpan" id="kobo.93.3">
     The server-side rendered HTML markup will not contain the content that depends on the fetched data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.94.1">
     The reason for this behavior is that React component functions are only executed on the server once—i.e., it’s only the
    </span>
    <a id="_idIndexMarker771">
    </a>
    <span class="koboSpan" id="kobo.95.1">
     first component render cycle that’s performed on the server.
    </span>
    <span class="koboSpan" id="kobo.95.2">
     You can think of SSR producing only an initial page snapshot.
    </span>
    <span class="koboSpan" id="kobo.95.3">
     Subsequent state updates are ignored, and effect functions (triggered via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.96.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.97.1">
     ) are also therefore not executed on the server side.
    </span>
    <span class="koboSpan" id="kobo.97.2">
     As a result, data fetching that relies on effect functions and subsequent state updates will not work on the server side.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.98.1">
     Consider this example, where a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.99.1">
      Todos
     </span>
    </code>
    <span class="koboSpan" id="kobo.100.1">
     component function uses
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.101.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.102.1">
     to fetch some (dummy) to-dos data from
    </span>
    <a href="https://jsonplaceholder.typicode.com/">
     <span class="url">
      <span class="koboSpan" id="kobo.103.1">
       https://jsonplaceholder.typicode.com/
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.104.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.105.1">import</span></span><span class="koboSpan" id="kobo.106.1"> { </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.107.1">useEffect</span></strong></span><span class="koboSpan" id="kobo.108.1">, useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.109.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.110.1">'react'</span></span><span class="koboSpan" id="kobo.111.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.112.1">import</span></span><span class="koboSpan" id="kobo.113.1"> { loadTodos, saveTodo } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.114.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.115.1">'../todos.js'</span></span><span class="koboSpan" id="kobo.116.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.117.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.118.1">Todos</span></span><span class="koboSpan" id="kobo.119.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.120.1">const</span></span><span class="koboSpan" id="kobo.121.1"> [todos, setTodos] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.122.1">useState</span></span><span class="koboSpan" id="kobo.123.1">();
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.124.1">useEffect</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.125.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.126.1">() =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.127.1"> {</span></strong></span>
<span class="hljs-tag">    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.128.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.129.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.130.1">fetchTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.131.1">() {</span></strong></span>
<span class="hljs-tag">      </span><span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.132.1">// sends HTTP request to jsonplaceholder.typicode.com</span></strong></span>
<span class="hljs-tag">      </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.133.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.134.1"> todos = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.135.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.136.1">loadTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.137.1">();</span></strong></span>
<span class="hljs-tag">      </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.138.1">setTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.139.1">(todos);</span></strong></span>
<span class="hljs-tag">    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.140.1">}</span></strong></span>
<span class="hljs-tag">    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.141.1">fetchTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.142.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.143.1">}, []);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.144.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.145.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.146.1">addTodoAction</span></span><span class="koboSpan" id="kobo.147.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.148.1">fd</span></span><span class="koboSpan" id="kobo.149.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.150.1">const</span></span><span class="koboSpan" id="kobo.151.1"> todo = {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.152.1">title</span></span><span class="koboSpan" id="kobo.153.1">: fd.</span><span class="hljs-title"><span class="koboSpan" id="kobo.154.1">get</span></span><span class="koboSpan" id="kobo.155.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.156.1">'title'</span></span><span class="koboSpan" id="kobo.157.1">),
    };
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.158.1">const</span></span><span class="koboSpan" id="kobo.159.1"> savedTodo = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.160.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.161.1">saveTodo</span></span><span class="koboSpan" id="kobo.162.1">(todo);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.163.1">setTodos</span></span><span class="koboSpan" id="kobo.164.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.165.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.166.1">prevTodos</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.167.1">) =&gt;</span></span><span class="koboSpan" id="kobo.168.1"> [savedTodo, ...prevTodos]);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.169.1">return</span></span><span class="koboSpan" id="kobo.170.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.171.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.172.1">section</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.173.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.174.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.175.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.176.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.177.1">Manage your todos</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.178.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.179.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.180.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.181.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.182.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.183.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.184.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.185.1">{addTodoAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.186.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.187.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.188.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.189.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.190.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.191.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.192.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.193.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.194.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.195.1"> /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.196.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.197.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.198.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.199.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.200.1">"submit"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.201.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.202.1">Add Todo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.203.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.204.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.205.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.206.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.207.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.208.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.209.1">      {(!todos || todos.length === 0) &amp;&amp; (</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.210.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.211.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.212.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.213.1">No todos found.</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.214.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.215.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.216.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.217.1">      )}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.218.1">      {todos &amp;&amp; todos.length &gt; 0 &amp;&amp; (</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.219.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.220.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.221.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.222.1">          {todos.map((todo) =&gt; (</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.223.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.224.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.225.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.226.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.227.1">{todo.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.228.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.229.1">{todo.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.230.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.231.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.232.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.233.1">          ))}</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.234.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.235.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.236.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.237.1">      )}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.238.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.239.1">section</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.240.1">&gt;</span></span><span class="koboSpan" id="kobo.241.1">
  );
}
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.242.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.243.1">
      You find the complete example code on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/03-ssr-data-fetching">
      <span class="url">
       <span class="koboSpan" id="kobo.244.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/03-ssr-data-fetching
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.245.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.246.1">
     When running this code on
    </span>
    <a id="_idIndexMarker772">
    </a>
    <span class="koboSpan" id="kobo.247.1">
     the server, there won’t be any errors.
    </span>
    <span class="koboSpan" id="kobo.247.2">
     Instead, the app will run as expected and fetch the dummy to-dos from the backend server.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.248.1">
     However, the HTML document that’s produced on the server will not contain the fetched to-dos.
    </span>
    <span class="koboSpan" id="kobo.248.2">
     Instead, it will just contain the fallback text (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.249.1">
      "No todos found"
     </span>
    </code>
    <span class="koboSpan" id="kobo.250.1">
     ).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.251.1">
     <img alt="A computer screen with text  Description automatically generated" src="image/B31339_15_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.252.1">
     Figure 15.4: The rendered HTML does not contain the actual to-dos
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.253.1">
     The generated markup does not
    </span>
    <a id="_idIndexMarker773">
    </a>
    <span class="koboSpan" id="kobo.254.1">
     contain the fetched to-dos because, as explained above, React component functions only execute once on the server side (and the function passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.255.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.256.1">
     doesn’t execute at all).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.257.1">
     Due to this behavior, you can’t easily perform asynchronous operations and, for example, fetch data via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.258.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.259.1">
     in your React components when using SSR.
    </span>
    <span class="koboSpan" id="kobo.259.2">
     Hence, the server-side rendered HTML content will never contain that data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.260.1">
     While you can come up with workarounds to that problem (e.g., perform the data fetching operation on the server, before executing the component functions) that’s a problem that will be solved by Next.js
    </span>
    <a id="_idIndexMarker774">
    </a>
    <span class="koboSpan" id="kobo.261.1">
     and a concept called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.262.1">
      React Server Components
     </span>
    </strong>
    <span class="koboSpan" id="kobo.263.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.264.1">
      RSC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.265.1">
     ).
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-301">
    <span class="koboSpan" id="kobo.266.1">
     Introducing Next.js
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.267.1">
     Next.js is a React framework—i.e., a framework that builds upon React and adds extra features and patterns to it.
    </span>
    <span class="koboSpan" id="kobo.267.2">
     Specifically, Next.js
    </span>
    <a id="_idIndexMarker775">
    </a>
    <span class="koboSpan" id="kobo.268.1">
     adds features like file-based routing, built-in SSR, or automatic caching to improve performance.
    </span>
    <span class="koboSpan" id="kobo.268.2">
     Though, most importantly, it unlocks two crucial React
    </span>
    <a id="_idIndexMarker776">
    </a>
    <span class="koboSpan" id="kobo.269.1">
     concepts:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.270.1">
      React Server Components
     </span>
    </strong>
    <span class="koboSpan" id="kobo.271.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.272.1">
      RSC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.273.1">
     ) and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.274.1">
      Server Actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.275.1">
     .
    </span>
    <span class="koboSpan" id="kobo.275.2">
     As you will learn, these features enable server-side React code to perform asynchronous operations and, for example, fetch and render data on the server.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.276.1">
     Thus, Next.js saves you the effort of manually enabling SSR, and, additionally, unlocks other powerful features that help with fetching data on the server.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.277.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.278.1">
      There are also alternative React frameworks like Remix/React Router (they were merged to bring optional fullstack React framework features to React Router) or TanStack Start.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.279.1">
      Next.js has not only existed for a very long time but it’s also the most popular (measured by usage) fullstack framework at the point in time when this book was written.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.280.1">
     This chapter will get you started
    </span>
    <a id="_idIndexMarker777">
    </a>
    <span class="koboSpan" id="kobo.281.1">
     with Next.js and provide a brief overview of its core concepts.
    </span>
    <span class="koboSpan" id="kobo.281.2">
     The next chapter (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.282.1">
      Chapter 16
     </span>
    </em>
    <span class="koboSpan" id="kobo.283.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.284.1">
      React Server Components &amp; Server Actions
     </span>
    </em>
    <span class="koboSpan" id="kobo.285.1">
     ) will then build upon this knowledge to dive even deeper.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-302">
    <span class="koboSpan" id="kobo.286.1">
     Creating Next.js Projects
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.287.1">
     To use Next.js, you must first create a Next.js project.
    </span>
    <span class="koboSpan" id="kobo.287.2">
     Technically, it’ll still be a React project, which means you will be
    </span>
    <a id="_idIndexMarker778">
    </a>
    <span class="koboSpan" id="kobo.288.1">
     able to use React features like components, props, state, Hooks, or JSX.
    </span>
    <span class="koboSpan" id="kobo.288.2">
     But it’ll be a project that comes with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.289.1">
      next
     </span>
    </code>
    <span class="koboSpan" id="kobo.290.1">
     package installed, and that enforces a certain folder structure that’s needed by Next.js.
    </span>
    <span class="koboSpan" id="kobo.290.2">
     You can’t install Next.js into an existing (Vite-based) React project and start using it there.
    </span>
    <span class="koboSpan" id="kobo.290.3">
     Significant adjustments to the project configuration and structure would be required.
    </span>
    <span class="koboSpan" id="kobo.290.4">
     Next.js brings its own build process and does not use Vite under the hood.
    </span>
    <span class="koboSpan" id="kobo.290.5">
     Hence, creating a brand-new project makes more sense.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.291.1">
     To get started with a new Next.js project, you should run the following command in your system terminal or command prompt (in a place on your system where you want the new project folder to be created):
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.292.1">npx create-next-app@latest first-next-app
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.293.1">
     After running this command, you’ll have to make a couple of choices in the terminal (e.g., if you want to use TypeScript).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.294.1">
     You can confirm all those choices by simply pressing the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.295.1">
      Enter
     </span>
    </em>
    <span class="koboSpan" id="kobo.296.1">
     key, hence accepting the default option.
    </span>
    <span class="koboSpan" id="kobo.296.2">
     However, you should ensure that you choose
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.297.1">
      No
     </span>
    </code>
    <span class="koboSpan" id="kobo.298.1">
     for TypeScript (unless you know how to use it) and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.299.1">
      Yes
     </span>
    </code>
    <span class="koboSpan" id="kobo.300.1">
     for
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.301.1">
      App Router
     </span>
    </strong>
    <span class="koboSpan" id="kobo.302.1">
     .
    </span>
    <span class="koboSpan" id="kobo.302.2">
     You
    </span>
    <a id="_idIndexMarker779">
    </a>
    <span class="koboSpan" id="kobo.303.1">
     can find a (slightly cleaned up) starting project on GitHub:
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/04-nextjs-intro">
     <span class="url">
      <span class="koboSpan" id="kobo.304.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/04-nextjs-intro
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.305.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.306.1">
     Inside the created project folder, a development server can be started via:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.307.1">npm run dev
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.308.1">
     While the command is the
    </span>
    <a id="_idIndexMarker780">
    </a>
    <span class="koboSpan" id="kobo.309.1">
     same as in a Vite project, the server will actually target a different port by default.
    </span>
    <span class="koboSpan" id="kobo.309.2">
     Instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.310.1">
      localhost:5173
     </span>
    </code>
    <span class="koboSpan" id="kobo.311.1">
     (Vite), Next.js projects use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.312.1">
      localhost:3000
     </span>
    </code>
    <span class="koboSpan" id="kobo.313.1">
     for the preview development server.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.314.1">
     Just as in a Vite-based project, you should keep this process up and running while you’re working on the project code.
    </span>
    <span class="koboSpan" id="kobo.314.2">
     The underlying build process will automatically reload and update the preview website as you make changes to your code.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.315.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.316.1">
      Next.js is an established, mature framework that’s never stopped innovating and changing.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.317.1">
      In late 2022, the so-called
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.318.1">
       App Router
      </span>
     </strong>
     <span class="koboSpan" id="kobo.319.1">
      was introduced as a new way of structuring and building Next.js applications (the old
     </span>
     <a id="_idIndexMarker781">
     </a>
     <span class="koboSpan" id="kobo.320.1">
      approach is now referred to as Pages Router).
     </span>
     <span class="koboSpan" id="kobo.320.2">
      This book, of course, covers the new App Router approach.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.321.1">
      As of mid-2024 (when this edition is written), the App Router approach, despite being marked as stable, still frequently receives new features and changes.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.322.1">
      Therefore, even though unlikely, the concepts and code explained in this book may change or break over time.
     </span>
     <span class="koboSpan" id="kobo.322.2">
      The setup process described above may change, too.
     </span>
     <span class="koboSpan" id="kobo.322.3">
      In such cases, a note (with instructions on how to adjust the code) will be added to the Changelog document on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/main/CHANGELOG.md">
      <span class="url">
       <span class="koboSpan" id="kobo.323.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/main/CHANGELOG.md
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.324.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.325.1">
     A newly created Next.js project comes with all its dependencies installed (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.326.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.327.1">
     is automatically executed as part of the project creation process) and a project structure like this:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.328.1">
      An
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.329.1">
       app/
      </span>
     </code>
     <span class="koboSpan" id="kobo.330.1">
      folder that holds route-related files (see the next section)
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.331.1">
      A
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.332.1">
       public/
      </span>
     </code>
     <span class="koboSpan" id="kobo.333.1">
      folder that can be used to store assets that should be served statically (i.e., without being changed by the build process)
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.334.1">
       jsconfig.json
      </span>
     </code>
     <span class="koboSpan" id="kobo.335.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.336.1">
       nextjs.config.mjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.337.1">
      files for configuring the project and Next.js-specific behaviors
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.338.1">
       package.json
      </span>
     </code>
     <span class="koboSpan" id="kobo.339.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.340.1">
       package-lock.json
      </span>
     </code>
     <span class="koboSpan" id="kobo.341.1">
      for managing project dependencies
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.342.1">
     Hence, except for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.343.1">
      app/
     </span>
    </code>
    <span class="koboSpan" id="kobo.344.1">
     folder, it’s not too different from the structure you know from Vite.
    </span>
    <span class="koboSpan" id="kobo.344.2">
     However, it is worth noting that Next.js, unlike Vite, does not enforce
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.345.1">
      .jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.346.1">
     as a file extension for JavaScript files that contain JSX code.
    </span>
    <span class="koboSpan" id="kobo.346.2">
     You can use it but you don’t have to.
    </span>
    <span class="koboSpan" id="kobo.346.3">
     For example, the starting
    </span>
    <a id="_idIndexMarker782">
    </a>
    <span class="koboSpan" id="kobo.347.1">
     project uses
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.348.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.349.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.350.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.351.1">
     , not
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.352.1">
      page.jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.353.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.354.1">
      layout.jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.355.1">
     , even though these files contain JSX code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.356.1">
     Just like Vite-based projects, Next.js projects come with a build workflow that processes and transpiles your code files automatically, when running the development server or building for production (which you can do via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.357.1">
      npm run build
     </span>
    </code>
    <span class="koboSpan" id="kobo.358.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.359.1">
     Like pretty much all modern React project setups, Next.js projects therefore support importing style files (like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.360.1">
      globals.css
     </span>
    </code>
    <span class="koboSpan" id="kobo.361.1">
     ) or images into JavaScript files.
    </span>
    <span class="koboSpan" id="kobo.361.2">
     It also allows you to omit or set file extensions on imports.
    </span>
    <span class="koboSpan" id="kobo.361.3">
     In addition, Next.js has CSS Modules support, too.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.362.1">
     Put in other words: you can work in Next.js projects in pretty much the same way as you do in Vite-based projects.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-303">
    <span class="koboSpan" id="kobo.363.1">
     Working with File-Based Routes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.364.1">
     In Vite-based projects, you have a high degree of flexibility when it comes to the project structure.
    </span>
    <span class="koboSpan" id="kobo.364.2">
     Inside the
    </span>
    <code class="codeHighlighted" style="font-weight: bold;">
     <span class="koboSpan" id="kobo.365.1">
      src/
     </span>
    </code>
    <span class="koboSpan" id="kobo.366.1">
     folder, you can create any subfolders and files of your choice.
    </span>
    <span class="koboSpan" id="kobo.366.2">
     The names of those files and
    </span>
    <a id="_idIndexMarker783">
    </a>
    <span class="koboSpan" id="kobo.367.1">
     folders also don’t really matter (if they’re valid and use the right extensions).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.368.1">
     When working with React Router, you would set up routes in one of your JSX code files and load any component stored in any file for any route (see
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.369.1">
      Chapter 13
     </span>
    </em>
    <span class="koboSpan" id="kobo.370.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.371.1">
      Multipage Apps with React Router
     </span>
    </em>
    <span class="koboSpan" id="kobo.372.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.373.1">
     In Next.js projects, that’s a bit different because Next.js uses the file system for defining routes—you don’t set up routes in code.
    </span>
    <span class="koboSpan" id="kobo.373.2">
     As a result, while you still have lots of flexibility, there are some routing-related rules regarding the project structure and file names that must be followed—otherwise, the app will break and not work as intended.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.374.1">
     Next.js implements file-based routing via its own built-in router.
    </span>
    <span class="koboSpan" id="kobo.374.2">
     This router analyzes your file system and derives supported routes, their URL paths, and which React components to load and render based on the file and folder structure in your project.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.375.1">
     When using the App Router approach, you therefore must store all components that should be loaded as pages inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.376.1">
      app/
     </span>
    </code>
    <span class="koboSpan" id="kobo.377.1">
     folder (or a nested folder) in files named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.378.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.379.1">
     .
    </span>
    <span class="koboSpan" id="kobo.379.2">
     Since all route component files must be named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.380.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.381.1">
     , it’s the parent folder names that define the route
    </span>
    <a id="_idIndexMarker784">
    </a>
    <span class="koboSpan" id="kobo.382.1">
     path for which the component will get loaded.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.383.1">
     For example, you might have a file and folder structure as shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.384.1">
      Figure 15.5
     </span>
    </em>
    <span class="koboSpan" id="kobo.385.1">
     :
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.386.1">
     <img alt="A diagram of a web site  Description automatically generated" src="image/B31339_15_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.387.1">
     Figure 15.5: In Next.js, page.js files contain route components.
    </span>
    <span class="koboSpan" id="kobo.387.2">
     The folder names determine the path
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.388.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.389.1">
      Figure 15.5
     </span>
    </em>
    <span class="koboSpan" id="kobo.390.1">
     , you can see that four routes are defined via the file system: a root route (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.391.1">
      /
     </span>
    </code>
    <span class="koboSpan" id="kobo.392.1">
     ) and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.393.1">
      /about
     </span>
    </code>
    <span class="koboSpan" id="kobo.394.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.395.1">
      /users
     </span>
    </code>
    <span class="koboSpan" id="kobo.396.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.397.1">
      /terms/en
     </span>
    </code>
    <span class="koboSpan" id="kobo.398.1">
     routes.
    </span>
    <span class="koboSpan" id="kobo.398.2">
     For each route, the component stored in the respective
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.399.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.400.1">
     will be loaded and rendered onto the screen.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.401.1">
     For example, you might have an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.402.1">
      app/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.403.1">
     file like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.404.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.405.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.406.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.407.1">Home</span></span><span class="koboSpan" id="kobo.408.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.409.1">return</span></span><span class="koboSpan" id="kobo.410.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.411.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.412.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.413.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.414.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.415.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.416.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.417.1">Hello Next.js World </span></span><span class="koboSpan" id="kobo.418.1"><img alt="img" src="image/B31339_15_001.png"/></span><span class="hljs-tag"><span class="koboSpan" id="kobo.419.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.420.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.421.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.422.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.423.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.424.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.425.1">Build fullstack React applications with ease!</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.426.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.427.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.428.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.429.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.430.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.431.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.432.1">        Learn more about Next.js in{' '}</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.433.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.434.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.435.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.436.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.437.1">"https://www.udemy.com/course/nextjs-react-the-complete-guide/"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.438.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.439.1">          my course</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.440.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.441.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.442.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.443.1">{' '}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.444.1">        or the </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.445.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.446.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.447.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.448.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.449.1">"https://nextjs.org/"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.450.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.451.1">official documentation</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.452.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.453.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.454.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.455.1">.</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.456.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.457.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.458.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.459.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.460.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.461.1">&gt;</span></span><span class="koboSpan" id="kobo.462.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.463.1">
     As you can see, a regular React
    </span>
    <a id="_idIndexMarker785">
    </a>
    <span class="koboSpan" id="kobo.464.1">
     component function is stored in this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.465.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.466.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.466.2">
     The name of the component function does not matter—it’s just important that it’s a component function that’s exported inside a file named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.467.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.468.1">
     .
    </span>
    <span class="koboSpan" id="kobo.468.2">
     As a result, the following content will be visible on the screen if a user visits
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.469.1">
      &lt;domain&gt;/
     </span>
    </code>
    <span class="koboSpan" id="kobo.470.1">
     (or just
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.471.1">
      &lt;domain&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.472.1">
     , without the forward slash):
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.473.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_15_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.474.1">
     Figure 15.6: The Next.js router loads the component stored in the app/page.js file and renders its content
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.475.1">
     You can therefore easily add as
    </span>
    <a id="_idIndexMarker786">
    </a>
    <span class="koboSpan" id="kobo.476.1">
     many, possibly nested, routes as needed—simply by creating folders, subfolders, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.477.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.478.1">
     files.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-304">
    <span class="koboSpan" id="kobo.479.1">
     Server-side Rendering with Next.js
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.480.1">
     Besides providing a built-in
    </span>
    <a id="_idIndexMarker787">
    </a>
    <span class="koboSpan" id="kobo.481.1">
     file-based router (and many other features that will be explored throughout this and the next chapters), Next.js has one other crucial advantage: it implements SSR out of the box.
    </span>
    <span class="koboSpan" id="kobo.481.2">
     You don’t have to add any files, change any configuration, or adjust any code to render React components on the server—instead, it works right from the start.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.482.1">
     Consequently, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.483.1">
      app/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.484.1">
     file component (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.485.1">
      Home
     </span>
    </code>
    <span class="koboSpan" id="kobo.486.1">
     component in the example above), is evaluated and rendered on the server side when a user visits
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.487.1">
      &lt;domain&gt;/
     </span>
    </code>
    <span class="koboSpan" id="kobo.488.1">
     .
    </span>
    <span class="koboSpan" id="kobo.488.2">
     It’s the finished HTML code that’s sent to the browser.
    </span>
    <span class="koboSpan" id="kobo.488.3">
     And, just as with Vite-based projects with custom SSR, Next.js renders all child components that may be used inside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.489.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.490.1">
     on the server, too.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.491.1">
     In addition, when building websites with Next.js, you still build React apps.
    </span>
    <span class="koboSpan" id="kobo.491.2">
     That’s why Next.js apps become interactive on the client side once the SSR is done.
    </span>
    <span class="koboSpan" id="kobo.491.3">
     Technically, as you’ll also learn in the next chapter (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.492.1">
      React Server Components &amp; Server Actions
     </span>
    </em>
    <span class="koboSpan" id="kobo.493.1">
     ), they’ll be made interactive in a different way than in Vite-based SSR-enabled React apps (where React hydrates the server-side rendered markup on the client), but ultimately, your website users will have a SPA-like user experience.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.494.1">
     Therefore, if you want to
    </span>
    <a id="_idIndexMarker788">
    </a>
    <span class="koboSpan" id="kobo.495.1">
     build a React app that supports SSR, relying on a framework like Next.js instead of setting up SSR manually is recommended.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.496.1">
     In addition, you will be able to use other helpful features, like the file-based routing system, especially since it doesn’t stop at defining routes via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.497.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.498.1">
     files.
    </span>
    <span class="koboSpan" id="kobo.498.2">
     It, for example, also simplifies the process of defining layouts.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-305">
    <span class="koboSpan" id="kobo.499.1">
     Working with Layouts
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.500.1">
     As mentioned, when it comes to routing, file
    </span>
    <a id="_idIndexMarker789">
    </a>
    <span class="koboSpan" id="kobo.501.1">
     names and where you store those files matter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.502.1">
     For example, you’ll also find a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.503.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.504.1">
     file next to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.505.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.506.1">
     file in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.507.1">
      app/
     </span>
    </code>
    <span class="koboSpan" id="kobo.508.1">
     folder from the example above.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.509.1">
     <img alt="A screenshot of a black screen  Description automatically generated" src="image/B31339_15_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.510.1">
     Figure 15.7: Besides a page.js file, a styling file, and a favicon, a layout.js file can be found in the app/ folder
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.511.1">
     Just like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.512.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.513.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.514.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.515.1">
     is a
    </span>
    <a id="_idIndexMarker790">
    </a>
    <span class="koboSpan" id="kobo.516.1">
     reserved file name—i.e., that file is handled by Next.js in a special way.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.517.1">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.518.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.519.1">
     file also exports a component function, but the created component will not be rendered for one specific path.
    </span>
    <span class="koboSpan" id="kobo.519.2">
     Instead, it is used as a wrapper around all sibling or nested pages.
    </span>
    <span class="koboSpan" id="kobo.519.3">
     Thus, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.520.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.521.1">
     file can be used to define JSX code that will be shared across multiple pages.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.522.1">
     Since it’s meant to be used as a wrapper component, the component function exported by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.523.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.524.1">
     must use the special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.525.1">
      children
     </span>
    </code>
    <span class="koboSpan" id="kobo.526.1">
     prop (see
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.527.1">
      Chapter 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.528.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.529.1">
      Components &amp; Props
     </span>
    </em>
    <span class="koboSpan" id="kobo.530.1">
     ) to define the place where the wrapped page content should be displayed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.531.1">
     For example, you could use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.532.1">
      app/layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.533.1">
     file to define a global layout that adds a navigation bar above the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.534.1">
      &lt;main&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.535.1">
     content:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.536.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.537.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.538.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.539.1">RootLayout</span></span><span class="koboSpan" id="kobo.540.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.541.1">{ children }</span></strong></span><span class="koboSpan" id="kobo.542.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.543.1">return</span></span><span class="koboSpan" id="kobo.544.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.545.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.546.1">html</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.547.1">lang</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.548.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.549.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.550.1">en"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.551.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.552.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.553.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.554.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.555.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.556.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.557.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.558.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.559.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.560.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.561.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.562.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.563.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.564.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.565.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.566.1">&gt;&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.567.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.568.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.569.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.570.1">"/"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.571.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.572.1">Home</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.573.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.574.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.575.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.576.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.577.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.578.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.579.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.580.1">&gt;&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.581.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.582.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.583.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.584.1">"/events"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.585.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.586.1">Events</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.587.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.588.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.589.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.590.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.591.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.592.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.593.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.594.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.595.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.596.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.597.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.598.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.599.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.600.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.601.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.602.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.603.1">&gt;</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.604.1">{children}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.605.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.606.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.607.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.608.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.609.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.610.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.611.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.612.1">html</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.613.1">&gt;</span></span><span class="koboSpan" id="kobo.614.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.615.1">
     In this example code snippet, it’s also worth noting that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.616.1">
      RootLayout
     </span>
    </code>
    <span class="koboSpan" id="kobo.617.1">
     component renders the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.618.1">
      &lt;html&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.619.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.620.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.621.1">
     elements.
    </span>
    <span class="koboSpan" id="kobo.621.2">
     In Vite-based projects, that’s not something you would do.
    </span>
    <span class="koboSpan" id="kobo.621.3">
     There, you instead
    </span>
    <a id="_idIndexMarker791">
    </a>
    <span class="koboSpan" id="kobo.622.1">
     define a place in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.623.1">
      index.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.624.1">
     file where the rendered HTML should be injected (via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.625.1">
      createRoot()
     </span>
    </code>
    <span class="koboSpan" id="kobo.626.1">
     function exposed by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.627.1">
      react-dom
     </span>
    </code>
    <span class="koboSpan" id="kobo.628.1">
     package; see
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.629.1">
      Chapter 2
     </span>
    </em>
    <span class="koboSpan" id="kobo.630.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.631.1">
      Understanding React Components &amp; JSX
     </span>
    </em>
    <span class="koboSpan" id="kobo.632.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.633.1">
     Next.js does not rely on such an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.634.1">
      index.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.635.1">
     file; instead, it forces you to define a root
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.636.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.637.1">
     file at the top level of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.638.1">
      app/
     </span>
    </code>
    <span class="koboSpan" id="kobo.639.1">
     folder.
    </span>
    <span class="koboSpan" id="kobo.639.2">
     It’s then this root layout that must define the general structure of the rendered HTML page.
    </span>
    <span class="koboSpan" id="kobo.639.3">
     However, there is no
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.640.1">
      &lt;head&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.641.1">
     section in that file, since Next.js will manage and inject that section behind the scenes.
    </span>
    <span class="koboSpan" id="kobo.641.2">
     In addition, Next.js will also insert JavaScript and CSS imports into the rendered HTML document.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.642.1">
     You may add more (nested)
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.643.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.644.1">
     files if you want to have nested layouts that only wrap some of your pages.
    </span>
    <span class="koboSpan" id="kobo.644.2">
     Such layouts are optional; the root layout (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.645.1">
      app/layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.646.1">
     ) is mandatory, however.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.647.1">
     With a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.648.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.649.1">
     file like the one shown in the previous code example, in a project that contains an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.650.1">
      app/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.651.1">
     file, and an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.652.1">
      app/events/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.653.1">
     file, website users could visit both pages and see a shared navigation.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.654.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_15_08.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.655.1">
     Figure 15.8: As the user navigates from/to /events, the shared header persists
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.656.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.657.1">
      Figure 15.8
     </span>
    </em>
    <span class="koboSpan" id="kobo.658.1">
     , the main content (defined by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.659.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.660.1">
     files) changes but the shared navigation (set up in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.661.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.662.1">
     ) persists.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.663.1">
     While sharing JSX markup is the
    </span>
    <a id="_idIndexMarker792">
    </a>
    <span class="koboSpan" id="kobo.664.1">
     most common use case for using layouts, you can also use them to share styles by importing a CSS file into a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.665.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.666.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.667.1">import</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.668.1">'./globals.css'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.669.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.670.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.671.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.672.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.673.1">RootLayout</span></span><span class="koboSpan" id="kobo.674.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.675.1">{ children }</span></span><span class="koboSpan" id="kobo.676.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.677.1">return</span></span><span class="koboSpan" id="kobo.678.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.679.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.680.1">html</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.681.1">lang</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.682.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.683.1">"en"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.684.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.685.1">      Unchanged JSX code…</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.686.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.687.1">html</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.688.1">&gt;</span></span><span class="koboSpan" id="kobo.689.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.690.1">
     In this and the above examples, the component function is named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.691.1">
      RootLayout
     </span>
    </code>
    <span class="koboSpan" id="kobo.692.1">
     —that name does not matter, but it must be a component that’s exported.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.693.1">
     Of course, layouts that are used to share a navigation bar become even more useful if you add working links to them…
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-306">
    <span class="koboSpan" id="kobo.694.1">
     Managing Internal Navigation
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.695.1">
     In the previous code example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.696.1">
      &lt;a&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.697.1">
     element was used for creating links between the different Next.js application pages.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.698.1">
     However, just like other React apps, Next.js
    </span>
    <a id="_idIndexMarker793">
    </a>
    <span class="koboSpan" id="kobo.699.1">
     applications become SPAs once the initial page load is done.
    </span>
    <span class="koboSpan" id="kobo.699.2">
     Therefore, creating internal links via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.700.1">
      &lt;a&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.701.1">
     tags is
    </span>
    <a id="_idIndexMarker794">
    </a>
    <span class="koboSpan" id="kobo.702.1">
     discouraged for the same reasons it was discouraged when using React Router in Vite-based React projects (compare
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.703.1">
      Chapter 13
     </span>
    </em>
    <span class="koboSpan" id="kobo.704.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.705.1">
      Multipage Apps with React Router
     </span>
    </em>
    <span class="koboSpan" id="kobo.706.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.707.1">
     Like React Router, Next.js (which takes care of routing in Next.js projects) provides a special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.708.1">
      Link
     </span>
    </code>
    <span class="koboSpan" id="kobo.709.1">
     component that you should use for internal links (instead of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.710.1">
      &lt;a&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.711.1">
     element):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.712.1">import</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.713.1">Link</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.714.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.715.1">'next/link'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.716.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.717.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.718.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.719.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.720.1">RootLayout</span></span><span class="koboSpan" id="kobo.721.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.722.1">{ children }</span></span><span class="koboSpan" id="kobo.723.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.724.1">return</span></span><span class="koboSpan" id="kobo.725.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.726.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.727.1">html</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.728.1">lang</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.729.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.730.1">"en"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.731.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.732.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.733.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.734.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.735.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.736.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.737.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.738.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.739.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.740.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.741.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.742.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.743.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.744.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.745.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.746.1">&gt;</span></span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.747.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.748.1">Link</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.749.1">href</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.750.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.751.1">"/"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.752.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.753.1">Home</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.754.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.755.1">Link</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.756.1">&gt;</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.757.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.758.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.759.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.760.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.761.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.762.1">&gt;</span></span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.763.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.764.1">Link</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.765.1">href</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.766.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.767.1">"/events"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.768.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.769.1">Events</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.770.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.771.1">Link</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.772.1">&gt;</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.773.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.774.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.775.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.776.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.777.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.778.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.779.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.780.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.781.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.782.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.783.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.784.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.785.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.786.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.787.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.788.1">{children}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.789.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.790.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.791.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.792.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.793.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.794.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.795.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.796.1">html</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.797.1">&gt;</span></span><span class="koboSpan" id="kobo.798.1">
  );
} 
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.799.1">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.800.1">
      &lt;Link&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.801.1">
     component accepts a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.802.1">
      href
     </span>
    </code>
    <span class="koboSpan" id="kobo.803.1">
     prop, which is set to the target path.
    </span>
    <span class="koboSpan" id="kobo.803.2">
     Internally, Next.js will capture link clicks and update the browser address bar and website UI accordingly by loading and rendering the required
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.804.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.805.1">
     components.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-307">
    <span class="koboSpan" id="kobo.806.1">
     Highlighting Active Links &amp; Using the “use client” Directive
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.807.1">
     If you want to
    </span>
    <a id="_idIndexMarker795">
    </a>
    <span class="koboSpan" id="kobo.808.1">
     style links differently when they lead to the
    </span>
    <a id="_idIndexMarker796">
    </a>
    <span class="koboSpan" id="kobo.809.1">
     currently active page, you won’t find a built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.810.1">
      NavLink
     </span>
    </code>
    <span class="koboSpan" id="kobo.811.1">
     component as is the case with React Router.
    </span>
    <span class="koboSpan" id="kobo.811.2">
     Instead, you must add
    </span>
    <a id="_idIndexMarker797">
    </a>
    <span class="koboSpan" id="kobo.812.1">
     your own logic by setting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.813.1">
      Link
     </span>
    </code>
    <span class="koboSpan" id="kobo.814.1">
     component’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.815.1">
      className
     </span>
    </code>
    <span class="koboSpan" id="kobo.816.1">
     prop dynamically
    </span>
    <a id="_idIndexMarker798">
    </a>
    <span class="koboSpan" id="kobo.817.1">
     based on the currently active path.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.818.1">
     To find out which path is currently active, you can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.819.1">
      usePathname()
     </span>
    </code>
    <span class="koboSpan" id="kobo.820.1">
     Hook provided by Next.js:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.821.1">import</span></span><span class="koboSpan" id="kobo.822.1"> { usePathname } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.823.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.824.1">'next/navigation'</span></span><span class="koboSpan" id="kobo.825.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.826.1">const</span></span><span class="koboSpan" id="kobo.827.1"> path = </span><span class="hljs-title"><span class="koboSpan" id="kobo.828.1">usePathname</span></span><span class="koboSpan" id="kobo.829.1">();
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.830.1">
     For example, you could adjust the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.831.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.832.1">
     file to look like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.833.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.834.1">Link</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.835.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.836.1">'next/link'</span></span><span class="koboSpan" id="kobo.837.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.838.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.839.1"> { usePathname } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.840.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.841.1">'next/navigation'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.842.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.843.1">import</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.844.1">'./globals.css'</span></span><span class="koboSpan" id="kobo.845.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.846.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.847.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.848.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.849.1">RootLayout</span></span><span class="koboSpan" id="kobo.850.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.851.1">{ children }</span></span><span class="koboSpan" id="kobo.852.1">) {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.853.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.854.1"> path = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.855.1">usePathname</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.856.1">();</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.857.1">return</span></span><span class="koboSpan" id="kobo.858.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.859.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.860.1">html</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.861.1">lang</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.862.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.863.1">"en"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.864.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.865.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.866.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.867.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.868.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.869.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.870.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.871.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.872.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.873.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.874.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.875.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.876.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.877.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.878.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.879.1">&gt;</span></span>
<span class="language-xml">                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.880.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.881.1">Link</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag">                  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.882.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.883.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.884.1">"/"</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag">                  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.885.1">className</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.886.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.887.1">{path</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.888.1"> === </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.889.1">'/'</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.890.1"> ? </span><span class="koboSpan" id="kobo.890.2">'</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.891.1">active</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.892.1">' </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.893.1">:</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.894.1"> ''}&gt;</span></strong></span>
<span class="language-xml"><span class="koboSpan" id="kobo.895.1">                  Home</span></span>
<span class="language-xml">                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.896.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.897.1">Link</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.898.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.899.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.900.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.901.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.902.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.903.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.904.1">&gt;</span></span>
<span class="language-xml">                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.905.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.906.1">Link</span></span>
<span class="hljs-tag">                  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.907.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.908.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.909.1">"/events"</span></span>
<span class="hljs-tag">                  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.910.1">className</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.911.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.912.1">{path.startsWith(</span></strong></span>
                    <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.913.1">'/</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.914.1">events</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.915.1">'</span></strong></span>
<span class="hljs-tag">                  </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.916.1">) ? </span><span class="koboSpan" id="kobo.916.2">'</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.917.1">active</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.918.1">' </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.919.1">:</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.920.1"> ''}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.921.1">                &gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.922.1">                  Events</span></span>
<span class="language-xml">                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.923.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.924.1">Link</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.925.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.926.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.927.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.928.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.929.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.930.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.931.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.932.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.933.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.934.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.935.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.936.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.937.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.938.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.939.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.940.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.941.1">{children}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.942.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.943.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.944.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.945.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.946.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.947.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.948.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.949.1">html</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.950.1">&gt;</span></span><span class="koboSpan" id="kobo.951.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.952.1">
     However, if you were to run this
    </span>
    <a id="_idIndexMarker799">
    </a>
    <span class="koboSpan" id="kobo.953.1">
     code, you’d get an error message:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.954.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_15_09.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.955.1">
     Figure 15.9: Next.js complains about the usage of a Hook in a Server Component
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.956.1">
     This error message sounds
    </span>
    <a id="_idIndexMarker800">
    </a>
    <span class="koboSpan" id="kobo.957.1">
     quite cryptic as it mentions a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.958.1">
      Client Component
     </span>
    </code>
    <span class="koboSpan" id="kobo.959.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.960.1">
      Server Components
     </span>
    </code>
    <span class="koboSpan" id="kobo.961.1">
     .
    </span>
    <span class="koboSpan" id="kobo.961.2">
     Both are crucial React concepts that will be explored in the next chapter (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.962.1">
      React Server Components &amp; Server Actions
     </span>
    </em>
    <span class="koboSpan" id="kobo.963.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.964.1">
     For the current chapter, it’s enough
    </span>
    <a id="_idIndexMarker801">
    </a>
    <span class="koboSpan" id="kobo.965.1">
     to know the fix for this problem, which
    </span>
    <a id="_idIndexMarker802">
    </a>
    <span class="koboSpan" id="kobo.966.1">
     is to add the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.967.1">
      "use client"
     </span>
    </code>
    <span class="koboSpan" id="kobo.968.1">
     directive at the top of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.969.1">
      app/layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.970.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.971.1">"use client"</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.972.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.973.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.974.1">Link</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.975.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.976.1">'next/link'</span></span><span class="koboSpan" id="kobo.977.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.978.1">import</span></span><span class="koboSpan" id="kobo.979.1"> { usePathname } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.980.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.981.1">'next/navigation'</span></span><span class="koboSpan" id="kobo.982.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.983.1">import</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.984.1">'./globals.css'</span></span><span class="koboSpan" id="kobo.985.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.986.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.987.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.988.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.989.1">RootLayout</span></span><span class="koboSpan" id="kobo.990.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.991.1">{ children }</span></span><span class="koboSpan" id="kobo.992.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.993.1">const</span></span><span class="koboSpan" id="kobo.994.1"> path = </span><span class="hljs-title"><span class="koboSpan" id="kobo.995.1">usePathname</span></span><span class="koboSpan" id="kobo.996.1">();
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.997.1">// return JSX code</span></span><span class="koboSpan" id="kobo.998.1">
}
</span></code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.999.1">
      "use client"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1000.1">
     is a so-called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1001.1">
      directive
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1002.1">
     , i.e., an instruction
    </span>
    <a id="_idIndexMarker803">
    </a>
    <span class="koboSpan" id="kobo.1003.1">
     that “tells” React and Next.js that this file must be handled in a special way.
    </span>
    <span class="koboSpan" id="kobo.1003.2">
     Adding it will get rid of the error message shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1004.1">
      Figure 15.9
     </span>
    </em>
    <span class="koboSpan" id="kobo.1005.1">
     , thus enabling path-aware
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1006.1">
      Link
     </span>
    </code>
    <span class="koboSpan" id="kobo.1007.1">
     styling.
    </span>
    <span class="koboSpan" id="kobo.1007.2">
     As mentioned, the concrete impact of this directive will be explored in the next chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1008.1">
     Whenever you plan to use a Hook in a component in a Next.js project, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1009.1">
      "use client"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1010.1">
     directive must be added—no matter if it’s a Hook provided by React or Next.js.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1011.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1012.1">
      You might wonder why
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1013.1">
       "use client"
      </span>
     </code>
     <span class="koboSpan" id="kobo.1014.1">
      is required for components that use Hooks.
     </span>
     <span class="koboSpan" id="kobo.1014.2">
      After all, this directive was not needed when using SSR in Vite-based projects.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1015.1">
      The reason is that Next.js technically doesn’t use SSR, as introduced at the beginning of this section.
     </span>
     <span class="koboSpan" id="kobo.1015.2">
      Instead, Next.js (when using the App Router) uses a React feature called React Server Components.
     </span>
     <span class="koboSpan" id="kobo.1015.3">
      This crucial feature will be explored in great detail in the next chapter.
     </span>
     <span class="koboSpan" id="kobo.1015.4">
      There, you’ll also learn why exactly
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1016.1">
       "use client"
      </span>
     </code>
     <span class="koboSpan" id="kobo.1017.1">
      is needed in some components.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-308">
    <span class="koboSpan" id="kobo.1018.1">
     Creating &amp; Using Regular Components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1019.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1020.1">
      Link
     </span>
    </code>
    <span class="koboSpan" id="kobo.1021.1">
     component mentioned in the previous sections is a component offered by Next.js.
    </span>
    <span class="koboSpan" id="kobo.1021.2">
     But, of course, you can also build your own components—it is still a React app after all.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1022.1">
     Besides the components that
    </span>
    <a id="_idIndexMarker804">
    </a>
    <span class="koboSpan" id="kobo.1023.1">
     are exposed as pages (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1024.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1025.1">
     ) or layouts (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1026.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1027.1">
     ), you can create and use component functions in any files (with any names) of your choice.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1028.1">
     For example, you can add a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1029.1">
      components/
     </span>
    </code>
    <span class="koboSpan" id="kobo.1030.1">
     folder next to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1031.1">
      app/
     </span>
    </code>
    <span class="koboSpan" id="kobo.1032.1">
     folder and add a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1033.1">
      MainNavigation.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1034.1">
     file in it.
    </span>
    <span class="koboSpan" id="kobo.1034.2">
     This file can then hold a new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1035.1">
      MainNavigation
     </span>
    </code>
    <span class="koboSpan" id="kobo.1036.1">
     component that returns the navigation-related JSX code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-string"><span class="koboSpan" id="kobo.1037.1">'use client'</span></span><span class="koboSpan" id="kobo.1038.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1039.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1040.1">Link</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1041.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1042.1">'next/link'</span></span><span class="koboSpan" id="kobo.1043.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1044.1">import</span></span><span class="koboSpan" id="kobo.1045.1"> { usePathname } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1046.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1047.1">'next/navigation'</span></span><span class="koboSpan" id="kobo.1048.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1049.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1050.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1051.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1052.1">MainNavigation</span></span><span class="koboSpan" id="kobo.1053.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1054.1">const</span></span><span class="koboSpan" id="kobo.1055.1"> path = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1056.1">usePathname</span></span><span class="koboSpan" id="kobo.1057.1">();
  
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1058.1">return</span></span><span class="koboSpan" id="kobo.1059.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1060.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1061.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1062.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1063.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1064.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1065.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1066.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1067.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1068.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1069.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1070.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1071.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1072.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1073.1">Link</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1074.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1075.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1076.1">"/"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1077.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1078.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1079.1">{path</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1080.1"> === </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1081.1">'/'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1082.1"> ? </span><span class="koboSpan" id="kobo.1082.2">'</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1083.1">active</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1084.1">' </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1085.1">:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1086.1"> ''}&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1087.1">              Home</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1088.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1089.1">Link</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1090.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1091.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1092.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1093.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1094.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1095.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1096.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1097.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1098.1">Link</span></span>
<span class="hljs-tag">              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1099.1">href</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1100.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1101.1">"/events"</span></span>
<span class="hljs-tag">              </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1102.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1103.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1104.1">{path</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1105.1"> === </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1106.1">'/events'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1107.1"> ? </span><span class="koboSpan" id="kobo.1107.2">'</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1108.1">active</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1109.1">' </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1110.1">:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1111.1"> ''}</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1112.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1113.1">              Events</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1114.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1115.1">Link</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1116.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1117.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1118.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1119.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1120.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1121.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1122.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1123.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1124.1">nav</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1125.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1126.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1127.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1128.1">&gt;</span></span><span class="koboSpan" id="kobo.1129.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1130.1">
     Please note that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1131.1">
      "use client"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1132.1">
     must be added at the top of this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1133.1">
      MainNavigation.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1134.1">
     file since the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1135.1">
      usePathname()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1136.1">
     Hook is used in the component function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1137.1">
     With the code moved into this newly added
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1138.1">
      MainNavigation
     </span>
    </code>
    <span class="koboSpan" id="kobo.1139.1">
     component, inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1140.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1141.1">
     file,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1142.1">
      "use client"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1143.1">
     can be removed since the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1144.1">
      usePathname()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1145.1">
     Hook is no longer used in that file.
    </span>
    <span class="koboSpan" id="kobo.1145.2">
     It’s used in a
    </span>
    <a id="_idIndexMarker805">
    </a>
    <span class="koboSpan" id="kobo.1146.1">
     child component (inside
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1147.1">
      &lt;MainNavigation/&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1148.1">
     ) but React does not care about this.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1149.1">
     Hence, the updated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1150.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1151.1">
     file looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1152.1">import</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1153.1">'./globals.css'</span></span><span class="koboSpan" id="kobo.1154.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1155.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1156.1">MainNavigation</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1157.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1158.1">'../components/MainNavigation'</span></span><span class="koboSpan" id="kobo.1159.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1160.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1161.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1162.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1163.1">RootLayout</span></span><span class="koboSpan" id="kobo.1164.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1165.1">{ children }</span></span><span class="koboSpan" id="kobo.1166.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1167.1">return</span></span><span class="koboSpan" id="kobo.1168.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1169.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1170.1">html</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1171.1">lang</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1172.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1173.1">"en"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1174.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1175.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1176.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1177.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1178.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1179.1">MainNavigation</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1180.1"> /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1181.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1182.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1183.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1184.1">{children}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1185.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1186.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1187.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1188.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1189.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1190.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1191.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1192.1">html</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1193.1">&gt;</span></span><span class="koboSpan" id="kobo.1194.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1195.1">
     Thanks to building, outsourcing, and using the custom
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1196.1">
      MainNavigation
     </span>
    </code>
    <span class="koboSpan" id="kobo.1197.1">
     component, the updated
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1198.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1199.1">
     file therefore contains a lean and concise component function again.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1200.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1201.1">
      With the exception of the route-related files, it is entirely up to you how you structure your Next.js project and how you name your files.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1202.1">
      As mentioned, you can store custom (non-page) components in a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1203.1">
       components/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1204.1">
      folder (or a folder with any other name of your choice) in any place of your choice.
     </span>
     <span class="koboSpan" id="kobo.1204.2">
      You can put that
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1205.1">
       components/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1206.1">
      folder into the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1207.1">
       app/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1208.1">
      folder or into the root project folder.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1209.1">
      You can also not use a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1210.1">
       components/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1211.1">
      folder at all, and instead store components in files that are located next to your
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1212.1">
       page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1213.1">
      files.
     </span>
     <span class="koboSpan" id="kobo.1213.2">
      Because if a file is not named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1214.1">
       page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1215.1">
      , it won’t be treated as a page—so there is no danger of accidentally creating routes you don’t want in your project.
     </span>
     <span class="koboSpan" id="kobo.1215.2">
      If you have an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1216.1">
       app/components/MainNavigation.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1217.1">
      but no
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1218.1">
       app/components/page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1219.1">
      file, there won’t be a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1220.1">
       /components
      </span>
     </code>
     <span class="koboSpan" id="kobo.1221.1">
      route.
     </span>
     <span class="koboSpan" id="kobo.1221.2">
      Files not named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1222.1">
       page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1223.1">
      (or one of the other reserved filenames—see the upcoming section
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1224.1">
       Other Filename Conventions
      </span>
     </em>
     <span class="koboSpan" id="kobo.1225.1">
      ) will simply be ignored by Next.js (for routing purposes).
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1226.1">
      You find more information and ideas
     </span>
     <a id="_idIndexMarker806">
     </a>
     <span class="koboSpan" id="kobo.1227.1">
      regarding Next.js project organization in the official documentation:
     </span>
     <a href="https://nextjs.org/docs/app/building-your-application/routing/colocation">
      <span class="url">
       <span class="koboSpan" id="kobo.1228.1">
        https://nextjs.org/docs/app/building-your-application/routing/colocation
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1229.1">
      .
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-309">
    <span class="koboSpan" id="kobo.1230.1">
     Handling Dynamic Routes
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1231.1">
     As you learned in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1232.1">
      Chapter 13
     </span>
    </em>
    <span class="koboSpan" id="kobo.1233.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1234.1">
      Multipage Apps with React Router
     </span>
    </em>
    <span class="koboSpan" id="kobo.1235.1">
     , in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1236.1">
      From Static to Dynamic Routes
     </span>
    </em>
    <span class="koboSpan" id="kobo.1237.1">
     section, many React apps
    </span>
    <a id="_idIndexMarker807">
    </a>
    <span class="koboSpan" id="kobo.1238.1">
     need to support dynamic routes, too.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1239.1">
     For example, you might want to allow your users to visit
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1240.1">
      /events/e1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1241.1">
     to view the details for an event with ID
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1242.1">
      e1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1243.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1244.1">
      /events/e2
     </span>
    </code>
    <span class="koboSpan" id="kobo.1245.1">
     for an event with ID
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1246.1">
      e2
     </span>
    </code>
    <span class="koboSpan" id="kobo.1247.1">
     (and so on).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1248.1">
     This is such a common requirement that Next.js, of course, supports it.
    </span>
    <span class="koboSpan" id="kobo.1248.2">
     You can add dynamic routes in a Next.js app by creating a folder (somewhere in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1249.1">
      app/
     </span>
    </code>
    <span class="koboSpan" id="kobo.1250.1">
     folder) that has its name wrapped by square brackets—for example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1251.1">
      app/events/[eventId]
     </span>
    </code>
    <span class="koboSpan" id="kobo.1252.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1252.2">
     Of course, you still need a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1253.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1254.1">
     file in that folder to actually create a route.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1255.1">
     The part between the square brackets (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1256.1">
      eventId
     </span>
    </code>
    <span class="koboSpan" id="kobo.1257.1">
     , in this example) is entirely up to you.
    </span>
    <span class="koboSpan" id="kobo.1257.2">
     But the square brackets tell Next.js that you’re setting up a dynamic route.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1258.1">
     The folder name between the square brackets acts as an identifier that can be used to retrieve the concrete value encoded in the URL (e.g., to retrieve
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1259.1">
      e1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1260.1">
     in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1261.1">
      /events/e1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1262.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1263.1">
     Every component that’s used as a page (or layout) receives a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1264.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.1265.1">
     prop that’s automatically set by Next.js.
    </span>
    <span class="koboSpan" id="kobo.1265.2">
     If it’s a page or layout in a dynamic route folder or in some nested child folder, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1266.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.1267.1">
     prop will hold a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1268.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.1269.1">
     which resolves to an object that contains the chosen identifiers (like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1270.1">
      eventId
     </span>
    </code>
    <span class="koboSpan" id="kobo.1271.1">
     ) as keys and the concrete URL path values (like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1272.1">
      e1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1273.1">
     ) as values for those keys.
    </span>
    <span class="koboSpan" id="kobo.1273.2">
     Since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1274.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.1275.1">
     holds a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1276.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.1277.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1278.1">
      await
     </span>
    </code>
    <span class="koboSpan" id="kobo.1279.1">
     must be used on it to get access to the underlying object.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1280.1">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1281.1">
      app/events/[eventId]/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1282.1">
     file would ensure that the component exported inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1283.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1284.1">
     file gets rendered for visits to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1285.1">
      /events/e1
     </span>
    </code>
    <span class="koboSpan" id="kobo.1286.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1287.1">
      /events/e2
     </span>
    </code>
    <span class="koboSpan" id="kobo.1288.1">
     , etc.
    </span>
    <span class="koboSpan" id="kobo.1288.2">
     This page component can then output event details with the help of the following code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1289.1">// getEventById is a custom dummy function to load event data</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1290.1">import</span></span><span class="koboSpan" id="kobo.1291.1"> { getEventById } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1292.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1293.1">'@/lib/events'</span></span><span class="koboSpan" id="kobo.1294.1">; 
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1295.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1296.1">default async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1297.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1298.1">EventDetailsPage</span></span><span class="koboSpan" id="kobo.1299.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1300.1">{ params }</span></strong></span><span class="koboSpan" id="kobo.1301.1">) {
  </span><span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1302.1">// params.eventId exists because of folder name =&gt; [eventId]</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1303.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1304.1"> { eventId } = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1305.1">await</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1306.1"> params; </span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1307.1">const</span></span><span class="koboSpan" id="kobo.1308.1"> event = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1309.1">getEventById</span></span><span class="koboSpan" id="kobo.1310.1">(eventId);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1311.1">return</span></span><span class="koboSpan" id="kobo.1312.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1313.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1314.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1315.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1316.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1317.1">"event-details"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1318.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1319.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1320.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1321.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1322.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1323.1">img</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1324.1">src</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1325.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1326.1">{</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1327.1">`/${</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1328.1">event.image</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1329.1">}`} </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1330.1">alt</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1331.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1332.1">{event.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1333.1"> /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1334.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1335.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1336.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1337.1">{event.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1338.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1339.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1340.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1341.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1342.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1343.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1344.1">          {event.location} | {event.date}</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1345.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1346.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1347.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1348.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1349.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1350.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1351.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1352.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1353.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1354.1">{event.description}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1355.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1356.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1357.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1358.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1359.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1360.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1361.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1362.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1363.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1364.1">Register</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1365.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1366.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1367.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1368.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1369.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1370.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1371.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1372.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1373.1">&gt;</span></span><span class="koboSpan" id="kobo.1374.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1375.1">
     In this example, the automatically
    </span>
    <a id="_idIndexMarker808">
    </a>
    <span class="koboSpan" id="kobo.1376.1">
     provided
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1377.1">
      params
     </span>
    </code>
    <span class="koboSpan" id="kobo.1378.1">
     prop is used to get access to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1379.1">
      eventId
     </span>
    </code>
    <span class="koboSpan" id="kobo.1380.1">
     encoded in the URL.
    </span>
    <span class="koboSpan" id="kobo.1380.2">
     If some other identifier than
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1381.1">
      eventId
     </span>
    </code>
    <span class="koboSpan" id="kobo.1382.1">
     would be used in the folder name, that alternative name would be used to access the path value (e.g., for
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1383.1">
      [id]/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1384.1">
     , you’d access (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1385.1">
      await
     </span>
    </code>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1386.1">
      params).id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1387.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1388.1">
     As a result, users can visit this dynamic route and explore the event details for a chosen event ID.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1389.1">
     <img alt="A screenshot of a computer screen  Description automatically generated" src="image/B31339_15_10.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1390.1">
     Figure 15.10: The event details are loaded and displayed for /events/e1
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1391.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1392.1">
      You can find the complete example code, including the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1393.1">
       lib/events.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1394.1">
      file, on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/08-nextjs-dynamic-routes">
      <span class="url">
       <span class="koboSpan" id="kobo.1395.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/examples/08-nextjs-dynamic-routes
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1396.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1397.1">
     Of course, when working
    </span>
    <a id="_idIndexMarker809">
    </a>
    <span class="koboSpan" id="kobo.1398.1">
     with dynamic routes, you typically also need links to those dynamic paths in some parts of your application.
    </span>
    <span class="koboSpan" id="kobo.1398.2">
     Therefore, in this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1399.1">
      app/events/page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1400.1">
     file contains code that dynamically renders a list of event items, where every item has a link to its detail page:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1401.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1402.1">Link</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1403.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1404.1">'next/link'</span></span><span class="koboSpan" id="kobo.1405.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1406.1">import</span></span><span class="koboSpan" id="kobo.1407.1"> { getEvents } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1408.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1409.1">'@/lib/events'</span></span><span class="koboSpan" id="kobo.1410.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1411.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1412.1">default</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1413.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1414.1">EventsPage</span></span><span class="koboSpan" id="kobo.1415.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1416.1">const</span></span><span class="koboSpan" id="kobo.1417.1"> events = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1418.1">getEvents</span></span><span class="koboSpan" id="kobo.1419.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1420.1">return</span></span><span class="koboSpan" id="kobo.1421.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1422.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1423.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1424.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1425.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1426.1">"events"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1427.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1428.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1429.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1430.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1431.1">Browse available events</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1432.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1433.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1434.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1435.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1436.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1437.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1438.1">        {events.map((event) =&gt; (</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1439.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1440.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1441.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1442.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1443.1">{event.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1444.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1445.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1446.1">img</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1447.1">src</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1448.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1449.1">{event.image}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1450.1">alt</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1451.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1452.1">{event.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1453.1"> /&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1454.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1455.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1456.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1457.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1458.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1459.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1460.1">{event.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1461.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1462.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1463.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1464.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1465.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1466.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1467.1">{event.description}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1468.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1469.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1470.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1471.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1472.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1473.1">&gt;</span></span>
<span class="language-xml">                </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1474.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1475.1">Link</span></span><span class="hljs-tag"> </span>
                  <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1476.1">href</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1477.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1478.1">{</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1479.1">`/</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1480.1">events</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1481.1">/${</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1482.1">event.id</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1483.1">}`</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1484.1">}&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1485.1">Explore Event</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1486.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1487.1">Link</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1488.1">&gt;</span></span>
<span class="language-xml">              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1489.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1490.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1491.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1492.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1493.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1494.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1495.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1496.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1497.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1498.1">        ))}</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1499.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1500.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1501.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1502.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1503.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1504.1">&gt;</span></span><span class="koboSpan" id="kobo.1505.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1506.1">
     Clicking these links will take users to
    </span>
    <a id="_idIndexMarker810">
    </a>
    <span class="koboSpan" id="kobo.1507.1">
     the event detail page for the specific event ID.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1508.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1509.1">
      Static routes, dynamic routes, and nested routes are the most important route types you need to know when working with Next.js.
     </span>
     <span class="koboSpan" id="kobo.1509.2">
      You’ll use them for most of your routes.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1510.1">
      In addition, Next.js also offers other (more advanced and niche) route types and features that are worth exploring if you decide to dive deeper into Next.js:
     </span>
     <a href="https://nextjs.org/docs/app/building-your-application/routing">
      <span class="url">
       <span class="koboSpan" id="kobo.1511.1">
        https://nextjs.org/docs/app/building-your-application/routing
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1512.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1513.1">
     Besides different route types that are enabled by using the proper folder names, Next.js also offers additional reserved filenames.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-310">
    <span class="koboSpan" id="kobo.1514.1">
     Other Filename Conventions
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1515.1">
     Next.js does not just offer a variety of route types and routing-related features—it also offers more reserved
    </span>
    <a id="_idIndexMarker811">
    </a>
    <span class="koboSpan" id="kobo.1516.1">
     filenames than just
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1517.1">
      page.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1518.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1519.1">
      layout.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1520.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1521.1">
     Therefore, when working with the Next.js App Router, you should also be aware that the following reserved filenames exist, too:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1522.1">
       loading.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1523.1">
      files can be added next to or above
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1524.1">
       page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1525.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1526.1">
       layout.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1527.1">
      files to define components that should be displayed whilst the page (or layout) component is fetching data.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1528.1">
       error.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1529.1">
      files can be added in the same places as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1530.1">
       loading.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1531.1">
      files to render error fallback components in case one of the sibling or child pages throws an error.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1532.1">
       not-found.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1533.1">
      files can be added to display fallback content in case a website visitor tries to load a non-existent route or resource.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1534.1">
       route.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1535.1">
      files can be added to set up routes that do not render components but instead return data (e.g., in the JSON format).
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1536.1">
     You can learn more about these file types and even more file name conventions in the official documentation:
    </span>
    <a href="https://nextjs.org/docs/app/building-your-application/routing#file-conventions">
     <span class="url">
      <span class="koboSpan" id="kobo.1537.1">
       https://nextjs.org/docs/app/building-your-application/routing#file-conventions
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1538.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1539.1">
     You’ll also see some of these file types in action in the next chapter.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-311">
    <span class="koboSpan" id="kobo.1540.1">
     Diving Deeper into Next.js
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1541.1">
     At this point, you have a
    </span>
    <a id="_idIndexMarker812">
    </a>
    <span class="koboSpan" id="kobo.1542.1">
     solid Next.js foundation but, as mentioned in the previous section, you can dive deeper into Next.js with the help of the official documentation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1543.1">
     There, besides learning more about routing, route types, and filenames, you can also explore how Next.js helps with caching, styling, or managing page metadata.
    </span>
    <span class="koboSpan" id="kobo.1543.2">
     Since this book is primarily about React itself, and not about Next.js, covering all these topics here would quickly bloat this book.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1544.1">
     That’s why this chapter focused on setting a solid React SSR and Next.js foundation.
    </span>
    <span class="koboSpan" id="kobo.1544.2">
     The essentials covered throughout this chapter will help with understanding more advanced React and Next.js features like React Server Components in the next chapter.
    </span>
    <span class="koboSpan" id="kobo.1544.3">
     In addition, thanks to these fundamentals, you’ll also be able to quickly learn more about Next.js with the help of the official documentation or dedicated Next.js books or courses.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-312">
    <span class="koboSpan" id="kobo.1545.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1546.1">
      By default, Vite-based React apps (like most React apps that don’t use Next.js or a similar framework) only support client-side rendering.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1547.1">
      Without SSR, a relatively empty
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1548.1">
       index.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1549.1">
      file is sent to the client.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1550.1">
      This can lead to bad user experiences (if users see an empty page for a prolonged period) or suboptimal search engine ranking.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1551.1">
      You can enable SSR by manually adjusting React projects (code and build process) to support component function execution on the server side.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1552.1">
      To avoid custom SSR setup work and take advantage of many other benefits, you can use frameworks like Next.js.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1553.1">
      Next.js projects come with built-in SSR support and can be created via the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1554.1">
       npx create-next-app
      </span>
     </code>
     <span class="koboSpan" id="kobo.1555.1">
      command.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1556.1">
      Modern Next.js uses the App Router approach, which takes advantage of an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1557.1">
       app/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1558.1">
      directory that is used for setting up routes with the help of the file system.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1559.1">
      Inside
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1560.1">
       app/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1561.1">
      , you define pages by creating folders that contain
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1562.1">
       page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1563.1">
      files (e.g.,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1564.1">
       app/about/page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1565.1">
      adds support for an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1566.1">
       /about
      </span>
     </code>
     <span class="koboSpan" id="kobo.1567.1">
      route).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1568.1">
      To share JSX code (and logic or styles) across pages, you can add
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1569.1">
       layout.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1570.1">
      files.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1571.1">
      Next.js also offers other reserved filenames to handle fallback content that’s shown while loading data or to handle errors.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1572.1">
      You can link between pages via Next.js’
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1573.1">
       Link
      </span>
     </code>
     <span class="koboSpan" id="kobo.1574.1">
      component.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1575.1">
      When using React Hooks (like
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1576.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1577.1">
      or Next.js’
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1578.1">
       useRouter()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1579.1">
      ), you must add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1580.1">
       "use client"
      </span>
     </code>
     <span class="koboSpan" id="kobo.1581.1">
      directive at the top of the file that uses the Hook.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1582.1">
      Besides static pages (like
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1583.1">
       app/events/page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1584.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1585.1">
       app/about/page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1586.1">
      ), you can also set up dynamic pages by enclosing a folder name with square brackets (e.g.,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1587.1">
       app/events/[eventId]/page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1588.1">
      ).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1589.1">
      Dynamic path parameter values can be extracted in the loaded page component by using the special
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1590.1">
       params
      </span>
     </code>
     <span class="koboSpan" id="kobo.1591.1">
      prop that’s set on the component by Next.js.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1592.1">
      Asynchronous operations can be problematic when using SSR—or, at least, they can’t be executed in components that are rendered on the server, hence forcing the client-side code to perform them.
     </span>
     <span class="koboSpan" id="kobo.1592.2">
      At least when not using React Server Components.
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-313">
    <span class="koboSpan" id="kobo.1593.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1594.1">
     At this point, you have learned a lot about SSR in React apps and about Next.js.
    </span>
    <span class="koboSpan" id="kobo.1594.2">
     You’re able to create Next.js projects, define routes, render page components, add navigation, and work with dynamic paths.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1595.1">
     You also learned that Next.js comes with built-in SSR.
    </span>
    <span class="koboSpan" id="kobo.1595.2">
     Thus, all React components (built-in and custom, page and non-page) are rendered on the server when a website visitor sends a request.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1596.1">
     Modern Next.js does not stop there, though—instead, unlike the custom SSR setup introduced at the beginning of this chapter, Next.js projects that use the App Router help with asynchronous data fetching on the server side by unlocking React’s
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1597.1">
      React Server Component
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1598.1">
     feature.
    </span>
    <span class="koboSpan" id="kobo.1598.2">
     It’s
    </span>
    <a id="_idIndexMarker813">
    </a>
    <span class="koboSpan" id="kobo.1599.1">
     that feature, and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1600.1">
      Server Actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1601.1">
     , that will be explored in great detail in the next chapter!
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-314">
    <span class="koboSpan" id="kobo.1602.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1603.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.1603.2">
     You can then compare your answers to examples that can be found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/15-ssr-next-intro/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.1604.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/15-ssr-next-intro/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1605.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1606.1">
      Which two main advantages can SSR offer?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1607.1">
      What are some potential disadvantages or weaknesses of SSR?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1608.1">
      How does Next.js help with SSR?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1609.1">
      How are routes configured in Next.js (when using the “App Router”)?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1610.1">
      What’s special about a page component in Next.js?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1611.1">
      What’s the purpose of layout components in Next.js?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1612.1">
      Where can you store non-page (and non-layout) React components in a Next.js project?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1613.1">
      When and where do you need to add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1614.1">
       "use client"
      </span>
     </code>
     <span class="koboSpan" id="kobo.1615.1">
      directive?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-315">
    <span class="koboSpan" id="kobo.1616.1">
     Apply What You Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1617.1">
     With all the newly gained knowledge about Next.js, it’s time to apply it to a real demo project—a demo application that will be rendered on the server.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1618.1">
     In the following section, you’ll find an activity that allows you to practice working with Next.js.
    </span>
    <span class="koboSpan" id="kobo.1618.2">
     As always, you will also need to employ some of the concepts covered in earlier chapters.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-316">
    <span class="koboSpan" id="kobo.1619.1">
     Activity 15.1: Migrating a Vite-Based React Router App
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1620.1">
     In this activity, your job is to
    </span>
    <a id="_idIndexMarker814">
    </a>
    <span class="koboSpan" id="kobo.1621.1">
     build upon the Vite-based app from
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1622.1">
      Activity 13.1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1623.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1623.2">
     That app was built with Vite and React Router.
    </span>
    <span class="koboSpan" id="kobo.1623.3">
     Your job is to migrate it from Vite and React Router to Next.js.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1624.1">
     Therefore, you should create a new Next.js project (using the App Router) and rebuild the same app in that project.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1625.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1626.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/activities/practice-1-start">
      <span class="url">
       <span class="koboSpan" id="kobo.1627.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/activities/practice-1-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1628.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1628.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.1628.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1629.1">
       activities/practice-1-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.1630.1">
      , in this case) to use the right code snapshot.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1631.1">
      Since your task is to migrate the project that was built in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1632.1">
       Activity 13.1
      </span>
     </em>
     <span class="koboSpan" id="kobo.1633.1">
      , you might also want to use the finished code from that activity.
     </span>
     <span class="koboSpan" id="kobo.1633.2">
      You can find it here:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/13-routing/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.1634.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/13-routing/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1635.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1636.1">
     After downloading the code and running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1637.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.1638.1">
     in the project folder to install all required dependencies, the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1639.1">
      If you created a new Next.js project (i.e., if you’re not using the provided starting snapshot), clean up the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1640.1">
       layout.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1641.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1642.1">
       page.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1643.1">
      files to remove everything but the component functions.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1644.1">
      Create two new routes: a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1645.1">
       /products
      </span>
     </code>
     <span class="koboSpan" id="kobo.1646.1">
      route and a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1647.1">
       /products/&lt;some-id&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1648.1">
      route.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1649.1">
      Migrate the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1650.1">
       data.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1651.1">
      file into the Next.js project (e.g., into a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1652.1">
       lib/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1653.1">
      folder in the root project folder).
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1654.1">
      Update the page components to load and display the data provided by the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1655.1">
       data.js
      </span>
     </code>
     <span class="koboSpan" id="kobo.1656.1">
      file.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1657.1">
      Create a new
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1658.1">
       components/
      </span>
     </code>
     <span class="koboSpan" id="kobo.1659.1">
      folder and migrate (copy) the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1660.1">
       MainNavigation
      </span>
     </code>
     <span class="koboSpan" id="kobo.1661.1">
      component into this folder.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1662.1">
      Update the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1663.1">
       MainNavigation
      </span>
     </code>
     <span class="koboSpan" id="kobo.1664.1">
      component (and any other component that needs it) to use Next.js’
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1665.1">
       Link
      </span>
     </code>
     <span class="koboSpan" id="kobo.1666.1">
      component.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1667.1">
      Highlight active links with the help of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1668.1">
       usePathname()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1669.1">
      Hook—don’t forget about the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1670.1">
       "use client"
      </span>
     </code>
     <span class="koboSpan" id="kobo.1671.1">
      directive!
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1672.1">
      Migrate the styles from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1673.1">
       index.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1674.1">
      file into the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1675.1">
       globals.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1676.1">
      file.
     </span>
     <span class="koboSpan" id="kobo.1676.2">
      Make sure that the file gets imported into the root layout file.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1677.1">
     The expected result
    </span>
    <a id="_idIndexMarker815">
    </a>
    <span class="koboSpan" id="kobo.1678.1">
     should look as shown in the following screenshots:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1679.1">
     <img alt="img" src="image/B31339_15_11.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1680.1">
     Figure 15.11: The home page content
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1681.1">
     <img alt="img" src="image/B31339_15_12.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1682.1">
     Figure 15.12: The /products page content
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1683.1">
     <img alt="img" src="image/B31339_15_13.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1684.1">
     Figure 15.13: The /products/&lt;some-id&gt; page content
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1685.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1686.1">
      You will find the full
     </span>
     <a id="_idIndexMarker816">
     </a>
     <span class="koboSpan" id="kobo.1687.1">
      code for this activity, and an example solution, here:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.1688.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/15-ssr-next-intro/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1689.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>