<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer141">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     5
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-107">
    <span class="koboSpan" id="kobo.2.1">
     Managing Complex Tasks with Services
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     We have reached a point in our journey where we can successfully develop more complex applications by nesting components within other components in a sort of component tree.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     However, bundling all our business logic into a single component is not the way to go.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     Our application might become unmaintainable very soon as it develops.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.4.1">
     In this chapter, we’ll investigate the advantages that Angular’s dependency management mechanism can bring to the table to overcome such problems.
    </span>
    <span class="koboSpan" id="kobo.4.2">
     We will learn how
    </span>
    <a id="_idIndexMarker300">
    </a>
    <span class="koboSpan" id="kobo.5.1">
     to use the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.6.1">
      Angular Dependency Injection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.8.1">
      DI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.9.1">
     ) mechanism to declare and consume our dependencies across the application with minimum effort and optimal results.
    </span>
    <span class="koboSpan" id="kobo.9.2">
     By the end of this chapter, you will be able to
    </span>
    <a id="_idIndexMarker301">
    </a>
    <span class="koboSpan" id="kobo.10.1">
     create an Angular application that is correctly structured to enforce the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.11.1">
      Separation of Concerns
     </span>
    </strong>
    <span class="koboSpan" id="kobo.12.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.13.1">
      SoC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.14.1">
     ) pattern using services.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.15.1">
     We will cover the following concepts relating to Angular services:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.16.1">
      Introducing Angular DI
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.17.1">
      Creating our first Angular service
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.18.1">
      Providing dependencies across the application
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.19.1">
      Injecting services in the component tree
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.20.1">
      Overriding providers in the injector hierarchy
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-108">
    <span class="koboSpan" id="kobo.21.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     The chapter contains various code samples to walk you through the concept of Angular services.
    </span>
    <span class="koboSpan" id="kobo.22.2">
     You can find the related source code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.23.1">
      ch05
     </span>
    </code>
    <span class="koboSpan" id="kobo.24.1">
     folder of the following GitHub repository:
    </span>
   </p>
   <p class="normal">
    <a href="https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition ">
     <span class="url">
      <span class="koboSpan" id="kobo.25.1">
       https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition
      </span>
     </span>
    </a>
   </p>
   <h1 class="heading-1" id="_idParaDest-109">
    <span class="koboSpan" id="kobo.26.1">
     Introducing Angular DI
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.27.1">
     DI is an application design pattern we also come across in other languages, such as C# and Java.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     As our applications grow and evolve, each code entity will internally require instances of
    </span>
    <a id="_idIndexMarker302">
    </a>
    <span class="koboSpan" id="kobo.28.1">
     other objects, better known as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.29.1">
      dependencies
     </span>
    </strong>
    <span class="koboSpan" id="kobo.30.1">
     .
    </span>
    <span class="koboSpan" id="kobo.30.2">
     Passing such dependencies to
    </span>
    <a id="_idIndexMarker303">
    </a>
    <span class="koboSpan" id="kobo.31.1">
     the consumer code entity is known as an
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.32.1">
      injection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.33.1">
     , and it also
    </span>
    <a id="_idIndexMarker304">
    </a>
    <span class="koboSpan" id="kobo.34.1">
     entails the participation
    </span>
    <a id="_idIndexMarker305">
    </a>
    <span class="koboSpan" id="kobo.35.1">
     of another code entity called an
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.36.1">
      injector
     </span>
    </strong>
    <span class="koboSpan" id="kobo.37.1">
     .
    </span>
    <span class="koboSpan" id="kobo.37.2">
     An injector is responsible for instantiating and bootstrapping the required dependencies to be ready for use when injected into a consumer.
    </span>
    <span class="koboSpan" id="kobo.37.3">
     The consumer knows nothing about how to instantiate its dependencies and is only aware of the interface they implement to use them.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.38.1">
     Angular includes a top-notch DI mechanism to expose required dependencies to any Angular artifact of an Angular application.
    </span>
    <span class="koboSpan" id="kobo.38.2">
     Before delving deeper into this subject, let’s look at the problem that DI in Angular is trying to address.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.39.1">
     In
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.40.1">
      Chapter 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.41.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.42.1">
      Structuring User Interfaces with Components
     </span>
    </em>
    <span class="koboSpan" id="kobo.43.1">
     , we learned how to display a list of objects using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.44.1">
      @for
     </span>
    </code>
    <span class="koboSpan" id="kobo.45.1">
     block.
    </span>
    <span class="koboSpan" id="kobo.45.2">
     We used a static list of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.46.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.47.1">
     objects that were declared in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.48.1">
      product-list.component.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.49.1">
     file, as shown here:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.50.1">products</span></span><span class="koboSpan" id="kobo.51.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.52.1">Product</span></span><span class="koboSpan" id="kobo.53.1">[] = [
  { 
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.54.1">id</span></span><span class="koboSpan" id="kobo.55.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.56.1">1</span></span><span class="koboSpan" id="kobo.57.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.58.1">title</span></span><span class="koboSpan" id="kobo.59.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.60.1">'Keyboard'</span></span><span class="koboSpan" id="kobo.61.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.62.1">price</span></span><span class="koboSpan" id="kobo.63.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.64.1">100</span></span><span class="koboSpan" id="kobo.65.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.66.1">categories</span></span><span class="koboSpan" id="kobo.67.1">: {
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.68.1">1</span></span><span class="koboSpan" id="kobo.69.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.70.1">'Computing'</span></span><span class="koboSpan" id="kobo.71.1">,
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.72.1">2</span></span><span class="koboSpan" id="kobo.73.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.74.1">'Peripherals'</span></span><span class="koboSpan" id="kobo.75.1">
    }
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.76.1">id</span></span><span class="koboSpan" id="kobo.77.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.78.1">2</span></span><span class="koboSpan" id="kobo.79.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.80.1">title</span></span><span class="koboSpan" id="kobo.81.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.82.1">'Microphone'</span></span><span class="koboSpan" id="kobo.83.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.84.1">price</span></span><span class="koboSpan" id="kobo.85.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.86.1">35</span></span><span class="koboSpan" id="kobo.87.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.88.1">categories</span></span><span class="koboSpan" id="kobo.89.1">: { </span><span class="hljs-number"><span class="koboSpan" id="kobo.90.1">3</span></span><span class="koboSpan" id="kobo.91.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.92.1">'Multimedia'</span></span><span class="koboSpan" id="kobo.93.1"> }
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.94.1">id</span></span><span class="koboSpan" id="kobo.95.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.96.1">3</span></span><span class="koboSpan" id="kobo.97.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.98.1">title</span></span><span class="koboSpan" id="kobo.99.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.100.1">'Web camera'</span></span><span class="koboSpan" id="kobo.101.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.102.1">price</span></span><span class="koboSpan" id="kobo.103.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.104.1">79</span></span><span class="koboSpan" id="kobo.105.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.106.1">categories</span></span><span class="koboSpan" id="kobo.107.1">: {
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.108.1">1</span></span><span class="koboSpan" id="kobo.109.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.110.1">'Computing'</span></span><span class="koboSpan" id="kobo.111.1">,
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.112.1">3</span></span><span class="koboSpan" id="kobo.113.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.114.1">'Multimedia'</span></span><span class="koboSpan" id="kobo.115.1">
    }
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.116.1">id</span></span><span class="koboSpan" id="kobo.117.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.118.1">4</span></span><span class="koboSpan" id="kobo.119.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.120.1">title</span></span><span class="koboSpan" id="kobo.121.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.122.1">'Tablet'</span></span><span class="koboSpan" id="kobo.123.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.124.1">price</span></span><span class="koboSpan" id="kobo.125.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.126.1">500</span></span><span class="koboSpan" id="kobo.127.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.128.1">categories</span></span><span class="koboSpan" id="kobo.129.1">: { </span><span class="hljs-number"><span class="koboSpan" id="kobo.130.1">4</span></span><span class="koboSpan" id="kobo.131.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.132.1">'Entertainment'</span></span><span class="koboSpan" id="kobo.133.1"> }
  }
];
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.134.1">
     This previous
    </span>
    <a id="_idIndexMarker306">
    </a>
    <span class="koboSpan" id="kobo.135.1">
     approach has two main drawbacks:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.136.1">
      In real-world applications, we rarely work with static data.
     </span>
     <span class="koboSpan" id="kobo.136.2">
      It usually comes from a backend API or some other external source.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.137.1">
      The product list is tightly coupled with the component.
     </span>
     <span class="koboSpan" id="kobo.137.2">
      Angular components are responsible for the presentation logic and should not be concerned with how to get data.
     </span>
     <span class="koboSpan" id="kobo.137.3">
      They only need to display it in the HTML template.
     </span>
     <span class="koboSpan" id="kobo.137.4">
      Thus, they should delegate business logic to services to handle such tasks.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.138.1">
     In the following section, we’ll learn how to avoid these obstacles using Angular services.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.139.1">
      You will need the source code of the Angular application we created in
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.140.1">
       Chapter 4
      </span>
     </em>
     <span class="koboSpan" id="kobo.141.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.142.1">
       Enriching Applications Using Pipes and Directives
      </span>
     </em>
     <span class="koboSpan" id="kobo.143.1">
      , to follow along with the rest of the chapter.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.144.1">
     We will create an Angular service that will return the product list.
    </span>
    <span class="koboSpan" id="kobo.144.2">
     Thus, we will effectively delegate business logic tasks away from the component.
    </span>
    <span class="koboSpan" id="kobo.144.3">
     Remember:
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.145.1">
      the component should only be concerned with presentation logic
     </span>
    </em>
    <span class="koboSpan" id="kobo.146.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-110">
    <span class="koboSpan" id="kobo.147.1">
     Creating our first Angular service
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.148.1">
     To create a new Angular service, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.149.1">
      ng generate
     </span>
    </code>
    <span class="koboSpan" id="kobo.150.1">
     command of the Angular CLI while passing
    </span>
    <a id="_idIndexMarker307">
    </a>
    <span class="koboSpan" id="kobo.151.1">
     the name of the service as a parameter:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.152.1">ng generate service products 
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.153.1">
     Running the preceding command will create the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.154.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.155.1">
     service, which consists of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.156.1">
      products.service.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.157.1">
     file and its accompanying unit test file,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.158.1">
      products.service.spec.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.159.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.160.1">
     We usually name a service after the functionality that it represents.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     Every service has a business context or domain within which it operates.
    </span>
    <span class="koboSpan" id="kobo.160.3">
     When it starts to cross boundaries between different contexts, this is an indication that you should break it into different services.
    </span>
    <span class="koboSpan" id="kobo.160.4">
     A products service should be concerned with products.
    </span>
    <span class="koboSpan" id="kobo.160.5">
     Similarly, orders should be managed by a separate orders service.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.161.1">
     An Angular service is a TypeScript class marked with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.162.1">
      @Injectable
     </span>
    </code>
    <span class="koboSpan" id="kobo.163.1">
     decorator.
    </span>
    <span class="koboSpan" id="kobo.163.2">
     The decorator identifies the class as an Angular service that can be injected into other Angular artifacts such as components, directives, or even other services.
    </span>
    <span class="koboSpan" id="kobo.163.3">
     It accepts an object as a parameter with a single property named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.164.1">
      providedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.165.1">
     , which defines which injector provides the service.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.166.1">
     An Angular service, by default, is registered with an injector – the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.167.1">
      root
     </span>
    </code>
    <span class="koboSpan" id="kobo.168.1">
     injector of the Angular application, as defined in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.169.1">
      products.service.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.170.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.171.1">import</span></span><span class="koboSpan" id="kobo.172.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.173.1">Injectable</span></span><span class="koboSpan" id="kobo.174.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.175.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.176.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.177.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.178.1">@Injectable</span></span><span class="koboSpan" id="kobo.179.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.180.1">providedIn</span></span><span class="koboSpan" id="kobo.181.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.182.1">'root'</span></span><span class="koboSpan" id="kobo.183.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.184.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.185.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.186.1">ProductsService</span></span><span class="koboSpan" id="kobo.187.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.188.1">constructor</span></span><span class="koboSpan" id="kobo.189.1">() { }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.190.1">
     Our service does not contain any implementation.
    </span>
    <span class="koboSpan" id="kobo.190.2">
     Let’s add some logic so that our component can use it:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.191.1">
      Add the following statement to import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.192.1">
       Product
      </span>
     </code>
     <span class="koboSpan" id="kobo.193.1">
      interface:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.194.1">import</span></span><span class="koboSpan" id="kobo.195.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.196.1">Product</span></span><span class="koboSpan" id="kobo.197.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.198.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.199.1">'./product'</span></span><span class="koboSpan" id="kobo.200.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.201.1">
      Create the
     </span>
     <a id="_idIndexMarker308">
     </a>
     <span class="koboSpan" id="kobo.202.1">
      following method in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.203.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.204.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.205.1">getProducts</span></span><span class="koboSpan" id="kobo.206.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.207.1">Product</span></span><span class="koboSpan" id="kobo.208.1">[] {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.209.1">return</span></span><span class="koboSpan" id="kobo.210.1"> [
    { 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.211.1">id</span></span><span class="koboSpan" id="kobo.212.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.213.1">1</span></span><span class="koboSpan" id="kobo.214.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.215.1">title</span></span><span class="koboSpan" id="kobo.216.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.217.1">'Keyboard'</span></span><span class="koboSpan" id="kobo.218.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.219.1">price</span></span><span class="koboSpan" id="kobo.220.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.221.1">100</span></span><span class="koboSpan" id="kobo.222.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.223.1">categories</span></span><span class="koboSpan" id="kobo.224.1">: {
        </span><span class="hljs-number"><span class="koboSpan" id="kobo.225.1">1</span></span><span class="koboSpan" id="kobo.226.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.227.1">'Computing'</span></span><span class="koboSpan" id="kobo.228.1">,
        </span><span class="hljs-number"><span class="koboSpan" id="kobo.229.1">2</span></span><span class="koboSpan" id="kobo.230.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.231.1">'Peripherals'</span></span><span class="koboSpan" id="kobo.232.1">
      }
    },
    {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.233.1">id</span></span><span class="koboSpan" id="kobo.234.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.235.1">2</span></span><span class="koboSpan" id="kobo.236.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.237.1">title</span></span><span class="koboSpan" id="kobo.238.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.239.1">'Microphone'</span></span><span class="koboSpan" id="kobo.240.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.241.1">price</span></span><span class="koboSpan" id="kobo.242.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.243.1">35</span></span><span class="koboSpan" id="kobo.244.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.245.1">categories</span></span><span class="koboSpan" id="kobo.246.1">: { </span><span class="hljs-number"><span class="koboSpan" id="kobo.247.1">3</span></span><span class="koboSpan" id="kobo.248.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.249.1">'Multimedia'</span></span><span class="koboSpan" id="kobo.250.1"> }
    },
    {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.251.1">id</span></span><span class="koboSpan" id="kobo.252.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.253.1">3</span></span><span class="koboSpan" id="kobo.254.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.255.1">title</span></span><span class="koboSpan" id="kobo.256.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.257.1">'Web camera'</span></span><span class="koboSpan" id="kobo.258.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.259.1">price</span></span><span class="koboSpan" id="kobo.260.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.261.1">79</span></span><span class="koboSpan" id="kobo.262.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.263.1">categories</span></span><span class="koboSpan" id="kobo.264.1">: {
        </span><span class="hljs-number"><span class="koboSpan" id="kobo.265.1">1</span></span><span class="koboSpan" id="kobo.266.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.267.1">'Computing'</span></span><span class="koboSpan" id="kobo.268.1">,
        </span><span class="hljs-number"><span class="koboSpan" id="kobo.269.1">3</span></span><span class="koboSpan" id="kobo.270.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.271.1">'Multimedia'</span></span><span class="koboSpan" id="kobo.272.1">
      }
    },
    {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.273.1">id</span></span><span class="koboSpan" id="kobo.274.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.275.1">4</span></span><span class="koboSpan" id="kobo.276.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.277.1">title</span></span><span class="koboSpan" id="kobo.278.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.279.1">'Tablet'</span></span><span class="koboSpan" id="kobo.280.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.281.1">price</span></span><span class="koboSpan" id="kobo.282.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.283.1">500</span></span><span class="koboSpan" id="kobo.284.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.285.1">categories</span></span><span class="koboSpan" id="kobo.286.1">: { </span><span class="hljs-number"><span class="koboSpan" id="kobo.287.1">4</span></span><span class="koboSpan" id="kobo.288.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.289.1">'Entertainment'</span></span><span class="koboSpan" id="kobo.290.1"> }
    }
  ];
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.291.1">
     In the following sections, we will learn how to use the service in our application.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-111">
    <span class="koboSpan" id="kobo.292.1">
     Injecting services in the constructor
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.293.1">
     The most
    </span>
    <a id="_idIndexMarker309">
    </a>
    <span class="koboSpan" id="kobo.294.1">
     common way to use a service in an Angular component is through its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.295.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.296.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.297.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.298.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.299.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.300.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.301.1">
      property so that it is initialized to an empty array:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.302.1">products</span></span><span class="koboSpan" id="kobo.303.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.304.1">Product</span></span><span class="koboSpan" id="kobo.305.1">[] = [];
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.306.1">
      Add the following statement to import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.307.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.308.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.309.1">import</span></span><span class="koboSpan" id="kobo.310.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.311.1">ProductsService</span></span><span class="koboSpan" id="kobo.312.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.313.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.314.1">'../products.service'</span></span><span class="koboSpan" id="kobo.315.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.316.1">
      Create a component property called
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.317.1">
       productService
      </span>
     </code>
     <span class="koboSpan" id="kobo.318.1">
      and give it a type of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.319.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.320.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.321.1">private</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.322.1">productService</span></span><span class="koboSpan" id="kobo.323.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.324.1">ProductsService</span></span><span class="koboSpan" id="kobo.325.1">; 
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.326.1">
      Instantiate
     </span>
     <a id="_idIndexMarker310">
     </a>
     <span class="koboSpan" id="kobo.327.1">
      the property using the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.328.1">
       new
      </span>
     </code>
     <span class="koboSpan" id="kobo.329.1">
      keyword in the component’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.330.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.331.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.332.1">constructor</span></span><span class="koboSpan" id="kobo.333.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.334.1">this</span></span><span class="koboSpan" id="kobo.335.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.336.1">productService</span></span><span class="koboSpan" id="kobo.337.1"> = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.338.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.339.1">ProductsService</span></span><span class="koboSpan" id="kobo.340.1">();
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.341.1">
      Import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.342.1">
       OnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.343.1">
      interface from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.344.1">
       @angular/core
      </span>
     </code>
     <span class="koboSpan" id="kobo.345.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.346.1">import</span></span><span class="koboSpan" id="kobo.347.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.348.1">Component</span></span><span class="koboSpan" id="kobo.349.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.350.1">OnInit</span></span><span class="koboSpan" id="kobo.351.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.352.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.353.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.354.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.355.1">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.356.1">
       OnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.357.1">
      interface to the list of implemented interfaces of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.358.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.359.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.360.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.361.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.362.1">ProductListComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.363.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.364.1">OnInit</span></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.365.1">
      Add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.366.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.367.1">
      method that calls the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.368.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.369.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.370.1">
       productService
      </span>
     </code>
     <span class="koboSpan" id="kobo.371.1">
      property and assigns the returned value to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.372.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.373.1">
      property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.374.1">ngOnInit</span></span><span class="koboSpan" id="kobo.375.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.376.1">void</span></span><span class="koboSpan" id="kobo.377.1"> {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.378.1">this</span></span><span class="koboSpan" id="kobo.379.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.380.1">products</span></span><span class="koboSpan" id="kobo.381.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.382.1">this</span></span><span class="koboSpan" id="kobo.383.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.384.1">productService</span></span><span class="koboSpan" id="kobo.385.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.386.1">getProducts</span></span><span class="koboSpan" id="kobo.387.1">();
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.388.1">
     Run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.389.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.390.1">
     command to verify that the list of products is still shown correctly on the page:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.391.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, σχεδίαση  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_05_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.392.1">
     Figure 5.1: Product list
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.393.1">
     Awesome!
    </span>
    <span class="koboSpan" id="kobo.393.2">
     We have successfully wired up our component with the service, and our application looks great.
    </span>
    <span class="koboSpan" id="kobo.393.3">
     Well, this seems to be the case, but it’s actually not.
    </span>
    <span class="koboSpan" id="kobo.393.4">
     There are some problems with the actual implementation.
    </span>
    <span class="koboSpan" id="kobo.393.5">
     If the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.394.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.395.1">
     class must change, maybe to accommodate another dependency,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.396.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.397.1">
     should also change the implementation of its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.398.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.399.1">
     .
    </span>
    <span class="koboSpan" id="kobo.399.2">
     Thus, it is evident that the product list component is tightly coupled to the implementation of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.400.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.401.1">
     .
    </span>
    <span class="koboSpan" id="kobo.401.2">
     It prevents us from altering, overriding, or neatly testing the service if required.
    </span>
    <span class="koboSpan" id="kobo.401.3">
     It also entails that a new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.402.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.403.1">
     object is created every time we render a product list component, which might
    </span>
    <a id="_idIndexMarker311">
    </a>
    <span class="koboSpan" id="kobo.404.1">
     not be desired in specific scenarios, such as when we expect to use an actual singleton service.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.405.1">
     DI systems try to solve these issues by proposing several patterns, and the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.406.1">
      constructor injection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.407.1">
     pattern is
    </span>
    <a id="_idIndexMarker312">
    </a>
    <span class="koboSpan" id="kobo.408.1">
     the one enforced by Angular.
    </span>
    <span class="koboSpan" id="kobo.408.2">
     We could remove the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.409.1">
      productService
     </span>
    </code>
    <span class="koboSpan" id="kobo.410.1">
     component property and inject the service directly into the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.411.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.412.1">
     .
    </span>
    <span class="koboSpan" id="kobo.412.2">
     The resulting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.413.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.414.1">
     class would be the following:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.415.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.416.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.417.1">ProductListComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.418.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.419.1">OnInit</span></span><span class="koboSpan" id="kobo.420.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.421.1">products</span></span><span class="koboSpan" id="kobo.422.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.423.1">Product</span></span><span class="koboSpan" id="kobo.424.1">[] = [];  
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.425.1">selectedProduct</span></span><span class="koboSpan" id="kobo.426.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.427.1">Product</span></span><span class="koboSpan" id="kobo.428.1"> | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.429.1">undefined</span></span><span class="koboSpan" id="kobo.430.1">;
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.431.1">constructor</span></span><span class="koboSpan" id="kobo.432.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.433.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.434.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.435.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.436.1">ProductsService</span></span><span class="koboSpan" id="kobo.437.1">) {}
  
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.438.1">onAdded</span></span><span class="koboSpan" id="kobo.439.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.440.1">alert</span></span><span class="koboSpan" id="kobo.441.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.442.1">`</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.443.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.444.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.445.1">.selectedProduct?.title}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.446.1"> added to the cart!`</span></span><span class="koboSpan" id="kobo.447.1">);
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.448.1">ngOnInit</span></span><span class="koboSpan" id="kobo.449.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.450.1">void</span></span><span class="koboSpan" id="kobo.451.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.452.1">this</span></span><span class="koboSpan" id="kobo.453.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.454.1">products</span></span><span class="koboSpan" id="kobo.455.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.456.1">this</span></span><span class="koboSpan" id="kobo.457.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.458.1">productService</span></span><span class="koboSpan" id="kobo.459.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.460.1">getProducts</span></span><span class="koboSpan" id="kobo.461.1">();
  }
}
</span></code></pre>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.462.1">
      Consider declaring injected services as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.463.1">
       readonly
      </span>
     </code>
     <span class="koboSpan" id="kobo.464.1">
      to provide more stable code and prevent re-assignment of the service.
     </span>
     <span class="koboSpan" id="kobo.464.2">
      In the preceding snippet, the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.465.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.466.1">
      could be re-written as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.467.1">
       constructor(private readonly productService: ProductsService) {}
      </span>
     </code>
     <span class="koboSpan" id="kobo.468.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.469.1">
     The component does not need to know how to instantiate the service.
    </span>
    <span class="koboSpan" id="kobo.469.2">
     On the other hand, it expects such a dependency to be available before it is instantiated so that it can be injected
    </span>
    <a id="_idIndexMarker313">
    </a>
    <span class="koboSpan" id="kobo.470.1">
     through its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.471.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.472.1">
     .
    </span>
    <span class="koboSpan" id="kobo.472.2">
     This approach is easier to test as it allows us to override it or mock it up.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.473.1">
     However, using a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.474.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.475.1">
     is not the only way to inject services in an Angular application, as we will learn in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-112">
    <span class="koboSpan" id="kobo.476.1">
     The inject keyword
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.477.1">
     The Angular framework contains a built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.478.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.479.1">
     method that we can use to inject services
    </span>
    <a id="_idIndexMarker314">
    </a>
    <span class="koboSpan" id="kobo.480.1">
     without using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.481.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.482.1">
     .
    </span>
    <span class="koboSpan" id="kobo.482.2">
     There are some cases where we would like to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.483.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.484.1">
     method:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.485.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.486.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.487.1">
      contains many injected services, making our code unreadable.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.488.1">
      Constructors cannot be used when working with pure functions in the Angular router or the HTTP client, as we will learn in the following chapters.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.489.1">
     Let’s see how we could refactor the product list component to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.490.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.491.1">
     method:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.492.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.493.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.494.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.495.1">
       inject
      </span>
     </code>
     <span class="koboSpan" id="kobo.496.1">
      method from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.497.1">
       @angular/core
      </span>
     </code>
     <span class="koboSpan" id="kobo.498.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.499.1">import</span></span><span class="koboSpan" id="kobo.500.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.501.1">Component</span></span><span class="koboSpan" id="kobo.502.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.503.1">OnInit</span></span><span class="koboSpan" id="kobo.504.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.505.1">inject</span></strong></span><span class="koboSpan" id="kobo.506.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.507.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.508.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.509.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.510.1">
      Declare the following property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.511.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.512.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.513.1">private</span></span><span class="koboSpan" id="kobo.514.1"> productService = </span><span class="hljs-title"><span class="koboSpan" id="kobo.515.1">inject</span></span><span class="koboSpan" id="kobo.516.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.517.1">ProductsService</span></span><span class="koboSpan" id="kobo.518.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.519.1">
      Remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.520.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.521.1">
      from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.522.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.523.1">
      class.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.524.1">
     The application should still work as expected if we run the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.525.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.526.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.526.2">
     The product list should be displayed as in the preceding section.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.527.1">
     We will explore additional use cases for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.528.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.529.1">
     method in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.530.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.531.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.532.1">
      Communicating with Data Services over HTTP
     </span>
    </em>
    <span class="koboSpan" id="kobo.533.1">
     , and
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.534.1">
      Chapter 9
     </span>
    </em>
    <span class="koboSpan" id="kobo.535.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.536.1">
      Navigating through Applications with Routing
     </span>
    </em>
    <span class="koboSpan" id="kobo.537.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.538.1">
     Compared to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.539.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.540.1">
     approach, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.541.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.542.1">
     method provides more accurate types, enforcing strongly typed Angular applications.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.543.1">
     The Angular CLI provides a schematic that we can run to migrate to the new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.544.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.545.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.545.2">
     You can
    </span>
    <a id="_idIndexMarker315">
    </a>
    <span class="koboSpan" id="kobo.546.1">
     find more detail on how to run the schematic at
    </span>
    <a href="https://angular.dev/reference/migrations/inject-function">
     <span class="url">
      <span class="koboSpan" id="kobo.547.1">
       https://angular.dev/reference/migrations/inject-function
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.548.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.549.1">
      In this book, we use both the inject method and constructor approach, according to the execution context of the application code.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.550.1">
     As we learned, when we create a new Angular service, the Angular CLI registers this service
    </span>
    <a id="_idIndexMarker316">
    </a>
    <span class="koboSpan" id="kobo.551.1">
     with the root injector of the application by default.
    </span>
    <span class="koboSpan" id="kobo.551.2">
     In the following section, we’ll learn about the internals of the DI mechanism and how the root injector works.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-113">
    <span class="koboSpan" id="kobo.552.1">
     Providing dependencies across the application
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.553.1">
     The Angular framework offers a DI mechanism to provide dependencies in Angular artifacts such as components, directives, pipes, and services.
    </span>
    <span class="koboSpan" id="kobo.553.2">
     The Angular DI is based on an injector
    </span>
    <a id="_idIndexMarker317">
    </a>
    <span class="koboSpan" id="kobo.554.1">
     hierarchy where at the top there is the root injector of an Angular application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.555.1">
     Injectors in Angular can examine the dependencies in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.556.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.557.1">
     of an Angular artifact and return an instance of the type represented by each dependency, so that we can use it straight away in the implementation of our Angular class.
    </span>
    <span class="koboSpan" id="kobo.557.2">
     The injector maintains a list of all dependencies that an Angular application needs.
    </span>
    <span class="koboSpan" id="kobo.557.3">
     When a component or other artifact wants to use a dependency, the injector first checks to see if it has already created an instance of this dependency.
    </span>
    <span class="koboSpan" id="kobo.557.4">
     If not, it creates a new one, returns it to the component, and keeps a copy for further use.
    </span>
    <span class="koboSpan" id="kobo.557.5">
     The next time the same dependency is requested, it returns the copy previously created.
    </span>
    <span class="koboSpan" id="kobo.557.6">
     But how does the injector know which dependencies an Angular application needs?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.558.1">
     When we create an Angular service, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.559.1">
      providedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.560.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.561.1">
      @Injectable
     </span>
    </code>
    <span class="koboSpan" id="kobo.562.1">
     decorator to define how it is provided to the application.
    </span>
    <span class="koboSpan" id="kobo.562.2">
     That is, we create a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.563.1">
      provider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.564.1">
     for this service.
    </span>
    <span class="koboSpan" id="kobo.564.2">
     A provider is a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.565.1">
      recipe
     </span>
    </em>
    <span class="koboSpan" id="kobo.566.1">
     containing guidelines on creating a specific service.
    </span>
    <span class="koboSpan" id="kobo.566.2">
     During application startup, the framework is responsible for configuring the injector with providers of services so that it knows how to create one upon request.
    </span>
    <span class="koboSpan" id="kobo.566.3">
     An Angular service is configured with the root injector by default when created with the CLI.
    </span>
    <span class="koboSpan" id="kobo.566.4">
     The root injector creates singleton services that are globally available through the application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.567.1">
     In
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.568.1">
      Chapter 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.569.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.570.1">
      Building Your First Angular Application
     </span>
    </em>
    <span class="koboSpan" id="kobo.571.1">
     , we learned that the application configuration object defined in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.572.1">
      app.config.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.573.1">
     file has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.574.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.575.1">
     property where we can register application services.
    </span>
    <span class="koboSpan" id="kobo.575.2">
     We could remove the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.576.1">
      providedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.577.1">
     property from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.578.1">
      @Injectable
     </span>
    </code>
    <span class="koboSpan" id="kobo.579.1">
     decorator of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.580.1">
      products.service.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.581.1">
     file and add it in that array directly.
    </span>
    <span class="koboSpan" id="kobo.581.2">
     Registering a service in this way is the same as configuring the service with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.582.1">
      providedIn: 'root'
     </span>
    </code>
    <span class="koboSpan" id="kobo.583.1">
     .
    </span>
    <span class="koboSpan" id="kobo.583.2">
     The main difference between them is that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.584.1">
      providedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.585.1">
     syntax is
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.586.1">
      tree shakable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.587.1">
     .
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.588.1">
      Tree shaking is the
     </span>
     <a id="_idIndexMarker318">
     </a>
     <span class="koboSpan" id="kobo.589.1">
      process of finding dependencies that are not used in an application and removing them from the final bundle.
     </span>
     <span class="koboSpan" id="kobo.589.2">
      In the context of Angular, the Angular compiler can detect and delete Angular services that are not used, resulting in a smaller bundle.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.590.1">
     When you provide a service through the application configuration object, the Angular compiler
    </span>
    <a id="_idIndexMarker319">
    </a>
    <span class="koboSpan" id="kobo.591.1">
     cannot say if the service is used somewhere in the application.
    </span>
    <span class="koboSpan" id="kobo.591.2">
     So, it includes the service in the final bundle
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.592.1">
      a priori
     </span>
    </em>
    <span class="koboSpan" id="kobo.593.1">
     .
    </span>
    <span class="koboSpan" id="kobo.593.2">
     Thus, using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.594.1">
      @Injectable
     </span>
    </code>
    <span class="koboSpan" id="kobo.595.1">
     decorator over the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.596.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.597.1">
     array of the application configuration is preferable.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.598.1">
      You should always register singleton services with the root injector.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.599.1">
     The root injector is not the only injector in an Angular application.
    </span>
    <span class="koboSpan" id="kobo.599.2">
     Components have their injectors, too.
    </span>
    <span class="koboSpan" id="kobo.599.3">
     Angular injectors are also hierarchical.
    </span>
    <span class="koboSpan" id="kobo.599.4">
     Whenever an Angular component defines a token in its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.600.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.601.1">
     , the injector searches for a type that matches that token in the pool of registered providers.
    </span>
    <span class="koboSpan" id="kobo.601.2">
     If no match is found, it delegates the search to the parent component’s provider and keeps bubbling the component injector tree until it reaches the root injector.
    </span>
    <span class="koboSpan" id="kobo.601.3">
     If no match is found, Angular throws an exception.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.602.1">
     Let’s explore the injector hierarchy of the product list component using Angular DevTools:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.603.1">
      Run the application using the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.604.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.605.1">
      command and preview it at
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.606.1">
       http://localhost:4200
      </span>
     </code>
     <span class="koboSpan" id="kobo.607.1">
      .
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.608.1">
      Start Angular DevTools and select the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.609.1">
       Components
      </span>
     </strong>
     <span class="koboSpan" id="kobo.610.1">
      tab.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.611.1">
      Select the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.612.1">
       app-product-list
      </span>
     </strong>
     <span class="koboSpan" id="kobo.613.1">
      component from the component tree:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.614.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, αριθμός  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_05_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.615.1">
     Figure 5.2: Components tab
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.616.1">
     In the
    </span>
    <a id="_idIndexMarker320">
    </a>
    <span class="koboSpan" id="kobo.617.1">
     preceding image, the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.618.1">
      Injected Services
     </span>
    </strong>
    <span class="koboSpan" id="kobo.619.1">
     section contains the services injected in the component.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.620.1">
      Click on the down arrow next to the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.621.1">
       ProductsService
      </span>
     </strong>
     <span class="koboSpan" id="kobo.622.1">
      label, and you will see the following diagram:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.623.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμμή, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_05_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.624.1">
     Figure 5.3: Product list injector hierarchy
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.625.1">
      The injector hierarchy diagram in Angular DevTools is in horizontal orientation.
     </span>
     <span class="koboSpan" id="kobo.625.2">
      Here, we show it vertically for readability..
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.626.1">
     The preceding diagram depicts the injector hierarchy of the product list component.
    </span>
    <span class="koboSpan" id="kobo.626.2">
     It contains two main injector hierarchy types common to an Angular application:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.627.1">
      environment
     </span>
    </strong>
    <span class="koboSpan" id="kobo.628.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.629.1">
      element
     </span>
    </strong>
    <span class="koboSpan" id="kobo.630.1">
     injectors.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.631.1">
     Environment injectors
    </span>
    <a id="_idIndexMarker321">
    </a>
    <span class="koboSpan" id="kobo.632.1">
     are configured using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.633.1">
      providedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.634.1">
     property
    </span>
    <a id="_idIndexMarker322">
    </a>
    <span class="koboSpan" id="kobo.635.1">
     and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.636.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.637.1">
     array in the application configuration object.
    </span>
    <span class="koboSpan" id="kobo.637.2">
     In our case, we see the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.638.1">
      Root
     </span>
    </strong>
    <span class="koboSpan" id="kobo.639.1">
     and
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.640.1">
      Standalone[_AppComponent]
     </span>
    </strong>
    <span class="koboSpan" id="kobo.641.1">
     injectors because the products service is provided from the root injector using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.642.1">
      providedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.643.1">
     property.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.644.1">
     Angular creates
    </span>
    <a id="_idIndexMarker323">
    </a>
    <span class="koboSpan" id="kobo.645.1">
     an element injector for each component which can be configured from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.646.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.647.1">
     array of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.648.1">
      @Component
     </span>
    </code>
    <span class="koboSpan" id="kobo.649.1">
     decorator, as we will see in the following section.
    </span>
    <span class="koboSpan" id="kobo.649.2">
     In our case, we see the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.650.1">
      AppComponent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.651.1">
     and
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.652.1">
      ProductListComponent
     </span>
    </strong>
    <span class="koboSpan" id="kobo.653.1">
     injectors because these components are related directly to the product list.
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.654.1">
      You can select the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.655.1">
       Injector Tree
      </span>
     </strong>
     <span class="koboSpan" id="kobo.656.1">
      tab of Angular DevTools for a more detailed analysis of the application injector hierarchy per type.
     </span>
     <span class="koboSpan" id="kobo.656.2">
      You can also learn more about
     </span>
     <a id="_idIndexMarker324">
     </a>
     <span class="koboSpan" id="kobo.657.1">
      the different kinds of injectors at
     </span>
     <a href="https://angular.dev/guide/di/hierarchical-dependency-injection#types-of-injector-hierarchies">
      <span class="url">
       <span class="koboSpan" id="kobo.658.1">
        https://angular.dev/guide/di/hierarchical-dependency-injection#types-of-injector-hierarchies
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.659.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.660.1">
     Components create injectors, so they are immediately available to their child components.
    </span>
    <span class="koboSpan" id="kobo.660.2">
     We’ll learn about this in detail in the following section.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-114">
    <span class="koboSpan" id="kobo.661.1">
     Injecting services in the component tree
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.662.1">
     As we learned
    </span>
    <a id="_idIndexMarker325">
    </a>
    <span class="koboSpan" id="kobo.663.1">
     in the preceding section, Angular uses an element injector to provide services in components through the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.664.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.665.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.666.1">
      @Component
     </span>
    </code>
    <span class="koboSpan" id="kobo.667.1">
     decorator.
    </span>
    <span class="koboSpan" id="kobo.667.2">
     A service that registers with the element injector can serve two purposes:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.668.1">
      It can be shared with its child components
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.669.1">
      It can create multiple copies of the service every time the component that provides the service is rendered
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.670.1">
     In the
    </span>
    <a id="_idIndexMarker326">
    </a>
    <span class="koboSpan" id="kobo.671.1">
     following sections, we’ll learn how to apply each approach.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-115">
    <span class="koboSpan" id="kobo.672.1">
     Sharing dependencies through components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.673.1">
     A service provided through a component can be shared among the child components of the
    </span>
    <a id="_idIndexMarker327">
    </a>
    <span class="koboSpan" id="kobo.674.1">
     parent component, and it is immediately available for injection into their constructors.
    </span>
    <span class="koboSpan" id="kobo.674.2">
     Child components reuse the same instance of the service as the parent component.
    </span>
    <span class="koboSpan" id="kobo.674.3">
     Let’s walk our way through an example to understand this better:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.675.1">
      Create a new Angular component named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.676.1">
       favorites
      </span>
     </code>
     <span class="koboSpan" id="kobo.677.1">
      :
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.678.1">ng generate component favorites
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.679.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.680.1">
       favorites.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.681.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.682.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.683.1">
      statements accordingly:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.684.1">import</span></span><span class="koboSpan" id="kobo.685.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.686.1">Component</span></span><span class="koboSpan" id="kobo.687.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.688.1">OnInit</span></strong></span><span class="koboSpan" id="kobo.689.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.690.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.691.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.692.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.693.1">import { Product } from '../product';</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.694.1">import { ProductsService } from '../products.service';</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.695.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.696.1">
       FavoritesComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.697.1">
      class to use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.698.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.699.1">
      class and get the product list in a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.700.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.701.1">
      component property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.702.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.703.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.704.1">FavoritesComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.705.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.706.1">OnInit</span></span><span class="koboSpan" id="kobo.707.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.708.1">products</span></span><span class="koboSpan" id="kobo.709.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.710.1">Product</span></span><span class="koboSpan" id="kobo.711.1">[] = [];
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.712.1">constructor</span></span><span class="koboSpan" id="kobo.713.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.714.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.715.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.716.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.717.1">ProductsService</span></span><span class="koboSpan" id="kobo.718.1">) {}
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.719.1">ngOnInit</span></span><span class="koboSpan" id="kobo.720.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.721.1">void</span></span><span class="koboSpan" id="kobo.722.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.723.1">this</span></span><span class="koboSpan" id="kobo.724.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.725.1">products</span></span><span class="koboSpan" id="kobo.726.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.727.1">this</span></span><span class="koboSpan" id="kobo.728.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.729.1">productService</span></span><span class="koboSpan" id="kobo.730.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.731.1">getProducts</span></span><span class="koboSpan" id="kobo.732.1">();
  }
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.733.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.734.1">
       favorites.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.735.1">
      file and replace its content with the following HTML code:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.736.1"> &lt;ul </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.737.1">class</span></span><span class="koboSpan" id="kobo.738.1">=</span><span class="hljs-string"><span class="koboSpan" id="kobo.739.1">"pill-group"</span></span><span class="koboSpan" id="kobo.740.1">&gt;
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.741.1">@for</span></span><span class="koboSpan" id="kobo.742.1"> (product </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.743.1">of</span></span><span class="koboSpan" id="kobo.744.1"> products | </span><span class="hljs-attr"><span class="koboSpan" id="kobo.745.1">slice</span></span><span class="koboSpan" id="kobo.746.1">:</span><span class="hljs-number"><span class="koboSpan" id="kobo.747.1">1</span></span><span class="koboSpan" id="kobo.748.1">:</span><span class="hljs-number"><span class="koboSpan" id="kobo.749.1">3</span></span><span class="koboSpan" id="kobo.750.1">; track product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.751.1">id</span></span><span class="koboSpan" id="kobo.752.1">) {
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.753.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.754.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.755.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.756.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.757.1">"pill"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.758.1">&gt;</span></span><span class="koboSpan" id="kobo.759.1">
      ⭐ {{product.title}}
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.760.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.761.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.762.1">&gt;</span></span><span class="koboSpan" id="kobo.763.1">
  }
&lt;/ul&gt;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.764.1">
     In the preceding snippet, we iterate over the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.765.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.766.1">
     array and use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.767.1">
      slice
     </span>
    </code>
    <span class="koboSpan" id="kobo.768.1">
     pipe to display only two products.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.769.1">
      Modify
     </span>
     <a id="_idIndexMarker328">
     </a>
     <span class="koboSpan" id="kobo.770.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.771.1">
       favorites.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.772.1">
      file so that it imports the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.773.1">
       CommonModule
      </span>
     </code>
     <span class="koboSpan" id="kobo.774.1">
      class that is needed for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.775.1">
       slice
      </span>
     </code>
     <span class="koboSpan" id="kobo.776.1">
      pipe:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.777.1">import { CommonModule } from '@angular/common';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.778.1">import</span></span><span class="koboSpan" id="kobo.779.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.780.1">Component</span></span><span class="koboSpan" id="kobo.781.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.782.1">OnInit</span></span><span class="koboSpan" id="kobo.783.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.784.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.785.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.786.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.787.1">import</span></span><span class="koboSpan" id="kobo.788.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.789.1">Product</span></span><span class="koboSpan" id="kobo.790.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.791.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.792.1">'../product'</span></span><span class="koboSpan" id="kobo.793.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.794.1">import</span></span><span class="koboSpan" id="kobo.795.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.796.1">ProductsService</span></span><span class="koboSpan" id="kobo.797.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.798.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.799.1">'../products.service'</span></span><span class="koboSpan" id="kobo.800.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.801.1">@Component</span></span><span class="koboSpan" id="kobo.802.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.803.1">selector</span></span><span class="koboSpan" id="kobo.804.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.805.1">'app-favorites'</span></span><span class="koboSpan" id="kobo.806.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.807.1">imports</span></span><span class="koboSpan" id="kobo.808.1">: [</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.809.1">CommonModule</span></strong></span><span class="koboSpan" id="kobo.810.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.811.1">templateUrl</span></span><span class="koboSpan" id="kobo.812.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.813.1">'./favorites.component.html'</span></span><span class="koboSpan" id="kobo.814.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.815.1">styleUrl</span></span><span class="koboSpan" id="kobo.816.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.817.1">'./favorites.component.css'</span></span><span class="koboSpan" id="kobo.818.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.819.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.820.1">
       favorites.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.821.1">
      file to add some CSS styles to our favorite products:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.822.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.823.1">pill</span></span><span class="koboSpan" id="kobo.824.1">-group {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.825.1">display</span></span><span class="koboSpan" id="kobo.826.1">: flex;
  flex-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.827.1">direction</span></span><span class="koboSpan" id="kobo.828.1">: column;
  align-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.829.1">items</span></span><span class="koboSpan" id="kobo.830.1">: start;
  flex-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.831.1">wrap</span></span><span class="koboSpan" id="kobo.832.1">: wrap;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.833.1">gap</span></span><span class="koboSpan" id="kobo.834.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.835.1">1.</span></span><span class="koboSpan" id="kobo.836.1">25rem;
}
.</span><span class="hljs-property"><span class="koboSpan" id="kobo.837.1">pill</span></span><span class="koboSpan" id="kobo.838.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.839.1">display</span></span><span class="koboSpan" id="kobo.840.1">: flex;
  align-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.841.1">items</span></span><span class="koboSpan" id="kobo.842.1">: center;
  --pill-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.843.1">accent</span></span><span class="koboSpan" id="kobo.844.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.845.1">var</span></span><span class="koboSpan" id="kobo.846.1">(--hot-red);
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.847.1">background</span></span><span class="koboSpan" id="kobo.848.1">: color-</span><span class="hljs-title"><span class="koboSpan" id="kobo.849.1">mix</span></span><span class="koboSpan" id="kobo.850.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.851.1">in</span></span><span class="koboSpan" id="kobo.852.1"> srgb, </span><span class="hljs-title"><span class="koboSpan" id="kobo.853.1">var</span></span><span class="koboSpan" id="kobo.854.1">(--hot-red) </span><span class="hljs-number"><span class="koboSpan" id="kobo.855.1">5</span></span><span class="koboSpan" id="kobo.856.1">%, transparent);
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.857.1">color</span></span><span class="koboSpan" id="kobo.858.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.859.1">var</span></span><span class="koboSpan" id="kobo.860.1">(--pill-accent);
  padding-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.861.1">inline</span></span><span class="koboSpan" id="kobo.862.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.863.1">0.</span></span><span class="koboSpan" id="kobo.864.1">75rem;
  padding-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.865.1">block</span></span><span class="koboSpan" id="kobo.866.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.867.1">0.</span></span><span class="koboSpan" id="kobo.868.1">375rem;
  border-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.869.1">radius</span></span><span class="koboSpan" id="kobo.870.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.871.1">2.</span></span><span class="koboSpan" id="kobo.872.1">75rem;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.873.1">border</span></span><span class="koboSpan" id="kobo.874.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.875.1">0</span></span><span class="koboSpan" id="kobo.876.1">;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.877.1">transition</span></span><span class="koboSpan" id="kobo.878.1">: background </span><span class="hljs-number"><span class="koboSpan" id="kobo.879.1">0.</span></span><span class="koboSpan" id="kobo.880.1">3s ease;
  font-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.881.1">family</span></span><span class="koboSpan" id="kobo.882.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.883.1">var</span></span><span class="koboSpan" id="kobo.884.1">(--inter-font);
  font-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.885.1">size</span></span><span class="koboSpan" id="kobo.886.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.887.1">0.</span></span><span class="koboSpan" id="kobo.888.1">875rem;
  font-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.889.1">style</span></span><span class="koboSpan" id="kobo.890.1">: normal;
  font-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.891.1">weight</span></span><span class="koboSpan" id="kobo.892.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.893.1">500</span></span><span class="koboSpan" id="kobo.894.1">;
  line-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.895.1">height</span></span><span class="koboSpan" id="kobo.896.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.897.1">1.</span></span><span class="koboSpan" id="kobo.898.1">4rem;
  letter-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.899.1">spacing</span></span><span class="koboSpan" id="kobo.900.1">: -</span><span class="hljs-number"><span class="koboSpan" id="kobo.901.1">0.</span></span><span class="koboSpan" id="kobo.902.1">00875rem;
  text-</span><span class="hljs-attr"><span class="koboSpan" id="kobo.903.1">decoration</span></span><span class="koboSpan" id="kobo.904.1">: none;
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.905.1">
      Open
     </span>
     <a id="_idIndexMarker329">
     </a>
     <span class="koboSpan" id="kobo.906.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.907.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.908.1">
      file, import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.909.1">
       FavoritesComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.910.1">
      class, and add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.911.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.912.1">
      class to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.913.1">
       providers
      </span>
     </code>
     <span class="koboSpan" id="kobo.914.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.915.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.916.1">
      decorator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.917.1">import</span></span><span class="koboSpan" id="kobo.918.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.919.1">Component</span></span><span class="koboSpan" id="kobo.920.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.921.1">OnInit</span></span><span class="koboSpan" id="kobo.922.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.923.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.924.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.925.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.926.1">import</span></span><span class="koboSpan" id="kobo.927.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.928.1">Product</span></span><span class="koboSpan" id="kobo.929.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.930.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.931.1">'../product'</span></span><span class="koboSpan" id="kobo.932.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.933.1">import</span></span><span class="koboSpan" id="kobo.934.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.935.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.936.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.937.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.938.1">'../product-detail/product-detail.component'</span></span><span class="koboSpan" id="kobo.939.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.940.1">import</span></span><span class="koboSpan" id="kobo.941.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.942.1">SortPipe</span></span><span class="koboSpan" id="kobo.943.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.944.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.945.1">'../sort.pipe'</span></span><span class="koboSpan" id="kobo.946.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.947.1">import</span></span><span class="koboSpan" id="kobo.948.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.949.1">ProductsService</span></span><span class="koboSpan" id="kobo.950.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.951.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.952.1">'../products.service'</span></span><span class="koboSpan" id="kobo.953.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.954.1">import { FavoritesComponent } from '../favorites/favorites.component';</span></strong></span>
 
<span class="hljs-meta"><span class="koboSpan" id="kobo.955.1">@Component</span></span><span class="koboSpan" id="kobo.956.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.957.1">selector</span></span><span class="koboSpan" id="kobo.958.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.959.1">'app-product-list'</span></span><span class="koboSpan" id="kobo.960.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.961.1">imports</span></span><span class="koboSpan" id="kobo.962.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.963.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.964.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.965.1">SortPipe</span></span><span class="koboSpan" id="kobo.966.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.967.1">FavoritesComponent</span></strong></span><span class="koboSpan" id="kobo.968.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.969.1">templateUrl</span></span><span class="koboSpan" id="kobo.970.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.971.1">'./product-list.component.html'</span></span><span class="koboSpan" id="kobo.972.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.973.1">styleUrl</span></span><span class="koboSpan" id="kobo.974.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.975.1">'./product-list.component.css'</span></span><span class="koboSpan" id="kobo.976.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.977.1">providers: [ProductsService]</span></strong></span><span class="koboSpan" id="kobo.978.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.979.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.980.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.981.1">
      file and remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.982.1">
       providedIn
      </span>
     </code>
     <span class="koboSpan" id="kobo.983.1">
      property from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.984.1">
       @Injectable
      </span>
     </code>
     <span class="koboSpan" id="kobo.985.1">
      decorator since the element injector of the product list component will provide it.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.986.1">
      Finally, open
     </span>
     <a id="_idIndexMarker330">
     </a>
     <span class="koboSpan" id="kobo.987.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.988.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.989.1">
      file and add the following HTML snippet to display the contents of the favorites component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.990.1">&lt;h1&gt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.991.1">Favorites</span></span><span class="koboSpan" id="kobo.992.1">&lt;</span><span class="hljs-regexp"><span class="koboSpan" id="kobo.993.1">/h1&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.994.1">&lt;app-favorites&gt;&lt;/</span></span><span class="koboSpan" id="kobo.995.1">app-favorites&gt;
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.996.1">
     When running the application using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.997.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.998.1">
     , you should see the following output:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.999.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, σχεδίαση  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_05_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1000.1">
     Figure 5.4: Product list with favorites
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1001.1">
     Let’s explain what we did in the previous example in more detail.
    </span>
    <span class="koboSpan" id="kobo.1001.2">
     We injected
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1002.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1003.1">
     in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1004.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1005.1">
     but we did not provide it through its injector.
    </span>
    <span class="koboSpan" id="kobo.1005.2">
     So, how was the component aware of how to create an instance of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1006.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1007.1">
     class and use it?
    </span>
    <span class="koboSpan" id="kobo.1007.2">
     It wasn’t.
    </span>
    <span class="koboSpan" id="kobo.1007.3">
     When we added the favorites component to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1008.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1009.1">
     template, we made it a direct child of this component, thus
    </span>
    <a id="_idIndexMarker331">
    </a>
    <span class="koboSpan" id="kobo.1010.1">
     giving it access to all its provided services.
    </span>
    <span class="koboSpan" id="kobo.1010.2">
     In a nutshell,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1011.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1012.1">
     can use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1013.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1014.1">
     out of the box because it is already provided through the element injector of its parent component,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1015.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1016.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1017.1">
     So, even if
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1018.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1019.1">
     was initially registered with the environment root injector, we could also register it with the element injector of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1020.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1021.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1021.2">
     In the next section, we’ll investigate how it is possible to achieve such behavior.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-116">
    <span class="koboSpan" id="kobo.1022.1">
     Root and component injectors
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1023.1">
     We have already learned that when we create an Angular service using the Angular CLI, the service
    </span>
    <a id="_idIndexMarker332">
    </a>
    <span class="koboSpan" id="kobo.1024.1">
     is provided in the application’s root injector by default.
    </span>
    <span class="koboSpan" id="kobo.1024.2">
     How does this differ when providing a service through the element injector of a component?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1025.1">
     Services provided with the application root injector are available throughout the whole application.
    </span>
    <span class="koboSpan" id="kobo.1025.2">
     When a component wants to use such a service, it only needs to inject it, nothing more.
    </span>
    <span class="koboSpan" id="kobo.1025.3">
     Now, if the component provides the same service through its injector, it will get an
    </span>
    <a id="_idIndexMarker333">
    </a>
    <span class="koboSpan" id="kobo.1026.1">
     instance of the service entirely different from the one from the root injector.
    </span>
    <span class="koboSpan" id="kobo.1026.2">
     This technique is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1027.1">
      service scope limiting
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1028.1">
     because we limit the scope of the service to a specific part of the component tree:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1029.1">
     <img alt="Table  Description automatically generated" src="../Images/B21418_05_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1030.1">
     Figure 5.5: Service scope limiting
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1031.1">
     The previous diagram shows that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1032.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1033.1">
     can be provided through two injectors: the application
    </span>
    <a id="_idIndexMarker334">
    </a>
    <span class="koboSpan" id="kobo.1034.1">
     root injector and the element injector of the product list component.
    </span>
    <span class="koboSpan" id="kobo.1034.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1035.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1036.1">
     class injects
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1037.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1038.1">
     to use it.
    </span>
    <span class="koboSpan" id="kobo.1038.2">
     As we have already seen,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1039.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1040.1">
     is a child component of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1041.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1042.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1043.1">
     According to the injector hierarchy, it will first ask the injector of its parent component,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1044.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1045.1">
     , about providing the service.
    </span>
    <span class="koboSpan" id="kobo.1045.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1046.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1047.1">
     class indeed provides
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1048.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1049.1">
     , so it creates a new instance of the service and returns it to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1050.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1051.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1052.1">
     Now, consider that another component in our application,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1053.1">
      CmpA
     </span>
    </code>
    <span class="koboSpan" id="kobo.1054.1">
     , wants to use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1055.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1056.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1056.2">
     Since it is not a child component of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1057.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1058.1">
     and does not contain any parent component that provides the required service, it will finally reach the application root injector.
    </span>
    <span class="koboSpan" id="kobo.1058.2">
     The root injector that provides
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1059.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1060.1">
     checks if it has already created an instance for that service.
    </span>
    <span class="koboSpan" id="kobo.1060.2">
     If not, it creates a new one, called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1061.1">
      productService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1062.1">
     , and returns it to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1063.1">
      CmpA
     </span>
    </code>
    <span class="koboSpan" id="kobo.1064.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1064.2">
     It also keeps
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1065.1">
      productService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1066.1">
     in the local pool of services for later use.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1067.1">
     Suppose
    </span>
    <a id="_idIndexMarker335">
    </a>
    <span class="koboSpan" id="kobo.1068.1">
     another component,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1069.1">
      CmpB
     </span>
    </code>
    <span class="koboSpan" id="kobo.1070.1">
     , wants to use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1071.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1072.1">
     and asks the application root injector.
    </span>
    <span class="koboSpan" id="kobo.1072.2">
     The root injector knows it has already created the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1073.1">
      productService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1074.1">
     instance when
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1075.1">
      CmpA
     </span>
    </code>
    <span class="koboSpan" id="kobo.1076.1">
     requested it and returns it immediately to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1077.1">
      CmpB
     </span>
    </code>
    <span class="koboSpan" id="kobo.1078.1">
     component.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-117">
    <span class="koboSpan" id="kobo.1079.1">
     Sandboxing components with multiple instances
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1080.1">
     When we provide a service through the element injector and inject it into the component’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1081.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.1082.1">
     , a new instance is created every time the component is rendered
    </span>
    <a id="_idIndexMarker336">
    </a>
    <span class="koboSpan" id="kobo.1083.1">
     on the page.
    </span>
    <span class="koboSpan" id="kobo.1083.2">
     It can come in handy in cases such as when we want to have a local cache service for each component.
    </span>
    <span class="koboSpan" id="kobo.1083.3">
     We will explore this scenario by transforming our Angular application so that the product list displays a quick view of each product using an Angular service:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1084.1">
      Run the following command to create a new Angular component for the product view:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1085.1">ng generate component product-view
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1086.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1087.1">
       product-view.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1088.1">
      file and declare an input property named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1089.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1090.1">
      so we can pass a unique identifier of the product we want to display:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1091.1">import</span></span><span class="koboSpan" id="kobo.1092.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1093.1">Component</span></span><span class="koboSpan" id="kobo.1094.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1095.1">input</span></strong></span><span class="koboSpan" id="kobo.1096.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1097.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1098.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1099.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1100.1">@Component</span></span><span class="koboSpan" id="kobo.1101.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1102.1">selector</span></span><span class="koboSpan" id="kobo.1103.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1104.1">'app-product-view'</span></span><span class="koboSpan" id="kobo.1105.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1106.1">imports</span></span><span class="koboSpan" id="kobo.1107.1">: [],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1108.1">templateUrl</span></span><span class="koboSpan" id="kobo.1109.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1110.1">'./product-view.component.html'</span></span><span class="koboSpan" id="kobo.1111.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1112.1">styleUrl</span></span><span class="koboSpan" id="kobo.1113.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1114.1">'./product-view.component.css'</span></span><span class="koboSpan" id="kobo.1115.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1116.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1117.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1118.1">ProductViewComponent</span></span><span class="koboSpan" id="kobo.1119.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1120.1">id = input&lt;number&gt;();</span></strong></span><span class="koboSpan" id="kobo.1121.1">
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1122.1">
      Run the following Angular CLI command inside the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1123.1">
       product-view
      </span>
     </code>
     <span class="koboSpan" id="kobo.1124.1">
      folder to create an Angular service that will be dedicated to the product view component:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1125.1">ng generate service product-view
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1126.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1127.1">
       product-view.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1128.1">
      file and remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1129.1">
       providedIn
      </span>
     </code>
     <span class="koboSpan" id="kobo.1130.1">
      property
     </span>
     <a id="_idIndexMarker337">
     </a>
     <span class="koboSpan" id="kobo.1131.1">
      from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1132.1">
       @Injectable
      </span>
     </code>
     <span class="koboSpan" id="kobo.1133.1">
      decorator because we will provide it later in the product view component.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1134.1">
      Inject
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1135.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1136.1">
      into the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1137.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1138.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1139.1">
       ProductViewService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1140.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1141.1">import</span></span><span class="koboSpan" id="kobo.1142.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1143.1">Injectable</span></span><span class="koboSpan" id="kobo.1144.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1145.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1146.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1147.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1148.1">import { ProductsService } from '../products.service';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1149.1">@Injectable</span></span><span class="koboSpan" id="kobo.1150.1">()
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1151.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1152.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1153.1">ProductViewService</span></span><span class="koboSpan" id="kobo.1154.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1155.1">constructor</span></span><span class="koboSpan" id="kobo.1156.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1157.1">private productService: ProductsService</span></strong></span><span class="koboSpan" id="kobo.1158.1">) { }
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1159.1">
     The preceding
    </span>
    <a id="_idIndexMarker338">
    </a>
    <span class="koboSpan" id="kobo.1160.1">
     technique is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1161.1">
      service-in-a-service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1162.1">
     because we inject one Angular service into another.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.1163.1">
      Create a method named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1164.1">
       getProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.1165.1">
      that takes an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1166.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1167.1">
      property as a parameter.
     </span>
     <span class="koboSpan" id="kobo.1167.2">
      The method will call the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1168.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1169.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1170.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1171.1">
      class and search through the product list based on the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1172.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.1173.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1173.2">
      If it finds the product, it will keep it in a local variable named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1174.1">
       product
      </span>
     </code>
     <span class="koboSpan" id="kobo.1175.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1176.1">import</span></span><span class="koboSpan" id="kobo.1177.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1178.1">Injectable</span></span><span class="koboSpan" id="kobo.1179.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1180.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1181.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1182.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1183.1">import</span></span><span class="koboSpan" id="kobo.1184.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1185.1">ProductsService</span></span><span class="koboSpan" id="kobo.1186.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1187.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1188.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1189.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1190.1">import { Product } from '../product';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1191.1">@Injectable</span></span><span class="koboSpan" id="kobo.1192.1">()
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1193.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1194.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1195.1">ProductViewService</span></span><span class="koboSpan" id="kobo.1196.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1197.1">private product: Product | undefined;</span></strong></span>
  <span class="hljs-title"><span class="koboSpan" id="kobo.1198.1">constructor</span></span><span class="koboSpan" id="kobo.1199.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1200.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1201.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1202.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1203.1">ProductsService</span></span><span class="koboSpan" id="kobo.1204.1">) { }
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1205.1">getProduct(id: number): Product | undefined {</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1206.1">const products = this.productService.getProducts();</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1207.1">if (!this.product) {</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">      </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1208.1">this.product = products.find(product =&gt; product.id === id)</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1209.1">}</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1210.1">return this.product;</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1211.1">}</span></strong></span><span class="koboSpan" id="kobo.1212.1">  
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1213.1">
     We have already created the essential Angular artifacts for working with the product
    </span>
    <a id="_idIndexMarker339">
    </a>
    <span class="koboSpan" id="kobo.1214.1">
     view component.
    </span>
    <span class="koboSpan" id="kobo.1214.2">
     All we need to do now is connect them and wire them up to the product list:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1215.1">
      Inject
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1216.1">
       ProductViewService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1217.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1218.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1219.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1220.1">
       ProductViewComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1221.1">
      and implement the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1222.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1223.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1224.1">import</span></span><span class="koboSpan" id="kobo.1225.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1226.1">Component</span></span><span class="koboSpan" id="kobo.1227.1">, input, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1228.1">OnInit</span></strong></span><span class="koboSpan" id="kobo.1229.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1230.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1231.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1232.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1233.1">import { ProductViewService } from './product-view.service';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1234.1">@Component</span></span><span class="koboSpan" id="kobo.1235.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1236.1">selector</span></span><span class="koboSpan" id="kobo.1237.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1238.1">'app-product-view'</span></span><span class="koboSpan" id="kobo.1239.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1240.1">imports</span></span><span class="koboSpan" id="kobo.1241.1">: [],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1242.1">templateUrl</span></span><span class="koboSpan" id="kobo.1243.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1244.1">'./product-view.component.html'</span></span><span class="koboSpan" id="kobo.1245.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1246.1">styleUrl</span></span><span class="koboSpan" id="kobo.1247.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1248.1">'./product-view.component.css'</span></span><span class="koboSpan" id="kobo.1249.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1250.1">providers: [ProductViewService]</span></strong></span><span class="koboSpan" id="kobo.1251.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1252.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1253.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1254.1">ProductViewComponent</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1255.1">implements OnInit</span></strong></span><span class="koboSpan" id="kobo.1256.1"> {
  id = input&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1257.1">number</span></span><span class="koboSpan" id="kobo.1258.1">&gt;();
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1259.1">constructor(private productViewService: ProductViewService) {}</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1260.1">ngOnInit(): void {</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1261.1">}</span></strong></span><span class="koboSpan" id="kobo.1262.1">
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1263.1">
      Create a component property to keep the product that we will fetch from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1264.1">
       ProductViewService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1265.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1266.1">import</span></span><span class="koboSpan" id="kobo.1267.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1268.1">Component</span></span><span class="koboSpan" id="kobo.1269.1">, input, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1270.1">OnInit</span></span><span class="koboSpan" id="kobo.1271.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1272.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1273.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1274.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1275.1">import</span></span><span class="koboSpan" id="kobo.1276.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1277.1">ProductViewService</span></span><span class="koboSpan" id="kobo.1278.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1279.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1280.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1281.1">./product-view.service'</span></span><span class="koboSpan" id="kobo.1282.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1283.1">import { Product } from '../product';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1284.1">@Component</span></span><span class="koboSpan" id="kobo.1285.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1286.1">selector</span></span><span class="koboSpan" id="kobo.1287.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1288.1">'app-product-view'</span></span><span class="koboSpan" id="kobo.1289.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1290.1">imports</span></span><span class="koboSpan" id="kobo.1291.1">: [],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1292.1">templateUrl</span></span><span class="koboSpan" id="kobo.1293.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1294.1">'./product-view.component.html'</span></span><span class="koboSpan" id="kobo.1295.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1296.1">styleUrl</span></span><span class="koboSpan" id="kobo.1297.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1298.1">'./product-view.component.css'</span></span><span class="koboSpan" id="kobo.1299.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1300.1">providers</span></span><span class="koboSpan" id="kobo.1301.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1302.1">ProductViewService</span></span><span class="koboSpan" id="kobo.1303.1">]
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1304.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1305.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1306.1">ProductViewComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1307.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1308.1">OnInit</span></span><span class="koboSpan" id="kobo.1309.1"> {
  id = input&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1310.1">number</span></span><span class="koboSpan" id="kobo.1311.1">&gt;();
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1312.1">product: Product | undefined;</span></strong></span>
  
  <span class="hljs-title"><span class="koboSpan" id="kobo.1313.1">constructor</span></span><span class="koboSpan" id="kobo.1314.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1315.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1316.1">productViewService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1317.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1318.1">ProductViewService</span></span><span class="koboSpan" id="kobo.1319.1">) {}
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1320.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1321.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1322.1">void</span></span><span class="koboSpan" id="kobo.1323.1"> {
  }
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1324.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1325.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1326.1">
      method so that it calls the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1327.1">
       getProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.1328.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1329.1">
       ProductViewService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1330.1">
      class as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1331.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1332.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1333.1">void</span></span><span class="koboSpan" id="kobo.1334.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1335.1">this.product = this.productViewService.getProduct(this.id()!);</span></strong></span><span class="koboSpan" id="kobo.1336.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1337.1">
     In the
    </span>
    <a id="_idIndexMarker340">
    </a>
    <span class="koboSpan" id="kobo.1338.1">
     preceding snippet, we pass the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1339.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1340.1">
     component property to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1341.1">
      getProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.1342.1">
     method as a parameter and assign the returned value to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1343.1">
      product
     </span>
    </code>
    <span class="koboSpan" id="kobo.1344.1">
     property.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.1345.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1346.1">
       product-view.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1347.1">
      file and replace its content with the following HTML template:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1348.1">@switch</span></span><span class="koboSpan" id="kobo.1349.1"> (product?.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1350.1">title</span></span><span class="koboSpan" id="kobo.1351.1">) {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1352.1">@case</span></span><span class="koboSpan" id="kobo.1353.1"> (</span><span class="hljs-string"><span class="koboSpan" id="kobo.1354.1">'Keyboard'</span></span><span class="koboSpan" id="kobo.1355.1">) { </span><span class="koboSpan" id="kobo.1356.1"><img alt="img" src="../Images/Icon-041.png"/></span><span class="koboSpan" id="kobo.1357.1"> }
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1358.1">@case</span></span><span class="koboSpan" id="kobo.1359.1"> (</span><span class="hljs-string"><span class="koboSpan" id="kobo.1360.1">'Microphone'</span></span><span class="koboSpan" id="kobo.1361.1">) { </span><span class="koboSpan" id="kobo.1362.1"><img alt="img" src="../Images/Icon-05.png"/></span><span class="koboSpan" id="kobo.1363.1"> }
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1364.1">@default</span></span><span class="koboSpan" id="kobo.1365.1"> { </span><span class="koboSpan" id="kobo.1366.1"><img alt="img" src="../Images/Icon-06.png"/></span><span class="koboSpan" id="kobo.1367.1"> }
}
{{product?.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1368.1">title</span></span><span class="koboSpan" id="kobo.1369.1">}}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1370.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1371.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1372.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1373.1">
       ProductViewComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1374.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1375.1">import</span></span><span class="koboSpan" id="kobo.1376.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1377.1">Component</span></span><span class="koboSpan" id="kobo.1378.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1379.1">OnInit</span></span><span class="koboSpan" id="kobo.1380.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1381.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1382.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1383.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1384.1">import</span></span><span class="koboSpan" id="kobo.1385.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1386.1">Product</span></span><span class="koboSpan" id="kobo.1387.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1388.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1389.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1390.1">../product'</span></span><span class="koboSpan" id="kobo.1391.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1392.1">import</span></span><span class="koboSpan" id="kobo.1393.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1394.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1395.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1396.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1397.1">'../product-detail/product-detail.component'</span></span><span class="koboSpan" id="kobo.1398.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1399.1">import</span></span><span class="koboSpan" id="kobo.1400.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1401.1">SortPipe</span></span><span class="koboSpan" id="kobo.1402.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1403.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1404.1">'../sort.pipe'</span></span><span class="koboSpan" id="kobo.1405.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1406.1">import</span></span><span class="koboSpan" id="kobo.1407.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1408.1">ProductsService</span></span><span class="koboSpan" id="kobo.1409.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1410.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1411.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1412.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1413.1">import { ProductViewComponent } from '../product-view/product-view.component';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1414.1">@Component</span></span><span class="koboSpan" id="kobo.1415.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1416.1">selector</span></span><span class="koboSpan" id="kobo.1417.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1418.1">'app-product-list'</span></span><span class="koboSpan" id="kobo.1419.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1420.1">imports</span></span><span class="koboSpan" id="kobo.1421.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1422.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1423.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1424.1">SortPipe</span></span><span class="koboSpan" id="kobo.1425.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1426.1">ProductViewComponent</span></strong></span><span class="koboSpan" id="kobo.1427.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1428.1">templateUrl</span></span><span class="koboSpan" id="kobo.1429.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1430.1">'./product-list.component.html'</span></span><span class="koboSpan" id="kobo.1431.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1432.1">styleUrl</span></span><span class="koboSpan" id="kobo.1433.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1434.1">'./product-list.component.css'</span></span><span class="koboSpan" id="kobo.1435.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1436.1">
      Finally, open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1437.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1438.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1439.1">
       @for
      </span>
     </code>
     <span class="koboSpan" id="kobo.1440.1">
      block
     </span>
     <a id="_idIndexMarker341">
     </a>
     <span class="koboSpan" id="kobo.1441.1">
      to use the product view component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1442.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1443.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1444.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1445.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1446.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1447.1">pill-group"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1448.1">&gt;</span></span><span class="koboSpan" id="kobo.1449.1">
  @for (product of products | sort; track product.id) {
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1450.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1451.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1452.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1453.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1454.1">"pill"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1455.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1456.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1457.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1458.1">"selectedProduct = product"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1459.1">&gt;</span></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1460.1">&lt;app-product-view [id]="product.id"&gt;&lt;/app-product-view&gt;</span></strong></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1461.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1462.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1463.1">&gt;</span></span><span class="koboSpan" id="kobo.1464.1">
  } @empty {
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1465.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1466.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1467.1">&gt;</span></span><span class="koboSpan" id="kobo.1468.1">No products found!</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1469.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1470.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1471.1">&gt;</span></span><span class="koboSpan" id="kobo.1472.1">
  }
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1473.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1474.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1475.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1476.1">
     If we run our application with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1477.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.1478.1">
     command, we will see that the product list is still displayed correctly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1479.1">
     Each rendered product view component creates a dedicated sandboxed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1480.1">
      ProductViewService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1481.1">
     instance for its purpose.
    </span>
    <span class="koboSpan" id="kobo.1481.2">
     Any other component cannot share the instance or be changed except by the component that provides it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1482.1">
     Try to provide
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1483.1">
      ProductViewService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1484.1">
     in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1485.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1486.1">
     instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1487.1">
      ProductViewComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1488.1">
     ; you will see that only one product is rendered multiple times:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1489.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, λογότυπο  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_05_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1490.1">
     Figure 5.6: Product list
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1491.1">
     In this
    </span>
    <a id="_idIndexMarker342">
    </a>
    <span class="koboSpan" id="kobo.1492.1">
     case, only one service instance is shared among the child components.
    </span>
    <span class="koboSpan" id="kobo.1492.2">
     Why is that?
    </span>
    <span class="koboSpan" id="kobo.1492.3">
     Recall the business logic of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1493.1">
      getProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.1494.1">
     method from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1495.1">
      ProductViewService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1496.1">
     class:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1497.1">getProduct</span></span><span class="koboSpan" id="kobo.1498.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1499.1">id</span></span><span class="koboSpan" id="kobo.1500.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1501.1">number</span></span><span class="koboSpan" id="kobo.1502.1">): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1503.1">Product</span></span><span class="koboSpan" id="kobo.1504.1"> | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1505.1">undefined</span></span><span class="koboSpan" id="kobo.1506.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1507.1">const</span></span><span class="koboSpan" id="kobo.1508.1"> products = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1509.1">this</span></span><span class="koboSpan" id="kobo.1510.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1511.1">productService</span></span><span class="koboSpan" id="kobo.1512.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1513.1">getProducts</span></span><span class="koboSpan" id="kobo.1514.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1515.1">if</span></span><span class="koboSpan" id="kobo.1516.1"> (!</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1517.1">this</span></span><span class="koboSpan" id="kobo.1518.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1519.1">product</span></span><span class="koboSpan" id="kobo.1520.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1521.1">this</span></span><span class="koboSpan" id="kobo.1522.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1523.1">product</span></span><span class="koboSpan" id="kobo.1524.1"> = products.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1525.1">find</span></span><span class="koboSpan" id="kobo.1526.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1527.1">product</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1528.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1529.1"> product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1530.1">id</span></span><span class="koboSpan" id="kobo.1531.1"> === id)
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1532.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1533.1">this</span></span><span class="koboSpan" id="kobo.1534.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1535.1">product</span></span><span class="koboSpan" id="kobo.1536.1">;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1537.1">
     In the preceding method, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1538.1">
      product
     </span>
    </code>
    <span class="koboSpan" id="kobo.1539.1">
     property is set initially when we provide the service inside
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1540.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1541.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1541.2">
     Since we have only one instance of the service, the value of the property will remain the same while we render the product view component multiple times.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1542.1">
     We’ve
    </span>
    <a id="_idIndexMarker343">
    </a>
    <span class="koboSpan" id="kobo.1543.1">
     learned how dependencies are injected into the component hierarchy and how provider lookup is performed by bubbling the request upward in the component tree.
    </span>
    <span class="koboSpan" id="kobo.1543.2">
     However, what if we want to constrain such injection or lookup actions?
    </span>
    <span class="koboSpan" id="kobo.1543.3">
     We’ll see how to do so in the next section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-118">
    <span class="koboSpan" id="kobo.1544.1">
     Restricting provider lookup
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1545.1">
     We can only constrain dependency lookup to the next upper level.
    </span>
    <span class="koboSpan" id="kobo.1545.2">
     To do so, we need to apply
    </span>
    <a id="_idIndexMarker344">
    </a>
    <span class="koboSpan" id="kobo.1546.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1547.1">
      @Host
     </span>
    </code>
    <span class="koboSpan" id="kobo.1548.1">
     decorator to those dependency parameters whose provider lookup we want to restrict:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1549.1">import</span></span><span class="koboSpan" id="kobo.1550.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1551.1">CommonModule</span></span><span class="koboSpan" id="kobo.1552.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1553.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1554.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.1555.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1556.1">import</span></span><span class="koboSpan" id="kobo.1557.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1558.1">Component</span></span><span class="koboSpan" id="kobo.1559.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1560.1">Host</span></strong></span><span class="koboSpan" id="kobo.1561.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1562.1">OnInit</span></span><span class="koboSpan" id="kobo.1563.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1564.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1565.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1566.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1567.1">import</span></span><span class="koboSpan" id="kobo.1568.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1569.1">Product</span></span><span class="koboSpan" id="kobo.1570.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1571.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1572.1">'../product'</span></span><span class="koboSpan" id="kobo.1573.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1574.1">import</span></span><span class="koboSpan" id="kobo.1575.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1576.1">ProductsService</span></span><span class="koboSpan" id="kobo.1577.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1578.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1579.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1580.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1581.1">@Component</span></span><span class="koboSpan" id="kobo.1582.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1583.1">selector</span></span><span class="koboSpan" id="kobo.1584.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1585.1">'app-favorites'</span></span><span class="koboSpan" id="kobo.1586.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1587.1">imports</span></span><span class="koboSpan" id="kobo.1588.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1589.1">CommonModule</span></span><span class="koboSpan" id="kobo.1590.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1591.1">templateUrl</span></span><span class="koboSpan" id="kobo.1592.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1593.1">'./favorites.component.html'</span></span><span class="koboSpan" id="kobo.1594.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1595.1">styleUrl</span></span><span class="koboSpan" id="kobo.1596.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1597.1">'./favorites.component.css'</span></span><span class="koboSpan" id="kobo.1598.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1599.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1600.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1601.1">FavoritesComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1602.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1603.1">OnInit</span></span><span class="koboSpan" id="kobo.1604.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1605.1">products</span></span><span class="koboSpan" id="kobo.1606.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1607.1">Product</span></span><span class="koboSpan" id="kobo.1608.1">[] = [];
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1609.1">constructor</span></span><span class="koboSpan" id="kobo.1610.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1611.1">@Host()</span></strong></span><span class="hljs-params"> </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1612.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1613.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1614.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1615.1">ProductsService</span></span><span class="koboSpan" id="kobo.1616.1">) {}
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1617.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1618.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1619.1">void</span></span><span class="koboSpan" id="kobo.1620.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1621.1">this</span></span><span class="koboSpan" id="kobo.1622.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1623.1">products</span></span><span class="koboSpan" id="kobo.1624.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1625.1">this</span></span><span class="koboSpan" id="kobo.1626.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1627.1">productService</span></span><span class="koboSpan" id="kobo.1628.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1629.1">getProducts</span></span><span class="koboSpan" id="kobo.1630.1">();
  }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1631.1">
     In the preceding example, the element injector of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1632.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1633.1">
     will look for the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1634.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1635.1">
     class in its providers.
    </span>
    <span class="koboSpan" id="kobo.1635.2">
     If it does not provide the service, it will not bubble up the injector hierarchy; instead, it will stop and throw an exception in the console window of the browser:
    </span>
   </p>
   <p class="normal">
    <strong class="screenText">
     <span class="koboSpan" id="kobo.1636.1">
      Error: NG0201: No provider for _ProductsService found in NodeInjector.
     </span>
    </strong>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1637.1">
     We can
    </span>
    <a id="_idIndexMarker345">
    </a>
    <span class="koboSpan" id="kobo.1638.1">
     configure the injector so that it does not throw an error if we decorate the service with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1639.1">
      @Optional
     </span>
    </code>
    <span class="koboSpan" id="kobo.1640.1">
     decorator:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1641.1">import</span></span><span class="koboSpan" id="kobo.1642.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1643.1">CommonModule</span></span><span class="koboSpan" id="kobo.1644.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1645.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1646.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.1647.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1648.1">import</span></span><span class="koboSpan" id="kobo.1649.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1650.1">Component</span></span><span class="koboSpan" id="kobo.1651.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1652.1">Host</span></span><span class="koboSpan" id="kobo.1653.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1654.1">OnInit</span></span><span class="koboSpan" id="kobo.1655.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1656.1">Optional</span></strong></span><span class="koboSpan" id="kobo.1657.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1658.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1659.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1660.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1661.1">import</span></span><span class="koboSpan" id="kobo.1662.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1663.1">Product</span></span><span class="koboSpan" id="kobo.1664.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1665.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1666.1">'../product'</span></span><span class="koboSpan" id="kobo.1667.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1668.1">import</span></span><span class="koboSpan" id="kobo.1669.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1670.1">ProductsService</span></span><span class="koboSpan" id="kobo.1671.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1672.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1673.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1674.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1675.1">@Component</span></span><span class="koboSpan" id="kobo.1676.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1677.1">selector</span></span><span class="koboSpan" id="kobo.1678.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1679.1">'app-favorites'</span></span><span class="koboSpan" id="kobo.1680.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1681.1">imports</span></span><span class="koboSpan" id="kobo.1682.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1683.1">CommonModule</span></span><span class="koboSpan" id="kobo.1684.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1685.1">templateUrl</span></span><span class="koboSpan" id="kobo.1686.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1687.1">'./favorites.component.html'</span></span><span class="koboSpan" id="kobo.1688.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1689.1">styleUrl</span></span><span class="koboSpan" id="kobo.1690.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1691.1">'./favorites.component.css'</span></span><span class="koboSpan" id="kobo.1692.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1693.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1694.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1695.1">FavoritesComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1696.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1697.1">OnInit</span></span><span class="koboSpan" id="kobo.1698.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1699.1">products</span></span><span class="koboSpan" id="kobo.1700.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1701.1">Product</span></span><span class="koboSpan" id="kobo.1702.1">[] = [];
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1703.1">constructor</span></span><span class="koboSpan" id="kobo.1704.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1705.1">@Optional()</span></strong></span><span class="hljs-params"> </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1706.1">@Host</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1707.1">() </span></span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1708.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1709.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1710.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1711.1">ProductsService</span></span><span class="koboSpan" id="kobo.1712.1">) {}
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1713.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1714.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1715.1">void</span></span><span class="koboSpan" id="kobo.1716.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1717.1">this</span></span><span class="koboSpan" id="kobo.1718.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1719.1">products</span></span><span class="koboSpan" id="kobo.1720.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1721.1">this</span></span><span class="koboSpan" id="kobo.1722.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1723.1">productService</span></span><span class="koboSpan" id="kobo.1724.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1725.1">getProducts</span></span><span class="koboSpan" id="kobo.1726.1">();
  }
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1727.1">
     However, using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1728.1">
      @Optional
     </span>
    </code>
    <span class="koboSpan" id="kobo.1729.1">
     decorator does not solve the actual problem.
    </span>
    <span class="koboSpan" id="kobo.1729.2">
     The preceding snippet will still throw an error, different than the previous one, because we still use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1730.1">
      @Host
     </span>
    </code>
    <span class="koboSpan" id="kobo.1731.1">
     decorator that limits searching the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1732.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1733.1">
     class in the injector hierarchy.
    </span>
    <span class="koboSpan" id="kobo.1733.2">
     We need to refactor the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1734.1">
      ngOnInit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1735.1">
     lifecycle hook event so that it takes care of not finding the service instance.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1736.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1737.1">
      @Host
     </span>
    </code>
    <span class="koboSpan" id="kobo.1738.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1739.1">
      @Optional
     </span>
    </code>
    <span class="koboSpan" id="kobo.1740.1">
     decorators define the level at which the injector searches for dependencies.
    </span>
    <span class="koboSpan" id="kobo.1740.2">
     There are two other decorators, called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1741.1">
      @Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1742.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1743.1">
      @SkipSelf
     </span>
    </code>
    <span class="koboSpan" id="kobo.1744.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1744.2">
     When using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1745.1">
      @Self
     </span>
    </code>
    <span class="koboSpan" id="kobo.1746.1">
     decorator, the injector looks for dependencies in the injector of the current component.
    </span>
    <span class="koboSpan" id="kobo.1746.2">
     On the contrary, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1747.1">
      @SkipSelf
     </span>
    </code>
    <span class="koboSpan" id="kobo.1748.1">
     decorator instructs the injector to skip the local injector and search further up in the injector hierarchy.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1749.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1750.1">
       @Host
      </span>
     </code>
     <span class="koboSpan" id="kobo.1751.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1752.1">
       @Self
      </span>
     </code>
     <span class="koboSpan" id="kobo.1753.1">
      decorators
     </span>
     <a id="_idIndexMarker346">
     </a>
     <span class="koboSpan" id="kobo.1754.1">
      work similarly.
     </span>
     <span class="koboSpan" id="kobo.1754.2">
      For
     </span>
     <a id="_idIndexMarker347">
     </a>
     <span class="koboSpan" id="kobo.1755.1">
      more information about when to use each, have a look at
     </span>
     <a href="https://angular.dev/guide/di/hierarchical-dependency-injection#self">
      <span class="url">
       <span class="koboSpan" id="kobo.1756.1">
        https://angular.dev/guide/di/hierarchical-dependency-injection#self
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1757.1">
      and
     </span>
     <a href="https://angular.dev/guide/di/hierarchical-dependency-injection#host">
      <span class="url">
       <span class="koboSpan" id="kobo.1758.1">
        https://angular.dev/guide/di/hierarchical-dependency-injection#host
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1759.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1760.1">
     So far, we have learned how the Angular DI framework uses classes as dependency tokens to
    </span>
    <a id="_idIndexMarker348">
    </a>
    <span class="koboSpan" id="kobo.1761.1">
     work out the type required and return it from any providers available in the injector hierarchy.
    </span>
    <span class="koboSpan" id="kobo.1761.2">
     However, there are cases where we might need to override the instance of a class or provide types that are not actual classes, such as primitive types.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-119">
    <span class="koboSpan" id="kobo.1762.1">
     Overriding providers in the injector hierarchy
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1763.1">
     We already
    </span>
    <a id="_idIndexMarker349">
    </a>
    <span class="koboSpan" id="kobo.1764.1">
     learned how to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1765.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.1766.1">
     array of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1767.1">
      @Component
     </span>
    </code>
    <span class="koboSpan" id="kobo.1768.1">
     decorator in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1769.1">
      Sharing dependencies through components
     </span>
    </em>
    <span class="koboSpan" id="kobo.1770.1">
     section:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1771.1">providers: [ProductsService]
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1772.1">
     The preceding
    </span>
    <a id="_idIndexMarker350">
    </a>
    <span class="koboSpan" id="kobo.1773.1">
     syntax is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1774.1">
      class provider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1775.1">
     syntax
    </span>
    <a id="_idIndexMarker351">
    </a>
    <span class="koboSpan" id="kobo.1776.1">
     and is shorthand for the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1777.1">
      provide object literal
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1778.1">
     syntax
    </span>
    <a id="_idIndexMarker352">
    </a>
    <span class="koboSpan" id="kobo.1779.1">
     shown below:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.1780.1">providers</span></span><span class="koboSpan" id="kobo.1781.1">: [
  </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.1782.1">{ </span></code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1783.1">provide: ProductsService, useClass: ProductsService</span></strong></span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.1784.1"> }</span></code><span class="koboSpan" id="kobo.1785.1">
]
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1786.1">
     The preceding syntax uses an object with the following properties:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1787.1">
       provide
      </span>
     </code>
     <span class="koboSpan" id="kobo.1788.1">
      : This is the token used to configure the injector.
     </span>
     <span class="koboSpan" id="kobo.1788.2">
      It is the actual class that consumers of the dependency inject into their constructors.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1789.1">
       useClass
      </span>
     </code>
     <span class="koboSpan" id="kobo.1790.1">
      : This is the actual implementation the injector will provide to the consumers.
     </span>
     <span class="koboSpan" id="kobo.1790.2">
      The property name will differ according to the implementation type provided.
     </span>
     <span class="koboSpan" id="kobo.1790.3">
      The type can be a class, a value, or a factory function.
     </span>
     <span class="koboSpan" id="kobo.1790.4">
      In this case, we use
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1791.1">
       useClass
      </span>
     </code>
     <span class="koboSpan" id="kobo.1792.1">
      because we are providing a class.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1793.1">
     Let’s look at some examples to get an overview of how to use the provide object literal syntax.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-120">
    <span class="koboSpan" id="kobo.1794.1">
     Overriding service implementation
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1795.1">
     We have already learned that a component could share its dependencies with its child components.
    </span>
    <span class="koboSpan" id="kobo.1795.2">
     Consider the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1796.1">
      FavoritesComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1797.1">
     , where we used the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1798.1">
      slice
     </span>
    </code>
    <span class="koboSpan" id="kobo.1799.1">
     pipe to display a
    </span>
    <a id="_idIndexMarker353">
    </a>
    <span class="koboSpan" id="kobo.1800.1">
     list of favorite products in its template.
    </span>
    <span class="koboSpan" id="kobo.1800.2">
     What if it needs to get data through a trimmed version of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1801.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1802.1">
     and not directly from the service instance of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1803.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1804.1">
     ?
    </span>
    <span class="koboSpan" id="kobo.1804.2">
     We could create a new service extending the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1805.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1806.1">
     class and filtering out data using
    </span>
    <a id="_idIndexMarker354">
    </a>
    <span class="koboSpan" id="kobo.1807.1">
     the native
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1808.1">
      Array.slice
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1809.1">
     method.
    </span>
    <span class="koboSpan" id="kobo.1809.2">
     Let’s create the new service and learn how to use it:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1810.1">
      Run the following command to generate the service:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1811.1">ng generate service favorites
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1812.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1813.1">
       favorites.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1814.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1815.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1816.1">
      statements:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1817.1">import</span></span><span class="koboSpan" id="kobo.1818.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1819.1">Product</span></span><span class="koboSpan" id="kobo.1820.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1821.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1822.1">'./product'</span></span><span class="koboSpan" id="kobo.1823.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1824.1">import</span></span><span class="koboSpan" id="kobo.1825.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1826.1">ProductsService</span></span><span class="koboSpan" id="kobo.1827.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1828.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1829.1">'./products.service'</span></span><span class="koboSpan" id="kobo.1830.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1831.1">
      Use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1832.1">
       extends
      </span>
     </code>
     <span class="koboSpan" id="kobo.1833.1">
      keyword in the class definition to indicate that
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1834.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1835.1">
      is the base class of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1836.1">
       FavoritesService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1837.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1838.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1839.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1840.1">FavoritesService</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1841.1">extends ProductsService</span></strong></span><span class="koboSpan" id="kobo.1842.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1843.1">constructor</span></span><span class="koboSpan" id="kobo.1844.1">() { }
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1845.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1846.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1847.1">
      to call the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1848.1">
       super
      </span>
     </code>
     <span class="koboSpan" id="kobo.1849.1">
      method and execute any business logic inside the base class
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1850.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1851.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1852.1">constructor</span></span><span class="koboSpan" id="kobo.1853.1">() {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1854.1">super();</span></strong></span><span class="koboSpan" id="kobo.1855.1">
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1856.1">
      Create the following service method that uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1857.1">
       slice
      </span>
     </code>
     <span class="koboSpan" id="kobo.1858.1">
      method to return only the first two products from the list:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1859.1">override</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1860.1">getProducts</span></span><span class="koboSpan" id="kobo.1861.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1862.1">Product</span></span><span class="koboSpan" id="kobo.1863.1">[] {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1864.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1865.1">super</span></span><span class="koboSpan" id="kobo.1866.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1867.1">getProducts</span></span><span class="koboSpan" id="kobo.1868.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1869.1">slice</span></span><span class="koboSpan" id="kobo.1870.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1871.1">1</span></span><span class="koboSpan" id="kobo.1872.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1873.1">3</span></span><span class="koboSpan" id="kobo.1874.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1875.1">
     The preceding method is marked with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1876.1">
      override
     </span>
    </code>
    <span class="koboSpan" id="kobo.1877.1">
     keyword to indicate that the implementation of the method replaces the corresponding method of the base class.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.1878.1">
      Open
     </span>
     <a id="_idIndexMarker355">
     </a>
     <span class="koboSpan" id="kobo.1879.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1880.1">
       favorites.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1881.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1882.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1883.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1884.1">import</span></span><span class="koboSpan" id="kobo.1885.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1886.1">FavoritesService</span></span><span class="koboSpan" id="kobo.1887.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1888.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1889.1">'../favorites.service'</span></span><span class="koboSpan" id="kobo.1890.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1891.1">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1892.1">
       FavoritesService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1893.1">
      class in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1894.1">
       providers
      </span>
     </code>
     <span class="koboSpan" id="kobo.1895.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1896.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.1897.1">
      decorator as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1898.1">@Component</span></span><span class="koboSpan" id="kobo.1899.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1900.1">selector</span></span><span class="koboSpan" id="kobo.1901.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1902.1">'app-favorites'</span></span><span class="koboSpan" id="kobo.1903.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1904.1">imports</span></span><span class="koboSpan" id="kobo.1905.1">: [],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1906.1">templateUrl</span></span><span class="koboSpan" id="kobo.1907.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1908.1">'./favorites.component.html'</span></span><span class="koboSpan" id="kobo.1909.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1910.1">styleUrl</span></span><span class="koboSpan" id="kobo.1911.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1912.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1913.1">./favorites.component.css'</span></span><span class="koboSpan" id="kobo.1914.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1915.1">providers: [</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1916.1">{ provide: ProductsService, useClass: FavoritesService }</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1917.1">]</span></strong></span><span class="koboSpan" id="kobo.1918.1">
})
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1919.1">
     In the preceding snippet, we removed
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1920.1">
      CommonModule
     </span>
    </code>
    <span class="koboSpan" id="kobo.1921.1">
     from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1922.1">
      imports
     </span>
    </code>
    <span class="koboSpan" id="kobo.1923.1">
     array because we no longer need the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1924.1">
      slice
     </span>
    </code>
    <span class="koboSpan" id="kobo.1925.1">
     pipe.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="8">
     <span class="koboSpan" id="kobo.1926.1">
      Finally, open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1927.1">
       favorites.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1928.1">
      file and remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1929.1">
       slice
      </span>
     </code>
     <span class="koboSpan" id="kobo.1930.1">
      pipe from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1931.1">
       @for
      </span>
     </code>
     <span class="koboSpan" id="kobo.1932.1">
      block.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1933.1">
     If we run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1934.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.1935.1">
     command, we will see that the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.1936.1">
      Favorites
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1937.1">
     section is still displayed correctly:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1938.1">
     <img alt="Εικόνα που περιέχει κείμενο, γραμματοσειρά, λογότυπο, γραφικά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_05_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1939.1">
     Figure 5.7: Favorite products list
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1940.1">
      The preceding output assumes that you have already imported and added the favorites component in the product list component.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1941.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1942.1">
      useClass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1943.1">
     property
    </span>
    <a id="_idIndexMarker356">
    </a>
    <span class="koboSpan" id="kobo.1944.1">
     essentially overwrote the initial implementation of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1945.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1946.1">
     class for the favorites component.
    </span>
    <span class="koboSpan" id="kobo.1946.2">
     Alternatively, we can go the extra mile and use a function to return a specific object instance that we need, as we will learn in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-121">
    <span class="koboSpan" id="kobo.1947.1">
     Providing services conditionally
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1948.1">
     In the
    </span>
    <a id="_idIndexMarker357">
    </a>
    <span class="koboSpan" id="kobo.1949.1">
     example in the previous section, we used the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1950.1">
      useClass
     </span>
    </code>
    <span class="koboSpan" id="kobo.1951.1">
     syntax to replace the implementation of the injected
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1952.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1953.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.1953.2">
     Alternatively, we could create a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1954.1">
      factory function
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1955.1">
     that decides whether it will return an instance of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1956.1">
      FavoritesService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1957.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1958.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1959.1">
     class according to a condition.
    </span>
    <span class="koboSpan" id="kobo.1959.2">
     The function would reside in a simple TypeScript file named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1960.1">
      favorites.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1961.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1962.1">import</span></span><span class="koboSpan" id="kobo.1963.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1964.1">FavoritesService</span></span><span class="koboSpan" id="kobo.1965.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1966.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1967.1">'./favorites.service'</span></span><span class="koboSpan" id="kobo.1968.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1969.1">import</span></span><span class="koboSpan" id="kobo.1970.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1971.1">ProductsService</span></span><span class="koboSpan" id="kobo.1972.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1973.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1974.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1975.1">./products.service'</span></span><span class="koboSpan" id="kobo.1976.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1977.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1978.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1979.1">favoritesFactory</span></span><span class="koboSpan" id="kobo.1980.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1981.1">isFavorite</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1982.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1983.1">boolean</span></span><span class="koboSpan" id="kobo.1984.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1985.1">return</span></span> <span class="hljs-function"><span class="koboSpan" id="kobo.1986.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1987.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1988.1">if</span></span><span class="koboSpan" id="kobo.1989.1"> (isFavorite) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1990.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1991.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1992.1">FavoritesService</span></span><span class="koboSpan" id="kobo.1993.1">();
    }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1994.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1995.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1996.1">ProductsService</span></span><span class="koboSpan" id="kobo.1997.1">();
  };
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1998.1">
     We could
    </span>
    <a id="_idIndexMarker358">
    </a>
    <span class="koboSpan" id="kobo.1999.1">
     then modify the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2000.1">
      providers
     </span>
    </code>
    <span class="koboSpan" id="kobo.2001.1">
     array in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2002.1">
      favorites.component.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2003.1">
     file as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2004.1">import</span></span><span class="koboSpan" id="kobo.2005.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2006.1">CommonModule</span></span><span class="koboSpan" id="kobo.2007.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2008.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2009.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.2010.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2011.1">import</span></span><span class="koboSpan" id="kobo.2012.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2013.1">Component</span></span><span class="koboSpan" id="kobo.2014.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2015.1">OnInit</span></span><span class="koboSpan" id="kobo.2016.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2017.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2018.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2019.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2020.1">import</span></span><span class="koboSpan" id="kobo.2021.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2022.1">Product</span></span><span class="koboSpan" id="kobo.2023.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2024.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2025.1">'../product'</span></span><span class="koboSpan" id="kobo.2026.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2027.1">import</span></span><span class="koboSpan" id="kobo.2028.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2029.1">ProductsService</span></span><span class="koboSpan" id="kobo.2030.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2031.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2032.1">'../products.service'</span></span><span class="koboSpan" id="kobo.2033.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2034.1">import { favoritesFactory } from '../favorites';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2035.1">@Component</span></span><span class="koboSpan" id="kobo.2036.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2037.1">selector</span></span><span class="koboSpan" id="kobo.2038.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2039.1">'app-favorites'</span></span><span class="koboSpan" id="kobo.2040.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2041.1">imports</span></span><span class="koboSpan" id="kobo.2042.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.2043.1">CommonModule</span></span><span class="koboSpan" id="kobo.2044.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2045.1">templateUrl</span></span><span class="koboSpan" id="kobo.2046.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2047.1">'./favorites.component.html'</span></span><span class="koboSpan" id="kobo.2048.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2049.1">styleUrl</span></span><span class="koboSpan" id="kobo.2050.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2051.1">'./favorites.component.css'</span></span><span class="koboSpan" id="kobo.2052.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2053.1">providers: [</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2054.1">{ provide: ProductsService, useFactory: favoritesFactory(true) }</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2055.1">]</span></strong></span><span class="koboSpan" id="kobo.2056.1">
})
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2057.1">
     It is worth noting that if one of the services also injected other dependencies, the previous syntax would not suffice.
    </span>
    <span class="koboSpan" id="kobo.2057.2">
     For example, if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2058.1">
      FavoritesService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2059.1">
     class was dependent on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2060.1">
      ProductViewService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2061.1">
     class, we would add it to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2062.1">
      deps
     </span>
    </code>
    <span class="koboSpan" id="kobo.2063.1">
     property of the provide object literal syntax:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.2064.1">providers</span></span><span class="koboSpan" id="kobo.2065.1">: [
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2066.1">provide</span></span><span class="koboSpan" id="kobo.2067.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2068.1">ProductsService</span></span><span class="koboSpan" id="kobo.2069.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2070.1">useFactory</span></span><span class="koboSpan" id="kobo.2071.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2072.1">favoritesFactory</span></span><span class="koboSpan" id="kobo.2073.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.2074.1">true</span></span><span class="koboSpan" id="kobo.2075.1">),
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2076.1">deps: [ProductViewService]</span></strong></span><span class="koboSpan" id="kobo.2077.1">
  }
]
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2078.1">
     We could
    </span>
    <a id="_idIndexMarker359">
    </a>
    <span class="koboSpan" id="kobo.2079.1">
     then use it in the factory function of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2080.1">
      favorites.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2081.1">
     file as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2082.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2083.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2084.1">favoritesFactory</span></span><span class="koboSpan" id="kobo.2085.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.2086.1">isFavorite</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2087.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2088.1">boolean</span></span><span class="koboSpan" id="kobo.2089.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2090.1">return</span></span> <span class="hljs-function"><span class="koboSpan" id="kobo.2091.1">(</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2092.1">productViewService: ProductViewService</span></strong></span><span class="hljs-function"><span class="koboSpan" id="kobo.2093.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2094.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2095.1">if</span></span><span class="koboSpan" id="kobo.2096.1"> (isFavorite) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2097.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2098.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2099.1">FavoritesService</span></span><span class="koboSpan" id="kobo.2100.1">();
    }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2101.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2102.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2103.1">ProductsService</span></span><span class="koboSpan" id="kobo.2104.1">();
  };
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2105.1">
     We have already learned how to provide an alternate class implementation for an Angular service.
    </span>
    <span class="koboSpan" id="kobo.2105.2">
     What if the dependency we want to provide is not a class but a string or an object?
    </span>
    <span class="koboSpan" id="kobo.2105.3">
     We can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2106.1">
      useValue
     </span>
    </code>
    <span class="koboSpan" id="kobo.2107.1">
     syntax to accomplish this task.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-122">
    <span class="koboSpan" id="kobo.2108.1">
     Transforming objects in Angular services
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2109.1">
     It is common to keep application settings in a constant object in real-world applications.
    </span>
    <span class="koboSpan" id="kobo.2109.2">
     How
    </span>
    <a id="_idIndexMarker360">
    </a>
    <span class="koboSpan" id="kobo.2110.1">
     could we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2111.1">
      useValue
     </span>
    </code>
    <span class="koboSpan" id="kobo.2112.1">
     syntax to provide these settings in our components?
    </span>
    <span class="koboSpan" id="kobo.2112.2">
     We will learn more by creating settings for our application, such as the version number and the title:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2113.1">
      Create an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2114.1">
       app.settings.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2115.1">
      file in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2116.1">
       src\app
      </span>
     </code>
     <span class="koboSpan" id="kobo.2117.1">
      folder of the Angular CLI workspace and add the following contents:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2118.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2119.1">interface</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2120.1">AppSettings</span></span><span class="koboSpan" id="kobo.2121.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2122.1">title</span></span><span class="koboSpan" id="kobo.2123.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2124.1">string</span></span><span class="koboSpan" id="kobo.2125.1">;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2126.1">version</span></span><span class="koboSpan" id="kobo.2127.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2128.1">string</span></span><span class="koboSpan" id="kobo.2129.1">;
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2130.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2131.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2132.1">appSettings</span></span><span class="koboSpan" id="kobo.2133.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2134.1">AppSettings</span></span><span class="koboSpan" id="kobo.2135.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2136.1">title</span></span><span class="koboSpan" id="kobo.2137.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2138.1">'My e-shop'</span></span><span class="koboSpan" id="kobo.2139.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2140.1">version</span></span><span class="koboSpan" id="kobo.2141.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2142.1">'1.0'</span></span><span class="koboSpan" id="kobo.2143.1">
};
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2144.1">
     You may think we could provide these settings as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2145.1">
      { provide: AppSettings, useValue: appSettings }
     </span>
    </code>
    <span class="koboSpan" id="kobo.2146.1">
     , but this would throw an error because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2147.1">
      AppSettings
     </span>
    </code>
    <span class="koboSpan" id="kobo.2148.1">
     is an interface, not a class.
    </span>
    <span class="koboSpan" id="kobo.2148.2">
     Interfaces are syntactic sugar in TypeScript that are thrown away during compilation.
    </span>
    <span class="koboSpan" id="kobo.2148.3">
     Instead, we should provide an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2149.1">
      InjectionToken
     </span>
    </code>
    <span class="koboSpan" id="kobo.2150.1">
     object.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.2151.1">
      Add the following statement to import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2152.1">
       InjectionToken
      </span>
     </code>
     <span class="koboSpan" id="kobo.2153.1">
      class from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2154.1">
       @angular/core
      </span>
     </code>
     <span class="koboSpan" id="kobo.2155.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2156.1">import</span></span><span class="koboSpan" id="kobo.2157.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2158.1">InjectionToken</span></span><span class="koboSpan" id="kobo.2159.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2160.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2161.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2162.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2163.1">
      Declare
     </span>
     <a id="_idIndexMarker361">
     </a>
     <span class="koboSpan" id="kobo.2164.1">
      the following constant variable that uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2165.1">
       InjectionToken
      </span>
     </code>
     <span class="koboSpan" id="kobo.2166.1">
      type:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2167.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2168.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2169.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.2170.1"> = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2171.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2172.1">InjectionToken</span></span><span class="koboSpan" id="kobo.2173.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2174.1">AppSettings</span></span><span class="koboSpan" id="kobo.2175.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2176.1">'app.settings'</span></span><span class="koboSpan" id="kobo.2177.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2178.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2179.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2180.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2181.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2182.1">
      statements as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2183.1">import</span></span><span class="koboSpan" id="kobo.2184.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2185.1">Component</span></span><span class="koboSpan" id="kobo.2186.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2187.1">inject</span></strong></span><span class="koboSpan" id="kobo.2188.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2189.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2190.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2191.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2192.1">import</span></span><span class="koboSpan" id="kobo.2193.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2194.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.2195.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2196.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2197.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2198.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2199.1">import</span></span><span class="koboSpan" id="kobo.2200.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2201.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.2202.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2203.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2204.1">'./product-list/product-list.component'</span></span><span class="koboSpan" id="kobo.2205.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2206.1">import</span></span><span class="koboSpan" id="kobo.2207.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2208.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.2209.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2210.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2211.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2212.1">./copyright.directive'</span></span><span class="koboSpan" id="kobo.2213.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2214.1">import { APP_SETTINGS, appSettings } from './app.settings';</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2215.1">
      Add the application settings token in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2216.1">
       providers
      </span>
     </code>
     <span class="koboSpan" id="kobo.2217.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2218.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.2219.1">
      decorator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.2220.1">@Component</span></span><span class="koboSpan" id="kobo.2221.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2222.1">selector</span></span><span class="koboSpan" id="kobo.2223.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2224.1">'app-root'</span></span><span class="koboSpan" id="kobo.2225.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2226.1">imports</span></span><span class="koboSpan" id="kobo.2227.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2228.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.2229.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2230.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.2231.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2232.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.2233.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2234.1">templateUrl</span></span><span class="koboSpan" id="kobo.2235.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2236.1">'./app.component.html'</span></span><span class="koboSpan" id="kobo.2237.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2238.1">styleUrl</span></span><span class="koboSpan" id="kobo.2239.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2240.1">'./app.component.css'</span></span><span class="koboSpan" id="kobo.2241.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2242.1">providers: [</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">    </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2243.1">{ provide: APP_SETTINGS, useValue: appSettings }</span></strong></span>
<code class="codeHighlighted" style="font-weight: bold;">  </code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2244.1">]</span></strong></span><span class="koboSpan" id="kobo.2245.1">
})
</span></code></pre>
     <div class="packt_tip-one">
      <p class="normal">
       <span class="koboSpan" id="kobo.2246.1">
        The
       </span>
       <code class="inlineCode">
        <span class="koboSpan" id="kobo.2247.1">
         useValue
        </span>
       </code>
       <span class="koboSpan" id="kobo.2248.1">
        syntax is particularly useful when testing Angular applications.
       </span>
       <span class="koboSpan" id="kobo.2248.2">
        We will use it extensively when we learn about unit testing in
       </span>
       <em class="chapterRef">
        <span class="koboSpan" id="kobo.2249.1">
         Chapter 13
        </span>
       </em>
       <span class="koboSpan" id="kobo.2250.1">
        ,
       </span>
       <em class="italic">
        <span class="koboSpan" id="kobo.2251.1">
         Unit Testing Angular Applications
        </span>
       </em>
       <span class="koboSpan" id="kobo.2252.1">
        .
       </span>
      </p>
     </div>
    </li>
   </ol>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.2253.1">
      Add the following property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2254.1">
       AppComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.2255.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2256.1">settings = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2257.1">inject</span></span><span class="koboSpan" id="kobo.2258.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2259.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.2260.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2261.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2262.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.2263.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2264.1">
       &lt;footer&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2265.1">
      tag to include the application version:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2266.1">&lt;footer appCopyright&gt; </span><code class="codeHighlighted" style="font-weight: bold;"><span class="koboSpan" id="kobo.2267.1">- </span></code><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2268.1">v{{ settings.version }}</span></strong></span><span class="koboSpan" id="kobo.2269.1">&lt;/footer&gt;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2270.1">
      Run the application using the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2271.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.2272.1">
      command and observe the footer in the application output:
     </span>
    </li>
   </ol>
   <p class="normal-one">
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2273.1">
      Copyright ©2024 All Rights Reserved - v1.0
     </span>
    </strong>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2274.1">
     Note that
    </span>
    <a id="_idIndexMarker362">
    </a>
    <span class="koboSpan" id="kobo.2275.1">
     although the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2276.1">
      AppSettings
     </span>
    </code>
    <span class="koboSpan" id="kobo.2277.1">
     interface did not play a significant role in the injection process, we need it to provide typing on the configuration object.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2278.1">
     Angular DI is a powerful and robust mechanism that allows us to manage the dependencies of our applications efficiently.
    </span>
    <span class="koboSpan" id="kobo.2278.2">
     The Angular team has put much effort into making it simple to use and removed the burden from the developer’s side.
    </span>
    <span class="koboSpan" id="kobo.2278.3">
     As we have seen, the combinations are plentiful, and how we will use them depends on the use case.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-123">
    <span class="koboSpan" id="kobo.2279.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2280.1">
     The Angular DI implementation is the backbone of the Angular framework.
    </span>
    <span class="koboSpan" id="kobo.2280.2">
     Angular components delegate complex tasks to Angular services, based on the Angular DI.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2281.1">
     In this chapter, we learned what Angular DI is and how to leverage it by creating Angular services.
    </span>
    <span class="koboSpan" id="kobo.2281.2">
     We explored different ways of injecting Angular services into components.
    </span>
    <span class="koboSpan" id="kobo.2281.3">
     We saw how to share services between components, isolate services in components, and define dependency access through the component tree.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2282.1">
     Finally, we investigated how to override Angular services by replacing the service implementation or transforming existing objects into services.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2283.1">
     In the next chapter, we will learn what reactive programming is and how we can use observables in the context of Angular applications.
    </span>
   </p>
  </div>
 </body></html>