<html><head></head><body>
  <div id="_idContainer222" class="Basic-Text-Frame">
    <h1 class="chapterNumber">25</h1>
    <h1 id="_idParaDest-289" class="chapterTitle">Displaying Modal Screens</h1>
    <p class="normal">The goal of this chapter is to show you how to present information to the user in ways that don’t disrupt the current page. Pages use a <code class="inlineCode">View</code> component and render it directly on the screen. There are times, however, when there’s important information that the user needs to see but you don’t necessarily want to kick them off the current page.</p>
    <p class="normal">You’ll start by learning how to display important information. By knowing what information is important and when to use it, you’ll learn how to get user acknowledgment: both for error and success scenarios. Then, you’ll implement passive notifications that show the user that something has happened. Finally, you’ll implement <strong class="keyWord">modal views</strong> that show that something<a id="_idIndexMarker856"/> is happening in the background.</p>
    <p class="normal">The following topics will be covered in this chapter: </p>
    <ul>
      <li class="bulletList">Terminology definitions</li>
      <li class="bulletList">Getting user confirmation</li>
      <li class="bulletList">Passive notifications </li>
      <li class="bulletList">Activity modals</li>
    </ul>
    <h1 id="_idParaDest-290" class="heading-1">Technical requirements</h1>
    <p class="normal">You can find the code files for this chapter on GitHub at <a href="https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter24"><span class="url">https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter2</span></a><span class="url">5</span>.</p>
    <h1 id="_idParaDest-291" class="heading-1">Terminology definitions</h1>
    <p class="normal">Before you dive into implementing alerts, notifications, and confirmations, let’s take a few minutes and think about what each of these items means. I think this is important because if you end up passively notifying the user about an error, it can easily get missed. Here are my definitions of the types of information that you’ll want to display:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Alert</strong>: Something important<a id="_idIndexMarker857"/> just happened, and you need to ensure that the user sees what’s going on. Possibly, the user needs to acknowledge the alert.</li>
      <li class="bulletList"><strong class="keyWord">Confirmation</strong>: This is part of an alert. For example, if the<a id="_idIndexMarker858"/> user has just performed an action and then wants to make sure that it was successful before carrying on, they would have to confirm that they’ve seen the information in order to close the modal. A confirmation can also exist within an alert, warning the user about an action that they’re about to perform.</li>
      <li class="bulletList"><strong class="keyWord">Notification</strong>: Something happened<a id="_idIndexMarker859"/> but it’s not important enough to completely block what the user is doing. These typically go away on their own. </li>
    </ul>
    <p class="normal">The trick is to try to use notifications where the information is good to know but not critical. Use confirmations only when the workflow of the feature cannot continue without the user acknowledging what’s going on. In the following sections, you’ll see examples of alerts and notifications that are used for different purposes.</p>
    <h1 id="_idParaDest-292" class="heading-1">Getting user confirmation</h1>
    <p class="normal">In this section, you’ll learn<a id="_idIndexMarker860"/> how to show modal views in order to get confirmation from the user. First, you’ll learn how to implement a successful scenario, where an action generates a successful outcome that you want the user to be aware of. Then, you’ll learn how to implement an error scenario where something went wrong and you don’t want the user to move forward without acknowledging the issue.</p>
    <h2 id="_idParaDest-293" class="heading-2">Displaying a success confirmation</h2>
    <p class="normal">Let’s start by implementing<a id="_idIndexMarker861"/> a modal view that’s displayed as a result of the user successfully performing an action. Here’s the <code class="inlineCode">Modal</code> component, which<a id="_idIndexMarker862"/> is used to show the user a <strong class="keyWord">confirmation modal</strong>:</p>
    <pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">Props</span> = <span class="hljs-title">ModalProps</span> &amp; {
  <span class="hljs-attr">onPressConfirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>;
  <span class="hljs-attr">onPressCancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">ConfirmationModal</span>(<span class="hljs-params">{</span>
<span class="hljs-params">  onPressConfirm,</span>
<span class="hljs-params">  onPressCancel,</span>
<span class="hljs-params">  ...modalProps</span>
<span class="hljs-params">}: Props</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">Modal</span><span class="hljs-tag"> </span><span class="hljs-attr">transparent</span><span class="hljs-tag"> </span><span class="hljs-attr">onRequestClose</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> {}} {...modalProps}&gt;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalContainer}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalInner}</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalText}</span><span class="hljs-tag">&gt;</span>Dude, srsly?<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalButton}</span><span class="hljs-tag"> </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{onPressConfirm}</span><span class="hljs-tag">&gt;</span>
            Yep
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalButton}</span><span class="hljs-tag"> </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{onPressCancel}</span><span class="hljs-tag">&gt;</span>
            Nope
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">Modal</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">The properties that<a id="_idIndexMarker863"/> are passed to <code class="inlineCode">ConfirmationModal</code> are forwarded to the React Native <code class="inlineCode">Modal</code> component. You’ll see why in a moment. First, let’s see what this confirmation modal looks like:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_01.png" alt="Picture 1"/></figure>
    <p class="packt_figref">Figure 25.1: The confirmation modal</p>
    <p class="normal">The modal that’s displayed<a id="_idIndexMarker864"/> once the user completes an action uses our own styling and confirmation message. It also has two actions, but it may only need one, depending on whether this confirmation is pre-action or post-action. Here are the styles that are being used for this modal:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr">modalContainer</span>: {
    <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">"center"</span>,
  },
  <span class="hljs-attr">modalInner</span>: {
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"azure"</span>,
    <span class="hljs-attr">padding</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">"lightsteelblue"</span>,
    <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">"center"</span>,
  },
  <span class="hljs-attr">modalText</span>: {
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"slategrey"</span>,
  },
  <span class="hljs-attr">modalButton</span>: {
    <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">"bold"</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"slategrey"</span>,
  },
</code></pre>
    <p class="normal">With the React Native <code class="inlineCode">Modal</code> component, it’s pretty much up to you how you want your confirmation modal view to look. Think of them as regular views, with the only difference being that they’re rendered on top of other views.</p>
    <p class="normal">A lot of the time, you might<a id="_idIndexMarker865"/> not care to style your own modal views. For example, in web browsers, you can simply call the <code class="inlineCode">alert()</code> function, which shows text in a window that’s styled by the browser. React Native has something similar: <code class="inlineCode">Alert.alert()</code>. This is how we can open a native alert:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span> <span class="hljs-title">toggleAlert</span>() {
    <span class="hljs-title">Alert</span>.<span class="hljs-title">alert</span>(<span class="hljs-string">""</span>, <span class="hljs-string">"Failed to do the thing..."</span>, [
      {
        <span class="hljs-attr">text</span>: <span class="hljs-string">"Dismiss"</span>,
      },
    ]);
  }
</code></pre>
    <p class="normal">Here’s what the alert looks like on iOS:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_02.png" alt="Picture 2"/></figure>
    <p class="packt_figref">Figure 25.2: A confirmation alert on iOS</p>
    <p class="normal">In terms of functionality, there’s nothing<a id="_idIndexMarker866"/> really different here. There is a title and text beneath it, but that’s something that can easily be added to a modal view if you wanted. The real difference is that this modal looks like an iOS modal instead of something that’s styled by the app. Let’s see how this alert appears on Android:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_03.png" alt="Picture 3"/></figure>
    <p class="packt_figref">Figure 25.3: A confirmation alert on Android</p>
    <p class="normal">This modal looks like an Android modal, and you didn’t have to style it. I think using alerts over modals is a better choice most of the time. It makes sense to have something styled to look like it’s part of iOS or Android. However, there are times when you need more control over how the modal looks, such as when displaying error confirmations. </p>
    <p class="normal">The approach to rendering modals<a id="_idIndexMarker867"/> is different from the approach to rendering alerts. However, they’re both still declarative components that change based on the changing property values.</p>
    <h1 id="_idParaDest-294" class="heading-1">Error confirmation</h1>
    <p class="normal">All of the principles<a id="_idIndexMarker868"/> you learned about in the <em class="italic">Displaying a success confirmation</em> section are applicable when you need the user to acknowledge an error. If you need more control of the display, use a modal. For example, you might want the modal to be red and scary-looking, like this:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_04.png" alt="Picture 4"/></figure>
    <p class="packt_figref">Figure 25.4: The error confirmation modal</p>
    <p class="normal">Here are the styles that were used to create this look. Maybe you want something a bit more subtle, but the point is that you can make this look however you want:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr">modalInner</span>: {
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"azure"</span>,
    <span class="hljs-attr">padding</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">"lightsteelblue"</span>,
    <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">"center"</span>,
  },
</code></pre>
    <p class="normal">In the <code class="inlineCode">modalInner</code> style property, we’ve defined screen styles. Next, we’ll define modal styles: </p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr">modalInnerError</span>: {
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"lightcoral"</span>,
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">"darkred"</span>,
  },
  <span class="hljs-attr">modalText</span>: {
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"slategrey"</span>,
  },
  <span class="hljs-attr">modalTextError</span>: {
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">18</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"darkred"</span>,
  },
  <span class="hljs-attr">modalButton</span>: {
    <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">"bold"</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">"slategrey"</span>,
  },
  <span class="hljs-attr">modalButtonError</span>: {
    <span class="hljs-attr">color</span>: <span class="hljs-string">"black"</span>,
  },
</code></pre>
    <p class="normal">The same modal styles<a id="_idIndexMarker869"/> that you used for the success confirmations are still here. That’s because the error confirmation modal needs many of the same style properties. </p>
    <p class="normal">Here’s how you apply both to the <code class="inlineCode">Modal</code> component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> innerViewStyle = [styles.<span class="hljs-property">modalInner</span>, styles.<span class="hljs-property">modalInnerError</span>];
<span class="hljs-keyword">const</span> textStyle = [styles.<span class="hljs-property">modalText</span>, styles.<span class="hljs-property">modalTextError</span>];
<span class="hljs-keyword">const</span> buttonStyle = [styles.<span class="hljs-property">modalButton</span>, styles.<span class="hljs-property">modalButtonError</span>];
type <span class="hljs-title">Props</span> = <span class="hljs-title">ModalProps</span> &amp; {
  <span class="hljs-attr">onPressConfirm</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>;
  <span class="hljs-attr">onPressCancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">ErrorModal</span>(<span class="hljs-params">{</span>
<span class="hljs-params">  onPressConfirm,</span>
<span class="hljs-params">  onPressCancel,</span>
<span class="hljs-params">  ...modalProps</span>
<span class="hljs-params">}: Props</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">Modal</span><span class="hljs-tag"> </span><span class="hljs-attr">transparent</span><span class="hljs-tag"> </span><span class="hljs-attr">onRequestClose</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> {}} {...modalProps}&gt;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalContainer}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{innerViewStyle}</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{textStyle}</span><span class="hljs-tag">&gt;</span>Epic fail!<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{buttonStyle}</span><span class="hljs-tag"> </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{onPressConfirm}</span><span class="hljs-tag">&gt;</span>
            Fix it
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{buttonStyle}</span><span class="hljs-tag"> </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{onPressCancel}</span><span class="hljs-tag">&gt;</span>
            Ignore it
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">Modal</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">The styles are combined as arrays<a id="_idIndexMarker870"/> before they’re passed to the <code class="inlineCode">style</code> component property. The styles error always comes last, since conflicting style properties, such as <code class="inlineCode">backgroundColor</code>, will be overridden by whatever comes later in the array.</p>
    <p class="normal">In addition to styles in error confirmations, you can include whatever advanced controls you want. It really depends on how your application lets users cope with errors: for example, maybe there are several courses of action that can be taken.</p>
    <p class="normal">However, the more common case is that something went wrong, and there’s nothing you can do about it besides making sure that the user is aware of the situation. In these cases, you can probably get away with just displaying an alert:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_05.png" alt="Picture 5"/></figure>
    <p class="packt_figref">Figure 25.5: An error alert</p>
    <p class="normal">Now that you’re able to display<a id="_idIndexMarker871"/> error notifications that require user engagement, it’s time to learn about less aggressive notifications that don’t disrupt what the user is currently doing.</p>
    <h1 id="_idParaDest-295" class="heading-1">Passive notifications</h1>
    <p class="normal">The notifications you’ve examined<a id="_idIndexMarker872"/> so far in this chapter all have required input from the user. This is by design because it’s important information that you’re forcing the user to look at. However, you don’t want to overdo this. For notifications that are important but not life-altering if ignored, you can use <strong class="keyWord">passive notifications</strong>. These are displayed in a less obtrusive way than modals and don’t require any user action to dismiss them.</p>
    <p class="normal">In this section, you’ll create<a id="_idIndexMarker873"/> an app that uses the <strong class="keyWord">Toast API</strong> provided by the <code class="inlineCode">react-native-root-toast</code> library. It’s called the Toast API because the information that’s displayed looks like a piece of toast popping up. <code class="inlineCode">Toasts</code> is a common component in Android to show some basic information that does not require user response. Since there is no Toast API for iOS, we will use a library that implements a similar API that works well on both platforms.</p>
    <p class="normal">Here’s what the <code class="inlineCode">App</code> component looks like:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">PassiveNotifications</span>() {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">RootSiblingParent</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.container}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span>
<span class="hljs-tag">          </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> {
            Toast.show("Something happened!", {
              duration: Toast.durations.LONG,
            });
          }}
        &gt;
          Show Notification
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">RootSiblingParent</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">First we should wrap<a id="_idIndexMarker874"/> our app in the <code class="inlineCode">RootSiblingParent</code> component and then we are ready to work with Toast API. To open a toast, we call the <code class="inlineCode">Toast.show</code> method.</p>
    <p class="normal">Here’s what the Toast notification looks like:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_06.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 25.6: An Android toast</p>
    <p class="normal">A notification stating <strong class="screenText">Something happened!</strong> is displayed<a id="_idIndexMarker875"/> at the bottom of the screen and is removed after a short delay. The key is that the notification is unobtrusive.</p>
    <p class="normal">Let’s take a look at how the same toasts look on an iOS device:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_07.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 25.7: An iOS notification</p>
    <p class="normal">In the next section, you’ll learn about activity modals, which show the user that something is happening.</p>
    <h1 id="_idParaDest-296" class="heading-1">Activity modals</h1>
    <p class="normal">In this final section of this chapter, you’ll implement<a id="_idIndexMarker876"/> a modal that shows a progress indicator. The idea is to display the modal and then hide it when the promise resolves. Here’s the code for the generic <code class="inlineCode">Activity</code> component, which shows a modal with <code class="inlineCode">ActivityIndicator</code>:</p>
    <pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">ActivityProps</span> = {
  <span class="hljs-attr">visible</span>: boolean;
  size?: <span class="hljs-string">"small"</span> | <span class="hljs-string">"large"</span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Activity</span>(<span class="hljs-params">{ visible, size = </span><span class="hljs-string">"large"</span><span class="hljs-params"> }: ActivityProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">Modal</span><span class="hljs-tag"> </span><span class="hljs-attr">visible</span><span class="hljs-tag">=</span><span class="hljs-string">{visible}</span><span class="hljs-tag"> </span><span class="hljs-attr">transparent</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.modalContainer}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">ActivityIndicator</span><span class="hljs-tag"> </span><span class="hljs-attr">size</span><span class="hljs-tag">=</span><span class="hljs-string">{size}</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">Modal</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">You might be tempted to pass the promise <a id="_idIndexMarker877"/>to the component so that it automatically hides when the promise resolves. I don’t think this is a good idea because then you would have to introduce the state into this component. Furthermore, it would depend on a promise in order to function. With the way you’ve implemented this component, you can show or hide the modal based on the <code class="inlineCode">visible</code> property alone. </p>
    <p class="normal">Here’s what the activity modal looks like on iOS:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_25_08.png" alt="Picture 8"/></figure>
    <p class="packt_figref">Figure 25.8: An activity modal</p>
    <p class="normal">There’s a semi-transparent background on the modal that’s placed over the main view with the <strong class="screenText">Fetch Stuff...</strong> link. By clicking <a id="_idIndexMarker878"/>on this link, we will be shown the <strong class="keyWord">activity loader</strong>. Here’s how this effect is created in <code class="inlineCode">styles.js</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">modalContainer</span>: {
    <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"rgba(0, 0, 0, 0.2)"</span>,
  },
</code></pre>
    <p class="normal">Instead of setting the actual <code class="inlineCode">Modal</code> component to transparent, you can set the transparency in <code class="inlineCode">backgroundColor</code>, which gives the look of an overlay. Now, let’s take a look at the code that controls this component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">App</span>() {
  <span class="hljs-keyword">const</span> [fetching, setFetching] = <span class="hljs-title">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [promise, setPromise] = <span class="hljs-title">useState</span>(<span class="hljs-title">Promise</span>.<span class="hljs-title">resolve</span>());
  <span class="hljs-keyword">function</span> <span class="hljs-title">onPress</span>() {
    <span class="hljs-title">setPromise</span>(
      <span class="hljs-keyword">new</span> <span class="hljs-title">Promise</span>(<span class="hljs-function">(</span><span class="hljs-params">resolve</span><span class="hljs-function">) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">3000</span>)).<span class="hljs-title">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title">setFetching</span>(<span class="hljs-literal">false</span>);
      })
    );
    <span class="hljs-title">setFetching</span>(<span class="hljs-literal">true</span>);
  }
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.container}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Activity</span><span class="hljs-tag"> </span><span class="hljs-attr">visible</span><span class="hljs-tag">=</span><span class="hljs-string">{fetching}</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{onPress}</span><span class="hljs-tag">&gt;</span>Fetch Stuff...<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">When the fetch link is pressed, a new promise<a id="_idIndexMarker879"/> is created that simulates asynchronous network activity. Then, when the promise resolves, you can change the <code class="inlineCode">fetching</code> state back to <code class="inlineCode">false</code> so that the activity dialog is hidden.</p>
    <h1 id="_idParaDest-297" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we learned about the need to show important information to mobile users. This sometimes involves explicit feedback from the user, even if that just means acknowledging the message. In other cases, passive notifications work better, since they’re less obtrusive than confirmation modals.</p>
    <p class="normal">There are two tools that we can use to display messages to users: modals and alerts. Modals are more flexible because they’re just like regular views. Alerts are good for displaying plain text, and they take care of styling concerns for us. On Android, we have the <code class="inlineCode">ToastAndroid</code> interface as well. We saw that it’s also possible to do this on iOS, but it just requires more work.</p>
    <p class="normal">In the next chapter, we’ll dig deeper into the gesture response system inside React Native, which makes for a better mobile experience than browsers can provide.</p>
  </div>
</body></html>