<html><head></head><body>
  <div id="_idContainer192" class="Basic-Text-Frame">
    <h1 class="chapterNumber">9</h1>
    <h1 id="_idParaDest-151" class="chapterTitle">Building a Component UI Library Using Angular CLI and Angular CDK</h1>
    <p class="normal">An Angular application consists of Angular components that are organized into modules. When components need to share a similar appearance or behavior across modules, we extract their functionality into reusable components and group them in a shared module. Reusable components may vary from complex UI structures with many controls, such as forms, to single native HTML elements, such as buttons.</p>
    <p class="normal">A component UI library is a <a id="_idIndexMarker510"/>collection of reusable components that can be used outside a specific application domain. A large enterprise application built with a monorepo architecture can use these components across all its applications. A project outside an organization can also use the same component library as an external dependency.</p>
    <p class="normal">The Angular CLI includes all the necessary tooling for creating libraries with Angular. The Angular <strong class="keyWord">Component Dev Kit </strong>(<strong class="keyWord">CDK</strong>) provides <a id="_idIndexMarker511"/>a broad range of functionalities for creating accessible and high-performant UI components. In this chapter, we will combine them<a id="_idIndexMarker512"/> with <strong class="keyWord">Bulma</strong>, a modern CSS framework, to create a simple component UI library from scratch.</p>
    <p class="normal">In this chapter, we will cover the following topics in more detail:</p>
    <ul>
      <li class="bulletList">Creating a library with the Angular CLI</li>
      <li class="bulletList">Building a draggable card list</li>
      <li class="bulletList">Interacting with the clipboard</li>
      <li class="bulletList">Publishing an Angular library to <code class="inlineCode">npm</code></li>
      <li class="bulletList">Using components as <strong class="keyWord">Angular elements</strong></li>
    </ul>
    <h1 id="_idParaDest-152" class="heading-1">Essential background theory and context</h1>
    <p class="normal">The Angular CDK contains a collection of common interactions and behaviors that we can apply to Angular components. It is at the heart of the Angular Material library but can be used with any CSS framework in an Angular application. The Angular CDK is available from the <code class="inlineCode">@angular/cdk</code> npm package.</p>
    <p class="normal">The Angular CLI supports creating Angular libraries out of the box. The functionality of an Angular library can be used only in Angular applications, and it is decoupled from specific business logic. If we want to use an Angular library in a non-Angular application, we must convert it into an Angular element.</p>
    <p class="normal"><strong class="keyWord">Custom elements</strong> are a web standard that allows the creation of HTML elements independent of any JavaScript framework. It works by declaring a custom HTML tag and associating it with a JavaScript class. The browser can identify the HTML tag and execute the JavaScript code defined inside the class.</p>
    <p class="normal">Angular elements are Angular components converted into custom elements using the <code class="inlineCode">@angular/elements</code> library. Packaging an Angular component as a custom element connects the Angular framework to the DOM of the element, enriching it with data binding, a component life cycle, and change detection features.</p>
    <h1 id="_idParaDest-153" class="heading-1">Project overview</h1>
    <p class="normal">In this project, we will <a id="_idIndexMarker513"/>build a component UI library for our Angular projects. Initially, we will use the Angular CLI to scaffold a new Angular workspace for our library. We will then use the Angular CDK and the Bulma CSS framework to create the following components:</p>
    <ul>
      <li class="bulletList">A list of cards that we can rearrange using drag-and-drop features</li>
      <li class="bulletList">A button that will allow us to copy arbitrary content to the clipboard</li>
    </ul>
    <p class="normal">We will learn how to deploy the library into a package registry such as <strong class="keyWord">npm</strong>. Finally, we will convert one of our components into an Angular element to share it with non-Angular applications <a id="_idIndexMarker514"/>using the <code class="inlineCode">ngx-build-plus</code> library. The following diagram provides an architectural overview <a id="_idIndexMarker515"/>of the project:</p>
    <figure class="mediaobject"><img src="../Images/B18465_09_01.png" alt="Εικόνα που περιέχει διάγραμμα  Περιγραφή που δημιουργήθηκε αυτόματα"/></figure>
    <p class="packt_figref">Figure 9.1 – Project architecture</p>
    <p class="normal">Build time: 1½ hours</p>
    <h1 id="_idParaDest-154" class="heading-1">Getting started</h1>
    <p class="normal">The following prerequisites and software tools are required to complete this project:</p>
    <ul>
      <li class="bulletList">Angular CLI: A CLI for Angular, which you can find at <a href="https://angular.io/cli"><span class="url">https://angular.io/cli</span></a>.</li>
      <li class="bulletList">GitHub material: The related code for this chapter can be found in the <code class="inlineCode">Chapter09</code> folder at <a href="https://github.com/PacktPublishing/Angular-Projects-Third-Edition"><span class="url">https://github.com/PacktPublishing/Angular-Projects-Third-Edition</span></a>.</li>
    </ul>
    <h1 id="_idParaDest-155" class="heading-1">Creating a library with the Angular CLI</h1>
    <p class="normal">Before we <a id="_idIndexMarker516"/>can start working with Angular libraries using the Angular CLI, we need to create an Angular CLI workspace. The<a id="_idIndexMarker517"/> Angular CLI workspace will contain our Angular library and an Angular application for testing the library.</p>
    <p class="normal">Use the following command to generate a new Angular CLI workspace:</p>
    <pre class="programlisting con"><code class="hljs-con">ng new my-components --defaults
</code></pre>
    <p class="normal">The preceding command will create a new Angular CLI workspace that contains an Angular application named <code class="inlineCode">my-components</code>. Navigate to the <code class="inlineCode">my-components</code> folder and execute the following command to generate a new Angular library:</p>
    <pre class="programlisting con"><code class="hljs-con">ng generate library ui-controls
</code></pre>
    <p class="normal">The<a id="_idIndexMarker518"/> preceding command will create a <code class="inlineCode">ui-controls</code> library inside the <code class="inlineCode">projects</code> folder of the workspace. It will contain various files and <a id="_idIndexMarker519"/>folders similar to those when creating an Angular application, including the following:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">src\lib</code>: This contains the source code of the library, such as modules, components, and services.</li>
      <li class="bulletList"><code class="inlineCode">src\public-api.ts</code>: This exports artifacts from the library that we want to make publicly available in other Angular applications.</li>
      <li class="bulletList"><code class="inlineCode">ng-package.json</code>: This contains a configuration for the <code class="inlineCode">ng-packagr</code> library that the Angular CLI uses under the hood for building libraries.</li>
      <li class="bulletList"><code class="inlineCode">tsconfig.lib.json</code>: The TypeScript configuration file for our library, which also contains several Angular compiler options.</li>
      <li class="bulletList"><code class="inlineCode">tsconfig.lib.prod.json</code>: The TypeScript configuration file used when building our library in production mode.</li>
    </ul>
    <p class="normal">The Angular CLI will generate a module, a component, and a service in the <code class="inlineCode">src\lib</code> folder for us by default. It will also export them so that they can be used by any Angular application that will use the library. You can see an example of this here:</p>
    <pre class="programlisting code"><code class="hljs-code"><code class="inlineCode">public-api.ts</code>
<span class="hljs-comment">/*</span>
<span class="hljs-comment">* Public API Surface of ui-controls</span>
<span class="hljs-comment">*/</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./lib/ui-controls.service'</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./lib/ui-controls.component'</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./lib/ui-controls.module'</span>;
</code></pre>
    <p class="normal">Now that we have set up our Angular CLI workspace, we can go ahead and install the Bulma and Angular CDK libraries as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Execute the following command to install the Angular CDK:
        <pre class="programlisting con"><code class="hljs-con">npm install @angular/cdk
</code></pre>
      </li>
      <li class="numberedList">Run the following command to install the Bulma CSS framework:
        <pre class="programlisting con"><code class="hljs-con">npm install bulma
</code></pre>
      </li>
      <li class="numberedList">Open <a id="_idIndexMarker520"/>the <code class="inlineCode">angular.json</code> configuration file and add the CSS style sheet file of the Bulma library to <a id="_idIndexMarker521"/>the <code class="inlineCode">styles</code> section of the <code class="inlineCode">build</code> architect entry, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"outputPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/my-components"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src/index.html"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src/main.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"polyfills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"zone.js"</span>
  <span class="hljs-punctuation">],</span>
  <span class="hljs-attr">"tsConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsconfig.app.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"</span><span class="hljs-attr">assets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"src/favicon.ico"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"src/assets"</span>
  <span class="hljs-punctuation">],</span>
  <span class="hljs-attr">"styles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"src/styles.css"</span><span class="hljs-punctuation">,</span>
    <span class="code-highlight"><strong class="hljs-string-slc">"</strong><strong class="hljs-string-slc">./node_modules/bulma/css/bulma.css"</strong></span>
  <span class="hljs-punctuation">],</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">package.json</code> file of the <code class="inlineCode">projects\ui-controls</code> folder and modify it accordingly:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ui-controls"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@angular/common"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@angular/core"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="code-highlight"><strong class="hljs-attr-slc">"@angular/cdk"</strong><strong class="hljs-punctuation-slc">:</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">"^16.0.3"</strong><strong class="hljs-punctuation-slc">,</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-attr-slc">"bulma"</strong><strong class="hljs-punctuation-slc">:</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">"^0.9.4"</strong></span>
  <span class="hljs-punctuation">},</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tslib"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.3.0"</span>
  <span class="hljs-punctuation">},</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
<span class="hljs-punctuation">}</span>
</code></pre>
      </li>
    </ol>
    <p class="normal">We add the Angular CDK and the Bulma library to the <code class="inlineCode">peerDependencies</code> section to ensure that any consuming application has a specific version of the packages to run our library.</p>
    <div class="note">
      <p class="normal">The version number of each package may vary if you follow along with this project. To ensure you have the correct versions, copy them from the <code class="inlineCode">package.json</code> file of the root folder of the workspace.</p>
    </div>
    <p class="normal">We<a id="_idIndexMarker522"/> have<a id="_idIndexMarker523"/> now completed the basic setup of our UI components library. We have also configured the Angular application that comes with the Angular CLI workspace to preview and test the library. In the following section, we will build the first component of our library—a card list that can be re-ordered.</p>
    <h1 id="_idParaDest-156" class="heading-1">Building a draggable card list</h1>
    <p class="normal">The first<a id="_idIndexMarker524"/> component of our UI library will <a id="_idIndexMarker525"/>be a list of Bulma card elements. Each card will display a title, a description, and an anchor link element. We will also be able to drag a card and change the order of the card list using the Angular CDK. Building our component will consist of the following tasks:</p>
    <ul>
      <li class="bulletList">Displaying card data</li>
      <li class="bulletList">Adding drag-and-drop functionality</li>
    </ul>
    <p class="normal">In the following section, we will first see how to display data on the card list.</p>
    <h2 id="_idParaDest-157" class="heading-2">Displaying card data</h2>
    <p class="normal">Our Angular<a id="_idIndexMarker526"/> application should pass a list of cards as an input property to the component for displaying them. Let’s see how we can create a draggable card component as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Execute the following Angular CLI command to create an Angular component:
        <pre class="programlisting con"><code class="hljs-con">ng generate component card-list --project=ui-controls --export
</code></pre>
    <p class="normal">The preceding command will create a <code class="inlineCode">card-list</code> component in the <code class="inlineCode">ui-controls</code> project of our Angular CLI workspace. The <code class="inlineCode">--export</code> option will also export the component from <code class="inlineCode">UiControlsModule</code>.</p>
    <p class="normal">The <code class="inlineCode">UiControlsModule</code> class is already exported from the <code class="inlineCode">public-api.ts</code> file. So, when our Angular application imports <code class="inlineCode">UiControlsModule</code>, it will also have our component available.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Use <a id="_idIndexMarker527"/>the <code class="inlineCode">generate</code> command of the Angular CLI to create an interface for the structure of card data, as follows:
        <pre class="programlisting con"><code class="hljs-con">ng generate interface card --project=ui-controls
</code></pre>
      </li>
      <li class="numberedList">The preceding command will create a <code class="inlineCode">card.ts</code> file in the <code class="inlineCode">ui-controls</code> project of our workspace.</li>
      <li class="numberedList">Open the <code class="inlineCode">card.ts</code> file and add the following properties to the <code class="inlineCode">Card</code> interface:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Card</span> {
  <span class="code-highlight"><strong class="hljs-attr-slc">title</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">string</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">description</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">string</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">link</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">string</strong><strong class="hljs-slc">;</strong></span>
}
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">public-api.ts</code> file and add the following <code class="inlineCode">export</code> statements to make the component and the interface available to the library consumers:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./lib/card-list/card-list.component'</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./lib/card'</span>;
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">card-list.component.ts</code> file and use the <code class="inlineCode">@Input</code> decorator to define an <code class="inlineCode">input</code> property as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span>, <span class="code-highlight"><strong class="hljs-title-slc">Input</strong></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">Card</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'</strong><strong class="hljs-string-slc">../card'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'lib-card-list'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./card-list.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./card-list.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CardListComponent</span> {
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-meta-slc">@Input</strong><strong class="hljs-slc">() </strong><strong class="hljs-attr-slc">cards</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Card</strong><strong class="hljs-slc">[] = [];</strong></span>
}
</code></pre>
    <p class="normal">The <code class="inlineCode">cards</code> property will be set later from the Angular application with the card data we want to display.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Open<a id="_idIndexMarker528"/> the <code class="inlineCode">card-list.component.html</code> file and replace its content with the following HTML template:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card m-4"</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngFor</span><span class="hljs-tag">=</span><span class="hljs-string">"let card of cards"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">header</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-header"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-header-title"</span><span class="hljs-tag">&gt;</span>{{card.title}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">header</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-content"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"content"</span><span class="hljs-tag">&gt;</span>{{card.description}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">footer</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-footer"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span><span class="hljs-tag"> [</span><span class="hljs-attr">href</span><span class="hljs-tag">]=</span><span class="hljs-string">"card.link"</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span>
<span class="hljs-tag">        </span><span class="hljs-string">"card-footer-item"</span><span class="hljs-tag">&gt;</span>View on Wikipedia<span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">footer</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">The preceding template uses the Bulma <code class="inlineCode">card</code> component and iterates over the <code class="inlineCode">cards</code> component property to display each one, using the <code class="inlineCode">*ngFor</code> directive.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Open the <code class="inlineCode">card-list.component.css</code> file and add the following CSS styles:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-selector-pseudo">:host</span> &gt; <span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-auto-flow</span>: column;
  <span class="hljs-attribute">overflow</span>: auto;
}
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
}
</code></pre>
    <p class="normal">In the preceding styles, we use the <code class="inlineCode">:host</code> selector to target the <code class="inlineCode">div</code> element in the <code class="inlineCode">host</code> element of our component and apply a <code class="inlineCode">grid</code> style to display all cards in a single row.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">Open the <code class="inlineCode">ui-controls.module.ts</code> file and add <code class="inlineCode">CommonModule</code> to the <code class="inlineCode">imports</code> array of the <code class="inlineCode">@NgModule</code> decorator, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">CommonModule</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'</strong><strong class="hljs-string-slc">@angular/common'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">UiControlsComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ui-controls.component'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">CardListComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./card-list/card-list.component'</span>;
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">UiControlsComponent</span>,
    <span class="hljs-title">CardListComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="code-highlight"><strong class="hljs-title-slc">CommonModule</strong></span>
  ],
  <span class="hljs-attr">exports</span>: [
    <span class="hljs-title">UiControlsComponent</span>,
    <span class="hljs-title">CardListComponent</span>
  ]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UiControlsModule</span> { }
</code></pre>
    <p class="normal">The <code class="inlineCode">CommonModule</code> class is needed for the <code class="inlineCode">*ngFor</code> directive in the card list component template.</p>
      </li>
    </ol>
    <p class="normal">Our <a id="_idIndexMarker529"/>component is ready to accept and display data in a card list representation. Let’s see how to consume it from the Angular application as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">First, execute the following command to build the component UI library:
        <pre class="programlisting con"><code class="hljs-con">ng build ui-controls
</code></pre>
    <p class="normal">The Angular CLI will start building the library, and it will have been completed as soon as you see the following output on the terminal:</p>
    <figure class="mediaobject"><img src="../Images/B18465_09_02.png" alt="Εικόνα που περιέχει τραπέζι  Περιγραφή που δημιουργήθηκε αυτόματα"/></figure>
    <p class="packt_figref">Figure 9.2 – Library build output</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Open the <code class="inlineCode">app.module.ts</code> file and add the <code class="inlineCode">UiControlsModule</code> class to the <code class="inlineCode">imports</code> array of the <code class="inlineCode">@NgModule</code> decorator, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">UiControlsModule</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'ui-controls'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">AppComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">BrowserModule</span>,
    <span class="code-highlight"><strong class="hljs-title-slc">UiControlsModule</strong></span>
  ],
  <span class="hljs-attr">providers</span>: [],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title">AppComponent</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppModule</span> { }
</code></pre>
    <div class="note">
      <p class="normal">We import <code class="inlineCode">UiControlsModule</code> from the <code class="inlineCode">ui-controls</code> namespace, which is the library name, and not from the full absolute path in our workspace.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Open<a id="_idIndexMarker530"/> the <code class="inlineCode">app.component.ts</code> file and declare a <code class="inlineCode">component</code> property of the <code class="inlineCode">Card[]</code> type, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">Card</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'ui-controls'</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { assassins } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'</strong><strong class="hljs-string-slc">./assassins'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./app.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./app.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> {
  title = <span class="hljs-string">'my-components'</span>;
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">cards</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Card</strong><strong class="hljs-slc">[] = assassins;</strong></span>
}
</code></pre>
    <p class="normal">We initialize the <code class="inlineCode">cards</code> component property using demo data from the <code class="inlineCode">assassins.ts</code> file, which you can find in the GitHub repository of the <em class="italic">Getting started</em> section.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Open the <code class="inlineCode">app.component.html</code> file and replace its content with the following HTML template:
        <pre class="programlisting code"><code class="hljs-code">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"container is-fluid"</span>&gt;
  <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"title"</span><span class="hljs-tag">&gt;</span>Assassins Creed Series<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">lib-card-list</span><span class="hljs-tag"> [</span><span class="hljs-attr">cards</span><span class="hljs-tag">]=</span><span class="hljs-string">"cards"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">lib-card-list</span><span class="hljs-tag">&gt;</span>
&lt;/div&gt;
</code></pre>
      </li>
      <li class="numberedList">To <a id="_idIndexMarker531"/>preview the application, run <code class="inlineCode">ng serve</code> and open your browser at <code class="inlineCode">http://localhost:4200</code>. You should then see something like this:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_09_03.png" alt="Figure 9.2 – Card list component"/></figure>
    <p class="packt_figref">Figure 9.3 – Card list component</p>
    <p class="normal">The card list component displays data that a consumer application passed using the <code class="inlineCode">cards</code> input property. In the following section, we will take our component a step further and make our cards able to change their location in the list.</p>
    <h2 id="_idParaDest-158" class="heading-2">Adding drag-and-drop functionality</h2>
    <p class="normal">A feature <a id="_idIndexMarker532"/>of the card list component is that we will be able to change the location of a card by dragging and dropping it into the list. The order of the card list should be emitted back to the consumer application using an output property binding.</p>
    <p class="normal">The Angular CDK contains a drag-and-drop module that we can use for this purpose. To do so, follow these steps:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">ui-controls.module.ts</code> file and import <code class="inlineCode">DragDropModule</code> from the <code class="inlineCode">@angular/cdk/drag-drop</code> namespace, like this:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">DragDropModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/cdk/drag-drop'</span>;
</code></pre>
      </li>
      <li class="numberedList">Add the <code class="inlineCode">DragDropModule</code> class to the <code class="inlineCode">imports</code> array of the <code class="inlineCode">@NgModule</code> decorator like this:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">UiControlsComponent</span>,
    <span class="hljs-title">CardListComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">CommonModule</span>,
    <span class="code-highlight"><strong class="hljs-title-slc">DragDropModule</strong></span>
  ],
  <span class="hljs-attr">exports</span>: [
    <span class="hljs-title">UiControlsComponent</span>,
    <span class="hljs-title">CardListComponent</span>
  ]
})
</code></pre>
      </li>
      <li class="numberedList">Open<a id="_idIndexMarker533"/> the <code class="inlineCode">card-list.component.html</code> file and modify the template as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc">cdkDropListOrientation</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"horizontal"</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">cdkDropList</strong><strong class="hljs-tag-slc"> (</strong><strong class="hljs-attr-slc">cdkDropListDropped</strong><strong class="hljs-tag-slc">)=</strong><strong class="hljs-string-slc">"sortCards($event)"</strong></span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc">cdkDrag</strong></span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card m-4"</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngFor</span><span class="hljs-tag">=</span><span class="hljs-string">"let card of cards"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">header</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">card-header"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-header-title"</span><span class="hljs-tag">&gt;</span>{{card.title}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">header</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-content"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"content"</span><span class="hljs-tag">&gt;</span>{{card.description}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">footer</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"card-footer"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span><span class="hljs-tag"> [</span><span class="hljs-attr">href</span><span class="hljs-tag">]=</span><span class="hljs-string">"card.link"</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">card-footer-item"</span><span class="hljs-tag">&gt;</span>View on Wikipedia<span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">footer</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">First, we add the <code class="inlineCode">cdkDrag</code> directive to each card element to be able to move it by dragging it. Then, we add the <code class="inlineCode">cdkDropList</code> directive to the container element to mark it as a drop list. A drop list in the Angular CDK indicates that its contents can be re-ordered using drag-and-drop actions. We set the drag-and-drop orientation to <code class="inlineCode">horizontal</code> because our card list is rendered in a single row, and we also bind a <code class="inlineCode">sortCards</code> component method to the <code class="inlineCode">cdkDropListDropped</code> event of the drop list.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Open <a id="_idIndexMarker534"/>the <code class="inlineCode">card-list.component.ts</code> file and modify the <code class="inlineCode">import</code> statements accordingly:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span>, <span class="hljs-title">Input</span>, <span class="code-highlight"><strong class="hljs-title-slc">Output</strong><strong class="hljs-slc">, </strong><strong class="hljs-title-slc">EventEmitter</strong></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">Card</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../card'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">CdkDragDrop</strong><strong class="hljs-slc">, moveItemInArray } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'@angular/cdk/drag-drop'</strong><strong class="hljs-slc">;</strong></span>
</code></pre>
      </li>
      <li class="numberedList">Create an output property using the <code class="inlineCode">@Output</code> decorator and use it in the <code class="inlineCode">sortCards</code> component method to emit the re-ordered list to the consumer of the component, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CardListComponent</span> {
  <span class="hljs-meta">@Input</span>() <span class="hljs-attr">cards</span>: <span class="hljs-title">Card</span>[] = [];
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-meta-slc">@Output</strong><strong class="hljs-slc">() cardChange = </strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">EventEmitter</strong><strong class="hljs-slc">&lt;</strong><strong class="hljs-title-slc">Card</strong><strong class="hljs-slc">[]&gt;();</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-title-slc">sortCards</strong><strong class="hljs-slc">(</strong><strong class="hljs-attr-slc">event</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">CdkDragDrop</strong><strong class="hljs-slc">&lt;</strong><strong class="hljs-built_in-slc">string</strong><strong class="hljs-slc">[]&gt;): </strong><strong class="hljs-built_in-slc">void</strong><strong class="hljs-slc"> {</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-title-slc">moveItemInArray</strong><strong class="hljs-slc">(</strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">cards</strong><strong class="hljs-slc">, event.</strong><strong class="hljs-property-slc">previousIndex</strong><strong class="hljs-slc">, event.</strong><strong class="hljs-property-slc">currentIndex</strong><strong class="hljs-slc">);</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">cardChange</strong><strong class="hljs-slc">.</strong><strong class="hljs-title-slc">emit</strong><strong class="hljs-slc">(</strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">cards</strong><strong class="hljs-slc">);</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  }</strong></span>
}
</code></pre>
    <p class="normal">In the previous code snippet, we use the <code class="inlineCode">moveItemInArray</code> built-in method of <code class="inlineCode">DragDropModule</code> to change the order of the <code class="inlineCode">cards</code> property. We pass the <code class="inlineCode">event</code> parameter to the <code class="inlineCode">moveItemInArray</code> method containing the previous and current index of the moved card. We also use the <code class="inlineCode">emit</code> method of the <code class="inlineCode">cardChange</code> property to propagate the change back to the Angular application.</p>
      </li>
    </ol>
    <p class="normal">The card list component has now acquired drag-and-drop superpowers. Let’s give it a try, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">app.component.html</code> file and add an event binding to the <code class="inlineCode">cardChange</code> event of the <code class="inlineCode">&lt;lib-card-list&gt;</code> component, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"container is-fluid"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">title"</span><span class="hljs-tag">&gt;</span>Assassins Creed Series<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">lib-card-list</span><span class="hljs-tag"> [</span><span class="hljs-attr">cards</span><span class="hljs-tag">]=</span><span class="hljs-string">"cards"</span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc">(</strong><strong class="hljs-attr-slc">cardChange</strong><strong class="hljs-tag-slc">)=</strong><strong class="hljs-string-slc">"onCardChange($event)"</strong></span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">lib-card-list</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
      <li class="numberedList">Open<a id="_idIndexMarker535"/> the <code class="inlineCode">app.component.ts</code> file and create an <code class="inlineCode">onCardChange</code> method to log the new card list as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">onCardChange</span>(<span class="hljs-params">cards: Card[]</span>) {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(cards);
}
</code></pre>
      </li>
      <li class="numberedList">Run the following command to build the library:
        <pre class="programlisting con"><code class="hljs-con">ng build ui-controls
</code></pre>
      </li>
      <li class="numberedList">Execute the <code class="inlineCode">serve</code> command of the Angular CLI to start your application like this:
        <pre class="programlisting con"><code class="hljs-con">ng serve
</code></pre>
      </li>
      <li class="numberedList">Try to drag and drop some of the cards from the list and notice the output in the <strong class="screenText">Console</strong> window of your browser and the actual application.</li>
    </ol>
    <p class="normal">The first component of our UI library is now packed with all the functionality to make it a drag-and-drop list. It can display a list passed from our Angular application in a Bulma card format. It can also change the order of each item in the list using the Angular CDK drag-and-drop module, and propagate the change back to our application.</p>
    <p class="normal">In the following section, we will create a second component of our library for copying data to the clipboard.</p>
    <h1 id="_idParaDest-159" class="heading-1">Interacting with the clipboard</h1>
    <p class="normal">The<a id="_idIndexMarker536"/> Angular CDK library contains a collection of Angular artifacts that we can use to interact with the system clipboard. Specifically, it includes a directive for copying data to the clipboard and an event binding for taking additional action when the content has been copied. Let’s see how we can integrate both in to our component library, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Execute the following command of the Angular CLI to create a new Angular component in the library:
        <pre class="programlisting con"><code class="hljs-con">ng generate component copy-button --project=ui-controls --export
</code></pre>
      </li>
      <li class="numberedList">Export the newly generated component from the <code class="inlineCode">public-api.ts</code> file as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./lib/copy-button/copy-button.component'</span>;
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">ui-controls.module.ts</code> file and import <code class="inlineCode">ClipboardModule</code> from the <code class="inlineCode">@angular/cdk/clipboard</code> namespace, like this:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">ClipboardModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/cdk/clipboard'</span>;
</code></pre>
      </li>
      <li class="numberedList">Add the <code class="inlineCode">ClipboardModule</code> class to the <code class="inlineCode">imports</code> array of the <code class="inlineCode">@NgModule</code> decorator like this:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">UiControlsComponent</span>,
    <span class="hljs-title">CardListComponent</span>,
    <span class="hljs-title">CopyButtonComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">CommonModule</span>,
    <span class="hljs-title">DragDropModule</span>,
    <span class="code-highlight"><strong class="hljs-title-slc">ClipboardModule</strong></span>
  ],
  <span class="hljs-attr">exports</span>: [
    <span class="hljs-title">UiControlsComponent</span>,
    <span class="hljs-title">CardListComponent</span>,
    <span class="hljs-title">CopyButtonComponent</span>
  ]
})
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">copy-button.component.ts</code> file and declare the following component properties:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span>, <span class="code-highlight"><strong class="hljs-title-slc">EventEmitter</strong><strong class="hljs-slc">, </strong><strong class="hljs-title-slc">Input</strong><strong class="hljs-slc">, </strong><strong class="hljs-title-slc">Output</strong></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'lib-copy-button'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./copy-button.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./copy-button.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CopyButtonComponent</span> {
  <span class="code-highlight"><strong class="hljs-meta-slc">@Input</strong><strong class="hljs-slc">() data = </strong><strong class="hljs-string-slc">''</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-meta-slc">@Output</strong><strong class="hljs-slc">() copied = </strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">EventEmitter</strong><strong class="hljs-slc">&lt;</strong><strong class="hljs-built_in-slc">void</strong><strong class="hljs-slc">&gt;();</strong></span>
}
</code></pre>
    <p class="normal">The <code class="inlineCode">data</code> property will be used to set clipboard data, and the <code class="inlineCode">copied</code> event will fire <a id="_idIndexMarker537"/>when the data is successfully copied to the clipboard.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Create a component method to trigger a <code class="inlineCode">copied</code> output event, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">onCopy</span>() {
  <span class="hljs-variable">this</span>.<span class="hljs-property">copied</span>.<span class="hljs-title">next</span>();
}
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">copy-button.component.html</code> file and replace its content with the following HTML template:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"button is-light is-primary"</span><span class="hljs-tag"> [</span><span class="hljs-attr">cdkCopyToClipboard</span><span class="hljs-tag">]=</span><span class="hljs-string">"data"</span><span class="hljs-tag"> (</span><span class="hljs-attr">cdkCopyToClipboardCopied</span><span class="hljs-tag">)=</span><span class="hljs-string">"onCopy()"</span><span class="hljs-tag">&gt;</span>
  Copy
<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In the preceding template, we use a Bulma <code class="inlineCode">button</code> component and attach two Angular CDK bindings to it. The <code class="inlineCode">cdkCopyToClipboard</code> property binding indicates that the <code class="inlineCode">data</code> component property will be copied to the clipboard when the button is clicked. The <code class="inlineCode">cdkCopyToClipboardCopied</code> event binding will call the <code class="inlineCode">onCopy</code> component method as soon as data has been copied to the clipboard successfully.</p>
      </li>
    </ol>
    <p class="normal">Now that we have set up our component, let’s find out how to use it in our Angular application, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">app.component.html</code> file and add a <code class="inlineCode">&lt;div&gt;</code> element that consists of an <code class="inlineCode">&lt;input&gt;</code> element and the <code class="inlineCode">&lt;lib-copy-button&gt;</code> component, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"container is-fluid"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"title"</span><span class="hljs-tag">&gt;</span>Assassins Creed Series<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">lib-card-list</span><span class="hljs-tag"> [</span><span class="hljs-attr">cards</span><span class="hljs-tag">]=</span><span class="hljs-string">"cards"</span><span class="hljs-tag"> (</span><span class="hljs-attr">cardChange</span><span class="hljs-tag">)=</span><span class="hljs-string">"onCardChange($event)"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">lib-card-list</span><span class="hljs-tag">&gt;</span>
  <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">h1</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">class</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"title mt-5"</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Clipboard interaction</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">h1</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">div</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">class</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"field has-addons"</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">div</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">class</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"control"</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">input</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">class</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"input"</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">type</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"text"</strong><strong class="hljs-tag-slc"> [(</strong><strong class="hljs-attr-slc">ngModel</strong><strong class="hljs-tag-slc">)]=</strong><strong class="hljs-string-slc">"title"</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">div</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">div</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">class</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"control"</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">      </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">lib-copy-button</strong><strong class="hljs-tag-slc"> [</strong><strong class="hljs-attr-slc">data</strong><strong class="hljs-tag-slc">]=</strong><strong class="hljs-string-slc">"title"</strong><strong class="hljs-tag-slc"> (</strong><strong class="hljs-attr-slc">copied</strong><strong class="hljs-tag-slc">)=</strong><strong class="hljs-string-slc">"log()"</strong><strong class="hljs-tag-slc">&gt;&lt;/</strong><strong class="hljs-name-slc">lib-copy-button</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">div</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">div</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In <a id="_idIndexMarker538"/>the previous template, we bind the <code class="inlineCode">title</code> property of the component to the <code class="inlineCode">&lt;input&gt;</code> element using the <code class="inlineCode">ngModel</code> directive. We also bind it to the <code class="inlineCode">data</code> property of the <code class="inlineCode">&lt;lib-copy-button&gt;</code> component to copy the contents of the <code class="inlineCode">&lt;input&gt;</code> element to the clipboard. We also bind the <code class="inlineCode">copied</code> event to the <code class="inlineCode">log</code> component method.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Open the <code class="inlineCode">app.component.ts</code> file and create a <code class="inlineCode">log</code> method for displaying an information message when data is copied to the clipboard, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">log</span>() {
  <span class="hljs-title">alert</span>(<span class="hljs-variable">this</span>.<span class="hljs-property">title</span> + <span class="hljs-string">' copied to the clipboard'</span>);
}
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">app.module.ts</code> file and import <code class="inlineCode">FormsModule</code>, like this:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">FormsModule</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'@angular/forms'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">UiControlsModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ui-controls'</span>;
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">AppComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">BrowserModule</span>,
    <span class="hljs-title">UiControlsModule</span>,
    <span class="code-highlight"><strong class="hljs-title-slc">FormsModule</strong></span>
  ],
  <span class="hljs-attr">providers</span>: [],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title">AppComponent</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppModule</span> { }
</code></pre>
    <p class="normal">The <code class="inlineCode">FormsModule</code> class is part of the <code class="inlineCode">@angular/forms</code> npm package and is required<a id="_idIndexMarker539"/> when we want to use <code class="inlineCode">ngModel</code> in our application.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Execute the following command to build the library so that our application can recognize the new component:
        <pre class="programlisting con"><code class="hljs-con">ng build ui-controls
</code></pre>
      </li>
      <li class="numberedList">Run the application using <code class="inlineCode">ng serve</code>, and you should get the following output:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_09_04.png" alt="Figure 9.3 – Clipboard interaction"/></figure>
    <p class="packt_figref">Figure 9.4 – Clipboard interaction</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Enter the value <code class="inlineCode">my awesome library</code> into the textbox and click on the <strong class="screenText">Copy</strong> button. You should get the following output:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_09_05.png" alt="Figure 9.4 – Alert message"/></figure>
    <p class="packt_figref">Figure 9.5 – Alert message</p>
    <p class="normal">We have successfully created a button that we can attach to an Angular application and use to interact with the clipboard directly!</p>
    <p class="normal">The Angular CDK contains <a id="_idIndexMarker540"/>various other components and behaviors that we can use in our Angular applications. When combined with a highly customizable CSS framework such as Bulma, it can create compelling and unique interfaces. Try them in your Angular projects and build a library with a rich set of components. In the following section, we will learn how to publish a library in<a id="_idIndexMarker541"/> the <strong class="keyWord">npm package registry</strong>.</p>
    <h1 id="_idParaDest-160" class="heading-1">Publishing an Angular library to npm</h1>
    <p class="normal">We<a id="_idIndexMarker542"/> have already seen how to build an Angular library and consume it in an Angular application when both exist in the same repository or organization. However, there are cases where you may want to <a id="_idIndexMarker543"/>make your library available to Angular projects outside your infrastructure via a public package registry such as npm. A usual case is when you want to make your library open source so that other members of the development community can benefit from this. Let’s <a id="_idIndexMarker544"/>see how to publish our <code class="inlineCode">ui-controls</code> library to npm, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">If you do not have an npm account, navigate to <a href="https://www.npmjs.com/signup"><span class="url">https://www.npmjs.com/signup</span></a> to create one.</li>
      <li class="numberedList">Open the <code class="inlineCode">package.json</code> file that exists in the <code class="inlineCode">projects\ui-controls</code> folder of the Angular CLI workspace and set the value of the <code class="inlineCode">version</code> property to <code class="inlineCode">1.0.0</code>.
    <div class="packt_tip">
      <p class="normal">It is considered a good practice to <a id="_idIndexMarker545"/>follow <strong class="keyWord">semantic versioning</strong> in your library and publish it as version <em class="italic">1.0.0</em> for the first time. Angular also follows semantic versioning, and you can learn more about this at <a href="https://semver.org"><span class="url">https://semver.org</span></a>.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Open a<a id="_idIndexMarker546"/> terminal window and run the following Angular CLI command to build your library:
        <pre class="programlisting con"><code class="hljs-con">ng build ui-controls
</code></pre>
      </li>
      <li class="numberedList">Navigate to the <code class="inlineCode">dist</code> folder where the Angular CLI has generated the final bundle of our library, as illustrated in the following code snippet:
        <pre class="programlisting con"><code class="hljs-con">cd dist\ui-controls
</code></pre>
      </li>
      <li class="numberedList">Execute the following <code class="inlineCode">npm</code> command to log in to the npm registry from the terminal:
        <pre class="programlisting con"><code class="hljs-con">npm login
</code></pre>
      </li>
      <li class="numberedList">After <a id="_idIndexMarker547"/>you have successfully authenticated with npm, run the following command to publish your library:
        <pre class="programlisting con"><code class="hljs-con">npm publish
</code></pre>
      </li>
    </ol>
    <div class="note">
      <p class="normal">Running the preceding command will throw an error because the npm package registry already contains a <code class="inlineCode">ui-controls</code> package. If you want to preview the result of the previous command, make sure that you change the <code class="inlineCode">name</code> field in the <code class="inlineCode">package.json</code> file of the library.</p>
    </div>
    <p class="normal">Well done! Your library is now on the public npm registry and can be used by other developers in their Angular applications.</p>
    <div class="note">
      <p class="normal">Always remember to change the <code class="inlineCode">version</code> number in the <code class="inlineCode">package.json</code> file of your library before publishing it. Otherwise, the npm registry will throw an error stating that the version you are trying to publish already exists.</p>
    </div>
    <p class="normal">In the following section, we will learn how to use our library in non-Angular applications using Angular elements.</p>
    <h1 id="_idParaDest-161" class="heading-1">Using components as Angular elements</h1>
    <p class="normal">We <a id="_idIndexMarker548"/>have already learned how to use the Angular CLI to create an Angular library. We also saw how to publish our library to the npm registry so that other Angular projects can use it and benefit from it. In this section, we will go the extra mile and learn how to build our Angular library to be used in non-Angular environments.</p>
    <p class="normal">As we have already pointed out, the Angular framework is a cross-platform JavaScript framework in many ways. It can run on the server using <strong class="keyWord">Angular Universal</strong> and on mobile platforms. It can also run on a native desktop environment. In addition to those platforms, it can even run on web applications that are not built with Angular, using Angular elements.</p>
    <p class="normal">Let’s see how we can convert our clipboard component into an Angular element, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Execute the following Angular CLI command to generate a new Angular application in our workspace:
        <pre class="programlisting con"><code class="hljs-con">ng generate application ui-elements --defaults
</code></pre>
    <p class="normal">The preceding command will generate the <code class="inlineCode">ui-elements</code> Angular application in the <code class="inlineCode">projects</code> folder using default options.</p>
    <div class="note">
      <p class="normal">The Angular CLI does not currently support the use of Angular elements directly on an Angular library. Thus, we need to create an Angular application whose only purpose will be to export our components as Angular elements.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Navigate to the <code class="inlineCode">projects\ui-elements</code> folder and run the following command to install the <code class="inlineCode">@angular/elements</code> package:
        <pre class="programlisting con"><code class="hljs-con">npm install @angular/elements
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">app.module.ts</code> file of the <code class="inlineCode">ui-elements</code> application and modify it accordingly:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Injector</span>, <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { createCustomElement } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/elements'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">UiControlsModule</span>, <span class="hljs-title">CopyButtonComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ui-controls'</span>;
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">BrowserModule</span>,
    <span class="hljs-title">UiControlsModule</span>
  ],
  <span class="hljs-attr">providers</span>: []
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppModule</span> { }
</code></pre>
      </li>
      <li class="numberedList">Add a <code class="inlineCode">constructor</code> to the <code class="inlineCode">AppModule</code> class and inject the <code class="inlineCode">Injector</code> service as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">constructor</span>(<span class="hljs-keyword">private</span><span class="hljs-params"> injector: Injector</span>) {}
</code></pre>
      </li>
      <li class="numberedList">Implement <a id="_idIndexMarker549"/>an <code class="inlineCode">ngDoBootstrap</code> method to create the custom element for the <code class="inlineCode">CopyButtonComponent</code> class, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">ngDoBootstrap</span>() {
  <span class="hljs-keyword">const</span> el = <span class="hljs-title">createCustomElement</span>(<span class="hljs-title">CopyButtonComponent</span>, { <span class="hljs-attr">injector</span>: <span class="hljs-variable">this</span>.<span class="hljs-property">injector</span> });
  customElements.<span class="hljs-title">define</span>(<span class="hljs-string">'copy-button'</span>, el);
}
</code></pre>
    <p class="normal">The <code class="inlineCode">ngDoBootstrap</code> method is used to hook in the manual bootstrap process of the Angular application. We use the <code class="inlineCode">createCustomElement</code> method from the <code class="inlineCode">@angular/elements</code> npm package to create a custom element, passing the class of the component and the injector. Finally, we use the <code class="inlineCode">define</code> method of the <code class="inlineCode">customElements</code> object to declare the custom element, passing the HTML selector that we want to use and the custom element as parameters.</p>
      </li>
    </ol>
    <p class="normal">Now that we have put into practice all the workings for converting an Angular component into an Angular element, it’s time to build it so that we can use it in a web application.</p>
    <p class="normal">Building an Angular element differs from a standard build of an Angular application. When we build an Angular application, the Angular CLI generates different JavaScript bundles that contain the application source code, the Angular framework, and any third-party libraries. In an Angular element scenario, we only want to generate one bundle file containing our component. For this purpose, we will use the <code class="inlineCode">ngx-build-plus</code> library, which can generate a single bundle, among other things. Let’s see how to install it and use it in our application, as follows:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Execute the following command of the Angular CLI to install the <code class="inlineCode">ngx-build-plus</code> package:
        <pre class="programlisting con"><code class="hljs-con">ng add ngx-build-plus --project=ui-elements
</code></pre>
    <p class="normal">The preceding command will modify the <code class="inlineCode">angular.json</code> file of the Angular CLI workspace to use the <code class="inlineCode">ngx-build-plus</code> library to build the <code class="inlineCode">ui-elements</code> application.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Run the following command of the Angular CLI to build the application:
        <pre class="programlisting con"><code class="hljs-con">ng build ui-elements --single-bundle
</code></pre>
    <p class="normal">The <a id="_idIndexMarker550"/>previous command will build the <code class="inlineCode">ui-elements</code> application and produce a single bundle for all application code.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Copy the <code class="inlineCode">dist\ui-elements</code> folder to another location of your choice on your hard disk and open the <code class="inlineCode">index.html</code> file, using your editor.</li>
      <li class="numberedList">Remove the <code class="inlineCode">&lt;base&gt;</code> tag from the <code class="inlineCode">&lt;head&gt;</code> element and add the Bulma CSS minified file using a <strong class="keyWord">content delivery network </strong>(<strong class="keyWord">CDN</strong>), as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"stylesheet"</span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
      <li class="numberedList">Replace the <code class="inlineCode">&lt;app-root&gt;</code> selector with the following HTML snippet in the <code class="inlineCode">&lt;body&gt;</code> element:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"container is-fluid"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"title"</span><span class="hljs-tag">&gt;</span>My Angular Element<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">copy-button</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">copy-button</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In the preceding snippet, we added a <code class="inlineCode">&lt;div&gt;</code> element styled with Bulma CSS classes and the selector of the Angular element that we defined in <code class="inlineCode">AppModule</code>.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Insert the following JavaScript code <em class="italic">after</em> the <code class="inlineCode">&lt;div&gt;</code> element:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-keyword">const</span> el = <span class="hljs-variable">document</span>.<span class="hljs-title">getElementsByTagName</span>(<span class="hljs-string">'copy-button'</span>)[<span class="hljs-number">0</span>];
  el.<span class="hljs-title">setAttribute</span>(<span class="hljs-string">'data'</span>, <span class="hljs-string">'</span><span class="hljs-string">Some data'</span>);
  el.<span class="hljs-title">addEventListener</span>(<span class="hljs-string">'copied'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title">alert</span>(<span class="hljs-string">'Copied to clipboard'</span>));
<span class="hljs-tag">&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In the preceding script, we communicate with the component that is hidden behind the Angular element using vanilla JavaScript. First, we query the global <code class="inlineCode">document</code> object to get a reference to the Angular element. Then, we set the <code class="inlineCode">data</code> input property using the <code class="inlineCode">setAttribute</code> method of the element. Finally, we listen for the <code class="inlineCode">copied</code> output event by attaching an event listener using the <code class="inlineCode">addEventListener</code> method.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Use a<a id="_idIndexMarker551"/> web server to serve the <code class="inlineCode">ui-elements</code> folder and open the <code class="inlineCode">index.html</code> file using your browser. You should see the following output:
    <figure class="mediaobject"><img src="../Images/B18465_09_06.png" alt="Figure 9.6 – Angular element"/></figure>
    <p class="packt_figref">Figure 9.6 – Angular element</p>
    <p class="normal">If you do not want to install a separate web server, you can use the Live Server VSCode extension.</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="8">Click on the <strong class="screenText">Copy</strong> button, and you should see the following alert dialog:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_09_07.png" alt="Figure 9.7 – Alert dialog"/></figure>
    <p class="packt_figref">Figure 9.7 – Alert dialog</p>
    <p class="normal">We have <a id="_idIndexMarker552"/>managed to use an Angular component from our UI component library as a native HTML element in a web application that has nothing to do with Angular! The custom element looks and behaves the same as its Angular counterpart. The only difference is how we set up and configure the custom element in our web application using plain JavaScript.</p>
    <h1 id="_idParaDest-162" class="heading-1">Summary</h1>
    <p class="normal">In this project, we built a component UI library that we can use in our Angular applications. Initially, we learned how to use the Angular CLI to create an Angular library. We scaffolded a new Angular CLI workspace that contained our Angular library, along with an Angular application for testing it.</p>
    <p class="normal">We then used the Angular CDK with the Bulma CSS framework to build the UI components of our library. We created a card list that can be re-ordered using drag-and-drop features and a button for copying content to the clipboard.</p>
    <p class="normal">We also saw how to publish our library in the npm registry to use it in other Angular projects. Finally, we converted it into custom elements using Angular elements for distribution to non-Angular applications.</p>
    <p class="normal">In the next project, which will be the final project in the book, we will learn how to customize the Angular CLI to create our generation schematics.</p>
    <h1 id="_idParaDest-163" class="heading-1">Practice questions</h1>
    <p class="normal">Let’s take a look at a few practice questions:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">How do we generate a new Angular library using the Angular CLI?</li>
      <li class="numberedList">How do we make an Angular artifact of our library public?</li>
      <li class="numberedList">Which CSS selector do we use to target the <code class="inlineCode">host</code> element of an Angular component?</li>
      <li class="numberedList">How do we mark an element as draggable in the Angular CDK?</li>
      <li class="numberedList">Which method do we use to re-order a draggable list of items?</li>
      <li class="numberedList">Which Angular CDK directive is responsible for passing data to the clipboard?</li>
      <li class="numberedList">How do we create a single bundle using the <code class="inlineCode">ngx-build-plus</code> library?</li>
      <li class="numberedList">How do we pass data to and from an Angular element?</li>
    </ol>
    <h1 id="_idParaDest-164" class="heading-1">Further reading</h1>
    <p class="normal">Here are some links to build upon what we learned in the chapter:</p>
    <ul>
      <li class="bulletList">Angular libraries overview: <a href="https://angular.io/guide/libraries"><span class="url">https://angular.io/guide/libraries</span></a></li>
      <li class="bulletList">Creating Angular libraries: <a href="https://angular.io/guide/creating-libraries"><span class="url">https://angular.io/guide/creating-libraries</span></a></li>
      <li class="bulletList">Bulma CSS: <a href="https://bulma.io"><span class="url">https://bulma.io</span></a></li>
      <li class="bulletList">Angular CDK: <a href="https://material.angular.io/cdk/categories"><span class="url">https://material.angular.io/cdk/categories</span></a></li>
      <li class="bulletList">Drag-and-drop module: <a href="https://material.angular.io/cdk/drag-drop/overview"><span class="url">https://material.angular.io/cdk/drag-drop/overview</span></a></li>
      <li class="bulletList">Clipboard module: <a href="https://material.angular.io/cdk/clipboard/overview"><span class="url">https://material.angular.io/cdk/clipboard/overview</span></a></li>
      <li class="bulletList">Angular elements overview: <a href="https://angular.io/guide/elements"><span class="url">https://angular.io/guide/elements</span></a></li>
      <li class="bulletList"><code class="inlineCode">ngx-build-plus</code>: <a href="https://www.npmjs.com/package/ngx-build-plus"><span class="url">https://www.npmjs.com/package/ngx-build-plus</span></a> </li>
    </ul>
    <h1 id="_idParaDest-165" class="heading-1">Join our community on Discord</h1>
    <p class="normal">Join our community’s Discord space for discussions with the author and other readers:</p>
    <p class="normal"><a href="https://packt.link/AngularProjects3e"><span class="url">https://packt.link/AngularProjects3e</span></a></p>
    <p class="normal"><span class="url"><img src="../Images/QR_Code89405936498927781.png" alt=""/></span></p>
  </div>
</body></html>