<html><head></head><body>
		<div id="_idContainer046">
			<h1 id="_idParaDest-95"><em class="italic"><a id="_idTextAnchor100"/>Chapter 8</em>: Building an Animated Game Using React Native and Expo</h1>
			<p>One of the taglines for development with React is <em class="italic">"learn once, write anywhere,"</em> which is due to the existence of React Native. With React Native, you can write native mobile applications using JavaScript and React, and easily run and deploy these applications using a toolchain called <strong class="bold">Expo</strong>. The previous applications created in this book were all web applications, meaning that they will run in a browser. A downside of running applications in a browser is the lack of interaction when you click on a button or navigate to a different page. When building a mobile application that runs directly on a mobile phone, your users expect animations and gestures that make using the application easy and familiar. This is something that you'll focus on in this chapter.</p>
			<p>In this chapter, you'll create a React Native application with add animations and gestures using the Animated API from React Native, a package called <strong class="bold">Lottie</strong>, and Expo's <strong class="source-inline">GestureHandler</strong>. Together, they make it possible for us to create applications that make the best use of a mobile's interaction methods, which is perfect for a game such as the <em class="italic">Higher/Lower</em> game. </p>
			<p>To create this game, the following topics will be covered:</p>
			<ul>
				<li>Setting up React Native with Expo</li>
				<li>Adding gestures and animations to React Native</li>
				<li>Advanced animations with Lottie</li>
			</ul>
			<h1 id="_idParaDest-96"><a id="_idTextAnchor101"/>Project overview</h1>
			<p>In this chapter, we will be creating an animated <em class="italic">Higher/Lower</em> game build with React Native <a id="_idIndexMarker537"/>and Expo, which uses the Animated API to add basic animations, Lottie for advanced animations, and <strong class="source-inline">GestureHandler</strong> from Expo to handle native gestures. </p>
			<p>The build time is 1.5 hours.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">This chapter is using React Native version 0.64.3 and Expo SDK version 44. As React Native and Expo are updated frequently, make sure that you're working with this version to ensure the patterns described in this chapter are behaving as expected.</p>
			<h1 id="_idParaDest-97"><a id="_idTextAnchor102"/>Getting started</h1>
			<p>The complete <a id="_idIndexMarker538"/>source code for the project we build in this chapter can be found on GitHub: <a href="https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter08">https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter08</a>. Also, the <strong class="source-inline">winner.json</strong> file that is needed in the final section of this chapter can be found at <a href="https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter08-assets">https://github.com/PacktPublishing/React-Projects-Second-Edition/tree/main/Chapter08-assets</a>.</p>
			<p>You need to have the Expo Go application installed on a mobile iOS or Android device to run the project on a physical device. Once you've downloaded the application, you need to create an Expo account to make the development process smoother. Make sure to store your account details somewhere safe, as you will need these later on in this chapter.</p>
			<p>Alternatively, you can install either Xcode or Android Studio on your computer to run the application on a virtual device:</p>
			<ul>
				<li><strong class="bold">For iOS</strong>: Information <a id="_idIndexMarker539"/>on how to set up your local machine to run the iOS simulator can be found here: <a href="https://docs.expo.io/workflow/ios-simulator/">https://docs.expo.io/workflow/ios-simulator/</a>.</li>
				<li><strong class="bold">For Android</strong>: Information on how to set up your local machine to run the emulator from <a id="_idIndexMarker540"/>Android Studio can be found here: <a href="https://docs.expo.io/workflow/android-studio-emulator/">https://docs.expo.io/workflow/android-studio-emulator/</a>. <p class="callout-heading">Note</p><p class="callout">It's <em class="italic">highly recommended </em>to use the Expo Client application to run the project from this chapter on a physical device. Receiving notifications is currently only supported on physical devices, and running the project on either the iOS simulator or Android Studio emulator will result in error messages.</p></li>
			</ul>
			<h1 id="_idParaDest-98"><a id="_idTextAnchor103"/>Creating an animated game application with React Native and Expo</h1>
			<p>In this section, you'll build an animated game with React Native and Expo that runs directly on a <a id="_idIndexMarker541"/>mobile device. React Native allows <a id="_idIndexMarker542"/>you to use the same syntax and patterns you already know from React, as it's using the <a id="_idIndexMarker543"/>core React library. Also, Expo makes it possible to prevent having to install and configure Xcode (for iOS) or<a id="_idIndexMarker544"/> Android Studio to start creating native applications on your machine. Therefore, you can write applications for both the iOS and Android platforms from any machine.</p>
			<p>Expo combines both React APIs and JavaScript APIs to the React Native development process, such as JSX components, Hooks, and native features such as camera access. Briefly, the Expo toolchain consists of multiple tools that help you with React Native, such as the Expo CLI, which allows you to create React Native projects from your terminal, with all the dependencies that you need to run React Native. With the Expo client, you can open these projects from iOS and Android mobile devices that are connected to your local network, and Expo SDK is a package that contains all the libraries that make it possible to run your application on multiple devices and platforms.</p>
			<h2 id="_idParaDest-99"><a id="_idTextAnchor104"/>Setting up React Native with Expo</h2>
			<p>Applications that <a id="_idIndexMarker545"/>we previously created in this book used <a id="_idIndexMarker546"/>Create React App or Next.js to set up a starter application. For React Native, a similar boilerplate is available, which is part of the Expo CLI and can be set up just as easily.</p>
			<p>You need to globally install the Expo CLI with the following command, using <strong class="source-inline">Yarn</strong>:</p>
			<p class="source-code">yarn global add expo-cli</p>
			<p>Alternatively, you can use <strong class="source-inline">npm</strong>:</p>
			<p class="source-code">npm install -g expo-cli</p>
			<p class="callout-heading">Note</p>
			<p class="callout">Expo is using Yarn as its default package manager, but you can still use it with npm instead as weve done in the previous React chapters.</p>
			<p>This will start the installation process, which can take some time, as it will install the Expo CLI with all its dependencies to help you develop mobile applications. After that, you will be able to create a new project using the <strong class="source-inline">init</strong> command from the Expo CLI:</p>
			<p class="source-code">expo init chapter-8</p>
			<p>Expo will now create the project for you, but before that, it will ask you whether you want to create <a id="_idIndexMarker547"/>just a blank template, a blank template with TypeScript <a id="_idIndexMarker548"/>configuration, or a sample template with some example screens set up. For this chapter, you'll need to choose the first option. Expo automatically detects whether you have Yarn installed on your machine; if so, it will use Yarn to install the other dependencies that are needed to set up your computer.</p>
			<p>Your application will now be created, using the setting you've previously selected. This application can now be started by moving into the directory that was just created by Expo, using the following commands:</p>
			<p class="source-code">cd chapter-8</p>
			<p class="source-code">yarn start</p>
			<p>This will start Expo and give you the ability to start your project from both the terminal and your browser. In the terminal, you will now see a QR code, which you can scan with the Expo application from your mobile device, or you can start either the iOS or Android emulator if you have Xcode or Android studio installed. Also, <em class="italic">Expo DevTools</em> will be opened in your browser after running the <strong class="source-inline">start</strong> command:</p>
			<div>
				<div id="_idContainer041" class="IMG---Figure">
					<img src="image/Figure_8.01_B17390.jpg" alt="Figure 8.1 – Expo DevTools when running Expo&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.1 – Expo DevTools when running Expo</p>
			<p>On this page, you will see a sidebar on the left and the logs from your React Native application on the <a id="_idIndexMarker549"/>right. If you're using an Android device, you <a id="_idIndexMarker550"/>can scan the QR code directly from the Expo Go application. On iOS, you need to use your camera to scan the code, which will ask you to open the Expo client. Alternatively, the sidebar in Expo DevTools has buttons to start the iOS or Android emulator, for which you need to have either Xcode installed or Android Studio installed. Otherwise, you can also find a button to send a link to the application by email.</p>
			<p>It doesn't matter whether you've opened the application using the emulator for iOS or Android, or from an iOS or Android device; the application at this point should be a white screen displaying <strong class="bold">Open up App.js to start working on your app!</strong>.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you don't see the application, but a red screen displaying an error, you should make sure that you're running the correct version of React Native and Expo on your local machine and mobile device. These versions should be React Native version 0.64.3 and Expo version 44. Using any other version can lead to errors, as the versions for React Native and Expo should be in sync. </p>
			<p>The project structure <a id="_idIndexMarker551"/>from this React Native application created <a id="_idIndexMarker552"/>with Expo is quite similar to the React projects you've created in the previous chapters:</p>
			<p class="source-code">chapter-8 </p>
			<p class="source-code">  |- node_modules </p>
			<p class="source-code">  |- assets</p>
			<p class="source-code">  |- package.json </p>
			<p class="source-code">  |- App.js</p>
			<p class="source-code">  |- app.json </p>
			<p class="source-code">  |- babel.config.js  </p>
			<p class="source-code"> </p>
			<p>In the <strong class="source-inline">assets</strong> directory, you can find the images that are used as the application icon on the home screen once you've installed this application on your mobile device and the image that will serve as the splash screen, which is displayed when you start the application. The <strong class="source-inline">App.js</strong> file is the actual entry point of your application, where you'll put code that will be rendered when the application mounts. Configurations for your application – for example, the App Store – are placed in <strong class="source-inline">app.json</strong>, while <strong class="source-inline">babel.config.js</strong> holds specific Babel configurations.</p>
			<h3>Adding basic routing</h3>
			<p>For web applications created with React, we've used React Router for navigation, while with Next.js, the <a id="_idIndexMarker553"/>routing was already built in using the filesystem. For React Native, we'll need a different routing library that supports both iOS and Android. The most popular library for this is <strong class="source-inline">react-navigation</strong>, which we can install from <strong class="source-inline">Yarn</strong>:</p>
			<p class="source-code">yarn add @react-navigation/native</p>
			<p>This will install the core library, but we need to extend our current Expo installation with dependencies that are needed for <strong class="source-inline">react-navigation</strong> by running the following:</p>
			<p class="source-code">expo install react-native-screens react-native-safe-area-context</p>
			<p>To add routing to your React Native application, you will need to understand the difference between routing in a browser and a mobile application. History in React Native doesn't behave the same way as in a browser, where users can navigate to different pages by changing the URL in the browser and previously visited URLs are added to the browser history. Instead, you will need to keep track of transitions between pages yourself and store local history in your application.</p>
			<p>With React Navigation, you can use multiple different navigators to help you do this, including a <a id="_idIndexMarker554"/>stack navigator and a tab navigator. The stack navigator behaves in a way that is very similar to a browser, as it stacks pages after transition on top of each other and lets you navigate using native gestures and animations for iOS and Android. Let's get started:</p>
			<ol>
				<li>First, we need to install the library to use stack navigation and an additional library with navigation elements from <strong class="source-inline">react-navigation</strong>:<p class="source-code"><strong class="bold">yarn add @react-navigation/native-stack@react-navigation/elements</strong></p></li>
				<li>From this library and the core library from <strong class="source-inline">react-navigation</strong>, we need to import the following to create a stack navigator in <strong class="source-inline">App.js</strong>:<p class="source-code">  import { StatusBar } from 'expo-status-bar';</p><p class="source-code">  import React from 'react';</p><p class="source-code">  import { StyleSheet, Text, View } from </p><p class="source-code">    'react-native';</p><p class="source-code"><strong class="bold">+ import { NavigationContainer } </strong></p><p class="source-code"><strong class="bold">    from '@react-navigation/native';</strong></p><p class="source-code"><strong class="bold">+ import { createNativeStackNavigator } </strong></p><p class="source-code"><strong class="bold">    from '@react-navigation/native-stack';</strong></p><p class="source-code"><strong class="bold">+ const Stack = createNativeStackNavigator();</strong></p><p class="source-code">  export default function App() {</p><p class="source-code">    // ...</p></li>
				<li>From the <strong class="source-inline">App</strong> component, we need to return this stack navigator, which also needs a <a id="_idIndexMarker555"/>component to return to the home screen. Therefore, we need to create a <strong class="source-inline">Home</strong> component in a new directory called <strong class="source-inline">screens</strong>. This component can be created in a file called <strong class="source-inline">Home.js</strong> with the following content:<p class="source-code">import React from 'react';</p><p class="source-code">import { StyleSheet, Text, View } from 'react-native';</p><p class="source-code">export default function Home() {</p><p class="source-code">  return (</p><p class="source-code">    &lt;View style={styles.container}&gt;</p><p class="source-code">      &lt;Text&gt;Home screen&lt;/Text&gt;</p><p class="source-code">    &lt;/View&gt;</p><p class="source-code">  );</p><p class="source-code">}</p><p class="source-code">const styles = StyleSheet.create({</p><p class="source-code">  container: {</p><p class="source-code">    flex: 1,</p><p class="source-code">    backgroundColor: '#fff',</p><p class="source-code">    alignItems: 'center',</p><p class="source-code">    justifyContent: 'center',</p><p class="source-code">  },</p><p class="source-code">});</p></li>
				<li>In <strong class="source-inline">App.js</strong>, we need to import this <strong class="source-inline">Home</strong> component and set up the stack navigator by returning a <strong class="source-inline">NavigationContainer</strong> component from the <strong class="source-inline">App</strong> component. Inside <a id="_idIndexMarker556"/>this component, the stack navigator is created by the <strong class="source-inline">Navigator</strong> component from the <strong class="source-inline">Stack</strong> component, and the home screen is described in a <strong class="source-inline">Stack.Screen</strong> component. Also, the status bar for the mobile device is defined here:<p class="source-code">  import { StatusBar } from 'expo-status-bar';</p><p class="source-code">  import React from 'react';</p><p class="source-code"><strong class="bold">- import { StyleSheet, Text, View } from </strong></p><p class="source-code"><strong class="bold">    'react-native';</strong></p><p class="source-code"><strong class="bold">+ import { StyleSheet } from 'react-native';</strong></p><p class="source-code">  import { NavigationContainer } </p><p class="source-code">    from '@react-navigation/native';</p><p class="source-code">  import { createNativeStackNavigator } </p><p class="source-code">    from '@react-navigation/native-stack';</p><p class="source-code"><strong class="bold">+ import Home from './screens/Home';</strong></p><p class="source-code">const Stack = createNativeStackNavigator();</p><p class="source-code">export default function App() {</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code"><strong class="bold">-     &lt;View style={styles.container}&gt;</strong></p><p class="source-code"><strong class="bold">-       &lt;Text&gt;Open up App.js to start working on your </strong></p><p class="source-code"><strong class="bold">          app!&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+     &lt;NavigationContainer&gt;</strong></p><p class="source-code"><strong class="bold">              &lt;StatusBar style='auto' /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Stack.Navigator&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;Stack.Screen name='Home' component={Home} </strong></p><p class="source-code"><strong class="bold">          /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;/Stack.Navigator&gt;</strong></p><p class="source-code"><strong class="bold">+     &lt;/NavigationContainer&gt;</strong></p><p class="source-code"><strong class="bold">-     &lt;/View&gt;</strong></p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
			</ol>
			<p>Make sure that you still have Expo running from your terminal; otherwise, start it again with the <a id="_idIndexMarker557"/>yarn start command. The application on your mobile device or emulator should now look like this:</p>
			<div>
				<div id="_idContainer042" class="IMG---Figure">
					<img src="image/Figure_8.02_B17390.jpg" alt="Figure 8.2 – The application with a stack navigator&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.2 – The application with a stack navigator</p>
			<p class="callout-heading">Note</p>
			<p class="callout">To reload the application in Expo Go, you can shake the device when you're using an iOS or Android phone. By shaking the device, a menu with an option to reload the application will appear. In this menu, you must also select to enable a <em class="italic">fast refresh</em> to refresh the application automatically when you make changes to the code.</p>
			<p>We've got our <a id="_idIndexMarker558"/>stack navigator with the first page set up, so let's add more pages and create buttons to navigate between them in the next part of this section.</p>
			<h3>Navigate between screens</h3>
			<p>Navigating between screens in React Native also works a bit differently than in the browser, as <a id="_idIndexMarker559"/>again there are no URLs. Instead, you need to use the navigation object that is available as a prop from components that are rendered by the stack navigator, or by calling the <strong class="source-inline">useNavigation</strong> Hook from <strong class="source-inline">react-navigation</strong>.</p>
			<p>Before learning how to navigate between screens, we need to add another screen to navigate to:</p>
			<ol>
				<li value="1">This screen can be added by creating a new component in a file called <strong class="source-inline">Game.js</strong> in the <strong class="source-inline">screens</strong> directory with the following code:<p class="source-code">import React from 'react';</p><p class="source-code">import { StyleSheet, Text, View } from 'react-native';</p><p class="source-code">export default function Game() {</p><p class="source-code">  return (</p><p class="source-code">    &lt;View style={styles.container}&gt;</p><p class="source-code">      &lt;Text&gt;Game screen&lt;/Text&gt;</p><p class="source-code">    &lt;/View&gt;</p><p class="source-code">  );</p><p class="source-code">}</p><p class="source-code">const styles = StyleSheet.create({</p><p class="source-code">  container: {</p><p class="source-code">    flex: 1,</p><p class="source-code">    backgroundColor: '#fff',</p><p class="source-code">    alignItems: 'center',</p><p class="source-code">    justifyContent: 'center',</p><p class="source-code">  },</p><p class="source-code">});</p></li>
				<li>This component must be imported in <strong class="source-inline">App.js</strong> and added as a new screen to the <a id="_idIndexMarker560"/>stack navigator. Also, on the navigator, we need to set the default screen that must be displayed by setting the <strong class="source-inline">initialRouteName</strong> prop:<p class="source-code">  import { StatusBar } from 'expo-status-bar';</p><p class="source-code">  import React from 'react';</p><p class="source-code">  import { StyleSheet } from 'react-native';</p><p class="source-code">  import { NavigationContainer } </p><p class="source-code">    from '@react-navigation/native';</p><p class="source-code">  import { createNativeStackNavigator } </p><p class="source-code">    from '@react-navigation/native-stack';</p><p class="source-code">  import Home from './screens/Home';</p><p class="source-code"><strong class="bold">+ import Game from './screens/Game';</strong></p><p class="source-code">  const Stack = createNativeStackNavigator();</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;NavigationContainer&gt;</p><p class="source-code">        &lt;StatusBar style='auto' /&gt;</p><p class="source-code"><strong class="bold">-       &lt;Stack.Navigator&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Stack.Navigator initialRouteName='Home'&gt;</strong></p><p class="source-code">          &lt;Stack.Screen name='Home' component={Home} </p><p class="source-code">          /&gt;</p><p class="source-code"><strong class="bold">+         &lt;Stack.Screen name='Game' component={Game} </strong></p><p class="source-code">          <strong class="bold">/&gt;</strong></p><p class="source-code">        &lt;/Stack.Navigator&gt;</p><p class="source-code">      &lt;/NavigationContainer&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>From the <strong class="source-inline">Home</strong> component in <strong class="source-inline">screens/Home.js</strong>, we can get the navigation object from <a id="_idIndexMarker561"/>the <strong class="source-inline">useNavigation</strong> Hook and create a button that will navigate to the <strong class="source-inline">Game</strong> screen when pressed. This is done by using the <strong class="source-inline">navigate</strong> method from the <strong class="source-inline">navigation</strong> object and passing it to the <strong class="source-inline">onPress</strong> prop of the <strong class="source-inline">Button</strong> component from React Native:<p class="source-code">  import React from 'react';</p><p class="source-code"><strong class="bold">- import { StyleSheet, Text, View } from </strong></p><p class="source-code"><strong class="bold">    'react-native';</strong></p><p class="source-code"><strong class="bold">+ import { StyleSheet, View, Button } from </strong></p><p class="source-code"><strong class="bold">    'react-native';</strong></p><p class="source-code"><strong class="bold">+ import { useNavigation } from </strong></p><p class="source-code"><strong class="bold">    '@react-navigation/native';</strong></p><p class="source-code">  export default function Home() {</p><p class="source-code"><strong class="bold">+   const navigation = useNavigation();</strong></p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">-       &lt;Text&gt;Home screen&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Button onPress={() =&gt; navigation.navigate(</strong></p><p class="source-code"><strong class="bold">          'Game')} title='Start game!' /&gt;</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
			</ol>
			<p>From the application, you can now move between the <strong class="bold">Home</strong> and <strong class="bold">Game</strong> screen by using the <a id="_idIndexMarker562"/>button that we just created or by using the button in the header. This header is automatically generated by react-navigation, but you can also customize this, which we'll do in <a href="B17390_09_Final_NM_ePub.xhtml#_idTextAnchor109"><em class="italic">Chapter 9</em></a>, <em class="italic">Building a Full-Stack Social Media Application with React Native and Expo</em>:</p>
			<div>
				<div id="_idContainer043" class="IMG---Figure">
					<img src="image/Figure_8.03_B17390.jpg" alt="Figure 8.3 – Our application with basic routing"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.3 – Our application with basic routing</p>
			<p>At this point, we've added basic routing to our application, but we don't have a game yet. In the <strong class="source-inline">screens/Game.js</strong> file, the logic for the <em class="italic">Higher/Lower</em> game can be added by <a id="_idIndexMarker563"/>using local state management, using the <strong class="source-inline">useState</strong> and <strong class="source-inline">useEffect</strong> Hooks. These Hooks work the same in React Native as they do in a React web application. Let's add the game logic:</p>
			<ol>
				<li value="1">Import these Hooks from React in the Game component, next to the <strong class="source-inline">Button</strong> and <strong class="source-inline">Alert</strong> components from React Native. After importing them, we need to create a local state variable to store the user's choice and create the randomized number and score for the game. Also, import the <strong class="source-inline">useNavigation</strong> Hook from <strong class="source-inline">react-navigation</strong>:<p class="source-code"><strong class="bold">- import React from 'react';</strong></p><p class="source-code"><strong class="bold">- import { StyleSheet, Text, View } from </strong></p><p class="source-code"><strong class="bold">    'react-native';</strong></p><p class="source-code"><strong class="bold">+ import React, { useEffect, useState } from 'react';</strong></p><p class="source-code"><strong class="bold">+ import { Button, StyleSheet, Text, View, Alert }</strong></p><p class="source-code"><strong class="bold">    from 'react-native';</strong></p><p class="source-code"><strong class="bold">+ import { useNavigation } from </strong></p><p class="source-code"><strong class="bold">    '@react-navigation/native';</strong></p><p class="source-code">  export default function Game() {</p><p class="source-code"><strong class="bold">+   const baseNumber = Math.floor(Math.random() *</strong></p><p class="source-code"><strong class="bold">      100);</strong></p><p class="source-code"><strong class="bold">+   const score = Math.floor(Math.random() * 100);</strong></p><p class="source-code"><strong class="bold">+   const [choice, setChoice] = useState('');</strong></p><p class="source-code">  </p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code">      // ...</p></li>
			</ol>
			<p>The <strong class="source-inline">baseNumber</strong> value is the number that starts the game with an initial random value between 1 and 100, created with a <strong class="source-inline">Math</strong> method from JavaScript. The score value also has a random number as a value, and this value is used <a id="_idIndexMarker564"/>to compare with <strong class="source-inline">baseNumber</strong>. The <strong class="source-inline">choice</strong> local state variable is used to store the choice of the user if a score is either higher or lower than <strong class="source-inline">baseNumber</strong>.</p>
			<ol>
				<li value="2">To be able to make a choice, we need to add two <strong class="source-inline">Button</strong> components that set the value for a choice to be higher or lower, depending on which button you've pressed:<p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">-       &lt;Text&gt;Game screen&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Text&gt;Starting: {baseNumber}&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Button onPress={() =&gt; setChoice('higher')} </strong></p><p class="source-code"><strong class="bold">          title='Higher' /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Button onPress={() =&gt; setChoice('lower')}</strong></p><p class="source-code"><strong class="bold">          title='Lower' /&gt;</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  const styles = StyleSheet.create({</p><p class="source-code">    // ...</p></li>
				<li>From an <strong class="source-inline">useEffect</strong> Hook, we can compare the values for <strong class="source-inline">baseNumber</strong> and <strong class="source-inline">score</strong> and, based on the value choice, show an alert. Depending on the choice, the user <a id="_idIndexMarker565"/>sees an <strong class="source-inline">Alert</strong> component displayed with a message saying whether they've won or not, and the score. Next to displaying the alert, the values for <strong class="source-inline">baseNumber</strong>, <strong class="source-inline">score</strong>, and <strong class="source-inline">choice</strong> the navigation object will be used to navigate back to the previous page. This will reset the <strong class="source-inline">Game</strong> component as well:<p class="source-code">  // ...</p><p class="source-code"><strong class="bold">+ const navigation = useNavigation();</strong></p><p class="source-code"><strong class="bold">+ useEffect(() =&gt; {</strong></p><p class="source-code"><strong class="bold">+   if (choice) {</strong></p><p class="source-code"><strong class="bold">+     const winner =</strong></p><p class="source-code"><strong class="bold">+       (choice === 'higher' &amp;&amp; score &gt; baseNumber) ||</strong></p><p class="source-code"><strong class="bold">+       (choice === 'lower' &amp;&amp; baseNumber &gt; score);</strong></p><p class="source-code"><strong class="bold">+     Alert.alert(`You've ${winner ? 'won' : 'lost'}`,</strong></p><p class="source-code"><strong class="bold">        `You scored: ${score}`);</strong></p><p class="source-code"><strong class="bold">+     navigation.goBack();</strong></p><p class="source-code"><strong class="bold">+   }</strong></p><p class="source-code"><strong class="bold">+ }, [baseNumber, score, choice]);</strong></p><p class="source-code">  return (</p><p class="source-code">    &lt;View style={styles.container}&gt;</p><p class="source-code">    // ...</p></li>
			</ol>
			<p>You're now able to play the game and choose whether you think the score will be higher or lower than the <a id="_idIndexMarker566"/>displayed <strong class="source-inline">baseNumber</strong>. But we haven't added any styling yet, which we'll do in the next part of this section.</p>
			<h3>Styling in React Native</h3>
			<p>You might have seen in the previous components that we changed or added to the project that we used a variable called <strong class="source-inline">StyleSheet</strong>. Using this variable from React Native, we can <a id="_idIndexMarker567"/>create an object of styles, which we can attach to React Native components by passing it as a prop called <strong class="source-inline">style</strong>. We've already used this to style the components with a style called <strong class="source-inline">container</strong>, but let's make some changes to also add styling to the other components:</p>
			<ol>
				<li value="1">In <strong class="source-inline">screens/Home.js</strong>, we need to replace the <strong class="source-inline">Button</strong> component with a <strong class="source-inline">TouchableHighlight</strong> component, as <strong class="source-inline">Button</strong> components in React Native are hard to style. This <strong class="source-inline">TouchableHighlight</strong> component is an element that can be pressed, and it gives the user feedback by getting highlighted when pressed. Inside <a id="_idIndexMarker568"/>this component, a <strong class="source-inline">Text</strong> component must be added to display the label for the button:<p class="source-code">  import React from 'react';</p><p class="source-code"><strong class="bold">- import { StyleSheet, View, Button } from </strong></p><p class="source-code"><strong class="bold">    'react-native';</strong></p><p class="source-code"><strong class="bold">+ import { StyleSheet, Text, View, TouchableHighlight</strong></p><p class="source-code"><strong class="bold">    } from 'react-native';</strong></p><p class="source-code">  import { useNavigation } from </p><p class="source-code">    '@react-navigation/native';</p><p class="source-code">  export default function Home() {</p><p class="source-code">    const navigation = useNavigation();</p><p class="source-code">  </p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">-       &lt;Button onPress={() =&gt; navigation.navigate(</strong></p><p class="source-code"><strong class="bold">          'Game')} title='Start game!' /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;TouchableHighlight</strong></p><p class="source-code"><strong class="bold">+         onPress={() =&gt; navigation.navigate('Game')}</strong></p><p class="source-code"><strong class="bold">+         style={styles.button}</strong></p><p class="source-code"><strong class="bold">+       &gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;Text style={styles.buttonText}&gt;</strong></p><p class="source-code"><strong class="bold">            Start game!&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;/TouchableHighlight&gt;</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>The <strong class="source-inline">TouchableHighlight</strong> and <strong class="source-inline">Text</strong> components use the <strong class="source-inline">button</strong> and <strong class="source-inline">buttonText</strong> styles <a id="_idIndexMarker569"/>from the <strong class="source-inline">styles</strong> object, which we need to add to the <strong class="source-inline">create</strong> method of <strong class="source-inline">StyleSheet</strong> at the bottom of the file:<p class="source-code">  // ...</p><p class="source-code">  const styles = StyleSheet.create({</p><p class="source-code">    container: {</p><p class="source-code">      flex: 1,</p><p class="source-code">      backgroundColor: '#fff',</p><p class="source-code">      alignItems: 'center',</p><p class="source-code">      justifyContent: 'center',</p><p class="source-code">    },</p><p class="source-code"><strong class="bold">+   button: {</strong></p><p class="source-code"><strong class="bold">+     width: 300,</strong></p><p class="source-code"><strong class="bold">+     height: 300,</strong></p><p class="source-code"><strong class="bold">+     display: 'flex',</strong></p><p class="source-code"><strong class="bold">+     alignItems: 'center',</strong></p><p class="source-code"><strong class="bold">+     justifyContent: 'space-around',</strong></p><p class="source-code"><strong class="bold">+     borderRadius: 150,</strong></p><p class="source-code"><strong class="bold">+     backgroundColor: 'purple',</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code"><strong class="bold">+   buttonText: {</strong></p><p class="source-code"><strong class="bold">+     color: 'white',</strong></p><p class="source-code"><strong class="bold">+     fontSize: 48,</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code">  });</p></li>
			</ol>
			<p>Creating styles with React Native means you need to use <em class="italic">camelCase</em> notation instead <a id="_idIndexMarker570"/>of <em class="italic">kebab-case</em> as we're used to with CSS – for example, <strong class="source-inline">background-color</strong> becomes <strong class="source-inline">backgroundColor</strong>. </p>
			<ol>
				<li value="3">We also need to make styling additions to the buttons on the <strong class="source-inline">Game</strong> screen by opening the <strong class="source-inline">screens/Game.js</strong> file. In this file, we again need to replace the <strong class="source-inline">Button</strong> components from React Native with a <strong class="source-inline">TouchableHighlight</strong> component with an inner <strong class="source-inline">Text</strong>:<p class="source-code">  import React, { useEffect, useState } from 'react';</p><p class="source-code">  import {</p><p class="source-code"><strong class="bold">-   Button,</strong></p><p class="source-code">    StyleSheet,</p><p class="source-code">    Text,</p><p class="source-code">    View,</p><p class="source-code">    Alert,</p><p class="source-code"><strong class="bold">+   TouchableHighlight,</strong></p><p class="source-code">  } from 'react-native';</p><p class="source-code">    import { useNavigation } from </p><p class="source-code">      '@react-navigation/native';</p><p class="source-code">  export default function Game() {</p><p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">-       &lt;Text&gt;Starting: {baseNumber}&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">-       &lt;Button onPress={() =&gt; setChoice('higher')}</strong></p><p class="source-code"><strong class="bold">          title='Higher' /&gt; </strong></p><p class="source-code"><strong class="bold">-       &lt;Button onPress={() =&gt; setChoice('lower')}</strong></p><p class="source-code"><strong class="bold">          title='Lower' /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Text style={styles.baseNumber}&gt;</strong></p><p class="source-code"><strong class="bold">          Starting: {baseNumber}&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;TouchableHighlight onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">          setChoice('higher')} style={styles.button}&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;Text style={styles.buttonText}&gt;Higher</strong></p><p class="source-code"><strong class="bold">          &lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;/TouchableHighlight&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;TouchableHighlight onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">            setChoice('lower')} style={styles.button}&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;Text style={styles.buttonText}&gt;Lower&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;/TouchableHighlight&gt;</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>The <strong class="source-inline">styles</strong> object <a id="_idIndexMarker571"/>must have the new <strong class="source-inline">baseNumber</strong>, <strong class="source-inline">button</strong>, and <strong class="source-inline">buttonText</strong> styles, which we can add at the bottom of the file:<p class="source-code">  // ...</p><p class="source-code">  const styles = StyleSheet.create({</p><p class="source-code">    container: {</p><p class="source-code">      flex: 1,</p><p class="source-code">      backgroundColor: '#fff',</p><p class="source-code">      alignItems: 'center',</p><p class="source-code">      justifyContent: 'center',</p><p class="source-code">    },</p><p class="source-code"><strong class="bold">+   baseNumber: {</strong></p><p class="source-code"><strong class="bold">+     fontSize: 48,</strong></p><p class="source-code"><strong class="bold">+     marginBottom: 30,</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code"><strong class="bold">+   button: {</strong></p><p class="source-code"><strong class="bold">+     display: 'flex',</strong></p><p class="source-code"><strong class="bold">+     alignItems: 'center',</strong></p><p class="source-code"><strong class="bold">+     justifyContent: 'space-around',</strong></p><p class="source-code"><strong class="bold">+     borderRadius: 15,</strong></p><p class="source-code"><strong class="bold">+     padding: 30,</strong></p><p class="source-code"><strong class="bold">+     marginVertical: 15,</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code"><strong class="bold">+   buttonText: {</strong></p><p class="source-code"><strong class="bold">+     color: 'white',</strong></p><p class="source-code"><strong class="bold">+     fontSize: 24,</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code">  });</p></li>
				<li>However, both buttons will now have the same white background. We can change this by adding <a id="_idIndexMarker572"/>additional styling to them. The <strong class="source-inline">style</strong> prop on React Native components can also take an array of styling objects instead of just a single object:<p class="source-code">  // ...</p><p class="source-code">  return (</p><p class="source-code">    &lt;View style={styles.container}&gt;</p><p class="source-code">      &lt;Text style={styles.baseNumber}&gt;</p><p class="source-code">        Starting: {baseNumber}&lt;/Text&gt;</p><p class="source-code">      &lt;TouchableHighlight</p><p class="source-code">        onPress={() =&gt; setChoice('higher')}</p><p class="source-code"><strong class="bold">-       style={styles.button}</strong></p><p class="source-code"><strong class="bold">+       style={[styles.button, styles.buttonGreen]}</strong></p><p class="source-code">      &gt;</p><p class="source-code">        &lt;Text style={styles.buttonText}&gt;Higher&lt;/Text&gt;</p><p class="source-code">      &lt;/TouchableHighlight&gt;</p><p class="source-code">      &lt;TouchableHighlight</p><p class="source-code">        onPress={() =&gt; setChoice('lower')}</p><p class="source-code"><strong class="bold">-       style={styles.button}</strong></p><p class="source-code"><strong class="bold">+       style={[styles.button, styles.buttonRed]}</strong></p><p class="source-code">      &gt;</p><p class="source-code">        &lt;Text style={styles.buttonText}&gt;Lower&lt;/Text&gt;</p><p class="source-code">      &lt;/TouchableHighlight&gt;</p><p class="source-code">    &lt;/View&gt;</p><p class="source-code">  );</p><p class="source-code">  // ...</p></li>
				<li>These <strong class="source-inline">buttonGreen</strong> and <strong class="source-inline">buttonRed</strong> objects must also be added to the styling object:<p class="source-code">  // ...</p><p class="source-code">  const styles = StyleSheet.create({</p><p class="source-code">    // ...</p><p class="source-code"><strong class="bold">+   buttonRed: {</strong></p><p class="source-code"><strong class="bold">+     backgroundColor: 'red',</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code"><strong class="bold">+   buttonGreen: {</strong></p><p class="source-code"><strong class="bold">+     backgroundColor: 'green',</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code">    buttonText: {</p><p class="source-code">      color: 'white',</p><p class="source-code">      fontSize: 24,</p><p class="source-code">    },</p><p class="source-code">  });</p></li>
			</ol>
			<p>With these <a id="_idIndexMarker573"/>additions, the application is now styled, which makes it more appealing to play. We've used the <strong class="source-inline">StyleSheet</strong> object from React Native to apply this styling, making your application look like this:</p>
			<div>
				<div id="_idContainer044" class="IMG---Figure">
					<img src="image/Figure_8.04_B17390.jpg" alt="Figure 8.4 – The styled React Native application&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.4 – The styled React Native application</p>
			<p>Mobile games often have flashy animations that make the user want to keep playing and make <a id="_idIndexMarker574"/>the game more interactive. The <em class="italic">Higher/Lower</em> game that is already functioning uses no animations so far and just has some transitions that have been built in with React Navigation. In the next section, you'll be adding animations and gestures to the application, which will improve the game interface and make the user feel more comfortable while playing the game.</p>
			<h2 id="_idParaDest-100"><a id="_idTextAnchor105"/>Adding gestures and animations in React Native</h2>
			<p>There are multiple <a id="_idIndexMarker575"/>ways to use <a id="_idIndexMarker576"/>animations in React Native, and one of those is to use the Animated API, which can be found at the core of React Native. With the Animated API, you can create animations for the <strong class="source-inline">View</strong>, <strong class="source-inline">Text</strong>, <strong class="source-inline">Image</strong>, and <strong class="source-inline">ScrollView</strong> components from React Native by default. Alternatively, you <a id="_idIndexMarker577"/>can use <a id="_idIndexMarker578"/>the <strong class="source-inline">createAnimatedComponent</strong> method to create your own. </p>
			<h3>Creating a basic animation</h3>
			<p>One of the simplest animations you can add is fading an element in or out by changing the value for <a id="_idIndexMarker579"/>the opacity of that element. In the <em class="italic">Higher/Lower</em> game you created previously, the buttons were styled. These colors already show a small transition, since you're using the <strong class="source-inline">TouchableHighlight</strong> element to create the button. However, it's possible to add a custom transition to this by using the Animated API. To add an animation, the following code blocks must be changed:</p>
			<ol>
				<li value="1">Start by creating a new directory called <strong class="source-inline">components</strong>, which will hold all our reusable <strong class="source-inline">components</strong>. In this directory, create a file called <strong class="source-inline">AnimatedButton.js</strong>, which will contain the following code to construct the new component:<p class="source-code">import React from 'react';</p><p class="source-code">import { StyleSheet, Text, TouchableHighlight } </p><p class="source-code">  from 'react-native';</p><p class="source-code">export default function AnimatedButton({ action, </p><p class="source-code">  onPress }) {</p><p class="source-code">        return (</p><p class="source-code">    &lt;TouchableHighlight</p><p class="source-code">      onPress={onPress}</p><p class="source-code">      style={[</p><p class="source-code">        styles.button,</p><p class="source-code">        action === 'higher' ? styles.buttonGreen :</p><p class="source-code">          styles.buttonRed,</p><p class="source-code">      ]}</p><p class="source-code">    &gt;</p><p class="source-code">      &lt;Text style={styles.buttonText}&gt;{action}&lt;/Text&gt;</p><p class="source-code">    &lt;/TouchableHighlight&gt;</p><p class="source-code">  );</p><p class="source-code">}</p></li>
				<li>Add the <a id="_idIndexMarker580"/>following styling to the bottom of this file:<p class="source-code">// ...</p><p class="source-code">const styles = StyleSheet.create({</p><p class="source-code">  button: {</p><p class="source-code">    display: 'flex',</p><p class="source-code">    alignItems: 'center',</p><p class="source-code">    justifyContent: 'space-around',</p><p class="source-code">    borderRadius: 15,</p><p class="source-code">    padding: 30,</p><p class="source-code">    marginVertical: 15,</p><p class="source-code">  },</p><p class="source-code">  buttonRed: {</p><p class="source-code">    backgroundColor: 'red',</p><p class="source-code">  },</p><p class="source-code">  buttonGreen: {</p><p class="source-code">    backgroundColor: 'green',</p><p class="source-code">  },</p><p class="source-code">  buttonText: {</p><p class="source-code">    color: 'white',</p><p class="source-code">    fontSize: 24,</p><p class="source-code">    textTransform: 'capitalize',</p><p class="source-code">  },</p><p class="source-code">});</p></li>
				<li>As you can <a id="_idIndexMarker581"/>see, this component is comparable to the buttons we have in <strong class="source-inline">screens/Game.js</strong>. Therefore, we can remove the <strong class="source-inline">TouchableHighlight</strong> buttons in that file and replace them with the <strong class="source-inline">AnimatedButton</strong> component. Make sure to pass the correct values for <strong class="source-inline">action</strong> and <strong class="source-inline">onPress</strong> as a prop to this component:<p class="source-code">  import React, { useEffect, useState } from 'react';</p><p class="source-code">  import {</p><p class="source-code">    StyleSheet,</p><p class="source-code">    Text,</p><p class="source-code">    View,</p><p class="source-code">    Alert,</p><p class="source-code"><strong class="bold">-   TouchableHighlight,</strong></p><p class="source-code">  } from 'react-native';</p><p class="source-code">  import { useNavigation } from </p><p class="source-code">    '@react-navigation/native';</p><p class="source-code"><strong class="bold">+ import AnimatedButton from </strong></p><p class="source-code"><strong class="bold">    '../components/AnimatedButton';</strong></p><p class="source-code"> </p><p class="source-code">  export default function Game() {</p><p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code">        &lt;Text style={styles.baseNumber}&gt;</p><p class="source-code">          Starting: {baseNumber}&lt;/Text&gt;</p><p class="source-code"><strong class="bold">-       &lt;TouchableHighlight onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">          setChoice('higher')} style={[styles.button,</strong></p><p class="source-code"><strong class="bold">            styles.buttonGreen]}&gt;</strong></p><p class="source-code"><strong class="bold">-         &lt;Text style={styles.buttonText}&gt;Higher</strong></p><p class="source-code"><strong class="bold">          &lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">-       &lt;/TouchableHighlight&gt;</strong></p><p class="source-code"><strong class="bold">-       &lt;TouchableHighlight onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">          setChoice('lower')} style={[styles.button,</strong></p><p class="source-code"><strong class="bold">            styles.buttonRed]}&gt;</strong></p><p class="source-code"><strong class="bold">-         &lt;Text style={styles.buttonText}&gt;Lower&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">-       &lt;/TouchableHighlight&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;AnimatedButton action='higher' onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">          setChoice('higher')} /&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;AnimatedButton action='lower' onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">          setChoice('lower')} /&gt;</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>No visible <a id="_idIndexMarker582"/>changes are present if you look at the application on your mobile device or the emulator on your computer, since we need to change the clickable element from a <strong class="source-inline">TouchableHighlight</strong> element to a <strong class="source-inline">TouchableWithoutFeedback</strong> element first. That way, the default transition <a id="_idIndexMarker583"/>with the highlight will be gone, and we can replace this with our own effect. The <strong class="source-inline">TouchableWithoutFeedback</strong> element can be imported from React Native in <strong class="source-inline">components/AnimatedButton.js</strong> and should be placed around a <strong class="source-inline">View</strong> element, which will hold the default styling for the button:<p class="source-code">  import React from 'react';</p><p class="source-code">  import {</p><p class="source-code">    StyleSheet,</p><p class="source-code">    Text,</p><p class="source-code"><strong class="bold">-   TouchableHighlight,</strong></p><p class="source-code"><strong class="bold">+   TouchableWithoutFeedback,</strong></p><p class="source-code"><strong class="bold">+   View</strong></p><p class="source-code">  } from 'react-native';</p><p class="source-code">    export default function AnimatedButton({ action, </p><p class="source-code">      onPress }) {</p><p class="source-code">    return (</p><p class="source-code"><strong class="bold">-     &lt;TouchableHighlight onPress={onPress} style={[ </strong></p><p class="source-code"><strong class="bold">        styles.button, action === 'higher' ? </strong></p><p class="source-code"><strong class="bold">        styles.buttonGreen : styles.buttonRed ]}&gt;</strong></p><p class="source-code"><strong class="bold">+     &lt;TouchableWithoutFeedback onPress={onPress}&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;View style={[ styles.button, action === 'higher' </strong></p><p class="source-code"><strong class="bold">          ? styles.buttonGreen : styles.buttonRed ]}&gt;</strong></p><p class="source-code">          &lt;Text style={styles.buttonText}&gt;{action}&lt;/Text&gt;</p><p class="source-code"><strong class="bold">-     &lt;/TouchableHighlight&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;/View&gt;</strong></p><p class="source-code"><strong class="bold">+     &lt;/TouchableWithoutFeedback&gt;</strong></p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>To create a transition when we click on the button, we can use the Animated API. We'll use this to change the opacity of the <strong class="source-inline">AnimatedButton</strong> component from the <a id="_idIndexMarker584"/>moment it's pressed. A new instance of the Animated API starts by specifying a value that should be changed during the animation that we created with the Animated API. This value should be changeable by the Animated API in your entire component, so you can add this value to the top of the component. This value should be created with a <strong class="source-inline">useRef</strong> Hook, since you want this value to be changeable later on. Also, we need to import <strong class="source-inline">Animated</strong> from React Native:<p class="source-code"><strong class="bold">- import React from 'react';</strong></p><p class="source-code"><strong class="bold">+ import React, { useRef } from 'react';</strong></p><p class="source-code">  import {</p><p class="source-code">    StyleSheet,</p><p class="source-code">    Text,</p><p class="source-code">    TouchableWithoutFeedback,</p><p class="source-code"><strong class="bold">-   View,</strong></p><p class="source-code"><strong class="bold">+   Animated,</strong></p><p class="source-code">  } from 'react-native';</p><p class="source-code">  export default function AnimatedButton({ action,</p><p class="source-code">    onPress }) {</p><p class="source-code"><strong class="bold">+   const opacity = useRef(new Animated.Value(1));</strong></p><p class="source-code">  </p><p class="source-code">    return (</p><p class="source-code">      //  ...</p></li>
				<li>This value can now be changed by the Animated API using any of the three animations <a id="_idIndexMarker585"/>types that are built in. These are <strong class="source-inline">decay</strong>, <strong class="source-inline">spring</strong>, and <strong class="source-inline">timing</strong>, where you'll be using the <strong class="source-inline">timing</strong> method from the Animated API to change the animated value within a specified time frame. The Animated API can be triggered from the <strong class="source-inline">onPress</strong> event on <strong class="source-inline">TouchableWithoutFeedback</strong> and calls the <strong class="source-inline">onPress</strong> prop after finishing the animation:<p class="source-code">  // ...</p><p class="source-code">  export default function AnimatedButton({ action,</p><p class="source-code">    onPress }) {</p><p class="source-code">    const opacity = useRef(new Animated.Value(1));</p><p class="source-code">  </p><p class="source-code">    return (</p><p class="source-code">      &lt;TouchableWithoutFeedback</p><p class="source-code"><strong class="bold">-       onPress={onPress}   </strong></p><p class="source-code"><strong class="bold">+       onPress={() =&gt; {</strong></p><p class="source-code"><strong class="bold">+         Animated.timing(opacity.current, {</strong></p><p class="source-code"><strong class="bold">+           toValue: 0.2,</strong></p><p class="source-code"><strong class="bold">+           duration: 800,</strong></p><p class="source-code"><strong class="bold">+           useNativeDriver: true,</strong></p><p class="source-code"><strong class="bold">+         }).start(() =&gt; onPress());</strong></p><p class="source-code"><strong class="bold">+       }}</strong></p><p class="source-code">      &gt;</p><p class="source-code">      // ...</p></li>
			</ol>
			<p>The <strong class="source-inline">timing</strong> method takes the <strong class="source-inline">opacity</strong> that you've specified at the top of your component and an object with the configuration for the Animated API. We need to take <a id="_idIndexMarker586"/>the current value of the opacity, as this is a <strong class="source-inline">ref</strong> value. One of the fields is <strong class="source-inline">toValue</strong>, which will become the value for <strong class="source-inline">opacity</strong> when the animation has ended. The other field is for the field's duration, which specifies how long the animation should last.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The other built-in animation types next to <strong class="source-inline">timing</strong> are <strong class="source-inline">decay</strong> and <strong class="source-inline">spring</strong>. Whereas the <strong class="source-inline">timing</strong> method changes gradually over time, the <strong class="source-inline">decay</strong> type has animations that change fast in the beginning and gradually slow down until the end of the animation. With <strong class="source-inline">spring</strong>, you can create animations that move a little outside of their edges at the end of the animation.</p>
			<ol>
				<li value="7">The <strong class="source-inline">View</strong> component can be replaced by an <strong class="source-inline">Animated.View</strong> component. This component uses the <strong class="source-inline">opacity</strong> variable created by the <strong class="source-inline">useRef</strong> Hook to set its opacity:<p class="source-code">        // ...</p><p class="source-code"><strong class="bold">-       &lt;View</strong></p><p class="source-code"><strong class="bold">+       &lt;Animated.View</strong></p><p class="source-code">          style={[</p><p class="source-code">            styles.button,</p><p class="source-code">            action === 'higher' ? styles.buttonGreen :</p><p class="source-code">              styles.buttonRed,</p><p class="source-code"><strong class="bold">+           { opacity: opacity.current },</strong></p><p class="source-code">          ]}</p><p class="source-code">        &gt;</p><p class="source-code">          &lt;Text style={styles.buttonText}&gt;{action}</p><p class="source-code">          &lt;/Text&gt;</p><p class="source-code"><strong class="bold">-       &lt;/View&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;/Animated.View&gt;</strong></p><p class="source-code">      &lt;/TouchableWithoutFeedback&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
			</ol>
			<p>Now, when you press any of the buttons on the <strong class="source-inline">Game</strong> screen, they will fade out, since the opacity transitions from <strong class="source-inline">1</strong> to <strong class="source-inline">0.2</strong> in 400 milliseconds. </p>
			<p>Something else you can do to make the animation appear smoother is to add an <strong class="source-inline">easing</strong> field <a id="_idIndexMarker587"/>to the <strong class="source-inline">Animated</strong> object. The value for this field comes from the <strong class="source-inline">Easing</strong> module, which can be imported from React Native. The <strong class="source-inline">Easing</strong> module has three standard functions: <strong class="source-inline">linear</strong>, <strong class="source-inline">quad</strong>, and <strong class="source-inline">cubic</strong>. Here, the <strong class="source-inline">linear</strong> function can be used for smoother timing animations:</p>
			<p class="source-code">  import React, { useRef } from 'react';</p>
			<p class="source-code">  import {</p>
			<p class="source-code">    StyleSheet,</p>
			<p class="source-code">    Text,</p>
			<p class="source-code">    TouchableWithoutFeedback,</p>
			<p class="source-code">    Animated,</p>
			<p class="source-code"><strong class="bold">+   Easing,</strong></p>
			<p class="source-code">  } from 'react-native';</p>
			<p class="source-code">export default function AnimatedButton({ action, onPress }) {</p>
			<p class="source-code">  const opacity = useRef(new Animated.Value(1));</p>
			<p class="source-code">  return (</p>
			<p class="source-code">    &lt;TouchableWithoutFeedback</p>
			<p class="source-code">      onPress={() =&gt; {</p>
			<p class="source-code">        Animated.timing(opacity.current, {</p>
			<p class="source-code">          toValue: 0.2,</p>
			<p class="source-code">          duration: 400,</p>
			<p class="source-code">          useNativeDriver: true,</p>
			<p class="source-code"><strong class="bold">+         easing: Easing.linear(),      </strong></p>
			<p class="source-code">        }).start(() =&gt; onPress());</p>
			<p class="source-code">      }}</p>
			<p class="source-code">    &gt;</p>
			<p class="source-code">    // ...</p>
			<p>With this last change, the animation is complete, and the game interface already feels smoother, since <a id="_idIndexMarker588"/>the buttons are being highlighted using our own custom animation. In the next part of this section, we will combine some of these animations to make the user experience for this game even more advanced.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can also combine animations – for example, with the <strong class="source-inline">parallel</strong> method – from the Animated API. This method will start the animations that are specified within the same moment and take an array of animations as its value. Next to the <strong class="source-inline">parallel</strong> function, three other functions help you with animation composition. These functions are <strong class="source-inline">delay</strong>, <strong class="source-inline">sequence</strong>, and <strong class="source-inline">stagger</strong>, which can also be used in combination with each other. The <strong class="source-inline">delay</strong> function starts any animation after a predefined delay, the <strong class="source-inline">sequence</strong> function starts animations in the order you've specified and waits until an animation is resolved before starting another one, and the <strong class="source-inline">stagger</strong> function can start animations both in order and parallel with specified delays in between.</p>
			<h3>Handling gestures with Expo</h3>
			<p>Gestures are <a id="_idIndexMarker589"/>an important <a id="_idIndexMarker590"/>feature of mobile applications, as they make the difference between <a id="_idIndexMarker591"/>a mediocre and a good mobile application. In the <em class="italic">Higher/Lower</em> game you've created, several gestures can be added to make the game more appealing.</p>
			<p>Previously, you used the <strong class="source-inline">TouchableHighlight</strong> element, which gives the user feedback after they press it by changing it. Another element that you could have used for this was the <strong class="source-inline">TouchableOpacity</strong> element. These gestures give the user an impression of what happens when they make decisions within your application, leading to improved user experience. These gestures can be customized and added to other elements as well, making it possible to have custom touchable elements as well.</p>
			<p>For this, you can use a package called <strong class="source-inline">react-native-gesture-handler</strong>, which helps you access native gestures on every platform. All of these gestures will be run in the native thread, which means you can add complex gesture logic without having to deal with the performance limitations of React Native's gesture responder system. Some of the gestures it supports include <em class="italic">tap</em>, <em class="italic">rotate</em>, <em class="italic">drag</em>, and <em class="italic">pan</em>, and a <em class="italic">long press</em>. In the previous section, we installed this package, as it's a requirement for <strong class="source-inline">react-navigation</strong>.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can also use gestures directly from React Native, without having to use an additional package. However, the gesture responder system that React Native currently uses doesn't run in the native thread. Not only does this limit the possibilities of creating and customizing gestures, but you can also run into cross-platform or performance problems. Therefore, it's advised that you use the <strong class="source-inline">react-native-gesture-handler</strong> package, but this isn't necessary for using gestures in React Native.</p>
			<p>The gesture we will implement is a <em class="italic">long press</em> gesture, which will be added to the start button in our <strong class="source-inline">Home</strong> screen, located at <strong class="source-inline">screens/Home.js</strong>. Here, we'll use the <strong class="source-inline">TapGestureHandler</strong> element from <strong class="source-inline">react-native-gesture-handler</strong>, which runs in the native thread, instead of the <strong class="source-inline">TouchableWithoutFeedback</strong> element from React Native, which uses the gesture <a id="_idIndexMarker592"/>responder system. To <a id="_idIndexMarker593"/>implement this, we need to do the following this becomes number 2 please make sure the rest of the numbers are updated accordingly:</p>
			<ol>
				<li value="1">Install using Expo:<p class="source-code">expo install react-native-gesture-handler</p></li>
				<li>Import <strong class="source-inline">TapGestureHandler</strong> and <strong class="source-inline">State</strong> from <strong class="source-inline">react-native-gesture-handler</strong>, next to <strong class="source-inline">View</strong> and <strong class="source-inline">Alert</strong> from React Native. The <strong class="source-inline">TouchableHighlight</strong> import can be removed, as this will be replaced:<p class="source-code">  import React from 'react';</p><p class="source-code">  import {</p><p class="source-code">    StyleSheet,</p><p class="source-code">        Text,  View,</p><p class="source-code"><strong class="bold">+   Alert,</strong></p><p class="source-code"><strong class="bold">-   TouchableHighlight,</strong></p><p class="source-code">  } from 'react-native';</p><p class="source-code">  import { useNavigation } from </p><p class="source-code">    '@react-navigation/native';</p><p class="source-code"><strong class="bold">+ import { TapGestureHandler, State } from </strong></p><p class="source-code"><strong class="bold">    'react-native-gesture-handler';</strong></p><p class="source-code">  export default function Home() {</p><p class="source-code">    // ...</p></li>
				<li>We can replace the <strong class="source-inline">TouchableHighlight</strong> component with <strong class="source-inline">TapGestureHandler</strong>, and we need to put a <strong class="source-inline">View</strong> component inside it, to which we apply the styling. <strong class="source-inline">TapGestureHandler</strong> doesn't take an <strong class="source-inline">onPress</strong> prop but an <strong class="source-inline">onHandlerStateChange</strong> prop instead, to which we pass the new <strong class="source-inline">on</strong> <strong class="source-inline">Tap</strong> function. In this function, we need to check whether the state of <a id="_idIndexMarker594"/>the tap event is <a id="_idIndexMarker595"/>active. For this, you need to know that the tap event goes through different states: <strong class="source-inline">UNDETERMINED</strong>, <strong class="source-inline">FAILED</strong>, <strong class="source-inline">BEGAN</strong>, <strong class="source-inline">CANCELLED</strong>, <strong class="source-inline">ACTIVE</strong>, and <strong class="source-inline">END</strong>. The naming of these states is pretty straightforward, and usually, the handler will have the following flow: <strong class="source-inline">UNDETERMINED</strong> &gt; <strong class="source-inline">BEGAN</strong> &gt; <strong class="source-inline">ACTIVE</strong> &gt; <strong class="source-inline">END</strong> &gt;<strong class="source-inline"> UNDETERMINED</strong>:<p class="source-code">  // ...</p><p class="source-code">  export default function Home() {</p><p class="source-code">    const navigation = useNavigation();</p><p class="source-code"><strong class="bold">+   function onTap(e) {</strong></p><p class="source-code"><strong class="bold">+     if (e.nativeEvent.state === State.ACTIVE) {</strong></p><p class="source-code"><strong class="bold">+       Alert.alert('Long press to start the game');</strong></p><p class="source-code"><strong class="bold">+     }</strong></p><p class="source-code"><strong class="bold">+   }</strong></p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">-       &lt;TouchableHighlight</strong></p><p class="source-code"><strong class="bold">-         onPress={() =&gt; navigation.navigate('Game')}</strong></p><p class="source-code"><strong class="bold">-         style={styles.button}</strong></p><p class="source-code"><strong class="bold">-       &gt;</strong></p><p class="source-code"><strong class="bold">+      &lt;TapGestureHandler onHandlerStateChange={onTap}&gt;</strong></p><p class="source-code"><strong class="bold">+        &lt;View style={styles.button}&gt; &lt;Text </strong></p><p class="source-code"><strong class="bold">           style={styles.buttonText}&gt;Start game!&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+        &lt;/View&gt;</strong></p><p class="source-code"><strong class="bold">-      &lt;/TouchableHighlight&gt;</strong></p><p class="source-code"><strong class="bold">+      &lt;/TapGestureHandler&gt;</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>If you now press the start button on the <strong class="source-inline">Home</strong> screen, you will receive the message that <a id="_idIndexMarker596"/>you need to <a id="_idIndexMarker597"/>long press the button to start the game. To add this long press gesture, we need to add a <strong class="source-inline">LongPressGestureHandler</strong> component inside the <strong class="source-inline">TapGestureHandler</strong> component. Also, we need to create a function that can be called by the <strong class="source-inline">LongPressGestureHandler</strong> component, which navigates us to the <strong class="source-inline">Game</strong> screen:<p class="source-code"><strong class="bold">  import React  from 'react';</strong></p><p class="source-code"><strong class="bold">  import { StyleSheet, Text, View, Alert } </strong></p><p class="source-code"><strong class="bold">    from 'react-native'; </strong></p><p class="source-code"><strong class="bold">  import { useNavigation } </strong></p><p class="source-code"><strong class="bold">    from '@react-navigation/native'; </strong></p><p class="source-code"><strong class="bold">  import { </strong></p><p class="source-code"><strong class="bold">+   LongPressGestureHandler, </strong></p><p class="source-code"><strong class="bold">    TapGestureHandler, </strong></p><p class="source-code"><strong class="bold">    State, </strong></p><p class="source-code"><strong class="bold">  } from 'react-native-gesture-handler';</strong></p><p class="source-code"><strong class="bold">  export default function Home() {</strong></p><p class="source-code"><strong class="bold">    const navigation = useNavigation();</strong></p><p class="source-code"><strong class="bold">+   function onLongPress(e) {</strong></p><p class="source-code"><strong class="bold">+     if (e.nativeEvent.state === State.ACTIVE) {</strong></p><p class="source-code"><strong class="bold">+       navigation.navigate('Game');</strong></p><p class="source-code"><strong class="bold">+     }</strong></p><p class="source-code"><strong class="bold">+   }</strong></p><p class="source-code">    // ...</p></li>
				<li>Inside the <strong class="source-inline">TapGestureHandler</strong> the newly imported <strong class="source-inline">LongPressGestureHandler</strong> component should be placed. This component takes the function to navigate to the game, and a prop to set the minimal duration of the long press. If you dont set this prop, the minimal duration will be 500ms by default::<p class="source-code">  // ...  </p><p class="source-code">  export default function Home() {</p><p class="source-code">    // ...</p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code">        &lt;TapGestureHandler </p><p class="source-code">          onHandlerStateChange={onSingleTap} </p><p class="source-code"><strong class="bold">        &gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;LongPressGestureHandler+ </strong></p><p class="source-code"><strong class="bold">            onHandlerStateChange={onLongPress}</strong></p><p class="source-code"><strong class="bold">+           minDurationMs={600}</strong></p><p class="source-code"><strong class="bold">+         &gt;</strong></p><p class="source-code"><strong class="bold">            &lt;View style={styles.button}&gt;</strong></p><p class="source-code"><strong class="bold">              &lt;Text style={styles.buttonText}&gt;</strong></p><p class="source-code"><strong class="bold">                Start game!&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">            &lt;/View&gt;</strong></p><p class="source-code"><strong class="bold">+         &lt;/LongPressGestureHandler&gt;</strong></p><p class="source-code"><strong class="bold">        &lt;/TapGestureHandler&gt;</strong></p><p class="source-code"><strong class="bold">      &lt;/View&gt;</strong></p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
			</ol>
			<p>With this latest <a id="_idIndexMarker598"/>change, you can only <a id="_idIndexMarker599"/>start the game by long pressing the <strong class="bold">start</strong> button on the <strong class="bold">Home</strong> screen. These gestures can be customized even more, since you can use composition to have multiple tap events that respond to each other. By creating so-called <strong class="bold">cross-handler interactions</strong>, you can create a touchable element <a id="_idIndexMarker600"/>that supports a <em class="italic">double-tap</em> gesture and a <em class="italic">long-press</em> gesture. </p>
			<p>The next section will show you how to handle even more advanced animations, such as displaying animated graphics when any of two players win. For this, we'll use the Lottie package, since it supports more functionalities than the built-in Animated API.</p>
			<h2 id="_idParaDest-101"><a id="_idTextAnchor106"/>Advanced animations with Lottie</h2>
			<p>The <a id="_idIndexMarker601"/>React <a id="_idIndexMarker602"/>Native Animated API is great for <a id="_idIndexMarker603"/>building simple animations, but building more advanced animations can be harder. Luckily, Lottie offers a solution for creating advanced animations in React Native by making it possible for us to render After Effects animations in real time for iOS, Android, and React Native. </p>
			<p class="callout-heading">Note</p>
			<p class="callout">When using Lottie, you don't have to create these After Effects animations yourself; there's a whole <a id="_idIndexMarker604"/>library full of resources that you can customize and use in your project. This library is <a id="_idIndexMarker605"/>called <strong class="source-inline">LottieFiles</strong> and is available at <a href="https://lottiefiles.com/">https://lottiefiles.com/</a>.</p>
			<p>Since we've already added animations to the buttons of our game, a nice place to add more advanced animations would be the message that is displayed when you win or lose the game. This message can be displayed on a screen instead of an alert, where a trophy can be displayed if the user won. Let's do this now:</p>
			<ol>
				<li value="1">To get <a id="_idIndexMarker606"/>started with Lottie, run the following <a id="_idIndexMarker607"/>command, which <a id="_idIndexMarker608"/>will install Lottie to our project: <p class="source-code"><strong class="bold">yarn add lottie-react-native</strong></p></li>
				<li>After the installation is completed, we can create a new screen component called <strong class="source-inline">screens/Result.js</strong> with the following content:<p class="source-code">import React from 'react';</p><p class="source-code">import { StyleSheet, Text, View } from 'react-native';</p><p class="source-code">export default function Result() {</p><p class="source-code">  return (</p><p class="source-code">    &lt;View style={styles.container}&gt;</p><p class="source-code">      &lt;Text&gt;&lt;/Text&gt;</p><p class="source-code">    &lt;/View&gt;</p><p class="source-code">  );</p><p class="source-code">}</p><p class="source-code">const styles = StyleSheet.create({</p><p class="source-code">  container: {</p><p class="source-code">    flex: 1,</p><p class="source-code">    backgroundColor: '#fff',</p><p class="source-code">    alignItems: 'center',</p><p class="source-code">    justifyContent: 'center',</p><p class="source-code">  },</p><p class="source-code">});</p></li>
				<li>Add this screen to the stack navigator <a id="_idIndexMarker609"/>so that it can be used in <a id="_idIndexMarker610"/>the navigation for this mobile application by importing it in App.js. Also, the navigation element <strong class="source-inline">HeaderBackButton</strong> should be imported:<p class="source-code">  import { StatusBar } from 'expo-status-bar';</p><p class="source-code">  import React from 'react';</p><p class="source-code">  import { StyleSheet } from 'react-native';</p><p class="source-code">  import { NavigationContainer } </p><p class="source-code">    from '@react-navigation/native';</p><p class="source-code">  import { createNativeStackNavigator } </p><p class="source-code">    from '@react-navigation/native-stack';</p><p class="source-code"><strong class="bold">+ import { HeaderBackButton } </strong></p><p class="source-code"><strong class="bold">    from '@react-navigation/elements';</strong></p><p class="source-code">  import Home from './screens/Home';</p><p class="source-code">  import Game from './screens/Game';</p><p class="source-code"><strong class="bold">+ import Result from './screens/Result';</strong></p><p class="source-code">  // ...</p></li>
				<li>We also imported the <strong class="source-inline">HeaderBackButton</strong> component from React Navigation when adding the <strong class="source-inline">Result</strong> screen, as we also want to change the <strong class="bold">go back</strong> button in the header for this screen. This way, it will navigate back to the <strong class="source-inline">Home</strong> screen <a id="_idIndexMarker611"/>instead of the <strong class="source-inline">Game</strong> screen <a id="_idIndexMarker612"/>so that the user <a id="_idIndexMarker613"/>can start a new game after finishing it:<p class="source-code">  // ...</p><p class="source-code">  export default function App() {</p><p class="source-code">    return (</p><p class="source-code">      &lt;NavigationContainer&gt;</p><p class="source-code">        &lt;StatusBar style='auto' /&gt;</p><p class="source-code">        &lt;Stack.Navigator initialRouteName='Home'&gt;</p><p class="source-code">          &lt;Stack.Screen name='Home' component={Home} /&gt;</p><p class="source-code">          &lt;Stack.Screen name='Game' component={Game} /&gt;</p><p class="source-code"><strong class="bold">+         &lt;Stack.Screen</strong></p><p class="source-code"><strong class="bold">+           name='Result'</strong></p><p class="source-code"><strong class="bold">+           component={Result}</strong></p><p class="source-code"><strong class="bold">+           options={({ navigation }) =&gt; ({</strong></p><p class="source-code"><strong class="bold">+             headerLeft: (props) =&gt; (</strong></p><p class="source-code"><strong class="bold">+               &lt;HeaderBackButton</strong></p><p class="source-code"><strong class="bold">+                 {...props}</strong></p><p class="source-code"><strong class="bold">+                 label='Home'</strong></p><p class="source-code"><strong class="bold">+                 onPress={() =&gt;</strong></p><p class="source-code"><strong class="bold">                    navigation.navigate('Home')}</strong></p><p class="source-code"><strong class="bold">+               /&gt;</strong></p><p class="source-code"><strong class="bold">+             ),</strong></p><p class="source-code"><strong class="bold">+           })}</strong></p><p class="source-code"><strong class="bold">+         /&gt;</strong></p><p class="source-code">      &lt;/Stack.Navigator&gt;</p><p class="source-code">    &lt;/NavigationContainer&gt;</p><p class="source-code">  );</p><p class="source-code">  // ...</p></li>
				<li>From <a id="_idIndexMarker614"/>the <strong class="source-inline">Game</strong> screen in <strong class="source-inline">screens/Game.js</strong>, we can navigate the user to the <strong class="source-inline">Result</strong> screen after playing <a id="_idIndexMarker615"/>the game and also pass a <a id="_idIndexMarker616"/>param to this screen. Using this param, a message can be displayed with the result of the game:<p class="source-code">  // ...</p><p class="source-code">  export default function Game() {</p><p class="source-code">    // ...</p><p class="source-code">    useEffect(() =&gt; {</p><p class="source-code">      if (choice.length) {</p><p class="source-code">        const winner = (choice === 'higher' &amp;&amp; score &gt;</p><p class="source-code">          baseNumber) || (choice === 'lower' &amp;&amp; </p><p class="source-code">            baseNumber &gt; score);</p><p class="source-code"><strong class="bold">-       Alert.alert(`You've ${winner ? 'won' : </strong></p><p class="source-code"><strong class="bold">          'lost'}`, `You scored: ${score}`);</strong></p><p class="source-code"><strong class="bold">-       navigation.goBack();</strong></p><p class="source-code"><strong class="bold">+       navigation.navigate('Result', { winner })</strong></p><p class="source-code">    }</p><p class="source-code">  }, [baseNumber, score, choice]);</p><p class="source-code">  return (</p><p class="source-code">  // ...</p></li>
				<li>From <a id="_idIndexMarker617"/>the <strong class="source-inline">Result</strong> screen in the <strong class="source-inline">screens/Result.js</strong> file, we can import <strong class="source-inline">LottieView</strong> from <strong class="source-inline">lottie-react-native</strong> and <a id="_idIndexMarker618"/>get the param <a id="_idIndexMarker619"/>from the <strong class="source-inline">route</strong> object using the <strong class="source-inline">useRoute</strong> Hook from React Navigation. Using this param, we can return a message if the user has won or lost:<p class="source-code">  import React from 'react';</p><p class="source-code">  import { StyleSheet, Text, View } from </p><p class="source-code">    'react-native';</p><p class="source-code"><strong class="bold">+ import LottieView from 'lottie-react-native';</strong></p><p class="source-code"><strong class="bold">+ import { useRoute } from '@react-navigation/native';</strong></p><p class="source-code">  export default function Result() {</p><p class="source-code"><strong class="bold">+   const route = useRoute();</strong></p><p class="source-code"><strong class="bold">+   const { winner } = route.params;</strong></p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">+       &lt;Text&gt;You've {winner ? 'won' : 'lost'}&lt;/Text&gt;</strong></p><p class="source-code">      // ...</p></li>
				<li>The imported <strong class="source-inline">Lottie</strong> component can render any Lottie file that you either create yourself or that is downloaded from the <strong class="source-inline">LottieFiles</strong> library. In the GitHub <a id="_idIndexMarker620"/>repository for this chapter, you <a id="_idIndexMarker621"/>will find a Lottie file <a id="_idIndexMarker622"/>that can be used in this project called <strong class="source-inline">winner.json</strong>. This file must be placed in the <strong class="source-inline">assets</strong> directory and can be rendered by the <strong class="source-inline">LottieView</strong> component when you add it to the source, and the <strong class="source-inline">width</strong> and <strong class="source-inline">height</strong> values of the animation can be set by passing a <strong class="source-inline">style</strong> object. Also, you should add the <strong class="source-inline">autoPlay</strong> prop to start the animation once the component renders:<p class="source-code">  // ...</p><p class="source-code">  export default function Result() {</p><p class="source-code">    const route = useRoute();</p><p class="source-code">    const { winner } = route.params;</p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code">        &lt;Text&gt;You've {winner ? 'won' : 'lost'}&lt;/Text&gt;</p><p class="source-code"><strong class="bold">+       {winner &amp;&amp; (</strong></p><p class="source-code"><strong class="bold">+         &lt;LottieView</strong></p><p class="source-code"><strong class="bold">+           autoPlay</strong></p><p class="source-code"><strong class="bold">+           style={{</strong></p><p class="source-code"><strong class="bold">+             width: 300,</strong></p><p class="source-code"><strong class="bold">+             height: 300,</strong></p><p class="source-code"><strong class="bold">+           }}</strong></p><p class="source-code"><strong class="bold">+           source={require('../assets/winner.json')}</strong></p><p class="source-code"><strong class="bold">+         /&gt;</strong></p><p class="source-code"><strong class="bold">+       )}</strong></p><p class="source-code">      &lt;/View&gt;</p><p class="source-code">    );</p><p class="source-code">  }</p><p class="source-code">  // ...</p></li>
				<li>As a <a id="_idIndexMarker623"/>finishing touch, we can add some <a id="_idIndexMarker624"/>styling to the message <a id="_idIndexMarker625"/>that is displayed on this screen and make it bigger:<p class="source-code">    // ...  </p><p class="source-code">    return (</p><p class="source-code">      &lt;View style={styles.container}&gt;</p><p class="source-code"><strong class="bold">-       &lt;Text&gt;You've {winner ? 'won' : 'lost'}&lt;/Text&gt;</strong></p><p class="source-code"><strong class="bold">+       &lt;Text style={styles.message}&gt;</strong></p><p class="source-code"><strong class="bold">          You've {winner ? 'won' : 'lost'}&lt;/Text&gt;</strong></p><p class="source-code">        // ...</p><p class="source-code">  const styles = StyleSheet.create({</p><p class="source-code">    // ...</p><p class="source-code"><strong class="bold">+   message: {</strong></p><p class="source-code"><strong class="bold">+     fontSize: 48,</strong></p><p class="source-code"><strong class="bold">+   },</strong></p><p class="source-code">  });</p></li>
			</ol>
			<p>When the <strong class="source-inline">Result</strong> screen component receives the <strong class="source-inline">winner</strong> param with the <strong class="source-inline">true</strong> value, instead of the board, the user will see the trophy animation being rendered. An example of how this will look when you're running the application with the iOS simulator or on an iOS device can be seen here:</p>
			<div>
				<div id="_idContainer045" class="IMG---Figure">
					<img src="image/Figure_8.05_B17390.jpg" alt="Figure 8.5 – The Lottie animation after winning a game&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.5 – The Lottie animation after winning a game</p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you find the speed of this animation too fast, you can reduce it by combining the Animated API with Lottie. The <strong class="source-inline">LottieView</strong> component can take a <strong class="source-inline">progress</strong> prop that determines the speed of the animation. When passing a value that is created by the Animated API, you can tweak the speed of the animation as per your preference. </p>
			<p>By adding this <a id="_idIndexMarker626"/>animation using Lottie, we've created a <a id="_idIndexMarker627"/>mobile application <a id="_idIndexMarker628"/>with an animated game that you can play for hours.</p>
			<h1 id="_idParaDest-102"><a id="_idTextAnchor107"/>Summary</h1>
			<p>In this chapter, we've created a React Native application with Expo. React Native uses the same principles as React and can be used to create mobile applications. We've added basic routing with React Navigation, based on stack navigation. We've also added basic and more complex gestures to the game, which run in the native thread thanks to the <strong class="source-inline">react-native-gesture-handler</strong> package. Finally, animations were created using the React Native Animated API and Lottie, which is available from the Expo CLI.</p>
			<p>The project that we'll create in the next chapter will explore handling data in React Native. We'll also learn about the differences in styling between iOS and Android.</p>
			<h1 id="_idParaDest-103"><a id="_idTextAnchor108"/>Further reading</h1>
			<ul>
				<li>Expo: <a href="https://docs.expo.io/">https://docs.expo.io/</a></li>
				<li>Various Lottie files: <a href="https://lottiefiles.com/">https://lottiefiles.com/</a></li>
				<li>More on the Animated API: <a href="https://facebook.github.io/react-native/docs/animated">https://facebook.github.io/react-native/docs/animated</a></li>
				<li>Gesture Handler:<a href="https://docs.swmansion.com/react-native-gesture-handler/">https://docs.swmansion.com/react-native-gesture-handler/</a></li>
			</ul>
		</div>
	</body></html>