<html><head></head><body>
<div id="_idContainer053">
<h1 class="chapter-number" id="_idParaDest-97"><a id="_idTextAnchor192"/><span class="koboSpan" id="kobo.1.1">6</span></h1>
<h1 id="_idParaDest-98"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.2.1">Building a Complete Pinterest Clone with GraphQL</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, we explored GraphQL, GraphQL Apollo Server 2, queries, mutations, and how to integrate these technologies into your Vue.js 3 application. </span><span class="koboSpan" id="kobo.3.2">In addition, we learned how to utilize GraphQL to deliver scalable and high-performing applications. </span><span class="koboSpan" id="kobo.3.3">This chapter will demonstrate how to build a complete Pinterest clone with Vue 3 and GraphQL. </span><span class="koboSpan" id="kobo.3.4">You will utilize your knowledge of GraphQL to develop and deliver an enterprise application such as Pinterest using Vue 3 and GraphQL. </span><span class="koboSpan" id="kobo.3.5">Furthermore, you </span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.4.1">will learn how to create and manage your backend APIs using a popular headless </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">content management system</span></strong><span class="koboSpan" id="kobo.6.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.7.1">CMS</span></strong><span class="koboSpan" id="kobo.8.1">) </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">called Strapi.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">We will cover the following key topics in </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.12.1">An introduction </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">to Strapi</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Scaffolding a </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">Strapi project</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Building </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">the collections</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Building a Vue 3 </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">Pinterest app</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Connecting the frontend </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">and backend</span></span></li>
<li><span class="koboSpan" id="kobo.22.1">Testing </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">the app</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.24.1">By the end of this chapter, you will have learned how to create a scalable and high-performing Pinterest clone application </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">with GraphQL.</span></span><a id="_idTextAnchor194"/></p>
<h1 id="_idParaDest-99"><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.26.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.27.1">To start with this chapter, I recommend you read through </span><a href="B17237_05.xhtml#_idTextAnchor151"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.28.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.29.1">, </span><em class="italic"><span class="koboSpan" id="kobo.30.1">An Introduction to GraphQL, Queries, Mutations, and RESTful APIs</span></em><span class="koboSpan" id="kobo.31.1">, where we explored GraphQL, GraphQL Apollo Server 2, queries, mutations, and how to integrate these technologies into your Vue.js </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">3 application.</span></span></p>
<p><span class="koboSpan" id="kobo.33.1">All the code files required for this chapter can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">at </span></span><a href="https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications/tree/chapter-6"><span class="No-Break"><span class="koboSpan" id="kobo.35.1">https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications/tree/chapter-6</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.36.1">.</span></span><a id="_idTextAnchor196"/></p>
<h1 id="_idParaDest-100"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.37.1">An introduction to Strapi</span></h1>
<p><span class="koboSpan" id="kobo.38.1">Strapi is an open-source headless CMS based on Node.js that is used to create and manage different </span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.39.1">forms of content using a RESTful API </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">and GraphQL.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">Additionally, Strapi makes developing, deploying, and maintaining APIs faster and can be configured to consume content via APIs using any HTTP client or </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">GraphQL-enabled frontend.</span></span></p>
<p><span class="koboSpan" id="kobo.43.1">These benefits are the reason we will use Strapi to create the backend of our Pinterest clone application, so we can focus more on the frontend without having to pay much attention to scaling </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">the backend.</span></span></p>
<p><span class="koboSpan" id="kobo.45.1">In the next section, we will work through scaffolding a Strapi project, building out all the collections we need in our project, and seeding out the Strapi account with </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">dummy data</span><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.47.1">.</span></span></p>
<h1 id="_idParaDest-101"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.48.1">Scaffolding a Strapi project</span></h1>
<p><span class="koboSpan" id="kobo.49.1">Starting a new Strapi backend project is very easy and works precisely like installing a new </span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.50.1">framework using the </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">CLI tool.</span></span></p>
<p><span class="koboSpan" id="kobo.52.1">We will scaffold a full-blown backend application by running any of these simple commands and testing it in our </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">default browser:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.54.1">
  ```bash
npx create-Strapi-app strapi-pinterest-api --quickstart
    # OR
yarn create straps-app strapi-pinterest-api --quickstart
```</span></pre>
<p><span class="koboSpan" id="kobo.55.1">The preceding command scaffolds a new Strapi API into the specified folder. </span><span class="koboSpan" id="kobo.55.2">Next, run the following command to build and deploy your newly created backend API </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">with Strapi:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.57.1">
```bash
npm run build
npm run deploy
```</span></pre>
<p><span class="koboSpan" id="kobo.58.1">These preceding two commands should build your app and deploy it so you can easily test it out by typing the following URL (</span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">localhost:</span></strong><span class="koboSpan" id="kobo.60.1">) in your default browser if it doesn’t </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">open automatically.</span></span></p>
<p><span class="koboSpan" id="kobo.62.1">Most importantly, the last command will also open a new tab with a page to register your new admin </span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.63.1">user of the system. </span><span class="koboSpan" id="kobo.63.2">Go ahead and fill out the form and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.64.1">LET’S START</span></strong><span class="koboSpan" id="kobo.65.1"> button to create a new </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">admin user.</span></span></p>
<p><span class="koboSpan" id="kobo.67.1">Here is what the page </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">looks like:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer040">
<span class="koboSpan" id="kobo.69.1"><img alt="Figure 6.1 – The Strapi registration page" src="image/Figure_6.01_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.70.1">Figure 6.1 – The Strapi registration page</span></p>
<p><span class="koboSpan" id="kobo.71.1">After signing up as the admin of the platform, you will have admin access to create different </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.72.1">collections and set up different users and permission levels for </span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">your API.</span></span></p>
<p><span class="koboSpan" id="kobo.74.1">In the next section, we will explore how to create different collections that will correspond to our Pinterest API resources. </span><span class="koboSpan" id="kobo.74.2">We will also set up different permission levels to limit what each user in our Pinterest application </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">can acce</span><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.76.1">ss.</span></span></p>
<h1 id="_idParaDest-102"><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.77.1">Building the collections</span></h1>
<p><span class="koboSpan" id="kobo.78.1">Strapi uses collections to denote resources; for example, if your application is a news application </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.79.1">and you want to create a backend that will process posts, comments, and so on, you will create it as a Posts, Comments collection </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">in Strapi.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">However, since we are building a Pinterest clone, we will create the following collections: </span><strong class="bold"><span class="koboSpan" id="kobo.82.1">Photo</span></strong><span class="koboSpan" id="kobo.83.1">(</span><strong class="bold"><span class="koboSpan" id="kobo.84.1">Pin</span></strong><span class="koboSpan" id="kobo.85.1">), </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">Board</span></strong><span class="koboSpan" id="kobo.87.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.88.1">User</span></strong><span class="koboSpan" id="kobo.89.1">, and each of these collections will contain their respective fields, as demonstrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">following steps.</span></span></p>
<p><span class="koboSpan" id="kobo.91.1">To demonstrate, we will create a simple Photo(Pin) collection that will store the details of a specific photo in our app. </span><span class="koboSpan" id="kobo.91.2">In Pinterest, it is called </span><strong class="bold"><span class="koboSpan" id="kobo.92.1">PIN</span></strong><span class="koboSpan" id="kobo.93.1">, but we will prefer to call it as </span><strong class="bold"><span class="koboSpan" id="kobo.94.1">PHOTO</span></strong><span class="koboSpan" id="kobo.95.1"> since we </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.96.1">started with that in the </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">previous chapters.</span></span></p>
<p><span class="koboSpan" id="kobo.98.1">Now to store the details of our photo, we will create a new </span><strong class="bold"><span class="koboSpan" id="kobo.99.1">Collection Type</span></strong><span class="koboSpan" id="kobo.100.1"> called </span><strong class="source-inline"><span class="koboSpan" id="kobo.101.1">photos</span></strong><span class="koboSpan" id="kobo.102.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">Strapi dashboard.</span></span></p>
<p><span class="koboSpan" id="kobo.104.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">photos</span></strong><span class="koboSpan" id="kobo.106.1"> collection will have the following fields: </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">title</span></strong><span class="koboSpan" id="kobo.108.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">url</span></strong><span class="koboSpan" id="kobo.110.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">user_id</span></strong><span class="koboSpan" id="kobo.112.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">description</span></strong><span class="koboSpan" id="kobo.114.1">. </span><span class="koboSpan" id="kobo.114.2">These fields are imaginative and can change as we process them into </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">the book:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.116.1">To create our first </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">Collection Type</span></strong><span class="koboSpan" id="kobo.118.1">, log into the </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Admin</span></strong><span class="koboSpan" id="kobo.120.1"> dashboard and click </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Collection Type Builder</span></strong><span class="koboSpan" id="kobo.122.1"> on the left side of the page. </span><span class="koboSpan" id="kobo.122.2">Next, click on </span><strong class="bold"><span class="koboSpan" id="kobo.123.1">Create New Collection Type</span></strong><span class="koboSpan" id="kobo.124.1"> still on the left side of the page and fill in </span><strong class="source-inline"><span class="koboSpan" id="kobo.125.1">photos</span></strong><span class="koboSpan" id="kobo.126.1"> as the </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">display name.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer041">
<span class="koboSpan" id="kobo.128.1"><img alt="Figure 6.2 – The Strapi collection dashboard" src="image/Figure_6.02_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.129.1">Figure 6.2 – The Strapi collection dashboard</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.130.1">Next, choose </span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.131.1">the data type for your field, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer042">
<span class="koboSpan" id="kobo.133.1"><img alt="Figure 6.3 – The Strapi Photos collection" src="image/Figure_6.03_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.134.1">Figure 6.3 – The Strapi Photos collection</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.135.1">Next, enter the name of the field for your </span><strong class="bold"><span class="koboSpan" id="kobo.136.1">Photos</span></strong><span class="koboSpan" id="kobo.137.1"> collection and click on </span><strong class="bold"><span class="koboSpan" id="kobo.138.1">+ Add another field</span></strong><span class="koboSpan" id="kobo.139.1"> to enter </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">another field:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer043">
<span class="koboSpan" id="kobo.141.1"><img alt="Figure 6.4 – Strapi | Add new Text field" src="image/Figure_6.04_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.142.1">Figure 6.4 – Strapi | Add new Text field</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.143.1">Repeat the process </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.144.1">until you exhaust the list of fields for your collection and click </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.146.1">Finish</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer044">
<span class="koboSpan" id="kobo.148.1"><img alt="Figure 6.5 – The Strapi Photos dashboard" src="image/Figure_6.05_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.149.1">Figure 6.5 – The Strapi Photos dashboard</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.150.1">Lastly, click on </span><strong class="bold"><span class="koboSpan" id="kobo.151.1">Save</span></strong><span class="koboSpan" id="kobo.152.1"> and repeat the process for </span><strong class="bold"><span class="koboSpan" id="kobo.153.1">Users</span></strong><span class="koboSpan" id="kobo.154.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.155.1">Boards</span></strong><span class="koboSpan" id="kobo.156.1">, and other collections you </span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.157.1">might want to add. </span><span class="koboSpan" id="kobo.157.2">You should have all the collections listed, as </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">shown here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer045">
<span class="koboSpan" id="kobo.159.1"><img alt="Figure 6.6 – Strapi | User fields" src="image/Figure_6.06_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.160.1">Figure 6.6 – Strapi | User fields</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.161.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.162.1">You can </span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.163.1">learn more about Strapi collections here – </span><a href="https://docs.strapi.io/user-docs/latest/content-types-builder/introduction-to-content-types-builder.html"><span class="koboSpan" id="kobo.164.1">https://docs.strapi.io/user-docs/latest/content-types-builder/introduction-to-content-types-builder.html</span></a><span class="koboSpan" id="kobo.165.1"> – or watch this video – </span><a href="https://www.youtube.com/watch?v=bStlyMB0NEw"><span class="koboSpan" id="kobo.166.1">https://www.youtube.com/watch?v=bStlyMB0NEw</span></a><span class="koboSpan" id="kobo.167.1"> – to see how we created all the collections we will use in </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">the project.</span></span></p>
<p><span class="koboSpan" id="kobo.169.1">In the next section, we will explore how to seed fake data into the Strapi collection to enable us to display some photos before we start adding </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">new o</span><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.171.1">nes.</span></span></p>
<h2 id="_idParaDest-103"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.172.1">Seeding data</span></h2>
<p><span class="koboSpan" id="kobo.173.1">After successfully </span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.174.1">creating the collections, we will seed some data so that we have plenty of photos, boards, and users to </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">work with.</span></span></p>
<p><span class="koboSpan" id="kobo.176.1">Take the following steps to seed some data into the collections we have created. </span><span class="koboSpan" id="kobo.176.2">First, we will seed some photo information, including the photos, and create a board that will house some of these photos and a user who is taking </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">these actions:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.178.1">To seed dummy data for our Pinterest project, we will click on each of the collections we have created and click </span><strong class="bold"><span class="koboSpan" id="kobo.179.1">+ Add New Users</span></strong><span class="koboSpan" id="kobo.180.1">, as shown in </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">this screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer046">
<span class="koboSpan" id="kobo.182.1"><img alt="Figure 6.7 – Strapi | Add New Users" src="image/Figure_6.07_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.183.1">Figure 6.7 – Strapi | Add New Users</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.184.1">Next, fill in </span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.185.1">the information needed to create a single user of our Pinterest application and click on </span><strong class="bold"><span class="koboSpan" id="kobo.186.1">Save</span></strong><span class="koboSpan" id="kobo.187.1">, as shown in </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">this screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer047">
<span class="koboSpan" id="kobo.189.1"><img alt="Figure 6.8 – Strapi | Create an entry" src="image/Figure_6.08_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.190.1">Figure 6.8 – Strapi | Create an entry</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.191.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.192.1">Publish</span></strong><span class="koboSpan" id="kobo.193.1">, and you should have your new user added to the </span><strong class="bold"><span class="koboSpan" id="kobo.194.1">Users</span></strong><span class="koboSpan" id="kobo.195.1"> collection, as </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">seen here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer048">
<span class="koboSpan" id="kobo.197.1"><img alt="Figure 6.9 – List all users" src="image/Figure_6.09_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.198.1">Figure 6.9 – List all users</span></p>
<p><span class="koboSpan" id="kobo.199.1">Create more fake </span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.200.1">data by repeating the process for all other collections, such as </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">Photos</span></strong><span class="koboSpan" id="kobo.202.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.203.1">Users</span></strong><span class="koboSpan" id="kobo.204.1">, for testing. </span><span class="koboSpan" id="kobo.204.2">Later in the next section, we will learn how to programmatically create data in the Strapi collection and build our Pinterest clone using </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">Vu</span><a id="_idTextAnchor204"/><span class="koboSpan" id="kobo.206.1">e 3.</span></span></p>
<h1 id="_idParaDest-104"><a id="_idTextAnchor205"/><span class="koboSpan" id="kobo.207.1">Building a Vue 3 Pinterest app</span></h1>
<p><span class="koboSpan" id="kobo.208.1">In the previous </span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.209.1">section, we explored creating the backend of our Pinterest application using Strapi. </span><span class="koboSpan" id="kobo.209.2">In this section, we will create the frontend using </span><span class="No-Break"><span class="koboSpan" id="kobo.210.1">Vue 3.</span></span></p>
<p><span class="koboSpan" id="kobo.211.1">However, it is important to note that since this is a demo, we will only abstract the slightest part of Pinterest to represent the application. </span><span class="koboSpan" id="kobo.211.2">Developing the full Pinterest application will require effort, teams, </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">and resources.</span></span></p>
<p><span class="koboSpan" id="kobo.213.1">We will continue by using the official project we created for this book. </span><span class="koboSpan" id="kobo.213.2">In the previous chapters, we added internationalization, structured the project, and built out the login form, and we will continue by including other necessary files to make up a full-blown Pinterest </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">clone application.</span></span></p>
<p><span class="koboSpan" id="kobo.215.1">Most importantly, I will be using Tailwind CSS as my CSS framework for this project, and since it’s beyond the scope of this book, you can visit the official documentation to set it up with </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">Vue 3.</span></span></p>
<p><span class="koboSpan" id="kobo.217.1">You can clone the project from this repository – </span><a href="https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications"><span class="koboSpan" id="kobo.218.1">https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications</span></a><span class="koboSpan" id="kobo.219.1"> – to jump </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">right in.</span></span></p>
<p><span class="koboSpan" id="kobo.221.1">Here is a demo of what we </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">are building:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer049">
<span class="koboSpan" id="kobo.223.1"><img alt="Figure 6.10 – Pinterest preview" src="image/Figure_6.10_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.224.1">Figure 6.10 – Pinterest preview</span></p>
<p><span class="koboSpan" id="kobo.225.1">We have everything separated properly and structured in a scalable format for our application. </span><span class="koboSpan" id="kobo.225.2">The following </span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.226.1">shows how we structure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">HomeOverview</span></strong><span class="koboSpan" id="kobo.228.1"> component that represents the </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">home page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.230.1">
&lt;template&gt;
 &lt;main&gt;
   &lt;Header&gt;&lt;/Header&gt;
   &lt;section style="mt-20"&gt;
     &lt;Cards /&gt;
   &lt;/section&gt;
 &lt;/main&gt;
&lt;/template&gt;
&lt;script setup&gt;
import Header from '../organisms/Header.vue'
import Cards from '../organisms/Cards.vue'
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.231.1">It contains the </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">Header</span></strong><span class="koboSpan" id="kobo.233.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">Cards</span></strong><span class="koboSpan" id="kobo.235.1"> components. </span><span class="koboSpan" id="kobo.235.2">We could use </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">alias</span></strong><span class="koboSpan" id="kobo.237.1"> to import these components making </span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.238.1">the import URL shorter, but I preferred to show you the </span><span class="No-Break"><span class="koboSpan" id="kobo.239.1">relative path.</span></span></p>
<p><span class="koboSpan" id="kobo.240.1">In the next section, we will start building out the frontend project by creating the </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">Cards</span></strong><span class="koboSpan" id="kobo.242.1"> component and implementing the logic to display all the photos we have </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">created previ</span><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.244.1">ously.</span></span></p>
<h2 id="_idParaDest-105"><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.245.1">Generating the Cards component</span></h2>
<p><span class="koboSpan" id="kobo.246.1">Let us take a </span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.247.1">look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">Cards</span></strong><span class="koboSpan" id="kobo.249.1"> component first to </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.250.1">explore the content in it. </span><span class="koboSpan" id="kobo.250.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">Cards</span></strong><span class="koboSpan" id="kobo.252.1"> component houses the logic behind displaying the photo we have created and stored in our Strapi instance, and you can see this in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.254.1">
&lt;template&gt;
 &lt;div class="pin_container sm:justify-center"&gt;
   &lt;div class="card card_small h-[16.25rem] relative"&gt;
     &lt;!-- // Medium --&gt;
     &lt;Card /&gt;
   &lt;/div&gt;
   &lt;div class="card card_medium h-[20.625rem] relative"&gt;
     &lt;!-- // Small --&gt;
     &lt;Card /&gt;
   &lt;/div&gt;
   &lt;div class="card card_large h-[28.125rem] relative"&gt;
     &lt;!-- // Smaller --&gt;
     &lt;Card /&gt;
   &lt;/div&gt;
   &lt;div class="card card_smaller h-[11.063rem] relative"&gt;
     &lt;!-- // Medium --&gt;
     &lt;Card /&gt;
   &lt;/div&gt;
   &lt;div class="card card_small h-[16.25rem] relative"&gt;
     &lt;!-- // Large --&gt;
     &lt;Card /&gt;
   &lt;/div&gt;
 &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import Card from '../molecules/Card.vue';
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.255.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">Cards</span></strong><span class="koboSpan" id="kobo.257.1"> component is where the magic happens, as it represents the collections of each Photo (Pin) in </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.259.1">Here is a preview of </span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">the code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer050">
<span class="koboSpan" id="kobo.261.1"><img alt="Figure 6.11 – Cards preview" src="image/Figure_6.11_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.262.1">Figure 6.11 – Cards preview</span></p>
<p><span class="koboSpan" id="kobo.263.1">Firstly, we display </span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.264.1">the cards based </span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.265.1">on their sizes (smaller, small, medium, and large). </span><span class="koboSpan" id="kobo.265.2">This helps us to get the same previews </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">as Pinterest.</span></span></p>
<p><span class="koboSpan" id="kobo.267.1">You can clone the full frontend code and the Strapi backend from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">chapter 6</span></strong><span class="koboSpan" id="kobo.269.1"> branch in </span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.270.1">the repository </span><a id="_idIndexMarker237"/><span class="No-Break"><span class="koboSpan" id="kobo.271.1">here: </span></span><a href="https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications/tree/chapter-6"><span class="No-Break"><span class="koboSpan" id="kobo.272.1">https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications/tree/chapter-6</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.273.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.274.1">In the previous section, we demonstrated how to build a simple Pinterest clone by creating different </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">Card</span></strong><span class="koboSpan" id="kobo.276.1"> components to represent the Pin information. </span><span class="koboSpan" id="kobo.276.2">In the next section, we will learn how to connect our Strapi backend to the Pinterest frontend we have created </span><a id="_idTextAnchor208"/><span class="koboSpan" id="kobo.277.1">using </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">Vue 3.</span></span></p>
<h1 id="_idParaDest-106"><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.279.1">Connecting the frontend and backend</span></h1>
<p><span class="koboSpan" id="kobo.280.1">The most </span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.281.1">interesting part is how we structure our API requests to accommodate maintainability and easy adaptability, following the best practices we have learned from the </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">previous chapters.</span></span></p>
<p><span class="koboSpan" id="kobo.283.1">The following screenshot shows our folder structure containing the GraphQL endpoints according to the features we currently have in our application and in the Strapi backend we developed for </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">this project:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer051">
<span class="koboSpan" id="kobo.285.1"><img alt="Figure 6.12 – A screenshot of the new folder structure with GraphQL and Strapi" src="image/Figure_6.12_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.286.1">Figure 6.12 – A screenshot of the new folder structure with GraphQL and Strapi</span></p>
<p><span class="koboSpan" id="kobo.287.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">graphql</span></strong><span class="koboSpan" id="kobo.289.1"> folder, we </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.290.1">have defined three folders, namely </span><strong class="source-inline"><span class="koboSpan" id="kobo.291.1">auth</span></strong><span class="koboSpan" id="kobo.292.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">photos</span></strong><span class="koboSpan" id="kobo.294.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">users</span></strong><span class="koboSpan" id="kobo.296.1">, which represent the features our current project will have. </span><span class="koboSpan" id="kobo.296.2">Let’s look at what these </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">fold</span><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.298.1">ers contain.</span></span></p>
<h2 id="_idParaDest-107"><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.299.1">The auth folder</span></h2>
<p><span class="koboSpan" id="kobo.300.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">auth</span></strong><span class="koboSpan" id="kobo.302.1"> folder </span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.303.1">contains only a single mutation </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.304.1">which will handle all the authentication and authorization functionalities. </span><span class="koboSpan" id="kobo.304.2">It will contain mutations, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">register</span></strong><span class="koboSpan" id="kobo.306.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">login</span></strong><span class="koboSpan" id="kobo.308.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.309.1">forgotPassword</span></strong><span class="koboSpan" id="kobo.310.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.311.1">sendForgotPasswordEma</span><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.312.1">il</span></strong><span class="koboSpan" id="kobo.313.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">so on.</span></span></p>
<h2 id="_idParaDest-108"><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.315.1">The photos folder</span></h2>
<p><span class="koboSpan" id="kobo.316.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1">photos</span></strong><span class="koboSpan" id="kobo.318.1"> folder is the </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.319.1">most complex because it contains all the functionalities </span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.320.1">of the Pinterest application demo. </span><span class="koboSpan" id="kobo.320.2">It contains both mutations and queries, which is why we have created different files </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">for it.</span></span></p>
<p><span class="koboSpan" id="kobo.322.1">Some of the mutations are </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">createPin</span></strong><span class="koboSpan" id="kobo.324.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">createBoard</span></strong><span class="koboSpan" id="kobo.326.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">updatePin</span></strong><span class="koboSpan" id="kobo.328.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">updateBoard</span></strong><span class="koboSpan" id="kobo.330.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.331.1">deletePin</span></strong><span class="koboSpan" id="kobo.332.1">, and so on. </span><span class="koboSpan" id="kobo.332.2">These mutations send different actions to our Strapi backend server to perform </span><span class="No-Break"><span class="koboSpan" id="kobo.333.1">different actions.</span></span></p>
<p><span class="koboSpan" id="kobo.334.1">Additionally, we have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">queries.js</span></strong><span class="koboSpan" id="kobo.336.1"> file, which contains all the queries to retrieve the different types of data from our Strapi </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">backend server.</span></span></p>
<p><span class="koboSpan" id="kobo.338.1">Some of the queries found in this file include </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">getPin</span></strong><span class="koboSpan" id="kobo.340.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">getBoard</span></strong><span class="koboSpan" id="kobo.342.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">getBoards</span></strong><span class="koboSpan" id="kobo.344.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">getPins</span></strong><span class="koboSpan" id="kobo.346.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.347.1">getUserPins</span></strong><span class="koboSpan" id="kobo.348.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.349.1">getUserBo</span><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.350.1">ards</span></strong><span class="koboSpan" id="kobo.351.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">so on.</span></span></p>
<h2 id="_idParaDest-109"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.353.1">The users folder</span></h2>
<p><span class="koboSpan" id="kobo.354.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">users</span></strong><span class="koboSpan" id="kobo.356.1"> folder contains </span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.357.1">all the user-related functionalities of the Pinterest </span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.358.1">application demo. </span><span class="koboSpan" id="kobo.358.2">It contains both mutations </span><span class="No-Break"><span class="koboSpan" id="kobo.359.1">and queries.</span></span></p>
<p><span class="koboSpan" id="kobo.360.1">Some of the mutations are </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">createUser</span></strong><span class="koboSpan" id="kobo.362.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">updateUser</span></strong><span class="koboSpan" id="kobo.364.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">deleteUser</span></strong><span class="koboSpan" id="kobo.366.1">, and so on. </span><span class="koboSpan" id="kobo.366.2">These mutations send different actions to our Strapi backend server to perform different </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">user-related actions.</span></span></p>
<p><span class="koboSpan" id="kobo.368.1">Additionally, we have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">queries.js</span></strong><span class="koboSpan" id="kobo.370.1"> file, which contains all the queries to retrieve the different types of user-related information from our Strapi </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">backend server.</span></span></p>
<p><span class="koboSpan" id="kobo.372.1">Some of the queries </span><a id="_idIndexMarker246"/><span class="koboSpan" id="kobo.373.1">found in this file include </span><strong class="source-inline"><span class="koboSpan" id="kobo.374.1">getUser</span></strong><span class="koboSpan" id="kobo.375.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">g</span><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.377.1">etUsers</span></strong><span class="koboSpan" id="kobo.378.1">, and </span><a id="_idIndexMarker247"/><span class="No-Break"><span class="koboSpan" id="kobo.379.1">so on.</span></span></p>
<h3><span class="koboSpan" id="kobo.380.1">Implementing a login example with GraphQL</span></h3>
<p><span class="koboSpan" id="kobo.381.1">The code snippet </span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.382.1">for each of </span><a id="_idIndexMarker249"/><span class="koboSpan" id="kobo.383.1">the methods inside each of the mutations and queries can be found on the official GitHub repository for the </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">respective chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.385.1">However, the following is an example of how to log in to our application using the GraphQL mutation we have defined inside the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">auth</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.387.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.388.1">First, we import the respective mutation we want to use inside any component or page, as </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.390.1">
```js
import { LOGIN_USER } from '../../graphql';</span></pre>
<p><span class="koboSpan" id="kobo.391.1">Because of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">index.js</span></strong><span class="koboSpan" id="kobo.393.1"> file inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">graphql</span></strong><span class="koboSpan" id="kobo.395.1"> folder, the folder location is shortened a little; you can reduce it more depending on your </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">use case.</span></span></p>
<p><span class="koboSpan" id="kobo.397.1">This is why it is important to always add an export inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">index.js</span></strong><span class="koboSpan" id="kobo.399.1"> file for any GraphQL mutation or </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">query created.</span></span></p>
<p><span class="koboSpan" id="kobo.401.1">The following steps show you how to implement logging authentication with GraphQL in our Pinterest clon</span><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.402.1">e </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">application example.</span></span></p>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.404.1">Step 1</span></strong></span></p>
<p><span class="koboSpan" id="kobo.405.1">When a user tries to log in, we execute the </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1">loginUser</span></strong><span class="koboSpan" id="kobo.407.1"> function to retrieve some </span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">user-specific data:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.409.1">
const login = () =&gt; {
 const user = loginUser();
 if (user) {
   // Save State and Redirect to Dashboard
   logge</span><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.410.1">d.value = true;
 }
};</span></pre>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.411.1">Step 2</span></strong></span></p>
<p><span class="koboSpan" id="kobo.412.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">loginUser</span></strong><span class="koboSpan" id="kobo.414.1"> function executes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">LOGIN_USER</span></strong><span class="koboSpan" id="kobo.416.1"> mutation we imported using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">useMutation</span></strong><span class="koboSpan" id="kobo.418.1"> hook imported from the Apollo Composable library </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.420.1">
import { useMutation } from '@vue/apollo-composable';
const { mutate: loginUser } = useMutation(LOGIN_USER, () =&gt; ({
 variables: {
   email: email,
   password: password,
</span><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.421.1">   remember,
 },
}));</span></pre>
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.422.1">Code walkthrough</span></strong></span></p>
<p><span class="koboSpan" id="kobo.423.1">If you haven’t </span><a id="_idIndexMarker250"/><span class="koboSpan" id="kobo.424.1">used GraphQL with </span><a id="_idIndexMarker251"/><span class="koboSpan" id="kobo.425.1">Vue.js before, here is a </span><span class="No-Break"><span class="koboSpan" id="kobo.426.1">quick walkthrough.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">useMutation</span></strong><span class="koboSpan" id="kobo.428.1"> executes any mutation using the information passed in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.429.1">variables</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.430.1"> object:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.431.1">
variables: {
   email: email,
   password: password,
   remember,
 },</span></pre>
<p><span class="koboSpan" id="kobo.432.1">Every </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">useMutation</span></strong><span class="koboSpan" id="kobo.434.1"> execution returns the </span><strong class="source-inline"><span class="koboSpan" id="kobo.435.1">mutate</span></strong><span class="koboSpan" id="kobo.436.1"> function, which we rename to the name of the </span><a id="_idIndexMarker252"/><span class="koboSpan" id="kobo.437.1">executed mutation called </span><a id="_idIndexMarker253"/><span class="koboSpan" id="kobo.438.1">when our users try to log in. </span><span class="koboSpan" id="kobo.438.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1">loginUser</span></strong><span class="koboSpan" id="kobo.440.1"> function executes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.441.1">LOGIN_USER</span></strong><span class="koboSpan" id="kobo.442.1"> mutation and returns </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">the data.</span></span></p>
<p><span class="koboSpan" id="kobo.444.1">This example demonstrates how we execute a single mutation; we will use this approach throughout the project to </span><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.445.1">execute all </span><span class="No-Break"><span class="koboSpan" id="kobo.446.1">the mutations.</span></span></p>
<h3><span class="koboSpan" id="kobo.447.1">Implementing queries with a Photo example</span></h3>
<p><span class="koboSpan" id="kobo.448.1">Next, we are </span><a id="_idIndexMarker254"/><span class="koboSpan" id="kobo.449.1">going to learn how to </span><a id="_idIndexMarker255"/><span class="koboSpan" id="kobo.450.1">implement a query operation, and we will look at how to handle GraphQL queries in Vue 3. </span><span class="koboSpan" id="kobo.450.2">To </span><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.451.1">do this, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.453.1">First, let’s define the </span><strong class="source-inline"><span class="koboSpan" id="kobo.454.1">GET_PINS</span></strong><span class="koboSpan" id="kobo.455.1"> query inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">/graphql/photos/queries.js</span></strong><span class="koboSpan" id="kobo.457.1"> file to retrieve all the pins for a </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">particular board:</span></span><pre class="console"><span class="koboSpan" id="kobo.459.1">
export const GET_PINS = gql`
 mutation getPins($size: Int, $skip: Int, $filters:
   PinFiltersInput) {
   getPins(size: $size, skip: $skip,
           filters: $filters) {
     id
  </span><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.460.1">   title
     url
   }
 }
`;</span></pre></li>
<li><span class="koboSpan" id="kobo.461.1">Next, we </span><a id="_idIndexMarker256"/><span class="koboSpan" id="kobo.462.1">will use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">useQuery</span></strong><span class="koboSpan" id="kobo.464.1"> hook </span><a id="_idIndexMarker257"/><span class="koboSpan" id="kobo.465.1">to execute this GraphQL query and return the data to a variable. </span><span class="koboSpan" id="kobo.465.2">As usual, we imported the </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">GET_PINS</span></strong><span class="koboSpan" id="kobo.467.1"> query and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">useQuery</span></strong><span class="koboSpan" id="kobo.469.1"> hook from their </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">respective locations:</span></span><pre class="console"><span class="koboSpan" id="kobo.471.1">
&lt;script setup&gt;
import { useQuery } from '@vue/apollo-composable';
import { GET_PINS } from '</span><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.472.1">../../graphql/photos/queries';</span></pre></li>
<li><span class="koboSpan" id="kobo.473.1">Next, we created a user-facing function called </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">getBoardPins</span></strong><span class="koboSpan" id="kobo.475.1">, which executes our query to retrieve and return the </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">respective queries:</span></span><pre class="console"><span class="koboSpan" id="kobo.477.1">
const getBoardPins =</span><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.478.1"> () =&gt; {
 return getPins();
};</span></pre></li>
<li><span class="koboSpan" id="kobo.479.1">Lastly, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">getPins</span></strong><span class="koboSpan" id="kobo.481.1"> function executes the GraphQL query with the required variables and returns the result, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">following snippet:</span></span><pre class="console"><span class="koboSpan" id="kobo.483.1">
const { query: getPins } = useQuery(GET_PINS, () =&gt; ({
 variables: {
   size: 20,
   skip: 0,
   filters: {
     boardId: board.id,
   },
 },
}));</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.484.1">This is a typical example of how we can implement GraphQL queries throughout the code base for our Pinterest </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">demo application.</span></span></p>
<p><span class="koboSpan" id="kobo.486.1">If you followed </span><a id="_idIndexMarker258"/><span class="koboSpan" id="kobo.487.1">along from </span><a id="_idIndexMarker259"/><span class="koboSpan" id="kobo.488.1">each chapter,  you will have cloned the repository from the URL provided in the previous section, set it up locally, and seeded some data into the Strapi </span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">backend server.</span></span></p>
<p><span class="koboSpan" id="kobo.490.1">You should be presented with a Pinterest-like demo application, as </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer052">
<span class="koboSpan" id="kobo.492.1"><img alt="Figure 6.13 – Final Pinterest preview" src="image/Figure_6.13_B17237.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.493.1">Figure 6.13 – Final Pinterest preview</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.494.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.495.1">The images might differ based on the data you seed into your Strapi backend database. </span><span class="koboSpan" id="kobo.495.2">However, the repository contains instructions on getting the dummy data and seeding them into your </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">Strapi backend.</span></span></p>
<p><span class="koboSpan" id="kobo.497.1">You can check out the complete implement</span><a href="https://github.com/PacktPublishing/Architecting-Vue.js-3-Enterprise-Ready-Web-Applications/tree/chapter-6"><span class="koboSpan" id="kobo.498.1">ation in the official GitHub repository here: https://github.com/PacktPublishing/Architecting-Vue.js-3-Ent</span></a><span class="koboSpan" id="kobo.499.1">erprise-Ready-Web-Applications/tree/chapter-6. </span><span class="koboSpan" id="kobo.499.2">Additionally, you can learn how to implement the same API pattern </span><a id="_idIndexMarker260"/><span class="koboSpan" id="kobo.500.1">with a RESTful API </span><a id="_idIndexMarker261"/><span class="koboSpan" id="kobo.501.1">using the repository pattern </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">here: </span></span><a href="https://medium.com/backenders-club/consuming-apis-using-the-repository-pattern-in-vue-js-e64671b27b09"><span class="No-Break"><span class="koboSpan" id="kobo.503.1">https://medium.com/backenders-club/consuming-apis-using-the-repository</span><span id="_idTextAnchor225"/><span class="koboSpan" id="kobo.504.1">-pattern-in-vue-js-e64671b27b09</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.505.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.506.1">In conclusion, we created the frontend of our Pinterest clone using Vue 3 and the Composition API; we also created the backend using a very popular headless CMS called Strapi to store our data. </span><span class="koboSpan" id="kobo.506.2">Lastly, we integrated this into a single ente</span><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.507.1">rprise application </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">using GraphQL.</span></span></p>
<h1 id="_idParaDest-110"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.509.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.510.1">This chapter dived deeper into how to utilize GraphQL to deliver scalable and high-performing applications and how to build a complete Pinterest clone with Vue 3 and GraphQL. </span><span class="koboSpan" id="kobo.510.2">In addition, we utilized the knowledge of GraphQL to develop and deliver enterprise applications such as Pinterest using Vue 3 </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">and GraphQL.</span></span></p>
<p><span class="koboSpan" id="kobo.512.1">We explored Strapi – the headless CMS that manages our backend APIs and data, and we also scaffolded a new Strapi project, learned how to create Strapi collections, and also seeded some dummy data to ease the </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">development time.</span></span></p>
<p><span class="koboSpan" id="kobo.514.1">We also covered in detail how to integrate the Strapi CMS and easily spin up a backend server for our Pinterest demo application using GraphQL into </span><span class="No-Break"><span class="koboSpan" id="kobo.515.1">Vue 3.</span></span></p>
<p><span class="koboSpan" id="kobo.516.1">In the next chapter, you will learn about the nitty-gritty involved in dockerizing your Vue 3 project. </span><span class="koboSpan" id="kobo.516.2">In addition, you will learn about the best practices and industry standards for dockerizing and deploying an enterprise Vue.js 3 </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">web application.</span></span></p>
<p><span class="koboSpan" id="kobo.518.1">This chapter will also go more practical by dockerizing a full-stack web application and deploying the container to a cloud platform using Docker Compose. </span><span class="koboSpan" id="kobo.518.2">Finally, you will learn how to handle larger projects with </span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">Docker Compose.</span></span></p>
</div>


<div class="Content" id="_idContainer054">
<h1 id="_idParaDest-111"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.1.1">Part 3: Vue.js 3 Enterprise Tools</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In this part, you will learn about DevOps and Docker. </span><span class="koboSpan" id="kobo.2.2">You will containerize your web app and deploy a container to Google Cloud Run using CLI tools. </span><span class="koboSpan" id="kobo.2.3">Then, you will leverage advanced CI techniques to build a container-based CI environment, leveraging a </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">multi-stage Dockerfile.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part will also explore GraphQL and how it can be implemented and integrated with Vue.js 3 to deliver an enterprise-ready web application. </span><span class="koboSpan" id="kobo.4.2">In addition, we will build an enterprise Pinterest clone to demonstrate our knowledge of GraphQL at an </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">enterprise level.</span></span></p>
<p><span class="koboSpan" id="kobo.6.1">This part comprises the </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">following chapters:</span></span></p>
<ul>
<li><a href="B17237_05.xhtml#_idTextAnchor151"><em class="italic"><span class="koboSpan" id="kobo.8.1">Chapter 5</span></em></a><span class="koboSpan" id="kobo.9.1">, </span><em class="italic"><span class="koboSpan" id="kobo.10.1">An </span></em><a href="https://epic.packtpub.services/index.php?module=oss_Chapters&amp;action=DetailView&amp;record=77e2136f-e753-5cdf-9030-61d6c9075a4b"><em class="italic"><span class="koboSpan" id="kobo.11.1">Introduction to GraphQL, Queries, Mutations, and RESTful API</span></em></a></li>
<li><a href="B17237_06.xhtml#_idTextAnchor192"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 6</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Building a Complete Pinterest Clone with GraphQL</span></em></li>
<li><a href="B17237_07.xhtml#_idTextAnchor230"><em class="italic"><span class="koboSpan" id="kobo.15.1">Chapter 7</span></em></a><span class="koboSpan" id="kobo.16.1">, </span><em class="italic"><span class="koboSpan" id="kobo.17.1">Dockerizing a Vue 3 App</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer055">
</div>
</div>
<div>
<div id="_idContainer056">
</div>
</div>
</body></html>