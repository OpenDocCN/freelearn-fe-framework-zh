# 前言

NativeScript 是由 Progress 构建的开源框架，可使用 Angular、TypeScript 甚至传统的 JavaScript 构建真正的本地移动应用程序。Angular 也是由 Google 构建的开源框架，提供声明性模板、依赖注入和丰富的模块来构建应用程序。Angular 的多功能视图处理架构允许您的视图呈现为真正的本地 UI 组件--适用于 iOS 或 Android--具有流畅的可用性的优越性能。Angular 中视图呈现层的解耦，再加上 NativeScript 中本地 API 的强大功能，共同打造了令人兴奋的 NativeScript for Angular 的强大组合。

本书侧重于构建 iOS 和 Android 上的 Angular 移动应用程序所需了解的关键概念。我们将构建一个有趣的多轨录音工作室应用程序，涉及到您在开始构建自己的应用程序时需要了解的强大的本地关键概念。拥有正确的结构对于开发一个可扩展且易于维护和移植的应用程序至关重要，因此我们将从使用 Angular 的@NgModule 进行项目组织开始。我们将使用 Angular 组件构建我们的第一个视图，然后创建服务，我们可以通过 Angular 的依赖注入来使用。

您将了解 NativeScript 的 tns 命令行实用程序，以在 iOS 和 Android 上运行应用程序。我们将集成第三方插件来构建一些核心功能。接下来，我们将集成@ngrx 存储加效果，以建立一些可靠的实践（受 Redux 启发）来处理状态管理。如果应用程序看起来不好或提供出色的用户体验，那么拥有良好的数据流和坚实的架构是毫无意义的，因此我们将使用 SASS 为我们的应用程序打磨样式。之后，我们将处理调试问题，并投入一些时间编写测试，以防止将来出现错误。最后，我们将使用 webpack 捆绑我们的应用程序，并将其部署到 Apple 应用商店和 Google Play。

在书的结尾，您将了解构建用于 Angular 应用程序的 NativeScript 所需的大部分关键概念。

# 本书内容

第一章，*使用@NgModule 塑造应用*，讨论了@NgModule 装饰器，它清晰地定义了应用中的功能段。这将是项目的组织单位。在开始构建应用之前，通过花点时间思考可能需要/想要的各种单元/部分/模块，您将获得许多好处。

第二章，*功能模块*，教会您使用功能模块来构建应用程序，在未来提供了许多维护优势，并减少了整个应用程序中代码的重复。

第三章，*通过组件构建我们的第一个视图*，实际上让我们第一次看到我们的应用程序，我们需要为我们的第一个视图构建一个组件。

第四章，*使用 CSS 创建更漂亮的视图*，介绍了如何使用一些 CSS 类将我们的第一个视图变得非常惊人。我们还将重点介绍如何利用 NativeScript 的核心主题来提供一致的样式框架。

第五章，*路由和延迟加载*，允许用户在应用程序中各种视图之间导航，需要设置路由。Angular 提供了一个强大的路由器，与 NativeScript 结合使用时，可以与 iOS 和 Android 上的本机移动页面导航系统紧密配合。此外，我们将设置各种路由的延迟加载，以确保应用程序的启动时间尽可能快速。

第六章，*在 iOS 和 Android 上运行应用程序*，着重介绍了如何通过 NativeScript 的 tns 命令行实用程序在 iOS 和 Android 上运行我们的应用程序。

第七章，*构建多轨播放器*，涵盖了插件集成，并通过 NativeScript 直接访问了 iOS 上的 Objective C/Swift API 和 Android 上的 Java API。

第八章，*构建音频录制器*，使用本机 API 为 iOS 和 Android 构建音频录制器。

第九章，*增强您的视图*，充分利用了 Angular 的灵活性和 NativeScript 的强大功能，以充分发挥应用程序用户界面的潜力。

第十章，*@ngrx/store + @ngrx/effects 进行状态管理*，通过 ngrx 管理应用状态的单一存储。

第十一章，*使用 SASS 进行优化*，集成了 nativescript-dev-sass 插件，以 SASS 优化我们应用的样式。

第十二章，*单元测试*，设置 Karma 单元测试框架，以未来证明我们的应用。

第十三章，*使用 Appium 进行集成测试*，为集成测试设置 Appium。

第十四章，*使用 webpack 打包进行部署准备*，使用 webpack 优化发布包。

第十五章，*发布到 Apple 应用商店*，让我们通过 Apple 应用商店分发我们的应用。

第十六章，*发布到 Google Play*，让我们通过 Google Play 分发我们的应用。

# 您需要准备什么

本书假定您正在使用 NativeScript 3 或更高版本和 Angular 4.1 或更高版本。如果您计划进行 iOS 开发，您将需要安装 XCode 的 Mac 来运行配套应用。您还应该安装了 Android SDK 工具，并且至少有一个模拟器，最好是运行 API 24 或更高版本的 7.0.0。

# 本书适合对象

本书适用于所有类型的软件开发人员，他们对 iOS 和 Android 的移动应用开发感兴趣。它专门为那些已经对 TypeScript 有一般了解并且具有一些基本水平的 Angular 特性的人提供帮助。刚开始接触 iOS 和 Android 移动应用开发的 Web 开发人员也可能从本书的内容中获益良多。

# 约定

在本书中，您将找到一些文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："支持各种常见属性（`填充`、`字体大小`、`字重`、`颜色`、`背景颜色`等）。此外，简写的边距/填充也同样有效，即填充：15 5。"

代码块设置如下：

```ts
[default]
export class AppComponent {}
```

当我们希望引起您对代码块特定部分的注意时，相关行或项目会以粗体显示：

```ts
[default]
public init() {
 const item = {};
 item.volume = 1; }
```

任何命令行输入或输出都以以下方式书写：

```ts
 # tns run ios --emulator
```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，会以这样的方式出现在文本中："再次运行我们的应用程序，现在当我们点击“记录”按钮时，我们会看到登录提示"。

警告或重要提示会以这种方式出现。提示和技巧会以这种方式出现。
