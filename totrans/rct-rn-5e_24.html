<html><head></head><body>
  <div id="_idContainer195" class="Basic-Text-Frame">
    <h1 class="chapterNumber">22</h1>
    <h1 id="_idParaDest-269" class="chapterTitle">Collecting User Input</h1>
    <p class="normal">In web applications, you can collect user input from standard HTML form elements that look and behave similarly on all browsers. With native UI platforms, collecting user input is more nuanced.</p>
    <p class="normal">In this chapter, you’ll learn how to work with the various React Native components that are used to collect user input. These include text input, selecting from a list of options, checkboxes, and date/time selectors. All of these are used in every app in cases of register or login flow, as well as the purchase form. The experience of creating such forms is very valuable and this chapter will help you to know how to create any form in your future apps. You’ll learn the differences between iOS and Android and how to implement the appropriate abstractions for your app.</p>
    <p class="normal">The following topics will be covered in this chapter:</p>
    <ul>
      <li class="bulletList">Collecting text input</li>
      <li class="bulletList">Selecting from a list of options</li>
      <li class="bulletList">Toggling between on and off</li>
      <li class="bulletList">Collecting date/time input</li>
    </ul>
    <h1 id="_idParaDest-270" class="heading-1">Technical requirements</h1>
    <p class="normal">You can find the code files for this chapter on GitHub at <a href="https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter23"><span class="url">https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter2</span></a><span class="url">2</span>.</p>
    <h1 id="_idParaDest-271" class="heading-1">Collecting text input</h1>
    <p class="normal">It turns out that there’s a lot <a id="_idIndexMarker799"/>to think about when it comes to implementing text inputs. For example, should it have placeholder text? Is this sensitive data that shouldn’t be displayed on the screen? Should you process text as it’s entered or when the user moves to another field?</p>
    <p class="normal">In web apps, there is a special <code class="inlineCode">&lt;input&gt;</code> HTML element that allows you to collect user inputs. In React Native, for that purpose, we use the <code class="inlineCode">TextInput</code> component. Let’s build an example that renders several instances of the <code class="inlineCode">&lt;TextInput&gt;</code> component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">function</span> <span class="hljs-title">Input</span>(<span class="hljs-params">props: InputProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.textInputContainer}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.textInputLabel}</span><span class="hljs-tag">&gt;</span>{props.label}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">TextInput</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.textInput}</span><span class="hljs-tag"> {</span><span class="hljs-attr">...props</span><span class="hljs-tag">} /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">We have implemented the <code class="inlineCode">Input</code> component that we will reuse several times. Let’s take a look at a few use cases of text inputs:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">CollectingTextInput</span>() {
  <span class="hljs-keyword">const</span> [changedText, setChangedText] = <span class="hljs-title">useState</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">const</span> [submittedText, setSubmittedText] = <span class="hljs-title">useState</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.container}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Input</span><span class="hljs-tag"> </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Basic Text Input:"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Input</span><span class="hljs-tag"> </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Password Input:"</span><span class="hljs-tag"> </span><span class="hljs-attr">secureTextEntry</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Input</span><span class="hljs-tag"> </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Return Key:"</span><span class="hljs-tag"> </span><span class="hljs-attr">returnKeyType</span><span class="hljs-tag">=</span><span class="hljs-string">"search"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Input</span><span class="hljs-tag"> </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Placeholder Text:"</span><span class="hljs-tag"> </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"Search"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Input</span>
<span class="hljs-tag">        </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Input Events:"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onChangeText</span><span class="hljs-tag">=</span><span class="hljs-string">{(e)</span><span class="hljs-tag"> =&gt;</span> {
          setChangedText(e);
        }}
        onSubmitEditing={(e) =&gt; {
          setSubmittedText(e.nativeEvent.text);
        }}
        onFocus={() =&gt; {
          setChangedText("");
          setSubmittedText("");
        }}
      /&gt;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>Changed: {changedText}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>Submitted: {submittedText}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">I won’t go into depth about what<a id="_idIndexMarker800"/> each of these <code class="inlineCode">&lt;TextInput&gt;</code> components is doing; there are labels in the <code class="inlineCode">Input</code> components that explain this. Let’s see what these components look like on the screen:</p>
    <figure class="mediaobject"><img src="../Images/B19636_22_01.png" alt="Picture 1"/> </figure>
    <p class="packt_figref">Figure 22.1: Text input variations</p>
    <p class="normal">The plain text input shows the text that’s been entered. The <strong class="screenText">Password Input</strong> field doesn’t reveal any characters. <strong class="screenText">Placeholder Text</strong> is displayed when the input is empty. The <strong class="screenText">Changed</strong> text state is also displayed. You can’t see the <strong class="screenText">Submitted</strong> text state because I didn’t press the <strong class="screenText">Submitted</strong> button on the virtual keyboard before I took the screenshot.</p>
    <p class="normal">Let’s take a look at the virtual keyboard for the input element where<a id="_idIndexMarker801"/> you changed the <strong class="keyWord">Return Key</strong> text via the <code class="inlineCode">returnKeyType</code> prop:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_22_02.png" alt="Picture 2"/></figure>
    <p class="packt_figref">Figure 22.2: Keyboard with changed Return key text</p>
    <p class="normal">When the keyboard <strong class="keyWord">Return key</strong> reflects what’s going to happen when the user presses it, the user feels more in tune with the application. </p>
    <p class="normal">One more common use case is changing the keyboard type. By providing the <code class="inlineCode">keyboardType</code> prop to the <code class="inlineCode">TextInput</code> component, you will see different variations of keyboards. This is convenient when you need to enter a PIN code or email address. Here is an example of a <code class="inlineCode">numeric</code> keyboard:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_22_03.png" alt="Picture 3"/></figure>
    <p class="packt_figref">Figure 22.3: Numeric keyboard type</p>
    <p class="normal">Now that you’re familiar<a id="_idIndexMarker802"/> with collecting text input, it’s time to learn how to select a value from a list of options.</p>
    <h1 id="_idParaDest-272" class="heading-1">Selecting from a list of options</h1>
    <p class="normal">In web applications, you typically<a id="_idIndexMarker803"/> use the <code class="inlineCode">&lt;select&gt;</code> element to let the user choose from a list of options. React Native comes with a <code class="inlineCode">Picker</code> component, which works on both iOS and Android, but in terms of reducing the React Native app size, the Meta team decided to delete it in future releases and extract <code class="inlineCode">Picker</code> to its own package. To use that package, firstly, we install it in a clean project by running this command:</p>
    <pre class="programlisting con"><code class="hljs-con">npx expo install @react-native-picker/picker
</code></pre>
    <p class="normal">There is some trickery involved with styling this component based on which platform the user is on, so let’s hide all of this inside a generic <code class="inlineCode">Select</code> component. Here’s the <code class="inlineCode">Select.ios.js</code> module:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Select</span>(<span class="hljs-params">props: SelectProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.pickerHeight}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.pickerContainer}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.pickerLabel}</span><span class="hljs-tag">&gt;</span>{props.label}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">Picker</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.picker}</span><span class="hljs-tag"> {</span><span class="hljs-attr">...props</span><span class="hljs-tag">}&gt;</span>
          {props.items.map((i) =&gt; (
            <span class="hljs-tag">&lt;</span><span class="hljs-name">Picker.Item</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{i.label}</span><span class="hljs-tag"> {</span><span class="hljs-attr">...i</span><span class="hljs-tag">} /&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">Picker</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">That’s a lot of overhead for a simple <code class="inlineCode">Select</code> component. It turns out that it’s quite hard to style the React Native <code class="inlineCode">Picker</code> component, because it looks completely different on iOS and Android. Despite that, we want to make it more cross-platform.</p>
    <p class="normal">Here’s the <code class="inlineCode">Select.android.js</code> module:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">Select</span>(<span class="hljs-params">props: SelectProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.pickerLabel}</span><span class="hljs-tag">&gt;</span>{props.label}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Picker</span><span class="hljs-tag"> {</span><span class="hljs-attr">...props</span><span class="hljs-tag">}&gt;</span>
        {props.items.map((i) =&gt; (
          <span class="hljs-tag">&lt;</span><span class="hljs-name">Picker.Item</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{i.label}</span><span class="hljs-tag"> {</span><span class="hljs-attr">...i</span><span class="hljs-tag">} /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">Picker</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">This is what the styles look like:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">container</span>: {
    <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">flexDirection</span>: <span class="hljs-string">"column"</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"ghostwhite"</span>,
    <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">"center"</span>,
  },
  <span class="hljs-attr">pickersBlock</span>: {
    <span class="hljs-attr">flex</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">flexDirection</span>: <span class="hljs-string">"row"</span>,
    <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">"space-around"</span>,
    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">"center"</span>,
  },
  <span class="hljs-attr">pickerHeight</span>: {
    <span class="hljs-attr">height</span>: <span class="hljs-number">250</span>,
  },
</code></pre>
    <p class="normal">As usual with the <code class="inlineCode">container</code><code class="inlineCode"><a id="_idIndexMarker804"/></code> and <code class="inlineCode">pickersBlock</code> styles, we define the base layout of the screen. Next, let’s take a look at the styles of the <code class="inlineCode">Select</code> component:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr">pickerContainer</span>: {
    <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">flexDirection</span>: <span class="hljs-string">"column"</span>,
    <span class="hljs-attr">alignItems</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"white"</span>,
    <span class="hljs-attr">padding</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">240</span>,
  },
  <span class="hljs-attr">pickerLabel</span>: {
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
    <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">"bold"</span>,
  },
  <span class="hljs-attr">picker</span>: {
    <span class="hljs-attr">width</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"white"</span>,
  },
  <span class="hljs-attr">selection</span>: {
    <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">textAlign</span>: <span class="hljs-string">"center"</span>,
  },
</code></pre>
    <p class="normal">Now, you can render your <code class="inlineCode">Select</code> component. Here is what the <code class="inlineCode">App.js</code> file looks like:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> sizes = [
  { <span class="hljs-attr">label</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span> },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"S"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"S"</span> },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"M"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"M"</span> },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"L"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"L"</span> },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"XL"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"XL"</span> },
];
<span class="hljs-keyword">const</span> garments = [
  { <span class="hljs-attr">label</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">sizes</span>: [<span class="hljs-string">"S"</span>, <span class="hljs-string">"M"</span>, <span class="hljs-string">"L"</span>, <span class="hljs-string">"XL"</span>] },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"Socks"</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">sizes</span>: [<span class="hljs-string">"S"</span>, <span class="hljs-string">"L"</span>] },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"Shirt"</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">sizes</span>: [<span class="hljs-string">"M"</span>, <span class="hljs-string">"XL"</span>] },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"Pants"</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">sizes</span>: [<span class="hljs-string">"S"</span>, <span class="hljs-string">"L"</span>] },
  { <span class="hljs-attr">label</span>: <span class="hljs-string">"Hat"</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">sizes</span>: [<span class="hljs-string">"M"</span>, <span class="hljs-string">"XL"</span>] },
];
</code></pre>
    <p class="normal">Here, we defined the default <a id="_idIndexMarker805"/>values for our <code class="inlineCode">Select</code> component. Let’s take a look at the final <code class="inlineCode">SelectingOptions</code> component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">SelectingOptions</span>() {
  <span class="hljs-keyword">const</span> [availableGarments, setAvailableGarments] = useState&lt;<span class="hljs-keyword">typeof</span> garments&gt;(
    []
  );
  <span class="hljs-keyword">const</span> [selectedSize, setSelectedSize] = useState&lt;string | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [selectedGarment, setSelectedGarment] = useState&lt;number | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
</code></pre>
    <p class="normal">With these hooks, we’ve implemented states of selectors. Next, we will use and pass them into components:</p>
    <pre class="programlisting code"><code class="hljs-code">    &lt;<span class="hljs-title">View</span> style={styles.<span class="hljs-property">container</span>}&gt;
      <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.pickersBlock}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">Select</span>
<span class="hljs-tag">          </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Size"</span>
<span class="hljs-tag">          </span><span class="hljs-attr">items</span><span class="hljs-tag">=</span><span class="hljs-string">{sizes}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">selectedValue</span><span class="hljs-tag">=</span><span class="hljs-string">{selectedSize}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">onValueChange</span><span class="hljs-tag">=</span><span class="hljs-string">{(size:</span><span class="hljs-tag"> </span><span class="hljs-attr">string</span><span class="hljs-tag">) =&gt;</span> {
            setSelectedSize(size);
            setSelectedGarment(null);
            setAvailableGarments(
              garments.filter((i) =&gt; i.sizes.includes(size))
            );
          }}
        /&gt;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">Select</span>
<span class="hljs-tag">          </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Garment"</span>
<span class="hljs-tag">          </span><span class="hljs-attr">items</span><span class="hljs-tag">=</span><span class="hljs-string">{availableGarments}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">selectedValue</span><span class="hljs-tag">=</span><span class="hljs-string">{selectedGarment}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">onValueChange</span><span class="hljs-tag">=</span><span class="hljs-string">{(garment:</span><span class="hljs-tag"> </span><span class="hljs-attr">number</span><span class="hljs-tag">) =&gt;</span> {
            setSelectedGarment(garment);
          }}
        /&gt;
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.selection}</span><span class="hljs-tag">&gt;</span>{selectedSize &amp;&amp; selectedGarment &amp;&amp; `${selectedSize} ${garments.find((i) =&gt; i.value === selectedGarment)?.label}`}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
    &lt;/<span class="hljs-title">View</span>&gt;
</code></pre>
    <p class="normal">The basic idea of this example<a id="_idIndexMarker806"/> is that the selected option in the first selector changes the available options in the second selector. When the second selector changes, the label shows <code class="inlineCode">selectedSize</code> and <code class="inlineCode">selectedGarment</code> as a string. Here’s how the screen looks:</p>
    <figure class="mediaobject"> <img src="../Images/B19636_22_04.png" alt="Picture 4"/></figure>
    <p class="packt_figref">Figure 22.4: Selecting from the list of options</p>
    <p class="normal">The <strong class="screenText">Size</strong> selector is shown<a id="_idIndexMarker807"/> on the left-hand side of the screen. When the <strong class="screenText">Size</strong> value changes, the available values in the <strong class="screenText">Garment</strong> selector on the right-hand side of the screen change to reflect size availability. The current selection is displayed as a string after the two selectors.</p>
    <p class="normal">This is how our <code class="inlineCode">app</code> looks on an Android device:</p>
    <figure class="mediaobject"><img src="../Images/B19636_22_05.PNG.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 22.5: Selecting from the list of options on Android</p>
    <p class="normal">When the iOS version of the <code class="inlineCode">Picker</code> component<a id="_idIndexMarker808"/> renders a scrollable list of options, the Android one gives only buttons that open a dialog modal for selecting options.</p>
    <p class="normal">In the following section, you’ll learn about the buttons that toggle between on and off states.</p>
    <h1 id="_idParaDest-273" class="heading-1">Toggling between on and off</h1>
    <p class="normal">Another common element <a id="_idIndexMarker809"/>you’ll see in web forms is checkboxes. For example, think of toggling Wi-Fi or Bluetooth on your device. React Native has a <code class="inlineCode">Switch</code> component that works on both iOS and Android. Thankfully, this component is a little easier to style than the <code class="inlineCode">Picker</code> component. Let’s look at a simple abstraction you can implement to provide labels for your switches:</p>
    <pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">CustomSwitchProps</span> = <span class="hljs-title">SwitchProps</span> &amp; {
  <span class="hljs-attr">label</span>: string;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">CustomSwitch</span>(<span class="hljs-params">props: CustomSwitchProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.customSwitch}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>{props.label}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Switch</span><span class="hljs-tag"> {</span><span class="hljs-attr">...props</span><span class="hljs-tag">} /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">Now, let’s learn how we can use a couple<a id="_idIndexMarker810"/> of switches to control application state:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">TogglingOnAndOff</span>() {
  <span class="hljs-keyword">const</span> [first, setFirst] = <span class="hljs-title">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [second, setSecond] = <span class="hljs-title">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.container}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Switch</span>
<span class="hljs-tag">        </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Disable Next Switch"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{first}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">disabled</span><span class="hljs-tag">=</span><span class="hljs-string">{second}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onValueChange</span><span class="hljs-tag">=</span><span class="hljs-string">{setFirst}</span>
<span class="hljs-tag">      /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Switch</span>
<span class="hljs-tag">        </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Disable Previous Switch"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{second}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">disabled</span><span class="hljs-tag">=</span><span class="hljs-string">{first}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onValueChange</span><span class="hljs-tag">=</span><span class="hljs-string">{setSecond}</span>
<span class="hljs-tag">      /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">These two switches toggle the <code class="inlineCode">disabled</code> property of one another. When the first switch is toggled, the <code class="inlineCode">setFirst()</code> function is called, which will update the value of the first state. Depending on the current value of <code class="inlineCode">first</code>, it will either be set to <code class="inlineCode">true</code> or <code class="inlineCode">false</code>. The second switch works the same way, except it uses <code class="inlineCode">setSecond()</code> and the second state value.</p>
    <p class="normal">Turning on one switch will disable<a id="_idIndexMarker811"/> the other because we’ve set the <code class="inlineCode">disabled</code> property value for each switch to the state of the other switch. For example, the second switch has <code class="inlineCode">disabled={first}</code>, which means that it is disabled whenever the first switch is turned on. Here’s what the screen looks like on iOS:</p>
    <figure class="mediaobject"><img src="../Images/B19636_22_06.png" alt="Picture 5"/></figure>
    <p class="packt_figref">Figure 22.6: Switch toggles on iOS</p>
    <p class="normal">Here’s what the same screen looks like on Android:</p>
    <figure class="mediaobject"><img src="../Images/B19636_22_07.png" alt="Picture 6"/></figure>
    <p class="packt_figref">Figure 22.7: Switch toggles on Android</p>
    <p class="normal">As you can see, our <code class="inlineCode">CustomSwitch</code> component<a id="_idIndexMarker812"/> enables the same functionality on Android and iOS while using one component for both platforms. In the following section, you’ll learn how to collect date/time input.</p>
    <h1 id="_idParaDest-274" class="heading-1">Collecting date/time input</h1>
    <p class="normal">In this final section of this chapter, you’ll learn<a id="_idIndexMarker813"/> how to implement date/time pickers. React Native docs suggest using <code class="inlineCode">@react-native-community/datetimepicker</code> independent date/time picker components for iOS and Android, which means that it is up to you to handle the cross-platform differences between the components. </p>
    <p class="normal">To install <code class="inlineCode">datetimepicker</code>, run the following command in the project:</p>
    <pre class="programlisting con"><code class="hljs-con">npx expo install @react-native-community/datetimepicker
</code></pre>
    <p class="normal">So, let’s start with a <code class="inlineCode">DatePicker</code> component for iOS:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">DatePicker</span>(<span class="hljs-params">props: DatePickerProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.datePickerContainer}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.datePickerLabel}</span><span class="hljs-tag">&gt;</span>{props.label}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">DateTimePicker</span>
<span class="hljs-tag">        </span><span class="hljs-attr">mode</span><span class="hljs-tag">=</span><span class="hljs-string">"date"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">display</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">spinner"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{props.value}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{(event,</span><span class="hljs-tag"> </span><span class="hljs-attr">date</span><span class="hljs-tag">) =&gt;</span> {
          if (date) {
            props.onChange(date);
          }
        }}
      /&gt;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">There’s not a lot to this <a id="_idIndexMarker814"/>component; it simply adds a label to the <code class="inlineCode">DateTimePicker</code> component. The Android version works<a id="_idIndexMarker815"/> a bit differently; the better approach would be to use an <strong class="keyWord">imperative API</strong>. Let’s take a look at the implementation:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">DatePicker</span>(<span class="hljs-params">{label, value, onChange }: DatePickerProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.datePickerContainer}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.datePickerLabel}</span><span class="hljs-tag">&gt;</span>{label}<span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">Text</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onPress</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> {
          DateTimePickerAndroid.open({
            value: value,
            mode: "date",
            onChange: (event, date) =&gt; {
              if (event.type === "set" &amp;&amp; date) {
                onChange(date);
              }
            },
          });
        }}
      &gt;
        {value.toLocaleDateString()}
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">Text</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">The key difference between the two date pickers is that the Android version doesn’t use a React Native component like D<code class="inlineCode">ateTimePicker</code> in iOS. Instead, we have to use the imperative <code class="inlineCode">DateTimePickerAndroid.open()</code> API. This is triggered when the user presses the date text that our component renders and opens a date picker dialog. The good news is that this component of ours hides this API behind a declarative component.</p>
    <div class="note">
      <p class="normal">I’ve also implemented a time picker component that follows this exact pattern. So, rather than listing that code here, I suggest that you download the code for this book from <a href="https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter22"><span class="url">https://github.com/PacktPublishing/React-and-React-Native-5E/tree/main/Chapter2</span></a><span class="url">2</span> so that you can see the subtle differences and run the example.</p>
    </div>
    <p class="normal">Now, let’s learn how to use<a id="_idIndexMarker816"/> our date and time picker components:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">CollectingDateTimeInput</span>() {
  <span class="hljs-keyword">const</span> [date, setDate] = <span class="hljs-title">useState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title">Date</span>());
  <span class="hljs-keyword">const</span> [time, setTime] = <span class="hljs-title">useState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title">Date</span>());
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">View</span><span class="hljs-tag"> </span><span class="hljs-attr">style</span><span class="hljs-tag">=</span><span class="hljs-string">{styles.container}</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">DatePicker</span>
<span class="hljs-tag">        </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Pick a date, any date:"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{date}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{setDate}</span>
<span class="hljs-tag">      /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">TimePicker</span>
<span class="hljs-tag">        </span><span class="hljs-attr">label</span><span class="hljs-tag">=</span><span class="hljs-string">"Pick a time, any time:"</span>
<span class="hljs-tag">        </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{time}</span>
<span class="hljs-tag">        </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{setTime}</span>
<span class="hljs-tag">      /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">View</span><span class="hljs-tag">&gt;</span>
  );
}
</code></pre>
    <p class="normal">Awesome! Now, we have <code class="inlineCode">DatePicker</code> and <code class="inlineCode">TimePicker</code> components that can help us select dates and times in our app. Also, they both work on iOS and Android. Let’s see how the pickers look on iOS:</p>
    <figure class="mediaobject"><img src="../Images/B19636_22_08.png" alt="Picture 7"/></figure>
    <p class="packt_figref">Figure 22.8: iOS date and time pickers</p>
    <p class="normal">As you can see, the iOS date<a id="_idIndexMarker817"/> and time pickers use the <code class="inlineCode">Picker</code> component that you learned about earlier in this chapter. The Android picker looks a lot different; let’s look at it now:</p>
    <figure class="mediaobject"><img src="../Images/B19636_22_09.png" alt="Picture 8"/></figure>
    <p class="packt_figref">Figure 22.9: Android date picker</p>
    <p class="normal">The Android version follows a completely different approach from the iOS date/time picker, yet we can use<a id="_idIndexMarker818"/> the same <code class="inlineCode">DatePicker</code> component that we’ve created on both platforms. This brings us to the end of the chapter.</p>
    <h1 id="_idParaDest-275" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we learned about the various React Native components that resemble the form elements from the web that we’re used to. We started off by learning about text input and how each text input has its own virtual keyboard to take into consideration. Next, we learned about <code class="inlineCode">Picker</code> components, which allow the user to select an item from a list of options. Then, we learned about the <code class="inlineCode">Switch</code> component, which is kind of like a checkbox. With these components, you will be able to build a form of any complexity.</p>
    <p class="normal">In the final section, we learned how to implement generic date/time pickers that work on both iOS and Android. In the next chapter, we’ll learn about modal dialogs in React Native.</p>
  </div>
</body></html>