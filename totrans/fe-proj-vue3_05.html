<html><head></head><body>
<div id="_idContainer170">
<h1 class="chapter-number" id="_idParaDest-111"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.1.1">5</span></h1>
<h1 id="_idParaDest-112"><a id="_idTextAnchor194"/><span class="koboSpan" id="kobo.2.1">The Composition API</span></h1>
<p><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.3.1">In the previous chapter, we learned how to establish data communication between nesting components using props, refs, </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">and slots.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This chapter will introduce us to a new and scalable approach to writing components with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.6.1">setup()</span></strong><span class="koboSpan" id="kobo.7.1"> lifecycle hook – the Composition API. </span><span class="koboSpan" id="kobo.7.2">By the end of the chapter, you will be able to write isolated composables (or custom hooks) to reuse in multiple components by using the Composition API with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.8.1">setup()</span></strong><span class="koboSpan" id="kobo.9.1"> method, and build a scalable component system for your Vue project beyond the classic </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">Options API.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">This chapter covers the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.13.1">Creating components with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.14.1">setup()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.15.1">lifecycle method</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Working </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">with data</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Understanding composable </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">lifecycle functions</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Creating your composable (</span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">custom hook)</span></span></li>
</ul>
<h1 id="_idParaDest-113"><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.22.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.23.1">In this chapter, you need to set up a basic Vue project following the instructions in </span><a href="B18645_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.24.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.25.1">, </span><em class="italic"><span class="koboSpan" id="kobo.26.1">Starting Your First Vue Project</span></em><span class="koboSpan" id="kobo.27.1">. </span><span class="koboSpan" id="kobo.27.2">Creating a single file Vue component is recommended to practice the examples and concepts </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">mentioned easily.</span></span></p>
<p><span class="koboSpan" id="kobo.29.1">You can find this chapter’s source code </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">here: </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05"><span class="No-Break"><span class="koboSpan" id="kobo.31.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.32.1">.</span></span></p>
<h1 id="_idParaDest-114"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.33.1">Creating components with the setup() lifecycle method</span></h1>
<p><span class="koboSpan" id="kobo.34.1">Starting from Vue 3.x, the Vue</span><a id="_idIndexMarker514"/><span class="koboSpan" id="kobo.35.1"> team has introduced the Composition API</span><a id="_idIndexMarker515"/><span class="koboSpan" id="kobo.36.1"> as a new way to compose Vue components within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.37.1">setup()</span></strong><span class="koboSpan" id="kobo.38.1"> lifecycle method. </span><span class="koboSpan" id="kobo.38.2">As mentioned in </span><a href="B18645_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.39.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.40.1">, </span><em class="italic"><span class="koboSpan" id="kobo.41.1">Starting Your First Vue Project</span></em><span class="koboSpan" id="kobo.42.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.43.1">setup()</span></strong><span class="koboSpan" id="kobo.44.1"> is the first hook the Vue engine will run in a component’s lifecycle before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.45.1">beforeCreate()</span></strong><span class="koboSpan" id="kobo.46.1"> hook. </span><span class="koboSpan" id="kobo.46.2">At this point, Vue hasn’t defined a component instance or any </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">component data.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">This lifecycle method runs once before the initialization and creation of a component and is part of the Options API. </span><span class="koboSpan" id="kobo.48.2">The Vue team has dedicated </span><strong class="source-inline"><span class="koboSpan" id="kobo.49.1">setup()</span></strong><span class="koboSpan" id="kobo.50.1"> to working with Composition API and any custom hooks (composables) written with the Composition API as an alternative approach to creating reactive components besides the </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">Options API.</span></span></p>
<p><span class="koboSpan" id="kobo.52.1">You can start using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.53.1">setup()</span></strong><span class="koboSpan" id="kobo.54.1"> method with the </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">following syntax:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.56.1">
setup(props, context) {
  // ...
</span><span class="koboSpan" id="kobo.56.2">  return {
  //...
</span><span class="koboSpan" id="kobo.56.3">  }
}</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.57.1">Setup()</span></strong><span class="koboSpan" id="kobo.58.1"> accepts two arguments, which are </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">as follows:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.60.1">props</span></strong><span class="koboSpan" id="kobo.61.1">: All the reactive props data is passed to the component from its parent. </span><span class="koboSpan" id="kobo.61.2">You need to declare the props using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">props</span></strong><span class="koboSpan" id="kobo.63.1"> field in the Options API as usual. </span><span class="koboSpan" id="kobo.63.2">Note that you shouldn’t de-structure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.64.1">props</span></strong><span class="koboSpan" id="kobo.65.1"> object to avoid losing the reactivity for the </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">de-structured field.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.67.1">context</span></strong><span class="koboSpan" id="kobo.68.1">: These are all the non-reactive fields for the component, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.69.1">attrs</span></strong><span class="koboSpan" id="kobo.70.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.71.1">slots</span></strong><span class="koboSpan" id="kobo.72.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">emit</span></strong><span class="koboSpan" id="kobo.74.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">expose</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">.</span></span></li>
</ul>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">setup()</span></strong><span class="koboSpan" id="kobo.79.1"> returns an object containing the component’s internal reactive/static data state, its methods, or a </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">render function.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">The equivalent </span><a id="_idIndexMarker516"/><span class="koboSpan" id="kobo.82.1">version of </span><strong class="source-inline"><span class="koboSpan" id="kobo.83.1">setup()</span></strong><span class="koboSpan" id="kobo.84.1"> without the Options</span><a id="_idIndexMarker517"/><span class="koboSpan" id="kobo.85.1"> API is </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.87.1">. </span><span class="koboSpan" id="kobo.87.2">The Vue engine will compile the code defined within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.88.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.89.1"> section into the appropriate code block inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">setup()</span></strong><span class="koboSpan" id="kobo.91.1">, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">following example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.93.1">
&lt;script setup&gt;
const message = 'Hello World'
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.94.1">The preceding code is equal to the following </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.96.1">setup()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.98.1">
&lt;script&gt;
export default {
  setup() {
    const message = 'Hello World'
    return {
      message
    }
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.99.1">In both preceding examples, we define an internal data state – </span><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">message</span></strong><span class="koboSpan" id="kobo.101.1"> – for our component. </span><span class="koboSpan" id="kobo.101.2">We then can display </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">message</span></strong><span class="koboSpan" id="kobo.103.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.105.1"> section </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">as required.</span></span></p>
<p><span class="koboSpan" id="kobo.107.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.109.1">, if you need to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">props</span></strong><span class="koboSpan" id="kobo.111.1"> parameter, you need to import </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">defineProps()</span></strong><span class="koboSpan" id="kobo.113.1"> from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">vue</span></strong><span class="koboSpan" id="kobo.115.1"> package and define the props within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.117.1"> section, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">following example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.119.1">
&lt;script setup&gt;
import { defineProps } from 'vue'
const { userName } = defineProps({ userName: string }
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.120.1">In the preceding example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">userName</span></strong><span class="koboSpan" id="kobo.122.1"> is now available</span><a id="_idIndexMarker518"/><span class="koboSpan" id="kobo.123.1"> in the template section as the component’s data</span><a id="_idIndexMarker519"/><span class="koboSpan" id="kobo.124.1"> props. </span><span class="koboSpan" id="kobo.124.2">You can also do something similar with </span><strong class="source-inline"><span class="koboSpan" id="kobo.125.1">defineEmits()</span></strong><span class="koboSpan" id="kobo.126.1"> for all the custom events of a component, </span><strong class="source-inline"><span class="koboSpan" id="kobo.127.1">useSlots()</span></strong><span class="koboSpan" id="kobo.128.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">useAttrs()</span></strong><span class="koboSpan" id="kobo.130.1"> for the component’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">slots</span></strong><span class="koboSpan" id="kobo.132.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">attrs</span></strong><span class="koboSpan" id="kobo.134.1"> when using </span><strong class="source-inline"><span class="koboSpan" id="kobo.135.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.136.1"> instead of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.137.1">setup()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.138.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.139.1">Next, let’s create our first component with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.140.1">setup()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.141.1"> method.</span></span></p>
<h2 id="_idParaDest-115"><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.142.1">Exercise 5.01 – creating a greeting component with setup()</span></h2>
<p><span class="koboSpan" id="kobo.143.1">In this exercise, we will</span><a id="_idIndexMarker520"/><span class="koboSpan" id="kobo.144.1"> create a component that renders a pre-defined</span><a id="_idIndexMarker521"/><span class="koboSpan" id="kobo.145.1"> greeting message using </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">setup()</span></strong><span class="koboSpan" id="kobo.147.1">, and then rewrite it using </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.149.1">script setup&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.151.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.01"><span class="No-Break"><span class="koboSpan" id="kobo.153.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.01</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.154.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.155.1">Follow the given steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">this exercise:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.157.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.159.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">Chapter05/Exercise5.01</span></strong><span class="koboSpan" id="kobo.161.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.163.1">&gt; cd Chapter05/Exercise5.01/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.164.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.165.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">code .</span></strong><span class="koboSpan" id="kobo.167.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.169.1">Create a new file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">Greeting.vue</span></strong><span class="koboSpan" id="kobo.171.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.173.1">src/components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.174.1"> directory.</span></span></li>
<li><span class="koboSpan" id="kobo.175.1">Start by scaffolding the component with empty </span><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">template</span></strong><span class="koboSpan" id="kobo.177.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">script</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.179.1"> tags:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.180.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.181.1">
  &lt;div&gt;Empty&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.182.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.183.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.184.1">
export default {}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.185.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.186.1">Next, we will implement</span><a id="_idIndexMarker522"/><span class="koboSpan" id="kobo.187.1"> the logic of our </span><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">setup()</span></strong><span class="koboSpan" id="kobo.189.1"> method, which will return</span><a id="_idIndexMarker523"/><span class="koboSpan" id="kobo.190.1"> an internal data state, </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">greeting</span></strong><span class="koboSpan" id="kobo.192.1">, with a static value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">"Hello"</span></strong><span class="koboSpan" id="kobo.194.1">, and another internal data state, </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">who</span></strong><span class="koboSpan" id="kobo.196.1">, with a static value </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">"John"</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.200.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.201.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.202.1">
  setup() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.203.1">
    const greeting = "Hello";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.204.1">
    const who = "John";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.205.1">
    return { greeting, who }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.206.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.207.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.208.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.209.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">template</span></strong><span class="koboSpan" id="kobo.211.1"> section, let’s display the values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">greeting</span></strong><span class="koboSpan" id="kobo.213.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.214.1">who</span></strong><span class="koboSpan" id="kobo.215.1"> as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.217.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.218.1">
  &lt;div&gt;{{ greeting }} {{ who }}&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.219.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.220.1">Run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.222.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.223.1">You will see the following when visiting your app in </span><span class="No-Break"><span class="koboSpan" id="kobo.224.1">the browser:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.225.1">
Hello John</span></pre></li>
<li><span class="koboSpan" id="kobo.226.1">Add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">setup</span></strong><span class="koboSpan" id="kobo.228.1"> attribute to your </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">script&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.231.1"> tag:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.232.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.233.1">
//…</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.234.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.235.1">Then, change the content within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">script</span></strong><span class="koboSpan" id="kobo.237.1"> tag to </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.239.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.240.1">
  const greeting = "Hello";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.241.1">
  const who = "John";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.242.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.243.1">The output of the browser should stay </span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">the same:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.245.1">
Hello John</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.246.1">Next, we will explore</span><a id="_idIndexMarker524"/><span class="koboSpan" id="kobo.247.1"> how we can combine </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">setup()</span></strong><span class="koboSpan" id="kobo.249.1"> and the render</span><a id="_idIndexMarker525"/><span class="koboSpan" id="kobo.250.1"> function, </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">h()</span></strong><span class="koboSpan" id="kobo.252.1">, from the Composition API to create </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">a component.</span></span></p>
<h2 id="_idParaDest-116"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.254.1">Creating a component with setup() and h()</span></h2>
<p><span class="koboSpan" id="kobo.255.1">In many scenarios</span><a id="_idIndexMarker526"/><span class="koboSpan" id="kobo.256.1"> where you need</span><a id="_idIndexMarker527"/><span class="koboSpan" id="kobo.257.1"> to render a static functional</span><a id="_idIndexMarker528"/><span class="koboSpan" id="kobo.258.1"> component or a static component structure</span><a id="_idIndexMarker529"/><span class="koboSpan" id="kobo.259.1"> based on the context and props received, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">h()</span></strong><span class="koboSpan" id="kobo.261.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">setup()</span></strong><span class="koboSpan" id="kobo.263.1"> can be helpful. </span><span class="koboSpan" id="kobo.263.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">h()</span></strong><span class="koboSpan" id="kobo.265.1"> function syntax is </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.267.1">
h(Element, props, children)</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">h()</span></strong><span class="koboSpan" id="kobo.269.1"> receives the </span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">following parameters:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.271.1">A string representing a DOM element (</span><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">'div'</span></strong><span class="koboSpan" id="kobo.273.1">, for instance) or a </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">Vue component.</span></span></li>
<li><span class="koboSpan" id="kobo.275.1">The props to pass to the created component node, including native properties and attributes, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">class</span></strong><span class="koboSpan" id="kobo.277.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">style</span></strong><span class="koboSpan" id="kobo.279.1">, and so on, and event listeners. </span><span class="koboSpan" id="kobo.279.2">This parameter </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">is optional.</span></span></li>
<li><span class="koboSpan" id="kobo.281.1">The array of children for the component or object of the slot functions. </span><span class="koboSpan" id="kobo.281.2">This parameter is </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">also optional.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.283.1">Instead of returning the object containing a static internal data state and using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">template</span></strong><span class="koboSpan" id="kobo.285.1"> section, </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">setup()</span></strong><span class="koboSpan" id="kobo.287.1"> will return a function that returns the component node created by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">h()</span></strong><span class="koboSpan" id="kobo.289.1"> function based on the parameters received. </span><span class="koboSpan" id="kobo.289.2">In the following example, we render a </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">div</span></strong><span class="koboSpan" id="kobo.291.1"> element containing a </span><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">"Hello World"</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.293.1">message</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.294.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">blue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.297.1">
&lt;script&gt;
import { h } from 'vue';
export default {
 setup() {
   const message = 'Hello World'
   return () =&gt; h('div', { style: { color: 'blue' } } ,
     message)
 }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.298.1">And the</span><a id="_idIndexMarker530"/><span class="koboSpan" id="kobo.299.1"> browser </span><a id="_idIndexMarker531"/><span class="koboSpan" id="kobo.300.1">will output</span><a id="_idIndexMarker532"/> <span class="No-Break"><span class="koboSpan" id="kobo.301.1">as</span></span><span class="No-Break"><a id="_idIndexMarker533"/></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1"> follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer141">
<span class="koboSpan" id="kobo.303.1"><img alt="Figure 5.1 – Hello World text in blue color" src="image/B18645_05_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.304.1">Figure 5.1 – Hello World text in blue color</span></p>
<p><span class="koboSpan" id="kobo.305.1">In the next exercise, we will practice creating a static component with </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">setup()</span></strong><span class="koboSpan" id="kobo.307.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">h()</span></strong><span class="koboSpan" id="kobo.309.1"> based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">props received.</span></span></p>
<h2 id="_idParaDest-117"><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.311.1">Exercise 5.02 – creating a dynamic greeting component with the setup() and h() functions</span></h2>
<p><span class="koboSpan" id="kobo.312.1">This exercise will create</span><a id="_idIndexMarker534"/><span class="koboSpan" id="kobo.313.1"> a component</span><a id="_idIndexMarker535"/><span class="koboSpan" id="kobo.314.1"> that renders a pre-defined greeting</span><a id="_idIndexMarker536"/><span class="koboSpan" id="kobo.315.1"> message depending</span><a id="_idIndexMarker537"/><span class="koboSpan" id="kobo.316.1"> on the props received, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1">setup()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.318.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">h()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.321.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.02"><span class="No-Break"><span class="koboSpan" id="kobo.323.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.02</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.324.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.325.1">Follow the given steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">this exercise:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.327.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.329.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">Chapter05/Exercise5.02</span></strong><span class="koboSpan" id="kobo.331.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.333.1">&gt; cd Chapter05/Exercise5.02/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.334.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.335.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">code .</span></strong><span class="koboSpan" id="kobo.337.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.339.1">Create a new file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">Greeting.vue</span></strong><span class="koboSpan" id="kobo.341.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">src/components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.344.1"> directory.</span></span></li>
<li><span class="koboSpan" id="kobo.345.1">Start by</span><a id="_idIndexMarker538"/><span class="koboSpan" id="kobo.346.1"> scaffolding</span><a id="_idIndexMarker539"/><span class="koboSpan" id="kobo.347.1"> the component</span><a id="_idIndexMarker540"/><span class="koboSpan" id="kobo.348.1"> with</span><a id="_idIndexMarker541"/><span class="koboSpan" id="kobo.349.1"> empty </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">template</span></strong><span class="koboSpan" id="kobo.351.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">script</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.353.1"> tags:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.354.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.355.1">
  &lt;div&gt;Empty&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.356.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.357.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.358.1">
export default {}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.359.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.360.1">Next, define the acceptable props for </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">Greeting</span></strong><span class="koboSpan" id="kobo.362.1"> using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">props</span></strong><span class="koboSpan" id="kobo.364.1"> field, with two string props – </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">greeting</span></strong><span class="koboSpan" id="kobo.366.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">who</span></strong><span class="koboSpan" id="kobo.368.1"> – as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.370.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.371.1">
  props: ['greeting', 'who']</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.372.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.373.1">We import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.374.1">h()</span></strong><span class="koboSpan" id="kobo.375.1"> function from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">vue</span></strong><span class="koboSpan" id="kobo.377.1"> package and implement </span><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">setup()</span></strong><span class="koboSpan" id="kobo.379.1"> to return a render function that renders a </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">div</span></strong><span class="koboSpan" id="kobo.381.1"> element that displays </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">greeting</span></strong><span class="koboSpan" id="kobo.383.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.384.1">who</span></strong><span class="koboSpan" id="kobo.385.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.387.1">
import { h } from "vue";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.388.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.389.1">
  props: ["greeting", "who"],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.390.1">
  setup(props) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.391.1">
    return () =&gt; h("div", `${props.greeting} ${props.who}`);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.392.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.393.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.394.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.395.1">src/App.vue</span></strong><span class="koboSpan" id="kobo.396.1"> file</span><a id="_idIndexMarker542"/><span class="koboSpan" id="kobo.397.1"> and import</span><a id="_idIndexMarker543"/><span class="koboSpan" id="kobo.398.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.399.1">Greeting</span></strong><span class="koboSpan" id="kobo.400.1"> component</span><a id="_idIndexMarker544"/><span class="koboSpan" id="kobo.401.1"> from </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">./src/components/Greeting.vue</span></strong><span class="koboSpan" id="kobo.403.1"> into</span><a id="_idIndexMarker545"/><span class="koboSpan" id="kobo.404.1"> the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">script</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.406.1"> section:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.407.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.408.1">
import Greeting from './components/Greeting.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.409.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.410.1">We can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.411.1">Greeting</span></strong><span class="koboSpan" id="kobo.412.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">the template:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.414.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.415.1">
  &lt;div id="app"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.416.1">
    &lt;Greeting greeting="Hey" who="JavaScript"/&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.417.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.418.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.419.1">Run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.420.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.421.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.422.1">You will see the following when visiting your app in </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">the browser:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.424.1">
Hey JavaScript</span></pre></li>
<li><span class="koboSpan" id="kobo.425.1">Within </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">setup()</span></strong><span class="koboSpan" id="kobo.427.1">, we want to check whether the parent passes the values for </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">greeting</span></strong><span class="koboSpan" id="kobo.429.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">who</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.431.1">or not:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.432.1">
     const hasValue = props.greeting &amp;&amp; props.who;</span></pre></li>
<li><span class="koboSpan" id="kobo.433.1">Based on the</span><a id="_idIndexMarker546"/><span class="koboSpan" id="kobo.434.1"> result, we will render</span><a id="_idIndexMarker547"/><span class="koboSpan" id="kobo.435.1"> a </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">div</span></strong><span class="koboSpan" id="kobo.437.1"> element</span><a id="_idIndexMarker548"/><span class="koboSpan" id="kobo.438.1"> that displays the full message</span><a id="_idIndexMarker549"/><span class="koboSpan" id="kobo.439.1"> if there are values for both </span><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">greeting</span></strong><span class="koboSpan" id="kobo.441.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">who</span></strong><span class="koboSpan" id="kobo.443.1">, or a </span><strong class="source-inline"><span class="koboSpan" id="kobo.444.1">div</span></strong><span class="koboSpan" id="kobo.445.1"> element displaying an error message – </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">"There is not enough information to display"</span></strong><span class="koboSpan" id="kobo.447.1"> – in </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">red</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.449.1"> otherwise:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.450.1">
return () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.451.1">
  hasValue</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.452.1">
    ? </span><span class="koboSpan" id="kobo.452.2">h("div", `${props.greeting} ${props.who}`)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.453.1">
    : h(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.454.1">
         "div",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.455.1">
         { style: { color: "red" } },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.456.1">
         "There is not enough information to</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.457.1">
           display"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.458.1">
        );</span></pre></li>
<li><span class="koboSpan" id="kobo.459.1">In the parent component (</span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">App.vue</span></strong><span class="koboSpan" id="kobo.461.1">), let’s remove </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">greeting</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.463.1"> value:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.464.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.465.1">
&lt;div id="app"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.466.1">
  &lt;Greeting who= "JavaScript"/&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.467.1">
&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.468.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.469.1">The browser will now display the </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">following message:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer142">
<span class="koboSpan" id="kobo.471.1"><img alt="Figure 5.2 – Error message when one of the props does not have value" src="image/B18645_05_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.472.1">Figure 5.2 – Error message when one of the props does not have value</span></p>
<p><span class="koboSpan" id="kobo.473.1">That’s it. </span><span class="koboSpan" id="kobo.473.2">You have now</span><a id="_idIndexMarker550"/><span class="koboSpan" id="kobo.474.1"> learned how to combine </span><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">setup()</span></strong><span class="koboSpan" id="kobo.476.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.477.1">h()</span></strong><span class="koboSpan" id="kobo.478.1"> to compose</span><a id="_idIndexMarker551"/><span class="koboSpan" id="kobo.479.1"> a dynamic component</span><a id="_idIndexMarker552"/><span class="koboSpan" id="kobo.480.1"> based on its</span><a id="_idIndexMarker553"/><span class="koboSpan" id="kobo.481.1"> props. </span><span class="koboSpan" id="kobo.481.2">Next, we will explore how we can use different Composition APIs, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">ref()</span></strong><span class="koboSpan" id="kobo.483.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">reactive()</span></strong><span class="koboSpan" id="kobo.485.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">computed()</span></strong><span class="koboSpan" id="kobo.487.1">, to create a reactive data state for </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">our component.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.489.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.490.1">We will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.491.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.492.1"> from now on for readability and </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">code convenience.</span></span></p>
<h1 id="_idParaDest-118"><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.494.1">Working with data</span></h1>
<p><span class="koboSpan" id="kobo.495.1">In the Options API, we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">data()</span></strong><span class="koboSpan" id="kobo.497.1"> method to initialize</span><a id="_idIndexMarker554"/><span class="koboSpan" id="kobo.498.1"> a component’s local state. </span><span class="koboSpan" id="kobo.498.2">By default, all the data properties received from </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">data()</span></strong><span class="koboSpan" id="kobo.500.1"> are reactive, which can be overkill in many scenarios. </span><span class="koboSpan" id="kobo.500.2">Vue has introduced the </span><strong class="source-inline"><span class="koboSpan" id="kobo.501.1">ref()</span></strong><span class="koboSpan" id="kobo.502.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">reactive()</span></strong><span class="koboSpan" id="kobo.504.1"> functions, which allow us to decide which local states should be reactive and which </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">shouldn’t be.</span></span></p>
<h2 id="_idParaDest-119"><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.506.1">Setting a reactive local state with ref()</span></h2>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">ref()</span></strong><span class="koboSpan" id="kobo.508.1"> is a function</span><a id="_idIndexMarker555"/><span class="koboSpan" id="kobo.509.1"> that accepts a single input</span><a id="_idIndexMarker556"/><span class="koboSpan" id="kobo.510.1"> parameter as the reactive</span><a id="_idIndexMarker557"/><span class="koboSpan" id="kobo.511.1"> data’s initial value and returns a reference object for the created reactive data state. </span><span class="koboSpan" id="kobo.511.2">We call this reference object a </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">ref</span></strong><span class="koboSpan" id="kobo.513.1"> object. </span><span class="koboSpan" id="kobo.513.2">To start using </span><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">ref()</span></strong><span class="koboSpan" id="kobo.515.1">, you first need to import it from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.517.1"> package.</span></span></p>
<p><span class="koboSpan" id="kobo.518.1">For example, we can</span><a id="_idIndexMarker558"/><span class="koboSpan" id="kobo.519.1"> create a reactive data called </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">isLightOn</span></strong><span class="koboSpan" id="kobo.521.1">, which accepts </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">false</span></strong><span class="koboSpan" id="kobo.523.1"> as its initial value</span><a id="_idIndexMarker559"/> <span class="No-Break"><span class="koboSpan" id="kobo.524.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.525.1">
import { ref } from 'vue';
const isLightOn = ref(false);</span></pre>
<p><span class="koboSpan" id="kobo.526.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">template</span></strong><span class="koboSpan" id="kobo.528.1"> section, you can access the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">isLightOn</span></strong><span class="koboSpan" id="kobo.530.1"> in the same way as before, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.532.1">
&lt;template&gt;
  &lt;div&gt;Light status: {{ isLightOn }}&lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.533.1">However, within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.535.1"> section of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">setup()</span></strong><span class="koboSpan" id="kobo.537.1"> method, if you want to access the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">isLightOn</span></strong><span class="koboSpan" id="kobo.539.1">, you need to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">isLightOn.value</span></strong><span class="koboSpan" id="kobo.541.1"> instead of direct access, like in </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">template</span></strong><span class="koboSpan" id="kobo.543.1">. </span><span class="koboSpan" id="kobo.543.2">In the following example, we will create a component’s method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.544.1">toggle</span></strong><span class="koboSpan" id="kobo.545.1">, that will output the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.546.1">isLightOn</span></strong><span class="koboSpan" id="kobo.547.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">the console:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.549.1">
const toggle = () =&gt; {
console.log(isLightOn.value)
};</span></pre>
<p><span class="koboSpan" id="kobo.550.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">template</span></strong><span class="koboSpan" id="kobo.552.1"> section, let’s add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">button</span></strong><span class="koboSpan" id="kobo.554.1"> element that triggers this method upon the </span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">user’s click:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.556.1">
&lt;button @click="toggle"&gt;Toggle&lt;/button&gt;</span></pre>
<p><span class="koboSpan" id="kobo.557.1">Upon the button being clicked, the console outputs the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.558.1">isLightOn</span></strong><span class="koboSpan" id="kobo.559.1">, which has the initial value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.560.1">false</span></strong><span class="koboSpan" id="kobo.561.1">, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer143">
<span class="koboSpan" id="kobo.563.1"><img alt="Figure 5.3 – Console output of the light status" src="image/B18645_05_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.564.1">Figure 5.3 – Console output of the light status</span></p>
<p><span class="koboSpan" id="kobo.565.1">Note that here if you</span><a id="_idIndexMarker560"/><span class="koboSpan" id="kobo.566.1"> output </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">isLightOn</span></strong><span class="koboSpan" id="kobo.568.1"> and not </span><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">isLightOn.value</span></strong><span class="koboSpan" id="kobo.570.1">, the console outputs</span><a id="_idIndexMarker561"/><span class="koboSpan" id="kobo.571.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">ref</span></strong><span class="koboSpan" id="kobo.573.1"> object created by Vue </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer144">
<span class="koboSpan" id="kobo.575.1"><img alt="Figure 5.4 – Console output of the ref object for isLightOn" src="image/B18645_05_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.576.1">Figure 5.4 – Console output of the ref object for isLightOn</span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">isLightOn</span></strong><span class="koboSpan" id="kobo.578.1"> is reactive and mutable, which means you can set its value directly using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">.value</span></strong><span class="koboSpan" id="kobo.580.1"> field. </span><span class="koboSpan" id="kobo.580.2">We will modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">toggle()</span></strong><span class="koboSpan" id="kobo.582.1"> method to toggle the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">isLightOn</span></strong><span class="koboSpan" id="kobo.584.1"> instead. </span><span class="koboSpan" id="kobo.584.2">The code will become </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.586.1">
const toggle = () =&gt; {
  isLightOn.value = !isLightOn.value;
};</span></pre>
<p><span class="koboSpan" id="kobo.587.1">Now, whenever the user clicks</span><a id="_idIndexMarker562"/><span class="koboSpan" id="kobo.588.1"> on the </span><strong class="bold"><span class="koboSpan" id="kobo.589.1">Toggle</span></strong><span class="koboSpan" id="kobo.590.1"> button, </span><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">isLightOn</span></strong><span class="koboSpan" id="kobo.592.1"> will update</span><a id="_idIndexMarker563"/><span class="koboSpan" id="kobo.593.1"> its value, and Vue will update the component accordingly, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer145">
<span class="koboSpan" id="kobo.595.1"><img alt="Figure 5.5 – Light status updates to true upon Toggle being clicked" src="image/B18645_05_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.596.1">Figure 5.5 – Light status updates to true upon Toggle being clicked</span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.597.1">ref()</span></strong><span class="koboSpan" id="kobo.598.1"> is generally sufficient to create a reactive state for any data types, including primitive (</span><strong class="source-inline"><span class="koboSpan" id="kobo.599.1">boolean</span></strong><span class="koboSpan" id="kobo.600.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.601.1">number</span></strong><span class="koboSpan" id="kobo.602.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1">string</span></strong><span class="koboSpan" id="kobo.604.1">, and so on) and object types. </span><span class="koboSpan" id="kobo.604.2">However, for an object type, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">ref()</span></strong><span class="koboSpan" id="kobo.606.1"> means that Vue will make the desired data object and its nested properties reactive and mutable. </span><span class="koboSpan" id="kobo.606.2">For example, we declare a reactive object, </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">livingRoomLight</span></strong><span class="koboSpan" id="kobo.608.1">, with </span><strong class="source-inline"><span class="koboSpan" id="kobo.609.1">ref()</span></strong><span class="koboSpan" id="kobo.610.1"> as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.612.1">
const livingRoomLight = ref({
  status: false,
  name: 'Living Room'
})</span></pre>
<p><span class="koboSpan" id="kobo.613.1">Then, we add two methods, one to modify its single property – </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">status</span></strong><span class="koboSpan" id="kobo.615.1"> – and the second to replace the whole object with a new one, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.617.1">
const toggleLight = () =&gt; {
  livingRoomLight.value.status =
    !livingRoomLight.value.status
}
const replaceLight = () =&gt; {
  livingRoomLight.value = {
    status: false,
    name: 'Kitchen'
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.618.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.619.1">template</span></strong><span class="koboSpan" id="kobo.620.1"> section, let’s display</span><a id="_idIndexMarker564"/><span class="koboSpan" id="kobo.621.1"> the details</span><a id="_idIndexMarker565"/><span class="koboSpan" id="kobo.622.1"> of </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">livingRoomLight</span></strong><span class="koboSpan" id="kobo.624.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.625.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.626.1">
&lt;div&gt;
  &lt;div&gt;Light status: {{ livingRoomLight.status }}&lt;/div&gt;
  &lt;div&gt;Light name: {{ livingRoomLight.name }}&lt;/div&gt;
  &lt;button @click="toggleLight"&gt;Toggle&lt;/button&gt;
  &lt;button @click="replaceLight"&gt;Replace&lt;/button&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.627.1">When a user clicks on </span><strong class="bold"><span class="koboSpan" id="kobo.628.1">Toggle</span></strong><span class="koboSpan" id="kobo.629.1">, only the status changes its value, but if a user clicks on the </span><strong class="bold"><span class="koboSpan" id="kobo.630.1">Replace</span></strong><span class="koboSpan" id="kobo.631.1"> button, </span><strong class="source-inline"><span class="koboSpan" id="kobo.632.1">lightRoomLight</span></strong><span class="koboSpan" id="kobo.633.1"> now becomes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">Kitchen</span></strong><span class="koboSpan" id="kobo.635.1"> light with different details, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer146">
<span class="koboSpan" id="kobo.637.1"><img alt="Figure 5.6 – Light name changed to Kitchen after clicking on Replace" src="image/B18645_05_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.638.1">Figure 5.6 – Light name changed to Kitchen after clicking on Replace</span></p>
<p><span class="koboSpan" id="kobo.639.1">Unfortunately, this mechanism of making the object and its nested properties reactive can lead to unwanted bugs and potential performance issues, especially for reactive objects with a complex hierarchy of </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">nested properties.</span></span></p>
<p><span class="koboSpan" id="kobo.641.1">In a scenario in which</span><a id="_idIndexMarker566"/><span class="koboSpan" id="kobo.642.1"> you only want to modify the whole object’s value (replacing it with a new object) but not its nested</span><a id="_idIndexMarker567"/><span class="koboSpan" id="kobo.643.1"> properties, we suggest you use </span><strong class="source-inline"><span class="koboSpan" id="kobo.644.1">shallowRef()</span></strong><span class="koboSpan" id="kobo.645.1">. </span><span class="koboSpan" id="kobo.645.2">In a scenario in which you only need to modify the object’s nested properties (such as elements of an array object and each element’s fields), you should use </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">reactive()</span></strong><span class="koboSpan" id="kobo.647.1"> instead. </span><span class="koboSpan" id="kobo.647.2">We will take a look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.648.1">reactive()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.649.1">function next.</span></span></p>
<h2 id="_idParaDest-120"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.650.1">Setting a reactive local state with reactive()</span></h2>
<p><span class="koboSpan" id="kobo.651.1">Like </span><strong class="source-inline"><span class="koboSpan" id="kobo.652.1">ref()</span></strong><span class="koboSpan" id="kobo.653.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.654.1">reactive()</span></strong><span class="koboSpan" id="kobo.655.1"> function returns</span><a id="_idIndexMarker568"/><span class="koboSpan" id="kobo.656.1"> a reference to a reactive object based on the initial value passed to it. </span><span class="koboSpan" id="kobo.656.2">Unlike </span><strong class="source-inline"><span class="koboSpan" id="kobo.657.1">ref()</span></strong><span class="koboSpan" id="kobo.658.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">reactive()</span></strong><span class="koboSpan" id="kobo.660.1"> only accepts object-type input parameters and returns a reference object whose value can be accessed directly without needing a </span><strong class="source-inline"><span class="koboSpan" id="kobo.661.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.663.1"> field.</span></span></p>
<p><span class="koboSpan" id="kobo.664.1">The following example shows how we define a reactive array of </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">books</span></strong><span class="koboSpan" id="kobo.666.1">, and a reactive book object, </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">newBook</span></strong><span class="koboSpan" id="kobo.668.1">, for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">BookList</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.670.1"> component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.671.1">
&lt;script setup&gt;
import { reactive } from "vue";
const newBook = reactive({
  title: "",
  price: 0,
  currency: "USD",
  description: "",
});
const books = reactive([]);
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.672.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.673.1">template</span></strong><span class="koboSpan" id="kobo.674.1">, we define a </span><strong class="source-inline"><span class="koboSpan" id="kobo.675.1">fieldset</span></strong><span class="koboSpan" id="kobo.676.1"> element that contains</span><a id="_idIndexMarker569"/><span class="koboSpan" id="kobo.677.1"> several </span><strong class="source-inline"><span class="koboSpan" id="kobo.678.1">input</span></strong><span class="koboSpan" id="kobo.679.1"> fields, each bound to an area of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">newBook</span></strong><span class="koboSpan" id="kobo.681.1"> data using </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">v-model</span></strong><span class="koboSpan" id="kobo.683.1">, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.684.1">button</span></strong><span class="koboSpan" id="kobo.685.1"> element, </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">Add</span></strong><span class="koboSpan" id="kobo.687.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.688.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.689.1">
&lt;fieldset :style="{ display: 'flex', flexDirection: 'column'}"&gt;
        &lt;label&gt;
            Title:
            &lt;input v-model="newBook.title" /&gt;
        &lt;/label&gt;
        &lt;label&gt;
            Price:
            &lt;input v-model.number="newBook.price" /&gt;
        &lt;/label&gt;
        &lt;label&gt;
            Currency:
            &lt;input v-model="newBook.currency" /&gt;
        &lt;/label&gt;
        &lt;label&gt;
            Description:
            &lt;input v-model="newBook.description" /&gt;
        &lt;/label&gt;
        &lt;button @click="addBook"&gt;Add&lt;/button&gt;
    &lt;/fieldset&gt;</span></pre>
<p><span class="koboSpan" id="kobo.690.1">The browser will display the </span><span class="No-Break"><span class="koboSpan" id="kobo.691.1">following layout:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer147">
<span class="koboSpan" id="kobo.692.1"><img alt="Figure 5.7 – Filling in the details of the new book before adding" src="image/B18645_05_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.693.1">Figure 5.7 – Filling in the details of the new book before adding</span></p>
<p><span class="koboSpan" id="kobo.694.1">We need to implement the </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">addBook</span></strong><span class="koboSpan" id="kobo.696.1"> method, which will add</span><a id="_idIndexMarker570"/><span class="koboSpan" id="kobo.697.1"> a new book to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">books</span></strong><span class="koboSpan" id="kobo.699.1"> list based on the information from </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">newBook</span></strong><span class="koboSpan" id="kobo.701.1"> and clear up the properties of </span><strong class="source-inline"><span class="koboSpan" id="kobo.702.1">newBook</span></strong><span class="koboSpan" id="kobo.703.1">, as in the </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.705.1">
const addBook = () =&gt; {
  books.push({
    ...newBook,
  });
  newBook.title = "";
  newBook.price = 0;
  newBook.currency = "USD";
  newBook.description = "";
};</span></pre>
<p><span class="koboSpan" id="kobo.706.1">Note that here, we don’t push </span><strong class="source-inline"><span class="koboSpan" id="kobo.707.1">newBook</span></strong><span class="koboSpan" id="kobo.708.1"> directly to </span><strong class="source-inline"><span class="koboSpan" id="kobo.709.1">books</span></strong><span class="koboSpan" id="kobo.710.1"> but rather clone its properties to the new object</span><a id="_idIndexMarker571"/><span class="koboSpan" id="kobo.711.1"> using the spread literal, </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">…</span></strong><span class="koboSpan" id="kobo.713.1">, instead. </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">reactive()</span></strong><span class="koboSpan" id="kobo.715.1"> only creates a proxy version of the original object passed to it. </span><span class="koboSpan" id="kobo.715.2">Hence, if you don’t clone </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1">newBook</span></strong><span class="koboSpan" id="kobo.717.1"> before adding it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">books</span></strong><span class="koboSpan" id="kobo.719.1">, any changes made to its properties later will also be reflected in the element added to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.720.1">books</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.721.1"> list.</span></span></p>
<p><span class="koboSpan" id="kobo.722.1">Now, after filling in a new book’s details, open your browser’s developer tools, and in the </span><strong class="bold"><span class="koboSpan" id="kobo.723.1">Vue </span></strong><span class="koboSpan" id="kobo.724.1">tab, you should see the component’s local data and methods nested in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">setup</span></strong><span class="koboSpan" id="kobo.726.1"> section, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer148">
<span class="koboSpan" id="kobo.728.1"><img alt="Figure 5.8 – The component’s setup section in Vue Devtools" src="image/B18645_05_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.729.1">Figure 5.8 – The component’s setup section in Vue Devtools</span></p>
<p><span class="koboSpan" id="kobo.730.1">All the reactive data created with </span><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">reactive()</span></strong><span class="koboSpan" id="kobo.732.1"> will have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.733.1">Reactive</span></strong><span class="koboSpan" id="kobo.734.1"> text indicator (for </span><strong class="source-inline"><span class="koboSpan" id="kobo.735.1">ref()</span></strong><span class="koboSpan" id="kobo.736.1">, it will be the </span><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">Ref</span></strong><span class="koboSpan" id="kobo.738.1"> indicator). </span><span class="koboSpan" id="kobo.738.2">Once you click on the </span><strong class="bold"><span class="koboSpan" id="kobo.739.1">Add</span></strong><span class="koboSpan" id="kobo.740.1"> button, you will see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1">books</span></strong><span class="koboSpan" id="kobo.742.1"> array updated with the new values, while </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">newBook</span></strong><span class="koboSpan" id="kobo.744.1"> is reset to its original value in Devtools, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.745.1">Figure 5</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.746.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer149">
<span class="koboSpan" id="kobo.748.1"><img alt="Figure 5.9 – How the array of books looks after adding a new book" src="image/B18645_05_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.749.1">Figure 5.9 – How the array of books looks after adding a new book</span></p>
<p><span class="koboSpan" id="kobo.750.1">You can also use </span><strong class="source-inline"><span class="koboSpan" id="kobo.751.1">shallowReactive()</span></strong><span class="koboSpan" id="kobo.752.1"> to limit the reactivity mechanism to apply only to the root’s properties and not their descendants. </span><span class="koboSpan" id="kobo.752.2">By doing so, you can avoid performance issues caused by too many reactive fields within a complex </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">data object.</span></span></p>
<p><span class="koboSpan" id="kobo.754.1">At this point, we have learned</span><a id="_idIndexMarker572"/><span class="koboSpan" id="kobo.755.1"> how to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.756.1">ref()</span></strong><span class="koboSpan" id="kobo.757.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">reactive()</span></strong><span class="koboSpan" id="kobo.759.1"> to define reactive data depending on its type and use cases. </span><span class="koboSpan" id="kobo.759.2">Next, we are going to apply what we learned to write a reactive component using these </span><span class="No-Break"><span class="koboSpan" id="kobo.760.1">two functions.</span></span></p>
<h2 id="_idParaDest-121"><a id="_idTextAnchor204"/><span class="koboSpan" id="kobo.761.1">Exercise 5.03 – binding a component with ref() and reactive()</span></h2>
<p><span class="koboSpan" id="kobo.762.1">In this exercise, you</span><a id="_idIndexMarker573"/><span class="koboSpan" id="kobo.763.1"> will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.764.1">ref()</span></strong><span class="koboSpan" id="kobo.765.1"> to define</span><a id="_idIndexMarker574"/><span class="koboSpan" id="kobo.766.1"> a search</span><a id="_idIndexMarker575"/><span class="koboSpan" id="kobo.767.1"> box</span><a id="_idIndexMarker576"/><span class="koboSpan" id="kobo.768.1"> for blogs, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.769.1">reactive()</span></strong><span class="koboSpan" id="kobo.770.1"> to define different reactive blog lists, in which you can favorite </span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">a blog.</span></span></p>
<p><span class="koboSpan" id="kobo.772.1">To access the code for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.03"><span class="No-Break"><span class="koboSpan" id="kobo.774.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.03</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.775.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.776.1">We are going to implement</span><a id="_idIndexMarker577"/><span class="koboSpan" id="kobo.777.1"> a component that receives the user’s first name</span><a id="_idIndexMarker578"/><span class="koboSpan" id="kobo.778.1"> and last name and accepts multi-lingual input, and</span><a id="_idIndexMarker579"/><span class="koboSpan" id="kobo.779.1"> displays the user’s full name</span><a id="_idIndexMarker580"/><span class="koboSpan" id="kobo.780.1"> and the number of languages received accordingly by performing the </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">following steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.782.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.783.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.784.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.785.1">Chapter05/Exercise5.03</span></strong><span class="koboSpan" id="kobo.786.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.788.1">&gt; cd Chapter05/Exercise5.03/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.789.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.790.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.791.1">code .</span></strong><span class="koboSpan" id="kobo.792.1"> command within the project directory), or your </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.794.1">Let’s create a new Vue component called </span><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">BlogGallery</span></strong><span class="koboSpan" id="kobo.796.1"> by adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.797.1">BlogGallery.vue</span></strong><span class="koboSpan" id="kobo.798.1"> file to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.799.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.800.1">src/components/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.801.1"> folder.</span></span></li>
<li><span class="koboSpan" id="kobo.802.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">BlogGallery.vue</span></strong><span class="koboSpan" id="kobo.804.1"> and let’s create the code block structure for the Vue component </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.806.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.807.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.808.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.809.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.810.1">Within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.812.1"> section, we define our reactive data – </span><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">searchTerm</span></strong><span class="koboSpan" id="kobo.814.1"> – for the search input with an empty string as its initial value </span><span class="No-Break"><span class="koboSpan" id="kobo.815.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.816.1">ref()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.817.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.818.1">
import { ref, reactive } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.819.1">
const searchTerm = ref('');</span></pre></li>
<li><span class="koboSpan" id="kobo.820.1">We will define our</span><a id="_idIndexMarker581"/><span class="koboSpan" id="kobo.821.1"> reactive blog</span><a id="_idIndexMarker582"/><span class="koboSpan" id="kobo.822.1"> list – </span><strong class="source-inline"><span class="koboSpan" id="kobo.823.1">blogs</span></strong><span class="koboSpan" id="kobo.824.1"> – with </span><a id="_idIndexMarker583"/><span class="koboSpan" id="kobo.825.1">each item</span><a id="_idIndexMarker584"/><span class="koboSpan" id="kobo.826.1"> containing </span><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">title</span></strong><span class="koboSpan" id="kobo.828.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.829.1">description</span></strong><span class="koboSpan" id="kobo.830.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.831.1">author</span></strong><span class="koboSpan" id="kobo.832.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.833.1">isFavorite</span></strong><span class="koboSpan" id="kobo.834.1"> fields </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.836.1">
const blogs = reactive([{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.837.1">
    title: 'Vue 3',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.838.1">
    description: 'Vue 3 is awesome',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.839.1">
    author: 'John Doe',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.840.1">
    isFavorite: false</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.841.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.842.1">
    title: 'Vue 2',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.843.1">
    description: 'Vue 2 is awesome',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.844.1">
    author: 'John Doe',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.845.1">
    isFavorite: false</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.846.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.847.1">
    title: 'Pinia state management',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.848.1">
    description: 'Pinia is awesome',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.849.1">
    author: 'Jane Smith',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.850.1">
    isFavorite: false</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.851.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.852.1">
    title: 'Vue Router',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.853.1">
    description: 'Vue Router is awesome',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.854.1">
    author: 'Jane Smith',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.855.1">
    isFavorite: false</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.856.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.857.1">
    title: 'Testing with Playwright',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.858.1">
    description: 'Playwright is awesome',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.859.1">
    author: 'Minnie Mouse',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.860.1">
    isFavorite: false</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.861.1">
}, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.862.1">
    title: 'Testing with Cypress',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.863.1">
    description: 'Cypress is awesome',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.864.1">
    author: 'Mickey Mouse',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.865.1">
    isFavorite: false</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.866.1">
}]);</span></pre></li>
<li><span class="koboSpan" id="kobo.867.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.868.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.869.1"> section, we will</span><a id="_idIndexMarker585"/><span class="koboSpan" id="kobo.870.1"> bind </span><strong class="source-inline"><span class="koboSpan" id="kobo.871.1">searchTerm</span></strong><span class="koboSpan" id="kobo.872.1"> to an input</span><a id="_idIndexMarker586"/><span class="koboSpan" id="kobo.873.1"> field with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.874.1">placeholder</span></strong><span class="koboSpan" id="kobo.875.1"> element</span><a id="_idIndexMarker587"/><span class="koboSpan" id="kobo.876.1"> of </span><strong class="source-inline"><span class="koboSpan" id="kobo.877.1">"Search by blog's title"</span></strong><span class="koboSpan" id="kobo.878.1">, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">label</span></strong><span class="koboSpan" id="kobo.880.1"> element</span><a id="_idIndexMarker588"/><span class="koboSpan" id="kobo.881.1"> of </span><strong class="source-inline"><span class="koboSpan" id="kobo.882.1">What are you searching for?</span></strong><span class="koboSpan" id="kobo.883.1">, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.884.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.885.1">
&lt;label&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.886.1">
   What are you searching for?</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.887.1">
   &lt;input</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.888.1">
      type="text"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.889.1">
      v-model="searchTerm"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.890.1">
      placeholder="Search by blog's title"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.891.1">
   /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.892.1">
&lt;/label&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.893.1">Then, we add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.894.1">&lt;ul&gt;</span></strong><span class="koboSpan" id="kobo.895.1"> element, use </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">v-for</span></strong><span class="koboSpan" id="kobo.897.1"> to iterate through </span><strong class="source-inline"><span class="koboSpan" id="kobo.898.1">blogs</span></strong><span class="koboSpan" id="kobo.899.1">, and render a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.900.1">&lt;li&gt;</span></strong><span class="koboSpan" id="kobo.901.1"> elements. </span><span class="koboSpan" id="kobo.901.2">Each </span><strong class="source-inline"><span class="koboSpan" id="kobo.902.1">&lt;li&gt;</span></strong><span class="koboSpan" id="kobo.903.1"> element contains </span><strong class="source-inline"><span class="koboSpan" id="kobo.904.1">&lt;article&gt;</span></strong><span class="koboSpan" id="kobo.905.1">, in which there is </span><strong class="source-inline"><span class="koboSpan" id="kobo.906.1">&lt;h3&gt;</span></strong><span class="koboSpan" id="kobo.907.1"> for the title, </span><strong class="source-inline"><span class="koboSpan" id="kobo.908.1">&lt;h4&gt;</span></strong><span class="koboSpan" id="kobo.909.1"> for the author’s name, </span><strong class="source-inline"><span class="koboSpan" id="kobo.910.1">&lt;p&gt;</span></strong><span class="koboSpan" id="kobo.911.1"> for description, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.912.1">&lt;button&gt;</span></strong><span class="koboSpan" id="kobo.913.1"> element for adding the blog to </span><span class="No-Break"><span class="koboSpan" id="kobo.914.1">your favorites:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.915.1">
&lt;ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.916.1">
  &lt;li v-for="(blog, index) in blogs" :key="index"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.917.1">
    &lt;article&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.918.1">
        &lt;h3&gt;{{ blog.title }}&lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.919.1">
        &lt;h4&gt;{{ blog.author }}&lt;/h4&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.920.1">
          &lt;p&gt;{{ blog.description }}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.921.1">
          &lt;button&gt;Add to favorite&lt;/button&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.922.1">
    &lt;/article&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.923.1">
  &lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.924.1">
&lt;/ul&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.925.1">Navigate back</span><a id="_idIndexMarker589"/><span class="koboSpan" id="kobo.926.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.927.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.928.1"> section, where</span><a id="_idIndexMarker590"/><span class="koboSpan" id="kobo.929.1"> we will add the implementation</span><a id="_idIndexMarker591"/><span class="koboSpan" id="kobo.930.1"> for a </span><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">toggleFavorite()</span></strong><span class="koboSpan" id="kobo.932.1"> method, which</span><a id="_idIndexMarker592"/><span class="koboSpan" id="kobo.933.1"> receives </span><strong class="source-inline"><span class="koboSpan" id="kobo.934.1">index</span></strong><span class="koboSpan" id="kobo.935.1"> and toggles the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.936.1">blogs[index].isFavorite</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.937.1"> value:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.938.1">
const toggleFavorite = (index) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.939.1">
  blogs[index].isFavorite = !blogs[index].isFavorite;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.940.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.941.1">Go back to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.942.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.943.1"> section. </span><span class="koboSpan" id="kobo.943.2">We will bind the </span><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">toggleFavorite()</span></strong><span class="koboSpan" id="kobo.945.1"> method to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.946.1">button</span></strong><span class="koboSpan" id="kobo.947.1"> element created and change its name according to the status </span><span class="No-Break"><span class="koboSpan" id="kobo.948.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.949.1">isFavorite</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.950.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.951.1">
&lt;button @click="toggleFavorite(index)"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.952.1">
  {{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.953.1">
     blog.isFavorite ? </span><span class="koboSpan" id="kobo.953.2">'Remove from favorites' : 'Add</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.954.1">
       to favorites'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.955.1">
  }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.956.1">
&lt;/button&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.957.1">We need to filter</span><a id="_idIndexMarker593"/><span class="koboSpan" id="kobo.958.1"> the blogs</span><a id="_idIndexMarker594"/><span class="koboSpan" id="kobo.959.1"> according to </span><strong class="source-inline"><span class="koboSpan" id="kobo.960.1">searchTerm</span></strong><span class="koboSpan" id="kobo.961.1">, so let’s add</span><a id="_idIndexMarker595"/><span class="koboSpan" id="kobo.962.1"> another method</span><a id="_idIndexMarker596"/><span class="koboSpan" id="kobo.963.1"> to return a sorted list – </span><strong class="source-inline"><span class="koboSpan" id="kobo.964.1">getFilteredBlogs()</span></strong><span class="koboSpan" id="kobo.965.1"> – which will produce a filtered array of blogs according to the blog titles, </span><span class="No-Break"><span class="koboSpan" id="kobo.966.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.967.1">
const getFilteredBlogs = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.968.1">
    return blogs.filter(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.969.1">
      blog =&gt; blog.title.toLowerCase().includes(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.970.1">
        searchTerm.value.toLowerCase()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.971.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.972.1">
    );</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.973.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.974.1">Then, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.975.1">template</span></strong><span class="koboSpan" id="kobo.976.1"> section, replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.977.1">blogs</span></strong><span class="koboSpan" id="kobo.978.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.979.1">v-for</span></strong><span class="koboSpan" id="kobo.980.1"> iteration with </span><strong class="source-inline"><span class="koboSpan" id="kobo.981.1">getFilteredBlogs()</span></strong><span class="koboSpan" id="kobo.982.1">, as seen in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.983.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.984.1">
&lt;li v-for="(blog, index) in getFilteredBlogs()" :key="index"&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.985.1">We need to add some basic CSS styling to make our component prettier, </span><span class="No-Break"><span class="koboSpan" id="kobo.986.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.987.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.988.1">
label {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.989.1">
    display: flex;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.990.1">
    flex-direction: column;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.991.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.992.1">
li {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.993.1">
    list-style: none;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.994.1">
    gap: 10px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.995.1">
    width: 200px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.996.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.997.1">
ul {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.998.1">
    display: flex;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.999.1">
    flex-wrap: wrap;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1000.1">
    gap: 10px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1001.1">
    padding-inline-start: 0px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1002.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1003.1">
&lt;/style&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1004.1">Now, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1005.1">App.vue</span></strong><span class="koboSpan" id="kobo.1006.1">, import</span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.1007.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1008.1">BlogGallery</span></strong><span class="koboSpan" id="kobo.1009.1"> component</span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.1010.1"> into </span><strong class="source-inline"><span class="koboSpan" id="kobo.1011.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1012.1">script setup&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1013.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1014.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1015.1">
import BlogGallery from "./components/BlogGallery.vue";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1016.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1017.1">Render </span><strong class="source-inline"><span class="koboSpan" id="kobo.1018.1">BlogGallery</span></strong><span class="koboSpan" id="kobo.1019.1"> in</span><a id="_idIndexMarker599"/><span class="koboSpan" id="kobo.1020.1"> the</span><a id="_idIndexMarker600"/> <span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1021.1">template</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1"> section:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1023.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1024.1">
  &lt;BlogGallery /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1025.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1026.1">Finally, run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1027.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1028.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1029.1">Go to the browser. </span><span class="koboSpan" id="kobo.1029.2">You will see the list displayed and a search box with an empty value, as in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1030.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer150">
<span class="koboSpan" id="kobo.1031.1"><img alt="Figure 5.10 – How BlogGallery looks in the browser" src="image/B18645_05_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1032.1">Figure 5.10 – How BlogGallery looks in the browser</span></p>
<ol>
<li value="18"><span class="koboSpan" id="kobo.1033.1">When typing</span><a id="_idIndexMarker601"/><span class="koboSpan" id="kobo.1034.1"> in a search term, the application will</span><a id="_idIndexMarker602"/><span class="koboSpan" id="kobo.1035.1"> display the filtered</span><a id="_idIndexMarker603"/><span class="koboSpan" id="kobo.1036.1"> list accordingly, as</span><a id="_idIndexMarker604"/><span class="koboSpan" id="kobo.1037.1"> shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1038.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer151">
<span class="koboSpan" id="kobo.1039.1"><img alt="Figure 5.11 – Only filtered blogs are displayed according to the user’s input" src="image/B18645_05_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1040.1">Figure 5.11 – Only filtered blogs are displayed according to the user’s input</span></p>
<p><span class="koboSpan" id="kobo.1041.1">With the preceding exercise, you have learned how to define reactive data for a component using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1042.1">ref()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1043.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1044.1">reactive()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1045.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1046.1">In theory, you can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1047.1">ref()</span></strong><span class="koboSpan" id="kobo.1048.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1049.1">reactive()</span></strong><span class="koboSpan" id="kobo.1050.1"> together to create</span><a id="_idIndexMarker605"/><span class="koboSpan" id="kobo.1051.1"> new reactive data from other</span><a id="_idIndexMarker606"/><span class="koboSpan" id="kobo.1052.1"> reactive data. </span><span class="koboSpan" id="kobo.1052.2">However, we strongly</span><a id="_idIndexMarker607"/><span class="koboSpan" id="kobo.1053.1"> recommend not doing</span><a id="_idIndexMarker608"/><span class="koboSpan" id="kobo.1054.1"> so due to the performance complications of the wrapping/unwrapping reactivity mechanism in Vue. </span><span class="koboSpan" id="kobo.1054.2">For this kind of scenario, you should use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1055.1">computed()</span></strong><span class="koboSpan" id="kobo.1056.1"> function, which we will </span><span class="No-Break"><span class="koboSpan" id="kobo.1057.1">explore next.</span></span></p>
<h2 id="_idParaDest-122"><a id="_idTextAnchor205"/><span class="koboSpan" id="kobo.1058.1">Computing a reactive state from another local state with computed()</span></h2>
<p><span class="koboSpan" id="kobo.1059.1">Like </span><strong class="source-inline"><span class="koboSpan" id="kobo.1060.1">computed()</span></strong><span class="koboSpan" id="kobo.1061.1"> in the Options API, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1062.1">computed()</span></strong><span class="koboSpan" id="kobo.1063.1"> is for creating</span><a id="_idIndexMarker609"/><span class="koboSpan" id="kobo.1064.1"> new reactive data</span><a id="_idIndexMarker610"/><span class="koboSpan" id="kobo.1065.1"> based on other reactive data for a component. </span><span class="koboSpan" id="kobo.1065.2">It accepts a function that returns the reactive data value as its first parameter. </span><span class="koboSpan" id="kobo.1065.3">It will return a read-only and cached </span><span class="No-Break"><span class="koboSpan" id="kobo.1066.1">reference object:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1067.1">
&lt;script setup&gt;
import { computed } from 'vue'
const computedData = computed(() =&gt; { //… })
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1068.1">Unlike reference objects</span><a id="_idIndexMarker611"/><span class="koboSpan" id="kobo.1069.1"> returned from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1070.1">reactive()</span></strong><span class="koboSpan" id="kobo.1071.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1072.1">ref()</span></strong><span class="koboSpan" id="kobo.1073.1">, we can’t directly</span><a id="_idIndexMarker612"/><span class="koboSpan" id="kobo.1074.1"> reassign their value. </span><span class="koboSpan" id="kobo.1074.2">In the following example, we will compute a filtered version of a given </span><strong class="source-inline"><span class="koboSpan" id="kobo.1075.1">books</span></strong><span class="koboSpan" id="kobo.1076.1"> array using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1077.1">computed()</span></strong><span class="koboSpan" id="kobo.1078.1">, according to the matching </span><span class="No-Break"><span class="koboSpan" id="kobo.1079.1">term, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1080.1">vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1081.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1082.1">
import { computed, reactive, ref } from 'vue';
const books = reactive([{
    title: 'Vue 3',
    description: 'Vue 3 is awesome',
}, {
    title: 'Vue 2',
    description: 'Vue 2 is awesome',
}, {
    title: 'Pinia state management',
    description: 'Pinia is awesome',
}, {
    title: 'Vue Router',
    description: 'Vue Router is awesome',
}, {
    title: 'Testing with Playwright',
    description: 'Playwright is awesome',
}, {
    title: 'Testing with Cypress',
    description: 'Cypress is awesome',
}]);
const searchTerm = ref('vue')
const filteredBooks = computed(
    () =&gt; books.filter(book =&gt; book.title.toLowerCase()
      .includes(searchTerm.value))
);</span></pre>
<p><span class="koboSpan" id="kobo.1083.1">And in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1084.1">template</span></strong><span class="koboSpan" id="kobo.1085.1">, we will</span><a id="_idIndexMarker613"/><span class="koboSpan" id="kobo.1086.1"> display </span><strong class="source-inline"><span class="koboSpan" id="kobo.1087.1">filteredBooks</span></strong><span class="koboSpan" id="kobo.1088.1"> using</span><a id="_idIndexMarker614"/><span class="koboSpan" id="kobo.1089.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.1090.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1091.1">
&lt;ul&gt;
        &lt;li v-for="(book, index) in filteredBooks"
          :key="index"&gt;
            &lt;article&gt;
                &lt;h3&gt;{{ book.title }}&lt;/h3&gt;
                &lt;p&gt;{{ book.description }}&lt;/p&gt;
            &lt;/article&gt;
        &lt;/li&gt;
    &lt;/ul&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1092.1">In the browser, you will see only three books displayed as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1093.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer152">
<span class="koboSpan" id="kobo.1094.1"><img alt="Figure 5.12 – List of books filtered by the vue term" src="image/B18645_05_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1095.1">Figure 5.12 – List of books filtered by the vue term</span></p>
<p><span class="koboSpan" id="kobo.1096.1">Whenever there</span><a id="_idIndexMarker615"/><span class="koboSpan" id="kobo.1097.1"> is any change to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1098.1">books</span></strong><span class="koboSpan" id="kobo.1099.1"> list or the search</span><a id="_idIndexMarker616"/><span class="koboSpan" id="kobo.1100.1"> term used for filtering, Vue automatically updates and caches the value calculated for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1101.1">filteredBooks</span></strong><span class="koboSpan" id="kobo.1102.1"> for display accordingly. </span><span class="koboSpan" id="kobo.1102.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.1103.1">Vue</span></strong><span class="koboSpan" id="kobo.1104.1"> tab of the browser’s Devtools, you can see </span><strong class="source-inline"><span class="koboSpan" id="kobo.1105.1">filteredBooks</span></strong><span class="koboSpan" id="kobo.1106.1"> displayed as part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1107.1">setup</span></strong><span class="koboSpan" id="kobo.1108.1"> section, with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1109.1">Computed</span></strong><span class="koboSpan" id="kobo.1110.1"> text indicator as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1111.1">Figure 5</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1112.1">.12</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1113.1">:</span></span></p>
<p class="IMG---Figure"><span class="koboSpan" id="kobo.1114.1"><img alt="Figure 5.13 – How filteredBooks looks in the Vue tab" src="image/B18645_05_13.png"/></span></p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1115.1">Figure 5.13 – How filteredBooks looks in the Vue tab</span></p>
<p><span class="koboSpan" id="kobo.1116.1">Generally, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1117.1">computed()</span></strong><span class="koboSpan" id="kobo.1118.1"> works in the same way as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1119.1">compute</span></strong><span class="koboSpan" id="kobo.1120.1"> properties in the Options API (</span><a href="B18645_02.xhtml#_idTextAnchor074"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1121.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.1122.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1123.1">Working with Data</span></em><span class="koboSpan" id="kobo.1124.1">). </span><span class="koboSpan" id="kobo.1124.2">Computed data is a valuable Vue feature that allows developers to create reusable and readable code. </span><span class="koboSpan" id="kobo.1124.3">You can also make the computed data writable by passing an object with a setter and getter to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">computed()</span></strong><span class="koboSpan" id="kobo.1126.1"> instead of a function. </span><span class="koboSpan" id="kobo.1126.2">However, we do not recommend</span><a id="_idIndexMarker617"/><span class="koboSpan" id="kobo.1127.1"> doing so as general good</span><a id="_idIndexMarker618"/> <span class="No-Break"><span class="koboSpan" id="kobo.1128.1">Vue practice.</span></span></p>
<p><span class="koboSpan" id="kobo.1129.1">Next, we will practice implementing complex computed data for a Vue component </span><span class="No-Break"><span class="koboSpan" id="kobo.1130.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1131.1">computed()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1132.1">.</span></span></p>
<h2 id="_idParaDest-123"><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.1133.1">Exercise 5.04 – implementing computed data with computed()</span></h2>
<p><span class="koboSpan" id="kobo.1134.1">In this exercise, you will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1135.1">computed()</span></strong><span class="koboSpan" id="kobo.1136.1"> to define the complex</span><a id="_idIndexMarker619"/><span class="koboSpan" id="kobo.1137.1"> reactive data based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.1138.1">existing one.</span></span></p>
<p><span class="koboSpan" id="kobo.1139.1">To access the code for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.1140.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.04"><span class="No-Break"><span class="koboSpan" id="kobo.1141.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.04</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1142.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1143.1">We are going to implement a component that receives the user’s first name and last name and accepts multi-lingual input and displays the user’s full name and the number of languages received accordingly by performing the </span><span class="No-Break"><span class="koboSpan" id="kobo.1144.1">following steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1145.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1146.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.1147.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1148.1">Chapter05/Exercise5.04</span></strong><span class="koboSpan" id="kobo.1149.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.1150.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1151.1">&gt; cd Chapter05/Exercise5.04/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1152.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1153.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1154.1">code .</span></strong><span class="koboSpan" id="kobo.1155.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.1156.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.1157.1">Let’s create a new Vue component called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1158.1">UserInput</span></strong><span class="koboSpan" id="kobo.1159.1"> by adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1160.1">UserInput.vue</span></strong><span class="koboSpan" id="kobo.1161.1"> file to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1162.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1163.1">src/components/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1164.1"> folder.</span></span></li>
<li><span class="koboSpan" id="kobo.1165.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.1166.1">UserInput.vue</span></strong><span class="koboSpan" id="kobo.1167.1"> and let create the code block structure for the Vue component, </span><span class="No-Break"><span class="koboSpan" id="kobo.1168.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1169.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1170.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1171.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1172.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1173.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1174.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1175.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.1176.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.1177.1">, create an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1178.1">input</span></strong><span class="koboSpan" id="kobo.1179.1"> field </span><a id="_idIndexMarker620"/><span class="koboSpan" id="kobo.1180.1">for the first name, and use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1181.1">v-model</span></strong><span class="koboSpan" id="kobo.1182.1"> to bind </span><strong class="source-inline"><span class="koboSpan" id="kobo.1183.1">firstName</span></strong><span class="koboSpan" id="kobo.1184.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.1185.1">this field:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1186.1">
&lt;input v-model="firstName" placeholder="First name" /&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1187.1">Create a second input field for the last name, and use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">v-model</span></strong><span class="koboSpan" id="kobo.1189.1"> to bind the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1190.1">lastName</span></strong><span class="koboSpan" id="kobo.1191.1"> data prop to </span><span class="No-Break"><span class="koboSpan" id="kobo.1192.1">this field:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1193.1">
&lt;input v-model="lastName" placeholder="Last name" /&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1194.1">Create another input field for languages, only we will bind the </span><em class="italic"><span class="koboSpan" id="kobo.1195.1">Enter keyup</span></em><span class="koboSpan" id="kobo.1196.1"> event to a method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1197.1">addToLanguageList</span></strong><span class="koboSpan" id="kobo.1198.1"> this time, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1199.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1200.1">
&lt;input</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1201.1">
  placeholder="Add a language"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1202.1">
  @keyup.enter="addToLanguageList" /&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1203.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.1204.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.1205.1">, define </span><strong class="source-inline"><span class="koboSpan" id="kobo.1206.1">lastName</span></strong><span class="koboSpan" id="kobo.1207.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1208.1">firstName</span></strong><span class="koboSpan" id="kobo.1209.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1210.1">languages</span></strong><span class="koboSpan" id="kobo.1211.1"> as reactive using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1212.1">ref()</span></strong><span class="koboSpan" id="kobo.1213.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1214.1">reactive()</span></strong><span class="koboSpan" id="kobo.1215.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1216.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1217.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1218.1">
import { ref, reactive } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1219.1">
const firstName = ref('');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1220.1">
const lastName = ref('');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1221.1">
const languages = reactive([]);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1222.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1223.1">Then, declare the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1224.1">addToLanguageList</span></strong><span class="koboSpan" id="kobo.1225.1"> method, which receives</span><a id="_idIndexMarker621"/><span class="koboSpan" id="kobo.1226.1"> an event and adds the event target’s value to the language list if it is </span><span class="No-Break"><span class="koboSpan" id="kobo.1227.1">not empty:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1228.1">
const addToLanguageList = (event) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1229.1">
  if (!event.target.value) return;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1230.1">
  languages.push(event.target.value);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1231.1">
  event.target.value = '';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1232.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.1233.1">Import </span><strong class="source-inline"><span class="koboSpan" id="kobo.1234.1">computed()</span></strong><span class="koboSpan" id="kobo.1235.1"> from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1236.1">vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1237.1"> package:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1238.1">
import { ref, reactive, computed } from 'vue';</span></pre></li>
<li><span class="koboSpan" id="kobo.1239.1">Create a computed data variable </span><span class="No-Break"><span class="koboSpan" id="kobo.1240.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1241.1">fullName</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1242.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1243.1">
const fullName = computed(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1244.1">
  ()=&gt; '${firstName.value} ${lastName.value}'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1245.1">
);</span></pre></li>
<li><span class="koboSpan" id="kobo.1246.1">Then, create another computed variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1247.1">numberOfLanguages</span></strong><span class="koboSpan" id="kobo.1248.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1249.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1250.1">
const numberOfLanguages = computed(() =&gt; languages.length);</span></pre></li>
<li><span class="koboSpan" id="kobo.1251.1">Underneath your </span><strong class="source-inline"><span class="koboSpan" id="kobo.1252.1">input</span></strong><span class="koboSpan" id="kobo.1253.1"> fields, output the computed data using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1254.1">h3</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1255.1"> tag:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1256.1">
&lt;h3 class="output"&gt;{{ fullName }}&lt;/h3&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1257.1">Add another </span><strong class="source-inline"><span class="koboSpan" id="kobo.1258.1">&lt;p&gt;</span></strong><span class="koboSpan" id="kobo.1259.1"> element, which will display the number of languages next to the list of languages received, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1260.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1261.1">
&lt;p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1262.1">
  Languages({{ numberOfLanguages }}):</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1263.1">
    {{languages.toString()}}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1264.1">
&lt;/p&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1265.1">We also add some basic scoped CSS styles</span><a id="_idIndexMarker622"/><span class="koboSpan" id="kobo.1266.1"> to make the </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">component prettier:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1268.1">
&lt;style&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1269.1">
.container {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1270.1">
  margin: 0 auto;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1271.1">
  padding: 30px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1272.1">
  max-width: 600px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1273.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1274.1">
input {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1275.1">
  padding: 10px 6px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1276.1">
  margin: 20px 10px 10px 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1277.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1278.1">
.output {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1279.1">
  font-size: 16px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1280.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1281.1">
&lt;/style&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1282.1">Finally, run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1283.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1284.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1285.1">Upon visiting </span><strong class="source-inline"><span class="koboSpan" id="kobo.1286.1">http://localhost:3000</span></strong><span class="koboSpan" id="kobo.1287.1"> in the browser and keying in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1288.1">Maya</span></strong><span class="koboSpan" id="kobo.1289.1"> for the first name, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1290.1">Shavin</span></strong><span class="koboSpan" id="kobo.1291.1"> for the last name, and adding several languages (JavaScript, C++, and so on), the page will generate the </span><span class="No-Break"><span class="koboSpan" id="kobo.1292.1">following output:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer154">
<span class="koboSpan" id="kobo.1293.1"><img alt="Figure 5.14 – Output of the computed data will show the full name and list of languages" src="image/B18645_05_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1294.1">Figure 5.14 – Output of the computed data will show the full name and list of languages</span></p>
<p><span class="koboSpan" id="kobo.1295.1">This exercise demonstrates how we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1296.1">computed()</span></strong><span class="koboSpan" id="kobo.1297.1"> to define combined reactive data properties such as the first name</span><a id="_idIndexMarker623"/><span class="koboSpan" id="kobo.1298.1"> and last name into a single output variable with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1299.1">fullName</span></strong><span class="koboSpan" id="kobo.1300.1"> and calculate the number of languages reactively, which can be reused within </span><span class="No-Break"><span class="koboSpan" id="kobo.1301.1">the component.</span></span></p>
<p><span class="koboSpan" id="kobo.1302.1">Next, we will learn about using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1303.1">watch()</span></strong><span class="koboSpan" id="kobo.1304.1"> function from the Composition API to define </span><span class="No-Break"><span class="koboSpan" id="kobo.1305.1">our watchers.</span></span></p>
<h2 id="_idParaDest-124"><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.1306.1">Using watchers with watch()</span></h2>
<p><span class="koboSpan" id="kobo.1307.1">In </span><a href="B18645_02.xhtml#_idTextAnchor074"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1308.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.1309.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1310.1">Working with Data</span></em><span class="koboSpan" id="kobo.1311.1">, we learned about watchers</span><a id="_idIndexMarker624"/><span class="koboSpan" id="kobo.1312.1"> and how to enable watchers on data properties with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1313.1">watch</span></strong><span class="koboSpan" id="kobo.1314.1"> property from the Options API. </span><span class="koboSpan" id="kobo.1314.2">The Composition API introduces the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1315.1">watch()</span></strong><span class="koboSpan" id="kobo.1316.1"> function with the same context and slightly different syntax, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1317.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1318.1">
const watcher = watch(source, handler, options)</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1319.1">watch()</span></strong><span class="koboSpan" id="kobo.1320.1"> accepts three parameters, including </span><span class="No-Break"><span class="koboSpan" id="kobo.1321.1">the following:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1322.1">source</span></strong><span class="koboSpan" id="kobo.1323.1"> as a single target data object or getter function (which returns the data’s value) to watch, or an array </span><span class="No-Break"><span class="koboSpan" id="kobo.1324.1">of targets.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1325.1">handler</span></strong><span class="koboSpan" id="kobo.1326.1"> is the function that Vue executes whenever </span><strong class="source-inline"><span class="koboSpan" id="kobo.1327.1">source</span></strong><span class="koboSpan" id="kobo.1328.1"> changes. </span><span class="koboSpan" id="kobo.1328.2">The handler function receives </span><strong class="source-inline"><span class="koboSpan" id="kobo.1329.1">newValue</span></strong><span class="koboSpan" id="kobo.1330.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1331.1">oldValue</span></strong><span class="koboSpan" id="kobo.1332.1"> as its source’s next value and previous value respectively. </span><span class="koboSpan" id="kobo.1332.2">It also accepts the third argument as its side-effect cleanup method. </span><span class="koboSpan" id="kobo.1332.3">Vue will trigger this clean-up function before the next handler is invoked – if </span><span class="No-Break"><span class="koboSpan" id="kobo.1333.1">any are.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1334.1">options</span></strong><span class="koboSpan" id="kobo.1335.1"> are the additional configurations for the watcher, including </span><span class="No-Break"><span class="koboSpan" id="kobo.1336.1">the following:</span></span><ul><li><span class="koboSpan" id="kobo.1337.1">Two </span><strong class="source-inline"><span class="koboSpan" id="kobo.1338.1">boolean</span></strong><span class="koboSpan" id="kobo.1339.1"> flags: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1340.1">deep</span></strong><span class="koboSpan" id="kobo.1341.1"> (whether Vue should watch over the nested properties of the source) and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1342.1">immediate</span></strong><span class="koboSpan" id="kobo.1343.1"> (whether to invoke the handler immediately after the component </span><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">is mounted).</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1345.1">flush</span></strong><span class="koboSpan" id="kobo.1346.1"> as the execution</span><a id="_idIndexMarker625"/><span class="koboSpan" id="kobo.1347.1"> order for the handler (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1348.1">pre</span></strong><span class="koboSpan" id="kobo.1349.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1350.1">post</span></strong><span class="koboSpan" id="kobo.1351.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1352.1">sync</span></strong><span class="koboSpan" id="kobo.1353.1">). </span><span class="koboSpan" id="kobo.1353.2">By default, Vue executes the handler in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1354.1">pre</span></strong><span class="koboSpan" id="kobo.1355.1"> order (</span><span class="No-Break"><span class="koboSpan" id="kobo.1356.1">before updating).</span></span></li><li><span class="koboSpan" id="kobo.1357.1">Two debugging callbacks, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1358.1">onTrack</span></strong><span class="koboSpan" id="kobo.1359.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1360.1">onTrigger</span></strong><span class="koboSpan" id="kobo.1361.1">, for </span><span class="No-Break"><span class="koboSpan" id="kobo.1362.1">development mode.</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.1363.1">The following example demonstrates how we can add a watcher manually </span><span class="No-Break"><span class="koboSpan" id="kobo.1364.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1365.1">searchTerm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1366.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1367.1">
import { ref, watch } from 'vue';
const searchTerm = ref('');
const searchTermWatcher = watch(
  searchTerm,
  (newValue, oldValue) =&gt; console.log(
    `Search term changed from ${oldValue} to ${newValue}`
  )
);</span></pre>
<p><span class="koboSpan" id="kobo.1368.1">Vue will passively observe the changes in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1369.1">searchTerm</span></strong><span class="koboSpan" id="kobo.1370.1"> and invoke the handler of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1371.1">searchTermWatcher</span></strong><span class="koboSpan" id="kobo.1372.1"> accordingly. </span><span class="koboSpan" id="kobo.1372.2">In the browser’s console log, you will see the following records when changing the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1373.1">searchTerm</span></strong><span class="koboSpan" id="kobo.1374.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1375.1">input field:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer155">
<span class="koboSpan" id="kobo.1376.1"><img alt="Figure 5.15 – The output logs whenever searchTerm changes in value" src="image/B18645_05_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1377.1">Figure 5.15 – The output logs whenever searchTerm changes in value</span></p>
<p><span class="koboSpan" id="kobo.1378.1">Unlike the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1379.1">watch</span></strong><span class="koboSpan" id="kobo.1380.1"> property from the Options API, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1381.1">watch()</span></strong><span class="koboSpan" id="kobo.1382.1"> method returns a stopper function to stop</span><a id="_idIndexMarker626"/><span class="koboSpan" id="kobo.1383.1"> the watcher whenever you no longer need to observe the target data. </span><span class="koboSpan" id="kobo.1383.2">Also, in a scenario in which you explicitly wish to watch a nested data property, you can define the target source as a getter function that returns that specific data property. </span><span class="koboSpan" id="kobo.1383.3">For example, if you wanted to watch the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1384.1">description</span></strong><span class="koboSpan" id="kobo.1385.1"> property of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1386.1">book</span></strong><span class="koboSpan" id="kobo.1387.1"> data object, you would need the following code using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1388.1">watch</span></strong><span class="koboSpan" id="kobo.1389.1"> property from the </span><span class="No-Break"><span class="koboSpan" id="kobo.1390.1">Options API:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1391.1">
data() {
 return {
  book:{
    title: 'Vue 3',
    description: 'Vue 3 is awesome',
  }
 }
},
watch: {
  'book.description': (newValue, oldValue) =&gt; { /*…*/ }
}</span></pre>
<p><span class="koboSpan" id="kobo.1392.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.1393.1">watch()</span></strong><span class="koboSpan" id="kobo.1394.1">, you only need to set a getter that returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1395.1">book.description</span></strong><span class="koboSpan" id="kobo.1396.1"> instead, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1397.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1398.1">
const book = reactive({
    title: 'Vue 3',
    description: 'Vue 3 is awesome',
})
const bookWatcher = watch(
    () =&gt; book.description,
    (newValue, oldValue) =&gt; console.log(
      `Book's description changed from ${oldValue} to
        ${newValue}`
    )
);</span></pre>
<p><span class="koboSpan" id="kobo.1399.1">By specifying the exact target data that you want to observe, Vue will not trigger the watcher’s handler on the whole</span><a id="_idIndexMarker627"/><span class="koboSpan" id="kobo.1400.1"> data object, avoiding undesired </span><span class="No-Break"><span class="koboSpan" id="kobo.1401.1">performance overhead.</span></span></p>
<p><span class="koboSpan" id="kobo.1402.1">Now, let’s practice using a watcher in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1403.1">next exercise.</span></span></p>
<h2 id="_idParaDest-125"><a id="_idTextAnchor208"/><span class="koboSpan" id="kobo.1404.1">Exercise 5.05 – using watchers to set new values</span></h2>
<p><span class="koboSpan" id="kobo.1405.1">In this exercise, you will use watcher</span><a id="_idIndexMarker628"/><span class="koboSpan" id="kobo.1406.1"> arguments to watch for changes</span><a id="_idIndexMarker629"/><span class="koboSpan" id="kobo.1407.1"> to data properties, and then use this watcher to set variables via </span><span class="No-Break"><span class="koboSpan" id="kobo.1408.1">a method.</span></span></p>
<p><span class="koboSpan" id="kobo.1409.1">You can find the complete code for this exercise </span><span class="No-Break"><span class="koboSpan" id="kobo.1410.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.05"><span class="No-Break"><span class="koboSpan" id="kobo.1411.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.05</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1412.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1413.1">We create a Vue component that displays the shop watcher’s price before and after the discount, with an option to update the discount price, by following the </span><span class="No-Break"><span class="koboSpan" id="kobo.1414.1">given instructions:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1415.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1416.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.1417.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1418.1">Chapter05/Exercise5.05</span></strong><span class="koboSpan" id="kobo.1419.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.1420.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1421.1">&gt; cd Chapter05/Exercise5.05/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1422.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1423.1">Open the exercise</span><a id="_idIndexMarker630"/><span class="koboSpan" id="kobo.1424.1"> project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1425.1">code .</span></strong><span class="koboSpan" id="kobo.1426.1"> command</span><a id="_idIndexMarker631"/><span class="koboSpan" id="kobo.1427.1"> within the project directory), or your </span><span class="No-Break"><span class="koboSpan" id="kobo.1428.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.1429.1">Let’s create a new Vue component called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1430.1">PizzaItem</span></strong><span class="koboSpan" id="kobo.1431.1"> by adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1432.1">PizzaItem.vue</span></strong><span class="koboSpan" id="kobo.1433.1"> file to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1434.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1435.1">src/components/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1436.1"> folder.</span></span></li>
<li><span class="koboSpan" id="kobo.1437.1">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.1438.1">PizzaItem.vue</span></strong><span class="koboSpan" id="kobo.1439.1"> and let’s create the code block structure for the Vue component, </span><span class="No-Break"><span class="koboSpan" id="kobo.1440.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1441.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1442.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1443.1">
&lt;script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1444.1">
export default {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1445.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1446.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1447.1">Set up the document by adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.1448.1">discount</span></strong><span class="koboSpan" id="kobo.1449.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1450.1">pizza</span></strong><span class="koboSpan" id="kobo.1451.1">, and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1452.1">newPrice</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1453.1"> objects:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1454.1">
import { ref, reactive, watch } from "vue";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1455.1">
const discount = ref(5);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1456.1">
const pizza = reactive({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1457.1">
  name: "Pepperoni Pizza",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1458.1">
  price: 10,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1459.1">
});</span></pre></li>
<li><span class="koboSpan" id="kobo.1460.1">We want to listen for changes to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1461.1">discount</span></strong><span class="koboSpan" id="kobo.1462.1"> property by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1463.1">watch()</span></strong><span class="koboSpan" id="kobo.1464.1"> function imported from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1465.1">vue</span></strong><span class="koboSpan" id="kobo.1466.1"> package. </span><span class="koboSpan" id="kobo.1466.2">Upon </span><strong class="source-inline"><span class="koboSpan" id="kobo.1467.1">discount</span></strong><span class="koboSpan" id="kobo.1468.1"> changing, we manually recalculate the value for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1469.1">newPrice</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1470.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1471.1">
watch(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1472.1">
 discount,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1473.1">
  (newValue) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1474.1">
    newPrice.value = pizza.price - (pizza.price *</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1475.1">
      newValue)/ 100;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1476.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1477.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1478.1">
    immediate: true</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1479.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1480.1">
);</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1481.1">Notice that here, we set </span><strong class="source-inline"><span class="koboSpan" id="kobo.1482.1">immediate</span></strong><span class="koboSpan" id="kobo.1483.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1484.1">true</span></strong><span class="koboSpan" id="kobo.1485.1"> so that Vue triggers this handler immediately after mounting the component and updates </span><strong class="source-inline"><span class="koboSpan" id="kobo.1486.1">newPrice</span></strong><span class="koboSpan" id="kobo.1487.1"> with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1488.1">correct value.</span></span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.1489.1">Now let’s add a component</span><a id="_idIndexMarker632"/><span class="koboSpan" id="kobo.1490.1"> method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1491.1">updateDiscount</span></strong><span class="koboSpan" id="kobo.1492.1">. </span><span class="koboSpan" id="kobo.1492.2">Inside the</span><a id="_idIndexMarker633"/><span class="koboSpan" id="kobo.1493.1"> method, set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1494.1">oldDiscount</span></strong><span class="koboSpan" id="kobo.1495.1"> data prop to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1496.1">this.discount + </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1497.1">5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1498.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1499.1">
const updateDiscount = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1500.1">
  discount.value = discount.value + 5;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1501.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.1502.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1503.1">template</span></strong><span class="koboSpan" id="kobo.1504.1"> section, we will display </span><strong class="source-inline"><span class="koboSpan" id="kobo.1505.1">pizza.name</span></strong><span class="koboSpan" id="kobo.1506.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1507.1">discount</span></strong><span class="koboSpan" id="kobo.1508.1">, the old price, and the new price for the pizza after </span><strong class="source-inline"><span class="koboSpan" id="kobo.1509.1">discount</span></strong><span class="koboSpan" id="kobo.1510.1"> has been applied, </span><span class="No-Break"><span class="koboSpan" id="kobo.1511.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1512.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1513.1">
  &lt;div class="container"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1514.1">
    &lt;h1&gt;{{ pizza.name }}&lt;/h1&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1515.1">
    &lt;div class="campaign-wrapper"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1516.1">
      Monday Special: {{ discount }}% off!</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1517.1">
      &lt;strike&gt;Was ${{ pizza.price }}&lt;/strike&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1518.1">
      &lt;strong&gt; Now at ${{ newPrice }} ONLY&lt;/strong&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1519.1">
    &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1520.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1521.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1522.1">Then, bind the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1523.1">updateDiscount</span></strong><span class="koboSpan" id="kobo.1524.1"> method to a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1525.1">button</span></strong><span class="koboSpan" id="kobo.1526.1"> element </span><span class="No-Break"><span class="koboSpan" id="kobo.1527.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1528.1">@click</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1529.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1530.1">
&lt;button @click="updateDiscount" class="decrease-btn"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1531.1">
      Get a discount!</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1532.1">
&lt;/button&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1533.1">Whenever a user clicks</span><a id="_idIndexMarker634"/><span class="koboSpan" id="kobo.1534.1"> on the preceding button, Vue</span><a id="_idIndexMarker635"/><span class="koboSpan" id="kobo.1535.1"> will trigger </span><strong class="source-inline"><span class="koboSpan" id="kobo.1536.1">updateDiscount()</span></strong><span class="koboSpan" id="kobo.1537.1"> to increase the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1538.1">discount</span></strong><span class="koboSpan" id="kobo.1539.1"> value, hence invoking the handler to update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1540.1">newPrice</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1541.1">value accordingly.</span></span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.1542.1">Now, let’s add some CSS styling to make </span><span class="No-Break"><span class="koboSpan" id="kobo.1543.1">it pretty:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1544.1">
&lt;style scoped&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1545.1">
.container {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1546.1">
  margin: 0 auto;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1547.1">
  padding: 30px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1548.1">
  max-width: 600px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1549.1">
  font-family: "Avenir", Helvetica, Arial, sans-serif;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1550.1">
  margin: 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1551.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1552.1">
.campaign-wrapper {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1553.1">
  margin: 20px 0;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1554.1">
  display: flex;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1555.1">
  flex-direction: column;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1556.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1557.1">
button {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1558.1">
  display: inline-block;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1559.1">
  border-radius: 10px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1560.1">
  font-size: 14px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1561.1">
  color: white;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1562.1">
  padding: 10px 20px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1563.1">
  text-decoration: none;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1564.1">
  margin-inline-end: 10px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1565.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1566.1">
.decrease-btn {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1567.1">
  background: rgb(241, 34, 34);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1568.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1569.1">
&lt;/style&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1570.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.1571.1">App.vue</span></strong><span class="koboSpan" id="kobo.1572.1">, import the component</span><a id="_idIndexMarker636"/><span class="koboSpan" id="kobo.1573.1"> into </span><strong class="source-inline"><span class="koboSpan" id="kobo.1574.1">&lt;setup script&gt;</span></strong><span class="koboSpan" id="kobo.1575.1"> and render</span><a id="_idIndexMarker637"/><span class="koboSpan" id="kobo.1576.1"> it in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1577.1">template</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1578.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1579.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1580.1">
  &lt;PizzaItem /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1581.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1582.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1583.1">
import PizzaItem from "./components/PizzaItem.vue";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1584.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1585.1">Finally, run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1586.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1587.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1588.1">Upon visiting </span><strong class="source-inline"><span class="koboSpan" id="kobo.1589.1">http://localhost:3000</span></strong><span class="koboSpan" id="kobo.1590.1"> in the browser, the output</span><a id="_idIndexMarker638"/><span class="koboSpan" id="kobo.1591.1"> of the preceding command </span><a id="_idIndexMarker639"/><span class="koboSpan" id="kobo.1592.1">will be </span><span class="No-Break"><span class="koboSpan" id="kobo.1593.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer156">
<span class="koboSpan" id="kobo.1594.1"><img alt="Figure 5.16 – An example output of the pizza sales" src="image/B18645_05_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1595.1">Figure 5.16 – An example output of the pizza sales</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.1596.1">Now, let’s add a watcher explicitly for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1597.1">pizza.price</span></strong><span class="koboSpan" id="kobo.1598.1"> field, and perform the same recalculation of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1599.1">newPrice</span></strong><span class="koboSpan" id="kobo.1600.1">, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1601.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1602.1">
watch(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1603.1">
  () =&gt; pizza.price,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1604.1">
  (newValue) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1605.1">
    newPrice.value = newValue - (newValue *</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1606.1">
      discount.value) / 100;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1607.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1608.1">
);</span></pre></li>
<li><span class="koboSpan" id="kobo.1609.1">We also add another method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1610.1">increasePrice()</span></strong><span class="koboSpan" id="kobo.1611.1"> to increase the pizza’s price </span><span class="No-Break"><span class="koboSpan" id="kobo.1612.1">whenever triggered:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1613.1">
const increasePrice = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1614.1">
  pizza.price = pizza.price + 5;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1615.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.1616.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1617.1">template</span></strong><span class="koboSpan" id="kobo.1618.1"> section, we add another</span><a id="_idIndexMarker640"/><span class="koboSpan" id="kobo.1619.1"> button to allow users to click to increase</span><a id="_idIndexMarker641"/><span class="koboSpan" id="kobo.1620.1"> the pizza’s price, hence updating the new discounted </span><span class="No-Break"><span class="koboSpan" id="kobo.1621.1">price accordingly:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1622.1">
&lt;button @click="increasePrice" class="increase-btn"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1623.1">
  Increase the price!</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1624.1">
&lt;/button&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1625.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1626.1">style</span></strong><span class="koboSpan" id="kobo.1627.1"> section, we also add a different </span><strong class="source-inline"><span class="koboSpan" id="kobo.1628.1">background</span></strong><span class="koboSpan" id="kobo.1629.1"> color for the </span><span class="No-Break"><span class="koboSpan" id="kobo.1630.1">preceding button:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1631.1">
.increase-btn {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1632.1">
  background: rgb(34, 100, 241);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1633.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.1634.1">Navigate back to the main browser’s screen, and now you will see the updated layout with an additional button, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1635.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer157">
<span class="koboSpan" id="kobo.1636.1"><img alt="Figure 5.17 – Pizza sales with the option to modify the price" src="image/B18645_05_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1637.1">Figure 5.17 – Pizza sales with the option to modify the price</span></p>
<ol>
<li value="19"><span class="koboSpan" id="kobo.1638.1">Upon clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.1639.1">Increase the price!</span></strong><span class="koboSpan" id="kobo.1640.1"> button, you will see the price and the discounted price change, as in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1641.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer158">
<span class="koboSpan" id="kobo.1642.1"><img alt="Figure 5.18 – The prices changed after clicking on the Increase the price! button" src="image/B18645_05_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1643.1">Figure 5.18 – The prices changed after clicking on the Increase the price! </span><span class="koboSpan" id="kobo.1643.2">button</span></p>
<p><span class="koboSpan" id="kobo.1644.1">In this exercise, we explored</span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.1645.1"> how we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1646.1">watch()</span></strong><span class="koboSpan" id="kobo.1647.1"> within </span><strong class="source-inline"><span class="koboSpan" id="kobo.1648.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.1649.1"> to dynamically observe</span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.1650.1"> and manipulate data when changes </span><span class="No-Break"><span class="koboSpan" id="kobo.1651.1">are applied.</span></span></p>
<p><span class="koboSpan" id="kobo.1652.1">The next section will explore how we can use the lifecycle functions from the Composition API to set up the </span><span class="No-Break"><span class="koboSpan" id="kobo.1653.1">lifecycle hooks.</span></span></p>
<h1 id="_idParaDest-126"><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.1654.1">Understanding composable lifecycle functions</span></h1>
<p><span class="koboSpan" id="kobo.1655.1">In </span><a href="B18645_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1656.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.1657.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1658.1">Starting</span></em><em class="italic"><span class="koboSpan" id="kobo.1659.1"> Your First Vue Project</span></em><span class="koboSpan" id="kobo.1660.1">, we learned</span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.1661.1"> about the component’s lifecycle and its available hooks in Vue’s Options API. </span><span class="koboSpan" id="kobo.1661.2">In the Composition API, these lifecycle hooks are now available as standalone functions and need to be imported from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1662.1">vue</span></strong><span class="koboSpan" id="kobo.1663.1"> package </span><span class="No-Break"><span class="koboSpan" id="kobo.1664.1">before use.</span></span></p>
<p><span class="koboSpan" id="kobo.1665.1">Generally, the lifecycle functions in the Composition API are similar to the ones from the Options API, with a prefix of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1666.1">on</span></strong><span class="koboSpan" id="kobo.1667.1">. </span><span class="koboSpan" id="kobo.1667.2">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1668.1">beforeMount()</span></strong><span class="koboSpan" id="kobo.1669.1"> in the Options API is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1670.1">onBeforeMount()</span></strong><span class="koboSpan" id="kobo.1671.1"> in the Composition API, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1672.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.1673.1">The following is the list of available lifecycle functions from the Composition API, ready to use within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1674.1">setup()</span></strong><span class="koboSpan" id="kobo.1675.1"> method or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1676.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1677.1">script setup&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1678.1">:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1679.1">onBeforeMount()</span></strong><span class="koboSpan" id="kobo.1680.1">: Before the first render of </span><span class="No-Break"><span class="koboSpan" id="kobo.1681.1">the component</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1682.1">onMounted()</span></strong><span class="koboSpan" id="kobo.1683.1">: After rendering and mounting the component to </span><span class="No-Break"><span class="koboSpan" id="kobo.1684.1">the DOM</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1685.1">onBeforeUpdate()</span></strong><span class="koboSpan" id="kobo.1686.1">: After starting the component’s update process, but before the actual rendering of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1687.1">updated component</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1688.1">onUpdated()</span></strong><span class="koboSpan" id="kobo.1689.1">: After rendering the </span><span class="No-Break"><span class="koboSpan" id="kobo.1690.1">updated component</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1691.1">onBeforeMount()</span></strong><span class="koboSpan" id="kobo.1692.1">: Before the process of unmounting the </span><span class="No-Break"><span class="koboSpan" id="kobo.1693.1">component starts</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1694.1">onUnmounted()</span></strong><span class="koboSpan" id="kobo.1695.1">: After the component’s instance has </span><span class="No-Break"><span class="koboSpan" id="kobo.1696.1">been destroyed</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1697.1">Since we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1698.1">setup()</span></strong><span class="koboSpan" id="kobo.1699.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1700.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.1701.1"> to define the component’s data and internal logic in combination with other Composition API, there is no need for equivalent versions of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1702.1">created()</span></strong><span class="koboSpan" id="kobo.1703.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1704.1">beforeCreate()</span></strong><span class="koboSpan" id="kobo.1705.1"> from the </span><span class="No-Break"><span class="koboSpan" id="kobo.1706.1">Options API.</span></span></p>
<p><span class="koboSpan" id="kobo.1707.1">All the lifecycle methods from the Composition API receive a callback function as their arguments. </span><span class="koboSpan" id="kobo.1707.2">Vue</span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.1708.1"> will invoke this callback function </span><span class="No-Break"><span class="koboSpan" id="kobo.1709.1">whenever applied.</span></span></p>
<p><span class="koboSpan" id="kobo.1710.1">Let’s do an exercise to learn how to use these lifecycle methods in your </span><span class="No-Break"><span class="koboSpan" id="kobo.1711.1">Vue component.</span></span></p>
<h2 id="_idParaDest-127"><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.1712.1">Exercise 5.06 – using the lifecycle functions to control the data flow</span></h2>
<p><span class="koboSpan" id="kobo.1713.1">In this exercise, we will learn</span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.1714.1"> how and when to use Vue’s lifecycle</span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.1715.1"> hooks, and when they are triggered by using JavaScript alerts. </span><span class="koboSpan" id="kobo.1715.2">By the end of the exercise, we will understand and be able to use multiple lifecycle functions from the </span><span class="No-Break"><span class="koboSpan" id="kobo.1716.1">Composition API.</span></span></p>
<p><span class="koboSpan" id="kobo.1717.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.1718.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.06"><span class="No-Break"><span class="koboSpan" id="kobo.1719.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.06</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1720.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1721.1">We will build a list of different elements, demonstrating how to add different quantities to a cart. </span><span class="koboSpan" id="kobo.1721.2">Then, we will display the updated cart’s total value in a currency format by performing </span><span class="No-Break"><span class="koboSpan" id="kobo.1722.1">the following:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1723.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1724.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.1725.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1726.1">Chapter05/Exercise5.06</span></strong><span class="koboSpan" id="kobo.1727.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.1728.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1729.1">&gt; cd Chapter05/Exercise5.06/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1730.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1731.1">Run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.1732.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1733.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.1734.1">Open the exercise project</span><a id="_idIndexMarker648"/><span class="koboSpan" id="kobo.1735.1"> in VS</span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.1736.1"> Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1737.1">code .</span></strong><span class="koboSpan" id="kobo.1738.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.1739.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.1740.1">Create a new Vue component file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1741.1">Exercise5-06.vue</span></strong><span class="koboSpan" id="kobo.1742.1"> under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1743.1">src/components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1744.1"> directory.</span></span></li>
<li><span class="koboSpan" id="kobo.1745.1">Inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.1746.1">Exercise5-06.vue</span></strong><span class="koboSpan" id="kobo.1747.1">, we will start by creating an array of data to iterate through in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1748.1">list</span></strong><span class="koboSpan" id="kobo.1749.1"> element, set the key to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1750.1">n</span></strong><span class="koboSpan" id="kobo.1751.1">, and output the value, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1752.1">{{item}}</span></strong><span class="koboSpan" id="kobo.1753.1">, inside of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1754.1">&lt;li&gt;</span></strong><span class="koboSpan" id="kobo.1755.1"> element using </span><span class="No-Break"><span class="koboSpan" id="kobo.1756.1">curly braces:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1757.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1758.1">
  &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1759.1">
    &lt;h1&gt;Vue Lifecycle hooks&lt;/h1&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1760.1">
    &lt;ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1761.1">
     &lt;li v-for="(item, n) in list" :key="n"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1762.1">
        {{ item }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1763.1">
     &lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1764.1">
    &lt;/ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1765.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1766.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1767.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1768.1">
import { ref } from "vue";</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1769.1">
const list = ref([</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1770.1">
  "Apex Legends",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1771.1">
  "A Plague Tale: Innocence",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1772.1">
  "ART SQOOL",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1773.1">
  "Baba Is You",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1774.1">
  "Devil May Cry 5",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1775.1">
  "The Division 2",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1776.1">
  "Hypnospace Outlaw",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1777.1">
  "Katana ZERO",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1778.1">
]);</span></pre></li>
<li><span class="koboSpan" id="kobo.1779.1">Import all the lifecycle functions</span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.1780.1"> from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1781.1">vue</span></strong><span class="koboSpan" id="kobo.1782.1"> package, as shown</span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.1783.1"> in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1784.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1785.1">
import {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1786.1">
  ref,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1787.1">
  onMounted,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1788.1">
  onBeforeMount,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1789.1">
  onUpdated,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1790.1">
  onBeforeUpdate,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1791.1">
  onUnmounted,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1792.1">
  onBeforeUnmount,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1793.1">
} from "vue";</span></pre></li>
<li><span class="koboSpan" id="kobo.1794.1">Define the callbacks for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1795.1">onBeforeMount()</span></strong><span class="koboSpan" id="kobo.1796.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1797.1">onMounted()</span></strong><span class="koboSpan" id="kobo.1798.1"> to trigger an alert displaying the </span><span class="No-Break"><span class="koboSpan" id="kobo.1799.1">relevant message:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1800.1">
onMounted(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1801.1">
  alert("mounted: DOM ready to use");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1802.1">
});</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1803.1">
onBeforeMount(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1804.1">
  alert("beforeMount: DOM not ready to use");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1805.1">
});</span></pre></li>
<li><span class="koboSpan" id="kobo.1806.1">When you refresh</span><a id="_idIndexMarker652"/><span class="koboSpan" id="kobo.1807.1"> your browser, you should also see these alerts</span><a id="_idIndexMarker653"/><span class="koboSpan" id="kobo.1808.1"> before you see your list load on </span><span class="No-Break"><span class="koboSpan" id="kobo.1809.1">the page:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer159">
<span class="koboSpan" id="kobo.1810.1"><img alt="Figure 5.19 – Observing the onBeforeMount() hook alert" src="image/B18645_05_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1811.1">Figure 5.19 – Observing the onBeforeMount() hook alert</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.1812.1">The following screenshot displays the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1813.1">onMounted()</span></strong><span class="koboSpan" id="kobo.1814.1"> hook alert after the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1815.1">onBeforeMount()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1816.1"> hook:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer160">
<span class="koboSpan" id="kobo.1817.1"><img alt="Figure 5.20 – Observing the onMounted() hook alert after the onBeforeMount() hook" src="image/B18645_05_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1818.1">Figure 5.20 – Observing the onMounted() hook alert after the onBeforeMount() hook</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.1819.1">Add a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1820.1">button</span></strong><span class="koboSpan" id="kobo.1821.1"> element</span><a id="_idIndexMarker654"/><span class="koboSpan" id="kobo.1822.1"> inside your </span><strong class="source-inline"><span class="koboSpan" id="kobo.1823.1">&lt;li&gt;</span></strong><span class="koboSpan" id="kobo.1824.1"> element that renders</span><a id="_idIndexMarker655"/><span class="koboSpan" id="kobo.1825.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1826.1">item</span></strong><span class="koboSpan" id="kobo.1827.1"> output. </span><span class="koboSpan" id="kobo.1827.2">Use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1828.1">@click</span></strong><span class="koboSpan" id="kobo.1829.1"> directive to bind this button to a method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1830.1">deleteItem</span></strong><span class="koboSpan" id="kobo.1831.1"> and pass the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1832.1">item</span></strong><span class="koboSpan" id="kobo.1833.1"> value as </span><span class="No-Break"><span class="koboSpan" id="kobo.1834.1">an argument:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1835.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1836.1">
  &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1837.1">
    &lt;h1&gt;Vue Lifecycle hooks&lt;/h1&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1838.1">
    &lt;ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1839.1">
      &lt;li v-for="(item, n) in list" :key="n"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1840.1">
        {{ item }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1841.1">
        &lt;button @click="deleteItem(item)"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1842.1">
          Delete&lt;/button&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1843.1">
      &lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1844.1">
    &lt;/ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1845.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1846.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1847.1">Add a method called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1848.1">deleteItem</span></strong><span class="koboSpan" id="kobo.1849.1"> into a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1850.1">methods</span></strong><span class="koboSpan" id="kobo.1851.1"> object above your hooks to pass </span><strong class="source-inline"><span class="koboSpan" id="kobo.1852.1">value</span></strong><span class="koboSpan" id="kobo.1853.1"> as an argument and filter out items from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1854.1">list</span></strong><span class="koboSpan" id="kobo.1855.1"> array based on this value. </span><span class="koboSpan" id="kobo.1855.2">Then, replace the existing list with the </span><span class="No-Break"><span class="koboSpan" id="kobo.1856.1">new list:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1857.1">
const deleteItem = (value) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1858.1">
  list.value = list.value.filter((item) =&gt; item !==</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1859.1">
    value);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1860.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.1861.1">Add </span><strong class="source-inline"><span class="koboSpan" id="kobo.1862.1">onBeforeUpdate()</span></strong><span class="koboSpan" id="kobo.1863.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1864.1">onUpdated()</span></strong><span class="koboSpan" id="kobo.1865.1"> and set an alert </span><span class="No-Break"><span class="koboSpan" id="kobo.1866.1">inside them:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1867.1">
onUpdated(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1868.1">
  alert("updated: virtual DOM will update after you</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1869.1">
    click OK");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1870.1">
});</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1871.1">
onBeforeUpdate(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1872.1">
  alert(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1873.1">
    "beforeUpdate: we know an update is about to</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1874.1">
      happen, and have the data"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1875.1">
  );</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1876.1">
});</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1877.1">When you delete</span><a id="_idIndexMarker656"/><span class="koboSpan" id="kobo.1878.1"> a list item by clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.1879.1">Delete</span></strong><span class="koboSpan" id="kobo.1880.1"> button in your browser, you should</span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.1881.1"> see these alerts. </span><span class="koboSpan" id="kobo.1881.2">For example, when deleting the first item in the list, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1882.1">onBeforeUpdated()</span></strong><span class="koboSpan" id="kobo.1883.1"> will trigger </span><span class="No-Break"><span class="koboSpan" id="kobo.1884.1">the handler:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer161">
<span class="koboSpan" id="kobo.1885.1"><img alt="Figure 5.21 – onBeforeCreated is called first after clicking on any Delete button" src="image/B18645_05_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1886.1">Figure 5.21 – onBeforeCreated is called first after clicking on any Delete button</span></p>
<p><span class="koboSpan" id="kobo.1887.1">Then, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1888.1">onUpdated</span></strong><span class="koboSpan" id="kobo.1889.1"> is triggered as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1890.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer162">
<span class="koboSpan" id="kobo.1891.1"><img alt="Figure 5.22 – onUpdated is called when the Vue engine finishes updating the component" src="image/B18645_05_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1892.1">Figure 5.22 – onUpdated is called when the Vue engine finishes updating the component</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.1893.1">Continue adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.1894.1">onBeforeUnmount()</span></strong><span class="koboSpan" id="kobo.1895.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1896.1">onUnmounted()</span></strong><span class="koboSpan" id="kobo.1897.1"> to the component options</span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.1898.1"> as function properties. </span><span class="koboSpan" id="kobo.1898.2">Set an alert inside</span><a id="_idIndexMarker659"/><span class="koboSpan" id="kobo.1899.1"> these hooks so that you can see when they </span><span class="No-Break"><span class="koboSpan" id="kobo.1900.1">are triggered:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1901.1">
onUnmounted(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1902.1">
  alert("unmounted: this component has been</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1903.1">
    destroyed");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1904.1">
});</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1905.1">
onBeforeUnmount(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1906.1">
  alert("beforeUnmount: about to blow up this</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1907.1">
    component");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1908.1">
});</span></pre></li>
<li><span class="koboSpan" id="kobo.1909.1">Add a new string to your </span><strong class="source-inline"><span class="koboSpan" id="kobo.1910.1">list</span></strong><span class="koboSpan" id="kobo.1911.1"> array – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1912.1">testing </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1913.1">unmounted hooks</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1914.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1915.1">
const list = ref([</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1916.1">
  "Apex Legends",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1917.1">
  "A Plague Tale: Innocence",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1918.1">
  "ART SQOOL",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1919.1">
  "Baba Is You",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1920.1">
  "Devil May Cry 5",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1921.1">
  "The Division 2",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1922.1">
  "Hypnospace Outlaw",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1923.1">
  "Katana ZERO",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1924.1">
  'testing unmounted hooks',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1925.1">
]);</span></pre></li>
<li><span class="koboSpan" id="kobo.1926.1">You should see the unmount</span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.1927.1"> alerts according</span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.1928.1"> to this order: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1929.1">onBeforeUnmount</span></strong><span class="koboSpan" id="kobo.1930.1"> – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1931.1">onBeforeMount</span></strong><span class="koboSpan" id="kobo.1932.1"> – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1933.1">onUnmounted</span></strong><span class="koboSpan" id="kobo.1934.1"> – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1935.1">onMounted</span></strong><span class="koboSpan" id="kobo.1936.1">. </span><span class="koboSpan" id="kobo.1936.2">An example output screen displaying an alert for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1937.1">onBeforeUnmount</span></strong><span class="koboSpan" id="kobo.1938.1"> is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1939.1">following figure</span></span><span class="No-Break"><span class="koboSpan" id="kobo.1940.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer163">
<span class="koboSpan" id="kobo.1941.1"><img alt="Figure 5.23 – Alert displaying when a component is about to be unmounted" src="image/B18645_05_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1942.1">Figure 5.23 – Alert displaying when a component is about to be unmounted</span></p>
<p><span class="koboSpan" id="kobo.1943.1">Next, we will discuss how we can use the available methods from the Composition API and create our custom composable (or custom hook) to control the state of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1944.1">component dynamically.</span></span></p>
<h1 id="_idParaDest-128"><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.1945.1">Creating your composable (custom hook)</span></h1>
<p><span class="koboSpan" id="kobo.1946.1">In many scenarios, we want</span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.1947.1"> to group some components’ logic into reusable code blocks for other components that share similar functionalities. </span><span class="koboSpan" id="kobo.1947.2">In Vue 2.x, we use mixins to achieve this goal. </span><span class="koboSpan" id="kobo.1947.3">However, mixins are not the best practical solution, and they can create code complexity due to the order of merging and invoking overlapping data and </span><span class="No-Break"><span class="koboSpan" id="kobo.1948.1">lifecycle hooks.</span></span></p>
<p><span class="koboSpan" id="kobo.1949.1">Starting from Vue 3.0, you can use the Composition API to divide the common data logic into small and isolated composables, using them to create a scoped data control in different components and return the created data if there is any. </span><span class="koboSpan" id="kobo.1949.2">A composable is a regular JavaScript function that uses Composition API methods and performs data state </span><span class="No-Break"><span class="koboSpan" id="kobo.1950.1">management internally.</span></span></p>
<p><span class="koboSpan" id="kobo.1951.1">To get started, we create a new JavaScript (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1952.1">.js</span></strong><span class="koboSpan" id="kobo.1953.1">) file, which exports a function acting as the composable. </span><span class="koboSpan" id="kobo.1953.2">In the following example, we create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1954.1">useMessages</span></strong><span class="koboSpan" id="kobo.1955.1"> composable, which returns a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1956.1">messages</span></strong><span class="koboSpan" id="kobo.1957.1"> and some methods to modify the </span><span class="No-Break"><span class="koboSpan" id="kobo.1958.1">messages accordingly:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1959.1">
// src/composables/useMessages.ts
import { ref } from 'vue'
export const useMessages = () =&gt; {
  const messages = ref([
   "Apex Legends",
   "A Plague Tale: Innocence",
   "ART SQOOL",
   "Baba Is You",
   "Devil May Cry 5",
   "The Division 2",
   "Hypnospace Outlaw",
   "Katana ZERO",
  ]);
  const deleteMessage = (value) =&gt; {
   messages.value = messages.value.filter((item) =&gt; item
     !== value);
  };
  const addMessage = (value) =&gt; {
   messages.value.push(value)
  }
  return { messages, deleteMessage, addMessage }
}</span></pre>
<p><span class="koboSpan" id="kobo.1960.1">To use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1961.1">useMessages()</span></strong><span class="koboSpan" id="kobo.1962.1"> in your component, you</span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.1963.1"> can import it into the component’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.1964.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.1965.1"> section, and retrieve the relevant data, </span><span class="No-Break"><span class="koboSpan" id="kobo.1966.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1967.1">
&lt;script setup&gt;
import { useMessages } from '@/composables/useMyComposable'
const { messages, deleteMessage, addMessage } = useMessages ()
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1968.1">Then, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1969.1">messages</span></strong><span class="koboSpan" id="kobo.1970.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1971.1">deleteMessage</span></strong><span class="koboSpan" id="kobo.1972.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1973.1">addMessage</span></strong><span class="koboSpan" id="kobo.1974.1"> returned from the composable in the component as its local data and methods, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1975.1">code block</span></span><span class="No-Break"><span class="koboSpan" id="kobo.1976.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1977.1">
&lt;template&gt;
  &lt;button @click="addMessage('test message')"&gt;
    Add new message
  &lt;/button&gt;
  &lt;ul&gt;
    &lt;li v-for="(message, n) in messages" :key="n"&gt;
      {{ message }}
      &lt;button @click="deleteMessage(message)"&gt;
        Delete&lt;/button&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1978.1">Since </span><strong class="source-inline"><span class="koboSpan" id="kobo.1979.1">messages</span></strong><span class="koboSpan" id="kobo.1980.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1981.1">deleteMessage</span></strong><span class="koboSpan" id="kobo.1982.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1983.1">addMessage</span></strong><span class="koboSpan" id="kobo.1984.1"> are declared within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1985.1">useMessages()</span></strong><span class="koboSpan" id="kobo.1986.1"> function, every execution of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1987.1">useMessages</span></strong><span class="koboSpan" id="kobo.1988.1"> returns different data instances, keeping the reactive data defined by the composable isolated and relevant only to the component that consumes it. </span><span class="koboSpan" id="kobo.1988.2">With composables, components share logic, not data. </span><span class="koboSpan" id="kobo.1988.3">You can also compose a new composable based on another composable, not only the </span><span class="No-Break"><span class="koboSpan" id="kobo.1989.1">Composition API.</span></span></p>
<p><span class="koboSpan" id="kobo.1990.1">That’s it – you have learned</span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.1991.1"> how to create a simple composable with the Composition API. </span><span class="koboSpan" id="kobo.1991.2">Next, let’s apply what we learned so far about the Composition API and create our </span><span class="No-Break"><span class="koboSpan" id="kobo.1992.1">first composable.</span></span></p>
<h2 id="_idParaDest-129"><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.1993.1">Exercise 5.07 – creating your first composable</span></h2>
<p><span class="koboSpan" id="kobo.1994.1">In this exercise, you will create a composable</span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.1995.1"> that will retrieve data from an external API, and return the data, the loading/error status of the request, and a search composable that we can reuse for </span><span class="No-Break"><span class="koboSpan" id="kobo.1996.1">different components.</span></span></p>
<p><span class="koboSpan" id="kobo.1997.1">You can find the complete code for this exercise </span><span class="No-Break"><span class="koboSpan" id="kobo.1998.1">on </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.07"><span class="No-Break"><span class="koboSpan" id="kobo.1999.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Exercise5.07</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.2000.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2001.1">We will create a composable</span><a id="_idIndexMarker666"/><span class="koboSpan" id="kobo.2002.1"> that fetches movies from an external source and another one that allows you to search through the list of movies by following the </span><span class="No-Break"><span class="koboSpan" id="kobo.2003.1">given instructions:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.2004.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.2005.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.2006.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2007.1">Chapter05/Exercise5.07</span></strong><span class="koboSpan" id="kobo.2008.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.2009.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2010.1">&gt; cd Chapter05/Exercise5.07/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2011.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.2012.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2013.1">code .</span></strong><span class="koboSpan" id="kobo.2014.1"> command within the project directory), or your </span><span class="No-Break"><span class="koboSpan" id="kobo.2015.1">preferred IDE.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.2016.1">Let’s create a new composable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.2017.1">useMovies</span></strong><span class="koboSpan" id="kobo.2018.1"> by adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.2019.1">useMovies.js</span></strong><span class="koboSpan" id="kobo.2020.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2021.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2022.1">src/composables</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2023.1"> folder.</span></span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.2024.1">Within </span><strong class="source-inline"><span class="koboSpan" id="kobo.2025.1">useMovies.js</span></strong><span class="koboSpan" id="kobo.2026.1">, we will add the following code to export the composable as a module for use in </span><span class="No-Break"><span class="koboSpan" id="kobo.2027.1">other files:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2028.1">
import { } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2029.1">
export const useMovies = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2030.1">
  return {};</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2031.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.2032.1">We define the reactive data for the composable, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2033.1">movies</span></strong><span class="koboSpan" id="kobo.2034.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2035.1">isLoading</span></strong><span class="koboSpan" id="kobo.2036.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2037.1">error</span></strong><span class="koboSpan" id="kobo.2038.1">, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2039.1">ref()</span></strong><span class="koboSpan" id="kobo.2040.1"> with the appropriate </span><span class="No-Break"><span class="koboSpan" id="kobo.2041.1">initial values:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2042.1">
import { ref } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2043.1">
export const useMovies = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2044.1">
  const movies = ref([]);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2045.1">
  const isLoading = ref(false);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2046.1">
  const error = ref(null);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2047.1">
  return {};</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2048.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.2049.1">Then, we will import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2050.1">onBeforeMount()</span></strong><span class="koboSpan" id="kobo.2051.1"> method and start fetching</span><a id="_idIndexMarker667"/><span class="koboSpan" id="kobo.2052.1"> the movies from </span><strong class="source-inline"><span class="koboSpan" id="kobo.2053.1">https://swapi/dev/api/films</span></strong><span class="koboSpan" id="kobo.2054.1"> using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2055.1">fetch()</span></strong><span class="koboSpan" id="kobo.2056.1"> method, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2057.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2058.1">
import { ref, onBeforeMount } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2059.1">
export const useMovies = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2060.1">
//…</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2061.1">
const getMovies = async () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2062.1">
    try {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2063.1">
      const response = await fetch(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2064.1">
        "https://swapi.dev/api/films");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2065.1">
      if (!response.ok) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2066.1">
        throw new Error("Failed to fetch movies");</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2067.1">
      }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2068.1">
      const data = await response.json();</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2069.1">
      movies.value = data.results;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2070.1">
    } catch (err) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2071.1">
    } finally {}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2072.1">
  };</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2073.1">
  onBeforeMount(getMovies);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2074.1">
  //…</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2075.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.2076.1">We also need to reset the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2077.1">isLoading</span></strong><span class="koboSpan" id="kobo.2078.1"> value to indicate the fetching status</span><a id="_idIndexMarker668"/><span class="koboSpan" id="kobo.2079.1"> and assign the value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2080.1">error</span></strong><span class="koboSpan" id="kobo.2081.1"> if any error </span><span class="No-Break"><span class="koboSpan" id="kobo.2082.1">has occurred:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2083.1">
const getMovies = async () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2084.1">
    isLoading.value = true;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2085.1">
    error.value = null;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2086.1">
    try {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2087.1">
      //…</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2088.1">
    } catch (err) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2089.1">
      error.value = err;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2090.1">
    } finally {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2091.1">
      isLoading.value = false;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2092.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2093.1">
  };</span></pre></li>
<li><span class="koboSpan" id="kobo.2094.1">We return the reactive data so that other Vue components can </span><span class="No-Break"><span class="koboSpan" id="kobo.2095.1">use it:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2096.1">
import { ref, onBeforeMount } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2097.1">
export const useMovies = () =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2098.1">
return {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2099.1">
    movies,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2100.1">
    isLoading,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2101.1">
    error,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2102.1">
  };</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2103.1">
};</span></pre></li>
<li><span class="koboSpan" id="kobo.2104.1">Next, create a new Vue component</span><a id="_idIndexMarker669"/><span class="koboSpan" id="kobo.2105.1"> called </span><strong class="source-inline"><span class="koboSpan" id="kobo.2106.1">Movies</span></strong><span class="koboSpan" id="kobo.2107.1"> by adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2108.1">Movies.vue</span></strong><span class="koboSpan" id="kobo.2109.1"> file to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2110.1">./src/components/</span></strong><span class="koboSpan" id="kobo.2111.1"> folder with the </span><span class="No-Break"><span class="koboSpan" id="kobo.2112.1">following code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2113.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2114.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2115.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2116.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2117.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2118.1">script</span></strong><span class="koboSpan" id="kobo.2119.1"> section, we will import </span><strong class="source-inline"><span class="koboSpan" id="kobo.2120.1">useMovies</span></strong><span class="koboSpan" id="kobo.2121.1"> and use its return data – </span><strong class="source-inline"><span class="koboSpan" id="kobo.2122.1">movies</span></strong><span class="koboSpan" id="kobo.2123.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2124.1">isLoading</span></strong><span class="koboSpan" id="kobo.2125.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.2126.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2127.1">error</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2128.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2129.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2130.1">
import { useMovies } from '../composables/useMovies.js'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2131.1">
const { movies, error, isLoading } = useMovies();</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2132.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2133.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2134.1">template</span></strong><span class="koboSpan" id="kobo.2135.1"> section, we will display the loading state, error state, and the list of movies according to the statuses of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2136.1">isLoading</span></strong><span class="koboSpan" id="kobo.2137.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2138.1">error</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2139.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2140.1">v-if</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2141.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2142.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2143.1">
  &lt;h1&gt;Movies&lt;/h1&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2144.1">
  &lt;div v-if="isLoading"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2145.1">
    &lt;p&gt;Loading...&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2146.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2147.1">
  &lt;div v-else-if="error"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2148.1">
  &lt;p&gt;{{ error }}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2149.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2150.1">
  &lt;div v-else&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2151.1">
    &lt;ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2152.1">
      &lt;li v-for="movie in movies" :key="movie.id"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2153.1">
        &lt;article&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2154.1">
          &lt;h3&gt;{{ movie.title }}&lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2155.1">
          &lt;h4&gt;Released on: {{ movie.release_date }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2156.1">
          &lt;/h4&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2157.1">
          &lt;h5&gt;Directed by: {{ movie.director }}&lt;/h5&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2158.1">
          &lt;p&gt;{{ movie.opening_crawl }}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2159.1">
        &lt;/article&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2160.1">
      &lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2161.1">
    &lt;/ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2162.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2163.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2164.1">Navigate to the browser</span><a id="_idIndexMarker670"/><span class="koboSpan" id="kobo.2165.1"> and you will see the following output when the component loads </span><span class="No-Break"><span class="koboSpan" id="kobo.2166.1">the movies:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer164">
<span class="koboSpan" id="kobo.2167.1"><img alt="Figure 5.24 – The loading state when fetching movies" src="image/B18645_05_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2168.1">Figure 5.24 – The loading state when fetching movies</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.2169.1">After the component finishes fetching them, Vue automatically updates the view to display the list of movies, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2170.1">following figure:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer165">
<span class="koboSpan" id="kobo.2171.1"><img alt="Figure 5.25 – The list of movies after fetching happens successfully" src="image/B18645_05_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2172.1">Figure 5.25 – The list of movies after fetching happens successfully</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.2173.1">If an error is encountered, the component</span><a id="_idIndexMarker671"/><span class="koboSpan" id="kobo.2174.1"> displays an error state, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.2175.1">example output:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer166">
<span class="koboSpan" id="kobo.2176.1"><img alt="Figure 5.26 – Error state during fetching" src="image/B18645_05_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2177.1">Figure 5.26 – Error state during fetching</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.2178.1">Next, we will add another composable that gives the component the ability to search – </span><strong class="source-inline"><span class="koboSpan" id="kobo.2179.1">useSearch()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2180.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2181.1">./src/composables/useSearch.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2182.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2183.1">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.2184.1">useSearch()</span></strong><span class="koboSpan" id="kobo.2185.1"> composable receives a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2186.1">items</span></strong><span class="koboSpan" id="kobo.2187.1">, and a list of filters available for filtering with the default filter, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2188.1">title</span></strong><span class="koboSpan" id="kobo.2189.1">.  </span><span class="koboSpan" id="kobo.2189.2">The composable returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.2190.1">searchTerm</span></strong><span class="koboSpan" id="kobo.2191.1"> for storing the input for searching, and the filtered array </span><span class="No-Break"><span class="koboSpan" id="kobo.2192.1">of items:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2193.1">
import { ref, computed } from 'vue';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2194.1">
export const useSearch = (items, filters = ['title']) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2195.1">
  const searchTerm = ref('');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2196.1">
  const filteredItems = computed(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2197.1">
    return items.value.filter(item =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2198.1">
      return filters.some(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2199.1">
        filter =&gt; item[filter].toLowerCase().includes(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2200.1">
          searchTerm.value.toLowerCase()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2201.1">
        );</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2202.1">
      });</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2203.1">
    });</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2204.1">
  });</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2205.1">
  return {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2206.1">
    searchTerm,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2207.1">
    filteredItems,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2208.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2209.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.2210.1">Go back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2211.1">Movies.vue</span></strong><span class="koboSpan" id="kobo.2212.1">. </span><span class="koboSpan" id="kobo.2212.2">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2213.1">script</span></strong><span class="koboSpan" id="kobo.2214.1"> section, we import </span><strong class="source-inline"><span class="koboSpan" id="kobo.2215.1">useSearch</span></strong><span class="koboSpan" id="kobo.2216.1"> and execute</span><a id="_idIndexMarker672"/><span class="koboSpan" id="kobo.2217.1"> it to get </span><strong class="source-inline"><span class="koboSpan" id="kobo.2218.1">searchTerm</span></strong><span class="koboSpan" id="kobo.2219.1"> and filtered array of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2220.1">filteredMovies</span></strong><span class="koboSpan" id="kobo.2221.1"> to use in </span><span class="No-Break"><span class="koboSpan" id="kobo.2222.1">our component:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2223.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2224.1">
import { useMovies } from '../composables/useMovies.js'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2225.1">
import { useSearch } from '../composables/useSearch.js'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2226.1">
const { movies, error, isLoading } = useMovies();</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2227.1">
const {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2228.1">
  searchTerm,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2229.1">
  filteredItems: filteredMovies } = useSearch(movies);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2230.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2231.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2232.1">template</span></strong><span class="koboSpan" id="kobo.2233.1"> section, we add an input field</span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.2234.1"> that binds to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2235.1">searchTerm</span></strong><span class="koboSpan" id="kobo.2236.1"> using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2237.1">v-model</span></strong><span class="koboSpan" id="kobo.2238.1"> and replaces </span><strong class="source-inline"><span class="koboSpan" id="kobo.2239.1">movies</span></strong><span class="koboSpan" id="kobo.2240.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2241.1">v-for</span></strong><span class="koboSpan" id="kobo.2242.1"> iteration </span><span class="No-Break"><span class="koboSpan" id="kobo.2243.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2244.1">filteredMovies</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2245.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2246.1">
&lt;div v-else&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2247.1">
  &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2248.1">
    &lt;label for="search"&gt;Search:&lt;/label&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2249.1">
    &lt;input type="text" id="search"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2250.1">
      v-model="searchTerm" /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2251.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2252.1">
  &lt;ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2253.1">
    &lt;li v-for="movie in filteredMovies"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2254.1">
      :key="movie.id"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2255.1">
    &lt;!-- … --&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2256.1">
    &lt;/li&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2257.1">
  &lt;/ul&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2258.1">
&lt;/div&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2259.1">Navigate back to the browser. </span><span class="koboSpan" id="kobo.2259.2">Now, you can load the movie list and start searching for the movie by title, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2260.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer167">
<span class="koboSpan" id="kobo.2261.1"><img alt="Figure 5.27 – Filtered movies by titles containing the word hope" src="image/B18645_05_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2262.1">Figure 5.27 – Filtered movies by titles containing the word hope</span></p>
<p><span class="koboSpan" id="kobo.2263.1">Additionally, you can extend the search composable</span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.2264.1"> created to support a list of filters as input selection from the users, or re-format the fields of received movies to be friendlier for your application. </span><span class="koboSpan" id="kobo.2264.2">In this exercise, we observed how we can create standalone and reusable logic for different use cases in a component with the Composition API, such as the ability to search. </span><span class="koboSpan" id="kobo.2264.3">We also see how composables make our code cleaner and </span><span class="No-Break"><span class="koboSpan" id="kobo.2265.1">more organized.</span></span></p>
<h2 id="_idParaDest-130"><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.2266.1">Activity 5.01 – creating a BlogView component with the Composition API</span></h2>
<p><span class="koboSpan" id="kobo.2267.1">To access the code file for this activity, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.2268.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Activity5.01"><span class="No-Break"><span class="koboSpan" id="kobo.2269.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter05/Activity5.01</span></span></a></p>
<p><span class="koboSpan" id="kobo.2270.1">This activity aims to leverage</span><a id="_idIndexMarker675"/><span class="koboSpan" id="kobo.2271.1"> your knowledge in combining different Composition</span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.2272.1"> APIs with components’ props and events to create a view in which the user can see a list of blogs and add or remove any </span><span class="No-Break"><span class="koboSpan" id="kobo.2273.1">blog item.</span></span></p>
<p><span class="koboSpan" id="kobo.2274.1">This activity will require the use of a headless CMS, Contentful. </span><span class="koboSpan" id="kobo.2274.2">The access keys and endpoints are listed in </span><span class="No-Break"><span class="koboSpan" id="kobo.2275.1">the solution.</span></span></p>
<p><span class="koboSpan" id="kobo.2276.1">Follow these steps to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.2277.1">this activity:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.2278.1">Create a new Vue project </span><span class="No-Break"><span class="koboSpan" id="kobo.2279.1">with Vite.</span></span></li>
<li><span class="koboSpan" id="kobo.2280.1">Install the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2281.1">contentful</span></strong><span class="koboSpan" id="kobo.2282.1"> dependency into </span><span class="No-Break"><span class="koboSpan" id="kobo.2283.1">your project.</span></span></li>
<li><span class="koboSpan" id="kobo.2284.1">Create another composable, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2285.1">useListAction</span></strong><span class="koboSpan" id="kobo.2286.1">, which receives</span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.2287.1"> a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2288.1">items</span></strong><span class="koboSpan" id="kobo.2289.1">, and returns</span><a id="_idIndexMarker678"/> <span class="No-Break"><span class="koboSpan" id="kobo.2290.1">the following:</span></span><ul><li><strong class="source-inline"><span class="koboSpan" id="kobo.2291.1">addItem</span></strong><span class="koboSpan" id="kobo.2292.1">: Adds a new item to the </span><span class="No-Break"><span class="koboSpan" id="kobo.2293.1">given list</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.2294.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2295.1">: Deletes an item based on </span><span class="No-Break"><span class="koboSpan" id="kobo.2296.1">its ID</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.2297.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2298.1">useBlogs</span></strong><span class="koboSpan" id="kobo.2299.1"> composable, which will fetch </span><strong class="source-inline"><span class="koboSpan" id="kobo.2300.1">blogs</span></strong><span class="koboSpan" id="kobo.2301.1"> from Contentful and use </span><strong class="source-inline"><span class="koboSpan" id="kobo.2302.1">useListActions()</span></strong><span class="koboSpan" id="kobo.2303.1"> to get the actions for the </span><span class="No-Break"><span class="koboSpan" id="kobo.2304.1">fetched </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2305.1">blogs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2306.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2307.1">Define </span><strong class="source-inline"><span class="koboSpan" id="kobo.2308.1">useBlogs</span></strong><span class="koboSpan" id="kobo.2309.1"> to return the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2310.1">blogs</span></strong><span class="koboSpan" id="kobo.2311.1"> list, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2312.1">loading</span></strong><span class="koboSpan" id="kobo.2313.1"> status, an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2314.1">error</span></strong><span class="koboSpan" id="kobo.2315.1"> for the fetch status, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2316.1">addItem</span></strong><span class="koboSpan" id="kobo.2317.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2318.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2319.1"> actions received from </span><strong class="source-inline"><span class="koboSpan" id="kobo.2320.1">useListActions</span></strong><span class="koboSpan" id="kobo.2321.1">. </span><span class="koboSpan" id="kobo.2321.2">The returned </span><strong class="source-inline"><span class="koboSpan" id="kobo.2322.1">blogs</span></strong><span class="koboSpan" id="kobo.2323.1"> should be an array of blog items with the following fields: </span><strong class="source-inline"><span class="koboSpan" id="kobo.2324.1">title</span></strong><span class="koboSpan" id="kobo.2325.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2326.1">description</span></strong><span class="koboSpan" id="kobo.2327.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2328.1">heroImage</span></strong><span class="koboSpan" id="kobo.2329.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2330.1">publishDate</span></strong><span class="koboSpan" id="kobo.2331.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2332.1">id</span></strong><span class="koboSpan" id="kobo.2333.1"> (</span><span class="No-Break"><span class="koboSpan" id="kobo.2334.1">a slug).</span></span></li>
<li><span class="koboSpan" id="kobo.2335.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2336.1">useSearch</span></strong><span class="koboSpan" id="kobo.2337.1"> composable, which receives a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2338.1">items</span></strong><span class="koboSpan" id="kobo.2339.1">, and returns </span><span class="No-Break"><span class="koboSpan" id="kobo.2340.1">the following:</span></span><ul><li><strong class="source-inline"><span class="koboSpan" id="kobo.2341.1">searchTerm</span></strong><span class="koboSpan" id="kobo.2342.1">: The </span><span class="No-Break"><span class="koboSpan" id="kobo.2343.1">search value.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.2344.1">filters</span></strong><span class="koboSpan" id="kobo.2345.1">: A list of fields to filter based on the user’s choice. </span><span class="koboSpan" id="kobo.2345.2">By default, </span><span class="No-Break"><span class="koboSpan" id="kobo.2346.1">it’s </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2347.1">title</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2348.1">.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.2349.1">filteredItems</span></strong><span class="koboSpan" id="kobo.2350.1">: The filtered list of the </span><span class="No-Break"><span class="koboSpan" id="kobo.2351.1">given items.</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.2352.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2353.1">BlogEditor</span></strong><span class="koboSpan" id="kobo.2354.1"> component that displays several </span><strong class="source-inline"><span class="koboSpan" id="kobo.2355.1">input</span></strong><span class="koboSpan" id="kobo.2356.1"> fields for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2357.1">title</span></strong><span class="koboSpan" id="kobo.2358.1"> field, the author’s name, the blog’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.2359.1">id</span></strong><span class="koboSpan" id="kobo.2360.1"> field, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2361.1">textarea</span></strong><span class="koboSpan" id="kobo.2362.1"> for the blog’s content, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2363.1">button</span></strong><span class="koboSpan" id="kobo.2364.1"> element for saving the blog. </span><span class="koboSpan" id="kobo.2364.2">When this button is clicked, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2365.1">BlogEditor</span></strong><span class="koboSpan" id="kobo.2366.1"> emits an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2367.1">addNewItem</span></strong><span class="koboSpan" id="kobo.2368.1"> event with the new blog’s details as the payload and resets </span><span class="No-Break"><span class="koboSpan" id="kobo.2369.1">the fields.</span></span></li>
<li><span class="koboSpan" id="kobo.2370.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2371.1">Blogs</span></strong><span class="koboSpan" id="kobo.2372.1"> component that receives a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2373.1">blogs</span></strong><span class="koboSpan" id="kobo.2374.1">, an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2375.1">isLoading</span></strong><span class="koboSpan" id="kobo.2376.1"> flag, and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2377.1">error</span></strong><span class="koboSpan" id="kobo.2378.1"> object as its props and then renders the state of the component according to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2379.1">isLoading</span></strong><span class="koboSpan" id="kobo.2380.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2381.1">error</span></strong><span class="koboSpan" id="kobo.2382.1"> and the details of each blog item on the UI </span><span class="No-Break"><span class="koboSpan" id="kobo.2383.1">when applicable.</span></span></li>
<li><span class="koboSpan" id="kobo.2384.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.2385.1">Blogs</span></strong><span class="koboSpan" id="kobo.2386.1">, use </span><strong class="source-inline"><span class="koboSpan" id="kobo.2387.1">useSearch()</span></strong><span class="koboSpan" id="kobo.2388.1"> on the list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2389.1">blogs</span></strong><span class="koboSpan" id="kobo.2390.1"> received as props and display a search </span><strong class="source-inline"><span class="koboSpan" id="kobo.2391.1">input</span></strong><span class="koboSpan" id="kobo.2392.1"> field to allow users to filter the blogs according </span><span class="No-Break"><span class="koboSpan" id="kobo.2393.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2394.1">title</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2395.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2396.1">Replace the original list</span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.2397.1"> iterations with the filtered</span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.2398.1"> list </span><span class="No-Break"><span class="koboSpan" id="kobo.2399.1">of blogs.</span></span></li>
<li><span class="koboSpan" id="kobo.2400.1">We then add </span><strong class="source-inline"><span class="koboSpan" id="kobo.2401.1">fieldset</span></strong><span class="koboSpan" id="kobo.2402.1"> containing two </span><strong class="source-inline"><span class="koboSpan" id="kobo.2403.1">input</span></strong><span class="koboSpan" id="kobo.2404.1"> fields of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2405.1">checkbox</span></strong><span class="koboSpan" id="kobo.2406.1"> type, each binding to the array of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2407.1">filters</span></strong><span class="koboSpan" id="kobo.2408.1">. </span><span class="koboSpan" id="kobo.2408.2">The two </span><strong class="source-inline"><span class="koboSpan" id="kobo.2409.1">input</span></strong><span class="koboSpan" id="kobo.2410.1"> fields will also have corresponding labels of </span><strong class="bold"><span class="koboSpan" id="kobo.2411.1">By title</span></strong><span class="koboSpan" id="kobo.2412.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.2413.1">By content</span></strong><span class="koboSpan" id="kobo.2414.1">, with values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2415.1">title</span></strong><span class="koboSpan" id="kobo.2416.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2417.1">description</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2418.1"> respectively.</span></span></li>
<li><span class="koboSpan" id="kobo.2419.1">Add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2420.1">button</span></strong><span class="koboSpan" id="kobo.2421.1"> element to each row of the blog rendered in the blog list, with a </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2422.1">Remove</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2423.1"> label.</span></span></li>
<li><span class="koboSpan" id="kobo.2424.1">Also, define an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2425.1">emit</span></strong><span class="koboSpan" id="kobo.2426.1"> event, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2427.1">deleteBlog</span></strong><span class="koboSpan" id="kobo.2428.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.2429.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2430.1">Blogs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2431.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2432.1">On clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.2433.1">Remove</span></strong><span class="koboSpan" id="kobo.2434.1"> button, the component should emit a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2435.1">deleteBlog</span></strong><span class="koboSpan" id="kobo.2436.1"> event with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2437.1">id</span></strong><span class="koboSpan" id="kobo.2438.1"> value of the blog item as </span><span class="No-Break"><span class="koboSpan" id="kobo.2439.1">its payload.</span></span></li>
<li><span class="koboSpan" id="kobo.2440.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2441.1">BlogView</span></strong><span class="koboSpan" id="kobo.2442.1"> component that renders </span><strong class="source-inline"><span class="koboSpan" id="kobo.2443.1">BlogEditor</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2444.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2445.1">Blogs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2446.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2447.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.2448.1">BlogView</span></strong><span class="koboSpan" id="kobo.2449.1">, create a toggle flag, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2450.1">showEditor</span></strong><span class="koboSpan" id="kobo.2451.1">, which will display </span><strong class="source-inline"><span class="koboSpan" id="kobo.2452.1">BlogEditor</span></strong><span class="koboSpan" id="kobo.2453.1"> if </span><strong class="source-inline"><span class="koboSpan" id="kobo.2454.1">true</span></strong><span class="koboSpan" id="kobo.2455.1">. </span><span class="koboSpan" id="kobo.2455.2">Otherwise, the component will display an </span><strong class="bold"><span class="koboSpan" id="kobo.2456.1">Add new blog</span></strong><span class="koboSpan" id="kobo.2457.1"> button that toggles the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2458.1">showEditor</span></strong><span class="koboSpan" id="kobo.2459.1"> value when </span><span class="No-Break"><span class="koboSpan" id="kobo.2460.1">clicked on.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2461.1">BlogView</span></strong><span class="koboSpan" id="kobo.2462.1"> will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.2463.1">useBlogs()</span></strong><span class="koboSpan" id="kobo.2464.1"> and pass the data received from this composable (</span><strong class="source-inline"><span class="koboSpan" id="kobo.2465.1">blogs</span></strong><span class="koboSpan" id="kobo.2466.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2467.1">isLoading</span></strong><span class="koboSpan" id="kobo.2468.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2469.1">error,</span></strong><span class="koboSpan" id="kobo.2470.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2471.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2472.1">) as props and events to </span><strong class="source-inline"><span class="koboSpan" id="kobo.2473.1">Blogs</span></strong><span class="koboSpan" id="kobo.2474.1">. </span><span class="koboSpan" id="kobo.2474.2">You should bind </span><strong class="source-inline"><span class="koboSpan" id="kobo.2475.1">deleteItem</span></strong><span class="koboSpan" id="kobo.2476.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2477.1">deleteBlog</span></strong><span class="koboSpan" id="kobo.2478.1"> custom event </span><span class="No-Break"><span class="koboSpan" id="kobo.2479.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2480.1">Blogs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2481.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.2482.1">BlogView</span></strong><span class="koboSpan" id="kobo.2483.1"> also binds the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2484.1">addItem</span></strong><span class="koboSpan" id="kobo.2485.1"> method returned from </span><strong class="source-inline"><span class="koboSpan" id="kobo.2486.1">useBlogs()</span></strong><span class="koboSpan" id="kobo.2487.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2488.1">addNewItem</span></strong><span class="koboSpan" id="kobo.2489.1"> event </span><span class="No-Break"><span class="koboSpan" id="kobo.2490.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2491.1">BlogEditor</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2492.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2493.1"> Add some CSS styling</span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.2494.1"> to the </span><span class="No-Break"><span class="koboSpan" id="kobo.2495.1">components</span></span><span class="No-Break"><a id="_idIndexMarker682"/></span><span class="No-Break"><span class="koboSpan" id="kobo.2496.1"> accordingly.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.2497.1">The expected outcome is </span><span class="No-Break"><span class="koboSpan" id="kobo.2498.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer168">
<span class="koboSpan" id="kobo.2499.1"><img alt="Figure 5.28 – Output when there aren’t blogs to display and the user hasn’t clicked on Add new blog" src="image/B18645_05_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2500.1">Figure 5.28 – Output when there aren’t blogs to display and the user hasn’t clicked on Add new blog</span></p>
<p><span class="koboSpan" id="kobo.2501.1">When a user clicks on </span><strong class="bold"><span class="koboSpan" id="kobo.2502.1">Add new blog</span></strong><span class="koboSpan" id="kobo.2503.1">, the editor will appear </span><span class="No-Break"><span class="koboSpan" id="kobo.2504.1">as fo</span><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.2505.1">llows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer169">
<span class="koboSpan" id="kobo.2506.1"><img alt="Figure 5.29 – Blog editor in action" src="image/B18645_05_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2507.1">Figure 5.29 – Blog editor in action</span></p>
<h1 id="_idParaDest-131"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.2508.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.2509.1">Throughout this chapter, we learned about composing components using the Composition API and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2510.1">setup()</span></strong><span class="koboSpan" id="kobo.2511.1"> lifecycle hooks (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2512.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.2513.1">) as an alternative to the Options API. </span><span class="koboSpan" id="kobo.2513.2">We also learned how to use different Composition functions to create watchers and lifecycle callbacks to control our components’ </span><span class="No-Break"><span class="koboSpan" id="kobo.2514.1">local states.</span></span></p>
<p><span class="koboSpan" id="kobo.2515.1">Finally, we learned how to create our custom composable function based on the Composition API and other composables, making our components more organized and readable in groups of </span><span class="No-Break"><span class="koboSpan" id="kobo.2516.1">similar logic.</span></span></p>
<p><span class="koboSpan" id="kobo.2517.1">In the next chapter, we will explore how we can create global components using plugins and mixins and compose </span><span class="No-Break"><span class="koboSpan" id="kobo.2518.1">dynamic components.</span></span></p>
</div>
</body></html>