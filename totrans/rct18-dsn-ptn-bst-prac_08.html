<html><head></head><body>
<div id="sbo-rt-content"><div class="Basic-Text-Frame" id="_idContainer061">
<h1 class="chapterNumber">8</h1>
<h1 class="chapterTitle" id="_idParaDest-115">React Hooks </h1>
<p class="normal">React Hooks<a id="_idIndexMarker251"/> have revolutionized the way we write React applications, allowing us to use functional components instead of class components, and making coding faster and more efficient. Since their introduction in React 16.8, Hooks have become an essential part of React development and have greatly improved the performance of our applications. With Hooks, we can manage the state, handle side effects, and reuse code in a more concise and readable way. In the next chapter, we will explore the different types of Hooks and how to use them to enhance our React applications.</p>
<p class="normal">In this chapter, we will cover the following topics:</p>
<ul>
<li class="bulletList">The new React Hooks and how to use them</li>
<li class="bulletList">The rules of the Hooks</li>
<li class="bulletList">How to migrate a class component to React Hooks</li>
<li class="bulletList">Understanding the component life cycle with Hooks and effects</li>
<li class="bulletList">How to fetch data with Hooks</li>
<li class="bulletList">How to memoize components, values, and functions with <code class="inlineCode">memo</code>, <code class="inlineCode">useMemo</code>, and <code class="inlineCode">useCallback</code></li>
<li class="bulletList">How to implement <code class="inlineCode">useReducer</code></li>
</ul>
<h1 class="heading-1" id="_idParaDest-116">Technical requirements</h1>
<p class="normal">To complete this chapter, you will require the following:</p>
<ul>
<li class="bulletList">Node.js 19+</li>
<li class="bulletList">Visual Studio Code</li>
</ul>
<p class="normal">You can find the code for this chapter in the book’s GitHub repository at <a href="https://github.com/PacktPublishing/React-18-Design-Patterns-and-Best-Practices-Fourth-Edition/tree/main/Chapter08"><span class="url">https://github.com/PacktPublishing/React-18-Design-Patterns-and-Best-Practices-Fourth-Edition/tree/main/Chapter08</span></a>. </p>
<h1 class="heading-1" id="_idParaDest-117">Introducing React Hooks</h1>
<p class="normal">React Hooks<a id="_idIndexMarker252"/> are a new addition to <strong class="keyWord">React 16.8</strong>. They let you use state and other React features without writing a React class component. React Hooks are also backward-compatible, which means they do not contain any breaking changes or not replace your knowledge of React concepts. Over the course of this chapter, we will see an overview of Hooks for experienced React users, and we are also going to learn about some of the most common React Hooks such as <code class="inlineCode">useState</code>, <code class="inlineCode">useEffect</code>, <code class="inlineCode">useMemo</code>, <code class="inlineCode">useCallback</code>, and <code class="inlineCode">memo</code>.</p>
<h2 class="heading-2" id="_idParaDest-118">No breaking changes</h2>
<p class="normal">In the context of React development, it’s a common misconception that the introduction of React Hooks has made class components obsolete. However, this is not true, as there are no plans to remove classes from React. The Hooks API does not replace your understanding of React concepts, but rather offers a more streamlined approach to working with those concepts, such as props, states, context, refs, and life cycles, which you are already familiar with.</p>
<h2 class="heading-2" id="_idParaDest-119">Using the State Hook</h2>
<p class="normal">In old React <a id="_idIndexMarker253"/>code, we used <code class="inlineCode">this.setState</code> to use the component state. Now we will use the <code class="inlineCode">useState</code> hook to do this.</p>
<p class="normal">First, you need to extract the <code class="inlineCode">useState</code> Hook from React:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
</code></pre>
<p class="normal">Since React 17, the <code class="inlineCode">React</code> object is no longer required to render JSX code.</p>
<p class="normal">Then, you need to declare the state you want to use by defining the state and the setter for this specific state:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">Counter</span> = () =&gt; { 
  <span class="hljs-keyword">const</span> [counter, setCounter] = useState&lt;number&gt;(<span class="hljs-number">0</span>) 
}
</code></pre>
<p class="normal">As you can see, we are declaring the counter state with the <code class="inlineCode">setCounter</code> setter and we are specifying that we will only accept numbers, and finally, we are setting the initial value to zero.</p>
<p class="normal">In order to test our state, we need to create a method that will be triggered by the <code class="inlineCode">onClick</code> event:</p>
<pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">Operation</span> = <span class="hljs-string">'add'</span> | <span class="hljs-string">'substract'</span>
<span class="hljs-keyword">const</span> <span class="hljs-title">Counter</span> = () =&gt; {
  <span class="hljs-keyword">const</span> [counter, setCounter] = useState&lt;number&gt;(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-title">handleCounter</span> = (<span class="hljs-params">operation: Operation</span>) =&gt; {
    <span class="hljs-keyword">if</span> (operation === <span class="hljs-string">'add'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title">setCounter</span>(counter + <span class="hljs-number">1</span>)
    }
  
    <span class="hljs-title">setCounter</span>(counter - <span class="hljs-number">1</span>)
  }
}
</code></pre>
<p class="normal">Finally, we <a id="_idIndexMarker254"/>can render the <code class="inlineCode">counter</code> state and some buttons to increase or decrease the counter state:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">return</span> (
  <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    Counter: {counter} <span class="hljs-tag">&lt;</span><span class="hljs-name">br</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> handleCounter('add')}&gt;+ Add<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> handleCounter('subtract')}&gt;- Subtract<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
)
</code></pre>
<p class="normal">If you click on the <strong class="screenText">+ Add</strong> button once, you should see <strong class="screenText">1 </strong>for <strong class="screenText">Counter</strong>: </p>
<figure class="mediaobject"><img alt="" height="63" src="../Images/B18414_08_01.png" width="186"/></figure>
<p class="packt_figref">Figure 8.1: Counter 1</p>
<p class="normal">And if you click the <strong class="screenText">- Subtract</strong> button twice, then you should see <strong class="screenText">-1 </strong>for <strong class="screenText">Counter</strong>:</p>
<figure class="mediaobject"><img alt="" height="65" src="../Images/B18414_08_02.png" width="188"/></figure>
<p class="packt_figref">Figure 8.2: Counter -1</p>
<p class="normal">As you can see, the <code class="inlineCode">useState</code> Hook is a game changer in React and makes it very easy to handle the state in a functional component.</p>
<p class="normal">After <a id="_idIndexMarker255"/>appreciating how the <code class="inlineCode">useState</code> Hook has revolutionized state management in functional components within React, we are now ready to delve deeper into the nuances of Hooks. The following section will discuss the essential <em class="italic">rules of Hooks</em> that govern their usage in React applications.</p>
<h1 class="heading-1" id="_idParaDest-120">Rules of Hooks</h1>
<p class="normal">React Hooks are <a id="_idIndexMarker256"/>basically JavaScript functions, but there are two rules that you need to follow in order to use them. React provides a linter plugin to enforce those rules for you, which you can install by running the following command:</p>
<pre class="programlisting con"><code class="hljs-con">npm install --save-dev eslint-plugin-react-hooks
</code></pre>
<p class="normal">Let’s look at these two rules.</p>
<h2 class="heading-2" id="_idParaDest-121">Rule 1: Only call Hooks at the top level</h2>
<p class="normal">To ensure the proper functioning of React Hooks, it is important to avoid calling them inside loops, conditions, or nested functions. Instead, it is recommended to always use Hooks at the top level of your React function. This practice ensures that Hooks are called in the same order every time a component is rendered, allowing React to correctly preserve the state of Hooks between multiple <code class="inlineCode">useState</code> and <code class="inlineCode">useEffect</code> calls. Following this rule will help you write more efficient and maintainable code with React Hooks.</p>
<h2 class="heading-2" id="_idParaDest-122">Rule 2: Only call Hooks from React functions</h2>
<p class="normal">To ensure that all stateful logic in a component is clearly visible from its source code, avoid calling Hooks from regular JavaScript functions. Instead, use Hooks in React function components or custom Hooks (which we’ll learn about in the next section). By following this practice, you can ensure that all stateful logic is centralized and easily <a id="_idIndexMarker257"/>understandable.</p>
<p class="normal">In the next section, we will learn how to migrate a class component to use the new React Hooks.</p>
<h1 class="heading-1" id="_idParaDest-123">Migrating a class component to React Hooks</h1>
<p class="normal">Let’s <a id="_idIndexMarker258"/>transform code that is currently using<a id="_idIndexMarker259"/> class components and is also using some life cycle methods. In this example, we are fetching the issues from a GitHub repository and listing them.</p>
<p class="normal">For this example, you will need to install <code class="inlineCode">axios</code> to perform the fetch:</p>
<pre class="programlisting con"><code class="hljs-con">npm install axios
</code></pre>
<p class="normal">This is the class component version:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
type <span class="hljs-title">Issue</span> = {
  <span class="hljs-attr">number</span>: number
  <span class="hljs-attr">title</span>: string
  <span class="hljs-attr">state</span>: string
}
type <span class="hljs-title">Props</span> = {}
type <span class="hljs-title">State</span> = { <span class="hljs-attr">issues</span>: <span class="hljs-title">Issue</span>[] }
<span class="hljs-keyword">class</span> <span class="hljs-title">Issues</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span>&lt;<span class="hljs-title">Props</span>, <span class="hljs-title">State</span>&gt; {
  <span class="hljs-title">constructor</span>(<span class="hljs-params">props: Props</span>) {
    <span class="hljs-variable">super</span>(props)
    <span class="hljs-variable">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">issues</span>: []
    }
  }
  <span class="hljs-title">componentDidMount</span>() {
    axios.<span class="hljs-title">get</span>(<span class="hljs-string">'https://api.github.com/repos/ContentPI/ContentPI/issues'</span>)
      .<span class="hljs-title">then</span>(<span class="hljs-function">(</span><span class="hljs-params">response: any</span><span class="hljs-function">) =&gt;</span> {
        <span class="hljs-variable">this</span>.<span class="hljs-title">setState</span>({
          <span class="hljs-attr">issues</span>: response.<span class="hljs-property">data</span>
        })
      })
  }
  <span class="hljs-title">render</span>() {
    <span class="hljs-keyword">const</span> { issues = [] } = <span class="hljs-variable">this</span>.<span class="hljs-property">state</span>
    <span class="hljs-keyword">return</span> (
      <span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>ContentPI Issues<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
        {issues.map((issue: Issue) =&gt; (
          <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{issue.title}</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span>#{issue.number}<span class="hljs-tag">&lt;/</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span>{' '}
            <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span>
<span class="hljs-tag">              </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">`</span><span class="hljs-attr">https:</span><span class="hljs-tag">//</span><span class="hljs-attr">github.com</span><span class="hljs-tag">/</span><span class="hljs-attr">ContentPI</span><span class="hljs-tag">/</span><span class="hljs-attr">ContentPI</span><span class="hljs-tag">/</span><span class="hljs-attr">issues</span><span class="hljs-tag">/${</span><span class="hljs-attr">issue.number</span><span class="hljs-tag">}`}</span>
<span class="hljs-tag">              </span><span class="hljs-attr">target</span><span class="hljs-tag">=</span><span class="hljs-string">"_blank"</span>
<span class="hljs-tag">            &gt;</span>
              {issue.title}
            <span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span>{' '}
            {issue.state}
          <span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/&gt;</span>
    )
  }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">Issues</span>
</code></pre>
<p class="normal">If you<a id="_idIndexMarker260"/> render this component, you should <a id="_idIndexMarker261"/>see something like this:</p>
<figure class="mediaobject"><img alt="" height="903" src="../Images/B18414_08_03.png" width="658"/></figure>
<p class="packt_figref">Figure 8.3: ContentPI Issues</p>
<p class="normal">Now, let’s <a id="_idIndexMarker262"/>transform our code into a functional <a id="_idIndexMarker263"/>component using React Hooks. The first thing we need to do is to import some React functions and types:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">FC</span>, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
</code></pre>
<p class="normal">Now we can remove the <code class="inlineCode">Props</code> and <code class="inlineCode">State</code> types we created previously and just leave the <code class="inlineCode">Issue</code> type:</p>
<pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">Issue</span> = {
  <span class="hljs-attr">number</span>: number
  <span class="hljs-attr">title</span>: string
  <span class="hljs-attr">state</span>: string
}
</code></pre>
<p class="normal">After this, you can change the class definition to use a functional component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">Issues</span>: <span class="hljs-variable">FC</span> = <span class="hljs-function">() =&gt;</span> {...}
</code></pre>
<p class="normal">The <code class="inlineCode">FC</code> type<a id="_idIndexMarker264"/> is used to define a <strong class="keyWord">functional component</strong> in React. If you need <a id="_idIndexMarker265"/>to pass some props to the component, you <a id="_idIndexMarker266"/>can pass them like this:</p>
<pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">Props</span> = {
  <span class="hljs-attr">propX</span>: string
  <span class="hljs-attr">propY</span>: number
  <span class="hljs-attr">propZ</span>: boolean 
}
<span class="hljs-keyword">const</span> <span class="hljs-title">Issues</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">() =&gt;</span> {...}
</code></pre>
<p class="normal">The next thing we need to do is to replace our constructor and our state definition by using the <code class="inlineCode">useState</code> Hook:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// The useState hook replace the this.setState method</span>
<span class="hljs-keyword">const</span> [issues, setIssues] = useState&lt;<span class="hljs-title">Issue</span>[]&gt;([])
</code></pre>
<p class="normal">We have used the life cycle method called <code class="inlineCode">componentDidMount</code> before, which is executed when the component is mounted and is going to run just once. The new React Hook, called <code class="inlineCode">useEffect</code>, will now handle all the life cycle methods using different syntax for each one, but for now, let’s see how we can get the same <em class="italic">effect</em> of <code class="inlineCode">componentDidMount</code> in our new functional component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">// When we use the useEffect hook with an empty array [] on the</span>
<span class="hljs-comment">// dependencies (second parameter)</span>
<span class="hljs-comment">// this represents the componentDidMount method (will be executed when the</span>
<span class="hljs-comment">// component is mounted).</span>
<span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  axios
    .<span class="hljs-title">get</span>(<span class="hljs-string">'https://api.github.com/repos/ContentPI/ContentPI/issues'</span>)
    .<span class="hljs-title">then</span>(<span class="hljs-function">(</span><span class="hljs-params">response: any</span><span class="hljs-function">) =&gt;</span> {
       <span class="hljs-comment">// Here we update directly our issue state</span>
        <span class="hljs-title">setIssues</span>(response.<span class="hljs-property">data</span>)
    })
}, [])
</code></pre>
<p class="normal">And finally, we just render our JSX code:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">return</span> (
  <span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>ContentPI Issues<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
    {issues.map((issue: Issue) =&gt; (
        <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{issue.title}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span>#{issue.number}<span class="hljs-tag">&lt;/</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span> {' '}
            <span class="hljs-tag">&lt;</span><span class="hljs-name">a</span><span class="hljs-tag"> </span>
<span class="hljs-tag">          </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">{</span><span class="hljs-tag">`</span><span class="hljs-attr">https:</span><span class="hljs-tag">//</span><span class="hljs-attr">github.com</span><span class="hljs-tag">/</span><span class="hljs-attr">ContentPI</span><span class="hljs-tag">/</span><span class="hljs-attr">ContentPI</span><span class="hljs-tag">/</span><span class="hljs-attr">issues</span><span class="hljs-tag">/${</span><span class="hljs-attr">issue.number</span><span class="hljs-tag">}`}      </span>
<span class="hljs-tag">          </span><span class="hljs-attr">target</span><span class="hljs-tag">=</span><span class="hljs-string">"_blank"</span><span class="hljs-tag">&gt;</span>{issue.title}
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">a</span><span class="hljs-tag">&gt;</span> {' '}
            {issue.state}
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    ))}
  <span class="hljs-tag">&lt;/&gt;</span>
)
</code></pre>
<p class="normal">As you can see, the new Hooks help us to simplify our code a lot and makes more sense. Also, we <a id="_idIndexMarker267"/>reduced our code by 10 lines (the class component code has 53 lines, and the<a id="_idIndexMarker268"/> functional component has 43 lines).</p>
<p class="normal">Now that we have seen the transformative power of new Hooks in streamlining our code and reducing verbosity, let’s shift our focus to another foundational concept in React. In the next section, we will delve into the differences between component life cycle methods used in class components and the innovative React effects.</p>
<h1 class="heading-1" id="_idParaDest-124">Understanding React effects</h1>
<p class="normal">In this section, we will <a id="_idIndexMarker269"/>learn the difference between the component life cycle methods that we used in class components and the new React effects. Even if you have read in other places that they are the same, just with a different syntax, this is not correct.</p>
<h2 class="heading-2" id="_idParaDest-125">Understanding useEffect</h2>
<p class="normal">When you<a id="_idIndexMarker270"/> work with <code class="inlineCode">useEffect</code>, you need to <em class="italic">think in terms of effects</em>. If<a id="_idIndexMarker271"/> you want to perform the equivalent method of <code class="inlineCode">componentDidMount</code> using <code class="inlineCode">useEffect</code>, you can do the following:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// Here you perform your side effect</span>
}, [])
</code></pre>
<p class="normal">The first parameter is the callback of the effect that you want to execute, and the second parameter is the dependencies array. If you pass an empty array (<code class="inlineCode">[]</code>) to the dependencies, the state and props will have their original initial values.</p>
<p class="normal">However, it is important to mention that even though this is the closest equivalent to <code class="inlineCode">componentDidMount</code>, it does not have the same behavior. Unlike <code class="inlineCode">componentDidMount</code> and <code class="inlineCode">componentDidUpdate</code>, the function that we pass to <code class="inlineCode">useEffect</code> fires after layout and paint, during a deferred event. This normally works for many common side effects, such as setting up subscriptions and event handlers, because most types of work shouldn’t block the browser from updating the screen.</p>
<p class="normal">However, not all effects can be deferred. For example, you will get a blink if you need to<a id="_idIndexMarker272"/> mutate the <strong class="keyWord">Document Object Model</strong> (<strong class="keyWord">DOM</strong>). This is the reason why you must fire the event synchronously before the next paint. React provides one Hook called <code class="inlineCode">useLayoutEffect</code>, which works in the exact same way as <code class="inlineCode">useEffect</code>.</p>
<h2 class="heading-2" id="_idParaDest-126">Firing an effect conditionally</h2>
<p class="normal">If you need to<a id="_idIndexMarker273"/> fire an effect conditionally, then you should add a dependency to the array of dependencies; otherwise, you will execute the effect multiple times and this may cause an infinite loop. If you pass an array of dependencies, the <code class="inlineCode">useEffect</code> Hook will only run if one of those dependencies changes:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
<span class="hljs-comment">// When you pass an array of dependencies the useEffect hook will only</span>
<span class="hljs-comment">// run if one of the dependencies changes.</span>
}, [dependencyA, dependencyB])
</code></pre>
<div class="note">
<p class="normal">If you understand how the React class life cycle methods work, basically, <code class="inlineCode">useEffect</code> behaves in the same way as <code class="inlineCode">componentDidMount</code>, <code class="inlineCode">componentDidUpdate</code>, and <code class="inlineCode">componentWillUnmount</code> combined.</p>
</div>
<p class="normal">The effects are <a id="_idIndexMarker274"/>very important, but let’s also explore some other important new Hooks, including <code class="inlineCode">useCallback</code>, <code class="inlineCode">useMemo</code>, and <code class="inlineCode">memo</code>.</p>
<h2 class="heading-2" id="_idParaDest-127">Understanding useCallback, useMemo, and memo</h2>
<p class="normal">In order to<a id="_idIndexMarker275"/> understand the difference between <code class="inlineCode">useCallback</code>, <code class="inlineCode">useMemo</code>, and <code class="inlineCode">memo</code>, we <a id="_idIndexMarker276"/>will do a to-do list example. You can create a basic<a id="_idIndexMarker277"/> application by using <code class="inlineCode">create-react-app</code> and Typescript as a template:</p>
<pre class="programlisting con"><code class="hljs-con">npx create-react-app todo --template typescript
</code></pre>
<p class="normal">Right after that, you<a id="_idIndexMarker278"/> can remove all the extra files (<code class="inlineCode">App.css, App.test.ts</code>, <code class="inlineCode">index.css</code>, <code class="inlineCode">logo.svg</code>, <code class="inlineCode">reportWebVitals.ts</code>, and <code class="inlineCode">setupTests.ts</code>). You just need to keep the <code class="inlineCode">App.tsx</code> file, which will contain the following code:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">FC</span>, useState, useEffect, useMemo, useCallback, <span class="hljs-title">ChangeEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title">List</span>, { <span class="hljs-title">Todo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./List'</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">initialTodos</span>: <span class="hljs-title">Todo</span>[] = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">task</span>: <span class="hljs-string">'Go shopping'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">task</span>: <span class="hljs-string">'Pay the electricity bill'</span>}
]
<span class="hljs-keyword">const</span> <span class="hljs-title">App</span>: <span class="hljs-variable">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [todoList, setTodoList] = useState&lt;<span class="hljs-title">Todo</span>[]&gt;(initialTodos)
  <span class="hljs-keyword">const</span> [task, setTask] = useState&lt;string&gt;(<span class="hljs-string">''</span>)
  <span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Rendering &lt;App /&gt;'</span>)
  })
  <span class="hljs-keyword">const</span> <span class="hljs-title">handleCreate</span> = () =&gt; {
    <span class="hljs-keyword">const</span> newTodo = {
        <span class="hljs-attr">id</span>: <span class="hljs-title">Date</span>.<span class="hljs-title">now</span>(),
        task
    }
   
    <span class="hljs-comment">// Pushing the new todo to the list</span>
    <span class="hljs-title">setTodoList</span>([...todoList, newTodo])
   
    <span class="hljs-comment">// Resetting input value</span>
    <span class="hljs-title">setTask</span>(<span class="hljs-string">''</span>)
  }
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span>
<span class="hljs-tag">            </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"text"</span>
<span class="hljs-tag">            </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{task}</span>
<span class="hljs-tag">            </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{(e:</span><span class="hljs-tag"> </span><span class="hljs-attr">ChangeEvent</span><span class="hljs-tag">&lt;</span><span class="hljs-attr">HTMLInputElement</span><span class="hljs-tag">&gt;</span>) =&gt; setTask(e.target.value)}
        /&gt;
        <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{handleCreate}</span><span class="hljs-tag">&gt;</span>Create<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">List</span><span class="hljs-tag"> </span><span class="hljs-attr">todoList</span><span class="hljs-tag">=</span><span class="hljs-string">{todoList}</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span>
  )
}
export default App
</code></pre>
<p class="normal">Basically, we are <a id="_idIndexMarker279"/>defining some initial tasks and creating the <code class="inlineCode">todoList</code> state, which we will pass to the <code class="inlineCode">List</code> component. Then, you need to create the <code class="inlineCode">List.tsx</code> file with the following code:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">FC</span>, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title">Task</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Task'</span>
<span class="hljs-keyword">export</span> type <span class="hljs-title">Todo</span> = {
  <span class="hljs-attr">id</span>: number
  <span class="hljs-attr">task</span>: string
}
interface <span class="hljs-title">Props</span> {
  <span class="hljs-attr">todoList</span>: <span class="hljs-title">Todo</span>[]
}
<span class="hljs-keyword">const</span> <span class="hljs-title">List</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">(</span><span class="hljs-params">{ todoList }</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// This effect is executed every new render</span>
    <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Rendering &lt;List /&gt;'</span>)
  })
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
        {todoList.map((todo: Todo) =&gt; (
            <span class="hljs-tag">&lt;</span><span class="hljs-name">Task</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{todo.id}</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">{todo.id}</span><span class="hljs-tag"> </span><span class="hljs-attr">task</span><span class="hljs-tag">=</span><span class="hljs-string">{todo.task}</span><span class="hljs-tag"> /&gt;</span>
        ))}
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">List</span>
</code></pre>
<p class="normal">As you can see, we are <a id="_idIndexMarker280"/>rendering each task of the <code class="inlineCode">todoList</code> array by using the <code class="inlineCode">Task</code> component and we pass the task as a prop. I also added a <code class="inlineCode">useEffect</code> Hook to see how many renders we are performing.</p>
<p class="normal">Finally, we create our <code class="inlineCode">Task.tsx</code> file with the following code:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">FC</span>, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
interface <span class="hljs-title">Props</span> {
  <span class="hljs-attr">id</span>: number
  <span class="hljs-attr">task</span>: string
}
<span class="hljs-keyword">const</span> <span class="hljs-title">Task</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">(</span><span class="hljs-params">{ task }</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Rendering &lt;Task /&gt;'</span>, task)
  })
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>{task}<span class="hljs-tag">&lt;/</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">Task</span>
</code></pre>
<p class="normal">This is how we should see the to-do list:</p>
<figure class="mediaobject"><img alt="" height="542" src="../Images/B18414_08_04.png" width="636"/></figure>
<p class="packt_figref">Figure 8.4: To-do list</p>
<p class="normal">As you can see, when <a id="_idIndexMarker281"/>we render our to-do list, by default, we are performing two renders of the <code class="inlineCode">Task</code> component, one render for <code class="inlineCode">List</code>, and the other for the <code class="inlineCode">App</code> component. </p>
<p class="normal">Now, if we try to write a new task in the input, we can see that for each letter we write, we will again see all of those renders:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="660" src="../Images/B18414_08_05.png" width="669"/></figure>
<p class="packt_figref">Figure 8.5: Searching in the to-do list</p>
<p class="normal">As you can see, by just <a id="_idIndexMarker282"/>writing <code class="inlineCode">Go</code>, we have two new batches of renders, so we can determine that this component does not have good performance, and this is where <code class="inlineCode">memo</code> can help us to improve performance. In the next sections, we are going to learn how to implement <code class="inlineCode">memo</code>, <code class="inlineCode">useMemo</code>, and <code class="inlineCode">useCallback</code> to memoize a component, a value, and a function.</p>
<h3 class="heading-3" id="_idParaDest-128">Memoizing a component with memo</h3>
<p class="normal">The <code class="inlineCode">memo</code> <strong class="keyWord">High-Order Component</strong> (<strong class="keyWord">HOC</strong>) is similar to <code class="inlineCode">PureComponent</code> for a React class because it performs a shallow<a id="_idIndexMarker283"/> comparison of the props (meaning a superficial check), so if we try to render a component with the<a id="_idIndexMarker284"/> same props all the time, the component <a id="_idIndexMarker285"/>will render just once and will memoize. The only way to re-render the component is when a prop changes its value.</p>
<p class="normal">In order to fix our components to avoid multiple renders when we write in the input, we need to wrap our components in the <code class="inlineCode">memo</code> <strong class="keyWord">HOC</strong>. </p>
<p class="normal">The first component we will fix is our <code class="inlineCode">List</code> component, and you just need to affect <code class="inlineCode">import memo</code> and wrap the component in <code class="inlineCode">export default</code>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">FC</span>, useEffect, memo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">memo</span>(<span class="hljs-title">List</span>)
</code></pre>
<p class="normal">Then, you need to do the same with the <code class="inlineCode">Task</code> component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">FC</span>, useEffect, memo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">memo</span>(<span class="hljs-title">Task</span>)
</code></pre>
<p class="normal">Now, when we try to write <code class="inlineCode">Go</code> again in the input, let’s see how many renders we get this time:</p>
<figure class="mediaobject"><img alt="" height="472" src="../Images/B18414_08_06.png" width="656"/></figure>
<p class="packt_figref">Figure 8.6: Evaluating how many renders our to-do list is performing</p>
<p class="normal">Now, we just<a id="_idIndexMarker286"/> get the first batch of renders the first <a id="_idIndexMarker287"/>time, and then, when we write <code class="inlineCode">Go</code>, we just get two more renders of the <code class="inlineCode">App</code> component, which is totally fine because the task state (input value) that we are changing is actually part of the <code class="inlineCode">App</code> component.</p>
<p class="normal">Also, we can see how many renders we are performing when we create a new task by clicking on the <strong class="screenText">Create</strong> button:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="527" src="../Images/B18414_08_07.png" width="599"/></figure>
<p class="packt_figref">Figure 8.7: Improving performance</p>
<p class="normal">If you see, the<a id="_idIndexMarker288"/> first 16 renders are the word counting<a id="_idIndexMarker289"/> of the <code class="inlineCode">Go to the doctor</code> string, and then, when you click on the <strong class="screenText">Create</strong> button, you should see one render of the <code class="inlineCode">Task</code> component, one render of <code class="inlineCode">List</code>, and one render of the <code class="inlineCode">App</code> component. As you can see, we have improved performance a lot, and we are just performing the exact need that it renders.</p>
<div class="note">
<p class="normal">At this point, you’re probably thinking that the correct thing is to always add <code class="inlineCode">memo</code> to our components, or maybe you’re thinking, why React doesn’t do this by default for us? </p>
<p class="normal">The reason is <em class="italic">performance</em>, which means <em class="italic">it is not a good idea to add</em> <code class="inlineCode">memo</code> <em class="italic">to all our components unless it is totally necessary</em>; otherwise, the process of shallow comparisons and memorization will have inferior performance than if we don’t use it.</p>
<p class="normal">I have a rule when it comes to establishing whether it is a good idea to use <code class="inlineCode">memo</code>, and this rule is straightforward: <strong class="keyWord">just don’t use it</strong>. Normally, when we have small components or basic logic, we don’t need this <em class="italic">unless you’re working with large data from some API, your component needs to perform a lot of renders (normally huge lists), or when you notice that your app is going slow</em>. Only in that case would I recommend using <code class="inlineCode">memo</code>.</p>
</div>
<h3 class="heading-3" id="_idParaDest-129">Memoizing a value with useMemo </h3>
<p class="normal">Let’s suppose<a id="_idIndexMarker290"/> that we now want to implement a <a id="_idIndexMarker291"/>search feature in our to-do list. The first thing we need to do is to add a new state called <code class="inlineCode">term</code> to the <code class="inlineCode">App</code> component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> [term, setTerm] = <span class="hljs-title">useState</span>(<span class="hljs-string">''</span>)
</code></pre>
<p class="normal">Then, we need to create a function called <code class="inlineCode">handleSearch</code>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">handleSearch</span> = () =&gt; {
  <span class="hljs-title">setTerm</span>(task)
}
</code></pre>
<p class="normal">Right before the return, we will create <code class="inlineCode">filterTodoList</code>, which will filter the to-dos based on the task, and we will add a console there to see how many times it is being rendered:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> filteredTodoList = todoList.<span class="hljs-title">filter</span>(<span class="hljs-function">(</span><span class="hljs-params">todo: Todo</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Filtering...'</span>)
  <span class="hljs-keyword">return</span> todo.<span class="hljs-property">task</span>.<span class="hljs-title">toLowerCase</span>().<span class="hljs-title">includes</span>(term.<span class="hljs-title">toLowerCase</span>())
})
</code></pre>
<p class="normal">Finally, we need to add a new button next to the <strong class="screenText">Create</strong> button that already exists:</p>
<pre class="programlisting code"><code class="hljs-code">&lt;button onClick={handleSearch}&gt;<span class="hljs-title">Search</span>&lt;/button&gt;
</code></pre>
<p class="normal">At this point, I<a id="_idIndexMarker292"/> recommend that you remove or <a id="_idIndexMarker293"/>comment <code class="inlineCode">console.log</code> in the <code class="inlineCode">List</code> and <code class="inlineCode">Task</code> components so that we can focus on the performance of filtering:</p>
<figure class="mediaobject"><img alt="" height="479" src="../Images/B18414_08_08.png" width="632"/></figure>
<p class="packt_figref">Figure 8.8: Reviewing filtering performance</p>
<p class="normal">When you run the application again, you will see that filtering is being executed twice, and then the <code class="inlineCode">App</code> component as well, and everything looks good here, but what’s the problem with this? </p>
<p class="normal">Try to write <code class="inlineCode">Go to the doctor</code> again in the input and let’s see how many counts of <code class="inlineCode">Rendering…</code> and <code class="inlineCode">Filtering…</code> you get:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="862" src="../Images/B18414_08_09.png" width="567"/></figure>
<p class="packt_figref">Figure 8.9: Bad performance on filtering</p>
<p class="normal">As you can<a id="_idIndexMarker294"/> see, for each letter you write, you will<a id="_idIndexMarker295"/> get two filtering calls and one <code class="inlineCode">App</code> render. You don’t need to be a genius to see that this is bad performance; not to mention that if you are working with a large data array, this will be worse, so how can we fix this issue?</p>
<p class="normal">The <code class="inlineCode">useMemo</code> Hook is our hero in this situation, and basically, we need to move our filter inside <code class="inlineCode">useMemo</code>, but first, let’s see the syntax:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> filteredTodoList = <span class="hljs-title">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title">SomeProcessHere</span>, [])
</code></pre>
<p class="normal">The <code class="inlineCode">useMemo</code> Hook will memoize the result (value) of a function and will have some dependencies to listen to. Let’s see how we can implement it:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> filteredTodoList = <span class="hljs-title">useMemo</span>(<span class="hljs-function">() =&gt;</span> todoList.<span class="hljs-title">filter</span>(<span class="hljs-function">(</span><span class="hljs-params">todo: Todo</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Filtering...'</span>)
  <span class="hljs-keyword">return</span> todo.<span class="hljs-property">task</span>.<span class="hljs-title">toLowerCase</span>().<span class="hljs-title">includes</span>(term.<span class="hljs-title">toLowerCase</span>())
}), [])
</code></pre>
<p class="normal">Now, if you write something again in the input, you will see that filtering won’t be executed all the time, as was the case previously:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="325" src="../Images/B18414_08_10.png" width="512"/></figure>
<p class="packt_figref">Figure 8.10: Improving the performance of filtering</p>
<p class="normal">This is great, but there is<a id="_idIndexMarker296"/> still one small problem. If you try to click <a id="_idIndexMarker297"/>on the <strong class="screenText">Search</strong> button, it won’t filter, and this is because we missed the dependencies. </p>
<p class="normal">Actually, if you see the console warnings, you will see this warning:</p>
<figure class="mediaobject"><img alt="Text  Description automatically generated" height="89" src="../Images/B18414_08_11.png" width="551"/></figure>
<p class="packt_figref">Figure 8.11: react-hooks/exhaustive-deps</p>
<p class="normal">You need to add the <code class="inlineCode">term</code> and <code class="inlineCode">todoList</code> dependencies to the array:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> filteredTodoList = <span class="hljs-title">useMemo</span>(<span class="hljs-function">() =&gt;</span> todoList.<span class="hljs-title">filter</span>(<span class="hljs-function">(</span><span class="hljs-params">todo: Todo</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'</span><span class="hljs-string">Filtering...'</span>)
  <span class="hljs-keyword">return</span> todo.<span class="hljs-property">task</span>.<span class="hljs-title">toLowerCase</span>().<span class="hljs-title">includes</span>(term.<span class="hljs-title">toLowerCase</span>())
}), [term, todoList])
</code></pre>
<p class="normal">It should <a id="_idIndexMarker298"/>now work if you write <code class="inlineCode">Go</code> and click on<a id="_idIndexMarker299"/> the <strong class="screenText">Search</strong> button:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="330" src="../Images/B18414_08_12.png" width="498"/></figure>
<p class="packt_figref">Figure 8.12: After fixing the warning</p>
<p class="normal">Here, we have to use the same rule that we used for <code class="inlineCode">memo</code>; <em class="italic">just don’t use it until absolutely necessary</em>.</p>
<h3 class="heading-3" id="_idParaDest-130">Memoizing a function definition with useCallback</h3>
<p class="normal">Now we will add a <a id="_idIndexMarker300"/>delete task feature to<a id="_idIndexMarker301"/> learn how <code class="inlineCode">useCallback</code> works. The first thing we need to do is to create a new function called <code class="inlineCode">handleDelete</code> in our <code class="inlineCode">App</code> component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">handleDelete</span> = (<span class="hljs-params">taskId: number</span>) =&gt; {
  <span class="hljs-keyword">const</span> newTodoList = todoList.<span class="hljs-title">filter</span>(<span class="hljs-function">(</span><span class="hljs-params">todo: Todo</span><span class="hljs-function">) =&gt;</span> todo.<span class="hljs-property">id</span> !== taskId)
  <span class="hljs-title">setTodoList</span>(newTodoList)
}
</code></pre>
<p class="normal">And then you need to pass this function to the <code class="inlineCode">List</code> component as a prop:</p>
<pre class="programlisting code"><code class="hljs-code">&lt;<span class="hljs-title">List</span> todoList={filteredTodoList} handleDelete={handleDelete} /&gt;
</code></pre>
<p class="normal">Then, in our <code class="inlineCode">List</code> component, you need to add the prop to the <code class="inlineCode">Props</code> interface:</p>
<pre class="programlisting code"><code class="hljs-code">interface <span class="hljs-title">Props</span> {
  <span class="hljs-attr">todoList</span>: <span class="hljs-title">Todo</span>[]
  <span class="hljs-attr">handleDelete</span>: any
}
</code></pre>
<p class="normal">Next, you need to pull it from the props and pass it down to the <code class="inlineCode">Task</code> component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">List</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">(</span><span class="hljs-params">{ todoList, handleDelete }</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// This effect is executed every new render</span>
    <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Rendering &lt;List /&gt;'</span>)
  })
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
        {todoList.map((todo: Todo) =&gt; (
        <span class="hljs-tag">&lt;</span><span class="hljs-name">Task</span>
<span class="hljs-tag">          </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{todo.id}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">{todo.id}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">task</span><span class="hljs-tag">=</span><span class="hljs-string">{todo.task}</span>
<span class="hljs-tag">          </span><span class="hljs-attr">handleDelete</span><span class="hljs-tag">=</span><span class="hljs-string">{handleDelete}</span>
<span class="hljs-tag">            /&gt;</span>
        ))}
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
  )
}
</code></pre>
<p class="normal">In the <code class="inlineCode">Task</code> component, you need to create a button that will execute <code class="inlineCode">handleDelete</code> <code class="inlineCode">onClick</code>:</p>
<pre class="programlisting code"><code class="hljs-code">interface <span class="hljs-title">Props</span> {
  <span class="hljs-attr">id</span>: number
  <span class="hljs-attr">task</span>: string
  <span class="hljs-attr">handleDelete</span>: any
}
<span class="hljs-keyword">const</span> <span class="hljs-title">Task</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">(</span><span class="hljs-params">{ id, task, handleDelete }</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Rendering &lt;Task /&gt;'</span>, task)
  })
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>{task} <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> handleDelete(id)}&gt;X<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
  )
}
</code></pre>
<p class="normal">At this point, I recommend that you remove or comment <code class="inlineCode">console.log</code> in the <code class="inlineCode">List</code> and <code class="inlineCode">Task</code> components so that we can focus on the performance of filtering. Now you should <a id="_idIndexMarker302"/>see the <strong class="screenText">X</strong> button next to <a id="_idIndexMarker303"/>the task:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="391" src="../Images/B18414_08_13.png" width="605"/></figure>
<p class="packt_figref">Figure 8.13: Let’s delete a task</p>
<p class="normal">If you<a id="_idIndexMarker304"/> click on the <strong class="screenText">X</strong> for <code class="inlineCode">Go shopping</code>, you<a id="_idIndexMarker305"/> should be able to remove it:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="425" src="../Images/B18414_08_14.png" width="577"/></figure>
<p class="packt_figref">Figure 8.14: Deleting a task</p>
<p class="normal">So far, so good, right? But again, we have a little issue with this implementation. If you now try to write something in the input, such as <code class="inlineCode">Go to the doctor</code>, let’s see what happens:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="475" src="../Images/B18414_08_15.png" width="501"/></figure>
<p class="packt_figref">Figure 8.15: Bad performance</p>
<p class="normal">As you can<a id="_idIndexMarker306"/> see, we are performing <code class="inlineCode">71</code> renders of all the components again. At this point, you are probably thinking<a id="_idIndexMarker307"/> about, <em class="italic">what is going on if we have already implemented the memo HOC to memoize the components?</em> But the problem now is that our <code class="inlineCode">handleDelete</code> function is being passed to two components, from <code class="inlineCode">App</code> to <code class="inlineCode">List</code> and <code class="inlineCode">Task</code>, and the issue is that this function is regenerated every time we have a new re-render, in this case, every time we write something. So how do we fix this problem?</p>
<p class="normal">The <code class="inlineCode">useCallback</code> Hook is <a id="_idIndexMarker308"/>the hero in this case and is<a id="_idIndexMarker309"/> very similar to <code class="inlineCode">useMemo</code> in the syntax, but the main difference is that instead of memorizing the result value of a function, as <code class="inlineCode">useMemo</code> does, it is memorizing the <strong class="keyWord">function definition</strong> instead:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> handleDelete = <span class="hljs-title">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title">SomeFunctionDefinition</span>, [])
</code></pre>
<p class="normal">Our <code class="inlineCode">handleDelete</code> function should be like this:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> handleDelete = <span class="hljs-title">useCallback</span>(<span class="hljs-function">(</span><span class="hljs-params">taskId: number</span><span class="hljs-function">) =&gt;</span> {
  <span class="hljs-keyword">const</span> newTodoList = todoList.<span class="hljs-title">filter</span>(<span class="hljs-function">(</span><span class="hljs-params">todo: Todo</span><span class="hljs-function">) =&gt;</span> todo.<span class="hljs-property">id</span> !== taskId)
  <span class="hljs-title">setTodoList</span>(newTodoList)
}, [todoList])
</code></pre>
<p class="normal">Now, it should work just fine if we write <code class="inlineCode">Go to the doctor</code> again:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="404" src="../Images/B18414_08_16.png" width="558"/></figure>
<p class="packt_figref">Figure 8.16: Improving performance</p>
<p class="normal">Now, instead of <code class="inlineCode">71</code> renders, we just have <code class="inlineCode">23</code>, which is normal, and we are also able to delete tasks:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="450" src="../Images/B18414_08_17.png" width="550"/></figure>
<p class="packt_figref">Figure 8.17: Deleting tasks</p>
<p class="normal">As you can see, the <code class="inlineCode">useCallback</code> Hook helps us to improve performance significantly. In the<a id="_idIndexMarker310"/> next section, you will learn <a id="_idIndexMarker311"/>how to memoize a function passed as an argument in the <code class="inlineCode">useEffect</code> Hook.</p>
<h3 class="heading-3" id="_idParaDest-131">Memoizing a function passed as an argument in effect</h3>
<p class="normal">There is a special<a id="_idIndexMarker312"/> case where we will need to use the <code class="inlineCode">useCallback</code> Hook, and this is when we pass a function as an argument in a <code class="inlineCode">useEffect</code> Hook, for example, in our <code class="inlineCode">App</code> component. Let’s create a new <code class="inlineCode">useEffect</code> block:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">printTodoList</span> = () =&gt; {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Changing todoList'</span>)
}
<span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title">printTodoList</span>()
}, [todoList])
</code></pre>
<p class="normal">In this case, we are listening for changes to the <code class="inlineCode">todoList</code> state. If you run this code and you create or remove a task, it will work just fine (remember to remove all the other consoles first):</p>
<figure class="mediaobject"><img alt="Graphical user interface  Description automatically generated" height="393" src="../Images/B18414_08_18.png" width="527"/></figure>
<p class="packt_figref">Figure 8.18: Changing the to-do list</p>
<p class="normal">Everything <a id="_idIndexMarker313"/>works fine, but let’s add <code class="inlineCode">todoList</code> to the console:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">printTodoList</span> = () =&gt; {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Changing todoList'</span>, todoList)
}
</code></pre>
<p class="normal">If you’re using Visual Studio Code, you will get the following warning:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="153" src="../Images/B18414_08_19.png" width="825"/></figure>
<p class="packt_figref">Figure 8.19: react-hooks/exhaustive-deps</p>
<p class="normal">Basically, it is <a id="_idIndexMarker314"/>asking us to add the <code class="inlineCode">printTodoList</code> function to the dependencies:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title">printTodoList</span>()
}, [todoList, printTodoList])
</code></pre>
<p class="normal">But now, after we do that, we get another warning:</p>
<figure class="mediaobject"><img alt="Text  Description automatically generated" height="94" src="../Images/B18414_08_20.png" width="825"/></figure>
<p class="packt_figref">Figure 8.20: useCallback warning</p>
<p class="normal">The reason why we get this warning is that we are now manipulating the state (consoling the state), which is why we need to add a <code class="inlineCode">useCallback</code> Hook to this function to fix this issue:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> printTodoList = <span class="hljs-title">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable">console</span>.<span class="hljs-title">log</span>(<span class="hljs-string">'Changing todoList'</span>, todoList)
}, [todoList])
</code></pre>
<p class="normal">Now, when we delete a task, we can see that <code class="inlineCode">todoList</code> updated correctly:</p>
<figure class="mediaobject"><img alt="Text  Description automatically generated" height="309" src="../Images/B18414_08_21.png" width="514"/></figure>
<p class="packt_figref">Figure 8.21: Changing to-do list data</p>
<p class="normal">At this point, this <a id="_idIndexMarker315"/>may be information overload for you, so let’s have a quick recap:</p>
<ul>
<li class="bulletList"><code class="inlineCode">memo</code>:<ul>
<li class="bulletList">Memoizes a <strong class="keyWord">component</strong></li>
<li class="bulletList">Re-memoizes when props change</li>
<li class="bulletList">Avoids re-renders</li>
</ul>
</li>
<li class="bulletList"><code class="inlineCode">useMemo</code>:<ul>
<li class="bulletList">Memoizes a calculated value</li>
<li class="bulletList">For computed properties</li>
<li class="bulletList">For heavy processes</li>
</ul>
</li>
<li class="bulletList"><code class="inlineCode">useCallback</code>:<ul>
<li class="bulletList">Memoizes a <strong class="keyWord">function definition</strong> to avoid redefining it on each render</li>
<li class="bulletList">Use it whenever a function is passed as an effect argument</li>
<li class="bulletList">Use it whenever a function is passed by props to a memoized component</li>
</ul>
</li>
</ul>
<p class="normal">And finally, do not <a id="_idIndexMarker316"/>forget the golden rule: <em class="italic">Do not use them until absolutely necessary</em>.</p>
<p class="normal">In the next section, we are going to learn how to use the new <code class="inlineCode">useReducer</code> Hook.</p>
<h1 class="heading-1" id="_idParaDest-132">Understanding the useReducer Hook</h1>
<p class="normal">You probably have some <a id="_idIndexMarker317"/>experience using Redux (<code class="inlineCode">react-redux</code>) with class components, and if that is the case, then you will understand how <code class="inlineCode">useReducer</code> works. The concepts are basically the same: actions, reducers, dispatch, store, and state. Even if, in general, it seems very similar to react-redux, they have some differences. The main difference is that react-redux provides middleware and wrappers such as <strong class="keyWord">thunk</strong>, <strong class="keyWord">sagas</strong>, and many more besides, while <code class="inlineCode">useReducer</code> just gives you a <code class="inlineCode">dispatch</code> method that you can use to dispatch plain objects as actions. Also, <code class="inlineCode">useReducer</code> does not have a store by default; instead, you can create one using <code class="inlineCode">useContext</code>, but this is just reinventing the wheel.</p>
<p class="normal">Let’s create a basic application to understand how <code class="inlineCode">useReducer</code> works. You can start by creating a new React app:</p>
<pre class="programlisting con"><code class="hljs-con">  npx create-react-app reducer --template typescript
</code></pre>
<p class="normal">Then, as always, you can delete all files in your <code class="inlineCode">src</code> folder except <code class="inlineCode">App.tsx</code> and <code class="inlineCode">index.tsx</code> to start a brand-new application.</p>
<p class="normal">We will create a basic <code class="inlineCode">Notes</code> application where we can <code class="inlineCode">list</code>, <code class="inlineCode">delete</code>, <code class="inlineCode">create</code>, or <code class="inlineCode">update</code> our notes using <code class="inlineCode">useReducer</code>. The first thing you need to do is import the <code class="inlineCode">Notes</code> component, which we will create later, into your <code class="inlineCode">App</code> component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> <span class="hljs-title">Notes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Notes'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title">App</span>() {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">Notes</span><span class="hljs-tag"> /&gt;</span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">App</span>
</code></pre>
<p class="normal">Now, in our <code class="inlineCode">Notes</code> component, you first need to import <code class="inlineCode">useReducer</code> and <code class="inlineCode">useState</code>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">Import</span> { useReducer, useState, <span class="hljs-title">ChangeEvent</span> } <span class="hljs-keyword">from</span> 'react'
</code></pre>
<p class="normal">Then we need to define some TypeScript types that we need to use for our <code class="inlineCode">Note</code> object, the <code class="inlineCode">Redux</code> action, and the <strong class="keyWord">action types</strong>:</p>
<pre class="programlisting code"><code class="hljs-code">type <span class="hljs-title">Note</span> = {
  <span class="hljs-attr">id</span>: number
  <span class="hljs-attr">note</span>: string
}
type <span class="hljs-title">Action</span> = {
  <span class="hljs-attr">type</span>: string
  payload?: any
}
type <span class="hljs-title">ActionTypes</span> = {
  <span class="hljs-attr">ADD</span>: <span class="hljs-string">'ADD'</span>
  <span class="hljs-attr">UPDATE</span>: <span class="hljs-string">'UPDATE'</span>
  <span class="hljs-attr">DELETE</span>: <span class="hljs-string">'DELETE'</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-attr">actionType</span>: <span class="hljs-title">ActionTypes</span> = {
  <span class="hljs-attr">ADD</span>: <span class="hljs-string">'</span><span class="hljs-string">ADD'</span>,
  <span class="hljs-attr">DELETE</span>: <span class="hljs-string">'DELETE'</span>,
  <span class="hljs-attr">UPDATE</span>: <span class="hljs-string">'UPDATE'</span>
}
</code></pre>
<p class="normal">After this, we need to<a id="_idIndexMarker318"/> create <code class="inlineCode">initialNotes</code> (also known as <code class="inlineCode">initialState</code>) with some dummy notes:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-attr">initialNotes</span>: <span class="hljs-title">Note</span>[] = [
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">note</span>: <span class="hljs-string">'Note 1'</span>
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">note</span>: <span class="hljs-string">'Note 2'</span>
  }
]
</code></pre>
<p class="normal">If you remember how the reducers work, then this will seem very similar to how we handle the reducer using a <code class="inlineCode">switch</code> statement, so as to perform basic operations such as <code class="inlineCode">ADD</code>, <code class="inlineCode">DELETE</code>, and <code class="inlineCode">UPDATE</code>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">reducer</span> = (<span class="hljs-params">state: Note[], action: Action</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> actionType.<span class="hljs-property">ADD</span>:
        <span class="hljs-keyword">return</span> [...state, action.<span class="hljs-property">payload</span>]
    <span class="hljs-keyword">case</span> actionType.<span class="hljs-property">DELETE</span>:
        <span class="hljs-keyword">return</span> state.<span class="hljs-title">filter</span>(<span class="hljs-params">note</span><span class="hljs-function"> =&gt;</span> note.<span class="hljs-property">id</span> !== action.<span class="hljs-property">payload</span>)
   
    <span class="hljs-keyword">case</span> actionType.<span class="hljs-property">UPDATE</span>:
        <span class="hljs-keyword">const</span> updatedNote = action.<span class="hljs-property">payload</span>
        <span class="hljs-keyword">return</span> state.<span class="hljs-title">map</span>(<span class="hljs-function">(</span><span class="hljs-params">n: Note</span><span class="hljs-function">) =&gt;</span> n.<span class="hljs-property">id</span> === updatedNote.<span class="hljs-property">id</span> ? updatedNote : n)
   
    <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">return</span> state
  }
}
</code></pre>
<p class="normal">Finally, the component is very straightforward. Basically, you get the notes and the dispatch method from the <code class="inlineCode">useReducer</code> Hook (similar to <code class="inlineCode">useState</code>), and you need to pass the <code class="inlineCode">reducer</code> function and <code class="inlineCode">initialNotes</code> <code class="inlineCode">(initialState</code>):</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">Notes</span> = () =&gt; {
  <span class="hljs-keyword">const</span> [notes, dispatch] = <span class="hljs-title">useReducer</span>(reducer, initialNotes)
  <span class="hljs-keyword">const</span> [note, setNote] = useState&lt;string&gt;(<span class="hljs-string">''</span>)
  ...
}
</code></pre>
<p class="normal">Then, we<a id="_idIndexMarker319"/> have a <code class="inlineCode">handleSubmit</code> function to create a new note when we write something in the input. Then, we press <em class="keystroke">Enter</em>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> <span class="hljs-title">handleSubmit</span> = (<span class="hljs-params">e: ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
  e.<span class="hljs-title">preventDefault</span>()
  <span class="hljs-keyword">const</span> newNote = {
    <span class="hljs-attr">id</span>: <span class="hljs-title">Date</span>.<span class="hljs-title">now</span>(),
    note
  }
  <span class="hljs-title">dispatch</span>({ <span class="hljs-attr">type</span>: actionType.<span class="hljs-property">ADD</span>, <span class="hljs-attr">payload</span>: newNote })
}
</code></pre>
<p class="normal">Finally, we render our <code class="inlineCode">Notes</code> list with <code class="inlineCode">map</code>, and we also create two buttons, one for <code class="inlineCode">delete</code> and one for <code class="inlineCode">update</code>, and then the input should be wrapped into a <code class="inlineCode">&lt;form&gt;</code> tag:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">return</span> (
  <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">h2</span><span class="hljs-tag">&gt;</span>Notes<span class="hljs-tag">&lt;/</span><span class="hljs-name">h2</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
        {notes.map((n: Note) =&gt; (
            <span class="hljs-tag">&lt;</span><span class="hljs-name">li</span><span class="hljs-tag"> </span><span class="hljs-attr">key</span><span class="hljs-tag">=</span><span class="hljs-string">{n.id}</span><span class="hljs-tag">&gt;</span>
               {n.note} {' '}
          
            <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> dispatch({ type: actionType.DELETE, payload: n.id })}&gt;
           X
         <span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
         <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span>
<span class="hljs-tag">                 </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{()</span><span class="hljs-tag"> =&gt;</span> dispatch({ type: actionType.UPDATE, payload: {...n, note} })}
         &gt;
            Update
         <span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
           <span class="hljs-tag">&lt;/</span><span class="hljs-name">li</span><span class="hljs-tag">&gt;</span>
        ))}
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">ul</span><span class="hljs-tag">&gt;</span>
     
    <span class="hljs-tag">&lt;</span><span class="hljs-name">form</span><span class="hljs-tag"> </span><span class="hljs-attr">onSubmit</span><span class="hljs-tag">=</span><span class="hljs-string">{handleSubmit}</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span>
<span class="hljs-tag">            </span><span class="hljs-attr">placeholder</span><span class="hljs-tag">=</span><span class="hljs-string">"New note"</span>
<span class="hljs-tag">            </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{note}</span>
<span class="hljs-tag">            </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{e</span><span class="hljs-tag"> =&gt;</span> setNote(e.target.value)}
        /&gt;
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">form</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">Notes</span>
</code></pre>
<p class="normal">If you run the<a id="_idIndexMarker320"/> application, you should see the following output:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="721" src="../Images/B18414_08_22.png" width="825"/></figure>
<p class="packt_figref">Figure 8.22: React DevTools</p>
<p class="normal">As you can see<a id="_idIndexMarker321"/> in the <strong class="screenText">React DevTools</strong>, the <code class="inlineCode">Reducer</code> object contains the two notes that we have defined as our initial state. </p>
<p class="normal">Now, if you write something in the input and you press <em class="keystroke">Enter</em>, you should be able to create a new note:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="829" src="../Images/B18414_08_23.png" width="693"/></figure>
<p class="packt_figref">Figure 8.23: Creating a new note</p>
<p class="normal">Then, if you want to <a id="_idIndexMarker322"/>delete a note, you just need to click on the <strong class="screenText">X</strong> button. Let’s remove <strong class="screenText">Note 2</strong>:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text, application  Description automatically generated" height="733" src="../Images/B18414_08_24.png" width="622"/></figure>
<p class="packt_figref">Figure 8.24: Deleting a note</p>
<p class="normal">Finally, you can write <a id="_idIndexMarker323"/>anything you want in the input, and if you click on the <strong class="screenText">Update</strong> button, you will change the note value:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text, application  Description automatically generated" height="747" src="../Images/B18414_08_25.png" width="634"/></figure>
<p class="packt_figref">Figure 8.25: Updating a note</p>
<p class="normal">Nice, huh? As you<a id="_idIndexMarker324"/> can see, the <code class="inlineCode">useReducer</code> Hook is pretty much the same as <code class="inlineCode">redux</code> in terms of the dispatch method, actions, and reducers, but the main difference is that this is limited just to the context of your component and its child, so if you need a global store to be accessible from your entire application, then you should use <code class="inlineCode">react-redux</code> instead.</p>
<h1 class="heading-1" id="_idParaDest-133">Summary</h1>
<p class="normal">I hope you enjoyed reading this chapter, which is full of very good information pertaining to the new React Hooks. So far, you have learned how the new React Hooks work; how to fetch data with Hooks; how to migrate a class component to <strong class="keyWord">React Hooks</strong>; how the effects work, the difference between <code class="inlineCode">memo</code>, <code class="inlineCode">useMemo</code>, and <code class="inlineCode">useCallback</code>; and finally, you learned how the <code class="inlineCode">useReducer</code> Hook works and the main difference compared with <code class="inlineCode">react-redux</code>. This will help you to improve the performance of your React components.</p>
<p class="normal">In the next chapter, we will learn about React Router v6 and how to implement it in our projects.</p>
</div>
</div></body></html>