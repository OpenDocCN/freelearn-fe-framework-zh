<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer333">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     14
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-257">
    <span class="koboSpan" id="kobo.2.1">
     Bringing Applications to Production
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     A web application should typically run on the web and be accessible by anyone and from anywhere.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     It needs two essential ingredients: a web server hosting the application and a production build to deploy it to that server.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     In this chapter, we will focus on the second part of the recipe.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.4.1">
     In a nutshell, a production build of a web application is an optimized version of the application code that is smaller, faster, and more performant.
    </span>
    <span class="koboSpan" id="kobo.4.2">
     Primarily, it is a process that takes all the code files of the application, applies optimization techniques, and converts them into a single-bundle file.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.5.1">
     In the previous chapters, we went through the many parts involved in building an Angular application.
    </span>
    <span class="koboSpan" id="kobo.5.2">
     We need just one last piece to connect the dots and make our application available for anyone to use, which is to build it and deploy it to a web server.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.6.1">
     In this chapter, we will learn about the following concepts:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.7.1">
      Building an Angular application
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.8.1">
      Limiting the application bundle size
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.9.1">
      Optimizing the application bundle
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.10.1">
      Deploying an Angular application
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-258">
    <span class="koboSpan" id="kobo.11.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.12.1">
     The chapter contains various code samples to walk you through the concept of bringing applications to production.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.13.1">
     You can find the related source code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.14.1">
      ch14
     </span>
    </code>
    <span class="koboSpan" id="kobo.15.1">
     folder of the following GitHub repository:
    </span>
   </p>
   <p class="normal">
    <a href="https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition">
     <span class="url">
      <span class="koboSpan" id="kobo.16.1">
       https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition
      </span>
     </span>
    </a>
   </p>
   <h1 class="heading-1" id="_idParaDest-259">
    <span class="koboSpan" id="kobo.17.1">
     Building an Angular application
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     To build an
    </span>
    <a id="_idIndexMarker863">
    </a>
    <span class="koboSpan" id="kobo.19.1">
     Angular application, we use the following command of the Angular CLI:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.20.1">ng build
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.21.1">
     The build process boots up the Angular compiler, which primarily collects all TypeScript and HTML files of our application code and converts them into JavaScript.
    </span>
    <span class="koboSpan" id="kobo.21.2">
     CSS stylesheet files such as SCSS are converted into pure CSS files.
    </span>
    <span class="koboSpan" id="kobo.21.3">
     The build process ensures the fast and optimal rendering of our application in the browser.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     An Angular application contains various TypeScript files not generally used during runtime, such as unit tests or tooling helpers.
    </span>
    <span class="koboSpan" id="kobo.22.2">
     The compiler knows which files to collect for the build process by reading the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.23.1">
      files
     </span>
    </code>
    <span class="koboSpan" id="kobo.24.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.25.1">
      tsconfig.app.json
     </span>
    </code>
    <span class="koboSpan" id="kobo.26.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-punctuation"><span class="koboSpan" id="kobo.27.1">{</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.28.1">"extends"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.29.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.30.1">"./tsconfig.json"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.31.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.32.1">"compilerOptions"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.33.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.34.1">{</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.35.1">"outDir"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.36.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.37.1">"./out-tsc/app"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.38.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.39.1">"types"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.40.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.41.1">[]</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.42.1">},</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.43.1">"files": [</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.44.1">"src/main.ts"</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.45.1">],</span></strong></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.46.1">"include"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.47.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.48.1">[</span></span>
    <span class="hljs-string"><span class="koboSpan" id="kobo.49.1">"src/**/*.d.ts"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.50.1">]</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.51.1">}</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.52.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.53.1">
      src/main.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.54.1">
     file is the main entry point of the application and helps Angular to go through all the components, services, and other Angular artifacts that our application needs.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.55.1">
     The output of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.56.1">
      ng build
     </span>
    </code>
    <span class="koboSpan" id="kobo.57.1">
     command looks like the following:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.58.1">Initial chunk files   | Names         |  Raw size | Estimated transfer size
main-N4USDVTP.js      | main          | 206.91 kB |                55.87 kB
polyfills-SCHOHYNV.js | polyfills     |  34.52 kB |                11.29 kB
styles-5INURTSO.css   | styles        |   0 bytes |                 0 bytes
                      | Initial total | 241.44 kB |                67.16 kB
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.59.1">
     This output displays the JavaScript and CSS files generated from building the Angular application, namely:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.60.1">
       main
      </span>
     </code>
     <span class="koboSpan" id="kobo.61.1">
      : The actual application code that we have written
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.62.1">
       polyfills
      </span>
     </code>
     <span class="koboSpan" id="kobo.63.1">
      : Feature polyfills for older browsers
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.64.1">
       styles
      </span>
     </code>
     <span class="koboSpan" id="kobo.65.1">
      : Global CSS styles of our application
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.66.1">
     The
    </span>
    <a id="_idIndexMarker864">
    </a>
    <span class="koboSpan" id="kobo.67.1">
     Angular compiler outputs the preceding files into a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.68.1">
      dist\appName\browser
     </span>
    </code>
    <span class="koboSpan" id="kobo.69.1">
     folder, where
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.70.1">
      appName
     </span>
    </code>
    <span class="koboSpan" id="kobo.71.1">
     is the application name.
    </span>
    <span class="koboSpan" id="kobo.71.2">
     It also contains the following files:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.72.1">
       favicon.ico
      </span>
     </code>
     <span class="koboSpan" id="kobo.73.1">
      : The icon of the Angular application
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.74.1">
       index.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.75.1">
      : The main HTML file of the Angular application
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.76.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.77.1">
      ng build
     </span>
    </code>
    <span class="koboSpan" id="kobo.78.1">
     command of the Angular CLI can be run in two modes: development and production.
    </span>
    <span class="koboSpan" id="kobo.78.2">
     By default, it is run in production mode.
    </span>
    <span class="koboSpan" id="kobo.78.3">
     To run it in development mode, we should run the following Angular CLI command:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.79.1">ng build --configuration=development
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.80.1">
     The preceding command will have an output that looks like the following:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.81.1">Initial chunk files | Names         | Raw size
main.js             | main          |  1.25 MB | 
polyfills.js        | polyfills     | 90.23 kB | 
styles.css          | styles        | 95 bytes | 
                    | Initial total |  1.35 MB
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.82.1">
     In the preceding output, you may notice that the names of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.83.1">
      Initial chunk files
     </span>
    </code>
    <span class="koboSpan" id="kobo.84.1">
     do not contain hash numbers, as in the case of a production build.
    </span>
    <span class="koboSpan" id="kobo.84.2">
     In production mode, the Angular CLI performs various optimization techniques on the application code, such as image optimization
    </span>
    <a id="_idIndexMarker865">
    </a>
    <span class="koboSpan" id="kobo.85.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.86.1">
      Ahead of Time
     </span>
    </strong>
    <span class="koboSpan" id="kobo.87.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.88.1">
      AOT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.89.1">
     ) compilation, so that the final output is suitable for hosting
    </span>
    <a id="_idIndexMarker866">
    </a>
    <span class="koboSpan" id="kobo.90.1">
     in a web server and a production environment.
    </span>
    <span class="koboSpan" id="kobo.90.2">
     The hash number added to each file ensures that the cache of a browser will quickly invalidate them upon deploying a newer version of the application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.91.1">
     When we ran the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.92.1">
      ng build
     </span>
    </code>
    <span class="koboSpan" id="kobo.93.1">
     command of the Angular CLI in development mode, we used the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.94.1">
      --configuration
     </span>
    </code>
    <span class="koboSpan" id="kobo.95.1">
     option.
    </span>
    <span class="koboSpan" id="kobo.95.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.96.1">
      --configuration
     </span>
    </code>
    <span class="koboSpan" id="kobo.97.1">
     option allows us to run an Angular application in different environments.
    </span>
    <span class="koboSpan" id="kobo.97.2">
     We will learn how to define Angular environments in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-260">
    <span class="koboSpan" id="kobo.98.1">
     Building for different environments
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.99.1">
     An
    </span>
    <a id="_idIndexMarker867">
    </a>
    <span class="koboSpan" id="kobo.100.1">
     organization may want to build an Angular application for multiple environments that require different variables, such as a backend API endpoint and application local settings.
    </span>
    <span class="koboSpan" id="kobo.100.2">
     A common use case is a staging environment for testing the application before deploying it to production.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.101.1">
     The Angular CLI enables us to define different configurations for each environment and build our application with each one.
    </span>
    <span class="koboSpan" id="kobo.101.2">
     We can execute the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.102.1">
      ng build
     </span>
    </code>
    <span class="koboSpan" id="kobo.103.1">
     command while passing the configuration name as a parameter using the following syntax:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.104.1">ng build --configuration=name
</span></code></pre>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.105.1">
      We can also pass a configuration in other Angular CLI commands, such as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.106.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.107.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.108.1">
       ng test
      </span>
     </code>
     <span class="koboSpan" id="kobo.109.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.110.1">
     We can use the following Angular CLI command to start working with environments:
    </span>
   </p>
   <pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.111.1">ng generate environments
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.112.1">
     This command will create a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.113.1">
      src\environments
     </span>
    </code>
    <span class="koboSpan" id="kobo.114.1">
     folder in the Angular project that contains the following files:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.115.1">
       environment.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.116.1">
      : The default environment of the application, which is used during production
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.117.1">
       environment.development.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.118.1">
      : The application environment used during development
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.119.1">
     It will
    </span>
    <a id="_idIndexMarker868">
    </a>
    <span class="koboSpan" id="kobo.120.1">
     also add a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.121.1">
      fileReplacements
     </span>
    </code>
    <span class="koboSpan" id="kobo.122.1">
     section in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.123.1">
      angular.json
     </span>
    </code>
    <span class="koboSpan" id="kobo.124.1">
     configuration file of the Angular project:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.125.1">"development"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.126.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.127.1">{</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.128.1">"optimization"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.129.1">:</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.130.1">false</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.131.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.132.1">"extractLicenses"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.133.1">:</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.134.1">false</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.135.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.136.1">"sourceMap"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.137.1">:</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.138.1">true</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.139.1">,</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.140.1">"fileReplacements": [</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.141.1">{</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.142.1">"replace": "src/environments/environment.ts",</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.143.1">"with": "src/environments/environment.development.ts"</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.144.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.145.1">]</span></strong></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.146.1">}</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.147.1">
     In the preceding snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.148.1">
      fileReplacements
     </span>
    </code>
    <span class="koboSpan" id="kobo.149.1">
     property defines the environment file that will replace the default one while executing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.150.1">
      build
     </span>
    </code>
    <span class="koboSpan" id="kobo.151.1">
     command in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.152.1">
      development
     </span>
    </code>
    <span class="koboSpan" id="kobo.153.1">
     environment.
    </span>
    <span class="koboSpan" id="kobo.153.2">
     If we run the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.154.1">
      ng build --configuration=development
     </span>
    </code>
    <span class="koboSpan" id="kobo.155.1">
     command, the Angular CLI will replace the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.156.1">
      environment.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.157.1">
     file with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.158.1">
      environment.development.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.159.1">
     file in the application bundle.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.160.1">
     Each environment file exports an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.161.1">
      environment
     </span>
    </code>
    <span class="koboSpan" id="kobo.162.1">
     object where we can define additional application properties such as the URL of a backend API:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.163.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.164.1">const</span></span><span class="koboSpan" id="kobo.165.1"> environment = {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.166.1">apiUrl: 'https://my-default-url'</span></strong></span><span class="koboSpan" id="kobo.167.1">
};
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.168.1">
      The same properties of the exported object must be defined in all environment files.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.169.1">
     We need to import the default environment to access an environment property in an Angular application.
    </span>
    <span class="koboSpan" id="kobo.169.2">
     For example, to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.170.1">
      apiUrl
     </span>
    </code>
    <span class="koboSpan" id="kobo.171.1">
     property in the main application component, we should do the following:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.172.1">import</span></span><span class="koboSpan" id="kobo.173.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.174.1">Component</span></span><span class="koboSpan" id="kobo.175.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.176.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.177.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.178.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.179.1">import</span></span><span class="koboSpan" id="kobo.180.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.181.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.182.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.183.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.184.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.185.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.186.1">import { environment } from '../environments/environment';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.187.1">@Component</span></span><span class="koboSpan" id="kobo.188.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.189.1">selector</span></span><span class="koboSpan" id="kobo.190.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.191.1">'app-root'</span></span><span class="koboSpan" id="kobo.192.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.193.1">imports</span></span><span class="koboSpan" id="kobo.194.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.195.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.196.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.197.1">templateUrl</span></span><span class="koboSpan" id="kobo.198.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.199.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.200.1">./app.component.html'</span></span><span class="koboSpan" id="kobo.201.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.202.1">styleUrl</span></span><span class="koboSpan" id="kobo.203.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.204.1">'./app.component.css'</span></span><span class="koboSpan" id="kobo.205.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.206.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.207.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.208.1">AppComponent</span></span><span class="koboSpan" id="kobo.209.1"> {
  title = </span><span class="hljs-string"><span class="koboSpan" id="kobo.210.1">'my-app'</span></span><span class="koboSpan" id="kobo.211.1">;
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.212.1">apiUrl = environment.apiUrl;</span></strong></span><span class="koboSpan" id="kobo.213.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.214.1">
     Not all
    </span>
    <a id="_idIndexMarker869">
    </a>
    <span class="koboSpan" id="kobo.215.1">
     libraries in an Angular application can be imported as a JavaScript module, as most of the Angular first-party libraries are.
    </span>
    <span class="koboSpan" id="kobo.215.2">
     In the following section, we will learn how to import libraries that need the global
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.216.1">
      window
     </span>
    </code>
    <span class="koboSpan" id="kobo.217.1">
     object.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-261">
    <span class="koboSpan" id="kobo.218.1">
     Building for the window object
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.219.1">
     An Angular
    </span>
    <a id="_idIndexMarker870">
    </a>
    <span class="koboSpan" id="kobo.220.1">
     application may use a library like
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.221.1">
      jQuery
     </span>
    </strong>
    <span class="koboSpan" id="kobo.222.1">
     that
    </span>
    <a id="_idIndexMarker871">
    </a>
    <span class="koboSpan" id="kobo.223.1">
     must be attached to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.224.1">
      window
     </span>
    </code>
    <span class="koboSpan" id="kobo.225.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.225.2">
     Other libraries, such as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.226.1">
      Bootstrap
     </span>
    </strong>
    <span class="koboSpan" id="kobo.227.1">
     , have
    </span>
    <a id="_idIndexMarker872">
    </a>
    <span class="koboSpan" id="kobo.228.1">
     fonts, icons, and CSS files that must be included in the application bundle.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.229.1">
     In all these cases, we need to tell the Angular CLI about their existence so that it can include them in the final bundle.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.230.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.231.1">
      angular.json
     </span>
    </code>
    <span class="koboSpan" id="kobo.232.1">
     configuration file contains an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.233.1">
      options
     </span>
    </code>
    <span class="koboSpan" id="kobo.234.1">
     object in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.235.1">
      build
     </span>
    </code>
    <span class="koboSpan" id="kobo.236.1">
     configuration that we can use to define such files:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.237.1">"options"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.238.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.239.1">{</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.240.1">"outputPath"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.241.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.242.1">"dist/my-app"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.243.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.244.1">"index"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.245.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.246.1">"src/index.html"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.247.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.248.1">"browser"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.249.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.250.1">"src/main.ts"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.251.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.252.1">"polyfills"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.253.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.254.1">[</span></span>
    <span class="hljs-string"><span class="koboSpan" id="kobo.255.1">"zone.js"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.256.1">],</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.257.1">"tsConfig"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.258.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.259.1">"tsconfig.app.json"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.260.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.261.1">"assets"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.262.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.263.1">[</span></span>
    <span class="hljs-punctuation"><span class="koboSpan" id="kobo.264.1">{</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.265.1">"glob"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.266.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.267.1">"**/*"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.268.1">,</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.269.1">"input"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.270.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.271.1">"public"</span></span>
    <span class="hljs-punctuation"><span class="koboSpan" id="kobo.272.1">}</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.273.1">],</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.274.1">"styles"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.275.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.276.1">[</span></span>
    <span class="hljs-string"><span class="koboSpan" id="kobo.277.1">"src/styles.css"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.278.1">],</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.279.1">"scripts"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.280.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.281.1">[]</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.282.1">}</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.283.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.284.1">
      options
     </span>
    </code>
    <span class="koboSpan" id="kobo.285.1">
     object
    </span>
    <a id="_idIndexMarker873">
    </a>
    <span class="koboSpan" id="kobo.286.1">
     contains the following properties that we can use:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.287.1">
       assets
      </span>
     </code>
     <span class="koboSpan" id="kobo.288.1">
      : Contains static files from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.289.1">
       public
      </span>
     </code>
     <span class="koboSpan" id="kobo.290.1">
      folder such as icons, fonts, and translations.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.291.1">
       styles
      </span>
     </code>
     <span class="koboSpan" id="kobo.292.1">
      : Contains external CSS stylesheet files.
     </span>
     <span class="koboSpan" id="kobo.292.2">
      The global CSS stylesheet file of the application is included by default.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.293.1">
       scripts
      </span>
     </code>
     <span class="koboSpan" id="kobo.294.1">
      : Contains external JavaScript files.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.295.1">
     As we add more and more features to an Angular application, the final bundle will grow bigger at some point.
    </span>
    <span class="koboSpan" id="kobo.295.2">
     In the following section, we’ll learn how to mitigate such an effect using budgets.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-262">
    <span class="koboSpan" id="kobo.296.1">
     Limiting the application bundle size
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.297.1">
     As developers, we
    </span>
    <a id="_idIndexMarker874">
    </a>
    <span class="koboSpan" id="kobo.298.1">
     always want to build impressive applications with cool features for the end user.
    </span>
    <span class="koboSpan" id="kobo.298.2">
     As such, we end up adding more and more features to our Angular application – sometimes according to the specifications and at other times to provide additional value to users.
    </span>
    <span class="koboSpan" id="kobo.298.3">
     However, adding new functionality to an Angular application will cause it to grow in size, which may not be acceptable at some point.
    </span>
    <span class="koboSpan" id="kobo.298.4">
     To overcome this problem, we can use
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.299.1">
      budgets
     </span>
    </strong>
    <span class="koboSpan" id="kobo.300.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.301.1">
     Budgets
    </span>
    <a id="_idIndexMarker875">
    </a>
    <span class="koboSpan" id="kobo.302.1">
     are thresholds that we can define in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.303.1">
      angular.json
     </span>
    </code>
    <span class="koboSpan" id="kobo.304.1">
     configuration file, and we can make sure that the size of our application does not exceed those thresholds.
    </span>
    <span class="koboSpan" id="kobo.304.2">
     To set budgets, we can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.305.1">
      budgets
     </span>
    </code>
    <span class="koboSpan" id="kobo.306.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.307.1">
      production
     </span>
    </code>
    <span class="koboSpan" id="kobo.308.1">
     configuration in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.309.1">
      build
     </span>
    </code>
    <span class="koboSpan" id="kobo.310.1">
     command:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.311.1">"budgets"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.312.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.313.1">[</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.314.1">{</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.315.1">"type"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.316.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.317.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.318.1">initial"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.319.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.320.1">"maximumWarning"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.321.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.322.1">"500kB"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.323.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.324.1">"maximumError"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.325.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.326.1">"1MB"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.327.1">},</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.328.1">{</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.329.1">"type"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.330.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.331.1">"anyComponentStyle"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.332.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.333.1">"maximumWarning"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.334.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.335.1">"4kB"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.336.1">,</span></span>
    <span class="hljs-attr"><span class="koboSpan" id="kobo.337.1">"maximumError"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.338.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.339.1">"8kB"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.340.1">}</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.341.1">]</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.342.1">
     The Angular CLI defines the preceding default budgets when creating a new Angular CLI project.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.343.1">
     We can
    </span>
    <a id="_idIndexMarker876">
    </a>
    <span class="koboSpan" id="kobo.344.1">
     define a budget for different types, such as the whole Angular application or some parts of it.
    </span>
    <span class="koboSpan" id="kobo.344.2">
     The threshold of a budget can be defined as bytes, kilobytes, megabytes, or a percentage of it.
    </span>
    <span class="koboSpan" id="kobo.344.3">
     The Angular CLI displays a warning or throws an error when the size is reached or exceeds the defined value of the threshold.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.345.1">
     To better understand it, let’s describe the previous default example:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.346.1">
      A warning is shown when the size of the Angular application exceeds
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.347.1">
       500
      </span>
     </code>
     <span class="koboSpan" id="kobo.348.1">
      KB and an error when it goes over
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.349.1">
       1
      </span>
     </code>
     <span class="koboSpan" id="kobo.350.1">
      MB.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.351.1">
      A warning is shown when the size of any component style exceeds
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.352.1">
       4
      </span>
     </code>
     <span class="koboSpan" id="kobo.353.1">
      KB and an error when it goes over
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.354.1">
       8
      </span>
     </code>
     <span class="koboSpan" id="kobo.355.1">
      .
     </span>
    </li>
   </ul>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.356.1">
      To see all available options you can define when configuring budgets in an Angular application, check out the guide on the official documentation website at
     </span>
     <a href="https://angular.dev/tools/cli/build/#configuring-size-budgets">
      <span class="url">
       <span class="koboSpan" id="kobo.357.1">
        https://angular.dev/tools/cli/build/#configuring-size-budgets
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.358.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.359.1">
     Budgets are great to use when we want to provide an alert mechanism in case our Angular application grows significantly.
    </span>
    <span class="koboSpan" id="kobo.359.2">
     However, they are just a level of information and precaution.
    </span>
    <span class="koboSpan" id="kobo.359.3">
     In the following section, we will learn how to minimize our bundle size.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-263">
    <span class="koboSpan" id="kobo.360.1">
     Optimizing the application bundle
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.361.1">
     As we
    </span>
    <a id="_idIndexMarker877">
    </a>
    <span class="koboSpan" id="kobo.362.1">
     learned in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.363.1">
      Building an Angular application
     </span>
    </em>
    <span class="koboSpan" id="kobo.364.1">
     section, the Angular CLI performs optimization techniques when we build an Angular application.
    </span>
    <span class="koboSpan" id="kobo.364.2">
     The optimization process that is performed in the application code includes modern web techniques and tools, including the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.365.1">
       Minification
      </span>
     </strong>
     <span class="koboSpan" id="kobo.366.1">
      : Converts multiline source files into a single line, removing white space and comments.
     </span>
     <span class="koboSpan" id="kobo.366.2">
      It is a process that enables browsers to parse them faster later on.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.367.1">
       Uglification
      </span>
     </strong>
     <span class="koboSpan" id="kobo.368.1">
      : Renames properties and methods to a non-human-readable form so that they are difficult to understand and use for malicious purposes.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.369.1">
       Bundling
      </span>
     </strong>
     <span class="koboSpan" id="kobo.370.1">
      : Concatenates all source files of the application into a single file, called the bundle.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.371.1">
       Tree-shaking
      </span>
     </strong>
     <span class="koboSpan" id="kobo.372.1">
      : Removes unused files and Angular artifacts, such as components and services, resulting in a smaller bundle.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.373.1">
       Font optimization
      </span>
     </strong>
     <span class="koboSpan" id="kobo.374.1">
      : Inlines external font files in the main HTML file of the application without blocking render requests.
     </span>
     <span class="koboSpan" id="kobo.374.2">
      It currently supports Google Fonts and Adobe Fonts and requires an internet connection to download them.
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.375.1">
       Build cache
      </span>
     </strong>
     <span class="koboSpan" id="kobo.376.1">
      : Caches the previous build state and restores it when we run the same build, decreasing the time taken to build the application.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.377.1">
     If the final
    </span>
    <a id="_idIndexMarker878">
    </a>
    <span class="koboSpan" id="kobo.378.1">
     bundle of an Angular application remains large after all preceding optimization techniques, we can use an external tool called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.379.1">
      source-map-explorer
     </span>
    </code>
    <span class="koboSpan" id="kobo.380.1">
     to investigate the cause.
    </span>
    <span class="koboSpan" id="kobo.380.2">
     Perhaps we have imported a JavaScript library twice or included an unused file.
    </span>
    <span class="koboSpan" id="kobo.380.3">
     The tool analyzes our application bundle and displays all Angular artifacts and libraries we use in a visual representation.
    </span>
    <span class="koboSpan" id="kobo.380.4">
     To start using it, do the following:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.381.1">
      Install the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.382.1">
       source-map-explorer
      </span>
     </code>
     <span class="koboSpan" id="kobo.383.1">
      npm package from the terminal:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.384.1">npm install source-map-explorer --save-dev 
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.385.1">
      Build your Angular application and enable source maps:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.386.1">ng build --source-map
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.387.1">
      Add the following script in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.388.1">
       package.json
      </span>
     </code>
     <span class="koboSpan" id="kobo.389.1">
      file:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.390.1">"scripts"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.391.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.392.1">{</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.393.1">  "ng"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.394.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.395.1">"ng"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.396.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.397.1">  "start"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.398.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.399.1">"ng serve"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.400.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.401.1">  "build"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.402.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.403.1">"ng build"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.404.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.405.1">  "watch"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.406.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.407.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.408.1">ng build --watch --configuration development"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.409.1">,</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.410.1">  "test"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.411.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.412.1">"ng test"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.413.1">,</span></span>
<span class="hljs-attr">  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.414.1">"analyze": "source-map-explorer"</span></strong></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.415.1">}</span></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.416.1">
      Run the following command against the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.417.1">
       main
      </span>
     </code>
     <span class="koboSpan" id="kobo.418.1">
      bundle file:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.419.1">npm run analyze dist/my-app/browser/main*.js 
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.420.1">
     It will open
    </span>
    <a id="_idIndexMarker879">
    </a>
    <span class="koboSpan" id="kobo.421.1">
     up a visual representation of the application bundle in the browser:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.422.1">
     <img alt="img" src="../Images/B21418_14_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.423.1">
     Figure 14.1: Source map explorer output
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.424.1">
     We can then interact with it and inspect it to understand why our bundle is still too large.
    </span>
    <span class="koboSpan" id="kobo.424.2">
     Some causes may be the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.425.1">
      A library is included twice in the bundle
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.426.1">
      A library that cannot be tree-shaken is included but is not currently used
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.427.1">
     The last step after
    </span>
    <a id="_idIndexMarker880">
    </a>
    <span class="koboSpan" id="kobo.428.1">
     we build our Angular application is to deploy it to a web server, as we will learn in the following section.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-264">
    <span class="koboSpan" id="kobo.429.1">
     Deploying an Angular application
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.430.1">
     If you
    </span>
    <a id="_idIndexMarker881">
    </a>
    <span class="koboSpan" id="kobo.431.1">
     already have a web server that you want to use for your Angular application, you can copy the contents of the output folder to a path in that server.
    </span>
    <span class="koboSpan" id="kobo.431.2">
     If you want to deploy it in another folder other than the root, you can change the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.432.1">
      href
     </span>
    </code>
    <span class="koboSpan" id="kobo.433.1">
     attribute of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.434.1">
      &lt;base&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.435.1">
     tag in the main HTML file in the following ways:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.436.1">
      Passing the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.437.1">
       --base-href
      </span>
     </code>
     <span class="koboSpan" id="kobo.438.1">
      option in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.439.1">
       ng build
      </span>
     </code>
     <span class="koboSpan" id="kobo.440.1">
      command:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.441.1">ng build --base-href=/mypath/
</span></code></pre>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.442.1">
      Setting the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.443.1">
       baseHref
      </span>
     </code>
     <span class="koboSpan" id="kobo.444.1">
      property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.445.1">
       build
      </span>
     </code>
     <span class="koboSpan" id="kobo.446.1">
      command of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.447.1">
       angular.json
      </span>
     </code>
     <span class="koboSpan" id="kobo.448.1">
      configuration file:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.449.1">"options"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.450.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.451.1">{</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.452.1">"outputPath"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.453.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.454.1">"dist/my-app"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.455.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.456.1">"index"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.457.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.458.1">"src/index.html"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.459.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.460.1">"browser"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.461.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.462.1">"src/main.ts"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.463.1">,</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.464.1">"baseHref": "/mypath/"</span></strong></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.465.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.466.1">"polyfills"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.467.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.468.1">[</span></span>
    <span class="hljs-string"><span class="koboSpan" id="kobo.469.1">"zone.js"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.470.1">],</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.471.1">"tsConfig"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.472.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.473.1">"tsconfig.app.json"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.474.1">,</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.475.1">"assets"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.476.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.477.1">[</span></span>
    <span class="hljs-punctuation"><span class="koboSpan" id="kobo.478.1">{</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.479.1">"glob"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.480.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.481.1">"**/*"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.482.1">,</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.483.1">"input"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.484.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.485.1">"public"</span></span>
    <span class="hljs-punctuation"><span class="koboSpan" id="kobo.486.1">}</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.487.1">],</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.488.1">"styles"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.489.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.490.1">[</span></span>
    <span class="hljs-string"><span class="koboSpan" id="kobo.491.1">"src/styles.css"</span></span>
  <span class="hljs-punctuation"><span class="koboSpan" id="kobo.492.1">],</span></span>
  <span class="hljs-attr"><span class="koboSpan" id="kobo.493.1">"scripts"</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.494.1">:</span></span> <span class="hljs-punctuation"><span class="koboSpan" id="kobo.495.1">[]</span></span>
<span class="hljs-punctuation"><span class="koboSpan" id="kobo.496.1">}</span></span>
</code></pre>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.497.1">
     If you do not want to deploy it to a custom server, you can use the Angular CLI tooling to deploy it in a
    </span>
    <a id="_idIndexMarker882">
    </a>
    <span class="koboSpan" id="kobo.498.1">
     supported hosting provider, which you can find at
    </span>
    <a href="https://angular.dev/tools/cli/deployment#automatic-deployment-with-the-cli">
     <span class="url">
      <span class="koboSpan" id="kobo.499.1">
       https://angular.dev/tools/cli/deployment#automatic-deployment-with-the-cli
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.500.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-265">
    <span class="koboSpan" id="kobo.501.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.502.1">
     The deployment of an Angular application is the simplest and most crucial part because it finally makes your awesome application available to the end user.
    </span>
    <span class="koboSpan" id="kobo.502.2">
     Web applications are all about delivering experiences to the end user at the end of the day.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.503.1">
     In this chapter, we learned how to build an Angular application and make it ready for production.
    </span>
    <span class="koboSpan" id="kobo.503.2">
     We also investigated different ways to optimize the final bundle and learned how to deploy an Angular application into a custom server, manually and automatically, for other hosting providers.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.504.1">
     In the next chapter, which is also the final chapter of the book, we will learn how to improve the performance of an Angular application.
    </span>
   </p>
  </div>
 </body></html>