<html><head></head><body>
  <div id="_idContainer065" class="Basic-Text-Frame">
    <h1 class="chapterNumber">3</h1>
    <h1 id="_idParaDest-49" class="chapterTitle">Building an Issue Tracking System Using Reactive Forms</h1>
    <p class="normal">Web applications use HTML forms to collect data from users and validate them, such as when logging in to an application, performing a search, or completing an online payment. The Angular framework provides two types of forms, reactive and template-driven, that we can use in an Angular application.</p>
    <p class="normal">In this chapter, we will build a system for managing and tracking issues. We will use Angular reactive forms for reporting new issues. We will also use <strong class="keyWord">Clarity Design System</strong> from VMware for designing our forms and displaying our issues.</p>
    <p class="normal">We will cover the following topics:</p>
    <ul>
      <li class="bulletList">Installing Clarity Design System in an Angular application</li>
      <li class="bulletList">Displaying an overview of issues</li>
      <li class="bulletList">Reporting new issues</li>
      <li class="bulletList">Marking an issue as resolved</li>
      <li class="bulletList">Turning on suggestions for new issues</li>
    </ul>
    <h1 id="_idParaDest-50" class="heading-1">Essential background theory and context</h1>
    <p class="normal">The Angular framework provides two types of forms that we can use:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Template-driven</strong>: They<a id="_idIndexMarker141"/> are easy to set up in an<a id="_idIndexMarker142"/> Angular application. Template-driven forms do not scale well and are difficult to test because they are defined in the component template.</li>
      <li class="bulletList"><strong class="keyWord">Reactive</strong>: They<a id="_idIndexMarker143"/> are based on the reactive programming<a id="_idIndexMarker144"/> approach. Reactive forms operate in the TypeScript class of the component, and they are easier to test and scale better than template-driven forms.</li>
    </ul>
    <p class="normal">In this chapter, we will get hands-on with the reactive forms approach, which is the most popular in the Angular community.</p>
    <p class="normal">Angular components can get data from external sources such as HTTP or other Angular components. In the latter case, they interact with components that have data using a public API:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">@Input()</code>: This is used to pass data into a component.</li>
      <li class="bulletList"><code class="inlineCode">@Output()</code>: This is used to get notified about changes or get data back from a component.</li>
    </ul>
    <p class="normal"><strong class="keyWord">Clarity</strong> is a design system<a id="_idIndexMarker145"/> that contains a set of UX and UI guidelines for building web applications. It also comprises a proprietary HTML and CSS framework packed with these guidelines. Luckily, we do not have to use this framework since Clarity already provides various Angular-based UI components that we can use in our Angular applications.</p>
    <h1 id="_idParaDest-51" class="heading-1">Project overview</h1>
    <p class="normal">In this project, we <a id="_idIndexMarker146"/>will build an Angular application for managing and tracking issues using reactive forms and Clarity. Initially, we will display a list of issues in a table that we can sort and filter. We will then create a form for allowing users to report new issues. Finally, we will create a modal dialog for resolving an issue. We will also go the extra mile and turn on suggestions when reporting an issue to help users avoid duplicate entries. The following diagram depicts an architectural overview of the project:</p>
    <figure class="mediaobject"><img src="../Images/B18465_03_01.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.1 – Project architecture</p>
    <p class="normal">Build <a id="_idIndexMarker147"/>time: 1 hour</p>
    <h1 id="_idParaDest-52" class="heading-1">Getting started</h1>
    <p class="normal">The following<a id="_idIndexMarker148"/> software tools are required to complete this project:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Angular CLI</strong>: A command-line <a id="_idIndexMarker149"/>interface for Angular that you can find at <a href="https://angular.io/cli"><span class="url">https://angular.io/cli</span></a></li>
      <li class="bulletList"><strong class="keyWord">GitHub material</strong>: The related<a id="_idIndexMarker150"/> code for this chapter, which you can find in the <code class="inlineCode">Chapter03</code> folder at <a href="https://github.com/PacktPublishing/Angular-Projects-Third-Edition"><span class="url">https://github.com/PacktPublishing/Angular-Projects-Third-Edition</span></a></li>
    </ul>
    <h1 id="_idParaDest-53" class="heading-1">Installing Clarity in an Angular application</h1>
    <p class="normal">Let’s start <a id="_idIndexMarker151"/>creating our issue-tracking system by scaffolding<a id="_idIndexMarker152"/> a new Angular application:</p>
    <pre class="programlisting con"><code class="hljs-con">ng new issue-tracker --defaults
</code></pre>
    <p class="normal">We use<a id="_idIndexMarker153"/> the <code class="inlineCode">ng new</code> command of the Angular CLI to create a new Angular application with the following characteristics:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">issue-tracker</code>: The name of the Angular application.</li>
      <li class="bulletList"><code class="inlineCode">--defaults</code>: This disables Angular routing for the application and sets the stylesheet format to CSS.</li>
    </ul>
    <p class="normal">We now need to install the Clarity library in our Angular application:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Navigate to the <code class="inlineCode">issue-tracker</code> folder that was created and run the following command to install it:
        <pre class="programlisting con"><code class="hljs-con">npm install @cds/core @clr/angular @clr/ui --save
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">angular.json</code> file and add the Clarity CSS styles in the <code class="inlineCode">styles</code> array:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">"styles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="code-highlight"><strong class="hljs-string-slc">"node_modules/@clr/ui/clr-ui.min.css"</strong><strong class="hljs-punctuation-slc">,</strong></span>
  <span class="hljs-string">"src/styles.css"</span>
<span class="hljs-punctuation">]</span>
</code></pre>
      </li>
      <li class="numberedList">Finally, import <code class="inlineCode">ClarityModule</code> and <code class="inlineCode">BrowserAnimationsModule</code> in the main application module, <code class="inlineCode">app.module.ts</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'</span><span class="hljs-string">./app.component'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">ClarityModule</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'@clr/angular'</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">BrowserAnimationsModule</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-string-slc">'@angular/platform-browser/animations'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">AppComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">BrowserModule</span>,
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-title-slc">ClarityModule</strong><strong class="hljs-slc">,</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-title-slc">BrowserAnimationsModule</strong></span>
  ],
  <span class="hljs-attr">providers</span>: [],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title">AppComponent</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppModule</span> { }
</code></pre>
      </li>
    </ol>
    <p class="normal">Now that we <a id="_idIndexMarker154"/>have <a id="_idIndexMarker155"/>completed installing Clarity in our application, we can start building beautiful designs with it. In the following section, we will begin by creating a list for displaying our issues.</p>
    <h1 id="_idParaDest-54" class="heading-1">Displaying an overview of issues</h1>
    <p class="normal">Our <a id="_idIndexMarker156"/>Angular application will be responsible for managing and tracking issues. When the application starts, we should display a list of all pending issues in the system. Pending issues are defined as those issues that have not been resolved. The process that we will follow can be further analyzed as the following:</p>
    <ul>
      <li class="bulletList">Fetching pending issues</li>
      <li class="bulletList">Visualizing issues using a data grid</li>
    </ul>
    <h2 id="_idParaDest-55" class="heading-2">Fetching pending issues</h2>
    <p class="normal">First, we <a id="_idIndexMarker157"/>need to create a mechanism for fetching all pending issues:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Use the <code class="inlineCode">generate</code> command of the Angular CLI to create an Angular service named <code class="inlineCode">issues</code>:
        <pre class="programlisting con"><code class="hljs-con">ng generate service issues
</code></pre>
    <p class="normal">The preceding command will create an <code class="inlineCode">issues.service.ts</code> file in the <code class="inlineCode">src\app</code> folder of our Angular CLI project.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Every issue<a id="_idIndexMarker158"/> will have specific properties of a defined type. We need to create a TypeScript interface for that with the following Angular CLI command:
        <pre class="programlisting con"><code class="hljs-con">ng generate interface issue
</code></pre>
    <p class="normal">The previous command will create an <code class="inlineCode">issue.ts</code> file in the <code class="inlineCode">src\app</code> folder of the project.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Open the <code class="inlineCode">issue.ts</code> file and add the following properties in the <code class="inlineCode">Issue</code> interface:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Issue</span> {
  <span class="code-highlight"><strong class="hljs-attr-slc">issueNo</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">number</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">title</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">string</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">description</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">string</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">priority</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">'low'</strong><strong class="hljs-slc"> | </strong><strong class="hljs-string-slc">'high'</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">type</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">'Feature'</strong><strong class="hljs-slc"> | </strong><strong class="hljs-string-slc">'Bug'</strong><strong class="hljs-slc"> | </strong><strong class="hljs-string-slc">'Documentation'</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  completed?: </strong><strong class="hljs-title-slc">Date</strong><strong class="hljs-slc">;</strong></span>
}
</code></pre>
    <p class="normal">The <code class="inlineCode">completed</code> property is the date that an issue is resolved. We define it as optional because new issues will not have this property set.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Open the Angular service we created in step 1 and add an <code class="inlineCode">issues</code> property to hold our data. Also, create a <code class="inlineCode">getPendingIssues</code> method that will return all issues that have not been completed:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">Issue</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'./issue'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-meta">@Injectable</span>({
  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IssuesService</span> {
  <span class="code-highlight"><strong class="hljs-keyword-slc">private</strong><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc">issues</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Issue</strong><strong class="hljs-slc">[] = [];</strong></span>
  
  <span class="hljs-title">constructor</span>() { }
  
  <span class="code-highlight"><strong class="hljs-title-slc">getPendingIssues</strong><strong class="hljs-slc">(): </strong><strong class="hljs-title-slc">Issue</strong><strong class="hljs-slc">[] {</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-keyword-slc">return</strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">issues</strong><strong class="hljs-slc">.</strong><strong class="hljs-title-slc">filter</strong><strong class="hljs-slc">(</strong><strong class="hljs-params-slc">issue</strong><strong class="hljs-function-slc"> =&gt;</strong><strong class="hljs-slc"> !issue.</strong><strong class="hljs-property-slc">completed</strong><strong class="hljs-slc">);</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  }</strong></span>
}
</code></pre>

    <p class="normal">In the preceding code, we initialize the <code class="inlineCode">issues</code> property to an empty array. If you <a id="_idIndexMarker159"/>want to get started with sample data, you can use the <code class="inlineCode">mock-issues.ts</code> file from the <code class="inlineCode">src\assets</code> folder that exists in the GitHub material of this chapter and import it as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { issues } <span class="hljs-keyword">from</span> <span class="hljs-string">'../assets/mock-issues'</span>;
</code></pre>
      </li>
    </ol>
    <p class="normal">In the following section, we will create a component for displaying those issues.</p>
    <h2 id="_idParaDest-56" class="heading-2">Visualizing issues in a data grid</h2>
    <p class="normal">We <a id="_idIndexMarker160"/>will use the data grid UI component of the Clarity library to display data in a tabular format. A data grid also provides mechanisms for filtering and sorting out of the box. Let’s create the Angular component that will host the data grid first:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Use the <code class="inlineCode">generate</code> command of the Angular CLI to create the component:
        <pre class="programlisting con"><code class="hljs-con">ng generate component issue-list
</code></pre>
      </li>
      <li class="numberedList">Open the template of the main component of our application, <code class="inlineCode">app.component.html</code>, and replace its content with the following HTML code:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"main-container"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"content-container"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"content-area"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">app-issue-list</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">app-issue-list</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">The list of issues will be displayed in the main component of the Angular application as soon as it starts up.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Currently, the <code class="inlineCode">&lt;app-issue-list&gt;</code> component displays no issue data. We must connect it with the Angular service we created in the <em class="italic">Fetching pending issues</em> section. Open the <code class="inlineCode">issue-list.component.ts</code> file and inject <code class="inlineCode">IssuesService</code> in the <code class="inlineCode">constructor</code> of the <code class="inlineCode">IssueListComponent</code> class:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">IssuesService</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'../issues.service'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-issue-list'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./issue-list.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./issue-list.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IssueListComponent</span> {
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-title-slc">constructor</strong><strong class="hljs-slc">(</strong><strong class="hljs-keyword-slc">private</strong><strong class="hljs-params-slc"> issueService: IssuesService</strong><strong class="hljs-slc">) { }</strong></span>
}
</code></pre>
      </li>
      <li class="numberedList">Create <a id="_idIndexMarker161"/>a method named <code class="inlineCode">getIssues</code> that will call the <code class="inlineCode">getPendingIssues</code> method of the injected service and keep its returned value in the <code class="inlineCode">issues</code> component property:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">Issue</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'../issue'</strong><strong class="hljs-slc">;</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">IssuesService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../issues.service'</span>;
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-issue-list'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./issue-list.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./issue-list.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IssueListComponent</span> {
  <span class="code-highlight"><strong class="hljs-attr-slc">issues</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Issue</strong><strong class="hljs-slc">[] = [];</strong></span>
  <span class="hljs-title">constructor</span>(<span class="hljs-keyword">private</span><span class="hljs-params"> issueService: IssuesService</span>) { }
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">private</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">getIssues</strong><strong class="hljs-slc">() {</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">issues</strong><strong class="hljs-slc"> = </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">issueService</strong><strong class="hljs-slc">.</strong><strong class="hljs-title-slc">getPendingIssues</strong><strong class="hljs-slc">();</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  }</strong></span>
}
</code></pre>
      </li>
      <li class="numberedList">Finally, call the <code class="inlineCode">getIssues</code> method in the <code class="inlineCode">ngOnInit</code> component method to get all pending issues upon component initialization:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span>, <span class="code-highlight"><strong class="hljs-title-slc">OnInit</strong></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">Issue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../issue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">IssuesService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../issues.service'</span>;
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-issue-list'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./issue-list.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./issue-list.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IssueListComponent</span> <span class="code-highlight"><strong class="hljs-keyword-slc">implements</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">OnInit</strong></span> {
  <span class="hljs-attr">issues</span>: <span class="hljs-title">Issue</span>[] = [];
  <span class="hljs-title">constructor</span>(<span class="hljs-keyword">private</span><span class="hljs-params"> issueService: IssuesService</span>) { }
  <span class="code-highlight"><strong class="hljs-title-slc">ngOnInit</strong><strong class="hljs-slc">(): </strong><strong class="hljs-built_in-slc">void</strong><strong class="hljs-slc"> {</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-title-slc">getIssues</strong><strong class="hljs-slc">();  </strong></span>
<span class="code-highlight"><strong class="hljs-slc">  }</strong></span>
  <span class="hljs-keyword">private</span> <span class="hljs-title">getIssues</span>() {
    <span class="hljs-variable">this</span>.<span class="hljs-property">issues</span> = <span class="hljs-variable">this</span>.<span class="hljs-property">issueService</span>.<span class="hljs-title">getPendingIssues</span>();
  }
}
</code></pre>
      </li>
    </ol>
    <p class="normal">We have <a id="_idIndexMarker162"/>already implemented the process for getting issue data in our component. All we have to do now is display it in the template. Open the <code class="inlineCode">issue-list.component.html</code> file and replace its content with the following HTML code:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">clr-datagrid</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'issueNo'"</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgColType</span><span class="hljs-tag">]=</span><span class="hljs-string">"'number'"</span><span class="hljs-tag">&gt;</span>Issue No<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'type'"</span><span class="hljs-tag">&gt;</span>Type<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'title'"</span><span class="hljs-tag">&gt;</span>Title<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'description'"</span><span class="hljs-tag">&gt;</span>Description<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'priority'"</span><span class="hljs-tag">&gt;</span>Priority<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-row</span><span class="hljs-tag"> *</span><span class="hljs-attr">clrDgItems</span><span class="hljs-tag">=</span><span class="hljs-string">"let issue of issues"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.issueNo}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.type}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.title}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.description}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
       <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"label"</span><span class="hljs-tag"> [</span><span class="hljs-attr">class.label-danger</span><span class="hljs-tag">]=</span><span class="hljs-string">"issue.priority === 'high'"</span><span class="hljs-tag">&gt;</span>{{issue.priority}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-row</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-footer</span><span class="hljs-tag">&gt;</span>{{issues.length}} issues<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-footer</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-datagrid</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In the preceding snippet, we use several Angular components of the Clarity library:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">&lt;clr-datagrid&gt;</code>: Defines a table.</li>
      <li class="bulletList"><code class="inlineCode">&lt;clr-dg-column&gt;</code>: Defines a column of a table. Each column uses the <code class="inlineCode">clrDgField</code> directive to bind to the property name of the issue represented by that column. The <code class="inlineCode">clrDgField</code> directive provides sorting and filtering capabilities without writing a single line of code in the TypeScript class file. Sorting <a id="_idIndexMarker163"/>works automatically only with string-based content. If we want to sort by a different primitive type, we must use the <code class="inlineCode">clrDgColType</code> directive and specify the particular type.</li>
      <li class="bulletList"><code class="inlineCode">&lt;clr-dg-row&gt;</code>: Defines a row of a table. It uses the <code class="inlineCode">*clrDgItems</code> directive to iterate over the issues and create one row for each issue.</li>
      <li class="bulletList"><code class="inlineCode">&lt;clr-dg-cell&gt;</code>: Each row contains a collection of <code class="inlineCode">&lt;clr-dg-cell&gt;</code> components to display the value of each column using interpolation. In the last cell, we add the <code class="inlineCode">label-danger</code> class when an issue has a high priority to indicate its importance.</li>
      <li class="bulletList"><code class="inlineCode">&lt;clr-dg-footer&gt;</code>: Defines the footer of a table. In this case, it displays the total number of issues.</li>
    </ul>
    <p class="normal">If we run our Angular application using <code class="inlineCode">ng serve</code>, the output will look like the following:</p>
    <figure class="mediaobject"><img src="../Images/B18465_03_02.png" alt="Figure 3.1 – Overview of pending issues"/></figure>
    <p class="packt_figref">Figure 3.2 – Overview of pending issues</p>
    <div class="note">
      <p class="normal">In the previous screenshot, the application uses sample data from the <code class="inlineCode">mock-issues.ts</code> file.</p>
    </div>
    <p class="normal">The data grid component of the Clarity library has a rich set of capabilities that we can use in our Angular applications. In the following section, we will learn how to use reactive forms to<a id="_idIndexMarker164"/> report a new issue.</p>
    <h1 id="_idParaDest-57" class="heading-1">Reporting new issues</h1>
    <p class="normal">One of the<a id="_idIndexMarker165"/> main features of our issue-tracking system is the ability to report new issues. We will use Angular reactive forms to create a form for adding new issues. The feature can be further subdivided into the following tasks:</p>
    <ul>
      <li class="bulletList">Setting up reactive forms in an Angular application</li>
      <li class="bulletList">Creating the report issue form</li>
      <li class="bulletList">Displaying a new issue in the list</li>
      <li class="bulletList">Validating the details of an issue</li>
    </ul>
    <p class="normal">Let’s begin by introducing reactive forms in our Angular application.</p>
    <h2 id="_idParaDest-58" class="heading-2">Setting up reactive forms in an Angular application</h2>
    <p class="normal">Reactive forms<a id="_idIndexMarker166"/> are defined in the <code class="inlineCode">@angular/forms</code> npm<a id="_idIndexMarker167"/> package of the Angular framework. To add them to our Angular application:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">app.module.ts</code> file and import <code class="inlineCode">ReactiveFormsModule</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">ReactiveFormsModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;
</code></pre>
      </li>
      <li class="numberedList">Add <code class="inlineCode">ReactiveFormsModule</code> into the <code class="inlineCode">imports</code> array of the <code class="inlineCode">@NgModule</code> decorator:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-title">AppComponent</span>,
    <span class="hljs-title">IssueListComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title">BrowserModule</span>,
    <span class="hljs-title">ClarityModule</span>,
    <span class="hljs-title">BrowserAnimationsModule</span>,
    <span class="code-highlight"><strong class="hljs-title-slc">ReactiveFormsModule</strong></span>
  ],
  <span class="hljs-attr">providers</span>: [],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title">AppComponent</span>]
})
</code></pre>
      </li>
    </ol>
    <p class="normal"><code class="inlineCode">ReactiveFormsModule</code> contains all necessary Angular directives and services that we will need to work <a id="_idIndexMarker168"/>with forms, as we will see in the following section.</p>
    <h2 id="_idParaDest-59" class="heading-2">Creating the report issue form</h2>
    <p class="normal">Now that <a id="_idIndexMarker169"/>we have introduced reactive forms in our Angular application, we can start building our form:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create a new Angular component named <code class="inlineCode">issue-report</code>:
        <pre class="programlisting con"><code class="hljs-con">ng generate component issue-report
</code></pre>
      </li>
      <li class="numberedList">Open the <code class="inlineCode">issue-report.component.ts</code> file and add the following <code class="inlineCode">import</code> statement:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">FormControl</span>, <span class="hljs-title">FormGroup</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;
</code></pre>
    <p class="normal">In this statement, <code class="inlineCode">FormControl</code> represents a single control of a form and <code class="inlineCode">FormGroup</code> is used to group individual controls into a logical form representation.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Create the following interface, which will represent the structure of our form:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">interface</span> <span class="hljs-title">IssueForm</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-title">FormControl</span>&lt;<span class="hljs-built_in">string</span>&gt;;
  <span class="hljs-attr">description</span>: <span class="hljs-title">FormControl</span>&lt;<span class="hljs-built_in">string</span>&gt;;
  <span class="hljs-attr">priority</span>: <span class="hljs-title">FormControl</span>&lt;<span class="hljs-built_in">string</span>&gt;;
  <span class="hljs-attr">type</span>: <span class="hljs-title">FormControl</span>&lt;<span class="hljs-built_in">string</span>&gt;;
}
</code></pre>
      </li>
      <li class="numberedList">Declare an <code class="inlineCode">issueForm</code> property of the <code class="inlineCode">FormGroup&lt;IssueForm&gt;</code> type in the TypeScript class:
        <pre class="programlisting code"><code class="hljs-code">issueForm = <span class="hljs-keyword">new</span> <span class="hljs-title">FormGroup</span>&lt;<span class="hljs-title">IssueForm</span>&gt;({
  <span class="hljs-attr">title</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span> }),
  <span class="hljs-attr">description</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span> }),
  <span class="hljs-attr">priority</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span> }),
  <span class="hljs-attr">type</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span> })
});
</code></pre>
    <p class="normal">We initialize all controls to empty strings because the form will be used to create a new issue from scratch. We also explicitly state that all controls will not accept null values by default using the <code class="inlineCode">nonNullable</code> property.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">We <a id="_idIndexMarker170"/>must now associate the <code class="inlineCode">FormGroup</code> object we created with the respective HTML elements. Open the <code class="inlineCode">issue-report.component.html</code> file and replace its content with the following HTML code:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">h3</span><span class="hljs-tag">&gt;</span>Report an issue<span class="hljs-tag">&lt;/</span><span class="hljs-name">h3</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">form</span><span class="hljs-tag"> </span><span class="hljs-attr">clrForm</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngIf</span><span class="hljs-tag">=</span><span class="hljs-string">"issueForm"</span><span class="hljs-tag"> [</span><span class="hljs-attr">formGroup</span><span class="hljs-tag">]=</span><span class="hljs-string">"issueForm"</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-input-container</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Title<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">clrInput</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"title"</span><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-input-container</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-textarea-container</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Description<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">textarea</span><span class="hljs-tag"> </span><span class="hljs-attr">clrTextarea</span>
<span class="hljs-tag">      </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"description"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">textarea</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-textarea-container</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-radio-container</span><span class="hljs-tag"> </span><span class="hljs-attr">clrInline</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Priority<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"radio"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">low"</span><span class="hljs-tag"> </span><span class="hljs-attr">clrRadio</span>
<span class="hljs-tag">         </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"priority"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Low<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"radio"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"high"</span><span class="hljs-tag"> </span><span class="hljs-attr">clrRadio</span>
<span class="hljs-tag">        </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"</span><span class="hljs-string">priority"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>High<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-radio-container</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-select-container</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Type<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">select</span><span class="hljs-tag"> </span><span class="hljs-attr">clrSelect</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"type"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">option</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"Feature"</span><span class="hljs-tag">&gt;</span>Feature<span class="hljs-tag">&lt;/</span><span class="hljs-name">option</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">option</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"Bug"</span><span class="hljs-tag">&gt;</span>Bug<span class="hljs-tag">&lt;/</span><span class="hljs-name">option</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">option</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"Documentation"</span><span class="hljs-tag">&gt;</span>Documentation
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">option</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">select</span><span class="hljs-tag">&gt;</span>
  <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-select-container</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">form</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">The <code class="inlineCode">formGroup</code> and <code class="inlineCode">clrForm</code> directives associate the HTML <code class="inlineCode">&lt;form&gt;</code> element with the <code class="inlineCode">issueForm</code> property and identify it as a Clarity form.</p>
    <p class="normal">The <code class="inlineCode">formControlName</code> directive is used to associate HTML elements with form controls using their name. Each control is also defined using a Clarity container element. </p>
    <p class="numberedList">For example, the <code class="inlineCode">title</code> input control is a <code class="inlineCode">&lt;clr-input-container&gt;</code> component that contains an <code class="inlineCode">&lt;input&gt;</code> HTML element.</p>
    <p class="normal">Each<a id="_idIndexMarker171"/> native HTML element has a Clarity directive attached to it according to its type. For example, the <code class="inlineCode">&lt;input&gt;</code> HTML element contains a <code class="inlineCode">clrInput</code> directive.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Finally, add some styles to our <code class="inlineCode">issue-report.component.css</code> file:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-selector-class">.clr-input</span>, <span class="hljs-selector-class">.clr-textarea</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">30%</span>;
}
<span class="hljs-selector-tag">button</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">25px</span>;
}
</code></pre>
      </li>
    </ol>
    <p class="normal">Now that we have created the basics of our form, we will learn how to submit its details:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Add an HTML <code class="inlineCode">&lt;button&gt;</code> element <em class="italic">before</em> the closing tag of the HTML <code class="inlineCode">&lt;form&gt;</code> element:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-primary"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"submit"</span><span class="hljs-tag">&gt;</span>Create<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">We set its type to <code class="inlineCode">submit</code> to trigger form submission upon clicking the button.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Open the <code class="inlineCode">issues.service.ts</code> file and add a <code class="inlineCode">createIssue</code> method that inserts a new issue into the <code class="inlineCode">issues</code> array:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">createIssue</span>(<span class="hljs-params">issue: Issue</span>) {
  issue.<span class="hljs-property">issueNo</span> = <span class="hljs-variable">this</span>.<span class="hljs-property">issues</span>.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>;
  <span class="hljs-variable">this</span>.<span class="hljs-property">issues</span>.<span class="hljs-title">push</span>(issue);
}
</code></pre>
    <p class="normal">We automatically assign a new <code class="inlineCode">issueNo</code> property to the issue before adding it to the <code class="inlineCode">issues</code> array.</p>
    <div class="note">
      <p class="normal">The <code class="inlineCode">issueNo</code> property is currently calculated according to the length of the <code class="inlineCode">issues</code> array. A better approach would be implementing a generator mechanism for creating unique and random <code class="inlineCode">issueNo</code> values.</p>
    </div>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Return to the <code class="inlineCode">issue-report.component.ts</code> file and add the following <code class="inlineCode">import</code> statements:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Issue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../issue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">IssuesService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../issues.service'</span>;
</code></pre>
      </li>
      <li class="numberedList">Inject the <code class="inlineCode">IssuesService</code> class into the <code class="inlineCode">constructor</code> of the TypeScript class:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">constructor</span>(<span class="hljs-keyword">private</span><span class="hljs-params"> issueService: IssuesService</span>) { }
</code></pre>
      </li>
      <li class="numberedList">Add<a id="_idIndexMarker172"/> a new component method that will call the <code class="inlineCode">createIssue</code> method of the injected service:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">addIssue</span>() {
  <span class="hljs-variable">this</span>.<span class="hljs-property">issueService</span>.<span class="hljs-title">createIssue</span>(<span class="hljs-variable">this</span>.<span class="hljs-property">issueForm</span>.<span class="hljs-title">getRawValue</span>() <span class="hljs-keyword">as</span> <span class="hljs-title">Issue</span>);
}  
</code></pre>
    <p class="normal">We pass the value of each form control using the <code class="inlineCode">getRawValue</code> property of the <code class="inlineCode">issueForm</code> object that will provide us access to the underlying form model. We are also typecasting it to the <code class="inlineCode">Issue</code> interface since we already know that its values will represent the properties of an issue object.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Open the <code class="inlineCode">issue-report.component.html</code> file and bind the <code class="inlineCode">ngSubmit</code> event of the form to the <code class="inlineCode">addIssue</code> component method:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">form</span><span class="hljs-tag"> </span><span class="hljs-attr">clrForm</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngIf</span><span class="hljs-tag">=</span><span class="hljs-string">"issueForm"</span><span class="hljs-tag"> [</span><span class="hljs-attr">formGroup</span><span class="hljs-tag">]=</span><span class="hljs-string">"issueForm"</span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc">(</strong><strong class="hljs-attr-slc">ngSubmit</strong><strong class="hljs-tag-slc">)=</strong><strong class="hljs-string-slc">"addIssue()"</strong></span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
    </ol>
    <p class="normal">The <code class="inlineCode">ngSubmit</code> event will be triggered when we click on the <code class="inlineCode">Create</code> button of the form.</p>
    <p class="normal">We have completed all the processes to add a new issue to the system. In the following section, we will learn how to display a newly created issue in the pending issue table.</p>
    <h2 id="_idParaDest-60" class="heading-2">Displaying a new issue in the list</h2>
    <p class="normal">Displaying<a id="_idIndexMarker173"/> and creating new issues are two tasks delegated to different Angular components. When we create a new issue with <code class="inlineCode">IssueReportComponent</code>, we need to notify <code class="inlineCode">IssueListComponent</code> to reflect that change in the table. First, let’s see how we can configure <code class="inlineCode">IssueReportComponent</code> to communicate that change:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">issue-report.component.ts</code> file and use the <code class="inlineCode">@Output()</code> decorator to add an <code class="inlineCode">EventEmitter</code> property:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta">@Output</span>() formClose = <span class="hljs-keyword">new</span> <span class="hljs-title">EventEmitter</span>();
</code></pre>
    <p class="normal"><code class="inlineCode">Output</code> and <code class="inlineCode">EventEmitter</code> symbols can be imported from the <code class="inlineCode">@angular/core</code> npm package.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Call the <code class="inlineCode">emit</code> method of the <code class="inlineCode">formClose</code> output property inside the <code class="inlineCode">addIssue</code> component method right after creating the issue:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">addIssue</span>() {
  <span class="hljs-variable">this</span>.<span class="hljs-property">issueService</span>.<span class="hljs-title">createIssue</span>(<span class="hljs-variable">this</span>.<span class="hljs-property">issueForm</span>.<span class="hljs-title">getRawValue</span>() <span class="hljs-keyword">as</span> <span class="hljs-title">Issue</span>);
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">formClose</strong><strong class="hljs-slc">.</strong><strong class="hljs-title-slc">emit</strong><strong class="hljs-slc">();</strong></span>
}
</code></pre>
      </li>
      <li class="numberedList">Add a second HTML <code class="inlineCode">&lt;button&gt;</code> element in the component template and call the <code class="inlineCode">formClose.emit</code> method on its <code class="inlineCode">click</code> event:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"button"</span><span class="hljs-tag"> (</span><span class="hljs-attr">click</span><span class="hljs-tag">)=</span><span class="hljs-string">"formClose.emit()"</span><span class="hljs-tag">&gt;</span>Cancel<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
    </ol>
    <p class="normal"><code class="inlineCode">IssueListComponent</code> can now bind to the <code class="inlineCode">formClose</code> event of <code class="inlineCode">IssueReportComponent</code> and be notified when any buttons are clicked. Let’s find out how:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">issue-list.component.ts</code> file and add the following property in the <code class="inlineCode">IssueListComponent</code> class:
        <pre class="programlisting code"><code class="hljs-code">showReportIssue = <span class="hljs-literal">false</span>;
</code></pre>
    <p class="normal">The <code class="inlineCode">showReportIssue</code> property will toggle the appearance of the report issue form.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Add the following component method, which will be called when the report issue form emits the <code class="inlineCode">formClose</code> event:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">onCloseReport</span>() {
  <span class="hljs-variable">this</span>.<span class="hljs-property">showReportIssue</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-variable">this</span>.<span class="hljs-title">getIssues</span>();
}
</code></pre>
    <p class="normal">The preceding method will set the <code class="inlineCode">showReportIssue</code> property to <code class="inlineCode">false</code> so that the report issue form is no longer visible and the table of pending issues is displayed instead. It will also fetch issues again to refresh the data in the table.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Open<a id="_idIndexMarker174"/> the <code class="inlineCode">issue-list.component.html</code> file and add an HTML <code class="inlineCode">&lt;button&gt;</code> element at the top of the template. The button will display the report issue form when clicked:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-primary"</span><span class="hljs-tag"> (</span><span class="hljs-attr">click</span><span class="hljs-tag">)=</span><span class="hljs-string">"showReportIssue = true"</span><span class="hljs-tag">&gt;</span>Add new issue<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
      <li class="numberedList">Group the button and the data grid inside an <code class="inlineCode">&lt;ng-container&gt;</code> element. As indicated by the <code class="inlineCode">*ngIf</code> Angular directive, the contents of the <code class="inlineCode">&lt;ng-container&gt;</code> element will be displayed when the report issue form is not visible:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">ng-container</strong><strong class="hljs-tag-slc"> *</strong><strong class="hljs-attr-slc">ngIf</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"showReportIssue === false"</strong><strong class="hljs-tag-slc">&gt;</strong></span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-primary"</span><span class="hljs-tag"> (</span><span class="hljs-attr">click</span><span class="hljs-tag">)=</span><span class="hljs-string">"showReportIssue = true"</span><span class="hljs-tag">&gt;</span>Add new issue<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-datagrid</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'issueNo'"</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgColType</span><span class="hljs-tag">]=</span><span class="hljs-string">"'number'"</span><span class="hljs-tag">&gt;</span>Issue No<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'type'"</span><span class="hljs-tag">&gt;</span>Type<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'title'"</span><span class="hljs-tag">&gt;</span>Title<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'description'"</span><span class="hljs-tag">&gt;</span>Description<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrDgField</span><span class="hljs-tag">]=</span><span class="hljs-string">"'priority'"</span><span class="hljs-tag">&gt;</span>Priority<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-column</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-row</span><span class="hljs-tag"> *</span><span class="hljs-attr">clrDgItems</span><span class="hljs-tag">=</span><span class="hljs-string">"let issue of issues"</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.issueNo}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.type}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.title}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.description}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
                <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"label"</span><span class="hljs-tag"> [</span><span class="hljs-attr">class.label-danger</span><span class="hljs-tag">]=</span><span class="hljs-string">"issue.priority === 'high'"</span><span class="hljs-tag">&gt;</span>{{issue.priority}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-row</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-footer</span><span class="hljs-tag">&gt;</span>{{issues.length}} issues<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-footer</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-datagrid</span><span class="hljs-tag">&gt;</span>
<span class="code-highlight"><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">ng-container</strong><strong class="hljs-tag-slc">&gt;</strong></span>
</code></pre>
    <p class="normal">The <code class="inlineCode">&lt;ng-container&gt;</code> element is an Angular component not rendered on the screen and used to group HTML elements.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Add<a id="_idIndexMarker175"/> the <code class="inlineCode">&lt;app-issue-report&gt;</code> component at the end of the template and use the <code class="inlineCode">*ngIf</code> directive to display it when the <code class="inlineCode">showReportIssue</code> property is true. Also bind its <code class="inlineCode">formClose</code> event to the <code class="inlineCode">onCloseReport</code> component method:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">app-issue-report</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngIf</span><span class="hljs-tag">=</span><span class="hljs-string">"showReportIssue === true"</span><span class="hljs-tag"> (</span><span class="hljs-attr">formClose</span><span class="hljs-tag">)=</span><span class="hljs-string">"onCloseReport()"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">app-issue-report</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
    </ol>
    <p class="normal">We have successfully connected all the dots and completed the interaction between the report issue form and the table that displays issues. Now it is time to put them into action:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Run the Angular application using <code class="inlineCode">ng</code> <code class="inlineCode">serve</code>.</li>
      <li class="numberedList">Click on the <strong class="screenText">ADD NEW ISSUE</strong> button and enter the details of a new issue:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_03_03.png" alt="Figure 3.2 – Report issue form"/></figure>
    <p class="packt_figref">Figure 3.3 – Report issue form</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Click on the <strong class="screenText">CREATE</strong> button, and the new issue should appear in the table:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_03_04.png" alt="Figure 3.3 – Pending issues"/></figure>
    <p class="packt_figref">Figure 3.4 – Pending issues</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Repeat steps 2 and 3 without filling in any details, and you will notice an empty issue added to the table.</li>
    </ol>
    <p class="normal">An empty <a id="_idIndexMarker176"/>issue can be created because we have not defined any required fields on our report issue form. In the following section, we will learn how to accomplish this task and add validations to our form to avoid unexpected behaviors.</p>
    <h2 id="_idParaDest-61" class="heading-2">Validating the details of an issue</h2>
    <p class="normal">When we <a id="_idIndexMarker177"/>create an issue with the report issue form, we can leave the form control value empty since we have not added any validation rules yet. To add validations in a form control, we use the <code class="inlineCode">Validators</code> class from the <code class="inlineCode">@angular/forms</code> npm package. A validator is added in each form control instance when we build the form. In this case, we will use the <strong class="keyWord">required</strong> validator to <a id="_idIndexMarker178"/>indicate that a form control is required to have a value:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">issue-report.component.ts</code> file and import <code class="inlineCode">Validators</code> from the <code class="inlineCode">@angular/forms</code> npm package:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">FormControl</span>, <span class="hljs-title">FormGroup</span>, <span class="code-highlight"><strong class="hljs-title-slc">Validators</strong></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;
</code></pre>
      </li>
      <li class="numberedList">Set the <code class="inlineCode">Validators.required</code> static property in all controls except the <code class="inlineCode">description</code> of the issue:
        <pre class="programlisting code"><code class="hljs-code">issueForm = <span class="hljs-keyword">new</span> <span class="hljs-title">FormGroup</span>&lt;<span class="hljs-title">IssueForm</span>&gt;({
  <span class="hljs-attr">title</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span>, <span class="code-highlight"><strong class="hljs-attr-slc">validators</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Validators</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">required</strong></span> }),
  <span class="hljs-attr">description</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span> }),
  <span class="hljs-attr">priority</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span>, <span class="code-highlight"><strong class="hljs-attr-slc">validators</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Validators</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">required</strong></span> }),
  <span class="hljs-attr">type</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">FormControl</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">nonNullable</span>: <span class="hljs-literal">true</span>, <span class="code-highlight"><strong class="hljs-attr-slc">validators</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">Validators</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">required</strong></span> })
});
</code></pre>
    <p class="normal">We can use<a id="_idIndexMarker179"/> various validators for a form control, such as <strong class="keyWord">min</strong>, <strong class="keyWord">max</strong>, and <strong class="keyWord">email</strong>. If we want to set multiple validators in a form control, we add them inside an array.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">When we use validators in a form, we need to provide a visual indication to the user of the form. Open the <code class="inlineCode">issue-report.component.html</code> file and add a <code class="inlineCode">&lt;clr-control-error&gt;</code> component for each required form control:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">clr-input-container</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Title<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">clrInput</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"title"</span><span class="hljs-tag"> /&gt;</span>
    <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">clr-control-error</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Title is required</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">clr-control-error</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-input-container</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">clr-textarea-container</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Description<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">textarea</span><span class="hljs-tag"> </span><span class="hljs-attr">clrTextarea</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"description"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">textarea</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-textarea-container</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">clr-radio-container</span><span class="hljs-tag"> </span><span class="hljs-attr">clrInline</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Priority<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"radio"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"low"</span><span class="hljs-tag"> </span><span class="hljs-attr">clrRadio</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"priority"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Low<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"radio"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"high"</span><span class="hljs-tag"> </span><span class="hljs-attr">clrRadio</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"priority"</span><span class="hljs-tag"> /&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>High<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-radio-wrapper</span><span class="hljs-tag">&gt;</span>
    <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">clr-control-error</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Priority is required</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">clr-control-error</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-radio-container</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">clr-select-container</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>Type<span class="hljs-tag">&lt;/</span><span class="hljs-name">label</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">select</span><span class="hljs-tag"> </span><span class="hljs-attr">clrSelect</span><span class="hljs-tag"> </span><span class="hljs-attr">formControlName</span><span class="hljs-tag">=</span><span class="hljs-string">"type"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">option</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"Feature"</span><span class="hljs-tag">&gt;</span>Feature<span class="hljs-tag">&lt;/</span><span class="hljs-name">option</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">option</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"Bug"</span><span class="hljs-tag">&gt;</span>Bug<span class="hljs-tag">&lt;/</span><span class="hljs-name">option</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">option</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">"Documentation"</span><span class="hljs-tag">&gt;</span>Documentation<span class="hljs-tag">&lt;/</span><span class="hljs-name">option</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">select</span><span class="hljs-tag">&gt;</span>
    <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">clr-control-error</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Type is required</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">clr-control-error</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-select-container</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">The <code class="inlineCode">&lt;clr-control-error&gt;</code> Clarity component provides validation messages in forms. It<a id="_idIndexMarker180"/> is displayed when we touch an invalid control. A control is invalid when at least one of its validation rules is violated.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">The user may only sometimes touch form controls to see the validation message. So, we need to consider that upon form submission and act accordingly. To overcome this case, we will mark all form controls as touched when the form is submitted:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">addIssue</span>() {
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">if</strong><strong class="hljs-slc"> (</strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">issueForm</strong><strong class="hljs-slc"> &amp;&amp; </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">issueForm</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">invalid</strong><strong class="hljs-slc">) {</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-variable-slc">this</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">issueForm</strong><strong class="hljs-slc">.</strong><strong class="hljs-title-slc">markAllAsTouched</strong><strong class="hljs-slc">();</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-keyword-slc">return</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  }</strong></span>
  <span class="hljs-variable">this</span>.<span class="hljs-property">issueService</span>.<span class="hljs-title">createIssue</span>(<span class="hljs-variable">this</span>.<span class="hljs-property">issueForm</span>.<span class="hljs-title">getRawValue</span>() <span class="hljs-keyword">as</span> <span class="hljs-title">Issue</span>);
  <span class="hljs-variable">this</span>.<span class="hljs-property">formClose</span>.<span class="hljs-title">emit</span>();
}
</code></pre>
    <p class="normal">In the preceding snippet, we use the <code class="inlineCode">markAllAsTouched</code> method of the <code class="inlineCode">issueForm</code> property to mark all controls as touched when the form is invalid. Marking controls as touched makes validation messages appear automatically. Additionally, we use a <code class="inlineCode">return</code> statement to prevent the creation of the issue when the form is invalid.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">Run <code class="inlineCode">ng serve</code> to start the application. Click inside the <strong class="screenText">Title</strong> input, and then move the focus out of the form control:
    <figure class="mediaobject"><img src="../Images/B18465_03_05.png" alt="Figure 3.4 – Title validation message"/></figure>
    <p class="packt_figref">Figure 3.5 – Title validation message</p>
    <p class="normal">A message should appear underneath the <strong class="screenText">Title</strong> input stating that we have not entered any value yet. Validation messages in the Clarity library are indicated by text and <a id="_idIndexMarker181"/>an exclamation icon in red in the form control that is validated.</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">Now, click on the <strong class="screenText">CREATE</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_03_06.png" alt="Figure 3.5 – Form validation messages"/></figure>
    <p class="packt_figref">Figure 3.6 – Form validation messages</p>
    <p class="normal">All validation messages will appear on the screen at once, and the form will not be submitted. Validations in reactive forms ensure a smooth UX for our Angular applications. In the following section, we will learn how to create a modal dialog with Clarity and use it to resolve issues from our list.</p>
    <h1 id="_idParaDest-62" class="heading-1">Resolving an issue</h1>
    <p class="normal">The<a id="_idIndexMarker182"/> main idea behind having an issue tracking system is that an issue should be resolved at some point. We will create a user workflow in our application to accomplish such a task. We will be able to resolve an issue directly from the list of pending issues. The application will ask for confirmation from the user before resolving with the use of a modal dialog:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create an Angular component to host the dialog:
        <pre class="programlisting con"><code class="hljs-con">ng generate component confirm-dialog
</code></pre>
      </li>
      <li class="numberedList">Open<a id="_idIndexMarker183"/> the <code class="inlineCode">confirm-dialog.component.ts</code> file and modify it as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span>, <span class="code-highlight"><strong class="hljs-title-slc">EventEmitter</strong><strong class="hljs-slc">, </strong><strong class="hljs-title-slc">Input</strong><strong class="hljs-slc">, </strong><strong class="hljs-title-slc">Output</strong></span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-confirm-dialog'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./confirm-dialog.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./confirm-dialog.component.css'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ConfirmDialogComponent</span> {
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-meta-slc">@Input</strong><strong class="hljs-slc">() </strong><strong class="hljs-attr-slc">issueNo</strong><strong class="hljs-slc">: </strong><strong class="hljs-built_in-slc">number</strong><strong class="hljs-slc"> | </strong><strong class="hljs-literal-slc">null</strong><strong class="hljs-slc"> = </strong><strong class="hljs-literal-slc">null</strong><strong class="hljs-slc">;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-meta-slc">@Output</strong><strong class="hljs-slc">() confirm = </strong><strong class="hljs-keyword-slc">new</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">EventEmitter</strong><strong class="hljs-slc">&lt;</strong><strong class="hljs-built_in-slc">boolean</strong><strong class="hljs-slc">&gt;();</strong></span>
}
</code></pre>
    <p class="normal">We use the <code class="inlineCode">@Input()</code> decorator to get the issue number and display it on the component template. The <code class="inlineCode">confirm</code> event will emit a <code class="inlineCode">boolean</code> value to indicate whether the user confirmed resolving the issue or not.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Create two methods that will call the <code class="inlineCode">emit</code> method of the <code class="inlineCode">confirm</code> output property, either with <code class="inlineCode">true</code> or <code class="inlineCode">false</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">agree</span>() {
  <span class="hljs-variable">this</span>.<span class="hljs-property">confirm</span>.<span class="hljs-title">emit</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-variable">this</span>.<span class="hljs-property">issueNo</span> = <span class="hljs-literal">null</span>;
}
<span class="hljs-title">disagree</span>() {
  <span class="hljs-variable">this</span>.<span class="hljs-property">confirm</span>.<span class="hljs-title">emit</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-variable">this</span>.<span class="hljs-property">issueNo</span> = <span class="hljs-literal">null</span>;
}
</code></pre>
      </li>
    </ol>
    <p class="normal">Both methods will set the <code class="inlineCode">issueNo</code> property to <code class="inlineCode">null</code> because that property will also control whether the modal dialog is opened. So, we want to close the dialog in both cases.</p>
    <p class="normal">We have set up the TypeScript class of our dialog component. Let’s wire it up now with its template. Open the <code class="inlineCode">confirm-dialog.component.html</code> file and replace its content with the following:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">clr-modal</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrModalOpen</span><span class="hljs-tag">]=</span><span class="hljs-string">"issueNo !== null"</span><span class="hljs-tag"> [</span><span class="hljs-attr">clrModalClosable</span><span class="hljs-tag">]=</span><span class="hljs-string">"false"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">h3</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"modal-title"</span><span class="hljs-tag">&gt;</span>
      Resolve Issue #
      {{issueNo}}
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">h3</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"modal-body"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>Are you sure you want to close the issue?<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"modal-footer"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"button"</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-outline"</span><span class="hljs-tag"> (</span><span class="hljs-attr">click</span><span class="hljs-tag">)=</span><span class="hljs-string">"disagree()"</span><span class="hljs-tag">&gt;</span>Cancel<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"button"</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-danger"</span><span class="hljs-tag"> (</span><span class="hljs-attr">click</span><span class="hljs-tag">)=</span><span class="hljs-string">"agree()"</span><span class="hljs-tag">&gt;</span>Yes, continue<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-modal</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">A Clarity modal <a id="_idIndexMarker184"/>dialog consists of a <code class="inlineCode">&lt;clr-modal&gt;</code> component and a collection of HTML elements with specific classes:</p>
    <ul>
      <li class="bulletList"><code class="inlineCode">modal-title</code>: The dialog title that displays the current issue number.</li>
      <li class="bulletList"><code class="inlineCode">modal-body</code>: The main content of the dialog.</li>
      <li class="bulletList"><code class="inlineCode">modal-footer</code>: The footer of the dialog that is commonly used to add actions for that dialog. We currently add two HTML <code class="inlineCode">&lt;button&gt;</code> elements and bind their <code class="inlineCode">click</code> event to the <code class="inlineCode">agree</code> and <code class="inlineCode">disagree</code> component methods, respectively.</li>
    </ul>
    <p class="normal">Whether it is opened or closed, the current status of the dialog is indicated by the <code class="inlineCode">clrModalOpen</code> directive bound to the <code class="inlineCode">issueNo</code> input property. When that property is null, the dialog is closed. The <code class="inlineCode">clrModalClosable</code> directive indicates that the dialog cannot be closed by any means other than programmatically through the <code class="inlineCode">issueNo</code> property.</p>
    <p class="normal">According to our specs, we want the user to resolve an issue directly from the list. Let’s find out how we can integrate the dialog that we created with the list of pending issues:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">issues.service.ts</code> file and add a new method to set the <code class="inlineCode">completed</code> property of an issue:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">completeIssue</span>(<span class="hljs-params">issue: Issue</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">selectedIssue</span>: <span class="hljs-title">Issue</span> = {
    ...issue,
    <span class="hljs-attr">completed</span>: <span class="hljs-keyword">new</span> <span class="hljs-title">Date</span>()
  };
  <span class="hljs-keyword">const</span> index = <span class="hljs-variable">this</span>.<span class="hljs-property">issues</span>.<span class="hljs-title">findIndex</span>(<span class="hljs-params">i</span><span class="hljs-function"> =&gt;</span> i === issue);
  <span class="hljs-variable">this</span>.<span class="hljs-property">issues</span>[index] = selectedIssue;
}
</code></pre>
    <p class="normal">The<a id="_idIndexMarker185"/> previous method first creates a clone of the issue we want to resolve and sets its <code class="inlineCode">completed</code> property to the current date. It then finds the initial issue in the <code class="inlineCode">issues</code> array and replaces it with the cloned instance.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Open the <code class="inlineCode">issue-list.component.ts</code> file and add a <code class="inlineCode">selectedIssue</code> property and an <code class="inlineCode">onConfirm</code> method in the TypeScript class:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">selectedIssue</span>: <span class="hljs-title">Issue</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
<span class="hljs-title">onConfirm</span>(<span class="hljs-params">confirmed: </span><span class="hljs-built_in">boolean</span>) {
  <span class="hljs-keyword">if</span> (confirmed &amp;&amp; <span class="hljs-variable">this</span>.<span class="hljs-property">selectedIssue</span>) {
    <span class="hljs-variable">this</span>.<span class="hljs-property">issueService</span>.<span class="hljs-title">completeIssue</span>(<span class="hljs-variable">this</span>.<span class="hljs-property">selectedIssue</span>);
    <span class="hljs-variable">this</span>.<span class="hljs-title">getIssues</span>();
  }
  <span class="hljs-variable">this</span>.<span class="hljs-property">selectedIssue</span> = <span class="hljs-literal">null</span>;
}
</code></pre>
    <p class="normal">The <code class="inlineCode">onConfirm</code> method calls the <code class="inlineCode">completeIssue</code> method of the <code class="inlineCode">issueService</code> property only when the <code class="inlineCode">confirmed</code> parameter is true. In this case, it also calls the <code class="inlineCode">getIssues</code> method to refresh the table data. The <code class="inlineCode">selectedIssue</code> property holds the <code class="inlineCode">Issue</code> object that we want to resolve, and it is reset whenever the <code class="inlineCode">onConfirm</code> method is called.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Open the <code class="inlineCode">issue-list.component.html</code> file and add an action overflow component inside the <code class="inlineCode">&lt;clr-dg-row&gt;</code> component:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-row</span><span class="hljs-tag"> *</span><span class="hljs-attr">clrDgItems</span><span class="hljs-tag">=</span><span class="hljs-string">"let issue of issues"</span><span class="hljs-tag">&gt;</span>
    <span class="code-highlight"><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">clr-dg-action-overflow</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">        </strong><strong class="hljs-tag-slc">&lt;</strong><strong class="hljs-name-slc">button</strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc">class</strong><strong class="hljs-tag-slc">=</strong><strong class="hljs-string-slc">"action-item"</strong><strong class="hljs-tag-slc"> (</strong><strong class="hljs-attr-slc">click</strong><strong class="hljs-tag-slc">)=</strong><strong class="hljs-string-slc">"selectedIssue = issue"</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">Resolve</strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">button</strong><strong class="hljs-tag-slc">&gt;</strong></span>
<span class="code-highlight"><strong class="hljs-slc">    </strong><strong class="hljs-tag-slc">&lt;/</strong><strong class="hljs-name-slc">clr-dg-action-overflow</strong><strong class="hljs-tag-slc">&gt;</strong><strong class="hljs-slc">            </strong></span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.issueNo}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.type}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.title}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>{{issue.description}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"label"</span><span class="hljs-tag"> [</span><span class="hljs-attr">class.label-danger</span><span class="hljs-tag">]=</span><span class="hljs-string">"issue.priority === 'high'"</span><span class="hljs-tag">&gt;</span>{{issue.priority}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-cell</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-dg-row</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">The <code class="inlineCode">&lt;clr-dg-action-overflow&gt;</code> Clarity component adds a drop-down menu in each<a id="_idIndexMarker186"/> table row. The menu contains a single button to set the <code class="inlineCode">selectedIssue</code> property to the current issue when clicked.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Finally, add the <code class="inlineCode">&lt;app-confirm-dialog&gt;</code> component at the end of the template:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">app-confirm-dialog</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngIf</span><span class="hljs-tag">=</span><span class="hljs-string">"selectedIssue"</span><span class="hljs-tag"> [</span><span class="hljs-attr">issueNo</span><span class="hljs-tag">]=</span><span class="hljs-string">"selectedIssue.issueNo"</span><span class="hljs-tag"> (</span><span class="hljs-attr">confirm</span><span class="hljs-tag">)=</span><span class="hljs-string">"onConfirm($event)"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">app-confirm-dialog</span><span class="hljs-tag">&gt;</span>
</code></pre>

    <p class="normal">We pass the <code class="inlineCode">issueNo</code> property of <code class="inlineCode">selectedIssue</code> to the input binding of the dialog component.</p>
    <p class="normal">We also bind the <code class="inlineCode">onConfirm</code> component method to the <code class="inlineCode">confirm</code> event so that we can be notified when the user either agrees or not. The <code class="inlineCode">$event</code> parameter is a reserved keyword in Angular and contains the event binding result, which depends on the HTML element type. In this case, it includes the <code class="inlineCode">boolean</code> result of the confirmation.</p>
      </li>
    </ol>
    <p class="normal">We have put all the pieces into place to resolve an issue. Let’s give it a try:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Run <code class="inlineCode">ng serve</code> and open the application at <code class="inlineCode">http://localhost:4200</code>.</li>
      <li class="numberedList">If you don’t have any issues, use the <strong class="screenText">ADD NEW ISSUE</strong> button to create one.</li>
      <li class="numberedList">Click on the action menu of one row and select <strong class="screenText">Resolve</strong>. The menu is the three vertical dots icon next to the <strong class="screenText">Issue No</strong> column:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_03_07.png" alt="Figure 3.6 – Action menu"/></figure>
    <p class="packt_figref">Figure 3.7 – Action menu</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">In <a id="_idIndexMarker187"/>the dialog that appears, click on the <strong class="screenText">YES, CONTINUE</strong> button:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B18465_03_08.png" alt="Figure 3.7 – Resolve Issue dialog"/></figure>
    <p class="packt_figref">Figure 3.8 – Resolve Issue dialog</p>
    <p class="normal">After clicking the button, the dialog will close, and the issue should no longer be visible on the list.</p>
    <p class="normal">We have<a id="_idIndexMarker188"/> provided a way for users of our application to resolve issues. Our issue-tracking system is now complete and ready to put into action! Sometimes, users are in a hurry and may report an issue already reported. In the following section, we will learn how to leverage advanced reactive form techniques to help them in this case.</p>
    <h1 id="_idParaDest-63" class="heading-1">Turning on suggestions for new issues</h1>
    <p class="normal">The<a id="_idIndexMarker189"/> reactive forms API contains a mechanism for getting notified when the value of a particular form control changes. We will use it in our application to find related issues when reporting a new one. More specifically, we will display a list of suggested issues when the user starts typing in the title form control:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Open the <code class="inlineCode">issues.service.ts</code> file and add the following method:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">getSuggestions</span>(<span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title">Issue</span>[] {
  <span class="hljs-keyword">if</span> (title.<span class="hljs-property">length</span> &gt; <span class="hljs-number">3</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable">this</span>.<span class="hljs-property">issues</span>.<span class="hljs-title">filter</span>(<span class="hljs-params">issue</span><span class="hljs-function"> =&gt;</span>
      issue.<span class="hljs-property">title</span>.<span class="hljs-title">indexOf</span>(title) !== -<span class="hljs-number">1</span>);
  }
  <span class="hljs-keyword">return</span> [];
}
</code></pre>
    <p class="normal">The preceding method takes the title of an issue as a parameter and searches for any issues that contain the same title. The search mechanism is triggered when the <code class="inlineCode">title</code> parameter is more than three characters long to limit results to a reasonable amount.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Open the <code class="inlineCode">issue-report.component.ts</code> file and import the <code class="inlineCode">OnInit</code> artifact from the <code class="inlineCode">@angular/core</code> npm package:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-title">Component</span>, <span class="hljs-title">EventEmitter</span>, <span class="code-highlight"><strong class="hljs-title-slc">OnInit</strong></span>, <span class="hljs-title">Output</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
</code></pre>
      </li>
      <li class="numberedList">Create a new component property to hold the suggested issues:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">suggestions</span>: <span class="hljs-title">Issue</span>[]= [];
</code></pre>
      </li>
      <li class="numberedList">Add the <code class="inlineCode">OnInit</code> interface to the list of implemented interfaces of the <code class="inlineCode">IssueReportComponent</code> class:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IssueReportComponent</span> <span class="code-highlight"><strong class="hljs-keyword-slc">implements</strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc">OnInit</strong></span> {
</code></pre>
      </li>
      <li class="numberedList">The <code class="inlineCode">controls</code> property of a <code class="inlineCode">FormGroup</code> object contains all form controls as a key-value <a id="_idIndexMarker190"/>pair. The key is the name of the control, and the value is the actual form control object. We can get notified about changes in the value of a form control by accessing its name, in this case, <code class="inlineCode">title</code>, in the following way:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">ngOnInit</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable">this</span>.<span class="hljs-property">issueForm</span>.<span class="hljs-property">controls</span>.<span class="hljs-property">title</span>.<span class="hljs-property">valueChanges</span>.<span class="hljs-title">subscribe</span>(<span class="hljs-params">title</span><span class="hljs-function"> =&gt;</span> {
    <span class="hljs-variable">this</span>.<span class="hljs-property">suggestions</span> = <span class="hljs-variable">this</span>.<span class="hljs-property">issueService</span>.<span class="hljs-title">getSuggestions</span>(title);
  });
}  
</code></pre>
    <p class="normal">Each control exposes a <code class="inlineCode">valueChanges</code> observable that we can subscribe to and get a continuous stream of values. The <code class="inlineCode">valueChanges</code> observable emits new values as soon as the user starts typing in the <code class="inlineCode">title</code> control of the form. When that happens, we set the result of the <code class="inlineCode">getSuggestions</code> method in the <code class="inlineCode">suggestions</code> component property.</p>
      </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">To display the suggested issues on the template of the component, open the <code class="inlineCode">issue-report.component.html</code> file and add the following HTML code right after the <code class="inlineCode">&lt;clr-input-container&gt;</code> element:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"clr-row"</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngIf</span><span class="hljs-tag">=</span><span class="hljs-string">"suggestions.length"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"clr-col-lg-2"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"clr-col-lg-6"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-stack-view</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-stack-header</span><span class="hljs-tag">&gt;</span>Similar issues<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-stack-header</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-stack-block</span><span class="hljs-tag"> *</span><span class="hljs-attr">ngFor</span><span class="hljs-tag">=</span><span class="hljs-string">"let issue of suggestions"</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-stack-label</span><span class="hljs-tag">&gt;</span>#{{issue.issueNo}}:{{issue.title}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-stack-label</span><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;</span><span class="hljs-name">clr-stack-content</span><span class="hljs-tag">&gt;</span>{{issue.description}}<span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-stack-content</span><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-stack-block</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;/</span><span class="hljs-name">clr-stack-view</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span> 
</code></pre>
    <p class="normal">We use the <code class="inlineCode">&lt;clr-stack-view&gt;</code> component from the Clarity library to display suggested issues in a key-value pair representation. The key is indicated by the <code class="inlineCode">&lt;clr-stack-header&gt;</code> component and displays the title and the number of the issue. The <code class="inlineCode">&lt;clr-stack-content&gt;</code> component indicates the value and displays the issue description.</p>
      </li>
    </ol>
    <div class="note">
      <p class="normal">We display similar issues only when there are any available suggested ones.</p>
    </div>
    <p class="normal">Run <code class="inlineCode">ng serve</code> and open the report issue form to create a new issue. When you start typing<a id="_idIndexMarker191"/> in the <strong class="screenText">Title</strong> input, the application will suggest any issues related to the one that you are trying to create:</p>
    <figure class="mediaobject"><img src="../Images/B18465_03_09.png" alt="Figure 3.8 – Similar issues"/></figure>
    <p class="packt_figref">Figure 3.9 – Similar issues</p>
    <p class="normal">The user will now see if there are any similar issues and avoid reporting a duplicate issue.</p>
    <h1 id="_idParaDest-64" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, we built an Angular application for managing and tracking issues using reactive forms and Clarity Design System.</p>
    <p class="normal">First, we installed Clarity in an Angular application and used a data grid component to display a list of pending issues. Then, we introduced reactive forms and used them to build a form for reporting a new issue. We added validations in the form to give our users a visual indication of the required fields and guard against unwanted behavior.</p>
    <p class="normal">An issue-tracking system is only efficient if our users can resolve them. We built a modal dialog using Clarity to resolve a selected issue. Finally, we improved the UX of our application by suggesting related issues when reporting a new one.</p>
    <p class="normal">In the next chapter, we will build a progressive web application for the weather using the Angular service worker.</p>
    <h1 id="_idParaDest-65" class="heading-1">Exercise</h1>
    <p class="normal">Create an Angular component to edit the details of an existing issue. The component should display the issue number and allow the user to change the title, description, and priority. The title and the description should be required fields.</p>
    <p class="normal">The user should be able to access the previous component using the action menu in the list of pending issues. Add a new action menu button to open the edit issue form.</p>
    <p class="normal">After the user has completed updating an issue, the form should be closed, and the list of pending issues should be refreshed.</p>
    <p class="normal">You can find the solution to the exercise in the <code class="inlineCode">Chapter03</code> folder of the <code class="inlineCode">exercise</code> branch at <a href="https://github.com/PacktPublishing/Angular-Projects-Third-Edition/tree/exercise"><span class="url">https://github.com/PacktPublishing/Angular-Projects-Third-Edition/tree/exercise</span></a>.</p>
    <h1 id="_idParaDest-66" class="heading-1">Further reading</h1>
    <ul>
      <li class="bulletList">Angular forms: <a href="https://angular.io/guide/forms-overview"><span class="url">https://angular.io/guide/forms-overview</span></a></li>
      <li class="bulletList">Reactive forms: <a href="https://angular.io/guide/reactive-forms"><span class="url">https://angular.io/guide/reactive-forms</span></a></li>
      <li class="bulletList">Validating reactive forms: <a href="https://angular.io/guide/form-validation#validating-input-in-reactive-forms"><span class="url">https://angular.io/guide/form-validation#validating-input-in-reactive-forms</span></a></li>
      <li class="bulletList">Passing data to a component: <a href="https://angular.io/guide/component-interaction#pass-data-from-parent-to-child-with-input-binding"><span class="url">https://angular.io/guide/component-interaction#pass-data-from-parent-to-child-with-input-binding</span></a></li>
      <li class="bulletList">Getting data from a component: <a href="https://angular.io/guide/component-interaction#parent-listens-for-child-event"><span class="url">https://angular.io/guide/component-interaction#parent-listens-for-child-event</span></a></li>
      <li class="bulletList">Getting started with Clarity: <a href="https://clarity.design/documentation/get-started"><span class="url">https://clarity.design/documentation/get-started</span></a></li>
    </ul>
    <h1 id="_idParaDest-67" class="heading-1">Join our community on Discord</h1>
    <p class="normal">Join our community’s Discord space for discussions with the author and other readers:</p>
    <p class="normal"><a href="https://packt.link/AngularProjects3e"><span class="url">https://packt.link/AngularProjects3e</span></a></p>
    <p class="normal"><span class="url"><img src="../Images/QR_Code89405936498927781.png" alt=""/></span></p>
  </div>
</body></html>