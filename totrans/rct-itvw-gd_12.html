<html><head></head><body>
<div id="_idContainer056">
<h1 class="chapter-number" id="_idParaDest-340"><a id="_idTextAnchor339"/><span class="koboSpan" id="kobo.1.1">12</span></h1>
<h1 id="_idParaDest-341"><a id="_idTextAnchor340"/><span class="koboSpan" id="kobo.2.1">Building an App Based on the Next.js Toolkit, Authentication, SWR, GraphQL, and Deployment</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Throughout our journey in this book, we have learned new skills, methodologies, and better ways of thinking. </span><span class="koboSpan" id="kobo.3.2">This chapter is the culmination of our efforts, so let’s move forward, as it is now time for us to put everything we have learned together as we seek to develop an exciting application that features an up-to-date modern tech stack. </span><span class="koboSpan" id="kobo.3.3">This chapter will allow us to progress from concept to the deployment of a Next.js application that has implementations for </span><a id="_idIndexMarker844"/><span class="koboSpan" id="kobo.4.1">authentication, </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">stale-while-revalidate</span></strong><span class="koboSpan" id="kobo.6.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.7.1">SWR</span></strong><span class="koboSpan" id="kobo.8.1">), GraphQL, </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">and deployment.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">We will start with a quick introduction to REST APIs, which will be a fantastic refresher if you are already familiar with them, or a great introduction if it’s your first time learning about this essential methodology. </span><span class="koboSpan" id="kobo.10.2">Then, we shall move on to figuring out how best to plan the architecture for an application, where we will go into how authentication works. </span><span class="koboSpan" id="kobo.10.3">This will be followed up by how effective SWR is and why it’s worth using, as it’s a very useful aspect that can enhance the performance of our applications. </span><span class="koboSpan" id="kobo.10.4">Next, we will learn about GraphQL and how it compares with traditional REST APIs. </span><span class="koboSpan" id="kobo.10.5">Then, we will end with deployment, which is where we finally publish our local development build online so that the whole world can </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">use it.</span></span></p>
<p><span class="koboSpan" id="kobo.12.1">In the sections that follow, we will talk about the ideas behind business logic and how the code we write has significant importance not just for the way our application runs but also for how it can reflect positively or negatively on our team and company depending on how well it is written. </span><span class="koboSpan" id="kobo.12.2">Moving on, we will go through creating the presentation layer, which is essential to the user interface and user experience. </span><span class="koboSpan" id="kobo.12.3">Testing is going to be the next major feature that we touch on, as it’s highly recommended that production-ready applications have a robust testing suite set up to guarantee that it is stable and in a state that is ready to be</span><a id="_idIndexMarker845"/><span class="koboSpan" id="kobo.13.1"> published as a </span><strong class="bold"><span class="koboSpan" id="kobo.14.1">minimum viable </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.15.1">product</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.16.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.17.1">MVP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">With those features completed, we will finish off by learning how to deploy our application so that the public can access it. </span><span class="koboSpan" id="kobo.19.2">In the last sections, we will create a Git repository with a </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">README file.</span></span></p>
<p><span class="koboSpan" id="kobo.21.1">In terms of topics, the following will be the themes that we will be focusing on in the </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">upcoming sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.23.1">Quick introduction to </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">REST APIs</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Planning the application architecture including authentication, SWR, GraphQL, </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">and deployment</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Building the </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">business logic</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Building the </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">presentation layer</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.31.1">Implementing testing</span></span></li>
<li><span class="koboSpan" id="kobo.32.1">Creating a Git repository with </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">README documentation</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">Deploying the application for </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">public access</span></span></li>
</ul>
<h1 id="_idParaDest-342"><a id="_idTextAnchor341"/><span class="koboSpan" id="kobo.36.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.37.1">On your machine, confirm that </span><a href="https://nodejs.org/en"><span class="koboSpan" id="kobo.38.1">https://nodejs.org/en</span></a><span class="koboSpan" id="kobo.39.1"> is up to date and that the JavaScript Node package for Next.js is set up and operational. </span><span class="koboSpan" id="kobo.39.2">You can use whatever package manager you want, be it </span><strong class="source-inline"><span class="koboSpan" id="kobo.40.1">npm</span></strong><span class="koboSpan" id="kobo.41.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.42.1">yarn</span></strong><span class="koboSpan" id="kobo.43.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.44.1">pnpm</span></strong><span class="koboSpan" id="kobo.45.1">. </span><span class="koboSpan" id="kobo.45.2">Just make sure that you use the appropriate commands when doing the installation. </span><span class="koboSpan" id="kobo.45.3">For simplicity’s sake, we will be using </span><strong class="source-inline"><span class="koboSpan" id="kobo.46.1">npm</span></strong><span class="koboSpan" id="kobo.47.1">. </span><span class="koboSpan" id="kobo.47.2">Work on your project with your preferred </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">integrated development environment</span></strong><span class="koboSpan" id="kobo.49.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.50.1">IDE</span></strong><span class="koboSpan" id="kobo.51.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.52.1">command-line interface</span></strong><span class="koboSpan" id="kobo.53.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.54.1">CLI</span></strong><span class="koboSpan" id="kobo.55.1">) tool. </span><span class="koboSpan" id="kobo.55.2">You will also need to have an account on </span><a href="https://vercel.com/"><span class="koboSpan" id="kobo.56.1">https://vercel.com/</span></a><span class="koboSpan" id="kobo.57.1"> for the deployment section when we build our app. </span><span class="koboSpan" id="kobo.57.2">For the authentication section, we will use GitHub and Google, so in the unlikely event that you don’t have accounts for both of these services already, create one now. </span><span class="koboSpan" id="kobo.57.3">GitHub is also required for the version control section, so it’s essential for you to have </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">an account.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">The package for Next.js can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">at </span></span><a href="https://nextjs.org/"><span class="No-Break"><span class="koboSpan" id="kobo.61.1">https://nextjs.org/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.62.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.63.1">The project and code base can be found online </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">at </span></span><a href="https://github.com/PacktPublishing/React-Interview-Guide/tree/main/Chapter12/coffee-restaurant"><span class="No-Break"><span class="koboSpan" id="kobo.65.1">https://github.com/PacktPublishing/React-Interview-Guide/tree/main/Chapter12/coffee-restaurant</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.66.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.67.1">To begin, let’s first talk about REST APIs to understand their </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">core concepts.</span></span></p>
<h1 id="_idParaDest-343"><a id="_idTextAnchor342"/><span class="koboSpan" id="kobo.69.1">Quick introduction to REST APIs</span></h1>
<p><span class="koboSpan" id="kobo.70.1">A </span><strong class="bold"><span class="koboSpan" id="kobo.71.1">Representational State Transfer Application Programming Interface</span></strong><span class="koboSpan" id="kobo.72.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.73.1">REST API</span></strong><span class="koboSpan" id="kobo.74.1">) is a particular</span><a id="_idIndexMarker846"/><span class="koboSpan" id="kobo.75.1"> technology that has established itself as the cornerstone of contemporary web development. </span><span class="koboSpan" id="kobo.75.2">By using REST APIs within JavaScript and React applications, developers can develop robust and dynamic web apps that can communicate with other platforms and information sources. </span><span class="koboSpan" id="kobo.75.3">Developers can transfer data between the server and client using the REST API without worrying about the architecture of the underlying apps. </span><span class="koboSpan" id="kobo.75.4">In simple terms, the REST API standardizes communication protocols, which simplifies development. </span><span class="koboSpan" id="kobo.75.5">With the correct tools and skills, REST APIs can totally alter the way web </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">developers work.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">We can easily understand the core methodology and concept of a REST API by using a restaurant as an example. </span><span class="koboSpan" id="kobo.77.2">This is considered to be a popular way to describe how the process works. </span><span class="koboSpan" id="kobo.77.3">For example, let’s say that a user has a restaurant application. </span><span class="koboSpan" id="kobo.77.4">Basically, the user requests some data for their menu page, which is equivalent to a user in a restaurant asking a waiter for some food. </span><span class="koboSpan" id="kobo.77.5">In this case, the waiter who is taking the food request is the same as the API taking the request to display the menu. </span><span class="koboSpan" id="kobo.77.6">The waiter then goes to the kitchen to get the food, which is equivalent to the API getting </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.79.1">So, let’s imagine that the application has a list of food on the menu. </span><span class="koboSpan" id="kobo.79.2">A customer takes a look at the menu and then gives their order to a waiter. </span><span class="koboSpan" id="kobo.79.3">The waiter goes to the kitchen with the customer’s order and waits for the meal to be completed. </span><span class="koboSpan" id="kobo.79.4">When the food is ready, the kitchen staff give the food to the waiter, who then responds by returning to the customer with the food they requested. </span><span class="koboSpan" id="kobo.79.5">In a real-world situation, the customer now has a meal to eat. </span><span class="koboSpan" id="kobo.79.6">If we imagine this as a website, then a page has now loaded with a table that shows food from the menu inside it. </span><span class="koboSpan" id="kobo.79.7">This information was fetched via the API to the backend server application, which </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">returned it.</span></span></p>
<p><span class="koboSpan" id="kobo.81.1">This example is perfectly illustrated in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.82.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.83.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer052">
<span class="koboSpan" id="kobo.85.1"><img alt="Figure 12.1: Describing a REST API" src="image/Figure_12.01_B18603.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.86.1">Figure 12.1: Describing a REST API</span></p>
<p><span class="koboSpan" id="kobo.87.1">Let’s now learn</span><a id="_idIndexMarker847"/><span class="koboSpan" id="kobo.88.1"> how we can manage our APIs using various tools. </span><span class="koboSpan" id="kobo.88.2">This is another important skill for developers </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">to have.</span></span></p>
<h2 id="_idParaDest-344"><a id="_idTextAnchor343"/><span class="koboSpan" id="kobo.90.1">What tools can we use for testing our APIs?</span></h2>
<p><span class="koboSpan" id="kobo.91.1">When doing API</span><a id="_idIndexMarker848"/><span class="koboSpan" id="kobo.92.1"> development, it is normal for a developer to use an API tool for managing, testing, and interacting with the API. </span><span class="koboSpan" id="kobo.92.2">Some of the most popular API development tools for JavaScript development can be seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.93.1">Table 12.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-7">
<colgroup>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style T---Body">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.95.1">API tool</span></strong></span></p>
</td>
<td class="No-Table-Style T---Body">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.96.1">Website address</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.97.1">Postman</span></span></p>
</td>
<td class="No-Table-Style T---Body">
<p><a href="https://www.postman.com/"><span class="No-Break"><span class="koboSpan" id="kobo.98.1">https://www.postman.com/</span></span></a></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.99.1">Insomnia</span></span></p>
</td>
<td class="No-Table-Style T---Body">
<p><a href="https://insomnia.rest/"><span class="No-Break"><span class="koboSpan" id="kobo.100.1">https://insomnia.rest/</span></span></a></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.101.1">Swagger</span></span></p>
</td>
<td class="No-Table-Style T---Body">
<p><a href="https://swagger.io/"><span class="No-Break"><span class="koboSpan" id="kobo.102.1">https://swagger.io/</span></span></a></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style T---Body">
<p><span class="No-Break"><span class="koboSpan" id="kobo.103.1">Thunder Client</span></span></p>
</td>
<td class="No-Table-Style T---Body">
<p><a href="https://www.thunderclient.com/"><span class="No-Break"><span class="koboSpan" id="kobo.104.1">https://www.thunderclient.com/</span></span></a></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.105.1">Table 12.1: Popular JavaScript REST API tools</span></p>
<p><span class="koboSpan" id="kobo.106.1">With these tools, we can thoroughly test our REST APIs and it is even possible to use this as a basis for creating the documentation. </span><span class="koboSpan" id="kobo.106.2">There is something that we need to be aware of though when building APIs, and </span><a id="_idIndexMarker849"/><span class="koboSpan" id="kobo.107.1">that is </span><strong class="bold"><span class="koboSpan" id="kobo.108.1">cross-origin resource sharing</span></strong><span class="koboSpan" id="kobo.109.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.110.1">CORS</span></strong><span class="koboSpan" id="kobo.111.1">). </span><span class="koboSpan" id="kobo.111.2">CORS is basically an application integration method. </span><span class="koboSpan" id="kobo.111.3">CORS specifies a method for client web applications loaded in a single domain to communicate with assets located in another domain. </span><span class="koboSpan" id="kobo.111.4">So, essentially, if we do not specify or allow CORS access in our APIs, then we will be blocked from accessing them unless they are on the </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">same server.</span></span></p>
<p><span class="koboSpan" id="kobo.113.1">For example, we could have an API hosted online on a website, and let’s say that we have a React application that is online on a different server somewhere. </span><span class="koboSpan" id="kobo.113.2">If our API is not set up for CORS, then our React application can’t connect to it to retrieve any data, and we will just get a CORS error in our browser console, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer053">
<span class="koboSpan" id="kobo.115.1"><img alt="Figure 12.2: A CORS error web browser console message" src="image/Figure_12.02_B18603.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.116.1">Figure 12.2: A CORS error web browser console message</span></p>
<p><span class="koboSpan" id="kobo.117.1">It’s time to move </span><a id="_idIndexMarker850"/><span class="koboSpan" id="kobo.118.1">on to learning about REST APIs in more detail now that we have a better understanding of how they are set up. </span><span class="koboSpan" id="kobo.118.2">So, let’s see what features are </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">on offer.</span></span></p>
<h2 id="_idParaDest-345"><a id="_idTextAnchor344"/><span class="koboSpan" id="kobo.120.1">Which features are available in a REST API?</span></h2>
<p><span class="koboSpan" id="kobo.121.1">A REST API is a </span><a id="_idIndexMarker851"/><span class="koboSpan" id="kobo.122.1">strong tool that gives developers access to a wide range of functions. </span><span class="koboSpan" id="kobo.122.2">The REST API’s excellent security system is one of its most important characteristics. </span><span class="koboSpan" id="kobo.122.3">It guarantees that any malicious attacks won’t be made on the data given over the API. </span><span class="koboSpan" id="kobo.122.4">Additionally, the REST API’s capacity to scale is another crucial aspect, which implies that it is a great option for apps with heavy traffic because it can manage a lot of queries. </span><span class="koboSpan" id="kobo.122.5">Another remarkable quality of REST APIs is their flexibility, which lets developers use any architecture or technology of their choosing. </span><span class="koboSpan" id="kobo.122.6">REST APIs are an excellent tool for developers who wish to create dependable and durable apps thanks to all these features </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">taken together.</span></span></p>
<p><span class="koboSpan" id="kobo.124.1">A REST API is</span><a id="_idIndexMarker852"/><span class="koboSpan" id="kobo.125.1"> capable of requesting and responding to requests, but what does that mean? </span><span class="koboSpan" id="kobo.125.2">Let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">find out.</span></span></p>
<h2 id="_idParaDest-346"><a id="_idTextAnchor345"/><span class="koboSpan" id="kobo.127.1">What is the difference between requests and responses when making requests to a REST API?</span></h2>
<p><span class="koboSpan" id="kobo.128.1">Understanding how</span><a id="_idIndexMarker853"/><span class="koboSpan" id="kobo.129.1"> HTTP requests and responses operate is essential if you want to create a web application that connects to a REST API. </span><span class="koboSpan" id="kobo.129.2">Data is sent from a client to a server using HTTP requests, and it is sent back from the server to the client using HTTP responses. </span><span class="koboSpan" id="kobo.129.3">REST APIs interact between clients and servers using </span><strong class="bold"><span class="koboSpan" id="kobo.130.1">GET</span></strong><span class="koboSpan" id="kobo.131.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.132.1">POST</span></strong><span class="koboSpan" id="kobo.133.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.134.1">PUT</span></strong><span class="koboSpan" id="kobo.135.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.136.1">DELETE</span></strong><span class="koboSpan" id="kobo.137.1"> standard HTTP protocols. </span><span class="koboSpan" id="kobo.137.2">We can build web apps that easily interface with REST APIs by designing them with greater effectiveness and efficiency by knowing how these requests and responses operate. </span><span class="koboSpan" id="kobo.137.3">There are other HTTP protocols available, but the standard ones are the most common. </span><span class="koboSpan" id="kobo.137.4">Now, let’s understand the difference between these </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">HTTP protocols.</span></span></p>
<h3><span class="koboSpan" id="kobo.139.1">What is a GET request?</span></h3>
<p><span class="koboSpan" id="kobo.140.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.141.1">GET</span></strong><span class="koboSpan" id="kobo.142.1"> request is</span><a id="_idIndexMarker854"/><span class="koboSpan" id="kobo.143.1"> a method that is used to obtain data from the server. </span><span class="koboSpan" id="kobo.143.2">It is a</span><a id="_idIndexMarker855"/><span class="koboSpan" id="kobo.144.1"> read-only procedure so there is no negative impact on the server. </span><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">GET</span></strong><span class="koboSpan" id="kobo.146.1"> requests do not cause the data or the server to change </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">its state.</span></span></p>
<h3><span class="koboSpan" id="kobo.148.1">What is a POST request?</span></h3>
<p><span class="koboSpan" id="kobo.149.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">POST</span></strong><span class="koboSpan" id="kobo.151.1"> request is</span><a id="_idIndexMarker856"/><span class="koboSpan" id="kobo.152.1"> used to transmit information to the server in order to</span><a id="_idIndexMarker857"/><span class="koboSpan" id="kobo.153.1"> establish new data. </span><span class="koboSpan" id="kobo.153.2">It is not immutable, which means that submitting the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">POST</span></strong><span class="koboSpan" id="kobo.155.1"> request many times might get different results. </span><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">POST</span></strong><span class="koboSpan" id="kobo.157.1"> requests generally return the URL or an instance of the newly </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">created resource.</span></span></p>
<h3><span class="koboSpan" id="kobo.159.1">What is a PUT request?</span></h3>
<p><span class="koboSpan" id="kobo.160.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">PUT</span></strong><span class="koboSpan" id="kobo.162.1"> request </span><a id="_idIndexMarker858"/><span class="koboSpan" id="kobo.163.1">can be</span><a id="_idIndexMarker859"/><span class="koboSpan" id="kobo.164.1"> utilized to add new information to preexisting server data. </span><span class="koboSpan" id="kobo.164.2">It is capable of change, so you can send the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">PUT</span></strong><span class="koboSpan" id="kobo.166.1"> request to get different results. </span><span class="koboSpan" id="kobo.166.2">Based on the way it’s done, if the data does not exist, the server could </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">create it.</span></span></p>
<h3><span class="koboSpan" id="kobo.168.1">What is a DELETE request?</span></h3>
<p><span class="koboSpan" id="kobo.169.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">DELETE</span></strong><span class="koboSpan" id="kobo.171.1"> request </span><a id="_idIndexMarker860"/><span class="koboSpan" id="kobo.172.1">is used</span><a id="_idIndexMarker861"/><span class="koboSpan" id="kobo.173.1"> to remove data from the server. </span><span class="koboSpan" id="kobo.173.2">It is also immutable, which means that sending the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">DELETE</span></strong><span class="koboSpan" id="kobo.175.1"> request multiple times has the same outcome. </span><span class="koboSpan" id="kobo.175.2">Following the deletion of data, the server normally provides a status indicating whether the action was successful </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">or unsuccessful.</span></span></p>
<p><span class="koboSpan" id="kobo.177.1">We can see an example REST API application in this code </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">example here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.179.1">
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();
const app = express();
app.use(cors());
app.use(express.urlencoded({ extended: false }));
app.use(express.json());
app.use('/static', express.static(path.join
  (__dirname + '/public')));
app.get('/api', (req, res) =&gt; {
res.json({ msg: 'API Route' });
});
app.post('/post/:data', (req, res) =&gt; {
const data = req.params.data;
console.log(data);
res.json({ msg: `Data logged ${data}` });
});
const port = process.env.PORT || 8080;
app.listen(port, () =&gt;
console.log(`Server running on port ${port},
  http://localhost:${port}`)
);</span></pre> <p><span class="koboSpan" id="kobo.180.1">In this example, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">static</span></strong><span class="koboSpan" id="kobo.182.1"> route, which is used for serving files such as images, CSS, and JavaScript, for example, so long as they are in a public folder in our app. </span><span class="koboSpan" id="kobo.182.2">We have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">GET</span></strong><span class="koboSpan" id="kobo.184.1"> route for the API, which just returns a JSON object. </span><span class="koboSpan" id="kobo.184.2">Lastly, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">POST</span></strong><span class="koboSpan" id="kobo.186.1"> route, which logs to the console and returns a JSON object of whatever text a user sends as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">POST</span></strong><span class="koboSpan" id="kobo.188.1"> request, as in this </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">example: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.190.1">http://localhost:8080/post/helloworld</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.192.1">HTTP protocols </span><a id="_idIndexMarker862"/><span class="koboSpan" id="kobo.193.1">are just one aspect of a REST API. </span><span class="koboSpan" id="kobo.193.2">It is also important to</span><a id="_idIndexMarker863"/><span class="koboSpan" id="kobo.194.1"> have good authentication set up. </span><span class="koboSpan" id="kobo.194.2">Continue reading to see why this is </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">the case.</span></span></p>
<h2 id="_idParaDest-347"><a id="_idTextAnchor346"/><span class="koboSpan" id="kobo.196.1">Why is authentication important when using a REST API?</span></h2>
<p><span class="koboSpan" id="kobo.197.1">Using a REST API </span><a id="_idIndexMarker864"/><span class="koboSpan" id="kobo.198.1">requires authentication to ensure that private data is kept secure. </span><span class="koboSpan" id="kobo.198.2">Authentication requires confirming the user’s identity before giving access to API capabilities. </span><span class="koboSpan" id="kobo.198.3">This helps to avoid unauthorized data access or usage, which might endanger users. </span><span class="koboSpan" id="kobo.198.4">When communicating with an API, you’ll probably utilize a variety of authentication mechanisms, including token-based authentication and OAuth. </span><span class="koboSpan" id="kobo.198.5">These methods guarantee that only authorized users have access to the API and are allowed to send requests or get data. </span><span class="koboSpan" id="kobo.198.6">Understanding authentication while interacting with a REST API can potentially assist us in building a more secure and efficient solution. </span><span class="koboSpan" id="kobo.198.7">It is possible to understand authentication flow if we see it in a diagram such as </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">this one:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer054">
<span class="koboSpan" id="kobo.200.1"><img alt="Figure 12.3: The REST API authentication flow" src="image/Figure_12.03_B18603.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.201.1">Figure 12.3: The REST API authentication flow</span></p>
<p><span class="koboSpan" id="kobo.202.1">Another aspect worth discussing is error handling because it’s crucial that we check for mistakes, which is</span><a id="_idIndexMarker865"/><span class="koboSpan" id="kobo.203.1"> very important when authentication and user details are involved. </span><span class="koboSpan" id="kobo.203.2">Let’s discover how having effective error handling can make our application </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">more trustworthy.</span></span></p>
<h2 id="_idParaDest-348"><a id="_idTextAnchor347"/><span class="koboSpan" id="kobo.205.1">How can we use error handling when integrating with a REST API?</span></h2>
<p><span class="koboSpan" id="kobo.206.1">Connecting with</span><a id="_idIndexMarker866"/><span class="koboSpan" id="kobo.207.1"> a REST API is occasionally </span><a id="_idIndexMarker867"/><span class="koboSpan" id="kobo.208.1">difficult, especially when confronted with errors. </span><span class="koboSpan" id="kobo.208.2">However, having a robust error-handling plan in place could spare us time and hassle in the long term. </span><span class="koboSpan" id="kobo.208.3">One useful strategy is to specify error codes and messages that our application can recognize and respond to. </span><span class="koboSpan" id="kobo.208.4">Furthermore, installing automatic retries and monitoring systems can assist in identifying and addressing issues more rapidly. </span><span class="koboSpan" id="kobo.208.5">Another important topic is dealing with data validation mistakes, as API inputs must be thoroughly scrutinized before being utilized in our application. </span><span class="koboSpan" id="kobo.208.6">We can ensure easy integration with a REST API and deliver an improved user experience for our clients by being proactive and comprehensive in our approach to </span><span class="No-Break"><span class="koboSpan" id="kobo.209.1">error management.</span></span></p>
<p><span class="koboSpan" id="kobo.210.1">The last topic </span><a id="_idIndexMarker868"/><span class="koboSpan" id="kobo.211.1">we’ll cover in this section is</span><a id="_idIndexMarker869"/><span class="koboSpan" id="kobo.212.1"> GraphQL. </span><span class="koboSpan" id="kobo.212.2">So, let’s now see how GraphQL compares with a traditional </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">REST API.</span></span></p>
<h2 id="_idParaDest-349"><a id="_idTextAnchor348"/><span class="koboSpan" id="kobo.214.1">What is the difference between a REST API and GraphQL?</span></h2>
<p><span class="koboSpan" id="kobo.215.1">REST and GraphQL </span><a id="_idIndexMarker870"/><span class="koboSpan" id="kobo.216.1">are two techniques for the creation and operation of </span><a id="_idIndexMarker871"/><span class="koboSpan" id="kobo.217.1">web service APIs; however, they differ in numerous ways. </span><span class="koboSpan" id="kobo.217.2">GraphQL tends to be more flexible because you can request only the data you need and not all at once as with REST APIs. </span><span class="koboSpan" id="kobo.217.3">This is great because it means fewer data transfer requests on the network. </span><span class="koboSpan" id="kobo.217.4">Another area GraphQL excels in is versioning history because it is not reliant on versions, which is the case with REST APIs, requiring more manual hands-on work. </span><span class="koboSpan" id="kobo.217.5">Despite this, they both have pros and cons over each other and, when comparing the two, we can see how they offer us different advantages </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">and disadvantages.</span></span></p>
<h3><span class="koboSpan" id="kobo.219.1">Fetching data</span></h3>
<p><span class="koboSpan" id="kobo.220.1">The end user often</span><a id="_idIndexMarker872"/><span class="koboSpan" id="kobo.221.1"> uses a REST API to access resources through preset endpoints, where each endpoint is associated with a single resource or a group of related resources. </span><span class="koboSpan" id="kobo.221.2">The client makes HTTP requests to these endpoints in order to get or modify data. </span><span class="koboSpan" id="kobo.221.3">When using GraphQL, a client sends queries or mutations to a single endpoint, indicating the data it requires or the modifications it wants to make. </span><span class="koboSpan" id="kobo.221.4">In comparison to REST API, this allows the client to only retrieve the data they actually need, eliminating the need for requesting more data than required or too </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">little data.</span></span></p>
<h3><span class="koboSpan" id="kobo.223.1">Caching data</span></h3>
<p><span class="koboSpan" id="kobo.224.1">To improve efficiency </span><a id="_idIndexMarker873"/><span class="koboSpan" id="kobo.225.1">and lessen server load, REST APIs can make use of ETags and cache-control headers, two common HTTP caching methods. </span><span class="koboSpan" id="kobo.225.2">In contrast, because of GraphQL’s flexible query form, caching is more difficult. </span><span class="koboSpan" id="kobo.225.3">The usage of unique caching techniques offered by GraphQL client-side libraries such as Apollo Client or application-level caching is frequently required </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">by clients.</span></span></p>
<h3><span class="koboSpan" id="kobo.227.1">Documentation</span></h3>
<p><span class="koboSpan" id="kobo.228.1">Within REST APIs, documentation</span><a id="_idIndexMarker874"/><span class="koboSpan" id="kobo.229.1"> is frequently given separately, and it is the responsibility of the programmers to keep it up to date. </span><span class="koboSpan" id="kobo.229.2">If not kept up with, this can result in contradictions and inaccurate data. </span><span class="koboSpan" id="kobo.229.3">On the other hand, since GraphQL includes built-in introspection, users can dynamically learn about the different kinds and features of the API. </span><span class="koboSpan" id="kobo.229.4">Engineers can explore and comprehend the API more easily, frequently using tools such </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">as GraphiQL.</span></span></p>
<p><span class="koboSpan" id="kobo.231.1">To end this section, we are going to take a look at some code examples of fetching some data using REST and GraphQL so it becomes clear how the two methods differ from </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">each other.</span></span></p>
<h2 id="_idParaDest-350"><a id="_idTextAnchor349"/><span class="koboSpan" id="kobo.233.1">How do we fetch data using REST APIs and GraphQL?</span></h2>
<p><span class="koboSpan" id="kobo.234.1">We will take a look at code examples for fetching data using REST and GraphQL, starting with REST APIs. </span><span class="koboSpan" id="kobo.234.2">In these examples, we will use authors </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">and posts.</span></span></p>
<h3><span class="koboSpan" id="kobo.236.1">How do we fetch data using REST APIs?</span></h3>
<p><span class="koboSpan" id="kobo.237.1">The first </span><a id="_idIndexMarker875"/><span class="koboSpan" id="kobo.238.1">step</span><a id="_idIndexMarker876"/><span class="koboSpan" id="kobo.239.1"> is to get a post that has an ID </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.242.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.243.1">
GET /posts/1</span></pre> <p><span class="koboSpan" id="kobo.244.1">This is what a potential sample response might </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">look like:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.246.1">
{
  "id": 1,
  "title": "Hello World",
  "content": "Welcome to my first blog.",
  "authorId": 64
}</span></pre> <p><span class="koboSpan" id="kobo.247.1">When using a REST API for data retrieval, requests return all of the information in the data object. </span><span class="koboSpan" id="kobo.247.2">It is not possible to request, let’s say, only the </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">id</span></strong><span class="koboSpan" id="kobo.249.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">title</span></strong><span class="koboSpan" id="kobo.251.1"> information. </span><span class="koboSpan" id="kobo.251.2">We would have to write business logic in JavaScript to filter the object so that we only get the data we want to use in </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">our application.</span></span></p>
<p><span class="koboSpan" id="kobo.253.1">So, if we wanted to get details for the author, then we would have to send a second </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">GET</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.255.1"> request:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.256.1">
GET /authors/64</span></pre> <p><span class="koboSpan" id="kobo.257.1">Now, we’ll have the </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">author’s info:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.259.1">
{
  "id": 64,
  "name": "Jack Thomas",
  "email": "jackthomas@gmail.com"
}</span></pre> <p><span class="koboSpan" id="kobo.260.1">So, now that </span><a id="_idIndexMarker877"/><span class="koboSpan" id="kobo.261.1">we </span><a id="_idIndexMarker878"/><span class="koboSpan" id="kobo.262.1">have understood the basic concept of fetching data using REST APIs, let’s see how we can do the same but this time </span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">using GraphQL.</span></span></p>
<h3><span class="koboSpan" id="kobo.264.1">How do we fetch data using GraphQL?</span></h3>
<p><span class="koboSpan" id="kobo.265.1">When we use </span><a id="_idIndexMarker879"/><span class="koboSpan" id="kobo.266.1">GraphQL, we </span><a id="_idIndexMarker880"/><span class="koboSpan" id="kobo.267.1">first need to create a schema for our API, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">following example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.269.1">
type Post {
  id: ID!
</span><span class="koboSpan" id="kobo.269.2">  title: String!
</span><span class="koboSpan" id="kobo.269.3">  content: String!
</span><span class="koboSpan" id="kobo.269.4">  author: Author!
</span><span class="koboSpan" id="kobo.269.5">}
type Author {
  id: ID!
</span><span class="koboSpan" id="kobo.269.6">  name: String!
</span><span class="koboSpan" id="kobo.269.7">  email: String!
</span><span class="koboSpan" id="kobo.269.8">}
type Query {
  post(id: ID!): Post
}</span></pre> <p><span class="koboSpan" id="kobo.270.1">Then, we need to write a GraphQL query to get the author and </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">a post:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.272.1">
query {
  post(id: 1) {
    id
    title
    content
    author {
      id
      name
      email
    }
  }
}</span></pre> <p><span class="koboSpan" id="kobo.273.1">The</span><a id="_idIndexMarker881"/><span class="koboSpan" id="kobo.274.1"> response </span><a id="_idIndexMarker882"/><span class="koboSpan" id="kobo.275.1">will look something </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.277.1">
{
  "data": {
    "post": {
      "id": "1",
      "title": "Hello World",
      "content": " Welcome to my first blog.",
      "author": {
        "id": "64",
        "name": " Jack Thomas",
        "email": " jackthomas@gmail.com"
      }
    }
  }
}</span></pre> <p><span class="koboSpan" id="kobo.278.1">GraphQL allows us to retrieve the necessary data with a single request by defining the fields </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">we desire.</span></span></p>
<p><span class="koboSpan" id="kobo.280.1">Ultimately, deciding between a REST API and GraphQL boils down to our specific use cases and requirements. </span><span class="koboSpan" id="kobo.280.2">Both have distinct characteristics and abilities that can help us optimize the development process while creating web or mobile apps. </span><span class="koboSpan" id="kobo.280.3">However, as with many technological issues, it is critical for us to consider all of our alternatives before settling on the best method. </span><span class="koboSpan" id="kobo.280.4">We can safely use a REST API or GraphQL within our React applications to obtain the desired outcome if we can grasp their common qualities and special benefits. </span><span class="koboSpan" id="kobo.280.5">Whatever technology we employ, the objective should always be to provide safe, scalable, and effective solutions for those who use </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">the app.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">Now that we </span><a id="_idIndexMarker883"/><span class="koboSpan" id="kobo.283.1">have </span><a id="_idIndexMarker884"/><span class="koboSpan" id="kobo.284.1">completed this introductory refresher section, let’s take the next step and create the foundation for building our app as we learn about the planning required for </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">the architecture.</span></span></p>
<h1 id="_idParaDest-351"><a id="_idTextAnchor350"/><span class="koboSpan" id="kobo.286.1">Planning the application architecture including authentication, SWR, GraphQL, and deployment</span></h1>
<p><span class="koboSpan" id="kobo.287.1">In today’s fiercely </span><a id="_idIndexMarker885"/><span class="koboSpan" id="kobo.288.1">competitive marketplace, it is imperative to possess the know-how of designing, developing, and deploying an application architecture that is efficient, secure, and meets user needs. </span><span class="koboSpan" id="kobo.288.2">However, with the advent of evolving technologies such as Next.js, authentication methods transitioning from traditional OAuth 2.0 to SWR, and GraphQL gaining popularity, planning our application architecture might seem like a </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">daunting task.</span></span></p>
<p><span class="koboSpan" id="kobo.290.1">In this section, we will get valuable insights to assist us in organizing our application for success, from selecting the appropriate technologies to incorporating user experience design elements. </span><span class="koboSpan" id="kobo.290.2">By the end of this section, we will have a roadmap to guide us through building our next</span><a id="_idIndexMarker886"/><span class="koboSpan" id="kobo.291.1"> project, with clear steps to follow through </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">to completion.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">Our next topic focuses on serverless frameworks. </span><span class="koboSpan" id="kobo.293.2">So, let’s read on and see why they are a brilliant choice for building </span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">modern apps.</span></span></p>
<h2 id="_idParaDest-352"><a id="_idTextAnchor351"/><span class="koboSpan" id="kobo.295.1">Why are serverless frameworks such as Next.js a brilliant choice for building modern applications?</span></h2>
<p><span class="koboSpan" id="kobo.296.1">New</span><a id="_idIndexMarker887"/><span class="koboSpan" id="kobo.297.1"> frameworks and architectures </span><a id="_idIndexMarker888"/><span class="koboSpan" id="kobo.298.1">are developed as digital technology advances to better the effectiveness of building web applications. </span><span class="koboSpan" id="kobo.298.2">Next.js is one of these architectures because of its speed and flexibility. </span><span class="koboSpan" id="kobo.298.3">Next.js apps have a distinct design that separates server-side code from client-side logic, resulting in faster processing times and better performance. </span><span class="koboSpan" id="kobo.298.4">This architecture employs </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">server-side rendering</span></strong><span class="koboSpan" id="kobo.300.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.301.1">SSR</span></strong><span class="koboSpan" id="kobo.302.1">) to</span><a id="_idIndexMarker889"/><span class="koboSpan" id="kobo.303.1"> generate HTML pages on the server, significantly reducing client-side load. </span><span class="koboSpan" id="kobo.303.2">Next.js apps also use a hybrid approach that utilizes dynamic and static rendering for increased efficiency and faster load times. </span><span class="koboSpan" id="kobo.303.3">Because of these features, Next.js is an excellent choice for programmers looking to create modern, powerful </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">web applications.</span></span></p>
<p><span class="koboSpan" id="kobo.305.1">The next topic that we will cover is authentication. </span><span class="koboSpan" id="kobo.305.2">So, let’s take a look at how certain security measures can enhance </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">our defenses.</span></span></p>
<h2 id="_idParaDest-353"><a id="_idTextAnchor352"/><span class="koboSpan" id="kobo.307.1">What authentication is available in Next.js applications?</span></h2>
<p><span class="koboSpan" id="kobo.308.1">The security of online </span><a id="_idIndexMarker890"/><span class="koboSpan" id="kobo.309.1">apps is a high priority as they become more essential to our daily lives. </span><span class="koboSpan" id="kobo.309.2">A key component of protecting these applications is authentication, which is the method of confirming a user’s identity. </span><span class="koboSpan" id="kobo.309.3">Providing authentication in a Next.js application can be done using a variety of techniques, including </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">the</span></span><span class="No-Break"><a id="_idIndexMarker891"/></span><span class="No-Break"><span class="koboSpan" id="kobo.311.1"> following:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.312.1">Auth.js</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.313.1">JSON Web </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.314.1">Tokens</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.315.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.316.1">JWTs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">)</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.318.1">Auth0</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.319.1">OAuth2</span></span></li>
<li><span class="koboSpan" id="kobo.320.1">Login</span><a id="_idIndexMarker892"/><span class="koboSpan" id="kobo.321.1"> and</span><a id="_idIndexMarker893"/> <span class="No-Break"><span class="koboSpan" id="kobo.322.1">password authentication</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.323.1">By utilizing these technologies, engineers can defend their applications against online threats such as hackers’ attempts to steal user data. </span><span class="koboSpan" id="kobo.323.2">This high degree of verification guarantees users a safe and reliable environment while also safeguarding their private data. </span><span class="koboSpan" id="kobo.323.3">A Next.js application must use proper authentication procedures given the growing significance of </span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">online privacy.</span></span></p>
<p><span class="koboSpan" id="kobo.325.1">Speed is a high-priority </span><a id="_idIndexMarker894"/><span class="koboSpan" id="kobo.326.1">requirement when building our app infrastructure, but how does SWR make it better? </span><span class="koboSpan" id="kobo.326.2">We will find out now in the </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">next section.</span></span></p>
<h2 id="_idParaDest-354"><a id="_idTextAnchor353"/><span class="koboSpan" id="kobo.328.1">How does SWR allow fast data retrieval?</span></h2>
<p><span class="koboSpan" id="kobo.329.1">It is not surprising that </span><a id="_idIndexMarker895"/><span class="koboSpan" id="kobo.330.1">quick and effective data fetching has elevated to the top of developers’ priorities as the world becomes increasingly data-driven. </span><span class="koboSpan" id="kobo.330.2">And that’s where </span><strong class="bold"><span class="koboSpan" id="kobo.331.1">stale-while-revalidate</span></strong><span class="koboSpan" id="kobo.332.1">, or </span><strong class="bold"><span class="koboSpan" id="kobo.333.1">SWR</span></strong><span class="koboSpan" id="kobo.334.1">, comes into play. </span><span class="koboSpan" id="kobo.334.2">SWR is a remote data fetching React Hooks library that prioritizes speed, caching, and revalidation. </span><span class="koboSpan" id="kobo.334.3">Fetching data is made simple with SWR, since it does away with annoying loading boxes and makes sure the data is continuously current. </span><span class="koboSpan" id="kobo.334.4">Additionally, it has a user-friendly API that makes it simple for programmers of any experience level </span><span class="No-Break"><span class="koboSpan" id="kobo.335.1">to utilize.</span></span></p>
<p><span class="koboSpan" id="kobo.336.1">Now, we will take another look at GraphQL to see why it has become the best choice for modern </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">application architecture.</span></span></p>
<h2 id="_idParaDest-355"><a id="_idTextAnchor354"/><span class="koboSpan" id="kobo.338.1">How can GraphQL integration optimize our data fetching?</span></h2>
<p><span class="koboSpan" id="kobo.339.1">The need to</span><a id="_idIndexMarker896"/><span class="koboSpan" id="kobo.340.1"> optimize productivity</span><a id="_idIndexMarker897"/><span class="koboSpan" id="kobo.341.1"> and simplify operations grows as technology develops. </span><span class="koboSpan" id="kobo.341.2">In response, GraphQL integration has become more common. </span><span class="koboSpan" id="kobo.341.3">GraphQL significantly boosts the speed and accuracy of data retrieval by enabling optimized data fetching. </span><span class="koboSpan" id="kobo.341.4">With GraphQL, queries can be customized to meet particular needs rather than having to get several datasets and sort through them to find the necessary information. </span><span class="koboSpan" id="kobo.341.5">The outcome of this is that data can be retrieved more quickly and accurately, which can aid companies in staying current. </span><span class="koboSpan" id="kobo.341.6">Because of these advantages, many businesses have adopted GraphQL integration, given its capacity to improve data </span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">fetching procedures.</span></span></p>
<p><span class="koboSpan" id="kobo.343.1">Deployment is</span><a id="_idIndexMarker898"/><span class="koboSpan" id="kobo.344.1"> where our application </span><a id="_idIndexMarker899"/><span class="koboSpan" id="kobo.345.1">goes live online for the public to use and we get to show off our creation to the world. </span><span class="koboSpan" id="kobo.345.2">So, let’s now learn about this crucial step in the </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">next section.</span></span></p>
<h2 id="_idParaDest-356"><a id="_idTextAnchor355"/><span class="koboSpan" id="kobo.347.1">How do we deploy our Next.js applications online?</span></h2>
<p><span class="koboSpan" id="kobo.348.1">Deploying apps </span><a id="_idIndexMarker900"/><span class="koboSpan" id="kobo.349.1">on cloud platforms is the conclusion of all of our hard work, and this process can be both challenging and rewarding. </span><span class="koboSpan" id="kobo.349.2">The best feature (which makes Next.js a favorite among developers) is that it allows SSR. </span><span class="koboSpan" id="kobo.349.3">Our Next.js application will now be accessible at all times and from any location when we deploy it on a cloud infrastructure. </span><span class="koboSpan" id="kobo.349.4">Numerous cloud providers are readily accessible on the market, each with </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">distinctive characteristics.</span></span></p>
<p><span class="koboSpan" id="kobo.351.1">One of the most popular online cloud host providers is </span><strong class="bold"><span class="koboSpan" id="kobo.352.1">Vercel</span></strong><span class="koboSpan" id="kobo.353.1">, the creators of Next.js, meaning that their platform is the perfect place for deploying our Next.js apps. </span><span class="koboSpan" id="kobo.353.2">Other popular serverless host providers include Netlify, AWS, Azure, Render, Firebase, and Supabase. </span><span class="koboSpan" id="kobo.353.3">There are countless others out there to choose from. </span><span class="koboSpan" id="kobo.353.4">The important thing is to find a platform that is cost-effective and offers many good features and services. </span><span class="koboSpan" id="kobo.353.5">The majority of the ones mentioned here offer </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">free services.</span></span></p>
<p><span class="koboSpan" id="kobo.355.1">Finally, we will end this section by checking out ways to scale and maintain our application once it has been deployed to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">its growth.</span></span></p>
<h2 id="_idParaDest-357"><a id="_idTextAnchor356"/><span class="koboSpan" id="kobo.357.1">What strategies can we use for scaling and maintaining our application architecture as it grows?</span></h2>
<p><span class="koboSpan" id="kobo.358.1">It’s critical to have</span><a id="_idIndexMarker901"/><span class="koboSpan" id="kobo.359.1"> a plan developed for expanding as well as sustaining our architecture as the popularity and usage of our application grows. </span><span class="koboSpan" id="kobo.359.2">Without proper planning, our application might not be able to cope with the surge in traffic, which could turn off prospective customers. </span><span class="koboSpan" id="kobo.359.3">Forecasting and taking into account potential future growth, along with the tools and technology that might assist us in getting there, are necessary for a scalable design. </span><span class="koboSpan" id="kobo.359.4">The continuous effectiveness of an app is also greatly dependent on the upkeep of our architecture as it develops. </span><span class="koboSpan" id="kobo.359.5">Adding user feedback to enhance the user experience, testing our software for faults and problems, and routinely reviewing and revising the code base are all part of this. </span><span class="koboSpan" id="kobo.359.6">Our apps can thrive for a very long time if we put the correct plans </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">in place.</span></span></p>
<p><span class="koboSpan" id="kobo.361.1">Having an in-depth knowledge of authentication, SWR data fetching strategies, GraphQL integration, and deployment strategies will greatly benefit us as we start to develop the architecture of our Next.js application. </span><span class="koboSpan" id="kobo.361.2">With these plans in place, we can start thinking about scaling and managing our application as it grows, which is a vital component of any effective application architecture. </span><span class="koboSpan" id="kobo.361.3">The strength of Next.js, combined with these strategies, will</span><a id="_idIndexMarker902"/><span class="koboSpan" id="kobo.362.1"> result in an excellent user experience and contribute to the efficiency of the </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">development process.</span></span></p>
<h1 id="_idParaDest-358"><a id="_idTextAnchor357"/><span class="koboSpan" id="kobo.364.1">Working on our coffee restaurant project</span></h1>
<p><span class="koboSpan" id="kobo.365.1">With the theory</span><a id="_idIndexMarker903"/><span class="koboSpan" id="kobo.366.1"> out of the way, let’s start building our website. </span><span class="koboSpan" id="kobo.366.2">The first thing we need to do is set up our project, so let’s do </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">that now.</span></span></p>
<p><span class="koboSpan" id="kobo.368.1">Our </span><a id="_idIndexMarker904"/><span class="koboSpan" id="kobo.369.1">technical stack is </span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.371.1">Next.js</span></strong><span class="koboSpan" id="kobo.372.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.373.1">React framework</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.374.1">styled-components</span></strong><span class="koboSpan" id="kobo.375.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">CSS styling</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.377.1">apollographql</span></strong><span class="koboSpan" id="kobo.378.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">Data API</span></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.380.1">authjs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">: Authentication</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.382.1">React Testing Library</span></strong><span class="koboSpan" id="kobo.383.1"> and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.384.1">Jest</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">: Testing</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.386.1">GitHub</span></strong><span class="koboSpan" id="kobo.387.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">Version control</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Vercel</span></strong><span class="koboSpan" id="kobo.390.1">: Serverless online </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">web host</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.392.1">We are going to create a restaurant application for this project. </span><span class="koboSpan" id="kobo.392.2">There will be five main pages, and two of them will require you to be authenticated to access them. </span><span class="koboSpan" id="kobo.392.3">The authentication will be taken care of with Google or GitHub, so you can use either account to </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">sign in.</span></span></p>
<p><span class="koboSpan" id="kobo.394.1">This is what the final project will look like for </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">our app:</span></span></p>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer055">
<span class="koboSpan" id="kobo.396.1"><img alt="Figure 12.4: Next.js final project home page" src="image/Figure_12.04_B18603.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.397.1">Figure 12.4: Next.js final project home page</span></p>
<p><span class="koboSpan" id="kobo.398.1">The project and code </span><a id="_idIndexMarker905"/><span class="koboSpan" id="kobo.399.1">base can be found online </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">at </span></span><a href="https://github.com/PacktPublishing/React-Interview-Guide/tree/main/Chapter12/coffee-restaurant"><span class="No-Break"><span class="koboSpan" id="kobo.401.1">https://github.com/PacktPublishing/React-Interview-Guide/tree/main/Chapter12/coffee-restaurant</span></span></a></p>
<p><span class="koboSpan" id="kobo.402.1"> and there is a link on GitHub to a working website, so you can see all of </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">the pages.</span></span></p>
<h2 id="_idParaDest-359"><a id="_idTextAnchor358"/><span class="koboSpan" id="kobo.404.1">Building the business logic</span></h2>
<p><span class="koboSpan" id="kobo.405.1">Now, with the </span><a id="_idIndexMarker906"/><span class="koboSpan" id="kobo.406.1">theory completed, we are ready to do some practical work as we build our application. </span><span class="koboSpan" id="kobo.406.2">It’s going to be a fairly simple application; the main aim here is to understand how we connect all of these technologies. </span><span class="koboSpan" id="kobo.406.3">The application will be a restaurant website that has some restricted pages that require an authenticated user to access them. </span><span class="koboSpan" id="kobo.406.4">These authenticated pages will only show the data from our GraphQL API if the user is logged in; otherwise, they will be presented with a </span><span class="No-Break"><span class="koboSpan" id="kobo.407.1">sign-in page.</span></span></p>
<p><span class="koboSpan" id="kobo.408.1">With that introduction out of the way, let’s begin building the </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">business logic.</span></span></p>
<p><span class="koboSpan" id="kobo.410.1">Create a folder on your computer, such as on the desktop, and then run the following Next.js command to create a </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">Next.js project:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.412.1">
npx create-next-app my-app-restaurant</span></pre> <p><span class="koboSpan" id="kobo.413.1">You can use the </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">following settings:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">Would you like to use TypeScript with this project? </span><span class="koboSpan" id="kobo.415.2">… </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">No/Yes</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">Would you like to use ESLint with this project? </span><span class="koboSpan" id="kobo.417.2">… </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">No/Yes</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">Would you like to use Tailwind CSS with this project? </span><span class="koboSpan" id="kobo.419.2">… </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">No/Yes</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">Would you like to use `src/` directory with this project? </span><span class="koboSpan" id="kobo.421.2">… </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.422.1">No/Yes</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.423.1">Use App Router (recommended)? </span><span class="koboSpan" id="kobo.423.2">… </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">No/Yes</span></strong></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">Would you like to customize the default import alias? </span><span class="koboSpan" id="kobo.425.2">… </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">No/Yes</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.427.1">Now, we have to install all of the dependencies and packages for our project. </span><span class="koboSpan" id="kobo.427.2">So </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">cd</span></strong><span class="koboSpan" id="kobo.429.1"> into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">my-app-restaurant</span></strong><span class="koboSpan" id="kobo.431.1"> directory and run the following commands to install </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">the packages.</span></span></p>
<p><span class="koboSpan" id="kobo.433.1">Run the following script to install the </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">regular dependencies:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.435.1">
npm i @apollo/client @apollo/server @as-integrations/next @testing-library/user-event graphql graphql-tag next-auth styled-components@latest</span></pre> <p><span class="koboSpan" id="kobo.436.1">Run the following</span><a id="_idIndexMarker907"/><span class="koboSpan" id="kobo.437.1"> script to install the </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">development dependencies:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.439.1">
npm i --save-dev @testing-library/jest-dom @testing-library/react jest jest-environment-jsdom</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.440.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.441.1">If you encounter any errors when trying to install these packages you could try adding the --force command or using sudo if you are on a Mac like this: sudo npm i --save-dev @testing-library/jest-dom @testing-library/react jest </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">jest-environment-jsdom --force</span></span></p>
<p><span class="koboSpan" id="kobo.443.1">Now, add the following test run script to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.444.1">scripts</span></strong><span class="koboSpan" id="kobo.445.1"> section in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">package.json</span></strong><span class="koboSpan" id="kobo.447.1"> file in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">root</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.449.1"> folder:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.450.1">
"test": "jest --watch",</span></pre> <p><span class="koboSpan" id="kobo.451.1">Now, run this command inside the root of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.452.1">my-app-restaurant</span></strong><span class="koboSpan" id="kobo.453.1"> folder. </span><span class="koboSpan" id="kobo.453.2">This will create all of the files and folders we will need for </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">this project:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.455.1">
mkdir data
touch data/menu.js data/profile.js
touch .env.local jest.config.mjs
cd src/app
mkdir account account/menu account/profile
touch account/menu/page.js  account/profile/page.js
mkdir api api/auth api/auth/"[...nextauth]"
touch api/auth/"[...nextauth]"/route.js
mkdir components graphql lib nutrition queries rewards utils
touch components/GlobalStyles.js components/MainMenu.js components/Provider.js
touch graphql/route.js
touch lib/registry.js
touch nutrition/page.js nutrition/page.test.js
touch queries/clientQueries.js
touch utils/withApollo.js utils/cors.js
touch not-found.js page.test.js</span></pre> <p><span class="koboSpan" id="kobo.456.1">Before we start to</span><a id="_idIndexMarker908"/><span class="koboSpan" id="kobo.457.1"> work on the main app files, let’s sort out the configuration </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">files first.</span></span></p>
<h2 id="_idParaDest-360"><a id="_idTextAnchor359"/><span class="koboSpan" id="kobo.459.1">Configuration files setup</span></h2>
<p><span class="koboSpan" id="kobo.460.1">Put this </span><a id="_idIndexMarker909"/><span class="koboSpan" id="kobo.461.1">code in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">api/auth/[…nextauth]/route.js</span></strong><span class="koboSpan" id="kobo.463.1"> file. </span><span class="koboSpan" id="kobo.463.2">We will use this code for setting up our authentication layer, in which GitHub and Google will be used for signing in to the </span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">protected routes:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.465.1">
import NextAuth from 'next-auth';
import GithubProvider from 'next-auth/providers/github';
import GoogleProvider from 'next-auth/providers/google';
export const handler = NextAuth({
  providers: [
    GithubProvider({
      clientId: process.env.GITHUB_ID,
      clientSecret: process.env.GITHUB_SECRET,
    }),
    GoogleProvider({
      clientId: process.env.GOOGLE_ID,
      clientSecret: process.env.GOOGLE_SECRET,
    }),
  ],
});
export { handler as GET, handler as POST };</span></pre> <p><span class="koboSpan" id="kobo.466.1">Next, put this code in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.467.1">lib/registry.js</span></strong><span class="koboSpan" id="kobo.468.1"> file. </span><span class="koboSpan" id="kobo.468.2">This code is used for configuring </span><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">styled-components</span></strong><span class="koboSpan" id="kobo.470.1"> to </span><a id="_idIndexMarker910"/><span class="koboSpan" id="kobo.471.1">work </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">with Next.js:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.473.1">
use client';
import React, { useState } from 'react';
import { useServerInsertedHTML } from 'next/navigation';
import { ServerStyleSheet, StyleSheetManager } from 'styled-components';
export default function StyledComponentsRegistry({ children }) {
  // Only create stylesheet once with lazy initial state
  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state
  const [styledComponentsStyleSheet] = useState(() =&gt; new ServerStyleSheet());
  useServerInsertedHTML(() =&gt; {
    const styles = styledComponentsStyleSheet.getStyleElement();
    styledComponentsStyleSheet.instance.clearTag();
    return &lt;&gt;{styles}&lt;/&gt;;
  });
  if (typeof window !== 'undefined') return &lt;&gt;{children}&lt;/&gt;;
  return (
    &lt;StyleSheetManager sheet={styledComponentsStyleSheet.instance}&gt;
      {children}
    &lt;/StyleSheetManager&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.474.1">Now, add the following</span><a id="_idIndexMarker911"/><span class="koboSpan" id="kobo.475.1"> code to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">jest.config.mjs</span></strong><span class="koboSpan" id="kobo.477.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">root</span></strong><span class="koboSpan" id="kobo.479.1"> directory. </span><span class="koboSpan" id="kobo.479.2">This file can be used for setting up the Jest </span><span class="No-Break"><span class="koboSpan" id="kobo.480.1">test runner:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.481.1">
import nextJest from 'next/jest.js';
const createJestConfig = nextJest({
  // Provide the path to your Next.js app to load next.config.js and .env files in your test environment
  dir: './',
});
// Add any custom config to be passed to Jest
/** @type {import('jest').Config} */
const config = {
  // Add more setup options before each test is run
  // setupFilesAfterEnv: ['&lt;rootDir&gt;/jest.setup.js'],
  testEnvironment: 'jest-environment-jsdom',
};
// createJestConfig is exported this way to ensure that next/jest can load the Next.js config which is async
export default createJestConfig(config);</span></pre> <p><span class="koboSpan" id="kobo.482.1">Now, update</span><a id="_idIndexMarker912"/><span class="koboSpan" id="kobo.483.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">next.config.js</span></strong><span class="koboSpan" id="kobo.485.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">root</span></strong><span class="koboSpan" id="kobo.487.1"> folder with this code, which will enable </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">styled-components</span></strong><span class="koboSpan" id="kobo.489.1"> to work as well as the app </span><span class="No-Break"><span class="koboSpan" id="kobo.490.1">directory setup:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.491.1">
/** @type {import('next').NextConfig} */
const nextConfig = {
  compiler: {
    styledComponents: true,
  },
};
module.exports = nextConfig;</span></pre> <p><span class="koboSpan" id="kobo.492.1">We just have one more step to complete, which is the GitHub and Google authentication setup section. </span><span class="koboSpan" id="kobo.492.2">We must create IDs and secrets for our </span><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">.env.local</span></strong><span class="koboSpan" id="kobo.494.1"> file. </span><span class="koboSpan" id="kobo.494.2">The authentication setup can be found at </span><a href="https://authjs.dev/getting-started/oauth-tutorial"><span class="koboSpan" id="kobo.495.1">https://authjs.dev/getting-started/oauth-tutorial</span></a><span class="koboSpan" id="kobo.496.1">. </span><span class="koboSpan" id="kobo.496.2">The tutorial shows you how to do the authentication setup with GitHub. </span><span class="koboSpan" id="kobo.496.3">However, the setup is fairly similar for other authentication providers, and you can find the one for Google </span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">at </span></span><a href="https://developers.google.com/identity/protocols/oauth2"><span class="No-Break"><span class="koboSpan" id="kobo.498.1">https://developers.google.com/identity/protocols/oauth2</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.499.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.500.1">Just remember that when we run our app locally, the callback URL will look something like this if we use GitHub as an </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">example: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">http://localhost:3000/api/auth/callback/github</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.504.1">When we deploy it online, it might look something like </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">this: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">https://your-app-url.vercel.app/api/auth/callback/github</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.508.1">This is important because our authenticated routes won’t work unless we use the right URL. </span><span class="koboSpan" id="kobo.508.2">Finally, we just need to add the IDs and secrets to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">.env.local</span></strong><span class="koboSpan" id="kobo.510.1"> file. </span><span class="koboSpan" id="kobo.510.2">This file also needs a secret </span><a id="_idIndexMarker913"/><span class="koboSpan" id="kobo.511.1">to be created for our </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">NEXTAUTH_SECRET</span></strong><span class="koboSpan" id="kobo.513.1"> key-value pair, which is required </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">for NextAuth.js:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.515.1">
NEXTAUTH_SECRET="yournextsecret"
GITHUB_ID="yourgithubid"
GITHUB_SECRET="yourgithubsecret"
GOOGLE_ID="yourgoogleid"
GOOGLE_SECRET="yourgooglesecret"</span></pre> <p><span class="koboSpan" id="kobo.516.1">You can create your own secret key, and it can be anything you want; I would suggest making it secure by generating a random string of characters as you would if you were creating a strong password. </span><span class="koboSpan" id="kobo.516.2">There are many free tools that can do this for you, or you could just randomly make one yourself, such as this example: </span><strong class="source-inline"><span class="koboSpan" id="kobo.517.1">Y@q7LH@6YoBa$Dkz</span></strong><span class="koboSpan" id="kobo.518.1">. </span><span class="koboSpan" id="kobo.518.2">It uses both uppercase</span><a id="_idIndexMarker914"/><span class="koboSpan" id="kobo.519.1"> and lowercase alphanumeric characters and it also has special characters. </span><span class="koboSpan" id="kobo.519.2">We all know how to create secure passwords; just use the same thinking when creating your </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">secret key.</span></span></p>
<h2 id="_idParaDest-361"><a id="_idTextAnchor360"/><span class="koboSpan" id="kobo.521.1">Building the app</span></h2>
<p><span class="koboSpan" id="kobo.522.1">Let’s go for it! </span><span class="koboSpan" id="kobo.522.2">There</span><a id="_idIndexMarker915"/><span class="koboSpan" id="kobo.523.1"> are quite a lot of files because the build phase has many files. </span><span class="koboSpan" id="kobo.523.2">But after this section, we will be close to completion! </span><span class="koboSpan" id="kobo.523.3">We have a data layer that will act as our database. </span><span class="koboSpan" id="kobo.523.4">Basically, there is an array of objects that we will fetch using GraphQL and then display on </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">our frontend.</span></span></p>
<p><span class="koboSpan" id="kobo.525.1">Use the following code inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">data</span></strong><span class="koboSpan" id="kobo.527.1"> folder we created. </span><span class="koboSpan" id="kobo.527.2">This code will be for the data we show on the </span><strong class="bold"><span class="koboSpan" id="kobo.528.1">Menu</span></strong><span class="koboSpan" id="kobo.529.1"> page, so put it in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">data/menu.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.531.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.532.1">
export const menu = [
  {
    id: '1',
    foodType: 'Drinks',
    name: 'Latte',
    description: 'Steamed milk',
  },
  {
    id: '2',
    foodType: 'Drinks',
    name: 'Cappuccino',
    description: 'Espresso',
  },
];</span></pre> <p><span class="koboSpan" id="kobo.533.1">Now, the following </span><a id="_idIndexMarker916"/><span class="koboSpan" id="kobo.534.1">code is </span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">data/profile.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.537.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.538.1">
export const profile = [
  {
    id: '1',
    bio: `Born and raised in London, my name is Jordan Brewer and I am a passionate coffee aficionado with a heart as warm as a freshly brewed cup of java.`,
  },
];</span></pre> <p><span class="koboSpan" id="kobo.539.1">Moving on, the next batch of code is for the authenticated pages for the menu </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">and profile.</span></span></p>
<p><span class="koboSpan" id="kobo.541.1">The following code is </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">account/menu/page.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.545.1">This code is quite long so let’s break it down into smaller code blocks. </span><span class="koboSpan" id="kobo.545.2">This first code block has our</span><a id="_idIndexMarker917"/><span class="koboSpan" id="kobo.546.1"> imports and color </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">theme setup:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.548.1">
'use client';
import { useSession, signIn, signOut }  from 'next-auth/react';
import { useQuery } from '@apollo/client';
import { GET_MENU } from '@/app/queries/clientQueries';
import withApollo from '../../utils/withApollo';
import { styled, ThemeProvider } from 'styled-components';
import GlobalStyle from '../../components/GlobalStyles';
import MainMenu from '../../components/MainMenu';
const theme = {
  colors: {
    primary: 'rgb(15 23 42)',
  },
};</span></pre> <p><span class="koboSpan" id="kobo.549.1">The next code block has our CSS </span><span class="No-Break"><span class="koboSpan" id="kobo.550.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">styled-components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.553.1">
const MainContainer = styled.div`
  margin: 2rem auto;
  max-width: 120rem;
  padding: 2rem;
  width: 100%;
`;
const PageTitle = styled.h1`
  color: #ffffff;
`;
const LoginStatus = styled.p`
  color: #ffffff;
`;
const SignInOutButton = styled.button`
  color: #ffffff;
  padding: 0.5rem;
  cursor: pointer;
  margin: 2rem 0 2rem 0;
`;
const ContentContainer = styled.div`
  display: flex;
  flex-flow: column wrap;
`;
const Content = styled.p`
  color: #ffffff;
  font-size: 1.4rem;
`;
const ItemContainer = styled.div`
  display: flex;
  flex-flow: row nowrap;
  margin: 2rem 0 2rem 0;
  border: 0.1rem solid black;
`;
const ItemDescription = styled.div`
  margin-left: 1rem;
`;</span></pre> <p><span class="koboSpan" id="kobo.554.1">And lastly, we</span><a id="_idIndexMarker918"/><span class="koboSpan" id="kobo.555.1"> have the rendered data for </span><span class="No-Break"><span class="koboSpan" id="kobo.556.1">our application:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.557.1">
const Menu = () =&gt; {
  const { loading, error, data } = useQuery(GET_MENU);
  const { data: session, status } = useSession();
  const userEmail = session?.user?.email;
  if (loading) return &lt;Content&gt;Loading...&lt;/Content&gt;;
  if (error) return &lt;Content&gt;Something
    went wrong&lt;/Content&gt;;
  if (status === 'loading') {
    return &lt;Content&gt;Hang on there...&lt;/Content&gt;;
  }
  if (status === 'authenticated') {
    return (
      &lt;&gt;
        &lt;ThemeProvider theme={theme}&gt;
          &lt;GlobalStyle /&gt;
          &lt;MainMenu /&gt;
          &lt;MainContainer&gt;
            &lt;PageTitle&gt;Menu&lt;/PageTitle&gt;
            &lt;LoginStatus&gt;Signed in as {userEmail}&lt;/LoginStatus&gt;
            &lt;SignInOutButton onClick={() =&gt; signOut()}&gt;
              Sign out
            &lt;/SignInOutButton&gt;
            {!loading &amp;&amp; !error &amp;&amp; (
              &lt;ContentContainer&gt;
                {data.menu.map((items) =&gt; (
                  &lt;ContentContainer key={items.id}&gt;
                    &lt;ItemContainer&gt;
                      &lt;ItemDescription&gt;
                        &lt;Content&gt;{items.name}&lt;/Content&gt;
                        &lt;Content&gt;{items.foodType}&lt;/Content&gt;
                        &lt;Content&gt;{items.description}
                        &lt;/Content&gt;
                      &lt;/ItemDescription&gt;
                    &lt;/ItemContainer&gt;
                  &lt;/ContentContainer&gt;
                ))}
              &lt;/ContentContainer&gt;
            )}
          &lt;/MainContainer&gt;
        &lt;/ThemeProvider&gt;
      &lt;/&gt;
    );
  }
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={theme}&gt;
        &lt;GlobalStyle /&gt;
        &lt;MainMenu /&gt;
        &lt;MainContainer&gt;
          &lt;PageTitle&gt;Menu&lt;/PageTitle&gt;
          &lt;SignInOutButton onClick={() =&gt; signIn('')}&gt;
            Sign in&lt;/SignInOutButton&gt;
          &lt;LoginStatus&gt;Not signed in. </span><span class="koboSpan" id="kobo.557.2">Sign in to view
            the menu.&lt;/LoginStatus&gt;
        &lt;/MainContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  );
};
export default withApollo(Menu);</span></pre> <p><span class="koboSpan" id="kobo.558.1">Now, the following code is </span><span class="No-Break"><span class="koboSpan" id="kobo.559.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.560.1">account/profile/page.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.561.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.562.1">Like last time, let’s break it down into smaller </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">code blocks.</span></span></p>
<p><span class="koboSpan" id="kobo.564.1">First, we have the imports for </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">our page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.566.1">
'use client';
import { useSession, signIn, signOut }  from 'next-auth/react';
import { useQuery } from '@apollo/client';
import { GET_PROFILE } from '@/app/queries/clientQueries';
import withApollo from '../../utils/withApollo';
import { styled, ThemeProvider } from 'styled-components';
import GlobalStyle from '../../components/GlobalStyles';
import MainMenu from '../../components/MainMenu';</span></pre> <p><span class="koboSpan" id="kobo.567.1">Now, we have the</span><a id="_idIndexMarker919"/><span class="koboSpan" id="kobo.568.1"> color theme and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">styled-components</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.570.1"> code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.571.1">
const theme = {
  colors: {
    primary: 'rgb(15 23 42)',
  },
};
const MainContainer = styled.div`
  margin: 2rem auto;
  max-width: 120rem;
  padding: 2rem;
  width: 100%;
`;
const PageTitle = styled.h1`
  color: #ffffff;
`;
const LoginStatus = styled.p`
  color: #ffffff;
`;
const SignInOutButton = styled.button`
  color: #ffffff;
  padding: 0.5rem;
  cursor: pointer;
  margin: 2rem 0 2rem 0;
`;
const ContentContainer = styled.div`
  display: flex;
  flex-flow: row wrap;
`;
const Content = styled.p`
  color: #ffffff;
  font-size: 1.4rem;
  margin-top: 2rem;
`;</span></pre> <p><span class="koboSpan" id="kobo.572.1">Lastly, we have </span><a id="_idIndexMarker920"/><span class="koboSpan" id="kobo.573.1">the rendered content for </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">the page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.575.1">
const ClientProtectPage = () =&gt; {
  const { loading, error, data } = useQuery(GET_PROFILE);
  const { data: session, status } = useSession();
  const userEmail = session?.user?.email;
  if (loading) return &lt;Content&gt;Loading...&lt;/Content&gt;;
  if (error) return &lt;Content&gt;Something went wrong
    &lt;/Content&gt;;
  if (status === 'loading') {
    return &lt;Content&gt;Hang on there...&lt;/Content&gt;;
  }
  if (status === 'authenticated') {
    return (
      &lt;&gt;
        &lt;ThemeProvider theme={theme}&gt;
          &lt;GlobalStyle /&gt;
          &lt;MainMenu /&gt;
          &lt;MainContainer&gt;
            &lt;PageTitle&gt;Profile&lt;/PageTitle&gt;
            &lt;LoginStatus&gt;Signed in as {userEmail}
            &lt;/LoginStatus&gt;
            &lt;SignInOutButton onClick={() =&gt; signOut()}&gt;
              Sign out
            &lt;/SignInOutButton&gt;
            {!loading &amp;&amp; !error &amp;&amp; (
              &lt;ContentContainer&gt;
                {data.profile.map((account) =&gt; (
                  &lt;ContentContainer key={account.id}&gt;
                    &lt;Content&gt;{account.bio}&lt;/Content&gt;
                  &lt;/ContentContainer&gt;
                ))}
              &lt;/ContentContainer&gt;
            )}
          &lt;/MainContainer&gt;
        &lt;/ThemeProvider&gt;
      &lt;/&gt;
    );
  }
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={theme}&gt;
        &lt;GlobalStyle /&gt;
        &lt;MainMenu /&gt;
        &lt;MainContainer&gt;
          &lt;PageTitle&gt;Profile&lt;/PageTitle&gt;
          &lt;SignInOutButton onClick={() =&gt; signIn('')}&gt;
          Sign in&lt;/SignInOutButton&gt;
          &lt;LoginStatus&gt;
            Not signed in. </span><span class="koboSpan" id="kobo.575.2">Sign in to view your profile.
</span><span class="koboSpan" id="kobo.575.3">          &lt;/LoginStatus&gt;
        &lt;/MainContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  );
};
export default withApollo(ClientProtectPage);</span></pre> <p><span class="koboSpan" id="kobo.576.1">Now, let’s work on </span><a id="_idIndexMarker921"/><span class="koboSpan" id="kobo.577.1">some component files. </span><span class="koboSpan" id="kobo.577.2">The first code is </span><span class="No-Break"><span class="koboSpan" id="kobo.578.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">components/MainMenu.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.581.1">
import Link from 'next/link';
import { styled } from 'styled-components';
const MainNavigation = styled.nav`
  position: relative;
  z-index: 1;
  display: flex;
  flex-flow: wrap;
  justify-content: space-around;
  font-size: 2rem;
  padding: 1rem;
  background: rgb(250 250 250);
`;
export default function MainMenu() {
  return (
    &lt;MainNavigation&gt;
      &lt;Link href="/"&gt;Home&lt;/Link&gt;
      &lt;Link href="/nutrition"&gt;Nutrition&lt;/Link&gt;
      &lt;Link href="/account/menu"&gt;Menu&lt;/Link&gt;
      &lt;Link href="/account/profile"&gt;Profile&lt;/Link&gt;
    &lt;/MainNavigation&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.582.1">Next, the following code is for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">components/Provider.js</span></strong><span class="koboSpan" id="kobo.584.1"> file, which is required for authentication and </span><span class="No-Break"><span class="koboSpan" id="kobo.585.1">session state:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.586.1">
'use client';
import { SessionProvider } from 'next-auth/react';
const Provider = ({ children }) =&gt; {
  return &lt;SessionProvider&gt;{children}&lt;/SessionProvider&gt;;
};
export default Provider;</span></pre> <p><span class="koboSpan" id="kobo.587.1">Our next file has our </span><a id="_idIndexMarker922"/><span class="koboSpan" id="kobo.588.1">GraphQL schema, resolvers, and our Apollo server. </span><span class="koboSpan" id="kobo.588.2">The following code goes </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.590.1">graphql/route.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.592.1">
mport { ApolloServer } from '@apollo/server';
import { startServerAndCreateNextHandler } from '@as-integrations/next';
import { gql } from 'graphql-tag';
import { menu } from '../../../data/menu';
import { profile } from '../../../data/profile';
import allowCors from '../utils/cors';
// Define the GraphQL schema and resolvers
const typeDefs = gql`
  type Menu {
    id: String
    foodType: String
    name: String
    description: String
  }
  type Profile {
    id: String
    bio: String
  }
  type Query {
    menu: [Menu]
    profile: [Profile]
  }
`;
const resolvers = {
  Query: {
    menu: () =&gt; menu,
    profile: () =&gt; profile,
  },
};
// Create the Apollo Server
const server = new ApolloServer({
  typeDefs,
  resolvers,
});
const handler = startServerAndCreateNextHandler(server, {
  context: async (req, res) =&gt; ({ req, res }),
});
export async function GET(request) {
  return handler(request);
}
export async function POST(request) {
  return handler(request);
}
export default allowCors(handler);</span></pre> <p><span class="koboSpan" id="kobo.593.1">Now, use the </span><a id="_idIndexMarker923"/><span class="koboSpan" id="kobo.594.1">following code to </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">build </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">nutrition/page.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.598.1">
'use client';
import { styled, ThemeProvider } from 'styled-components';
import GlobalStyle from '../components/GlobalStyles';
import MainMenu from '../components/MainMenu';
const theme = {
  colors: {
    primary: 'rgb(15 23 42)',
  },
};
const MainContainer = styled.div`
  margin: 2rem auto;
  max-width: 120rem;
  padding: 2rem;
  width: 100%;
`;
const PageTitle = styled.h1`
  color: #ffffff;
`;
const PageIntro = styled.p`
  color: #ffffff;
  margin-top: 2rem;
  font-size: 1.4rem;
`;
export default function Nutrition() {
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={theme}&gt;
        &lt;GlobalStyle /&gt;
        &lt;MainMenu /&gt;
        &lt;MainContainer&gt;
          &lt;PageTitle&gt;Nutrition&lt;/PageTitle&gt;
          &lt;PageIntro&gt;Nutrition is good for health
          and diet!&lt;/PageIntro&gt;
        &lt;/MainContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.599.1">GraphQL queries </span><a id="_idIndexMarker924"/><span class="koboSpan" id="kobo.600.1">are next, so the following code is for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.601.1">queries/clientQueries.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.602.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.603.1">
import { gql } from '@apollo/client';
const GET_MENU = gql`
  query {
    menu {
      id
      name
      foodType
      description
    }
  }
`;
const GET_PROFILE = gql`
  query {
    profile {
      id
      bio
    }
  }
`;
export { GET_MENU, GET_PROFILE };</span></pre> <p><span class="koboSpan" id="kobo.604.1">Now, the important </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">utils/cors.js</span></strong><span class="koboSpan" id="kobo.606.1"> file is needed so that we don’t get CORS errors when our app is </span><a id="_idIndexMarker925"/><span class="koboSpan" id="kobo.607.1">deployed online. </span><span class="koboSpan" id="kobo.607.2">This will allow us to access our GraphQL API on the </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">authenticated routes:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.609.1">
const allowCors = (fn) =&gt; async (req, res) =&gt; {
  res.setHeader('Access-Control-Allow-Credentials', true);
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Origin', req.headers.origin);
  res.setHeader(
    'Access-Control-Allow-Methods',
    'GET,OPTIONS,PATCH,DELETE,POST,PUT'
  );
  res.setHeader(
    'Access-Control-Allow-Headers',
    'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, 
       Content-Length, Content-MD5, Content-Type, Date, X-Api-Version'
  );
  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }
  await fn(req, res);
};
export default allowCors;</span></pre> <p><span class="koboSpan" id="kobo.610.1">Let’s keep going. </span><span class="koboSpan" id="kobo.610.2">We have some more code here and it’s for another GraphQL setup page; this time, it has the endpoints for GraphQL, which is how we will access our queries</span><a id="_idIndexMarker926"/><span class="koboSpan" id="kobo.611.1"> later. </span><span class="koboSpan" id="kobo.611.2">This file is </span><span class="No-Break"><span class="koboSpan" id="kobo.612.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.613.1">utils/withApollo.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.615.1">
import { ApolloClient, InMemoryCache, ApolloProvider } from '@apollo/client';
import { useMemo } from 'react';
import { SessionProvider } from 'next-auth/react';
export function initializeApollo(initialState = null) {
  const _apolloClient = new ApolloClient({
    // Local GraphQL endpoint
    // uri: 'http://localhost:3000/graphql',
    // Your online GraphQL endpoint
    uri: 'https://coffee-restaurant.vercel.app/graphql',
    cache: new InMemoryCache().restore(initialState || {}),
  });
  return _apolloClient;
}
export function useApollo(initialState) {
  const store = useMemo(() =&gt; initializeApollo(initialState), 
    [initialState]);
  return store;
}
export default function withApollo(PageComponent) {
  const WithApollo = ({ apolloClient, apolloState, session, 
    ...pageProps }) =&gt; {
    const client = useApollo(apolloState);
    return (
      &lt;SessionProvider session={session}&gt;
        &lt;ApolloProvider client={client}&gt;
          &lt;PageComponent {...pageProps} /&gt;
        &lt;/ApolloProvider&gt;
      &lt;/SessionProvider&gt;
    );
  };
  // On the server
  if (typeof window === 'undefined') {
    WithApollo.getInitialProps = async (ctx) =&gt; {
      const apolloClient = initializeApollo();
      let pageProps = {};
      if (PageComponent.getInitialProps) {
        pageProps = await PageComponent.getInitialProps(ctx);
      }
      if (ctx.res &amp;&amp; ctx.res.finished) {
        // When redirecting, the response is finished.
</span><span class="koboSpan" id="kobo.615.2">        // No point in continuing to render
        return pageProps;
      }
      const apolloState = apolloClient.cache.extract();
      return {
        ...pageProps,
        apolloState,
      };
    };
  }
  return WithApollo;
}</span></pre> <p><span class="koboSpan" id="kobo.616.1">Almost done! </span><span class="koboSpan" id="kobo.616.2">We </span><a id="_idIndexMarker927"/><span class="koboSpan" id="kobo.617.1">are now on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.618.1">layout.js</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.619.1">page file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.620.1">
import './globals.css';
import { Dosis } from 'next/font/google';
import StyledComponentsRegistry from './lib/registry';
const dosis = Dosis({ subsets: ['latin'] });
export const metadata = {
  title: 'Resturant App',
  description: 'Generated by create next app',
};
export default function RootLayout({ children }) {
  return (
    &lt;html lang="en"&gt;
      &lt;StyledComponentsRegistry&gt;
        &lt;body className={dosis.className}&gt;{children}&lt;/body&gt;
      &lt;/StyledComponentsRegistry&gt;
    &lt;/html&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.621.1">The 404 error </span><strong class="source-inline"><span class="koboSpan" id="kobo.622.1">not-found.js</span></strong><span class="koboSpan" id="kobo.623.1"> page </span><a id="_idIndexMarker928"/><span class="koboSpan" id="kobo.624.1">has the </span><span class="No-Break"><span class="koboSpan" id="kobo.625.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.626.1">
'use client';
import { styled, ThemeProvider } from 'styled-components';
import GlobalStyle from '../../src/app/components/GlobalStyles';
import MainMenu from './components/MainMenu';
const theme = {
  colors: {
    primary: 'rgb(15 23 42)',
  },
};
const MainContainer = styled.div`
  margin: 2rem auto;
  max-width: 120rem;
  padding: 2rem;
  width: 100%;
`;
const PageTitle = styled.h1`
  color: #ffffff;
`;
const PageIntro = styled.p`
  color: #ffffff;
  margin-top: 2rem;
  font-size: 1.4rem;
`;
export default function NotFound() {
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={theme}&gt;
        &lt;GlobalStyle /&gt;
        &lt;MainMenu /&gt;
        &lt;MainContainer&gt;
          &lt;PageTitle&gt;Page Not Found&lt;/PageTitle&gt;
          &lt;PageIntro&gt;Could not find requested
            page :(&lt;/PageIntro&gt;
        &lt;/MainContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.627.1">And lastly, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.628.1">page.js</span></strong><span class="koboSpan" id="kobo.629.1"> file is in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.630.1">root</span></strong><span class="koboSpan" id="kobo.631.1"> folder, which is our </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">home page.</span></span></p>
<p><span class="koboSpan" id="kobo.633.1">The code is split in</span><a id="_idIndexMarker929"/><span class="koboSpan" id="kobo.634.1"> two for readability. </span><span class="koboSpan" id="kobo.634.2">First, we have the imports and </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">CSS section:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.636.1">
'use client';
import { styled, ThemeProvider } from 'styled-components';
import GlobalStyle from '../../src/app/components/GlobalStyles';
import MainMenu from './components/MainMenu';
const theme = {
  colors: {
    primary: 'rgb(15 23 42)',
  },
};
const MainContainer = styled.div`
  margin: 0 auto;
  width: 100%;
`;
const CoverHeadingBG = styled.div`
  margin: 2rem auto;
  display: flex;
  flex-flow: column;
  align-items: center;
  background-color: rgb(6 95 70);
  color: rgb(255 255 255);
  border-radius: 2rem;
  padding: 2rem;
`;
const CoverHeading = styled.h1`
  text-transform: uppercase;
`;
const CoverIntro = styled.p`
  font-size: 1.4rem;
  margin: 2rem 2rem;
`;
const Hero = styled.div`
  margin: 2rem auto;
  background-image: url('https://res.cloudinary.com/d74fh3kw/image/
    upload/v1692557430/coffee-restaurant/coffee-shop_zlkf7u.jpg');
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  background-color: rgb(4 120 87);
  height: 67.5rem;
  width: 100%;
`;
export default function Home() {
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={theme}&gt;
        &lt;GlobalStyle /&gt;
        &lt;MainContainer&gt;
          &lt;MainMenu /&gt;
          &lt;CoverHeadingBG&gt;
            &lt;CoverHeading&gt;Summer time is here!&lt;/CoverHeading&gt;
            &lt;CoverIntro&gt;
              Our summer menu has arrived. </span><span class="koboSpan" id="kobo.636.2">Freshen up your day with 
                our creamy
              and delicious coffee range, iced teas and mouth watering 
                snacks.
</span><span class="koboSpan" id="kobo.636.3">            &lt;/CoverIntro&gt;
          &lt;/CoverHeadingBG&gt;
          &lt;Hero&gt;&lt;/Hero&gt;
        &lt;/MainContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.637.1">And now for the</span><a id="_idIndexMarker930"/><span class="koboSpan" id="kobo.638.1"> function where we render our components in JSX </span><span class="No-Break"><span class="koboSpan" id="kobo.639.1">with HTML:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.640.1">
export default function Home() {
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={theme}&gt;
        &lt;GlobalStyle /&gt;
        &lt;MainContainer&gt;
          &lt;MainMenu /&gt;
          &lt;CoverHeadingBG&gt;
            &lt;CoverHeading&gt;Summer time is here!&lt;/CoverHeading&gt;
            &lt;CoverIntro&gt;
              Our summer menu has arrived. </span><span class="koboSpan" id="kobo.640.2">Freshen up your day with 
                our creamy
              and delicious coffee range, iced teas and mouth watering 
                snacks.
</span><span class="koboSpan" id="kobo.640.3">            &lt;/CoverIntro&gt;
          &lt;/CoverHeadingBG&gt;
          &lt;Hero&gt;&lt;/Hero&gt;
        &lt;/MainContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  );
}</span></pre> <p><span class="koboSpan" id="kobo.641.1">That’s it! </span><span class="koboSpan" id="kobo.641.2">We are done with the bulk of the code base, and our app is almost complete! </span><span class="koboSpan" id="kobo.641.3">All that is left is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.642.1">GlobalStyles.js</span></strong><span class="koboSpan" id="kobo.643.1"> file and the images for the frontend. </span><span class="koboSpan" id="kobo.643.2">We will do this in the</span><a id="_idIndexMarker931"/> <span class="No-Break"><span class="koboSpan" id="kobo.644.1">upcoming section.</span></span></p>
<h2 id="_idParaDest-362"><a id="_idTextAnchor361"/><span class="koboSpan" id="kobo.645.1">Building the presentation layer</span></h2>
<p><span class="koboSpan" id="kobo.646.1">Our project uses</span><a id="_idIndexMarker932"/> <strong class="source-inline"><span class="koboSpan" id="kobo.647.1">styled-components</span></strong><span class="koboSpan" id="kobo.648.1">, which means the component and page files already have localized CSS. </span><span class="koboSpan" id="kobo.648.2">We do have one global CSS file though, which is a styled component with global style. </span><span class="koboSpan" id="kobo.648.3">Here is the code </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.650.1">components/GlobalStyles.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.652.1">
import { createGlobalStyle } from 'styled-components';
const GlobalStyle = createGlobalStyle`
  html,
  body {
    color: ${({ theme }) =&gt; theme.colors.primary};
    padding: 0;
    margin: 0;
    font-size: 1rem;
    background: rgb(6 78 59);
  }
  * {
    box-sizing: border-box;
  }
`;
export default GlobalStyle;</span></pre> <p><span class="koboSpan" id="kobo.653.1">We have waited long enough; it’s time to finally see our </span><span class="No-Break"><span class="koboSpan" id="kobo.654.1">application running!</span></span></p>
<p><span class="koboSpan" id="kobo.655.1">Make sure that you are in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.656.1">root</span></strong><span class="koboSpan" id="kobo.657.1"> folder for </span><strong class="source-inline"><span class="koboSpan" id="kobo.658.1">my-app-restaurant</span></strong><span class="koboSpan" id="kobo.659.1"> and run the application with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">npm run </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.661.1">dev</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.662.1"> command.</span></span></p>
<p><span class="koboSpan" id="kobo.663.1">Our application should be running on </span><strong class="source-inline"><span class="koboSpan" id="kobo.664.1">http://localhost:3000</span></strong><span class="koboSpan" id="kobo.665.1"> and our GraphQL API should be </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">on </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">http://localhost:3000/graphql</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.668.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.669.1">The GraphQL API has built-in documentation for testing our queries. </span><span class="koboSpan" id="kobo.669.2">Here is an example query that should return the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.670.1">menu</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.671.1"> data:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.672.1">
query {
  menu {
    id
    name
    foodType
    description
  }
}</span></pre> <p><span class="koboSpan" id="kobo.673.1">Before we put </span><a id="_idIndexMarker933"/><span class="koboSpan" id="kobo.674.1">our app on GitHub and deploy it online, we will finish off with some unit tests for some of the files so that we get used to </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">test-driven development.</span></span></p>
<h2 id="_idParaDest-363"><a id="_idTextAnchor362"/><span class="koboSpan" id="kobo.676.1">Implementing testing</span></h2>
<p><span class="koboSpan" id="kobo.677.1">We have two</span><a id="_idIndexMarker934"/><span class="koboSpan" id="kobo.678.1"> test suites. </span><span class="koboSpan" id="kobo.678.2">First, we have the code </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">nutrition/page.test.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.681.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.682.1">
import { render, screen } from '@testing-library/react';
import '@testing-library/jest-dom/extend-expect';
import Nutrition from './page';
describe('Nutrition', () =&gt; {
  it('renders without crashing', () =&gt; {
    render(&lt;Nutrition /&gt;);
  });
  it('displays the correct title and intro', () =&gt; {
    render(&lt;Nutrition /&gt;);
    expect(
      screen.getByText('Nutrition is good for health and diet!')
    ).toBeInTheDocument();
  });
});</span></pre> <p><span class="koboSpan" id="kobo.683.1">And lastly, the</span><a id="_idIndexMarker935"/><span class="koboSpan" id="kobo.684.1"> following code is for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.685.1">page.test.js</span></strong><span class="koboSpan" id="kobo.686.1"> file in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.687.1">root</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.688.1"> folder:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.689.1">
import { render, screen } from '@testing-library/react';
import '@testing-library/jest-dom/extend-expect';
import Home from './page';
describe('Home', () =&gt; {
  it('renders without crashing', () =&gt; {
    render(&lt;Home /&gt;);
  });
  it('displays the correct heading and intro', () =&gt; {
    render(&lt;Home /&gt;);
    expect(screen.getByText('Summer time is here!')).
</span><span class="koboSpan" id="kobo.689.2">      toBeInTheDocument();
    expect(
      screen.getByText(
        /Our summer menu has arrived. </span><span class="koboSpan" id="kobo.689.3">Freshen up your day with our 
           creamy and delicious coffee range, iced teas and mouth 
           watering snacks./
      )
    ).toBeInTheDocument();
  });
});</span></pre> <p><span class="koboSpan" id="kobo.690.1">Run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">npm test</span></strong><span class="koboSpan" id="kobo.692.1"> command, and all tests should be passing. </span><span class="koboSpan" id="kobo.692.2">You can press the </span><em class="italic"><span class="koboSpan" id="kobo.693.1">A</span></em><span class="koboSpan" id="kobo.694.1"> button to rerun all of </span><span class="No-Break"><span class="koboSpan" id="kobo.695.1">the tests.</span></span></p>
<p><span class="koboSpan" id="kobo.696.1">Our app is more</span><a id="_idIndexMarker936"/><span class="koboSpan" id="kobo.697.1"> or less complete. </span><span class="koboSpan" id="kobo.697.2">Let’s now put it on GitHub so that we can version control it. </span><span class="koboSpan" id="kobo.697.3">It is also preparation for getting our app to work online when we deploy it to Vercel, our </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">serverless host.</span></span></p>
<h2 id="_idParaDest-364"><a id="_idTextAnchor363"/><span class="koboSpan" id="kobo.699.1">Creating a Git repository with README documentation</span></h2>
<p><span class="koboSpan" id="kobo.700.1">Go to GitHub</span><a id="_idIndexMarker937"/><span class="koboSpan" id="kobo.701.1"> and</span><a id="_idIndexMarker938"/><span class="koboSpan" id="kobo.702.1"> create a new</span><a id="_idIndexMarker939"/><span class="koboSpan" id="kobo.703.1"> repo for our project. </span><span class="koboSpan" id="kobo.703.2">If you are new to or still unfamiliar with GitHub, then you can follow the </span><em class="italic"><span class="koboSpan" id="kobo.704.1">Get started</span></em><span class="koboSpan" id="kobo.705.1"> guide here: </span><a href="https://docs.github.com/en/get-started"><span class="koboSpan" id="kobo.706.1">https://docs.github.com/en/get-started</span></a><span class="koboSpan" id="kobo.707.1">. </span><span class="koboSpan" id="kobo.707.2">Then, simply follow the commands to push your project to GitHub. </span><span class="koboSpan" id="kobo.707.3">These are the commands I used. </span><span class="koboSpan" id="kobo.707.4">Replace them with your </span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">own repo:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.709.1">
git init
git add .
</span><span class="koboSpan" id="kobo.709.2">git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/yourname/yourprojectname.git
git push -u origin main</span></pre> <p><span class="koboSpan" id="kobo.710.1">Our project is now on GitHub! </span><span class="koboSpan" id="kobo.710.2">We only have one thing left to do – to deploy our app on Vercel – and then we </span><span class="No-Break"><span class="koboSpan" id="kobo.711.1">are done!</span></span></p>
<h2 id="_idParaDest-365"><a id="_idTextAnchor364"/><span class="koboSpan" id="kobo.712.1">Deploying the application for public access</span></h2>
<p><span class="koboSpan" id="kobo.713.1">Sign in to </span><a id="_idIndexMarker940"/><span class="koboSpan" id="kobo.714.1">your Vercel account and then, on the dashboard, there should be a button to add a new project. </span><span class="koboSpan" id="kobo.714.2">Add a new project and import the Git repository you just created for </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">the project.</span></span></p>
<p><span class="koboSpan" id="kobo.716.1">Before you hit the </span><strong class="bold"><span class="koboSpan" id="kobo.717.1">Deploy</span></strong><span class="koboSpan" id="kobo.718.1"> button, you must enter your environment variables, which you will find in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.719.1">.env.local</span></strong><span class="koboSpan" id="kobo.720.1"> file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">root</span></strong><span class="koboSpan" id="kobo.722.1"> folder of your project. </span><span class="koboSpan" id="kobo.722.2">This file was not uploaded to your GitHub repo because it has your GitHub and Google IDs and secret keys, which you don’t want people to see! </span><span class="koboSpan" id="kobo.722.3">When you’re done, hit </span><strong class="bold"><span class="koboSpan" id="kobo.723.1">Deploy</span></strong><span class="koboSpan" id="kobo.724.1"> and wait for the build </span><span class="No-Break"><span class="koboSpan" id="kobo.725.1">to complete.</span></span></p>
<p><span class="koboSpan" id="kobo.726.1">Our app should be live online now. </span><span class="koboSpan" id="kobo.726.2">However, the </span><strong class="bold"><span class="koboSpan" id="kobo.727.1">Menu</span></strong><span class="koboSpan" id="kobo.728.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.729.1">Profile</span></strong><span class="koboSpan" id="kobo.730.1"> pages will be broken. </span><span class="koboSpan" id="kobo.730.2">Don’t worry! </span><span class="koboSpan" id="kobo.730.3">This is expected because, in our code in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">utils/withApollo.js</span></strong><span class="koboSpan" id="kobo.732.1"> file, the URL is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.733.1">http://localhost:3000/graphql</span></strong><span class="koboSpan" id="kobo.734.1">; our app is online now and is not running on our machine, so the address needs to change. </span><span class="koboSpan" id="kobo.734.2">Update it to the address of your app on Vercel, as in the following example: </span><strong class="source-inline"><span class="koboSpan" id="kobo.735.1">https://your-app-url.vercel.app/graphql</span></strong><span class="koboSpan" id="kobo.736.1">. </span><span class="koboSpan" id="kobo.736.2">Push the latest changes to your GitHub repository, and Vercel will automatically update and deploy with the </span><span class="No-Break"><span class="koboSpan" id="kobo.737.1">new URI.</span></span></p>
<p><span class="koboSpan" id="kobo.738.1">The following commit message should </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">be fine:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.740.1">
git status
git add .
</span><span class="koboSpan" id="kobo.740.2">git commit -m "vercel graphql endpoint for uri"
git push</span></pre> <p><span class="koboSpan" id="kobo.741.1">And remember from earlier, when we run our app locally, the callback URL will look something like this, if we use GitHub as an </span><span class="No-Break"><span class="koboSpan" id="kobo.742.1">example: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">http://localhost:3000/api/auth/callback/github</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.744.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.745.1">When deployed online, it will have the following type of URL </span><span class="No-Break"><span class="koboSpan" id="kobo.746.1">structure: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.747.1">https://your-app-url.vercel.app/api/auth/callback/github</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.748.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.749.1">So update the authentication for your app on GitHub and Google to get the </span><strong class="bold"><span class="koboSpan" id="kobo.750.1">Menu</span></strong><span class="koboSpan" id="kobo.751.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.752.1">Profile</span></strong><span class="koboSpan" id="kobo.753.1"> pages </span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">working online.</span></span></p>
<p><span class="koboSpan" id="kobo.755.1">It should be all </span><a id="_idIndexMarker941"/><span class="koboSpan" id="kobo.756.1">done. </span><span class="koboSpan" id="kobo.756.2">Now, our application should be available online for the whole world to see. </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">Well done!</span></span></p>
<h1 id="_idParaDest-366"><a id="_idTextAnchor365"/><span class="koboSpan" id="kobo.758.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.759.1">We have made it to the end of this chapter and leveled up our programming skills considerably. </span><span class="koboSpan" id="kobo.759.2">Right at the beginning of this chapter, we learned about REST APIs and how they help us to fetch data on the internet, which we can then use in our applications. </span><span class="koboSpan" id="kobo.759.3">Afterward, we had an introduction to planning application architecture, where we talked about authentication followed by SWR, an HTTP cache invalidation strategy. </span><span class="koboSpan" id="kobo.759.4">The next topic was GraphQL, the popular alternative to using REST APIs, which requires fewer API requests as it’s possible to fetch only the data we require. </span><span class="koboSpan" id="kobo.759.5">We then touched upon deployment because it’s important to remember this setup from </span><span class="No-Break"><span class="koboSpan" id="kobo.760.1">the get-go.</span></span></p>
<p><span class="koboSpan" id="kobo.761.1">In the next sections, we dived into business logic and learned why our code needs to be well refined. </span><span class="koboSpan" id="kobo.761.2">This section was followed up by the presentation layer as we created a design that used styled-components. </span><span class="koboSpan" id="kobo.761.3">Testing was factored in, and we learned how to test the code that we wrote for our project. </span><span class="koboSpan" id="kobo.761.4">With our application completed, the final step was its deployment, and this is where we learned about creating a Git repository that has a README file with our documentation. </span><span class="koboSpan" id="kobo.761.5">In this step, we also put our application online so that it was publicly available for everyone </span><span class="No-Break"><span class="koboSpan" id="kobo.762.1">to use.</span></span></p>
<p><span class="koboSpan" id="kobo.763.1">With everything that we have absorbed, it’s safe to say that we have taken a huge leap forward in terms of learning and have become much more talented programmers in the process. </span><span class="koboSpan" id="kobo.763.2">We are now better prepared to tackle interviews as </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">job seekers.</span></span></p>
</div>
</body></html>