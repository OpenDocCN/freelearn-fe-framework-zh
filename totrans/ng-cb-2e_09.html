<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer184">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">9</span></h1>
<h1 class="chapterTitle" id="_idParaDest-291"><span class="koboSpan" id="kobo.2.1">Angular and the Angular CDK</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">Angular has an amazing ecosystem of tools </span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.4.1">and libraries, including Angular Material, the </span><strong class="keyWord"><span class="koboSpan" id="kobo.5.1">Angular command-line interface</span></strong><span class="koboSpan" id="kobo.6.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.7.1">Angular CLI</span></strong><span class="koboSpan" id="kobo.8.1">), and the beloved </span><strong class="keyWord"><span class="koboSpan" id="kobo.9.1">Angular Component Dev Kit</span></strong><span class="koboSpan" id="kobo.10.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.11.1">Angular CDK</span></strong><span class="koboSpan" id="kobo.12.1">). </span><span class="koboSpan" id="kobo.12.2">I call it “beloved” because if you</span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.13.1"> are to implement your own custom interactions and behaviors in Angular apps without having to rely on an entire set of libraries, the Angular CDK is going to be your best friend. </span><span class="koboSpan" id="kobo.13.2">In this chapter, you’ll learn what an amazing combination of Angular and the Angular CDK is. </span><span class="koboSpan" id="kobo.13.3">You’ll learn about some neat components built into the CDK and will also use some CDK </span><strong class="keyWord"><span class="koboSpan" id="kobo.14.1">APIs</span></strong><span class="koboSpan" id="kobo.15.1"> to create amazing and optimized content.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.16.1">Here are the recipes we’re going to cover in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.17.1">Using virtual scroll for huge lists</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.18.1">Keyboard navigation for lists</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.19.1">Pointy little popovers with the Overlay API</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.20.1">Input coercion utilities from the Angular CDK</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.21.1">Using the CDK drag and drop API to move items from one list to another</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.22.1">Creating a multi-step game with the CDK stepper API</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.23.1">Accessible Listbox interactions using CDK listbox directives</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.24.1">Working with nested menus using the Angular CDK menu API</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-292"><span class="koboSpan" id="kobo.25.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.26.1">For the recipes in this chapter, ensure your setup is complete as per the 'Technical Requirements' in the 'Angular-Cookbook-2E' GitHub repository. </span><span class="koboSpan" id="kobo.26.2">For setup details, visit: </span><a href="https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/docs/technical-requirements.md"><span class="url"><span class="koboSpan" id="kobo.27.1">https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/docs/technical-requirements.md</span></span></a><span class="koboSpan" id="kobo.28.1">. </span><span class="koboSpan" id="kobo.28.2">The starter code for this chapter is located at </span><a href="https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/start/apps/chapter09"><span class="url"><span class="koboSpan" id="kobo.29.1">https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/start/apps/chapter09</span></span></a><span class="koboSpan" id="kobo.30.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-293"><span class="koboSpan" id="kobo.31.1">Using virtual scroll for huge lists</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.32.1">There might be certain scenarios</span><a id="_idIndexMarker599"/><span class="koboSpan" id="kobo.33.1"> in your application where you might have to show</span><a id="_idIndexMarker600"/><span class="koboSpan" id="kobo.34.1"> a huge set of items. </span><span class="koboSpan" id="kobo.34.2">This could be from either your backend API or the browser’s local storage. </span><span class="koboSpan" id="kobo.34.3">In either case, rendering a lot of items at once causes performance issues because the </span><strong class="keyWord"><span class="koboSpan" id="kobo.35.1">Document Object Model</span></strong><span class="koboSpan" id="kobo.36.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.37.1">DOM</span></strong><span class="koboSpan" id="kobo.38.1">) struggles, and also because of the fact that the JS thread gets blocked, and the page</span><a id="_idIndexMarker601"/><span class="koboSpan" id="kobo.39.1"> becomes unresponsive. </span><span class="koboSpan" id="kobo.39.2">In this recipe, we’ll render a list of 270,000 users and use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.40.1">virtual scroll</span></code><span class="koboSpan" id="kobo.41.1"> functionality from the Angular CDK to improve the rendering performance.</span></p>
<h2 class="heading-2" id="_idParaDest-294"><span class="koboSpan" id="kobo.42.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.43.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.44.1">start/apps/chapter09/ng-cdk-virtual-scroll</span></code><span class="koboSpan" id="kobo.45.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.46.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.47.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.48.1">npm run serve ng-cdk-virtual-scroll
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.49.1">This should open the app in a new browser tab. </span><span class="koboSpan" id="kobo.49.2">When you click the </span><strong class="screenText"><span class="koboSpan" id="kobo.50.1">Get Data</span></strong><span class="koboSpan" id="kobo.51.1"> button, you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.52.1"><img alt="" role="presentation" src="../Images/B18469_09_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.53.1">Figure 9.1: The ng-cdk-virtual-scroll app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.54.1">Now that we have the app running </span><a id="_idIndexMarker602"/><span class="koboSpan" id="kobo.55.1">locally, let’s see the steps of the recipe</span><a id="_idIndexMarker603"/><span class="koboSpan" id="kobo.56.1"> in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-295"><span class="koboSpan" id="kobo.57.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.58.1">We have a pretty simple Angular app, but with a lot of data. </span><span class="koboSpan" id="kobo.58.2">Right now, it shows a loader (button) for about a couple of seconds and then is supposed to show the data. </span><span class="koboSpan" id="kobo.58.3">However, you’ll notice that right after the </span><strong class="screenText"><span class="koboSpan" id="kobo.59.1">Tap me</span></strong><span class="koboSpan" id="kobo.60.1"> button disappears, the loader keeps showing, the button is unresponsive, and we see a blank screen, as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.61.1"><img alt="" role="presentation" src="../Images/B18469_09_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.62.1">Figure 9.2: App stuck with a blank screen while rendering list items</span></p>
<p class="normal"><span class="koboSpan" id="kobo.63.1">In fact, our entire application</span><a id="_idIndexMarker604"/><span class="koboSpan" id="kobo.64.1"> becomes unresponsive. </span><span class="koboSpan" id="kobo.64.2">If you scroll</span><a id="_idIndexMarker605"/><span class="koboSpan" id="kobo.65.1"> through—or even hover over—the items, you’ll see that the hover animation on the list items is not smooth and is a bit laggy. </span><span class="koboSpan" id="kobo.65.2">Let’s see the steps to use the Angular CDK virtual scroll to improve the rendering performance, as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.66.1">We already have the Angular CDK installed in the workspace. </span><span class="koboSpan" id="kobo.66.2">However, if you needed to install it, you would run the following command from the project’s root:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.67.1">cd start &amp;&amp; npm install --save @angular/cdk
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.68.1">You may have to restart your Angular server if you reinstall the package, so rerun the </span><code class="inlineCode"><span class="koboSpan" id="kobo.69.1">npm run serve ng-cdk-virtual-scroll</span></code><span class="koboSpan" id="kobo.70.1"> command again.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.71.1">Add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.72.1">ScrollingModule</span></code><span class="koboSpan" id="kobo.73.1"> class from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.74.1">@angular/cdk</span></code><span class="koboSpan" id="kobo.75.1"> package into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.76.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.77.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.78.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.79.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.80.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.81.1">ScrollingModule</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.82.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.83.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.84.1">'@angular/cdk/scrolling'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.85.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.86.1">@Component</span></span><span class="koboSpan" id="kobo.87.1">({
  ...,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.88.1">imports</span></span><span class="koboSpan" id="kobo.89.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.90.1">CommonModule</span></span><span class="koboSpan" id="kobo.91.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.92.1">ScrollingModule</span></strong></span><span class="koboSpan" id="kobo.93.1">]
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.94.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.95.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.96.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.97.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.98.1">@Input</span></span><span class="koboSpan" id="kobo.99.1">() </span><span class="hljs-attr"><span class="koboSpan" id="kobo.100.1">listItems</span></span><span class="koboSpan" id="kobo.101.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.102.1">AppUserCard</span></span><span class="koboSpan" id="kobo.103.1">[] = [];
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.104.1">We now must implement the virtual scroll, modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.105.1">users-list-item.component.html</span></code><span class="koboSpan" id="kobo.106.1"> file to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.107.1">*cdkVirtualFor</span></code><span class="koboSpan" id="kobo.108.1"> directive instead of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.109.1">*ngFor directive</span></code><span class="koboSpan" id="kobo.110.1">, and wrap the </span><code class="inlineCode"><span class="koboSpan" id="kobo.111.1">&lt;li&gt;</span></code><span class="koboSpan" id="kobo.112.1"> element inside a </span><code class="inlineCode"><span class="koboSpan" id="kobo.113.1">&lt;cdk-virtual-scroll-viewport&gt;</span></code><span class="koboSpan" id="kobo.114.1"> element, as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.115.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.116.1">h4</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.117.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.118.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.119.1">"heading"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.120.1">&gt;</span></span><span class="koboSpan" id="kobo.121.1">Our trusted customers</span><span class="hljs-tag"><span class="koboSpan" id="kobo.122.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.123.1">h4</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.124.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.125.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.126.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.127.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.128.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.129.1">cdk-virtual-scroll-viewport</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.130.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.131.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.132.1">"list list-group p-2"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.133.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.134.1">itemSize</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.135.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.136.1">"120"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.137.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.138.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.139.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.140.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.141.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.142.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.143.1">list__item list-group-item my-2 rounded-md p -4"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.144.1">      *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.145.1">cdkVirtualFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.146.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.147.1">"let item of listItems"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.148.1">&gt;</span></span><span class="koboSpan" id="kobo.149.1">
      ...
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.150.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.151.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.152.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.153.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.154.1">cdk-virtual-scroll-viewport</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.155.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.156.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.157.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.158.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.159.1">Notice that we have moved the CSS classes </span><code class="inlineCode"><span class="koboSpan" id="kobo.160.1">"</span></code><code class="inlineCode"><span class="koboSpan" id="kobo.161.1">list list-group p-2"</span></code><span class="koboSpan" id="kobo.162.1"> from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.163.1">&lt;ul&gt;</span></code><span class="koboSpan" id="kobo.164.1"> element to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.165.1">&lt;cdk-virtual-scroll-viewport&gt; </span></code><span class="koboSpan" id="kobo.166.1">element.</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.167.1">Boom! </span><span class="koboSpan" id="kobo.167.2">Within a few steps, and by using </span><a id="_idIndexMarker606"/><span class="koboSpan" id="kobo.168.1">the Angular CDK virtual scroll, we were </span><a id="_idIndexMarker607"/><span class="koboSpan" id="kobo.169.1">able to fix a huge performance rendering issue within our Angular app. </span><span class="koboSpan" id="kobo.169.2">See the next section to understand how it works.</span></p>
<h2 class="heading-2" id="_idParaDest-296"><span class="koboSpan" id="kobo.170.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.171.1">The Angular CDK provides the Scrolling APIs, which include the </span><code class="inlineCode"><span class="koboSpan" id="kobo.172.1">*cdkVirtualFor</span></code><span class="koboSpan" id="kobo.173.1"> directive and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.174.1">&lt;cdk-virtual-scroll-viewport&gt;</span></code><span class="koboSpan" id="kobo.175.1"> element. </span><span class="koboSpan" id="kobo.175.2">It is necessary to have </span><code class="inlineCode"><span class="koboSpan" id="kobo.176.1">&lt;cdk-virtual-scroll-viewport&gt;</span></code><span class="koboSpan" id="kobo.177.1"> wrapping the element that has the </span><code class="inlineCode"><span class="koboSpan" id="kobo.178.1">*cdkVirtualFor</span></code><span class="koboSpan" id="kobo.179.1"> directive being applied to it. </span><span class="koboSpan" id="kobo.179.2">Notice that we have an attribute on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.180.1">cdk-virtual-scroll-viewport</span></code><span class="koboSpan" id="kobo.181.1"> element named</span><code class="inlineCode"><span class="koboSpan" id="kobo.182.1"> [itemSize]</span></code><span class="koboSpan" id="kobo.183.1">, having its value set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.184.1">"</span></code><code class="inlineCode"><span class="koboSpan" id="kobo.185.1">120"</span></code><span class="koboSpan" id="kobo.186.1">. </span><span class="koboSpan" id="kobo.186.2">The reason for this is that each list item has a height of approximately 120 pixels, as shown in the following screenshot:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.187.1"><img alt="" role="presentation" src="../Images/B18469_09_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.188.1">Figure 9.3: Each list item has a height of approximately 120 pixels</span></p>
<p class="normal"><span class="koboSpan" id="kobo.189.1">But how does it improve the rendering</span><a id="_idIndexMarker608"/><span class="koboSpan" id="kobo.190.1"> performance? </span><span class="koboSpan" id="kobo.190.2">Glad you asked! </span><span class="koboSpan" id="kobo.190.3">In the original</span><a id="_idIndexMarker609"/><span class="koboSpan" id="kobo.191.1"> code for this recipe, when we loaded the 270,000 users, it would create a separate </span><code class="inlineCode"><span class="koboSpan" id="kobo.192.1">&lt;li&gt;</span></code><span class="koboSpan" id="kobo.193.1"> element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.194.1">class="list__item list-group-item"</span></code><span class="koboSpan" id="kobo.195.1"> attribute for each user, thus creating 270,000 DOM elements all being rendered at once. </span><span class="koboSpan" id="kobo.195.2">With the virtual scroll in place, the CDK only creates a few </span><code class="inlineCode"><span class="koboSpan" id="kobo.196.1">&lt;li&gt;</span></code><span class="koboSpan" id="kobo.197.1"> elements, renders them, and just replaces the content of those few </span><code class="inlineCode"><span class="koboSpan" id="kobo.198.1">&lt;li&gt;</span></code><span class="koboSpan" id="kobo.199.1"> elements as we scroll through items.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.200.1">For our example, it creates 6 </span><code class="inlineCode"><span class="koboSpan" id="kobo.201.1">&lt;li&gt;</span></code><span class="koboSpan" id="kobo.202.1"> elements, as shown in the following screenshot:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.203.1"><img alt="" role="presentation" src="../Images/B18469_09_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.204.1">Figure 9.4: Showing only a few &lt;div&gt; elements rendered on DOM due to virtual scroll</span></p>
<p class="normal"><span class="koboSpan" id="kobo.205.1">Since we only have a few elements rendered on the DOM, we don’t have performance issues anymore, and the hover</span><a id="_idIndexMarker610"/><span class="koboSpan" id="kobo.206.1"> animation also seems super-smooth </span><a id="_idIndexMarker611"/><span class="koboSpan" id="kobo.207.1">now.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.208.1">When implementing virtual scroll in your own applications, make sure that you set a specific height to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.209.1">&lt;cdk-virtual-scroll viewport&gt;</span></code><span class="koboSpan" id="kobo.210.1"> element, and also set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.211.1">[itemSize]</span></code><span class="koboSpan" id="kobo.212.1"> attribute equal to the expected list-item height in pixels, otherwise the list won’t show.</span></p>
</div>
<h2 class="heading-2" id="_idParaDest-297"><span class="koboSpan" id="kobo.213.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.214.1">Angular CDK scrolling</span><a id="_idIndexMarker612"/><span class="koboSpan" id="kobo.215.1"> examples: </span><a href="https://material.angular.io/cdk/scrolling/examples"><span class="url"><span class="koboSpan" id="kobo.216.1">https://material.angular.io/cdk/scrolling/examples</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-298"><span class="koboSpan" id="kobo.217.1">Keyboard navigation for lists</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.218.1">Accessibility is one of the most important </span><a id="_idIndexMarker613"/><span class="koboSpan" id="kobo.219.1">aspects of building apps with a great user </span><a id="_idIndexMarker614"/><span class="koboSpan" id="kobo.220.1">experience. </span><span class="koboSpan" id="kobo.220.2">The apps should not only be fast and performant but also accessible. </span><span class="koboSpan" id="kobo.220.3">While there are a lot of things to consider when it comes to accessibility, in this recipe, we’re going to make lists and list items more accessible by providing keyboard navigation for the items. </span><span class="koboSpan" id="kobo.220.4">With the Angular CDK, it is super simple. </span><span class="koboSpan" id="kobo.220.5">We’re going to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.221.1">ListKeyManager</span></code><span class="koboSpan" id="kobo.222.1"> service from the Angular CDK to implement keyboard navigation for the users list in our target application.</span></p>
<h2 class="heading-2" id="_idParaDest-299"><span class="koboSpan" id="kobo.223.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.224.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.225.1">start/apps/chapter09/ng-cdk-lkm</span></code><span class="koboSpan" id="kobo.226.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.227.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.228.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.229.1">npm run serve ng-cdk-lkm
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.230.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.231.1"><img alt="" role="presentation" src="../Images/B18469_09_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.232.1">Figure 9.5: The ng-cdk-lkm app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.233.1">Now that we have the app running</span><a id="_idIndexMarker615"/><span class="koboSpan" id="kobo.234.1"> locally, let’s see the steps of the recipe</span><a id="_idIndexMarker616"/><span class="koboSpan" id="kobo.235.1"> in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-300"><span class="koboSpan" id="kobo.236.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.237.1">We have an app that already has some of the goodness of the Angular CDK—that is, it has virtual scroll implemented from the previous recipe. </span><span class="koboSpan" id="kobo.237.2">We’ll now start making changes to the app to implement keyboard navigation, as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.238.1">First, we’ll implement the </span><code class="inlineCode"><span class="koboSpan" id="kobo.239.1">FocusableOption</span></code><span class="koboSpan" id="kobo.240.1"> interface and some accessibility factors to our </span><code class="inlineCode"><span class="koboSpan" id="kobo.241.1">UsersListItemComponent</span></code><span class="koboSpan" id="kobo.242.1"> class, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.243.1">import</span></span><span class="koboSpan" id="kobo.244.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.245.1">Component</span></span><span class="koboSpan" id="kobo.246.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.247.1">HostBinding</span></span><span class="koboSpan" id="kobo.248.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.249.1">Input</span></span><span class="koboSpan" id="kobo.250.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.251.1">ViewEncapsulation</span></span><span class="koboSpan" id="kobo.252.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.253.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.254.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.255.1">;
...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.256.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.257.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.258.1">FocusableOption</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.259.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.260.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.261.1">'@angular/cdk/a11y'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.262.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.263.1">@Component</span></span><span class="koboSpan" id="kobo.264.1">({
  ...,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.265.1">styleUrls</span></span><span class="koboSpan" id="kobo.266.1">: [</span><span class="hljs-string"><span class="koboSpan" id="kobo.267.1">'./users-list-item.component.scss'</span></span><span class="koboSpan" id="kobo.268.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.269.1">encapsulation</span></span><span class="koboSpan" id="kobo.270.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.271.1">ViewEncapsulation</span></span><span class="koboSpan" id="kobo.272.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.273.1">None</span></span><span class="koboSpan" id="kobo.274.1">,
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.275.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.276.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.277.1">UsersListItemComponent</span></span> <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.278.1">implements</span></strong></span> <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.279.1">FocusableOption</span></strong></span><span class="koboSpan" id="kobo.280.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.281.1">@Input</span></span><span class="koboSpan" id="kobo.282.1">() item!: </span><span class="hljs-title"><span class="koboSpan" id="kobo.283.1">Partial</span></span><span class="koboSpan" id="kobo.284.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.285.1">AppUserCard</span></span><span class="koboSpan" id="kobo.286.1">&gt;;
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.287.1">@HostBinding</span></span><span class="koboSpan" id="kobo.288.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.289.1">'tabIndex'</span></span><span class="koboSpan" id="kobo.290.1">)
  tabIndex = -</span><span class="hljs-number"><span class="koboSpan" id="kobo.291.1">1</span></span><span class="koboSpan" id="kobo.292.1">;
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.293.1">@HostBinding</span></span><span class="koboSpan" id="kobo.294.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.295.1">'role'</span></span><span class="koboSpan" id="kobo.296.1">)
  role = </span><span class="hljs-string"><span class="koboSpan" id="kobo.297.1">'list-item'</span></span><span class="koboSpan" id="kobo.298.1">;
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.299.1">focus</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.300.1">() {}</span></strong></span><span class="koboSpan" id="kobo.301.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.302.1">We now need to implement</span><a id="_idIndexMarker617"/><span class="koboSpan" id="kobo.303.1"> what happens in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.304.1">focus</span></code><span class="koboSpan" id="kobo.305.1"> method. </span><span class="koboSpan" id="kobo.305.2">We’ll use</span><a id="_idIndexMarker618"/><span class="koboSpan" id="kobo.306.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.307.1">ElementRef</span></code><span class="koboSpan" id="kobo.308.1"> service to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.309.1">nativeElement</span></code><span class="koboSpan" id="kobo.310.1"> and will set focus on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.311.1">nativeElement</span></code><span class="koboSpan" id="kobo.312.1">, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.313.1">import</span></span><span class="koboSpan" id="kobo.314.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.315.1">Component</span></span><span class="koboSpan" id="kobo.316.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.317.1">ElementRef</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.318.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.319.1">HostBinding</span></span><span class="koboSpan" id="kobo.320.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.321.1">Input</span></span><span class="koboSpan" id="kobo.322.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.323.1">ViewEncapsulation</span></span><span class="koboSpan" id="kobo.324.1">, inject } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.325.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.326.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.327.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.328.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.329.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.330.1">UsersListItemComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.331.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.332.1">FocusableOption</span></span><span class="koboSpan" id="kobo.333.1"> {
  ...
  </span><span class="koboSpan" id="kobo.333.2">role = </span><span class="hljs-string"><span class="koboSpan" id="kobo.334.1">'list-item'</span></span><span class="koboSpan" id="kobo.335.1">;
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.336.1">el = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.337.1">inject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.338.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.339.1">ElementRef</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.340.1">);</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.341.1">focus</span></span><span class="koboSpan" id="kobo.342.1">() {
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.343.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.344.1">.el.nativeElement.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.345.1">focus</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.346.1">();</span></strong></span><span class="koboSpan" id="kobo.347.1">
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.348.1">We will now add some accessibility to the list itself. </span><span class="koboSpan" id="kobo.348.2">Update the file </span><code class="inlineCode"><span class="koboSpan" id="kobo.349.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.350.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.351.1">import</span></span><span class="koboSpan" id="kobo.352.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.353.1">Component</span></span><span class="koboSpan" id="kobo.354.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.355.1">HostBinding</span></strong></span><span class="koboSpan" id="kobo.356.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.357.1">Input</span></span><span class="koboSpan" id="kobo.358.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.359.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.360.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.361.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.362.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.363.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.364.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.365.1"> {
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.366.1">@HostBinding</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.367.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.368.1">'role'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.369.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.370.1">role = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.371.1">'list'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.372.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.373.1">@Input</span></span><span class="koboSpan" id="kobo.374.1">() </span><span class="hljs-attr"><span class="koboSpan" id="kobo.375.1">listItems</span></span><span class="koboSpan" id="kobo.376.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.377.1">AppUserCard</span></span><span class="koboSpan" id="kobo.378.1">[] = [];
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.379.1">We now need to implement the </span><code class="inlineCode"><span class="koboSpan" id="kobo.380.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.381.1"> class in our </span><code class="inlineCode"><span class="koboSpan" id="kobo.382.1">UsersListComponent</span></code><span class="koboSpan" id="kobo.383.1"> class. </span><span class="koboSpan" id="kobo.383.2">We’ll have to query our list items in the component to create an instance of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.384.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.385.1"> class. </span><span class="koboSpan" id="kobo.385.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.386.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.387.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.388.1">import</span></span><span class="koboSpan" id="kobo.389.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.390.1">Component</span></span><span class="koboSpan" id="kobo.391.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.392.1">HostBinding</span></span><span class="koboSpan" id="kobo.393.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.394.1">Input</span></span><span class="koboSpan" id="kobo.395.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.396.1">QueryList</span></span><span class="koboSpan" id="kobo.397.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.398.1">ViewChildren</span></span><span class="koboSpan" id="kobo.399.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.400.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.401.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.402.1">;
...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.403.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.404.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.405.1">FocusKeyManager</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.406.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.407.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.408.1">'@angular/cdk/a11y'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.409.1">;</span></strong></span><span class="koboSpan" id="kobo.410.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.411.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.412.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.413.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.414.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.415.1">@HostBinding</span></span><span class="koboSpan" id="kobo.416.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.417.1">'role'</span></span><span class="koboSpan" id="kobo.418.1">)
  role = </span><span class="hljs-string"><span class="koboSpan" id="kobo.419.1">'list'</span></span><span class="koboSpan" id="kobo.420.1">;
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.421.1">@Input</span></span><span class="koboSpan" id="kobo.422.1">() </span><span class="hljs-attr"><span class="koboSpan" id="kobo.423.1">listItems</span></span><span class="koboSpan" id="kobo.424.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.425.1">AppUserCard</span></span><span class="koboSpan" id="kobo.426.1">[] = [];
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.427.1">@ViewChildren</span></span><span class="koboSpan" id="kobo.428.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.429.1">UsersListItemComponent</span></span><span class="koboSpan" id="kobo.430.1">)
  listItemsElements!: </span><span class="hljs-title"><span class="koboSpan" id="kobo.431.1">QueryList</span></span><span class="koboSpan" id="kobo.432.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.433.1">UsersListItemComponent</span></span><span class="koboSpan" id="kobo.434.1">&gt;;
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.435.1">private</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.436.1"> listKeyManager!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.437.1">FocusKeyManager</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.438.1">&lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.439.1">UsersListItemComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.440.1">&gt;;</span></strong></span><span class="koboSpan" id="kobo.441.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.442.1">We’ll now initiate</span><a id="_idIndexMarker619"/><span class="koboSpan" id="kobo.443.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.444.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.445.1"> instance in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.446.1">AfterViewInit</span></code><span class="koboSpan" id="kobo.447.1"> hook</span><a id="_idIndexMarker620"/><span class="koboSpan" id="kobo.448.1"> in the same file. </span><span class="koboSpan" id="kobo.448.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.449.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.450.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.451.1">import</span></span><span class="koboSpan" id="kobo.452.1"> { </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.453.1">AfterViewInit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.454.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.455.1">Component</span></span><span class="koboSpan" id="kobo.456.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.457.1">HostBinding</span></span><span class="koboSpan" id="kobo.458.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.459.1">Input</span></span><span class="koboSpan" id="kobo.460.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.461.1">QueryList</span></span><span class="koboSpan" id="kobo.462.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.463.1">ViewChildren</span></span><span class="koboSpan" id="kobo.464.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.465.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.466.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.467.1">;
      ...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.468.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.469.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.470.1">UsersListComponent</span></span> <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.471.1">implements</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.472.1"> AfterViewInit </span></strong></span><span class="koboSpan" id="kobo.473.1">{
  ...
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.474.1">ngAfterViewInit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.475.1">() {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.476.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.477.1">.listKeyManager = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.478.1">new </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.479.1">FocusKeyManager</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.480.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.481.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.482.1">.listItemsElements</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.483.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.484.1">}</span></strong></span><span class="koboSpan" id="kobo.485.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.486.1">Finally, we need to listen to the keyboard events. </span><span class="koboSpan" id="kobo.486.2">For this, you could either use a </span><code class="inlineCode"><span class="koboSpan" id="kobo.487.1">keydown</span></code><span class="koboSpan" id="kobo.488.1"> event or a </span><code class="inlineCode"><span class="koboSpan" id="kobo.489.1">window:keydown</span></code><span class="koboSpan" id="kobo.490.1"> event. </span><span class="koboSpan" id="kobo.490.2">For simplicity of the recipe, we’ll go with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.491.1">window:keydown</span></code><span class="koboSpan" id="kobo.492.1"> event as pressing any key will bubble up the event to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.493.1">window</span></code><span class="koboSpan" id="kobo.494.1"> object. </span><span class="koboSpan" id="kobo.494.2">Update the file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.495.1">import</span></span><span class="koboSpan" id="kobo.496.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.497.1">AfterViewInit</span></span><span class="koboSpan" id="kobo.498.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.499.1">Component</span></span><span class="koboSpan" id="kobo.500.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.501.1">HostBinding</span></span><span class="koboSpan" id="kobo.502.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.503.1">HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.504.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.505.1">Input</span></span><span class="koboSpan" id="kobo.506.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.507.1">QueryList</span></span><span class="koboSpan" id="kobo.508.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.509.1">ViewChildren</span></span><span class="koboSpan" id="kobo.510.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.511.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.512.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.513.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.514.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.515.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.516.1">UsersListComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.517.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.518.1">AfterViewInit</span></span><span class="koboSpan" id="kobo.519.1"> {
  ...
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.520.1">@HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.521.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.522.1">'window:keydown'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.523.1">, [</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.524.1">'$event'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.525.1">])</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.526.1">onKeydown</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.527.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.528.1">event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.529.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.530.1">KeyboardEvent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.531.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.532.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.533.1">.listKeyManager.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.534.1">onKeydown</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.535.1">(event);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.536.1">}</span></strong></span><span class="koboSpan" id="kobo.537.1">
  ...
</span><span class="koboSpan" id="kobo.537.2">}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.538.1">If you go to the app, and press the down arrow key, you should see the first item being focused on the list and you can navigate to next and previous items and focusing them using the arrow keys.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.539.1">To add a bit more fun to the recipe, let’s also implement</span><a id="_idIndexMarker621"/><span class="koboSpan" id="kobo.540.1"> an event listener for when the user</span><a id="_idIndexMarker622"/><span class="koboSpan" id="kobo.541.1"> presses the </span><em class="keystroke"><span class="koboSpan" id="kobo.542.1">Enter</span></em><span class="koboSpan" id="kobo.543.1"> key on a particular item. </span><span class="koboSpan" id="kobo.543.2">We will just show an alert with the item’s details. </span><span class="koboSpan" id="kobo.543.3">Let’s use a </span><code class="inlineCode"><span class="koboSpan" id="kobo.544.1">HostListener</span></code><span class="koboSpan" id="kobo.545.1"> decorator in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.546.1">users-list-item.component.ts</span></code><span class="koboSpan" id="kobo.547.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.548.1">import</span></span><span class="koboSpan" id="kobo.549.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.550.1">Component</span></span><span class="koboSpan" id="kobo.551.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.552.1">ElementRef</span></span><span class="koboSpan" id="kobo.553.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.554.1">HostBinding</span></span><span class="koboSpan" id="kobo.555.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.556.1">HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.557.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.558.1">Input</span></span><span class="koboSpan" id="kobo.559.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.560.1">ViewEncapsulation</span></span><span class="koboSpan" id="kobo.561.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.562.1">inject</span></span><span class="koboSpan" id="kobo.563.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.564.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.565.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.566.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.567.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.568.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.569.1">UsersListItemComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.570.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.571.1">FocusableOption</span></span><span class="koboSpan" id="kobo.572.1"> {
  ...
  </span><span class="koboSpan" id="kobo.572.2">role = </span><span class="hljs-string"><span class="koboSpan" id="kobo.573.1">'list-item'</span></span><span class="koboSpan" id="kobo.574.1">;
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.575.1">@HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.576.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.577.1">'keyup'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.578.1">, [</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.579.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.580.1">$event'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.581.1">])</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.582.1">onEnter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.583.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.584.1">ev</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.585.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.586.1">KeyboardEvent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.587.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.588.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.589.1"> (ev.code === </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.590.1">'Enter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.591.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.592.1">alert</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.593.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.594.1">'Selected item is: '</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.595.1"> +</span></strong></span>
<span class="hljs-title"> </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.596.1">JSON</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.597.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.598.1">stringify</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.599.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.600.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.601.1">.item));</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.602.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.603.1">}</span></strong></span><span class="koboSpan" id="kobo.604.1">
  ...
</span><span class="koboSpan" id="kobo.604.2">}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.605.1">With the above change, you should be able to see the selected item as shown in the following figure:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.606.1"><img alt="" role="presentation" src="../Images/B18469_09_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.607.1">Figure 9.6: Selected item JSON being shown in an alert</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.608.1">Awesomesauce! </span><span class="koboSpan" id="kobo.608.2">You have just learned how to implement keyboard navigation using the Angular CDK. </span><span class="koboSpan" id="kobo.608.3">See the next section to understand how it works.</span></p>
<h2 class="heading-2" id="_idParaDest-301"><span class="koboSpan" id="kobo.609.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.610.1">The Angular CDK provides</span><a id="_idIndexMarker623"/><span class="koboSpan" id="kobo.611.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.612.1">ListKeyManager</span></code><span class="koboSpan" id="kobo.613.1"> class, which allows you to implement keyboard</span><a id="_idIndexMarker624"/><span class="koboSpan" id="kobo.614.1"> navigation. </span><span class="koboSpan" id="kobo.614.2">There are a bunch of techniques we can use with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.615.1">ListKeyManager</span></code><span class="koboSpan" id="kobo.616.1"> class, and for this recipe, we chose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.617.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.618.1"> class. </span><span class="koboSpan" id="kobo.618.2">To make it work for a list of items, we needed to do the following things:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.619.1">We made sure that we had a component for each item in the list.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.620.1">We used </span><code class="inlineCode"><span class="koboSpan" id="kobo.621.1">ViewChildren</span></code><span class="koboSpan" id="kobo.622.1"> with </span><code class="inlineCode"><span class="koboSpan" id="kobo.623.1">QueryList</span></code><span class="koboSpan" id="kobo.624.1"> in the list component to query all the list item components. </span><code class="inlineCode"><span class="koboSpan" id="kobo.625.1">ViewChildren</span></code><span class="koboSpan" id="kobo.626.1"> is a property decorator that retrieves all the </span><code class="inlineCode"><span class="koboSpan" id="kobo.627.1">UsersListItemComponent</span></code><span class="koboSpan" id="kobo.628.1"> elements from the DOM using </span><code class="inlineCode"><span class="koboSpan" id="kobo.629.1">QueryList</span></code><span class="koboSpan" id="kobo.630.1">, which gets updated automatically if an item is added, removed, or updated in the list.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.631.1">We then created an instance of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.632.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.633.1"> class in the list component so we can initiate the list item component elements.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.634.1">Added a keyboard listener to the list component and passed the event to the instance of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.635.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.636.1"> class.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.637.1">When we defined the </span><code class="inlineCode"><span class="koboSpan" id="kobo.638.1">listKeyManager</span></code><span class="koboSpan" id="kobo.639.1"> property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.640.1">UsersListComponent</span></code><span class="koboSpan" id="kobo.641.1"> class, we also defined its type as well by specifying it as </span><code class="inlineCode"><span class="koboSpan" id="kobo.642.1">FocusKeyManager&lt;UsersListItemComponent&gt;</span></code><span class="koboSpan" id="kobo.643.1">. </span><span class="koboSpan" id="kobo.643.2">This made it easier to understand that our </span><code class="inlineCode"><span class="koboSpan" id="kobo.644.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.645.1"> class is supposed to work with an array of </span><code class="inlineCode"><span class="koboSpan" id="kobo.646.1">UsersListItemComponent</span></code><span class="koboSpan" id="kobo.647.1"> elements. </span><span class="koboSpan" id="kobo.647.2">Therefore, in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.648.1">ngAfterViewInit</span></code><span class="koboSpan" id="kobo.649.1"> method, we specified </span><code class="inlineCode"><span class="koboSpan" id="kobo.650.1">this.listKeyManager = new FocusKeyManager(this.listItemsElements);</span></code><span class="koboSpan" id="kobo.651.1">, which provided a queried list of </span><code class="inlineCode"><span class="koboSpan" id="kobo.652.1">UsersListItemComponent</span></code><span class="koboSpan" id="kobo.653.1"> elements.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.654.1">Finally, when we listened to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.655.1">window:keydown</span></code><span class="koboSpan" id="kobo.656.1"> event, we took the </span><code class="inlineCode"><span class="koboSpan" id="kobo.657.1">keydown</span></code><span class="koboSpan" id="kobo.658.1"> event received in the handler and provided it to the instance of our </span><code class="inlineCode"><span class="koboSpan" id="kobo.659.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.660.1"> class as </span><code class="inlineCode"><span class="koboSpan" id="kobo.661.1">this.listKeyManager.onKeydown(event);</span></code><span class="koboSpan" id="kobo.662.1">. </span><span class="koboSpan" id="kobo.662.2">This told our </span><code class="inlineCode"><span class="koboSpan" id="kobo.663.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.664.1"> instance which key was pressed and what it must do.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.665.1">Notice that our </span><code class="inlineCode"><span class="koboSpan" id="kobo.666.1">UsersListItemComponent</span></code><span class="koboSpan" id="kobo.667.1"> class implements the </span><code class="inlineCode"><span class="koboSpan" id="kobo.668.1">FocusableOption</span></code><span class="koboSpan" id="kobo.669.1"> interface, and it also has the </span><code class="inlineCode"><span class="koboSpan" id="kobo.670.1">focus</span></code><span class="koboSpan" id="kobo.671.1"> method, which the </span><code class="inlineCode"><span class="koboSpan" id="kobo.672.1">FocusKeyManager</span></code><span class="koboSpan" id="kobo.673.1"> class uses behind the scenes when we press the keyboard arrow-down or arrow-up keys.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.674.1">Finally, we also used two properties with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.675.1">HostBinding</span></code><span class="koboSpan" id="kobo.676.1"> decorator. </span><span class="koboSpan" id="kobo.676.2">Let’s analyze them one by one:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.677.1">@HostBinding</span></span><span class="koboSpan" id="kobo.678.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.679.1">'tabIndex'</span></span><span class="koboSpan" id="kobo.680.1">) and tabIndex = -</span><span class="hljs-number"><span class="koboSpan" id="kobo.681.1">1</span></span><span class="koboSpan" id="kobo.682.1">;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.683.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.684.1">HostBinding</span></code><span class="koboSpan" id="kobo.685.1"> decorator is used here to bind a class property (</span><code class="inlineCode"><span class="koboSpan" id="kobo.686.1">tabIndex</span></code><span class="koboSpan" id="kobo.687.1">) to a host element’s attribute </span><code class="inlineCode"><span class="koboSpan" id="kobo.688.1">(tabIndex).</span></code><span class="koboSpan" id="kobo.689.1"> This effectively sets the </span><code class="inlineCode"><span class="koboSpan" id="kobo.690.1">tabIndex</span></code><span class="koboSpan" id="kobo.691.1"> of the component’s host element to </span><code class="inlineCode"><span class="koboSpan" id="kobo.692.1">-1</span></code><span class="koboSpan" id="kobo.693.1">, making it programmatically focusable but not reachable via sequential keyboard navigation.</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.694.1">@HostBinding</span></span><span class="koboSpan" id="kobo.695.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.696.1">'role'</span></span><span class="koboSpan" id="kobo.697.1">) and role = </span><span class="hljs-string"><span class="koboSpan" id="kobo.698.1">'list-item'</span></span><span class="koboSpan" id="kobo.699.1">;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.700.1">Similarly, the above binds the role property of the class to the role attribute of the component’s host element. </span><span class="koboSpan" id="kobo.700.2">It assigns the ARIA role list item to the host element, providing a hint to assistive technologies</span><a id="_idIndexMarker625"/><span class="koboSpan" id="kobo.701.1"> about how they should interpret</span><a id="_idIndexMarker626"/><span class="koboSpan" id="kobo.702.1"> this element.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.703.1">Now that you know how the recipe works, see the next section for some relevant links.</span></p>
<h2 class="heading-2" id="_idParaDest-302"><span class="koboSpan" id="kobo.704.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.705.1">Angular CDK accessibility</span><a id="_idIndexMarker627"/><span class="koboSpan" id="kobo.706.1"> documentation: </span><a href="https://material.angular.io/cdk/a11y/overview"><span class="url"><span class="koboSpan" id="kobo.707.1">https://material.angular.io/cdk/a11y/overview</span></span></a></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.708.1">ViewChildren</span></code><span class="koboSpan" id="kobo.709.1"> official</span><a id="_idIndexMarker628"/><span class="koboSpan" id="kobo.710.1"> documentation: </span><a href="https://angular.io/api/core/ViewChildren "><span class="url"><span class="koboSpan" id="kobo.711.1">https://angular.io/api/core/ViewChildren</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-303"><span class="koboSpan" id="kobo.712.1">Pointy little popovers with the Overlay API</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.713.1">This is one of the advanced recipes</span><a id="_idIndexMarker629"/><span class="koboSpan" id="kobo.714.1"> in this book, especially for those of you who</span><a id="_idIndexMarker630"/><span class="koboSpan" id="kobo.715.1"> have already been working with Angular for a while. </span><span class="koboSpan" id="kobo.715.2">In this recipe, we’ll not only create some </span><strong class="keyWord"><span class="koboSpan" id="kobo.716.1">popovers</span></strong><span class="koboSpan" id="kobo.717.1"> using the </span><strong class="keyWord"><span class="koboSpan" id="kobo.718.1">CDK Overlay API</span></strong><span class="koboSpan" id="kobo.719.1">, but we’ll also make them pointy, just like tooltips, and that’s where the fun lies.</span></p>
<h2 class="heading-2" id="_idParaDest-304"><span class="koboSpan" id="kobo.720.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.721.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.722.1">start/apps/chapter09/ng-cdk-popover</span></code><span class="koboSpan" id="kobo.723.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.724.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.725.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.726.1">npm run serve ng-cdk-popover
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.727.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.728.1"><img alt="" role="presentation" src="../Images/B18469_09_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.729.1">Figure 9.7: The ng-cdk-popover app running on http://localhost:4200</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.730.1">Now that we have the app running locally, let’s see the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-305"><span class="koboSpan" id="kobo.731.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.732.1">Our app has a list of users</span><a id="_idIndexMarker631"/><span class="koboSpan" id="kobo.733.1"> that we can scroll through on the page. </span><span class="koboSpan" id="kobo.733.2">We’ll add a popover</span><a id="_idIndexMarker632"/><span class="koboSpan" id="kobo.734.1"> menu to each item so that a drop-down menu is shown with some actions. </span><span class="koboSpan" id="kobo.734.2">We already have the </span><code class="inlineCode"><span class="koboSpan" id="kobo.735.1">@angular/cdk</span></code><span class="koboSpan" id="kobo.736.1"> package installed, so we don’t need to worry about that. </span><span class="koboSpan" id="kobo.736.2">Let’s start with the recipe, as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.737.1">We’ll first add the Overlay’s default styles so that when the overlay is displayed, it is positioned correctly. </span><span class="koboSpan" id="kobo.737.2">Open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.738.1">src/styles.scss</span></code><span class="koboSpan" id="kobo.739.1"> file and update it as per the following snippet:
    </span><p class="normal"><a href="https://ng-cookbook.com/s/cdk-pane-styles "><span class="url"><span class="koboSpan" id="kobo.740.1">https://ng-cookbook.com/s/cdk-pane-styles</span></span></a></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.741.1">Now, we’ll create variables to hold the overlay origin (for the origin of the positions of the opened overlay) and the actual relative position’s settings. </span><span class="koboSpan" id="kobo.741.2">Open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.742.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.743.1"> file and update it, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.744.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.745.1">import</span></span><span class="koboSpan" id="kobo.746.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.747.1">CdkOverlayOrigin</span></span><span class="koboSpan" id="kobo.748.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.749.1">ConnectedPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.750.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.751.1">OverlayModule</span></span><span class="koboSpan" id="kobo.752.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.753.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.754.1">'@angular/cdk/overlay'</span></span><span class="koboSpan" id="kobo.755.1">;
...
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.756.1">@Component</span></span><span class="koboSpan" id="kobo.757.1">({
  ...,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.758.1">imports</span></span><span class="koboSpan" id="kobo.759.1">: [..., </span><span class="hljs-title"><span class="koboSpan" id="kobo.760.1">OverlayModule</span></span><span class="koboSpan" id="kobo.761.1">],
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.762.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.763.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.764.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.765.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.766.1">@Input</span></span><span class="koboSpan" id="kobo.767.1">() </span><span class="hljs-attr"><span class="koboSpan" id="kobo.768.1">listItems</span></span><span class="koboSpan" id="kobo.769.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.770.1">AppUserCard</span></span><span class="koboSpan" id="kobo.771.1">[] = [];
  popoverMenuOrigin!: </span><span class="hljs-title"><span class="koboSpan" id="kobo.772.1">CdkOverlayOrigin</span></span><span class="koboSpan" id="kobo.773.1"> | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.774.1">null</span></span><span class="koboSpan" id="kobo.775.1">;
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.776.1">menuPositions</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.777.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.778.1">ConnectedPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.779.1">[] = [</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.780.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.781.1">offsetY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.782.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.783.1">4</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.784.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.785.1">originX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.786.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.787.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.788.1">end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.789.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.790.1">originY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.791.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.792.1">'bottom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.793.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.794.1">overlayX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.795.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.796.1">'end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.797.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.798.1">overlayY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.799.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.800.1">'top'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.801.1"> },</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.802.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.803.1">offsetY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.804.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.805.1">-4</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.806.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.807.1">originX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.808.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.809.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.810.1">end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.811.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.812.1">originY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.813.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.814.1">'top'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.815.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.816.1">overlayX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.817.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.818.1">'end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.819.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.820.1">overlayY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.821.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.822.1">'bottom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.823.1"> },</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.824.1">];</span></strong></span><span class="koboSpan" id="kobo.825.1">
     }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.826.1">Now, open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.827.1">users-list.component.html</span></code><span class="koboSpan" id="kobo.828.1"> file and add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.829.1">cdkOverlayOrigin</span></code><span class="koboSpan" id="kobo.830.1"> directive to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.831.1">&lt;app-users-list-item&gt;</span></code><span class="koboSpan" id="kobo.832.1"> selector so that we can have each list item as an origin for the pop-up menu, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.833.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.834.1">h4</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.835.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.836.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.837.1">"heading"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.838.1">&gt;</span></span><span class="koboSpan" id="kobo.839.1">Our trusted customers</span><span class="hljs-tag"><span class="koboSpan" id="kobo.840.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.841.1">h4</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.842.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.843.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.844.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.845.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.846.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.847.1">cdk-virtual-scroll-viewport</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.848.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.849.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.850.1">"list list-group p-2"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.851.1">    [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.852.1">itemSize</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.853.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.854.1">"120"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.855.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.856.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.857.1">app-users-list-item</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.858.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.859.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.860.1">"list__item"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.861.1">cdkOverlayOrigin</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.862.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.863.1">menuTrigger</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.864.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.865.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.866.1">cdkOverlayOrigin"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.867.1">      *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.868.1">cdkVirtualFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.869.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.870.1">"let item of listItems"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.871.1">      [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.872.1">item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.873.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.874.1">"item"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.875.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.876.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.877.1">app-users-list-item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.878.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.879.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.880.1">cdk-virtual-scroll-viewport</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.881.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.882.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.883.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.884.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.885.1">We need to somehow</span><a id="_idIndexMarker633"/><span class="koboSpan" id="kobo.886.1"> pass the </span><code class="inlineCode"><span class="koboSpan" id="kobo.887.1">#menuTrigger</span></code><span class="koboSpan" id="kobo.888.1"> variable from the template</span><a id="_idIndexMarker634"/><span class="koboSpan" id="kobo.889.1"> to assign its value to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.890.1">popoverMenuOrigin</span></code><span class="koboSpan" id="kobo.891.1"> property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.892.1">UsersListComponent</span></code><span class="koboSpan" id="kobo.893.1"> class. </span><span class="koboSpan" id="kobo.893.2">To do so, create a method named </span><code class="inlineCode"><span class="koboSpan" id="kobo.894.1">openMenu</span></code><span class="koboSpan" id="kobo.895.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.896.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.897.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.898.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.899.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.900.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.901.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.902.1"> {
  ...
   </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.903.1">openMenu</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.904.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.905.1">$event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.906.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.907.1">Event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.908.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.909.1">itemTrigger</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.910.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.911.1">CdkOverlayOrigin</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.912.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.913.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.914.1"> ($event) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.915.1">$event.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.916.1">stopImmediatePropagation</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.917.1">();</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.918.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.919.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.920.1">.popoverMenuOrigin = itemTrigger;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.921.1">}</span></strong></span><span class="koboSpan" id="kobo.922.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.923.1">We also need a property to show/hide the popover menu. </span><span class="koboSpan" id="kobo.923.2">Let’s create it and set it to </span><code class="inlineCode"><span class="koboSpan" id="kobo.924.1">true</span></code><span class="koboSpan" id="kobo.925.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.926.1">openMenu</span></code><span class="koboSpan" id="kobo.927.1"> method as well. </span><span class="koboSpan" id="kobo.927.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.928.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.929.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.930.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.931.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.932.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.933.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.934.1">{
  ...
  </span><span class="koboSpan" id="kobo.934.2">menuShown = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.935.1">false</span></span><span class="koboSpan" id="kobo.936.1">;
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.937.1">openMenu</span></span><span class="koboSpan" id="kobo.938.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.939.1">$event</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.940.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.941.1">Event</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.942.1">, </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.943.1">itemTrigger</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.944.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.945.1">CdkOverlayOrigin</span></span><span class="koboSpan" id="kobo.946.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.947.1">if</span></span><span class="koboSpan" id="kobo.948.1"> ($event) {
      $event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.949.1">stopImmediatePropagation</span></span><span class="koboSpan" id="kobo.950.1">();
    }
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.951.1">this</span></span><span class="koboSpan" id="kobo.952.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.953.1">popoverMenuOrigin</span></span><span class="koboSpan" id="kobo.954.1"> = itemTrigger;
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.955.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.956.1">.menuShown</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.957.1"> = </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.958.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.959.1">;</span></strong></span><span class="koboSpan" id="kobo.960.1">
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.961.1">closeMenu</span></span><span class="koboSpan" id="kobo.962.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.963.1">this</span></span><span class="koboSpan" id="kobo.964.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.965.1">popoverMenuOrigin</span></span><span class="koboSpan" id="kobo.966.1"> = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.967.1">null</span></span><span class="koboSpan" id="kobo.968.1">;
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.969.1">this</span></span><span class="koboSpan" id="kobo.970.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.971.1">menuShown</span></span><span class="koboSpan" id="kobo.972.1"> = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.973.1">false</span></span><span class="koboSpan" id="kobo.974.1">;
  }
  ...
</span><span class="koboSpan" id="kobo.974.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.975.1">We’ll now create</span><a id="_idIndexMarker635"/><span class="koboSpan" id="kobo.976.1"> an actual overlay. </span><span class="koboSpan" id="kobo.976.2">To do so, we’ll create</span><a id="_idIndexMarker636"/><span class="koboSpan" id="kobo.977.1"> an </span><code class="inlineCode"><span class="koboSpan" id="kobo.978.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.979.1"> element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.980.1">cdkConnectedOverlay</span></code><span class="koboSpan" id="kobo.981.1"> directive. </span><span class="koboSpan" id="kobo.981.2">At the bottom of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.982.1">users-list.component.html</span></code><span class="koboSpan" id="kobo.983.1"> file, add the code </span><code class="inlineCode"><span class="koboSpan" id="kobo.984.1">(&lt;ng-template&gt;</span></code> <code class="inlineCode"><span class="koboSpan" id="kobo.985.1">element)</span></code><span class="koboSpan" id="kobo.986.1"> from the following link:
    </span><p class="normal"><a href="https://ng-cookbook.com/s/ng-popover-overlay "><span class="url"><span class="koboSpan" id="kobo.987.1">https://ng-cookbook.com/s/ng-popover-overlay</span></span></a></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.988.1">We need to pass the </span><code class="inlineCode"><span class="koboSpan" id="kobo.989.1">#menuTrigger</span></code><span class="koboSpan" id="kobo.990.1"> variable that we have on each list item to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.991.1">openMenu</span></code><span class="koboSpan" id="kobo.992.1"> method on a click of the list item. </span><span class="koboSpan" id="kobo.992.2">Update the file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.993.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.994.1">h4</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.995.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.996.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.997.1">"heading"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.998.1">&gt;</span></span><span class="koboSpan" id="kobo.999.1">Our trusted customers</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1000.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1001.1">h4</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1002.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1003.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1004.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1005.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1006.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1007.1">cdk-virtual-scroll-viewport</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1008.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1009.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1010.1">"list list-group p-2"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1011.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1012.1">itemSize</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1013.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1014.1">"120"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1015.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1016.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1017.1">app-users-list-item</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1018.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1019.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1020.1">"list__item"</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1021.1">cdkOverlayOrigin</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1022.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1023.1">menuTrigger</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1024.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1025.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1026.1">cdkOverlayOrigin"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1027.1">      *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1028.1">cdkVirtualFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1029.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1030.1">"let item of listItems"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1031.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1032.1">click</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1033.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1034.1">"openMenu($event, menuTrigger)"</span></strong></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1035.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1036.1">class.list__item--active</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1037.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1038.1">"popoverMenuOrigin ===</span></strong></span><span class="hljs-string"> </span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1039.1">menuTrigger"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1040.1">      [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1041.1">item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1042.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1043.1">"item"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1044.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1045.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1046.1">app-users-list-item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1047.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1048.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1049.1">cdk-virtual-scroll-viewport</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1050.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1051.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1052.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1053.1">&gt;</span></span><span class="koboSpan" id="kobo.1054.1">
...
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1055.1">If you refresh the app now and click on any of the list items, you should see a drop-down menu, as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1056.1"><img alt="" role="presentation" src="../Images/B18469_09_08.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1057.1">Figure 9.8: Working drop-down menu for each list item</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.1058.1">We now have to implement</span><a id="_idIndexMarker637"/><span class="koboSpan" id="kobo.1059.1"> the part where we show a pointy little</span><a id="_idIndexMarker638"/><span class="koboSpan" id="kobo.1060.1"> arrow with the drop-down menu so that we can correlate the drop-down menu with the list item. </span><span class="koboSpan" id="kobo.1060.2">First, add the following styles to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1061.1">menu-popover</span></code><span class="koboSpan" id="kobo.1062.1"> class in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1063.1">src/styles.scss</span></code><span class="koboSpan" id="kobo.1064.1"> file:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1065.1">...
</span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.1066.1">.menu-popover</span></span><span class="koboSpan" id="kobo.1067.1"> {
  ...
  </span><span class="koboSpan" id="kobo.1067.2">&amp;</span><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.1068.1">::before</span></span><span class="koboSpan" id="kobo.1069.1"> {
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1070.1">top</span></span><span class="koboSpan" id="kobo.1071.1">: -</span><span class="hljs-number"><span class="koboSpan" id="kobo.1072.1">10px</span></span><span class="koboSpan" id="kobo.1073.1">;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1074.1">border-width</span></span><span class="koboSpan" id="kobo.1075.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1076.1">0px</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.1077.1">10px</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.1078.1">10px</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.1079.1">10px</span></span><span class="koboSpan" id="kobo.1080.1">;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1081.1">border-color</span></span><span class="koboSpan" id="kobo.1082.1">: transparent transparent white
</span><span class="hljs-attribute"> </span><span class="koboSpan" id="kobo.1083.1">    transparent;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1084.1">position</span></span><span class="koboSpan" id="kobo.1085.1">: absolute;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1086.1">content</span></span><span class="koboSpan" id="kobo.1087.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1088.1">''</span></span><span class="koboSpan" id="kobo.1089.1">;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1090.1">right</span></span><span class="koboSpan" id="kobo.1091.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1092.1">5%</span></span><span class="koboSpan" id="kobo.1093.1">;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1094.1">border-style</span></span><span class="koboSpan" id="kobo.1095.1">: solid;
  }
  &amp;</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1096.1">--up</span></span><span class="koboSpan" id="kobo.1097.1"> {
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1098.1">transform</span></span><span class="koboSpan" id="kobo.1099.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1100.1">translateY</span></span><span class="koboSpan" id="kobo.1101.1">(-</span><span class="hljs-number"><span class="koboSpan" id="kobo.1102.1">20px</span></span><span class="koboSpan" id="kobo.1103.1">);
    &amp;</span><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.1104.1">::before</span></span><span class="koboSpan" id="kobo.1105.1"> {
      </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1106.1">top</span></span><span class="koboSpan" id="kobo.1107.1">: unset </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1108.1">!important</span></span><span class="koboSpan" id="kobo.1109.1">;
      </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1110.1">transform</span></span><span class="koboSpan" id="kobo.1111.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1112.1">rotate</span></span><span class="koboSpan" id="kobo.1113.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1114.1">180deg</span></span><span class="koboSpan" id="kobo.1115.1">);
      </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1116.1">bottom</span></span><span class="koboSpan" id="kobo.1117.1">: -</span><span class="hljs-number"><span class="koboSpan" id="kobo.1118.1">10px</span></span><span class="koboSpan" id="kobo.1119.1">;
    }
  }
  &amp;__list {...}
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1120.1">You should now be able</span><a id="_idIndexMarker639"/><span class="koboSpan" id="kobo.1121.1"> to see a pointy arrow on the top</span><a id="_idIndexMarker640"/><span class="koboSpan" id="kobo.1122.1"> right of the drop-down menu, but if you try clicking the last item on the screen, you’ll see that the drop-down menu opens upward but still shows the pointer at the top, as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1123.1"><img alt="" role="presentation" src="../Images/B18469_09_09.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1124.1">Figure 9.9: Drop-down arrow pointing at the wrong list item</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="9"><span class="koboSpan" id="kobo.1125.1">To point to the actual origin of the popover/drop-down menu, we need to implement a custom directive that applies a custom class to the popover. </span><span class="koboSpan" id="kobo.1125.2">Let’s start by creating a directive, as follows:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1126.1">cd start &amp;&amp; nx g directive positional-popover-class --directory apps/chapter09/ng-cdk-popover/src/app/directives
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1127.1">Update the code in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1128.1">popover-positional-class.directive.ts</span></code><span class="koboSpan" id="kobo.1129.1"> generated file as per the following snippet:
    </span><p class="normal"><a href="https://ng-cookbook.com/s/popover-pc-directive"><span class="url"><span class="koboSpan" id="kobo.1130.1">https://ng-cookbook.com/s/popover-pc-directive</span></span></a></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="11"><span class="koboSpan" id="kobo.1131.1">Let’s import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1132.1">PopoverPositionalClassDirective</span></code><span class="koboSpan" id="kobo.1133.1"> class in the file </span><code class="inlineCode"><span class="koboSpan" id="kobo.1134.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.1135.1"> so we can use it in the template later. </span><span class="koboSpan" id="kobo.1135.2">Update the code as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1136.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1137.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1138.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1139.1">PopoverPositionalClassDirective</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1140.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1141.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1142.1">'../../directives/popover-positional-class.directive'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1143.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1144.1">@Component</span></span><span class="koboSpan" id="kobo.1145.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1146.1">imports</span></span><span class="koboSpan" id="kobo.1147.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1148.1">CommonModule</span></span><span class="koboSpan" id="kobo.1149.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1150.1">ScrollingModule</span></span><span class="koboSpan" id="kobo.1151.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1152.1">UsersListItemComponent</span></span><span class="koboSpan" id="kobo.1153.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1154.1">OverlayModule</span></span><span class="koboSpan" id="kobo.1155.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1156.1">PopoverPositionalClassDirective</span></strong></span><span class="koboSpan" id="kobo.1157.1">]
})
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1158.1">Now, open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1159.1">users-list.component.html</span></code><span class="koboSpan" id="kobo.1160.1"> file to apply</span><a id="_idIndexMarker641"/><span class="koboSpan" id="kobo.1161.1"> our directive to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1162.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.1163.1"> element. </span><span class="koboSpan" id="kobo.1163.2">Update</span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.1164.1"> the file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1165.1">...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1166.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1167.1">ng-template</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1168.1">cdkConnectedOverlay</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1169.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1170.1">  (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1171.1">backdropClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1172.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1173.1">"closeMenu()"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1174.1">  [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1175.1">cdkConnectedOverlayPositions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1176.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1177.1">"menuPositions"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1178.1">appPopoverPositionalClass</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1179.1">targetSelector</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1180.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1181.1">".menu-popover"</span></strong></span>
<span class="hljs-attr"> </span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1182.1">inverseClass</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1183.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1184.1">"menu-popover--up"</span></strong></span><span class="hljs-tag"> </span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1185.1">  [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1186.1">originY</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1187.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1188.1">"popoverMenuPosition.originY"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1189.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1190.1">positionChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1191.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1192.1">"popoverPositionChanged($event)"</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1193.1">cdkConnectedOverlayPanelClass</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1194.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1195.1">"menu-popover"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1196.1">  &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1197.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1198.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1199.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1200.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1201.1">"menu-popover__list"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1202.1">&gt;</span></span><span class="koboSpan" id="kobo.1203.1">
    ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1204.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1205.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1206.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1207.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1208.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1209.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1210.1">We now need to create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1211.1">popoverMenuPosition</span></code><span class="koboSpan" id="kobo.1212.1"> property and a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1213.1">popoverPositionChanged</span></code><span class="koboSpan" id="kobo.1214.1"> method in our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1215.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.1216.1"> file to track which list item is for opening the menu (for positioning) and which is for when the position of the menu changes due to resizing of the window or a change in content. </span><span class="koboSpan" id="kobo.1216.2">Update the file further as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1217.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1218.1">import</span></span><span class="koboSpan" id="kobo.1219.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1220.1">ChangeDetectorRef</span></span><span class="koboSpan" id="kobo.1221.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1222.1">Component</span></span><span class="koboSpan" id="kobo.1223.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1224.1">Input</span></span><span class="koboSpan" id="kobo.1225.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1226.1">inject</span></span><span class="koboSpan" id="kobo.1227.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1228.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1229.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1230.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1231.1">import</span></span><span class="koboSpan" id="kobo.1232.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1233.1">CdkOverlayOrigin</span></span><span class="koboSpan" id="kobo.1234.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1235.1">ConnectedOverlayPositionChange</span></span><span class="koboSpan" id="kobo.1236.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1237.1">ConnectedPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1238.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1239.1">OverlayModule</span></span><span class="koboSpan" id="kobo.1240.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1241.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1242.1">'@angular/cdk/overlay'</span></span><span class="koboSpan" id="kobo.1243.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1244.1">@Component</span></span><span class="koboSpan" id="kobo.1245.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1246.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1247.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1248.1">UsersListComponent</span></span><span class="koboSpan" id="kobo.1249.1"> {
  ...
   </span><span class="koboSpan" id="kobo.1249.2">cdRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1250.1">inject</span></span><span class="koboSpan" id="kobo.1251.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1252.1">ChangeDetectorRef</span></span><span class="koboSpan" id="kobo.1253.1">); 
 
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1254.1">popoverMenuPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1255.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1256.1">Partial</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1257.1">&lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1258.1">ConnectedPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1259.1">&gt; = {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1260.1">originY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1261.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1262.1">undefined</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1263.1">};</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1264.1">popoverPositionChanged</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1265.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1266.1">$event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1267.1">:</span></strong></span>
<span class="hljs-title"> </span><span class="hljs-params"> </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1268.1">ConnectedOverlayPositionChange</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1269.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1270.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1271.1"> (</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1272.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1273.1">.popoverMenuPosition.originY !==</span></strong></span>
<span class="hljs-keyword"> </span><span class="koboSpan" id="kobo.1274.1"> $event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1275.1">connectionPair</span></span><span class="koboSpan" id="kobo.1276.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1277.1">originY</span></span><span class="koboSpan" id="kobo.1278.1">) {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1279.1">this</span></span><span class="koboSpan" id="kobo.1280.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1281.1">popoverMenuPosition</span></span><span class="koboSpan" id="kobo.1282.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1283.1">originY</span></span><span class="koboSpan" id="kobo.1284.1"> = $event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1285.1">connectionPair</span></span><span class="koboSpan" id="kobo.1286.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1287.1">originY</span></span><span class="koboSpan" id="kobo.1288.1">;
      }
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1289.1">this</span></span><span class="koboSpan" id="kobo.1290.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1291.1">cdRef</span></span><span class="koboSpan" id="kobo.1292.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1293.1">detectChanges</span></span><span class="koboSpan" id="kobo.1294.1">();
  }
  ...
</span><span class="koboSpan" id="kobo.1294.2">}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1295.1">And voilà! </span><span class="koboSpan" id="kobo.1295.2">If you now refresh</span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.1296.1"> the page and tap each of the list </span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.1297.1">items, you’ll see the arrows point in the correct direction. </span><span class="koboSpan" id="kobo.1297.2">See the following screenshot to view the popover arrow pointing downward for the last item, due to the popover being shown above the item:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1298.1"><img alt="" role="presentation" src="../Images/B18469_09_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1299.1">Figure 9.10: Drop-down arrow pointing at the correct list item (pointing downward)</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1300.1">Great! </span><span class="koboSpan" id="kobo.1300.2">You now know how to use the Angular CDK to work with overlays to create custom pop-up/drop-down menus. </span><span class="koboSpan" id="kobo.1300.3">Moreover, you now know how to quickly implement the pointy arrows on the menu using a custom</span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.1301.1"> directive. </span><span class="koboSpan" id="kobo.1301.2">See the next section</span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.1302.1"> to understand how it all works.</span></p>
<h2 class="heading-2" id="_idParaDest-306"><span class="koboSpan" id="kobo.1303.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1304.1">Implementing an overlay using the Angular CDK Overlay API includes a couple of pieces to work with. </span><span class="koboSpan" id="kobo.1304.2">We first have to import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1305.1">OverlayModule</span></code><span class="koboSpan" id="kobo.1306.1"> class in our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1307.1">UserListComponent</span></code><span class="koboSpan" id="kobo.1308.1"> class’s imports. </span><span class="koboSpan" id="kobo.1308.2">We do this because the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1309.1">OverlayModule</span></code><span class="koboSpan" id="kobo.1310.1"> contains the directives we are using in the application: for example, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1311.1">CdkConnectedOverlay</span></code><span class="koboSpan" id="kobo.1312.1"> directive and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1313.1">CdkOverlayOrigin</span></code><span class="koboSpan" id="kobo.1314.1"> directive. </span><span class="koboSpan" id="kobo.1314.2">After importing the module for creating an overlay, we need to have both an overlay (the menu in our case) and an overlay origin (which opens/shows the menu). </span><span class="koboSpan" id="kobo.1314.3">In this recipe, since we’re using the overlay to create a popover menu for each list item, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1315.1">cdkOverlayOrigin</span></code><span class="koboSpan" id="kobo.1316.1"> directive on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1317.1">&lt;app-users-list-item&gt;</span></code><span class="koboSpan" id="kobo.1318.1"> elements. </span><span class="koboSpan" id="kobo.1318.2">Notice that the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1319.1">&lt;app-users-list-item&gt;</span></code><span class="koboSpan" id="kobo.1320.1"> elements are being rendered through the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1321.1">*ngFor</span></code><span class="koboSpan" id="kobo.1322.1"> directive.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1323.1">Therefore, in order to know which item was clicked or precisely which item we need to show the popover for, we create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1324.1">#menuTrigger</span></code><span class="koboSpan" id="kobo.1325.1"> template variable on each list item element, and you’ll notice that we also bind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1326.1">(click)</span></code><span class="koboSpan" id="kobo.1327.1"> event on the list items to call the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1328.1">openMenu</span></code><span class="koboSpan" id="kobo.1329.1"> method, passing this </span><code class="inlineCode"><span class="koboSpan" id="kobo.1330.1">menuTrigger</span></code><span class="koboSpan" id="kobo.1331.1"> template variable into it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1332.1">Now, if you have noticed the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1333.1">openMenu</span></code><span class="koboSpan" id="kobo.1334.1"> method in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1335.1">users-list.component.ts</span></code><span class="koboSpan" id="kobo.1336.1"> file, it looks like this:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1337.1">openMenu</span></span><span class="koboSpan" id="kobo.1338.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1339.1">$event</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1340.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1341.1">Event</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1342.1">, </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1343.1">itemTrigger</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1344.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1345.1">CdkOverlayOrigin</span></span><span class="koboSpan" id="kobo.1346.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1347.1">if</span></span><span class="koboSpan" id="kobo.1348.1"> ($event) {
      $event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1349.1">stopImmediatePropagation</span></span><span class="koboSpan" id="kobo.1350.1">();
    }
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1351.1">this</span></span><span class="koboSpan" id="kobo.1352.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1353.1">popoverMenuTrigger</span></span><span class="koboSpan" id="kobo.1354.1"> = itemTrigger;
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1355.1">this</span></span><span class="koboSpan" id="kobo.1356.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1357.1">menuShown</span></span><span class="koboSpan" id="kobo.1358.1"> = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1359.1">true</span></span><span class="koboSpan" id="kobo.1360.1">;
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1361.1">Notice that we assign the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1362.1">itemTrigger</span></code><span class="koboSpan" id="kobo.1363.1"> property to our class’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.1364.1">popoverMenuOrigin</span></code><span class="koboSpan" id="kobo.1365.1"> property. </span><span class="koboSpan" id="kobo.1365.2">This is because this </span><code class="inlineCode"><span class="koboSpan" id="kobo.1366.1">popoverMenuOrigin</span></code><span class="koboSpan" id="kobo.1367.1"> property is being bound with the actual overlay in our template. </span><span class="koboSpan" id="kobo.1367.2">You can also see that we set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1368.1">menuShown</span></code><span class="koboSpan" id="kobo.1369.1"> property to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1370.1">true</span></code><span class="koboSpan" id="kobo.1371.1">, and this is because it will decide whether the overlay should be shown or hidden.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1372.1">Now, let’s see the code for the actual overlay, as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1373.1">&lt;ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1374.1">"popoverMenuOrigin!"</span></span><span class="koboSpan" id="kobo.1375.1">
  [cdkConnectedOverlayOpen]=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1376.1">"menuShown"</span></span><span class="koboSpan" id="kobo.1377.1"> [cdkConnectedOverlayHasBackdrop]=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1378.1">"true"</span></span><span class="koboSpan" id="kobo.1379.1">
  (backdropClick)=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1380.1">"closeMenu()"</span></span><span class="koboSpan" id="kobo.1381.1">
  [cdkConnectedOverlayPositions]=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1382.1">"menuPositions"</span></span><span class="koboSpan" id="kobo.1383.1">
  appPopoverPositionalClass targetSelector=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1384.1">".menu-popover"</span></span><span class="koboSpan" id="kobo.1385.1"> inverseClass=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1386.1">"menu-popover--up"</span></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1387.1">[originY]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1388.1">"popoverMenuPosition.originY"</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1389.1">(positionChange)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1390.1">"popoverPositionChanged($event)"</span></strong></span><span class="koboSpan" id="kobo.1391.1">
  cdkConnectedOverlayPanelClass=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1392.1">"menu-popover"</span></span><span class="koboSpan" id="kobo.1393.1">
  &gt;
  ...
</span><span class="koboSpan" id="kobo.1393.2">&lt;/ng-template&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1394.1">Let’s discuss each</span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.1395.1"> of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1396.1">cdkConnectedOverlay</span></code><span class="koboSpan" id="kobo.1397.1"> directive’s attributes, one</span><a id="_idIndexMarker648"/><span class="koboSpan" id="kobo.1398.1"> by one:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1399.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1400.1">cdkConnectedOverlay</span></code><span class="koboSpan" id="kobo.1401.1"> attribute: This is the actual overlay directive that makes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1402.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.1403.1"> element an Angular CDK overlay.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1404.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1405.1">[cdkConnectedOverlayOrigin]</span></code><span class="koboSpan" id="kobo.1406.1"> attribute: This tells the Overlay API what the origin of this overlay is. </span><span class="koboSpan" id="kobo.1406.2">This is to help the CDK decide where to position the overlay when opened.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1407.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1408.1">[cdkConnectedOverlayOpen]</span></code><span class="koboSpan" id="kobo.1409.1"> attribute: This decides whether the overlay should be shown or not.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1410.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1411.1">[cdkConnectedOverlayHasBackdrop]</span></code><span class="koboSpan" id="kobo.1412.1"> attribute: This decides whether the overlay should have a backdrop or not—that is, if it has a backdrop, the user shouldn’t be able to click anything else apart from the overlay when it is open.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1413.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1414.1">(backdropClick)</span></code><span class="koboSpan" id="kobo.1415.1"> attribute: This is the event handler for when we click the backdrop. </span><span class="koboSpan" id="kobo.1415.2">In this case, we’re setting the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1416.1">menuShown</span></code><span class="koboSpan" id="kobo.1417.1"> property to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1418.1">false</span></code><span class="koboSpan" id="kobo.1419.1">, which hides/closes the overlay.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1420.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1421.1">[cdkConnectedOverlayPositions]</span></code><span class="koboSpan" id="kobo.1422.1"> attribute: This provides the positioning configuration to the Overlay API. </span><span class="koboSpan" id="kobo.1422.2">It is an array of preferred positions that defines whether the overlay should be shown below the origin, on top of the origin, on the left, on the right, how far from the origin, and so on using properties such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1423.1">originX</span></code><span class="koboSpan" id="kobo.1424.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1425.1">originY</span></code><span class="koboSpan" id="kobo.1426.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1427.1">overlayX</span></code><span class="koboSpan" id="kobo.1428.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1429.1">overlayY</span></code><span class="koboSpan" id="kobo.1430.1">.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1431.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1432.1">[cdkConnectedOverlayPanelClass]</span></code><span class="koboSpan" id="kobo.1433.1"> attribute: A </span><strong class="keyWord"><span class="koboSpan" id="kobo.1434.1">CSS</span></strong><span class="koboSpan" id="kobo.1435.1"> class to be applied to the generated overlay. </span><span class="koboSpan" id="kobo.1435.2">This is used for styling.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.1436.1">With all of the attributes set correctly, we are able to see the overlay working when tapping the list items. </span><em class="italic"><span class="koboSpan" id="kobo.1437.1">“But what about the pointy arrows, Ahsan?”</span></em><span class="koboSpan" id="kobo.1438.1"> Well, hold on! </span><span class="koboSpan" id="kobo.1438.2">We’ll discuss them too.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1439.1">So, the Angular CDK Overlay</span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.1440.1"> API already has a lot of things covered, including</span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.1441.1"> where to position the overlay based on the available space, and since we want to show the pointy arrows, we’ll have to analyze whether the overlay is being shown above the item or below the item. </span><span class="koboSpan" id="kobo.1441.2">By default, we have the following styles set in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1442.1">src/styles.scss</span></code><span class="koboSpan" id="kobo.1443.1"> file to show the pointy arrow below the popover:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-selector-class"><span class="koboSpan" id="kobo.1444.1">.menu-popover</span></span><span class="koboSpan" id="kobo.1445.1"> {
  ...
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1446.1">&amp;</span></strong><strong class="hljs-selector-pseudo-slc"><span class="koboSpan" id="kobo.1447.1">::before</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1448.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1449.1">top</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1450.1">: -</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1451.1">10px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1452.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1453.1">border-width</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1454.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1455.1">0px</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1456.1">10px</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1457.1">10px</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1458.1">10px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1459.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1460.1">border-color</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1461.1">: transparent transparent white  transparent;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1462.1">position</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1463.1">: absolute;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1464.1">content</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1465.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1466.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1467.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1468.1">right</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1469.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1470.1">5%</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1471.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1472.1">border-style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1473.1">: solid;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1474.1">}</span></strong></span><span class="koboSpan" id="kobo.1475.1">
  &amp;</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1476.1">--up</span></span><span class="koboSpan" id="kobo.1477.1"> {...}
  &amp;__list {...}
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1478.1">And then, we have the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1479.1">--up</span></code><span class="koboSpan" id="kobo.1480.1"> modifier class, as follows, to show the overlay </span><em class="italic"><span class="koboSpan" id="kobo.1481.1">above</span></em><span class="koboSpan" id="kobo.1482.1"> the popover:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-selector-class"><span class="koboSpan" id="kobo.1483.1">.menu-popover</span></span><span class="koboSpan" id="kobo.1484.1"> {
  ...
  </span><span class="koboSpan" id="kobo.1484.2">&amp;</span><span class="hljs-selector-pseudo"><span class="koboSpan" id="kobo.1485.1">::before</span></span><span class="koboSpan" id="kobo.1486.1"> {...}
  &amp;</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1487.1">--up</span></span><span class="koboSpan" id="kobo.1488.1"> {
    </span><span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1489.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1490.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1491.1">translateY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1492.1">(-</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1493.1">20px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1494.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1495.1">&amp;</span></strong><strong class="hljs-selector-pseudo-slc"><span class="koboSpan" id="kobo.1496.1">::before</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1497.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1498.1">top</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1499.1">: unset </span></strong><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.1500.1">!important</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1501.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1502.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1503.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1504.1">rotate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1505.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1506.1">180deg</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1507.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.1508.1">bottom</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1509.1">: -</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1510.1">10px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1511.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1512.1">}</span></strong></span><span class="koboSpan" id="kobo.1513.1">
  }
  &amp;__list {...}
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1514.1">Notice in the preceding code snippet that we rotate the arrow to </span><strong class="keyWord"><span class="koboSpan" id="kobo.1515.1">180deg</span></strong><span class="koboSpan" id="kobo.1516.1"> to invert its pointer.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1517.1">Now, let’s talk about how and when this </span><code class="inlineCode"><span class="koboSpan" id="kobo.1518.1">--up</span></code><span class="koboSpan" id="kobo.1519.1"> modifier class is applied. </span><span class="koboSpan" id="kobo.1519.2">We have created a custom directive named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1520.1">appPopoverPositionalClass</span></code><span class="koboSpan" id="kobo.1521.1">. </span><span class="koboSpan" id="kobo.1521.2">This directive is also applied to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1522.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.1523.1"> element we have</span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.1524.1"> for the overlay—that is, this directive is applied with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1525.1">cdkConnectedOverlay</span></code><span class="koboSpan" id="kobo.1526.1"> directive</span><a id="_idIndexMarker652"/><span class="koboSpan" id="kobo.1527.1"> and expects the following input attributes:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1528.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1529.1">appPopoverPositionalClass</span></code><span class="koboSpan" id="kobo.1530.1"> attribute: The actual directive selector.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1531.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1532.1">targetSelector</span></code><span class="koboSpan" id="kobo.1533.1"> attribute: The query selector for the element that is generated by the Angular CDK Overlay API. </span><span class="koboSpan" id="kobo.1533.2">Ideally, this should be the same as what we use in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1534.1">cdkConnectedOverlayPanelClass</span></code><span class="koboSpan" id="kobo.1535.1">.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1536.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1537.1">inverseClass</span></code><span class="koboSpan" id="kobo.1538.1"> attribute: The class to be applied when the vertical position (</span><code class="inlineCode"><span class="koboSpan" id="kobo.1539.1">originY</span></code><span class="koboSpan" id="kobo.1540.1">) of the overlay is changed—that is, from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1541.1">"top"</span></code><span class="koboSpan" id="kobo.1542.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1543.1">"bottom"</span></code><span class="koboSpan" id="kobo.1544.1">, and vice versa.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1545.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1546.1">originY</span></code><span class="koboSpan" id="kobo.1547.1"> attribute: The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1548.1">originY</span></code><span class="koboSpan" id="kobo.1549.1"> position of the overlay at the moment. </span><span class="koboSpan" id="kobo.1549.2">The value is either </span><code class="inlineCode"><span class="koboSpan" id="kobo.1550.1">"top"</span></code><span class="koboSpan" id="kobo.1551.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1552.1">"bottom"</span></code><span class="koboSpan" id="kobo.1553.1">, based on the overlay position.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.1554.1">We have a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1555.1">(positionChange)</span></code><span class="koboSpan" id="kobo.1556.1"> listener on the CDK Overlay </span><code class="inlineCode"><span class="koboSpan" id="kobo.1557.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.1558.1"> element that triggers the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1559.1">popoverPositionChanged</span></code><span class="koboSpan" id="kobo.1560.1"> method as soon as the overlay position changes. </span><span class="koboSpan" id="kobo.1560.2">Notice that inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1561.1">popoverPositionChanged</span></code><span class="koboSpan" id="kobo.1562.1"> method, upon getting a new position, we update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1563.1">popover.originY</span></code><span class="koboSpan" id="kobo.1564.1"> property that is updating </span><code class="inlineCode"><span class="koboSpan" id="kobo.1565.1">menuPopoverOrigin.originY</span></code><span class="koboSpan" id="kobo.1566.1">, and then we’re also passing</span><code class="inlineCode"><span class="koboSpan" id="kobo.1567.1"> menuPopoverOrigin.originY </span></code><span class="koboSpan" id="kobo.1568.1">as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1569.1">[originY]</span></code><span class="koboSpan" id="kobo.1570.1"> attribute to our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1571.1">appPopoverPositionalClass</span></code><span class="koboSpan" id="kobo.1572.1"> directive. </span><span class="koboSpan" id="kobo.1572.2">Since we’re passing it to the directive, the directive knows if the overlay position is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1573.1">"top"</span></code><span class="koboSpan" id="kobo.1574.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1575.1">"bottom"</span></code><span class="koboSpan" id="kobo.1576.1"> at any particular time. </span><span class="koboSpan" id="kobo.1576.2">How? </span><span class="koboSpan" id="kobo.1576.3">Because we’re using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1577.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1578.1"> life cycle hook in the directive to listen to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1579.1">originY</span></code><span class="koboSpan" id="kobo.1580.1"> attribute/input, and as soon as we get a different value for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1581.1">originY</span></code><span class="koboSpan" id="kobo.1582.1">, we either add the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1583.1">inverseClass</span></code><span class="koboSpan" id="kobo.1584.1"> as a CSS class to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1585.1">Overlay</span></code><span class="koboSpan" id="kobo.1586.1"> element or remove it based on the value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1587.1">originY</span></code><span class="koboSpan" id="kobo.1588.1"> attribute. </span><span class="koboSpan" id="kobo.1588.2">Also, based on the applied CSS classes, the direction of the popover arrow</span><a id="_idIndexMarker653"/><span class="koboSpan" id="kobo.1589.1"> is decided for the</span><a id="_idIndexMarker654"/><span class="koboSpan" id="kobo.1590.1"> overlay.</span></p>
<h2 class="heading-2" id="_idParaDest-307"><span class="koboSpan" id="kobo.1591.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1592.1">Angular CDK</span><a id="_idIndexMarker655"/><span class="koboSpan" id="kobo.1593.1"> Overlay API: </span><a href="https://material.angular.io/cdk/overlay/overview"><span class="url"><span class="koboSpan" id="kobo.1594.1">https://material.angular.io/cdk/overlay/overview</span></span></a></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1595.1">CdkOverlayOrigin</span></code><span class="koboSpan" id="kobo.1596.1"> directive</span><a id="_idIndexMarker656"/><span class="koboSpan" id="kobo.1597.1"> documentation: </span><a href="https://material.angular.io/cdk/overlay/api#CdkOverlayOrigin"><span class="url"><span class="koboSpan" id="kobo.1598.1">https://material.angular.io/cdk/overlay/api#CdkOverlayOrigin</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-308"><span class="koboSpan" id="kobo.1599.1">Input coercion utilities from the Angular CDK</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1600.1">This is one of those cool things</span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.1601.1"> that you see and think, “Oh, that could’ve been handy</span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.1602.1"> if I knew about this before.” </span><span class="koboSpan" id="kobo.1602.2">I absolutely thought that about these coercion utilities from the Angular CDK. </span><span class="koboSpan" id="kobo.1602.3">There have been many times when you have a number value as an input in an Angular component and you are forced to use the square bracket notation </span><code class="inlineCode"><span class="koboSpan" id="kobo.1603.1">([myNumberInput]="numberValue")</span></code><span class="koboSpan" id="kobo.1604.1"> because if you use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1605.1">"</span></code><code class="inlineCode"><span class="koboSpan" id="kobo.1606.1">myNumberInput="numberValue"</span></code><span class="koboSpan" id="kobo.1607.1">, it is interpreted as a literal string </span><code class="inlineCode"><span class="koboSpan" id="kobo.1608.1">"numberValue"</span></code><span class="koboSpan" id="kobo.1609.1"> instead of a variable. </span><span class="koboSpan" id="kobo.1609.2">The coercion utilities from the Angular CDK are exactly what we need here.</span></p>
<h2 class="heading-2" id="_idParaDest-309"><span class="koboSpan" id="kobo.1610.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1611.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1612.1">start/apps/chapter09/ng-cdk-coercion</span></code><strong class="keyWord"> </strong><span class="koboSpan" id="kobo.1613.1">inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1614.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1615.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1616.1">npm run serve ng-cdk-coercion
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1617.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1618.1"><img alt="" role="presentation" src="../Images/B18469_09_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1619.1">Figure 9.11: using-cdk-coercion running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1620.1">Now that we have the app running </span><a id="_idIndexMarker659"/><span class="koboSpan" id="kobo.1621.1">locally, let’s see the steps of the recipe</span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.1622.1"> in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-310"><span class="koboSpan" id="kobo.1623.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1624.1">We have a rating component that takes a few inputs, including “value” and “disabled.” </span><span class="koboSpan" id="kobo.1624.2">However, we can’t really use them like usual attributes and have to use square brackets notation for the Angular attribute bindings for both of them. </span><span class="koboSpan" id="kobo.1624.3">We’ll fix that in the recipe. </span><span class="koboSpan" id="kobo.1624.4">Let’s begin:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1625.1">First of all, let’s say we want to add a new feature to the ratings component—that is, having a max number for the rating. </span><span class="koboSpan" id="kobo.1625.2">Right now, it defaults to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1626.1">5</span></code><span class="koboSpan" id="kobo.1627.1">. </span><span class="koboSpan" id="kobo.1627.2">So we’ll create a new input in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1628.1">rating.component.ts</span></code><span class="koboSpan" id="kobo.1629.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1630.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1631.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1632.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1633.1">RatingComponent</span></span><span class="koboSpan" id="kobo.1634.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1635.1">@Input</span></span><span class="koboSpan" id="kobo.1636.1">() value = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1637.1">2</span></span><span class="koboSpan" id="kobo.1638.1">;
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1639.1">@Input</span></span><span class="koboSpan" id="kobo.1640.1">() disabled = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1641.1">false</span></span><span class="koboSpan" id="kobo.1642.1">;
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.1643.1">@Input</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1644.1">() max = </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1645.1">5</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1646.1">;</span></strong></span><span class="koboSpan" id="kobo.1647.1">
  ...
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1648.1">get</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1649.1">renderArr</span></span><span class="koboSpan" id="kobo.1650.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1651.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1652.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1653.1">Array</span></span><span class="koboSpan" id="kobo.1654.1">(</span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1655.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1656.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1657.1">max</span></strong></span><span class="koboSpan" id="kobo.1658.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1659.1">fill</span></span><span class="koboSpan" id="kobo.1660.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.1661.1">0</span></span><span class="koboSpan" id="kobo.1662.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1663.1">map</span></span><span class="koboSpan" id="kobo.1664.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1665.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1666.1">_, index</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1667.1">) =&gt;</span></span>
<span class="hljs-keyword"> </span><span class="koboSpan" id="kobo.1668.1"> index + </span><span class="hljs-number"><span class="koboSpan" id="kobo.1669.1">1</span></span><span class="koboSpan" id="kobo.1670.1">);
  }
  ...
</span><span class="koboSpan" id="kobo.1670.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1671.1">Now, we’ll provide the max input</span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.1672.1"> to the rating component from the home component. </span><span class="koboSpan" id="kobo.1672.2">We’ll set its value</span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.1673.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1674.1">8</span></code><span class="koboSpan" id="kobo.1675.1">. </span><span class="koboSpan" id="kobo.1675.2">But we’ll use the usual HTML notation to supply the value. </span><span class="koboSpan" id="kobo.1675.3">Update the usage of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1676.1">&lt;app-rating-component&gt;</span></code><span class="koboSpan" id="kobo.1677.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1678.1">home.component.html</span></code><span class="koboSpan" id="kobo.1679.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"> <span class="hljs-tag"><span class="koboSpan" id="kobo.1680.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1681.1">app-rating</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1682.1">          [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1683.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1684.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1685.1">"reviewForm.controls.rating.value" </span></span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1686.1">max</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1687.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1688.1">"8"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1689.1">          [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1690.1">disabled</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1691.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1692.1">"ratingDisabled"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1693.1">          (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1694.1">valueChanged</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1695.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1696.1">"applyRating($event)"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1697.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1698.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1699.1">app-rating</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1700.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1701.1">You’ll notice immediately that the IDE throws an error as we can’t assign a string value to a number input.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.1702.1">We’ll now use the coercion utilities from the Angular CDK to solve this issue. </span><span class="koboSpan" id="kobo.1702.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1703.1">rating.component.ts</span></code><span class="koboSpan" id="kobo.1704.1"> file to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1705.1">NumberInput</span></code><span class="koboSpan" id="kobo.1706.1"> type and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1707.1">coerceNumberProperty</span></code><span class="koboSpan" id="kobo.1708.1"> method as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1709.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1710.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1711.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1712.1">NumberInput</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1713.1">, coerceNumberProperty } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1714.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1715.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1716.1">@angular/cdk/coercion'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1717.1">;</span></strong></span><span class="koboSpan" id="kobo.1718.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1719.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1720.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1721.1">RatingComponent</span></span><span class="koboSpan" id="kobo.1722.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1723.1">@Input</span></span><span class="koboSpan" id="kobo.1724.1">() value = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1725.1">2</span></span><span class="koboSpan" id="kobo.1726.1">;
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1727.1">@Input</span></span><span class="koboSpan" id="kobo.1728.1">() disabled = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1729.1">false</span></span><span class="koboSpan" id="kobo.1730.1">;
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.1731.1">@Input</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1732.1">() get max () {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1733.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1734.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1735.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1736.1">_max</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1737.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1738.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1739.1">set max (</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1740.1">val</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1741.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1742.1">NumberInput</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1743.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1744.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1745.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1746.1">_max</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1747.1"> = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1748.1">coerceNumberProperty</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1749.1">(val);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1750.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1751.1">private</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1752.1"> _max = </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1753.1">5</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1754.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1755.1">@Output</span></span><span class="koboSpan" id="kobo.1756.1">() </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1757.1">valueChanged</span></span><span class="koboSpan" id="kobo.1758.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1759.1">EventEmitter</span></span><span class="koboSpan" id="kobo.1760.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1761.1">number</span></span><span class="koboSpan" id="kobo.1762.1">&gt; = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1763.1">new</span></span>
<span class="hljs-meta"> </span> <span class="hljs-title"><span class="koboSpan" id="kobo.1764.1">EventEmitter</span></span><span class="koboSpan" id="kobo.1765.1">();
  ...
</span><span class="koboSpan" id="kobo.1765.2">}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1766.1">If you check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1767.1">home.component.html</span></code><span class="koboSpan" id="kobo.1768.1"> file again, you’ll see that the error is gone and the app compiles without any issues.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.1769.1">Let’s make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1770.1">disabled</span></code><span class="koboSpan" id="kobo.1771.1"> property coerced as well. </span><span class="koboSpan" id="kobo.1771.2">We’ll try to use the double-curly-braces </span><code class="inlineCode"><span class="koboSpan" id="kobo.1772.1">{{}}</span></code><span class="koboSpan" id="kobo.1773.1"> notation for this input. </span><span class="koboSpan" id="kobo.1773.2">Update the usage of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1774.1">&lt;app-rating&gt;</span></code><span class="koboSpan" id="kobo.1775.1"> element in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1776.1">home.component.html</span></code><span class="koboSpan" id="kobo.1777.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"> <span class="hljs-tag"><span class="koboSpan" id="kobo.1778.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1779.1">app-rating</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1780.1">          [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1781.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1782.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1783.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1784.1">reviewForm.controls.rating.value"</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1785.1">max</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1786.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1787.1">"8"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1788.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1789.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1790.1">"{{ratingDisabled}}"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1791.1">          (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1792.1">valueChanged</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1793.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1794.1">"applyRating($event)"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1795.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1796.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1797.1">app-rating</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1798.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1799.1">You’ll see an error in both</span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.1800.1"> the IDE and the</span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.1801.1"> compilation: </span><code class="inlineCode"><span class="koboSpan" id="kobo.1802.1">Type 'string' is not assignable to type 'boolean'</span></code><span class="koboSpan" id="kobo.1803.1">.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.1804.1">To fix the issue, let’s use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1805.1">BooleanInput</span></code><span class="koboSpan" id="kobo.1806.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1807.1">coerceBooleanProperty</span></code><span class="koboSpan" id="kobo.1808.1"> method in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1809.1">rating.component.ts</span></code><span class="koboSpan" id="kobo.1810.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1811.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1812.1">import</span></span><span class="koboSpan" id="kobo.1813.1"> { </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1814.1">BooleanInput</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1815.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1816.1">NumberInput</span></span><span class="koboSpan" id="kobo.1817.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1818.1">coerceBooleanProperty</span></strong></span><span class="koboSpan" id="kobo.1819.1">, coerceNumberProperty } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1820.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1821.1">'@angular/cdk/coercion'</span></span><span class="koboSpan" id="kobo.1822.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1823.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1824.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1825.1">RatingComponent</span></span><span class="koboSpan" id="kobo.1826.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1827.1">@Input</span></span><span class="koboSpan" id="kobo.1828.1">() value = </span><span class="hljs-number"><span class="koboSpan" id="kobo.1829.1">2</span></span><span class="koboSpan" id="kobo.1830.1">;
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.1831.1">@Input</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1832.1">() get disabled () {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1833.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1834.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1835.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1836.1">_disabled</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1837.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1838.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1839.1">set disabled (</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1840.1">val</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1841.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1842.1">BooleanInput</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1843.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1844.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1845.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1846.1">_disabled</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1847.1"> = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1848.1">coerceBooleanProperty</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1849.1">(val);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1850.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1851.1">private</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1852.1"> _disabled = </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1853.1">false</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1854.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1855.1">@Input</span></span><span class="koboSpan" id="kobo.1856.1">() get max () {...}
  ...
</span><span class="koboSpan" id="kobo.1856.2">}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1857.1">And voilà! </span><span class="koboSpan" id="kobo.1857.2">Your code should be compiled without errors, and you should be able to provide values without the forced square-bracket attribute binding notation. </span><span class="koboSpan" id="kobo.1857.3">What’s great is that even if you just add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1858.1">disabled</span></code><span class="koboSpan" id="kobo.1859.1"> attribute to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1860.1">&lt;app-rating&gt;</span></code><span class="koboSpan" id="kobo.1861.1"> element, it will disable the component, which is what happens when we apply the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1862.1">disabled</span></code><span class="koboSpan" id="kobo.1863.1"> attribute to a regular </span><code class="inlineCode"><span class="koboSpan" id="kobo.1864.1">input</span></code><span class="koboSpan" id="kobo.1865.1"> element or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1866.1">textarea</span></code><span class="koboSpan" id="kobo.1867.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-311"><span class="koboSpan" id="kobo.1868.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1869.1">In the recipe, we used two different methods from the Angular CDK’s coercion utilities. </span><span class="koboSpan" id="kobo.1869.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1870.1">coerceNumberProperty</span></code><span class="koboSpan" id="kobo.1871.1"> method and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1872.1">coerceBooleanProperty</span></code><span class="koboSpan" id="kobo.1873.1"> method. </span><span class="koboSpan" id="kobo.1873.2">Let’s first have a look at the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1874.1">coerceNumberProperty</span></code><span class="koboSpan" id="kobo.1875.1"> method along with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1876.1">NumberInput</span></code><span class="koboSpan" id="kobo.1877.1"> type.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1878.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1879.1">NumberInput</span></code><strong class="keyWord"> </strong><span class="koboSpan" id="kobo.1880.1">type resolves to being </span><code class="inlineCode"><span class="koboSpan" id="kobo.1881.1">string | number | null | undefined</span></code><span class="koboSpan" id="kobo.1882.1">, which makes it possible for us to provide the values as any of those types. </span><span class="koboSpan" id="kobo.1882.2">And when we don’t use the square-bracket notation for attribute binding, the value is considered as a </span><strong class="keyWord"><span class="koboSpan" id="kobo.1883.1">string</span></strong><span class="koboSpan" id="kobo.1884.1">. </span><span class="koboSpan" id="kobo.1884.2">This seems to be covered by the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1885.1">NumberInput</span></code><span class="koboSpan" id="kobo.1886.1"> type. </span><span class="koboSpan" id="kobo.1886.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1887.1">coerceNumberProperty</span></code><span class="koboSpan" id="kobo.1888.1"> method takes any value and converts it into a number. </span><span class="koboSpan" id="kobo.1888.2">The function also takes a second optional argument as the fallback value.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1889.1">The usages of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1890.1">BooleanInput</span></code><span class="koboSpan" id="kobo.1891.1"> type and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1892.1">coerceBooleanProperty</span></code><span class="koboSpan" id="kobo.1893.1"> method are very similar to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1894.1">NumberInput</span></code><span class="koboSpan" id="kobo.1895.1"> type and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1896.1">coerceNumberProperty</span></code><span class="koboSpan" id="kobo.1897.1"> respectively. </span><span class="koboSpan" id="kobo.1897.2">The difference, however, is that the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1898.1">coerceBooleanProperty</span></code><span class="koboSpan" id="kobo.1899.1"> method takes any value and converts it into a boolean. </span><span class="koboSpan" id="kobo.1899.2">The logic behind this method is a bit different as it looks for the following condition:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1900.1">value != </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1901.1">null</span></span><span class="koboSpan" id="kobo.1902.1"> &amp;&amp; </span><span class="hljs-string"><span class="koboSpan" id="kobo.1903.1">`</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1904.1">${value}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1905.1">`</span></span><span class="koboSpan" id="kobo.1906.1"> !== </span><span class="hljs-string"><span class="koboSpan" id="kobo.1907.1">'false'</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1908.1">Which means if the attribute</span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.1909.1"> is provided without a value, it is going</span><a id="_idIndexMarker666"/><span class="koboSpan" id="kobo.1910.1"> to be an empty string. </span><span class="koboSpan" id="kobo.1910.2">And even though empty string is a falsy value, with the coerceBooleanProperty, an attribute without a value (empty string) will resolve as a truthy value.</span></p>
<h2 class="heading-2" id="_idParaDest-312"><span class="koboSpan" id="kobo.1911.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1912.1">CDK coercion</span><a id="_idIndexMarker667"/><span class="koboSpan" id="kobo.1913.1"> documentation: </span><a href="https://material.angular.io/cdk/coercion/overview"><span class="url"><span class="koboSpan" id="kobo.1914.1">https://material.angular.io/cdk/coercion/overview</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-313"><span class="koboSpan" id="kobo.1915.1">Using the CDK Drag and Drop API to move items from one list to another</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1916.1">Have you ever used the Trello board</span><a id="_idIndexMarker668"/><span class="koboSpan" id="kobo.1917.1"> app, or maybe other</span><a id="_idIndexMarker669"/><span class="koboSpan" id="kobo.1918.1"> apps that also allow you to drag and drop list items from one list to another? </span><span class="koboSpan" id="kobo.1918.2">Well, you can do this easily using the Angular CDK, and in this recipe, you’ll learn about using the</span><strong class="keyWord"><span class="koboSpan" id="kobo.1919.1"> Angular CDK Drag and Drop API</span></strong><span class="koboSpan" id="kobo.1920.1"> to move items from one list to another. </span><span class="koboSpan" id="kobo.1920.2">You’ll also learn how to reorder lists.</span></p>
<h2 class="heading-2" id="_idParaDest-314"><span class="koboSpan" id="kobo.1921.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1922.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1923.1">start/apps/chapter09/ng-cdk-drag-drop</span></code><span class="koboSpan" id="kobo.1924.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1925.1">Open the code repository</span><a id="_idIndexMarker670"/><span class="koboSpan" id="kobo.1926.1"> in your code</span><a id="_idIndexMarker671"/><span class="koboSpan" id="kobo.1927.1"> editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1928.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1929.1">npm run serve ng-cdk-drag-drop to serve the project.
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1930.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1931.1"><img alt="" role="presentation" src="../Images/B18469_09_12.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1932.1">Figure 9.12: The ng-cdk-drag-drop app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1933.1">Now that we have the app running locally, let’s see the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-315"><span class="koboSpan" id="kobo.1934.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1935.1">For this recipe, we have an interesting app that has some folders and files. </span><span class="koboSpan" id="kobo.1935.2">We’re going to implement the drag-and-drop functionality for the files to be dragged to other folders, which should update the folder’s file count instantly, and we should be able to see the file in the new folder as well. </span><span class="koboSpan" id="kobo.1935.3">Let’s get started.</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1936.1">First of all, we need to import </span><code class="inlineCode"><span class="koboSpan" id="kobo.1937.1">DragDropModule</span></code><span class="koboSpan" id="kobo.1938.1"> because we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1939.1">CdkDrag</span></code><span class="koboSpan" id="kobo.1940.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1941.1">CdkDropList</span></code><span class="koboSpan" id="kobo.1942.1"> directives in our app which belong to it. </span><span class="koboSpan" id="kobo.1942.2">We will import the module into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1943.1">imports</span></code><span class="koboSpan" id="kobo.1944.1"> array of our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1945.1">FoldersListComponent</span></code><span class="koboSpan" id="kobo.1946.1"> class. </span><span class="koboSpan" id="kobo.1946.2">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1947.1">folders-list.component.ts</span></code><span class="koboSpan" id="kobo.1948.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1949.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1950.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1951.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1952.1">DragDropModule</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1953.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1954.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1955.1">'@angular/cdk/drag-drop'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1956.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1957.1">@Component</span></span><span class="koboSpan" id="kobo.1958.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1959.1">imports</span></span><span class="koboSpan" id="kobo.1960.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1961.1">CommonModule</span></span><span class="koboSpan" id="kobo.1962.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1963.1">FileComponent</span></span><span class="koboSpan" id="kobo.1964.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1965.1">FolderComponent</span></span><span class="koboSpan" id="kobo.1966.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1967.1">DragDropModule</span></strong></span><span class="koboSpan" id="kobo.1968.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1969.1">standalone</span></span><span class="koboSpan" id="kobo.1970.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1971.1">true</span></span><span class="koboSpan" id="kobo.1972.1">
})
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1973.1">Now, we’ll apply the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1974.1">cdkDrag</span></code><span class="koboSpan" id="kobo.1975.1"> directive</span><a id="_idIndexMarker672"/><span class="koboSpan" id="kobo.1976.1"> to each of our files </span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.1977.1">and will apply the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1978.1">cdkDropList</span></code><span class="koboSpan" id="kobo.1979.1"> directive to each of the folders. </span><span class="koboSpan" id="kobo.1979.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1980.1">folders-list.component.html</span></code><span class="koboSpan" id="kobo.1981.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1982.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1983.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1984.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1985.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1986.1">"folders"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1987.1">&gt;</span></span><span class="koboSpan" id="kobo.1988.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1989.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1990.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1991.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1992.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1993.1">"folders__list"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1994.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1995.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1996.1">app-folder</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1997.1">cdkDropList</span></strong></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1998.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1999.1">      [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2000.1">folder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2001.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2002.1">"folder"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2003.1">    &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2004.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2005.1">app-folder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2006.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2007.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2008.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2009.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2010.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2011.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2012.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2013.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2014.1">"folders__selected-folder-files"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2015.1">   *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2016.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2017.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2018.1">"selectedFolder"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2019.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2020.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2021.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2022.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2023.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2024.1">app-file</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2025.1">cdkDrag</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2026.1">        *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2027.1">ngFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2028.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2029.1">"let file of selectedFolder.files"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2030.1">        [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2031.1">file</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2032.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2033.1">"file"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2034.1">      &gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2035.1">app-file</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2036.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2037.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2038.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2039.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2040.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2041.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2042.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2043.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2044.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2045.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2046.1">We’ll also enable reordering of the files within a folder by adding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2047.1">cdkDropList</span></code><span class="koboSpan" id="kobo.2048.1"> directive to the container elements for the files, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2049.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2050.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2051.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2052.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2053.1">"folders"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2054.1">&gt;</span></span><span class="koboSpan" id="kobo.2055.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2056.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2057.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2058.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2059.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2060.1">"folders__selected-folder-files"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2061.1">   *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2062.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2063.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2064.1">"selectedFolder"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2065.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2066.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2067.1">div</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2068.1">cdkDropList</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2069.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2070.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2071.1">app-file</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2072.1">...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2073.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2074.1">app-file</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2075.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2076.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2077.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2078.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2079.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2080.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2081.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2082.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2083.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2084.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2085.1">We’ll now define the origin</span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.2086.1"> of the drag-and-drop interaction</span><a id="_idIndexMarker675"/><span class="koboSpan" id="kobo.2087.1"> by specifying the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2088.1">[cdkDragData]</span></code><span class="koboSpan" id="kobo.2089.1"> attribute on each </span><code class="inlineCode"><span class="koboSpan" id="kobo.2090.1">&lt;app-file&gt;</span></code><span class="koboSpan" id="kobo.2091.1"> element and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2092.1">[cdkDropListData]</span></code><span class="koboSpan" id="kobo.2093.1"> attribute on each </span><code class="inlineCode"><span class="koboSpan" id="kobo.2094.1">&lt;app-folder&gt;</span></code><span class="koboSpan" id="kobo.2095.1"> element, and on the files container as well. </span><span class="koboSpan" id="kobo.2095.2">Update the template again, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2096.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2097.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2098.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2099.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2100.1">"folders"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2101.1">&gt;</span></span><span class="koboSpan" id="kobo.2102.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2103.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2104.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2105.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2106.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2107.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2108.1">folders__list"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2109.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2110.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2111.1">app-folder</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2112.1">cdkDropList</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2113.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2114.1">cdkDropListData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2115.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2116.1">"folder.files"</span></strong></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2117.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2118.1">    &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2119.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2120.1">app-folder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2121.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2122.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2123.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2124.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2125.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2126.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2127.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2128.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2129.1">"folders__selected-folder-files"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2130.1">   *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2131.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2132.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2133.1">"selectedFolder"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2134.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2135.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2136.1">div</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2137.1">cdkDropList</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2138.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2139.1">cdkDropListData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2140.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2141.1">"selectedFolder.files"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2142.1">    &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2143.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2144.1">app-file</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2145.1">cdkDrag</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2146.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2147.1">cdkDragData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2148.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2149.1">"file"</span></strong></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2150.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2151.1">      &gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2152.1">app-file</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2153.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2154.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2155.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2156.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2157.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2158.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2159.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2160.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2161.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2162.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2163.1">We now need to implement what happens when the file is dropped. </span><span class="koboSpan" id="kobo.2163.2">To do so, we’ll use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2164.1">(cdkDropListDropped)</span></code><span class="koboSpan" id="kobo.2165.1"> event handler. </span><span class="koboSpan" id="kobo.2165.2">Update the template, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2166.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2167.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2168.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2169.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2170.1">"folders"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2171.1">&gt;</span></span><span class="koboSpan" id="kobo.2172.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2173.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2174.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2175.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2176.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2177.1">"folders__list"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2178.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2179.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2180.1">app-folder</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2181.1">cdkDropList</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2182.1">      [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2183.1">cdkDropListData</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2184.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2185.1">"folder.files"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2186.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2187.1">cdkDropListDropped</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2188.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2189.1">"onFileDrop($event)"</span></strong></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2190.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2191.1">    &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2192.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2193.1">app-folder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2194.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2195.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2196.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2197.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2198.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2199.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2200.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2201.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2202.1">"folders__selected-folder-files"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2203.1">   *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2204.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2205.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2206.1">"selectedFolder"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2207.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2208.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2209.1">div</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2210.1">cdkDropList</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2211.1">      [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2212.1">cdkDropListData</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2213.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2214.1">"selectedFolder.files"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2215.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2216.1">cdkDropListDropped</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2217.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2218.1">"onFileDrop($event)"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2219.1">    &gt;</span></span><span class="koboSpan" id="kobo.2220.1">
      ...
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2221.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2222.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2223.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2224.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2225.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2226.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2227.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2228.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2229.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2230.1">Finally, we need to implement </span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.2231.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2232.1">onFileDrop</span></code><span class="koboSpan" id="kobo.2233.1"> method. </span><span class="koboSpan" id="kobo.2233.2">Update</span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.2234.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2235.1">folders-list.component.ts</span></code><span class="koboSpan" id="kobo.2236.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2237.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2238.1">import</span></span><span class="koboSpan" id="kobo.2239.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2240.1">IFile</span></span><span class="koboSpan" id="kobo.2241.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2242.1">IFolder</span></span><span class="koboSpan" id="kobo.2243.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2244.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2245.1">'../interfaces'</span></span><span class="koboSpan" id="kobo.2246.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2247.1">import</span></span><span class="koboSpan" id="kobo.2248.1"> { </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2249.1">CdkDragDrop</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2250.1">,</span></strong></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2251.1">DragDropModule</span></span><span class="koboSpan" id="kobo.2252.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2253.1">moveItemInArray</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2254.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2255.1">transferArrayItem</span></strong></span><span class="koboSpan" id="kobo.2256.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2257.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2258.1">'@angular/cdk/drag-drop'</span></span><span class="koboSpan" id="kobo.2259.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2260.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2261.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2262.1">FoldersListComponent</span></span><span class="koboSpan" id="kobo.2263.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.2264.1">toggleFolderSelect</span></span><span class="koboSpan" id="kobo.2265.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.2266.1">folder</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2267.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.2268.1">IFolder</span></span><span class="koboSpan" id="kobo.2269.1">) {...}
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2270.1">onFileDrop</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2271.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2272.1">event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2273.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2274.1">CdkDragDrop</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2275.1">&lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2276.1">IFile</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2277.1">[]&gt;) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2278.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2279.1"> (event.previousContainer === event.container) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2280.1">moveItemInArray</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2281.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2282.1">event.container.data, event.previousIndex,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2283.1">event.currentIndex</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2284.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2285.1">} </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2286.1">else</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2287.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2288.1">transferArrayItem</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2289.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2290.1">event.previousContainer</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2291.1">.data, event.container.data,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2292.1">event.previousIndex, event.currentIndex</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2293.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2294.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2295.1">}</span></strong></span><span class="koboSpan" id="kobo.2296.1">
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2297.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.2298.1">moveItemInArray</span></code><span class="koboSpan" id="kobo.2299.1"> method and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2300.1">transferArrayItem</span></code><span class="koboSpan" id="kobo.2301.1"> method are built-in from the Angular CDK. </span><span class="koboSpan" id="kobo.2301.2">This makes our implementation a breeze.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.2302.1">In order to implement drag-and-drop</span><a id="_idIndexMarker678"/><span class="koboSpan" id="kobo.2303.1"> previews, we need to enclose</span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.2304.1"> the droplists and the draggable items into an element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2305.1">cdkDropListGroup</span></code><span class="koboSpan" id="kobo.2306.1"> directive. </span><span class="koboSpan" id="kobo.2306.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2307.1">folders-list.component.html</span></code><span class="koboSpan" id="kobo.2308.1"> file and apply the directive to the element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2309.1">folders</span></code><span class="koboSpan" id="kobo.2310.1"> class (i.e., at the top level), as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2311.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2312.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2313.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2314.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2315.1">"folders"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2316.1">cdkDropListGroup</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2317.1">&gt;</span></span><span class="koboSpan" id="kobo.2318.1">
...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2319.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2320.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2321.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2322.1">To apply a custom drag preview, we use a custom element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2323.1">*cdkDragPreview</span></code><span class="koboSpan" id="kobo.2324.1"> directive applied to it. </span><span class="koboSpan" id="kobo.2324.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2325.1">folders-list.component.html</span></code><span class="koboSpan" id="kobo.2326.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2327.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2328.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2329.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2330.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2331.1">"folders"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2332.1">cdkDropListGroup</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2333.1">&gt;</span></span><span class="koboSpan" id="kobo.2334.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2335.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2336.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2337.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2338.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2339.1">"folders__selected-folder-files"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2340.1">   *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2341.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2342.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2343.1">"selectedFolder"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2344.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2345.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2346.1">div</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2347.1">cdkDropList</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2348.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2349.1">    &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2350.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2351.1">app-file</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2352.1">cdkDrag</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2353.1">...</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2354.1">      &gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2355.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2356.1">fa-icon</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2357.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2358.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2359.1">"file-drag-preview"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2360.1">*</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2361.1">cdkDragPreview</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2362.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2363.1">icon</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2364.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2365.1">"file.icon!"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2366.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2367.1">fa-icon</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2368.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2369.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2370.1">app-file</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2371.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2372.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2373.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2374.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2375.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2376.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2377.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2378.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2379.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2380.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2381.1">For the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2382.1">fa-icon</span></code><span class="koboSpan" id="kobo.2383.1"> component</span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.2384.1"> to work, we also need</span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.2385.1"> to import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2386.1">FontAwesomeModule</span></code><span class="koboSpan" id="kobo.2387.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2388.1">FoldersListComponent</span></code><span class="koboSpan" id="kobo.2389.1"> class. </span><span class="koboSpan" id="kobo.2389.2">Update the file below as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2390.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2391.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2392.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2393.1">FontAwesomeModule</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2394.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2395.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2396.1">'@fortawesome/angular-fontawesome'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2397.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2398.1">@Component</span></span><span class="koboSpan" id="kobo.2399.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2400.1">imports</span></span><span class="koboSpan" id="kobo.2401.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.2402.1">CommonModule</span></span><span class="koboSpan" id="kobo.2403.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2404.1">FileComponent</span></span><span class="koboSpan" id="kobo.2405.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2406.1">FolderComponent</span></span><span class="koboSpan" id="kobo.2407.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2408.1">DragDropModule</span></span><span class="koboSpan" id="kobo.2409.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2410.1">FontAwesomeModule</span></strong></span><span class="koboSpan" id="kobo.2411.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2412.1">standalone</span></span><span class="koboSpan" id="kobo.2413.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2414.1">true</span></span><span class="koboSpan" id="kobo.2415.1">
})
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2416.1">We’ll also need some styles for the drag-and-drop previews. </span><span class="koboSpan" id="kobo.2416.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2417.1">folders-list.component.scss</span></code><span class="koboSpan" id="kobo.2418.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2419.1">$folder-bg: </span><span class="hljs-number"><span class="koboSpan" id="kobo.2420.1">#f5f5f5</span></span><span class="koboSpan" id="kobo.2421.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2422.1">$file-preview-</span></strong><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2423.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2424.1">: transform </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2425.1">250ms</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2426.1">cubic-bezier</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2427.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2428.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2429.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2430.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2431.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2432.1">0.2</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2433.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2434.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2435.1">);</span></strong></span>
<span class="hljs-selector-class"><span class="koboSpan" id="kobo.2436.1">.folders</span></span><span class="koboSpan" id="kobo.2437.1"> {...}
</span><span class="code-highlight"><strong class="hljs-selector-class-slc"><span class="koboSpan" id="kobo.2438.1">.file-drag-preview</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2439.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2440.1">padding</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2441.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2442.1">10px</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2443.1">20px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2444.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2445.1">background</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2446.1">: transparent;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2447.1">font-size</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2448.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2449.1">32px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2450.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2451.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-selector-class-slc"><span class="koboSpan" id="kobo.2452.1">.file-drop-placeholder</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2453.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2454.1">min-height</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2455.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2456.1">60px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2457.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2458.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2459.1">: $file-preview-transition;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2460.1">display</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2461.1">: flex;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2462.1">align-items</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2463.1">: center;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2464.1">justify-content</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2465.1">: center;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2466.1">font-size</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2467.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2468.1">32px</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2469.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2470.1">}</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2471.1">Let’s also add some styles</span><a id="_idIndexMarker682"/><span class="koboSpan" id="kobo.2472.1"> to make sure the other list</span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.2473.1"> items move smoothly when reordering the items within a folder. </span><span class="koboSpan" id="kobo.2473.2">Since we need to style the elements from the Angular CDK, and they have styles encapsulation, we need to add the styles in our global </span><code class="inlineCode"><span class="koboSpan" id="kobo.2474.1">scss</span></code><span class="koboSpan" id="kobo.2475.1"> file. </span><span class="koboSpan" id="kobo.2475.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2476.1">folders-list.component.scss</span></code><span class="koboSpan" id="kobo.2477.1"> file further, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2478.1">... 
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2479.1">* {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2480.1">user-select: none;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2481.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong></span>
<span class="code-highlight"><strong class="hljs-selector-class-slc"><span class="koboSpan" id="kobo.2482.1">.cdk-drop-list-dragging</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-selector-class-slc"><span class="koboSpan" id="kobo.2483.1">.cdk-drag</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2484.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2485.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2486.1">: transform </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2487.1">250ms</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2488.1">cubic-bezier</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2489.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2490.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2491.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2492.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2493.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2494.1">0.2</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2495.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2496.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2497.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2498.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong></span>
<span class="code-highlight"><strong class="hljs-selector-class-slc"><span class="koboSpan" id="kobo.2499.1">.cdk-drag-animating</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2500.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attribute-slc"><span class="koboSpan" id="kobo.2501.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2502.1">: transform </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2503.1">300ms</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2504.1">cubic-bezier</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2505.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2506.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2507.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2508.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2509.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2510.1">0.2</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2511.1">, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2512.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2513.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2514.1">}</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2515.1">Now, we need to create a drop preview (a placeholder that appears until we release the dragged file) template as well. </span><span class="koboSpan" id="kobo.2515.2">For this, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2516.1">*cdkDragPlaceholder</span></code><span class="koboSpan" id="kobo.2517.1"> directive on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2518.1">preview</span></code><span class="koboSpan" id="kobo.2519.1"> element. </span><span class="koboSpan" id="kobo.2519.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2520.1">folders-list.component.html</span></code><span class="koboSpan" id="kobo.2521.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2522.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2523.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2524.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2525.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2526.1">"folders"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2527.1">cdkDropListGroup</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2528.1">&gt;</span></span><span class="koboSpan" id="kobo.2529.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2530.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2531.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2532.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2533.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2534.1">"folders__selected-folder-files"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2535.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2536.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2537.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2538.1">"selectedFolder"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2539.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2540.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2541.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2542.1">cdkDropList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2543.1">...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2544.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2545.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2546.1">app-file</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2547.1">cdkDrag</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2548.1">...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2549.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2550.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2551.1">fa-icon</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2552.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2553.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2554.1">"file-drag-preview"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2555.1">          *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2556.1">cdkDragPreview</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2557.1">...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2558.1"> &gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2559.1">fa-icon</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2560.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2561.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2562.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2563.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2564.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2565.1">"file-drop-placeholder"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2566.1">*</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2567.1">cdkDragPlaceholder</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2568.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2569.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2570.1">fa-icon</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2571.1"> [</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2572.1">icon</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2573.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2574.1">"</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2575.1">upArrow"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2576.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2577.1">fa-icon</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2578.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2579.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2580.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2581.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2582.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2583.1">app-file</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2584.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2585.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2586.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2587.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2588.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2589.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2590.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2591.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2592.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2593.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2594.1">Finally, let’s create an </span><code class="inlineCode"><span class="koboSpan" id="kobo.2595.1">upArrow</span></code><span class="koboSpan" id="kobo.2596.1"> property</span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.2597.1"> using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2598.1">faArrowAltCircleUp</span></code><span class="koboSpan" id="kobo.2599.1"> icon from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2600.1">@fortawesome</span></code><span class="koboSpan" id="kobo.2601.1"> package. </span><span class="koboSpan" id="kobo.2601.2">Update</span><a id="_idIndexMarker685"/><span class="koboSpan" id="kobo.2602.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2603.1">folders-list.component.ts</span></code><span class="koboSpan" id="kobo.2604.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2605.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2606.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2607.1"> { faArrowAltCircleUp } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2608.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2609.1">'@fortawesome/free-regular-svg-icons'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2610.1">;</span></strong></span><span class="koboSpan" id="kobo.2611.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2612.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2613.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2614.1">FoldersListComponent</span></span><span class="koboSpan" id="kobo.2615.1"> {
  folders = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2616.1">APP_DATA</span></span><span class="koboSpan" id="kobo.2617.1">;
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2618.1">upArrow = faArrowAltCircleUp;</span></strong></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.2619.1">selectedFolder</span></span><span class="koboSpan" id="kobo.2620.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2621.1">IFolder</span></span><span class="koboSpan" id="kobo.2622.1"> | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2623.1">null</span></span><span class="koboSpan" id="kobo.2624.1"> = </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2625.1">null</span></span><span class="koboSpan" id="kobo.2626.1">;
  ...
</span><span class="koboSpan" id="kobo.2626.2">}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2627.1">And boom! </span><span class="koboSpan" id="kobo.2627.2">We now have a seamless </span><strong class="keyWord"><span class="koboSpan" id="kobo.2628.1">User Experience</span></strong><span class="koboSpan" id="kobo.2629.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.2630.1">UX</span></strong><span class="koboSpan" id="kobo.2631.1">) for the entire drag-and-drop flow. </span><span class="koboSpan" id="kobo.2631.2">Like it? </span><span class="koboSpan" id="kobo.2631.3">Make sure that you share</span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.2632.1"> a snapshot on your X (Twitter) and tag me at </span><strong class="keyWord"><span class="koboSpan" id="kobo.2633.1">@codewith_ahsan</span></strong><span class="koboSpan" id="kobo.2634.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2635.1">Now that we’ve finished the recipe, let’s see in the next section how it all works.</span></p>
<h2 class="heading-2" id="_idParaDest-316"><span class="koboSpan" id="kobo.2636.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2637.1">There were a couple of interesting directives in this recipe, and we’ll go through them all one by one. </span><span class="koboSpan" id="kobo.2637.2">First of all, as good Angular developers, we import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2638.1">DragDropModule</span></code><span class="koboSpan" id="kobo.2639.1"> class into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2640.1">imports</span></code><span class="koboSpan" id="kobo.2641.1"> array of our </span><code class="inlineCode"><span class="koboSpan" id="kobo.2642.1">standalone component</span></code><strong class="keyWord"> </strong><span class="koboSpan" id="kobo.2643.1">named </span><code class="inlineCode"><span class="koboSpan" id="kobo.2644.1">FoldersListComponent</span></code><span class="koboSpan" id="kobo.2645.1">, just to make sure we don’t end up with errors. </span><span class="koboSpan" id="kobo.2645.2">Then, we start making the files draggable. </span><span class="koboSpan" id="kobo.2645.3">We do this by adding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2646.1">cdkDrag</span></code><span class="koboSpan" id="kobo.2647.1"> directive to each file element by applying the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2648.1">*ngFor</span></code><span class="koboSpan" id="kobo.2649.1"> directive to it. </span><span class="koboSpan" id="kobo.2649.2">This tells the Angular CDK that this element will be dragged and, therefore, the Angular CDK binds different handlers to each element to be dragged.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.2650.1">IMPORTANT NOTE</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2651.1">Angular components by default are not block elements. </span><span class="koboSpan" id="kobo.2651.2">Therefore, when applying the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2652.1">cdkDrag</span></code><span class="koboSpan" id="kobo.2653.1"> directive to an Angular component such as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2654.1">&lt;app-file&gt;</span></code><span class="koboSpan" id="kobo.2655.1"> component, it might restrict the animations from the CDK being applied when we’re dragging the elements. </span><span class="koboSpan" id="kobo.2655.2">In order to fix this, we need to set a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2656.1">display: block;</span></code><span class="koboSpan" id="kobo.2657.1"> for our component elements. </span><span class="koboSpan" id="kobo.2657.2">Notice that we’re applying the required styles in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2658.1">folders-list.component.scss</span></code><span class="koboSpan" id="kobo.2659.1"> file (line 25) for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2660.1">.folders__selected-folder-files__file</span></code><span class="koboSpan" id="kobo.2661.1"> class.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.2662.1">After configuring the drag elements, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2663.1">cdkDropList</span></code><span class="koboSpan" id="kobo.2664.1"> directive for each container DOM element where we’re supposed to drop the file. </span><span class="koboSpan" id="kobo.2664.2">In our recipe, that is each folder that we see on the screen, and we can also reorder the files within a folder. </span><span class="koboSpan" id="kobo.2664.3">Therefore, we apply the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2665.1">cdkDropList</span></code><span class="koboSpan" id="kobo.2666.1"> directive to the wrapper element of the currently displayed files, as well as to each </span><code class="inlineCode"><span class="koboSpan" id="kobo.2667.1">&lt;app-folder&gt;</span></code><span class="koboSpan" id="kobo.2668.1"> item with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2669.1">*ngFor</span></code><span class="koboSpan" id="kobo.2670.1"> looping over the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2671.1">folders</span></code><span class="koboSpan" id="kobo.2672.1"> array.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2673.1">Then, we specify the </span><strong class="keyWord"><span class="koboSpan" id="kobo.2674.1">data</span></strong><span class="koboSpan" id="kobo.2675.1"> that we’re dragging by specifying </span><code class="inlineCode"><span class="koboSpan" id="kobo.2676.1">[cdkDragData]="file"</span></code><span class="koboSpan" id="kobo.2677.1"> for each draggable file. </span><span class="koboSpan" id="kobo.2677.2">This helps </span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.2678.1">us identify it in the later process when we drop it either within the current folder or within other folders. </span><span class="koboSpan" id="kobo.2678.2">We also specify in which array this dragged item will be added when dropped upon the particular list, and we do this by specifying </span><code class="inlineCode"><span class="koboSpan" id="kobo.2679.1">[cdkDropListData]="ARRAY"</span></code><span class="koboSpan" id="kobo.2680.1"> statements for the elements that we’ve applied the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2681.1">cdkDropList</span></code><span class="koboSpan" id="kobo.2682.1"> directive to. </span><span class="koboSpan" id="kobo.2682.2">When the Angular CDK combines the information from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2683.1">cdkDragData</span></code><span class="koboSpan" id="kobo.2684.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2685.1">cdkDropListData</span></code><span class="koboSpan" id="kobo.2686.1"> attributes, it can easily identify if the item was dragged and then dropped within the same list or in another list.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2687.1">To handle what happens</span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.2688.1"> when we drop the dragged</span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.2689.1"> file, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2690.1">(cdkDropListDropped)</span></code><span class="koboSpan" id="kobo.2691.1"> method from the Angular CDK on the element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2692.1">cdkDropList</span></code><span class="koboSpan" id="kobo.2693.1"> directive. </span><span class="koboSpan" id="kobo.2693.2">We take the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2694.1">$event</span></code><span class="koboSpan" id="kobo.2695.1"> emitted from the CDK and pass it to our </span><code class="inlineCode"><span class="koboSpan" id="kobo.2696.1">onFileDrop</span></code><span class="koboSpan" id="kobo.2697.1"> method. </span><span class="koboSpan" id="kobo.2697.2">What’s great is that within the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2698.1">onFileDrop</span></code><span class="koboSpan" id="kobo.2699.1"> method, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2700.1">moveItemInArray</span></code><span class="koboSpan" id="kobo.2701.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2702.1">transferArrayItem</span></code><span class="koboSpan" id="kobo.2703.1"> helper methods from the Angular CDK, with a really simple bit of logic to compare the containers. </span><span class="koboSpan" id="kobo.2703.2">That is, the Angular CDK provides us with enough information that we can get away with the whole functionality really easily.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2704.1">Toward the end of the recipe, we customize how our drag preview should look when we are dragging a file using a custom template, by using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2705.1">*cdkDragPreview</span></code><span class="koboSpan" id="kobo.2706.1"> directive on it. </span><span class="koboSpan" id="kobo.2706.2">This tells the Angular CDK to not render it right away but to show it with the mouse when we start dragging a file. </span><span class="koboSpan" id="kobo.2706.3">For our recipe, we only show the icon of the file as the drag preview. </span><span class="koboSpan" id="kobo.2706.4">And finally, we also customize the drop preview (or drag placeholder) usingthe </span><code class="inlineCode"><span class="koboSpan" id="kobo.2707.1">*cdkDragPlaceholder</span></code><span class="koboSpan" id="kobo.2708.1"> directive, which shows a transparent rectangle with an upward-arrow icon to reflect where the item is going to be added when dropped. </span><span class="koboSpan" id="kobo.2708.2">Of course, we had to add some custom</span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.2709.1"> styles for both the drag</span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.2710.1"> preview and the drop preview.</span></p>
<h2 class="heading-2" id="_idParaDest-317"><span class="koboSpan" id="kobo.2711.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2712.1">Angular CDK Drag and Drop</span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.2713.1"> documentation: </span><a href="https://material.angular.io/cdk/drag-drop/overview"><span class="url"><span class="koboSpan" id="kobo.2714.1">https://material.angular.io/cdk/drag-drop/overview</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-318"><span class="koboSpan" id="kobo.2715.1">Creating a multi-step game with the CDK Stepper API</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2716.1">If you try finding examples of the CDK Stepper API</span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.2717.1"> over the internet, you’ll find a bunch</span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.2718.1"> of articles revolving around creating multi-step forms using the CDK Stepper API, but since it is a stepper at its base, it can be used for various use cases. </span><span class="koboSpan" id="kobo.2718.2">In this recipe, we’re going to build a guessing game using the Angular CDK Stepper API, in which the user will guess what the output of a rolled dice will be.</span></p>
<h2 class="heading-2" id="_idParaDest-319"><span class="koboSpan" id="kobo.2719.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2720.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2721.1">start/apps/chapter09/ng-cdk-stepper</span></code><span class="koboSpan" id="kobo.2722.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2723.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2724.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2725.1">npm run serve ng-cdk-stepper
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2726.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.2727.1"><img alt="" role="presentation" src="../Images/B18469_09_13.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.2728.1">Figure 9.13: The ng-cdk-stepper app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2729.1">Now, let’s look at how to create</span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.2730.1"> a multi-step game</span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.2731.1"> with the CDK Stepper API in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-320"><span class="koboSpan" id="kobo.2732.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2733.1">We have a really simple yet interesting application at hand that has a couple of components built already, including the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2734.1">dice component</span></code><span class="koboSpan" id="kobo.2735.1">, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2736.1">value-guess component</span></code><span class="koboSpan" id="kobo.2737.1">, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2738.1">leaderboard component</span></code><span class="koboSpan" id="kobo.2739.1">. </span><span class="koboSpan" id="kobo.2739.2">We’ll create this game as a multi-step game using the </span><strong class="keyWord"><span class="koboSpan" id="kobo.2740.1">Stepper API</span></strong><span class="koboSpan" id="kobo.2741.1">. </span><span class="koboSpan" id="kobo.2741.2">Proceed as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2742.1">First, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2743.1">CdkStepperModule</span></code><span class="koboSpan" id="kobo.2744.1"> class from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2745.1">@angular/cdk</span></code><span class="koboSpan" id="kobo.2746.1"> package in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2747.1">game.component.ts</span></code><span class="koboSpan" id="kobo.2748.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2749.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2750.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2751.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2752.1">CdkStepperModule</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2753.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2754.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2755.1">'@angular/cdk/stepper'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2756.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2757.1">@Component</span></span><span class="koboSpan" id="kobo.2758.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2759.1">imports</span></span><span class="koboSpan" id="kobo.2760.1">: [
    ...
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2761.1">DiceComponent</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2762.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2763.1">CdkStepperModule</span></strong></span><span class="koboSpan" id="kobo.2764.1">
  ],
})
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2765.1">Let’s create our stepper component now. </span><span class="koboSpan" id="kobo.2765.2">Run the following command in the workspace root folder:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2766.1">cd start &amp;&amp; nx g c game-stepper --directory apps/chapter09/ng-cdk-stepper/src/app/components/game-stepper
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2767.1">Choose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2768.1">@nx/angular:component</span></code><span class="koboSpan" id="kobo.2769.1"> schematic when asked and select the “As provided” option.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.2770.1">To make our component</span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.2771.1"> a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2772.1">CdkStepper</span></code><span class="koboSpan" id="kobo.2773.1">, we need to provide</span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.2774.1"> it using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2775.1">CdkStepper</span></code><span class="koboSpan" id="kobo.2776.1"> token and have to extend our component class from </span><code class="inlineCode"><span class="koboSpan" id="kobo.2777.1">CdkStepper</span></code><span class="koboSpan" id="kobo.2778.1"> as well. </span><span class="koboSpan" id="kobo.2778.2">We can remove the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2779.1">constructor</span></code><span class="koboSpan" id="kobo.2780.1">, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2781.1">OnInit</span></code><span class="koboSpan" id="kobo.2782.1"> implementation, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2783.1">ngOnInit</span></code><span class="koboSpan" id="kobo.2784.1"> method. </span><span class="koboSpan" id="kobo.2784.2">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2785.1">game-stepper.component.ts</span></code><span class="koboSpan" id="kobo.2786.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2787.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2788.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2789.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2790.1">CdkStepper</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2791.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2792.1">CdkStepperModule</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2793.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2794.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2795.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2796.1">@angular/cdk/stepper'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2797.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2798.1">@Component</span></span><span class="koboSpan" id="kobo.2799.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2800.1">imports</span></span><span class="koboSpan" id="kobo.2801.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.2802.1">CommonModule</span></span><span class="koboSpan" id="kobo.2803.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2804.1">CdkStepperModule</span></strong></span><span class="koboSpan" id="kobo.2805.1">],
  ...
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2806.1">providers</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2807.1">: [{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2808.1">provide</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2809.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2810.1">CdkStepper</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2811.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2812.1">useExisting</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2813.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2814.1">GameStepperComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2815.1"> }],</span></strong></span><span class="koboSpan" id="kobo.2816.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2817.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2818.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2819.1">GameStepperComponent</span></span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2820.1">extends</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2821.1">CdkStepper</span></strong></span><span class="koboSpan" id="kobo.2822.1"> {
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2823.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.2824.1">CDKStepper</span></code><span class="koboSpan" id="kobo.2825.1"> provides us helpful methods like </span><code class="inlineCode"><span class="koboSpan" id="kobo.2826.1">next</span></code><span class="koboSpan" id="kobo.2827.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.2828.1">previous</span></code><span class="koboSpan" id="kobo.2829.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2830.1">reset</span></code><span class="koboSpan" id="kobo.2831.1"> to navigate between the steps, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2832.1">selectedIndexChange</span></code><code class="codeHighlighted" style="font-weight: bold;"> </code><span class="koboSpan" id="kobo.2833.1">event emitter to identify when a step is changed.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.2834.1">Let’s add the template for our </span><code class="inlineCode"><span class="koboSpan" id="kobo.2835.1">&lt;game-stepper&gt;</span></code><span class="koboSpan" id="kobo.2836.1"> component. </span><span class="koboSpan" id="kobo.2836.2">We’ll start by adding the header that will show the step label. </span><span class="koboSpan" id="kobo.2836.3">Update your </span><code class="inlineCode"><span class="koboSpan" id="kobo.2837.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.2838.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2839.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2840.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2841.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2842.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2843.1">"game-stepper"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2844.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2845.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2846.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2847.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2848.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2849.1">h3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2850.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2851.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2852.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2853.1">"selected"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2854.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2855.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2856.1">ng-container</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2857.1">        *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2858.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2859.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2860.1">"selected.stepLabel; else showLabelText"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2861.1">        [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2862.1">ngTemplateOutlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2863.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2864.1">"selected.stepLabel.template"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2865.1">      &gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2866.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2867.1">ng-container</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2868.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2869.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2870.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2871.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2872.1">showLabelText</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2873.1">&gt;</span></span><span class="koboSpan" id="kobo.2874.1">
        {{ selected.label }}
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2875.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2876.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2877.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2878.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2879.1">h3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2880.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2881.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2882.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2883.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2884.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2885.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2886.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2887.1">Now, we’ll add the template</span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.2888.1"> to show our main content</span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.2889.1"> for the selected step—this is pretty simple to do. </span><span class="koboSpan" id="kobo.2889.2">We need to add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2890.1">div</span></code><span class="koboSpan" id="kobo.2891.1"> with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2892.1">[ngTemplateOutlet]</span></code><span class="koboSpan" id="kobo.2893.1"> attribute, where we’ll show the content. </span><span class="koboSpan" id="kobo.2893.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2894.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.2895.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2896.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2897.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2898.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2899.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2900.1">"game-stepper"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2901.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2902.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2903.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2904.1">&gt;</span></span><span class="koboSpan" id="kobo.2905.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2906.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2907.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2908.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2909.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2910.1">section</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2911.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2912.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2913.1">"game-stepper__content"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2914.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2915.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2916.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2917.1"> [</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2918.1">ngTemplateOutlet</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2919.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2920.1">"selected ? </span><span class="koboSpan" id="kobo.2920.2">selected.content :</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2921.1">null"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2922.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2923.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2924.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2925.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2926.1">section</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2927.1">&gt;</span></strong></span><span class="koboSpan" id="kobo.2928.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2929.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2930.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2931.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2932.1">Finally, we’ll add a footer element that’ll contain the navigation buttons for our stepper— that is, we should be able to jump to the next and the previous step using those navigation buttons. </span><span class="koboSpan" id="kobo.2932.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2933.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.2934.1"> file further, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2935.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2936.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2937.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2938.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2939.1">"game-stepper"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2940.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2941.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2942.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2943.1">&gt;</span></span><span class="koboSpan" id="kobo.2944.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2945.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2946.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2947.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2948.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2949.1">section</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2950.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2951.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2952.1">"game-stepper__content"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2953.1">&gt;</span></span><span class="koboSpan" id="kobo.2954.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2955.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2956.1">section</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2957.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2958.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2959.1">footer</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2960.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2961.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2962.1">"game-stepper__navigation"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2963.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2964.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2965.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2966.1"> *</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2967.1">ngIf</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2968.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2969.1">"steps.get(selectedIndex - 1)"</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2970.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2971.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2972.1">"game-stepper__navigation__button btn btn</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2973.1">-primary"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2974.1">cdkStepperPrevious</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2975.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-symbol-slc"><span class="koboSpan" id="kobo.2976.1">&amp;larr;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2977.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2978.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2979.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2980.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2981.1">span</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2982.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2983.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2984.1">"flex-1"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2985.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2986.1">span</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2987.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2988.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2989.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2990.1"> *</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2991.1">ngIf</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2992.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2993.1">"steps.get(selectedIndex + 1)"</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2994.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2995.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2996.1">"game-stepper__navigation__button btn btn-</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2997.1">primary"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2998.1">cdkStepperNext</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2999.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-symbol-slc"><span class="koboSpan" id="kobo.3000.1">&amp;rarr;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3001.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3002.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3003.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3004.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3005.1">footer</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3006.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3007.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3008.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3009.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3010.1">Let’s add some styles</span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.3011.1"> to our </span><code class="inlineCode"><span class="koboSpan" id="kobo.3012.1">game-stepper</span></code><span class="koboSpan" id="kobo.3013.1"> component. </span><span class="koboSpan" id="kobo.3013.2">Modify</span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.3014.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3015.1">game-stepper.component.scss</span></code><span class="koboSpan" id="kobo.3016.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-selector-class"><span class="koboSpan" id="kobo.3017.1">.game-stepper</span></span><span class="koboSpan" id="kobo.3018.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3019.1">display</span></span><span class="koboSpan" id="kobo.3020.1">: flex;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3021.1">flex-direction</span></span><span class="koboSpan" id="kobo.3022.1">: column;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3023.1">align-items</span></span><span class="koboSpan" id="kobo.3024.1">: center;
  &amp;__navigation {
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3025.1">width</span></span><span class="koboSpan" id="kobo.3026.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.3027.1">100%</span></span><span class="koboSpan" id="kobo.3028.1">;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3029.1">display</span></span><span class="koboSpan" id="kobo.3030.1">: flex;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3031.1">align-items</span></span><span class="koboSpan" id="kobo.3032.1">: center;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3033.1">justify-content</span></span><span class="koboSpan" id="kobo.3034.1">: space-between;
    &gt; </span><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.3035.1">button</span></span><span class="koboSpan" id="kobo.3036.1"> {
      </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3037.1">margin</span></span><span class="koboSpan" id="kobo.3038.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.3039.1">0</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.3040.1">8px</span></span><span class="koboSpan" id="kobo.3041.1">;
    }
  }
  
  &amp;__content {
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3042.1">min-height</span></span><span class="koboSpan" id="kobo.3043.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.3044.1">150px</span></span><span class="koboSpan" id="kobo.3045.1">;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3046.1">display</span></span><span class="koboSpan" id="kobo.3047.1">: flex;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3048.1">justify-content</span></span><span class="koboSpan" id="kobo.3049.1">: center;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3050.1">align-items</span></span><span class="koboSpan" id="kobo.3051.1">: center;
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3052.1">flex-direction</span></span><span class="koboSpan" id="kobo.3053.1">: column;
  }
  </span><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.3054.1">header</span></span><span class="koboSpan" id="kobo.3055.1">,
  </span><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.3056.1">footer</span></span><span class="koboSpan" id="kobo.3057.1"> {
    </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.3058.1">margin</span></span><span class="koboSpan" id="kobo.3059.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.3060.1">10px</span></span><span class="koboSpan" id="kobo.3061.1"> auto;
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3062.1">Now we want to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3063.1">game stepper</span></code><span class="koboSpan" id="kobo.3064.1"> component inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3065.1">game</span></code><span class="koboSpan" id="kobo.3066.1"> component. </span><span class="koboSpan" id="kobo.3066.2">To do this, first import it in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3067.1">GameComponent</span></code><span class="koboSpan" id="kobo.3068.1"> class’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.3069.1">imports</span></code><span class="koboSpan" id="kobo.3070.1"> array as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.3071.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3072.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3073.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3074.1">GameStepperComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3075.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3076.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3077.1">'../components/game-stepper/game-stepper.component'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3078.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.3079.1">@Component</span></span><span class="koboSpan" id="kobo.3080.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3081.1">imports</span></span><span class="koboSpan" id="kobo.3082.1">: [
    ...
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3083.1">GameStepperComponent</span></strong></span><span class="koboSpan" id="kobo.3084.1">
  ],
})
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3085.1">We’ll now wrap our entire</span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.3086.1"> template in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3087.1">game.component.html</span></code><span class="koboSpan" id="kobo.3088.1"> file</span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.3089.1"> with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3090.1">&lt;app-game-stepper&gt;</span></code><span class="koboSpan" id="kobo.3091.1"> component. </span><span class="koboSpan" id="kobo.3091.2">Update the file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3092.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3093.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3094.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3095.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3096.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3097.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3098.1">ngSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3099.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3100.1">"submitName()"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3101.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3102.1">formGroup</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3103.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3104.1">"nameForm"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3105.1">&gt;</span></span><span class="koboSpan" id="kobo.3106.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3107.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3108.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3109.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3110.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3111.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3112.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3113.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3114.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3115.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3116.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3117.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3118.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3119.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3120.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3121.1">app-leader-board</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3122.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3123.1">app-leader-board</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3124.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3125.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3126.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3127.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3128.1">We’ll now modify our </span><code class="inlineCode"><span class="koboSpan" id="kobo.3129.1">game.component.html</span></code><span class="koboSpan" id="kobo.3130.1"> file to break down the inner template into steps. </span><span class="koboSpan" id="kobo.3130.2">For that, we’ll use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3131.1">&lt;cdk-step&gt;</span></code><span class="koboSpan" id="kobo.3132.1"> element to wrap around the content for each step. </span><span class="koboSpan" id="kobo.3132.2">Update the file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3133.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3134.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3135.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3136.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3137.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3138.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3139.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3140.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3141.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3142.1">ngSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3143.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3144.1">"submitName()"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3145.1">     [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3146.1">formGroup</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3147.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3148.1">"nameForm"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3149.1">&gt;</span></span><span class="koboSpan" id="kobo.3150.1">
      ...
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3151.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3152.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3153.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3154.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3155.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3156.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3157.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3158.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3159.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3160.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3161.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3162.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3163.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3164.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3165.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3166.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3167.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3168.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3169.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3170.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3171.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3172.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3173.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3174.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3175.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3176.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3177.1">app-leader-board</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3178.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3179.1">app-leader-board</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3180.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3181.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3182.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3183.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3184.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3185.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3186.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3187.1">Now, we’ll add a label for each step. </span><span class="koboSpan" id="kobo.3187.2">We need to add an </span><code class="inlineCode"><span class="koboSpan" id="kobo.3188.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.3189.1"> element inside each </span><code class="inlineCode"><span class="koboSpan" id="kobo.3190.1">&lt;cdk-step&gt;</span></code><span class="koboSpan" id="kobo.3191.1"> element. </span><span class="koboSpan" id="kobo.3191.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3192.1">game.component.html</span></code><span class="koboSpan" id="kobo.3193.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3194.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3195.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3196.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3197.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3198.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3199.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3200.1">&lt;</span></span><span class="code-highlight"><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3201.1">ng-template</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3202.1">cdkStepLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3203.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3204.1">Enter your name</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3205.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3206.1">ng-</span></strong></span>
<span class="code-highlight"><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3207.1">template</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3208.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3209.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3210.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3211.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3212.1">ngSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3213.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3214.1">"submitName()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3215.1">     [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3216.1">formGroup</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3217.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3218.1">"nameForm"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3219.1">&gt;</span></span><span class="koboSpan" id="kobo.3220.1">
      ...
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3221.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3222.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3223.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3224.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3225.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3226.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3227.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3228.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3229.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3230.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3231.1">ng-template</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3232.1">cdkStepLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3233.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3234.1">Guess what the value will be when the die is rolled</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3235.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3236.1">ng-template</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3237.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3238.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3239.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3240.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3241.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3242.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3243.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3244.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3245.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3246.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3247.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3248.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3249.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3250.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3251.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3252.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3253.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3254.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3255.1">ng-template</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3256.1">cdkStepLabel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3257.1">&gt;</span></span><span class="koboSpan" id="kobo.3258.1">Results</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3259.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3260.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3261.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3262.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3263.1">app-leader-board</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3264.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3265.1">app-leader-board</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3266.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3267.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3268.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3269.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3270.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3271.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3272.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3273.1">If you refresh the app, you should</span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.3274.1"> see the first step as the visible</span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.3275.1"> step, as well as the bottom navigation button, as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.3276.1"><img alt="" role="presentation" src="../Images/B18469_09_14.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.3277.1">Figure 9.14: The first step and the navigation button using CDKStepper</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="12"><span class="koboSpan" id="kobo.3278.1">Now, we need to make sure</span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.3279.1"> that we can only move forward</span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.3280.1"> to the second step once we have entered a name in the first step. </span><span class="koboSpan" id="kobo.3280.2">Make the following changes to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3281.1">game.component.html</span></code><span class="koboSpan" id="kobo.3282.1"> file:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3283.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3284.1">app-game-stepper</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3285.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3286.1">linear</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3287.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3288.1">"true"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3289.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3290.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3291.1">cdk-step</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3292.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3293.1">completed</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3294.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3295.1">"!!nameForm.get('name')!.value"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3296.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3297.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3298.1">ng-template</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3299.1">cdkStepLabel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3300.1">&gt;</span></span><span class="koboSpan" id="kobo.3301.1"> Enter your
      name</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3302.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3303.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3304.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3305.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3306.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3307.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3308.1">ngSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3309.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3310.1">"submitName()"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3311.1">     [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3312.1">formGroup</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3313.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3314.1">"nameForm"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3315.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3316.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3317.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3318.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3319.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3320.1">"mb-3"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3321.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3322.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3323.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3324.1">"nameForm.get('name') as</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.3325.1">        nameControl"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3326.1">&gt;</span></span><span class="koboSpan" id="kobo.3327.1">
        ...
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3328.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3329.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3330.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3331.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3332.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3333.1"> ← </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3334.1">REMOVE</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3335.1">THIS</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3336.1">type</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3337.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3338.1">"submit"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3339.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3340.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3341.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3342.1">"!nameForm.valid"</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3343.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3344.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3345.1">"btn btn-primary"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3346.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3347.1">Submit</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3348.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3349.1">button</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3350.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3351.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3352.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3353.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3354.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3355.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3356.1">&gt;</span></span><span class="koboSpan" id="kobo.3357.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3358.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3359.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3360.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3361.1">We also need to disable the next button on the first step until we have entered a value for the player’s name. </span><span class="koboSpan" id="kobo.3361.2">To do so, update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3362.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.3363.1"> file—specifically, the element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3364.1">cdkStepperNext</span></code><span class="koboSpan" id="kobo.3365.1"> attribute—as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3366.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3367.1">section</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3368.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3369.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3370.1">"game-stepper"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3371.1">&gt;</span></span><span class="koboSpan" id="kobo.3372.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3373.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3374.1">footer</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3375.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3376.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3377.1">"game-stepper__navigation"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3378.1">&gt;</span></span><span class="koboSpan" id="kobo.3379.1">
    ...
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3380.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3381.1">button</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3382.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3383.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3384.1">"game-stepper__navigation__button btn</span></span>
<span class="hljs-attr"> </span><span class="hljs-string"><span class="koboSpan" id="kobo.3385.1">       btn-primary"</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3386.1">cdkStepperNext</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3387.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3388.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3389.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3390.1">"!selected!.completed"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3391.1">      [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3392.1">style.visibility</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3393.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3394.1">"steps.get(selectedIndex + 1) ?</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.3395.1">        'visible' : 'hidden'"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3396.1">    &gt;</span></span>
<span class="hljs-symbol"><span class="koboSpan" id="kobo.3397.1">&amp;rarr;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3398.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3399.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3400.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3401.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3402.1">footer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3403.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3404.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3405.1">section</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3406.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3407.1">To handle the case when the user</span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.3408.1"> provides the name</span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.3409.1"> and hits the </span><em class="italic"><span class="koboSpan" id="kobo.3410.1">Enter</span></em><span class="koboSpan" id="kobo.3411.1"> key, resulting in the form submission, we can move to the next step using a </span><code class="inlineCode"><span class="koboSpan" id="kobo.3412.1">@ViewChild()</span></code><span class="koboSpan" id="kobo.3413.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3414.1">GameComponent</span></code><span class="koboSpan" id="kobo.3415.1"> class. </span><span class="koboSpan" id="kobo.3415.2">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3416.1">game.component.ts</span></code><span class="koboSpan" id="kobo.3417.1"> file as follows, and try entering the name and then pressing the </span><em class="italic"><span class="koboSpan" id="kobo.3418.1">Enter</span></em><span class="koboSpan" id="kobo.3419.1"> key:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.3420.1">import</span></span><span class="koboSpan" id="kobo.3421.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.3422.1">CommonModule</span></span><span class="koboSpan" id="kobo.3423.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3424.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3425.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.3426.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3427.1">import</span></span><span class="koboSpan" id="kobo.3428.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.3429.1">Component</span></span><span class="koboSpan" id="kobo.3430.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3431.1">ViewChild</span></strong></span><span class="koboSpan" id="kobo.3432.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3433.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3434.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.3435.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3436.1">import</span></span><span class="koboSpan" id="kobo.3437.1"> { </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3438.1">CdkStepper</span></strong></span><span class="koboSpan" id="kobo.3439.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.3440.1">CdkStepperModule</span></span><span class="koboSpan" id="kobo.3441.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3442.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3443.1">'@angular/cdk/stepper'</span></span><span class="koboSpan" id="kobo.3444.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3445.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3446.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3447.1">GameComponent</span></span><span class="koboSpan" id="kobo.3448.1"> {
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.3449.1">@ViewChild</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3450.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3451.1">CdkStepper</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3452.1">) stepper!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3453.1">CdkStepper</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3454.1">;</span></strong></span><span class="koboSpan" id="kobo.3455.1">
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.3456.1">submitName</span></span><span class="koboSpan" id="kobo.3457.1">() {
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3458.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3459.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3460.1">stepper</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3461.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3462.1">next</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3463.1">();</span></strong></span><span class="koboSpan" id="kobo.3464.1">
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3465.1">Now, let’s write the flow for guessing the number. </span><span class="koboSpan" id="kobo.3465.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3466.1">game.component.ts</span></code><span class="koboSpan" id="kobo.3467.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.3468.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3469.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3470.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3471.1">IDiceSide</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3472.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3473.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3474.1">'../interfaces/dice.interface'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3475.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.3476.1">@Component</span></span><span class="koboSpan" id="kobo.3477.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3478.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3479.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3480.1">GameComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3481.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3482.1">OnInit</span></span><span class="koboSpan" id="kobo.3483.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.3484.1">@ViewChild</span></span><span class="koboSpan" id="kobo.3485.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.3486.1">CdkStepper</span></span><span class="koboSpan" id="kobo.3487.1">) </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3488.1">stepper</span></span><span class="koboSpan" id="kobo.3489.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.3490.1">CdkStepper</span></span><span class="koboSpan" id="kobo.3491.1">;
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.3492.1">@ViewChild</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3493.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3494.1">DiceComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3495.1">) diceComponent!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3496.1">DiceComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3497.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.3498.1">@ViewChild</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3499.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3500.1">ValueGuesserComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3501.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3502.1">valueGuesserComponent!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3503.1">ValueGuesserComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3504.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3505.1">guessedValue</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3506.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.3507.1">number</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3508.1"> | </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.3509.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3510.1"> = </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.3511.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3512.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3513.1">isCorrectGuess</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3514.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.3515.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3516.1"> | </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.3517.1">boolean</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3518.1"> = </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.3519.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3520.1">;</span></strong></span><span class="koboSpan" id="kobo.3521.1">
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.3522.1">submitName</span></span><span class="koboSpan" id="kobo.3523.1">() {...}
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3524.1">rollTheDice</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3525.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3526.1">guessedValue</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.3527.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.3528.1">number</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3529.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3530.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3531.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3532.1">isCorrectGuess</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3533.1"> = </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.3534.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3535.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3536.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3537.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3538.1">guessedValue</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3539.1"> = guessedValue;</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3540.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3541.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3542.1">diceComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3543.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3544.1">rollDice</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3545.1">();</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3546.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3547.1">showResult</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3548.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3549.1">diceSide</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.3550.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3551.1">IDiceSide</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3552.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3553.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3554.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3555.1">isCorrectGuess</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3556.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3557.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3558.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3559.1">guessedValue</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3560.1"> ===</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3561.1">diceSide.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3562.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3563.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3564.1">}</span></strong></span><span class="koboSpan" id="kobo.3565.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3566.1">Now that we have the functions</span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.3567.1"> in place, let’s update</span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.3568.1"> the template to listen to the event listeners from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3569.1">&lt;app-value-guesser&gt;</span></code><span class="koboSpan" id="kobo.3570.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.3571.1">&lt;app-dice&gt;</span></code><span class="koboSpan" id="kobo.3572.1"> components and act accordingly. </span><span class="koboSpan" id="kobo.3572.2">We’ll also add elements with class alerts to show messages in case of a successful or wrong guess. </span><span class="koboSpan" id="kobo.3572.3">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3573.1">game.component.html</span></code><span class="koboSpan" id="kobo.3574.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3575.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3576.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3577.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3578.1">linear</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3579.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3580.1">"true"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3581.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3582.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3583.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3584.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3585.1">completed</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3586.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3587.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3588.1">!!nameForm.get('name').value"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3589.1">&gt;</span></span><span class="koboSpan" id="kobo.3590.1">
    ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3591.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3592.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3593.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3594.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3595.1">cdk-step</span></span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3596.1"> [</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3597.1">completed</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3598.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3599.1">"isCorrectGuess !== null"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3600.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3601.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3602.1">ng-template</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3603.1">cdkStepLabel</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3604.1">      &gt;</span></span><span class="koboSpan" id="kobo.3605.1">Guess what the value will be when the die is
        rolled&lt;/ng-template
    &gt;
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3606.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3607.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3608.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3609.1">rolling</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3610.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3611.1">"rolling"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3612.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3613.1">valueGuessed</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3614.1">)=</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3615.1">"rollTheDice($event)"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3616.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3617.1">app-value-guesser</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3618.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3619.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3620.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3621.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3622.1">diceRolling</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3623.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3624.1">"rolling = $event;"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3625.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3626.1">diceRolled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3627.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3628.1">"showResult($event)"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3629.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3630.1">app-dice</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3631.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3632.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3633.1">ng-container</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3634.1"> [</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3635.1">ngSwitch</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3636.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3637.1">"isCorrectGuess"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3638.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3639.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3640.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3641.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3642.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3643.1">"alert alert-success"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3644.1">*</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3645.1">ngSwitchCase</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3646.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3647.1">"true"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3648.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3649.1">You rock {{ nameForm.get('name')!.value }}! </span><span class="koboSpan" id="kobo.3649.2">You got</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3650.1">50 points</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3651.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3652.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3653.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3654.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3655.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3656.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3657.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3658.1">"alert alert-danger"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3659.1">*</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3660.1">ngSwitchCase</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3661.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3662.1">"false"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3663.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3664.1">Oops! </span><span class="koboSpan" id="kobo.3664.2">Try again!</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3665.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3666.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3667.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3668.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3669.1">ng-container</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3670.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3671.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3672.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3673.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3674.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3675.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3676.1">&gt;</span></span><span class="koboSpan" id="kobo.3677.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3678.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3679.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3680.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3681.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3682.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3683.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3684.1">Finally, we need to populate</span><a id="_idIndexMarker713"/><span class="koboSpan" id="kobo.3685.1"> the leaderboards. </span><span class="koboSpan" id="kobo.3685.2">Update</span><a id="_idIndexMarker714"/><span class="koboSpan" id="kobo.3686.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3687.1">game.component.ts</span></code><span class="koboSpan" id="kobo.3688.1"> file to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3689.1">LeaderboardService</span></code><span class="koboSpan" id="kobo.3690.1"> class, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.3691.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3692.1">import</span></span><span class="koboSpan" id="kobo.3693.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.3694.1">Component</span></span><span class="koboSpan" id="kobo.3695.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.3696.1">ViewChild</span></span><span class="koboSpan" id="kobo.3697.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3698.1">inject</span></strong></span><span class="koboSpan" id="kobo.3699.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3700.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3701.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.3702.1">;
...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3703.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3704.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3705.1">LeaderboardService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3706.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3707.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3708.1">'../services/leaderboard.service'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3709.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3710.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3711.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3712.1">IScore</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3713.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3714.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3715.1">'../interfaces/score.interface'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3716.1">;</span></strong></span><span class="koboSpan" id="kobo.3717.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3718.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3719.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3720.1">GameComponent</span></span><span class="koboSpan" id="kobo.3721.1"> {
  ...
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3722.1">leaderboardService = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3723.1">inject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3724.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3725.1">LeaderboardService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3726.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3727.1">scores</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3728.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3729.1">IScore</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3730.1">[] = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3731.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3732.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3733.1">leaderboardService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3734.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3735.1">getScores</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3736.1">();</span></strong></span><span class="koboSpan" id="kobo.3737.1">
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.3738.1">showResult</span></span><span class="koboSpan" id="kobo.3739.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.3740.1">diceSide</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.3741.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.3742.1">IDiceSide</span></span><span class="koboSpan" id="kobo.3743.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3744.1">this</span></span><span class="koboSpan" id="kobo.3745.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3746.1">isCorrectGuess</span></span><span class="koboSpan" id="kobo.3747.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3748.1">this</span></span><span class="koboSpan" id="kobo.3749.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3750.1">guessedValue</span></span><span class="koboSpan" id="kobo.3751.1"> ===
      diceSide.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3752.1">value</span></span><span class="koboSpan" id="kobo.3753.1">;
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3754.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3755.1"> userName = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3756.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3757.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3758.1">nameForm</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3759.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3760.1">controls</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3761.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3762.1">name</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3763.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3764.1">value</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3765.1">as</span></strong></span>
<span class="code-highlight"><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.3766.1">string</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3767.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3768.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3769.1"> (!</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3770.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3771.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3772.1">isCorrectGuess</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3773.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.3774.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3775.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3776.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3777.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3778.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3779.1">scores</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3780.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.3781.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3782.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.3783.1">leaderboardService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3784.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.3785.1">setScores</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3786.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3787.1">name</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3788.1">: userName,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3789.1">score</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3790.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.3791.1">50</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.3792.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3793.1">});</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3794.1">}</span></strong></span><span class="koboSpan" id="kobo.3795.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3796.1">Now, update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3797.1">game.component.html</span></code><span class="koboSpan" id="kobo.3798.1"> file to pass the scores as an attribute to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3799.1">&lt;app-leader-board&gt;</span></code><span class="koboSpan" id="kobo.3800.1"> component, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3801.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3802.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3803.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3804.1">linear</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3805.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3806.1">"true"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3807.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3808.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3809.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3810.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3811.1">completed</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3812.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3813.1">"!!nameForm.get('name')!</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.3814.1">    .value"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3815.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3816.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3817.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3818.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3819.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3820.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3821.1">completed</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3822.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3823.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3824.1">isCorrectGuess !== null"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3825.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3826.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3827.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3828.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3829.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3830.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3831.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3832.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3833.1">ng-template</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3834.1">cdkStepLabel</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3835.1">&gt;</span></span><span class="koboSpan" id="kobo.3836.1">Results</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3837.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3838.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3839.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3840.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3841.1">app-leader-board</span></span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3842.1"> [</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3843.1">scores</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3844.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3845.1">"scores"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3846.1">&gt;</span></span><span class="koboSpan" id="kobo.3847.1">&lt;/app-leader-
    board&gt;
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3848.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3849.1">cdk-step</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3850.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3851.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3852.1">app-game-stepper</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3853.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3854.1">If you refresh the app now and play</span><a id="_idIndexMarker715"/><span class="koboSpan" id="kobo.3855.1"> the game, you should be able </span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.3856.1">to see the leaderboard, as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.3857.1"><img alt="" role="presentation" src="../Images/B18469_09_15.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.3858.1">Figure 9.15: Displaying results in the leaderboard at Step 3</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.3859.1">Phew! </span><span class="koboSpan" id="kobo.3859.2">That was a </span><em class="italic"><span class="koboSpan" id="kobo.3860.1">long</span></em><span class="koboSpan" id="kobo.3861.1"> recipe! </span><span class="koboSpan" id="kobo.3861.2">Well, perfection requires time and dedication. </span><span class="koboSpan" id="kobo.3861.3">Feel free to use this game yourself or even with your friends, and if you improve it, do let me know on my socials.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3862.1">Now that you’ve finished the recipe, see the next section on how this works.</span></p>
<h2 class="heading-2" id="_idParaDest-321"><span class="koboSpan" id="kobo.3863.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.3864.1">There are a lot of moving</span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.3865.1"> parts in this recipe, but they’re super</span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.3866.1"> easy. </span><span class="koboSpan" id="kobo.3866.2">First, we import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3867.1">CdkStepperModule</span></code><span class="koboSpan" id="kobo.3868.1"> class into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3869.1">imports</span></code><span class="koboSpan" id="kobo.3870.1"> array of our </span><code class="inlineCode"><span class="koboSpan" id="kobo.3871.1">GameComponent</span></code><span class="koboSpan" id="kobo.3872.1"> class. </span><span class="koboSpan" id="kobo.3872.2">Then, we create a component that extends the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3873.1">CdkStepper</span></code><span class="koboSpan" id="kobo.3874.1"> class. </span><span class="koboSpan" id="kobo.3874.2">The reason for extending the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3875.1">CdkStepper</span></code><span class="koboSpan" id="kobo.3876.1"> class is to be able to create this </span><code class="inlineCode"><span class="koboSpan" id="kobo.3877.1">GameStepperComponent</span></code><span class="koboSpan" id="kobo.3878.1"> component so that we can create a reusable template with some styles, and even some custom functionality.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3879.1">To start using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3880.1">GameStepperComponent</span></code><span class="koboSpan" id="kobo.3881.1"> component, we wrap the entire template within the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3882.1">&lt;app-game-stepper&gt;</span></code><span class="koboSpan" id="kobo.3883.1"> element in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3884.1">game.component.html</span></code><span class="koboSpan" id="kobo.3885.1"> file. </span><span class="koboSpan" id="kobo.3885.2">Since the component extends the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3886.1">CdkStepper</span></code><span class="koboSpan" id="kobo.3887.1"> API, we can use all the functionality of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3888.1">CdkStepper</span></code><span class="koboSpan" id="kobo.3889.1"> component here. </span><span class="koboSpan" id="kobo.3889.2">For each step, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3890.1">&lt;cdk-step&gt;</span></code><span class="koboSpan" id="kobo.3891.1"> element from the CDK and wrap the template of the step inside it. </span><span class="koboSpan" id="kobo.3891.2">Notice that in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3892.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.3893.1"> file, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3894.1">[ngTemplateOutlet]</span></code><span class="koboSpan" id="kobo.3895.1"> attribute for both the step’s label and the step’s actual content. </span><span class="koboSpan" id="kobo.3895.2">This is a reflection of how amazing the CDK Stepper API is. </span><span class="koboSpan" id="kobo.3895.3">Since our </span><code class="inlineCode"><span class="koboSpan" id="kobo.3896.1">GameStepperComponent</span></code><span class="koboSpan" id="kobo.3897.1"> class extends the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3898.1">CDKStepper</span></code><span class="koboSpan" id="kobo.3899.1"> class, it automatically generates a </span><code class="inlineCode"><span class="koboSpan" id="kobo.3900.1">label</span></code><span class="koboSpan" id="kobo.3901.1"> property and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3902.1">content</span></code><span class="koboSpan" id="kobo.3903.1"> property for each step based on the values/template we provide for each </span><code class="inlineCode"><span class="koboSpan" id="kobo.3904.1">&lt;cdk-step&gt;</span></code><span class="koboSpan" id="kobo.3905.1"> element in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3906.1">game.component.html</span></code><span class="koboSpan" id="kobo.3907.1"> file. </span><span class="koboSpan" id="kobo.3907.2">Since we provide an </span><code class="inlineCode"><span class="koboSpan" id="kobo.3908.1">&lt;ng-template cdkStepLabel&gt;</span></code><span class="koboSpan" id="kobo.3909.1"> inside each </span><code class="inlineCode"><span class="koboSpan" id="kobo.3910.1">&lt;cdk-step&gt;</span></code><span class="koboSpan" id="kobo.3911.1"> element in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3912.1">game.component.html</span></code><span class="koboSpan" id="kobo.3913.1"> file, the CDK generates a </span><code class="inlineCode"><span class="koboSpan" id="kobo.3914.1">step.stepLabel.template</span></code><span class="koboSpan" id="kobo.3915.1"> automatically for each step, which we then use inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3916.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.3917.1"> file, to show the label of each </span><code class="inlineCode"><span class="koboSpan" id="kobo.3918.1">&lt;cdk-step&gt;</span></code><span class="koboSpan" id="kobo.3919.1"> element respectively. </span><span class="koboSpan" id="kobo.3919.2">If we didn’t provide the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3920.1">&lt;ng-template cdkStepLabel&gt;</span></code><span class="koboSpan" id="kobo.3921.1"> for a step and rather just used </span><code class="inlineCode"><span class="koboSpan" id="kobo.3922.1">&lt;cdk-step label="someValue"&gt;</span></code><span class="koboSpan" id="kobo.3923.1">, it would then use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3924.1">step.label</span></code><span class="koboSpan" id="kobo.3925.1"> property as per our code written in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3926.1">game-stepper.component.html</span></code><span class="koboSpan" id="kobo.3927.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3928.1">For the bottom navigation buttons, you notice that we use </span><code class="inlineCode"><span class="koboSpan" id="kobo.3929.1">&lt;button&gt;</span></code><span class="koboSpan" id="kobo.3930.1"> elements with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3931.1">cdkStepperPrevious</span></code><span class="koboSpan" id="kobo.3932.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.3933.1">cdkStepperNext</span></code><span class="koboSpan" id="kobo.3934.1"> directives for going to the previous step and the next step respectively. </span><span class="koboSpan" id="kobo.3934.2">We also show/hide the next and previous buttons based on the conditions to check if there is a step to go to. </span><span class="koboSpan" id="kobo.3934.3">To prevent the navigation button from being rendered in the DOM when the provided condition is false, we utilize the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3935.1">*ngIf</span></code><span class="koboSpan" id="kobo.3936.1"> binding to dynamically hide or show it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3937.1">One interesting thing about the CDK Stepper API is that we can tell whether the user should be able to go to the next steps and backward, regardless of the state of the current step, or whether the user should first do something in the current step to go to the next one. </span><span class="koboSpan" id="kobo.3937.2">The way we do it is by using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3938.1">[linear]</span></code><span class="koboSpan" id="kobo.3939.1"> attribute on our </span><code class="inlineCode"><span class="koboSpan" id="kobo.3940.1">&lt;app-game-stepper&gt;</span></code><span class="koboSpan" id="kobo.3941.1"> element, setting its value to </span><code class="inlineCode"><span class="koboSpan" id="kobo.3942.1">true</span></code><span class="koboSpan" id="kobo.3943.1">. </span><span class="koboSpan" id="kobo.3943.2">This tells the CDK Stepper API to not move to the next step using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3944.1">cdkStepperNext</span></code><span class="koboSpan" id="kobo.3945.1"> button, until the current step’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.3946.1">completed</span></code><span class="koboSpan" id="kobo.3947.1"> property is </span><code class="inlineCode"><span class="koboSpan" id="kobo.3948.1">true</span></code><span class="koboSpan" id="kobo.3949.1">. </span><span class="koboSpan" id="kobo.3949.2">While just providing </span><code class="inlineCode"><span class="koboSpan" id="kobo.3950.1">[linear]="true"</span></code><span class="koboSpan" id="kobo.3951.1"> is enough to handle the functionality, we improve the UX by disabling the </span><strong class="screenText"><span class="koboSpan" id="kobo.3952.1">Next</span></strong><span class="koboSpan" id="kobo.3953.1"> button—in this case, by using </span><code class="inlineCode"><span class="koboSpan" id="kobo.3954.1">[disabled]="!selected!.completed"</span></code><span class="koboSpan" id="kobo.3955.1"> on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3956.1">cdkStepperNext</span></code><span class="koboSpan" id="kobo.3957.1"> button, as it makes more sense to just disable the button if it isn’t going to do anything on click.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3958.1">Also, we needed to decide when a step is considered complete. </span><span class="koboSpan" id="kobo.3958.2">For the first step, it is obvious that we should have a name entered in the input to consider the step completed—or, in other words, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3959.1">FormControl</span></code><span class="koboSpan" id="kobo.3960.1"> for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3961.1">'name'</span></code><span class="koboSpan" id="kobo.3962.1"> property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3963.1">nameForm </span></code><span class="koboSpan" id="kobo.3964.1">Form Group should have a value. </span><span class="koboSpan" id="kobo.3964.2">For the second step, it is bound to the condition </span><code class="inlineCode"><span class="koboSpan" id="kobo.3965.1">isCorrectGuess !== null</span></code><span class="koboSpan" id="kobo.3966.1">. </span><span class="koboSpan" id="kobo.3966.2">This ensures that the user has guessed a number; regardless of whether the guess is correct or not, we mark the step as completed and let the user go to the next step (the leaderboard) if the user wants to. </span><span class="koboSpan" id="kobo.3966.3">And that’s pretty much about it. </span><span class="koboSpan" id="kobo.3966.4">You could go beyond the recipe</span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.3967.1"> to add an option of restarting</span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.3968.1"> the game from the leaderboard (last) step.</span></p>
<h2 class="heading-2" id="_idParaDest-322"><span class="koboSpan" id="kobo.3969.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.3970.1">Angular CDK Stepper</span><a id="_idIndexMarker721"/><span class="koboSpan" id="kobo.3971.1"> examples: </span><a href="https://material.angular.io/cdk/stepper/examples"><span class="url"><span class="koboSpan" id="kobo.3972.1">https://material.angular.io/cdk/stepper/examples</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-323"><span class="koboSpan" id="kobo.3973.1">Accessible listbox interactions using CDK Listbox directives</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3974.1">Accessibility is one of the key aspects</span><a id="_idIndexMarker722"/><span class="koboSpan" id="kobo.3975.1"> to focus on when you’re thinking</span><a id="_idIndexMarker723"/><span class="koboSpan" id="kobo.3976.1"> about your end users using your applications. </span><span class="koboSpan" id="kobo.3976.2">One of the major use cases for the users is to make a selection in apps, whether that’s selecting the color or size of a product or selecting multiple labels for a post. </span><span class="koboSpan" id="kobo.3976.3">It makes it such a good experience if the experience is accessible. </span><span class="koboSpan" id="kobo.3976.4">In this recipe, we’re going to replace</span><a id="_idIndexMarker724"/><span class="koboSpan" id="kobo.3977.1"> a color selection feature for products with an accessible alternative using the </span><strong class="keyWord"><span class="koboSpan" id="kobo.3978.1">Angular CDK Listbox APIs</span></strong><span class="koboSpan" id="kobo.3979.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-324"><span class="koboSpan" id="kobo.3980.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.3981.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.3982.1">start/apps/chapter09/ng-cdk-listbox</span></code><span class="koboSpan" id="kobo.3983.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.3984.1">Open the code</span><a id="_idIndexMarker725"/><span class="koboSpan" id="kobo.3985.1"> repository</span><a id="_idIndexMarker726"/><span class="koboSpan" id="kobo.3986.1"> in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.3987.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.3988.1">npm run serve ng-cdk-listbox
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3989.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.3990.1"><img alt="" role="presentation" src="../Images/B18469_09_16.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.3991.1">Figure 9.16: The ng-cdk-listbox app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.3992.1">Now that we have the app running locally, let’s see the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-325"><span class="koboSpan" id="kobo.3993.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.3994.1">In </span><em class="italic"><span class="koboSpan" id="kobo.3995.1">Figure 9.16</span></em><span class="koboSpan" id="kobo.3996.1">, you will notice that we have options for selecting the product color—and if you click one of them, you can see the selected color on the right side. </span><span class="koboSpan" id="kobo.3996.2">Even though they are somewhat accessible, they do not completely follow any of the WAI ARIA patterns. </span><span class="koboSpan" id="kobo.3996.3">Let’s use the CDK Listbox module by following these steps:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.3997.1">Now, we need to import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3998.1">CdkListboxModule</span></code><span class="koboSpan" id="kobo.3999.1"> class into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4000.1">imports</span></code><span class="koboSpan" id="kobo.4001.1"> array of our </span><code class="inlineCode"><span class="koboSpan" id="kobo.4002.1">ProductCardComponent</span></code><span class="koboSpan" id="kobo.4003.1"> class so we can use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4004.1">cdkListbox</span></code><span class="koboSpan" id="kobo.4005.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.4006.1">cdkOptions</span></code><span class="koboSpan" id="kobo.4007.1"> directives. </span><span class="koboSpan" id="kobo.4007.2">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4008.1">product-card.component.ts</span></code><span class="koboSpan" id="kobo.4009.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.4010.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.4011.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4012.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4013.1">CdkListboxModule</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4014.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.4015.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4016.1">'@angular/cdk/listbox'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4017.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.4018.1">@Component</span></span><span class="koboSpan" id="kobo.4019.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4020.1">imports</span></span><span class="koboSpan" id="kobo.4021.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.4022.1">CommonModule</span></span><span class="koboSpan" id="kobo.4023.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.4024.1">ReactiveFormsModule</span></span><span class="koboSpan" id="kobo.4025.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4026.1">CdkListboxModule</span></strong></span><span class="koboSpan" id="kobo.4027.1">],
  ...
</span><span class="koboSpan" id="kobo.4027.2">})
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.4028.1">Now, we’ll replace the HTML</span><a id="_idIndexMarker727"/><span class="koboSpan" id="kobo.4029.1"> template to use</span><a id="_idIndexMarker728"/><span class="koboSpan" id="kobo.4030.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4031.1">cdkListbox</span></code><span class="koboSpan" id="kobo.4032.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.4033.1">cdkOption</span></code><span class="koboSpan" id="kobo.4034.1"> directives. </span><span class="koboSpan" id="kobo.4034.2">We will be using an unordered list (</span><code class="inlineCode"><span class="koboSpan" id="kobo.4035.1">ul</span></code><span class="koboSpan" id="kobo.4036.1">) and list items (</span><code class="inlineCode"><span class="koboSpan" id="kobo.4037.1">li</span></code><span class="koboSpan" id="kobo.4038.1"> elements) to render a similar color list. </span><span class="koboSpan" id="kobo.4038.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4039.1">product-card.component.html</span></code><span class="koboSpan" id="kobo.4040.1"> file between the mentioned HTML comments as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.4041.1">&lt;!-- Color Options --&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4042.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4043.1">ul</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4044.1">cdkListbox</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4045.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4046.1">tabindex</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4047.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4048.1">"0"</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4049.1">aria-labelledby</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4050.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4051.1">"product-colors"</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4052.1">cdkListboxOrientation</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4053.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4054.1">"horizontal"</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4055.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4056.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4057.1">"flex flex-wrap justify-center gap-1</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4058.1">[&amp;:hover_li]:opacity-75"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4059.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4060.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4061.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4062.1">cdkOption</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4063.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4064.1">"space-gray"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4065.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4066.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4067.1">"color-option</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4068.1">color-option--space-gray"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4069.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4070.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4071.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4072.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4073.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4074.1">cdkOption</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4075.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4076.1">"silver"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4077.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4078.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4079.1">"color-option</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4080.1">color-option--silver"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4081.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4082.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4083.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4084.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4085.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4086.1">cdkOption</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4087.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4088.1">"pink"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4089.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4090.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4091.1">"color-option color-</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4092.1">option--pink"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4093.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4094.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4095.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4096.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4097.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4098.1">cdkOption</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4099.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4100.1">"green"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4101.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4102.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4103.1">"color-option</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4104.1">color-option--green"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4105.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4106.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4107.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4108.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4109.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4110.1">cdkOption</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4111.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4112.1">"blue"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4113.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4114.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4115.1">"</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4116.1">color-option color-</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4117.1">option--blue"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4118.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4119.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4120.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4121.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4122.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4123.1">&gt;</span></strong></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.4124.1">&lt;!-- Color Options end --&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4125.1">You’ll notice that the options still look the same (because of the CSS classes); however, the functionality is gone now.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.4126.1">Let’s also add some styles</span><a id="_idIndexMarker729"/><span class="koboSpan" id="kobo.4127.1"> to highlight the selected</span><a id="_idIndexMarker730"/><span class="koboSpan" id="kobo.4128.1"> color. </span><span class="koboSpan" id="kobo.4128.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4129.1">color-options.scss</span></code><span class="koboSpan" id="kobo.4130.1"> file inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4131.1">src/styles</span></code><span class="koboSpan" id="kobo.4132.1"> folder as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-selector-class"><span class="koboSpan" id="kobo.4133.1">.color-option</span></span><span class="koboSpan" id="kobo.4134.1"> {
  ...
  </span><span class="koboSpan" id="kobo.4134.2">&amp;</span><span class="hljs-attr"><span class="koboSpan" id="kobo.4135.1">--active</span></span><span class="koboSpan" id="kobo.4136.1">,
  &amp;</span><span class="hljs-selector-attr"><span class="koboSpan" id="kobo.4137.1">[aria-selected=true]</span></span><span class="koboSpan" id="kobo.4138.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.4139.1">@apply</span></span><span class="koboSpan" id="kobo.4140.1"> scale-</span><span class="hljs-number"><span class="koboSpan" id="kobo.4141.1">125</span></span><span class="koboSpan" id="kobo.4142.1">;
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.4143.1">Since Angular CDK Listbox works with both template-driven and reactive forms, let’s add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4144.1">formControlName</span></code><span class="koboSpan" id="kobo.4145.1"> attribute to bind it with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4146.1">color</span></code><span class="koboSpan" id="kobo.4147.1"> form control from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4148.1">productForm</span></code><span class="koboSpan" id="kobo.4149.1"> form group. </span><span class="koboSpan" id="kobo.4149.2">Update the template further as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.4150.1">&lt;!-- Color Options --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4151.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4152.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4153.1">cdkListbox</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4154.1">          [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.4155.1">tabindex</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4156.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4157.1">"0"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4158.1">formControlName</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4159.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4160.1">"color"</span></strong><strong class="hljs-tag-slc"> </strong></span><span class="hljs-attr"><span class="koboSpan" id="kobo.4161.1">...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4162.1">&gt;</span></span><span class="koboSpan" id="kobo.4163.1">
          ...
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.4164.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4165.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4166.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.4167.1">&lt;!-- Color Options end →</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4168.1">Great! </span><span class="koboSpan" id="kobo.4168.2">With this change, when you refresh the page and pick a color, you should be able to see the desired result as before.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.4169.1">Angular CDK implements WAI ARIA and, therefore, it is also possible to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4170.1">typeahead</span></code><span class="koboSpan" id="kobo.4171.1"> feature in the listbox. </span><span class="koboSpan" id="kobo.4171.2">Let’s modify the template further to make it work:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.4172.1">&lt;!-- Color Options --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4173.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4174.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4175.1">cdkListbox</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4176.1">...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4177.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4178.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4179.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4180.1">cdkOption</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4181.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4182.1">"space-gray"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4183.1">cdkOptionTypeaheadLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4184.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4185.1">"space gray"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4186.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4187.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4188.1">"color-option color-option--space-gray"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4189.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4190.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4191.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4192.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4193.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4194.1">cdkOption</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4195.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4196.1">"silver"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4197.1">cdkOptionTypeaheadLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4198.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4199.1">"silver"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4200.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4201.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4202.1">"color-option color-option--silver"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4203.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4204.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4205.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4206.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4207.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4208.1">cdkOption</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4209.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4210.1">"pink"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4211.1">cdkOptionTypeaheadLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4212.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4213.1">"pink"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4214.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4215.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4216.1">"color-option color-option--pink"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4217.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4218.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4219.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4220.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4221.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4222.1">cdkOption</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4223.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4224.1">"green"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4225.1">cdkOptionTypeaheadLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4226.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4227.1">"green"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4228.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4229.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4230.1">"color-option color-option--green"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4231.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4232.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4233.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4234.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4235.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4236.1">cdkOption</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4237.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4238.1">"blue"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4239.1">cdkOptionTypeaheadLabel</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4240.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4241.1">"blue"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4242.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4243.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4244.1">"color-option color-option--blue"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4245.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4246.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4247.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4248.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4249.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4250.1">&gt;</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.4251.1">&lt;!-- Color Options end --&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4252.1">If you select any color and focus</span><a id="_idIndexMarker731"/><span class="koboSpan" id="kobo.4253.1"> on the list box, you can type</span><a id="_idIndexMarker732"/><span class="koboSpan" id="kobo.4254.1"> the name of the color here to jump directly to the option.</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.4255.1">Awesome!! </span><span class="koboSpan" id="kobo.4255.2">You’ve finished the recipe. </span><span class="koboSpan" id="kobo.4255.3">Now you can see the next section to understand how it works.</span></p>
<h2 class="heading-2" id="_idParaDest-326"><span class="koboSpan" id="kobo.4256.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.4257.1">In the recipe, we’ve used the CDK Listbox API. </span><span class="koboSpan" id="kobo.4257.2">And it is super cool that it completely implements the WAI ARIA pattern for the listbox. </span><span class="koboSpan" id="kobo.4257.3">Kudos to the Angular team. </span><span class="koboSpan" id="kobo.4257.4">To start, we import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4258.1">CdkListboxModule</span></code><span class="koboSpan" id="kobo.4259.1"> in our standalone component (</span><code class="inlineCode"><span class="koboSpan" id="kobo.4260.1">ProductCardComponent</span></code><span class="koboSpan" id="kobo.4261.1"> class) in its </span><code class="inlineCode"><span class="koboSpan" id="kobo.4262.1">imports</span></code><span class="koboSpan" id="kobo.4263.1"> array. </span><span class="koboSpan" id="kobo.4263.2">Then we use an unordered list, </span><code class="inlineCode"><span class="koboSpan" id="kobo.4264.1">&lt;ul&gt;</span></code><span class="koboSpan" id="kobo.4265.1">, in the template along with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4266.1">cdkListbox</span></code><span class="koboSpan" id="kobo.4267.1"> directive. </span><span class="koboSpan" id="kobo.4267.2">This applies the CDK Listbox features to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4268.1">&lt;ul&gt;</span></code><span class="koboSpan" id="kobo.4269.1"> element. </span><span class="koboSpan" id="kobo.4269.2">You’ll notice that we’re using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4270.1">aria-labelledby</span></code><span class="koboSpan" id="kobo.4271.1"> attribute on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4272.1">&lt;ul&gt;</span></code><span class="koboSpan" id="kobo.4273.1"> according to the WAI ARIA pattern for the listbox. </span><span class="koboSpan" id="kobo.4273.2">Finally, we have the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4274.1">cdkListboxOrientation</span></code><span class="koboSpan" id="kobo.4275.1"> attribute set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.4276.1">"horizontal"</span></code><span class="koboSpan" id="kobo.4277.1">, which tells the CDK Listbox API to allow horizontal navigation for this listbox; i.e., we can navigate with the left and right arrow keys. </span><span class="koboSpan" id="kobo.4277.2">I would encourage </span><a id="_idIndexMarker733"/><span class="koboSpan" id="kobo.4278.1">you to read the Listbox specification at </span><a href="https://www.w3.org/WAI/ARIA/apg/patterns/listbox/"><span class="url"><span class="koboSpan" id="kobo.4279.1">https://www.w3.org/WAI/ARIA/apg/patterns/listbox/</span></span></a><span class="koboSpan" id="kobo.4280.1"> to see the cool accessibility features it proposes. </span><span class="koboSpan" id="kobo.4280.2">And what’s amazing is that the Angular CDK Listbox APIs follow all of them.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4281.1">On top of following the WAI ARIA pattern for listboxes, the listbox itself works seamlessly with Angular forms (both template-driven and reactive). </span><span class="koboSpan" id="kobo.4281.2">And since we were already using a reactive form in the template of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4282.1">product-card</span></code><span class="koboSpan" id="kobo.4283.1"> component, we could easily use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4284.1">formControlName</span></code><span class="koboSpan" id="kobo.4285.1"> binding with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4286.1">&lt;ul&gt;</span></code><span class="koboSpan" id="kobo.4287.1"> element. </span><span class="koboSpan" id="kobo.4287.2">Notice that each list item </span><code class="inlineCode"><span class="koboSpan" id="kobo.4288.1">(&lt;li&gt;)</span></code><span class="koboSpan" id="kobo.4289.1"> element has the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4290.1">cdkOption</span></code><span class="koboSpan" id="kobo.4291.1"> binding, which tells the CDK Listbox module about the value of each option. </span><span class="koboSpan" id="kobo.4291.2">At the end of the recipe, we also introduced the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4292.1">cdkOptionTypeaheadLabel</span></code><span class="koboSpan" id="kobo.4293.1">, which helps the CDK Listbox API follow the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4294.1">typeahead</span></code><span class="koboSpan" id="kobo.4295.1"> feature of the WAI ARIA pattern recommendation. </span><span class="koboSpan" id="kobo.4295.2">If we don’t use this attribute, the CDK Listbox module uses the list item’s text content as the default </span><code class="inlineCode"><span class="koboSpan" id="kobo.4296.1">typeahead</span></code><span class="koboSpan" id="kobo.4297.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4298.1">You might have noticed that we also added another CSS selector in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4299.1">color-options.scss</span></code><span class="koboSpan" id="kobo.4300.1"> file, i.e., </span><code class="inlineCode"><span class="koboSpan" id="kobo.4301.1">&amp;[aria-selected=true]</span></code><span class="koboSpan" id="kobo.4302.1">, to highlight the selected color. </span><span class="koboSpan" id="kobo.4302.2">That’s because the CDK Listbox API automatically</span><a id="_idIndexMarker734"/><span class="koboSpan" id="kobo.4303.1"> sets that attribute</span><a id="_idIndexMarker735"/><span class="koboSpan" id="kobo.4304.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.4305.1">true</span></code><span class="koboSpan" id="kobo.4306.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.4307.1">false</span></code><span class="koboSpan" id="kobo.4308.1"> based on which item is selected. </span><span class="koboSpan" id="kobo.4308.2">And this too, is a part of the WAI ARIA pattern for listbox.</span></p>
<h2 class="heading-2" id="_idParaDest-327"><span class="koboSpan" id="kobo.4309.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.4310.1">CDK Listbox</span><a id="_idIndexMarker736"/><span class="koboSpan" id="kobo.4311.1"> documentation: </span><a href="https://material.angular.io/cdk/listbox/overview"><span class="url"><span class="koboSpan" id="kobo.4312.1">https://material.angular.io/cdk/listbox/overview</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.4313.1">WAI ARIA pattern</span><a id="_idIndexMarker737"/><span class="koboSpan" id="kobo.4314.1"> for listboxes: </span><a href="https://www.w3.org/WAI/ARIA/apg/patterns/listbox/"><span class="url"><span class="koboSpan" id="kobo.4315.1">https://www.w3.org/WAI/ARIA/apg/patterns/listbox/</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-328"><span class="koboSpan" id="kobo.4316.1">Working with nested menus using the Angular CDK Menu API</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.4317.1">Menus are vital for so many applications</span><a id="_idIndexMarker738"/><span class="koboSpan" id="kobo.4318.1"> we use today. </span><span class="koboSpan" id="kobo.4318.2">The pattern of having</span><a id="_idIndexMarker739"/><span class="koboSpan" id="kobo.4319.1"> a menu itself allows us to have experiences that don’t take up space in the DOM all the time and can be shown relative to their triggers </span><strong class="keyWord"><span class="koboSpan" id="kobo.4320.1">on demand</span></strong><span class="koboSpan" id="kobo.4321.1">. </span><span class="koboSpan" id="kobo.4321.2">In this recipe, you’ll learn how to create nested menus using the Angular CDK APIs.</span></p>
<h2 class="heading-2" id="_idParaDest-329"><span class="koboSpan" id="kobo.4322.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.4323.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.4324.1">start/apps/chapter09/ng-cdk-menu</span></code><span class="koboSpan" id="kobo.4325.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.4326.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.4327.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.4328.1">npm run serve ng-cdk-menu
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4329.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.4330.1"><img alt="" role="presentation" src="../Images/B18469_09_17.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.4331.1">Figure 9.17: The ng-cdk-menu app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.4332.1">Now that we have the app</span><a id="_idIndexMarker740"/><span class="koboSpan" id="kobo.4333.1"> running locally, let’s see the steps</span><a id="_idIndexMarker741"/><span class="koboSpan" id="kobo.4334.1"> of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-330"><span class="koboSpan" id="kobo.4335.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.4336.1">We have an application that has a product card that needs an actions menu so we can perform some actions. </span><span class="koboSpan" id="kobo.4336.2">We’ll start using the Angular CDK Menu APIs to implement a nested menu. </span><span class="koboSpan" id="kobo.4336.3">Let’s take the following steps: </span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.4337.1">Copy the styles from </span><a href="https://ng-cookbook.com/s/cdk-pane-styles"><span class="url"><span class="koboSpan" id="kobo.4338.1">https://ng-cookbook.com/s/cdk-pane-styles</span></span></a><span class="koboSpan" id="kobo.4339.1"> into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4340.1">styles.scss</span></code><span class="koboSpan" id="kobo.4341.1"> file in the project. </span><span class="koboSpan" id="kobo.4341.2">Make sure to keep the existing styles in your file and just add the ones you copied.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.4342.1">Import the components from the Angular CDK Menu APIs in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4343.1">product-card.component.ts</span></code><span class="koboSpan" id="kobo.4344.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.4345.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.4346.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4347.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4348.1">CdkMenu</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4349.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4350.1">CdkMenuItem</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4351.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4352.1">CdkMenuTrigger</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4353.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.4354.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4355.1">'@angular/cdk/menu'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4356.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.4357.1">@Component</span></span><span class="koboSpan" id="kobo.4358.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4359.1">imports</span></span><span class="koboSpan" id="kobo.4360.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.4361.1">CommonModule</span></span><span class="koboSpan" id="kobo.4362.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.4363.1">ReactiveFormsModule</span></span><span class="koboSpan" id="kobo.4364.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.4365.1">CdkListboxModule</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4366.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4367.1">CdkMenu</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4368.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4369.1">CdkMenuItem</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4370.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4371.1">CdkMenuTrigger</span></strong></span><span class="koboSpan" id="kobo.4372.1">],
  ...
</span><span class="koboSpan" id="kobo.4372.2">})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.4373.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.4374.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.4375.1">ProductCardComponent</span></span><span class="koboSpan" id="kobo.4376.1"> {...}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.4377.1">Let’s use some directives</span><a id="_idIndexMarker742"/><span class="koboSpan" id="kobo.4378.1"> in the template to create</span><a id="_idIndexMarker743"/><span class="koboSpan" id="kobo.4379.1"> a menu. </span><span class="koboSpan" id="kobo.4379.2">We’ll be using an </span><code class="inlineCode"><span class="koboSpan" id="kobo.4380.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.4381.1"> element for our menu and will assign it to a template variable. </span><span class="koboSpan" id="kobo.4381.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4382.1">product-card.component.html</span></code><span class="koboSpan" id="kobo.4383.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.4384.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4385.1">article</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4386.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4387.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4388.1">"block group shadow-md bg-white relative"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4389.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4390.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4391.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4392.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4393.1">cdkMenuTriggerFor</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4394.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4395.1">"productActions"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4396.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4397.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4398.1">"..."</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4399.1">&gt;</span></span><span class="koboSpan" id="kobo.4400.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.4401.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4402.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4403.1">&gt;</span></span><span class="koboSpan" id="kobo.4404.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.4405.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4406.1">article</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4407.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4408.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4409.1">ng-template</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4410.1"> #</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4411.1">productActions</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4412.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4413.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4414.1">ul</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4415.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4416.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4417.1">"menu-popover__list"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4418.1">cdkMenu</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4419.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4420.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4421.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4422.1">cdkMenuItem</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4423.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4424.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4425.1">"menu-popover__list__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4426.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4427.1">Share</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4428.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4429.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4430.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4431.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4432.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4433.1">cdkMenuItem</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4434.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4435.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4436.1">"menu-popover__list__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4437.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4438.1">Manage </span></strong><strong class="hljs-symbol-slc"><span class="koboSpan" id="kobo.4439.1">&amp;#10148;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4440.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4441.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4442.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4443.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4444.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4445.1">cdkMenuItem</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4446.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4447.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4448.1">"menu-popover__list__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4449.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4450.1">Preview</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4451.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4452.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4453.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4454.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4455.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4456.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4457.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4458.1">ng-template</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4459.1">&gt;</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4460.1">If you click the More button (three vertical dots icon) on the product card now, you should be able to see the menu as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.4461.1"><img alt="" role="presentation" src="../Images/B18469_09_18.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.4462.1">Figure 9.18: Menu implementation using Angular CDK Menu APIs</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4463.1">You’ll notice that the menu</span><a id="_idIndexMarker744"/><span class="koboSpan" id="kobo.4464.1"> starts from the bottom-left position</span><a id="_idIndexMarker745"/><span class="koboSpan" id="kobo.4465.1"> of the trigger. </span><span class="koboSpan" id="kobo.4465.2">This is the default menu position set by the Angular CDK Menu API. </span><span class="koboSpan" id="kobo.4465.3">We can override it using connected positions.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.4466.1">Let’s use some preferred connected positions so the menu is shown on the left side of the trigger by default. </span><span class="koboSpan" id="kobo.4466.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4467.1">product-card.component.ts</span></code><span class="koboSpan" id="kobo.4468.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.4469.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.4470.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4471.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4472.1">ConnectedPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4473.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.4474.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4475.1">'@angular/cdk/overlay'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4476.1">;</span></strong></span><span class="koboSpan" id="kobo.4477.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.4478.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.4479.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.4480.1">ProductCardComponent</span></span><span class="koboSpan" id="kobo.4481.1"> {
  ...
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4482.1">menuPositions</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4483.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.4484.1">ConnectedPosition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4485.1">[] = [</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4486.1">{</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4487.1">offsetY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4488.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.4489.1">4</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4490.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4491.1">originX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4492.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4493.1">'end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4494.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4495.1">originY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4496.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4497.1">'bottom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4498.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4499.1">overlayX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4500.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4501.1">'end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4502.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4503.1">overlayY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4504.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4505.1">'top'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4506.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4507.1">},</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4508.1">{</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4509.1">offsetY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4510.1">: -</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.4511.1">4</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4512.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4513.1">originX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4514.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4515.1">'end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4516.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4517.1">originY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4518.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4519.1">'top'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4520.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4521.1">overlayX</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4522.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4523.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4524.1">end'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4525.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4526.1">overlayY</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4527.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4528.1">'bottom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.4529.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4530.1">},</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4531.1">]</span></strong></span><span class="koboSpan" id="kobo.4532.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.4533.1">Let’s use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4534.1">menuPositions</span></code><span class="koboSpan" id="kobo.4535.1"> variable</span><a id="_idIndexMarker746"/><span class="koboSpan" id="kobo.4536.1"> in the template to use the preferred</span><a id="_idIndexMarker747"/><span class="koboSpan" id="kobo.4537.1"> positions. </span><span class="koboSpan" id="kobo.4537.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4538.1">product-card.component.html</span></code><span class="koboSpan" id="kobo.4539.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.4540.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4541.1">article</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4542.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4543.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4544.1">"block group shadow-md bg-white relative"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4545.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4546.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4547.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4548.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4549.1">cdkMenuPosition</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4550.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4551.1">"menuPositions"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4552.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.4553.1">cdkMenuTriggerFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4554.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4555.1">"productActions"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4556.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4557.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4558.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4559.1">..."</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4560.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4561.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4562.1">span</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4563.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4564.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4565.1">"material-symbols-outlined"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4566.1">&gt;</span></span><span class="koboSpan" id="kobo.4567.1">
      more_vert
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.4568.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4569.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4570.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4571.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4572.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4573.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4574.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4575.1">article</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4576.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4577.1">If you now refresh the app and click the More button (three vertical dots icon) on the product card, you should see the menu appearing on the left side of the button as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.4578.1"><img alt="" role="presentation" src="../Images/B18469_09_19.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.4579.1">Figure 9.19: Menu with preferred positions</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="6"><span class="koboSpan" id="kobo.4580.1">Let’s implement the nested</span><a id="_idIndexMarker748"/><span class="koboSpan" id="kobo.4581.1"> menu now. </span><span class="koboSpan" id="kobo.4581.2">We’ll create</span><a id="_idIndexMarker749"/><span class="koboSpan" id="kobo.4582.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4583.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.4584.1"> element for the nested menu and connect it with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4585.1">"Manage"</span></code><span class="koboSpan" id="kobo.4586.1"> menu item. </span><span class="koboSpan" id="kobo.4586.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4587.1">product-card.component.html</span></code><span class="koboSpan" id="kobo.4588.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.4589.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4590.1">article</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4591.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4592.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4593.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4594.1">block group shadow-md bg-white</span></span>
<span class="hljs-tag"> </span><span class="hljs-string"><span class="koboSpan" id="kobo.4595.1"> relative"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4596.1">&gt;</span></span><span class="koboSpan" id="kobo.4597.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.4598.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4599.1">article</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4600.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4601.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4602.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4603.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.4604.1">productActions</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4605.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4606.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4607.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4608.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4609.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4610.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4611.1">menu-popover__list"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4612.1">cdkMenu</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4613.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4614.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4615.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4616.1">cdkMenuItem</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4617.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4618.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4619.1">"menu-popover__list__item"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4620.1">&gt;</span></span><span class="koboSpan" id="kobo.4621.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.4622.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4623.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4624.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4625.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4626.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4627.1">cdkMenuItem</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4628.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4629.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4630.1">"menu-popover__list__item"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4631.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4632.1">cdkMenuTriggerFor</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4633.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4634.1">"productEditActions"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4635.1">&gt;</span></span><span class="koboSpan" id="kobo.4636.1">
      Manage </span><span class="hljs-symbol"><span class="koboSpan" id="kobo.4637.1">&amp;#10148;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4638.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4639.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4640.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4641.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4642.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4643.1">cdkMenuItem</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4644.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4645.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.4646.1">"menu-</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.4647.1">      popover__list__item"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4648.1">&gt;</span></span><span class="koboSpan" id="kobo.4649.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.4650.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4651.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4652.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4653.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4654.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4655.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.4656.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.4657.1">ng-template</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.4658.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4659.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4660.1">ng-template</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4661.1"> #</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4662.1">productEditActions</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4663.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4664.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4665.1">ul</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4666.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4667.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4668.1">"menu-popover__list"</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4669.1">cdkMenu</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4670.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4671.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4672.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4673.1">cdkMenuItem</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4674.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4675.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4676.1">"menu-popover__list__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4677.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4678.1">Duplicate</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4679.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4680.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4681.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4682.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4683.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4684.1">cdkMenuItem</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4685.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4686.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4687.1">"menu-popover__list__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4688.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4689.1">Edit</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4690.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4691.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4692.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4693.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4694.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4695.1">cdkMenuItem</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.4696.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4697.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.4698.1">"menu-popover__list__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4699.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.4700.1">Delete</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4701.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4702.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4703.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4704.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4705.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4706.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4707.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.4708.1">ng-template</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.4709.1">&gt;</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4710.1">With this change, you should</span><a id="_idIndexMarker750"/><span class="koboSpan" id="kobo.4711.1"> be able to see the nested menu</span><a id="_idIndexMarker751"/><span class="koboSpan" id="kobo.4712.1"> as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.4713.1"><img alt="" role="presentation" src="../Images/B18469_09_20.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.4714.1">Figure 9.20: Nested menu implementation</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.4715.1">Kaboom! </span><span class="koboSpan" id="kobo.4715.2">We were able to implement a nested menu in this application within a few steps by using the Angular CDK. </span><span class="koboSpan" id="kobo.4715.3">Trust me, if we had to do this on our own, this would’ve taken hours, or maybe days.</span></p>
<h2 class="heading-2" id="_idParaDest-331"><span class="koboSpan" id="kobo.4716.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.4717.1">The Angular CDK provides</span><a id="_idIndexMarker752"/><span class="koboSpan" id="kobo.4718.1"> the CDK Menu APIs, which include</span><a id="_idIndexMarker753"/><span class="koboSpan" id="kobo.4719.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4720.1">cdkMenuTriggerFor</span></code><span class="koboSpan" id="kobo.4721.1"> directive. </span><span class="koboSpan" id="kobo.4721.2">This directive ideally points to a template variable for an </span><code class="inlineCode"><span class="koboSpan" id="kobo.4722.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.4723.1"> element. </span><span class="koboSpan" id="kobo.4723.2">And then behind the scenes, the Angular CDK connects that menu with the trigger. </span><span class="koboSpan" id="kobo.4723.3">Even though the menu item itself is appended to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4724.1">&lt;body&gt;</span></code><span class="koboSpan" id="kobo.4725.1"> element inside an overlay, the position of the overlay is calculated accurately for the menu and is correct across screen resizes as well. </span><span class="koboSpan" id="kobo.4725.2">However, the Angular CDK Menu API </span><strong class="keyWord"><span class="koboSpan" id="kobo.4726.1">does not</span></strong><span class="koboSpan" id="kobo.4727.1"> contain the CSS styles for the overlay. </span><span class="koboSpan" id="kobo.4727.2">Therefore, in this recipe, we have a link to the relevant styles for both the overlay and the menu itself. </span><span class="koboSpan" id="kobo.4727.3">You’ll also notice that we use the directives </span><code class="inlineCode"><span class="koboSpan" id="kobo.4728.1">cdkMenu</span></code><span class="koboSpan" id="kobo.4729.1"> on the menu list </span><code class="inlineCode"><span class="koboSpan" id="kobo.4730.1">(&lt;ul&gt;)</span></code><span class="koboSpan" id="kobo.4731.1"> items, and we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4732.1">cdkMenuItem</span></code><strong class="keyWord"> </strong><span class="koboSpan" id="kobo.4733.1">on the menu</span><code class="inlineCode"><span class="koboSpan" id="kobo.4734.1"> (&lt;li&gt;)</span></code><span class="koboSpan" id="kobo.4735.1"> items. </span><span class="koboSpan" id="kobo.4735.2">Since we use these three directives and nothing else from the Angular CDK Menu package, you’ll notice that we don’t import </span><code class="inlineCode"><span class="koboSpan" id="kobo.4736.1">CdkMenuModule</span></code><span class="koboSpan" id="kobo.4737.1"> from </span><code class="inlineCode"><span class="koboSpan" id="kobo.4738.1">'@angular/cdk/menu'</span></code><span class="koboSpan" id="kobo.4739.1">. </span><span class="koboSpan" id="kobo.4739.2">That’s because all these directives are </span><code class="inlineCode"><span class="koboSpan" id="kobo.4740.1">standalone</span></code><span class="koboSpan" id="kobo.4741.1"> directives. </span><span class="koboSpan" id="kobo.4741.2">So they can be imported without the module.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4742.1">In this recipe, we also modified the default positioning for the menu. </span><span class="koboSpan" id="kobo.4742.2">By default, the overlay starts from the </span><em class="italic"><span class="koboSpan" id="kobo.4743.1">bottom-left</span></em><span class="koboSpan" id="kobo.4744.1"> point of the trigger, toward the right side. </span><span class="koboSpan" id="kobo.4744.2">We used a </span><code class="inlineCode"><span class="koboSpan" id="kobo.4745.1">ConnectionPosition</span></code><span class="koboSpan" id="kobo.4746.1"> array with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4747.1">[cdkMenuPosition]</span></code><span class="koboSpan" id="kobo.4748.1"> binding to the </span><strong class="screenText"><span class="koboSpan" id="kobo.4749.1">More</span></strong><span class="koboSpan" id="kobo.4750.1"> button (the trigger element) to use our preferred position. </span><span class="koboSpan" id="kobo.4750.2">The first (preferred) position is that the overlay’s </span><strong class="keyWord"><span class="koboSpan" id="kobo.4751.1">top-right</span></strong><span class="koboSpan" id="kobo.4752.1"> corner aligns with the trigger element’s </span><strong class="keyWord"><span class="koboSpan" id="kobo.4753.1">bottom-right</span></strong><span class="koboSpan" id="kobo.4754.1"> corner. </span><span class="koboSpan" id="kobo.4754.2">That is, the overlay shows below the </span><strong class="screenText"><span class="koboSpan" id="kobo.4755.1">More</span></strong><span class="koboSpan" id="kobo.4756.1"> button and expands toward the left side, as per the following object:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.4757.1">{ 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4758.1">offsetY</span></span><span class="koboSpan" id="kobo.4759.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.4760.1">4</span></span><span class="koboSpan" id="kobo.4761.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4762.1">originX</span></span><span class="koboSpan" id="kobo.4763.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.4764.1">'end'</span></span><span class="koboSpan" id="kobo.4765.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4766.1">originY</span></span><span class="koboSpan" id="kobo.4767.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.4768.1">'bottom'</span></span><span class="koboSpan" id="kobo.4769.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4770.1">overlayX</span></span><span class="koboSpan" id="kobo.4771.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.4772.1">'end'</span></span><span class="koboSpan" id="kobo.4773.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4774.1">overlayY</span></span><span class="koboSpan" id="kobo.4775.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.4776.1">'top'</span></span><span class="koboSpan" id="kobo.4777.1">, 
 }
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4778.1">The second position is that the overlay shows above More button (three vertical dots icon) and still expands toward the left side based on the following options:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.4779.1">{ 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4780.1">offsetY</span></span><span class="koboSpan" id="kobo.4781.1">: -</span><span class="hljs-number"><span class="koboSpan" id="kobo.4782.1">4</span></span><span class="koboSpan" id="kobo.4783.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4784.1">originX</span></span><span class="koboSpan" id="kobo.4785.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.4786.1">'end'</span></span><span class="koboSpan" id="kobo.4787.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4788.1">originY</span></span><span class="koboSpan" id="kobo.4789.1">: top, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4790.1">overlayX</span></span><span class="koboSpan" id="kobo.4791.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.4792.1">'end'</span></span><span class="koboSpan" id="kobo.4793.1">, 
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.4794.1">overlayY</span></span><span class="koboSpan" id="kobo.4795.1">: bottom, 
 }
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.4796.1">Finally, we implemented the nested menu. </span><span class="koboSpan" id="kobo.4796.2">This was pretty simple. </span><span class="koboSpan" id="kobo.4796.3">We created another menu with the same technique as the first one, creating an </span><code class="inlineCode"><span class="koboSpan" id="kobo.4797.1">&lt;ng-template&gt;</span></code><span class="koboSpan" id="kobo.4798.1"> with a template variable, a </span><code class="inlineCode"><span class="koboSpan" id="kobo.4799.1">cdkMenu</span></code><span class="koboSpan" id="kobo.4800.1"> inside it, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.4801.1">cdkMenuItems</span></code><span class="koboSpan" id="kobo.4802.1"> inside the menu. </span><span class="koboSpan" id="kobo.4802.2">Then we set the trigger of this nested menu to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4803.1">Manage</span></code><span class="koboSpan" id="kobo.4804.1"> menu item in the primary menu. </span><span class="koboSpan" id="kobo.4804.2">The Angular CDK is smart enough to understand if the trigger is a </span><code class="inlineCode"><span class="koboSpan" id="kobo.4805.1">cdkMenuItem</span></code><span class="koboSpan" id="kobo.4806.1">. </span><span class="koboSpan" id="kobo.4806.2">If it is, it opens the nested menu automatically on the mouse-over event on the trigger menu item. </span><span class="koboSpan" id="kobo.4806.3">And when the mouse-leave event</span><a id="_idIndexMarker754"/><span class="koboSpan" id="kobo.4807.1"> triggers from the nested menu, it hides. </span><span class="koboSpan" id="kobo.4807.2">I must give kudos to the Angular CDK</span><a id="_idIndexMarker755"/><span class="koboSpan" id="kobo.4808.1"> team for making things this easy.</span></p>
<h2 class="heading-2" id="_idParaDest-332"><span class="koboSpan" id="kobo.4809.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.4810.1">Angular CDK</span><a id="_idIndexMarker756"/><span class="koboSpan" id="kobo.4811.1"> Menu: </span><a href="https://material.angular.io/cdk/menu/overview"><span class="url"><span class="koboSpan" id="kobo.4812.1">https://material.angular.io/cdk/menu/overview</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.4813.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.4814.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_9.xhtml"><span class="url"><span class="koboSpan" id="kobo.4815.1">https://packt.link/AngularCookbook2e</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.4816.1"><img alt="" role="presentation" src="../Images/QR_Code1388317275422265.png"/></span></p>
</div>
</body></html>