- en: Chapter 9. React Router and Data Models
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous chapter, we took a look at the React performance tools that
    can improve performance of our React apps. We explored using the PERF add-on,
    PureRenderMixin, and so on and took a look at some of the gotchas related to the
    performance tools provided by React.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will take a closer look at react-router and perform routing
    at different levels. We will take a look at nested routing and passing around
    parameters, as well as see how react-router maintains history when performing
    routing tasks. We will also take a look at passing and using context to render
    React Components. Finally, we will explore data-models and mix and match them
    with other frameworks to use as data models in React, Backbone in this case.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: React in your apps
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Routing with react-router
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Different routing mechanism
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up routing and passing around the routing context
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: React and data stores/models
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using Backbone models/collections as data stores
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: At the end of chapter, we will be able to start using the react-router and different
    routing patterns and start passing around context data in routing. We will also
    be able to replace parts of plain data models with the likes of Backbone.js.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: A new adventure
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '"Hi Shawn and Mike!" exclaimed Carla.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: Shawn and Mike were startled. They had just got in and were about to start their
    day. The past few days had been a lot of React exploration for them.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '"I have some good news for you guys. We got a new project, where we need to
    build a cat-based interest site. Something like say – Pinterest? Users can like
    images and profiles of cats. They can then see and like related articles for sale,
    as well," continued Carla.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: '"Oh, nice," replied Shawn.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: Shawn and Mike regrouped and started a conversation about the new project that
    they just heard from Carla.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '"This is nice. So, I guess, we want to display a small Pinterest-style gallery
    of images in panel shapes?" inquired Shawn.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: '"Correct," continued Mike. "We also want to display the images in large scale,
    maybe in a modal after a user clicks on the image. Carla said she wants random
    cats to be featured in the footer, which should take us to a full-fledged cat
    display page."'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: '"You know what, I know the perfect thing that we are going use. Let''s take
    a look at react-router today! I also know the perfect example to start with. We
    are going to look at the Pinterest example from react-router at [https://github.com/rackt/react-router/tree/master/examples/pinterest](https://github.com/rackt/react-router/tree/master/examples/pinterest).
    We will then build our app on top of it."'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: '"Nice," said Shawn. "I can see the existing example has some of the things
    that we discussed, such as the modal display. Let me see how the example looks."'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: 'Shawn looked at the example, which was as follows:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '"Looks interesting," said Shawn.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '"Yeah, let''s go through the components that we need to create one by one.
    To begin with, let''s see how we are going to store our data and display the cat
    data across the system. Currently, the images are stored in the `PICTURES` constant.
    We would like to store more than that."'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: Creating Backbone models
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '"So, Shawn, let''s go ahead and build out our cats'' collection that we want
    to display. For the purpose of development, we are going to use cat images from
    lorempixel service, for example, [http://lorempixel.com/600/600/cats/](http://lorempixel.com/600/600/cats/).
    This will give us a random cat image of 600 x 600 pixels."'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: '"Next, we are going to create a store of data using different-than-normal objects.
    We want to explore how to embed different model flows with our React app here.
    In our case, let''s make use of Backbone models, instead of the PICTURES constant.
    I know that you have already used Backbone."'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: '"Yup, I have used it in my previous projects."'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: '"Alright then, let''s define our `Cat` model."'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '"Here we store the `src` for the image of a cat, its name, and some details
    about it. As you can see, we have provided some default values for these attributes."'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '"Next, let''s define our `Cats` collection to all the `Cat` records."'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '"Here, we making use of the `Faker` module to create random names for the cats
    using `Faker.Name.findName()`, adding random description using `Faker.Lorem.paragraph()`
    and passing the source as needed."'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '"Cool," said Shawn. "Let me see how this looks now."'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Incorporating defined Backbone models
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '"Next, let''s define our index with how we need the routing to be and what
    paths should the routing respond to. From there, we will go ahead with building
    our components."'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: '"Got it."'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '"So, the first thing I see is that we are creating a session history?"'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '"Correct, we are creating a session history over here. We will use it for our
    router."'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '"Here, we are using the history module''s `useBasename` method, which provides
    support for running an app under a `base` URL, which in our case is `/pinterest`."'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '"Got it."'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: '"Next, we are laying out how we actually want the routing to be. We wrap our
    router into the `<Router/>` component and specify different `<Route/>` as paths."'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '"This is called the **Route Configuration**, which is basically a set of rules
    or instructions on how to match the URLs to some React Component in order to be
    displayed."'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: '"Oh, can we discuss more about this configuration, it looks intriguing."'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: '"It sure is. First, let''s see what `<IndexRoute component={Home}/>` does.
    When we land on the `/` page for the application, which in our case would be `/pinterest`,
    the component defined by `IndexRoute` gets rendered. As you might have guessed,
    the component to be rendered is passed in the component argument of the route.
    Note that this is displayed in the `App` component that is the base component
    for all."'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: Similar to the `IndexRoute`, we have different `<Route/>` definitions. In our
    example, if you see `<Route path="/pictures/:id" component={Picture}/>`, it shows
    how route is getting used, and how we are passing attributes for the same. "Here,
    the path attribute is a matcher expression and component attribute specifies the
    component that is to be displayed after the route is matched."
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: '"Notice how the path is defined over here, it is specified as an expression."'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: 'The matching for a route based on a URL is done on the basis of three components:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: Nesting of route
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Path attribute
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Precedence of the route
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shawn began, "I got the nesting part. I see that we have arranged our routes
    in a nested fashion, like a tree. The route matching and building is being done
    on the basis of this tree-like matching structure."
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: '"Right. Secondly, we have the path attribute. We can see examples for these:"'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '"The path value is a string that acts as a regex, which can consist of the
    following parts:"'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: '`:paramName`: For example, ID, which is the param passed in the URL such as
    `/pictures/12`. `12` gets parsed as `param id`.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`()`: This can be used to specify an optional path, such as `/pictures(/:id)`,
    this will match `/pictures` as well as `/pictures/12`.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`*`: As in case of regular expressions, `*` can be used to match any part of
    the expression, until the next `/`, `?`, or `#` occurs. For example, to match
    all the JPEG images, we can use `/pictures/*.jpg`.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`**`: Greedy matching, similar to *, but it matches greedily. For example,
    `/**/*.jpg` will match `/pictures/8.jpg` as well as `/photos/10.jpg`.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '"Got it. Finally, what remains is the precedence? Most probably, it should
    use the first route that is defined in the file and satisfy the condition used
    to match the path?"'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '"Exactly," Mike exclaimed.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: '"Oh, before I forget, we also have a `<Redirect>` route. This can be used to
    match some routes to other route actions. For example, we want `/photos/12` to
    match `/pictures/12` instead, we can define it as code."'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '"Awesome."'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '"Next, let''s take a look at all the things that we are importing and using,
    which we will define as components."'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '"Let''s define our `App` component first, which is going to act as the container:"'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '"We aren''t going to change much here, this is from the example that we have
    already seen."'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '"I see the use of location here. Is this from react-router?"'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '"As we saw, our `App` is wrapped into the router. The router passes in the
    location object from the props. The location object is actually similar to `window.location`
    and it is something the history module that we use defines. The `Location` object
    has various special attributes defined on top of it, which we are going to make
    use of, as follows:"'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '`pathname`: The actual pathname of the URL'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`search`: The query string'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`state`: A state passed on from the react-router and tied as an object to the
    location'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`action`: One of the `PUSH`, `REPLACE`, or `POP` operations'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`key`: The unique identifier for the location'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '"Got it. I can see that we are making use of `props.children` we had seen before."'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '"We are storing the children and the previous screen onto the `App` object
    when the Modal is displayed, I guess," queried Shawn.'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: '"Yup. We are first checking whether we are displaying a different Component
    by matching the key attribute of location. We then check whether the state attribute
    was passed on the location and whether the modal was set to true on state. We
    will be doing that in case of Modal display. Here''s how we will pass the state
    onto a link:"'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '" We will take a look at the `Link` object when we use it for the images."'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: '"Got it," said Shawn.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '"Then I see that we are passing around the children props or rendering the
    previous layout, and then, displaying `Modal` on top of it if modal is clicked:"'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '"Exactly! You are getting pretty good at this," Mike exclaimed.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: '"Now, let''s see our main index page component, shall we?"'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '"So Shawn, we are first importing all the data that we generate in the `Cats`
    collection. We are going to loop over them and display the images with links to
    Modals. You can see this happening here:"'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '"Yup, I see that we are setting the key using `cat` object''s `cid` from the
    backbone object. We had to attribute for the link, which is path to where it should
    be linked, I guess?"'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '"That''s right. For every cat displayed, we have a unique dynamic route generated,
    such as `/pictures/121` and so on. Now, as we want to display the enlarged cat
    when we click on it, we are passing `modal: true` to state on `<Link/>`."'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '"We are also passing a `returnTo` attribute that is related to the current
    path that we obtain from the current `location.pathname`. We will be using this
    `returnTo` attribute from state to set up back links on components. We will display
    one on the Modal so that we can get back to the home page when it''s clicked and
    the Modal will be closed."'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '"Got it. I see we are also defining a link for the sample cat display page
    here:"'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '"Yup, we are going to randomly feature a cat here. We will display the details
    about the cat on the sample page. Now, I want to show you how we are creating
    the link here:"'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '"Here, we are creating a nested random route, for example, this can match a
    URL, as follows:"'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '"The `123` and `456` act as params for the location."'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '"Nice," followed Shawn. "Let me define the Modal? Let me reuse the one from
    the example."'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '"That''s simple and straightforward, Shawn. We also need to define how we display
    the pictures. Let''s define that."'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '"To display the cat and fetch details about it, we are using the ID that we
    receive from params. These are sent to us on the params prop. We are then fetching
    the ID from the `Cats` collection."'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '"Using the `id` prop, recall how we were sending the ID on the cat link that
    we defined as follows"'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '"Finally, let''s take a look at how the sample component is used to display
    the cat information from the example:"'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '"With this, it looks like we are done! Let''s see how it looks, shall we?"'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: '"The index page looks neat."'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: '![Incorporating defined Backbone models](img/4730_09_01.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
- en: '"Next, let''s see how the Modal and the links look with the URL."'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: '"The cat sure looks nice," chuckled Shawn.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: '![Incorporating defined Backbone models](img/4730_09_02.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
- en: '"Haha, yes."'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Notice the URL. On clicking, the modal link changed to the one on the anchor
    tag. We are on the same page and the modal is displayed.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: '"Finally, we have the sample page, where we display details of the cat. Let''s
    see how it looks:"'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: '![Incorporating defined Backbone models](img/4730_09_03.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
- en: '"Awesome!"'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: Data models and Backbone
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '"Shawn, I wanted to discuss how we used Backbone models here or how we are
    storing the data. We moved from the following code to make use of Backbone collections.
    This helped us to define our data in a better way:"'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '"However, if you notice, we ended up defining a static collection of objects.
    Along with that, this collection was global and required to be passed around."'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: '"That is true. I also noticed that we had a fixed `state` in a global fashion
    for the data. I believe, we could have not done much there. If we updated, the
    `Views` would still remain the same?"'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: '"Exactly! What''s happening in our case is that we are sending and using/modifying
    the data in a fixed fashion, globally. Any updates to this data in a different
    part of the application would not affect how our views were displayed or even
    the data that was already being accessed in different components would not change.
    For example, consider that the `Home` component changed the `Cats` constant. First
    of all, it would not sync the changes with Sample, Modal, or other components."'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: '"Secondly, the change in the `Home` component to the `Cats` collection would
    not even change the `Home` component''s display!"'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: '"Ah, this is pretty tricky. I guess, we would end up storing all of this collection
    state in a global component state, such as the `App` component, which is rendered
    only once," followed Shawn.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: '"Yes, we could do that. The problem in that case would be that we would need
    to manually maintain the state and update the state from the children components
    to the `App` components, and so forth. Imagine having to change the state for
    a cat on click, for example, someone faves an image of a cat. The event would
    take place on the `Picture` component and we would need to manually propagate
    the event to `Home` or `Modal` first and then to `App` in order to actually update
    the global collection."'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: '"That would not be good. I believe this would be hard to track and debug as
    well."'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: '"That''s right. In our next refactoring, we will try to change this approach
    and limit it to, say, the `App`. In the longer run, we would try out Flux."'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
- en: '"Oh, right, I have heard about it. It''s for passing around or accessing data
    and managing changes in data via events or something?"'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: '"Umm, not exactly, it helps us to streamline the data flow in a unidirectional
    flow. The state maintained is propagated to the components and they update as
    required. Events, such as having a cat, may change the data store, which in turn
    changes the components."'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: “嗯，不是完全如此，它帮助我们简化了单向数据流中的数据流。维护的状态会传播到组件中，并按需更新。例如，拥有一只猫的事件可能会改变数据存储，进而改变组件。”
- en: '"Anyway, I just wanted to give you an idea about this and why we will explore
    Flux later. For now, our solution works as expected."'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: “无论如何，我只是想给你一个关于这个的想法，以及为什么我们稍后会探索Flux。现在，我们的解决方案按预期工作。”
- en: The day was coming to an end. It has been another interesting day at Adequate
    LLC. Shawn and Mike had collaborated and build a simple app using react-router
    and mixing Backbone models with it.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 天色渐晚。在Adequate LLC公司又度过了一个有趣的一天。肖恩和迈克合作，使用react-router并与之混合Backbone模型构建了一个简单的应用程序。
- en: Summary
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we built a simple Pinterest-like app, making use of react-router
    and taking a closer look at it while performing routing at different levels. We
    also took a look at nested routing, passing around parameters, how the react-router
    maintains history, and so on, when performing the routing tasks. We took a look
    at how to pass and use the context to render the React components and mix Backbone
    models to maintain the Cats display data.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们构建了一个简单的类似Pinterest的应用程序，利用react-router并对其在不同级别的路由执行时进行了更深入的研究。我们还探讨了嵌套路由、传递参数、react-router如何维护历史记录等问题，在执行路由任务时。我们还研究了如何传递和使用上下文来渲染React组件，以及如何将Backbone模型与它混合以维护Cats显示数据。
- en: In the next chapter, we will explore adding animation to content and some other
    display goodies on top of the existing app.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨在现有应用程序的基础上添加动画和一些其他显示功能。
