<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer005">
<h1 id="_idParaDest-6"><a id="_idTextAnchor004"/>Preface</h1>
<p>State management is one of the hottest topics in the React ecosystem. There are many libraries and tools for handling state in React, and with each comes different recipes and opinions. One thing is clear – state management solutions for handling client state are not so good at dealing with server state. React Query was created as a solution to help manage your <span class="No-Break">server state!</span></p>
<p>In <em class="it lic">State Management with React Query</em>, you will get a guide that will take you from zero to hero with React Query by the end of <span class="No-Break">the book.</span></p>
<p>You’ll begin by learning the historical background of state in the React world and what led to the need to change from global state to client and server state. With this knowledge under your belt, you will understand the need for React Query. As you advance through the chapters, you’ll learn how React Query helps you to deal with common server state challenges, such as fetching data, caching data, updating data, and synchronizing your data with <span class="No-Break">the server.</span></p>
<p>But this is not all – once you have mastered React Query, you will learn how to apply this knowledge to <span class="No-Break">server-side rendering.</span></p>
<p>Finally, you will learn some patterns for testing your code by leveraging the Testing Library and Mock <span class="No-Break">Service Worker.</span></p>
<p>By the end of this book, you’ll have a new perspective on state and be able to leverage React Query to solve all the challenges of server state in <span class="No-Break">your applications.</span></p>
<h1 id="_idParaDest-7"><a id="_idTextAnchor005"/>Who this book is for</h1>
<p><em class="it lic">This book is for JavaScript and React developers who want to improve their state management skills and start dealing with the challenges of server state, while improving their developer and </em><span class="No-Break"><em class="it lic">user experience.</em></span></p>
<p><em class="it lic">Basic knowledge of web development, JavaScript, and React will help with understanding some of the key concepts covered in </em><span class="No-Break"><em class="it lic">this book.</em></span></p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor006"/>What this book covers</h1>
<p><a href="B18501_01.xhtml#_idTextAnchor016"><span class="No-Break"><em class="it lic">Chapter 1</em></span></a>, <em class="it lic">What Is State and How Do We Manage It?</em>, covers a basic definition of what state is and gives a historical overview of how we <span class="No-Break">manage it.</span></p>
<p><a href="B18501_02.xhtml#_idTextAnchor049"><span class="No-Break"><em class="it lic">Chapter 2</em></span></a>, <em class="it lic">Server State versus Client State</em>, splits the state concept and helps us understand why it is so important to manage the server state independently of the <span class="No-Break">client state.</span></p>
<p><a href="B18501_03.xhtml#_idTextAnchor062"><span class="No-Break"><em class="it lic">Chapter 3</em></span></a>, <em class="it lic">React Query – Introducing, Installing, and Configuring It</em>, introduces React Query and provides the means to add it to <span class="No-Break">your applications.</span></p>
<p><a href="B18501_04.xhtml#_idTextAnchor091"><span class="No-Break"><em class="it lic">Chapter 4</em></span></a>, <em class="it lic">Fetching Data with React Query</em>, covers what you need to leverage the <strong class="source-inline">useQuery</strong> custom hook to fetch your <span class="No-Break">server state.</span></p>
<p><a href="B18501_05.xhtml#_idTextAnchor140"><span class="No-Break"><em class="it lic">Chapter 5</em></span></a>, <em class="it lic">More Data-Fetching Challenges</em>, expands on the concepts introduced in the previous chapter and covers how you can leverage <strong class="source-inline">useQuery</strong> to deal with other data <span class="No-Break">fetching challenges.</span></p>
<p><a href="B18501_06.xhtml#_idTextAnchor159"><span class="No-Break"><em class="it lic">Chapter 6</em></span></a>, <em class="it lic">Performing Data Mutations with React Query</em>, covers what you need to leverage the <strong class="source-inline">useMutation</strong> custom hook to perform changes on the <span class="No-Break">server state.</span></p>
<p><a href="B18501_07.xhtml#_idTextAnchor173"><span class="No-Break"><em class="it lic">Chapter 7</em></span></a>, <em class="it lic">Server-Side Rendering with Next.js or Remix</em>, covers leveraging React Query with server-side frameworks such as Next.js <span class="No-Break">or Remix.</span></p>
<p><a href="B18501_08.xhtml#_idTextAnchor184"><span class="No-Break"><em class="it lic">Chapter 8</em></span></a>, <em class="it lic">Testing React Query Hooks and Components</em>, provides you with practices and recipes you can apply to your application to test your components and custom hooks that leverage <span class="No-Break">React Query.</span></p>
<p><a href="B18501_09.xhtml#_idTextAnchor297"><span class="No-Break"><em class="it lic">Chapter 9</em></span></a>, <em class="it lic">What Changes in React Query v5?</em>, is a bonus chapter that covers the changes that the v5 version of TanStack Query introduces to React Query and the things you need to update <span class="No-Break">your application.</span></p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor007"/>To get the most out of this book</h1>
<p>Basic knowledge of RESTful APIs and HTTP methods is recommended. Basic knowledge of GraphQL is required if you want to leverage the examples that <span class="No-Break">use it.</span></p>
<p>You will need to know some of the basic concepts around HTML. You will also need to understand JavaScript and some of its concepts, <span class="No-Break">namely promises.</span></p>
<p>Finally, given that we are using React Hooks, it is important that you are familiar with how they work and how you can use them in your <span class="No-Break">React application.</span></p>
<table class="No-Table-Style" id="table001">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold">Software/hardware covered in </strong><span class="No-Break"><strong class="bold">the book</strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Operating </strong><span class="No-Break"><strong class="bold">system requirements</strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">Yarn</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">pnpm</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">npm</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">JavaScript</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">React 16.8</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">Remix</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">Next.js</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>React <span class="No-Break">Testing Library</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>Mock <span class="No-Break">Service Worker</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break">TanStack Query</span></p>
</td>
<td class="No-Table-Style">
<p>Windows, macOS, <span class="No-Break">or Linux</span></p>
</td>
</tr>
</tbody>
</table>
<p><strong class="bold">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting </strong><span class="No-Break"><strong class="bold">of code.</strong></span></p>
<p>This book gives you the practices and tools to fully understand and master the TanStack Query React adapter – React Query. By the end of the book, you will have the necessary understanding of how to leverage it fully and be set to decide whether you want to add it to <span class="No-Break">your projects.</span></p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor008"/>Download the example code files</h1>
<p>You can download the example code files for this book from GitHub at <a href="">https://github.com/PacktPublishing/State-management-with-React-Query</a>. If there’s an update to the code, it will be updated in the <span class="No-Break">GitHub repository.</span></p>
<p>We also have other code bundles from our rich catalog of books and videos available at <a href="">https://github.com/PacktPublishing/</a>. Check <span class="No-Break">them out!</span></p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor009"/>Download the color images</h1>
<p>We also provide a PDF file that has color images of the screenshots and diagrams used in this book. You can download it <span class="No-Break">here: </span><a href="B18501_Preface.xhtml#_idTextAnchor013"><span class="No-Break">https://packt.link/Wt1n6</span></a><span class="No-Break">.</span></p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor010"/>Conventions used</h1>
<p>There are a number of text conventions used throughout <span class="No-Break">this book.</span></p>
<p><strong class="source-inline">Code in text</strong>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “Natively, React gives us two ways to hold state in our applications – <strong class="source-inline">useState</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">useReducer</strong></span><span class="No-Break">.”</span></p>
<p>A block of code is set <span class="No-Break">as follows:</span></p>
<pre class="source-code">
const NotState = ({<strong class="bold">aList</strong> = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}) =&gt; {
  const <strong class="bold">value</strong> = "a constant value";
  const <strong class="bold">filteredList</strong> = aList.filter((item) =&gt; item % 2 === 0);
  return filteredList.map((item) =&gt; &lt;div key={item}&gt;{item}&lt;/div&gt;);
};</pre>
<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set <span class="No-Break">in bold:</span></p>
<pre class="source-code">
const App = () =&gt; {
  ...
  return (
    &lt;div className="App"&gt;
      &lt;div&gt;Counter: {<strong class="bold">count</strong>}&lt;/div&gt;
      &lt;div&gt;
        &lt;button onClick={<strong class="bold">increment</strong>}&gt;+1&lt;/button&gt;
        &lt;button onClick={<strong class="bold">decrement</strong>}&gt;-1&lt;/button&gt;
        &lt;button onClick={<strong class="bold">reset</strong>}&gt;Reset&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;</pre>
<p>Any command-line input or output is written <span class="No-Break">as follows:</span></p>
<pre class="console">
npm i @tanstack/react-query</pre>
<p><strong class="bold">Bold</strong>: Indicates a new term, an important word, or words that you see on screen. For instance, words in menus or dialog boxes appear in <strong class="bold">bold</strong>. Here is an example: “As a user, I want my query to be re-fetched when I click the <strong class="bold">Invalidate </strong><span class="No-Break"><strong class="bold">Query</strong></span><span class="No-Break"> button.”</span></p>
<p class="c llout-he ding">Tips or important notes</p>
<p class="c llout">Appear like this.</p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor011"/>Get in touch</h1>
<p>Feedback from our readers is <span class="No-Break">always welcome.</span></p>
<p><strong class="bold">General feedback</strong>: If you have questions about any aspect of this book, email us at <strong class="source-inline">customercare@packtpub.com</strong> and mention the book title in the subject of <span class="No-Break">your message.</span></p>
<p><strong class="bold">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="">www.packtpub.com/support/errata</a> and fill in <span class="No-Break">the form.</span></p>
<p><strong class="bold">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <strong class="source-inline">copyright@packt.com</strong> with a link to <span class="No-Break">the material.</span></p>
<p><strong class="bold">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please <span class="No-Break">visit </span><a href=""><span class="No-Break">authors.packtpub.com</span></a><span class="No-Break">.</span></p>
<h1 id="_idParaDest-14"><a id="_idTextAnchor012"/>Share your thoughts</h1>
<p>Once you’ve read <em class="it lic">State Management with React Query</em>, we’d love to hear your thoughts! Scan the QR code below to go straight to the Amazon review page for this book and share <span class="No-Break">your feedback.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer003">
<img alt="" height="200" src="image/B18501_QR.jpg" width="200"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="http://authors.packtpub.com/">https://packt.link/r/1-803-23134-3</a></p>
<p>Your review is important to us and the tech community and will help us make sure we’re delivering excellent <span class="No-Break">quality content.</span></p>
<h1 id="_idParaDest-15"><a id="_idTextAnchor013"/>Download a free PDF copy of this book</h1>
<p>Thanks for purchasing <span class="No-Break">this book!</span></p>
<p>Do you like to read on the go but are unable to carry your print <span class="No-Break">books everywhere?</span></p>
<p>Is your eBook purchase not compatible with the device of <span class="No-Break">your choice?</span></p>
<p>Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at <span class="No-Break">no cost.</span></p>
<p>Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
<p>The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your <span class="No-Break">inbox daily</span></p>
<p>Follow these simple steps to get <span class="No-Break">the benefits:</span></p>
<ol>
<li>Scan the QR code or visit the link below</li>
</ol>
<p> </p>
<div>
<div class="IMG---Figure" id="_idContainer004">
<img alt="" height="200" src="image/B18501_QR_Free_PDF.jpg" width="200"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="https://packt.link/free-ebook/9781803231341">https://packt.link/free-ebook/9781803231341</a></p>
<ol>
<li value="2">Submit your proof of purchase</li>
<li>That’s it! We’ll send your free PDF and other benefits to your email directly</li>
</ol>
</div>
</div>

<div id="sbo-rt-content"><div class="Content" id="_idContainer006">
<h1 id="_idParaDest-16"><a id="_idTextAnchor014"/>Part 1: Understanding State and Getting to Know React Query</h1>
<p>State is what makes your applications move. What many of us are not often aware of is that there are different types of state. These different types lead to different challenges when managing the given state. In this part, we will understand more about state and how we manage it. During this process, we will understand that the server and client states have very different challenges that need to be handled separately and with different tools. To deal with server state, we will learn more about the TanStack Query React adapter called React Query and see how to add it to <span class="No-Break">our applications.</span></p>
<p>This part includes the <span class="No-Break">following chapters:</span></p>
<ul>
<li><a href="B18501_01.xhtml#_idTextAnchor016"><em class="it lic">Chapter 1</em></a>, <em class="it lic">What Is State and How Do We Manage It?</em></li>
<li><a href="B18501_02.xhtml#_idTextAnchor049"><em class="it lic">Chapter 2</em></a>, <em class="it lic">Server State versus Client State</em></li>
<li><a href="B18501_03.xhtml#_idTextAnchor062"><em class="it lic">Chapter 3</em></a>, <em class="it lic">React Query – Introducing, Installing, and Configuring It</em></li>
</ul>
</div>
<div>
<div id="_idContainer007">
</div>
</div>
</div></body></html>