<html><head></head><body>
<div id="_idContainer023">
<h1 class="chapter-number" id="_idParaDest-39"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-40"><a id="_idTextAnchor041"/><span class="koboSpan" id="kobo.2.1">Planning and Setting Up the Funbook App</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, we learned how to set up a React Native app. </span><span class="koboSpan" id="kobo.3.2">The steps we followed, installing dependencies and building and running the app, are common for most apps you may want to build. </span><span class="koboSpan" id="kobo.3.3">Now, it’s time to focus on the specifics of the app we will be building in this book. </span><span class="koboSpan" id="kobo.3.4">We want to create a social media clone app so that we can compare different state management solutions in that app. </span><span class="koboSpan" id="kobo.3.5">In this chapter, we will plan and build our example app using only React Native built-in solutions – state, props, hooks, and context. </span><span class="koboSpan" id="kobo.3.6">We will take the </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">following steps:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.5.1">Planning the needed surfaces </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">and components</span></span></li>
<li><span class="koboSpan" id="kobo.7.1">Planning data flows in </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">the app</span></span></li>
<li><span class="koboSpan" id="kobo.9.1">Getting comfortable previewing and debugging </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">the app</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.11.1">By the end of this chapter, you will have a good idea of planning out development work for the Funbook app. </span><span class="koboSpan" id="kobo.11.2">You will also find out how to work comfortably with a React </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">Native app.</span></span></p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor042"/><span class="koboSpan" id="kobo.13.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.14.1">In order to follow along with this chapter, you will need some knowledge of JavaScript and ReactJS. </span><span class="koboSpan" id="kobo.14.2">If you have followed the first two chapters of this book, you should be able to go forward without </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">any issues.</span></span></p>
<p><span class="koboSpan" id="kobo.16.1">Feel free to use an IDE of your choice, as React Native does not need any specific functionality. </span><span class="koboSpan" id="kobo.16.2">Currently, the most popular IDEs for frontend developers are Microsoft’s VSCode, Atom, Sublime Text, </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">and WebStorm.</span></span></p>
<p><span class="koboSpan" id="kobo.18.1">You may have followed the setup guide from the previous chapter. </span><span class="koboSpan" id="kobo.18.2">In case you didn’t set up your own app, you can clone the repo dedicated to </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">this book:</span></span></p>
<p><span class="No-Break"><span class="koboSpan" id="kobo.20.1">https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native</span></span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1">In this repository, you will find a very basic app, as it was set up in the previous chapter. </span><span class="koboSpan" id="kobo.22.2">You will also find folders with chapter names. </span><span class="koboSpan" id="kobo.22.3">Not surprisingly, each folder holds a version of the Funbook app as described in a </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">given chapter.</span></span></p>
<h1 id="_idParaDest-42"><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.24.1">Planning the needed surfaces and components</span></h1>
<p><span class="koboSpan" id="kobo.25.1">As I’ve mentioned before, we can</span><a id="_idIndexMarker103"/><span class="koboSpan" id="kobo.26.1"> divide our app into surfaces, and then break down </span><a id="_idIndexMarker104"/><span class="koboSpan" id="kobo.27.1">the surfaces into smaller, reusable components. </span><span class="koboSpan" id="kobo.27.2">Our app will need the </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">following surfaces:</span></span></p>
<ul>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.29.1">Login</span></strong></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.30.1">Feed</span></strong><span class="koboSpan" id="kobo.31.1"> (which is also our </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.32.1">Home</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.33.1"> surface)</span></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.34.1">Add Post</span></strong></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.35.1">Favorites</span></strong></span></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.36.1">Profile</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.37.1">We have those surfaces set up as files in our project. </span><span class="koboSpan" id="kobo.37.2">Let’s take a quick look at the free design file we’ll be using for our app. </span><span class="koboSpan" id="kobo.37.3">You can find the file </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">here: </span></span><a href="https://www.pixeltrue.com/free-ui-kits/social-media-app"><span class="No-Break"><span class="koboSpan" id="kobo.39.1">https://www.pixeltrue.com/free-ui-kits/social-media-app</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.40.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">You can download this file and </span><a id="_idIndexMarker105"/><span class="koboSpan" id="kobo.42.1">open it in Figma or import it at </span><a href="https://www.figma.com"><span class="koboSpan" id="kobo.43.1">https://www.figma.com</span></a><span class="koboSpan" id="kobo.44.1">. </span><span class="koboSpan" id="kobo.44.2">If you don’t have a Figma account yet – don’t worry, they’re free. </span><span class="koboSpan" id="kobo.44.3">You can take a moment right now to look at the actual file, or if a screenshot is enough for you, let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">look together:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<span class="koboSpan" id="kobo.46.1"><img alt="Figure 3.1 – Figma website with the design template " src="image/Figure_3.01_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.47.1">Figure 3.1 – Figma website with the design template</span></p>
<p><span class="koboSpan" id="kobo.48.1">Let’s</span><a id="_idIndexMarker106"/><span class="koboSpan" id="kobo.49.1"> zoom in on the </span><a id="_idIndexMarker107"/><span class="No-Break"><span class="koboSpan" id="kobo.50.1">home page:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer014">
<span class="koboSpan" id="kobo.51.1"><img alt="Figure 3.2 – Design of the home surface " src="image/Figure_3.02_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.52.1">Figure 3.2 – Design of the home surface</span></p>
<p><span class="koboSpan" id="kobo.53.1">You may have noticed there are five items in the bottom tabs on the design. </span><span class="koboSpan" id="kobo.53.2">Which one are we missing? </span><span class="koboSpan" id="kobo.53.3">The chat bubble. </span><span class="koboSpan" id="kobo.53.4">Let’s go ahead and add this surface to our app. </span><span class="koboSpan" id="kobo.53.5">I encourage you to </span><a id="_idIndexMarker108"/><span class="koboSpan" id="kobo.54.1">add this file on your own and then come back here and</span><a id="_idIndexMarker109"/><span class="koboSpan" id="kobo.55.1"> check against my example. </span><span class="koboSpan" id="kobo.55.2">Here’s what my </span><strong class="source-inline"><span class="koboSpan" id="kobo.56.1">Conversations</span></strong><span class="koboSpan" id="kobo.57.1"> surface looks like </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">so far:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.59.1">
import React from "react";
import { View, Text } from "react-native";
export const Conversations = () =&gt; {
  return (
    &lt;View&gt;
      &lt;Text&gt;this will be the chat screen&lt;/Text&gt;
    &lt;/View&gt;
  );
};</span></pre>
<p><span class="koboSpan" id="kobo.60.1">And </span><a id="_idIndexMarker110"/><span class="koboSpan" id="kobo.61.1">here’s the </span><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">App.js</span></strong><span class="koboSpan" id="kobo.63.1"> file with the</span><a id="_idIndexMarker111"/><span class="koboSpan" id="kobo.64.1"> newly </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">added screen:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.66.1">
import "react-native-gesture-handler";
import React, { useState } from "react";
import { NavigationContainer } from "@react-navigation/native";
import { createStackNavigator } from "@react-navigation/stack";
import { createBottomTabNavigator } from "@react-navigation/  bottom-tabs";
import { Login } from "./src/surfaces/Login";
import { Feed } from "./src/surfaces/Feed";
import { Profile } from "./src/surfaces/Profile";
import { Favorites } from "./src/surfaces/Favorites";
import { AddPost } from "./src/surfaces/AddPost";
import { Conversations } from "./src/surfaces/Conversations";
const Stack = createStackNavigator();
const Tab = createBottomTabNavigator();
function Home() {
  return (
    &lt;Tab.Navigator&gt;
      &lt;Tab.Screen name='Feed' component={Feed} /&gt;
        &lt;Tab.Screen name='Conversations'          component={Conversations} /&gt;
      &lt;Tab.Screen name='AddPost' component={AddPost} /&gt;
      &lt;Tab.Screen name='Favorites' component={Favorites} /&gt;
      &lt;Tab.Screen name='Profile' component={Profile} /&gt;
    &lt;/Tab.Navigator&gt;
  );
}
[…]</span></pre>
<p><span class="koboSpan" id="kobo.67.1">Okay! </span><span class="koboSpan" id="kobo.67.2">Looking good </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">so far!</span></span></p>
<p><span class="koboSpan" id="kobo.69.1">Now that we have our main surfaces set up, let’s try to analyze which elements are good candidates for </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">reusable components.</span></span></p>
<p><span class="koboSpan" id="kobo.71.1">Looking back at the design file, let’s</span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.72.1"> start with the </span><strong class="bold"><span class="koboSpan" id="kobo.73.1">Home</span></strong><span class="koboSpan" id="kobo.74.1"> surface. </span><span class="koboSpan" id="kobo.74.2">At the top, we see a horizontal list of </span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.75.1"> avatars and a list of repetitive cards below. </span><span class="koboSpan" id="kobo.75.2">Each card has an author image, a title, a favorite count, and a conversation count. </span><span class="koboSpan" id="kobo.75.3">So, the home component should be built out of avatar and </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">card components.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">Moving on to the </span><strong class="bold"><span class="koboSpan" id="kobo.78.1">Conversations</span></strong><span class="koboSpan" id="kobo.79.1"> screen: it consists of a search bar and a list of cards with the name of the person in the conversation and the last message exchanged. </span><span class="koboSpan" id="kobo.79.2">When a message is clicked, we will go to the screen named </span><strong class="bold"><span class="koboSpan" id="kobo.80.1">Messaging</span></strong><span class="koboSpan" id="kobo.81.1"> in the Figma file, where we will see a bigger avatar, a list of messages, and an input box. </span><span class="koboSpan" id="kobo.81.2">Remember we already have avatars on the home page; let’s see whether we can reuse an avatar component. </span><span class="koboSpan" id="kobo.81.3">Maybe only to some extent, since the styles are not the same for the home avatars, the conversations avatars, and the messaging avatars. </span><span class="koboSpan" id="kobo.81.4">They are all round images, but they have different borders and sizes. </span><span class="koboSpan" id="kobo.81.5">Maybe we could create an avatar component that accepts size and border style as a prop. </span><span class="koboSpan" id="kobo.81.6">That’s a pretty good idea! </span><span class="koboSpan" id="kobo.81.7">We’ll try to achieve this when we get to </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">writing code.</span></span></p>
<p><span class="koboSpan" id="kobo.83.1">The last detailed surface we will in our free design file is </span><strong class="bold"><span class="koboSpan" id="kobo.84.1">Profile</span></strong><span class="koboSpan" id="kobo.85.1">. </span><span class="koboSpan" id="kobo.85.2">We have yet another avatar here; this one is not even round. </span><span class="koboSpan" id="kobo.85.3">It’s followed by the username, some statistics, and a two-column list of pictures and bookmarks. </span><span class="koboSpan" id="kobo.85.4">Since we’re not going to be implementing bookmarks, we will exchange the bookmarks from the design for favorites. </span><span class="koboSpan" id="kobo.85.5">You may notice that the two columns are built with two different styles of elements, and that’s probably how we should also create our components: one component for cards in</span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.86.1"> the images column and one component for the </span><strong class="bold"><span class="koboSpan" id="kobo.87.1">Favorites</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.88.1">card column.</span></span></p>
<p><span class="koboSpan" id="kobo.89.1">Last but not least: the </span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.90.1">bottom tab bar. </span><span class="koboSpan" id="kobo.90.2">Our design file includes four regular icons and one with a different style. </span><span class="koboSpan" id="kobo.90.3">Styling React Navigation components is a separate task altogether, as we will need to read the documentation to find out how to implement a custom icon, active and inactive styles, as well as </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">custom styles.</span></span></p>
<p><span class="koboSpan" id="kobo.92.1">Since we are using a free design file, it does not cover all the surfaces we want to create. </span><span class="koboSpan" id="kobo.92.2">I am very happy we have this free resource at our fingertips, and we’ll try to use the general styles and components to figure out what the remaining two of our surfaces should </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">look like.</span></span></p>
<p><span class="koboSpan" id="kobo.94.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.95.1">Login</span></strong><span class="koboSpan" id="kobo.96.1"> surface should surely consist of two inputs: the username and password. </span><span class="koboSpan" id="kobo.96.2">We will re-use the input visible on the </span><strong class="bold"><span class="koboSpan" id="kobo.97.1">Messaging</span></strong><span class="koboSpan" id="kobo.98.1"> screen in Figma, and the background of the splash screen. </span><span class="koboSpan" id="kobo.98.2">As for the surface needed for adding posts, we’ll have a rounded square for the image –to match the </span><strong class="bold"><span class="koboSpan" id="kobo.99.1">Home</span></strong><span class="koboSpan" id="kobo.100.1"> surface – and an input for the title of </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">the post.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">Let’s summarize our plan: we have all our surfaces created. </span><span class="koboSpan" id="kobo.102.2">We will proceed to create the components necessary for the surfaces. </span><span class="koboSpan" id="kobo.102.3">We will create an avatar component, that we will use on the </span><strong class="bold"><span class="koboSpan" id="kobo.103.1">Home</span></strong><span class="koboSpan" id="kobo.104.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.105.1">Conversations</span></strong><span class="koboSpan" id="kobo.106.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">Messaging</span></strong><span class="koboSpan" id="kobo.108.1"> surfaces. </span><span class="koboSpan" id="kobo.108.2">We will create a card component for the </span><strong class="bold"><span class="koboSpan" id="kobo.109.1">Home</span></strong><span class="koboSpan" id="kobo.110.1"> surface. </span><span class="koboSpan" id="kobo.110.2">We will then create another card component for the </span><strong class="bold"><span class="koboSpan" id="kobo.111.1">Conversations</span></strong><span class="koboSpan" id="kobo.112.1"> surface, along with a search box component. </span><span class="koboSpan" id="kobo.112.2">We will need to hook up the navigation to move correctly from </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">Conversations</span></strong><span class="koboSpan" id="kobo.114.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">Messaging</span></strong><span class="koboSpan" id="kobo.116.1">. </span><span class="koboSpan" id="kobo.116.2">On the </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">Messaging</span></strong><span class="koboSpan" id="kobo.118.1"> surface, we will reuse the avatar component, a component for displaying messages, and a reusable input component. </span><span class="koboSpan" id="kobo.118.2">Moving on to the </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Profile</span></strong><span class="koboSpan" id="kobo.120.1"> screen, we will create a profile avatar component, components for profile statistics and components for cards of images, and different components for cards of favorited items. </span><span class="koboSpan" id="kobo.120.2">We will then move on to composing the </span><strong class="bold"><span class="koboSpan" id="kobo.121.1">Login</span></strong><span class="koboSpan" id="kobo.122.1"> screen using input box components created previously for the messaging screen. </span><span class="koboSpan" id="kobo.122.2">We will finish by completing the </span><strong class="bold"><span class="koboSpan" id="kobo.123.1">Add Post</span></strong><span class="koboSpan" id="kobo.124.1"> surface, using a version of the </span><strong class="bold"><span class="koboSpan" id="kobo.125.1">Home</span></strong><span class="koboSpan" id="kobo.126.1"> surface card and input. </span><span class="koboSpan" id="kobo.126.2">I don’t recommend creating all the files</span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.127.1"> beforehand, as a lot of things may change while we</span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.128.1"> create the </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">actual components.</span></span></p>
<p><span class="koboSpan" id="kobo.130.1">Before we start writing components let’s try to analyze what data will be needed for </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">our app.</span></span></p>
<h1 id="_idParaDest-43"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.132.1">Planning data flows in the app</span></h1>
<p><span class="koboSpan" id="kobo.133.1">This is a part of app</span><a id="_idIndexMarker118"/><span class="koboSpan" id="kobo.134.1"> development that usually does not fall under the responsibilities of the frontend developer. </span><span class="koboSpan" id="kobo.134.2">The clients will often determine what data they want, and that data is organized by the backend developers. </span><span class="koboSpan" id="kobo.134.3">However, if you can participate in the way the data flows are organized, you will make your future work easier. </span><span class="koboSpan" id="kobo.134.4">Given that we are only building the frontend of an app using example data, we are free to organize it however </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">we like.</span></span></p>
<p><span class="koboSpan" id="kobo.136.1">We will use the design file again, as the basis for what work needs to be done. </span><span class="koboSpan" id="kobo.136.2">Starting with the </span><strong class="bold"><span class="koboSpan" id="kobo.137.1">Home</span></strong><span class="koboSpan" id="kobo.138.1"> screen, we know we need a list of users and a list of items to be displayed on the </span><strong class="bold"><span class="koboSpan" id="kobo.139.1">Home</span></strong><span class="koboSpan" id="kobo.140.1"> surface. </span><span class="koboSpan" id="kobo.140.2">As per the </span><strong class="bold"><span class="koboSpan" id="kobo.141.1">Conversations</span></strong><span class="koboSpan" id="kobo.142.1"> surface, we will need a list of conversations with respective usernames and messages. </span><span class="koboSpan" id="kobo.142.2">We will also need data for each one of the conversations, so we can display it on the </span><strong class="bold"><span class="koboSpan" id="kobo.143.1">Messaging</span></strong><span class="koboSpan" id="kobo.144.1"> surface. </span><span class="koboSpan" id="kobo.144.2">On the </span><strong class="bold"><span class="koboSpan" id="kobo.145.1">Profile</span></strong><span class="koboSpan" id="kobo.146.1"> surface, we will need a list of data pertinent to the user (name, avatar image, statistics), and two lists of images: added images and liked images. </span><span class="koboSpan" id="kobo.146.2">As per the surfaces missing from the design, we will need a login and password for the </span><strong class="bold"><span class="koboSpan" id="kobo.147.1">Login</span></strong><span class="koboSpan" id="kobo.148.1"> screen. </span><span class="koboSpan" id="kobo.148.2">We will not need any sample data for the </span><strong class="bold"><span class="koboSpan" id="kobo.149.1">Add </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.150.1">Post</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.151.1"> surface.</span></span></p>
<p><span class="koboSpan" id="kobo.152.1">Working with real data makes it easier to visualize the future shape of the app and of specific components. </span><span class="koboSpan" id="kobo.152.2">That is why I set up GitHub pages of the book repository to hold our sample data. </span><span class="koboSpan" id="kobo.152.3">You can find them on GitHub Pages (https://packtpublishing.github.io/Simplifying-State-Management-in-React-Native/) or in the main book repository in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">docs/</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.154.1">folder: </span></span><a href="https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/tree/main/docs"><span class="No-Break"><span class="koboSpan" id="kobo.155.1">https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/tree/main/docs</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.156.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.157.1">Browsing through sample data</span></p>
<p class="callout"><span class="koboSpan" id="kobo.158.1">You can see the example data used in the app whenever you’d like. </span><span class="koboSpan" id="kobo.158.2">Check out the data branch of the main repository here: </span><a href="https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/blob/data/docs/index.md"><span class="koboSpan" id="kobo.159.1">https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/blob/data/docs/index.md</span></a><span class="koboSpan" id="kobo.160.1"> and look in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">docs/</span></strong><span class="koboSpan" id="kobo.162.1"> folder. </span><span class="koboSpan" id="kobo.162.2">You can copy anything you’d like to your </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">own projects.</span></span></p>
<p><span class="koboSpan" id="kobo.164.1">The biggest and most obvious piece of the data puzzle we will need is a list of users. </span><span class="koboSpan" id="kobo.164.2">You can view the file on GitHub here: </span><a href="https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/blob/main/docs/users.json"><span class="koboSpan" id="kobo.165.1">https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/blob/main/docs/users.json</span></a><span class="koboSpan" id="kobo.166.1">. </span><span class="koboSpan" id="kobo.166.2">Our app will consume the raw JSON file, which can be accessed through the following </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">link: </span></span><a href="https://raw.githubusercontent.com/PacktPublishing/Simplifying-State-Management-in-React-Native/main/docs/users.json"><span class="No-Break"><span class="koboSpan" id="kobo.168.1">https://raw.githubusercontent.com/PacktPublishing/Simplifying-State-Management-in-React-Native/main/docs/users.json</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.169.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.170.1">You may wonder why I added user IDs if we’re building a simple app with example data. </span><span class="koboSpan" id="kobo.170.2">The reason is that we will use the user data for a list of avatars on the </span><strong class="bold"><span class="koboSpan" id="kobo.171.1">Home</span></strong><span class="koboSpan" id="kobo.172.1"> surface. </span><span class="koboSpan" id="kobo.172.2">We will create this list with React </span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.173.1">and React requires that every item in a list has a unique </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">key</span></strong><span class="koboSpan" id="kobo.175.1"> prop. </span><span class="koboSpan" id="kobo.175.2">Theoretically, we could use the image URL as our unique key and then try to remember not to use the same picture for more than one person. </span><span class="koboSpan" id="kobo.175.3">However, using an ID is a much cleaner solution. </span><span class="koboSpan" id="kobo.175.4">It is also closer to what you would see in a </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">real-world app.</span></span></p>
<p><span class="koboSpan" id="kobo.177.1">Now that we have a user list, let’s take a look at what a specific user profile might look like. </span><span class="koboSpan" id="kobo.177.2">Our user will need an ID, which should match the record with their name in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">users.json</span></strong><span class="koboSpan" id="kobo.179.1"> file. </span><span class="koboSpan" id="kobo.179.2">They also have a name and avatar image URL. </span><span class="koboSpan" id="kobo.179.3">We need to know how many posts, followers, and users following the given user has. </span><span class="koboSpan" id="kobo.179.4">Finally, we need two lists of images: added and liked images. </span><span class="koboSpan" id="kobo.179.5">Take a look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">john_doe.json</span></strong><span class="koboSpan" id="kobo.181.1"> file – that’s what our example user profile data </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">looks like.</span></span></p>
<p><span class="koboSpan" id="kobo.183.1">Moving on to the </span><strong class="bold"><span class="koboSpan" id="kobo.184.1">Home</span></strong><span class="koboSpan" id="kobo.185.1"> surface: we will use the same data as in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">users.json</span></strong><span class="koboSpan" id="kobo.187.1"> file here to display the list of avatars, so we don’t need to add any additional avatar list data here. </span><span class="koboSpan" id="kobo.187.2">It will be followed by a list of items to be displayed in the form of cards with images. </span><span class="koboSpan" id="kobo.187.3">The example data is available in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">home.json</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.189.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">Let’s create our sample dataset for the conversations. </span><span class="koboSpan" id="kobo.190.2">It’s not very complicated; it includes a username, a user avatar URL, a message, and an ID. </span><span class="koboSpan" id="kobo.190.3">We will need the conversation ID to correctly display conversation details on the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.191.1">Messaging</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.192.1"> surface.</span></span></p>
<p><span class="koboSpan" id="kobo.193.1">Finally, we should create sample data for the </span><strong class="bold"><span class="koboSpan" id="kobo.194.1">Messaging</span></strong><span class="koboSpan" id="kobo.195.1"> surface. </span><span class="koboSpan" id="kobo.195.2">We will create a separate folder for conversation data, called </span><strong class="source-inline"><span class="koboSpan" id="kobo.196.1">messages</span></strong><span class="koboSpan" id="kobo.197.1">. </span><span class="koboSpan" id="kobo.197.2">Inside that folder, we will create a few files for conversations. </span><span class="koboSpan" id="kobo.197.3">Every file is named by the conversation ID, which should make data fetching easier and </span><span class="No-Break"><span class="koboSpan" id="kobo.198.1">more readable.</span></span></p>
<p><span class="koboSpan" id="kobo.199.1">As for the </span><strong class="bold"><span class="koboSpan" id="kobo.200.1">Login</span></strong><span class="koboSpan" id="kobo.201.1"> screen, we will use a very small JSON file, which will hold a username and password. </span><span class="koboSpan" id="kobo.201.2">We will use this data to create user flows when the </span><strong class="bold"><span class="koboSpan" id="kobo.202.1">Login</span></strong><span class="koboSpan" id="kobo.203.1"> form is filled out correctly </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">or incorrectly.</span></span></p>
<p><span class="koboSpan" id="kobo.205.1">Looking at the JSON files, you will </span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.206.1">notice some data is repeated in a few files; namely, the user ID, user’s name, and avatar image URL. </span><span class="koboSpan" id="kobo.206.2">In a real-world app, this could cause issues in the future, where data updated in place of the app will not be properly updated or available somewhere else. </span><span class="koboSpan" id="kobo.206.3">That is why we will remove all references to user names and avatar images and leave only the user ID, which we will use to get the other data from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">users.json</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.208.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.209.1">And there we have it! </span><span class="koboSpan" id="kobo.209.2">A big list of users that we will use in different parts of the app, data for the </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Home</span></strong><span class="koboSpan" id="kobo.211.1"> surface, the </span><strong class="bold"><span class="koboSpan" id="kobo.212.1">Profile</span></strong><span class="koboSpan" id="kobo.213.1"> surface, and </span><strong class="bold"><span class="koboSpan" id="kobo.214.1">Conversations</span></strong><span class="koboSpan" id="kobo.215.1">. </span><span class="koboSpan" id="kobo.215.2">We’re ready to create our components! </span><span class="koboSpan" id="kobo.215.3">Right? </span><span class="koboSpan" id="kobo.215.4">Right! </span><span class="koboSpan" id="kobo.215.5">However, we need to get comfortable previewing and debugging our </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">app first.</span></span></p>
<h1 id="_idParaDest-44"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.217.1">Getting comfortable previewing and debugging the app</span></h1>
<p><span class="koboSpan" id="kobo.218.1">Have you been looking to see</span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.219.1"> whether your code runs correctly on a device or a simulator? </span><span class="koboSpan" id="kobo.219.2">If not, let’s see </span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.220.1">how you can see it. </span><span class="koboSpan" id="kobo.220.2">The first thing you need to do is run this command in </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">your terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.222.1">
$ yarn start</span></pre>
<p><span class="koboSpan" id="kobo.223.1">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">expo</span></strong><span class="koboSpan" id="kobo.225.1"> is done setting up your development server, you can hit “</span><em class="italic"><span class="koboSpan" id="kobo.226.1">i</span></em><span class="koboSpan" id="kobo.227.1">” for an iPhone simulator (if you’re working on a Mac computer), “</span><em class="italic"><span class="koboSpan" id="kobo.228.1">a</span></em><span class="koboSpan" id="kobo.229.1">” for an android simulator (if you have Android Studio installed), or you can take your phone and use the Expo </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">Go app.</span></span></p>
<p><span class="koboSpan" id="kobo.231.1">Whichever one you choose, you will see a browser window open automatically on your device. </span><span class="koboSpan" id="kobo.231.2">This browser window looks </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">like this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer015">
<span class="koboSpan" id="kobo.233.1"><img alt="Figure 3.3 – Expo developer tools in the browser " src="image/Figure_3.03_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.234.1">Figure 3.3 – Expo developer tools in the browser</span></p>
<p><span class="koboSpan" id="kobo.235.1">If you want to see your</span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.236.1"> app on your phone, you’ll find the QR code to scan in the Expo Go</span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.237.1"> app right here. </span><span class="koboSpan" id="kobo.237.2">You will see error messages here; you can even use this page to publish </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">your app.</span></span></p>
<p><span class="koboSpan" id="kobo.239.1">I like working with an iPhone simulator open. </span><span class="koboSpan" id="kobo.239.2">Here’s what our app looks like set up on </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">my computer:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<span class="koboSpan" id="kobo.241.1"><img alt="Figure 3.4 – iPhone 13 with iOS 15.2 simulator screenshot " src="image/Figure_3.04_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.242.1">Figure 3.4 – iPhone 13 with iOS 15.2 simulator screenshot</span></p>
<p><span class="koboSpan" id="kobo.243.1">Hopefully, you see something</span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.244.1"> similar. </span><span class="koboSpan" id="kobo.244.2">If you don’t, you can always clone the GitHub </span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.245.1">repository, or compare your code to the one that’s published. </span><span class="koboSpan" id="kobo.245.2">The state of the app you see in the preceding screenshot is what should be seen on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">main</span></strong><span class="koboSpan" id="kobo.247.1"> branch of the repo located </span><span class="No-Break"><span class="koboSpan" id="kobo.248.1">here: </span></span><a href="https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native"><span class="No-Break"><span class="koboSpan" id="kobo.249.1">https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.250.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.251.1">Take some time to play around with the app. </span><span class="koboSpan" id="kobo.251.2">Try creating some obvious errors, such as writing plain text outside of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">&lt;Text /&gt;</span></strong><span class="koboSpan" id="kobo.253.1"> component, maybe using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">&lt;div&gt;</span></strong><span class="koboSpan" id="kobo.255.1"> tag, or not closing </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">a tag.</span></span></p>
<p><span class="koboSpan" id="kobo.257.1">We will practice code changes on our bottom tab navigation. </span><span class="koboSpan" id="kobo.257.2">We will not be creating any components </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">for that.</span></span></p>
<p><span class="koboSpan" id="kobo.259.1">Customizing the appearance of the tab navigator can be achieved by setting properties when the navigator is set up. </span><span class="koboSpan" id="kobo.259.2">We can also </span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.260.1">add some specific per-screen options. </span><span class="koboSpan" id="kobo.260.2">Our bottom tab navigator will </span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.261.1">use icons for tabs, so we will need to start by importing an icon library into the main </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">App.js</span></strong><span class="koboSpan" id="kobo.263.1"> file. </span><span class="koboSpan" id="kobo.263.2">We will use a library called </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">@expo/vector-icons</span></strong><span class="koboSpan" id="kobo.265.1">. </span><span class="koboSpan" id="kobo.265.2">This library is installed by default on all projects initialized </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">expo</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.269.1">Adding libraries</span></p>
<p class="callout"><span class="koboSpan" id="kobo.270.1">Before adding any additional dependencies and libraries, make sure to check the Expo documentation to see whether the library you want is not installed already. </span><span class="koboSpan" id="kobo.270.2">If you do need to add something, make sure to add libraries compatible with the </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">Expo workflow.</span></span></p>
<p><span class="koboSpan" id="kobo.272.1">Expo has done all the heavy lifting for us; we have a big icon library at our fingertips. </span><span class="koboSpan" id="kobo.272.2">All we need to do is use it to add icons to our navigator. </span><span class="koboSpan" id="kobo.272.3">We will start by adding simple icons to four of the </span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">five items:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.274.1">
import Ionicons from "@expo/vector-icons/Ionicons";
// …
function Home() {
  return (
    &lt;Tab.Navigator
      screenOptions={({ route }) =&gt; ({
        tabBarIcon: ({ focused, color, size }) =&gt; {
          let iconName;
          if (route.name === "Feed") {
            iconName = focused ? </span><span class="koboSpan" id="kobo.274.2">"md-home" : "md-home-outline";
          } else if (route.name === "Conversations") {
            iconName = focused ? </span><span class="koboSpan" id="kobo.274.3">"chatbox" : "chatbox-outline";
          } else if (route.name === "Favorites") {
            iconName = focused ? </span><span class="koboSpan" id="kobo.274.4">"heart" : "heart-outline";
          } else if (route.name === "Profile") {
              iconName = focused ? </span><span class="koboSpan" id="kobo.274.5">"person-circle" :                "person-circle-outline";
          }
          return &lt;Ionicons name={iconName} size={size} color={color} /&gt;;
        },
        tabBarActiveTintColor: "#25A0B0",
        tabBarInactiveTintColor: "#000000",
      })}
    &gt;
      &lt;Tab.Screen name='Feed' component={Feed} /&gt;
        &lt;Tab.Screen name='Conversations'          component={Conversations} /&gt;
      &lt;Tab.Screen name='AddPost' component={AddPost} /&gt;
      &lt;Tab.Screen name='Favorites' component={Favorites} /&gt;
      &lt;Tab.Screen name='Profile' component={Profile} /&gt;
    &lt;/Tab.Navigator&gt;
  );
}</span></pre>
<p><span class="koboSpan" id="kobo.275.1">We added a simple </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">if</span></strong><span class="koboSpan" id="kobo.277.1"> statement to </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">&lt;Tab.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.279.1">, where we give it specific instructions on what component should be displayed. </span><span class="koboSpan" id="kobo.279.2">Every time we’re displaying a </span><strong class="source-inline"><span class="koboSpan" id="kobo.280.1">&lt;Ionicons&gt;</span></strong><span class="koboSpan" id="kobo.281.1"> component from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">@expo/vector-icons</span></strong><span class="koboSpan" id="kobo.283.1"> library, however, we’re feeding it different props. </span><span class="koboSpan" id="kobo.283.2">We’ll leave the </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">AddPost</span></strong><span class="koboSpan" id="kobo.285.1"> item for now. </span><span class="koboSpan" id="kobo.285.2">Once </span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.286.1">we create a reusable button component, we’ll come back here and </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1">add it.</span></span></p>
<p><span class="koboSpan" id="kobo.288.1">What we can customize</span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.289.1"> further now is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">tabBa</span></strong><span class="koboSpan" id="kobo.291.1">r label. </span><span class="koboSpan" id="kobo.291.2">As per the design, the label should not be displayed. </span><span class="koboSpan" id="kobo.291.3">We need to add another property </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">&lt;Tab.Navigator&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.295.1">
// …
tabBarInactiveTintColor: "#000000",
tabBarShowLabel: false,
// …</span></pre>
<p><span class="koboSpan" id="kobo.296.1">Looking good! </span><span class="koboSpan" id="kobo.296.2">Now, how about the header? </span><span class="koboSpan" id="kobo.296.3">Our app has a very generic header with a white background and the title of the given surface. </span><span class="koboSpan" id="kobo.296.4">As you can see on the design, some surfaces don’t have titles (such as </span><strong class="bold"><span class="koboSpan" id="kobo.297.1">Profile</span></strong><span class="koboSpan" id="kobo.298.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">Messaging</span></strong><span class="koboSpan" id="kobo.300.1">) and others have a title on a transparent background. </span><span class="koboSpan" id="kobo.300.2">React Navigation is responsible for the look of the header, so let’s set it right now. </span><span class="koboSpan" id="kobo.300.3">We will add yet another prop </span><span class="No-Break"><span class="koboSpan" id="kobo.301.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">&lt;Tab.Navigator&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.303.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.304.1">
// …
tabBarInactiveTintColor: "#000000",
tabBarShowLabel: false,
headerTransparent: true,
// …</span></pre>
<p><span class="koboSpan" id="kobo.305.1">Yay! </span><span class="koboSpan" id="kobo.305.2">That worked – but wait, the text that was displayed on the screen is now behind a fixed, </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">transparent header!</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer017">
<span class="koboSpan" id="kobo.307.1"><img alt="Figure 3.5 – iPhone simulator showing UI issues " src="image/Figure_3.05_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.308.1">Figure 3.5 – iPhone simulator showing UI issues</span></p>
<p><span class="koboSpan" id="kobo.309.1">We need to make sure the </span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.310.1">contents of our app won’t ever fly off the screen like this. </span><span class="koboSpan" id="kobo.310.2">It’s </span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.311.1">not an easy task to achieve, especially with so many screen shapes, notches, and digital buttons. </span><span class="koboSpan" id="kobo.311.2">Luckily for us, the creators of React Navigation added a wrapper component called </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">&lt;SafeAreaView&gt;</span></strong><span class="koboSpan" id="kobo.313.1">. </span><span class="koboSpan" id="kobo.313.2">We have to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">SafeAreaProvider</span></strong><span class="koboSpan" id="kobo.315.1"> component around </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">&lt;NavigationContainer&gt;</span></strong><span class="koboSpan" id="kobo.317.1">. </span><span class="koboSpan" id="kobo.317.2">This component uses React Context “under the hood.” </span><span class="koboSpan" id="kobo.317.3">In order to use this context, we need to add </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">&lt;SafeAreaView&gt;</span></strong><span class="koboSpan" id="kobo.319.1"> around each one of our surfaces. </span><span class="koboSpan" id="kobo.319.2">The main app </span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.320.1">component will look </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.322.1">
export default function App() {
  const [userLoggedIn, setIsUserLoggedIn] = useState(true);
  return (
    &lt;SafeAreaProvider&gt;
      &lt;NavigationContainer&gt;
        &lt;Stack.Navigator&gt;
         // …
        &lt;/Stack.Navigator&gt;
      &lt;/NavigationContainer&gt;
    &lt;/SafeAreaProvider&gt;
  );
}</span></pre>
<p><span class="koboSpan" id="kobo.323.1">Let’s add </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">&lt;SafeAreaView&gt;</span></strong><span class="koboSpan" id="kobo.325.1"> around the </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">&lt;Feed&gt;</span></strong><span class="koboSpan" id="kobo.327.1"> component. </span><span class="koboSpan" id="kobo.327.2">Do you see any improvement over what we saw </span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.328.1">before? </span><span class="koboSpan" id="kobo.328.2">No? </span><span class="koboSpan" id="kobo.328.3">That’s because there’s one more gotcha: we need to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">{{flex: 1}}</span></strong><span class="koboSpan" id="kobo.330.1"> style to the wrapper component. </span><span class="koboSpan" id="kobo.330.2">Okay, the surface looks better – the text is contained on the screen – but it’s still behind </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">the header…</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer018">
<span class="koboSpan" id="kobo.332.1"><img alt="Figure 3.6 – Close-up of the iPhone simulator with changes to the UI " src="image/Figure_3.06_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.333.1">Figure 3.6 – Close-up of the iPhone simulator with changes to the UI</span></p>
<p><span class="koboSpan" id="kobo.334.1">We want to add padding to the top of the surface so that our content will begin below the header. </span><span class="koboSpan" id="kobo.334.2">We want to determine the height of </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.335.1">the header without having to hardcode any pixel values. </span><strong class="bold"><span class="koboSpan" id="kobo.336.1">React Navigation</span></strong><span class="koboSpan" id="kobo.337.1"> comes to the</span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.338.1"> rescue again, by providing</span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.339.1"> a custom hook called </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">useHeaderHeight()</span></strong><span class="koboSpan" id="kobo.341.1">. </span><span class="koboSpan" id="kobo.341.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">Feed</span></strong><span class="koboSpan" id="kobo.343.1"> component looks like </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">this now:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.345.1">
import React from "react";
import { SafeAreaView } from "react-native-safe-area-context";
import { View, Text } from "react-native";
import { useHeaderHeight } from "@react-navigation/elements";
export const Feed = () =&gt; {
  const headerHeight = useHeaderHeight();
  return (
      &lt;SafeAreaView style={{ flex: 1, paddingTop: headerHeight         }}&gt;
      &lt;View&gt;
        &lt;Text&gt;this will be the feed screen&lt;/Text&gt;
      &lt;/View&gt;
    &lt;/SafeAreaView&gt;
  );
};</span></pre>
<p><span class="koboSpan" id="kobo.346.1">And the app should look </span><span class="No-Break"><span class="koboSpan" id="kobo.347.1">like this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer019">
<span class="koboSpan" id="kobo.348.1"><img alt="Figure 3.7 – iPhone simulator with fixed UI " src="image/Figure_3.07_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.349.1">Figure 3.7 – iPhone simulator with fixed UI</span></p>
<p><span class="koboSpan" id="kobo.350.1">Make sure to add </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">&lt;SafeAreaView&gt;</span></strong><span class="koboSpan" id="kobo.352.1"> to all surfaces if you’re following along with this book. </span><span class="koboSpan" id="kobo.352.2">If you prefer to see the code changes on GitHub, you will find them on the branch called </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">chapter-3</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">: </span></span><a href="https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/tree/main/chapter-3"><span class="No-Break"><span class="koboSpan" id="kobo.355.1">https://github.com/PacktPublishing/Simplifying-State-Management-in-React-Native/tree/main/chapter-3</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.356.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.357.1">If you’re wondering why we’re</span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.358.1"> adding header styles to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">&lt;Tab.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.360.1"> and not</span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.361.1"> the root component, I invite you to take a look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">&lt;Stack.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.363.1"> we have set up at the root of our app, in preparation for a </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">Login</span></strong><span class="koboSpan" id="kobo.365.1"> screen. </span><span class="koboSpan" id="kobo.365.2">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">&lt;Stack.Screen&gt;</span></strong><span class="koboSpan" id="kobo.367.1"> component, you will notice the </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">following option:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.369.1">
options={{ headerShown: false }}</span></pre>
<p><span class="koboSpan" id="kobo.370.1">We are telling React Navigation to hide the header of </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">&lt;Stack.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.372.1"> and display the header of the nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">&lt;Tab.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.374.1">. </span><span class="koboSpan" id="kobo.374.2">This nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">&lt;Tab.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.376.1"> is also the one we need to style. </span><span class="koboSpan" id="kobo.376.2">Go ahead and change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">headerShown</span></strong><span class="koboSpan" id="kobo.378.1"> option in your project and observe what happens. </span><span class="koboSpan" id="kobo.378.2">You should see another header show up in the </span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.379.1">app with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">Home</span></strong><span class="koboSpan" id="kobo.381.1"> title! </span><span class="koboSpan" id="kobo.381.2">That’s because we’ve named </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">Home</span></strong><span class="koboSpan" id="kobo.383.1"> the main parent component, used for creating </span><strong class="source-inline"><span class="koboSpan" id="kobo.384.1">&lt;Tab.Navigator&gt;</span></strong><span class="koboSpan" id="kobo.385.1">. </span><span class="koboSpan" id="kobo.385.2">Make sure to change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">headerShown</span></strong><span class="koboSpan" id="kobo.387.1"> option back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">false</span></strong><span class="koboSpan" id="kobo.389.1">, before getting back to work on </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">our app.</span></span></p>
<p><span class="koboSpan" id="kobo.391.1">I hope you’re getting </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.392.1">comfortable with making changes and previewing them in your app. </span><span class="koboSpan" id="kobo.392.2">Let’s finish this section by adding a custom font. </span><span class="koboSpan" id="kobo.392.3">We’ll use a library provided by Expo again: Expo Google Fonts. </span><span class="koboSpan" id="kobo.392.4">If you take a quick look at the design file, you’ll find the name of the font </span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.393.1">used, it’s a Google font </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">called Poppins.</span></span></p>
<p><span class="koboSpan" id="kobo.395.1">We’ll go ahead and import the font into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">Feed</span></strong><span class="koboSpan" id="kobo.397.1"> component, add it as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">style</span></strong><span class="koboSpan" id="kobo.399.1"> prop to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">&lt;Text&gt;</span></strong><span class="koboSpan" id="kobo.401.1"> component, and… oh </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">no! </span><span class="koboSpan" id="kobo.402.2">Problem!</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer020">
<span class="koboSpan" id="kobo.403.1"><img alt="Figure 3.8 – iPhone simulator displaying an error " src="image/Figure_3.08_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.404.1">Figure 3.8 – iPhone simulator displaying an error</span></p>
<p><span class="koboSpan" id="kobo.405.1">Even though this huge</span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.406.1"> red box seems to be screaming at us, there’s no need to worry. </span><span class="koboSpan" id="kobo.406.2">All</span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.407.1"> we need to do is read the error. </span><span class="koboSpan" id="kobo.407.2">It states that </span><strong class="source-inline"><span class="koboSpan" id="kobo.408.1">@expo-google-fonts/poppins</span></strong><span class="koboSpan" id="kobo.409.1"> is not defined. </span><span class="koboSpan" id="kobo.409.2">Of course! </span><span class="koboSpan" id="kobo.409.3">We need to install this font in our project. </span><span class="koboSpan" id="kobo.409.4">Let’s run the following commands in </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">the terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.411.1">
$ expo install expo-font
$ expo install @expo-google-fonts/poppins</span></pre>
<p><span class="koboSpan" id="kobo.412.1">The error should be gone. </span><span class="koboSpan" id="kobo.412.2">Now, we can safely add our font family to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">&lt;Text&gt;</span></strong><span class="koboSpan" id="kobo.414.1"> component. </span><span class="koboSpan" id="kobo.414.2">Or </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">can we?</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer021">
<span class="koboSpan" id="kobo.416.1"><img alt="Figure 3.9 – iPhone simulators displaying an error toast message and details " src="image/Figure_3.09_B18396.jpg"/></span>
</div>
</div>
<div>
<div class="IMG---Figure" id="_idContainer022">
<span class="koboSpan" id="kobo.417.1"><img alt="Figure 3.9 – iPhone simulators displaying an error toast message and details " src="image/Figure_3.10_B18396.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.418.1">Figure 3.9 – iPhone simulators displaying an error toast message and details</span></p>
<p><span class="koboSpan" id="kobo.419.1">The font has not been</span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.420.1"> loaded… Let’s go back to the Expo documentation and </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.421.1">make sure we loaded </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">everything correctly.</span></span></p>
<p><span class="koboSpan" id="kobo.423.1">According to the documentation, we first need to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">useFont</span></strong><span class="koboSpan" id="kobo.425.1"> hook with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">AppLoading</span></strong><span class="koboSpan" id="kobo.427.1"> wrapper around the root component! </span><span class="koboSpan" id="kobo.427.2">Here’s what we need to add to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">App.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.429.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.430.1">
export default function App() {
  const [userLoggedIn, setIsUserLoggedIn] = useState(true);
  let [fontsLoaded] = useFonts({
    Poppins_400Regular,
  });
  if (!fontsLoaded) {
    return &lt;AppLoading /&gt;;
  }
  return (
// …</span></pre>
<p><span class="koboSpan" id="kobo.431.1">And there we have it. </span><span class="koboSpan" id="kobo.431.2">Now, the </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.432.1">app works correctly, and we can add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">fontFamily</span></strong><span class="koboSpan" id="kobo.434.1"> style wherever </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">we’d like:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.436.1">
&lt;Text style={{ fontFamily: "Poppins_400Regular"}}&gt;</span></pre>
<p><span class="koboSpan" id="kobo.437.1">In this section, we got </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.438.1">comfortable changing code, previewing our app, and handling errors. </span><span class="koboSpan" id="kobo.438.2">Now, we’re ready to write and style components in the </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">next chapter.</span></span></p>
<h1 id="_idParaDest-45"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.440.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.441.1">In this chapter, we planned our app and got comfortable previewing and debugging it. </span><span class="koboSpan" id="kobo.441.2">Both of these steps are vital to creating a good developer experience. </span><span class="koboSpan" id="kobo.441.3">First of all, we do not want to face any major surprises – that’s why we want to plan ahead. </span><span class="koboSpan" id="kobo.441.4">You could compare this to how a building is built. </span><span class="koboSpan" id="kobo.441.5">No self-respecting construction worker would start setting up walls and doors before making, or at least looking at, a blueprint. </span><span class="koboSpan" id="kobo.441.6">We, as software developers, are building a digital product and not a building, but we’re using the word “to build” for very </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">good reasons.</span></span></p>
<p><span class="koboSpan" id="kobo.443.1">Second of all, we need to know how to check whether what we’re writing is actually working. </span><span class="koboSpan" id="kobo.443.2">Your code may look logical to you, but that does not mean that it will work after JavaScript tries to understand your logic. </span><span class="koboSpan" id="kobo.443.3">That is why every web developer has a browser window open while working, and why a mobile app developer needs to look at a phone or a phone simulator. </span><span class="koboSpan" id="kobo.443.4">Since we will be spending quite a lot of time looking at our apps on phones, it’s good to </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">get comfortable.</span></span></p>
<p><span class="koboSpan" id="kobo.445.1">Now, dear reader, we are ready to continue our journey into the weeds of React Native! </span><span class="koboSpan" id="kobo.445.2">In the next chapter, we will build the components we planned above. </span><span class="koboSpan" id="kobo.445.3">We will also add styles to match our beautiful design. </span><span class="koboSpan" id="kobo.445.4">We will encounter a few classical problems of React Native and a few quirks – and we will have a nice-looking app at </span><span class="No-Break"><span class="koboSpan" id="kobo.446.1">the end!</span></span></p>
<h1 id="_idParaDest-46"><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.447.1">Further reading</span></h1>
<ul>
<li><a href="https://docs.expo.dev/guides/icons/"><span class="koboSpan" id="kobo.448.1">https://docs.expo.dev/guides/icons/</span></a><span class="koboSpan" id="kobo.449.1"> – Expo </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">icons guide.</span></span></li>
<li><a href="https://reactjs.org/docs/context.html"><span class="koboSpan" id="kobo.451.1">https://reactjs.org/docs/context.html</span></a><span class="koboSpan" id="kobo.452.1"> – </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">React context.</span></span></li>
<li><a href="https://github.com/expo/google-fonts"><span class="koboSpan" id="kobo.454.1">https://github.com/expo/google-fonts</span></a><span class="koboSpan" id="kobo.455.1"> – Expo </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">Google Fonts.</span></span></li>
</ul>
</div>
</body></html>