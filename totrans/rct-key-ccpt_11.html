<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer213">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     11
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-211">
    <span class="koboSpan" id="kobo.2.1">
     Working with Complex State
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Manage cross-component or even app-wide state (instead of just component-specific state)
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.6.1">
       Distribute data across multiple components
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.7.1">
       Handle complex state values and changes
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-212">
    <span class="koboSpan" id="kobo.8.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.9.1">
     State is one of the core concepts you must understand (and work with) to use React effectively.
    </span>
    <span class="koboSpan" id="kobo.9.2">
     Basically, every React app utilizes (many) state values across many components to present a dynamic, reactive user interface.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.10.1">
     From simple state values that contain a changing counter or values entered by users, all the way up to more complex state values such as the combination of multiple form inputs or user authentication information, state is everywhere.
    </span>
    <span class="koboSpan" id="kobo.10.2">
     In React apps, it’s typically managed with the help of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.11.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.12.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.13.1">
     However, once you start building more complex React applications (e.g., online shops, admin dashboards, and similar sites), it is likely that you’ll face various challenges related to state.
    </span>
    <span class="koboSpan" id="kobo.13.2">
     State values might be used in component A but changed in component B or be made up of multiple dynamic values that may change for a broad variety of reasons (e.g., a cart in an online shop, which is a combination of products, where every product has a quantity, a price, and possibly other traits that may be changed individually).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.14.1">
     You can handle all these problems with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.15.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.16.1">
     , props, and the other concepts covered by this book thus far.
    </span>
    <span class="koboSpan" id="kobo.16.2">
     But you will notice that solutions based on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.17.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.18.1">
     alone gain a complexity that can be difficult to understand and maintain.
    </span>
    <span class="koboSpan" id="kobo.18.2">
     That’s why React has more tools to offer—tools created for these kinds of problems, which this chapter will highlight and discuss.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-213">
    <span class="koboSpan" id="kobo.19.1">
     A Problem with Cross-Component State
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.20.1">
     You don’t even need to build a highly sophisticated React app to encounter a common problem: state
    </span>
    <a id="_idIndexMarker518">
    </a>
    <span class="koboSpan" id="kobo.21.1">
     that spans multiple components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     For example, you might be building a news app where users can bookmark certain articles.
    </span>
    <span class="koboSpan" id="kobo.22.2">
     A simple user interface could look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.23.1">
     <img alt="img" src="image/B31339_11_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.24.1">
     Figure 11.1: An example user interface
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.25.1">
     As you can see in the preceding figure, the list of articles is on the left, and a summary of the bookmarked articles can be found in the sidebar on the right.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.26.1">
     A common solution is to split this user interface into multiple components.
    </span>
    <span class="koboSpan" id="kobo.26.2">
     The list of articles, specifically, would probably be in its own component—just like the bookmark summary sidebar.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.27.1">
     However, in that scenario, both components would need to access the same shared state—that is, the list of bookmarked articles.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     The article list component would require access in order to add (or remove) articles.
    </span>
    <span class="koboSpan" id="kobo.27.3">
     The bookmark summary sidebar component would require
    </span>
    <a id="_idIndexMarker519">
    </a>
    <span class="koboSpan" id="kobo.28.1">
     it as it needs to display the bookmarked articles.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.29.1">
     The component tree and state usage for this kind of app could look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.30.1">
     <img alt="img" src="image/B31339_11_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.31.1">
     Figure 11.2: Two sibling components share the same state
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.32.1">
     In this figure, you can see that the state is shared across these two components.
    </span>
    <span class="koboSpan" id="kobo.32.2">
     You also see that the two components have a shared parent component (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.33.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.34.1">
     component, in this example).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.35.1">
     Since the state is used by two components, you would not manage it in either of those components.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     Instead, it’s
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.36.1">
      lifted up
     </span>
    </em>
    <span class="koboSpan" id="kobo.37.1">
     , as described in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.38.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.39.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.40.1">
      Working with Events and State
     </span>
    </em>
    <span class="koboSpan" id="kobo.41.1">
     (in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.42.1">
      Lifting State Up
     </span>
    </em>
    <span class="koboSpan" id="kobo.43.1">
     section).
    </span>
    <span class="koboSpan" id="kobo.43.2">
     When lifting state up, the state values and pointers to the functions that manipulate the state values are passed down to the actual components that need access via props.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.44.1">
     This works and is a common pattern.
    </span>
    <span class="koboSpan" id="kobo.44.2">
     You can (and should) keep on using it.
    </span>
    <span class="koboSpan" id="kobo.44.3">
     But what if a component
    </span>
    <a id="_idIndexMarker520">
    </a>
    <span class="koboSpan" id="kobo.45.1">
     that needs access to some shared state is deeply nested in other components?
    </span>
    <span class="koboSpan" id="kobo.45.2">
     What if the app component tree from the preceding example looked like this?
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.46.1">
     <img alt="img" src="image/B31339_11_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.47.1">
     Figure 11.3: A component tree with multiple layers of state-dependent components
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.48.1">
     In this figure, you can see that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.49.1">
      BookmarkSummary
     </span>
    </code>
    <span class="koboSpan" id="kobo.50.1">
     component is a deeply nested component.
    </span>
    <span class="koboSpan" id="kobo.50.2">
     Between it and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.51.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.52.1">
     component (which manages the shared state), you have two other components: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.53.1">
      InfoSidebar
     </span>
    </code>
    <span class="koboSpan" id="kobo.54.1">
     component and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.55.1">
      BookmarkInformation
     </span>
    </code>
    <span class="koboSpan" id="kobo.56.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.56.2">
     In more complex React apps, having multiple levels of component nesting, as in this example, is very common.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.57.1">
     Of course, even with those extra components, state values can still be passed down via props.
    </span>
    <span class="koboSpan" id="kobo.57.2">
     You just need to add props to
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.58.1">
      all
     </span>
    </strong>
    <span class="koboSpan" id="kobo.59.1">
     components between the component that holds the state and the component that needs the state.
    </span>
    <span class="koboSpan" id="kobo.59.2">
     For example, you must pass the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.60.1">
      bookmarkedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.61.1">
     state value to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.62.1">
      InfoSidebar
     </span>
    </code>
    <span class="koboSpan" id="kobo.63.1">
     component (via props) so that that component can forward it to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.64.1">
      BookmarkInformation
     </span>
    </code>
    <span class="koboSpan" id="kobo.65.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.66.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.67.1">BookmarkInformation</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.68.1">from</span></span>
  <span class="hljs-string"><span class="koboSpan" id="kobo.69.1">'../BookmarkSummary/BookmarkInformation.jsx'</span></span><span class="koboSpan" id="kobo.70.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.71.1">import</span></span><span class="koboSpan" id="kobo.72.1"> classes </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.73.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.74.1">'./InfoSidebar.module.css'</span></span><span class="koboSpan" id="kobo.75.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.76.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.77.1">InfoSidebar</span></span><span class="koboSpan" id="kobo.78.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.79.1">{ bookmarkedArticles }</span></span><span class="koboSpan" id="kobo.80.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.81.1">return</span></span><span class="koboSpan" id="kobo.82.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.83.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.84.1">aside</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.85.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.86.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.87.1">{classes.sidebar}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.88.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.89.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.90.1">BookmarkInformation</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.91.1">bookmarkedArticles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.92.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.93.1">{bookmarkedArticles}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.94.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.95.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.96.1">aside</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.97.1">&gt;</span></span><span class="koboSpan" id="kobo.98.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.99.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.100.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.101.1">InfoSidebar</span></span><span class="koboSpan" id="kobo.102.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.103.1">
     The same procedure is repeated inside of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.104.1">
      BookmarkInformation
     </span>
    </code>
    <span class="koboSpan" id="kobo.105.1">
     component.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.106.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.107.1">
      You can find the complete example on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/examples/01-cross-cmp-state">
      <span class="url">
       <span class="koboSpan" id="kobo.108.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/examples/01-cross-cmp-state
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.109.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.110.1">
     This kind
    </span>
    <a id="_idIndexMarker521">
    </a>
    <span class="koboSpan" id="kobo.111.1">
     of pattern is called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.112.1">
      prop drilling
     </span>
    </strong>
    <span class="koboSpan" id="kobo.113.1">
     .
    </span>
    <span class="koboSpan" id="kobo.113.2">
     Prop drilling means that a state value is passed through multiple components via props.
    </span>
    <span class="koboSpan" id="kobo.113.3">
     And it’s passed
    </span>
    <a id="_idIndexMarker522">
    </a>
    <span class="koboSpan" id="kobo.114.1">
     through components that don’t need the state themselves at all—except for forwarding it to a child component (as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.115.1">
      InfoSidebar
     </span>
    </code>
    <span class="koboSpan" id="kobo.116.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.117.1">
      BookmarkInformation
     </span>
    </code>
    <span class="koboSpan" id="kobo.118.1">
     components are doing in the preceding example).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.119.1">
     As a developer, you will
    </span>
    <a id="_idIndexMarker523">
    </a>
    <span class="koboSpan" id="kobo.120.1">
     typically want to avoid this pattern because prop drilling has a few weaknesses:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.121.1">
      Components that are part of prop drilling (such as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.122.1">
       InfoSidebar
      </span>
     </code>
     <span class="koboSpan" id="kobo.123.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.124.1">
       BookmarkInformation
      </span>
     </code>
     <span class="koboSpan" id="kobo.125.1">
      ) are not really reusable anymore because any component that wants to use them has to provide a value for the forwarded state prop.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.126.1">
      Prop drilling also leads to a lot of overhead code that has to be written (the code to accept props and forward props).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.127.1">
      Refactoring components becomes more work because state props have to be added or removed.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.128.1">
     For these reasons, prop drilling is only acceptable if all components involved are only used in this specific part of the overall React app, and the probability of reusing or refactoring them is low.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.129.1">
     Since prop
    </span>
    <a id="_idIndexMarker524">
    </a>
    <span class="koboSpan" id="kobo.130.1">
     drilling should be avoided (in most situations), React offers an alternative: the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.131.1">
      context
     </span>
    </strong>
    <span class="koboSpan" id="kobo.132.1">
     API.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-214">
    <span class="koboSpan" id="kobo.133.1">
     Using Context to Handle Multi-Component State
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.134.1">
     React’s
    </span>
    <a id="_idIndexMarker525">
    </a>
    <span class="koboSpan" id="kobo.135.1">
     context feature is one that allows you to create a value that can easily be shared across as many components as needed, without using props.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.136.1">
     <img alt="A diagram of a website  Description automatically generated" src="image/B31339_11_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.137.1">
     Figure 11.4: React Context is attached to components to expose it to all child components—without prop drilling
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.138.1">
     Using the context API is a multi-step process, the steps for which are described here:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.139.1">
      You must create a context value that should be shared.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.140.1">
      The context must be provided in a parent component of the components that need access to the context object.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.141.1">
      Components that need access (for reading or writing) must subscribe to the context.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.142.1">
     React manages the context value (and its changes) internally and automatically distributes it to all components that have subscribed to the context.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.143.1">
     Before
    </span>
    <a id="_idIndexMarker526">
    </a>
    <span class="koboSpan" id="kobo.144.1">
     any component may subscribe, however, the first step is to create a context object.
    </span>
    <span class="koboSpan" id="kobo.144.2">
     This is done via React’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.145.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.146.1">
     function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.147.1">import</span></span><span class="koboSpan" id="kobo.148.1"> { createContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.149.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.150.1">'react'</span></span><span class="koboSpan" id="kobo.151.1">;
</span><span class="hljs-title"><span class="koboSpan" id="kobo.152.1">createContext</span></span><span class="koboSpan" id="kobo.153.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.154.1">'Hello Context'</span></span><span class="koboSpan" id="kobo.155.1">); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.156.1">// a context with an initial string value</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.157.1">createContext</span></span><span class="koboSpan" id="kobo.158.1">({}); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.159.1">// a context with an initial (empty) object as a value</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.160.1">
     This function takes an initial value that should be shared.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     It can be any kind of value (e.g., a string or a number), but typically, it’s an object.
    </span>
    <span class="koboSpan" id="kobo.160.3">
     This is because most shared values are a combination of the actual values and functions that should manipulate those values.
    </span>
    <span class="koboSpan" id="kobo.160.4">
     All these things are then grouped together into a single context object.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.161.1">
     Of course, the initial context value can also be an empty value (e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.162.1">
      null
     </span>
    </code>
    <span class="koboSpan" id="kobo.163.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.164.1">
      undefined
     </span>
    </code>
    <span class="koboSpan" id="kobo.165.1">
     , an empty
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.166.1">
      string
     </span>
    </code>
    <span class="koboSpan" id="kobo.167.1">
     , etc.) if needed.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.168.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.169.1">
     also returns a value: a context object that should be stored in a capitalized variable (or constant) because it’s actually a React component (and React components should start with capital characters).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.170.1">
     Here’s how the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.171.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.172.1">
     function can be called to create a context object for the example discussed earlier in this chapter:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.173.1">import</span></span><span class="koboSpan" id="kobo.174.1"> { createContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.175.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.176.1">'react'</span></span><span class="koboSpan" id="kobo.177.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.178.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.179.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.180.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.181.1">createContext</span></span><span class="koboSpan" id="kobo.182.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.183.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.184.1">: []
});
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.185.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.186.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.187.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.188.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.189.1">
     Here, the initial value is an object that contains the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.190.1">
      bookmarkedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.191.1">
     property, which holds an (empty) array.
    </span>
    <span class="koboSpan" id="kobo.191.2">
     You could also store just the array as an initial value (i.e.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.192.1">
      createContext([])
     </span>
    </code>
    <span class="koboSpan" id="kobo.193.1">
     ) but an object is better since more will be added to it later in the chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.194.1">
     This code
    </span>
    <a id="_idIndexMarker527">
    </a>
    <span class="koboSpan" id="kobo.195.1">
     is typically placed in a separate context code file (e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.196.1">
      bookmark-context.jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.197.1">
     ) that’s often stored in a folder named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.198.1">
      store
     </span>
    </code>
    <span class="koboSpan" id="kobo.199.1">
     (because this context feature can be used as a central state store) or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.200.1">
      context
     </span>
    </code>
    <span class="koboSpan" id="kobo.201.1">
     .
    </span>
    <span class="koboSpan" id="kobo.201.2">
     However, this is just a convention and is not technically required.
    </span>
    <span class="koboSpan" id="kobo.201.3">
     You can put this code anywhere in your React app.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.202.1">
     If the file only contains the above code, it may use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.203.1">
      .js
     </span>
    </code>
    <span class="koboSpan" id="kobo.204.1">
     as a file extension since it doesn’t contain any JSX code.
    </span>
    <span class="koboSpan" id="kobo.204.2">
     Later in this chapter, this will change—therefore you can already use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.205.1">
      .jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.206.1">
     as an extension.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.207.1">
     Of course, this initial value is not a replacement for state; it’s a static value that never changes.
    </span>
    <span class="koboSpan" id="kobo.207.2">
     But this was just the first of three steps related to context.
    </span>
    <span class="koboSpan" id="kobo.207.3">
     The next step is to provide the context.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-215">
    <span class="koboSpan" id="kobo.208.1">
     Providing and Managing Context Values
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.209.1">
     In order to use context values in other components, you must first provide the value.
    </span>
    <span class="koboSpan" id="kobo.209.2">
     This is done using the value returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.210.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.211.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.212.1">
     When
    </span>
    <a id="_idIndexMarker528">
    </a>
    <span class="koboSpan" id="kobo.213.1">
     using React 19 or higher, that function
    </span>
    <a id="_idIndexMarker529">
    </a>
    <span class="koboSpan" id="kobo.214.1">
     yields a React component that should be wrapped around all other components that need access to the context value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.215.1">
     When using an older version of React (i.e., React 18 or older), the value returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.216.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.217.1">
     instead is an object that contains a nested
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.218.1">
      Provider
     </span>
    </code>
    <span class="koboSpan" id="kobo.219.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.219.2">
     That property then holds a React component that should be wrapped around all other components that need access to the context value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.220.1">
     So, either way, it’s all about wrapping components with a context provider component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.221.1">
     In the preceding example, using React 19 or higher, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.222.1">
      BookmarkContext
     </span>
    </code>
    <span class="koboSpan" id="kobo.223.1">
     component returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.224.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.225.1">
     could be used in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.226.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.227.1">
     component to wrap it around both the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.228.1">
      Articles
     </span>
    </code>
    <span class="koboSpan" id="kobo.229.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.230.1">
      InfoSidebar
     </span>
    </code>
    <span class="koboSpan" id="kobo.231.1">
     components:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.232.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.233.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.234.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.235.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.236.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.237.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.238.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.239.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.240.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.241.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.242.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.243.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.244.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.245.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.246.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.247.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.248.1">News</span></span><span class="koboSpan" id="kobo.249.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.250.1">return</span></span><span class="koboSpan" id="kobo.251.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.252.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.253.1">BookmarkContext</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.254.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.255.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.256.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.257.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.258.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.259.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.260.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.261.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.262.1">BookmarkContext</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.263.1">&gt;</span></span><span class="koboSpan" id="kobo.264.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.265.1">
     Or, if using React 18 or lower:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.266.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.267.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.268.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.269.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.270.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.271.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.272.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.273.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.274.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.275.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.276.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.277.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.278.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.279.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.280.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.281.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.282.1">News</span></span><span class="koboSpan" id="kobo.283.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.284.1">return</span></span><span class="koboSpan" id="kobo.285.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.286.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.287.1">BookmarkContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.288.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.289.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.290.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.291.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.292.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.293.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.294.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.295.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.296.1">BookmarkContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.297.1">&gt;</span></span><span class="koboSpan" id="kobo.298.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.299.1">
     However, this code does not work because one important thing is missing: the component
    </span>
    <a id="_idIndexMarker530">
    </a>
    <span class="koboSpan" id="kobo.300.1">
     expects a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.301.1">
      value
     </span>
    </code>
    <span class="koboSpan" id="kobo.302.1">
     prop, which should
    </span>
    <a id="_idIndexMarker531">
    </a>
    <span class="koboSpan" id="kobo.303.1">
     contain the current context value that should be distributed to interested components.
    </span>
    <span class="koboSpan" id="kobo.303.2">
     While you do provide an initial context value (which could have been empty), you also need to inform React about the current context value because, very often, context values change (they are often used as a replacement for the cross-component state, after all).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.304.1">
     Hence, the code could be altered like this when using React 19 or higher:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.305.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.306.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.307.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.308.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.309.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.310.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.311.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.312.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.313.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.314.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.315.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.316.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.317.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.318.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.319.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.320.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.321.1">News</span></span><span class="koboSpan" id="kobo.322.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.323.1">const</span></span><span class="koboSpan" id="kobo.324.1"> bookmarkCtxValue = {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.325.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.326.1">: []
  }; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.327.1">// for now, it's the same value as used before, for the initial context</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.328.1">return</span></span><span class="koboSpan" id="kobo.329.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.330.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.331.1">BookmarkContext</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.332.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.333.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.334.1">{bookmarkCtxValue}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.335.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.336.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.337.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.338.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.339.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.340.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.341.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.342.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.343.1">BookmarkContext</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.344.1">&gt;</span></span><span class="koboSpan" id="kobo.345.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.346.1">
     Or, if
    </span>
    <a id="_idIndexMarker532">
    </a>
    <span class="koboSpan" id="kobo.347.1">
     using
    </span>
    <a id="_idIndexMarker533">
    </a>
    <span class="koboSpan" id="kobo.348.1">
     React 18 or lower:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.349.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.350.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.351.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.352.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.353.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.354.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.355.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.356.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.357.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.358.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.359.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.360.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.361.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.362.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.363.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.364.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.365.1">News</span></span><span class="koboSpan" id="kobo.366.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.367.1">const</span></span><span class="koboSpan" id="kobo.368.1"> bookmarkCtxValue = {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.369.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.370.1">: []
  }; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.371.1">// for now, it's the same value as used before, for the initial context</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.372.1">return</span></span><span class="koboSpan" id="kobo.373.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.374.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.375.1">BookmarkContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.376.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.377.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.378.1">{bookmarkCtxValue}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.379.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.380.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.381.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.382.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.383.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.384.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.385.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.386.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.387.1">BookmarkContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.388.1">&gt;</span></span><span class="koboSpan" id="kobo.389.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.390.1">
     With this code, an object with a list of bookmarked articles is distributed to interested descendent components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.391.1">
     The list is still static, though.
    </span>
    <span class="koboSpan" id="kobo.391.2">
     But that can be changed with a tool you already know about: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.392.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.393.1">
     Hook.
    </span>
    <span class="koboSpan" id="kobo.393.2">
     Inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.394.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.395.1">
     component, you can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.396.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.397.1">
     Hook to manage the list of bookmarked articles, like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.398.1">import</span></span><span class="koboSpan" id="kobo.399.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.400.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.401.1">'react'</span></span><span class="koboSpan" id="kobo.402.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.403.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.404.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.405.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.406.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.407.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.408.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.409.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.410.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.411.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.412.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.413.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.414.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.415.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.416.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.417.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.418.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.419.1">News</span></span><span class="koboSpan" id="kobo.420.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.421.1">const</span></span><span class="koboSpan" id="kobo.422.1"> [savedArticles, setSavedArticles] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.423.1">useState</span></span><span class="koboSpan" id="kobo.424.1">([]);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.425.1">const</span></span><span class="koboSpan" id="kobo.426.1"> bookmarkCtxValue = {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.427.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.428.1">: savedArticles </span><span class="hljs-comment"><span class="koboSpan" id="kobo.429.1">// using the state as a value</span></span><span class="koboSpan" id="kobo.430.1">
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.431.1">return</span></span><span class="koboSpan" id="kobo.432.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.433.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.434.1">BookmarkContext</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.435.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.436.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.437.1">{bookmarkCtxValue}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.438.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.439.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.440.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.441.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.442.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.443.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.444.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.445.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.446.1">BookmarkContext</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.447.1">&gt;</span></span><span class="koboSpan" id="kobo.448.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.449.1">
     With
    </span>
    <a id="_idIndexMarker534">
    </a>
    <span class="koboSpan" id="kobo.450.1">
     this change, the context changes from static
    </span>
    <a id="_idIndexMarker535">
    </a>
    <span class="koboSpan" id="kobo.451.1">
     to dynamic.
    </span>
    <span class="koboSpan" id="kobo.451.2">
     Whenever the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.452.1">
      savedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.453.1">
     state changes, the context value will change.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.454.1">
     Therefore, that’s the missing piece when it comes to providing the context.
    </span>
    <span class="koboSpan" id="kobo.454.2">
     If the context should be dynamic (and changeable from inside some nested child component), the context value should also include a pointer to the function that triggers a state update.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.455.1">
     For the preceding example, the code is therefore adjusted like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.456.1">import</span></span><span class="koboSpan" id="kobo.457.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.458.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.459.1">'react'</span></span><span class="koboSpan" id="kobo.460.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.461.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.462.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.463.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.464.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.465.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.466.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.467.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.468.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.469.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.470.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.471.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.472.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.473.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.474.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.475.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.476.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.477.1">News</span></span><span class="koboSpan" id="kobo.478.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.479.1">const</span></span><span class="koboSpan" id="kobo.480.1"> [savedArticles, setSavedArticles] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.481.1">useState</span></span><span class="koboSpan" id="kobo.482.1">([]);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.483.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.484.1">addArticle</span></span><span class="koboSpan" id="kobo.485.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.486.1">article</span></span><span class="koboSpan" id="kobo.487.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.488.1">setSavedArticles</span></span><span class="koboSpan" id="kobo.489.1">(
     </span><span class="hljs-function"><span class="koboSpan" id="kobo.490.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.491.1">prevSavedArticles</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.492.1">) =&gt;</span></span><span class="koboSpan" id="kobo.493.1"> [...prevSavedArticles, article]
    );
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.494.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.495.1">removeArticle</span></span><span class="koboSpan" id="kobo.496.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.497.1">articleId</span></span><span class="koboSpan" id="kobo.498.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.499.1">setSavedArticles</span></span><span class="koboSpan" id="kobo.500.1">(
      </span><span class="hljs-function"><span class="koboSpan" id="kobo.501.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.502.1">prevSavedArticles</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.503.1">) =&gt;</span></span><span class="koboSpan" id="kobo.504.1"> prevSavedArticles
        .</span><span class="hljs-title"><span class="koboSpan" id="kobo.505.1">filter</span></span><span class="koboSpan" id="kobo.506.1">(
          </span><span class="hljs-function"><span class="koboSpan" id="kobo.507.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.508.1">article</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.509.1">) =&gt;</span></span><span class="koboSpan" id="kobo.510.1"> article.</span><span class="hljs-property"><span class="koboSpan" id="kobo.511.1">id</span></span><span class="koboSpan" id="kobo.512.1"> !== articleId
        )
    );
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.513.1">const</span></span><span class="koboSpan" id="kobo.514.1"> bookmarkCtxValue = {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.515.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.516.1">: savedArticles,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.517.1">bookmarkArticle</span></span><span class="koboSpan" id="kobo.518.1">: addArticle,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.519.1">unbookmarkArticle</span></span><span class="koboSpan" id="kobo.520.1">: removeArticle
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.521.1">return</span></span><span class="koboSpan" id="kobo.522.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.523.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.524.1">BookmarkContext</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.525.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.526.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.527.1">{bookmarkCtxValue}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.528.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.529.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.530.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.531.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.532.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.533.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.534.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.535.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.536.1">BookmarkContext</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.537.1">&gt;</span></span><span class="koboSpan" id="kobo.538.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.539.1">
     The following
    </span>
    <a id="_idIndexMarker536">
    </a>
    <span class="koboSpan" id="kobo.540.1">
     are two important things changed
    </span>
    <a id="_idIndexMarker537">
    </a>
    <span class="koboSpan" id="kobo.541.1">
     in this code snippet:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.542.1">
      Two new functions were added:
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.543.1">
       addArticle
      </span>
     </code>
     <span class="koboSpan" id="kobo.544.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.545.1">
       removeArticle
      </span>
     </code>
     <span class="koboSpan" id="kobo.546.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.547.1">
      Properties that point at these functions were added to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.548.1">
       bookmarkCtxValue
      </span>
     </code>
     <span class="koboSpan" id="kobo.549.1">
      : the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.550.1">
       bookmarkArticle
      </span>
     </code>
     <span class="koboSpan" id="kobo.551.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.552.1">
       unbookmarkArticle
      </span>
     </code>
     <span class="koboSpan" id="kobo.553.1">
      methods.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.554.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.555.1">
      addArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.556.1">
     function adds a new article (which should be bookmarked) to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.557.1">
      savedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.558.1">
     state.
    </span>
    <span class="koboSpan" id="kobo.558.2">
     The function form of updating the state value is used since the new state value depends on the previous state value (the bookmarked article is added to the list of already bookmarked articles).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.559.1">
     Similarly, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.560.1">
      removeArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.561.1">
     function removes an article from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.562.1">
      savedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.563.1">
     list by filtering the existing list such that all items, except for the one that has a matching
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.564.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.565.1">
     value, are kept.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.566.1">
     If the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.567.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.568.1">
     component did not use the new context feature, it would be a component that uses state, just as you have seen many times before in this book.
    </span>
    <span class="koboSpan" id="kobo.568.2">
     But now, by using React’s context API, those existing capabilities are combined with a new feature (the context) to create a dynamic, distributable value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.569.1">
     Any components nested in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.570.1">
      Articles
     </span>
    </code>
    <span class="koboSpan" id="kobo.571.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.572.1">
      InfoSidebar
     </span>
    </code>
    <span class="koboSpan" id="kobo.573.1">
     components (or their descendent components) will be
    </span>
    <a id="_idIndexMarker538">
    </a>
    <span class="koboSpan" id="kobo.574.1">
     able to access this
    </span>
    <a id="_idIndexMarker539">
    </a>
    <span class="koboSpan" id="kobo.575.1">
     dynamic context value, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.576.1">
      bookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.577.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.578.1">
      unbookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.579.1">
     methods in the context object, without any prop drilling.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.580.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.581.1">
      You don’t have to create dynamic context values.
     </span>
     <span class="koboSpan" id="kobo.581.2">
      You could also distribute a static value to nested components.
     </span>
     <span class="koboSpan" id="kobo.581.3">
      This is possible but a rare scenario, since most React apps typically need dynamic state values that can change across components.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-216">
    <span class="koboSpan" id="kobo.582.1">
     Using Context in Nested Components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.583.1">
     With the context created and provided, it’s ready to be used by components that need to access
    </span>
    <a id="_idIndexMarker540">
    </a>
    <span class="koboSpan" id="kobo.584.1">
     or change the context value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.585.1">
     To make the context value accessible to components nested inside the context component (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.586.1">
      BookmarkContext
     </span>
    </code>
    <span class="koboSpan" id="kobo.587.1">
     , in the preceding example), React offers a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.588.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.589.1">
     Hook that can be used.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.590.1">
     This Hook, however, is only available when working with React 19 or higher.
    </span>
    <span class="koboSpan" id="kobo.590.2">
     In projects that use older React versions, you would instead use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.591.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.592.1">
     Hook for accessing some context value.
    </span>
    <span class="koboSpan" id="kobo.592.2">
     That Hook is also still supported in React 19, hence you can use either of the two Hooks for getting hold of a context value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.593.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.594.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.595.1">
     Hook is a bit more flexible than the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.596.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.597.1">
     Hook since, unlike any other Hooks, it may actually also be used from inside
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.598.1">
      if
     </span>
    </code>
    <span class="koboSpan" id="kobo.599.1">
     statements or loops.
    </span>
    <span class="koboSpan" id="kobo.599.2">
     In addition, the Hook can be used for more than getting access to context values—you’ll therefore see
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.600.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.601.1">
     again in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.602.1">
      Chapter 17
     </span>
    </em>
    <span class="koboSpan" id="kobo.603.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.604.1">
      Understanding React Suspense &amp; The use() Hook
     </span>
    </em>
    <span class="koboSpan" id="kobo.605.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.606.1">
     As mentioned, when working with React 19, if you’re trying to get access to a context value, both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.607.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.608.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.609.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.610.1">
     can be used.
    </span>
    <span class="koboSpan" id="kobo.610.2">
     Both
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.611.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.612.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.613.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.614.1">
     require one argument: the context object that was created via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.615.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.616.1">
     , i.e., the value returned by that function.
    </span>
    <span class="koboSpan" id="kobo.616.2">
     As a result, you’ll then get the value passed to the context provider component (i.e., the value set for its
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.617.1">
      value
     </span>
    </code>
    <span class="koboSpan" id="kobo.618.1">
     prop).
    </span>
    <span class="koboSpan" id="kobo.618.2">
     When working with React 19 or higher, since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.619.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.620.1">
     is a bit more flexible and certainly a bit less to type, you can ignore
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.621.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.622.1">
     and use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.623.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.624.1">
     Hook for accessing context values.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.625.1">
     For the preceding example, the context value can be used in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.626.1">
      BookmarkSummary
     </span>
    </code>
    <span class="koboSpan" id="kobo.627.1">
     component like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.628.1">import</span></span><span class="koboSpan" id="kobo.629.1"> { use } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.630.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.631.1">'react'</span></span><span class="koboSpan" id="kobo.632.1">; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.633.1">// or import useContext for React &lt; 19</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.634.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.635.1">BookmarkContext</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.636.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.637.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.638.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.639.1">import</span></span><span class="koboSpan" id="kobo.640.1"> classes </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.641.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.642.1">'./BookmarkSummary.module.css'</span></span><span class="koboSpan" id="kobo.643.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.644.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.645.1">BookmarkSummary</span></span><span class="koboSpan" id="kobo.646.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.647.1">const</span></span><span class="koboSpan" id="kobo.648.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.649.1">use</span></span><span class="koboSpan" id="kobo.650.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.651.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.652.1">);
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.653.1">// React &lt; 19: const bookmarkCtx = useContext(BookmarkContext);</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.654.1">const</span></span><span class="koboSpan" id="kobo.655.1"> numberOfArticles = bookmarkCtx.</span><span class="hljs-property"><span class="koboSpan" id="kobo.656.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.657.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.658.1">length</span></span><span class="koboSpan" id="kobo.659.1">;
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.660.1">return</span></span><span class="koboSpan" id="kobo.661.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.662.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.663.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.664.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.665.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.666.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.667.1">{classes.summary}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.668.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.669.1">        {numberOfArticles} articles bookmarked</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.670.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.671.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.672.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.673.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.674.1">ul</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.675.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.676.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.677.1">{classes.list}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.678.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.679.1">        {bookmarkCtx.bookmarkedArticles.map((article) =&gt; (</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.680.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.681.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.682.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.683.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.684.1">{article.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.685.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.686.1">{article.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.687.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.688.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.689.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.690.1">        ))}</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.691.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.692.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.693.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.694.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.695.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.696.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.697.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.698.1">BookmarkSummary</span></span><span class="koboSpan" id="kobo.699.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.700.1">
     In this
    </span>
    <a id="_idIndexMarker541">
    </a>
    <span class="koboSpan" id="kobo.701.1">
     code,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.702.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.703.1">
     receives the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.704.1">
      BookmarkContext
     </span>
    </code>
    <span class="koboSpan" id="kobo.705.1">
     value, which is imported from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.706.1">
      store/bookmark-context.jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.707.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.707.2">
     It then returns the value stored in the context, which is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.708.1">
      bookmarkCtxValue
     </span>
    </code>
    <span class="koboSpan" id="kobo.709.1">
     found in the previous code example.
    </span>
    <span class="koboSpan" id="kobo.709.2">
     As you can see in that snippet,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.710.1">
      bookmarkCtxValue
     </span>
    </code>
    <span class="koboSpan" id="kobo.711.1">
     is an object with three properties:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.712.1">
      bookmarkedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.713.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.714.1">
      bookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.715.1">
     (a method), and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.716.1">
      unbookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.717.1">
     (also a method).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.718.1">
     This returned object is stored in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.719.1">
      bookmarkCtx
     </span>
    </code>
    <span class="koboSpan" id="kobo.720.1">
     constant.
    </span>
    <span class="koboSpan" id="kobo.720.2">
     Whenever the context value changes (because the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.721.1">
      setSavedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.722.1">
     state-updating function in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.723.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.724.1">
     component is executed), this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.725.1">
      BookmarkSummary
     </span>
    </code>
    <span class="koboSpan" id="kobo.726.1">
     component will also be executed again by React, and thus
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.727.1">
      bookmarkCtx
     </span>
    </code>
    <span class="koboSpan" id="kobo.728.1">
     will hold the latest state value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.729.1">
     Finally, in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.730.1">
      BookmarkSummary
     </span>
    </code>
    <span class="koboSpan" id="kobo.731.1">
     component, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.732.1">
      bookmarkedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.733.1">
     property is accessed on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.734.1">
      bookmarkCtx
     </span>
    </code>
    <span class="koboSpan" id="kobo.735.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.735.2">
     This list of articles is then used to calculate the number
    </span>
    <a id="_idIndexMarker542">
    </a>
    <span class="koboSpan" id="kobo.736.1">
     of bookmarked articles, output a short summary, and display the list on the screen.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.737.1">
     Similarly,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.738.1">
      BookmarkContext
     </span>
    </code>
    <span class="koboSpan" id="kobo.739.1">
     can be used via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.740.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.741.1">
     in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.742.1">
      Articles
     </span>
    </code>
    <span class="koboSpan" id="kobo.743.1">
     component:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.744.1">import</span></span><span class="koboSpan" id="kobo.745.1"> { use } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.746.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.747.1">'react'</span></span><span class="koboSpan" id="kobo.748.1">;
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.749.1">// other imports</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.750.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.751.1">Articles</span></span><span class="koboSpan" id="kobo.752.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.753.1">const</span></span><span class="koboSpan" id="kobo.754.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.755.1">use</span></span><span class="koboSpan" id="kobo.756.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.757.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.758.1">); 
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.759.1">// or: const bookmarkCtx = useContext(BookmarkContext)</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.760.1">return</span></span><span class="koboSpan" id="kobo.761.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.762.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.763.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.764.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.765.1">      {dummyArticles.map((article) =&gt; {</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.766.1">        const isBookmarked = bookmarkCtx.bookmarkedArticles.some(</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.767.1">          (bArticle) =&gt; bArticle.id === article.id</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.768.1">        );</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.769.1">        // default icon: Empty bookmark icon, because not bookmarked</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.770.1">        let buttonIcon = </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.771.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.772.1">FaRegBookmark</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.773.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.774.1">;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.775.1">        if (isBookmarked) {</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.776.1">          buttonIcon = </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.777.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.778.1">FaBookmark</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.779.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.780.1">;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.781.1">        }</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.782.1">        return (</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.783.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.784.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.785.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.786.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.787.1">{article.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.788.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.789.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.790.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.791.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.792.1">{article.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.793.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.794.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.795.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.796.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.797.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.798.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.799.1">{article.description}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.800.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.801.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.802.1">&gt;</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.803.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.804.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.805.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.806.1">{buttonIcon}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.807.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.808.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.809.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.810.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.811.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.812.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.813.1">        );</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.814.1">      })}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.815.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.816.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.817.1">&gt;</span></span><span class="koboSpan" id="kobo.818.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.819.1">
     In this component, the context is used to determine whether or not a given article is currently bookmarked (this information is required in order to change the icon and functionality of the button).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.820.1">
     That’s how context values (whether static or dynamic) can be read in components.
    </span>
    <span class="koboSpan" id="kobo.820.2">
     Of course, they can also be changed, as discussed in the next section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-217">
    <span class="koboSpan" id="kobo.821.1">
     Changing Context from Nested Components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.822.1">
     React’s context feature is often used to share data across multiple components without using
    </span>
    <a id="_idIndexMarker543">
    </a>
    <span class="koboSpan" id="kobo.823.1">
     props.
    </span>
    <span class="koboSpan" id="kobo.823.2">
     It’s therefore also quite common that some components must manipulate that data.
    </span>
    <span class="koboSpan" id="kobo.823.3">
     For example, the context value for a shopping cart must be adjustable from inside the component that displays product items (because those probably have an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.824.1">
      "Add to cart"
     </span>
    </code>
    <span class="koboSpan" id="kobo.825.1">
     button).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.826.1">
     However, to change context values from inside a nested component, you cannot simply overwrite the stored context value.
    </span>
    <span class="koboSpan" id="kobo.826.2">
     The following code would not work as intended:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.827.1">const</span></span><span class="koboSpan" id="kobo.828.1"> bookmarkCtx = </span><span class="hljs-title"><span class="koboSpan" id="kobo.829.1">use</span></span><span class="koboSpan" id="kobo.830.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.831.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.832.1">);
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.833.1">// Note: This does NOT work</span></span><span class="koboSpan" id="kobo.834.1">
bookmarkCtx.</span><span class="hljs-property"><span class="koboSpan" id="kobo.835.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.836.1"> = []; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.837.1">// setting the articles to an empty array</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.838.1">
     This code does not work.
    </span>
    <span class="koboSpan" id="kobo.838.2">
     Just as you should not try to update state by simply assigning a new value, you can’t update context values by assigning a new value.
    </span>
    <span class="koboSpan" id="kobo.838.3">
     That’s why two methods (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.839.1">
      bookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.840.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.841.1">
      unbookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.842.1">
     ) were added to the context value in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.843.1">
      Providing and Managing Context Values
     </span>
    </em>
    <span class="koboSpan" id="kobo.844.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.844.2">
     These two methods point at functions that trigger state updates (via the state-updating function provided by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.845.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.846.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.847.1">
     Therefore, in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.848.1">
      Articles
     </span>
    </code>
    <span class="koboSpan" id="kobo.849.1">
     component, where articles can be bookmarked or unbookmarked via button clicks, these methods should be called:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.850.1">// This code is part of the Article component function</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.851.1">// default action =&gt; bookmark article, because not bookmarked yet</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.852.1">let</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.853.1">buttonAction</span></span><span class="koboSpan" id="kobo.854.1"> = () =&gt; bookmarkCtx.</span><span class="hljs-title"><span class="koboSpan" id="kobo.855.1">bookmarkArticle</span></span><span class="koboSpan" id="kobo.856.1">(article);
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.857.1">// default button icon: Empty bookmark icon, because not bookmarked</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.858.1">let</span></span><span class="koboSpan" id="kobo.859.1"> buttonIcon = </span><span class="hljs-tag"><span class="koboSpan" id="kobo.860.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.861.1">FaRegBookmark</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.862.1"> /&gt;</span></span><span class="koboSpan" id="kobo.863.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.864.1">if</span></span><span class="koboSpan" id="kobo.865.1"> (isBookmarked) {
  buttonAction = </span><span class="hljs-function"><span class="koboSpan" id="kobo.866.1">() =&gt;</span></span><span class="koboSpan" id="kobo.867.1"> bookmarkCtx.</span><span class="hljs-title"><span class="koboSpan" id="kobo.868.1">unbookmarkArticle</span></span><span class="koboSpan" id="kobo.869.1">(article.</span><span class="hljs-property"><span class="koboSpan" id="kobo.870.1">id</span></span><span class="koboSpan" id="kobo.871.1">);
  buttonIcon = </span><span class="hljs-tag"><span class="koboSpan" id="kobo.872.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.873.1">FaBookmark</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.874.1"> /&gt;</span></span><span class="koboSpan" id="kobo.875.1">;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.876.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.877.1">
      bookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.878.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.879.1">
      unbookmarkArticle
     </span>
    </code>
    <span class="koboSpan" id="kobo.880.1">
     methods are called inside of anonymous functions that are stored in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.881.1">
      buttonAction
     </span>
    </code>
    <span class="koboSpan" id="kobo.882.1">
     variable.
    </span>
    <span class="koboSpan" id="kobo.882.2">
     That variable is assigned to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.883.1">
      onClick
     </span>
    </code>
    <span class="koboSpan" id="kobo.884.1">
     prop of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.885.1">
      &lt;button&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.886.1">
     (see the previous code snippet).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.887.1">
     With this code, the context value can be changed successfully.
    </span>
    <span class="koboSpan" id="kobo.887.2">
     Thanks to the steps taken in the
    </span>
    <a id="_idIndexMarker544">
    </a>
    <span class="koboSpan" id="kobo.888.1">
     previous section (
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.889.1">
      Using Context in Nested Components
     </span>
    </em>
    <span class="koboSpan" id="kobo.890.1">
     ), whenever the context value is updated, it is then also automatically reflected in the user interface.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.891.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.892.1">
      The finished example code can be found on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/examples/02-cross-cmp-state-with-context">
      <span class="url">
       <span class="koboSpan" id="kobo.893.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/examples/02-cross-cmp-state-with-context
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.894.1">
      .
     </span>
    </p>
   </div>
   <h1 class="heading-1" id="_idParaDest-218">
    <span class="koboSpan" id="kobo.895.1">
     Using the Context API Efficiently
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.896.1">
     Being able to create, provide, access, and change context is important—ultimately, it is these things
    </span>
    <a id="_idIndexMarker545">
    </a>
    <span class="koboSpan" id="kobo.897.1">
     that allow you to use React’s context API in your applications.
    </span>
    <span class="koboSpan" id="kobo.897.2">
     But as your applications (and therefore probably also your context values) become more complex, it’s also important to set up and manage your context efficiently, for example, by getting proper IDE support.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-219">
    <span class="koboSpan" id="kobo.898.1">
     Getting Better Code Completion
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.899.1">
     In the section
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.900.1">
      Using Context to Handle Multi-Component State
     </span>
    </em>
    <span class="koboSpan" id="kobo.901.1">
     , a context object was created via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.902.1">
      createContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.903.1">
     .
    </span>
    <span class="koboSpan" id="kobo.903.2">
     That function received an initial context value—an object that contains a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.904.1">
      bookmarkedArticles
     </span>
    </code>
    <span class="koboSpan" id="kobo.905.1">
     property, in the preceding example.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.906.1">
     In this
    </span>
    <a id="_idIndexMarker546">
    </a>
    <span class="koboSpan" id="kobo.907.1">
     example, the initial context value isn’t too important.
    </span>
    <span class="koboSpan" id="kobo.907.2">
     It’s not often used because it’s overwritten with a new value inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.908.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.909.1">
     component
    </span>
    <a id="_idIndexMarker547">
    </a>
    <span class="koboSpan" id="kobo.910.1">
     regardless.
    </span>
    <span class="koboSpan" id="kobo.910.2">
     However, depending on which
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.911.1">
      Integrated Development Environment
     </span>
    </strong>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.912.1">
      (IDE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.913.1">
     ) you’re using, you can get better code auto-completion when defining an initial context value that has the same shape and structure as the final context value that will be managed in other React components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.914.1">
     Therefore, since two methods were added to the context value in the section
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.915.1">
      Providing and Managing Context Values
     </span>
    </em>
    <span class="koboSpan" id="kobo.916.1">
     , those methods should also be added to the initial context value in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.917.1">
      store/bookmark-context.jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.918.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.919.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.920.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.921.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.922.1">createContext</span></span><span class="koboSpan" id="kobo.923.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.924.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.925.1">: [],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.926.1">bookmarkArticle</span></span><span class="koboSpan" id="kobo.927.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.928.1">() =&gt;</span></span><span class="koboSpan" id="kobo.929.1"> {},
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.930.1">unbookmarkArticle</span></span><span class="koboSpan" id="kobo.931.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.932.1">() =&gt;</span></span><span class="koboSpan" id="kobo.933.1"> {}
});
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.934.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.935.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.936.1">BookmarkContext</span></span><span class="koboSpan" id="kobo.937.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.938.1">
     The two
    </span>
    <a id="_idIndexMarker548">
    </a>
    <span class="koboSpan" id="kobo.939.1">
     methods are added as empty functions that do nothing because the actual logic is set in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.940.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.941.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.941.2">
     The methods are only added to this initial context value to provide better IDE auto-completion.
    </span>
    <span class="koboSpan" id="kobo.941.3">
     This step is therefore optional.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-220">
    <span class="koboSpan" id="kobo.942.1">
     Context or Lifting State Up?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.943.1">
     At this point, you now have two tools for managing cross-component state:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.944.1">
      You can lift state up, as described earlier in the book (in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.945.1">
       Chapter 4
      </span>
     </em>
     <span class="koboSpan" id="kobo.946.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.947.1">
       Working with Events and State
      </span>
     </em>
     <span class="koboSpan" id="kobo.948.1">
      , in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.949.1">
       Lifting State Up
      </span>
     </em>
     <span class="koboSpan" id="kobo.950.1">
      section).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.951.1">
      Alternatively, you can use React’s context API, as explained in this chapter.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.952.1">
     Which of
    </span>
    <a id="_idIndexMarker549">
    </a>
    <span class="koboSpan" id="kobo.953.1">
     the two approaches should you use in each scenario?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.954.1">
     Ultimately, it is up to you how you manage this, but there are some straightforward rules you can follow:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.955.1">
      Lift the state up if you only need to share state across one or two levels of component nesting.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.956.1">
      Use the context API if you have long chains of components (i.e., deep nesting of components) with shared state.
     </span>
     <span class="koboSpan" id="kobo.956.2">
      Once you start to use a lot of prop drilling, it’s time to consider React’s context feature.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.957.1">
      Also use the context API if you have a relatively flat component tree but want to reuse components (i.e., you don’t want to use props for passing state to components).
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-221">
    <span class="koboSpan" id="kobo.958.1">
     Outsourcing Context Logic into Separate Components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.959.1">
     With the previously explained steps, you have everything you need to manage cross-component state via context.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.960.1">
     But there
    </span>
    <a id="_idIndexMarker550">
    </a>
    <span class="koboSpan" id="kobo.961.1">
     is one pattern you can consider for managing your dynamic context value and state: creating a separate component for providing (and managing) the context value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.962.1">
     In the preceding example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.963.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.964.1">
     component was used to provide the context and manage its (dynamic, state-based) value.
    </span>
    <span class="koboSpan" id="kobo.964.2">
     While this works, your components can get unnecessarily complex if they have to deal with context management.
    </span>
    <span class="koboSpan" id="kobo.964.3">
     Creating a separate, dedicated component for that can therefore lead to code that’s easier to understand and maintain.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.965.1">
     For the preceding example, that means that, inside of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.966.1">
      store/bookmark-context.jsx
     </span>
    </code>
    <span class="koboSpan" id="kobo.967.1">
     file, you could create a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.968.1">
      BookmarkContextProvider
     </span>
    </code>
    <span class="koboSpan" id="kobo.969.1">
     component that looks like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.970.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.971.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.972.1">BookmarkContextProvider</span></span><span class="koboSpan" id="kobo.973.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.974.1">{ children }</span></span><span class="koboSpan" id="kobo.975.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.976.1">const</span></span><span class="koboSpan" id="kobo.977.1"> [savedArticles, setSavedArticles] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.978.1">useState</span></span><span class="koboSpan" id="kobo.979.1">([]);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.980.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.981.1">addArticle</span></span><span class="koboSpan" id="kobo.982.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.983.1">article</span></span><span class="koboSpan" id="kobo.984.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.985.1">setSavedArticles</span></span><span class="koboSpan" id="kobo.986.1">(
      </span><span class="hljs-function"><span class="koboSpan" id="kobo.987.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.988.1">prevSavedArticles</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.989.1">) =&gt;</span></span><span class="koboSpan" id="kobo.990.1"> [...prevSavedArticles, article]
    );
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.991.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.992.1">removeArticle</span></span><span class="koboSpan" id="kobo.993.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.994.1">articleId</span></span><span class="koboSpan" id="kobo.995.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.996.1">setSavedArticles</span></span><span class="koboSpan" id="kobo.997.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.998.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.999.1">prevSavedArticles</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1000.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1001.1">
      prevSavedArticles.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1002.1">filter</span></span><span class="koboSpan" id="kobo.1003.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1004.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1005.1">article</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1006.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1007.1"> article.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1008.1">id</span></span><span class="koboSpan" id="kobo.1009.1"> !== articleId)
    );
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1010.1">const</span></span><span class="koboSpan" id="kobo.1011.1"> bookmarkCtxValue = {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1012.1">bookmarkedArticles</span></span><span class="koboSpan" id="kobo.1013.1">: savedArticles,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1014.1">bookmarkArticle</span></span><span class="koboSpan" id="kobo.1015.1">: addArticle,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1016.1">unbookmarkArticle</span></span><span class="koboSpan" id="kobo.1017.1">: removeArticle,
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1018.1">return</span></span><span class="koboSpan" id="kobo.1019.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1020.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1021.1">BookmarkContext</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1022.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1023.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1024.1">{bookmarkCtxValue}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1025.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1026.1">      {children}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1027.1">    &lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1028.1">/BookmarkContext</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1029.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1030.1">  );</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1031.1">}</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1032.1">
     This component contains all the logic related to managing a list of bookmarked articles via state.
    </span>
    <span class="koboSpan" id="kobo.1032.2">
     It creates the same context value as before (a value that contains the list of articles as well as two methods for updating that list).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1033.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1034.1">
      BookmarkContextProvider
     </span>
    </code>
    <span class="koboSpan" id="kobo.1035.1">
     component does one additional thing though.
    </span>
    <span class="koboSpan" id="kobo.1035.2">
     It uses the special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1036.1">
      children
     </span>
    </code>
    <span class="koboSpan" id="kobo.1037.1">
     prop (covered in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1038.1">
      Chapter 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1039.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1040.1">
      Components and Props
     </span>
    </em>
    <span class="koboSpan" id="kobo.1041.1">
     , in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1042.1">
      The Special “children” Prop
     </span>
    </em>
    <span class="koboSpan" id="kobo.1043.1">
     section) to wrap whatever is passed between the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1044.1">
      BookmarkContextProvider
     </span>
    </code>
    <span class="koboSpan" id="kobo.1045.1">
     's component tags with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1046.1">
      BookmarkContext
     </span>
    </code>
    <span class="koboSpan" id="kobo.1047.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1048.1">
     This allows
    </span>
    <a id="_idIndexMarker551">
    </a>
    <span class="koboSpan" id="kobo.1049.1">
     the use of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1050.1">
      BookmarkContextProvider
     </span>
    </code>
    <span class="koboSpan" id="kobo.1051.1">
     component in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1052.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.1053.1">
     component, like so:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1054.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1055.1">Articles</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1056.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1057.1">'../Articles/Articles.jsx'</span></span><span class="koboSpan" id="kobo.1058.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1059.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1060.1">InfoSidebar</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1061.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1062.1">'../InfoSidebar/InfoSidebar.jsx'</span></span><span class="koboSpan" id="kobo.1063.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1064.1">import</span></span><span class="koboSpan" id="kobo.1065.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1066.1">BookmarkContextProvider</span></span><span class="koboSpan" id="kobo.1067.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1068.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1069.1">'../../store/bookmark-context.jsx'</span></span><span class="koboSpan" id="kobo.1070.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1071.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1072.1">News</span></span><span class="koboSpan" id="kobo.1073.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1074.1">return</span></span><span class="koboSpan" id="kobo.1075.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1076.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1077.1">BookmarkContextProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1078.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1079.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1080.1">Articles</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1081.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1082.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1083.1">InfoSidebar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1084.1"> /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1085.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1086.1">BookmarkContextProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1087.1">&gt;</span></span><span class="koboSpan" id="kobo.1088.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1089.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1090.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1091.1">News</span></span><span class="koboSpan" id="kobo.1092.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1093.1">
     Instead of managing the entire context value, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1094.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.1095.1">
     component now simply imports the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1096.1">
      BookmarkContextProvider
     </span>
    </code>
    <span class="koboSpan" id="kobo.1097.1">
     component and wraps that component around
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1098.1">
      Articles
     </span>
    </code>
    <span class="koboSpan" id="kobo.1099.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1100.1">
      InfoSidebar
     </span>
    </code>
    <span class="koboSpan" id="kobo.1101.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1101.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1102.1">
      News
     </span>
    </code>
    <span class="koboSpan" id="kobo.1103.1">
     component, therefore, is leaner.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1104.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1105.1">
      This pattern is entirely optional.
     </span>
     <span class="koboSpan" id="kobo.1105.2">
      It’s neither an official best practice nor does it yield any performance benefits.
     </span>
     <span class="koboSpan" id="kobo.1105.3">
      It’s just a pattern that can help with keeping your component functions lean and concise.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1106.1">
      It’s also worth mentioning that there is a related pattern for consuming context.
     </span>
     <span class="koboSpan" id="kobo.1106.2">
      That pattern, however, relies on building a custom React Hook—a concept that will be covered in the next chapter.
     </span>
     <span class="koboSpan" id="kobo.1106.3">
      Therefore, the mentioned context consumption pattern will be covered in the next chapter, too.
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-222">
    <span class="koboSpan" id="kobo.1107.1">
     Combining Multiple Contexts
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1108.1">
     Especially in bigger and more feature-rich React applications, it is possible (and quite probable), that you will need to work with multiple context values that are likely unrelated to
    </span>
    <a id="_idIndexMarker552">
    </a>
    <span class="koboSpan" id="kobo.1109.1">
     each other.
    </span>
    <span class="koboSpan" id="kobo.1109.2">
     For example, an online shop could use one context for managing the shopping cart, another context for the user authentication status, and yet another context value for tracking page analytics.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1110.1">
     React fully supports use cases like this.
    </span>
    <span class="koboSpan" id="kobo.1110.2">
     You can create, manage, provide, and use as many context values as needed.
    </span>
    <span class="koboSpan" id="kobo.1110.3">
     You can manage multiple (related or unrelated) values in a single context or use multiple contexts.
    </span>
    <span class="koboSpan" id="kobo.1110.4">
     You can provide multiple contexts in the same component or in different components.
    </span>
    <span class="koboSpan" id="kobo.1110.5">
     It is totally up to you and your app’s requirements.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1111.1">
     You can also use multiple contexts in the same component (meaning that you can call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1112.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1113.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1114.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1115.1">
     multiple times, with different context values).
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-223">
    <span class="koboSpan" id="kobo.1116.1">
     Limitations of useState( )
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1117.1">
     Thus far in this chapter, the complexity of cross-component state has been explored.
    </span>
    <span class="koboSpan" id="kobo.1117.2">
     But state
    </span>
    <a id="_idIndexMarker553">
    </a>
    <span class="koboSpan" id="kobo.1118.1">
     management can also get challenging in scenarios where some state is only used inside a single component.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1119.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1120.1">
     is a great tool for state management in most scenarios (of course, right now, it’s also the only tool that’s been covered).
    </span>
    <span class="koboSpan" id="kobo.1120.2">
     Therefore,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1121.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1122.1">
     should be your default choice for managing state.
    </span>
    <span class="koboSpan" id="kobo.1122.2">
     But
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1123.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1124.1">
     can reach its limits if you need to derive a new state value that’s based on the value of another state variable, as in this example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1125.1">setIsLoading</span></span><span class="koboSpan" id="kobo.1126.1">(fetchedPosts ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1127.1">false</span></span><span class="koboSpan" id="kobo.1128.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1129.1">true</span></span><span class="koboSpan" id="kobo.1130.1">);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1131.1">
     This short snippet is taken from a component where an HTTP request is sent to fetch some blog posts:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1132.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1133.1">App</span></span><span class="koboSpan" id="kobo.1134.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1135.1">const</span></span><span class="koboSpan" id="kobo.1136.1"> [fetchedPosts, setFetchedPosts] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1137.1">useState</span></span><span class="koboSpan" id="kobo.1138.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1139.1">null</span></span><span class="koboSpan" id="kobo.1140.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1141.1">const</span></span><span class="koboSpan" id="kobo.1142.1"> [isLoading, setIsLoading] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1143.1">useState</span></span><span class="koboSpan" id="kobo.1144.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1145.1">false</span></span><span class="koboSpan" id="kobo.1146.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1147.1">const</span></span><span class="koboSpan" id="kobo.1148.1"> [error, setError] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1149.1">useState</span></span><span class="koboSpan" id="kobo.1150.1">();
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1151.1">const</span></span><span class="koboSpan" id="kobo.1152.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1153.1">useCallback</span></span><span class="koboSpan" id="kobo.1154.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1155.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1156.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1157.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1158.1">() {
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1159.1">setIsLoading</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1160.1">(fetchedPosts ? </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1161.1">false</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1162.1"> : </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1163.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1164.1">);</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1165.1">try</span></span><span class="koboSpan" id="kobo.1166.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1167.1">const</span></span><span class="koboSpan" id="kobo.1168.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1169.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1170.1">fetch</span></span><span class="koboSpan" id="kobo.1171.1">(
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.1172.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1173.1">
      );
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1174.1">if</span></span><span class="koboSpan" id="kobo.1175.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1176.1">ok</span></span><span class="koboSpan" id="kobo.1177.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1178.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1179.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1180.1">Error</span></span><span class="koboSpan" id="kobo.1181.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1182.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1183.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1184.1">const</span></span><span class="koboSpan" id="kobo.1185.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1186.1">await</span></span><span class="koboSpan" id="kobo.1187.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1188.1">json</span></span><span class="koboSpan" id="kobo.1189.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1190.1">setIsLoading</span></span><span class="koboSpan" id="kobo.1191.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1192.1">false</span></span><span class="koboSpan" id="kobo.1193.1">);
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1194.1">setError</span></span><span class="koboSpan" id="kobo.1195.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1196.1">null</span></span><span class="koboSpan" id="kobo.1197.1">);
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1198.1">setFetchedPosts</span></span><span class="koboSpan" id="kobo.1199.1">(posts);
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1200.1">catch</span></span><span class="koboSpan" id="kobo.1201.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1202.1">setIsLoading</span></span><span class="koboSpan" id="kobo.1203.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1204.1">false</span></span><span class="koboSpan" id="kobo.1205.1">);
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1206.1">setError</span></span><span class="koboSpan" id="kobo.1207.1">(error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1208.1">message</span></span><span class="koboSpan" id="kobo.1209.1">);
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1210.1">setFetchedPosts</span></span><span class="koboSpan" id="kobo.1211.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1212.1">null</span></span><span class="koboSpan" id="kobo.1213.1">);
    }
  }, []);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1214.1">useEffect</span></span><span class="koboSpan" id="kobo.1215.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1216.1">function</span></span><span class="koboSpan" id="kobo.1217.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1218.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1219.1">();
    },
    [fetchPosts]
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1220.1">return</span></span><span class="koboSpan" id="kobo.1221.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1222.1">&lt;&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1223.1">      {isLoading &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1224.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1225.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1226.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1227.1">Loading...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1228.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1229.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1230.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1231.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1232.1">      {error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1233.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1234.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1235.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1236.1">{error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1237.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1238.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1239.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1240.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1241.1">      {fetchedPosts &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1242.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1243.1">BlogPosts</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1244.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1245.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1246.1">{fetchedPosts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1247.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1248.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1249.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1250.1">
  );
}
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1251.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1252.1">
      You’ll find the complete example code on GitHub at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/examples/04-complex-usestate">
      <span class="url">
       <span class="koboSpan" id="kobo.1253.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/examples/04-complex-usestate
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1254.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1255.1">
     When initiating the request, an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1256.1">
      isLoading
     </span>
    </code>
    <span class="koboSpan" id="kobo.1257.1">
     state value (responsible for showing a loading indicator on the screen) should be set to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1258.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.1259.1">
     only if no data was fetched before.
    </span>
    <span class="koboSpan" id="kobo.1259.2">
     If data was fetched before (i.e.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1260.1">
      fetchedPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1261.1">
     is not
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1262.1">
      null
     </span>
    </code>
    <span class="koboSpan" id="kobo.1263.1">
     ), that data should still be shown on the screen, instead of some loading indicator.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1264.1">
     At first sight, this code might not look problematic.
    </span>
    <span class="koboSpan" id="kobo.1264.2">
     But it actually violates an important rule related to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1265.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1266.1">
     : you should not reference the current state to set a new state value.
    </span>
    <span class="koboSpan" id="kobo.1266.2">
     If you need to do so, you should instead use the function form of the state updating function (see the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1267.1">
      Updating State Based on Previous State Correctly
     </span>
    </em>
    <span class="koboSpan" id="kobo.1268.1">
     section of
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1269.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.1270.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1271.1">
      Working with Events and State
     </span>
    </em>
    <span class="koboSpan" id="kobo.1272.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1273.1">
     However, in the preceding example, this solution won’t work.
    </span>
    <span class="koboSpan" id="kobo.1273.2">
     If you switch to the functional
    </span>
    <a id="_idIndexMarker554">
    </a>
    <span class="koboSpan" id="kobo.1274.1">
     state-updating form, you only get access to the current value of the state you’re trying to update.
    </span>
    <span class="koboSpan" id="kobo.1274.2">
     You don’t get (safe) access to the current value of some other state.
    </span>
    <span class="koboSpan" id="kobo.1274.3">
     In the preceding example, another state (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1275.1">
      fetchedPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1276.1">
     instead of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1277.1">
      isLoading
     </span>
    </code>
    <span class="koboSpan" id="kobo.1278.1">
     ) is referenced.
    </span>
    <span class="koboSpan" id="kobo.1278.2">
     Therefore, you must violate the mentioned rule.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1279.1">
     This violation also has real consequences (in this example).
    </span>
    <span class="koboSpan" id="kobo.1279.2">
     The following code snippet is part of a function called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1280.1">
      fetchPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1281.1">
     , which is wrapped with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1282.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1283.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1284.1">const</span></span><span class="koboSpan" id="kobo.1285.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1286.1">useCallback</span></span><span class="koboSpan" id="kobo.1287.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1288.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1289.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1290.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1291.1">() {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1292.1">setIsLoading</span></span><span class="koboSpan" id="kobo.1293.1">(fetchedPosts ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1294.1">false</span></span><span class="koboSpan" id="kobo.1295.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1296.1">true</span></span><span class="koboSpan" id="kobo.1297.1">);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1298.1">setError</span></span><span class="koboSpan" id="kobo.1299.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1300.1">null</span></span><span class="koboSpan" id="kobo.1301.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1302.1">try</span></span><span class="koboSpan" id="kobo.1303.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1304.1">const</span></span><span class="koboSpan" id="kobo.1305.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1306.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1307.1">fetch</span></span><span class="koboSpan" id="kobo.1308.1">(
      </span><span class="hljs-string"><span class="koboSpan" id="kobo.1309.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1310.1">
    );
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1311.1">if</span></span><span class="koboSpan" id="kobo.1312.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1313.1">ok</span></span><span class="koboSpan" id="kobo.1314.1">) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1315.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1316.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1317.1">Error</span></span><span class="koboSpan" id="kobo.1318.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1319.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1320.1">);
    }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1321.1">const</span></span><span class="koboSpan" id="kobo.1322.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1323.1">await</span></span><span class="koboSpan" id="kobo.1324.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1325.1">json</span></span><span class="koboSpan" id="kobo.1326.1">();
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1327.1">setIsLoading</span></span><span class="koboSpan" id="kobo.1328.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1329.1">false</span></span><span class="koboSpan" id="kobo.1330.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1331.1">setError</span></span><span class="koboSpan" id="kobo.1332.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1333.1">null</span></span><span class="koboSpan" id="kobo.1334.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1335.1">setFetchedPosts</span></span><span class="koboSpan" id="kobo.1336.1">(posts);
  } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1337.1">catch</span></span><span class="koboSpan" id="kobo.1338.1"> (error) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1339.1">setIsLoading</span></span><span class="koboSpan" id="kobo.1340.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1341.1">false</span></span><span class="koboSpan" id="kobo.1342.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1343.1">setError</span></span><span class="koboSpan" id="kobo.1344.1">(error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1345.1">message</span></span><span class="koboSpan" id="kobo.1346.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1347.1">setFetchedPosts</span></span><span class="koboSpan" id="kobo.1348.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1349.1">null</span></span><span class="koboSpan" id="kobo.1350.1">);
  }
}, []);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1351.1">
     This function
    </span>
    <a id="_idIndexMarker555">
    </a>
    <span class="koboSpan" id="kobo.1352.1">
     sends an HTTP request and changes multiple state values based on the state of the request.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1353.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1354.1">
     is used to avoid an infinite loop related to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1355.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1356.1">
     (see
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1357.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.1358.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1359.1">
      Handling Side Effects
     </span>
    </em>
    <span class="koboSpan" id="kobo.1360.1">
     , to learn more about
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1361.1">
      useEffect()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1362.1">
     , infinite loops, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1363.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1364.1">
     as a remedy).
    </span>
    <span class="koboSpan" id="kobo.1364.2">
     Normally,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1365.1">
      fetchedPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1366.1">
     should be added as a dependency to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1367.1">
      dependencies
     </span>
    </code>
    <span class="koboSpan" id="kobo.1368.1">
     array passed as a second argument to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1369.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1370.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.1370.2">
     However, in this example, this can’t be done because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1371.1">
      fetchedPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1372.1">
     is changed inside the function wrapped by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1373.1">
      useCallback()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1374.1">
     , and the state value is therefore not just a dependency but also actively changed.
    </span>
    <span class="koboSpan" id="kobo.1374.2">
     This causes an infinite loop.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1375.1">
     As a result, a warning is shown in the terminal and the intended behavior of not showing the loading indicator if data was fetched before is not achieved:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1376.1">
     <img alt="img" src="image/B31339_11_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1377.1">
     Figure 11.5: A warning about the missing dependency is output in the terminal
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1378.1">
     Problems like the one just described are common if you have multiple related state values that depend on each other.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1379.1">
     One possible solution would be to move from multiple, individual state slices (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1380.1">
      fetchedPosts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1381.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1382.1">
      isLoading
     </span>
    </code>
    <span class="koboSpan" id="kobo.1383.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1384.1">
      error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1385.1">
     ) to a single, combined state value (i.e., to an object).
    </span>
    <span class="koboSpan" id="kobo.1385.2">
     That would ensure that all state values are grouped together and can thereby be accessed safely when using the functional state-updating form.
    </span>
    <span class="koboSpan" id="kobo.1385.3">
     The state-updating code could then look like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1386.1">setHttpState</span></span><span class="koboSpan" id="kobo.1387.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1388.1">prevState</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1389.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1390.1"> ({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1391.1">fetchedPosts</span></span><span class="koboSpan" id="kobo.1392.1">: prevState.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1393.1">fetchedPosts</span></span><span class="koboSpan" id="kobo.1394.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1395.1">isLoading</span></span><span class="koboSpan" id="kobo.1396.1">: prevState.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1397.1">fetchedPosts</span></span><span class="koboSpan" id="kobo.1398.1"> ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1399.1">false</span></span><span class="koboSpan" id="kobo.1400.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1401.1">true</span></span><span class="koboSpan" id="kobo.1402.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1403.1">error</span></span><span class="koboSpan" id="kobo.1404.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1405.1">null</span></span><span class="koboSpan" id="kobo.1406.1">
}));
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1407.1">
     This solution would work.
    </span>
    <span class="koboSpan" id="kobo.1407.2">
     However, ending up with ever more complex (and nested) state objects, managed via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1408.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1409.1">
     , is not typically desirable as it can make state management
    </span>
    <a id="_idIndexMarker556">
    </a>
    <span class="koboSpan" id="kobo.1410.1">
     a bit harder and bloat your component code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1411.1">
     That’s why React offers an alternative to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1412.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1413.1">
     : the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1414.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1415.1">
     Hook.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-224">
    <span class="koboSpan" id="kobo.1416.1">
     Managing State with useReducer( )
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1417.1">
     Just like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1418.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1419.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1420.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1421.1">
     is a React Hook.
    </span>
    <span class="koboSpan" id="kobo.1421.2">
     And just like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1422.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1423.1">
     , it is a Hook that
    </span>
    <a id="_idIndexMarker557">
    </a>
    <span class="koboSpan" id="kobo.1424.1">
     can trigger component function re-evaluations.
    </span>
    <span class="koboSpan" id="kobo.1424.2">
     But, of course, it works slightly differently; otherwise, it would be a redundant Hook.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1425.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1426.1">
     is a
    </span>
    <a id="_idIndexMarker558">
    </a>
    <span class="koboSpan" id="kobo.1427.1">
     Hook meant to be used for managing complex state objects.
    </span>
    <span class="koboSpan" id="kobo.1427.2">
     You
    </span>
    <a id="_idIndexMarker559">
    </a>
    <span class="koboSpan" id="kobo.1428.1">
     will rarely (probably never) use it to manage simple string or number values.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1429.1">
     This Hook takes two main arguments:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1430.1">
      A reducer function
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1431.1">
      An initial state value
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1432.1">
     This brings up an important question: what is a reducer function?
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-225">
    <span class="koboSpan" id="kobo.1433.1">
     Understanding Reducer Functions
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1434.1">
     In the
    </span>
    <a id="_idIndexMarker560">
    </a>
    <span class="koboSpan" id="kobo.1435.1">
     context of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1436.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1437.1">
     , a reducer function is
    </span>
    <a id="_idIndexMarker561">
    </a>
    <span class="koboSpan" id="kobo.1438.1">
     a function that receives two parameters:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1439.1">
      The current state value
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1440.1">
      An action that was dispatched
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1441.1">
     Besides receiving arguments, a reducer function must also return a value: the new state.
    </span>
    <span class="koboSpan" id="kobo.1441.2">
     It’s called a reducer function because it reduces the old state (combined with an action) to a new state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1442.1">
     To make this all a bit easier to grasp and reason through, the following code snippet shows how
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1443.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1444.1">
     is used in conjunction with such a reducer function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1445.1">const</span></span><span class="koboSpan" id="kobo.1446.1"> initialHttpState = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1447.1">data</span></span><span class="koboSpan" id="kobo.1448.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1449.1">null</span></span><span class="koboSpan" id="kobo.1450.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1451.1">isLoading</span></span><span class="koboSpan" id="kobo.1452.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1453.1">false</span></span><span class="koboSpan" id="kobo.1454.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1455.1">error</span></span><span class="koboSpan" id="kobo.1456.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1457.1">null</span></span><span class="koboSpan" id="kobo.1458.1">,
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1459.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1460.1">httpReducer</span></span><span class="koboSpan" id="kobo.1461.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1462.1">state, action</span></span><span class="koboSpan" id="kobo.1463.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1464.1">if</span></span><span class="koboSpan" id="kobo.1465.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1466.1">type</span></span><span class="koboSpan" id="kobo.1467.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1468.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1469.1">FETCH_START'</span></span><span class="koboSpan" id="kobo.1470.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1471.1">return</span></span><span class="koboSpan" id="kobo.1472.1"> {
      ...state, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1473.1">// copying the existing state</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.1474.1">isLoading</span></span><span class="koboSpan" id="kobo.1475.1">: state.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1476.1">data</span></span><span class="koboSpan" id="kobo.1477.1"> ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1478.1">false</span></span><span class="koboSpan" id="kobo.1479.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1480.1">true</span></span><span class="koboSpan" id="kobo.1481.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1482.1">error</span></span><span class="koboSpan" id="kobo.1483.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1484.1">null</span></span><span class="koboSpan" id="kobo.1485.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1486.1">if</span></span><span class="koboSpan" id="kobo.1487.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1488.1">type</span></span><span class="koboSpan" id="kobo.1489.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1490.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1491.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1492.1">return</span></span><span class="koboSpan" id="kobo.1493.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1494.1">data</span></span><span class="koboSpan" id="kobo.1495.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1496.1">null</span></span><span class="koboSpan" id="kobo.1497.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1498.1">isLoading</span></span><span class="koboSpan" id="kobo.1499.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1500.1">false</span></span><span class="koboSpan" id="kobo.1501.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1502.1">error</span></span><span class="koboSpan" id="kobo.1503.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1504.1">payload</span></span><span class="koboSpan" id="kobo.1505.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1506.1">if</span></span><span class="koboSpan" id="kobo.1507.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1508.1">type</span></span><span class="koboSpan" id="kobo.1509.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1510.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1511.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1512.1">return</span></span><span class="koboSpan" id="kobo.1513.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1514.1">data</span></span><span class="koboSpan" id="kobo.1515.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1516.1">payload</span></span><span class="koboSpan" id="kobo.1517.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1518.1">isLoading</span></span><span class="koboSpan" id="kobo.1519.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1520.1">false</span></span><span class="koboSpan" id="kobo.1521.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1522.1">error</span></span><span class="koboSpan" id="kobo.1523.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1524.1">null</span></span><span class="koboSpan" id="kobo.1525.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1526.1">return</span></span><span class="koboSpan" id="kobo.1527.1"> initialHttpState; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1528.1">// default value for unknown actions</span></span><span class="koboSpan" id="kobo.1529.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1530.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1531.1">App</span></span><span class="koboSpan" id="kobo.1532.1">() {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1533.1">useReducer</span></span><span class="koboSpan" id="kobo.1534.1">(httpReducer, initialHttpState);
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1535.1">// more component code, not relevant for this snippet / explanation</span></span><span class="koboSpan" id="kobo.1536.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1537.1">
     At the bottom
    </span>
    <a id="_idIndexMarker562">
    </a>
    <span class="koboSpan" id="kobo.1538.1">
     of this snippet, you can see that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1539.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1540.1">
     is called
    </span>
    <a id="_idIndexMarker563">
    </a>
    <span class="koboSpan" id="kobo.1541.1">
     inside of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1542.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1543.1">
     component function.
    </span>
    <span class="koboSpan" id="kobo.1543.2">
     Like all React Hooks, it must be called inside of component functions or other Hooks.
    </span>
    <span class="koboSpan" id="kobo.1543.3">
     You can also see the two arguments that were mentioned previously (the reducer function and the initial state value) being passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1544.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1545.1">
     .
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1546.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1547.1">
     is the reducer function.
    </span>
    <span class="koboSpan" id="kobo.1547.2">
     The function takes two arguments (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1548.1">
      state
     </span>
    </code>
    <span class="koboSpan" id="kobo.1549.1">
     , which is the old state, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1550.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.1551.1">
     , which is the dispatched action) and returns different state objects for different action types.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1552.1">
     This reducer function takes care of all possible state updates.
    </span>
    <span class="koboSpan" id="kobo.1552.2">
     The entire state-updating logic is
    </span>
    <a id="_idIndexMarker564">
    </a>
    <span class="koboSpan" id="kobo.1553.1">
     therefore outsourced from the component (note that
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1554.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1555.1">
     is defined outside of the component function).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1556.1">
     But the
    </span>
    <a id="_idIndexMarker565">
    </a>
    <span class="koboSpan" id="kobo.1557.1">
     component function must, of course, be able to trigger the defined state updates.
    </span>
    <span class="koboSpan" id="kobo.1557.2">
     That’s where actions become important.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1558.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1559.1">
      In this example, the reducer function is created outside of the component function.
     </span>
     <span class="koboSpan" id="kobo.1559.2">
      You could also create it inside the component function, but that is not recommended.
     </span>
     <span class="koboSpan" id="kobo.1559.3">
      If you create the reducer function inside the component function, it will technically be recreated every time the component function is executed.
     </span>
     <span class="koboSpan" id="kobo.1559.4">
      This impacts performance unnecessarily since the reducer function does not need access to any component function values (state or props).
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-226">
    <span class="koboSpan" id="kobo.1560.1">
     Dispatching Actions
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1561.1">
     The code shown previously is incomplete.
    </span>
    <span class="koboSpan" id="kobo.1561.2">
     When calling
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1562.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1563.1">
     in a component function, it does
    </span>
    <a id="_idIndexMarker566">
    </a>
    <span class="koboSpan" id="kobo.1564.1">
     not just take two arguments.
    </span>
    <span class="koboSpan" id="kobo.1564.2">
     Instead, the Hook
    </span>
    <a id="_idIndexMarker567">
    </a>
    <span class="koboSpan" id="kobo.1565.1">
     also returns a value—an array with exactly two elements (just like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1566.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1567.1">
     , though the elements are different).
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1568.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1569.1">
     should therefore be used like this (in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1570.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1571.1">
     component):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1572.1">const</span></span><span class="koboSpan" id="kobo.1573.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1574.1">useReducer</span></span><span class="koboSpan" id="kobo.1575.1">(
  httpReducer, 
  initialHttpState
);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1576.1">
     In this snippet, array destructuring is used to store the two elements (and it is always exactly two!) in two different constants:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1577.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1578.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1579.1">
      dispatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1580.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1581.1">
     The first element in the returned array (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1582.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1583.1">
     , in this case) is the state value returned by the reducer function.
    </span>
    <span class="koboSpan" id="kobo.1583.2">
     It’s updated (meaning that the component function is called by React) whenever the reducer function is executed again.
    </span>
    <span class="koboSpan" id="kobo.1583.3">
     The element is called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1584.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1585.1">
     in this example because it contains the state value, which is related to an HTTP request in this instance.
    </span>
    <span class="koboSpan" id="kobo.1585.2">
     That said, how you name the element in your case is up to you.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1586.1">
     The second element (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1587.1">
      dispatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1588.1">
     , in the example) is a function.
    </span>
    <span class="koboSpan" id="kobo.1588.2">
     It’s a function that can be called to trigger a state update (i.e., to execute the reducer function again).
    </span>
    <span class="koboSpan" id="kobo.1588.3">
     When executed, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1589.1">
      dispatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1590.1">
     function must receive one argument—that is, the action value that will be available inside of the reducer function (via the reducer function’s second argument).
    </span>
    <span class="koboSpan" id="kobo.1590.2">
     Here’s how
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1591.1">
      dispatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1592.1">
     can be used in a component:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1593.1">dispatch</span></span><span class="koboSpan" id="kobo.1594.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1595.1">type</span></span><span class="koboSpan" id="kobo.1596.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1597.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1598.1"> });
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1599.1">
     The element
    </span>
    <a id="_idIndexMarker568">
    </a>
    <span class="koboSpan" id="kobo.1600.1">
     is called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1601.1">
      dispatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1602.1">
     in the example because it’s a
    </span>
    <a id="_idIndexMarker569">
    </a>
    <span class="koboSpan" id="kobo.1603.1">
     function used for dispatching actions to the reducer function.
    </span>
    <span class="koboSpan" id="kobo.1603.2">
     Just as before, the name is up to you, but
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1604.1">
      dispatch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1605.1">
     is a commonly chosen name.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1606.1">
     The shape and structure of that action value are also entirely up to you, but it’s often set to an object that contains a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1607.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.1608.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.1608.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1609.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.1610.1">
     property is used in the reducer function to perform different actions for different types of actions.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1611.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.1612.1">
     therefore acts as an action identifier.
    </span>
    <span class="koboSpan" id="kobo.1612.2">
     You can see the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1613.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.1614.1">
     property being used inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1615.1">
      httpReducer
     </span>
    </code>
    <span class="koboSpan" id="kobo.1616.1">
     function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1617.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1618.1">httpReducer</span></span><span class="koboSpan" id="kobo.1619.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1620.1">state, action</span></span><span class="koboSpan" id="kobo.1621.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1622.1">if</span></span><span class="koboSpan" id="kobo.1623.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1624.1">type</span></span><span class="koboSpan" id="kobo.1625.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1626.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1627.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1628.1">return</span></span><span class="koboSpan" id="kobo.1629.1"> {
      ...state, </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1630.1">// copying the existing state</span></span>
      <span class="hljs-attr"><span class="koboSpan" id="kobo.1631.1">isLoading</span></span><span class="koboSpan" id="kobo.1632.1">: state.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1633.1">data</span></span><span class="koboSpan" id="kobo.1634.1"> ? </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1635.1">false</span></span><span class="koboSpan" id="kobo.1636.1"> : </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1637.1">true</span></span><span class="koboSpan" id="kobo.1638.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1639.1">error</span></span><span class="koboSpan" id="kobo.1640.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1641.1">null</span></span><span class="koboSpan" id="kobo.1642.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1643.1">if</span></span><span class="koboSpan" id="kobo.1644.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1645.1">type</span></span><span class="koboSpan" id="kobo.1646.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1647.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1648.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1649.1">return</span></span><span class="koboSpan" id="kobo.1650.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1651.1">data</span></span><span class="koboSpan" id="kobo.1652.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1653.1">null</span></span><span class="koboSpan" id="kobo.1654.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1655.1">isLoading</span></span><span class="koboSpan" id="kobo.1656.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1657.1">false</span></span><span class="koboSpan" id="kobo.1658.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1659.1">error</span></span><span class="koboSpan" id="kobo.1660.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1661.1">payload</span></span><span class="koboSpan" id="kobo.1662.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1663.1">if</span></span><span class="koboSpan" id="kobo.1664.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1665.1">type</span></span><span class="koboSpan" id="kobo.1666.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1667.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1668.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1669.1">return</span></span><span class="koboSpan" id="kobo.1670.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1671.1">data</span></span><span class="koboSpan" id="kobo.1672.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1673.1">payload</span></span><span class="koboSpan" id="kobo.1674.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1675.1">isLoading</span></span><span class="koboSpan" id="kobo.1676.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1677.1">false</span></span><span class="koboSpan" id="kobo.1678.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1679.1">error</span></span><span class="koboSpan" id="kobo.1680.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1681.1">null</span></span><span class="koboSpan" id="kobo.1682.1">,
    };
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1683.1">return</span></span><span class="koboSpan" id="kobo.1684.1"> initialHttpState; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1685.1">// default value for unknown actions</span></span><span class="koboSpan" id="kobo.1686.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1687.1">
     You can add as many properties to the action object as needed.
    </span>
    <span class="koboSpan" id="kobo.1687.2">
     In the preceding example, some state updates access
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1688.1">
      action.payload
     </span>
    </code>
    <span class="koboSpan" id="kobo.1689.1">
     to extract some extra data from the action object.
    </span>
    <span class="koboSpan" id="kobo.1689.2">
     Inside a component, you would pass data along with the action like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1690.1">dispatch</span></span><span class="koboSpan" id="kobo.1691.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1692.1">type</span></span><span class="koboSpan" id="kobo.1693.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1694.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1695.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1696.1">payload</span></span><span class="koboSpan" id="kobo.1697.1">: posts });
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1698.1">
     Again, the property name (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1699.1">
      payload
     </span>
    </code>
    <span class="koboSpan" id="kobo.1700.1">
     ) is up to you, but passing extra data along with the action allows
    </span>
    <a id="_idIndexMarker570">
    </a>
    <span class="koboSpan" id="kobo.1701.1">
     you to perform state updates that rely on data generated
    </span>
    <a id="_idIndexMarker571">
    </a>
    <span class="koboSpan" id="kobo.1702.1">
     by the component function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1703.1">
     Here’s the complete, final code for the entire
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1704.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.1705.1">
     component function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.1706.1">// code for httpReducer etc. </span><span class="koboSpan" id="kobo.1706.2">did not change</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1707.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1708.1">App</span></span><span class="koboSpan" id="kobo.1709.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1710.1">const</span></span><span class="koboSpan" id="kobo.1711.1"> [httpState, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1712.1">useReducer</span></span><span class="koboSpan" id="kobo.1713.1">(
    httpReducer, 
    initialHttpState
  );
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1714.1">// Using useCallback() to prevent an infinite loop in useEffect() </span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1715.1">const</span></span><span class="koboSpan" id="kobo.1716.1"> fetchPosts = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1717.1">useCallback</span></span><span class="koboSpan" id="kobo.1718.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1719.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1720.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1721.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1722.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1723.1">dispatch</span></span><span class="koboSpan" id="kobo.1724.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1725.1">type</span></span><span class="koboSpan" id="kobo.1726.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1727.1">'FETCH_START'</span></span><span class="koboSpan" id="kobo.1728.1"> });
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1729.1">try</span></span><span class="koboSpan" id="kobo.1730.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1731.1">const</span></span><span class="koboSpan" id="kobo.1732.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1733.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1734.1">fetch</span></span><span class="koboSpan" id="kobo.1735.1">(
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.1736.1">'https://jsonplaceholder.typicode.com/posts'</span></span><span class="koboSpan" id="kobo.1737.1">
      );
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1738.1">if</span></span><span class="koboSpan" id="kobo.1739.1"> (!response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1740.1">ok</span></span><span class="koboSpan" id="kobo.1741.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1742.1">throw</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1743.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1744.1">Error</span></span><span class="koboSpan" id="kobo.1745.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1746.1">'Failed to fetch posts.'</span></span><span class="koboSpan" id="kobo.1747.1">);
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1748.1">const</span></span><span class="koboSpan" id="kobo.1749.1"> posts = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1750.1">await</span></span><span class="koboSpan" id="kobo.1751.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1752.1">json</span></span><span class="koboSpan" id="kobo.1753.1">();
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1754.1">dispatch</span></span><span class="koboSpan" id="kobo.1755.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1756.1">type</span></span><span class="koboSpan" id="kobo.1757.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1758.1">'FETCH_SUCCESS'</span></span><span class="koboSpan" id="kobo.1759.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1760.1">payload</span></span><span class="koboSpan" id="kobo.1761.1">: posts });
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1762.1">catch</span></span><span class="koboSpan" id="kobo.1763.1"> (error) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1764.1">dispatch</span></span><span class="koboSpan" id="kobo.1765.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1766.1">type</span></span><span class="koboSpan" id="kobo.1767.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1768.1">'FETCH_ERROR'</span></span><span class="koboSpan" id="kobo.1769.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1770.1">payload</span></span><span class="koboSpan" id="kobo.1771.1">: error.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1772.1">message</span></span><span class="koboSpan" id="kobo.1773.1"> });
    }
  }, []);
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1774.1">useEffect</span></span><span class="koboSpan" id="kobo.1775.1">(
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1776.1">function</span></span><span class="koboSpan" id="kobo.1777.1"> () {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1778.1">fetchPosts</span></span><span class="koboSpan" id="kobo.1779.1">();
    },
    [fetchPosts]
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1780.1">return</span></span><span class="koboSpan" id="kobo.1781.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1782.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1783.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1784.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1785.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1786.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1787.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1788.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1789.1">Complex State Blog</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1790.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1791.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1792.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1793.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1794.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1795.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1796.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1797.1">{fetchPosts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1798.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1799.1">Load Posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1800.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1801.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1802.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1803.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1804.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1805.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1806.1">      {httpState.isLoading &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1807.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1808.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1809.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1810.1">Loading...</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1811.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1812.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1813.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1814.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1815.1">      {httpState.error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1816.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1817.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1818.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1819.1">{httpState.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1820.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1821.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1822.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1823.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1824.1">      {httpState.data &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1825.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1826.1">BlogPosts</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1827.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1828.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1829.1">{httpState.data}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1830.1"> /&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1831.1">}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1832.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1833.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1834.1">
     In this code
    </span>
    <a id="_idIndexMarker572">
    </a>
    <span class="koboSpan" id="kobo.1835.1">
     snippet, you can see how different actions (with different
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1836.1">
      type
     </span>
    </code>
    <span class="koboSpan" id="kobo.1837.1">
     and
    </span>
    <a id="_idIndexMarker573">
    </a>
    <span class="koboSpan" id="kobo.1838.1">
     sometimes
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1839.1">
      payload
     </span>
    </code>
    <span class="koboSpan" id="kobo.1840.1">
     properties) are dispatched.
    </span>
    <span class="koboSpan" id="kobo.1840.2">
     You can also see that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1841.1">
      httpState
     </span>
    </code>
    <span class="koboSpan" id="kobo.1842.1">
     value is used to show different user interface elements based on the state (e.g.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1843.1">
      &lt;p&gt;Loading…&lt;/p&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1844.1">
     is shown if
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1845.1">
      httpState.isLoading
     </span>
    </code>
    <span class="koboSpan" id="kobo.1846.1">
     is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1847.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.1848.1">
     ).
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-227">
    <span class="koboSpan" id="kobo.1849.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1850.1">
      State management can have its challenges—especially when dealing with cross-component (or app-wide) state or complex state values.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1851.1">
      Cross-component state can be managed by lifting state up or by using React’s context API.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1852.1">
      The context API is typically preferable if you do a lot of prop drilling (forwarding state values via props across multiple component layers).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1853.1">
      When using the context API, you use
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1854.1">
       createContext()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1855.1">
      to create a new context object.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1856.1">
      The created context object is a component that must be wrapped around the part of the component tree that should get access to the context.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1857.1">
      When working with React 18 or older, the context object itself is not a component but an object that offers a nested
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1858.1">
       Provider
      </span>
     </code>
     <span class="koboSpan" id="kobo.1859.1">
      property that is a component.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1860.1">
      Components can access the context value via the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1861.1">
       use()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1862.1">
      (with React 19 or higher) or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1863.1">
       useContext()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1864.1">
      Hooks.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1865.1">
      For managing complex state values,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1866.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1867.1">
      can be a good alternative to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1868.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1869.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1870.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1871.1">
      utilizes a reducer function that converts the current state and a dispatched action to a new state value.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1872.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1873.1">
      returns an array with exactly two elements: the state value and a dispatch function, which is used for dispatching actions.
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-228">
    <span class="koboSpan" id="kobo.1874.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1875.1">
     Being able to manage both simple and complex state values efficiently is important.
    </span>
    <span class="koboSpan" id="kobo.1875.2">
     This chapter introduced two crucial tools that help with the task.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1876.1">
     With the context API’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1877.1">
      use()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1878.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1879.1">
      useContext()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1880.1">
     , and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1881.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1882.1">
     Hooks, three new React Hooks were introduced.
    </span>
    <span class="koboSpan" id="kobo.1882.2">
     Combined with all the other Hooks covered thus far in the book, these mark the last of the React Hooks you will need in your everyday work as a React developer.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1883.1">
     As a React developer, you’re not limited to the built-in Hooks, though.
    </span>
    <span class="koboSpan" id="kobo.1883.2">
     You can also build your own Hooks.
    </span>
    <span class="koboSpan" id="kobo.1883.3">
     The next chapter will finally explore how that works and why you might want to build custom Hooks in the first place.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-229">
    <span class="koboSpan" id="kobo.1884.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1885.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.1885.2">
     You can then compare your answers to the examples that can be found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/11-complex-state/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.1886.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/11-complex-state/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1887.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1888.1">
      Which problem can be solved with React’s context API?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1889.1">
      Which three main steps have to be taken when using the context API?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1890.1">
      When might
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1891.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1892.1">
      be preferred over
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1893.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1894.1">
      ?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1895.1">
      When working with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1896.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1897.1">
      , what’s the role of actions?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-230">
    <span class="koboSpan" id="kobo.1898.1">
     Apply What You Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1899.1">
     Apply your knowledge about the context API and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1900.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1901.1">
     Hook to some real problems.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-231">
    <span class="koboSpan" id="kobo.1902.1">
     Activity 11.1: Migrating an App to the Context API
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1903.1">
     In this activity, your task is to improve an existing React project.
    </span>
    <span class="koboSpan" id="kobo.1903.2">
     Currently, the app is built without the context API, and so cross-component state is managed by lifting the state up.
    </span>
    <span class="koboSpan" id="kobo.1903.3">
     In this project, prop drilling is the consequence in some components.
    </span>
    <span class="koboSpan" id="kobo.1903.4">
     Therefore, the goal is to adjust the app such that the context API is used for cross-component state management.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1904.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1905.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-1-start">
      <span class="url">
       <span class="koboSpan" id="kobo.1906.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-1-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1907.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1907.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.1907.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1908.1">
       activities/practice-1-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.1909.1">
      in this case) to use the right code snapshot.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1910.1">
      The provided project also uses many features covered in earlier chapters.
     </span>
     <span class="koboSpan" id="kobo.1910.2">
      Take your time to analyze it and understand the provided code.
     </span>
     <span class="koboSpan" id="kobo.1910.3">
      This is great practice and allows you to see many key concepts in action.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1911.1">
     Once you have downloaded the code and run
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1912.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.1913.1">
     in the project folder (to install all required dependencies), you can start the development server via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1914.1">
      npm run dev
     </span>
    </code>
    <span class="koboSpan" id="kobo.1915.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1915.2">
     As a result, upon visiting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1916.1">
      localhost:5173
     </span>
    </code>
    <span class="koboSpan" id="kobo.1917.1">
     , you should see the following user interface:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1918.1">
     <img alt="img" src="image/B31339_11_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1919.1">
     Figure 11.6: The running starting project
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1920.1">
     To complete the activity, the steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1921.1">
      Create a new context for the cart items.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1922.1">
      Create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1923.1">
       Provider
      </span>
     </code>
     <span class="koboSpan" id="kobo.1924.1">
      component for the context and handle all context-related state changes there.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1925.1">
      Provide the context (with the help of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1926.1">
       Provider
      </span>
     </code>
     <span class="koboSpan" id="kobo.1927.1">
      component) and make sure all components that need access to the context have access.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1928.1">
      Remove the old logic (where state was lifted up).
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1929.1">
      Use the context in all the components that need access to it.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1930.1">
     The user interface should be the same as that shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1931.1">
      Figure 11.6
     </span>
    </em>
    <span class="koboSpan" id="kobo.1932.1">
     once you have completed the activity.
    </span>
    <span class="koboSpan" id="kobo.1932.2">
     Make sure that the user interface works exactly as it did before you implemented React’s context features.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1933.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1934.1">
      All code files used for this activity, and the solution, can be found at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.1935.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1936.1">
      .
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-232">
    <span class="koboSpan" id="kobo.1937.1">
     Activity 11.2: Replacing useState() with useReducer()
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1938.1">
     In this activity, your task is to replace the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1939.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1940.1">
     Hooks in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1941.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1942.1">
     component with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1943.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1944.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1944.2">
     Use only one single reducer function (and thus only one
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1945.1">
      useReducer()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1946.1">
     call) and merge all relevant state values into one state object.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1947.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1948.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-2-start">
      <span class="url">
       <span class="koboSpan" id="kobo.1949.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-2-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1950.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1950.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.1950.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1951.1">
       activities/practice-2-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.1952.1">
      in this case) to use the right code snapshot.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1953.1">
      The provided project also uses many features covered in earlier chapters.
     </span>
     <span class="koboSpan" id="kobo.1953.2">
      Take your time to analyze it and understand the provided code.
     </span>
     <span class="koboSpan" id="kobo.1953.3">
      This is great practice and allows you to see many key concepts in action.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1954.1">
     Once you have downloaded the code and run
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1955.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.1956.1">
     in the project folder (to install all required dependencies), you can start the development server via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1957.1">
      npm run dev
     </span>
    </code>
    <span class="koboSpan" id="kobo.1958.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1958.2">
     As a result, upon visiting
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1959.1">
      localhost:5173
     </span>
    </code>
    <span class="koboSpan" id="kobo.1960.1">
     , you should see the following user interface:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1961.1">
     <img alt="img" src="image/B31339_11_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1962.1">
     Figure 11.7: The running starting project
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1963.1">
     In the provided starting project, users get one of three results upon clicking the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1964.1">
      Submit
     </span>
    </code>
    <span class="koboSpan" id="kobo.1965.1">
     button:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1966.1">
      If one or both input fields didn’t receive any input, an error message tells users to fill in the form.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1967.1">
      If users entered values into both input fields, but at least one of the inputs holds an invalid value, a different error message is shown.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1968.1">
      If users entered valid values into both input fields, the entered values are printed in the developer tools JavaScript console.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1969.1">
     To complete the activity, the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1970.1">
      Remove (or comment out) the existing logic in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1971.1">
       Form
      </span>
     </code>
     <span class="koboSpan" id="kobo.1972.1">
      component that uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1973.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1974.1">
      Hook for state management.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1975.1">
      Add a reducer function that handles two actions (email changed and password changed) and also returns a default value.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1976.1">
      Update the state object based on the dispatched action type (and payload, if needed).
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1977.1">
      Use the reducer function with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1978.1">
       useReducer()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1979.1">
      Hook.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1980.1">
      Dispatch the appropriate actions (with the appropriate data) in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1981.1">
       Form
      </span>
     </code>
     <span class="koboSpan" id="kobo.1982.1">
      component.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1983.1">
      Use the state value where needed.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1984.1">
     The user interface should be the same as that shown in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1985.1">
      Figure 11.7
     </span>
    </em>
    <span class="koboSpan" id="kobo.1986.1">
     once you’ve finished the activity.
    </span>
    <span class="koboSpan" id="kobo.1986.2">
     Make sure that the user interface works exactly as it did before you implemented React’s context features.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1987.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1988.1">
      All code files used for this activity, and the solution, can be found at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-2">
      <span class="url">
       <span class="koboSpan" id="kobo.1989.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/11-complex-state/activities/practice-2
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1990.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>