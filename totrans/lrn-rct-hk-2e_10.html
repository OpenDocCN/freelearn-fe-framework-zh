<html><head></head><body>
<div id="_idContainer138">
<h1 class="chapterNumber"><a id="_idTextAnchor188"/><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 class="chapterTitle" id="_idParaDest-181"><a id="_idTextAnchor189"/><span class="koboSpan" id="kobo.2.1">Using Hooks for Routing</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In the previous chapter, we learned how to use Hooks for handling form submission using the </span><strong class="keyWord"><span class="koboSpan" id="kobo.4.1">Action State Hook</span></strong><span class="koboSpan" id="kobo.5.1">, how</span><a id="_idIndexMarker368"/><span class="koboSpan" id="kobo.6.1"> to avoid blocking UI with the </span><strong class="keyWord"><span class="koboSpan" id="kobo.7.1">Transition Hook</span></strong><span class="koboSpan" id="kobo.8.1">, and</span><a id="_idIndexMarker369"/><span class="koboSpan" id="kobo.9.1"> how to </span><a id="_idIndexMarker370"/><span class="koboSpan" id="kobo.10.1">use the </span><strong class="keyWord"><span class="koboSpan" id="kobo.11.1">Optimistic Hook</span></strong><span class="koboSpan" id="kobo.12.1"> to implement optimistic updates.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.13.1">In this chapter, we are going to learn how to implement client-side routing in our blog app by using </span><strong class="keyWord"><span class="koboSpan" id="kobo.14.1">React Router</span></strong><span class="koboSpan" id="kobo.15.1">. </span><span class="koboSpan" id="kobo.15.2">First, we</span><a id="_idIndexMarker371"/><span class="koboSpan" id="kobo.16.1"> will learn how React Router works, and which features it offers. </span><span class="koboSpan" id="kobo.16.2">Then, we will be creating a new route for viewing a single post and using the </span><strong class="keyWord"><span class="koboSpan" id="kobo.17.1">Param Hook</span></strong><span class="koboSpan" id="kobo.18.1"> to get</span><a id="_idIndexMarker372"/><span class="koboSpan" id="kobo.19.1"> the post ID from the URL. </span><span class="koboSpan" id="kobo.19.2">Next, we will learn how to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.20.1">Link</span></code><span class="koboSpan" id="kobo.21.1"> component to link to different routes. </span><span class="koboSpan" id="kobo.21.2">Finally, we will learn how to programmatically</span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.22.1"> implement navigation to redirect to a newly created post using the </span><strong class="keyWord"><span class="koboSpan" id="kobo.23.1">Navigation Hook</span></strong><span class="koboSpan" id="kobo.24.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.25.1">The following topics will be covered in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.26.1">Introducing React Router</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.27.1">Creating a new route and using the Param Hook</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.28.1">Linking to routes using the Link component</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.29.1">Programmatically redirecting using the Navigation Hook</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-182"><a id="_idTextAnchor190"/><span class="koboSpan" id="kobo.30.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.31.1">A fairly recent version of Node.js should already be installed. </span><span class="koboSpan" id="kobo.31.2">The Node Package Manager (</span><code class="inlineCode"><span class="koboSpan" id="kobo.32.1">npm</span></code><span class="koboSpan" id="kobo.33.1">) also needs to be installed (it should come with Node.js). </span><span class="koboSpan" id="kobo.33.2">For more information on how to install Node.js, please check out their official website: </span><a href="https://nodejs.org/"><span class="url"><span class="koboSpan" id="kobo.34.1">https://nodejs.org/</span></span></a><span class="koboSpan" id="kobo.35.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.36.1">We are going to use </span><strong class="keyWord"><span class="koboSpan" id="kobo.37.1">Visual Studio Code</span></strong><span class="koboSpan" id="kobo.38.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.39.1">VS Code</span></strong><span class="koboSpan" id="kobo.40.1">) for the guides in this book, but everything should work similarly in any other editor. </span><span class="koboSpan" id="kobo.40.2">For more information on how to install VS Code, please refer to their official website: </span><a href="https://code.visualstudio.com"><span class="url"><span class="koboSpan" id="kobo.41.1">https://code.visualstudio.com</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.42.1">In this book, we use the following versions:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.43.1">Node.js v22.14.0</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.44.1">npm</span></code><span class="koboSpan" id="kobo.45.1"> v10.9.2</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.46.1">Visual Studio Code v1.97.2</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.47.1">The versions mentioned in the preceding list are the ones used in the book. </span><span class="koboSpan" id="kobo.47.2">While installing a newer version should not be an issue, please note that certain steps might work differently on a newer version. </span><span class="koboSpan" id="kobo.47.3">If you are having an issue with the code and steps provided in this book, please try using the mentioned versions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.48.1">You can find the code for this chapter on GitHub: </span><a href="https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter08"><span class="url"><span class="koboSpan" id="kobo.49.1">https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter08</span></span></a></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.50.1">It is highly recommended that you write the code on your own. </span><span class="koboSpan" id="kobo.50.2">Do not simply run the code examples that are provided with the book. </span><span class="koboSpan" id="kobo.50.3">It is important to write the code yourself to be able to learn and understand it properly. </span><span class="koboSpan" id="kobo.50.4">However, if you run into any issues, you can always refer to the code example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-183"><a id="_idTextAnchor191"/><span class="koboSpan" id="kobo.51.1">Introducing React Router</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.52.1">React Router </span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.53.1">started out as a simple, declarative routing library. </span><span class="koboSpan" id="kobo.53.2">It provides features to define and manage different routes for our app, as well as navigating between them. </span><span class="koboSpan" id="kobo.53.3">Recently, React Router can also be used as a React framework, providing ways to handle layouts and advanced server-side rendering. </span><span class="koboSpan" id="kobo.53.4">However, since this book focuses on Hooks, we will focus on React Router as a library.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.54.1">The library consists of three main components:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.55.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.56.1">BrowserRouter</span></code><span class="koboSpan" id="kobo.57.1"> component, which provides a context to use routing in</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.58.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.59.1">Routes</span></code><span class="koboSpan" id="kobo.60.1"> component, which lets us define some routes and renders the component of the currently active route</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.61.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.62.1">Route</span></code><span class="koboSpan" id="kobo.63.1"> component, which lets us define a specific route and component to render</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.64.1">Additionally, the library provides components to create links to certain routes (using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.65.1">Link</span></code><span class="koboSpan" id="kobo.66.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.67.1">NavLink</span></code><span class="koboSpan" id="kobo.68.1"> components), as well as Hooks to get parameters from the URL (Param Hook) and to navigate (Navigation Hook).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.69.1">Now, let’s get started setting up React Router and an index route (which will contain the home page of our blog, with the feed of blog posts). </span><span class="koboSpan" id="kobo.69.2">The index route will be what is served on the main URL of our server, also sometimes called the entry point or </span><code class="inlineCode"><span class="koboSpan" id="kobo.70.1">/</span></code><span class="koboSpan" id="kobo.71.1"> route.</span></p>
<h2 class="heading-2" id="_idParaDest-184"><a id="_idTextAnchor192"/><span class="koboSpan" id="kobo.72.1">Setting up React Router</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.73.1">Follow these</span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.74.1"> steps to get started setting up the React Router library and an index route:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.75.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.76.1">Chapter07_4</span></code><span class="koboSpan" id="kobo.77.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.78.1">Chapter08_1</span></code><span class="koboSpan" id="kobo.79.1"> folder by executing the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.80.1">$ cp -R Chapter07_4 Chapter08_1
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.81.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.82.1">Chapter08_1</span></code><span class="koboSpan" id="kobo.83.1"> folder in VS Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.84.1">Open a Terminal and install the </span><code class="inlineCode"><span class="koboSpan" id="kobo.85.1">react-router</span></code><span class="koboSpan" id="kobo.86.1"> library, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.87.1">$ npm install --save-exact react-router@7.2.0
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.88.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.89.1">src/pages/</span></code><span class="koboSpan" id="kobo.90.1"> folder, in which we are going to put the various pages of our app.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.91.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.92.1">src/pages/Home.jsx</span></code><span class="koboSpan" id="kobo.93.1"> file to contain the home page of our blog app (which will show the feed of posts that we already had before).</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.94.1">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.95.1">Suspense</span></code><span class="koboSpan" id="kobo.96.1">, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.97.1">PostFeed</span></code><span class="koboSpan" id="kobo.98.1">, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.99.1">ThemeContext</span></code><span class="koboSpan" id="kobo.100.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.101.1">import</span></span><span class="koboSpan" id="kobo.102.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.103.1">Suspense</span></span><span class="koboSpan" id="kobo.104.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.105.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.106.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.107.1">import</span></span><span class="koboSpan" id="kobo.108.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.109.1">PostFeed</span></span><span class="koboSpan" id="kobo.110.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.111.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.112.1">'@/components/post/PostFeed.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.113.1">import</span></span><span class="koboSpan" id="kobo.114.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.115.1">ThemeContext</span></span><span class="koboSpan" id="kobo.116.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.117.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.118.1">'@/contexts/ThemeContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.119.1">Define </span><a id="_idIndexMarker376"/><span class="koboSpan" id="kobo.120.1">and export a </span><code class="inlineCode"><span class="koboSpan" id="kobo.121.1">Home</span></code><span class="koboSpan" id="kobo.122.1"> component, which shows a fallback while loading posts, then shows the featured posts with a special color, and then the regular posts:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.123.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.124.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.125.1">Home</span></span><span class="koboSpan" id="kobo.126.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.127.1">return</span></span><span class="koboSpan" id="kobo.128.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.129.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.130.1">Suspense</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.131.1">fallback</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.132.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.133.1">{</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.134.1">&lt;</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.135.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.136.1">&gt;</span></span><span class="koboSpan" id="kobo.137.1">Loading posts...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.138.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.139.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.140.1">&gt;</span></span><span class="koboSpan" id="kobo.141.1">}&gt;
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.142.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.143.1">ThemeContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.144.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.145.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.146.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.147.1">primaryColor:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.148.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.149.1">salmon</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.150.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.151.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.152.1">PostFeed</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.153.1">featured</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.154.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.155.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.156.1">ThemeContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.157.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.158.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.159.1">PostFeed</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.160.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.161.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.162.1">Suspense</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.163.1">&gt;</span></span><span class="koboSpan" id="kobo.164.1">
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.165.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.166.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.167.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.168.1">remove</span></em><span class="koboSpan" id="kobo.169.1"> the import of </span><code class="inlineCode"><span class="koboSpan" id="kobo.170.1">Suspense</span></code><span class="koboSpan" id="kobo.171.1">, as we are not going to need it anymore:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.172.1">import</span></span><span class="koboSpan" id="kobo.173.1"> { useState</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.174.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.175.1">Suspense</span></strong></span><span class="koboSpan" id="kobo.176.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.177.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.178.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.179.1">Also, </span><em class="italic"><span class="koboSpan" id="kobo.180.1">remove</span></em><span class="koboSpan" id="kobo.181.1"> the import of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.182.1">PostFeed</span></code><span class="koboSpan" id="kobo.183.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.184.1">import</span></span><span class="koboSpan" id="kobo.185.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.186.1">PostFeed</span></span><span class="koboSpan" id="kobo.187.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.188.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.189.1">'./components/post/PostFeed.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.190.1">Then, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.191.1">BrowserRouter</span></code><span class="koboSpan" id="kobo.192.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.193.1">Routes</span></code><span class="koboSpan" id="kobo.194.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.195.1">Route</span></code><span class="koboSpan" id="kobo.196.1"> from </span><code class="inlineCode"><span class="koboSpan" id="kobo.197.1">react-router</span></code><span class="koboSpan" id="kobo.198.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.199.1">import</span></span><span class="koboSpan" id="kobo.200.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.201.1">BrowserRouter</span></span><span class="koboSpan" id="kobo.202.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.203.1">Routes</span></span><span class="koboSpan" id="kobo.204.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.205.1">Route</span></span><span class="koboSpan" id="kobo.206.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.207.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.208.1">'react-router'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.209.1">Also, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.210.1">Home</span></code><span class="koboSpan" id="kobo.211.1"> page component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.212.1">import</span></span><span class="koboSpan" id="kobo.213.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.214.1">Home</span></span><span class="koboSpan" id="kobo.215.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.216.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.217.1">'./pages/Home.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.218.1">Inside </span><a id="_idIndexMarker377"/><span class="koboSpan" id="kobo.219.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.220.1">App</span></code><span class="koboSpan" id="kobo.221.1"> component, define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.222.1">BrowserRouter</span></code><span class="koboSpan" id="kobo.223.1">, making sure it wraps all of the components, so that we can make use of the Navigation Hook in the header components later:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.224.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.225.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.226.1">App</span></span><span class="koboSpan" id="kobo.227.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.228.1">const</span></span><span class="koboSpan" id="kobo.229.1"> [username, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.230.1">useState</span></span><span class="koboSpan" id="kobo.231.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.232.1">''</span></span><span class="koboSpan" id="kobo.233.1">)
  return (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.234.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.235.1">QueryClientProvider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.236.1">client</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.237.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.238.1">{queryClient}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.239.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.240.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.241.1">UserContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.242.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.243.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.244.1">{[username,</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.245.1">setUsername</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.246.1">]}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.247.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.248.1">ThemeContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.249.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.250.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.251.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.252.1">primaryColor:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.253.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.254.1">black</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.255.1">' }}&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.256.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.257.1">BrowserRouter</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.258.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.259.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.260.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.261.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.262.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.263.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.264.1">padding:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.265.1">8</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.266.1"> }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.267.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.268.1">UserBar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.269.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.270.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.271.1">br</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.272.1"> /&gt;</span></span><span class="koboSpan" id="kobo.273.1">
              {username &amp;&amp; </span><span class="hljs-tag"><span class="koboSpan" id="kobo.274.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.275.1">CreatePost</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.276.1"> /&gt;</span></span><span class="koboSpan" id="kobo.277.1">}
              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.278.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.279.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.280.1"> /&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.281.1">Inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.282.1">ErrorBoundary</span></code><span class="koboSpan" id="kobo.283.1">, </span><em class="italic"><span class="koboSpan" id="kobo.284.1">replace</span></em><span class="koboSpan" id="kobo.285.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.286.1">Suspense</span></code><span class="koboSpan" id="kobo.287.1"> component and all its children. </span><span class="koboSpan" id="kobo.287.2">Instead, render the </span><code class="inlineCode"><span class="koboSpan" id="kobo.288.1">Routes</span></code><span class="koboSpan" id="kobo.289.1"> component, in which we can define routes for our app:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-tag"><span class="koboSpan" id="kobo.290.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.291.1">QueryErrorResetBoundary</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.292.1">&gt;</span></span><span class="koboSpan" id="kobo.293.1">
                {({ reset }) =&gt; (
                  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.294.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.295.1">ErrorBoundary</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.296.1">onReset</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.297.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.298.1">{reset}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.299.1">fallbackRender</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.300.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.301.1">{FetchErrorNotice}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.302.1">                  &gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.303.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.304.1">Routes</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.305.1">&gt;</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.306.1">Define an </span><a id="_idIndexMarker378"/><span class="koboSpan" id="kobo.307.1">index route which renders the </span><code class="inlineCode"><span class="koboSpan" id="kobo.308.1">Home</span></code><span class="koboSpan" id="kobo.309.1"> page component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.310.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.311.1">Route</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.312.1">index</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.313.1">element</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.314.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.315.1">{</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.316.1">&lt;</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.317.1">Home</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.318.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.319.1">} /&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.320.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.321.1">Routes</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.322.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.323.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.324.1">ErrorBoundary</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.325.1">&gt;</span></span><span class="koboSpan" id="kobo.326.1">
                )}
              </span><span class="hljs-tag"><span class="koboSpan" id="kobo.327.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.328.1">QueryErrorResetBoundary</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.329.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.330.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.331.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.332.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.333.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.334.1">BrowserRouter</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.335.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.336.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.337.1">ThemeContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.338.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.339.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.340.1">UserContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.341.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.342.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.343.1">QueryClientProvider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.344.1">&gt;</span></span><span class="koboSpan" id="kobo.345.1">
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.346.1">Run the app, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.347.1">$ npm run dev
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.348.1">When opening the app in a browser, you will see that it looks exactly the same way as before, but now the home </span><a id="_idIndexMarker379"/><span class="koboSpan" id="kobo.349.1">page is rendered via React Router instead of being hardcoded!</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.350.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.351.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.352.1">Chapter08/Chapter08_1</span></code><span class="koboSpan" id="kobo.353.1"> folder. </span><span class="koboSpan" id="kobo.353.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.354.1">README.md</span></code><span class="koboSpan" id="kobo.355.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-185"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.356.1">Creating a new route and using the Param Hook</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.357.1">Now that we have React Router set up successfully, we can start creating a new route for viewing a single post. </span><span class="koboSpan" id="kobo.357.2">This route will look as follows: </span><code class="inlineCode"><span class="koboSpan" id="kobo.358.1">/post/:id</span></code><span class="koboSpan" id="kobo.359.1">, with </span><code class="inlineCode"><span class="koboSpan" id="kobo.360.1">:id</span></code><span class="koboSpan" id="kobo.361.1"> being a URL param containing the id </span><a id="_idIndexMarker380"/><span class="koboSpan" id="kobo.362.1">of a post to be viewed. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.363.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.364.1">URL param</span></strong><span class="koboSpan" id="kobo.365.1"> is a parameter </span><a id="_idIndexMarker381"/><span class="koboSpan" id="kobo.366.1">used in an URL to define dynamic content. </span><span class="koboSpan" id="kobo.366.2">For example, in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.367.1">/post/:id</span></code><span class="koboSpan" id="kobo.368.1"> route, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.369.1">/post/</span></code><span class="koboSpan" id="kobo.370.1"> part would be a static string, but the </span><code class="inlineCode"><span class="koboSpan" id="kobo.371.1">:id</span></code><span class="koboSpan" id="kobo.372.1"> will be replaced with a dynamic post ID. </span><span class="koboSpan" id="kobo.372.2">Let’s assume you have an URL that ends with </span><code class="inlineCode"><span class="koboSpan" id="kobo.373.1">/post/8</span></code><span class="koboSpan" id="kobo.374.1">, that would mean that the route matches with </span><a id="_idIndexMarker382"/><span class="koboSpan" id="kobo.375.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.376.1">id</span></code><span class="koboSpan" id="kobo.377.1"> param being set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.378.1">8</span></code><span class="koboSpan" id="kobo.379.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.380.1">Let’s get started setting up the page and route:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.381.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.382.1">Chapter08_1</span></code><span class="koboSpan" id="kobo.383.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.384.1">Chapter08_2</span></code><span class="koboSpan" id="kobo.385.1"> folder by executing the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.386.1">$ cp -R Chapter08_1 Chapter08_2
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.387.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.388.1">Chapter08_2</span></code><span class="koboSpan" id="kobo.389.1"> folder in VS Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.390.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.391.1">src/api.js</span></code><span class="koboSpan" id="kobo.392.1"> and define a new function to fetch a single post:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.393.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.394.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.395.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.396.1">fetchPost</span></span><span class="koboSpan" id="kobo.397.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.398.1">{ id }</span></span><span class="koboSpan" id="kobo.399.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.400.1">const</span></span><span class="koboSpan" id="kobo.401.1"> res = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.402.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.403.1">fetch</span></span><span class="koboSpan" id="kobo.404.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.405.1">`/api/posts/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.406.1">${id}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.407.1">`</span></span><span class="koboSpan" id="kobo.408.1">)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.409.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.410.1">await</span></span><span class="koboSpan" id="kobo.411.1"> res.</span><span class="hljs-title"><span class="koboSpan" id="kobo.412.1">json</span></span><span class="koboSpan" id="kobo.413.1">()
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.414.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.415.1">src/components/post/Post.jsx</span></code><span class="koboSpan" id="kobo.416.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.417.1">useSuspenseQuery</span></code><span class="koboSpan" id="kobo.418.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.419.1">fetchPost</span></code><span class="koboSpan" id="kobo.420.1"> functions:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.421.1">import</span></span><span class="koboSpan" id="kobo.422.1"> { useSuspenseQuery } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.423.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.424.1">'@tanstack/react-query'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.425.1">import</span></span><span class="koboSpan" id="kobo.426.1"> { fetchPost } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.427.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.428.1">'@/api.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.429.1">Change the </span><code class="inlineCode"><span class="koboSpan" id="kobo.430.1">Post</span></code><span class="koboSpan" id="kobo.431.1"> component to only accept an </span><code class="inlineCode"><span class="koboSpan" id="kobo.432.1">id</span></code><span class="koboSpan" id="kobo.433.1"> prop:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.434.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.435.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.436.1">Post</span></span><span class="koboSpan" id="kobo.437.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.438.1">{ </span></span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.439.1">id</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.440.1"> }</span></span><span class="koboSpan" id="kobo.441.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.442.1">Inside </span><a id="_idIndexMarker383"/><span class="koboSpan" id="kobo.443.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.444.1">Post</span></code><span class="koboSpan" id="kobo.445.1"> component, add</span><a id="_idIndexMarker384"/><span class="koboSpan" id="kobo.446.1"> a </span><strong class="keyWord"><span class="koboSpan" id="kobo.447.1">Suspense Query Hook</span></strong><span class="koboSpan" id="kobo.448.1"> to fetch </span><a id="_idIndexMarker385"/><span class="koboSpan" id="kobo.449.1">the post and get all data from it:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.450.1">const</span></span><span class="koboSpan" id="kobo.451.1"> { data } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.452.1">useSuspenseQuery</span></span><span class="koboSpan" id="kobo.453.1">({
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.454.1">queryKey</span></span><span class="koboSpan" id="kobo.455.1">: [</span><span class="hljs-string"><span class="koboSpan" id="kobo.456.1">'post'</span></span><span class="koboSpan" id="kobo.457.1">, id],
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.458.1">queryFn</span></span><span class="koboSpan" id="kobo.459.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.460.1">async</span></span><span class="koboSpan" id="kobo.461.1"> () =&gt; </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.462.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.463.1">fetchPost</span></span><span class="koboSpan" id="kobo.464.1">({ id }),
  })
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.465.1">const</span></span><span class="koboSpan" id="kobo.466.1"> { title, content, author } = data
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.467.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.468.1">src/pages/ViewPost.jsx</span></code><span class="koboSpan" id="kobo.469.1"> file. </span><span class="koboSpan" id="kobo.469.2">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.470.1">Suspense</span></code><span class="koboSpan" id="kobo.471.1">, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.472.1">useParams</span></code><span class="koboSpan" id="kobo.473.1"> function from </span><code class="inlineCode"><span class="koboSpan" id="kobo.474.1">react-router</span></code><span class="koboSpan" id="kobo.475.1">, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.476.1">Post</span></code><span class="koboSpan" id="kobo.477.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.478.1">import</span></span><span class="koboSpan" id="kobo.479.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.480.1">Suspense</span></span><span class="koboSpan" id="kobo.481.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.482.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.483.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.484.1">import</span></span><span class="koboSpan" id="kobo.485.1"> { useParams } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.486.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.487.1">'react-router'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.488.1">import</span></span><span class="koboSpan" id="kobo.489.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.490.1">Post</span></span><span class="koboSpan" id="kobo.491.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.492.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.493.1">'@/components/post/Post.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.494.1">Define and export the </span><code class="inlineCode"><span class="koboSpan" id="kobo.495.1">ViewPost</span></code><span class="koboSpan" id="kobo.496.1"> page component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.497.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.498.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.499.1">ViewPost</span></span><span class="koboSpan" id="kobo.500.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.501.1">Use a Params Hook to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.502.1">id</span></code><span class="koboSpan" id="kobo.503.1"> from the URL params:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.504.1">const</span></span><span class="koboSpan" id="kobo.505.1"> { id } = </span><span class="hljs-title"><span class="koboSpan" id="kobo.506.1">useParams</span></span><span class="koboSpan" id="kobo.507.1">()
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.508.1">Use a </span><code class="inlineCode"><span class="koboSpan" id="kobo.509.1">Suspense</span></code><span class="koboSpan" id="kobo.510.1"> boundary to provide a fallback while the post is fetching, then render the </span><code class="inlineCode"><span class="koboSpan" id="kobo.511.1">Post</span></code><span class="koboSpan" id="kobo.512.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.513.1">return</span></span><span class="koboSpan" id="kobo.514.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.515.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.516.1">Suspense</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.517.1">fallback</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.518.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.519.1">{</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.520.1">&lt;</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.521.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.522.1">&gt;</span></span><span class="koboSpan" id="kobo.523.1">Loading post...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.524.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.525.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.526.1">&gt;</span></span><span class="koboSpan" id="kobo.527.1">}&gt;
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.528.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.529.1">Post</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.530.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.531.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.532.1">{id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.533.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.534.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.535.1">Suspense</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.536.1">&gt;</span></span><span class="koboSpan" id="kobo.537.1">
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.538.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.539.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.540.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.541.1">ViewPost</span></code><span class="koboSpan" id="kobo.542.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.543.1">import</span></span><span class="koboSpan" id="kobo.544.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.545.1">ViewPost</span></span><span class="koboSpan" id="kobo.546.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.547.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.548.1">'./pages/ViewPost.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.549.1">Then, define</span><a id="_idIndexMarker386"/><span class="koboSpan" id="kobo.550.1"> a </span><a id="_idIndexMarker387"/><span class="koboSpan" id="kobo.551.1">new route with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.552.1">:id</span></code><span class="koboSpan" id="kobo.553.1"> param for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.554.1">ViewPost</span></code><span class="koboSpan" id="kobo.555.1"> page:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.556.1">                    &lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.557.1">Routes</span></span><span class="koboSpan" id="kobo.558.1">&gt;
                      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.559.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.560.1">Route</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.561.1">index</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.562.1">element</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.563.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.564.1">{</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.565.1">&lt;</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.566.1">Home</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.567.1"> /&gt;</span></span><span class="koboSpan" id="kobo.568.1">} /&gt;
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.569.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.570.1">Route</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.571.1">path</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.572.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.573.1">'post/:id'</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.574.1">element</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.575.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.576.1">{</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.577.1">&lt;</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.578.1">ViewPost</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.579.1"> /&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.580.1">} /&gt;</span></strong></span><span class="koboSpan" id="kobo.581.1">
                    &lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.582.1">Routes</span></span><span class="koboSpan" id="kobo.583.1">&gt;
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.584.1">Run the app, as follows (leave it running throughout the rest of this chapter):
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.585.1">$ npm run dev
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.586.1">It is now possible to manually go to the single post page by appending </span><code class="inlineCode"><span class="koboSpan" id="kobo.587.1">/post/:id</span></code><span class="koboSpan" id="kobo.588.1"> to the URL in a browser (for example </span><code class="inlineCode"><span class="koboSpan" id="kobo.589.1">/post/1</span></code><span class="koboSpan" id="kobo.590.1">):</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.591.1"><img alt="Figure 8.1 – Viewing a single post on our newly defined route" src="../Images/B31327_08_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.592.1">Figure 8.1 – Viewing a single post on our newly defined route</span></p>
<p class="normal"><span class="koboSpan" id="kobo.593.1">However, it would be nice if we could visit this page by clicking on one of the posts in the main post feed on the home page. </span><span class="koboSpan" id="kobo.593.2">Let’s implement this in the next section by using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.594.1">Link</span></code><span class="koboSpan" id="kobo.595.1"> component.</span></p>
<h1 class="heading-1" id="_idParaDest-186"><a id="_idTextAnchor194"/><span class="koboSpan" id="kobo.596.1">Linking to routes using the &lt;Link&gt; component</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.597.1">When dealing </span><a id="_idIndexMarker388"/><span class="koboSpan" id="kobo.598.1">with links that the user can click to visit a different page, it is best and easiest to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.599.1">Link</span></code><span class="koboSpan" id="kobo.600.1"> component. </span><span class="koboSpan" id="kobo.600.2">This component will automatically create a simple link to a specific page for us.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.601.1">Let’s get started using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.602.1">Link</span></code><span class="koboSpan" id="kobo.603.1"> component to provide a link to a single post:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.604.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.605.1">src/components/post/PostListItem.jsx</span></code><span class="koboSpan" id="kobo.606.1"> file, in which we are going to define a simplified version of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.607.1">Post</span></code><span class="koboSpan" id="kobo.608.1"> component, which will be shown in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.609.1">PostList</span></code><span class="koboSpan" id="kobo.610.1"> component. </span><span class="koboSpan" id="kobo.610.2">Inside it, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.611.1">useContext</span></code><span class="koboSpan" id="kobo.612.1"> function, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.613.1">ThemeContext</span></code><span class="koboSpan" id="kobo.614.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.615.1">Link</span></code><span class="koboSpan" id="kobo.616.1"> component from </span><code class="inlineCode"><span class="koboSpan" id="kobo.617.1">react-router</span></code><span class="koboSpan" id="kobo.618.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.619.1">import</span></span><span class="koboSpan" id="kobo.620.1"> { useContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.621.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.622.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.623.1">import</span></span><span class="koboSpan" id="kobo.624.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.625.1">ThemeContext</span></span><span class="koboSpan" id="kobo.626.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.627.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.628.1">'@/contexts/ThemeContext.js'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.629.1">import</span></span><span class="koboSpan" id="kobo.630.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.631.1">Link</span></span><span class="koboSpan" id="kobo.632.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.633.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.634.1">'react-router'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.635.1">Define and export the </span><code class="inlineCode"><span class="koboSpan" id="kobo.636.1">PostListItem</span></code><span class="koboSpan" id="kobo.637.1"> component, which accepts the post </span><code class="inlineCode"><span class="koboSpan" id="kobo.638.1">id</span></code><span class="koboSpan" id="kobo.639.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.640.1">title</span></code><span class="koboSpan" id="kobo.641.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.642.1">author</span></code><span class="koboSpan" id="kobo.643.1"> as props:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.644.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.645.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.646.1">PostListItem</span></span><span class="koboSpan" id="kobo.647.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.648.1">{ id, title, author }</span></span><span class="koboSpan" id="kobo.649.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.650.1">Define a Context Hook to get the theme:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.651.1">const</span></span><span class="koboSpan" id="kobo.652.1"> theme = </span><span class="hljs-title"><span class="koboSpan" id="kobo.653.1">useContext</span></span><span class="koboSpan" id="kobo.654.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.655.1">ThemeContext</span></span><span class="koboSpan" id="kobo.656.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.657.1">Render the title, as we did before:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.658.1">return</span></span><span class="koboSpan" id="kobo.659.1"> (
    &lt;div&gt;
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.660.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.661.1">h3</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.662.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.663.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.664.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.665.1">color:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.666.1">theme.primaryColor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.667.1"> }}&gt;</span></span><span class="koboSpan" id="kobo.668.1">{title}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.669.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.670.1">h3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.671.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.672.1">Now, render a </span><code class="inlineCode"><span class="koboSpan" id="kobo.673.1">Link</span></code><span class="koboSpan" id="kobo.674.1"> component, which will go to </span><code class="inlineCode"><span class="koboSpan" id="kobo.675.1">/post/:id</span></code><span class="koboSpan" id="kobo.676.1"> and show the </span><code class="inlineCode"><span class="koboSpan" id="kobo.677.1">ViewPost</span></code><span class="koboSpan" id="kobo.678.1"> page:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.679.1">      &lt;div&gt;
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.680.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.681.1">Link</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.682.1">to</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.683.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.684.1">{</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.685.1">`/</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.686.1">post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.687.1">/${</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.688.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.689.1">}`}&gt;</span></span><span class="koboSpan" id="kobo.690.1">View Post </span><span class="hljs-symbol"><span class="koboSpan" id="kobo.691.1">&amp;gt;</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.692.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.693.1">Link</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.694.1">&gt;</span></span><span class="koboSpan" id="kobo.695.1">
      &lt;/div&gt;
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.696.1">Then, show </span><a id="_idIndexMarker389"/><span class="koboSpan" id="kobo.697.1">the author, but no contents, to avoid cluttering the feed:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.698.1">      &lt;br /&gt;
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.699.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.700.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.701.1">&gt;</span></span><span class="koboSpan" id="kobo.702.1">
        Written by </span><span class="hljs-tag"><span class="koboSpan" id="kobo.703.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.704.1">b</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.705.1">&gt;</span></span><span class="koboSpan" id="kobo.706.1">{author}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.707.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.708.1">b</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.709.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.710.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.711.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.712.1">&gt;</span></span><span class="koboSpan" id="kobo.713.1">
    &lt;/div&gt;
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.714.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.715.1">src/components/post/PostList.jsx</span></code><span class="koboSpan" id="kobo.716.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.717.1">replace</span></em><span class="koboSpan" id="kobo.718.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.719.1">Post</span></code><span class="koboSpan" id="kobo.720.1"> import with an import of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.721.1">PostListItem</span></code><span class="koboSpan" id="kobo.722.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.723.1">import</span></span><span class="koboSpan" id="kobo.724.1"> { </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.725.1">PostListItem</span></strong></span><span class="koboSpan" id="kobo.726.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.727.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.728.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.729.1">./</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.730.1">PostListItem</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.731.1">.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.732.1">Render the </span><code class="inlineCode"><span class="koboSpan" id="kobo.733.1">PostListItem</span></code><span class="koboSpan" id="kobo.734.1"> component instead of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.735.1">Post</span></code><span class="koboSpan" id="kobo.736.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.737.1">      {posts.</span><span class="hljs-title"><span class="koboSpan" id="kobo.738.1">map</span></span><span class="koboSpan" id="kobo.739.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.740.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.741.1">post</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.742.1">) =&gt;</span></span><span class="koboSpan" id="kobo.743.1"> (
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.744.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.745.1">Fragment</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.746.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.747.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.748.1">{post.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.749.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.750.1">&lt;</span></span><span class="code-highlight"><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.751.1">PostListItem</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.752.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.753.1">...post</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.754.1">} /&gt;</span></span>
</code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.755.1">Now it is possible to go from the home page to a single post:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.756.1"><img alt="Figure 8.2 – The Link component rendering a “View Post &gt;” link to go to the single post page" src="../Images/B31327_08_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.757.1">Figure 8.2 – The Link component rendering a “View Post &gt;” link to go to the single post page</span></p>
<p class="normal"><span class="koboSpan" id="kobo.758.1">But there is still no </span><a id="_idIndexMarker390"/><span class="koboSpan" id="kobo.759.1">way to go back to the home page. </span><span class="koboSpan" id="kobo.759.2">Let’s implement this in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-187"><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.760.1">Defining a navigation bar using &lt;NavLink&gt;</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.761.1">If we want to </span><a id="_idIndexMarker391"/><span class="koboSpan" id="kobo.762.1">add styling to the link, for example, to implement a navigation bar where we show which page we are currently on, we can use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.763.1">NavLink</span></code><span class="koboSpan" id="kobo.764.1"> component.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.765.1">Let’s use this component to implement a navigation bar with a link to go back to the home page:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.766.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.767.1">src/components/NavBarLink.jsx</span></code><span class="koboSpan" id="kobo.768.1"> file. </span><span class="koboSpan" id="kobo.768.2">Inside it, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.769.1">NavLink</span></code><span class="koboSpan" id="kobo.770.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.771.1">import</span></span><span class="koboSpan" id="kobo.772.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.773.1">NavLink</span></span><span class="koboSpan" id="kobo.774.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.775.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.776.1">'react-router'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.777.1">Define and export a component that accepts a </span><code class="inlineCode"><span class="koboSpan" id="kobo.778.1">to</span></code><span class="koboSpan" id="kobo.779.1"> prop, which defines which route we should link to, and a </span><code class="inlineCode"><span class="koboSpan" id="kobo.780.1">children</span></code><span class="koboSpan" id="kobo.781.1"> prop to provide a text or component to put the link on:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.782.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.783.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.784.1">NavBarLink</span></span><span class="koboSpan" id="kobo.785.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.786.1">{ children, to }</span></span><span class="koboSpan" id="kobo.787.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.788.1">return</span></span><span class="koboSpan" id="kobo.789.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.790.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.791.1">NavLink</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.792.1">to</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.793.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.794.1">{to}</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.795.1">Then, define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.796.1">style</span></code><span class="koboSpan" id="kobo.797.1">, in which we check if the link is active (when we are currently on the page), and</span><a id="_idIndexMarker392"/><span class="koboSpan" id="kobo.798.1"> then render it in bold:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.799.1">      style={</span><span class="hljs-function"><span class="koboSpan" id="kobo.800.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.801.1">{ isActive }</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.802.1">) =&gt;</span></span><span class="koboSpan" id="kobo.803.1"> ({
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.804.1">fontWeight</span></span><span class="koboSpan" id="kobo.805.1">: isActive ? </span><span class="hljs-string"><span class="koboSpan" id="kobo.806.1">'bold'</span></span><span class="koboSpan" id="kobo.807.1"> : </span><span class="hljs-string"><span class="koboSpan" id="kobo.808.1">'normal'</span></span><span class="koboSpan" id="kobo.809.1">,
      })}
    &gt;
      {children}
    &lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.810.1">NavLink</span></span><span class="koboSpan" id="kobo.811.1">&gt;
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.812.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.813.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.814.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.815.1">NavBarLink</span></code><span class="koboSpan" id="kobo.816.1"> component, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.817.1">import</span></span><span class="koboSpan" id="kobo.818.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.819.1">NavBarLink</span></span><span class="koboSpan" id="kobo.820.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.821.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.822.1">'./components/NavBarLink.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.823.1">In the header section of our blog app, before the </span><code class="inlineCode"><span class="koboSpan" id="kobo.824.1">UserBar</span></code><span class="koboSpan" id="kobo.825.1">, define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.826.1">NavBarLink</span></code><span class="koboSpan" id="kobo.827.1"> back to the index/home page:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.828.1">          &lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.829.1">BrowserRouter</span></span><span class="koboSpan" id="kobo.830.1">&gt;
            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.831.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.832.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.833.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.834.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.835.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.836.1">padding:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.837.1">8</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.838.1"> }}&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.839.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.840.1">NavBarLink</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.841.1">to</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.842.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.843.1">'/'</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.844.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.845.1">Home</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.846.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.847.1">NavBarLink</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.848.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.849.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.850.1">hr</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.851.1"> /&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.852.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.853.1">UserBar</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.854.1"> /&gt;</span></span>
</code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.855.1">Now we have a way to go from the home page to a single post, and back to the home page again to view other posts:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.856.1"><img alt="Figure 8.3 – Rendering a “Home” NavLink, which is currently active (bold)" src="../Images/B31327_08_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.857.1">Figure 8.3 – Rendering a “Home” NavLink, which is currently active (bold)</span></p>
<p class="normal"><span class="koboSpan" id="kobo.858.1">Next, let’s </span><a id="_idIndexMarker393"/><span class="koboSpan" id="kobo.859.1">look at a way to programmatically navigate to the single post page after creating a new post.</span></p>
<h1 class="heading-1" id="_idParaDest-188"><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.860.1">Programmatically navigating using the Navigation Hook</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.861.1">Whenever </span><a id="_idIndexMarker394"/><span class="koboSpan" id="kobo.862.1">we want to programmatically navigate instead of having a link for the user to click, we can use the Navigation Hook provided by React Router. </span><span class="koboSpan" id="kobo.862.2">The Navigation Hook provides a function to navigate programmatically.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.863.1">Let’s get started using the Navigation Hook now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.864.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.865.1">src/components/post/CreatePost.jsx</span></code><span class="koboSpan" id="kobo.866.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.867.1">useNavigate</span></code><span class="koboSpan" id="kobo.868.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.869.1">import</span></span><span class="koboSpan" id="kobo.870.1"> { useNavigate } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.871.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.872.1">'react-router'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.873.1">Define a Navigate Hook inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.874.1">CreatePost</span></code><span class="koboSpan" id="kobo.875.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.876.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.877.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.878.1">CreatePost</span></span><span class="koboSpan" id="kobo.879.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.880.1">const</span></span><span class="koboSpan" id="kobo.881.1"> [username] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.882.1">useContext</span></span><span class="koboSpan" id="kobo.883.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.884.1">UserContext</span></span><span class="koboSpan" id="kobo.885.1">)
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.886.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.887.1"> navigate = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.888.1">useNavigate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.889.1">()</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.890.1">Inside the Action State Hook, get the result from the mutation and then redirect to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.891.1">ViewPost</span></code><span class="koboSpan" id="kobo.892.1"> page of the newly created post:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.893.1">const</span></span><span class="koboSpan" id="kobo.894.1"> [error, submitAction, isPending] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.895.1">useActionState</span></span><span class="koboSpan" id="kobo.896.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.897.1">async</span></span><span class="koboSpan" id="kobo.898.1"> (currentState, formData) =&gt; {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.899.1">const</span></span><span class="koboSpan" id="kobo.900.1"> title = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.901.1">get</span></span><span class="koboSpan" id="kobo.902.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.903.1">'title'</span></span><span class="koboSpan" id="kobo.904.1">)
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.905.1">const</span></span><span class="koboSpan" id="kobo.906.1"> content = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.907.1">get</span></span><span class="koboSpan" id="kobo.908.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.909.1">'content'</span></span><span class="koboSpan" id="kobo.910.1">)
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.911.1">const</span></span><span class="koboSpan" id="kobo.912.1"> newPost = { title, content, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.913.1">author</span></span><span class="koboSpan" id="kobo.914.1">: username, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.915.1">featured</span></span><span class="koboSpan" id="kobo.916.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.917.1">false</span></span><span class="koboSpan" id="kobo.918.1"> }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.919.1">try</span></span><span class="koboSpan" id="kobo.920.1"> {
        </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.921.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.922.1"> result =</span></strong></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.923.1">await</span></span><span class="koboSpan" id="kobo.924.1"> createPostMutation.</span><span class="hljs-title"><span class="koboSpan" id="kobo.925.1">mutateAsync</span></span><span class="koboSpan" id="kobo.926.1">(newPost)
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.927.1">navigate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.928.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.929.1">`/post/</span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.930.1">${result.id}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.931.1">`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.932.1">)</span></strong></span><span class="koboSpan" id="kobo.933.1">
      } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.934.1">catch</span></span><span class="koboSpan" id="kobo.935.1"> (err) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.936.1">return</span></span><span class="koboSpan" id="kobo.937.1"> err
      }
    },
  )
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.938.1">Try creating a new post in the blog app, and you will see that you get redirected to the page of the newly created post!</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.939.1">We have </span><a id="_idIndexMarker395"/><span class="koboSpan" id="kobo.940.1">successfully implemented routing in our blog application! </span><span class="koboSpan" id="kobo.940.2">As an exercise, you could now try to implement the login/signup and create post forms on separate pages. </span><span class="koboSpan" id="kobo.940.3">When doing so, I would recommend refactoring the home page link into a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.941.1">NavBar</span></code><span class="koboSpan" id="kobo.942.1"> component with links to the various pages.</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.943.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.944.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.945.1">Chapter08/Chapter08_2</span></code><span class="koboSpan" id="kobo.946.1"> folder. </span><span class="koboSpan" id="kobo.946.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.947.1">README.md</span></code><span class="koboSpan" id="kobo.948.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-189"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.949.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.950.1">In this chapter, we first learned how the React Router library works and which components it consists of. </span><span class="koboSpan" id="kobo.950.2">Then, we set up the library and an index route for the home page of our blog (showing a feed of blog posts). </span><span class="koboSpan" id="kobo.950.3">Next, we defined a new route to show a single post on a separate page and used the Params Hook to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.951.1">id</span></code><span class="koboSpan" id="kobo.952.1"> value from the URL. </span><span class="koboSpan" id="kobo.952.2">Then, we learned how to navigate to this new route and back to the home page using </span><code class="inlineCode"><span class="koboSpan" id="kobo.953.1">Link</span></code><span class="koboSpan" id="kobo.954.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.955.1">NavLink</span></code><span class="koboSpan" id="kobo.956.1"> components. </span><span class="koboSpan" id="kobo.956.2">Finally, we learned how to programmatically navigate after a post was successfully created by using the Navigation Hook.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.957.1">In the next chapter, we are going to learn about advanced built-in Hooks that React provides.</span></p>
<h1 class="heading-1" id="_idParaDest-190"><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.958.1">Questions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.959.1">To recap what we have learned in this chapter, try to answer the following questions:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.960.1">Which components does the React Router library consist of?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.961.1">How do we define a new route with the React Router library?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.962.1">How can we read dynamic values (params) in URLs?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.963.1">What are ways to define links with React Router and how do they differ?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.964.1">Which Hook is used to programmatically navigate with React Router?</span></li>
</ol>
<h1 class="heading-1" id="_idParaDest-191"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.965.1">Further reading</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.966.1">If you are interested in more information about the concepts that we have learned in this chapter, take a look at the following link:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.967.1">Official website of React Router: </span><a href="https://reactrouter.com/"><span class="url"><span class="koboSpan" id="kobo.968.1">https://reactrouter.com/</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.969.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.970.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_08.xhtml"><span class="url"><span class="koboSpan" id="kobo.971.1">https://packt.link/wnXT0</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.972.1"><img alt="" src="../Images/image_%283%29.png"/></span></p>
</div>
</body></html>