# 前言

你好——我是丹尼尔，一名企业家、技术顾问和全栈开发者，专注于 React 生态系统中的技术。

在我作为企业和技术顾问以及公共部门开发者的时间里，我注意到越来越多的公司希望缩小前端和后端开发者之间的差距。他们的业务需求通常导致需要所谓的“前端后端”，即从不同的后端系统中获取数据，并以便于在前端显示的方式准备数据。

作为一名企业家，我也在小型团队中启动新项目方面有经验，在这种情况下，确保你的团队中的每个开发者都能做任何事情，而不仅仅是前端或后端，这是至关重要的。在这种情况下，通常有道理使用同一种语言来开发后端和前端，这通常是 JavaScript（或 TypeScript），因为有一个庞大的生态系统和大量的开发者可用。

在这两种情况下，成为一名全栈开发者变得越来越重要。我已经长期辅导开发者学习全栈开发，并注意到大多数开发者在学习全栈开发时都会遇到一些常见问题和误解。在这本书中，我想总结我关于全栈开发的全部学习和教学经验，为你提供关于如何进一步学习 JavaScript 全栈开发不断增长的生态系统的指南。

现在，许多公司使用由 MongoDB、Express、React 和 Node.js 组成的堆栈，称为 MERN 堆栈。在这本书中，我将教你如何使用这些技术构建现代全栈 React 应用程序。我将从零开始教授这些技术，尽可能少地使用库，这样你就可以学习基本概念。这将使你能够适应未来的新技术，即使这本书中使用的具体工具变得过时。此外，我还会教授应用程序的部署和 DevOps，因为我发现这个领域往往被忽视，而且了解它的开发者不多。在书的最后一部分，我将介绍 Next.js 作为全栈框架，并展望该领域的最新发展，如 React 服务器组件和服务器操作。

我希望你喜欢阅读这本书。如果你有任何问题或反馈，请随时联系我！

# 本书面向对象

这本书是为已经具备 React 经验并希望学习如何创建、集成和部署各种后端系统以成为全栈开发者的开发者而写的。你应该已经对 JavaScript 和 React 有很好的理解，但不需要有任何关于后端系统开发、创建、集成和部署的先验知识。如果你面临以下挑战之一，这本书将非常适合你：

+   你知道如何使用 React 制作前端，但不知道如何正确地将其与后端集成

+   你想从头开始创建一个全栈项目，但不知道如何

+   你想了解更多关于应用程序部署和 DevOps 的知识

+   你想了解更多关于现代 React 开发的知识，例如 React 服务器组件、服务器操作和 Next.js

本书将为你提供真实世界的项目，包括成为全栈开发者所需的所有步骤，包括但不限于后端开发、前端开发、测试（单元测试和端到端测试）以及部署。

# 本书涵盖的内容

*第一章*，*为全栈开发做准备*，简要概述了本书的内容，并教你如何设置一个将作为你全栈项目开发基础的项目。

*第二章*，*了解 Node.js 和 MongoDB*，提供了如何使用 Node.js 编写和运行脚本的说明。然后，它解释了如何使用 Docker 设置数据库服务。它还介绍了文档数据库 MongoDB 以及如何通过 Node.js 访问 MongoDB 数据库。

*第三章*，*使用 Express 实现后端*，通过创建后端服务来实践你在*第二章*中学到的知识。Express 用于提供 REST API，Mongoose ODM 用于与 MongoDB 接口，Jest 用于编写后端代码的单元测试。

*第四章*，*使用 React 和 TanStack Query 集成前端*，提供了如何创建与之前创建的后端服务接口的前端说明。它使用 Vite 设置 React 项目，在其中我们创建了一个基本用户界面。然后，它教你如何使用数据获取库 TanStack Query 来处理后端状态并将后端 API 与前端集成。

*第五章*，*使用 Docker 和 CI/CD 部署应用程序*，通过教你关于 Docker 以及如何使用它打包应用程序来深入探讨 DevOps。然后，它提供了将应用程序部署到云提供商以及如何配置 CI/CD 来自动化部署的说明。

*第六章*，*使用 JWT 添加身份验证*，教你关于 JSON Web Tokens 的知识，这是一种向 Web 应用程序添加身份验证的方法。它还提供了使用 React Router 设置多个路由的说明。

*第七章*，*使用服务器端渲染提高加载时间*，涵盖了基准测试应用程序并教你关于 Web Vitals 的知识。然后，它提供了从零开始实现服务器端渲染 React 组件的方法以及如何在服务器上预取数据的说明。

*第八章*，*确保客户通过搜索引擎优化找到你*，专注于如何优化应用程序以便搜索引擎（如 Google 或 Bing）找到。此外，它还提供了有关如何创建元标签以方便与各种社交媒体网站集成的信息。

*第九章*，*使用 Playwright 实现端到端测试*，介绍了 Playwright 作为编写端到端测试的工具，它自动在应用程序中执行操作，以确定在做出更改后代码是否仍然按预期运行。它还涵盖了如何使用 GitHub Actions 在 CI 中运行 Playwright。

*第十章*，*使用 MongoDB 和 Victory 聚合和可视化统计数据*，提供了如何在应用程序中收集事件的说明。然后，它教你如何使用 MongoDB 聚合数据以生成汇总统计信息，例如查看次数或会话持续时间。最后，它涵盖了使用 Victory 库创建图表以可视化这些聚合统计信息。

*第十一章*，*使用 GraphQL API 构建后端*，介绍了 GraphQL 作为 REST API 的替代品，你将了解何时使用它以及如何在后端实现它。

*第十二章*，*使用 Apollo Client 在前端与 GraphQL 接口*，教你如何在前端使用 Apollo Client 与之前实现的 GraphQL 后端进行接口。

*第十三章*，*使用 Express 和 Socket.IO 构建事件驱动后端*，介绍了一种事件驱动架构，这对于处理实时数据的应用程序很有用，例如协作应用程序（Google Docs 或在线白板）或金融应用程序（Kraken 加密货币交易所）。它教你关于 WebSockets 以及如何使用 Socket.IO 实现事件驱动后端。

*第十四章*，*创建用于消费和发送事件的前端*，实现了之前创建的事件驱动后端的前端，并使用 Socket.IO 与其接口。

*第十五章*，*使用 MongoDB 为 Socket.IO 添加持久性*，教你如何将数据库正确集成到事件驱动应用程序中，以持久化（并稍后回放）事件。

*第十六章*，*开始使用 Next.js*，介绍了 Next.js 作为为 React 准备的、适用于企业的全栈 Web 应用程序框架。它突出了使用框架与使用简单的打包器（如 Vite）之间的区别。它还教你关于 Next.js App Router，这是一种定义路由和页面的新范式。

*第十七章*，*介绍 React 服务器组件*，介绍了 React 中的一个新概念——服务器组件，允许您直接将 React 应用程序与数据库集成，而无需 REST 或 GraphQL API。此外，它还介绍了服务器操作，允许您通过前端调用服务器上的函数。

*第十八章*，*高级 Next.js 概念和优化*，深入探讨了 Next.js 框架，提供了关于 Next.js 中缓存如何工作以及如何用于优化应用程序的信息。它还教授您如何在 Next.js 中定义 API 路由以及如何添加用于搜索引擎优化的元数据。最后，它教授您如何在 Next.js 中最佳地加载图像和字体。

*第十九章*，*部署 Next.js 应用程序*，教授您两种部署 Next.js 应用程序的方法。最简单的方法是使用 Vercel 平台，我们可以快速将应用程序部署上线。然而，它也教授您如何使用 Docker 创建自定义部署设置。

*第二十章*，*深入全栈开发*，简要介绍了本书尚未涉及的各种高级主题。它从其他全栈框架的概述开始，然后总结了维护大型项目、优化包大小、UI 库概述以及高级状态管理解决方案等概念。

# 要充分利用本书

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Node.js v20.10.0 | Windows, macOS, 或 Linux |
| Git v2.43.0 |  |
| Visual Studio Code v1.84.2 |  |
| Docker v24.0.6 |  |
| Docker Desktop v4.25.2 |  |
| MongoDB Shell v2.1.0 |  |

**如果您正在使用本书的数字版，我们建议您亲自输入代码或从本书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助您避免与代码复制粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub（[`github.com/PacktPublishing/Modern-Full-Stack-React-Projects`](https://github.com/PacktPublishing/Modern-Full-Stack-React-Projects)）下载本书的示例代码文件。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的书籍和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 代码实战

本书的相关视频可在[`packt.link/VINfo`](https://packt.link/VINfo)查看。

# 使用的约定

在本书中使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“首先，您需要创建一个`robots.txt`文件，以允许搜索引擎爬取您网站的哪些部分，以及它们允许爬取哪些部分。”

代码块如下设置：

```js
export const getPostById = async (postId) => {
  const res = await fetch(`${import.meta.env.VITE_BACKEND_URL}/posts/${postId}`)
  return await res.json()
}
```

当我们希望将您的注意力引到代码块的一个特定部分时，相关的行或项目将以粗体显示：

```js
      {fullPost ? (
        <h3>{title}</h3>
      ) : (
        <Link to={`/posts/${_id}`}>
          <h3>{title}</h3>
        </Link>
      )}
```

任何命令行输入或输出都应如下所示：

```js
$ npm install node-emoji
```

**粗体**: 表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以**粗体**显示。以下是一个示例：“连接到数据库，然后展开**Playgrounds**部分（如果尚未展开）并点击**创建新****Playground**按钮。”

小贴士或重要注意事项

看起来像这样。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**: 如果您对这本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**: 尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，如果您能向我们报告，我们将不胜感激。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**: 如果您在互联网上以任何形式发现我们作品的非法副本，如果您能向我们提供位置地址或网站名称，我们将不胜感激。请通过电子邮件发送至 copyright@packt.com 并附上材料的链接。

**如果您有兴趣成为作者**：如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了《Modern Full-Stack React Projects》，我们非常乐意听到您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1837637954)并分享您的反馈。

您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走？

您的电子书购买是否与您选择的设备不兼容？

不必担心，现在，随着每本 Packt 书籍的购买，您都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠不会就此停止，您还可以获得独家折扣、时事通讯和每日免费内容的每日访问权限。

按照以下简单步骤获取好处：

1.  扫描下面的二维码或访问以下链接

![二维码图片](img/B19385_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-83763-795-9`](https://packt.link/free-ebook/978-1-83763-795-9)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他好处发送到您的电子邮件
