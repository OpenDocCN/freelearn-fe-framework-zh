<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Preparing the Development Environment</h1>
                </header>
            
            <article>
                
<p>Before building applications with the MERN stack, we first need to prepare the development environment with each technology, and also with tools to aid development and debugging. Working with this stack requires that you make different technologies and tools work well together, and given the many options and resources available on this topic, it can seem like a daunting task to figure out how it all comes together. This chapter guides you through the workspace options, the essential development tools, how to set up the MERN technologies in your workspace, and how to check this setup with actual code.</p>
<p>We are going to cover the following topics:</p>
<ul>
<li style="font-weight: 400">Selecting development tools</li>
<li style="font-weight: 400">Setting up MERN stack technologies</li>
<li style="font-weight: 400">Checking your development setup</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Selecting development tools</h1>
                </header>
            
            <article>
                
<p>There are plenty of options available when it comes to selecting basic development tools such as text editors or IDEs, version control software, and even the development workspace itself. In this section, we will go over the options and recommendations that are relevant to web development with the MERN stack so you can make informed decisions when selecting these tools based on individual preferences.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Workspace options</h1>
                </header>
            
            <article>
                
<p>Developing on a local machine is a common practice among programmers, but with the advent of good cloud and remote development services, such as AWS Cloud9 (<a href="https://aws.amazon.com/cloud9/?origin=c9io" target="_blank">https://aws.amazon.com/cloud9/?origin=c9io</a>) and Visual Studio Code's Remote Development extension (<a href="https://code.visualstudio.com/docs/remote" target="_blank">https://code.visualstudio.com/docs/remote</a>), you can set up your local workspace with MERN technologies  (and this will be assumed to be the case for the rest of the book), but you can also choose to run and develop the code in cloud services that are equipped for Node development.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Local and cloud development</h1>
                </header>
            
            <article>
                
<p>You can choose to use both types of workspaces to enjoy the benefits of working locally without worrying about bandwidth/internet issues and to work remotely when you don't physically have your favorite local machine. To do this, you can use Git to version control your code, store your latest code on remote Git hosting services such as GitHub or BitBucket, and then share the same code across all your workspaces. <span>On your workspaces, you can compose the code in an IDE of your choice from the many available options, some of which are discussed next.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">IDE or text editors</h1>
                </header>
            
            <article>
                
<p>Most cloud development environments will come integrated with source code editors, but for your local workspace, you can pick any based on your preference as a programmer and then customize it for MERN development. For example, the following popular options can each be customized as required:</p>
<ul>
<li><strong>Visual Studio Code</strong> (<a href="https://code.visualstudio.com/">https:/</a><a href="https://code.visualstudio.com/">/</a><a href="https://code.visualstudio.com/">code.</a><a href="https://code.visualstudio.com/" target="_blank">visualstudio.</a><a href="https://code.visualstudio.com/">com/</a>): A feature-rich source code editor by Microsoft with extensive support for modern web application development workflow, including support for MERN stack technologies</li>
<li><strong>Atom</strong> (<a href="https://atom.io/">https:/</a><a href="https://atom.io/">/</a><a href="https://atom.io/" target="_blank">atom.</a><a href="https://atom.io/">io/</a>): A free, open source text editor for GitHub that has many <span>packages relevant to the </span>MERN stack from other developers</li>
<li><strong>SublimeText</strong> (<a href="https://www.sublimetext.com/">https:/</a><a href="https://www.sublimetext.com/">/</a><a href="https://www.sublimetext.com/">www.</a><a href="https://www.sublimetext.com/" target="_blank">sublimetext.</a><a href="https://www.sublimetext.com/">com/</a>): A proprietary, cross-platform text editor that also has many <span>packages relevant to the </span><span>MERN stack</span>, along with support for JavaScript development</li>
<li><strong>WebStorm</strong> (<a href="https://www.jetbrains.com/webstorm/">https:/</a><a href="https://www.jetbrains.com/webstorm/">/</a><a href="https://www.jetbrains.com/webstorm/">www.</a><a href="https://www.jetbrains.com/webstorm/" target="_blank">jetbrains.</a><a href="https://www.jetbrains.com/webstorm/">com/</a><a href="https://www.jetbrains.com/webstorm/">webstorm/</a>): A full-fledged JavaScript IDE by JetBrains, with support for MERN stack development</li>
</ul>
<p>There are other editors at your disposal, but besides focusing on what each has to offer, it is important that you choose one that is right for you, enables a productive workflow, and also integrates well with the other tools <span>necessary for</span><span> web application development.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Chrome Developer Tools</h1>
                </header>
            
            <article>
                
<p>Loading, viewing, and debugging the frontend is a very crucial part of the web development process. Chrome DevTools (<a href="https://developers.google.com/web/tools/chrome-devtools" target="_blank">https://developers.google.com/web/tools/chrome-devtools</a>), which is a part of the Chrome browser, has many great features that allow debugging, testing, and experimenting with the frontend code and the look, feel, responsiveness, and performance of the UI. Additionally, the React Developer Tools extension is available as a Chrome plugin, and it adds React debugging tools to Chrome DevTools.</p>
<p>Utilizing tools like this <span>in your development workflow can help you to understand the code better and to build your applications effectively. Similarly, integrating code version control with a tool such as Git can increase your productivity and efficiency as a developer</span>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Git</h1>
                </header>
            
            <article>
                
<p>Any development workflow is incomplete without a version control system that enables tracking code changes, code sharing, and collaboration. Over the years, Git has become the leading version control system for many developers and is the most widely used distributed source code management tool. For code development in this book, Git will help primarily to track progress as we go through the steps to build each application.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installation</h1>
                </header>
            
            <article>
                
<p>To start using Git, first install it on your local machine or cloud development environment based on your system specifications. Instructions to download and install the latest version of Git, along with documentation on using Git commands, can be found at <a href="https://git-scm.com/downloads" target="_blank">https://git-scm.com/downloads</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Remote Git hosting services</h1>
                </header>
            
            <article>
                
<p>Cloud-based Git repository hosting services such as GitHub and BitBucket help share your latest code across workspaces and deployment environments, and also to back up your code. These services pack in a lot of useful features to help with code management and the development workflow. To get started, you can create an account and set up remote repositories for your code bases. </p>
<p>All these essential tools will help enrich your web development workflow and increase productivity. Once you've completed the necessary setup in your workspace according to the discussion in the next section, we'll move on and <span>start building MERN applications.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up MERN stack technologies</h1>
                </header>
            
            <article>
                
<p>MERN stack technologies are being developed and upgraded as this book is being written, so for the work demonstrated throughout this book, we use the latest stable versions at the time of writing. Installation guidelines for most of these technologies are dependent on the system environment of your workspaces, so this section points to all relevant installation resources and also acts as a guide for setting up a fully functioning MERN stack.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">MongoDB</h1>
                </header>
            
            <article>
                
<p>MongoDB must be set up, running, and accessible to your development environment before any database features are added to MERN applications. At the time of writing, the current stable version of MongoDB is 4.2.0, and this version of the MongoDB Community Edition is used for developing the applications in this book. The rest of this section provides resources on how to install and run MongoDB.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installation</h1>
                </header>
            
            <article>
                
<p>You need to install and start MongoDB on your workspace before you can use it for development. The installation and startup process for MongoDB depends on your workspace specifications:</p>
<ul>
<li>Cloud development services will have their own instructions for installing and setting up MongoDB. For example, the how-to steps for AWS Cloud9 can be found at <a href="https://docs.c9.io/docs/setup-a-database#mongodb" target="_blank">https://docs.c9.io/docs/setup-a-database#mongodb</a>.</li>
<li>The guide for MongoDB installation on your local machine is at <a href="https://docs.mongodb.com/manual/administration/install-community" target="_blank">https://docs.mongodb.com/manual/administration/install-community</a></li>
</ul>
<p>After you have successfully installed MongoDB on your workspace and have it running, you can interact with it using the <strong>mongo shell</strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Running the mongo shell</h1>
                </header>
            
            <article>
                
<p>The mongo shell is an interactive tool for MongoDB that comes as a part of the MongoDB installation. It is a good place to start getting familiar with MongoDB operations. Once MongoDB is installed and running, you can run the mongo shell on the command line. In the mongo shell, you can use commands to query and update data and perform administrative operations.</p>
<div class="packt_tip">
<p>You could also skip the local installation of MongoDB and instead deploy a MongoDB database in the cloud using MongoDB Atlas (<a href="https://www.mongodb.com/cloud/atlas" target="_blank">https://www.mongodb.com/cloud/atlas</a>). It is a global cloud database service that can be used to add fully managed MongoDB databases to modern applications.</p>
</div>
<p>The next core component of MERN development is Node.js, which will be necessary to complete the remaining MERN setup.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Node.js</h1>
                </header>
            
            <article>
                
<p>Backend server implementation for the MERN applications relies on Node.js. At the time of writing, 13.12.0 is the latest stable Node.js version available, and the code in the book has also been tested with version 14.0.0 from the latest nightly builds. The version of Node.js you choose to download will come bundled with npm as the package manager. Depending on whether you choose npm or Yarn as the package manager for your MERN projects, you can install Node.js with or without npm.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installation</h1>
                </header>
            
            <article>
                
<p>Node.js can be installed via direct download, installers, or the Node Version Manager:</p>
<ul>
<li style="font-weight: 400">You can install Node.js by directly downloading the source code or a pre-built installer specific to your workspace platform. Downloads are available at <a href="https://nodejs.org/en/download/" target="_blank">nodejs.org/en/download</a>.</li>
<li style="font-weight: 400">Cloud development services may come with Node.js pre-installed, as AWS Cloud9 does, or will have specific instructions for adding and updating it.</li>
</ul>
<p>To test if the installation was successful, you can open the command line and run <kbd>node -v</kbd> to see if it correctly returns the version number.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Node version management with nvm</h1>
                </header>
            
            <article>
                
<p>If you need to maintain multiple versions of Node.js and npm for different projects, nvm is a useful command-line tool to install and manage different versions on the same workspace. You have to install nvm separately. Instructions for setup can be found at <a href="https://github.com/creationix/nvm" target="_blank">github.com/creationix/nvm</a>.</p>
<p>With Node.js set up on your system, you can use a package manager such as npm or Yarn to start integrating the remaining parts of the MERN stack.  </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Yarn package manager</h1>
                </header>
            
            <article>
                
<p>Yarn is a relatively new package manager for JavaScript dependencies, and it can be used as an alternative to npm. It is a fast, reliable, and secure dependency manager that provides a different range of additional features, including an offline mode for re-installation of packages without an internet connection and support for multiple package registries, such as npmjs.com and Bower.</p>
<p>We will use Yarn (v1.22.4) to manage Node modules and packages for the projects in this book. Before using Yarn, you will need to install it on your workspace. There are a number of ways to install Yarn depending on your operating system and its version. </p>
<div class="packt_tip"><span>To learn more about your options for installing Yarn on your workspace, visit </span><a href="https://yarnpkg.com/lang/en/docs/install" target="_blank">https://yarnpkg.com/lang/en/docs/install</a><span>.</span></div>
<p>Once Yarn is installed, it can be used to add the other necessary modules including Express and React.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Modules for MERN</h1>
                </header>
            
            <article>
                
<p class="mce-root">The remaining MERN stack technologies are all available as Node.js package modules and can be added to each project using Yarn. These include key modules, such as React and Express, that are required to run each MERN application, and also modules that will be necessary during development. In this section, we list and discuss these modules, then <span>see how to use the modules in a working project </span>in the following section.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Key modules</h1>
                </header>
            
            <article>
                
<p>To integrate the MERN stack technologies and run your applications, we will need the following modules:</p>
<ul>
<li class="mce-root"><strong>React</strong>: To start using React, we will need two modules:
<ul>
<li class="mce-root"><kbd>react</kbd></li>
<li class="mce-root"><kbd>react-dom</kbd></li>
</ul>
</li>
<li class="mce-root"><strong>Express</strong>: To use Express in your code, you will need the <kbd>express</kbd> module.</li>
<li class="mce-root"><strong>MongoDB</strong>: To use MongoDB directly with Node applications, you need to add the driver, which is available as a Node module named <kbd>mongodb</kbd>.</li>
</ul>
<p>These key modules will produce full-stack web applications, but we will need some additional modules to aid in the development and generation of the application code.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">devDependency modules</h1>
                </header>
            
            <article>
                
<p>To maintain consistency throughout the development of our MERN applications, we will use new JavaScript syntax from ES6 and higher versions in both client- and server-side implementations. As a consequence, and also to aid the development process, we will use the following additional modules to compile and bundle the code, and also to automatically reload the server and browser app as the code is updated during development:</p>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<ul>
<li>Babel modules are needed to convert ES6 and JSX to suitable JavaScript for all browsers. The modules needed to get Babel working are as follows:
<ul>
<li><kbd>@babel/core</kbd></li>
<li><kbd>babel-loader</kbd></li>
<li>for transpiling JavaScript files with Webpack </li>
<li><kbd>@babel/preset-env</kbd> and <kbd>@babel/preset-react</kbd> to provide support for React, and the latest JavaScript feature</li>
</ul>
</li>
<li style="font-weight: 400">Webpack modules will help bundle the compiled JavaScript, both for the client-side and the server-side code. Modules needed to get Webpack working are as follows:</li>
</ul>
<ul>
<li style="list-style-type: none">
<ul>
<li style="font-weight: 400"><kbd>webpack</kbd>.</li>
<li><kbd>webpack-cli</kbd> to run Webpack commands.</li>
<li style="font-weight: 400"><kbd>webpack-node-externals</kbd> to ignore external Node.js module files when bundling in Webpack.</li>
<li style="font-weight: 400"><kbd>webpack-dev-middleware</kbd> to serve the files emitted from Webpack over a connected server during the development of the code.</li>
<li style="font-weight: 400"><kbd>webpack-hot-middleware</kbd> to add hot module reloading into an existing server by connecting a browser client to a Webpack server and receiving updates as code changes during development.</li>
<li><kbd>nodemon</kbd> to watch server-side changes during development, so the server can be reloaded to put changes into effect.</li>
<li><kbd>react-hot-loader</kbd> for faster development on the client side. Every time a file changes in the React frontend, <kbd>react-hot-loader</kbd> enables the browser app to update without re-bundling the whole frontend code.</li>
<li><kbd>@hot-loader/react-dom</kbd> to enable hot-reloading support for React hooks. It essentially replaces the <kbd>react-dom</kbd> package of the same version, but with additional patches to support hot reloading.</li>
</ul>
</li>
</ul>
<div class="packt_infobox"><span>Although <kbd>react-hot-loader</kbd> is meant to help the development flow, it is safe to install this module as a regular dependency rather than a devDependency. It</span> <span>automatically ensures that hot reloading is disabled in production and the footprint is minimal.</span></div>
<p>With the necessary MERN stack technologies and associated tools installed and ready for use, in the next section, we will use this toolset and write code that can confirm if your workspace is set up correctly to begin developing MERN-based web applications.  </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Checking your development setup</h1>
                </header>
            
            <article>
                
<p>In this section, we will go through the development workflow and write code step by step to ensure that the environment is correctly set up to start developing and running MERN applications.</p>
<p>We will generate these project files in the following folder structure to run a simple setup project:</p>
<pre>| mern-simplesetup/<br/> | -- client/<br/>  | --- HelloWorld.js<br/>  | --- main.js<br/> | -- server/<br/>  | --- devBundle.js<br/>  | --- server.js<br/> | -- .babelrc<br/> | -- nodemon.json<br/> | -- package.json<br/> | -- template.js<br/> | -- webpack.config.client.js<br/> | -- webpack.config.client.production.js<br/> | -- webpack.config.server.js</pre>
<div class="packt_tip"><span>The code discussed in this section is available on GitHub in the repository at <a href="https://github.com/PacktPublishing/Full-Stack-React-Projects-Second-Edition/tree/master/Chapter02/mern-simplesetup" target="_blank">https://github.com/PacktPublishing/Full-Stack-React-Projects-Second-Edition/tree/master/Chapter02/mern-simplesetup</a>. You can clone this code and run it as you go through the code explanations in the rest of this chapter.</span></div>
<p>We will leave the configuration files in the root folder and organize the application code into client-side and server-side folders. The <kbd>client</kbd> folder will contain the frontend code and the <kbd>server</kbd> folder will contain the backend code. In the rest of this section, we will generate these files and implement both frontend and backend code to build a working full-stack web application.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Initializing package.json and installing Node.js modules</h1>
                </header>
            
            <article>
                
<p>We will begin by using Yarn to install all the required modules. It is a best practice to add a <kbd>package.json</kbd> file in every project folder to maintain, document, and share the Node.js modules being used in the MERN application. The <kbd>package.json</kbd> file will contain meta-information about the application, as well as list the module dependencies.</p>
<p>Perform the steps outlined in the following points to generate a <kbd>package.json</kbd> file, modify it, and use it to install the modules:</p>
<ul>
<li><kbd>yarn init</kbd>: From the command line, enter your project folder and run <kbd>yarn init</kbd>. You will be asked a series of questions to gather meta-information about your project, such as name, license, and author. Then, a <kbd>package.json</kbd> file will be auto generated with your answers.</li>
<li><kbd>dependencies</kbd>: Open <kbd>package.json</kbd> in your editor and modify the <kbd>JSON</kbd> object to add the key modules and <kbd>react-hot-loader</kbd> as regular dependencies:</li>
</ul>
<div class="packt_infobox">The file path mentioned before a code block indicates the location of the code in the project directory. This convention has been maintained throughout the book to provide better context and guidance as you follow along with the code.</div>
<p style="padding-left: 60px"> <kbd>mern-simplesetup/package.json</kbd>:</p>
<pre style="padding-left: 60px">"dependencies": {<br/>    "@hot-loader/react-dom": "16.13.0",<br/>    "express": "4.17.1",<br/>    "mongodb": "3.5.5",<br/>    "react": "16.13.1",<br/>    "react-dom": "16.13.1",<br/>    "react-hot-loader": "4.12.20"<br/>  }</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="mceNonEditable"/>
<ul>
<li><kbd>devDependencies</kbd>: Modify <kbd>package.json</kbd> further to add the following Node modules required during development as <kbd>devDependencies</kbd>:</li>
</ul>
<p style="padding-left: 60px"> <kbd>mern<span>-</span>simplesetup<span>/package.json</span></kbd>:</p>
<pre style="padding-left: 60px">"devDependencies": {<br/>    "@babel/core": "7.9.0",<br/>    "@babel/preset-env": "7.9.0",<br/>    "@babel/preset-react": "7.9.4",<br/>    "babel-loader": "8.1.0",<br/>    "nodemon": "2.0.2",<br/>    "webpack": "4.42.1",<br/>    "webpack-cli": "3.3.11",<br/>    "webpack-dev-middleware": "3.7.2",<br/>    "webpack-hot-middleware": "2.25.0",<br/>    "webpack-node-externals": "1.7.2"<br/>  }</pre>
<ul>
<li><span><span>yarn</span></span>: Save <kbd>package.json</kbd> and, from the command line, run the <kbd>yarn</kbd> command to fetch and add all these modules to your project.</li>
</ul>
<p>With all the necessary modules installed and added to the project, next we<span> </span><span>will add configuration to compile and run the application code.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring Babel, Webpack, and Nodemon</h1>
                </header>
            
            <article>
                
<p>Before we start coding up the web application, we need to configure Babel, Webpack, and Nodemon to compile, bundle, and auto-reload the changes in the code during development.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Babel</h1>
                </header>
            
            <article>
                
<p>Create a <kbd>.babelrc</kbd> file in your project folder and add the following JSON with <kbd>presets</kbd> and <kbd>plugins</kbd> specified:</p>
<p><kbd><span>mern-simplesetup/.babelrc</span></kbd>:</p>
<pre>{<br/>  "presets": [<br/>   ["@babel/preset-env",<br/>    {<br/>     "targets": {<br/>      "node": "current"<br/>     }<br/>    }<br/>   ],<br/>   "@babel/preset-react"<br/>  ],<br/>  "plugins": [<br/>   "react-hot-loader/babel"<br/>  ]<br/>}</pre>
<p>In this configuration, we specify that we need Babel to transpile the latest JavaScript syntax with support for code in a Node.js environment and also React/JSX code. The <kbd>react-hot-loader/babel</kbd> plugin is required by the <kbd>react-hot-loader</kbd> module to compile <kbd>React</kbd> components.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Webpack</h1>
                </header>
            
            <article>
                
<p>We will have to configure Webpack to bundle both the client and server code and the client code separately for production. Create <kbd>webpack.config.client.js</kbd>, <kbd>webpack.config.server.js</kbd>, and <kbd>webpack.config.client.production.js</kbd> files in your project folder. All three files will have the following code structure, starting with imports, then the definition of the <kbd>config</kbd> object, and finally the export of the defined <kbd>config</kbd> object:</p>
<pre class="mce-root">const path = require('path')<br/>const webpack = require('webpack')<br/>const CURRENT_WORKING_DIR = process.cwd()<br/><br/><strong>const config = { ... }</strong><br/><br/>module.exports = config</pre>
<p>The <kbd>config</kbd> JSON object will differ with values specific to the client- or server-side code, and development versus production code. In the following sections, we will highlight the <span>relevant</span><span> </span><span>properties in each configuration instance.</span></p>
<div class="packt_tip"><span>Alternatively, you can also generate Webpack configurations using the interactive portal <em>Generate Custom Webpack Configuration</em> at <a href="https://generatewebpackconfig.netlify.com/" target="_blank">https://generatewebpackconfig.netlify.com/</a> or using the Webpack-cli's <kbd>init</kbd> command from the command line.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Client-side Webpack configuration for development</h1>
                </header>
            
            <article>
                
<p><span>Update the</span> <kbd>config</kbd> <span>obje</span>ct with th<span>e following in your <kbd>webpack.config.client.js</kbd> file in order to configure Webpack to bundle and hot-load React code during development: </span></p>
<p><kbd><span>mern-simplesetup/webpack.config.client.js</span></kbd>:</p>
<pre class="mce-root">const config = {<br/>   name: "browser",<br/>   <strong>mode</strong>: "development",<br/>   <strong>devtool</strong>: 'eval-source-map',<br/>   <strong>entry</strong>: [<br/>     'webpack-hot-middleware/client?reload=true',<br/>     path.join(CURRENT_WORKING_DIR, <strong>'client/main.js'</strong>)<br/>   ],<br/>   <strong>output</strong>: {<br/>     path: path.join(CURRENT_WORKING_DIR , '/dist'),<br/>     filename: 'bundle.js',<br/>     <strong>publicPath</strong>: '/dist/'<br/>   },<br/>   <strong>module</strong>: {<br/>     rules: [<br/>       {<br/>         test: /\.jsx?$/,<br/>         exclude: /node_modules/,<br/>         use: ['babel-loader']<br/>       }<br/>     ]<br/>   }, <br/>   <strong>plugins</strong>: [<br/>     new webpack.HotModuleReplacementPlugin(),<br/>     new webpack.NoEmitOnErrorsPlugin()<br/>   ],<br/>   resolve: {<br/>     <strong>alias</strong>: {<br/>       'react-dom': '@hot-loader/react-dom'<br/>     }<br/>   }<br/>}</pre>
<p>The highlighted keys and values in the <kbd>config</kbd> object will determine how Webpack bundles the code and where the bundled code will be placed:</p>
<ul>
<li><kbd>mode</kbd> sets <span><kbd>process.env.NODE_ENV</kbd> to the given value and </span><span><span>tells Webpack to use its built-in optimizations accordingly. If not set explicitly, it defaults to a value of "</span></span><kbd>production</kbd>"<span><span>. It can also be set via the command line by passing the value as a CLI argument.</span></span></li>
<li style="font-weight: 400"><kbd>devtool</kbd> specifies how source maps are generated, if at all. Generally, a source map provides a way of mapping code within a compressed file back to its original position in a source file to aid debugging.</li>
<li style="font-weight: 400"><kbd>entry</kbd> specifies the entry file where Webpack starts bundling, in this case <span>with the <kbd>main.js</kbd> file </span>in the <kbd>client</kbd> folder. </li>
<li style="font-weight: 400"><kbd>output</kbd> <span>specifies the</span> output path for the bundled code, in this case set to <kbd>dist/bundle.js</kbd>.</li>
<li style="font-weight: 400"><kbd>publicPath</kbd> allows specifying the base path for all assets in the application.</li>
<li style="font-weight: 400"><kbd>module</kbd> sets the regex rule for the file extension to be used for transpilation, and the folders to be excluded. The transpilation tool to be used here is <kbd>babel-loader</kbd>.</li>
<li style="font-weight: 400"><kbd>HotModuleReplacementPlugin</kbd> enables hot module replacement for <kbd>react-hot-loader</kbd>.</li>
<li style="font-weight: 400"><kbd>NoEmitOnErrorsPlugin</kbd> allows skipping <span>emitting when there are compile errors.</span></li>
<li>We also add a Webpack alias to point <kbd>react-dom</kbd> references to the <kbd>@hot-loader/react-dom</kbd> version.</li>
</ul>
<p>The client-side code of the application will be loaded in the browser from the bundled code in <kbd>bundle.js</kbd>.</p>
<p>Webpack provides other configuration options too, which can be used as required depending on your code and bundling specifications, as we will see next when we explore server-side-specific bundling. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Server-side Webpack configuration</h1>
                </header>
            
            <article>
                
<p><span>Modify the code to require <kbd>nodeExternals</kbd>, and update the</span> <kbd>config</kbd> <span>object</span> with <span>the following code in</span> your <kbd>webpack.config.server.js</kbd> file to configure Webpack for bundling server-side code:</p>
<p><kbd><span>mern-simplesetup/</span><span>webpack.config.server.js</span></kbd>:</p>
<pre><strong><span class="pl-k">const</span><span> </span><span class="pl-c1">nodeExternals</span><span> </span><span class="pl-k">=</span><span> </span><span class="pl-c1">require</span><span>(</span><span class="pl-s"><span class="pl-pds">'</span>webpack-node-externals<span class="pl-pds">'</span></span><span>)</span></strong><br/>const config = {<br/>  name: "server",<br/>  <strong>entry</strong>: [ path.join(CURRENT_WORKING_DIR , '<strong>./server/server.js</strong>') ],<br/>  target: "node",<br/>  output: {<br/>    path: path.join(CURRENT_WORKING_DIR , '/dist/'),<br/>    filename: "<strong>server.generated.js</strong>",<br/>    publicPath: '/dist/',<br/>    <strong>libraryTarget: "commonjs2"</strong><br/>  },<br/>  <strong>externals: [nodeExternals()]</strong>,<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.js$/,<br/>        exclude: /node_modules/,<br/>        use: [ 'babel-loader' ]<br/>      }<br/>    ]<br/>  }<br/>}</pre>
<p>The <kbd>mode</kbd> option is not set here explicitly but will be passed as required when running the Webpack commands with respect to running for development or building for production.</p>
<p>Webpack starts bundling from the server folder with <kbd>server.js</kbd>, then outputs the bundled code in <kbd>server.generated.js</kbd> in the <kbd>dist</kbd> folder. During bundling, a CommonJS environment will be assumed as we are specifying <kbd>commonjs2</kbd> in <kbd>libraryTarget</kbd>, so the output will be assigned to <kbd>module.exports</kbd>.</p>
<p class="mce-root">We will run the server-side code using the generated bundle in <kbd>server.generated.js</kbd>. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Client-side Webpack configuration for production </h1>
                </header>
            
            <article>
                
<p><span>To prepare the client-side code for production, update the</span> <kbd>config</kbd> <span>obje</span>ct with th<span>e following code in your <kbd>webpack.config.client.production.js</kbd> file:</span></p>
<p><kbd><span>mern-simplesetup/</span><span>webpack.config.client.production.js</span></kbd>:</p>
<pre class="mce-root">const config = {<br/>  mode: "production",<br/>  entry: [<br/>    path.join(CURRENT_WORKING_DIR, 'client/main.js')<br/>  ],<br/>  output: {<br/>    path: path.join(CURRENT_WORKING_DIR , '/dist'),<br/>    filename: 'bundle.js',<br/>    publicPath: "/dist/"<br/>  },<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.jsx?$/,<br/>        exclude: /node_modules/,<br/>        use: [<br/>          'babel-loader'<br/>        ]<br/>      }<br/>    ]<br/>  }<br/>}</pre>
<p><span>This will configure Webpack to bundle the React code to be used in production mode. The configuration here is similar to the client-side configuration for development mode, but without the hot-reloading plugin and debug configuration as these will </span><span>not be required in production.</span></p>
<p>With the bundling configurations in place, we can add configuration for running these generated bundles automatically on code updates during development using Nodemon.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Nodemon</h1>
                </header>
            
            <article>
                
<p>Create a <kbd>nodemon.json</kbd> file in your project folder and add the following configuration:</p>
<p><kbd><span>mern-simplesetup/nodemon.json</span></kbd>:</p>
<pre>{<br/>  "verbose": false,<br/>  "watch": [ "./server" ],<br/>  "exec": "webpack --mode=development --config <br/>      webpack.config.server.js <br/>        &amp;&amp; node ./dist/server.generated.js"<br/>}</pre>
<p><span>This configuration will set up</span> <kbd>nodemon</kbd> <span>to watch for changes in the server files during development, then execute compile and build commands as necessary. We can begin writing the code for a simple full-stack web application to see these configurations in action.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Frontend views with React</h1>
                </header>
            
            <article>
                
<p>In order to start developing a frontend, first create a root template file called <kbd>template.js</kbd> in the project folder, which will render the HTML with React components:</p>
<p><kbd><span>mern-simplesetup/template.js</span></kbd>:</p>
<pre>export default () =&gt; {<br/>  return `&lt;!doctype html&gt;<br/>   &lt;html lang="en"&gt;<br/>    &lt;head&gt;<br/>     &lt;meta charset="utf-8"&gt;<br/>     &lt;title&gt;MERN Kickstart&lt;/title&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>     &lt;div id="root"&gt;&lt;/div&gt;<br/>     &lt;script type="text/javascript" src="/dist/bundle.js"&gt; <br/>    &lt;/script&gt;<br/>    &lt;/body&gt;<br/>   &lt;/html&gt;` <br/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p><span>When the server receives a request to the root URL, t</span>his HTML template will be rendered in the browser, and the <kbd>div</kbd> element with ID <kbd>"root"</kbd> will contain our React component.</p>
<p>Next, create a <kbd>client</kbd> folder where we will add two React files, <kbd>main.js</kbd>, and <kbd>HelloWorld.js</kbd>.</p>
<p>The <kbd>main.js</kbd> file simply renders the top-level entry React component in the <kbd>div</kbd> element in the HTML document:</p>
<p><kbd><span>mern-simplesetup/client/main.js</span></kbd>:</p>
<pre>import React from 'react'<br/>import { render } from 'react-dom'<br/>import HelloWorld from './HelloWorld'<br/><br/>render(&lt;HelloWorld/&gt;, document.getElementById('root'))</pre>
<p><span>In this case, the entry React component is the <kbd>HelloWorld</kbd> component imported from</span> <kbd>HelloWorld.js</kbd><span>:</span></p>
<p><kbd><span>mern-simplesetup/client/HelloWorld.js</span></kbd>:</p>
<pre>import React from 'react'<br/>import { <strong>hot</strong> } from 'react-hot-loader'<br/><br/>const <strong>HelloWorld</strong> = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>     &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>   )<br/>}<br/><br/>export default <strong>hot(module)(HelloWorld)</strong> </pre>
<p><kbd>HelloWorld.js</kbd><span> contains a basic </span><kbd>HelloWorld</kbd><span> React component, which is hot-exported to enable hot reloading with </span><kbd>react-hot-loader</kbd><span> during development.</span></p>
<p class="mce-root">To see the React component rendered in the browser when the server receives a request to the root URL, we need to use the Webpack and Babel setup to compile and bundle this code, and also add server-side code that responds to the root route request with the bundled code. We will implement this server-side code next.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Server with Express and Node</h1>
                </header>
            
            <article>
                
<p>In the project folder, create a folder called <kbd>server</kbd>, and add a file called <kbd>server.js</kbd> that will set up the server. Then, add another file called <kbd>devBundle.js</kbd><span>, which wi</span>ll help co<span>mpile the React code using Webpack configurations while in development mode. In the following sections, we will implement the Node-Express app, which initiates client-side code bundling, starts the server, sets up the path to serve static assets to the client, and renders the React view in a template when a <kbd>GET</kbd> request is made to the root route.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Express app</h1>
                </header>
            
            <article>
                
<p>In <kbd>server.js</kbd>, we will first add code <span>to import the <kbd>express</kbd> module</span> in order to initializ<span>e an Express app:</span></p>
<p><kbd><span>mern-simplesetup/server/server.js</span></kbd>:</p>
<pre>import express from 'express'<br/><br/>const app = express()</pre>
<p>Then we will use this Express app to build out the rest of the Node server application.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Bundling React app during development</h1>
                </header>
            
            <article>
                
<p>In order to keep the development flow simple, we will initialize Webpack to compile the client-side code when the server is run. In <kbd>devBundle.js</kbd>, we will set up a <kbd>compile</kbd> method that takes the Express app and configures it<span> to use the Webpack middleware to compile, bundle, and serve code, as well as enable hot reloading in development mode:</span></p>
<p><kbd><span>mern-simplesetup/server/devBundle.js</span></kbd>:</p>
<pre>import webpack from 'webpack'<br/>import webpackMiddleware from 'webpack-dev-middleware'<br/>import webpackHotMiddleware from 'webpack-hot-middleware'<br/>import webpackConfig from './../webpack.config.client.js'<br/><br/>const compile = (app) =&gt; {<br/> if(process.env.NODE_ENV == "development"){<br/>  const compiler = webpack(webpackConfig)<br/>  const middleware = webpackMiddleware(compiler, {<br/>   publicPath: webpackConfig.output.publicPath<br/>  })<br/>  app.use(middleware)<br/>  app.use(webpackHotMiddleware(compiler))<br/> }<br/>}<br/><br/>export default {<br/> compile<br/>}</pre>
<p>We will call this compile method in <kbd>server.js</kbd><span> by adding the following lines while in development mode:</span></p>
<p><kbd><span>mern-simplesetup/server/server.js</span></kbd>:</p>
<pre><span><strong>import devBundle from './devBundle'</strong><br/>const app = express()<br/><strong>devBundle.compile(app)</strong><br/></span></pre>
<p>These two highlighted lines are only meant for development mode and should be commented out when building the application code for production. In development mode, when these lines are executed, Webpack will compile and bundle the React code to place it in <kbd>dist/bundle.js</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Serving static files from the dist folder</h1>
                </header>
            
            <article>
                
<p>Webpack will compile client-side code in both development and production mode, then place the bundled files in the <kbd>dist</kbd> folder. To make these static files available on requests from the client side, we will add the following code in <kbd>server.js</kbd> to serve static files from the <kbd>dist</kbd> folder:</p>
<p><kbd><span>mern-simplesetup/server/server.js</span></kbd>:</p>
<pre>import path from 'path'<br/>const CURRENT_WORKING_DIR = process.cwd()<br/>app.use('/dist', express.static(path.join(CURRENT_WORKING_DIR, 'dist')))</pre>
<p>This will configure the Express app to return static files from the <kbd>dist</kbd> folder when the requested route starts with <kbd>/dist</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Rendering templates at the root </h1>
                </header>
            
            <article>
                
<p>When the server receives a request at the root URL <kbd>/</kbd>, we will render <kbd>template.js</kbd> in the browser. In<span> </span><kbd>server.js</kbd><span>,</span> add the following route-handling code to the Express app to receive <kbd><span>GET</span></kbd> requests at <kbd>/</kbd>:</p>
<p><kbd><span>mern-simplesetup/server/server.js</span></kbd>:</p>
<pre>import template from './../template'<br/>app.get('/', (req, res) =&gt; {<br/>   res.status(200).send(template())<br/>})</pre>
<p>Finally, configure the Express app to start a server that listens on the specified port for incoming requests:</p>
<p><kbd><span>mern-simplesetup/server/server.js</span></kbd>:</p>
<pre>let port = process.env.PORT || 3000<br/>app.listen(port, function onStart(err) {<br/> if (err) {<br/>  console.log(err) <br/> }<br/> console.info('Server started on port %s.', port)<br/>})</pre>
<p>With this code, when the server is running, it will be able to accept requests at the root route and render the React view with the "Hello World" text in the browser. The only part missing from this full-stack implementation is a connection to the database, which we will add in the next section. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Connecting the server to MongoDB</h1>
                </header>
            
            <article>
                
<p>To connect your Node server to MongoDB, add the following code to <kbd>server.js</kbd>, and make sure you have MongoDB running in your workspace or you have the URL of a cloud MongoDB database instance:</p>
<p><kbd><span>mern-simplesetup/server/server.js</span></kbd>:</p>
<pre style="padding-left: 30px">import { MongoClient } from 'mongodb'<br/>const url = process.env.MONGODB_URI ||<br/>  'mongodb://localhost:27017/mernSimpleSetup'<br/><strong>MongoClient</strong>.connect(url, (err, db)=&gt;{<br/>  console.log("Connected successfully to mongodb server")<br/> db.close()<br/>})</pre>
<p>In this code example, <kbd>MongoClient</kbd> is the driver that connects to the running MongoDB instance using its URL. It allows us to implement the database-related code in the backend. This completes our full-stack integration for this simple web application using the MERN setup, and finally, we can run this code to see this application working live.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Run scripts</h1>
                </header>
            
            <article>
                
<p>In order to run the application, we will update the <kbd>package.json</kbd> file to add the following run scripts for development and production:</p>
<p><kbd><span>mern-simplesetup/package.json</span></kbd>:</p>
<pre>"scripts": {<br/>  "development": "nodemon",<br/>  "build": "webpack --config webpack.config.client.production.js <br/>    &amp;&amp; webpack --mode=production --config <br/>      webpack.config.server.js",<br/>  "start": "NODE_ENV=production node ./dist/server.generated.js"<br/>} </pre>
<p>Let's look at the code:</p>
<ul>
<li><kbd>yarn development</kbd>: This command will get Nodemon, Webpack, and the server started for development.</li>
<li><kbd>yarn build</kbd>: This will generate the client and server code bundles for production mode (before running this script, make sure to remove the <kbd>devBundle.compile</kbd> code from <kbd>server.js</kbd>).</li>
<li><kbd>yarn start</kbd>: This command will run the bundled code in production.</li>
</ul>
<p>You can use these commands to run the application either for debugging while you are developing the application or when the application is ready to go live in production.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Developing and debugging in real time</h1>
                </header>
            
            <article>
                
<p>To run the code developed so far, and to ensure that everything is working, you can go through the following steps:</p>
<ol start="1">
<li style="font-weight: 400"><strong>Run the application from the command line</strong>: <kbd><span>yarn development</span></kbd>.</li>
<li style="font-weight: 400"><strong>Load in browser</strong>: Open the root URL in the browser, which is <kbd>http://localhost:3000</kbd> if you are using your local machine. You should see a page with the title <span class="packt_screen">MERN Kickstart</span> that just shows <span class="packt_screen">Hello World!</span>.</li>
<li style="font-weight: 400"><strong>Develop code and debug live</strong>: Change the <kbd>HelloWorld.js</kbd> component text from <kbd>"Hello World!"</kbd> to just <kbd>"hello"</kbd>. Save the changes to see the instantaneous update in the browser, and also check the command-line output to see that <kbd>bundle.js</kbd> is not re-created. Similarly, you can also see instant updates when you change the server-side code, increasing productivity during development.</li>
</ol>
<p>If you have made it this far, congratulations! You are all set to start developing exciting MERN applications.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we discussed development tool options and how to install MERN technologies, and then we wrote code to check whether the development environment is set up correctly.</p>
<p class="mce-root">We began by looking at the recommended workspace, IDE, version control software, and browser options suitable for web development. You can select from these options based on your preferences as a developer.</p>
<p class="mce-root">Next, we set up the MERN stack technologies by first installing MongoDB, Node, and Yarn, and then adding the remaining required libraries using Yarn.</p>
<p class="mce-root">Before moving on to writing code to check this setup, we configured Webpack and Babel to compile and bundle code during development, and to build production-ready code. We learned that it is necessary to compile the ES6 and JSX code that is used for developing a MERN application before opening the application on browsers.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">Additionally, we made the development flow efficient by including React Hot Loader for frontend development, configuring Nodemon for backend development, and compiling both the client and server code in one command when the server is run during development.</p>
<p class="mce-root">In the next chapter, we will use this setup to start building a skeleton MERN application that will function as a base for full-featured applications.</p>


            </article>

            
        </section>
    </body></html>