<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Building Monolithic Web Applications with JHipster</h1>
                </header>
            
            <article>
                
<p>Let's get into action and build a production-grade web application using JHipster. Before<span> we start, we need a use case. We will be building an e-commerce web application that manages products, customers, and their orders and invoices. </span><span>The web application will use a MySQL database for production and will have an Angular front end. </span><span>The UI for the actual shopping website will be different from the back office features, which will only be available for employees who have an administrator role. For this exercise, we will only be building a simple UI for the client-facing part. We will talk about other option as we go through this chapter.</span></p>
<p>In this chapter, we will:</p>
<ul>
<li>See how to create a monolithic web application using JHipster</li>
<li>Walk through important aspects of the generated code</li>
<li>See the security aspects of the generated application</li>
<li>See how to run the application and tests</li>
<li>See the generated frontend screens</li>
<li>See the tools included that will ease further development</li>
</ul>
<div class="packt_infobox"><span>This chapter will require the use of a </span><span>terminal (command prompt on windows) app throughout. You can the see previous chapter for more info about that.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Application generation</h1>
                </header>
            
            <article>
                
<p>Before we start generating the application, we need to prepare our workspace as this workspace will be used throughout this book, and you will be creating many Git branches on this workspace as we proceed.</p>
<div class="packt_tip">Visit <a href="http://rogerdudler.github.io/git-guide/">http://rogerdudler.github.io/git-guide/</a> for a quick reference guide on Git commands.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Step 1 –  preparing the workspace</h1>
                </header>
            
            <article>
                
<p>Let's create a new folder for the workspace. Create a folder called <kbd>e-commerce-app</kbd> and from the terminal, navigate to the folder:</p>
<pre><strong>&gt; mkdir e-commerce-app</strong><br/><strong>&gt; cd e-commerce-app</strong></pre>
<p>Now, create a new folder for our application; let's call it <kbd>online-store</kbd> and navigate to it:</p>
<pre><strong>&gt; mkdir online-store<br/>&gt; cd online-store</strong></pre>
<p><span>Now, we are ready to invoke JHipster. Let's first make sure everything is ready by running the </span><kbd>jhipster --version</kbd> command. I<span>t should print a globally installed JHipster version, otherwise you'll need to follow the instructions from the previous chapter to set it up.</span></p>
<div class="packt_tip"><span>It is always better to use the latest versions of the tools as they might include important bug fixes. You can upgrade JHipster anytime using the command <kbd>yarn global upgrade generator-jhipster</kbd></span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Step 2 – generating code using JHipster</h1>
                </header>
            
            <article>
                
<p>Initialize JHipster by running the <kbd>jhipster</kbd> command into the terminal, which will produce the following output:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/55b08066-55d6-41fb-aa8b-894b67431c32.png"/></div>
<p>JHipster will ask a number questions to get input about different options which are required. The first question is about the application type that we want, and we are presented with the following four options:</p>
<ul>
<li><strong>Monolithic application</strong>: As the name suggests, it creates a monolithic web application with a Spring Boot-based backend and an SPA frontend.</li>
<li><strong>Microservice application</strong>: This creates a Spring Boot microservice without any frontend, and is designed to work with a JHipster microservice architecture. </li>
<li><strong>Microservice gateway</strong>: This creates a Spring Boot application very similar to the monolithic application but geared towards a microservice architecture with additional configurations. It features an SPA frontend.</li>
<li><strong>JHipster UAA server</strong>: This creates an OAuth2 User authentication and Authorization service. This will not feature any frontend code and is designed to be used in a JHipster microservice architecture.</li>
</ul>
<p>We will choose the <strong>monolithic application</strong> for our use case. <span>We will talk and look at the other options in detail in <a href="673932d7-7927-4a12-8c02-86197cc8d3aa.xhtml" target="_blank">Chapter 8</a>, <em>Introduction to Microservice Server-Side Technologies</em>, of this book.</span></p>
<div class="packt_tip">Run <kbd>jhipster --help</kbd> to see all available commands. Run <kbd>jhipster &lt;command&gt; --help</kbd> to see help information for a specific command; for example, <kbd>jhipster app --help</kbd> will display help information for the main app generation process.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Server-side options</h1>
                </header>
            
            <article>
                
<p>The generator will now start asking us about the server side options that we need. Let's go through them one by one:</p>
<ul>
<li><span><strong>Question 1</strong>: This prompt asks for a base name for the application, which is used for creating the main class file names, database names, and so on. By default, JHipster will suggest the current directory name if it doesn't contain any special characters in the name. Let's name our application</span> as <kbd>store</kbd><span>.</span> <span>Please note that the files will be created in the current directory you are in:</span></li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6c95f513-f616-4b4c-87fc-3181fcc65a1e.png"/></div>
<ul>
<li><strong>Question 2</strong>: This prompt asks for a Java package name. Let's choose <kbd>com.mycompany.store</kbd>:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/12e38392-dbee-4676-8b2b-0ddfe909b08a.png"/></div>
<ul>
<li><strong>Question 3</strong>. This prompt asks whether we need to configure JHipster registry for this instance. JHipster registry provides a service discovery and config server implementation which is very useful for centralized configuration management and scaling of the application. For this use case, we will not need it, so let's choose <span class="packt_screen">No</span>. We will learn more about the JHipster Registry in <a href="673932d7-7927-4a12-8c02-86197cc8d3aa.xhtml" target="_blank">Chapter 8</a>, <em>Introduction to Microservice Server-Side Technologies</em>, of this book:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7bae52a7-2c14-4227-a243-a9a7c524d9d5.png"/></div>
<ul>
<li><strong>Question 4</strong>: This prompt asks us to select an authentication mechanism. We are presented with three options:
<ul>
<li><span class="packt_screen">JWT authentication</span></li>
<li><span class="packt_screen">HTTP Session Authentication</span></li>
<li><span class="packt_screen">OAuth 2.0/OIDC Authentication</span></li>
</ul>
</li>
</ul>
<p style="padding-left: 60px">We already saw how these defer in the previous chapter, and for our use case, let's choose <span class="packt_screen">JWT authentication</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b34a807b-0708-4ca8-8e49-b80e12caa78a.png"/></div>
<ul>
<li><strong>Question 5</strong>: This prompt asks us to select a database type; the options provided are <span class="packt_screen">SQL</span>, <span class="packt_screen">MongoDB</span>, <span class="packt_screen">Couchbase</span>, and <span class="packt_screen">Cassandra</span>. We already learned about the different database options in the previous chapter. For our application, let's choose an <span class="packt_screen">SQL</span> database:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e26c0421-549a-45cf-9b71-24efde78fbfa.png"/></div>
<ul>
<li><strong>Question 6</strong>: This prompt asks us to choose a specific SQL database that we would like to use in production; the available options are <span class="packt_screen">MySQL</span>, <span class="packt_screen">MariaDB</span>, <span class="packt_screen">PostgreSQL</span>, <span class="packt_screen">Oracle</span>, and <span class="packt_screen">Microsoft SQL Server</span>. Let's choose <span class="packt_screen">MySQL</span> here:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b9ee211a-c09a-48a8-a811-e51b309f0793.png"/></div>
<ul>
<li><strong>Question 7</strong>:<strong> </strong><span>This prompt asks us</span> to choose between our chosen SQL database and H2 embedded database for development. H2 embedded DB is especially useful as it makes development faster and self-contained, without the need to have a MySQL instance running. So, let's choose the <span class="packt_screen">H2 disk-based persistence</span> here as it is lightweight and easier in development compared to having a full-fledged DB service running:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3d1a438a-f772-4b79-b882-cbfd3d56cc64.png"/></div>
<div class="packt_tip" style="padding-left: 60px">If your use case requires working with persisted data in development and if the model is not going to change often, then you could also choose MySQL for development as it would give you a faster startup time. This is because the embedded H2 DB doesn't need to be initialized, but the downside is each time you make schema changes or recreate entities, you would have to update the DB using generated liquibase diff changelogs manually, or wipe the DB manually and start over again. With an embedded H2 DB, you could run <kbd>./gradlew clean</kbd> to wipe it.</div>
<ul>
<li><strong>Question 8</strong>: <span>This prompt asks us</span> to choose a Spring cache implementation. We have the option to choose between no cache, <span class="packt_screen">EHCache</span>, <span class="packt_screen">Hazelcast</span>, and <span class="packt_screen">Infinispan</span>. Since we learned about these in the previous chapter, let's go ahead and choose <span class="packt_screen">Hazelcast</span> here:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/44d0fcc9-57cd-4221-b20a-371f69c5e203.png"/></div>
<ul>
<li><strong>Question 9</strong><span>. </span><span>This prompt asks us</span><span> to choose if we need a 2<sup>nd</sup> level cache for Hibernate. Let's choose</span> <span class="packt_screen">Yes</span><span>. It will use the same cache implementation we chose for the previous question:</span></li>
</ul>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/567d2e9e-6f86-4745-857c-9454d9661f4c.png"/></div>
<ul>
<li><strong>Question 10</strong>: <span>This prompt</span> gives us the choice of the build tool to use for the project; the options are <span class="packt_screen">Maven</span> and <span class="packt_screen">Gradle</span>. Let's choose <span class="packt_screen">Gradle</span> here as it is more modern and powerful:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/eb824465-a757-4f8e-932f-b37fbc591e1d.png"/></div>
<ul>
<li><strong>Question 11</strong>: <span>This prompt</span> is interesting as it presents various additional options supported by JHipster. The options are:
<ul>
<li><span class="packt_screen">Social login</span>: Adds support for using a Social login provider like Facebook, Twitter, and so on for login(<span>Social login option is removed in JHipster 5 and you need to choose</span><span> </span>OAuth 2.0/OIDC Authentication<span> </span><span>instead to use <span class="packt_screen">Social login</span> provided by the OIDC provider)</span></li>
<li><span class="packt_screen">Elasticsearch</span>: Adds Elasticsearch support for the generated entities</li>
<li><span class="packt_screen">WebSockets</span>: Adds WebSocket support using Spring WebSocket, SocketJS, and Stomp protocol</li>
<li><span class="packt_screen">API first development with swagger-codegen</span>: Adds Swagger codegen support for API first development</li>
<li><span class="packt_screen">Apache Kafka</span>: Adds support for asynchronous queue using Kafka</li>
</ul>
</li>
</ul>
<p style="padding-left: 60px">Let's keep it simple and choose <span class="packt_screen">WebSockets using Spring WebSocket</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c5d21189-d8b9-44e7-b2f1-7b44fb54bc9f.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Client-side options</h1>
                </header>
            
            <article>
                
<p>Now, the generator will ask us about the client side option, including the client-side framework we wish to use:</p>
<ul>
<li><strong>Question 1</strong>: <span>This prompt asks us</span> to select a client-side MVVM framework; the options include <span class="packt_screen">Angular 5</span> and <span class="packt_screen">React</span>. Let's choose <span class="packt_screen">Angular 5</span> here:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4a5c8e0b-932a-48ba-8c19-3ed420a30588.png"/></div>
<ul>
<li><strong>Question 2</strong>. <span>This prompt</span> lets us enable SASS support for our CSS, and since SASS is awesome, let's enable it by selecting <span class="packt_screen">Yes</span>:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f902df50-6e64-4e06-aad2-ab2b8e0a34e8.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Internationalization options</h1>
                </header>
            
            <article>
                
<p>We will now have the opportunity to enable internationalization and select the languages we would like:</p>
<ul>
<li><strong>Question 1</strong>. <span>This prompt</span> lets us enable <strong>internationalization</strong> (<strong>i18n</strong>). Let's choose <span class="packt_screen">Yes</span> here:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8daf4fcc-2205-4d40-9cc3-f3a68105f54a.png"/></div>
<ul>
<li><strong>Question 2</strong>: Since we enabled i18n, we will be given the option to choose a primary language and additional i18n languages. At the time of writing, there are 36 supported languages including 2 <strong>RTL</strong> (<strong>Right to Left</strong>) languages. Let's choose <span class="packt_screen">English</span> as the primary language and <span class="packt_screen">Simplified Chinese</span> as the additional language:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="213" src="assets/d458268c-0917-4531-b0d1-98d7c3db9f3d.png" width="527"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Testing</h1>
                </header>
            
            <article>
                
<p>Now, we can choose testing options for our application.</p>
<p><span>This prompt</span> lets us choose testing frameworks for our application, which will also create sample tests for the application and entities. The options are <span class="packt_screen">Gatling</span>, <span class="packt_screen">Cucumber</span>, and <span class="packt_screen">Protractor</span>. Let's choose <span class="packt_screen">Protractor</span> here:</p>
<div class="CDPAlignCenter CDPAlign"><img height="179" src="assets/c7433d8d-19dc-4443-905f-79948ff057a3.png" width="525"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Modules</h1>
                </header>
            
            <article>
                
<p><span>This prompt</span> lets us choose additional third-party modules from the JHipster marketplace (<a href="https://www.jhipster.tech/modules/marketplace">https://www.jhipster.tech/modules/marketplace</a>). This can be helpful if we want to use additional features not supported directly by JHipster. We will look at this in later chapters. For now, let's choose <span class="packt_screen">No</span>. Don't worry about this, as these modules can be added to the application later when required as well:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/78284fce-ea2d-47c3-bc50-2668698021ab.png"/></div>
<p>Once all the questions are answered, the code generation will start and you will see an output like following, listing the files created, and then running yarn installation to get all the frontend dependencies installed.</p>
<div class="packt_tip">If you do not want the Yarn install and Webpack build steps to run, you could use the <kbd>--skip-install</kbd> flag while running JHipster to skip this. Just run <kbd>jhipster --skip-install</kbd></div>
<p>Once the installation is complete, the generator will trigger a webpack build for the client side so that when we start the application, we have everything ready:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7f103264-19be-4333-8adc-575f74a75a5d.png"/></div>
<div class="packt_infobox">JHipster will check your environment to see if all the required dependencies like Java8, NodeJS, Git, and NPM/Yarn are installed. If not, it will show friendly warning messages before code generation starts.</div>
<p>Once the process is complete, you will see successful messages as follows, and instructions to start the application:</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img height="159" src="assets/7bcbb01c-c4d2-4acf-b387-838b750971f5.png" width="489"/></div>
<div class="packt_tip">There are command-line flags that can be passed while executing the <kbd>jhipster</kbd> command. Running <kbd>jhipster app --help</kbd> will list all of the available command-line flags. One of the interesting flags, for example, is <kbd>npm</kbd>, which lets you use NPM instead of Yarn for dependency management.</div>
<p>JHipster will automatically initialize a Git repository for the folder and commit the generated file.  If you wish to do this step yourself, you can do so by passing the <kbd>skip-git</kbd> flag during executing <kbd>jhipster --skip-git</kbd> and execute the steps manually as follows:</p>
<div>
<pre><strong>&gt; git init</strong><br/><strong>&gt; git add --all</strong><br/><strong>&gt; git commit -am "generated online store application"</strong></pre></div>
<div class="packt_tip"><span>You could also use a GUI tool like Sourcetree or GitKraken if you wish to do so to work with Git.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Code walkthrough</h1>
                </header>
            
            <article>
                
<div>
<p>Now that we have generated our application with JHipster, let's go through important pieces of the source code which have been created. Let's open our application in our favorite IDE or Editor.</p>
</div>
<div class="packt_tip">If you are using IntelliJ IDEA, you can execute<span> </span><kbd>idea .</kbd> in a terminal from the application folder to launch it. Otherwise, you can import the application as a new Gradle project using the menu option <span class="packt_screen">File</span> | <span class="packt_screen">New</span> | <span class="packt_screen">Project</span> from existing sources and select the project folder before selecting <span class="packt_screen">Gradle</span> from the options and click <span class="packt_screen">Next</span> and then <span class="packt_screen">Finish</span>. If you are using Eclipse, open the <span class="packt_screen">File</span> | <span class="packt_screen">Import...</span> dialog and select <span class="packt_screen">Gradle Project</span> in the list and follow the instructions.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">File structure</h1>
                </header>
            
            <article>
                
<p>The created application will have the following file structure:</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img height="549" src="assets/9c29ba9b-c796-41f9-bb21-9a356f41123d.png" width="336"/></div>
<p>As you can see, the root folder is quite busy with a few folders but a lot of configuration files. The most interesting among them is:</p>
<ul>
<li><kbd>src</kbd>: This is the source folder which holds the main application source and the test source files.</li>
<li><kbd>webpack</kbd>: This folder holds all the Webpack client-side build configurations for development, production, and testing.</li>
<li><kbd>gradle</kbd>: This folder has Gradle wrapper and additional Gradle build scripts which will be used by the main Gradle build file (JHipster provides a similar wrapper if Maven is chosen as well).</li>
<li><kbd>build.gradle</kbd>: This is our Gradle build file which specifies our applications build lifecycle. It also has the server side dependencies specified. The build uses properties defined in the <kbd>gradle.properties</kbd> file alongside it. You can also find an executable named <kbd>gradlew</kbd> (<kbd>gradlew.bat</kbd> for Windows), which lets you use Gradle without having to install it.</li>
<li><kbd>.yo-rc.json</kbd>: This is the configuration file for JHipster. This file stores the options we selected during app creation, and it is used for app regeneration and upgrades.</li>
<li><kbd>package.json</kbd>: This is the NPM configuration file which specifies all your client-side dependencies, client-side build dependencies, and tasks. </li>
<li><kbd>tsconfig.json</kbd>: This is the configuration for Typescript. There is also <kbd>tsconfig-aot.json</kbd> for Angular <strong>AOT</strong> (<strong>Ahead-of-Time</strong>) compilation.</li>
<li><kbd>tslint.json</kbd>: This is the lint configuration for Typescript.</li>
</ul>
<div class="packt_tip">Install and configure Typescript and the Tslint plugin for your IDE or editor to make the most out of Typescript.</div>
<p>Now, let's take a look at the source folder. It has a main folder and a test folder, which holds the main app source code and tests the source code accordingly. The folder structure is as follows:</p>
<ul>
<li><kbd>main</kbd>:
<ul>
<li><kbd>docker</kbd>: Holds the Dockerfile for the application and Docker configurations for the selected options</li>
<li><kbd>java</kbd>: Holds the main Java source code for the application</li>
<li><kbd>resources</kbd>: Holds Spring Boot configuration files, Liquibase changelogs, and static resources like server-side i18n files and email templates used by the application</li>
<li><kbd>webapp</kbd>: Holds the Angular application source code and the client side static content like images, stylesheets, i18n files, and so on</li>
</ul>
</li>
<li><kbd>test</kbd>:
<ul>
<li><kbd>java</kbd>: Holds the unit and integration test source for the server side</li>
<li><kbd>javascript</kbd>: Holds the Karma unit test specs and Protractor end-to-end specs for the client side application</li>
<li><kbd>resources</kbd>: <span>Holds Spring configuration files and static resources like server-side i18n files and email templates used by the application for test</span></li>
</ul>
</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Server-side source code</h1>
                </header>
            
            <article>
                
<p>The server-side code is situated in the Java and resources folder under <kbd>src/main</kbd>, as seen in the preceding screenshot. The folder structure is as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="599" src="assets/c0e66522-8001-4202-9d41-dc0a2f49a4b9.png" width="207"/></div>
<div class="packt_infobox">You may notice that the Spring components do not use the traditional <kbd>@Autowired</kbd> or <kbd>@Inject</kbd> annotations for dependency injection in the generated code. This is because we use constructor injection instead of field injection, and Spring Boot doesn't need explicit annotations for constructor injection. Constructor injection is considered better as it enables us to write better unit tests and avoids design issues, whereas field injection is more elegant but easily makes a class monolithic. Constructor injection is a suggested best practice by the Spring team. Constructor injection also makes unit testing components easier.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Java source</h1>
                </header>
            
            <article>
                
<p>The important parts of the Java source code are:</p>
<ul>
<li><kbd>StoreApp.java</kbd>: This is the main entry class for the application. Since this is a Spring Boot application, the main class is executable and you can start the application by just running this class from an IDE. Let's take a look at this class:
<ul>
<li><span><span>The class is annotated with a bunch of Spring JavaConfig annotations:</span></span></li>
</ul>
</li>
</ul>
<pre style="padding-left: 150px"><span><strong>@ComponentScan</strong><br/></span><strong>@EnableAutoConfiguration</strong>(<span>exclude </span>= {<span>MetricFilterAutoConfiguration</span>.<span>class</span>, <span>MetricRepositoryAutoConfiguration</span>.<span>class</span>})<br/><strong>@EnableConfigurationProperties</strong>({<span>LiquibaseProperties</span>.<span>class</span>, <span>ApplicationProperties</span>.<span>class</span>})</pre>
<ul>
<li style="list-style-type: none">
<ul>
<li>The first one, <kbd>@ComponentScan</kbd>, tells the Spring application to scan the source files and auto detect Spring components (Services, Repository, Resource, Configuration classes that define Spring beans, and so on).</li>
<li>The second one is <kbd>@EnableAutoConfiguration</kbd>, which tells Spring Boot to try to guess and auto-configure beans that the application might need based on the classes found on the classpath and the configurations we have provided. The exclude settings specifically tells Spring Boot not to auto-configure the specified beans.</li>
<li>The third one, <kbd>@EnableConfigurationProperties</kbd>, helps register additional configurations for the application via property files.</li>
</ul>
</li>
</ul>
<ul>
<li style="list-style-type: none">
<ul>
<li>The main method of the class bootstraps the Spring Boot application and runs it:</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 150px"><span>public static void </span><span>main</span><span>(</span><span>String</span><span>[] </span><span>args</span><span>) </span><span>throws </span><span>UnknownHostException </span><span>{</span><br/><span>    </span><span>SpringApplication </span><span>app </span><span>= </span><span>new </span><span>SpringApplication(</span><span>StoreApp</span><span>.</span><span>class</span><span>);</span><br/><span>    </span><span>DefaultProfileUtil</span><span>.</span><span>addDefaultProfile</span><span>(</span><span>app</span><span>);</span><br/><span>    </span><span>Environment </span><span>env </span><span>= </span><span>app</span><span>.run(</span><span>args</span><span>).getEnvironment();</span><br/><span>    ...</span><br/><span>}</span></pre>
<ul>
<li><kbd>config</kbd>: This package contains Spring bean configurations for the database, cache, WebSocket, and so on. This is where we will configure various options for the application. Some of the important ones are:
<ul>
<li><kbd>CacheConfiguration.java</kbd>: This class configures the Hibernate second level cache for the application. Since we chose Hazelcast as the cache provider, this class configures the same way.</li>
<li><kbd>DatabaseConfiguration.java</kbd>: This class configures the database for the application and enables transaction management, JPA auditing, and JPA repositories for the application. It also configures Liquibase to manage DB migrations and the H2 database for development.</li>
<li><kbd>SecurityConfiguration.java</kbd>: This is a very important part of the application as it configures security for the application. Let's take a look at important parts of the class:
<ul>
<li>The annotations enable web security and method level security so that we can use <kbd>@Secured</kbd> and <kbd>@Pre/PostAuthorize</kbd> annotations on individual methods:</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre style="padding-left: 210px">@EnableWebSecurity<br/><span>@EnableGlobalMethodSecurity</span><span>(</span><span>prePostEnabled </span><span>= </span><span>true</span><span>, </span><span>securedEnabled </span><span>= </span><span>true</span><span>)</span></pre>
<ul>
<li style="list-style-type: none">
<ul>
<li style="list-style-type: none">
<ul>
<li>The following configuration tells the application to ignore static content and certain APIs from Spring security configuration:</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 210px"><span>@Override</span><br/><span>public void </span><span>configure</span><span>(</span><span>WebSecurity </span><span>web</span><span>) </span><span>throws </span><span>Exception </span><span>{</span><br/><span>    </span><span>web</span><span>.ignoring()</span><br/><span>        .antMatchers(</span><span>HttpMethod</span><span>.</span><span>OPTIONS</span><span>, </span><span>"/**"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/app/**/*.{js,html}"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/i18n/**"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/content/**"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/swagger-ui/index.html"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/api/register"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/api/activate"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/api/account/reset-<br/>         password/init"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/api/account/reset-<br/>         password/finish"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/test/**"</span><span>)</span><br/><span>        .antMatchers(</span><span>"/h2-console/**"</span><span>);</span><br/><span>}</span></pre>
<ul>
<li style="list-style-type: none">
<ul>
<li style="list-style-type: none">
<ul>
<li>The following configuration tells Spring security which endpoints are permitted for all users, which e<span>ndpoints </span>should be authenticated, and which endpoints require a specific role (<kbd>ADMIN</kbd>, in this case):</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 210px"><span>@Override</span><br/><span>protected void </span><span>configure</span><span>(</span><span>HttpSecurity </span><span>http</span><span>) </span><span>throws </span><span>Exception </span><span>{</span><br/><span>    </span><span>http<br/></span><span>        </span><span>...</span><br/><span>    .and()</span><br/><span>        .authorizeRequests()</span><br/><span>        .antMatchers(</span><span>"/api/register"</span><span>).permitAll()</span><br/><span>        ...</span><br/><span>        .antMatchers(</span><span>"/api/**"</span><span>).authenticated()</span><br/><span>        .antMatchers(</span><span>"/websocket/tracker"</span><span>)</span><br/><span>            .hasAuthority(</span><span>AuthoritiesConstants</span><span>.</span><span>ADMIN</span><span>)</span><br/><span>        .antMatchers(</span><span>"/websocket/**"</span><span>).permitAll()</span><br/><span>        .antMatchers(</span><span>"/management/health"</span><span>).permitAll()</span><br/><span>        .antMatchers(</span><span>"/management/**"</span><span>)</span><br/><span>            .hasAuthority(</span><span>AuthoritiesConstants</span><span>.</span><span>ADMIN</span><span>)</span><br/><span>        .antMatchers(</span><span>"/v2/api-docs/**"</span><span>).permitAll()</span><br/><span>        .antMatchers(</span><span>"/swagger-resources/configuration/ui"</span><span>).permitAll()</span><br/><span>        .antMatchers(</span><span>"/swagger-ui/index.html"</span><span>)</span><br/><span>            .hasAuthority(</span><span>AuthoritiesConstants</span><span>.</span><span>ADMIN</span><span>)</span><br/><span>    .and()</span><br/><span>        .apply(securityConfigurerAdapter());</span><br/><span>}</span></pre>
<ul>
<li style="list-style-type: none">
<ul>
<li><kbd>WebConfigurer.java</kbd>: This is where we set up HTTP cache headers, MIME mappings, static assets location, and <strong>CORS</strong> (<strong>Cross-Origin Resource Sharing</strong>).</li>
</ul>
</li>
</ul>
<div class="packt_infobox"><span class="packt_screen">JHipster provides great CORS support out of the box:</span>
<ul>
<li>CORS can be configured using the<span> <kbd>jhipster.cors</kbd> </span>property, as defined in<span> </span>the JHipster common application properties (<a href="http://www.jhipster.tech/common-application-properties/">http://www.jhipster.tech/common-application-properties/</a>).<a href="http://www.jhipster.tech/common-application-properties/"/></li>
<li>It is enabled by default in<span> </span><kbd>dev</kbd> <span>mode</span> for monoliths and gateways. It is disabled by default for microservices as you are supposed to access them through a gateway.</li>
<li>It is disabled by default in<span> </span><kbd>prod</kbd><span> </span>mode for both monoliths and microservices, for security reasons.</li>
</ul>
</div>
<ul>
<li><kbd>domain</kbd>: The domain model classes for the application are in this package. These are simple POJOs which have JPA annotations mapping it to a Hibernate entity. When the Elasticsearch option is selected, these also act as the Document object. Let's take a look at the <kbd>User.java</kbd> class:
<ul>
<li>An entity class is characterized by the following annotations. The <kbd>@Entity</kbd> annotation marks the class as a JPA entity. The <kbd>@Table</kbd> annotation maps the entity to a database table. The <kbd>@Cache</kbd> annotation enables second level caching of the entity, and it also specifies a caching strategy:</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 150px"><span>@Entity</span><br/><span>@Table</span><span>(</span><span>name </span><span>= </span><span>"jhi_user"</span><span>)</span><br/><span>@Cache</span><span>(</span><span>usage </span><span>= </span><span>CacheConcurrencyStrategy</span><span>.</span><span>NONSTRICT_READ_WRITE</span><span>)</span></pre>
<p> </p>
<ul>
<li>There are various annotations used at field level in these classes. <kbd>@Id</kbd> marks the primary key for the entity. <kbd>@Column</kbd> maps a field to a database table column by the same name when no override is provided. <kbd>@NotNull</kbd>, <kbd>@Pattern</kbd>, and <kbd>@Size</kbd> are annotations that are used for validation. <kbd>@JsonIgnore</kbd> is used by Jackson to ignore fields when converting the objects into JSON which are to be returned in the REST API requests. This is especially useful with Hibernate as it avoids circular references between relationships, which create tons of SQL DB requests and fail:</li>
</ul>
<pre class="mce-root" style="padding-left: 150px"><span>@Id</span><br/><span>@GeneratedValue</span><span>(</span><span>strategy </span><span>= </span><span>GenerationType</span><span>.</span><span>IDENTITY</span><span>)</span><br/><span>private </span><span>Long </span><span>id</span><span>;</span><br/><br/><span>@NotNull<br/></span><span>@Pattern</span><span>(</span><span>regexp </span><span>= </span><span>Constants</span><span>.</span><span>LOGIN_REGEX</span><span>)</span><br/><span>@Size</span><span>(</span><span>min </span><span>= </span><span>1</span><span>, </span><span>max </span><span>= </span><span>50</span><span>)</span><br/><span>@Column</span><span>(</span><span>length </span><span>= </span><span>50</span><span>, </span><span>unique </span><span>= </span><span>true</span><span>, </span><span>nullable </span><span>= </span><span>false</span><span>)</span><br/><span>private </span><span>String </span><span>login</span><span>;</span><br/><br/><span>@JsonIgnore<br/></span><span>@NotNull<br/></span><span>@Size</span><span>(</span><span>min </span><span>= </span><span>60</span><span>, </span><span>max </span><span>= </span><span>60</span><span>)</span><br/><span>@Column</span><span>(</span><span>name </span><span>= </span><span>"password_hash"</span><span>,</span><span>length </span><span>= </span><span>60</span><span>)</span><br/><span>private </span><span>String </span><span>password</span><span>;</span></pre>
<ul>
<li style="list-style-type: none">
<ul>
<li>The relationships between the database tables are also mapped to the entities using JPA annotations. Here, for example, it maps a many-to-many relationship between a user and user authorities. It also specifies a join table to be used for the mapping:</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 150px"><span>@JsonIgnore</span><br/><span>@ManyToMany<br/></span><span>@JoinTable</span><span>(</span><br/><span>    </span><span>name </span><span>= </span><span>"jhi_user_authority"</span><span>,</span><br/><span>    </span><span>joinColumns </span><span>= {</span><span>@JoinColumn</span><span>(</span><span>name </span><span>= </span><span>"user_id"</span><span>, </span><span>referencedColumnName </span><span>= </span><span>"id"</span><span>)},</span><br/><span>    </span><span>inverseJoinColumns </span><span>= {</span><span>@JoinColumn</span><span>(</span><span>name </span><span>= </span><span>"authority_name"</span><span>, </span><span>referencedColumnName </span><span>= </span><span>"name"</span><span>)})</span><br/><span>@Cache</span><span>(</span><span>usage </span><span>= </span><span>CacheConcurrencyStrategy</span><span>.</span><span>NONSTRICT_READ_WRITE</span><span>)</span><br/><span>@BatchSize</span><span>(</span><span>size </span><span>= </span><span>20</span><span>)</span><br/><span>private </span><span>Set</span><span>&lt;</span><span>Authority</span><span>&gt; </span><span>authorities </span><span>= </span><span>new </span><span>HashSet&lt;&gt;();</span></pre>
<p> </p>
<ul>
<li><kbd>repository</kbd>: This package holds the Spring Data repositories for the entities. These typically interface definitions which are automatically implemented by Spring Data. This removes the need for us to write any boilerplate implementations for the data access layer. Let's look at the <kbd>UserRepository.java</kbd> example:</li>
</ul>
<pre style="padding-left: 60px">@Repository<br/>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {<br/><br/>    Optional&lt;User&gt; findOneByActivationKey(String activationKey);<br/><br/>    List&lt;User&gt; findAllByActivatedIsFalseAndCreatedDateBefore(Instant <br/>    dateTime);<br/><br/>    Optional&lt;User&gt; findOneByResetKey(String resetKey);<br/><br/>    Optional&lt;User&gt; findOneByEmailIgnoreCase(String email);<br/>    ...<br/>}</pre>
<ul>
<li style="list-style-type: none">
<ul>
<li>The <kbd> @Repository</kbd> annotation marks this as a Spring data repository component.</li>
<li>The interface extends <kbd>JpaRepository</kbd>, which lets it inherit all the default CRUD operations like <kbd>findOne</kbd>, <kbd>findAll</kbd>, <kbd>save</kbd>, <kbd>count</kbd>, and <kbd>delete</kbd>.</li>
<li>Custom methods are written as simple method definitions following the Spring data naming conventions so that the method name specifies the query to be generated. For example, <kbd>findOneByEmailIgnoreCase</kbd> generates a query equivalent of <kbd>SELECT * FROM user WHERE LOWER(email) = LOWER(:email)</kbd>.</li>
</ul>
</li>
</ul>
<ul>
<li><kbd>security</kbd>: This package holds Spring security-related components and utils, and since we chose JWT as our authentication mechanism, it holds JWT-related classes such as <kbd>TokenProvider</kbd>, <kbd>JWTFilter</kbd>, and <kbd>JWTConfigurer</kbd> as well.</li>
<li><kbd>service</kbd>: This package holds the service layer consisting of Spring service beans, DTOs, <span><span>Mapstruct DTO mappers, and service utilities.</span></span></li>
<li><kbd>web</kbd>: This package holds the web resource classes, view models classes and utility classes.
<ul>
<li><kbd>rest</kbd>: This package holds Spring resource classes for the REST API. It also holds view model objects and utilities. Let's take a look at <kbd>UserResource.java</kbd>:
<ul>
<li>The resource classes are marked with the <kbd>@RestController</kbd> and <kbd>@RequestMapping("/api")</kbd> annotations from Spring. The latter specifies the base URL path for the controller so that all <kbd>&lt;applicationContext&gt;/api/*</kbd> requests are forwarded to this class.</li>
<li>Request methods are annotated with annotations according to their purpose, for example, the below marks the <kbd>createUser</kbd> method as a <kbd>PostMapping</kbd> for <kbd>"/users"</kbd>, which means all POST requests to <span><kbd>&lt;applicationContext&gt;/api/users</kbd> will be served by this method. The <kbd>@Timed</kbd> annotation is used to measure the performance of the method. The <kbd>@Secured</kbd> annotation restricts the method access to the specified role:</span></li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 210px"><strong>@PostMapping("/users")</strong><br/><span><strong>@Timed</strong><br/></span><strong>@Secured</strong><span>(</span><span>AuthoritiesConstants</span><span>.</span><span>ADMIN</span><span>)</span><br/><span>public </span><span>ResponseEntity </span><span>createUser</span><span>(</span><span>@Valid @RequestBody </span><span>ManagedUserVM </span><span>managedUserVM</span><span>) </span><span>throws </span><span>URISyntaxException </span><span>{</span><br/><span>    ...</span><br/><span>}</span></pre>
<ul>
<li style="list-style-type: none">
<ul>
<li><kbd>WebSocket</kbd><span>: This package holds the Websocket controllers and view models.</span></li>
</ul>
</li>
</ul>
<div class="packt_infobox">JHipster uses <strong>DTO </strong>(<strong>Data Transfer Object</strong>) and <strong>VM</strong> (<strong>View Model</strong>) on the server side. DTOs are for transferring data from the service layer to and from the resource layer. They <strong>break</strong> the Hibernate transactions and avoids further lazy loading from being triggered by the resource layer. VMs are only used for displaying data on the web frontend and don't interact with the service layer.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Resources</h1>
                </header>
            
            <article>
                
<p>The important parts of resources are:</p>
<ul>
<li><kbd>config</kbd>: This holds the application property YAML files and Liquibase changelogs. The <kbd>application.yml</kbd> file holds configurable Spring Boot, JHipster, and application-specific properties while the <kbd>application.(dev|prod).yml</kbd> files hold properties that should be applied when the specific dev or prod profile is active. The test configurations are under <kbd>src/test/resource/application.yml</kbd><span><span class="packt_screen">.</span></span></li>
<li><kbd>i18n</kbd>: This holds the server-side i18n resource files.</li>
<li><kbd>mails</kbd>: This holds Thymeleaf templates for emails.</li>
<li><kbd>templates</kbd>: This holds Thymeleaf templates for the client side.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">client-side source code</h1>
                </header>
            
            <article>
                
<p>The client-side source code is under the <kbd>src/main/webapp</kbd> folder, as we saw earlier. The structure is as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="334" src="assets/1fe1ad19-5a99-4eeb-94ed-8192e3be4e01.png" width="213"/></div>
<p>The most noteworthy among these are:</p>
<ul>
<li><kbd>app</kbd>: This folder holds the Angular application's Typescript source code, which is organized with a folder per feature:
<ul>
<li><kbd>app.main.ts</kbd>: This is the main file for the Angular app. This bootstraps the Angular application. Notice that it uses <kbd>platformBrowserDynamic</kbd>, which lets the application work with <strong>JIT</strong> (<strong>Just-in-time</strong>) compilation in the browser. This is ideal for development:</li>
</ul>
</li>
</ul>
<pre class="mce-root" style="padding-left: 150px"><span>platformBrowserDynamic().bootstrapModule(</span><span>StoreAppModule</span><span>)</span><br/><span>.</span><span>then</span><span>((</span><span>success</span><span>) =&gt; </span><span>console</span><span>.</span><span>log</span><span>(</span><span>`Application started`</span><span>))</span><br/><span>.</span><span>catch</span><span>((</span><span>err</span><span>) =&gt; </span><span>console</span><span>.</span><span>error</span><span>(</span><span>err</span><span>)); </span></pre>
<ul>
<li><kbd>app.module.ts</kbd>: This is the main module for the Angular app. It declares app level components and providers, and imports other modules for the application. It also bootstraps the main application component:</li>
</ul>
<pre class="mce-root" style="padding-left: 150px"><span>@NgModule({</span><br/><span>    </span><span>imports</span><span>: [</span><br/><span>        BrowserModule,</span><br/><span>        ...</span><br/><span>        </span><span>StoreEntityModule</span><span>,</span><br/><span>        </span><span>// jhipster-needle-angular-add-module JHipster <br/>         will add new module here<br/></span><span>    </span><span>],</span><br/><span>    </span><span>declarations</span><span>: [</span><br/><span>        </span><span>JhiMainComponent</span><span>,</span><br/><span>        ...</span><br/><span>        </span><span>FooterComponent<br/></span><span>    </span><span>],</span><br/><span>    </span><span>providers</span><span>: [</span><br/><span>        </span><span>ProfileService</span><span>,</span><br/><span>        ...</span><br/><span>        </span><span>UserRouteAccessService<br/></span><span>    </span><span>],</span><br/><span>    </span><span>bootstrap</span><span>: [ </span><span>JhiMainComponent </span><span>]</span><br/><span>})</span><br/><span>export class </span><span>StoreAppModule </span><span>{}</span></pre>
<p> </p>
<ul>
<li><kbd>account</kbd>: This module consists of account-related features such as <span>activate, </span>password, <span>password-reset, register, and settings.</span> Each typical component consists of <kbd>component.html</kbd>, <kbd>component.ts</kbd>, <kbd>route.ts</kbd>, and <kbd>service.ts</kbd> files.</li>
<li><kbd>admin</kbd><span>: </span><span>This module consists of admin-related features such as </span><span>audits, </span><span>configuration, </span><span>docs, health, logs, metrics, tracker, and user-management.</span><span> Each typical component consists of </span><kbd>component.html</kbd><span>, </span><kbd>component.ts</kbd><span>, </span><kbd>route.ts</kbd><span>, and </span><kbd>service.ts</kbd><span> files.</span><br/>
<ul>
<li><kbd>blocks</kbd>: This folder consists of HTTP interceptors and other configs used by the application.</li>
<li><kbd>entities</kbd>: This is where entity modules will be created.</li>
<li><kbd>home</kbd>: The homepage module.</li>
<li><kbd>layouts</kbd>: This folder has layout components like the navbar, footer, error pages, and so on.</li>
<li><kbd>shared</kbd>: This module contains all the shared services (auth, tracker, user), components (login, alert), entity models, and utilities required for the application.</li>
</ul>
</li>
<li><kbd>content</kbd>: This folder contains static content like images, CSS, and SASS files.</li>
<li><kbd>i18n</kbd>: This is where the i18n JSON files live. Each language has a folder with numerous JSON files organized by modules.</li>
<li><kbd>swagger-ui</kbd>: This folder has the Swagger UI client used in development for API documentation.</li>
<li><kbd>index.html</kbd>: This is the web application's index file. This contains very minimal code for loading the angular application's main component. It is a single page Angular application. You will also find some commented out utility code like Google analytics script and Service worker scripts on this file. These can be enabled if required:</li>
</ul>
<pre class="mce-root" style="padding-left: 90px"><span>&lt;!doctype </span><span>html</span><span>&gt;<br/></span><span>&lt;</span><span>html </span><span>class=</span><span>"no-js" </span><span>lang=</span><span>"en" </span><span>dir=</span><span>"ltr"</span><span>&gt;<br/></span><span>&lt;</span><span>head</span><span>&gt;<br/></span><span>    ...</span><span><br/></span><span>&lt;/</span><span>head</span><span>&gt;<br/></span><span>&lt;</span><span>body</span><span>&gt;<br/></span><span>    ...</span><span><br/></span><span>    </span><strong>&lt;jhi-main&gt;&lt;/jhi-main</strong><span><strong>&gt;</strong><br/></span><span>    &lt;</span><span>noscript</span><span>&gt;<br/></span><span>        &lt;</span><span>h1</span><span>&gt;</span><span>You must enable javascript to view this page.</span><span>&lt;/</span><span>h1</span><span>&gt;<br/></span><span>    &lt;/</span><span>noscript</span><span>&gt;<br/></span><span>    ...</span><span><br/></span><span>&lt;/</span><span>body</span><span>&gt;<br/></span><span>&lt;/</span><span>html</span><span>&gt;</span></pre>
<div class="packt_tip">To enable PWA mode using service workers, just <span><span>uncomment the corresponding code in</span></span> <kbd>src/main/webapp/index.html</kbd> <span><span>to register the service worker.  JHipster uses workbox (<a href="https://developers.google.com/web/tools/workbox/">https://developers.google.com/web/tools/workbox/</a>), which</span></span><span> creates the respective service worker and dynamically generates the</span> <kbd>sw.js</kbd>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Starting the application</h1>
                </header>
            
            <article>
                
<p>Now, let's start the application and see the output. There are multiple ways to run the application:</p>
<ul>
<li>By using the Spring Boot Gradle task from the terminal/command line</li>
<li>By executing the main Java class <kbd>src/main/java/com/mycompany/store/StoreApp.java</kbd> from an IDE </li>
<li>By executing the packaged application file using the <kbd>java -jar</kbd> command</li>
</ul>
<p>Let's start the application using the Gradle task. If you want to run the application directly in the IDE, just open the main app file <span><kbd>StoreApp.java</kbd> </span>mentioned earlier, right-click, and choose <span class="packt_screen">Run 'StoreApp'</span>.</p>
<p>To start the application via Gradle, open a terminal/command line and navigate to the application folder. Then, execute the Gradle command as follows (if you are on windows, execute <kbd>gradlew.bat</kbd>). This will trigger the default task <kbd>bootRun</kbd>:</p>
<pre class="mce-root"><strong>&gt; cd online-store<br/>&gt; ./gradlew</strong></pre>
<div class="packt_infobox">Running <kbd>./gradlew</kbd> is equivalent to running <kbd>./gradlew bootRun -Pdev</kbd>. For the client side, the webpack build needs to be run before starting the server for the first time, otherwise you will see a blank page. This task is run automatically during the app generation, but if it fails for some reason, it can be triggered manually by running <kbd>yarn run webpack:build</kbd>. The task can be triggered directly by the Gradle command as well by running <kbd><span>./gradlew webpackBuildDev bootRun -Pdev</span></kbd><span>.</span></div>
<p>Gradle will start downloading the wrapper and dependencies, and you should see the console output similar to the following screenshot after some time (anywhere from a few seconds to a few minutes depending on network speed):</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/8bd30ae3-12a3-4e5f-b6b8-e77009aadfc2.png"/></div>
<p>The app has started successfully and is available on <kbd>http://localhost:8080</kbd>. Open your favorite browser and navigate to the URL.</p>
<div class="packt_infobox">Note that the build preceding will stay at 90% as the process is running continuously.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Application modules</h1>
                </header>
            
            <article>
                
<p>Let's see the different modules available out of the box. The modules can be grouped into:</p>
<ul>
<li>Home and Login</li>
<li>Account</li>
<li>Admin</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Home and Login modules</h1>
                </header>
            
            <article>
                
<p>Once you open the URL, you will see a cool-looking hipster drinking coffee on the homepage as follows: </p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/42b1de89-3425-45b3-8f3d-5d85903fd559.png"/></div>
<p>This is the home page. Let's log in to the application using the default credentials.</p>
<ol>
<li>Click on the <em><span class="packt_screen">Sign in</span></em> link on the page, or <em><span class="packt_screen">Account</span> | <span class="packt_screen">Sign</span> <span class="packt_screen">in</span></em>. You will see the following login screen. Enter the default credentials—<span class="packt_screen">U<span>sername</span></span>—<span><kbd>admin</kbd>, <span class="packt_screen">Password</span></span>—<kbd>admin</kbd><span>, and click <span class="packt_screen"><em><span class="packt_screen">Sign</span> <span class="packt_screen">in</span></em></span></span>:</li>
</ol>
<div class="mce-root CDPAlignCenter CDPAlign"><img height="289" src="assets/c0555645-46d6-4122-bdf6-59853908c418.png" width="284"/></div>
<p style="padding-left: 60px">Once signed in, you will see the authenticated home page with all the authenticated menu items in the navbar:</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/4f711b20-63f8-44a1-9d76-26668dacfd7b.png"/></div>
<ol start="2">
<li>Since we enabled internationalization, we get a <span class="packt_screen">Language</span> menu. Let's try to switch to a different language. Click on the <span class="packt_screen">Language</span> <span>menu and choose the next available language:</span></li>
</ol>
<div class="mce-root CDPAlignCenter CDPAlign"><span><img src="assets/ff9ee658-3207-44b6-9ef8-c1c3dac32511.png"/></span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Account modules</h1>
                </header>
            
            <article>
                
<p>Now, let's look at the account modules that are created out of the box. Under <span class="packt_screen">Account</span> menu, you will see a <span class="packt_screen">Sign out</span> option and following modules:</p>
<ul>
<li>Settings</li>
<li>Password</li>
<li>Registration</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Settings</h1>
                </header>
            
            <article>
                
<p class="mce-root">This module lets you change user settings such as name, email, and language:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/22c2b631-27d9-4282-b194-821eb0d2f7ce.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Password</h1>
                </header>
            
            <article>
                
<p>This module lets you change the password for the current user. There is also a forgot password flow with email verification out of the box:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/38eba954-e8eb-43a1-ad13-ea33b7975f1d.png"/></div>
<div class="packt_infobox"><span>To use the email features, you will have to configure an SMTP server in the application properties. We will look at this in a later chapter.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Registration</h1>
                </header>
            
            <article>
                
<p>This module is available only when you are not logged in. This lets you signup/register as a new user for the application. This will trigger a user activation flow with an activation email and verification. This module will not be available when choosing <span class="packt_screen">Oauth2</span> as your authentication:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/746ad66c-312c-471f-9ce6-6d8b28182160.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Admin module</h1>
                </header>
            
            <article>
                
<p>Now, let's look at the generated admin module screens. These are very useful for development and monitoring of the application. Under the <span class="packt_screen">Admin</span> menu, you will find the following modules:</p>
<ul>
<li>User management</li>
<li>Metrics</li>
<li>Health</li>
<li>Configuration</li>
<li>Audits</li>
<li>Logs</li>
<li>API</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">User management</h1>
                </header>
            
            <article>
                
<p>This module provides you with CRUD functionality to manage users. The results are paginated by default. By default, users who register using the registration module will be deactivated unless they complete the registration process:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f9dc91fc-2227-4a8e-a0b3-a049dee1aa48.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Metrics</h1>
                </header>
            
            <article>
                
<p>This module visualizes data provided by the Spring Boot actuator and Dropwizard metrics. This is very useful for monitoring application performance as it gives method level performance information along with JVM, HTTP, database, and cache metrics. The eye icon near <span class="packt_screen">Threads</span> will let you see the thread dump as well:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/230e8067-49c2-4ad4-a945-f39c74133cdc.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Health</h1>
                </header>
            
            <article>
                
<p>This module provides the health status of application components like <span class="packt_screen">Database</span> and other info like <span class="packt_screen">Disk space</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/cf7d78e1-38ed-4bc3-8822-0fcdd55040dd.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuration</h1>
                </header>
            
            <article>
                
<p>This module helps to visualize the current application configuration in effect. This is very useful for troubleshooting configuration issues:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/416a5f16-4b6c-457d-a207-0dd906b396ab.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Audits</h1>
                </header>
            
            <article>
                
<p>This module lists all the user authentication audit logs since JHipster enables audits for Spring security, and hence all the security events are captured. There is a special Spring data repository that writes the audit events to the database. This is very useful from a security standpoint:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3e8a0176-d70b-4cfc-9e5b-7a36ad76d4e5.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Logs</h1>
                </header>
            
            <article>
                
<p>This module helps to view and update application log levels at runtime. This is very useful for troubleshooting:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f43145c4-6ef3-41d8-9a88-f0971f00e0df.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">API</h1>
                </header>
            
            <article>
                
<p>This module provides the Swagger API documentation for the application's REST API. It also provides a <span class="packt_screen">Try it out</span> editor for the endpoints:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2ad2c391-c727-4bea-a55d-f44f7e699314.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Running generated tests</h1>
                </header>
            
            <article>
                
<p>Good software development is never complete without good testing. JHipster generates quite a lot of automated tests out of the box, and there are options to choose even more. Let's run the generated server side and client side tests for the application to make sure everything is working as expected.</p>
<p><span>First, open a terminal/command line and navigate to the project folder.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Server-side tests</h1>
                </header>
            
            <article>
                
<p>The server-side integration tests and unit tests are present in the <kbd>src/test/java</kbd> folder.</p>
<p>These can be run directly from the IDE by choosing a package or individual test and running it, or via the command line by running a Gradle <kbd>test</kbd> task. Let's run it using the command line. In a new terminal, navigate to the application source folder and execute the following command. It should finish with a success message, as shown here:</p>
<pre><strong>&gt; ./gradlew test<br/>...<br/>BUILD SUCCESSFUL in 45s<br/>8 actionable tasks: 6 executed, 2 up-to-date</strong></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Client-side tests</h1>
                </header>
            
            <article>
                
<p>The client-side unit tests and end-to-end tests are available under <kbd>src/test/javascript</kbd>.</p>
<p>These tests can be run using the provided npm scripts or the provided Gradle tasks.</p>
<div class="packt_tip">You can see all available Gradle tasks by running <kbd>./gradlew tasks</kbd>.</div>
<p>Let's run them using the npm scripts. First, let's run the Karma unit tests. In the terminal, execute the following code. You can also use <kbd>npm</kbd> instead of <kbd>yarn</kbd> if you prefer:</p>
<pre><strong>&gt; yarn test</strong></pre>
<p>It should produce a similar output in the end:</p>
<pre><strong>PhantomJS 2.1.1 (Linux 0.0.0): Executed 56 of 56 SUCCESS (1.672 secs / 1.528 secs)</strong><br/><strong>=============================== Coverage summary ===============================</strong><br/><strong>Statements : 69.25% ( 903/1304 )</strong><br/><strong>Branches : 40.43% ( 112/277 )</strong><br/><strong>Functions : 48.89% ( 154/315 )</strong><br/><strong>Lines : 67.72% ( 795/1174 )</strong><br/><strong>================================================================================</strong><br/><strong>Done in 37.25s.</strong></pre>
<p>Now, let's run the Protractor end-to-end tests using the npm script. In order to run the <kbd>e2e</kbd> tests, we need to make sure that the server is running. If you have shut down the server which we started earlier, make sure to start it again by running <kbd>./gradlew</kbd> in a terminal. Now, open a new terminal and navigate to the application folder and execute the following command:</p>
<pre><strong>&gt; yarn e2e</strong></pre>
<p>This will start protractor tests, which will open a new Chrome browser instance and execute the tests there. When finished, you should see something similar to the following in the console:</p>
<pre><strong>Started</strong><br/><strong>..........</strong><br/><strong>10 specs, 0 failures</strong><br/><strong>Finished in 11.776 seconds</strong><br/><br/><strong>[00:02:57] I/launcher - 0 instance(s) of WebDriver still running</strong><br/><strong>[00:02:57] I/launcher - chrome #01 passed</strong></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we saw how to create a monolithic web application using JHipster. We also walked through important aspects of the created source code and learned how to run the created application and the automated tests. We also browsed through the created modules and saw them in action. In the next chapter, we will see how we can utilize JHipster to model our business use case and generate entities for them. We will also learn about the <strong>JHipster Domain Language</strong> (<strong>JDL</strong>).</p>


            </article>

            
        </section>
    </body></html>