<html><head></head><body>
<div id="_idContainer299">
<h1 class="chapter-number" id="_idParaDest-220"><a id="_idTextAnchor426"/><span class="koboSpan" id="kobo.1.1">10</span></h1>
<h1 id="_idParaDest-221"><a id="_idTextAnchor427"/><span class="koboSpan" id="kobo.2.1">State Management with Pinia</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous chapter, you were introduced to the idea of a </span><em class="italic"><span class="koboSpan" id="kobo.4.1">state</span></em><span class="koboSpan" id="kobo.5.1"> and how it can be used to synchronize data between multiple components in a Vue application. </span><span class="koboSpan" id="kobo.5.2">You first saw an example of handling states via event broadcasting and then improved upon that by including a simple </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">state library.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">In this chapter, you’ll learn about the Pinia project and understand how it can help manage complex state interactions in your Vue applications. </span><span class="koboSpan" id="kobo.7.2">You’ll learn how to install the library and start using it </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">right away.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.11.1">What </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">Pinia is</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.13.1">Installing Pinia</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Using Pinia to create </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">a store</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Adding and using getters in your </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">Pinia store</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Working with </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">Pinia actions</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Debugging Pinia </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">in Devtools</span></span></li>
</ul>
<h1 id="_idParaDest-222"><a id="_idTextAnchor428"/><span class="koboSpan" id="kobo.22.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.23.1">There are no technical requirements for this chapter outside of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.24.1">git</span></strong><span class="koboSpan" id="kobo.25.1"> CLI that you will have already used by now. </span><span class="koboSpan" id="kobo.25.2">You can find this chapter’s source </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">here: </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10"><span class="No-Break"><span class="koboSpan" id="kobo.27.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10</span></span></a></p>
<h1 id="_idParaDest-223"><a id="_idTextAnchor429"/><span class="koboSpan" id="kobo.28.1">What Pinia is</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.29.1">Pinia</span></strong><span class="koboSpan" id="kobo.30.1"> (</span><a href="https://pinia.vuejs.org"><span class="koboSpan" id="kobo.31.1">https://pinia.vuejs.org</span></a><span class="koboSpan" id="kobo.32.1">) is a state </span><a id="_idIndexMarker1119"/><span class="koboSpan" id="kobo.33.1">management library for Vue.js applications. </span><span class="koboSpan" id="kobo.33.2">As </span><a id="_idIndexMarker1120"/><span class="koboSpan" id="kobo.34.1">you saw in </span><a href="B18645_09.xhtml#_idTextAnchor407"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.35.1">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.36.1">, </span><em class="italic"><span class="koboSpan" id="kobo.37.1">The State of Vue State Management</span></em><span class="koboSpan" id="kobo.38.1">, handling data that must be synchronized between multiple different components requires some form of management. </span><span class="koboSpan" id="kobo.38.2">Pinia helps with this by providing a simple method of setting up a central </span><em class="italic"><span class="koboSpan" id="kobo.39.1">store</span></em><span class="koboSpan" id="kobo.40.1"> that contains your application’s state. </span><span class="koboSpan" id="kobo.40.2">Your components make use of this store to ensure they’re all using the </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">same information.</span></span></p>
<p><span class="koboSpan" id="kobo.42.1">Pinia began as an experiment for Vue 3 but evolved to support Vue 2 as well. </span><span class="koboSpan" id="kobo.42.2">Pinia is now the </span><em class="italic"><span class="koboSpan" id="kobo.43.1">recommended</span></em><span class="koboSpan" id="kobo.44.1"> state management library for Vue applications, with the venerable Vuex (</span><a href="https://vuex.vuejs.org/"><span class="koboSpan" id="kobo.45.1">https://vuex.vuejs.org/</span></a><span class="koboSpan" id="kobo.46.1">) now </span><a id="_idIndexMarker1121"/><span class="koboSpan" id="kobo.47.1">in </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">maintenance mode:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer284">
<span class="koboSpan" id="kobo.49.1"><img alt="Figure 10.1 – The Pinia website" src="image/Figure_10.01_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.50.1">Figure 10.1 – The Pinia website</span></p>
<p><span class="koboSpan" id="kobo.51.1">Along with state management, using Pinia also provides other benefits, including </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.53.1">Devtools support via the Vue extension. </span><span class="koboSpan" id="kobo.53.2">This extension supports Chrome, Edge, and Firefox. </span><span class="koboSpan" id="kobo.53.3">There’s also a standalone Electron </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">desktop application.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.55.1">Hot Module Replacement</span></strong><span class="koboSpan" id="kobo.56.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.57.1">HMR</span></strong><span class="koboSpan" id="kobo.58.1">), which</span><a id="_idIndexMarker1122"/><span class="koboSpan" id="kobo.59.1"> lets you edit your store and update it in your development environment without needing to reload the entire </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">web page.</span></span></li>
<li><span class="koboSpan" id="kobo.61.1">Optional </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">TypeScript support.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.63.1">Server-Side Rendering</span></strong><span class="koboSpan" id="kobo.64.1"> (</span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.65.1">SSR</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">) support.</span></span></li>
<li><span class="koboSpan" id="kobo.67.1">Plugins </span><a id="_idIndexMarker1123"/><span class="koboSpan" id="kobo.68.1">to extend </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">Pinia’s functionality.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.70.1">In general, there’s a few core aspects of Pinia you need to be aware of. </span><span class="koboSpan" id="kobo.70.2">Developers with previous experience with Vuex will </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">recognize these.</span></span></p>
<p><span class="koboSpan" id="kobo.72.1">At a high level, a </span><strong class="bold"><span class="koboSpan" id="kobo.73.1">store</span></strong><span class="koboSpan" id="kobo.74.1"> is the </span><a id="_idIndexMarker1124"/><span class="koboSpan" id="kobo.75.1">combination of the data and logic that needs to be shared throughout an application. </span><span class="koboSpan" id="kobo.75.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.76.1">state</span></strong><span class="koboSpan" id="kobo.77.1"> of</span><a id="_idIndexMarker1125"/><span class="koboSpan" id="kobo.78.1"> a Pinia application is the data of your application’s store. </span><span class="koboSpan" id="kobo.78.2">Pinia provides APIs to both read and write to this data. </span><strong class="bold"><span class="koboSpan" id="kobo.79.1">Getters</span></strong><span class="koboSpan" id="kobo.80.1"> act </span><a id="_idIndexMarker1126"/><span class="koboSpan" id="kobo.81.1">much like virtual properties in Vue applications. </span><strong class="bold"><span class="koboSpan" id="kobo.82.1">Actions</span></strong><span class="koboSpan" id="kobo.83.1"> let </span><a id="_idIndexMarker1127"/><span class="koboSpan" id="kobo.84.1">you define custom logic for a store – for example, using </span><a id="_idIndexMarker1128"/><span class="koboSpan" id="kobo.85.1">an AJAX call to validate changes to data before they are committed. </span><span class="koboSpan" id="kobo.85.2">While Pinia has more to it, these three core concepts will be our focus in this chapter and the meat of any use </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">of Pinia.</span></span></p>
<h1 id="_idParaDest-224"><a id="_idTextAnchor430"/><span class="koboSpan" id="kobo.87.1">Installing Pinia</span></h1>
<p><span class="koboSpan" id="kobo.88.1">To use Pinia in a</span><a id="_idIndexMarker1129"/><span class="koboSpan" id="kobo.89.1"> Vue application, you’ve got two ways to add it. </span><span class="koboSpan" id="kobo.89.2">First, when creating a new Vue application via the standard method (</span><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">npm init vue@latest</span></strong><span class="koboSpan" id="kobo.91.1">), one of the questions asked will be whether you wish to include Pinia. </span><span class="koboSpan" id="kobo.91.2">Simply say </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.92.1">Yes</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.93.1"> here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer285">
<span class="koboSpan" id="kobo.94.1"><img alt="Figure 10.2 – Indicating whether you wish to add Pinia to a new Vue project" src="image/Figure_10.02_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.95.1">Figure 10.2 – Indicating whether you wish to add Pinia to a new Vue project</span></p>
<p><span class="koboSpan" id="kobo.96.1">If you have an existing Vue 3 application, adding support is nearly as easy. </span><span class="koboSpan" id="kobo.96.2">First, in the project, add Pinia via </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">npm</span></strong><span class="koboSpan" id="kobo.98.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">npm install pinia</span></strong><span class="koboSpan" id="kobo.100.1">. </span><span class="koboSpan" id="kobo.100.2">Next, you need to include Pinia in the </span><a id="_idIndexMarker1130"/><span class="koboSpan" id="kobo.101.1">application. </span><span class="koboSpan" id="kobo.101.2">Your </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">main.js</span></strong><span class="koboSpan" id="kobo.103.1"> file (located in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">/src</span></strong><span class="koboSpan" id="kobo.105.1"> directory) will look </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.107.1">
import { createApp } from 'vue'
import App from './App.vue'
createApp(App).mount('#app')</span></pre>
<p><span class="koboSpan" id="kobo.108.1">Begin by </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">importing Pinia:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.110.1">
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'
createApp(App).mount('#app')</span></pre>
<p><span class="koboSpan" id="kobo.111.1">Then, modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">createApp</span></strong><span class="koboSpan" id="kobo.113.1"> line. </span><span class="koboSpan" id="kobo.113.2">We break it out into a few lines so that we can </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">inject Pinia:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.115.1">
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'
const app = createApp(App)
app.use(createPinia())
app.mount('#app')</span></pre>
<p><span class="koboSpan" id="kobo.116.1">Now that we’ve been introduced to the basic aspects of Pinia and how to include it in a Vue application, let’s </span><a id="_idIndexMarker1131"/><span class="koboSpan" id="kobo.117.1">start working on our </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">first example.</span></span></p>
<h1 id="_idParaDest-225"><a id="_idTextAnchor431"/><span class="koboSpan" id="kobo.119.1">Using Pinia to create a store</span></h1>
<p><span class="koboSpan" id="kobo.120.1">Let’s start using</span><a id="_idIndexMarker1132"/><span class="koboSpan" id="kobo.121.1"> Pinia by demonstrating how to define a store within it and then use the state data in </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">an application:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.123.1">Create a new Vue application and enable Pinia, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.124.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.125.1">.2</span></em><span class="koboSpan" id="kobo.126.1">. </span><span class="koboSpan" id="kobo.126.2">This will give you a Vue application with a store already created. </span><span class="koboSpan" id="kobo.126.3">You will find it </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">under </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.128.1">src/stores/counter.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.130.1">
import { defineStore } from 'pinia'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.131.1">
export const useCounterStore = defineStore({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.132.1">
  id: 'counter',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.133.1">
  state: () =&gt; ({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.134.1">
    counter: 1</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.135.1">
  }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.136.1">
  getters: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.137.1">
    doubleCount: (state) =&gt; state.counter * 2</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.138.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.139.1">
  actions: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.140.1">
    increment() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.141.1">
      this.counter++</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.142.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.143.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.144.1">
})</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.145.1">This simple Pinia file demonstrates all three of the major aspects we defined previously – the state, getters, and actions. </span><span class="koboSpan" id="kobo.145.2">In this section, we’re only concerned with the state. </span><span class="koboSpan" id="kobo.145.3">When installed, Pinia defined one piece of data, </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">counter</span></strong><span class="koboSpan" id="kobo.147.1">, with a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">1</span></strong><span class="koboSpan" id="kobo.149.1">. </span><span class="koboSpan" id="kobo.149.2">How can we access this in </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">our application?</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.151.1">Switch to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">App.vue</span></strong><span class="koboSpan" id="kobo.153.1"> file and remove all the contents. </span><span class="koboSpan" id="kobo.153.2">We’re going to greatly simplify it. </span><span class="koboSpan" id="kobo.153.3">First, let’s</span><a id="_idIndexMarker1133"/><span class="koboSpan" id="kobo.154.1"> define the layout to simply output the value </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.156.1">counter</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.158.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.159.1">
  &lt;p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.160.1">
  Counter: {{ store.counter }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.161.1">
  &lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.162.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.163.1">Next, we need to make our store available to the component. </span><span class="koboSpan" id="kobo.163.2">We’ll define this in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">script </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">setup</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.166.1"> block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.167.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.168.1">
import { useCounterStore } from './stores/counter'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.169.1">
const store = useCounterStore()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.170.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.171.1">We begin by importing the store. </span><span class="koboSpan" id="kobo.171.2">Once imported, we create an instance of the store so that it can be used in our template. </span><span class="koboSpan" id="kobo.171.3">While not terribly exciting, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.172.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.173.1">.3</span></em><span class="koboSpan" id="kobo.174.1"> demonstrates how this looks in </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">the browser:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer286">
<span class="koboSpan" id="kobo.176.1"><img alt="" src="image/Figure_10.03_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.177.1">Figure 10.3 – Our store value correctly displayed in the App component</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.178.1">To get any benefits from a shared state at all, we need at least one more component. </span><span class="koboSpan" id="kobo.178.2">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">components</span></strong><span class="koboSpan" id="kobo.180.1"> folder, create a new file, </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">EditCounter.vue</span></strong><span class="koboSpan" id="kobo.182.1">, and use the following short snippet </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">of code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.184.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.185.1">
import { useCounterStore } from '@/stores/counter';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.186.1">
const store = useCounterStore()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.187.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.188.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.189.1">
  &lt;h2&gt;Edit Counter&lt;/h2&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.190.1">
  &lt;input type="text" v-model="store.counter"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.191.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.192.1">As with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">App.vue</span></strong><span class="koboSpan" id="kobo.194.1"> component, we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">setup</span></strong><span class="koboSpan" id="kobo.196.1"> block to import the store and create an</span><a id="_idIndexMarker1134"/><span class="koboSpan" id="kobo.197.1"> instance. </span><span class="koboSpan" id="kobo.197.2">This time, we use a simple edit field and v-model to bind its value to the store’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.198.1">counter</span></strong><span class="koboSpan" id="kobo.199.1"> value. </span><span class="koboSpan" id="kobo.199.2">Return to </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">App.vue</span></strong><span class="koboSpan" id="kobo.201.1"> and edit it to import and use the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">EditCounter</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.203.1"> component:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.204.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.205.1">
import EditCounter from './components/EditCounter.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.206.1">
import { useCounterStore } from './stores/counter'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.207.1">
const store = useCounterStore();</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.208.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.209.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.210.1">
  &lt;p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.211.1">
  Counter: {{ store.counter }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.212.1">
  &lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.213.1">
  &lt;EditCounter&gt;&lt;/EditCounter&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.214.1">
&lt;/template&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.215.1">Now, we’re getting somewhere. </span><span class="koboSpan" id="kobo.215.2">We’ve got one component, </span><strong class="source-inline"><span class="koboSpan" id="kobo.216.1">App</span></strong><span class="koboSpan" id="kobo.217.1">, simply rendering the shared state, and another, </span><strong class="source-inline"><span class="koboSpan" id="kobo.218.1">EditCounter</span></strong><span class="koboSpan" id="kobo.219.1">, which also displays it but in an editable fashion. </span><span class="koboSpan" id="kobo.219.2">Now, you can edit the value and see </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">it update:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer287">
<span class="koboSpan" id="kobo.221.1"><img alt="Figure 10.4 – Multiple components using the same shared state" src="image/Figure_10.04_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.222.1">Figure 10.4 – Multiple components using the same shared state</span></p>
<p><span class="koboSpan" id="kobo.223.1">Now that we’ve seen </span><a id="_idIndexMarker1135"/><span class="koboSpan" id="kobo.224.1">how to install and initialize Pinia, and use a simple store, we can create a simple demonstration of it </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">in action.</span></span></p>
<h2 id="_idParaDest-226"><a id="_idTextAnchor432"/><span class="koboSpan" id="kobo.226.1">Exercise 10.01 – building a Color Preview app with a shared state</span></h2>
<p><span class="koboSpan" id="kobo.227.1">Now that we’ve</span><a id="_idIndexMarker1136"/><span class="koboSpan" id="kobo.228.1"> seen a</span><a id="_idIndexMarker1137"/><span class="koboSpan" id="kobo.229.1"> simple </span><a id="_idIndexMarker1138"/><span class="koboSpan" id="kobo.230.1">example of using a shared state with Pinia, let’s build a simple application that will use it. </span><span class="koboSpan" id="kobo.230.2">Our application will let you use sliders to specify the red, green, and blue values of a color. </span><span class="koboSpan" id="kobo.230.3">One component will be used for the editor and another component will provide </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">a preview.</span></span></p>
<p><span class="koboSpan" id="kobo.232.1">The complete code for this exercise can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.233.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Exercise10.01"><span class="No-Break"><span class="koboSpan" id="kobo.234.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Exercise10.01</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.235.1">:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.236.1">To begin, create a new Vue.js application and ensure Pinia support is selected. </span><span class="koboSpan" id="kobo.236.2">As prompted, change into the directory, run </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">npm</span></strong><span class="koboSpan" id="kobo.238.1"> install, and then </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">npm run dev</span></strong><span class="koboSpan" id="kobo.240.1"> to start the application running. </span><span class="koboSpan" id="kobo.240.2">Clear the contents of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">App.vue</span></strong><span class="koboSpan" id="kobo.242.1"> component and </span><a id="_idIndexMarker1139"/><span class="koboSpan" id="kobo.243.1">enter </span><a id="_idIndexMarker1140"/><span class="No-Break"><span class="koboSpan" id="kobo.244.1">the</span></span><span class="No-Break"><a id="_idIndexMarker1141"/></span><span class="No-Break"><span class="koboSpan" id="kobo.245.1"> following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.246.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.247.1">
import RGBEdit from './components/RGBEdit.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.248.1">
import PreviewColor from './components/PreviewColor.vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.249.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.250.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.251.1">
&lt;h1&gt;Color Editor&lt;/h1&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.252.1">
&lt;p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.253.1">
Use the sliders below to set the red, green, and blue values for a color.</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.254.1">
&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.255.1">
&lt;div class="twocol"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.256.1">
  &lt;RGBEdit&gt;&lt;/RGBEdit&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.257.1">
  &lt;PreviewColor&gt;&lt;/PreviewColor&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.258.1">
&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.259.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.260.1">
&lt;style&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.261.1">
.twocol {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.262.1">
  display: grid;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.263.1">
  grid-template-columns: 1fr 1fr;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.264.1">
  column-gap: 10px;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.265.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.266.1">
&lt;/style&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.267.1">We begin by importing two components (which we will define next). </span><span class="koboSpan" id="kobo.267.2">The template portion includes some simple explanatory text and then renders the two components. </span><span class="koboSpan" id="kobo.267.3">Finally, a bit of CSS is used to display these components in a grid. </span><span class="koboSpan" id="kobo.267.4">Note that </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">App.vue</span></strong><span class="koboSpan" id="kobo.269.1"> doesn’t make use of the store at all, but our two </span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">components will.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.271.1">Now, let’s define the child components. </span><span class="koboSpan" id="kobo.271.2">We’re going to create them as essentially empty so that</span><a id="_idIndexMarker1142"/><span class="koboSpan" id="kobo.272.1"> we </span><a id="_idIndexMarker1143"/><span class="koboSpan" id="kobo.273.1">can </span><a id="_idIndexMarker1144"/><span class="koboSpan" id="kobo.274.1">simply test that our application is working. </span><span class="koboSpan" id="kobo.274.2">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">src/components</span></strong><span class="koboSpan" id="kobo.276.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">create </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">RGBEdit.vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.280.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.281.1">
&lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.282.1">
  &lt;h2&gt;Edit RGB&lt;/h2&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.283.1">
&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.284.1">
&lt;/template&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.285.1">Next, </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">create </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.287.1">PreviewColor.vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.289.1">
&lt;template&gt;
&lt;div&gt;
  &lt;h2&gt;Preview Color&lt;/h2&gt;
&lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.290.1">Note that you can remove the existing components the Vue initialization script created. </span><span class="koboSpan" id="kobo.290.2">We won’t need those. </span><span class="koboSpan" id="kobo.290.3">At this point, you should see the following in </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">your browser:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer288">
<span class="koboSpan" id="kobo.292.1"><img alt="Figure 10.5 – The color application starting to come together" src="image/Figure_10.05_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.293.1">Figure 10.5 – The color application starting to come together</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.294.1">Now, let’s define </span><a id="_idIndexMarker1145"/><span class="koboSpan" id="kobo.295.1">our sites </span><a id="_idIndexMarker1146"/><span class="koboSpan" id="kobo.296.1">store. </span><span class="koboSpan" id="kobo.296.2">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.297.1">src/stores</span></strong><span class="koboSpan" id="kobo.298.1">, make</span><a id="_idIndexMarker1147"/><span class="koboSpan" id="kobo.299.1"> a new file (and feel free to remove the default one) </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">color.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.303.1">
import { defineStore } from 'pinia'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.304.1">
export const useColorStore = defineStore({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.305.1">
  id: 'color',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.306.1">
  state: () =&gt; ({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.307.1">
    red: 0,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.308.1">
    blue: 0,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.309.1">
    green: 0</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.310.1">
  })</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.311.1">
})</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.312.1">Our store has three state values, each representing part of a color as defined in </span><strong class="bold"><span class="koboSpan" id="kobo.313.1">Red, Green, and Blue</span></strong><span class="koboSpan" id="kobo.314.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.315.1">RGB</span></strong><span class="koboSpan" id="kobo.316.1">). </span><span class="koboSpan" id="kobo.316.2">All three colors begin with a value </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">.</span></span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.320.1">Next, let’s flesh out our </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">RGBEdit.vue</span></strong><span class="koboSpan" id="kobo.322.1">. </span><span class="koboSpan" id="kobo.322.2">First, we’ll import and create an instance of </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">the store:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.324.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.325.1">
import { useColorStore } from '@/stores/color';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.326.1">
const store = useColorStore()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.327.1">
&lt;/script&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.328.1">Next, we’ll edit the template portion to add three </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">range</span></strong><span class="koboSpan" id="kobo.330.1">-style editing fields. </span><span class="koboSpan" id="kobo.330.2">This will make it much easier </span><a id="_idIndexMarker1148"/><span class="koboSpan" id="kobo.331.1">for</span><a id="_idIndexMarker1149"/><span class="koboSpan" id="kobo.332.1"> the user to quickly </span><a id="_idIndexMarker1150"/><span class="No-Break"><span class="koboSpan" id="kobo.333.1">preview colors:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.334.1">
&lt;template&gt;
&lt;div&gt;
  &lt;h2&gt;Edit RGB&lt;/h2&gt;
  &lt;label for="red"&gt;Red&lt;/label&gt; &lt;input type="range"
    min="0" max="255" id="red" v-model="store.red"&gt;
      &lt;br/&gt;
  &lt;label for="green"&gt;Green&lt;/label&gt;
    &lt;input type="range" min="0" max="255" id="green"
      v-model="store.green"&gt;&lt;br/&gt;
  &lt;label for="blue"&gt;Blue&lt;/label&gt;
    &lt;input type="range" min="0" max="255" id="blue"
      v-model="store.blue"&gt;&lt;br/&gt;
&lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.335.1">Each </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">range</span></strong><span class="koboSpan" id="kobo.337.1"> control has a min of </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">0</span></strong><span class="koboSpan" id="kobo.339.1"> and a max of </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">255</span></strong><span class="koboSpan" id="kobo.341.1">, which represents the valid range for colors in web applications. </span><span class="koboSpan" id="kobo.341.2">Next, we will add a bit of styling to control the size of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">label</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.343.1"> elements:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.344.1">
&lt;style&gt;
label {
      display: inline-block;
      width: 50px;
}
&lt;/style&gt;</span></pre>
<p><span class="koboSpan" id="kobo.345.1">Save this and </span><a id="_idIndexMarker1151"/><span class="koboSpan" id="kobo.346.1">now </span><a id="_idIndexMarker1152"/><span class="koboSpan" id="kobo.347.1">confirm in the browser</span><a id="_idIndexMarker1153"/><span class="koboSpan" id="kobo.348.1"> that you have editing controls for </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">the color:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer289">
<span class="koboSpan" id="kobo.350.1"><img alt="Figure 10.6 – Our application now has controls to edit the color" src="image/Figure_10.06_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.351.1">Figure 10.6 – Our application now has controls to edit the color</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.352.1">At this point, we’ve got an editing component, but we need to finish the </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">preview</span></strong><span class="koboSpan" id="kobo.354.1"> component. </span><span class="koboSpan" id="kobo.354.2">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">PreviewColor.vue</span></strong><span class="koboSpan" id="kobo.356.1"> and first import </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">the store:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.358.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.359.1">
import { useColorStore } from '@/stores/color';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.360.1">
const store = useColorStore()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.361.1">
&lt;/script&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.362.1">In order to render a preview of the color, we need to convert the numerical colors to hex, which is how colors are defined on the web. </span><span class="koboSpan" id="kobo.362.2">Given that we have three numbers in our store, let’s say </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">100</span></strong><span class="koboSpan" id="kobo.364.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">50</span></strong><span class="koboSpan" id="kobo.366.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">100</span></strong><span class="koboSpan" id="kobo.368.1"> for red, green, and blue respectively, we need to convert them </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">into </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">#64324</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.372.1">We can write a computed property to handle this translation for us. </span><span class="koboSpan" id="kobo.372.2">Edit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">script</span></strong> <a id="_idIndexMarker1154"/><span class="koboSpan" id="kobo.374.1">portion to</span><a id="_idIndexMarker1155"/><span class="koboSpan" id="kobo.375.1"> include</span><a id="_idIndexMarker1156"/><span class="koboSpan" id="kobo.376.1"> computed support and define the following </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">computed</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.378.1"> property:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.379.1">
&lt;script setup&gt;
import { computed } from 'vue'
import { useColorStore } from '@/stores/color';
const store = useColorStore()
const previewRGB = computed(() =&gt; {
  return {
    backgroundColor: "#" + Number(store.red)
    .toString(16).padStart(2, '0') +
    Number(store.green).toString(16)
    .padStart(2, '0') + Number(store.blue)
    .toString(16).padStart(2, '0')
  }
});
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.380.1">Moving on to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">template</span></strong><span class="koboSpan" id="kobo.382.1"> section, let’s use this in </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">the display:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.384.1">
&lt;template&gt;
&lt;div&gt;
  &lt;h2&gt;Preview Color&lt;/h2&gt;
  &lt;div class="previewColor" :style="previewRGB"&gt;&lt;/div&gt;
  &lt;p&gt;
  CSS color string: {{ previewRGB.backgroundColor }}
  &lt;/p&gt;
&lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.385.1">Note that the </span><a id="_idIndexMarker1157"/><span class="koboSpan" id="kobo.386.1">empty </span><strong class="source-inline"><span class="koboSpan" id="kobo.387.1">div</span></strong><span class="koboSpan" id="kobo.388.1"> is </span><a id="_idIndexMarker1158"/><span class="koboSpan" id="kobo.389.1">using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">computed</span></strong><span class="koboSpan" id="kobo.391.1"> property to dynamically update the background color of the element. </span><span class="koboSpan" id="kobo.391.2">One</span><a id="_idIndexMarker1159"/><span class="koboSpan" id="kobo.392.1"> last thing to add is a basic size for that </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.393.1">div</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.394.1"> element:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.395.1">
&lt;style&gt;
.previewColor {
  width: 250px;
  height: 250px;
}
&lt;/style&gt;</span></pre>
<ol>
<li value="6"><span class="koboSpan" id="kobo.396.1">For the final step, simply play with the application and find a color that </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">looks amazing!</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer290">
<span class="koboSpan" id="kobo.398.1"><img alt="Figure 10.7 – The final version of the color application" src="image/Figure_10.07_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.399.1">Figure 10.7 – The final version of the color application</span></p>
<p><span class="koboSpan" id="kobo.400.1">In the next section, we’ll introduce </span><a id="_idIndexMarker1160"/><span class="koboSpan" id="kobo.401.1">getters</span><a id="_idIndexMarker1161"/><span class="koboSpan" id="kobo.402.1"> in Pinia and demonstrate how to </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">use them.</span></span></p>
<h1 id="_idParaDest-227"><a id="_idTextAnchor433"/><span class="koboSpan" id="kobo.404.1">Adding and using getters in your Pinia store</span></h1>
<p><span class="koboSpan" id="kobo.405.1">As stated </span><a id="_idIndexMarker1162"/><span class="koboSpan" id="kobo.406.1">earlier, getters </span><a id="_idIndexMarker1163"/><span class="koboSpan" id="kobo.407.1">in Pinia act just like computed properties. </span><span class="koboSpan" id="kobo.407.2">They allow you to request a simple value that’s generated by custom logic written in </span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">a function.</span></span></p>
<p><span class="koboSpan" id="kobo.409.1">If you go back to the original Pinia store created by default, you’ll see it had a </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">getter defined:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.411.1">
import { defineStore } from 'pinia'
export const useCounterStore = defineStore({
  id: 'counter',
  state: () =&gt; ({
    counter: 0
  }),
  getters: {
    doubleCount: (state) =&gt; state.counter * 2
  },
  // rest of file...
</span><span class="koboSpan" id="kobo.411.2">})</span></pre>
<p><span class="koboSpan" id="kobo.412.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">doubleCount</span></strong><span class="koboSpan" id="kobo.414.1"> getter simply takes the current value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">counter</span></strong><span class="koboSpan" id="kobo.416.1"> and returns the double of it. </span><span class="koboSpan" id="kobo.416.2">As demonstrated, getters are automatically passed the current state as an argument, which can then be used in whatever logic makes sense in your particular </span><span class="No-Break"><span class="koboSpan" id="kobo.417.1">getter function.</span></span></p>
<p><span class="koboSpan" id="kobo.418.1">Just like regular values defined in the state, getters can be addressed in your components, as </span><a id="_idIndexMarker1164"/><span class="No-Break"><span class="koboSpan" id="kobo.419.1">shown </span></span><span class="No-Break"><a id="_idIndexMarker1165"/></span><span class="No-Break"><span class="koboSpan" id="kobo.420.1">here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.421.1">
&lt;template&gt;
  &lt;p&gt;
  Counter: {{ store.counter }}
  &lt;/p&gt;
  &lt;p&gt;
  Double Count: {{ store.doubleCount }}
  &lt;/p&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.422.1">Let’s build upon the last exercise and give this feature </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">a try.</span></span></p>
<h2 id="_idParaDest-228"><a id="_idTextAnchor434"/><span class="koboSpan" id="kobo.424.1">Exercise 10.02 – improving the Color Preview app with getters</span></h2>
<p><span class="koboSpan" id="kobo.425.1">In the previous</span><a id="_idIndexMarker1166"/><span class="koboSpan" id="kobo.426.1"> exercise, you used </span><a id="_idIndexMarker1167"/><span class="koboSpan" id="kobo.427.1">Pinia to store the state of a color value comprising three components – red, green, and blue. </span><span class="koboSpan" id="kobo.427.2">In the application, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">PreviewColor</span></strong><span class="koboSpan" id="kobo.429.1"> component displayed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">hex</span></strong><span class="koboSpan" id="kobo.431.1"> value of the combined color. </span><span class="koboSpan" id="kobo.431.2">In this exercise, that custom logic will be removed from the component and stored within a getter in </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">the store.</span></span></p>
<p><span class="koboSpan" id="kobo.433.1">The complete code for this exercise can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Exercise10.02"><span class="No-Break"><span class="koboSpan" id="kobo.435.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Exercise10.02</span></span></a></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.436.1">In the store, </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">src/stores/color.js</span></strong><span class="koboSpan" id="kobo.438.1">, add a new section for </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">the getter:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.440.1">
import { defineStore } from 'pinia'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.441.1">
export const useColorStore = defineStore({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.442.1">
  id: 'color',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.443.1">
  state: () =&gt; ({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.444.1">
    red: 0,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.445.1">
    blue: 0,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.446.1">
    green: 0</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.447.1">
  }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.448.1">
  getters: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.449.1">
    hex: (state) =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.450.1">
      return  "#" + Number(state.red).toString(16)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.451.1">
        .padStart(2, '0') +</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.452.1">
      Number(state.green).toString(16)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.453.1">
        .padStart(2, '0') +</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.454.1">
      Number(state.blue).toString(16)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.455.1">
        .padStart(2, '0');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.456.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.457.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.458.1">
})</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.459.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">hex</span></strong><span class="koboSpan" id="kobo.461.1"> getter returns </span><a id="_idIndexMarker1168"/><span class="koboSpan" id="kobo.462.1">a string, starting</span><a id="_idIndexMarker1169"/><span class="koboSpan" id="kobo.463.1"> with the pound symbol and followed by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">hex</span></strong><span class="koboSpan" id="kobo.465.1"> values of the RGB numbers. </span><span class="koboSpan" id="kobo.465.2">Given that all values are </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">255</span></strong><span class="koboSpan" id="kobo.467.1"> (the color white), the result would </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">be </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">#FFFFFF</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.471.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">PreviewColor.vue</span></strong><span class="koboSpan" id="kobo.473.1">, we need to update the code to make use of the getter. </span><span class="koboSpan" id="kobo.473.2">Remove all the custom code used to translate the various values and simply use </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">the getter:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.475.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.476.1">
import { computed } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.477.1">
import { useColorStore } from '@/stores/color';</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.478.1">
const store = useColorStore()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.479.1">
const previewRGB = computed(() =&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.480.1">
  return {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.481.1">
    backgroundColor: store.hex</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.482.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.483.1">
});</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.484.1">
&lt;/script&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.485.1">
// Rest of component, unchanged</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.486.1">As you can see, the </span><a id="_idIndexMarker1170"/><span class="koboSpan" id="kobo.487.1">component’s </span><a id="_idIndexMarker1171"/><span class="koboSpan" id="kobo.488.1">code is much simpler now that the logic has moved into the Pinia store, and we get to reuse that logic elsewhere if we expand upon </span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">the application.</span></span></p>
<h2 id="_idParaDest-229"><a id="_idTextAnchor435"/><span class="koboSpan" id="kobo.490.1">Additional getter features</span></h2>
<p><span class="koboSpan" id="kobo.491.1">Before moving on </span><a id="_idIndexMarker1172"/><span class="koboSpan" id="kobo.492.1">to actions, let’s quickly discuss two additional things you can do with getters. </span><span class="koboSpan" id="kobo.492.2">The first is creating a getter that makes use of another getter. </span><span class="koboSpan" id="kobo.492.3">You can do this with arrow functions by simply using </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">a state:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.494.1">
doubleCount: (state) =&gt; state.counter * 2,
superDuperState: (state) =&gt; state.doubleCount * 999,</span></pre>
<p><span class="koboSpan" id="kobo.495.1">If you are using regular function syntax, access the store via </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">this</span></strong><span class="koboSpan" id="kobo.497.1"> or via a </span><span class="No-Break"><span class="koboSpan" id="kobo.498.1">passed-in argument:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.499.1">
doubleCount: (state) =&gt; state.counter * 2,
superDuperState: (state) =&gt; state.doubleCount * 999,
doubleDoubleCount() {
  return this.doubleCount * 2;
},</span></pre>
<p><span class="koboSpan" id="kobo.500.1">Finally, while getters don’t allow for additional arguments, you can create a getter that returns a function itself, not a regular value, such as </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.502.1">
countPlusN: (state) =&gt; x =&gt; Number(state.counter) + Number(x)</span></pre>
<p><span class="koboSpan" id="kobo.503.1">To use this within a component, you would pass a value to </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">countPlusN</span></strong><span class="koboSpan" id="kobo.505.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.507.1">
doublePlusN: {{ store.countPlusN(9) }}</span></pre>
<p><span class="koboSpan" id="kobo.508.1">Note that getters defined in this way will not have any caching applied </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">to them.</span></span></p>
<p><span class="koboSpan" id="kobo.510.1">Now that we’ve </span><a id="_idIndexMarker1173"/><span class="koboSpan" id="kobo.511.1">enhanced our store with getters, let’s see how actions further add to the flexibility </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">of Pinia.</span></span></p>
<h1 id="_idParaDest-230"><a id="_idTextAnchor436"/><span class="koboSpan" id="kobo.513.1">Working with Pinia actions</span></h1>
<p><span class="koboSpan" id="kobo.514.1">Actions are the Pinia </span><a id="_idIndexMarker1174"/><span class="koboSpan" id="kobo.515.1">equivalent of component methods. </span><span class="koboSpan" id="kobo.515.2">They let you define custom logic for a store and can be asynchronous as well. </span><span class="koboSpan" id="kobo.515.3">This is useful for times when server-side logic needs to be called to validate a change to the state. </span><span class="koboSpan" id="kobo.515.4">Actions are defined with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">actions</span></strong><span class="koboSpan" id="kobo.517.1"> block of a Pinia object, and you can see an example in the default store created </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">by Pinia:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.519.1">
import { defineStore } from 'pinia'
export const useCounterStore = defineStore({
  id: 'counter',
  state: () =&gt; ({
    counter: 0
  }),
  // rest of store...
</span><span class="koboSpan" id="kobo.519.2">  actions: {
    increment() {
      this.counter++
    }
  }
})</span></pre>
<p><span class="koboSpan" id="kobo.520.1">In this example, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.521.1">increment</span></strong><span class="koboSpan" id="kobo.522.1"> action simply takes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">counter</span></strong><span class="koboSpan" id="kobo.524.1"> value and adds one to it. </span><span class="koboSpan" id="kobo.524.2">Actions access state values by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">this</span></strong><span class="koboSpan" id="kobo.526.1"> scope and, as stated previously, can be asynchronous as well. </span><span class="koboSpan" id="kobo.526.2">An example of an action with a bit of logic could look </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.528.1">
decrement() {
  if(this.counter &gt; 0) this.counter--
}</span></pre>
<p><span class="koboSpan" id="kobo.529.1">This action will </span><a id="_idIndexMarker1175"/><span class="koboSpan" id="kobo.530.1">apply a bit of validation before decreasing the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">counter</span></strong><span class="koboSpan" id="kobo.532.1"> and ensure that it never goes </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">below zero.</span></span></p>
<p><span class="koboSpan" id="kobo.534.1">Let’s improve on our color editor by adding a </span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">few actions.</span></span></p>
<h2 id="_idParaDest-231"><a id="_idTextAnchor437"/><span class="koboSpan" id="kobo.536.1">Exercise 10.03 – adding lightening and darkening features to the Color Preview app</span></h2>
<p><span class="koboSpan" id="kobo.537.1">The last</span><a id="_idIndexMarker1176"/><span class="koboSpan" id="kobo.538.1"> exercise </span><a id="_idIndexMarker1177"/><span class="koboSpan" id="kobo.539.1">had you improve the Color Preview application by moving the logic of generating hex strings to a getter with the Pinia store. </span><span class="koboSpan" id="kobo.539.2">In this exercise, you’re going to add two new features – buttons that either lighten and darken the </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">current color.</span></span></p>
<p><span class="koboSpan" id="kobo.541.1">The complete code for this exercise can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Exercise10.03"><span class="No-Break"><span class="koboSpan" id="kobo.543.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Exercise10.03</span></span></a></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.544.1">We’ll begin by using a third-party library to handle our color logic. </span><span class="koboSpan" id="kobo.544.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">pSBC</span></strong><span class="koboSpan" id="kobo.546.1"> library was developed by a user helping out on Stack Overflow. </span><span class="koboSpan" id="kobo.546.2">The author took his Stack Overflow answer and turned it into a mini library that you can use </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">for free.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.548.1">This code is documented on his GitHub at </span><a href="https://github.com/PimpTrizkit/PJs/wiki/12.-Shade,-Blend-and-Convert-a-Web-Color-(pSBC.js)"><span class="koboSpan" id="kobo.549.1">https://github.com/PimpTrizkit/PJs/wiki/12.-Shade,-Blend-and-Convert-a-Web-Color-(pSBC.js)</span></a><span class="koboSpan" id="kobo.550.1">. </span><span class="koboSpan" id="kobo.550.2">If you scroll down to the </span><strong class="bold"><span class="koboSpan" id="kobo.551.1">Code</span></strong><span class="koboSpan" id="kobo.552.1"> section, you can copy and paste the entire library and insert it at the end of </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">src/stores/color.js</span></strong><span class="koboSpan" id="kobo.554.1">. </span><span class="koboSpan" id="kobo.554.2">Once copied into the store, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">pSBC</span></strong><span class="koboSpan" id="kobo.556.1"> function can be used in </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">the store.</span></span></p>
<p><span class="koboSpan" id="kobo.558.1">To lighten a hex color, you pass a positive value – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">pSBC(0.5, "#0022FF")</span></strong><span class="koboSpan" id="kobo.560.1">. </span><span class="koboSpan" id="kobo.560.2">The number represents a percentage – in this case, 50 percent. </span><span class="koboSpan" id="kobo.560.3">To darken a color, you simply pass a negative value: </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">pSBC(-0.5, "#0022FF")</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.563.1">With the </span><strong class="source-inline"><span class="koboSpan" id="kobo.564.1">pSBC</span></strong><span class="koboSpan" id="kobo.565.1"> library </span><a id="_idIndexMarker1178"/><span class="koboSpan" id="kobo.566.1">pasted </span><a id="_idIndexMarker1179"/><span class="koboSpan" id="kobo.567.1">into the store, add a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">actions</span></strong><span class="koboSpan" id="kobo.569.1"> block to </span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">the store:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.571.1">
actions: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.572.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.573.1">Next, add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">lighten</span></strong><span class="koboSpan" id="kobo.575.1"> function. </span><span class="koboSpan" id="kobo.575.2">This function will get the current hex value (which is much easier now with our getter!), pass it to the library, and then take the result and convert it back into </span><span class="No-Break"><span class="koboSpan" id="kobo.576.1">decimal numbers:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.577.1">
lighten() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.578.1">
  let newHex = pSBC(0.4, this.hex);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.579.1">
  // parse out hex back to dec</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.580.1">
  this.red = parseInt(newHex.substring(1,3), 16);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.581.1">
  this.green = parseInt(newHex.substring(3,5), 16);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.582.1">
  this.blue = parseInt(newHex.substring(5,), 16);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.583.1">
},</span></pre></li>
<li><span class="koboSpan" id="kobo.584.1">Now, add the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">darken</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.586.1"> function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.587.1">
darken() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.588.1">
  let newHex = pSBC(-0.4, this.hex);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.589.1">
  // parse out hex back to dec</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.590.1">
  this.red = parseInt(newHex.substring(1,3), 16);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.591.1">
  this.green = parseInt(newHex.substring(3,5), 16);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.592.1">
  this.blue = parseInt(newHex.substring(5,), 16);</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.593.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.594.1">Now that </span><a id="_idIndexMarker1180"/><span class="koboSpan" id="kobo.595.1">the store includes the actions we need, let’s add the buttons to make use of them. </span><span class="koboSpan" id="kobo.595.2">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">src/components/RGBEdit.vue</span></strong><span class="koboSpan" id="kobo.597.1">, add the following beneath the </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">last label:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.599.1">
&lt;p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.600.1">
&lt;button @click="store.darken()"&gt;Darken&lt;/button&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.601.1">
&lt;button @click="store.lighten()"&gt;Lighten&lt;/button&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.602.1">
&lt;/p&gt;</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.603.1">Each button calls the respective action in the store. </span><span class="koboSpan" id="kobo.603.2">When run and viewed in the browser, you can see the </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">new UI:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer291">
<span class="koboSpan" id="kobo.605.1"><img alt="Figure 10.8 – The Color Preview app with new Darken and Lighten buttons" src="image/Figure_10.08_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.606.1">Figure 10.8 – The Color Preview app with new Darken and Lighten buttons</span></p>
<p><span class="koboSpan" id="kobo.607.1">To test out </span><a id="_idIndexMarker1181"/><span class="koboSpan" id="kobo.608.1">the </span><a id="_idIndexMarker1182"/><span class="koboSpan" id="kobo.609.1">functionality, simply move the sliders around and then try clicking on </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">the buttons.</span></span></p>
<h1 id="_idParaDest-232"><a id="_idTextAnchor438"/><span class="koboSpan" id="kobo.611.1">Debugging Pinia in Devtools</span></h1>
<p><span class="koboSpan" id="kobo.612.1">Earlier in </span><a href="B18645_03.xhtml#_idTextAnchor107"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.613.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.614.1">, </span><em class="italic"><span class="koboSpan" id="kobo.615.1">Vite and Vue Devtools</span></em><span class="koboSpan" id="kobo.616.1">, you </span><a id="_idIndexMarker1183"/><span class="koboSpan" id="kobo.617.1">were</span><a id="_idIndexMarker1184"/><span class="koboSpan" id="kobo.618.1"> introduced to Vue Devtools. </span><strong class="bold"><span class="koboSpan" id="kobo.619.1">Devtools</span></strong><span class="koboSpan" id="kobo.620.1"> are an incredibly powerful way to debug and optimize web applications, and the Vue plugin makes them even more vital for Vue developers. </span><span class="koboSpan" id="kobo.620.2">What makes Vue Devtools even more powerful is automatic recognition and support for applications </span><span class="No-Break"><span class="koboSpan" id="kobo.621.1">using Pinia.</span></span></p>
<p><span class="koboSpan" id="kobo.622.1">Let’s take a quick tour of what this support looks like by using the Color Preview application last modified in </span><em class="italic"><span class="koboSpan" id="kobo.623.1">Exercise 10.03</span></em><span class="koboSpan" id="kobo.624.1">. </span><span class="koboSpan" id="kobo.624.2">Run the application from the command line, open the URL in your browser, and open your developer tools. </span><span class="koboSpan" id="kobo.624.3">Note the </span><strong class="bold"><span class="koboSpan" id="kobo.625.1">Pinia</span></strong><span class="koboSpan" id="kobo.626.1"> tab on the right in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.627.1">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.628.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.629.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer292">
<span class="koboSpan" id="kobo.630.1"><img alt="Figure 10.9 – Pinia support in Vue Devtools" src="image/Figure_10.09_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.631.1">Figure 10.9 – Pinia support in Vue Devtools</span></p>
<p><span class="koboSpan" id="kobo.632.1">Right away, you can see you’ve got access to the complete state as well as any getters. </span><span class="koboSpan" id="kobo.632.2">If you start modifying the RGB values, you can see them </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">immediately reflected:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer293">
<span class="koboSpan" id="kobo.634.1"><img alt="Figure 10.10 – The state values update as the user works with the app" src="image/Figure_10.10_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.635.1">Figure 10.10 – The state values update as the user works with the app</span></p>
<p><span class="koboSpan" id="kobo.636.1">If you hover the mouse over one of the values in the state, you will see both a pencil icon and a</span><a id="_idIndexMarker1185"/><span class="koboSpan" id="kobo.637.1"> three-dot </span><a id="_idIndexMarker1186"/><span class="koboSpan" id="kobo.638.1">menu icon. </span><span class="koboSpan" id="kobo.638.2">The pencil icon lets you directly edit state values, while the three-dot menu gives you the ability to copy the value to the clipboard or </span><span class="No-Break"><span class="koboSpan" id="kobo.639.1">the path:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer294">
<span class="koboSpan" id="kobo.640.1"><img alt="Figure 10.11 – Tools to edit or copy state values" src="image/Figure_10.11_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.641.1">Figure 10.11 – Tools to edit or copy state values</span></p>
<p><span class="koboSpan" id="kobo.642.1">The icons in the upper-right portion allow you to copy the entire state to your clipboard, replace the state with the contents of your state, save the state to the filesystem, or import a saved state. </span><span class="koboSpan" id="kobo.642.2">As an example, if you save the state to the filesystem, it will look </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.644.1">
{"color":{"red":0,"blue":"69","green":"217"}}</span></pre>
<p><span class="koboSpan" id="kobo.645.1">If you click the </span><strong class="bold"><span class="koboSpan" id="kobo.646.1">Timeline</span></strong><span class="koboSpan" id="kobo.647.1"> tab, you will get a history of changes related to your </span><span class="No-Break"><span class="koboSpan" id="kobo.648.1">Pinia store:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer295">
<span class="koboSpan" id="kobo.649.1"><img alt="Figure 10.12 – Pinia modifications history" src="image/Figure_10.12_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.650.1">Figure 10.12 – Pinia modifications history</span></p>
<p><span class="koboSpan" id="kobo.651.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.652.1">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.653.1">.12</span></em><span class="koboSpan" id="kobo.654.1">, you can see detailed information showing changes along with previous and new values. </span><span class="koboSpan" id="kobo.654.2">You can click on any of the previous mutations to see </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">historical changes.</span></span></p>
<p><span class="koboSpan" id="kobo.656.1">Hopefully, this </span><a id="_idIndexMarker1187"/><span class="koboSpan" id="kobo.657.1">demonstrates just how useful it is to use Vue </span><a id="_idIndexMarker1188"/><span class="koboSpan" id="kobo.658.1">Devtools and how nicely integrated Pinia is. </span><span class="koboSpan" id="kobo.658.2">Make sure to fully use it when trying to solve any gnarly bugs you run into in </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">the future!</span></span></p>
<h2 id="_idParaDest-233"><a id="_idTextAnchor439"/><span class="koboSpan" id="kobo.660.1">Activity 10.01 – creating a simple shopping cart and price calculator</span></h2>
<p><span class="koboSpan" id="kobo.661.1">Imagine a </span><a id="_idIndexMarker1189"/><span class="koboSpan" id="kobo.662.1">hypothetical corporate hardware site that lets employees select products they need to be shipped to their office. </span><span class="koboSpan" id="kobo.662.2">This cart is much simpler than a typical e-commerce site, as it doesn’t need to process credit cards or even ask the person where they are (IT knows where </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">you sit!).</span></span></p>
<p><span class="koboSpan" id="kobo.664.1">It still needs to present you with a list of items, let you select how much you want, and then provide you with a total price that will be billed to </span><span class="No-Break"><span class="koboSpan" id="kobo.665.1">your department.</span></span></p>
<p><span class="koboSpan" id="kobo.666.1">In this activity, you need to build a Pinia store that represents the available products and their prices. </span><span class="koboSpan" id="kobo.666.2">You will need multiple components to handle the different aspects of the application and properly interact with the </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">store data:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.668.1">Begin by creating a new Pinia store. </span><span class="koboSpan" id="kobo.668.2">Your store should use two values in the state, an array of products with hardcoded names and values, and an empty cart array. </span><span class="koboSpan" id="kobo.668.3">Here’s an example list </span><span class="No-Break"><span class="koboSpan" id="kobo.669.1">of products:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.670.1">
    products: [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.671.1">
      { name: "Widgets", price: 10 },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.672.1">
      { name: "Doodads", price: 8 },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.673.1">
      { name: "Roundtuits", price: 12 },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.674.1">
      { name: "Fluff", price: 4 },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.675.1">
      { name: "Goobers", price: 7 }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.676.1">
    ],</span></pre></li>
<li><span class="koboSpan" id="kobo.677.1">Your </span><a id="_idIndexMarker1190"/><span class="koboSpan" id="kobo.678.1">application will consist of three components. </span><span class="koboSpan" id="kobo.678.2">The first is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.679.1">Products</span></strong><span class="koboSpan" id="kobo.680.1"> component to list products. </span><span class="koboSpan" id="kobo.680.2">The second is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.681.1">Cart</span></strong><span class="koboSpan" id="kobo.682.1"> component that renders the current cart. </span><span class="koboSpan" id="kobo.682.2">Finally, there is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">Checkout</span></strong><span class="koboSpan" id="kobo.684.1"> component, which renders the total along with a not-really-functional </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.685.1">Checkout</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.686.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.687.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.688.1">Products.vue</span></strong><span class="koboSpan" id="kobo.689.1"> component should render each product and have a button to add and remove it from the cart. </span><span class="koboSpan" id="kobo.689.2">These buttons should call actions in the Pinia store and either add or remove an item from </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">the cart:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer296">
<span class="koboSpan" id="kobo.691.1"><img alt="Figure 10.13 – The Products component" src="image/Figure_10.13_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.692.1">Figure 10.13 – The Products component</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.693.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">Cart.vue</span></strong><span class="koboSpan" id="kobo.695.1"> component renders a table of items in the cart. </span><span class="koboSpan" id="kobo.695.2">It should show the name of </span><a id="_idIndexMarker1191"/><span class="koboSpan" id="kobo.696.1">the product and the current quantity. </span><span class="koboSpan" id="kobo.696.2">If a line item ever goes to zero, it should not be displayed in the table. </span><span class="koboSpan" id="kobo.696.3">The following figure </span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">demonstrates this:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer297">
<span class="koboSpan" id="kobo.698.1"><img alt="Figure 10.14 – The Cart component" src="image/Figure_10.14_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.699.1">Figure 10.14 – The Cart component</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.700.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.701.1">Checkout.vue</span></strong><span class="koboSpan" id="kobo.702.1"> component will render two things. </span><span class="koboSpan" id="kobo.702.2">First, it will render a total cost. </span><span class="koboSpan" id="kobo.702.3">This is based on the products and quantity in the cart. </span><span class="koboSpan" id="kobo.702.4">Secondly, it will render a </span><strong class="bold"><span class="koboSpan" id="kobo.703.1">Checkout</span></strong><span class="koboSpan" id="kobo.704.1"> button but only if there is an actual cost. </span><span class="koboSpan" id="kobo.704.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.705.1">Checkout</span></strong><span class="koboSpan" id="kobo.706.1"> button does not need to </span><span class="No-Break"><span class="koboSpan" id="kobo.707.1">do anything:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer298">
<span class="koboSpan" id="kobo.708.1"><img alt="Figure 10.15 – The Checkout component" src="image/Figure_10.15_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.709.1">Figure 10.15 – The Checkout component</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.710.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.711.1">The solution for this activity can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.712.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Activity10.01"><span class="No-Break"><span class="koboSpan" id="kobo.713.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter10/Activity10.01</span></span></a></p>
<p><span class="koboSpan" id="kobo.714.1">Congratulations! </span><span class="koboSpan" id="kobo.714.2">You’ve now built a real, if simple, application making use of Pinia. </span><span class="koboSpan" id="kobo.714.3">Your application has </span><a id="_idIndexMarker1192"/><span class="koboSpan" id="kobo.715.1">three components kept perfectly in sync via Pinia’s store, and you’ve gotten the hang of working with </span><a id="_idTextAnchor440"/><span class="koboSpan" id="kobo.716.1">state management using the officially </span><span class="No-Break"><span class="koboSpan" id="kobo.717.1">recommended library.</span></span></p>
<h1 id="_idParaDest-234"><a id="_idTextAnchor441"/><span class="koboSpan" id="kobo.718.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.719.1">This chapter introduced you to Pinia, Vue’s recommended library for handling a shared state in a complex, </span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">multi-component application.</span></span></p>
<p><span class="koboSpan" id="kobo.721.1">We began by discussing how to install Pinia. </span><span class="koboSpan" id="kobo.721.2">Next, we introduced states and showed you how to use those values in </span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">your components.</span></span></p>
<p><span class="koboSpan" id="kobo.723.1">You looked at getters as a way of handling </span><em class="italic"><span class="koboSpan" id="kobo.724.1">virtual</span></em><span class="koboSpan" id="kobo.725.1"> properties and </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">encapsulating logic.</span></span></p>
<p><span class="koboSpan" id="kobo.727.1">Finally, you saw how actions let you define custom methods for working with </span><span class="No-Break"><span class="koboSpan" id="kobo.728.1">your state.</span></span></p>
<p><span class="koboSpan" id="kobo.729.1">In the next chapter, you’ll be introduced to testing with Vue, specifically unit testing, which will prepare you for end-to-end testing in the chapter </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">after that.</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer300">
</div>
</div>


<div class="Content" id="_idContainer301">
<h1 id="_idParaDest-235"><a id="_idTextAnchor442"/><span class="koboSpan" id="kobo.1.1">Part 4: Testing and Application Deployment</span></h1>
<p><span class="koboSpan" id="kobo.2.1">In the final part of the book, we will be going head first into the testing aspect of Vue.js applications. </span><span class="koboSpan" id="kobo.2.2">We will learn about the fundamentals of testing, different types of testing, and when and where it is required, and start testing our applications using the Jest testing framework for unit and snapshot tests and Cypress for End-to-End tests. </span><span class="koboSpan" id="kobo.2.3">By writing tests, we will be making sure that our applications behave in the intended way. </span><span class="koboSpan" id="kobo.2.4">The final chapter will cover how to deploy our Vue applications to </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">the web.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">We will cover the following chapters in </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">this part:</span></span></p>
<ul>
<li><a href="B18645_11.xhtml#_idTextAnchor444"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 11</span></em></a><span class="koboSpan" id="kobo.7.1">, </span><em class="italic"><span class="koboSpan" id="kobo.8.1">Unit Testing</span></em></li>
<li><a href="B18645_12.xhtml#_idTextAnchor463"><em class="italic"><span class="koboSpan" id="kobo.9.1">Chapter 12</span></em></a><span class="koboSpan" id="kobo.10.1">, </span><em class="italic"><span class="koboSpan" id="kobo.11.1">End-to-End Testing</span></em></li>
<li><a href="B18645_13.xhtml#_idTextAnchor478"><em class="italic"><span class="koboSpan" id="kobo.12.1">Chapter 13</span></em></a><span class="koboSpan" id="kobo.13.1">, </span><em class="italic"><span class="koboSpan" id="kobo.14.1">Deploying Your Code to the Web</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer302">
</div>
</div>
<div>
<div id="_idContainer303">
</div>
</div>
</body></html>