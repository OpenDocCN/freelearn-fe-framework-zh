<html><head></head><body>
<div id="_idContainer413">
<h1 class="chapter-number" id="_idParaDest-267"><a id="_idTextAnchor478"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 id="_idParaDest-268"><a id="_idTextAnchor479"/><span class="koboSpan" id="kobo.2.1">Deploying Your Code to the Web</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the previous two chapters, you had an in-depth look at testing and how it can benefit your application. </span><span class="koboSpan" id="kobo.3.2">Now that you’re confident in the stability and usability of your Vue.js application, it’s time to take a deeper look at how to get that code up on </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">the web.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this chapter, you will be able to explain the benefits of a CI/CD workflow and how it ties into the release cycle, release cadence, and development workflows. </span><span class="koboSpan" id="kobo.5.2">To this end, you’ll be able to articulate the differences between Vue.js development and production builds and what trade-offs </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">are made.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">To test and deploy a Vue.js application, you’ll configure GitLab CI/CD with pipelines, jobs, and steps. </span><span class="koboSpan" id="kobo.7.2">You’ll become familiar with Netlify, </span><strong class="bold"><span class="koboSpan" id="kobo.8.1">Amazon Web Services Simple Storage Service</span></strong><span class="koboSpan" id="kobo.9.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.10.1">AWS S3</span></strong><span class="koboSpan" id="kobo.11.1">), and AWS CloudFront, and their key similarities </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">and differences.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Exploring the benefits of CI/CD as part of an agile software </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">development process</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Building our apps </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">for production</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Using GitLab CI/CD to test </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">our code</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Deploying </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">to Netlify</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Deploying to AWS using S3 </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">and CloudFront</span></span></li>
</ul>
<h1 id="_idParaDest-269"><a id="_idTextAnchor480"/><span class="koboSpan" id="kobo.25.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.26.1">For this chapter, you will need the </span><strong class="source-inline"><span class="koboSpan" id="kobo.27.1">git</span></strong><span class="koboSpan" id="kobo.28.1"> CLI, which you will have already used. </span><span class="koboSpan" id="kobo.28.2">You will also need accounts with both Netlify and </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">Amazon AWS.</span></span></p>
<p><span class="koboSpan" id="kobo.30.1">You may find this chapter’s source </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">here: </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13"><span class="No-Break"><span class="koboSpan" id="kobo.32.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13</span></span></a></p>
<h1 id="_idParaDest-270"><a id="_idTextAnchor481"/><span class="koboSpan" id="kobo.33.1">Exploring the benefits of CI/CD as part of an agile software development process</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.34.1">Continuous integration</span></strong><span class="koboSpan" id="kobo.35.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.36.1">CI</span></strong><span class="koboSpan" id="kobo.37.1">) is the</span><a id="_idIndexMarker1492"/><span class="koboSpan" id="kobo.38.1"> practice of integrating </span><a id="_idIndexMarker1493"/><span class="koboSpan" id="kobo.39.1">code </span><a id="_idIndexMarker1494"/><span class="koboSpan" id="kobo.40.1">multiple times a day. </span><span class="koboSpan" id="kobo.40.2">To support this, a modern </span><strong class="bold"><span class="koboSpan" id="kobo.41.1">version control system</span></strong><span class="koboSpan" id="kobo.42.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.43.1">VCS</span></strong><span class="koboSpan" id="kobo.44.1">), such as </span><a id="_idIndexMarker1495"/><span class="koboSpan" id="kobo.45.1">Git, which supports multiple working states (branches) in a single repository, is necessary to allow developers to work on code independently, while still allowing them to collaborate and integrate their </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">changes safely.</span></span></p>
<p><span class="koboSpan" id="kobo.47.1">To augment the abilities of the VCS, hosting and collaboration tools around repositories (such as GitLab or GitHub) have been created that allow developers to view and manage code changes more efficiently through a </span><a id="_idIndexMarker1496"/><span class="koboSpan" id="kobo.48.1">web </span><strong class="bold"><span class="koboSpan" id="kobo.49.1">user </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.50.1">interface</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.51.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.52.1">UI</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">As part of, or in addition to, these hosting platforms and the collaboration tools they provide, automated checks are crucial to maintaining high confidence in the quality of the code before, during, and </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">after integration.</span></span></p>
<p><span class="koboSpan" id="kobo.56.1">Adopting a CI approach often entails including additional code quality steps, such as unit or integration tests, coverage checks, and building artifacts on the mainline branches (branches into which changes are integrated) every time any new code is integrated. </span><span class="koboSpan" id="kobo.56.2">The convention that a team follows for using Git for code collaboration and CI is called a </span><strong class="bold"><span class="koboSpan" id="kobo.57.1">Git workflow</span></strong><span class="koboSpan" id="kobo.58.1">, which</span><a id="_idIndexMarker1497"/><span class="koboSpan" id="kobo.59.1"> is often</span><a id="_idIndexMarker1498"/><span class="koboSpan" id="kobo.60.1"> shortened to </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.61.1">Git flow</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.63.1">A Git flow will predicate branch naming conventions, as well as how and when changes are integrated. </span><span class="koboSpan" id="kobo.63.2">For example, a team might decide that branches should be prefixed with ticket numbers followed by a short dash-cased description, such </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">as </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.65.1">WRK-2334-fix-ie-11-scroll</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.67.1">Other examples of conventions that are decided on and adhered to as part of a Git flow are commit message lengths and titles, the automated checks that should pass or are allowed to fail, and the number of reviewers required to merge a change request, which is a pull request or merge request in GitHub and GitLab </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">parlance, respectively.</span></span></p>
<p><span class="koboSpan" id="kobo.69.1">Git flows fall under two rough categories: (feature) branch-based development and trunk-based development. </span><span class="koboSpan" id="kobo.69.2">We’ll cover branch-based development first since its limitations have become quite clear and the majority of projects tend to use </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">trunk-based development.</span></span></p>
<p><span class="koboSpan" id="kobo.71.1">In a branch-based Git workflow, multiple working branches are kept in the repository. </span><span class="koboSpan" id="kobo.71.2">Branch-based flows can be used to keep branches that mirror the state </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">of environments.</span></span></p>
<p><span class="koboSpan" id="kobo.73.1">The following diagram shows three branches – production, staging, </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">and develop:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer355">
<span class="koboSpan" id="kobo.75.1"><img alt="Figure 13.1 – A branch-based Git commit/branch tree with three environment branches" src="image/Figure_13.01_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.76.1">Figure 13.1 – A branch-based Git commit/branch tree with three environment branches</span></p>
<p><span class="koboSpan" id="kobo.77.1">The </span><em class="italic"><span class="koboSpan" id="kobo.78.1">production</span></em><span class="koboSpan" id="kobo.79.1"> branch </span><a id="_idIndexMarker1499"/><span class="koboSpan" id="kobo.80.1">does </span><a id="_idIndexMarker1500"/><span class="koboSpan" id="kobo.81.1">not contain any changes from </span><em class="italic"><span class="koboSpan" id="kobo.82.1">staging</span></em><span class="koboSpan" id="kobo.83.1"> or </span><em class="italic"><span class="koboSpan" id="kobo.84.1">develop</span></em><span class="koboSpan" id="kobo.85.1">. </span><span class="koboSpan" id="kobo.85.2">The </span><em class="italic"><span class="koboSpan" id="kobo.86.1">staging</span></em><span class="koboSpan" id="kobo.87.1"> is ahead of the </span><em class="italic"><span class="koboSpan" id="kobo.88.1">production</span></em><span class="koboSpan" id="kobo.89.1"> branch but has no changes in common with the </span><em class="italic"><span class="koboSpan" id="kobo.90.1">develop</span></em><span class="koboSpan" id="kobo.91.1"> branch other than the changes that are on the </span><em class="italic"><span class="koboSpan" id="kobo.92.1">production</span></em><span class="koboSpan" id="kobo.93.1"> branch. </span><span class="koboSpan" id="kobo.93.2">The </span><em class="italic"><span class="koboSpan" id="kobo.94.1">develop</span></em><span class="koboSpan" id="kobo.95.1"> branch is ahead of both the </span><em class="italic"><span class="koboSpan" id="kobo.96.1">staging</span></em><span class="koboSpan" id="kobo.97.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.98.1">production</span></em><span class="koboSpan" id="kobo.99.1"> branches: it’s branched off the </span><em class="italic"><span class="koboSpan" id="kobo.100.1">production</span></em><span class="koboSpan" id="kobo.101.1"> branch at the same commit as the </span><em class="italic"><span class="koboSpan" id="kobo.102.1">staging</span></em><span class="koboSpan" id="kobo.103.1"> branch, but it doesn’t share any further commits with the </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.104.1">staging</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.105.1"> branch.</span></span></p>
<p><span class="koboSpan" id="kobo.106.1">A branch-based workflow can also be used to keep track of changes going into release lines. </span><span class="koboSpan" id="kobo.106.2">This is useful in cases where a project has to maintain two versions of an application or library, but bug fixes or security patches need to be applied to </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">both versions.</span></span></p>
<p><span class="koboSpan" id="kobo.108.1">In the following example, we have got a similar branching example as the environment branch one. </span><span class="koboSpan" id="kobo.108.2">Release 1.0.0 contains some changes that are not present in 1.0.1 and 1.1.0 but does not share any of the newer code. </span><span class="koboSpan" id="kobo.108.3">Releases 1.0.1 and 1.1.0 are branched off of 1.0.0 at the </span><a id="_idIndexMarker1501"/><span class="koboSpan" id="kobo.109.1">same</span><a id="_idIndexMarker1502"/><span class="koboSpan" id="kobo.110.1"> time, but they do not share </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">further changes:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer356">
<span class="koboSpan" id="kobo.112.1"><img alt="Figure 13.2 – A branch-based Git commit/branch tree with three release branches" src="image/Figure_13.02_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.113.1">Figure 13.2 – A branch-based Git commit/branch tree with three release branches</span></p>
<p><span class="koboSpan" id="kobo.114.1">In a trunk-based Git flow, each member of the team will create new branches off of a single branch, usually the </span><em class="italic"><span class="koboSpan" id="kobo.115.1">master</span></em><span class="koboSpan" id="kobo.116.1"> branch. </span><span class="koboSpan" id="kobo.116.2">This </span><a id="_idIndexMarker1503"/><span class="koboSpan" id="kobo.117.1">process is often referred to as </span><strong class="bold"><span class="koboSpan" id="kobo.118.1">branching </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.119.1">off of</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer357">
<span class="koboSpan" id="kobo.121.1"><img alt="Figure 13.3 – A sample trunk-based Git commit/branch tree with two feature branches branched off of the master" src="image/Figure_13.03_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.122.1">Figure 13.3 – A sample trunk-based Git commit/branch tree with two feature branches branched off of the master</span></p>
<p><span class="koboSpan" id="kobo.123.1">An extreme case of</span><a id="_idIndexMarker1504"/><span class="koboSpan" id="kobo.124.1"> a</span><a id="_idIndexMarker1505"/><span class="koboSpan" id="kobo.125.1"> trunk-based workflow is to have a </span><em class="italic"><span class="koboSpan" id="kobo.126.1">single</span></em><span class="koboSpan" id="kobo.127.1"> branch that everyone </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">commits on.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.129.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.130.1">In a trunk-based environment, an alternative to </span><em class="italic"><span class="koboSpan" id="kobo.131.1">release branches</span></em><span class="koboSpan" id="kobo.132.1"> is to use Git tags to keep track of release snapshots. </span><span class="koboSpan" id="kobo.132.2">This gives the same advantages as maintaining branches but with reduced branch noise and the added benefit of immutability since tags cannot be changed once </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">they’re created.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.134.1">Continuous delivery</span></strong><span class="koboSpan" id="kobo.135.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.136.1">CD</span></strong><span class="koboSpan" id="kobo.137.1">) is the</span><a id="_idIndexMarker1506"/><span class="koboSpan" id="kobo.138.1"> ability of a team to deploy every good build to a </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">production environment.</span></span></p>
<p><span class="koboSpan" id="kobo.140.1">A prerequisite to CD is CI since CI provides some initial confidence in the quality of a build. </span><span class="koboSpan" id="kobo.140.2">As part of CD, new systems, tools, and practices are required </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">beyond CI.</span></span></p>
<p><span class="koboSpan" id="kobo.142.1">The following diagram shows the tools and practices that relate more to CI and those that relate more </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">to CD:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer358">
<span class="koboSpan" id="kobo.144.1"><img alt="Figure 13.4 – The relationship between CI and CD practices" src="image/Figure_13.04_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.145.1">Figure 13.4 – The relationship between CI and CD practices</span></p>
<p><span class="koboSpan" id="kobo.146.1">The extra ingredient required to adopt CD is a high level of confidence that the application is going to keep working as expected (for the end user) and that new defects have not been unwittingly introduced. </span><span class="koboSpan" id="kobo.146.2">This means an additional end-to-end testing step is needed during or after the CI checks, to validate the build before being able to </span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">deploy it.</span></span></p>
<p><span class="koboSpan" id="kobo.148.1">These end-to-end</span><a id="_idIndexMarker1507"/><span class="koboSpan" id="kobo.149.1"> tests</span><a id="_idIndexMarker1508"/><span class="koboSpan" id="kobo.150.1"> can be conducted manually, or they can be automated. </span><span class="koboSpan" id="kobo.150.2">In an ideal CD setup, the latter (automated end-to-end tests) is preferred since it means deployments do not include manual interaction. </span><span class="koboSpan" id="kobo.150.3">If the end-to-end tests pass, the build can be </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">deployed automatically.</span></span></p>
<p><span class="koboSpan" id="kobo.152.1">To facilitate CD, systems that used to deploy software have had to be rethought. </span><span class="koboSpan" id="kobo.152.2">As part of CD, deployment cannot be a long-winded manual process. </span><span class="koboSpan" id="kobo.152.3">This has led to companies adopting cloud-native </span><a id="_idIndexMarker1509"/><span class="koboSpan" id="kobo.153.1">technologies, such as Docker, and </span><strong class="bold"><span class="koboSpan" id="kobo.154.1">Infrastructure as Code</span></strong><span class="koboSpan" id="kobo.155.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.156.1">IaC</span></strong><span class="koboSpan" id="kobo.157.1">) tools, such </span><a id="_idIndexMarker1510"/><span class="koboSpan" id="kobo.158.1">as </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">HashiCorp’s </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.160.1">Terraform</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.162.1">The emphasis on moving toward CD </span><a id="_idIndexMarker1511"/><span class="koboSpan" id="kobo.163.1">practices has led to the inception of ideas such as </span><strong class="bold"><span class="koboSpan" id="kobo.164.1">GitOps</span></strong><span class="koboSpan" id="kobo.165.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.166.1">ChatOps</span></strong><span class="koboSpan" id="kobo.167.1">. </span><span class="koboSpan" id="kobo.167.2">In GitOps</span><a id="_idIndexMarker1512"/><span class="koboSpan" id="kobo.168.1"> and ChatOps, deployments and operational tasks are driven by the tools that developers and stakeholders interact </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">with daily.</span></span></p>
<p><span class="koboSpan" id="kobo.170.1">In GitOps, deployments can be done through GitHub/GitLab (or another Git-hosting provider), directly with GitHub Actions or GitLab CI/CD, or through CI/CD software (such as CircleCI or Jenkins), which have tight integrations and reporting </span><span class="No-Break"><span class="koboSpan" id="kobo.171.1">with GitHub/GitLab.</span></span></p>
<p><span class="koboSpan" id="kobo.172.1">In the case of ChatOps, conversational interfaces are used to deploy and operate the software. </span><span class="koboSpan" id="kobo.172.2">Some flavors of ChatOps can be considered a subset of GitOps – for example, interacting with tools</span><a id="_idIndexMarker1513"/><span class="koboSpan" id="kobo.173.1"> such as </span><strong class="bold"><span class="koboSpan" id="kobo.174.1">Dependabot</span></strong><span class="koboSpan" id="kobo.175.1"> (a tool that keeps a project’s dependencies up to date) through comments on a GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">pull request.</span></span></p>
<p><span class="koboSpan" id="kobo.177.1">ChatOps can also be implemented right into real-time chat tools, such as Slack or Microsoft Teams. </span><span class="koboSpan" id="kobo.177.2">Someone might send a message such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">deploy &lt;service-name&gt; &lt;environment&gt;</span></strong><span class="koboSpan" id="kobo.179.1">, which will deploy the service to the relevant environment. </span><span class="koboSpan" id="kobo.179.2">Note that chat interfaces are very reminiscent of command-line interfaces, which developers might be used to but other stakeholders might take some time to </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">adopt them.</span></span></p>
<p><span class="koboSpan" id="kobo.181.1">Now that we’ve looked</span><a id="_idIndexMarker1514"/><span class="koboSpan" id="kobo.182.1"> at</span><a id="_idIndexMarker1515"/><span class="koboSpan" id="kobo.183.1"> approaches to CI and CD, let’s </span><a id="_idIndexMarker1516"/><span class="koboSpan" id="kobo.184.1">discuss the advantages of using CI </span><span class="No-Break"><span class="koboSpan" id="kobo.185.1">and CD:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-1">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.186.1">Continuous Integration</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.187.1">Continuous Delivery</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.188.1">Ensures the changeset being integrated is small (at most, a couple of days’ worth </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">of work)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.190.1">Delivering value to production can be done more often and </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">more safely</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.192.1">Reduces the chance of huge sweeping changes across the code base causing </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">unforeseen bugs</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.194.1">A small changeset (a couple of days’ worth of work) can be rolled back without </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">any issue</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.196.1">Testing, code quality, and review steps give confidence in a </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">clean integration</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.198.1">A larger changeset due to a longer fixed (monthly, weekly, or every sprint) release cadence (as opposed to CD) can have unforeseen consequences; the effect rollbacks have on a large release is complicated </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">to grasp</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.200.1">Figure 13.5 – Advantages of CI and CD</span></p>
<p><span class="koboSpan" id="kobo.201.1">Both practices also have an impact on the team’s mindset and performance. </span><span class="koboSpan" id="kobo.201.2">Being able to see the changes you make integrated within a day and in production in less than a week means that contributors can see their work having an </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">impact immediately.</span></span></p>
<p><span class="koboSpan" id="kobo.203.1">CI/CD also helps promote agile principles, where changes are applied and deployed iteratively. </span><span class="koboSpan" id="kobo.203.2">This is as opposed to long timelines for projects, for which inaccuracies in estimations compound and can cause </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">major delays.</span></span></p>
<p><span class="koboSpan" id="kobo.205.1">With that, you’ve had a deep look at CI and CD. </span><span class="koboSpan" id="kobo.205.2">While both certainly imply more work in your process, the</span><a id="_idIndexMarker1517"/><span class="koboSpan" id="kobo.206.1"> benefits</span><a id="_idIndexMarker1518"/><span class="koboSpan" id="kobo.207.1"> will pay for themselves down the road with better stability and the ability to more nimbly respond to issues and add new features. </span><span class="koboSpan" id="kobo.207.2">Now, let’s put this </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">into practice</span><a id="_idTextAnchor482"/><span class="koboSpan" id="kobo.209.1">.</span></span></p>
<h1 id="_idParaDest-271"><a id="_idTextAnchor483"/><span class="koboSpan" id="kobo.210.1">Building our apps for production</span></h1>
<p><span class="koboSpan" id="kobo.211.1">Deploying </span><a id="_idIndexMarker1519"/><span class="koboSpan" id="kobo.212.1">applications to production starts with creating an artifact that can be deployed. </span><span class="koboSpan" id="kobo.212.2">In the case of Vue.js, we’re building a client-side application, which means our build artifact will contain HTML, JavaScript, and </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">CSS files.</span></span></p>
<p><span class="koboSpan" id="kobo.214.1">A Vue project scaffolded with Vite will have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">build</span></strong><span class="koboSpan" id="kobo.216.1"> command. </span><span class="koboSpan" id="kobo.216.2">As part of the build process, Vite will take JavaScript, Vue single-file components, and modules that are imported into each other</span><a id="_idIndexMarker1520"/><span class="koboSpan" id="kobo.217.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.218.1">bundle</span></em><span class="koboSpan" id="kobo.219.1"> them. </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">Bundling</span></strong><span class="koboSpan" id="kobo.221.1"> means that related chunks of code that depend on each other will be output as a single </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">JavaScript file.</span></span></p>
<p><span class="koboSpan" id="kobo.223.1">The Vue CLI build step also includes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">dead code elimination</span></strong><span class="koboSpan" id="kobo.225.1"> step. </span><span class="koboSpan" id="kobo.225.2">This means that it can analyze the code being generated and if any of it is never used – for example, a statement such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.226.1">if (false) { /* do something */}</span></strong><span class="koboSpan" id="kobo.227.1"> – then it will not be present in the </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">build output.</span></span></p>
<p><span class="koboSpan" id="kobo.229.1">By default, the Vite builds for production when we call </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">vite build</span></strong><span class="koboSpan" id="kobo.231.1">, which, in Vue projects, is aliased to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">build</span></strong><span class="koboSpan" id="kobo.233.1"> script, which can be run with </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">npm run build</span></strong><span class="koboSpan" id="kobo.235.1"> or </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">yarn build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.238.1">In a sample Vue project, we’ll see something along </span><span class="No-Break"><span class="koboSpan" id="kobo.239.1">these lines:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer359">
<span class="koboSpan" id="kobo.240.1"><img alt="Figure 13.6 – Output of “npm run build” in a fresh Vue project" src="image/Figure_13.06_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.241.1">Figure 13.6 – Output of “npm run build” in a fresh Vue project</span></p>
<p><span class="koboSpan" id="kobo.242.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">dist</span></strong><span class="koboSpan" id="kobo.244.1"> folder is now ready to deploy using a static hosting solution such as Netlify or AWS S3 </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">and CloudFront.</span></span></p>
<p><span class="koboSpan" id="kobo.246.1">With that, we’ve seen how to build </span><a id="_idIndexMarker1521"/><span class="koboSpan" id="kobo.247.1">a Vue.js application for production using the Vite CLI with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">npm run build</span></strong><span class="koboSpan" id="kobo.249.1"> command. </span><span class="koboSpan" id="kobo.249.2">Next, we will learn how to use GitLab CI/CD to test our code (before </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">deploying i</span><a id="_idTextAnchor484"/><span class="koboSpan" id="kobo.251.1">t).</span></span></p>
<h1 id="_idParaDest-272"><a id="_idTextAnchor485"/><span class="koboSpan" id="kobo.252.1">Using GitLab CI/CD to test our code</span></h1>
<p><span class="koboSpan" id="kobo.253.1">GitLab has a </span><a id="_idIndexMarker1522"/><span class="koboSpan" id="kobo.254.1">built-in CI/CD tool called GitLab CI/CD. </span><span class="koboSpan" id="kobo.254.2">To use GitLab CI/CD, you’ll need a GitLab account. </span><span class="koboSpan" id="kobo.254.3">To interact with Git repositories hosted on GitLab, you’ll also need to associate an SSH key from your machine to your </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">GitLab account.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.256.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.257.1">Instructions for adding an SSH key can be found in the GitLab documentation </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">at </span></span><a href="https://docs.gitlab.com/ee/ssh/index.html"><span class="No-Break"><span class="koboSpan" id="kobo.259.1">https://docs.gitlab.com/ee/ssh/index.html</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.260.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.261.1">Once you’ve created an account, you can create a new repository using the </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">Create blank project</span></strong><span class="koboSpan" id="kobo.263.1"> action, as shown in the following screenshot. </span><span class="koboSpan" id="kobo.263.2">If you are an existing user, you can use the </span><strong class="bold"><span class="koboSpan" id="kobo.264.1">Create new project</span></strong><span class="koboSpan" id="kobo.265.1"> button at the top right of the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.266.1">Projects</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.267.1"> page.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer360">
<span class="koboSpan" id="kobo.268.1"><img alt="Figure 13.7 – The GitLab Projects page with the New Project button" src="image/Figure_13.07_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.269.1">Figure 13.7 – The GitLab Projects page with the New Project button</span></p>
<p><span class="koboSpan" id="kobo.270.1">Regardless of your</span><a id="_idIndexMarker1523"/><span class="koboSpan" id="kobo.271.1"> choice, you will be taken to the </span><strong class="bold"><span class="koboSpan" id="kobo.272.1">New project</span></strong><span class="koboSpan" id="kobo.273.1"> page, where you can create a project by giving it a name and a slug, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer361">
<span class="koboSpan" id="kobo.275.1"><img alt="Figure 13.8 – The GitLab New ﻿project page" src="image/Figure_13.08_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.276.1">Figure 13.8 – The GitLab New project page</span></p>
<p><span class="koboSpan" id="kobo.277.1">Once you click </span><strong class="bold"><span class="koboSpan" id="kobo.278.1">Create project</span></strong><span class="koboSpan" id="kobo.279.1">, the GitLab project page will appear in an empty state that displays instructions on how to clone it. </span><span class="koboSpan" id="kobo.279.2">You should run the commands required to clone the repository, which probably boils down to something similar to the following (which you are expected to run on </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">your machine):</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.281.1">
git clone &lt;repository-url&gt;</span></pre>
<p><span class="koboSpan" id="kobo.282.1">You can find the proper URL by clicking on the blue </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.283.1">Clone</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.284.1"> button.</span></span></p>
<p><span class="koboSpan" id="kobo.285.1">On your machine, open the directory into which the repository was cloned. </span><span class="koboSpan" id="kobo.285.2">To add GitLab CI/CD, we need to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.287.1"> file to the root of the project. </span><span class="koboSpan" id="kobo.287.2">A sample </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.289.1"> file that adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">build</span></strong><span class="koboSpan" id="kobo.291.1"> job to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">build</span></strong><span class="koboSpan" id="kobo.293.1"> stage of the pipeline, installs dependencies (using </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">npm ci</span></strong><span class="koboSpan" id="kobo.295.1">), runs the production build (</span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">npm run build</span></strong><span class="koboSpan" id="kobo.297.1">), and caches the output artifact is defined </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">as follows.</span></span></p>
<p><span class="koboSpan" id="kobo.299.1">It will begin with a job name that is defined by setting a top-level key in the YAML file – in this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.300.1">build:</span></strong><span class="koboSpan" id="kobo.301.1">. </span><span class="koboSpan" id="kobo.301.2">In YAML syntax, we must increase the indent to denote that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">build</span></strong><span class="koboSpan" id="kobo.303.1"> key points to </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">an object.</span></span></p>
<p><span class="koboSpan" id="kobo.305.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">build job</span></strong><span class="koboSpan" id="kobo.307.1"> object, we will define which Docker image is used to run the job, using </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">image: node:lts</span></strong><span class="koboSpan" id="kobo.309.1">. </span><span class="koboSpan" id="kobo.309.2">This </span><a id="_idIndexMarker1524"/><span class="koboSpan" id="kobo.310.1">means we want this job to run on a Node.js </span><strong class="bold"><span class="koboSpan" id="kobo.311.1">Long-Term Support</span></strong><span class="koboSpan" id="kobo.312.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.313.1">LTS</span></strong><span class="koboSpan" id="kobo.314.1">) image, which</span><a id="_idIndexMarker1525"/><span class="koboSpan" id="kobo.315.1"> will be Node.js 16 as of </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">early 2022.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.317.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.318.1">You can access the up-to-date Node.js LTS schedule </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">at </span></span><a href="https://nodejs.org/en/about/releases/"><span class="No-Break"><span class="koboSpan" id="kobo.320.1">https://nodejs.org/en/about/releases/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.321.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.322.1">The other property we can define in our job is the stage. </span><span class="koboSpan" id="kobo.322.2">By default, GitLab CI/CD pipelines have three stages: </span><strong class="bold"><span class="koboSpan" id="kobo.323.1">Build</span></strong><span class="koboSpan" id="kobo.324.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.325.1">Test</span></strong><span class="koboSpan" id="kobo.326.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.327.1">Deploy</span></strong><span class="koboSpan" id="kobo.328.1">. </span><span class="koboSpan" id="kobo.328.2">These stages can be replaced using custom stages when a team’s workflow doesn’t fit into these three categories (for example, if there is more than one environment to deploy to). </span><span class="koboSpan" id="kobo.328.3">Our pipeline only has one stage and one job at the moment, so most of the preceding doesn’t apply </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">to us.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.330.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.331.1">If you’re curious, </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">stages</span></strong><span class="koboSpan" id="kobo.333.1"> is used to define stages that can be used by jobs, and it is defined </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">globally (</span></span><a href="https://docs.gitlab.com/ee/ci/yaml/#stages"><span class="No-Break"><span class="koboSpan" id="kobo.335.1">https://docs.gitlab.com/ee/ci/yaml/#stages</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.336.1">).</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.337.1">The specification of </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">stages</span></strong><span class="koboSpan" id="kobo.339.1"> allows for flexible multistage pipelines. </span><span class="koboSpan" id="kobo.339.2">The ordering of elements in stages defines the ordering of </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">jobs’ execution:</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.341.1">a) Jobs of the same stage are run </span><span class="No-Break"><span class="koboSpan" id="kobo.342.1">in parallel</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.343.1">b) Jobs of the next stage are run after the jobs from the previous stage have been </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">completed successfully</span></span></p>
<p class="callout"><span class="koboSpan" id="kobo.345.1">See the documentation for more </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">information: </span></span><a href="https://docs.gitlab.com/ee/ci/yaml/#stages"><span class="No-Break"><span class="koboSpan" id="kobo.347.1">https://docs.gitlab.com/ee/ci/yaml/#stages</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.348.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.349.1">The final properties</span><a id="_idIndexMarker1526"/><span class="koboSpan" id="kobo.350.1"> we set are </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">script</span></strong><span class="koboSpan" id="kobo.352.1">, which defines steps that should be run when the job is running, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">artifacts</span></strong><span class="koboSpan" id="kobo.354.1">, which configures artifact storage. </span><span class="koboSpan" id="kobo.354.2">In our case, we’ll run </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">npm ci</span></strong><span class="koboSpan" id="kobo.356.1"> to install all the dependencies, followed by </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">npm run build</span></strong><span class="koboSpan" id="kobo.358.1">, which will run the production Vue.js build. </span><span class="koboSpan" id="kobo.358.2">Our artifact has been set up to be held for a week and to contain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">dist</span></strong><span class="koboSpan" id="kobo.360.1"> folder (which is where the Vite CLI </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">build</span></strong><span class="koboSpan" id="kobo.362.1"> output </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">is stored).</span></span></p>
<p><span class="koboSpan" id="kobo.364.1">In full, we have </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.366.1">
build:
  image: node:lts
  stage: build
  script:
    - npm ci
    - npm run build
  artifacts:
    expire_in: 1 week
    paths:
      - dist</span></pre>
<p><span class="koboSpan" id="kobo.367.1">Once we push this </span><strong class="source-inline"><span class="koboSpan" id="kobo.368.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.369.1"> file to a repository containing a Vue CLI project, we will see the following in the repository view, where a pipeline with one step is running on the </span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">latest commit:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer362">
<span class="koboSpan" id="kobo.371.1"><img alt="Figure 13.9 – GitLab repository view with the build job running on the latest commit" src="image/Figure_13.09_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.372.1">Figure 13.9 – GitLab repository view with the build job running on the latest commit</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.373.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.374.1">GitLab now requires user verification before running pipelines. </span><span class="koboSpan" id="kobo.374.2">This can be done with a credit card; GitLab will </span><em class="italic"><span class="koboSpan" id="kobo.375.1">not</span></em><span class="koboSpan" id="kobo.376.1"> charge your card. </span><span class="koboSpan" id="kobo.376.2">It is only used as part of the </span><span class="No-Break"><span class="koboSpan" id="kobo.377.1">validation process.</span></span></p>
<p><span class="koboSpan" id="kobo.378.1">If we click on the </span><strong class="bold"><span class="koboSpan" id="kobo.379.1">Pipeline</span></strong><span class="koboSpan" id="kobo.380.1"> icon (the </span><a id="_idIndexMarker1527"/><span class="koboSpan" id="kobo.381.1">green checkmark), we will get the pipeline view. </span><span class="koboSpan" id="kobo.381.2">In the pipeline view, </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">Build</span></strong><span class="koboSpan" id="kobo.383.1"> represents the </span><strong class="source-inline"><span class="koboSpan" id="kobo.384.1">state</span></strong><span class="koboSpan" id="kobo.385.1"> pipeline (which we set as </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">build</span></strong><span class="koboSpan" id="kobo.387.1">), which represents the job name (which we defined as </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">build</span></strong><span class="koboSpan" id="kobo.389.1">). </span><span class="koboSpan" id="kobo.389.2">We will see the same in-progress indicator until the job completes, </span><span class="No-Break"><span class="koboSpan" id="kobo.390.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer363">
<span class="koboSpan" id="kobo.391.1"><img alt="Figure 13.10 – GitLab CI pipeline view with the build job complete" src="image/Figure_13.10_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.392.1">Figure 13.10 – GitLab CI pipeline view with the build job complete</span></p>
<p><span class="koboSpan" id="kobo.393.1">Once the job</span><a id="_idIndexMarker1528"/><span class="koboSpan" id="kobo.394.1"> completes, we will see a </span><strong class="bold"><span class="koboSpan" id="kobo.395.1">Success</span></strong><span class="koboSpan" id="kobo.396.1"> icon (green checkmark). </span><span class="koboSpan" id="kobo.396.2">We can click this icon or the job name to access the </span><strong class="bold"><span class="koboSpan" id="kobo.397.1">Job</span></strong><span class="koboSpan" id="kobo.398.1"> view while the job is running or after it has been completed (whether it has failed or succeeded). </span><span class="koboSpan" id="kobo.398.2">When a job has been completed, we will also see a </span><strong class="bold"><span class="koboSpan" id="kobo.399.1">Retry</span></strong><span class="koboSpan" id="kobo.400.1"> icon, which can be useful if we wish to retry a failed </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">pipeline step.</span></span></p>
<p><span class="koboSpan" id="kobo.402.1">The following screenshot shows that the job </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">ran successfully:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer364">
<span class="koboSpan" id="kobo.404.1"><img alt="Figure 13.11 – GitLab CI pipeline view with the build job passing" src="image/Figure_13.11_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.405.1">Figure 13.11 – GitLab CI pipeline view with the build job passing</span></p>
<p><span class="koboSpan" id="kobo.406.1">After clicking the job, we</span><a id="_idIndexMarker1529"/><span class="koboSpan" id="kobo.407.1"> will see the </span><strong class="bold"><span class="koboSpan" id="kobo.408.1">Job</span></strong><span class="koboSpan" id="kobo.409.1"> view, which shows us a detailed breakdown of all the steps in the job. </span><span class="koboSpan" id="kobo.409.2">Starting with the steps for preparing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">docker_machine</span></strong><span class="koboSpan" id="kobo.411.1"> executor, which load up the Node.js Docker image, we can see the steps for running the script, as well as cache and artifact restores, </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer365">
<span class="koboSpan" id="kobo.413.1"><img alt="Figure 13.12 – The GitLab CI job view with the successful build job" src="image/Figure_13.12_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.414.1">Figure 13.12 – The GitLab CI job view with the successful build job</span></p>
<p><span class="koboSpan" id="kobo.415.1">If we want to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">test</span></strong><span class="koboSpan" id="kobo.417.1"> step to</span><a id="_idIndexMarker1530"/><span class="koboSpan" id="kobo.418.1"> our GitLab CI/CD runs, we need to be in a project that supports unit testing. </span><span class="koboSpan" id="kobo.418.2">Installing and adding unit tests was covered in depth in </span><a href="B18645_11.xhtml#_idTextAnchor444"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.419.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.420.1">, </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.421.1">Unit Testing</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.423.1">We will need to add a new job to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.425.1"> file; we will call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">test</span></strong><span class="koboSpan" id="kobo.427.1">, use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">node:lts</span></strong><span class="koboSpan" id="kobo.429.1"> image, and assign the job to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">test</span></strong><span class="koboSpan" id="kobo.431.1"> state. </span><span class="koboSpan" id="kobo.431.2">In the job, we must run </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">npm ci</span></strong><span class="koboSpan" id="kobo.433.1">, followed by </span><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">npm run test:unit</span></strong><span class="koboSpan" id="kobo.435.1"> (which is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">npm</span></strong><span class="koboSpan" id="kobo.437.1"> script added by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.438.1">unit-jest</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.439.1">CLI plugin):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.440.1">
# rest of .gitlab-ci.yml
test:
  image: node:lts
  stage: test
  script:
    - npm ci
    - npm run test</span></pre>
<p><span class="koboSpan" id="kobo.441.1">Once we push this</span><a id="_idIndexMarker1531"/><span class="koboSpan" id="kobo.442.1"> new </span><strong class="source-inline"><span class="koboSpan" id="kobo.443.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.444.1"> file up, we will get the following view on the main </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">repository page:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer366">
<span class="koboSpan" id="kobo.446.1"><img alt="Figure 13.13 – Repository view with GitLab CI/CD running the pipeline with the new test step" src="image/Figure_13.13_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.447.1">Figure 13.13 – Repository view with GitLab CI/CD running the pipeline with the new test step</span></p>
<p><span class="koboSpan" id="kobo.448.1">We can click through to the pipeline view. </span><span class="koboSpan" id="kobo.448.2">The reason GitLab CI/CD uses pipelines is that a failing step at a certain stage will mean steps in any subsequent stages will not run. </span><span class="koboSpan" id="kobo.448.3">For example, if we get a failing </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">build</span></strong><span class="koboSpan" id="kobo.450.1"> job, the jobs that are part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">test</span></strong><span class="koboSpan" id="kobo.452.1"> stage will </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">not run:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer367">
<span class="koboSpan" id="kobo.454.1"><img alt="Figure 13.14 – GitLab CI/CD pipeline view with a failed build job that stops the test job/stage from running" src="image/Figure_13.14_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.455.1">Figure 13.14 – GitLab CI/CD pipeline view with a failed build job that stops the test job/stage from running</span></p>
<p><span class="koboSpan" id="kobo.456.1">If we push another </span><a id="_idIndexMarker1532"/><span class="koboSpan" id="kobo.457.1">commit or retry the build step (if the failure is not caused by changes) and navigate to the pipeline view again, we’ll see </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer368">
<span class="koboSpan" id="kobo.459.1"><img alt="Figure 13.15 – GitLab CI/CD pipeline view with the test job running after the build stage jobs have all succeeded" src="image/Figure_13.15_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.460.1">Figure 13.15 – GitLab CI/CD pipeline view with the test job running after the build stage jobs have all succeeded</span></p>
<p><span class="koboSpan" id="kobo.461.1">Once the </span><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">test</span></strong><span class="koboSpan" id="kobo.463.1"> job </span><a id="_idIndexMarker1533"/><span class="koboSpan" id="kobo.464.1">has succeeded, we’ll see the </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">following pipeline:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer369">
<span class="koboSpan" id="kobo.466.1"><img alt="Figure 13.16 – GitLab CI/CD pipeline view with all jobs succeeding in the build and test stages" src="image/Figure_13.16_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.467.1">Figure 13.16 – GitLab CI/CD pipeline view with all jobs succeeding in the build and test stages</span></p>
<p><span class="koboSpan" id="kobo.468.1">We’ve now added a GitLab CI/CD pipeline with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">build</span></strong><span class="koboSpan" id="kobo.470.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.471.1">test</span></strong><span class="koboSpan" id="kobo.472.1"> stages that will validate that, on every</span><a id="_idIndexMarker1534"/><span class="koboSpan" id="kobo.473.1"> push to the GitLab repository, the code still integrates </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">as exp</span><a id="_idTextAnchor486"/><span class="koboSpan" id="kobo.475.1">ected.</span></span></p>
<h2 id="_idParaDest-273"><a id="_idTextAnchor487"/><span class="koboSpan" id="kobo.476.1">Exercise 13.01 – adding a lint step to our GitLab CI/CD pipeline</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.477.1">Linting</span></strong><span class="koboSpan" id="kobo.478.1"> is a</span><a id="_idIndexMarker1535"/><span class="koboSpan" id="kobo.479.1"> way</span><a id="_idIndexMarker1536"/><span class="koboSpan" id="kobo.480.1"> to get automated formatting and code style checks. </span><span class="koboSpan" id="kobo.480.2">Integrating it as part of CI makes sure that all code merged into the mainline branches adheres to a team’s code style guide. </span><span class="koboSpan" id="kobo.480.3">It also reduces the number of code style review comments, which can be noisy and might detract from fundamental issues with the </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">change request.</span></span></p>
<p><span class="koboSpan" id="kobo.482.1">You can find the complete code for this exercise </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Exercise13.01"><span class="No-Break"><span class="koboSpan" id="kobo.484.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Exercise13.01</span></span></a></p>
<p><span class="koboSpan" id="kobo.485.1">To add linting, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.487.1">First, we need to ensure that our </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">package.json</span></strong><span class="koboSpan" id="kobo.489.1"> file includes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">lint</span></strong><span class="koboSpan" id="kobo.491.1"> script. </span><span class="koboSpan" id="kobo.491.2">If it’s missing, we’ll need to add it. </span><span class="koboSpan" id="kobo.491.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">eslint-plugin-vue</span></strong><span class="koboSpan" id="kobo.493.1"> website (</span><a href="https://eslint.vuejs.org/"><span class="koboSpan" id="kobo.494.1">https://eslint.vuejs.org/</span></a><span class="koboSpan" id="kobo.495.1">) documents this. </span><span class="koboSpan" id="kobo.495.2">Once installed, use it in the lint script, </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">like so:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.497.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.498.1">
  "// other": "properties",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.499.1">
  "scripts": {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.500.1">
    "// other": "scripts",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.501.1">
    "lint": "eslint --ext .js,.vue src",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.502.1">
    "// other": "scripts"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.503.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.504.1">
  "// more": "properties"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.505.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.506.1">To run the lint on GitLab CI/CD, add a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">lint</span></strong><span class="koboSpan" id="kobo.508.1"> job that will run in a Node.js LTS Docker image at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">test</span></strong><span class="koboSpan" id="kobo.510.1"> stage of the GitLab CI/CD pipeline. </span><span class="koboSpan" id="kobo.510.2">We will do this </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">.gitlab-ci.yml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.514.1">
lint:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.515.1">
  image: node:lts</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.516.1">
  stage: test</span></pre></li>
<li><span class="koboSpan" id="kobo.517.1">For the </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">lint</span></strong><span class="koboSpan" id="kobo.519.1"> job to run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">lint</span></strong><span class="koboSpan" id="kobo.521.1"> script as per </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">package.json</span></strong><span class="koboSpan" id="kobo.523.1">, we need to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">script</span></strong><span class="koboSpan" id="kobo.525.1"> section in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.527.1"> file. </span><span class="koboSpan" id="kobo.527.2">First, it needs to run </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">npm ci</span></strong><span class="koboSpan" id="kobo.529.1"> to install the </span><a id="_idIndexMarker1537"/><span class="koboSpan" id="kobo.530.1">dependencies, and then </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">npm run lint</span></strong><span class="koboSpan" id="kobo.532.1"> to start the </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">linting process:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.534.1">
lint:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.535.1">
  image: node:lts</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.536.1">
  stage: test</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.537.1">
  script:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.538.1">
    - npm ci</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.539.1">
    - npm run lint</span></pre></li>
<li><span class="koboSpan" id="kobo.540.1">Finally, </span><strong class="source-inline"><span class="koboSpan" id="kobo.541.1">commit</span></strong><span class="koboSpan" id="kobo.542.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">push</span></strong><span class="koboSpan" id="kobo.544.1"> the code to GitLab using the </span><span class="No-Break"><span class="koboSpan" id="kobo.545.1">following commands:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.546.1">git add .</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.547.1">git commit -m "add linting"</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.548.1">git push</span></strong></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.549.1">Once the code has been pushed, we will see the pipeline run using the GitLab CI/CD UI, as follows (note how all the jobs at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">test</span></strong><span class="koboSpan" id="kobo.551.1"> stage are run </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">in parallel):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer370">
<span class="koboSpan" id="kobo.553.1"><img alt="Figure 13.17 – The GitLab CI/CD pipeline view with all the jobs succeeding, including “test” and “lint” running in parallel" src="image/Figure_13.17_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.554.1">Figure 13.17 – The GitLab CI/CD pipeline view with all the jobs succeeding, including “test” and “lint” running in parallel</span></p>
<p><span class="koboSpan" id="kobo.555.1">We’ve now seen how to </span><a id="_idIndexMarker1538"/><span class="koboSpan" id="kobo.556.1">use GitLab CI/CD to run builds and tests on every commit. </span><span class="koboSpan" id="kobo.556.2">Next, we’ll learn how to deploy a Vue.js application </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">to</span><a id="_idTextAnchor488"/><span class="koboSpan" id="kobo.558.1"> Netlify.</span></span></p>
<h1 id="_idParaDest-274"><a id="_idTextAnchor489"/><span class="koboSpan" id="kobo.559.1">Deploying to Netlify</span></h1>
<p><span class="koboSpan" id="kobo.560.1">Netlify is a hosting </span><a id="_idIndexMarker1539"/><span class="koboSpan" id="kobo.561.1">provider that specializes in static hosting and relevant supporting services to provide a fully interactive site that uses static hosting. </span><span class="koboSpan" id="kobo.561.2">This includes offerings such as Netlify Functions (serverless functions), Netlify Forms (a no-backend form submission system), and Netlify Identity (an </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">identity/authentication provider).</span></span></p>
<p><span class="koboSpan" id="kobo.563.1">The following sections require you to have a free Netlify account (you can sign up for one </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">at </span></span><a href="https://app.netlify.com/signup"><span class="No-Break"><span class="koboSpan" id="kobo.565.1">https://app.netlify.com/signup</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.566.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.567.1">The simplest way to deploy a site to Netlify is to use the drag-and-drop interface. </span><span class="koboSpan" id="kobo.567.2">You’ll find this at the bottom of the </span><strong class="bold"><span class="koboSpan" id="kobo.568.1">Sites</span></strong><span class="koboSpan" id="kobo.569.1"> page in the logged-in view, </span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer371">
<span class="koboSpan" id="kobo.571.1"><img alt="Figure 13.18 – Netlify’s drag-and-drop deployment section at the bottom of the App home page" src="image/Figure_13.18_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.572.1">Figure 13.18 – Netlify’s drag-and-drop deployment section at the bottom of the App home page</span></p>
<p><span class="koboSpan" id="kobo.573.1">Now, we can choose a </span><a id="_idIndexMarker1540"/><span class="koboSpan" id="kobo.574.1">project where we’ve run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.575.1">npm run build</span></strong><span class="koboSpan" id="kobo.576.1"> command and deploy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">dist</span></strong><span class="koboSpan" id="kobo.578.1"> folder by simply dragging it to the drag-and-drop deployment section, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer372">
<span class="koboSpan" id="kobo.580.1"><img alt="Figure 13.19 – Dragging and dropping the dist folder into the Netlify drag-and-drop deployment section" src="image/Figure_13.19_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.581.1">Figure 13.19 – Dragging and dropping the dist folder into the Netlify drag-and-drop deployment section</span></p>
<p><span class="koboSpan" id="kobo.582.1">Once the upload has</span><a id="_idIndexMarker1541"/><span class="koboSpan" id="kobo.583.1"> succeeded, Netlify will redirect you to your new website’s </span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">administration page:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer373">
<span class="koboSpan" id="kobo.585.1"><img alt="Figure 13.20 – The Netlify new app page for the drag-and-drop site" src="image/Figure_13.20_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.586.1">Figure 13.20 – The Netlify new app page for the drag-and-drop site</span></p>
<p><span class="koboSpan" id="kobo.587.1">We can click on the</span><a id="_idIndexMarker1542"/><span class="koboSpan" id="kobo.588.1"> link to the site. </span><span class="koboSpan" id="kobo.588.2">We’ll see the default Vue CLI home page template, </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer374">
<span class="koboSpan" id="kobo.590.1"><img alt="Figure 13.21 – Netlify new app displaying a greeting message" src="image/Figure_13.21_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.591.1">Figure 13.21 – Netlify new app displaying a greeting message</span></p>
<p><span class="koboSpan" id="kobo.592.1">With that, we’ve learned how to manually deploy a site to Netlify using the </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">drag-and-drop interface.</span></span></p>
<p><span class="koboSpan" id="kobo.594.1">Next, we will learn how to deploy our site from GitLab </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">to Netlify.</span></span></p>
<p><span class="koboSpan" id="kobo.596.1">On the Netlify app’s </span><strong class="bold"><span class="koboSpan" id="kobo.597.1">Sites</span></strong><span class="koboSpan" id="kobo.598.1"> page, we need to click the </span><strong class="bold"><span class="koboSpan" id="kobo.599.1">Add new site</span></strong><span class="koboSpan" id="kobo.600.1"> button, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer375">
<span class="koboSpan" id="kobo.602.1"><img alt="Figure 13.22 – Netlify home page with the New site from Git button" src="image/Figure_13.22_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.603.1">Figure 13.22 – Netlify home page with the New site from Git button</span></p>
<p><span class="koboSpan" id="kobo.604.1">In the dropdown, select </span><strong class="bold"><span class="koboSpan" id="kobo.605.1">Import an existing project</span></strong><span class="koboSpan" id="kobo.606.1">. </span><span class="koboSpan" id="kobo.606.2">We’ll see a page asking us to choose a Git provider to connect to. </span><span class="koboSpan" id="kobo.606.3">For this example, we will use </span><strong class="bold"><span class="koboSpan" id="kobo.607.1">GitLab</span></strong><span class="koboSpan" id="kobo.608.1">. </span><span class="koboSpan" id="kobo.608.2">The following screenshot shows</span><a id="_idIndexMarker1543"/><span class="koboSpan" id="kobo.609.1"> what the screen will </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">look like:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer376">
<span class="koboSpan" id="kobo.611.1"><img alt="Figure 13.23 – Netlify – Create a new site | Connect to Git provider" src="image/Figure_13.23_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.612.1">Figure 13.23 – Netlify – Create a new site | Connect to Git provider</span></p>
<p><span class="koboSpan" id="kobo.613.1">Upon clicking </span><strong class="bold"><span class="koboSpan" id="kobo.614.1">GitLab</span></strong><span class="koboSpan" id="kobo.615.1">, we will get an OAuth authorization challenge from GitLab, which we need to accept by clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.616.1">Authorize</span></strong><span class="koboSpan" id="kobo.617.1"> button, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer377">
<span class="koboSpan" id="kobo.619.1"><img alt="Figure 13.24 – GitLab OAuth authorization modal" src="image/Figure_13.24_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.620.1">Figure 13.24 – GitLab OAuth authorization modal</span></p>
<p><span class="koboSpan" id="kobo.621.1">We will then be</span><a id="_idIndexMarker1544"/><span class="koboSpan" id="kobo.622.1"> redirected to Netlify and asked to choose a repository to deploy, </span><span class="No-Break"><span class="koboSpan" id="kobo.623.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer378">
<span class="koboSpan" id="kobo.624.1"><img alt="Figure 13.25 – Selecting a GitLab repository to deploy" src="image/Figure_13.25_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.625.1">Figure 13.25 – Selecting a GitLab repository to deploy</span></p>
<p><span class="koboSpan" id="kobo.626.1">After selecting the repository we want to deploy, we will be met with a configuration page. </span><span class="koboSpan" id="kobo.626.2">Since we’re now building on Netlify’s build servers, we need to configure Netlify to build the application and deploy the </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">correct folder.</span></span></p>
<p><span class="koboSpan" id="kobo.628.1">By default, Netlify figures out both the proper </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">build</span></strong><span class="koboSpan" id="kobo.630.1"> command (</span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">npm run build</span></strong><span class="koboSpan" id="kobo.632.1">) and publish directory (</span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1">dist</span></strong><span class="koboSpan" id="kobo.634.1">). </span><span class="koboSpan" id="kobo.634.2">If you need to change these values for some reason, you can, but the defaults should work </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">for you.</span></span></p>
<p><span class="koboSpan" id="kobo.636.1">Then, we must</span><a id="_idIndexMarker1545"/><span class="koboSpan" id="kobo.637.1"> click the </span><strong class="bold"><span class="koboSpan" id="kobo.638.1">Deploy site</span></strong><span class="koboSpan" id="kobo.639.1"> button, which will start the deployment process, </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer379">
<span class="koboSpan" id="kobo.641.1"><img alt="Figure 13.26 – The Netlify build configuration tab with configured settings" src="image/Figure_13.26_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.642.1">Figure 13.26 – The Netlify build configuration tab with configured settings</span></p>
<p><span class="koboSpan" id="kobo.643.1">We will then be redirected to the newly created app’s page, as </span><span class="No-Break"><span class="koboSpan" id="kobo.644.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer380">
<span class="koboSpan" id="kobo.645.1"><img alt="Figure 13.27 – New Netlify app" src="image/Figure_13.27_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.646.1">Figure 13.27 – New Netlify app</span></p>
<p><span class="koboSpan" id="kobo.647.1">We have now seen </span><a id="_idIndexMarker1546"/><span class="koboSpan" id="kobo.648.1">how to deploy an application to Netlify using the manual upload method while using GitLab as the Git </span><span class="No-Break"><span class="koboSpan" id="kobo.649.1">hosting pr</span><a id="_idTextAnchor490"/><span class="koboSpan" id="kobo.650.1">ovider.</span></span></p>
<h2 id="_idParaDest-275"><a id="_idTextAnchor491"/><span class="koboSpan" id="kobo.651.1">Exercise 13.02 – deploying a site to Netlify from GitHub</span></h2>
<p><span class="koboSpan" id="kobo.652.1">In the previous</span><a id="_idIndexMarker1547"/><span class="koboSpan" id="kobo.653.1"> exercise, you saw how to deploy a site to</span><a id="_idIndexMarker1548"/><span class="koboSpan" id="kobo.654.1"> Netlify from GitLab. </span><span class="koboSpan" id="kobo.654.2">In this exercise, we’ll modify that process to deploy from GitHub. </span><span class="koboSpan" id="kobo.654.3">How different is it from deploying it from GitLab? </span><span class="koboSpan" id="kobo.654.4">The answer is that they are very similar; the only notable difference is the first step in the </span><strong class="bold"><span class="koboSpan" id="kobo.655.1">Connect to Git </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.656.1">provider</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.657.1"> tab:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.658.1">Begin by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.659.1">Add new site</span></strong><span class="koboSpan" id="kobo.660.1"> button on the </span><strong class="bold"><span class="koboSpan" id="kobo.661.1">Sites</span></strong><span class="koboSpan" id="kobo.662.1"> page, </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer381">
<span class="koboSpan" id="kobo.664.1"><img alt="Figure 13.28 – Add new site on the Netlify dashboard" src="image/Figure_13.28_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.665.1">Figure 13.28 – Add new site on the Netlify dashboard</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.666.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.667.1">Import an existing project</span></strong><span class="koboSpan" id="kobo.668.1"> and choose </span><strong class="bold"><span class="koboSpan" id="kobo.669.1">GitHub</span></strong><span class="koboSpan" id="kobo.670.1"> as the Git hosting provider, as</span><a id="_idIndexMarker1549"/><span class="koboSpan" id="kobo.671.1"> shown</span><a id="_idIndexMarker1550"/><span class="koboSpan" id="kobo.672.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer382">
<span class="koboSpan" id="kobo.674.1"><img alt="Figure 13.29 – Continuous deployment" src="image/Figure_13.29_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.675.1">Figure 13.29 – Continuous deployment</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.676.1">When we get the GitHub OAuth authorization challenge, as shown in the following</span><a id="_idIndexMarker1551"/><span class="koboSpan" id="kobo.677.1"> screenshot, we must </span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">authorize Netlify:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer383">
<span class="koboSpan" id="kobo.679.1"><img alt="Figure 13.30 – GitHub authorization challenge" src="image/Figure_13.30_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.680.1">Figure 13.30 – GitHub authorization challenge</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.681.1">Select the</span><a id="_idIndexMarker1552"/><span class="koboSpan" id="kobo.682.1"> Vue CLI project we want to deploy </span><a id="_idIndexMarker1553"/><span class="koboSpan" id="kobo.683.1">from the repository list, </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer384">
<span class="koboSpan" id="kobo.685.1"><img alt="Figure 13.31 – Selecting the correct repository" src="image/Figure_13.31_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.686.1">Figure 13.31 – Selecting the correct repository</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.687.1">On the </span><strong class="bold"><span class="koboSpan" id="kobo.688.1">Deployment options</span></strong><span class="koboSpan" id="kobo.689.1"> tab, do </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">the following:</span></span><ol><li><span class="koboSpan" id="kobo.691.1">Select </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">master</span></strong><span class="koboSpan" id="kobo.693.1"> (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">main</span></strong><span class="koboSpan" id="kobo.695.1">, depending on your repository) as the branch </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">to deploy.</span></span></li><li><span class="koboSpan" id="kobo.697.1">Set </span><strong class="bold"><span class="koboSpan" id="kobo.698.1">Build command</span></strong><span class="koboSpan" id="kobo.699.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">npm </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.701.1">run build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">.</span></span></li><li><span class="koboSpan" id="kobo.703.1">Set </span><strong class="bold"><span class="koboSpan" id="kobo.704.1">Publish directory</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.705.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">dist</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.707.1">.</span></span></li></ol></li>
</ol>
<p><span class="koboSpan" id="kobo.708.1">The last two points look </span><span class="No-Break"><span class="koboSpan" id="kobo.709.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer385">
<span class="koboSpan" id="kobo.710.1"><img alt="Figure 13.32 – The Netlify build configuration tab has been filled in with the proper settings" src="image/Figure_13.32_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.711.1">Figure 13.32 – The Netlify build configuration tab has been filled in with the proper settings</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.712.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.713.1">Deploy site</span></strong><span class="koboSpan" id="kobo.714.1"> to start the </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">deployment process.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.716.1">We’ve now seen how to deploy an application to Netlify using the manual upload method and using</span><a id="_idIndexMarker1554"/><span class="koboSpan" id="kobo.717.1"> GitLab or GitHub as the Git hosting </span><a id="_idIndexMarker1555"/><span class="koboSpan" id="kobo.718.1">provider. </span><span class="koboSpan" id="kobo.718.2">Next, we will learn how to use AWS S3 and AWS CloudFront to deploy a </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">Vue.js a</span><a id="_idTextAnchor492"/><span class="koboSpan" id="kobo.720.1">pplication.</span></span></p>
<h1 id="_idParaDest-276"><a id="_idTextAnchor493"/><span class="koboSpan" id="kobo.721.1">Deploying to AWS using S3 and CloudFront</span></h1>
<p><span class="koboSpan" id="kobo.722.1">Amazon</span><a id="_idIndexMarker1556"/><span class="koboSpan" id="kobo.723.1"> S3 is a </span><a id="_idIndexMarker1557"/><span class="koboSpan" id="kobo.724.1">static </span><a id="_idIndexMarker1558"/><span class="koboSpan" id="kobo.725.1">storage </span><a id="_idIndexMarker1559"/><span class="koboSpan" id="kobo.726.1">offering that can be used as a host for static files, such as what is generated by the Vue CLI’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.727.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.728.1"> script.</span></span></p>
<p><span class="koboSpan" id="kobo.729.1">CloudFront is </span><a id="_idIndexMarker1560"/><span class="koboSpan" id="kobo.730.1">AWS’s </span><strong class="bold"><span class="koboSpan" id="kobo.731.1">Content Delivery Network</span></strong><span class="koboSpan" id="kobo.732.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.733.1">CDN</span></strong><span class="koboSpan" id="kobo.734.1">) offering. </span><span class="koboSpan" id="kobo.734.2">A CDN can improve a web application’s performance by serving static content from an </span><strong class="bold"><span class="koboSpan" id="kobo.735.1">edge</span></strong><span class="koboSpan" id="kobo.736.1"> location. </span><span class="koboSpan" id="kobo.736.2">These servers are positioned around the world and are more likely to be geographically located close to the end user than the </span><strong class="bold"><span class="koboSpan" id="kobo.737.1">origin</span></strong><span class="koboSpan" id="kobo.738.1"> servers (the ones that serve the content). </span><span class="koboSpan" id="kobo.738.2">The edge servers in a CDN request resources from the origin if they don’t have them cached but will serve </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">subsequent requests.</span></span></p>
<p><span class="koboSpan" id="kobo.740.1">Let’s learn how to configure S3 to host a Vue.js application (to do this, make sure that you have an </span><span class="No-Break"><span class="koboSpan" id="kobo.741.1">AWS account):</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.742.1">Start by creating and configuring an </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">S3 bucket.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.744.1">To do this, head to the S3 product page. </span><span class="koboSpan" id="kobo.744.2">It will look similar to </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer386">
<span class="koboSpan" id="kobo.746.1"><img alt="Figure 13.33 – Selecting S3 from the AWS service list" src="image/Figure_13.33_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.747.1">Figure 13.33 – Selecting S3 from the AWS service list</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.748.1">On the </span><a id="_idIndexMarker1561"/><span class="koboSpan" id="kobo.749.1">S3 </span><a id="_idIndexMarker1562"/><span class="koboSpan" id="kobo.750.1">console</span><a id="_idIndexMarker1563"/><span class="koboSpan" id="kobo.751.1"> home page, click the </span><strong class="bold"><span class="koboSpan" id="kobo.752.1">Create bucket</span></strong><span class="koboSpan" id="kobo.753.1"> button, which </span><a id="_idIndexMarker1564"/><span class="koboSpan" id="kobo.754.1">will take us to the bucket creation page, as </span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">seen here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer387">
<span class="koboSpan" id="kobo.756.1"><img alt="Figure 1﻿3.34 – The Create bucket button in the AWS S3 console" src="image/Figure_13.34_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.757.1">Figure 13.34 – The Create bucket button in the AWS S3 console</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.758.1">To begin, we will start by naming our bucket. </span><span class="koboSpan" id="kobo.758.2">Bucket names must be unique, so consider using </span><strong class="source-inline"><span class="koboSpan" id="kobo.759.1">vue-workshop-yourname</span></strong><span class="koboSpan" id="kobo.760.1">. </span><span class="koboSpan" id="kobo.760.2">For this example, we’ve called </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.762.1">vue-workshop-ray</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer388">
<span class="koboSpan" id="kobo.764.1"><img alt="Figure 13.35 – Entering the bucket name on the bucket creation page" src="image/Figure_13.35_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.765.1">Figure 13.35 – Entering the bucket name on the bucket creation page</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.766.1">We will </span><a id="_idIndexMarker1565"/><span class="koboSpan" id="kobo.767.1">also </span><a id="_idIndexMarker1566"/><span class="koboSpan" id="kobo.768.1">need to</span><a id="_idIndexMarker1567"/><span class="koboSpan" id="kobo.769.1"> set the</span><a id="_idIndexMarker1568"/><span class="koboSpan" id="kobo.770.1"> S3 bucket to be public. </span><span class="koboSpan" id="kobo.770.2">This can be done by unselecting the </span><strong class="bold"><span class="koboSpan" id="kobo.771.1">Block all public access</span></strong><span class="koboSpan" id="kobo.772.1"> checkbox. </span><span class="koboSpan" id="kobo.772.2">Once this is done, we must check the acknowledgment checkbox, as </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">seen here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer389">
<span class="koboSpan" id="kobo.774.1"><img alt="Figure 13.36 – Setting the S3 bucket to be public and acknowledging the warning" src="image/Figure_13.36_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.775.1">Figure 13.36 – Setting the S3 bucket to be public and acknowledging the warning</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.776.1">Once this is</span><a id="_idIndexMarker1569"/><span class="koboSpan" id="kobo.777.1"> done, we </span><a id="_idIndexMarker1570"/><span class="koboSpan" id="kobo.778.1">will </span><a id="_idIndexMarker1571"/><span class="koboSpan" id="kobo.779.1">be</span><a id="_idIndexMarker1572"/><span class="koboSpan" id="kobo.780.1"> redirected to the bucket list page. </span><span class="koboSpan" id="kobo.780.2">We want to click into our new bucket. </span><span class="koboSpan" id="kobo.780.3">Then, we need to access the </span><strong class="bold"><span class="koboSpan" id="kobo.781.1">Properties</span></strong><span class="koboSpan" id="kobo.782.1"> tag to find the </span><strong class="bold"><span class="koboSpan" id="kobo.783.1">Static website </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.784.1">hosting</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.785.1"> option:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer390">
<span class="koboSpan" id="kobo.786.1"><img alt="Figure 13.37 – The Static website hosting option in the S3 bucket’s Properties tab" src="image/Figure_13.37_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.787.1">Figure 13.37 – The Static website hosting option in the S3 bucket’s Properties tab</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.788.1">We can fill in the </span><strong class="bold"><span class="koboSpan" id="kobo.789.1">Static website hosting</span></strong><span class="koboSpan" id="kobo.790.1"> S3 property by selecting </span><strong class="bold"><span class="koboSpan" id="kobo.791.1">Use this bucket to host a website</span></strong><span class="koboSpan" id="kobo.792.1"> and setting the index document and error document </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">index.html</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer391">
<span class="koboSpan" id="kobo.796.1"><img alt="Figure 13.38 – Filling out the Static website hosting S3 property" src="image/Figure_13.38_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.797.1">Figure 13.38 – Filling out the Static website hosting S3 property</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.798.1">After saving </span><a id="_idIndexMarker1573"/><span class="koboSpan" id="kobo.799.1">your </span><a id="_idIndexMarker1574"/><span class="koboSpan" id="kobo.800.1">changes, note </span><a id="_idIndexMarker1575"/><span class="koboSpan" id="kobo.801.1">the endpoint URL, which you will </span><a id="_idIndexMarker1576"/><span class="koboSpan" id="kobo.802.1">need </span><span class="No-Break"><span class="koboSpan" id="kobo.803.1">for CloudFront:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer392">
<span class="koboSpan" id="kobo.804.1"><img alt="Figure 13.39 – Noting the endpoint URL" src="image/Figure_13.39_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.805.1">Figure 13.39 – Noting the endpoint URL</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.806.1">We can now go back to the </span><strong class="bold"><span class="koboSpan" id="kobo.807.1">Objects</span></strong><span class="koboSpan" id="kobo.808.1"> tab of the S3 bucket page, click </span><strong class="bold"><span class="koboSpan" id="kobo.809.1">Upload</span></strong><span class="koboSpan" id="kobo.810.1">, and drag and drop the files from one of our </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">dist</span></strong><span class="koboSpan" id="kobo.812.1"> folders, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer393">
<span class="koboSpan" id="kobo.814.1"><img alt="Figure 13.40 – Adding files to the vue-workshop S3 bucket through drag and drop" src="image/Figure_13.40_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.815.1">Figure 13.40 – Adding files to the vue-workshop S3 bucket through drag and drop</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.816.1">Once the files </span><a id="_idIndexMarker1577"/><span class="koboSpan" id="kobo.817.1">have </span><a id="_idIndexMarker1578"/><span class="koboSpan" id="kobo.818.1">been</span><a id="_idIndexMarker1579"/><span class="koboSpan" id="kobo.819.1"> dropped onto the </span><strong class="bold"><span class="koboSpan" id="kobo.820.1">Overview</span></strong><span class="koboSpan" id="kobo.821.1"> page, we </span><a id="_idIndexMarker1580"/><span class="koboSpan" id="kobo.822.1">must click </span><strong class="bold"><span class="koboSpan" id="kobo.823.1">Upload</span></strong><span class="koboSpan" id="kobo.824.1"> to complete </span><span class="No-Break"><span class="koboSpan" id="kobo.825.1">the process.</span></span></li>
<li><span class="koboSpan" id="kobo.826.1">Next, we need to set a bucket policy to allow for read access to the files we’ve just uploaded. </span><span class="koboSpan" id="kobo.826.2">To do this, click the </span><strong class="bold"><span class="koboSpan" id="kobo.827.1">Permissions</span></strong><span class="koboSpan" id="kobo.828.1"> tab, and then </span><strong class="bold"><span class="koboSpan" id="kobo.829.1">Edit</span></strong><span class="koboSpan" id="kobo.830.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.831.1">Bucket policy</span></strong><span class="koboSpan" id="kobo.832.1"> section. </span><span class="koboSpan" id="kobo.832.2">In the </span><strong class="bold"><span class="koboSpan" id="kobo.833.1">Policy editor</span></strong><span class="koboSpan" id="kobo.834.1"> area, paste the </span><span class="No-Break"><span class="koboSpan" id="kobo.835.1">following JSON:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.836.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.837.1">
    "Version": "2012-10-17",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.838.1">
    "Statement": [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.839.1">
        {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.840.1">
            "Sid": "PublicReadGetObject",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.841.1">
            "Effect": "Allow",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.842.1">
            "Principal": "*",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.843.1">
            "Action": [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.844.1">
                "s3:GetObject"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.845.1">
            ],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.846.1">
            "Resource": [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.847.1">
                "arn:aws:s3:::vue-workshop-ray/*"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.848.1">
            ]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.849.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.850.1">
    ]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.851.1">
}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.852.1">Be sure</span><a id="_idIndexMarker1581"/><span class="koboSpan" id="kobo.853.1"> to </span><a id="_idIndexMarker1582"/><span class="koboSpan" id="kobo.854.1">change </span><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">vue-workshop-ray</span></strong><span class="koboSpan" id="kobo.856.1"> to </span><a id="_idIndexMarker1583"/><span class="koboSpan" id="kobo.857.1">the bucket</span><a id="_idIndexMarker1584"/><span class="koboSpan" id="kobo.858.1"> name you chose and click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.859.1">Save changes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.860.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer394">
<span class="koboSpan" id="kobo.861.1"><img alt="Figure 13.41 – Setting file permissions to public on files being uploaded to the S3 bucket" src="image/Figure_13.41_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.862.1">Figure 13.41 – Setting file permissions to public on files being uploaded to the S3 bucket</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.863.1">Our S3 bucket </span><a id="_idIndexMarker1585"/><span class="koboSpan" id="kobo.864.1">should </span><a id="_idIndexMarker1586"/><span class="koboSpan" id="kobo.865.1">now</span><a id="_idIndexMarker1587"/><span class="koboSpan" id="kobo.866.1"> be configured to host</span><a id="_idIndexMarker1588"/><span class="koboSpan" id="kobo.867.1"> static content. </span><span class="koboSpan" id="kobo.867.2">By visiting the website endpoint (available under </span><strong class="bold"><span class="koboSpan" id="kobo.868.1">Properties</span></strong><span class="koboSpan" id="kobo.869.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.870.1">Static website hosting</span></strong><span class="koboSpan" id="kobo.871.1">), we will see the following Vue.js application (which is what </span><span class="No-Break"><span class="koboSpan" id="kobo.872.1">we uploaded):</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer395">
<span class="koboSpan" id="kobo.873.1"><img alt="Figure 13.42 – The Vue.js application being served from our AWS S3 bucket" src="image/Figure_13.42_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.874.1">Figure 13.42 – The Vue.js application being served from our AWS S3 bucket</span></p>
<p><span class="koboSpan" id="kobo.875.1">Note that S3 can</span><a id="_idIndexMarker1589"/><span class="koboSpan" id="kobo.876.1"> only</span><a id="_idIndexMarker1590"/><span class="koboSpan" id="kobo.877.1"> serve</span><a id="_idIndexMarker1591"/><span class="koboSpan" id="kobo.878.1"> sites over HTTP, and domain</span><a id="_idIndexMarker1592"/><span class="koboSpan" id="kobo.879.1"> names cannot be configured directly from S3 buckets. </span><span class="koboSpan" id="kobo.879.2">Beyond performance and robustness, being able to set custom domain names and HTTPS support are other reasons to set up AWS CloudFront as a CDN for </span><span class="No-Break"><span class="koboSpan" id="kobo.880.1">our website.</span></span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.881.1">We will start by navigating to the CloudFront console and clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.882.1">Create distribution</span></strong><span class="koboSpan" id="kobo.883.1"> button, </span><span class="No-Break"><span class="koboSpan" id="kobo.884.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer396">
<span class="koboSpan" id="kobo.885.1"><img alt="Figure 13.43 – Selecting CloudFront from the AWS service list" src="image/Figure_13.43_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.886.1">Figure 13.43 – Selecting CloudFront from the AWS service list</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.887.1">Now, we must fill out the </span><strong class="bold"><span class="koboSpan" id="kobo.888.1">Origin</span></strong><span class="koboSpan" id="kobo.889.1"> details. </span><span class="koboSpan" id="kobo.889.2">The </span><strong class="bold"><span class="koboSpan" id="kobo.890.1">Origin domain</span></strong><span class="koboSpan" id="kobo.891.1"> property should be the</span><a id="_idIndexMarker1593"/><span class="koboSpan" id="kobo.892.1"> S3 </span><a id="_idIndexMarker1594"/><span class="koboSpan" id="kobo.893.1">bucket </span><a id="_idIndexMarker1595"/><span class="koboSpan" id="kobo.894.1">website </span><a id="_idIndexMarker1596"/><span class="koboSpan" id="kobo.895.1">endpoint domain – in other words, the domain of the URL we used to access it earlier. </span><span class="koboSpan" id="kobo.895.2">It looks something like </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">example.s3-website.us-west-1.amazonaws.com</span></strong><span class="koboSpan" id="kobo.897.1"> for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.898.1">example</span></strong><span class="koboSpan" id="kobo.899.1"> bucket in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.900.1">us-westwest-1</span></strong><span class="koboSpan" id="kobo.901.1"> region. </span><span class="koboSpan" id="kobo.901.2">The following screenshot </span><span class="No-Break"><span class="koboSpan" id="kobo.902.1">displays this:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer397">
<span class="koboSpan" id="kobo.903.1"><img alt="Figure 13.44 – Entering the website’s endpoint domain  in the CloudFront distribution’s Origin domain field" src="image/Figure_13.44_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.904.1">Figure 13.44 – Entering the website’s endpoint domain in the CloudFront distribution’s Origin domain field</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.905.1">While we are setting up the distribution, it’s a good idea to select the </span><strong class="bold"><span class="koboSpan" id="kobo.906.1">Redirect HTTP to HTTPS</span></strong><span class="koboSpan" id="kobo.907.1"> option for the </span><strong class="bold"><span class="koboSpan" id="kobo.908.1">Viewer protocol policy</span></strong><span class="koboSpan" id="kobo.909.1"> field; this can be found in the </span><strong class="bold"><span class="koboSpan" id="kobo.910.1">Default cache behavior</span></strong><span class="koboSpan" id="kobo.911.1"> section, </span><span class="No-Break"><span class="koboSpan" id="kobo.912.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer398">
<span class="koboSpan" id="kobo.913.1"><img alt="Figure 13.45 – Selecting Redirect HTTP to HTTPS for the Viewer ﻿protocol ﻿policy field" src="image/Figure_13.45_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.914.1">Figure 13.45 – Selecting Redirect HTTP to HTTPS for the Viewer protocol policy field</span></p>
<p><span class="koboSpan" id="kobo.915.1">Once done, we are</span><a id="_idIndexMarker1597"/><span class="koboSpan" id="kobo.916.1"> now </span><a id="_idIndexMarker1598"/><span class="koboSpan" id="kobo.917.1">ready </span><a id="_idIndexMarker1599"/><span class="koboSpan" id="kobo.918.1">to</span><a id="_idIndexMarker1600"/><span class="koboSpan" id="kobo.919.1"> click the </span><strong class="bold"><span class="koboSpan" id="kobo.920.1">Create distribution</span></strong><span class="koboSpan" id="kobo.921.1"> button and wait for the changes </span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">to propagate.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.923.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.924.1">CloudFront distribution changes take a while to propagate since they are being deployed to servers around </span><span class="No-Break"><span class="koboSpan" id="kobo.925.1">the world.</span></span></p>
<p><span class="koboSpan" id="kobo.926.1">We can open the domain name for the CloudFront distribution once the console’s status is </span><strong class="bold"><span class="koboSpan" id="kobo.927.1">Deployed</span></strong><span class="koboSpan" id="kobo.928.1">. </span><span class="koboSpan" id="kobo.928.2">With that, we have seen how to set up S3 and CloudFront to serve a static website. </span><span class="koboSpan" id="kobo.928.3">We will now learn how to use the AWS CLI to synchronize a local directory to the </span><span class="No-Break"><span class="koboSpan" id="kobo.929.1">S3 bucket.</span></span></p>
<p><span class="koboSpan" id="kobo.930.1">A prerequisite for the next section is to have a shell instance that has AWS credentials that have been injected using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">AWS_ACCESS_KEY_ID</span></strong><span class="koboSpan" id="kobo.932.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">AWS_SECRET_ACCESS_KEY</span></strong><span class="koboSpan" id="kobo.934.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">AWS_DEFAULT_REGION</span></strong><span class="koboSpan" id="kobo.936.1"> environment variables. </span><span class="koboSpan" id="kobo.936.2">The access key and secret key need to be generated from the </span><strong class="bold"><span class="koboSpan" id="kobo.937.1">Account</span></strong><span class="koboSpan" id="kobo.938.1"> dropdown by selecting </span><strong class="bold"><span class="koboSpan" id="kobo.939.1">My Security Credentials</span></strong><span class="koboSpan" id="kobo.940.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.941.1">Access Keys</span></strong><span class="koboSpan" id="kobo.942.1">. </span><span class="koboSpan" id="kobo.942.2">It also requires version 2 of the </span><span class="No-Break"><span class="koboSpan" id="kobo.943.1">AWS CLI.</span></span></p>
<p><span class="koboSpan" id="kobo.944.1">If we’re in a Vue CLI project, we can deploy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.945.1">dist</span></strong><span class="koboSpan" id="kobo.946.1"> folder (which can be built using </span><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">npm run build</span></strong><span class="koboSpan" id="kobo.948.1">) to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.949.1">vue-workshop</span></strong><span class="koboSpan" id="kobo.950.1"> bucket using an AWS S3 CLI command. </span><span class="koboSpan" id="kobo.950.2">We want to update an </span><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">s3</span></strong><span class="koboSpan" id="kobo.952.1"> resource so that our command will start with </span><strong class="source-inline"><span class="koboSpan" id="kobo.953.1">aws s3</span></strong><span class="koboSpan" id="kobo.954.1">. </span><span class="koboSpan" id="kobo.954.2">The command we want to issue is to synchronize files, so we will use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.955.1">aws s3 </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.956.1">sync</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.957.1"> command.</span></span></p>
<p><span class="koboSpan" id="kobo.958.1">We will sync </span><strong class="source-inline"><span class="koboSpan" id="kobo.959.1">./dist</span></strong><span class="koboSpan" id="kobo.960.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.961.1">vue-workshop</span></strong><span class="koboSpan" id="kobo.962.1"> S3 bucket using the AWS URI syntax – that is, </span><strong class="source-inline"><span class="koboSpan" id="kobo.963.1">s3://vue-workshop</span></strong><span class="koboSpan" id="kobo.964.1">. </span><span class="koboSpan" id="kobo.964.2">We also want to make sure that the files we upload, just like </span><a id="_idIndexMarker1601"/><span class="koboSpan" id="kobo.965.1">the </span><a id="_idIndexMarker1602"/><span class="koboSpan" id="kobo.966.1">bucket </span><a id="_idIndexMarker1603"/><span class="koboSpan" id="kobo.967.1">configuration, allow </span><strong class="source-inline"><span class="koboSpan" id="kobo.968.1">public-read</span></strong><span class="koboSpan" id="kobo.969.1">. </span><span class="koboSpan" id="kobo.969.2">In full, the command</span><a id="_idIndexMarker1604"/><span class="koboSpan" id="kobo.970.1"> looks </span><span class="No-Break"><span class="koboSpan" id="kobo.971.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.972.1">
aws s3 </span><a id="_idTextAnchor494"/><span class="koboSpan" id="kobo.973.1">sync ./dist s3://vue-workshop --acl=public-read</span></pre>
<p><span class="koboSpan" id="kobo.974.1">Now, let’s take what we’ve learned and apply it to our </span><span class="No-Break"><span class="koboSpan" id="kobo.975.1">GitLab process.</span></span></p>
<h2 id="_idParaDest-277"><a id="_idTextAnchor495"/><span class="koboSpan" id="kobo.976.1">Exercise 13.03 – deploying to S3 from GitLab CI/CD</span></h2>
<p><span class="koboSpan" id="kobo.977.1">S3 is a very</span><a id="_idIndexMarker1605"/><span class="koboSpan" id="kobo.978.1"> cost-effective and performant </span><a id="_idIndexMarker1606"/><span class="koboSpan" id="kobo.979.1">solution </span><a id="_idIndexMarker1607"/><span class="koboSpan" id="kobo.980.1">for storing static files at scale. </span><span class="koboSpan" id="kobo.980.2">In this exercise, we’ll learn how to integrate GitLab CI/CD and AWS S3 to deploy a Vue.js application. </span><span class="koboSpan" id="kobo.980.3">This automates the deployment of the Vue.js application. </span><span class="koboSpan" id="kobo.980.4">The deployment will run on every push to GitLab without any </span><span class="No-Break"><span class="koboSpan" id="kobo.981.1">manual intervention.</span></span></p>
<p><span class="koboSpan" id="kobo.982.1">You can find the complete code for this exercise </span><span class="No-Break"><span class="koboSpan" id="kobo.983.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Exercise13.03"><span class="No-Break"><span class="koboSpan" id="kobo.984.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Exercise13.03</span></span></a></p>
<p><span class="koboSpan" id="kobo.985.1">To deploy to the S3 bucket from GitLab CI/CD, we will need to set up </span><span class="No-Break"><span class="koboSpan" id="kobo.986.1">credential management:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.987.1">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.988.1">CI/CD</span></strong><span class="koboSpan" id="kobo.989.1"> in the </span><strong class="bold"><span class="koboSpan" id="kobo.990.1">Settings</span></strong><span class="koboSpan" id="kobo.991.1"> section of GitLab, </span><span class="No-Break"><span class="koboSpan" id="kobo.992.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer399">
<span class="koboSpan" id="kobo.993.1"><img alt="Figure 13.46 – CI/CD in the Settings menu" src="image/Figure_13.46_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.994.1">Figure 13.46 – CI/CD in the Settings menu</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.995.1">We will </span><a id="_idIndexMarker1608"/><span class="koboSpan" id="kobo.996.1">want </span><a id="_idIndexMarker1609"/><span class="koboSpan" id="kobo.997.1">to </span><a id="_idIndexMarker1610"/><span class="koboSpan" id="kobo.998.1">add variables, so let’s expand that section. </span><span class="koboSpan" id="kobo.998.2">You will see an empty list of variables, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.999.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer400">
<span class="koboSpan" id="kobo.1000.1"><img alt="Figure 13.47 – The Variables section of the GitLab CI/CD settings expanded" src="image/Figure_13.47_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1001.1">Figure 13.47 – The Variables section of the GitLab CI/CD settings expanded</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.1002.1">Next, we’ll</span><a id="_idIndexMarker1611"/><span class="koboSpan" id="kobo.1003.1"> add</span><a id="_idIndexMarker1612"/><span class="koboSpan" id="kobo.1004.1"> two</span><a id="_idIndexMarker1613"/><span class="koboSpan" id="kobo.1005.1"> variables, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1006.1">AWS_ACCESS_KEY_ID</span></strong><span class="koboSpan" id="kobo.1007.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1008.1">AWS_SECRET_ACCESS_KEY</span></strong><span class="koboSpan" id="kobo.1009.1">, using the UI (the values of these are not shown since they’re sensitive API keys), </span><span class="No-Break"><span class="koboSpan" id="kobo.1010.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer401">
<span class="koboSpan" id="kobo.1011.1"><img alt="Figure 13.48 – Entering the AWS_ACCESS_KEY_ID environment variable" src="image/Figure_13.48_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1012.1">Figure 13.48 – Entering the AWS_ACCESS_KEY_ID environment variable</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.1013.1">Now, we</span><a id="_idIndexMarker1614"/><span class="koboSpan" id="kobo.1014.1"> can</span><a id="_idIndexMarker1615"/><span class="koboSpan" id="kobo.1015.1"> add the default </span><strong class="source-inline"><span class="koboSpan" id="kobo.1016.1">AWS_REGION</span></strong><span class="koboSpan" id="kobo.1017.1"> variable using the UI (this isn’t so sensitive, so its value is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1018.1">following screenshot):</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer402">
<span class="koboSpan" id="kobo.1019.1"><img alt="Figure 13.49 – Entering the AWS_DEFAULT_REGION environment variable" src="image/Figure_13.49_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1020.1">Figure 13.49 – Entering the AWS_DEFAULT_REGION environment variable</span></p>
<p><span class="koboSpan" id="kobo.1021.1">Now that</span><a id="_idIndexMarker1616"/><span class="koboSpan" id="kobo.1022.1"> we have set up our environment</span><a id="_idIndexMarker1617"/><span class="koboSpan" id="kobo.1023.1"> variables on GitLab CI/CD, we can </span><a id="_idIndexMarker1618"/><span class="koboSpan" id="kobo.1024.1">start updating our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1025.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1026.1">gitlab-ci.yml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1027.1"> file.</span></span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.1028.1">First, we want to start caching the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1029.1">dist</span></strong><span class="koboSpan" id="kobo.1030.1"> directory after our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1031.1">build</span></strong><span class="koboSpan" id="kobo.1032.1"> step. </span><span class="koboSpan" id="kobo.1032.2">To do this, we need to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1033.1">cache</span></strong><span class="koboSpan" id="kobo.1034.1"> property to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1035.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1036.1"> job:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1037.1">
build:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1038.1">
  # other properties</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1039.1">
  cache:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1040.1">
    key: $CI_COMMIT_REF_SLUG</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1041.1">
    paths:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1042.1">
      - dist</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1043.1">
  # other properties</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1044.1">
# other jobs</span></pre></li>
<li><span class="koboSpan" id="kobo.1045.1">We can now add our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1046.1">deploy</span></strong><span class="koboSpan" id="kobo.1047.1"> job, which will be a part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1048.1">deploy</span></strong><span class="koboSpan" id="kobo.1049.1"> stage. </span><span class="koboSpan" id="kobo.1049.2">To access the AWS CLI, we will use a Python image (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1050.1">python:latest</span></strong><span class="koboSpan" id="kobo.1051.1">) and install the AWS CLI using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1052.1">pip</span></strong><span class="koboSpan" id="kobo.1053.1"> (a Python package manager) in our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1054.1">before_script</span></strong><span class="koboSpan" id="kobo.1055.1"> step. </span><span class="koboSpan" id="kobo.1055.2">Once we’ve</span><a id="_idIndexMarker1619"/><span class="koboSpan" id="kobo.1056.1"> installed the AWS CLI, we </span><a id="_idIndexMarker1620"/><span class="koboSpan" id="kobo.1057.1">will </span><a id="_idIndexMarker1621"/><span class="koboSpan" id="kobo.1058.1">run the deployment in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1059.1">script</span></strong><span class="koboSpan" id="kobo.1060.1"> step using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1061.1">aws s3 sync</span></strong><span class="koboSpan" id="kobo.1062.1"> command we used to deploy from our </span><span class="No-Break"><span class="koboSpan" id="kobo.1063.1">local machine:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1064.1">
# other jobs</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1065.1">
deploy:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1066.1">
  image: python:latest</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1067.1">
  stage: deploy</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1068.1">
  cache:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1069.1">
    key: $CI_COMMIT_REF_SLUG</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1070.1">
    paths:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1071.1">
      - dist</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1072.1">
  before_script:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1073.1">
    - pip install awscli</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1074.1">
  script:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1075.1">
    - aws s3 sync ./dist s3://vue-workshop-ray --acl=public-read</span></pre></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.1076.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1077.1">We don’t need to invalidate caches since the Vite </span><strong class="source-inline"><span class="koboSpan" id="kobo.1078.1">build</span></strong><span class="koboSpan" id="kobo.1079.1"> command has built-in cache-busting, which it does by fingerprinting the contents of a file in the filename. </span><span class="koboSpan" id="kobo.1079.2">Fingerprinting means that if the contents of a file change, its name/URL will change accordingly. </span><span class="koboSpan" id="kobo.1079.3">When this new file is requested, it will be loaded from an uncached URL and will therefore get the latest version of </span><span class="No-Break"><span class="koboSpan" id="kobo.1080.1">the file.</span></span></p>
<p><span class="koboSpan" id="kobo.1081.1">Once this update to the configuration is pushed to the GitLab repository, we will see the pipeline running three stages that all pass, </span><span class="No-Break"><span class="koboSpan" id="kobo.1082.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer403">
<span class="koboSpan" id="kobo.1083.1"><img alt="Figure 13.50 – Passing the build, test, and deploy jobs" src="image/Figure_13.50_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1084.1">Figure 13.50 – Passing the build, test, and deploy jobs</span></p>
<p><span class="koboSpan" id="kobo.1085.1">We have now</span><a id="_idIndexMarker1622"/><span class="koboSpan" id="kobo.1086.1"> seen how to configure and deploy a</span><a id="_idIndexMarker1623"/><span class="koboSpan" id="kobo.1087.1"> Vue.js </span><a id="_idIndexMarker1624"/><span class="koboSpan" id="kobo.1088.1">applic</span><a id="_idTextAnchor496"/><span class="koboSpan" id="kobo.1089.1">ation to S3 and CloudFront using the AWS CLI and </span><span class="No-Break"><span class="koboSpan" id="kobo.1090.1">GitLab CI/CD.</span></span></p>
<h2 id="_idParaDest-278"><a id="_idTextAnchor497"/><span class="koboSpan" id="kobo.1091.1">Activity 13.01 – adding CI/CD to a Book Search app with GitLab and deploying it to Netlify</span></h2>
<p><span class="koboSpan" id="kobo.1092.1">Now, let’s</span><a id="_idIndexMarker1625"/><span class="koboSpan" id="kobo.1093.1"> take a</span><a id="_idIndexMarker1626"/><span class="koboSpan" id="kobo.1094.1"> fully</span><a id="_idIndexMarker1627"/><span class="koboSpan" id="kobo.1095.1"> built Book Search </span><a id="_idIndexMarker1628"/><span class="koboSpan" id="kobo.1096.1">Vue.js </span><a id="_idIndexMarker1629"/><span class="koboSpan" id="kobo.1097.1">application that loads data from the Google Books API and deploy it to GitLab CI/CD and Netlify. </span><span class="koboSpan" id="kobo.1097.2">We will start by running the production build locally and checking </span><span class="No-Break"><span class="koboSpan" id="kobo.1098.1">the output.</span></span></p>
<p><span class="koboSpan" id="kobo.1099.1">Then, we will switch to running the build and code quality steps (linting) on GitLab CI/CD. </span><span class="koboSpan" id="kobo.1099.2">Finally, we will set up a new Netlify application sourced to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1100.1">GitLab repository.</span></span></p>
<p><span class="koboSpan" id="kobo.1101.1">The starting code for this activity can be found at </span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Activity13.01_initial"><span class="koboSpan" id="kobo.1102.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Activity13.01_initial</span></a><span class="koboSpan" id="kobo.1103.1">; we will start with a </span><strong class="bold"><span class="koboSpan" id="kobo.1104.1">Book Search</span></strong><span class="koboSpan" id="kobo.1105.1"> application built with the Vue CLI. </span><span class="koboSpan" id="kobo.1105.2">The solution can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.1106.1">at </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Activity13.01_solution"><span class="No-Break"><span class="koboSpan" id="kobo.1107.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter13/Activity13.01_solution</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1108.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1109.1">To start, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.1110.1">these steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1111.1">We will run a production build locally. </span><span class="koboSpan" id="kobo.1111.2">We can use the command used to build all Vue CLI projects for production. </span><span class="koboSpan" id="kobo.1111.3">We will also want to check that the relevant assets (JavaScript, CSS, and HTML) are </span><span class="No-Break"><span class="koboSpan" id="kobo.1112.1">generated correctly.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1113.1">We expect the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1114.1">dist</span></strong><span class="koboSpan" id="kobo.1115.1"> folder</span><a id="_idIndexMarker1630"/><span class="koboSpan" id="kobo.1116.1"> to</span><a id="_idIndexMarker1631"/><span class="koboSpan" id="kobo.1117.1"> contain </span><a id="_idIndexMarker1632"/><span class="koboSpan" id="kobo.1118.1">a similar</span><a id="_idIndexMarker1633"/><span class="koboSpan" id="kobo.1119.1"> structure, </span><span class="No-Break"><span class="koboSpan" id="kobo.1120.1">as</span></span><span class="No-Break"><a id="_idIndexMarker1634"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1121.1"> follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer404">
<span class="koboSpan" id="kobo.1122.1"><img alt="Figure 13.51 – Sample contents of the dist folder (generated using the tree command) after a production build run" src="image/Figure_13.51_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1123.1">Figure 13.51 – Sample contents of the dist folder (generated using the tree command) after a production build run</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.1124.1">To run GitLab CI/CD, we will need a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.1126.1"> file. </span><span class="koboSpan" id="kobo.1126.2">We will add a job to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1127.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.1128.1"> in which we will install the packages followed by the production build into a Node.js LTS Docker container, at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1129.1">build</span></strong><span class="koboSpan" id="kobo.1130.1"> stage. </span><span class="koboSpan" id="kobo.1130.2">We will also make sure to cache the output of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1131.1">production build.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1132.1">Once we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1133.1">git add .gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.1134.1"> and commit and push the changes, we should see the following GitLab CI/CD pipeline run, which includes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1135.1">build</span></strong><span class="koboSpan" id="kobo.1136.1"> job while it is running (note the </span><span class="No-Break"><span class="koboSpan" id="kobo.1137.1">moon-like icon):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer405">
<span class="koboSpan" id="kobo.1138.1"><img alt="Figure 1﻿3.52 – The GitLab CI/CD pipeline with the build job running" src="image/Figure_13.52_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1139.1">Figure 13.52 – The GitLab CI/CD pipeline with the build job running</span></p>
<p><span class="koboSpan" id="kobo.1140.1">The </span><a id="_idIndexMarker1635"/><span class="koboSpan" id="kobo.1141.1">following</span><a id="_idIndexMarker1636"/><span class="koboSpan" id="kobo.1142.1"> screenshot, on </span><a id="_idIndexMarker1637"/><span class="koboSpan" id="kobo.1143.1">the </span><a id="_idIndexMarker1638"/><span class="koboSpan" id="kobo.1144.1">other </span><a id="_idIndexMarker1639"/><span class="koboSpan" id="kobo.1145.1">hand, shows the GitLab CI/CD pipeline when the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1146.1">build</span></strong><span class="koboSpan" id="kobo.1147.1"> job has been completed and is in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1148.1">passed</span></strong><span class="koboSpan" id="kobo.1149.1"> state (look for the </span><span class="No-Break"><span class="koboSpan" id="kobo.1150.1">green check):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer406">
<span class="koboSpan" id="kobo.1151.1"><img alt="Figure 13.53 – GitLab CI/CD pipeline with the build job passed" src="image/Figure_13.53_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1152.1">Figure 13.53 – GitLab CI/CD pipeline with the build job passed</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.1153.1">Next, we</span><a id="_idIndexMarker1640"/><span class="koboSpan" id="kobo.1154.1"> will </span><a id="_idIndexMarker1641"/><span class="koboSpan" id="kobo.1155.1">want</span><a id="_idIndexMarker1642"/><span class="koboSpan" id="kobo.1156.1"> to add </span><a id="_idIndexMarker1643"/><span class="koboSpan" id="kobo.1157.1">a</span><a id="_idIndexMarker1644"/><span class="koboSpan" id="kobo.1158.1"> code quality job to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1159.1">test</span></strong><span class="koboSpan" id="kobo.1160.1"> stage on GitLab CI/CD (by updating </span><strong class="source-inline"><span class="koboSpan" id="kobo.1161.1">.gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.1162.1">). </span><span class="koboSpan" id="kobo.1162.2">We’ll call the job </span><strong class="source-inline"><span class="koboSpan" id="kobo.1163.1">lint</span></strong><span class="koboSpan" id="kobo.1164.1"> and it will run an install of the dependencies as well as linting through the </span><span class="No-Break"><span class="koboSpan" id="kobo.1165.1">Vue CLI.</span></span></li>
<li><span class="koboSpan" id="kobo.1166.1">Once we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.1167.1">git add .gitlab-ci.yml</span></strong><span class="koboSpan" id="kobo.1168.1"> and commit and push the changes, we should see the following GitLab CI/CD pipeline run, which includes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1169.1">lint</span></strong><span class="koboSpan" id="kobo.1170.1"> job while it </span><span class="No-Break"><span class="koboSpan" id="kobo.1171.1">is running:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer407">
<span class="koboSpan" id="kobo.1172.1"><img alt="Figure 13.54 – The GitLab CI/CD pipeline with the lint job running" src="image/Figure_13.54_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1173.1">Figure 13.54 – The GitLab CI/CD pipeline with the lint job running</span></p>
<p><span class="koboSpan" id="kobo.1174.1">The</span><a id="_idIndexMarker1645"/><span class="koboSpan" id="kobo.1175.1"> following </span><a id="_idIndexMarker1646"/><span class="koboSpan" id="kobo.1176.1">screenshot </span><a id="_idIndexMarker1647"/><span class="koboSpan" id="kobo.1177.1">shows </span><a id="_idIndexMarker1648"/><span class="koboSpan" id="kobo.1178.1">the </span><a id="_idIndexMarker1649"/><span class="koboSpan" id="kobo.1179.1">GitLab CI/CD pipeline with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1180.1">lint</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1181.1">job completed:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer408">
<span class="koboSpan" id="kobo.1182.1"><img alt="Figure 13.55 – GitLab CI/CD pipeline with the lint job completed" src="image/Figure_13.55_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1183.1">Figure 13.55 – GitLab CI/CD pipeline with the lint job completed</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.1184.1">To</span><a id="_idIndexMarker1650"/><span class="koboSpan" id="kobo.1185.1"> deploy</span><a id="_idIndexMarker1651"/><span class="koboSpan" id="kobo.1186.1"> our </span><a id="_idIndexMarker1652"/><span class="koboSpan" id="kobo.1187.1">application, we’ll</span><a id="_idIndexMarker1653"/><span class="koboSpan" id="kobo.1188.1"> need to</span><a id="_idIndexMarker1654"/><span class="koboSpan" id="kobo.1189.1"> create a new Netlify application. </span><span class="koboSpan" id="kobo.1189.2">From the </span><strong class="bold"><span class="koboSpan" id="kobo.1190.1">Sites</span></strong><span class="koboSpan" id="kobo.1191.1"> menu, add a new site and select </span><strong class="bold"><span class="koboSpan" id="kobo.1192.1">GitLab</span></strong><span class="koboSpan" id="kobo.1193.1"> as the provider. </span><span class="koboSpan" id="kobo.1193.2">You should see your repository in the list </span><span class="No-Break"><span class="koboSpan" id="kobo.1194.1">of repos:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer409">
<span class="koboSpan" id="kobo.1195.1"><img alt="Figure 13.56 – Selecting the repository for the Netlify site" src="image/Figure_13.56_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1196.1">Figure 13.56 – Selecting the repository for the Netlify site</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.1197.1">In the </span><a id="_idIndexMarker1655"/><span class="koboSpan" id="kobo.1198.1">next </span><a id="_idIndexMarker1656"/><span class="koboSpan" id="kobo.1199.1">step, you </span><a id="_idIndexMarker1657"/><span class="koboSpan" id="kobo.1200.1">can </span><a id="_idIndexMarker1658"/><span class="koboSpan" id="kobo.1201.1">confirm </span><a id="_idIndexMarker1659"/><span class="koboSpan" id="kobo.1202.1">that Netlify automatically recognizes how to build and deploy your site. </span><span class="koboSpan" id="kobo.1202.2">Both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">build</span></strong><span class="koboSpan" id="kobo.1204.1"> command and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1205.1">publish</span></strong><span class="koboSpan" id="kobo.1206.1"> directory should be set </span><span class="No-Break"><span class="koboSpan" id="kobo.1207.1">as follows:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer410">
<span class="koboSpan" id="kobo.1208.1"><img alt="Figure 13.57 – The S3 bucket properties page with web hosting enabled and configured with the index and error page set to index.html" src="image/Figure_13.57_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1209.1">Figure 13.57 – The S3 bucket properties page with web hosting enabled and configured with the index and error page set to index.html</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.1210.1">Then, click </span><strong class="bold"><span class="koboSpan" id="kobo.1211.1">Deploy site</span></strong><span class="koboSpan" id="kobo.1212.1">. </span><span class="koboSpan" id="kobo.1212.2">Netlify </span><a id="_idIndexMarker1660"/><span class="koboSpan" id="kobo.1213.1">will</span><a id="_idIndexMarker1661"/><span class="koboSpan" id="kobo.1214.1"> fetch </span><a id="_idIndexMarker1662"/><span class="koboSpan" id="kobo.1215.1">the </span><a id="_idIndexMarker1663"/><span class="koboSpan" id="kobo.1216.1">code from</span><a id="_idIndexMarker1664"/><span class="koboSpan" id="kobo.1217.1"> GitLab and run its </span><span class="No-Break"><span class="koboSpan" id="kobo.1218.1">build script:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer411">
<span class="koboSpan" id="kobo.1219.1"><img alt="Figure 13.58 – Netlify running its deploy process" src="image/Figure_13.58_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1220.1">Figure 13.58 – Netlify running its deploy process</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.1221.1">When done, you can click the URL for the site Netlify created and see the </span><span class="No-Break"><span class="koboSpan" id="kobo.1222.1">app running:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer412">
<span class="koboSpan" id="kobo.1223.1"><img alt="Figure 13.59 – The Vue application running on Netlify" src="image/Figure_13.59_B18645.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1224.1">Figure 13.59 – The Vue application running on Netlify</span></p>
<p><span class="koboSpan" id="kobo.1225.1">You’ve </span><a id="_idIndexMarker1665"/><span class="koboSpan" id="kobo.1226.1">now </span><a id="_idIndexMarker1666"/><span class="koboSpan" id="kobo.1227.1">walked </span><a id="_idIndexMarker1667"/><span class="koboSpan" id="kobo.1228.1">through </span><a id="_idIndexMarker1668"/><span class="koboSpan" id="kobo.1229.1">the process of taking a </span><a id="_idIndexMarker1669"/><span class="koboSpan" id="kobo.1230.1">real (if simple) Vue application and creating a CI/CD process</span><a id="_idTextAnchor498"/><span class="koboSpan" id="kobo.1231.1"> that lets you go from development to production in an automated and safe </span><span class="No-Break"><span class="koboSpan" id="kobo.1232.1">manner. </span><span class="koboSpan" id="kobo.1232.2">Congratulations!</span></span></p>
<h1 id="_idParaDest-279"><a id="_idTextAnchor499"/><span class="koboSpan" id="kobo.1233.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1234.1">Throughout this chapter, we’ve looked at how to introduce CI and CD practices to Vue.js projects so that we can deploy to production safely and efficiently. </span><span class="koboSpan" id="kobo.1234.2">We’ve also seen how CI and CD are beneficial in the context of an agile </span><span class="No-Break"><span class="koboSpan" id="kobo.1235.1">delivery process.</span></span></p>
<p><span class="koboSpan" id="kobo.1236.1">We used GitLab’s CI/CD features to run tests, linting, and builds on every commit. </span><span class="koboSpan" id="kobo.1236.2">We also learned how to leverage Netlify to host a static website by connecting Netlify to our hosting provider. </span><span class="koboSpan" id="kobo.1236.3">Finally, we looked at how to set up and deploy to AWS S3 </span><span class="No-Break"><span class="koboSpan" id="kobo.1237.1">and CloudFront.</span></span></p>
<p><span class="koboSpan" id="kobo.1238.1">Throughout this book, you have learned how to use Vue.js to successfully build powerful, yet easy-to-build, web applications. </span><span class="koboSpan" id="kobo.1238.2">You’ve worked with data, animations, forms, and more to build multiple different types of applications with various styles of user interaction. </span><span class="koboSpan" id="kobo.1238.3">You also learned how to test all aspects of the application and finally took the steps to get your application into a live, </span><span class="No-Break"><span class="koboSpan" id="kobo.1239.1">production environment!</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer414">
</div>
</div>
</body></html>