<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Beginning with the Example Application"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Beginning with the Example Application</h1></div></div></div><p>Now that you have an idea about how React Native works and how to create components, let's create your first React Native application. Throughout this book, we will be developing a note-taking application which we'll call <a id="id32" class="indexterm"/>
<span class="strong"><strong>ReactNotes</strong></span>. By the end of the book, you'll have a fully featured application that allows you to create notes, save them to a device, view the list of the notes you've saved, take pictures with the device and attach them to your notes, and much more.</p><p>In this chapter, we'll build the skeleton of the application, create a <code class="literal">HomeScreen</code> and <code class="literal">NoteScreen</code>. We'll also add navigation that allows you to switch between the screens, and along the way you'll learn about creating your own components and handling events.</p><p>The topics that we will cover in this chapter are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How to generate iOS and Android project files</li><li class="listitem" style="list-style-type: disc">Examining the React Native starter template</li><li class="listitem" style="list-style-type: disc">Creating the first component, <code class="literal">SimpleButton</code></li><li class="listitem" style="list-style-type: disc">Debugging with Chrome Developer Tools</li><li class="listitem" style="list-style-type: disc">Exploring navigation and transitioning between screens</li><li class="listitem" style="list-style-type: disc">Developing the UI to create notes</li></ul></div><div class="section" title="Generating the projects"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec15"/>Generating the projects</h1></div></div></div><p>To start building our note<a id="id33" class="indexterm"/> taking application for iOS, we are going to need a couple of command-line tools.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">React Native 0.14.2 requires <a id="id34" class="indexterm"/><span class="strong"><strong>Node.js v4+</strong></span>, we are going to use v5.0.0; visit <a class="ulink" href="https://nodejs.org">https://nodejs.org</a> for <a id="id35" class="indexterm"/>more information (we recommend managing different node versions with NVM <a class="ulink" href="https://github.com/creationix/nvm">https://github.com/creationix/nvm</a>)</li><li class="listitem" style="list-style-type: disc">Install the latest version of NPM<a id="id36" class="indexterm"/> from <a class="ulink" href="https://www.npmjs.com/">https://www.npmjs.com/</a></li></ul></div><p>Great, now that we have <a id="id37" class="indexterm"/>these tools we can install the <code class="literal">react-native-cli</code>. The <code class="literal">react-native-cli</code> exposes an interface that does all the work of setting up a new React Native project for us:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To install <code class="literal">react-native-cli</code>, use the <code class="literal">npm</code> command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>npm install -g react-native-cli</strong></span>
</pre></div></li><li class="listitem">Next, we are going to generate a new React Native project called <code class="literal">ReactNotes</code> using the <code class="literal">cli</code> and the <code class="literal">react-native init</code> command. The output of the command looks similar to the following:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ react-native init ReactNotes</strong></span>
</pre></div><p>This will walk you through the creation of a new React Native project in <code class="literal">/Users/ethanholmes/ReactNotes</code>.</p></li><li class="listitem">Set up a new React Native app in <code class="literal">/Users/ethanholmes/ReactNotes</code>:<div class="informalexample"><pre class="programlisting">  create .flowconfig
  create .gitignore
  create .watchmanconfig
  create index.ios.js
  create index.android.js
  create ios/main.jsbundle
  create ios/ReactNotes/AppDelegate.h
  create ios/ReactNotes/AppDelegate.m
  create ios/ReactNotes/Base.lproj/LaunchScreen.xib
  create ios/ReactNotes/Images.xcassets/AppIcon.appiconset/Contents json
  create ios/ReactNotes/Info.plist
  create ios/ReactNotes/main.m
  create ios/ReactNotesTests/ReactNotesTests.m
  create ios/ReactNotesTests/Info.plist
  create ios/ReactNotes.xcodeproj/project.pbxproj
  create ios/ReactNotes.xcodeproj/xcshareddata/xcschemes/ReactNotes.xcscheme
  create android/app/build.gradle
  create android/app/proguard-rules.pro
  create android/app/src/main/AndroidManifest.xml
  create android/app/src/main/res/values/strings.xml
  create android/app/src/main/res/values/styles.xml
  create android/build.gradle
  create android/gradle.properties
  create android/settings.gradle
  create android/app/src/main/res/mipmap-hdpi/ic_launcher.png
  create android/app/src/main/res/mipmap-mdpi/ic_launcher.png
  create android/app/src/main/res/mipmap-xhdpi/ic_launcher.png
  create android/app/src/main/res/mipmap-xxhdpi/ic_launcher.png
  create android/gradle/wrapper/gradle-wrapper.jar
  create android/gradle/wrapper/gradle-wrapper.properties
  create android/gradlew
  create android/gradlew.bat
  create android/app/src/main/java/com/reactnotes/MainActivity.java</pre></div><p>To run your app on iOS:</p><div class="informalexample"><pre class="programlisting">   Open /Users/ethanholmes/ReactNotes/ios/ReactNotes.xcodeproj in Xcode
   Hit Run button</pre></div><p>To run your app on Android:</p><div class="informalexample"><pre class="programlisting">   Have an Android emulator running, or a device connected
   cd /Users/ethanholmes/ReactNotes
   react-native run-android</pre></div><p>The <code class="literal">root</code> directory of the <code class="literal">Xcode</code> project is generated in the <code class="literal">ReactNotes</code> folder, with the<a id="id38" class="indexterm"/> same name as we gave <code class="literal">react-native-cli</code> when we ran the command. Follow the steps at the end of the React Native set up to see what it produces.</p></li></ol></div><div class="section" title="Xcode and the iOS simulator"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec13"/>Xcode and the iOS simulator</h2></div></div></div><p>We are going to start<a id="id39" class="indexterm"/> by running the<a id="id40" class="indexterm"/> starter template in the iOS simulator <a id="id41" class="indexterm"/>through <a id="id42" class="indexterm"/>Xcode:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In Xcode, select <code class="literal">File</code> | <code class="literal">Open</code> and navigate to the <code class="literal">ReactNotes</code> folder.</li><li class="listitem">Open the <code class="literal">ReactNotes.xcodeproj</code> file, as shown in the following figure:<div class="mediaobject"><img src="graphics/B05162_03_01.jpg" alt="Xcode and the iOS simulator"/></div></li><li class="listitem">Click<a id="id43" class="indexterm"/> on <a id="id44" class="indexterm"/><span class="strong"><strong>Run</strong></span> (or <span class="emphasis"><em>Cmd</em></span> + <span class="emphasis"><em>R</em></span>) to <a id="id45" class="indexterm"/>run the <a id="id46" class="indexterm"/>application in the iOS simulator, the following screenshot will be shown:<div class="mediaobject"><img src="graphics/B05162_03_02.jpg" alt="Xcode and the iOS simulator"/></div><p>Just <a id="id47" class="indexterm"/>like<a id="id48" class="indexterm"/> that, we <a id="id49" class="indexterm"/>already <a id="id50" class="indexterm"/>have the React Native template up and running on the iOS simulator!</p></li></ol></div></div><div class="section" title="The Android SDK and emulator"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec14"/>The Android SDK and emulator</h2></div></div></div><p>Facebook has a detailed step by step guide set up on Android SDK<a id="id51" class="indexterm"/> and emulator. You can access the React Native Docs at <a class="ulink" href="https://facebook.github.io/react-native/docs/android-setup.html">https://facebook.github.io/react-native/docs/android-setup.html</a>. In this section, we will only cover the basics of running the application on the <a id="id52" class="indexterm"/>Android emulator.</p><p>When running the <a id="id53" class="indexterm"/>project in the iOS simulator, we can run it from the Xcode IDE. Android, on the other hand, doesn't require any particular IDE and can be launched directly from the command line.</p><p>To install the <code class="literal">android apk</code> to the emulator, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ react-native run-android</strong></span>
</pre></div><p>The following screenshot will be generated:</p><div class="mediaobject"><img src="graphics/B05162_03_03.jpg" alt="The Android SDK and emulator"/></div><p>Let's start by<a id="id54" class="indexterm"/> modifying the contents of the starter<a id="id55" class="indexterm"/> template and display a different message.</p></div><div class="section" title="Modifying the React Native starter template"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec15"/>Modifying the React Native starter template</h2></div></div></div><p>Open <code class="literal">index.ios.js</code>, located<a id="id56" class="indexterm"/> in the root directory, in the text editor of your choice. Here is the code that <code class="literal">react-native-cli</code> generated:</p><div class="informalexample"><pre class="programlisting">/**
 * Sample React Native App
 * https://github.com/facebook/react-native
 */
'use strict';

var React = require('react-native');
var {
  AppRegistry,
  StyleSheet,
  Text,
  View,
} = React;

var ReactNotes = React.createClass({
  render: function() {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Text style={styles.welcome}&gt;
          Welcome to React Native!
        &lt;/Text&gt;
        &lt;Text style={styles.instructions}&gt;
          To get started, edit index.ios.js
        &lt;/Text&gt;
        &lt;Text style={styles.instructions}&gt;
          Press Cmd+R to reload,{'\n'}
          Cmd+D or shake for dev menu
        &lt;/Text&gt;
      &lt;/View&gt;
    );
  }
});

var styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#F5FCFF',
  },
  welcome: {
    fontSize: 20,
    textAlign: 'center',
    margin: 10,
  },
  instructions: {
    textAlign: 'center',
    color: '#333333',
    marginBottom: 5,
  },
});

AppRegistry.registerComponent('ReactNotes', () =&gt; ReactNotes);</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Although <code class="literal">react-native-cli</code> generates the starter template using the ES5 <code class="literal">createClass</code>, we will be creating our components using ES6 classes.</p></div></div><p>A lot of things are<a id="id57" class="indexterm"/> included in here, but bear with us as we break it down for you. If we take a closer look at the render method, we can see the familiar <code class="literal">View</code> and <code class="literal">Text</code> components that we encountered in the previous chapter. Note how the index file is a component itself (<code class="literal">ReactNotes</code>). Change the value in line <code class="literal">30</code> to <code class="literal">Welcome to React Notes!</code>. Save it and then press <span class="emphasis"><em>Cmd</em></span> + <span class="emphasis"><em>R</em></span> from the simulator or, in the top menu, navigate to <span class="strong"><strong>Hardware</strong></span> | <span class="strong"><strong>Shake Gesture</strong></span> and select <span class="strong"><strong>Reload</strong></span> from the pop-up action sheet. The text on screen re-renders to show the text value we just modified! We are no longer constrained to wait for the Xcode to recompile in order to see our changes as we can reload straight from the simulator. Continue making changes and reload it in the simulator to get a feel for the work flow.</p></div></div></div>
<div class="section" title="Structuring the application"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec16"/>Structuring the application</h1></div></div></div><p>It's time to add a little interactivity to<a id="id58" class="indexterm"/> our application. You can begin by adding a simple button component to the screen that is touchable. In the root directory, create a folder called <code class="literal">App</code> and another folder inside the <code class="literal">App</code> folder called <code class="literal">Components</code>. In the <code class="literal">Components</code> directory, add a file named <code class="literal">SimpleButton.js</code>. This will be the directory in which we store and reference the components we create.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>Note that the React Native code created in this chapter will work for both iOS and Android. Simply replace <code class="literal">index.ios.js</code> with <code class="literal">index.android.js</code> if you are interested in android only. The screenshots and instructions will be mainly for the iOS simulator.</p></div></div><div class="section" title="Creating the SimpleButton component"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec16"/>Creating the SimpleButton component</h2></div></div></div><p>Let's start by rendering some<a id="id59" class="indexterm"/> text to the screen and importing it into our <code class="literal">index.ios.js</code> file. In <code class="literal">SimpleButton.js,</code> add:</p><div class="informalexample"><pre class="programlisting">import React, {
    Text,
    View
} from 'react-native';

export default class SimpleButton extends React.Component {
  render () {
    return (
      &lt;View&gt;
        &lt;Text&gt;Simple Button&lt;/Text&gt;
      &lt;/View&gt;
    );
  }
}</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>ES6 de-structuring assignment <code class="literal">var [a, b] = [1, 2];</code> is used to extract <code class="literal">Text</code> and <code class="literal">View</code> from the React Native module.</p></div></div><p>We are going to include <a id="id60" class="indexterm"/>our newly created component in <code class="literal">index.ios.js</code> and simplify it to ES6 syntax:</p><div class="informalexample"><pre class="programlisting">import React, {
  AppRegistry,
  StyleSheet,
  View
} from 'react-native';

import SimpleButton from './App/Components/SimpleButton';

class ReactNotes extends React.Component {
  render () {
    return (
      &lt;View style={styles.container}&gt;
        &lt;SimpleButton /&gt;
      &lt;/View&gt;
    );
  }
}

var styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  }
});
AppRegistry.registerComponent('ReactNotes', () =&gt; ReactNotes);</pre></div><p>The output for the <a id="id61" class="indexterm"/>preceding code is:</p><div class="mediaobject"><img src="graphics/B05162_03_04.jpg" alt="Creating the SimpleButton component"/></div><p>We're off to a good start; it's time to add some interactivity to our button. In <code class="literal">SimpleButton.js</code>, add the <code class="literal">TouchableOpacity</code> component to the destructuring assignment. <code class="literal">TouchableHighlight</code>, <code class="literal">TouchableOpacity</code>, and <code class="literal">TouchableWithoutFeedback</code> are similar components that respond to touches, and it takes an <code class="literal">onPress</code> prop for a function to react to the touch. Wrap the existing code in the render function with the <code class="literal">TouchableOpacity</code> component:</p><div class="informalexample"><pre class="programlisting">  import React, {
  Text,
  TouchableOpacity,
  View
} from 'react-native';


export default class SimpleButton extends React.Component {
  render () {
    return (
      &lt;TouchableOpacity onPress={() =&gt; console.log('Pressed!')}&gt;
        &lt;View&gt;
          &lt;Text&gt;Simple Button&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableOpacity&gt;
    );
  }
}</pre></div><p>Go ahead and <a id="id62" class="indexterm"/>try tapping (or clicking) on the text now, you should be able to see that the opacity of the text decreases as you press it. But where has our <code class="literal">console.log(…)</code> output gone? Open the <span class="strong"><strong>Developer</strong></span> menu (<span class="strong"><strong>Hardware</strong></span> | <span class="strong"><strong>Shake Gesture</strong></span>) and select <span class="strong"><strong>Debug</strong></span> in Chrome. This opens a Chrome Window at <code class="literal">localhost:8081/debugger-ui</code> for debugging, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/B05162_03_06.jpg" alt="Creating the SimpleButton component"/></div><p>Lo and behold, here is the console log that we specified in our <code class="literal">SimpleButton</code> component. Behind the scenes, the JavaScript code is being run from inside the Chrome tab and loaded onto the mobile device on startup or reload. From here, you have access to all the Chrome<a id="id63" class="indexterm"/> Developer Tools you will normally use, including the addition of break points.</p></div></div>
<div class="section" title="Navigation"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec17"/>Navigation</h1></div></div></div><p>Now, its time to make our <a id="id64" class="indexterm"/>application more actionable. Let's begin by transforming our <code class="literal">SimpleButton</code> into a <span class="strong"><strong>Create Note</strong></span> button. When the user clicks on the <span class="strong"><strong>Create Note</strong></span> button, it transitions them to another screen to create notes. To do this, we need our button to be able to accept a function via props from <code class="literal">index.ios.js</code> to activate the transition. We will add some custom text as well for extra flair:</p><div class="informalexample"><pre class="programlisting">  import React, {
  Text,
  TouchableOpacity,
  View
} from 'react-native';

export default class SimpleButton extends React.Component {
  render () {
    return (
      &lt;TouchableOpacity onPress={this.props.onPress}&gt;
        &lt;View&gt;
          &lt;Text&gt;{this.props.customText || 'Simple Button'}&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableOpacity&gt;
    );
  }
}

SimpleButton.propTypes = {
  onPress: React.PropTypes.func.isRequired,
  customText: React.PropTypes.string
};</pre></div><p>Now, we have extended our <code class="literal">SimpleButton</code> component to be reusable with minimal changes. We can always pass different functions through the <code class="literal">onPress</code> prop and add custom text if we choose. This is all that we need to modify our <code class="literal">SimpleButton</code>; now to include the transition functionality to our <code class="literal">index.io.js</code> file.</p><p>The following image shows the validating props revisited page:</p><div class="mediaobject"><img src="graphics/B05162_03_07.jpg" alt="Navigation"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>Remember <code class="literal">propTypes</code> from the previous chapter? If we forget to pass the <code class="literal">onPress</code> prop, the console will log a warning reminding us to pass it. Note that there is no warning for <code class="literal">customText</code> since it was not set to <code class="literal">isRequired</code>.</p></div></div><div class="section" title="The Navigator component"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec17"/>The Navigator component</h2></div></div></div><p>The <span class="strong"><strong>Navigator</strong></span> component<a id="id65" class="indexterm"/> is a reimplementation of the <code class="literal">UINavigationController</code> provided by React Native to manage various screens. Similar to a stack, you can push, pop, and replace routes onto the Navigator. It is fully customizable on both iOS and Android, which we will cover in the next chapter. Import the Navigator into index.ios.js and replace the contents of the render method with:</p><div class="informalexample"><pre class="programlisting">import React, {
  AppRegistry,
  Navigator,
  StyleSheet,
  View
} from 'react-native';


render () {
  return (
    &lt;Navigator
      initialRoute={{name: 'home'}}
      renderScene={this.renderScene}
    /&gt;
  );
}</pre></div><p>Navigator receives a prop called <code class="literal">initialRoute</code> that accepts an object to be the first route to be put on the stack. The route object can contain any attribute that you need to pass to the screen components. All we need for now is the name of the screen we want to transition to. Next, we need to create the <code class="literal">function</code> to pass to the <code class="literal">renderScene</code> prop. In the <code class="literal">ReactNotes</code> component, we are going to create a <code class="literal">function</code> that takes <code class="literal">route</code> and <code class="literal">navigator</code> as parameters, as shown:</p><div class="informalexample"><pre class="programlisting">class ReactNotes extends React.Component {
  renderScene (route, navigator) {
     ...
  }
  render () {
    ...
  }
}</pre></div><p>When we first load our <a id="id66" class="indexterm"/>application, the parameter <code class="literal">route</code> will be the object we pass into <code class="literal">initialRoute</code>. Using a switch statement and looking at the values of <code class="literal">route.name</code> allows us to choose the component we want to render:</p><div class="informalexample"><pre class="programlisting">renderScene (route, navigator) {
  switch (route.name) {
    case 'home':
      return (
        &lt;View style={styles.container}&gt;
          &lt;SimpleButton
            onPress={() =&gt; console.log('Pressed!')}
            customText='Create Note'
          /&gt;
        &lt;/View&gt;
      );
    case 'createNote':
  }
}</pre></div><p>Here, under the <code class="literal">home</code> case, you can see our slightly modified code from the original <code class="literal">render</code> method in <code class="literal">ReactNotes</code>; we have included the <code class="literal">onPress</code> and <code class="literal">customText</code> props we created earlier. You can add another component to <code class="literal">App/Componets/ named NoteScreen.js</code>; this screen will contain the functionality to create a new note:</p><div class="informalexample"><pre class="programlisting">import React, {
  StyleSheet,
  Text,
  View
} from 'react-native';

export default class NoteScreen extends React.Component {
  render () {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Text&gt;Create Note Screen!&lt;/Text&gt;
      &lt;/View&gt;
    );
  }
}

var styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  }
});</pre></div><p>For now, we are only<a id="id67" class="indexterm"/> going to use this screen when we press the <span class="strong"><strong>Create Note</strong></span> button. In the <code class="literal">onPress</code> prop arrow function, we are going to push a new route onto the stack using <code class="literal">navigator.push</code>:</p><div class="informalexample"><pre class="programlisting">import NoteScreen from './App/Components/NoteScreen';

class ReactNotes extends React.Component {
  renderScene (route, navigator) {
    switch (route.name) {
      case 'home':
        return (
          &lt;View style={styles.container}&gt;
            &lt;SimpleButton
              onPress={() =&gt; {
                navigator.push({
                  name: 'createNote'
                });
              }}
              customText='Create Note'
            /&gt;
          &lt;/View&gt;
        );
      case 'createNote':
        return (
            &lt;NoteScreen /&gt;
        );
    }
  }</pre></div><p>Note that push also takes a regular JavaScript object, so we need to include the name attribute for our <code class="literal">NoteScreen</code>; reload the application in the simulator and press on the <span class="strong"><strong>Create Note</strong></span> button. A smooth animated transition between the two screens will occur without adding any extra code.</p><div class="section" title="Navigator.NavigationBar"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec03"/>Navigator.NavigationBar</h3></div></div></div><p>At this point you must be thinking <span class="emphasis"><em>A button is OK, but is there a better, more native way to do navigation?</em></span> Of course, as a part of the Navigator component, you can pass a <code class="literal">navigationBar</code> prop to add a persistent top navigation bar across every screen. The <code class="literal">Navigator.NavigationBar</code> is a<a id="id68" class="indexterm"/> subcomponent that accepts an object that defines the left and right buttons, a title, and styles (although we are going to leave it <code class="literal">unstyled</code> until the next chapter). Modify the <code class="literal">ReactNotes</code> render function to include the <code class="literal">navigationBar</code>, as shown:</p><div class="informalexample"><pre class="programlisting">render () {
  return (
    &lt;Navigator
      initialRoute={{name: 'home'}}
      renderScene={this.renderScene}
      navigationBar={
        &lt;Navigator.NavigationBar
          routeMapper={NavigationBarRouteMapper}
        /&gt;
      }
    /&gt;
  );
}</pre></div><p>The <code class="literal">routeMapper</code> prop accepts an object containing functions for the <code class="literal">LeftButton</code>, <code class="literal">RightButton</code>, and <code class="literal">Title</code> attributes. Let's insert this object after the imports at the top of <code class="literal">index.ios.js</code>:</p><div class="informalexample"><pre class="programlisting">var NavigationBarRouteMapper = {
  LeftButton: function(route, navigator, index, navState) {
    ...
  },

  RightButton: function(route, navigator, index, navState) {
    ...
  },

  Title: function(route, navigator, index, navState) {
    ...
  }
};</pre></div><p>Advancing the flow of our application to the <code class="literal">CreateNote</code> screen will require displaying a right-hand button in the navigator bar. Luckily, we already have our simple button set up to push the state onto the navigator. In the <code class="literal">RightButton</code> function, add:</p><div class="informalexample"><pre class="programlisting">var NavigationBarRouteMapper = {
  ...
  
  RightButton: function(route, navigator, index, navState) {
    switch (route.name) {
      case 'home':
        return (
          &lt;SimpleButton
            onPress={() =&gt; {
              navigator.push({
                name: 'createNote'
              });
            }}
            customText='Create Note'
          /&gt;
        );
      default:
         return null;
    }
  },

  ...
};</pre></div><p>Similar to our <a id="id69" class="indexterm"/>previous <code class="literal">renderScene</code> method, we can switch on the value of <code class="literal">route.name</code>. The default expression in the <code class="literal">switch</code> statement is there to ensure that different screens do not return a button unless we include them. Let's also go ahead and add a <code class="literal">LeftButton</code> to the <code class="literal">NavigationBar</code> when it's on the <code class="literal">NoteScreen</code> to return to the home screen.</p><div class="informalexample"><pre class="programlisting">var NavigationBarRouteMapper = {
  LeftButton: function(route, navigator, index, navState) {
    switch (route.name) {
      case 'createNote':
        return (
          &lt;SimpleButton
            onPress={() =&gt; navigator.pop()}
            customText='Back'
           /&gt;
        );
      default:
        return null;
    }
  },

  ...
};</pre></div><p>The <code class="literal">navigator.pop()</code> will remove the route on the top of the stack; thus, returning us to our original view. Finally, to add a title, we do the exact same thing in the <code class="literal">Title</code> attributes function:</p><div class="informalexample"><pre class="programlisting">var NavigationBarRouteMapper = {
  ...
  
  Title: function(route, navigator, index, navState) {
    switch (route.name) {
      case 'home':
        return (
          &lt;Text&gt;React Notes&lt;/Text&gt;
        );
      case 'createNote':
        return (
          &lt;Text&gt;Create Note&lt;/Text&gt;
        );
    }
  }
};</pre></div><p>Now, let's update<a id="id70" class="indexterm"/> the original <code class="literal">renderScene</code> function to get rid of the button and include the home screen as a component. Create a new component called <code class="literal">HomeScreen</code>; the contents of this screen won't matter much, as we will come back to it later:</p><div class="informalexample"><pre class="programlisting">import React, {
  StyleSheet,
  Text,
  View
  } from 'react-native';
export default class HomeScreen extends React.Component {
  render () {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Text&gt;Home&lt;/Text&gt;
      &lt;/View&gt;
    );
  }
}
var styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  }
});</pre></div><p>Then import <a id="id71" class="indexterm"/>it into <code class="literal">index.ios.js</code> or <code class="literal">index.android.js</code>:</p><div class="informalexample"><pre class="programlisting">import HomeScreen from './App/Components/HomeScreen';

...

class ReactNotes extends React.Component {
  renderScene (route, navigator) {
    switch (route.name) {
      case 'home':
        return (
          &lt;HomeScreen /&gt;
        );
      case 'createNote':
        return (
          &lt;NoteScreen /&gt;
        );
    }
  }

  ...

}</pre></div><p>Now, let's see how the navigation bar persists across each route:</p><div class="mediaobject"><img src="graphics/B05162_03_08.jpg" alt="Navigator.NavigationBar"/></div><p>That's it! Reload and<a id="id72" class="indexterm"/> take a look at how the static navigation bar persists across each route:</p><div class="mediaobject"><img src="graphics/B05162_03_09.jpg" alt="Navigator.NavigationBar"/></div><p>For a more detailed guide on <a id="id73" class="indexterm"/>Navigator, check out the<a id="id74" class="indexterm"/> React Native documentation at <a class="ulink" href="https://facebook.github.io/react-native/docs/navigator.html">https://facebook.github.io/react-native/docs/navigator.html</a>. We now have the proper infrastructure to go ahead and start adding the create note functionality to our application.</p></div></div><div class="section" title="The NoteScreen – first pass"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec18"/>The NoteScreen – first pass</h2></div></div></div><p>Now that we have<a id="id75" class="indexterm"/> a <code class="literal">NoteScreen</code> and can navigate to it, let's start making it useful. We'll need to add some <code class="literal">TextInput</code> components, one for the title of the note and one to capture the body. We'll want to automatically set focus on the <code class="literal">TextInput</code> for the title, so the user can start typing right away. We'll need to listen to events on the <code class="literal">TextInput</code> components, so we can keep a track of what the user has typed by updating the state. We'd also like to know when the user has finished editing the title of the note, so that we can automatically set focus on the <code class="literal">TextInput</code> for the body.</p><p>First, let's add the <code class="literal">TextInput</code> component to our list of dependencies and remove the <code class="literal">Text</code> component since we no longer need it:</p><div class="informalexample"><pre class="programlisting">import React, {
  StyleSheet,
  TextInput,
  View
}from 'react-native';</pre></div><p>Before we add the <code class="literal">TextInput</code> components to the <code class="literal">View</code>, let's get a few style updates out of the way:</p><div class="informalexample"><pre class="programlisting">var styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    marginTop: 64
  },
  title: {
    height: 40
  },
  body: {
    flex: 1
  }
});</pre></div><p>Note that we've added<a id="id76" class="indexterm"/> a <code class="literal">marginTop: 64</code> to the container. This is important because we want to make sure that the <code class="literal">NavigationBar</code> doesn't accidentally intercept the <code class="literal">onPress</code> events we want our <code class="literal">TextInput</code> to receive. We've also added styles for each of the <code class="literal">TextInputs</code> we're about to add. We'll talk more about styles in detail in <a class="link" href="ch04.html" title="Chapter 4. Working with Styles and Layout">Chapter 4</a>, <span class="emphasis"><em>Working with Styles and Layout</em></span>.</p><p>Now, in our render function, let's replace the <code class="literal">Text</code> component with two <code class="literal">TextInput</code> components, such as:</p><div class="informalexample"><pre class="programlisting">render () {
  return (
    &lt;View style={styles.container}&gt;
      &lt;TextInput placeholder="Untitled"
        style={styles.title}/&gt;
      &lt;TextInput multiline={true}placeholder="Start typing" style={styles.body}/&gt;&lt;/View&gt;
  );
}</pre></div><p>Before we try this out, notice that the <code class="literal">TextInput</code> component has a placeholder property that allows us to tell the user what the <code class="literal">TextInput</code> is for without having to take up additional screen real estate by labeling our form fields. I've also specified <code class="literal">multiline={true}</code> on the second <code class="literal">TextInput</code> so the user can add as much text as they want.</p><p>Now let's refresh the<a id="id77" class="indexterm"/> application in the simulator and you should see something like this:</p><div class="mediaobject"><img src="graphics/B05162_03_10.jpg" alt="The NoteScreen – first pass"/></div><p>You should be able to click into <code class="literal">TextInput</code> and start typing. If you'd like to use the on-screen keyboard available in the simulator, you can press <span class="emphasis"><em>Cmd</em></span>+<span class="emphasis"><em>K</em></span> / <span class="emphasis"><em>Ctrl</em></span>+<span class="emphasis"><em>K</em></span>.</p><p>Let's improve the user experience a little bit by making the title <code class="literal">TextInput</code> focus automatically and show the keyboard when the user navigates to the <code class="literal">NoteScreen</code>:</p><div class="informalexample"><pre class="programlisting">&lt;TextInput
  ref="title"
  autoFocus={true}
  placeholder="Untitled"
 style={styles.title}
/&gt;</pre></div><p>To be even more user friendly, let's listen for the event that tells us the user has finished editing the title and automatically set focus on the body <code class="literal">TextInput</code>. To do that we'll need to make a slight change to the body <code class="literal">TextInput</code> so that we can refer to it in our event handler:</p><div class="informalexample"><pre class="programlisting">&lt;TextInput
  ref="body"
  multiline={true}
  placeholder="Start typing"
  style={styles.body}
/&gt;</pre></div><p>Notice<a id="id78" class="indexterm"/> the <code class="literal">ref="body"</code>. Any React component can be given a <code class="literal">ref</code> so that it can be referenced in your <code class="literal">javascript</code> code. Now, in the title <code class="literal">TextInput</code>, we can add an <code class="literal">onEndEditing</code> event handler that sets focus on the <code class="literal">TextInput</code> body:</p><div class="informalexample"><pre class="programlisting">&lt;TextInput
  autoFocus={true}
  placeholder="Untitled"
  style={styles.title}
  onEndEditing={(text) =&gt; {this.refs.body.focus()}}
  /&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>Avoid using refs to set and get values on your components! That's what <code class="literal">state</code> is for and we'll learn all about state in <a class="link" href="ch05.html" title="Chapter 5. Displaying and Saving Data">Chapter 5</a>, <span class="emphasis"><em>Displaying and Saving Data</em></span>.</p></div></div><p>Now when you refresh the application in the simulator and navigate to the <code class="literal">NoteScreen</code>, you will see that the title <code class="literal">TextInput</code> has focus and you should be able to type something. Press <span class="emphasis"><em>Enter</em></span> and see the focus automatically switch to the body and start typing there as well. If you're not seeing the on-screen keyboard when you try this, press <span class="emphasis"><em>Cmd </em></span>+ <span class="emphasis"><em>K</em></span> / <span class="emphasis"><em>Ctrl </em></span>+ <span class="emphasis"><em>K</em></span> and try again.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec18"/>Summary</h1></div></div></div><p>In this chapter, we have created the skeleton of our <code class="literal">ReactNotes</code> application, walked you through how to create a new project, created <code class="literal">Views</code> and custom components, navigated between the <code class="literal">HomeScreen</code> and <code class="literal">NoteScreen</code>, and debugged your application.</p><p>You now have a solid foundation for all of the topics we'll introduce throughout the rest of the book. However, there are two big problems with this application, it's not pretty and it doesn't do anything! In the next two chapters, we'll solve both of those problems and you'll be well on your way to master React Native!</p></div></body></html>