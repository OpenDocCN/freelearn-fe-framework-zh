<html><head></head><body>
		<div id="_idContainer255">
			<h1 id="_idParaDest-145"><em class="italic"><a id="_idTextAnchor146"/>Chapter 7</em>: An Introduction to lottie-react-native</h1>
			<p>In this chapter, we will be introduced to <strong class="source-inline">lottie-react-native</strong>, a library that allows us to render Lottie animations in our React Native apps. We will learn about its history, current state, and documentation to make sure we get the most out of the library. It is an open source library that's distributed as an <strong class="source-inline">npm</strong> package and can be found at the following links:</p>
			<ul>
				<li><strong class="bold">GitHub</strong>: <a href="https://GitHub.com/lottie-react-native/lottie-react-native">https://GitHub.com/lottie-react-native/lottie-react-native</a></li>
				<li><strong class="bold">NPM</strong>: <a href="https://www.npmjs.com/package/lottie-react-native">https://www.npmjs.com/package/lottie-react-native</a></li>
			</ul>
			<p>In this chapter, we will cover the following topics: </p>
			<ul>
				<li>How did <strong class="source-inline">lottie-react-native</strong> come into being?</li>
				<li>What is <strong class="source-inline">lottie-react-native</strong>?</li>
				<li>Why are we not using Animated or Reanimated?</li>
				<li>The basics of <strong class="source-inline">lottie-react-native</strong></li>
			</ul>
			<h1 id="_idParaDest-146"><a id="_idTextAnchor147"/>How did lottie-react-native come into being?</h1>
			<p>React Native was released in 2015 due to Facebook's need<a id="_idIndexMarker502"/> to speed up their mobile development teams, with the vision of releasing dozens of new apps and improving their current apps in shorter and more effective development cycles. Some may say React Native's number one strength is its multiplatform development capabilities (<em class="italic">learn once, write anywhere</em>), but there are also other benefits, such as reusing proven libraries and tools that have been living in the web development world for a long time – longer than iOS and Android have been around.</p>
			<p>Attracted by this promise, Airbnb spun up a team to investigate whether they could copy Facebook based on their multiplatform reuse strategy using React Native. Their conclusion was not only that the Airbnb mobile team could benefit from this strategy, but that they could reuse their vast knowledge of the web and create multi-disciplinary teams to build new features on the web, Android, and iOS immediately by reusing a large portion of code.</p>
			<p>The result of their investigation<a id="_idIndexMarker503"/> included large architectural decisions, such as how React Native should be integrated into existing apps, how to keep the performance standards they had, and how to integrate their tooling into the new framework they would be deploying into their native apps. One such tool was their beloved animation library: Lottie.</p>
			<p>Airbnb already had web, Android, and iOS open source libraries for Lottie (lottie):</p>
			<ul>
				<li><strong class="bold">Web</strong>: <a href="https://GitHub.com/airbnb/lottie-web">https://GitHub.com/airbnb/lottie-web</a></li>
				<li><strong class="bold">Android</strong>: <a href="https://GitHub.com/airbnb/lottie-android">https://GitHub.com/airbnb/lottie-android</a></li>
				<li><strong class="bold">iOS</strong>: <a href="https://GitHub.com/airbnb/lottie-ios">https://GitHub.com/airbnb/lottie-ios</a></li>
			</ul>
			<p>All of them were well maintained and served Airbnb's needs, but adding React Native into the mix meant they would need a specific library that could be used not only by them but also by the thousands of developers who were already building the Lottie community.</p>
			<p>The requirements were clear: they needed a tool that could render Lottie animations in React Native code in the same manner they were being rendered in iOS or Android apps. This endeavor included performance and feature requirements. The outcome was a fully-featured open source library that could easily be integrated into all sorts of apps built on React Native.</p>
			<p>For this task, a small team of iOS, Android, and web developers were put together to successfully release <strong class="source-inline">lottie-react-native</strong> on their public GitHub repository in early 2017: <a href="https://GitHub.com/lottie-react-native/lottie-react-native">https://GitHub.com/lottie-react-native/lottie-react-native</a>.</p>
			<p>In 2018, Airbnb reevaluated its investment in React Native and decided they would be stopping their involvement with Facebook's project and withdrawing all their React Native code from their apps. This decision was explained in a series of blog posts revolving around issues related to the complexity of maintaining three large code bases (iOS, Android, and React Native) that needed hard coordination for a team that was not proficient in React Native.</p>
			<p>React Native has come a long way<a id="_idIndexMarker504"/> since that day but this meant that Airbnb, a large promotor, stopped contributing to this technology, including their involvement with <strong class="source-inline">lottie-react-native</strong>. The library was not left on its own, though. Some of the owners of <strong class="source-inline">lottie-react-native</strong> looked for maintainers within the community and finally transferred the project to the top active contributors at that time (<strong class="source-inline">emilioicai</strong> and <strong class="source-inline">lelandrichardson</strong> at GitHub).</p>
			<h1 id="_idParaDest-147"><a id="_idTextAnchor148"/>What is lottie-react-native?</h1>
			<p><strong class="source-inline">lottie-react-native</strong> is a project that's composed of two main parts:</p>
			<ul>
				<li>The open source project, which is hosted<a id="_idIndexMarker505"/> on GitHub. All development, improvement requests, issue reporting, and code hosting happens here. It's the center of the development community and helps update and improve the library as a whole.</li>
				<li>The <strong class="source-inline">npm</strong> package, where all the new downloadable versions<a id="_idIndexMarker506"/> of the library are hosted. Usually, developers would use this npm repository to include <strong class="source-inline">lottie-react-native</strong> in their React Native projects.</li>
			</ul>
			<p><strong class="source-inline">lottie-react-native</strong> has a hard <a id="_idIndexMarker507"/>dependency on <strong class="source-inline">lottie-ios</strong> and <strong class="source-inline">lottie-android</strong> and serves as a wrapper for those two libraries, in which heavy load happens. In fact, in most of React Native's native packages, <strong class="source-inline">lottie-react-native</strong> works by receiving data from the JavaScript side and then transforming and sending that data to the native libraries (<strong class="source-inline">lottie-ios</strong> and <strong class="source-inline">lottie-android</strong>).</p>
			<p>In 2021, <strong class="source-inline">lottie-react-native</strong> became one of the most popular libraries in the React Native ecosystem. It has more than 14,500 stars on GitHub and, even without Airbnb's involvement, keeps receiving several releases per year.</p>
			<p><strong class="source-inline">lottie-react-native</strong> has become the go-to library when it comes to rendering complex animations in React Native by keeping up with new releases of <strong class="source-inline">lottie-ios</strong> and <strong class="source-inline">lottie-android</strong>, all while following changes in React Native closely so that it can easily be integrated with new versions of <strong class="source-inline">lottie-ios</strong> and <strong class="source-inline">lottie-android</strong>.</p>
			<p>Now that we know what <strong class="source-inline">lottie-react-native</strong> is and what its dependencies are, let's learn why we should use it for our React Native apps.</p>
			<h1 id="_idParaDest-148"><a id="_idTextAnchor149"/>Why are we not using Animated or Reanimated?</h1>
			<p>A common question for React Native<a id="_idIndexMarker508"/> beginners is which library they should<a id="_idIndexMarker509"/> use for displaying animations<a id="_idIndexMarker510"/> on their apps. After a quick search, three different ways of doing so arise: the Animated API, Reanimated, or <strong class="source-inline">lottie-react-native</strong>.</p>
			<p>Animated and Reanimated are not technologies that compete <strong class="source-inline">lottie-react-native</strong> as they serve different purposes. Both Animated and Reanimated excel in animating React and native components on iOS and Android, but they are based on transforming mobile UI components (for example, Text, Containers, Views, or Lists). This means they are not designed to create complex animations or visual icons, which designers can do with Adobe After Effects.</p>
			<p>Let's look at an example<a id="_idIndexMarker511"/> of what Animated/Reanimated<a id="_idIndexMarker512"/> can do versus what Lottie<a id="_idIndexMarker513"/> is capable of:</p>
			<p><strong class="bold">What Lottie does easily</strong>:</p>
			<div>
				<div id="_idContainer252" class="IMG---Figure">
					<img src="image/B17930_07_01.jpg" alt="Figure 7.1 – Typical lottie-react-native animation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.1 – Typical lottie-react-native animation</p>
			<p><strong class="bold">What Animated and Reanimated do well</strong>:</p>
			<div>
				<div id="_idContainer253" class="IMG---Figure">
					<img src="image/B17930_07_02.jpg" alt="Figure 7.2 – Typical Animated/Reanimated animation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.2 – Typical Animated/Reanimated animation</p>
			<p>It may be complex to understand <a id="_idIndexMarker514"/>the difference, but as a general idea, developers should note that Lottie is useful for displaying complex animations in which different shapes are in play. These kinds of animations are usually created by designers and frames, timing, and UI layers are important parts of them.</p>
			<p>Animated and Reanimated should be used for animating views, containers, or platform-specific components, as shown in the preceding diagram.</p>
			<p>So far, we've learned when and why to use <strong class="source-inline">lottie-react-native</strong> in our apps. Now, let's learn the ins and outs of the <strong class="source-inline">lottie-react-native</strong> project itself.</p>
			<h1 id="_idParaDest-149"><a id="_idTextAnchor150"/>The basics of lottie-react-native</h1>
			<p>In this section, we'll learn how <strong class="source-inline">lottie-react-native</strong> is structured as a project. This will give us the full picture and allow us to get the most out of the resources that are available for developers so that we can integrate Lottie animations into our React Native projects.</p>
			<h2 id="_idParaDest-150"><a id="_idTextAnchor151"/>The open source project</h2>
			<p>The easiest way<a id="_idIndexMarker515"/> to become acquainted with <strong class="source-inline">lottie-react-native</strong> is by going to its GitHub repository (<a href="https://github.com/lottie-react-native/lottie-react-native">https://github.com/lottie-react-native/lottie-react-native</a>). There, developers can read about its API, request fixes for specific issues, send pieces of code to be incorporated into the code base via <strong class="bold">Pull Requests</strong> (<strong class="bold">PRs</strong>), or just browse the code<a id="_idIndexMarker516"/> to understand how the library works.</p>
			<p>Since 2018, this project is maintained by a sole maintainer, but new releases come out regularly to incorporate bug fixes, changes in React Native, and changes in <strong class="source-inline">lottie-ios</strong> or <strong class="source-inline">lottie-android</strong>.</p>
			<p>In the <strong class="source-inline">README.md</strong> file, developers can find a basic explanation of how to integrate and use the library. Besides this explanation, a couple of code samples (<a href="https://github.com/lottie-react-native/lottie-react-native/tree/master/example">https://github.com/lottie-react-native/lottie-react-native/tree/master/example</a>) are provided to help developers understand how <strong class="source-inline">lottie-react-native</strong> can or should be used with ease.</p>
			<p>Alongside those samples, there is a small API reference that shows the most common properties and methods that are used for displaying Lottie animations on React Native apps. Finally, the <strong class="source-inline">README.md</strong> file also shows a couple of examples of Lottie animations, which can be downloaded from LottieFiles, and a couple of lines about how to get more information.</p>
			<p>An important point to keep in mind when using <strong class="source-inline">lottie-react-native</strong> is versioning, since different versions of React Native only work with specific versions of <strong class="source-inline">lottie-react-native</strong> (the different versions will be shown shortly). The main reason for this is how the build system works.</p>
			<p>Besides the <strong class="source-inline">README.md</strong> file, other pieces of documentation can be found in the repository:</p>
			<ul>
				<li>The API documentation</li>
				<li>The TypeScript disclaimer</li>
				<li>A list of supported After Effects features on every supported platform</li>
				<li>The <strong class="source-inline">examples</strong> folder</li>
			</ul>
			<p>Besides this documentation, the <strong class="bold">Issues</strong> page is commonly used as a source of help when it comes<a id="_idIndexMarker517"/> to understanding errors, features, or logs. So, it's recommended to search on that page when the documentation is not helpful enough, which may be the case when some issues arise when new versions of React Native, <strong class="source-inline">lottie-ios</strong>, or <strong class="source-inline">lottie-android</strong> come out.</p>
			<p>The <strong class="source-inline">lottie-react-native</strong> community is very active in terms of submitting PRs, and new functionality or bug fixes can usually be found there before they are officially released on the npm repository through a new version of <strong class="source-inline">lottie-react-native</strong>. Here, you can also find interesting conversations revolving around specific features or problems that would not fit as well in the <strong class="source-inline">lottie-react-native</strong> project's documentation.</p>
			<p>New users can create new PRs from their own forks. The following requirements are what all users can expect if they wish their PRs to be merged into the master branch:</p>
			<ul>
				<li>Documentation must be provided</li>
				<li>An example must be added to the <strong class="source-inline">examples</strong> folder</li>
				<li>The PR template must be fulfilled properly</li>
				<li>All issues and comments must be addressed in the PR thread</li>
			</ul>
			<p>Once a PR has been merged into the master branch, the maintainers will prepare a release, depending on the urgency and the timings of the repository. Users can expect their changes to be released as a patch – either a minor or major version.</p>
			<p>The repository changelog (<a href="https://github.com/lottie-react-native/lottie-react-native/blob/master/CHANGELOG.md">https://github.com/lottie-react-native/lottie-react-native/blob/master/CHANGELOG.md</a>) is the best place to learn about what features are released in every version. There's also a releases page (<a href="https://github.com/lottie-react-native/lottie-react-native/releases">https://github.com/lottie-react-native/lottie-react-native/releases</a>) that users can check out to understand how the library is evolving.</p>
			<p>On average, new releases of <strong class="source-inline">lottie-react-native</strong> are being made available every 2 and a half months.</p>
			<h2 id="_idParaDest-151"><a id="_idTextAnchor152"/>Platforms</h2>
			<p>React Native was designed to be multiplatform<a id="_idIndexMarker518"/> and not limited to iOS and Android only, which projects such as <strong class="source-inline">react-native-web</strong> and <strong class="source-inline">react-native-windows</strong> prove. <strong class="source-inline">lottie-react-native</strong> follows the same principles and is designed to be run on any platform React Native runs on. However, as of 2021, only two platforms<a id="_idIndexMarker519"/> are fully supported: iOS and Android. Windows support is slowly being added thanks to the efforts of a team from Microsoft and Flirc TV that is pushing commits to the project to make sure the library catches up.</p>
			<p>In the case of iOS and macOS, <strong class="source-inline">lottie-react-native</strong> needs <strong class="source-inline">lottie-ios</strong> to run. This dependency is explicit and <strong class="source-inline">lottie-ios</strong> needs to be installed separately due to a legacy issue from when an Airbnb team (mostly composed of native iOS developers) decided to use this kind of dependency instead of doing it implicitly. In any case, this doesn't affect <strong class="source-inline">lottie-react-native</strong> in any way other than developers having to install <strong class="source-inline">lottie-ios</strong> separately and making sure the right version of this library is installed.</p>
			<p>Since this is a library that runs native code, <strong class="source-inline">lottie-ios</strong> is installed as a pod and requires developers to run <strong class="source-inline">pod install</strong> the first time <strong class="source-inline">lottie-react-native</strong> and <strong class="source-inline">lottie-ios</strong> are installed.</p>
			<p>On the other hand, <strong class="source-inline">lottie-android</strong> is automatically managed by Gradle, who detects it is a dependency of <strong class="source-inline">lottie-react-native</strong>. Then, the right version is always installed automatically.</p>
			<p>Both platforms use the same API but there are minor differences between the platforms:</p>
			<ul>
				<li><strong class="source-inline">lottie-ios</strong> is written in Swift and a bridging header might be needed for it to work properly on iOS (<a href="https://github.com/lottie-react-native/lottie-react-native/issues/739#issuecomment-883591123">https://github.com/lottie-react-native/lottie-react-native/issues/739#issuecomment-883591123</a>).</li>
				<li>If you need external assets for your animations, Android requires them to be put in a folder. Your Lottie component should include the <strong class="source-inline">imageAssetsFolder</strong> prop, which allows you to specify the URL where that folder can be found.</li>
				<li>Developers can specify whether they want hardware acceleration on Android by using the <strong class="source-inline">renderMode</strong> prop.</li>
				<li>Caching can be activated on Android through the <strong class="source-inline">cacheComposition</strong> prop.</li>
			</ul>
			<p>Windows support was added with version 4.0.0 of <strong class="source-inline">lottie-react-native</strong> but it is still under experimentation<a id="_idIndexMarker520"/> and should be used with caution.</p>
			<h2 id="_idParaDest-152"><a id="_idTextAnchor153"/>Versions</h2>
			<p><strong class="source-inline">lottie-react-native</strong> has largely evolved to accommodate<a id="_idIndexMarker521"/> new versions of React Native, <strong class="source-inline">lottie-ios</strong>, and <strong class="source-inline">lottie-android</strong>. All these versions are available through the npm repository.</p>
			<p>Developers should consider that newer versions include performance improvements and bug fixes, so it is always recommended to use the latest version that's available in the npm repository. However, working on specific versions of React Native may require developers to install a specific version of <strong class="source-inline">lottie-react-native</strong>. The following table shows the compatibility list:</p>
			<div>
				<div id="_idContainer254" class="IMG---Figure">
					<img src="image/B17930_07_01_Table.jpg" alt=""/>
				</div>
			</div>
			<h2 id="_idParaDest-153"><a id="_idTextAnchor154"/>The npm package</h2>
			<p>This library can be found in the npm<a id="_idIndexMarker522"/> repository as <strong class="source-inline">lottie-react-native</strong> (<a href="https://www.npmjs.com/package/lottie-react-native">https://www.npmjs.com/package/lottie-react-native</a>), and all its versions and documentation<a id="_idIndexMarker523"/> can be downloaded from <a href="https://www.npmjs.com/">https://www.npmjs.com/</a>. Here, users can also find the package's dependencies (the <strong class="bold">Dependencies</strong> tab) or which packages have <strong class="source-inline">lottie-react-native</strong> as a dependency (the <strong class="bold">Dependants</strong> tab).</p>
			<p>Both Yarn and npm can be used to install<a id="_idIndexMarker524"/> the package, as we will learn in the next chapter.</p>
			<h1 id="_idParaDest-154"><a id="_idTextAnchor155"/>Summary</h1>
			<p>In this chapter, we learned that <strong class="source-inline">lottie-react-native</strong> is a great alternative for displaying complex animations in our React Native apps. Serving as a wrapper for <strong class="source-inline">lottie-ios</strong> and <strong class="source-inline">lottie-android</strong>, <strong class="source-inline">lottie-react-native</strong> can easily be found as an npm package, as well as an open source repository on GitHub. Its documentation can be edited and accessed through regular GitHub PR mechanisms.</p>
			<p>Now that we have a better understanding of the theory surrounding the library, it's time to move toward a more practical approach. In the next chapter, we will install and use the <strong class="source-inline">lottie-react-native</strong> library to start rendering our Lottie animations in our Android or iOS applications, which have been built on React Native.</p>
		</div>
	</body></html>