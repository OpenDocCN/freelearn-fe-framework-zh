<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><div id="_idContainer059">
			<h1 id="_idParaDest-102" class="chapter-number"><a id="_idTextAnchor101"/>5</h1>
			<h1 id="_idParaDest-103"><a id="_idTextAnchor102"/>Building a Personal Posts Space and Implementing Authentication</h1>
			<p>In this chapter of our Nuxt 3 guide, we focus on a hands-on project: building a personal space for users to post content, integrated with secure authentication. This chapter bridges the gap between frontend development using Vue and Nuxt and backend functionality provided <span class="No-Break">by </span><span class="No-Break"><strong class="bold">Supabase</strong></span><span class="No-Break">.</span></p>
			<p>We start by <a id="_idIndexMarker262"/>setting up <strong class="bold">Supabase</strong>, a backend service that simplifies user authentication. This foundation is crucial for our application’s security. Next, we integrate this service with Nuxt 3, ensuring that our frontend and backend <span class="No-Break">communicate smoothly.</span></p>
			<p>Our journey then moves to the user interface. We will design easy-to-use login and registration forms. This section is about making forms that look good and work well, using Nuxt UI <span class="No-Break">and TailwindCSS.</span></p>
			<p>The next part is about creating a secure login system. We will cover important security topics, like token-based authentication, to keep user <span class="No-Break">data safe.</span></p>
			<p>The chapter concludes by teaching how to let users create and manage their own posts. This will give users a personal area in the application to share <span class="No-Break">their thoughts.</span></p>
			<p>This chapter is a practical guide to combining frontend design with backend technology, making a secure, user-friendly web application. Let’s <span class="No-Break">dive in!</span></p>
			<p>In this chapter we’re going to cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>Setting Up Initial Supabase Project For <span class="No-Break">User Authentication</span></li>
				<li>Integrating Nuxt 3 <span class="No-Break">with Supabase</span></li>
				<li>Designing Authentication UI and <span class="No-Break">Validating Inputs</span></li>
				<li>Setting Up User Authentication <span class="No-Break">with Supabase</span></li>
				<li>Creating and Managing Personal <span class="No-Break">User Posts</span></li>
			</ul>
			<h1 id="_idParaDest-104"><a id="_idTextAnchor103"/>Technical requirements</h1>
			<p>The code files for this chapter can be found <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Nuxt-3-Projects/tree/main/chapter05"><span class="No-Break">https://github.com/PacktPublishing/Nuxt-3-Projects/tree/main/chapter05</span></a></p>
			<p>The CiA video for this chapter can be found <span class="No-Break">on </span><a href="https://packt.link/AYK8X"><span class="No-Break">https://packt.link/AYK8X</span></a><a href="https://github.com/PacktPublishing/Nuxt-3-Projects-From-Basic-to-Advanced-Concepts"/></p>
			<h1 id="_idParaDest-105"><a id="_idTextAnchor104"/>Essential Background: What is Supabase?</h1>
			<p>Before we jump into the hands-on development of our project, it’s important to familiarize ourselves with Supabase and its capabilities, setting a strong groundwork for what we’re about <span class="No-Break">to build.</span></p>
			<ul>
				<li><em class="italic">Supabase Overview:</em> Supabase is an open-source Firebase alternative, offering a suite of tools to handle backend needs like databases, authentication, and real-time subscriptions. It uses PostgreSQL <span class="No-Break">by default.</span></li>
				<li><em class="italic">Database Management:</em> At its core, Supabase offers database services, allowing you to create, read, update, and delete data efficiently. We’ll use this feature to work on create user posts, update them, and <span class="No-Break">delete them.</span></li>
				<li><em class="italic">User Authentication:</em> It simplifies the process of managing users, handling everything from registration to login, and securing user data. Supabase supports various authentication methods, including email/password and third-party logins like Google <span class="No-Break">or GitHub.</span></li>
			</ul>
			<p><span class="No-Break"><em class="italic">Important Links:</em></span></p>
			<p>Before we start, here are some essential resources from Supabase that we’ll be using extensively. These links provide direct access to various tools within the Supabase platform. Each link corresponds to a specific page of the Supabase dashboard we will <span class="No-Break">interact with:</span></p>
			<ul>
				<li><strong class="bold">SQL </strong><span class="No-Break"><strong class="bold">Editor</strong></span><span class="No-Break">: </span><a href="https://supabase.com/dashboard/project/_/sql"><span class="No-Break">https://supabase.com/dashboard/project/_/sql</span></a></li>
				<li><strong class="bold">Table </strong><span class="No-Break"><strong class="bold">Editor</strong></span><span class="No-Break">: </span><a href="https://supabase.com/dashboard/project/_/editor%0D"><span class="No-Break">https://supabase.com/dashboard/project/_/editor</span></a></li>
				<li><strong class="bold">API </strong><span class="No-Break"><strong class="bold">Settings:</strong></span><span class="No-Break"> </span><a href="https://supabase.com/dashboard/project/_/settings/api"><span class="No-Break">https://supabase.com/dashboard/project/_/settings/api</span></a></li>
				<li><strong class="bold">Auth </strong><span class="No-Break"><strong class="bold">Providors:</strong></span><span class="No-Break"> </span><a href="https://supabase.com/dashboard/project/_/auth/providers"><span class="No-Break">https://supabase.com/dashboard/project/_/auth/providers</span></a></li>
			</ul>
			<p>These links are your direct line to the tools we’ll employ throughout this chapter. Now let’s proceed to the foundational step: setting up a new <span class="No-Break">Supabase project.</span></p>
			<h1 id="_idParaDest-106"><a id="_idTextAnchor105"/>Setting Up Initial Supabase Project For User Authentication</h1>
			<p>To start <a id="_idIndexMarker263"/>building our Nuxt 3 application, the <a id="_idIndexMarker264"/>first thing we need to do is to initialize a new Supabase project to set up our database <span class="No-Break">and API.</span></p>
			<p>After creating a new Supabase Account, Navigate to: <a href="https://supabase.com/dashboard/projects">https://supabase.com/dashboard/projects</a> and hit <strong class="bold">new project</strong> button. You’ll be asked to enter some basic details about your project. Let’s give the project a name <strong class="source-inline">My Space</strong>. After entering your project name and a secure database password, Supabase will start setting up your <span class="No-Break">new database.</span></p>
			<h2 id="_idParaDest-107"><a id="_idTextAnchor106"/>Setting Up the Database Schema</h2>
			<p>Let’s <a id="_idIndexMarker265"/>prepare the database schema. In the Supabase Dashboard, head to the <strong class="bold">SQL Editor</strong> tab and select <strong class="bold">Quickstart</strong>. There, use the “User Management Starter” for an efficient setup of your database schema. This tool sets up a <strong class="source-inline">profiles</strong> table connected to user authentication and includes a trigger to automatically generate profile entries when new users <span class="No-Break">sign up.</span></p>
			<div>
				<div id="_idContainer048" class="IMG---Figure">
					<img src="image/B19760_05_1.jpg" alt="Figure 5.1: Supabase User Management Starter" width="1650" height="775"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.1: Supabase User Management Starter</p>
			<p>You’ll find <a id="_idIndexMarker266"/>a pre-written query. Click <strong class="bold">Run</strong> to execute it and establish our initial table. Alternatively, you could write a custom query to build the database, but since our focus is on integrating with Nuxt, we’ll skip <span class="No-Break">this step.</span></p>
			<p>Now, move to the <strong class="bold">Table Editor</strong> tab. Here, you’ll see a table named <strong class="source-inline">profile </strong>created through the “User Management Starter.” Let’s proceed to create a <strong class="source-inline">posts</strong> table and this time we’ll create it using Supabase UI. click the “create new Table” button, name it <strong class="source-inline">posts</strong>, and configure the Columns <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer049" class="IMG---Figure">
					<img src="image/B19760_05_2.jpg" alt="Figure 5.2: posts table columns schema" width="653" height="383"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.2: posts table columns schema</p>
			<ul>
				<li>Here is <a id="_idIndexMarker267"/><span class="No-Break">the overview:</span></li>
				<li>The system automatically adds <strong class="source-inline">id, </strong><span class="No-Break"><strong class="source-inline">created_at</strong></span><span class="No-Break"> columns.</span></li>
				<li>We’ve added a required <span class="No-Break"><strong class="source-inline">title</strong></span><span class="No-Break"> column.</span></li>
				<li>There’s also a <strong class="source-inline">content</strong> column, which is optional. You can make it nullable by toggling the option in the <span class="No-Break">configuration menu.</span></li>
				<li><strong class="source-inline">author_id</strong> serves as a foreign key linking to the user profile. Clicking on the link displays its current settings, including the reference table <span class="No-Break">and column.</span></li>
			</ul>
			<div>
				<div id="_idContainer050" class="IMG---Figure">
					<img src="image/B19760_05_3.jpg" alt="Figure 5.3: author_id foreign key" width="435" height="408"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.3: author_id foreign key</p>
			<p>With your <a id="_idIndexMarker268"/>database tables ready, the next step is to get the API keys. These keys let your application talk to the Supabase API. Find the <strong class="bold">API Settings</strong> in your Supabase Dashboard, then copy <strong class="source-inline">project url</strong>, and <strong class="source-inline">anon</strong> key from <span class="No-Break">this page.</span></p>
			<p>Finally, Supabase enables email confirmation by default, so that the users will need to confirm their email address before signing in for the first time. For Testing purposes, we’ll disable this feature by navigating to <strong class="bold">Auth Providors</strong> page, locate the email provider setting, then toggle the “Confirm Email” switch <span class="No-Break">to off.</span></p>
			<div>
				<div id="_idContainer051" class="IMG---Figure">
					<img src="image/B19760_05_4.jpg" alt="Figure 5.4: disabling confirm email option" width="887" height="433"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.4: disabling confirm email option</p>
			<p>With our <a id="_idIndexMarker269"/>Supabase setup complete, we now turn to integrating it with Nuxt 3. In the following section, we’ll create a new Nuxt application and integrate it with Supabse using a module <span class="No-Break">called “</span><span class="No-Break"><strong class="source-inline">@nuxtjs/supabase</strong></span><span class="No-Break">”</span></p>
			<h1 id="_idParaDest-108"><a id="_idTextAnchor107"/>Integrating Nuxt 3 with Supabase</h1>
			<p>With our <a id="_idIndexMarker270"/>Supabase setup now in place, it’s time to <a id="_idIndexMarker271"/>turn our attention to how we can seamlessly integrate this backend with our Nuxt <span class="No-Break">3 application</span></p>
			<h2 id="_idParaDest-109"><a id="_idTextAnchor108"/>Creating a New Nuxt 3 Project with Supabase Integration</h2>
			<p>Start <a id="_idIndexMarker272"/>by creating a new Nuxt 3 project. Open <a id="_idIndexMarker273"/>your terminal <span class="No-Break">and run:</span></p>
			<pre class="console">
pnpm dlx nuxi init my-space
cd my-space
pnpm i -D @nuxtjs/supabase</pre>			<p>Next, create a <strong class="source-inline">.env</strong> file in your project root and add your Supabase URL and <span class="No-Break">anon key:</span></p>
			<pre class="console">
SUPABASE_URL="YOUR_SUPABASE_URL"
SUPABASE_KEY="YOUR_SUPABASE_ANON_KEY"</pre>			<p>Replace <strong class="source-inline">"YOUR_SUPABASE_URL"</strong> and <strong class="source-inline">"YOUR_SUPABASE_ANON_KEY"</strong> with the actual values you copied from your <span class="No-Break">Supabase project.</span></p>
			<h2 id="_idParaDest-110"><a id="_idTextAnchor109"/>Overriding Authentication Routes</h2>
			<p>In the default configuration, Supabase uses the <strong class="source-inline">/login</strong> route for user login and automatically <a id="_idIndexMarker274"/>redirects unauthenticated (or anonymous) users <a id="_idIndexMarker275"/>to this route. However, to tailor our application’s navigation flow and URL structure, we can configure these authentication routes in <span class="No-Break">Nuxt 3.</span></p>
			<p>To customize the behavior of our authentication routes, we need to make adjustments in the <strong class="source-inline">nuxt.config.ts</strong> file. Specifically, by adding <strong class="source-inline">supabase</strong> object with configuration <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
supabase: {
  redirectOptions: {
    login: 'auth/login',
    callback: '',
    exclude: ['/auth/*']
  }
}</pre>			<p>Let’s discuss <span class="No-Break">every change:</span></p>
			<ul>
				<li>We’ve changed the default login route from <strong class="source-inline">/login</strong> <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">/auth/login</strong></span></li>
				<li><strong class="source-inline">callback</strong> option is left empty. This is because callback handling is often associated with third-party providers, which we’re not covering at <span class="No-Break">this stage.</span></li>
				<li><strong class="source-inline">exclude</strong> option is set to <strong class="source-inline">['/auth/*']</strong>. This pattern means all routes under the <strong class="source-inline">/auth/</strong> path, like <strong class="source-inline">/auth/login</strong> and <strong class="source-inline">/auth/signup</strong>, are accessible to anonymous users. This setup is advantageous, especially when planning to expand our authentication pages in the future (e.g., adding password reset or recovery pages) without needing to update the exclude option <span class="No-Break">each time.</span></li>
			</ul>
			<p>By configuring <a id="_idIndexMarker276"/>these settings, we ensure that our application’s authentication flow is both user-friendly and scalable, ready to accommodate <a id="_idIndexMarker277"/>additional features as our <span class="No-Break">project grows.</span></p>
			<p>With our authentication routes now customized, let’s move on to designing the user interface for authentication and implementing <span class="No-Break">input validation.</span></p>
			<h1 id="_idParaDest-111"><a id="_idTextAnchor110"/>Authentication UI and Validating Inputs</h1>
			<p>To enhance <a id="_idIndexMarker278"/>the user experience of our authentication process, we’ll first <a id="_idIndexMarker279"/>install and configure some essential modules for our Nuxt <span class="No-Break">3 project.</span></p>
			<h2 id="_idParaDest-112"><a id="_idTextAnchor111"/>Installing Required Modules</h2>
			<p>Open your <a id="_idIndexMarker280"/>terminal and install <strong class="source-inline">@nuxtjs/google-fonts</strong> as usual, and <strong class="source-inline">@nuxt/ui</strong> as we learned in the <span class="No-Break">previous chapter:</span></p>
			<pre class="console">
pnpm i @nuxtjs/google-fonts -D
pnpm i @nuxt/ui</pre>			<p>These commands will add Google Fonts and Nuxt UI to our project. Next, we need to update our <strong class="source-inline">nuxt.config.ts</strong> to include these modules and set some <span class="No-Break">additional configurations:</span></p>
			<pre class="source-code">
modules: ['@nuxtjs/supabase', '@nuxtjs/google-fonts',
  '@nuxt/ui'],
googleFonts: {
  families: {
    Poppins: [400, 500, 700]
  }
},
app: {
  head: {
    title: 'My Space'
  }
}</pre>			<p>Here, the <strong class="source-inline">app</strong> configuration sets the title of our application to “<span class="No-Break">My Space.”</span></p>
			<p>To further <a id="_idIndexMarker281"/>tailor our UI, create an <strong class="source-inline">app.config.ts</strong> file to update Nuxt UI’s primary color and set default properties for Nuxt <span class="No-Break">UI components:</span></p>
			<pre class="source-code">
export default defineAppConfig({
  ui: {
    primary: 'teal',
    container: {
      padding: 'py-6'
    }
  }
});</pre>			<p>As with previous chapters, don’t forget to include the <strong class="source-inline">tailwind.config.ts</strong> in your project. This file is crucial for customizing TailwindCSS to fit the styling needs of <span class="No-Break">our application.</span></p>
			<p>Our next task is to create effective layouts for the login and <span class="No-Break">signup pages.</span></p>
			<h2 id="_idParaDest-113"><a id="_idTextAnchor112"/>Setting Up Auth Pages</h2>
			<p>Create <a id="_idIndexMarker282"/>empty layout <strong class="source-inline">default.vue</strong> in the <strong class="source-inline">/layouts</strong> directory. This <a id="_idIndexMarker283"/>layout will be utilized later in <span class="No-Break">the project.</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;slot&gt;&lt;/slot&gt;
&lt;/template&gt;</pre>			<p>In the <a id="_idIndexMarker284"/>same directory, create <strong class="source-inline">auth.vue</strong> layout. This layout <a id="_idIndexMarker285"/>will be specifically used for authentication-related pages like login <span class="No-Break">and signup:</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;div class="grid md:grid-cols-2 min-h-screen
  bg-gray-100"&gt;
    &lt;!-- Image Column --&gt;
    &lt;div class="hidden md:flex md:col-span-1 items-center
    justify-center bg-white"&gt;
      &lt;img src="~/assets/images/auth.svg" class="max-w-md"
      /&gt;
    &lt;/div&gt;
    &lt;!-- Form Column --&gt;
    &lt;div class="col-span-1 flex justify-center
    items-center"&gt;
      &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>			<p>This layout divides the screen into two columns on medium and larger screens, with one column for an image (provided in the repository) and the other for <span class="No-Break">the form.</span></p>
			<p>Next, Override the <strong class="source-inline">app.vue</strong> to specify that we’ll be using layouts <span class="No-Break">and pages:</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;NuxtLayout&gt;
    &lt;NuxtPage /&gt;
  &lt;/NuxtLayout&gt;
&lt;/template&gt;</pre>			<p>Then, create a <strong class="source-inline">/pages/auth/</strong> directory and add a <strong class="source-inline">login.vue</strong> page <span class="No-Break">inside it.</span></p>
			<pre class="source-code">
&lt;u-card class="md:min-w-96"&gt;
  &lt;!-- Form Content --&gt;
  &lt;div class="text-2xl text-center font-bold mb-1"&gt;
    Login
  &lt;/div&gt;
  &lt;div class="text-slate-500 text-sm text-center mb-4"&gt;
    Don't have an account?
    &lt;UButton variant="link" to="/auth/signup"&gt;
    Create one!&lt;/UButton&gt;
  &lt;/div&gt;
  &lt;!-- the form --&gt;
&lt;/u-card&gt;</pre>			<p>The page <a id="_idIndexMarker286"/>Begin with a simple card layout that includes <a id="_idIndexMarker287"/>a title and a navigation link to the signup page. Then we’ll use Nuxt UI components like <strong class="source-inline">UForm</strong>, <strong class="source-inline">UFormGroup</strong>, and <strong class="source-inline">UInput</strong> for the form elements, which are pre-styled and help in <span class="No-Break">input validation:</span></p>
			<pre class="source-code">
&lt;!-- the form --&gt;
&lt;UForm&gt;
  &lt;UFormGroup label="Email" name="email" class="mb-4"&gt;
    &lt;UInput v-model="user.email" icon="i-heroicons-at-
    symbol" /&gt;
  &lt;/UFormGroup&gt;
  &lt;UFormGroup label="Password" name="password"
  class="mb-4"&gt;
    &lt;UInput
      v-model="user.password"
      type="password"
      icon="i-heroicons-lock-closed"
    /&gt;
  &lt;/UFormGroup&gt;
  &lt;!-- Submit Button --&gt;
  &lt;UButton type="submit" block class="mt-8"&gt;
    Login
  &lt;/UButton&gt;
&lt;/UForm&gt;</pre>			<p>The <strong class="source-inline">icon="i-heroicons-at-symbol"</strong> in Nuxt UI represents an icon from the Heroicons <a id="_idIndexMarker288"/>collection. Following the pattern<strong class="source-inline"> i-{collection_name}-{icon_name}</strong>, it is easy to connect any icon collection from <a href="https://icones.js.org/%20">https://icones.js.org/ </a>into <span class="No-Break">Nuxt UI.</span></p>
			<p>Finally, define the <a id="_idIndexMarker289"/>layout and set up the reactive state for <span class="No-Break">user data:</span></p>
			<pre class="source-code">
&lt;script setup&gt;
definePageMeta({ layout: 'auth' })
const user = ref({
  email: '',
  password: ''
})
&lt;/script&gt;</pre>			<p>You should now see a layout for the login page <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer052" class="IMG---Figure">
					<img src="image/B19760_05_5.jpg" alt="0Figure 5.5: Login Page Layout" width="1650" height="980"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">0Figure 5.5: Login Page Layout</p>
			<p>In a similar <a id="_idIndexMarker290"/>way, create <strong class="source-inline">signup.vue</strong> page that <a id="_idIndexMarker291"/>contains an extra field called for <span class="No-Break">password confirmation:</span></p>
			<pre class="source-code">
&lt;UFormGroup
  label="Password Confirmation"
  name="passwordConfirm"
  class="mb-4"
&gt;
&lt;UInput
  v-model="user.passwordConfirm"
  type="password"
  icon="i-heroicons-lock-closed"
/&gt;
&lt;/UFormGroup&gt;</pre>			<p>And don’t <a id="_idIndexMarker292"/>forget to add it to <span class="No-Break"><strong class="source-inline">user</strong></span><span class="No-Break"> ref:</span></p>
			<pre class="source-code">
const user = ref({
  email: '',
  password: '',
  passwordConfirm: ''
})</pre>			<p>Now that we <a id="_idIndexMarker293"/>have our authentication UI in place, let’s enhance it with input validation <span class="No-Break">using </span><span class="No-Break"><strong class="bold">Joi</strong></span></p>
			<h2 id="_idParaDest-114"><a id="_idTextAnchor113"/>Using Joi for Input Validation</h2>
			<p>The <strong class="source-inline">UForm</strong> component in Nuxt UI offers a powerful feature through its <strong class="source-inline">schema</strong> prop. This prop <a id="_idIndexMarker294"/>allows you to integrate a validation schema from libraries like <strong class="bold">Joi</strong> or <strong class="bold">Yup</strong>, providing a way to enforce specific validation <a id="_idIndexMarker295"/>rules on your form’s state. For our example, we’ll <a id="_idIndexMarker296"/>utilize <strong class="bold">Joi</strong> to create our validation schemas. You can read more about Joi from the <a id="_idIndexMarker297"/>official <span class="No-Break">website: </span><a href="https://joi.dev/api/%0D"><span class="No-Break">https://joi.dev/api/</span></a></p>
			<p>Begin by adding Joi to <span class="No-Break">your project:</span></p>
			<pre class="console">
pnpm i joi</pre>			<p>Then in the <strong class="source-inline">login.vue</strong> script, Define a Joi validation schema for the <span class="No-Break">login form:</span></p>
			<pre class="source-code">
const schema = Joi.object({
  email: Joi.string().email({ tlds: false }).required(),
  password: Joi.string().min(6).required()
});</pre>			<p>This <a id="_idIndexMarker298"/>schema ensures that the email is a valid <a id="_idIndexMarker299"/>email and filled out. Also, we ensure that the password is at least 6 characters long. We used <strong class="source-inline">{ tlds: false }</strong> to disable the built-it TLD <a id="_idIndexMarker300"/>Validation from Joi. In order to Implement the schema in the form component. We have to adjust it <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
&lt;UForm :schema="schema" :state="user"&gt;
  &lt;!-- Form content --&gt;
&lt;/UForm&gt;</pre>			<p>The <strong class="source-inline">schema</strong> prop validates the <strong class="source-inline">user</strong> state according to the defined Joi schema. Try testing the validation by leaving the email input field empty and moving focus away. An error message should appear beneath the <span class="No-Break">input field:</span></p>
			<div>
				<div id="_idContainer053" class="IMG---Figure">
					<img src="image/B19760_05_6.jpg" alt="Figure 5.6: input validation with Joi and Nuxt UI" width="636" height="390"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.6: input validation with Joi and Nuxt UI</p>
			<p>The <a id="_idIndexMarker301"/>signup page will have a similar validation for email <a id="_idIndexMarker302"/>and password. Additionally, we’ll add a complex validation <a id="_idIndexMarker303"/>for <span class="No-Break">password confirmation:</span></p>
			<pre class="source-code">
const schema = Joi.object({
  email: Joi.string().required(),
  password: Joi.string().min(6).required().label(
    'Password'),
  passwordConfirm: Joi.valid(Joi.ref('password'))
    .label('Confirm Password')
    .messages({
      'any.only': `passwords don't match`
    })
});</pre>			<p>Here, the <strong class="source-inline">passwordConfirm</strong> field uses <strong class="source-inline">Joi.ref('password')</strong> to ensure it matches <a id="_idIndexMarker304"/>the password field. The <strong class="source-inline">.messages({ 'any.only': \passwords don't match` })`</strong> part customizes <a id="_idIndexMarker305"/>the error message, making it clear and user-friendly. When the passwords <span class="No-Break">don’t match.</span></p>
			<p>With our <a id="_idIndexMarker306"/>input validation set up, the next step is to integrate Supabase’s login and <span class="No-Break">signup functions.</span></p>
			<h1 id="_idParaDest-115"><a id="_idTextAnchor114"/>Setting Up User Authentication with Supabase</h1>
			<p>Now, let’s <a id="_idIndexMarker307"/>focus on integrating Supabase’s authentication capabilities, using their straightforward login and signup functions <a id="_idIndexMarker308"/>to manage user access in <span class="No-Break">our application.</span></p>
			<p>The <strong class="source-inline">useSupabaseClient</strong> composable in Nuxt 3 is a gateway to the Supabase API, facilitating seamless communication between your Vue application and the Supabase services. Powered by <strong class="source-inline">supabase-js</strong>, it provides access to the Supabase client, which is initialized using the <strong class="source-inline">SUPABASE_KEY</strong> from your .env file. This client connects to <span class="No-Break">the database.</span></p>
			<h2 id="_idParaDest-116"><a id="_idTextAnchor115"/>Creating the Signup Function</h2>
			<p>Inside <strong class="source-inline">signup.vue</strong> script, get a Supabase <span class="No-Break">instance using:</span></p>
			<pre class="source-code">
const supabase = useSupabaseClient()</pre>			<p>This <a id="_idIndexMarker309"/>instance will be used to make requests to Supabase, particularly for user authentication functions like <strong class="source-inline">signup</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">signInWithPassword</strong></span><span class="No-Break">.</span></p>
			<p>Next create an <strong class="source-inline">onSubmit</strong> function to handle the <span class="No-Break">signup process:</span></p>
			<pre class="source-code">
const loading = ref(false)
const onSubmit = async () =&gt; {
  loading.value = true
  try {
    const { error } = await supabase.auth.signUp({
      email: user.value.email,
      password: user.value.password
    })
    if (error) throw error
  } catch (error) {
    const message = error.message
    console.log(message);
  }
  loading.value = false
}</pre>			<p>Here is <a id="_idIndexMarker310"/>the <span class="No-Break">code breakdown:</span></p>
			<ul>
				<li>Sets <strong class="source-inline">loading</strong> to <strong class="source-inline">true</strong>, indicating the start of an <span class="No-Break">asynchronous operation.</span></li>
				<li>Calls the <strong class="source-inline">signUp</strong> method from the Supabase authentication API. This is where we interact with Supabase to register a new user, extracting email and password from <span class="No-Break"><strong class="source-inline">user</strong></span><span class="No-Break"> ref.</span></li>
				<li>Checks if there’s an error from the Supabase signup process, throws it to be caught in the <span class="No-Break">catch block.</span></li>
				<li>Logs any error that occurs during the signup process (<span class="No-Break">for testing).</span></li>
				<li>Setting loading back <span class="No-Break">to false</span></li>
			</ul>
			<p>This function effectively manages the signup process, interacting with Supabase’s authentication API to register users. It handles the entire flow from sending the request to processing responses <span class="No-Break">and errors.</span></p>
			<p>To test error <a id="_idIndexMarker311"/>handling, temporarily remove the <strong class="source-inline">schema</strong> prop from <strong class="source-inline">UForm</strong> and try submitting an empty form. an error response should be printed in the <span class="No-Break">devtools console:</span></p>
			<div>
				<div id="_idContainer054" class="IMG---Figure">
					<img src="image/B19760_05_7.jpg" alt="Figure 5.7: Supabase Signup Error" width="1106" height="844"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.7: Supabase Signup Error</p>
			<p>Continuing from where we left off in the signup process, let’s enhance our error handling by introducing Nuxt UI Notifications. These notifications provide a more user-friendly way to display messages, such as errors, in a toast <span class="No-Break">notification format.</span></p>
			<p>Include the <strong class="source-inline">UNotifications</strong> component in your <strong class="source-inline">app.vue</strong>. This is a global setup, allowing you to display notifications anywhere in <span class="No-Break">your app:</span></p>
			<p>&lt;<span class="No-Break">template&gt;</span></p>
			<pre class="source-code">
  &lt;NuxtLayout&gt;
    &lt;NuxtPage /&gt;
    &lt;UNotifications /&gt;
  &lt;/NuxtLayout&gt;
&lt;/template&gt;</pre>			<p>The <strong class="source-inline">useToast</strong> composable from Nuxt UI allows you to easily add toast notifications to your application. We can get a toaster instance by adding the following line to <span class="No-Break"><strong class="source-inline">signup.vue</strong></span><span class="No-Break"> script:</span></p>
			<pre class="source-code">
const toast = useToast()</pre>			<p>Now let’s <a id="_idIndexMarker312"/>modify the <strong class="source-inline">catch</strong> block of your signup function to use this composable for displaying <span class="No-Break">error messages:</span></p>
			<pre class="source-code">
catch (error) {
  toast.add({ title: error.message, color: 'red' });
}</pre>			<p>Here, <strong class="source-inline">toast.add</strong> is used to display a toast notification. We set the color to ‘red’, indicating that it’s an error message. Try submitting an empty form to trigger a validation error. You should see a red toast notification displaying the <span class="No-Break">error message:</span></p>
			<div>
				<div id="_idContainer055" class="IMG---Figure">
					<img src="image/B19760_05_8.jpg" alt="Figure 5.8: Nuxt UNotification component" width="1079" height="868"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.8: Nuxt UNotification component</p>
			<p>This visual <a id="_idIndexMarker313"/>feedback is immediate and clear, making it easier for users to understand and react <span class="No-Break">to errors.</span></p>
			<p>Continuing with our signup functionality, let’s add a success toast notification and set up navigation to the homepage upon successful signup. In the <strong class="source-inline">onSubmit</strong> function, update the try block to sign in the user using Supabase after <span class="No-Break">successful registration:</span></p>
			<pre class="source-code">
const onSubmit = async () =&gt; {
  loading.value = true
  try {
    const { error } = await supabase.auth.signUp({
      email: user.value.email,
      password: user.value.password
    })
    if (error) throw error
    toast.add({ title: 'Welcome!' })
    navigateTo('/')
  } catch (error) {
    toast.add({ title: error.message, color: 'red' })
  }
  loading.value = false
}</pre>			<p>Don’t forget <a id="_idIndexMarker314"/>to revert the <strong class="source-inline">schema</strong> prop in the <strong class="source-inline">UForm</strong> to enable <span class="No-Break">validation again.</span></p>
			<p>It’s time for testing! First, create a simple <strong class="source-inline">index.vue</strong> page that contains <span class="No-Break">the following:</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;div class="bg-gray-100 min-h-screen"&gt;
    &lt;UContainer&gt;
      &lt;h1 class="text-3xl font-semibold text-center
      text-gray-800 mb-6"&gt;
        My Posts
      &lt;/h1&gt;
    &lt;/UContainer&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>			<p>Upon filling correct information and achieving a successful signup, a welcome toast should be shown, and you should be redirected to <span class="No-Break">the homepage:</span></p>
			<div>
				<div id="_idContainer056" class="IMG---Figure">
					<img src="image/B19760_05_9.jpg" alt="Figure 5.9: index page" width="1106" height="661"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.9: index page</p>
			<p>To ensure that the authentication flow is working, open <strong class="source-inline">http://localhost:3000/</strong> in a private window. You should be automatically redirected to<strong class="source-inline">'auth/login/</strong> due to Nuxt Supabase’s built-in middleware, which checks user <span class="No-Break">authentication status.</span></p>
			<p>Now that our <a id="_idIndexMarker315"/>signup functionality is in place, let’s focus on implementing the login process. The method for logging in is similar to the signup, but we’ll be using Supabase’s <strong class="source-inline">signInWithPassword</strong> method. In your <strong class="source-inline">login.vue</strong> page, define the <strong class="source-inline">onSubmit</strong> function specifically for the <span class="No-Break">login process:</span></p>
			<pre class="source-code">
const onSubmit = async () =&gt; {
  loading.value = true;
  try {
    const { error } =
    await supabase.auth.signInWithPassword({
      email: user.value.email,
      password: user.value.password
    });
    if (error) throw error;
    toast.add({ title: 'Logged in successfully!' });
    navigateTo('/');
  } catch (error) {
    toast.add({ title: error.message, color: 'red' });
  } finally {
    loading.value = false;
  }
};</pre>			<p>This function <a id="_idIndexMarker316"/>attempts to log in the user using their email and password. Upon successful login, the user is greeted with a success toast and redirected to <span class="No-Break">the homepage.</span></p>
			<p>Link the <strong class="source-inline">onSubmit</strong> function to the <strong class="source-inline">UForm</strong> in your <span class="No-Break">login page:</span></p>
			<pre class="source-code">
&lt;UForm :schema="schema" :state="user" @submit="onSubmit"&gt;
  &lt;!-- Form fields --&gt;
&lt;/UForm&gt;</pre>			<p>By implementing this login functionality, we’ve ensured that users can access their accounts securely and conveniently. The process is straightforward, making the login experience smooth and efficient. Next, we’ll delve into how users can create, view, and manage their own posts within our application, making it a truly interactive and <span class="No-Break">personal space.</span></p>
			<h1 id="_idParaDest-117"><a id="_idTextAnchor116"/>Creating and Managing Personal User Posts</h1>
			<p>In this section, we turn our attention to enabling users to create and manage their posts. To ensure <a id="_idIndexMarker317"/>this works smoothly, we need to set up <a id="_idIndexMarker318"/>specific rules in our database table: <strong class="source-inline">posts</strong> using Supabase’s Row-Level Security (<span class="No-Break">RLS) policies.</span></p>
			<p>RLS policies in Supabase are like rules for your database. They help control who can see or change data in the database. For our app, we’ll use these policies to make sure users can only access their <span class="No-Break">own posts.</span></p>
			<h2 id="_idParaDest-118"><a id="_idTextAnchor117"/>Adding RLS Policy for the ‘Posts’ Table</h2>
			<p>Open <a id="_idIndexMarker319"/>Supabase policies page: . This is where you can control who accesses what in your database. Choose the <strong class="source-inline">posts</strong> table and start making a <span class="No-Break">new policy:</span></p>
			<ul>
				<li>Name it something clear like “Personal <span class="No-Break">Posts Management”.</span></li>
				<li>Choose “ALL” for operations so users can read, add, update, and delete <span class="No-Break">their posts.</span></li>
				<li>For ‘Target Roles’, pick “authenticated” so only logged-in users can use <span class="No-Break">this policy.</span></li>
				<li>Add the <strong class="source-inline">(auth.uid() = author_id)</strong> expression to both <strong class="bold">using</strong> and <strong class="bold">with check</strong> expression. This ensures users can only view and interact with posts they’ve created, maintaining strict user-specific access for both viewing and <span class="No-Break">modifying content.</span></li>
			</ul>
			<p>The Policy details should be <span class="No-Break">like this:</span></p>
			<div>
				<div id="_idContainer057" class="IMG---Figure">
					<img src="image/B19760_05_10.jpg" alt="Figure 5.10: posts table RLS policy" width="813" height="796"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.10: posts table RLS policy</p>
			<p>With our <a id="_idIndexMarker320"/>RLS policies in place for the <strong class="source-inline">posts</strong> table, let’s now delve into how we can use Supabase’s API to manage these posts within <span class="No-Break">our application.</span></p>
			<h2 id="_idParaDest-119"><a id="_idTextAnchor118"/>Using Supabase API for Post Management</h2>
			<p><strong class="source-inline">useSupabaseClient </strong>in Nuxt 3 opens up a straightforward path to interact with our database. It’s <a id="_idIndexMarker321"/>our go-to for executing operations on the <span class="No-Break"><strong class="source-inline">posts</strong></span><span class="No-Break"> table.</span></p>
			<p>Your project’s specific API documentation on Supabase gives detailed insights into possible queries. For a hands-on <span class="No-Break">look, visit:</span></p>
			<p>With a simple <span class="No-Break">command like:</span></p>
			<pre class="source-code">
supabase.from('posts').select()</pre>			<p>we can fetch an array of user-specific posts, thanks to the RLS policies ensuring each user sees only their content. To create or update a post, we can <span class="No-Break">use </span><span class="No-Break"><strong class="source-inline">upsert</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
supabase.from('posts').upsert(/* your post data */)</pre>			<p>This function elegantly handles both new post insertions and updates to existing posts, checking against unique identifiers to decide the <span class="No-Break">appropriate action.</span></p>
			<p>Finally, for deleting posts, the combination of the <strong class="source-inline">delete</strong> method and the <strong class="source-inline">eq</strong> filter ensures we precisely target and remove the <span class="No-Break">intended post:</span></p>
			<pre class="source-code">
supabase.from('posts').delete().eq('id', postId)</pre>			<p>This <a id="_idIndexMarker322"/>targeted approach reinforces the control users have over their posts, aligning with the security measures <span class="No-Break">we’ve implemented.</span></p>
			<p>let’s move on to developing a user interface for creating and updating <span class="No-Break">post information.</span></p>
			<h2 id="_idParaDest-120"><a id="_idTextAnchor119"/>Building the Post Information Page</h2>
			<p>Begin by <a id="_idIndexMarker323"/>setting up a dynamic route in your Nuxt application. Create a file named <strong class="source-inline">[id].vue</strong> inside the <strong class="source-inline">/pages/posts/</strong> directory. This dynamic route, represented by <strong class="source-inline">[id]</strong>, will allow the page to handle different scenarios based on <span class="No-Break">the URL:</span></p>
			<ul>
				<li>When the <strong class="source-inline">[id]</strong> in the route is set to <strong class="source-inline">create</strong>, we know the user is looking to create a <span class="No-Break">new post.</span></li>
				<li>If <strong class="source-inline">[id]</strong> is an actual post ID, it indicates the user intends to view or edit an existing post. In this case, we’ll use this ID to fetch the relevant <span class="No-Break">post data.</span></li>
			</ul>
			<p>This approach gives us a flexible and efficient way to handle both new post creation and the editing of existing posts, all within a single, <span class="No-Break">dynamic interface.</span></p>
			<p>Inside the template: create a <span class="No-Break">simple layout:</span></p>
			<pre class="source-code">
&lt;div class="min-h-screen bg-gray-100"&gt;
  &lt;UContainer&gt;
    &lt;h2 class="mt-6 text-center text-3xl font-extrabold
    text-gray-900 mb-8"&gt;
      Post Information
    &lt;/h2&gt;
    &lt;UCard class="max-w-md mx-auto"&gt;
  &lt;!-- the form --&gt;
    &lt;/UCard&gt;
  &lt;/UContainer&gt;
&lt;/div&gt;</pre>			<p>And <a id="_idIndexMarker324"/>the form will be <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
&lt;UForm
  class="space-y-6"
  :schema="schema"
  :state="post"
  @submit="onSubmit"
&gt;
  &lt;UFormGroup label="Title" name="title"&gt;
    &lt;UInput type="text" v-model="post.title" /&gt;
  &lt;/UFormGroup&gt;
  &lt;UFormGroup label="Content" name="content"&gt;
    &lt;UTextarea type="text" v-model="post.content" :rows="8"
    /&gt;
  &lt;/UFormGroup&gt;
  &lt;UButton type="submit" block primary :loading="pending"&gt;
    Save Changes
  &lt;/UButton&gt;
&lt;/UForm&gt;</pre>			<p>Under <a id="_idIndexMarker325"/>the Form, add a small error button for <span class="No-Break">post deletion:</span></p>
			<pre class="source-code">
&lt;div class="flex justify-center mt-12"&gt;
  &lt;UButton
    color="red"
    variant="outline"
    :loading="deleteLoading"
    @click="deletePost"
  &gt;
    Delete
  &lt;/UButton&gt;
&lt;/div&gt;</pre>			<p>In the script part of our page, we set up the state and validation schema for <span class="No-Break">our post:</span></p>
			<pre class="source-code">
&lt;script setup&gt;
import Joi from 'joi'
const user = useSupabaseUser()
const post = ref({
  title: '',
  content: undefined,
  author_id: user.value.id
})
const schema = Joi.object({
  author_id: Joi.string().required(),
  title: Joi.string().required(),
  content: Joi.string().allow('', null)
}).unknown(true) // to allow additional fields like id, created_at
&lt;/script&gt;</pre>			<p>Here’s <a id="_idIndexMarker326"/><span class="No-Break">the breakdown:</span></p>
			<ul>
				<li><strong class="source-inline">useSupabaseUser()</strong> provides the information of the <span class="No-Break">logged-in user.</span></li>
				<li><strong class="source-inline">post</strong> holds the data for the <strong class="source-inline">title</strong>, <strong class="source-inline">content</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">author_id.</strong></span></li>
				<li>The <strong class="source-inline">schema</strong> defines the necessary fields and their <span class="No-Break">validation rules.</span></li>
				<li>The <strong class="source-inline">.unknown(true)</strong> part lets the form handle additional fields like <strong class="source-inline">id</strong> and <strong class="source-inline">created_at</strong> without <span class="No-Break">validation errors.</span></li>
			</ul>
			<p>As we continue in building our script block by block, <span class="No-Break">let’s add:</span></p>
			<pre class="source-code">
const route = useRoute()
const postId = computed(() =&gt; route.params.id)
const editMode = computed(() =&gt; route.params.id !== 'create')
const toast = useToast()</pre>			<p>We captured the current route details, essential for determining the post ID and the mode (create or edit). Then we extracted the post ID from the route parameters. Finally, we used <strong class="source-inline">editMode</strong> to determine if the user is in edit mode (editing an existing post) or create mode (creating a <span class="No-Break">new post).</span></p>
			<p>Now let’s handle Data Fetching with <strong class="source-inline">useLazyAsyncData</strong>. Nuxt provides a great composable to perform data-fetching in a browser or server environment called, <strong class="source-inline">useAsyncData</strong>. It fetches data before rendering the page, ideal for server-side rendering where data must be present initially. <strong class="source-inline">useLazyAsyncData</strong>, in contrast, starts page rendering immediately and loads data in the background, enhancing user experience by reducing wait times, especially useful for non-critical data like loading posts in <span class="No-Break">our application.</span></p>
			<pre class="source-code">
So to fetch the data we'll add:
const { pending } = useLazyAsyncData(async () =&gt; {
  if (!editMode.value) return;
  const { data } = await supabase
    .from('posts')
    .select()
    .eq('id', postId.value)
    .single();
  if (data) post.value = data;
});</pre>			<p>In this case, if the user is in edit mode, the script fetches the specific post data from Supabase <a id="_idIndexMarker327"/>and populates the form for editing. It checks the post ID against the database and retrieves the corresponding post details. Otherwise, the <strong class="source-inline">post</strong> ref will <span class="No-Break">remain empty.</span></p>
			<p>Let’s examine the <strong class="source-inline">onSubmit</strong> function, which handles both creating and <span class="No-Break">updating posts:</span></p>
			<pre class="source-code">
const toast = useToast()
const onSubmit = async () =&gt; {
  pending.value = true
  try {
    const { error } =
      await supabase.from('posts').upsert(post.value)
    if (error) throw error
    if (!editMode.value) toast.add({ title: 'Post Created
      Successfully' })
    else toast.add({ title: 'Post Updated Successfully' })
    navigateTo('/')
  } catch (error) {
    toast.add({ title: error.message, color: 'red' })
  }
  pending.value = false
}</pre>			<p>Here’s <a id="_idIndexMarker328"/><span class="No-Break">the breakdown:</span></p>
			<ul>
				<li>The function performs an <strong class="source-inline">upsert</strong> operation, which either updates an existing post or creates new one based on the post’s ID. (create if the ID is undefined, <span class="No-Break">update otherwise)</span></li>
				<li>Error handling is implemented to catch and display any issues that arise during the <span class="No-Break"><strong class="source-inline">upsert</strong></span><span class="No-Break"> process.</span></li>
				<li>Success feedback is provided through toast notifications, differentiating between post creation <span class="No-Break">and updating.</span></li>
				<li>Finally, the function navigates the user back to <span class="No-Break">the homepage.</span></li>
			</ul>
			<p>Now, let’s look at the <strong class="source-inline">deletePost</strong> function. Similar to <strong class="source-inline">onSubmit,</strong> this function includes error handling and user feedback via toast notifications. but the supabase method <span class="No-Break">will be:</span></p>
			<pre class="source-code">
const { error } = await supabase
  .from('posts')
  .delete()
  .eq('id', postId.value)</pre>			<p>If you navigate to: , you should see <span class="No-Break">this page:</span></p>
			<div>
				<div id="_idContainer058" class="IMG---Figure">
					<img src="image/B19760_05_11.jpg" alt="Figure 5.11: project information page" width="884" height="683"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.11: project information page</p>
			<p>Enhancing <a id="_idIndexMarker329"/>the user navigation within our application, we’ll introduce a navigation component to the <span class="No-Break"><strong class="source-inline">default</strong></span><span class="No-Break"> layout:</span></p>
			<pre class="source-code">
&lt;nav class="bg-gray-800 text-white py-4"&gt;
  &lt;div class="container flex justify-between items-center"&gt;
    &lt;div class="text-xl font-bold uppercase"&gt;
      &lt;nuxt-link to="/"&gt;My space&lt;/nuxt-link&gt;
    &lt;/div&gt;
    &lt;div class="flex gap-x-4"&gt;
      &lt;UButton to="/posts/create"&gt;New Post&lt;/UButton&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/nav&gt;</pre>			<p>This navigation bar features to parts: the left side for the brand logo or name linked to the homepage, and the right side with a button for creating <span class="No-Break">new posts.</span></p>
			<p>Moving forward, Let’s build post <span class="No-Break">listing page!</span></p>
			<h2 id="_idParaDest-121"><a id="_idTextAnchor120"/>Displaying User Posts</h2>
			<p>As we move into the final stretch of our application development, we’ll update the homepage <a id="_idIndexMarker330"/>to lists all the posts created by the use. Update the script section in <strong class="source-inline">index.vue</strong> <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
&lt;script setup lang="ts"&gt;
const supabase = useSupabaseClient()
const { data: posts } = await useLazyAsyncData(async () =&gt; {
  let { data } =
    await supabase.from('posts').select().returns&lt;Post[]&gt;()
  return data
})
&lt;/script&gt;</pre>			<p>The script uses <strong class="source-inline">useSupabaseClient</strong> to access the Supabase API and fetch posts. <strong class="source-inline">useLazyAsyncData</strong> is utilized to load the posts asynchronously. It ensures that the page navigation happens immediately, with post data loading in <span class="No-Break">the background.</span></p>
			<p>Update the <span class="No-Break">page template:</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;div class="bg-gray-100 min-h-screen"&gt;
    &lt;UContainer&gt;
      &lt;h1 class="text-3xl font-semibold text-center
      text-gray-800 mb-6"&gt;
        My Posts
      &lt;/h1&gt;
      &lt;post-card v-for="post in posts" :post="post" /&gt;
    &lt;/UContainer&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>			<p>The template <a id="_idIndexMarker331"/>contains a container holds the title “My Posts” and a loop that renders each post using the <strong class="source-inline">post-card</strong> component. So, Let’s create the <strong class="source-inline">PostCard.vue </strong>component inside <span class="No-Break"><strong class="source-inline">components</strong></span><span class="No-Break"> folder:</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;UCard class="mb-4 max-w-lg mx-auto"&gt;
    &lt;nuxt-link :to="`/posts/${post.id}/`"&gt;
      &lt;div class="uppercase text-primary font-semibold"&gt;
        {{ post.title }}
      &lt;/div&gt;
      &lt;p class="mt-2 text-gray-500"&gt;
        {{ post.content || 'no content' }}
      &lt;/p&gt;
      &lt;div class="mt-4 text-gray-400 text-xs
      font-semibold"&gt;
        Created at: {{ dayjs(post.created_at).format(
          'MMMM D, YYYY') }}
      &lt;/div&gt;
    &lt;/nuxt-link&gt;
  &lt;/UCard&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
import dayjs from 'dayjs'
defineProps&lt;{ post: Post }&gt;()
&lt;/script&gt;</pre>			<p>Each <strong class="source-inline">post-card</strong> component presents the post’s title, content, and creation date. The use of <strong class="source-inline">dayjs</strong> to format the date adds a human-friendly touch to the date. A <strong class="source-inline">nuxt-link</strong> wraps the card, enabling easy navigation to the detailed view or edit page of <span class="No-Break">each post.</span></p>
			<p>With our post <a id="_idIndexMarker332"/>listing and individual postcard components in place, users should now see all the posts they’ve created. Clicking on a post navigates to its detailed page, where the content can be viewed, updated, or <span class="No-Break">deleted seamlessly.</span></p>
			<h1 id="_idParaDest-122"><a id="_idTextAnchor121"/>Summary</h1>
			<p>Voilà! We’ve successfully created a dynamic and user-friendly space for personal post management within our application. We started with establishing a secure user authentication system. Our focus then shifted to enabling users to create, edit, and delete posts, with each step validated using Joi for ensuring data integrity. These features, backed by Supabase’s Row-Level Security policies and API, guaranteed secure and <span class="No-Break">user-specific interactions.</span></p>
			<p>In the upcoming chapter, we’ll enhance a recipe sharing site using Nuxt 3, with a specific focus on SEO optimization. We’ll dive into techniques such as metadata configuration, structured data implementation, image optimization, SEO-friendly URL creation, and sitemap generation. These steps aim to elevate the site’s search engine presence and attract more <span class="No-Break">organic traffic.</span></p>
			<h1 id="_idParaDest-123"><a id="_idTextAnchor122"/>Practice Questions</h1>
			<ul>
				<li>Explain the process of creating a new Supabase project for a Nuxt <span class="No-Break">3 application.</span></li>
				<li>Describe the purpose of Row-Level Security (RLS) in Supabase and how <span class="No-Break">it’s implemented.</span></li>
				<li>What are the benefits of <span class="No-Break"><strong class="source-inline">useSupabaseClient</strong></span><span class="No-Break"> composable?</span></li>
				<li>What is the difference between <strong class="source-inline">useAsyncData</strong> and <strong class="source-inline">useLazyAsyncData</strong> in Nuxt, and when would you <span class="No-Break">use each?</span></li>
				<li>How do you validate user input in a form using Joi &amp; <span class="No-Break">NuxtUI?</span></li>
				<li>How to handle <span class="No-Break">Supabase errors?</span></li>
				<li>How to sign in with password <span class="No-Break">using Supabase?</span></li>
				<li>How to delete a record in a table <span class="No-Break">with Supabase?</span></li>
				<li>Explain how to use the <strong class="source-inline">upsert</strong> method in Supabase for <span class="No-Break">post management.</span></li>
			</ul>
			<h1 id="_idParaDest-124"><a id="_idTextAnchor123"/>Further Reading</h1>
			<ul>
				<li><span class="No-Break">Supabase: </span><a href="https://supabase.com/%0D"><span class="No-Break">https://supabase.com/</span></a></li>
				<li>Nuxt UI <span class="No-Break">Forms: </span><a href="https://ui.nuxt.com/forms/form%0D"><span class="No-Break">https://ui.nuxt.com/forms/form</span></a></li>
				<li>RLS in <span class="No-Break">Supabase: </span><a href="https://supabase.com/docs/guides/auth/row-level-security"><span class="No-Break">https://supabase.com/docs/guides/auth/row-level-security</span></a></li>
				<li>Joi <span class="No-Break">Validation: </span><a href="https://joi.dev/"><span class="No-Break">https://joi.dev/</span></a></li>
				<li>Build User Management Website using Nuxt 3 and <span class="No-Break">Supabase: </span><a href="https://supabase.com/docs/guides/getting-started/tutorials/with-nuxt-3"><span class="No-Break">https://supabase.com/docs/guides/getting-started/tutorials/with-nuxt-3</span></a></li>
				<li>Nuxt Supabase <span class="No-Break">Module: </span><a href="https://supabase.nuxtjs.org/"><span class="No-Break">https://supabase.nuxtjs.org/</span></a></li>
			</ul>
		</div>
	</div>
</div>
</body></html>