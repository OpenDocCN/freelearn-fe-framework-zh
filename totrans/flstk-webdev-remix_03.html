<html><head></head><body>
<div id="_idContainer011">
<h1 class="chapter-number" id="_idParaDest-46"><a id="_idTextAnchor043"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-47"><a id="_idTextAnchor044"/><span class="koboSpan" id="kobo.2.1">Deployment Targets, Adapters, and Stacks</span></h1>
<p><span class="koboSpan" id="kobo.3.1">During runtime, Remix runs on an underlying web server and handles incoming HTTP requests. </span><span class="koboSpan" id="kobo.3.2">Starting a new Remix project also means selecting a web server and JavaScript runtime. </span><span class="koboSpan" id="kobo.3.3">The Remix team and its community maintain starter templates and adapters for many popular deployment targets. </span><span class="koboSpan" id="kobo.3.4">In this chapter, we will review different deployment targets, templates, and </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">Remix stacks.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">We’ll cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.7.1">Picking a </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">deployment target</span></span></li>
<li><span class="koboSpan" id="kobo.9.1">Switching </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">between adapters</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Using </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">Remix Stacks</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Working </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">with BeeRich</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.15.1">First, we will provide an overview of popular templates, deployment targets, JavaScript runtimes, and hosting environments. </span><span class="koboSpan" id="kobo.15.2">Next, will practice switching adapters and introduce you to Remix Stacks. </span><span class="koboSpan" id="kobo.15.3">At the end of this chapter, we will bootstrap a new Remix application using the custom template for </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">this book.</span></span></p>
<p><span class="koboSpan" id="kobo.17.1">After working through this chapter, you will know what to consider when picking a deployment target and template for a new Remix app. </span><span class="koboSpan" id="kobo.17.2">You will also learn more about different JavaScript runtimes and understand the main differences between long-running server, serverless, and edge environments. </span><span class="koboSpan" id="kobo.17.3">Additionally, you will gain practical experience switching between adapters and learn how to work with </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">Remix Stacks.</span></span></p>
<h1 id="_idParaDest-48"><a id="_idTextAnchor045"/><span class="koboSpan" id="kobo.19.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.20.1">To complete this chapter, you will need a computer that can run Node.js. </span><span class="koboSpan" id="kobo.20.2">All popular operating systems should suffice. </span><span class="koboSpan" id="kobo.20.3">Please install both Node.js and npm on your machine. </span><span class="koboSpan" id="kobo.20.4">An editor such as VS Code </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">is recommended.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1">You can download Node.js and npm </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">here: </span></span><a href="https://nodejs.org/en/download/"><span class="No-Break"><span class="koboSpan" id="kobo.24.1">https://nodejs.org/en/download/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.25.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.26.1">The code for this chapter can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">here: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/03-deployment-targets-adapters-and-stacks"><span class="No-Break"><span class="koboSpan" id="kobo.28.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/03-deployment-targets-adapters-and-stacks</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.29.1">.</span></span></p>
<h1 id="_idParaDest-49"><a id="_idTextAnchor046"/><span class="koboSpan" id="kobo.30.1">Picking a deployment target</span></h1>
<p><span class="koboSpan" id="kobo.31.1">One of Remix’s </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.32.1">most significant features is its flexibility. </span><span class="koboSpan" id="kobo.32.2">Remix supports many different web servers and runtime environments, including serverless and edge environments. </span><span class="koboSpan" id="kobo.32.3">Selecting a template also means choosing a JavaScript runtime, a hosting environment (server, serverless, edge), and potentially a hosting provider platform. </span><span class="koboSpan" id="kobo.32.4">To decide which template to pick for a project, we need to know the pros and cons of the different deployment targets to make an informed decision. </span><span class="koboSpan" id="kobo.32.5">In this section, we provide an overview of popular templates and adapters and review </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">their differences.</span></span></p>
<p><span class="koboSpan" id="kobo.34.1">In the previous chapter, we created a new Remix application using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">create-remix</span></strong><span class="koboSpan" id="kobo.36.1"> CLI script. </span><span class="koboSpan" id="kobo.36.2">In the process, we had to specify a template or use Remix’s basic template. </span><span class="koboSpan" id="kobo.36.3">The Remix team and community maintain adapters and templates for many different deployment targets. </span><span class="koboSpan" id="kobo.36.4">A template bootstraps a new Remix app with the required web server code. </span><span class="koboSpan" id="kobo.36.5">The web server code is not part of the Remix framework but is shipped with a Remix application to ease the </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">development journey.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">In the following, we provide an overview of popular deployment targets for Remix. </span><em class="italic"><span class="koboSpan" id="kobo.39.1">Table 3.1</span></em><span class="koboSpan" id="kobo.40.1"> lists templates that are maintained by the Remix team and community or by hosting provider companies. </span><span class="koboSpan" id="kobo.40.2">If a template is not set up for a specific hosting provider, then the </span><strong class="bold"><span class="koboSpan" id="kobo.41.1">Hosting provider</span></strong><span class="koboSpan" id="kobo.42.1"> column will </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">show </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.44.1">Generic</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.46.1">All referenced templates are also listed in the Remix documentation: </span><a href="https://remix.run/docs/en/dev/other-api/adapter"><span class="koboSpan" id="kobo.47.1">https://remix.run/docs/en/dev/other-api/adapter</span></a><span class="koboSpan" id="kobo.48.1">. </span><span class="koboSpan" id="kobo.48.2">Additionally, you can find all templates maintained by the Remix team on GitHub in the Remix </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">repository: </span></span><a href="https://github.com/remix-run/remix/tree/main/templates"><span class="No-Break"><span class="koboSpan" id="kobo.50.1">https://github.com/remix-run/remix/tree/main/templates</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.51.1">.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.52.1">Deployment target</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.53.1">Hosting provider</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.54.1">JavaScript runtime</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.55.1">Hosting environment</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.56.1">Architect (Arc)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.57.1">AWS</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.58.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.59.1">Serverless</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.60.1">Cloudflare Pages</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.61.1">Cloudflare</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.62.1">Workers runtime</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.63.1">Edge </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.64.1">Isolate</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.65.1">Cloudflare Workers</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.66.1">Cloudflare</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.67.1">Workers runtime</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.68.1">Edge </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.69.1">Isolate</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.70.1">Deno</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.71.1">Generic</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.72.1">Deno</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.73.1">Edge </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.74.1">Isolate</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.75.1">Express.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.76.1">Generic</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.77.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.78.1">Server</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.79.1">Fastify</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.80.1">Generic</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.81.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.82.1">Server</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.83.1">Fastly Compute@Edge</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.84.1">Fastly</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.85.1">Wasmtime</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.86.1">Edge </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.87.1">Isolate</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.88.1">Fly.io</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.89.1">Fly.io</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.90.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.91.1">Distributed Server</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.92.1">Netlify</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.93.1">Netlify</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.94.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.95.1">Serverless</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.96.1">Remix </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">App Server</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.98.1">Generic</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.99.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.100.1">Server</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.101.1">Vercel</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.102.1">Vercel</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.103.1">Node.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.104.1">Serverless</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.105.1">Table 3.1 – Remix’s deployment targets</span></p>
<p><span class="koboSpan" id="kobo.106.1">As visible in the preceding table, many of the deployment targets are tied to specific hosting </span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.107.1">providers. </span><span class="koboSpan" id="kobo.107.2">The great thing about hosting service-specific adapters is the ease of deployment. </span><span class="koboSpan" id="kobo.107.3">You will find that you can get up and running with most of these services in a matter </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">of minutes.</span></span></p>
<p><span class="koboSpan" id="kobo.109.1">The advantage of generic adapters is the additional flexibility. </span><span class="koboSpan" id="kobo.109.2">For example, selecting the Express.js deployment target creates an Express.js server that can be hosted anywhere where Node.js server can run. </span><span class="koboSpan" id="kobo.109.3">This includes cloud computing platforms such as AWS, Azure, and Google Cloud Platform and popular hosting platforms such as Railway.app </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">and Render.com.</span></span></p>
<p><span class="koboSpan" id="kobo.111.1">Note that </span><em class="italic"><span class="koboSpan" id="kobo.112.1">Table 3.1</span></em><span class="koboSpan" id="kobo.113.1"> is incomplete, as the number of available deployment targets, templates, and adapters changes over time. </span><span class="koboSpan" id="kobo.113.2">The goal of this chapter is to help you effectively pick a deployment target by learning how to categorize and characterize them. </span><span class="koboSpan" id="kobo.113.3">First, let’s see what is different between the various </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">JavaScript runtimes.</span></span></p>
<h2 id="_idParaDest-50"><a id="_idTextAnchor047"/><span class="koboSpan" id="kobo.115.1">Picking a JavaScript runtime</span></h2>
<p><span class="koboSpan" id="kobo.116.1">JavaScript can </span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.117.1">be executed in different runtime environments. </span><span class="koboSpan" id="kobo.117.2">In this section, we list popular JavaScript runtimes and discuss what to consider when selecting </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">a runtime.</span></span></p>
<p><span class="koboSpan" id="kobo.119.1">Some popular JavaScript runtime environments are </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">as follows:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.121.1">Browser environments</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.122.1">Node.js</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.123.1">Deno</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.124.1">Workers runtime</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.125.1">Bun</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.126.1">The browser is JavaScript’s most native environment. </span><span class="koboSpan" id="kobo.126.2">However, different browsers use different engines to execute JavaScript. </span><span class="koboSpan" id="kobo.126.3">Hence, they are technically different runtime environments. </span><span class="koboSpan" id="kobo.126.4">Luckily, they mostly adhere to the Open Web Platform and support the standard JavaScript APIs and runtime behavior. </span><span class="koboSpan" id="kobo.126.5">Since we are trying to pick a server-side deployment target, we are currently more interested in </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">server-side runtimes.</span></span></p>
<p><span class="koboSpan" id="kobo.128.1">The most prominent server-side runtime for JavaScript is Node.js. </span><span class="koboSpan" id="kobo.128.2">Node.js has a rich ecosystem of packages and libraries and is widely used and supported. </span><span class="koboSpan" id="kobo.128.3">However, there are also other server-side JavaScript runtimes, such as Bun, Deno, and Cloudflare’s Workers </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">runtime (workerd).</span></span></p>
<p><span class="koboSpan" id="kobo.130.1">As visible in </span><em class="italic"><span class="koboSpan" id="kobo.131.1">Table 3.1</span></em><span class="koboSpan" id="kobo.132.1">, some deployment targets use Deno or workerd under the hood. </span><span class="koboSpan" id="kobo.132.2">It is important to understand what this entails for your application development. </span><span class="koboSpan" id="kobo.132.3">If you are interested in starting a project with Deno or workerd, make sure to first familiarize yourself with the </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">underlying runtime.</span></span></p>
<p><span class="koboSpan" id="kobo.134.1">When comparing JavaScript runtimes, we must ensure they support the APIs and functionality we require for our application. </span><span class="koboSpan" id="kobo.134.2">For instance, workerd is an edge runtime that powers Cloudflare Workers. </span><span class="koboSpan" id="kobo.134.3">workerd does not support the execution of Node.js standard libraries. </span><span class="koboSpan" id="kobo.134.4">Consequently, you can use npm packages only if these packages do not use Node.js standard libraries. </span><span class="koboSpan" id="kobo.134.5">In contrast, most Node.js packages work in Deno as Deno aims to be Node.js compatible. </span><span class="koboSpan" id="kobo.134.6">You will also be able to use most Node.js standard libraries in Deno. </span><span class="koboSpan" id="kobo.134.7">However, this requires a special </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">import syntax.</span></span></p>
<p><span class="koboSpan" id="kobo.136.1">As a Remix developer, it is </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.137.1">important to understand that some deployment targets are based on different JavaScript runtimes than Node.js. </span><span class="koboSpan" id="kobo.137.2">Each runtime comes with limitations and considerations. </span><span class="koboSpan" id="kobo.137.3">Next, we will investigate the differences between different </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">hosting environments.</span></span></p>
<h2 id="_idParaDest-51"><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.139.1">Picking a hosting environment</span></h2>
<p><span class="koboSpan" id="kobo.140.1">The way we </span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.141.1">host web applications has changed over time. </span><span class="koboSpan" id="kobo.141.2">Deploying can be as easy as pointing to a GitHub repository and branch or providing a Docker image. </span><span class="koboSpan" id="kobo.141.3">We rarely manage the underlying server infrastructure ourselves anymore. </span><span class="koboSpan" id="kobo.141.4">Instead, hosting providers and cloud platforms manage the infrastructure for us and provide the environment for our applications to </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">run in.</span></span></p>
<p><span class="koboSpan" id="kobo.143.1">Cloud platforms and hosting providers offer different hosting environments. </span><span class="koboSpan" id="kobo.143.2">These provide various advantages and disadvantages. </span><span class="koboSpan" id="kobo.143.3">As visible in </span><em class="italic"><span class="koboSpan" id="kobo.144.1">Table 3.1</span></em><span class="koboSpan" id="kobo.145.1">, the different deployment targets each fit into one of the following three hosting </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">environment categories:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.147.1">Server</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.148.1">Serverless</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.149.1">Edge</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.150.1">Let’s see how the three different hosting environments differ. </span><span class="koboSpan" id="kobo.150.2">The following table provides an overview of the most </span><span class="No-Break"><span class="koboSpan" id="kobo.151.1">important differences:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.152.1">Trait</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.153.1">Server</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.154.1">Serverless</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.155.1">Edge</span></strong></span></p>
</td>
</tr>
</thead>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.156.1">Long-running</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.157.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.158.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.159.1">No</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.160.1">Filesystem access</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.161.1">Yes (depends)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.162.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.163.1">No</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.164.1">Isolated requests</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.165.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.166.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.167.1">Yes</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.168.1">Scale </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">by default</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.170.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.171.1">Yes</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.172.1">Yes</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.173.1">Distributed </span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">by default</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.175.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.176.1">No</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.177.1">Yes</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.178.1">Table 3.2 – Traits of different hosting environments</span></p>
<p><span class="koboSpan" id="kobo.179.1">Web servers </span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.180.1">are considered long-running environments. </span><span class="koboSpan" id="kobo.180.2">A web server is usually started once and only stops running in case of an upgrade, re-deployment, or when the service is sunset. </span><span class="koboSpan" id="kobo.180.3">Depending on the hosting provider, web servers have access to the filesystem. </span><span class="koboSpan" id="kobo.180.4">Long-running servers do not isolate individual requests. </span><span class="koboSpan" id="kobo.180.5">This means requests share global </span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">application states.</span></span></p>
<p><span class="koboSpan" id="kobo.182.1">Serverless environments are fundamentally different from long-running servers. </span><span class="koboSpan" id="kobo.182.2">Serverless is a cloud computing model in which an application is treated as a function and orchestrated by the cloud platform provider. </span><span class="koboSpan" id="kobo.182.3">A serverless function is started specifically for an incoming request. </span><span class="koboSpan" id="kobo.182.4">After a designated timeout, the serverless function is terminated, and any application context, such as closures, cached application state, and global variables, </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">is lost.</span></span></p>
<p><span class="koboSpan" id="kobo.184.1">Serverless environments usually offer pay-per-use pricing. </span><span class="koboSpan" id="kobo.184.2">We are only charged for the time when our function is handling requests. </span><span class="koboSpan" id="kobo.184.3">Since the infrastructure provider can spawn multiple duplicate serverless functions in parallel, serverless is also inherently </span><span class="No-Break"><span class="koboSpan" id="kobo.185.1">highly scalable.</span></span></p>
<p><span class="koboSpan" id="kobo.186.1">It is important to note that serverless environments come with a very different set of requirements than web servers. </span><span class="koboSpan" id="kobo.186.2">Some things that are easily solved on long-running servers require more involvement on serverless. </span><span class="koboSpan" id="kobo.186.3">However, the solutions provided by serverless are designed to </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">be scalable.</span></span></p>
<p><span class="koboSpan" id="kobo.188.1">For instance, web servers create database connections during startup and share these connections across all incoming requests. </span><span class="koboSpan" id="kobo.188.2">Serverless functions must create a new database connection for every incoming request. </span><span class="koboSpan" id="kobo.188.3">Creating a new database connection can become a bottleneck for incoming requests and may lead to delays or timeouts. </span><span class="koboSpan" id="kobo.188.4">Additionally, database servers only support a limited number of open connections at a time. </span><span class="koboSpan" id="kobo.188.5">Opening a new connection per serverless function may exceed the maximum number </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">of connections.</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">Serverless offers connection pooling as one way to counteract these issues. </span><span class="koboSpan" id="kobo.190.2">Connection pooling allows different functions to share connections across different instances. </span><span class="koboSpan" id="kobo.190.3">This is a common pattern with serverless. </span><span class="koboSpan" id="kobo.190.4">Things that work with long-running servers require more consideration with serverless. </span><span class="koboSpan" id="kobo.190.5">Serverless is designed to scale, but scaling also introduces complexity as </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">a byproduct.</span></span></p>
<p><span class="koboSpan" id="kobo.192.1">Scaling inevitably</span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.193.1"> introduces complexity. </span><span class="koboSpan" id="kobo.193.2">Once you need to think about scaling long-running servers, you may run into many problems that serverless already solves for you. </span><span class="koboSpan" id="kobo.193.3">For instance, serverless environments implement load balancing out of </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">the box.</span></span></p>
<p><span class="koboSpan" id="kobo.195.1">Where serverless focus lies on scalability, edge computing focuses on providing geographic proximity. </span><span class="koboSpan" id="kobo.195.2">Most edge environments are serverless and share the same advantages, such as scalability and pay-per-use pricing. </span><span class="koboSpan" id="kobo.195.3">What makes edge environments special is their proximity to the end users. </span><span class="koboSpan" id="kobo.195.4">Edge functions are regionally distributed – for instance, on the servers of a CDN. </span><span class="koboSpan" id="kobo.195.5">The created proximity can significantly decrease </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">response times.</span></span></p>
<p><span class="koboSpan" id="kobo.197.1">Most server and serverless environments do not automatically distribute your application across different regions, at least not without additional configuration overhead and additional costs. </span><span class="koboSpan" id="kobo.197.2">Edge computing allows you to distribute your web application across the globe out of </span><span class="No-Break"><span class="koboSpan" id="kobo.198.1">the box.</span></span></p>
<p><span class="koboSpan" id="kobo.199.1">Edge environments come with their own limitations and considerations. </span><span class="koboSpan" id="kobo.199.2">In general, edge functions are the most limiting regarding their runtime capabilities. </span><span class="koboSpan" id="kobo.199.3">One limitation is that deploying on the edge requires a distributed database solution. </span><span class="koboSpan" id="kobo.199.4">Otherwise, response times will be delayed by the communication between the edge functions and your </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">database server.</span></span></p>
<p><span class="koboSpan" id="kobo.201.1">Different runtime environments also use different container technologies to deploy and run your code. </span><span class="koboSpan" id="kobo.201.2">Long-running servers can run directly on a physical or virtual machine. </span><span class="koboSpan" id="kobo.201.3">However, most cloud providers use lightweight container technologies to run your app. </span><span class="koboSpan" id="kobo.201.4">It's important to note that the container landscape is diverse. </span><span class="koboSpan" id="kobo.201.5">There are several different container technologies and standards, such as </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">V8 isolates.</span></span></p>
<p><span class="koboSpan" id="kobo.203.1">V8 is the JavaScript engine that powers Chrome and is also used by Node.js and Deno. </span><span class="koboSpan" id="kobo.203.2">V8 isolates are isolated V8 instances that reuse the same language runtime, avoiding the slow cold start of starting a new language runtime on an incoming request. </span><span class="koboSpan" id="kobo.203.3">Because they're lighter than most container technologies, V8 isolates are used in edge environments where computing is sparse in comparison to centralized cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">data centers.</span></span></p>
<p><span class="koboSpan" id="kobo.205.1">When choosing a hosting provider and runtime, research the restrictions tied to their container technologies. </span><span class="koboSpan" id="kobo.205.2">These limitations could affect your app’s size or the maximum running time before </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">timing out.</span></span></p>
<p><span class="koboSpan" id="kobo.207.1">There are many trade-offs to consider. </span><span class="koboSpan" id="kobo.207.2">Each environment comes with its own set of </span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.208.1">considerations. </span><span class="koboSpan" id="kobo.208.2">Next, we will connect the dots and conclude how to select the right deployment target for a given </span><span class="No-Break"><span class="koboSpan" id="kobo.209.1">use case.</span></span></p>
<h2 id="_idParaDest-52"><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.210.1">Making the final decision</span></h2>
<p><span class="koboSpan" id="kobo.211.1">In this section, we </span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.212.1">will conclude how to pick a deployment target based on what we learned about JavaScript runtimes and different hosting environments (server, </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">serverless, edge).</span></span></p>
<p><span class="koboSpan" id="kobo.214.1">In my experience, a long-running server environment provides a great amount of flexibility and introduces less complexity than its alternatives. </span><span class="koboSpan" id="kobo.214.2">That said, hosting providers such as Netlify and Vercel offer a great developer experience and complementary services for their serverless and edge offerings. </span><span class="koboSpan" id="kobo.214.3">If you are looking for a provider that can regionally distribute both your long-running web server and database, then maybe Fly.io could be a </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">great fit.</span></span></p>
<p><span class="koboSpan" id="kobo.216.1">Serverless provides many advantages but also introduces complexity. </span><span class="koboSpan" id="kobo.216.2">Edge computing may significantly improve response times but introduces further complexity. </span><span class="koboSpan" id="kobo.216.3">The additional complexity of serverless and edge environments is a byproduct of scale and regional distribution. </span><span class="koboSpan" id="kobo.216.4">Once you think about scale and regional distribution for your long-running web server, you will face </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">similar challenges.</span></span></p>
<p><span class="koboSpan" id="kobo.218.1">Personally, picking the right deployment target is more about avoiding unnecessary obstacles than anything else. </span><span class="koboSpan" id="kobo.218.2">The deployment target must fit the use case and fulfill the system requirements. </span><span class="koboSpan" id="kobo.218.3">Let’s go over </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">some examples.</span></span></p>
<p><span class="koboSpan" id="kobo.220.1">If you want to utilize Node.js libraries or reuse Node.js code, you probably want to stick with a Node-based environment. </span><span class="koboSpan" id="kobo.220.2">The Express.js deployment target is an obvious choice. </span><span class="koboSpan" id="kobo.220.3">But what about serverless environments? </span><span class="koboSpan" id="kobo.220.4">If you use a conventional database without built-in solutions for serverless environments, then you will have to create a new database connection for every new incoming request. </span><span class="koboSpan" id="kobo.220.5">This might lead to longer response times or even timeouts. </span><span class="koboSpan" id="kobo.220.6">However, if you are already using a serverless-first database and are looking for scalability, then picking a serverless environment might be a </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">great idea.</span></span></p>
<p><span class="koboSpan" id="kobo.222.1">If you have one</span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.223.1"> single database server in Oregon, then having your web app deployed all over the world won’t bring you much benefit. </span><span class="koboSpan" id="kobo.223.2">Each instance of your app will have to request data from your database server in Oregon. </span><span class="koboSpan" id="kobo.223.3">In that case, you should pick a web server or serverless environment that is located as close as possible to </span><span class="No-Break"><span class="koboSpan" id="kobo.224.1">your database.</span></span></p>
<p><span class="koboSpan" id="kobo.225.1">If you want to build a blog you are likely looking for easy access to your blog posts. </span><span class="koboSpan" id="kobo.225.2">Blog posts are usually stored as files. </span><span class="koboSpan" id="kobo.225.3">Using a hosting provider and enviroment that lets you access the filesystem allows you to host your blog posts together with your code. </span><span class="koboSpan" id="kobo.225.4">Unless you run into issues with this approach (there are disadvantages to any approach), you might want to start with a simple web server architecture. </span><span class="koboSpan" id="kobo.225.5">In that case, you could pick the Express.js template. </span><span class="koboSpan" id="kobo.225.6">This will grant you access to the underlying filesystem with most </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">hosting providers.</span></span></p>
<p><span class="koboSpan" id="kobo.227.1">On the other hand, you might find that some serverless providers offer attractive free tiers and competitive pay-as-you-go pricing. </span><span class="koboSpan" id="kobo.227.2">Selecting the right runtime depends on your priorities and requirements. </span><span class="koboSpan" id="kobo.227.3">Picking a hosting environment without access to the filesystem doesn’t mean that you won’t be able to work with files. </span><span class="koboSpan" id="kobo.227.4">It just means you must store files somewhere else – such as in a file storage service. </span><span class="koboSpan" id="kobo.227.5">Therefore, it’s more about making an informed decision to avoid obstacles down </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">the road.</span></span></p>
<p><span class="koboSpan" id="kobo.229.1">Finally, deciding on a deployment target also means deciding on a hosting provider. </span><span class="koboSpan" id="kobo.229.2">Each deployment provider comes with its own advantages and disadvantages. </span><span class="koboSpan" id="kobo.229.3">For instance, Fly.io hosts long-running Node.js servers but offers distribution to different regions. </span><span class="koboSpan" id="kobo.229.4">Fly.io might be a great alternative to serverless edge deployment. </span><span class="koboSpan" id="kobo.229.5">On the other hand, AWS and Cloudflare each provide rich ecosystems of services that can be used together with their serverless and edge offerings. </span><span class="koboSpan" id="kobo.229.6">For complex applications, hosting on AWS or Cloudflare might be the </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">right call.</span></span></p>
<p><span class="koboSpan" id="kobo.231.1">The line between long-running servers, serverless, and edge environments is blurry. </span><span class="koboSpan" id="kobo.231.2">Different providers further offer geographical distribution for both serverless and server environments that achieve edge-like proximity to users. </span><span class="koboSpan" id="kobo.231.3">Some may provide the best of </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">both worlds.</span></span></p>
<p><span class="koboSpan" id="kobo.233.1">Picking a deployment target heavily depends on your application’s use case. </span><span class="koboSpan" id="kobo.233.2">Luckily, Remix is flexible enough to support a wide variety of different use cases. </span><span class="koboSpan" id="kobo.233.3">After all, Remix can run anywhere where JavaScript can </span><span class="No-Break"><span class="koboSpan" id="kobo.234.1">be executed.</span></span></p>
<p><span class="koboSpan" id="kobo.235.1">Fortunately, it is straightforward to swap the underlying server environment and adapter in your Remix project if needed. </span><span class="koboSpan" id="kobo.235.2">In the next section, we will practice how to </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">do so.</span></span></p>
<h1 id="_idParaDest-53"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.237.1">Switching between adapters</span></h1>
<p><span class="koboSpan" id="kobo.238.1">We sometimes </span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.239.1">have to migrate from one template to another one. </span><span class="koboSpan" id="kobo.239.2">To do so, we must switch our Remix app’s setup. </span><span class="koboSpan" id="kobo.239.3">In this chapter, we will walk through the process of switching templates and adapters. </span></p>
<p><span class="koboSpan" id="kobo.240.1">The process of switching between templates and adapters can be summarized </span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">as follows:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.242.1">Locate your Remix project and open it in an editor or </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">file explorer.</span></span></li>
<li><span class="koboSpan" id="kobo.244.1">Create a new Remix project using the new template </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">and adapter.</span></span></li>
<li><span class="koboSpan" id="kobo.246.1">Open the new Remix project side by side with your </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">old project.</span></span></li>
<li><span class="koboSpan" id="kobo.248.1">Rename the </span><strong class="source-inline"><span class="koboSpan" id="kobo.249.1">app</span></strong><span class="koboSpan" id="kobo.250.1"> folder in the new project to </span><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">temp</span></strong><span class="koboSpan" id="kobo.252.1">. </span><span class="koboSpan" id="kobo.252.2">Move the </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1">app</span></strong><span class="koboSpan" id="kobo.254.1"> folder from your old project to the </span><span class="No-Break"><span class="koboSpan" id="kobo.255.1">new project.</span></span></li>
<li><span class="koboSpan" id="kobo.256.1">Replace the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">app/entry.client.tsx</span></strong><span class="koboSpan" id="kobo.258.1"> with the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.259.1">temp/entry.client.tsx</span></strong><span class="koboSpan" id="kobo.260.1"> and integrate any custom code previously added to </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">the file.</span></span></li>
<li><span class="koboSpan" id="kobo.262.1">Replace the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">app/entry.server.tsx</span></strong><span class="koboSpan" id="kobo.264.1"> with the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">temp/entry.server.tsx</span></strong><span class="koboSpan" id="kobo.266.1"> and integrate any custom code previously added to </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">the file.</span></span></li>
<li><span class="koboSpan" id="kobo.268.1">For every Remix-specific file and folder in the root of your </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">old project:</span></span><ol><li class="Alphabets"><span class="koboSpan" id="kobo.270.1">Investigate whether you made </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">any changes.</span></span></li><li class="Alphabets"><span class="koboSpan" id="kobo.272.1">Copy-paste any changes over to the </span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">new project.</span></span></li><li class="Alphabets"><span class="koboSpan" id="kobo.274.1">Resolve any conflicts (</span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">if any).</span></span></li></ol></li>
<li><span class="koboSpan" id="kobo.276.1">Follow the instructions in the new project’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">README.md</span></strong><span class="koboSpan" id="kobo.278.1"> file to run, build, and deploy </span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">the application.</span></span></li>
<li><span class="koboSpan" id="kobo.280.1">Troubleshoot any remaining issues using the troubleshooting process from </span><a href="B17399_02.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.281.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.282.1">, </span><em class="italic"><span class="koboSpan" id="kobo.283.1">Creating a New </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.284.1">Remix App</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.286.1">Let’s practice</span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.287.1"> the described process using the "Hello World!" </span><span class="koboSpan" id="kobo.287.2">Remix app that we created in </span><a href="B17399_02.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.288.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.289.1">, </span><em class="italic"><span class="koboSpan" id="kobo.290.1">Creating a New Remix App</span></em><span class="koboSpan" id="kobo.291.1">. </span><span class="koboSpan" id="kobo.291.2">If you are looking for a challenge, see whether you can figure it out by yourself by following the nine steps listed before. </span><span class="koboSpan" id="kobo.291.3">Otherwise, let’s walk through </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">it together:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.293.1">Open your “Hello World!” </span><span class="koboSpan" id="kobo.293.2">Remix app in an editor or file explorer. </span><span class="koboSpan" id="kobo.293.3">You can also find the code </span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">here: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/02-creating-a-new-remix-app/hello-world"><span class="No-Break"><span class="koboSpan" id="kobo.295.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix/tree/main/02-creating-a-new-remix-app/hello-world</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.296.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.297.1">In </span><a href="B17399_02.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.298.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.299.1">, we used the basic template, but this process works for other templates </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">as well.</span></span></p></li>
<li><span class="koboSpan" id="kobo.301.1">Run </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">npm install</span></strong><span class="koboSpan" id="kobo.303.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">npm run dev</span></strong><span class="koboSpan" id="kobo.305.1"> to ensure that the project is running locally without </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">any issues.</span></span></li>
<li><span class="koboSpan" id="kobo.307.1">Now, create a new Remix project using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">create-remix</span></strong><span class="koboSpan" id="kobo.309.1"> CLI script. </span><span class="koboSpan" id="kobo.309.2">Run the </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.311.1">npx create-remix@2 --template remix-run/remix/templates/cloudflare-workers</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.312.1">To prove a point – that switching between adapters in Remix is easy – we’ll pick a very different deployment. </span><span class="koboSpan" id="kobo.312.2">We will migrate from a long-running Node.js environment to a workerd-based edge environment (Cloudflare Workers). </span><span class="koboSpan" id="kobo.312.3">However, feel free to pick any other deployment target you are </span><span class="No-Break"><span class="koboSpan" id="kobo.313.1">interested in.</span></span></p></li> <li><span class="koboSpan" id="kobo.314.1">Make sure to follow the prompts of </span><strong class="source-inline"><span class="koboSpan" id="kobo.315.1">create-remix</span></strong><span class="koboSpan" id="kobo.316.1"> to bootstrap the new </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">Remix app.</span></span></li>
<li><span class="koboSpan" id="kobo.318.1">After finishing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">create-remix</span></strong><span class="koboSpan" id="kobo.320.1"> CLI script, we run </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">npm install</span></strong><span class="koboSpan" id="kobo.322.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">npm run dev</span></strong><span class="koboSpan" id="kobo.324.1"> to ensure that the new project </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">runs locally.</span></span></li>
<li><span class="koboSpan" id="kobo.326.1">After asserting that both projects run without errors, we open the new Remix app in an editor or file explorer. </span><span class="koboSpan" id="kobo.326.2">It is easiest to have both editors/file explorers open side </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">by side.</span></span></li>
<li><span class="koboSpan" id="kobo.328.1">Let’s </span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.329.1">rename the </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">app</span></strong><span class="koboSpan" id="kobo.331.1"> folder in the new project to </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">temp</span></strong><span class="koboSpan" id="kobo.333.1">. </span><span class="koboSpan" id="kobo.333.2">Next, copy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">app</span></strong><span class="koboSpan" id="kobo.335.1"> folder from your old “Hello World!” </span><span class="koboSpan" id="kobo.335.2">project to the new project. </span><span class="koboSpan" id="kobo.335.3">This allows us to inspect both </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">temp</span></strong><span class="koboSpan" id="kobo.337.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">app</span></strong><span class="koboSpan" id="kobo.339.1"> side </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">by side.</span></span></li>
<li><span class="koboSpan" id="kobo.341.1">Run </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">npm run dev</span></strong><span class="koboSpan" id="kobo.343.1"> in the new project. </span><span class="koboSpan" id="kobo.343.2">Remix will attempt to build and run the project using the “Hello World!” </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">app</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.345.1"> folder:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.346.1">Could not resolve "@remix-run/node"</span></strong><span class="koboSpan" id="kobo.347.1">  app/entry.server.tsx:10:25:    10 │ import { Response } from "@remix-run/node";</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.348.1">Snap! </span><span class="koboSpan" id="kobo.348.2">An error! </span><span class="koboSpan" id="kobo.348.3">Let’s investigate the error message in </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">the console.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.350.1">The error message states that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">@remix-run/node</span></strong><span class="koboSpan" id="kobo.352.1"> package cannot be resolved. </span><span class="koboSpan" id="kobo.352.2">Also, notice that the errors originate </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">from </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">app/entry.server.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.355.1">.</span></span></p></li> <li><span class="koboSpan" id="kobo.356.1">Compare the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">app/entry.server.tsx</span></strong><span class="koboSpan" id="kobo.358.1"> with the code </span><span class="No-Break"><span class="koboSpan" id="kobo.359.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">temp/entry.server.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.362.1">The Express.js template used in the “Hello World!” </span><span class="koboSpan" id="kobo.362.2">app uses Remix’s node adapter (</span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">@remix-run/node</span></strong><span class="koboSpan" id="kobo.364.1">), while the Cloudflare Worker template uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">@</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">remix-run/cloudflare</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.367.1"> adapter.</span></span></p><p class="list-inset"><span class="koboSpan" id="kobo.368.1">The Cloudflare Workers environment runs on workerd, which does not support Node.js libraries. </span><span class="koboSpan" id="kobo.368.2">To run on Node.js and workerd, Remix needs to set up two different entry point implementations and use </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">different adapters.</span></span></p></li>
<li><span class="koboSpan" id="kobo.370.1">Since we have no custom code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">entry.server.tsx</span></strong><span class="koboSpan" id="kobo.372.1">, replace the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">app/entry.server.tsx</span></strong><span class="koboSpan" id="kobo.374.1"> with the code </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">temp/entry.server.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.377.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.378.1">Sure there is no other usage of </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">@remix-run/node</span></strong><span class="koboSpan" id="kobo.380.1">. </span><span class="koboSpan" id="kobo.380.2">Search for the package name in your editor’s </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">code search.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.382.1">You should find two matches: </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">app/root.tsx</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.384.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">app/routes/_index.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">.</span></span></p></li>
<li><span class="koboSpan" id="kobo.387.1">Make</span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.388.1"> sure to find and replace the imports </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">@remix-run/cloudflare</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.392.1">Remix exposes its server-side types and primitives through the different adapter packages. </span><span class="koboSpan" id="kobo.392.2">When switching adapters, we must find and replace all imports of the old adapter with the </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">new one.</span></span></p></li>
<li><span class="koboSpan" id="kobo.394.1">Next, compare and then replace the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.395.1">app/entry.client.tsx</span></strong><span class="koboSpan" id="kobo.396.1"> with the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.397.1">temp/entry.client.tsx</span></strong><span class="koboSpan" id="kobo.398.1"> as well. </span><span class="koboSpan" id="kobo.398.2">Different templates may use different versions of React or implement additional logic in the client </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">entry file.</span></span></li>
<li><span class="koboSpan" id="kobo.400.1">Run </span><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">npm run dev</span></strong><span class="koboSpan" id="kobo.402.1"> again. </span><span class="koboSpan" id="kobo.402.2">It should now successfully build and run the </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">new project!</span></span></li>
<li><span class="koboSpan" id="kobo.404.1">Let’s investigate the root folder of the old application. </span><span class="koboSpan" id="kobo.404.2">Are there any files that we did create or adapt? </span><span class="koboSpan" id="kobo.404.3">We should move all custom files and folders over to the </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">new project.</span></span></li>
<li><span class="koboSpan" id="kobo.406.1">Check the </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">package.json</span></strong><span class="koboSpan" id="kobo.408.1"> file. </span><span class="koboSpan" id="kobo.408.2">We did not install any additional packages for our “Hello World!” </span><span class="koboSpan" id="kobo.408.3">app, but usually, we would now move any app dependencies over and install them in our </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">new project.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.410.1">We should also compare the scripts of both </span><strong class="source-inline"><span class="koboSpan" id="kobo.411.1">package.json</span></strong><span class="koboSpan" id="kobo.412.1"> files. </span><span class="koboSpan" id="kobo.412.2">We have to make sure that any custom or adapted scripts are merged with the new scripts of our new project. </span><span class="koboSpan" id="kobo.412.3">In our case, there is nothing to do. </span><span class="koboSpan" id="kobo.412.4">We did not add any custom logic, which we would need to </span><span class="No-Break"><span class="koboSpan" id="kobo.413.1">take over.</span></span></p></li>
</ol>
<p><span class="koboSpan" id="kobo.414.1">We did it! </span><span class="koboSpan" id="kobo.414.2">We moved from </span><strong class="bold"><span class="koboSpan" id="kobo.415.1">Remix App Server</span></strong><span class="koboSpan" id="kobo.416.1"> to </span><strong class="bold"><span class="koboSpan" id="kobo.417.1">Cloudflare Workers</span></strong><span class="koboSpan" id="kobo.418.1"> – a long-running server to an </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">edge environment!</span></span></p>
<p><span class="koboSpan" id="kobo.420.1">The two entry files in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">app</span></strong><span class="koboSpan" id="kobo.422.1"> folder are bootstrapped by Remix and custom for each deployment target. </span><span class="koboSpan" id="kobo.422.2">Hence, we must make sure to update the code in these files. </span><span class="koboSpan" id="kobo.422.3">We also must merge </span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.423.1">our custom dependencies with the dependencies of the new project. </span><span class="koboSpan" id="kobo.423.2">This requires us to manually review the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">package.json</span></strong><span class="koboSpan" id="kobo.425.1"> files. </span><span class="koboSpan" id="kobo.425.2">Finally, we have to take over any other changes made to files and folders in </span><span class="No-Break"><span class="koboSpan" id="kobo.426.1">the project.</span></span></p>
<p><span class="koboSpan" id="kobo.427.1">In this section, we successfully moved from one adapter to another. </span><span class="koboSpan" id="kobo.427.2">In the next section, we will learn about Remix Stacks to bootstrap a production-ready </span><span class="No-Break"><span class="koboSpan" id="kobo.428.1">Remix app.</span></span></p>
<h1 id="_idParaDest-54"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.429.1">Using Remix Stacks</span></h1>
<p><span class="koboSpan" id="kobo.430.1">In this section, you </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.431.1">will learn about Remix Stacks. </span><span class="koboSpan" id="kobo.431.2">First, we will have a look at Remix’s official stacks and how to use them. </span><span class="koboSpan" id="kobo.431.3">Next, you will learn how to use </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">community templates.</span></span></p>
<h2 id="_idParaDest-55"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.433.1">Working with Remix official stacks</span></h2>
<p><span class="koboSpan" id="kobo.434.1">Remix also </span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.435.1">offers pre-configured templates ready for production. </span><span class="koboSpan" id="kobo.435.2">These templates are referred to as Remix Stacks. </span><span class="koboSpan" id="kobo.435.3">As of now, Remix provides three </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">official stacks:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table003">
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.437.1">Stack</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.438.1">Deployment target</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.439.1">Comes with</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.440.1">Use case</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.441.1">Blues</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.442.1">Fly.io</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.443.1">PostgreSQL database</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.444.1">Large-scale applications and </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">regional distribution</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.446.1">Indie</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.447.1">Express.js</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.448.1">SQLite database</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.449.1">Small-scale projects with </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">dynamic data</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.451.1">Grunge</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.452.1">Architect (</span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">AWS Lambda)</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.454.1">DynamoDB database</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.455.1">Large-scale applications on </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">AWS infrastructure</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.457.1">Table 3.3 – Official Remix stacks</span></p>
<p><span class="koboSpan" id="kobo.458.1">Stacks are opinionated project starters. </span><span class="koboSpan" id="kobo.458.2">They are more complex than Remix’s basic templates but also have more features. </span><span class="koboSpan" id="kobo.458.3">As visible in </span><em class="italic"><span class="koboSpan" id="kobo.459.1">Table 3.3</span></em><span class="koboSpan" id="kobo.460.1">, the starters are built with different use cases in mind and utilize different </span><span class="No-Break"><span class="koboSpan" id="kobo.461.1">deployment targets.</span></span></p>
<p><span class="koboSpan" id="kobo.462.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.463.1">Blues stack</span></strong><span class="koboSpan" id="kobo.464.1"> runs </span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.465.1">on Fly.io. </span><span class="koboSpan" id="kobo.465.2">From </span><em class="italic"><span class="koboSpan" id="kobo.466.1">Table 3.1</span></em><span class="koboSpan" id="kobo.467.1">, you can infer that Fly.io hosts </span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.468.1">long-running servers. </span><span class="koboSpan" id="kobo.468.2">Fly.io offers regional distribution of long-running servers to achieve edge-like proximity. </span><span class="koboSpan" id="kobo.468.3">The Blues stack also ships with code to set up a PostgreSQL database. </span><span class="koboSpan" id="kobo.468.4">The stack is designed to scale and enable regional distribution out of </span><span class="No-Break"><span class="koboSpan" id="kobo.469.1">the box.</span></span></p>
<p><span class="koboSpan" id="kobo.470.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.471.1">Indie stack</span></strong><span class="koboSpan" id="kobo.472.1"> uses the </span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.473.1">Express.js adapter and does not target a specific hosting provider. </span><span class="koboSpan" id="kobo.473.2">It </span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.474.1">ships with an SQLite database. </span><span class="koboSpan" id="kobo.474.2">The Indie stack is perfect for starting projects that work with smaller amounts of dynamic data. </span><span class="koboSpan" id="kobo.474.3">From </span><em class="italic"><span class="koboSpan" id="kobo.475.1">Table 3.2</span></em><span class="koboSpan" id="kobo.476.1">, you can infer that this stack – depending on the hosting provider – can access the filesystem and will be able to share application states across </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">different requests.</span></span></p>
<p><span class="koboSpan" id="kobo.478.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.479.1">Grunge stack</span></strong><span class="koboSpan" id="kobo.480.1"> serves </span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.481.1">similar use cases to the Blues stack but is set up </span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.482.1">using Architect, an AWS Lambda-based framework. </span><span class="koboSpan" id="kobo.482.2">From </span><em class="italic"><span class="koboSpan" id="kobo.483.1">Table 3.1</span></em><span class="koboSpan" id="kobo.484.1">, you can derive that Architect runs on a serverless environment. </span><span class="koboSpan" id="kobo.484.2">AWS infrastructure is intended to support </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">large-scale applications.</span></span></p>
<p><span class="koboSpan" id="kobo.486.1">Let’s try out one </span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.487.1">of the Remix Stacks Run the following command in </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">the terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.489.1">
npx create-remix@2 --template remix-run/indie-stack</span></pre> <p><span class="koboSpan" id="kobo.490.1">We again use </span><strong class="source-inline"><span class="koboSpan" id="kobo.491.1">create-remix</span></strong><span class="koboSpan" id="kobo.492.1"> to bootstrap a new Remix app. </span><span class="koboSpan" id="kobo.492.2">This time, we refer to one of Remix’s three official stack templates: the Indie stack. </span><span class="koboSpan" id="kobo.492.3">Feel free to select another stack based on your </span><span class="No-Break"><span class="koboSpan" id="kobo.493.1">personal preferences.</span></span></p>
<p><span class="koboSpan" id="kobo.494.1">Note that we point to a GitHub repository named </span><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">indie-stack</span></strong><span class="koboSpan" id="kobo.496.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">@remix-run</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.498.1">GitHub organization.</span></span></p>
<p><span class="koboSpan" id="kobo.499.1">Investigate the bootstrapped folder structure and refer to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">README.md</span></strong><span class="koboSpan" id="kobo.501.1"> file to get an overview of all the technologies and packages in use. </span><span class="koboSpan" id="kobo.501.2">A few noteworthy things come with the </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">Indie stack:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.503.1">A registration and login </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">setup (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">app/session.server.ts</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.507.1">A convention for where to place your database </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">logic (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.509.1">app/models/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.511.1">A route for health </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">checks (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.513.1">app/routes/healthcheck.tsx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">).</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.515.1">Remix Stacks implement styling, testing, authentication, and additional features out of the box. </span><span class="koboSpan" id="kobo.515.2">Where Remix’s basic templates provide simple server and adapter setups, Remix Stacks are </span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.516.1">production-ready applications that ship with an opinionated setup. </span><span class="koboSpan" id="kobo.516.2">On top of that, Remix also supports the creation of custom templates. </span><span class="koboSpan" id="kobo.516.3">In the next section, we will learn how to use and create </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">custom templates.</span></span></p>
<h2 id="_idParaDest-56"><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.518.1">Working with custom templates</span></h2>
<p><span class="koboSpan" id="kobo.519.1">We can </span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.520.1">utilize community-developed templates or create our own to get up and running quickly with our preferred stack. </span><span class="koboSpan" id="kobo.520.2">Custom templates are also a great way to develop opinionated templates for </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">an organization.</span></span></p>
<p><span class="koboSpan" id="kobo.522.1">Any Remix project can be used as a template. </span><span class="koboSpan" id="kobo.522.2">The only limitation is that the template must be a valid Remix project with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">package.json</span></strong><span class="koboSpan" id="kobo.524.1"> file in the root folder. </span><span class="koboSpan" id="kobo.524.2">The easiest way to access a template is via GitHub, but Remix can also access a template via a URL, a local path on your machine, a subfolder in a GitHub repository, or a local or </span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">remote tarball.</span></span></p>
<p><span class="koboSpan" id="kobo.526.1">Let’s try out the custom template from this book’s GitHub repository. </span><span class="koboSpan" id="kobo.526.2">Run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">create-remix</span></strong><span class="koboSpan" id="kobo.528.1"> command with the template flag in </span><span class="No-Break"><span class="koboSpan" id="kobo.529.1">the terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.530.1">
npx create-remix@2 --template PacktPublishing/Full-Stack-Web-Development-with-Remix/03-deployment-targets-adapters-and-stacks/bee-rich</span></pre> <p><span class="koboSpan" id="kobo.531.1">Make sure to select </span><strong class="bold"><span class="koboSpan" id="kobo.532.1">Yes</span></strong><span class="koboSpan" id="kobo.533.1"> when prompted to install the dependencies. </span><span class="koboSpan" id="kobo.533.2">Also, select </span><strong class="bold"><span class="koboSpan" id="kobo.534.1">Yes</span></strong><span class="koboSpan" id="kobo.535.1"> when promoted to run the template’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">remix.init</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.537.1"> script.</span></span></p>
<p><span class="koboSpan" id="kobo.538.1">After running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">init</span></strong><span class="koboSpan" id="kobo.540.1"> script, you should see a short message in </span><span class="No-Break"><span class="koboSpan" id="kobo.541.1">the terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.542.1">
Running template's remix.init script...Hey there! </span><span class="koboSpan" id="kobo.542.2">Great job practicing using a custom stack! </span><span class="koboSpan" id="kobo.542.3">You're doing great!</span></pre>
<p><span class="koboSpan" id="kobo.543.1">This message originates from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.544.1">remix.init/index.js</span></strong><span class="koboSpan" id="kobo.545.1"> script in the project’s root folder. </span><span class="koboSpan" id="kobo.545.2">The </span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.546.1">script allows template authors to implement custom setup steps. </span><span class="koboSpan" id="kobo.546.2">You can also run the script again by calling </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">npx remix init</span></strong><span class="koboSpan" id="kobo.548.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">project root.</span></span></p>
<p><span class="koboSpan" id="kobo.550.1">Conveniently, I just sneaked you into setting up the BeeRich application, which will be used as a demo application for the rest of this book. </span><span class="koboSpan" id="kobo.550.2">Next, we will kick off our development journey </span><span class="No-Break"><span class="koboSpan" id="kobo.551.1">with BeeRich.</span></span></p>
<h1 id="_idParaDest-57"><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.552.1">Working with BeeRich</span></h1>
<p><span class="koboSpan" id="kobo.553.1">Welcome to BeeRich! </span><span class="koboSpan" id="kobo.553.2">BeeRich </span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.554.1">is a dashboard-like application that mimics both personal and enterprise use cases. </span><span class="koboSpan" id="kobo.554.2">BeeRich is a personal finance management application that helps you stay on top of your bee – pardon me – bookkeeping. </span><span class="koboSpan" id="kobo.554.3">Well, at least that’s the goal. </span><span class="koboSpan" id="kobo.554.4">There is nothing much there yet. </span><span class="koboSpan" id="kobo.554.5">In every chapter, we will add more code to this application. </span><span class="koboSpan" id="kobo.554.6">In this section, we will run BeeRich locally and review the </span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">folder structure.</span></span></p>
<p><span class="koboSpan" id="kobo.556.1">We </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.557.1">bootstrapped BeeRich in the preceding section using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.558.1">create-remix</span></strong><span class="koboSpan" id="kobo.559.1"> script. </span><span class="koboSpan" id="kobo.559.2">BeeRich is nothing more than a simple skeleton application on top of Remix’s Express.js template that we tried out in </span><a href="B17399_02.xhtml#_idTextAnchor030"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.560.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.561.1">, </span><em class="italic"><span class="koboSpan" id="kobo.562.1">Creating a New Remix App</span></em><span class="koboSpan" id="kobo.563.1">. </span><span class="koboSpan" id="kobo.563.2">You can also find the BeeRich Remix template in this book’s GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">repository: </span></span><a href="https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix"><span class="No-Break"><span class="koboSpan" id="kobo.565.1">https://github.com/PacktPublishing/Full-Stack-Web-Development-with-Remix</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.566.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.567.1">Let's run BeeRich locally. </span><span class="koboSpan" id="kobo.567.2">Open the terminal and navigate to the project's root folder. </span><span class="koboSpan" id="kobo.567.3">Then execute the following command in </span><span class="No-Break"><span class="koboSpan" id="kobo.568.1">the terminal:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.569.1">
npm run dev</span></pre> <p><span class="koboSpan" id="kobo.570.1">The application should now be running on port </span><strong class="source-inline"><span class="koboSpan" id="kobo.571.1">3000</span></strong><span class="koboSpan" id="kobo.572.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">http://localhost:3000/</span></strong><span class="koboSpan" id="kobo.574.1">. </span><span class="koboSpan" id="kobo.574.2">Welcome </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">to BeeRich!</span></span></p>
<p><span class="koboSpan" id="kobo.576.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">npm run dev</span></strong><span class="koboSpan" id="kobo.578.1"> command starts Remix's development server to build and watch the development environment. </span><span class="koboSpan" id="kobo.578.2">You can find a list of all available scripts in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">package.json</span></strong><span class="koboSpan" id="kobo.580.1"> file. </span><span class="koboSpan" id="kobo.580.2">Also, review the </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">README.md</span></strong><span class="koboSpan" id="kobo.582.1"> file in the root of the BeeRich project for additional information </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">about BeeRich.</span></span></p>
<p><span class="koboSpan" id="kobo.584.1">Tailwind CSS has been included so we can quickly add some styling without the need to leave our JavaScript modules. </span><span class="koboSpan" id="kobo.584.2">You can also find some styled reusable components in </span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">app/components</span></strong><span class="koboSpan" id="kobo.586.1">. </span><span class="koboSpan" id="kobo.586.2">Visit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">/demo</span></strong><span class="koboSpan" id="kobo.588.1"> route to inspect some of the reusable </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">components (</span></span><a href="http://localhost:3000/demo"><span class="No-Break"><span class="koboSpan" id="kobo.590.1">http://localhost:3000/demo</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.591.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.592.1">Feel free to </span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.593.1">deviate from the lessons in this book and explore alternative solutions. </span><span class="koboSpan" id="kobo.593.2">If you get stuck, you can always reset your application and use the application in the current chapter’s folder on GitHub as </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">a baseline.</span></span></p>
<p><span class="koboSpan" id="kobo.595.1">In the next chapter, we will add pages and routes </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">to BeeRich.</span></span></p>
<h1 id="_idParaDest-58"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.597.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.598.1">In this chapter, you learned what to consider when selecting a deployment target for your Remix application. </span><span class="koboSpan" id="kobo.598.2">You learned more about different hosting providers, environments, and runtimes. </span><span class="koboSpan" id="kobo.598.3">You now understand that Remix runs on long-running servers, serverless environments, and edge runtimes. </span><span class="koboSpan" id="kobo.598.4">Each environment has advantages and disadvantages that you must consider when selecting a template and </span><span class="No-Break"><span class="koboSpan" id="kobo.599.1">deployment target.</span></span></p>
<p><span class="koboSpan" id="kobo.600.1">Remix’s different deployment targets operate on different JavaScript runtimes, such as Node.js, workerd, and Deno. </span><span class="koboSpan" id="kobo.600.2">Different JavaScript runtimes support different web standards and either support or do not support Node.js standard libraries. </span><span class="koboSpan" id="kobo.600.3">When picking a template, you must consider what JavaScript runtime you want to </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">work with.</span></span></p>
<p><span class="koboSpan" id="kobo.602.1">This chapter introduces you to a nine-step process to migrate from one adapter to another. </span><span class="koboSpan" id="kobo.602.2">Switching out adapters enables you to try out different hosting providers and environments and to stay agile in case your requirements change </span><span class="No-Break"><span class="koboSpan" id="kobo.603.1">over time.</span></span></p>
<p><span class="koboSpan" id="kobo.604.1">Remix offers basic templates for different deployment targets that set up Remix’s adapters. </span><span class="koboSpan" id="kobo.604.2">However, Remix also offers production-ready stacks. </span><span class="koboSpan" id="kobo.604.3">In this chapter, you practiced using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">create-remix</span></strong><span class="koboSpan" id="kobo.606.1"> script to bootstrap a new Remix app using Remix’s </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">Indie Stack.</span></span></p>
<p><span class="koboSpan" id="kobo.608.1">Next, we utilized a custom template to bootstrap the demo application, BeeRich, which we will use in the following chapters to practice our Remix skills. </span><span class="koboSpan" id="kobo.608.2">In the next chapter, we will learn about routing in Remix and add pages </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">to BeeRich.</span></span></p>
<h1 id="_idParaDest-59"><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.610.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.611.1">You can find a list of available adapters in the Remix </span><span class="No-Break"><span class="koboSpan" id="kobo.612.1">documentation: </span></span><a href="https://remix.run/docs/en/2/other-api/adapter"><span class="No-Break"><span class="koboSpan" id="kobo.613.1">https://remix.run/docs/en/2/other-api/adapter</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.614.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.615.1">The Remix documentation also provides more explanations about available templates </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">here: </span></span><a href="https://remix.run/docs/en/2/discussion/runtimes"><span class="No-Break"><span class="koboSpan" id="kobo.617.1">https://remix.run/docs/en/2/discussion/runtimes</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.618.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.619.1">The official announcement post for Remix stacks can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">here: </span></span><a href="https://remix.run/blog/remix-stacks"><span class="No-Break"><span class="koboSpan" id="kobo.621.1">https://remix.run/blog/remix-stacks</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.622.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.623.1">Listen to Wes Bos and Scott Tolinski talk about the limitations of serverless on </span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">Syntax.fm: </span></span><a href="https://syntax.fm/show/542/serverless-limitations"><span class="No-Break"><span class="koboSpan" id="kobo.625.1">https://syntax.fm/show/542/serverless-limitations</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.626.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.627.1">Learn more about the distinction between serverless computing and containers </span><span class="No-Break"><span class="koboSpan" id="kobo.628.1">here: </span></span><a href="https://www.cloudflare.com/en-gb/learning/serverless/serverless-vs-containers/"><span class="No-Break"><span class="koboSpan" id="kobo.629.1">https://www.cloudflare.com/learning/serverless/serverless-vs-containers/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.630.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.631.1">You can find more information about V8 isolates </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">here: </span></span><a href="https://developers.cloudflare.com/workers/learning/how-workers-works/#isolates"><span class="No-Break"><span class="koboSpan" id="kobo.633.1">https://developers.cloudflare.com/workers/learning/how-workers-works/#isolates</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.634.1">.</span></span></p>
</div>
</body></html>