<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer196">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     8
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-145">
    <span class="koboSpan" id="kobo.2.1">
     Communicating with Data Services over HTTP
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     A real-world scenario for enterprise Angular applications is to connect to remote services and APIs to exchange data.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     The Angular HTTP client provides out-of-the-box support for communicating with services over HTTP.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     The interaction of an Angular application with the HTTP client is based on RxJS observable streams, giving developers a rich set of capabilities for data access.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.4.1">
     There are many ways to connect to APIs through HTTP.
    </span>
    <span class="koboSpan" id="kobo.4.2">
     In this book, we will only scratch the surface.
    </span>
    <span class="koboSpan" id="kobo.4.3">
     Still, the insights covered in this chapter will give you all you need to connect your Angular applications to HTTP services in no time, leaving all you can do with them up to your creativity.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.5.1">
     In this chapter, we will explore the following concepts:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.6.1">
      Communicating data over HTTP
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.7.1">
      Introducing the Angular HTTP client
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.8.1">
      Setting up a backend API
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.9.1">
      Handling CRUD data in Angular
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.10.1">
      Authentication and authorization with HTTP
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-146">
    <span class="koboSpan" id="kobo.11.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.12.1">
     The chapter contains various code samples to walk you through the concept of the Angular HTTP client.
    </span>
    <span class="koboSpan" id="kobo.12.2">
     You can find the related source code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.13.1">
      ch08
     </span>
    </code>
    <span class="koboSpan" id="kobo.14.1">
     folder of the following GitHub repository:
    </span>
   </p>
   <p class="normal">
    <a href="https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition">
     <span class="url">
      <span class="koboSpan" id="kobo.15.1">
       https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition
      </span>
     </span>
    </a>
   </p>
   <h1 class="heading-1" id="_idParaDest-147">
    <span class="koboSpan" id="kobo.16.1">
     Communicating data over HTTP
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.17.1">
     Before we dive into describing the Angular HTTP client and how to use it to communicate with servers, let’s talk about native HTTP implementations first.
    </span>
    <span class="koboSpan" id="kobo.17.2">
     Currently, if we
    </span>
    <a id="_idIndexMarker444">
    </a>
    <span class="koboSpan" id="kobo.18.1">
     want to communicate
    </span>
    <a id="_idIndexMarker445">
    </a>
    <span class="koboSpan" id="kobo.19.1">
     with a server over HTTP using JavaScript, we can use the JavaScript-native
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.20.1">
      fetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.21.1">
     API.
    </span>
    <span class="koboSpan" id="kobo.21.2">
     It contains all the necessary methods to connect with a server and exchange data.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     You can see an example of how to fetch data in the following code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.23.1">fetch</span></span><span class="koboSpan" id="kobo.24.1">(url)
  .</span><span class="hljs-title"><span class="koboSpan" id="kobo.25.1">then</span></span><span class="koboSpan" id="kobo.26.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.27.1">response</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.28.1"> =&gt;</span></span><span class="koboSpan" id="kobo.29.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.30.1">return</span></span><span class="koboSpan" id="kobo.31.1"> response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.32.1">ok</span></span><span class="koboSpan" id="kobo.33.1"> ? </span><span class="koboSpan" id="kobo.33.2">response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.34.1">text</span></span><span class="koboSpan" id="kobo.35.1">() : </span><span class="hljs-string"><span class="koboSpan" id="kobo.36.1">''</span></span><span class="koboSpan" id="kobo.37.1">;
  })
  .</span><span class="hljs-title"><span class="koboSpan" id="kobo.38.1">then</span></span><span class="koboSpan" id="kobo.39.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.40.1">result</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.41.1"> =&gt;</span></span><span class="koboSpan" id="kobo.42.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.43.1">if</span></span><span class="koboSpan" id="kobo.44.1"> (result) {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.45.1">console</span></span><span class="koboSpan" id="kobo.46.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.47.1">log</span></span><span class="koboSpan" id="kobo.48.1">(result);
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.49.1">else</span></span><span class="koboSpan" id="kobo.50.1"> {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.51.1">console</span></span><span class="koboSpan" id="kobo.52.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.53.1">error</span></span><span class="koboSpan" id="kobo.54.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.55.1">'An error has occurred'</span></span><span class="koboSpan" id="kobo.56.1">);
    }
  });
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.57.1">
     Although the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.58.1">
      fetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.59.1">
     API is promise-based, the promise it returns is not rejected if there is an error.
    </span>
    <span class="koboSpan" id="kobo.59.2">
     Instead, the request is unsuccessful when the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.60.1">
      ok
     </span>
    </code>
    <span class="koboSpan" id="kobo.61.1">
     property is not in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.62.1">
      response
     </span>
    </code>
    <span class="koboSpan" id="kobo.63.1">
     object.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.64.1">
     If the request to the remote URL is completed, we can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.65.1">
      text()
     </span>
    </code>
    <span class="koboSpan" id="kobo.66.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.67.1">
      response
     </span>
    </code>
    <span class="koboSpan" id="kobo.68.1">
     object to return the response text inside a new promise.
    </span>
    <span class="koboSpan" id="kobo.68.2">
     Finally, in the second
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.69.1">
      then
     </span>
    </code>
    <span class="koboSpan" id="kobo.70.1">
     callback, we display either the response text or a specific error message to the browser console.
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.71.1">
      To learn
     </span>
     <a id="_idIndexMarker446">
     </a>
     <span class="koboSpan" id="kobo.72.1">
      more about the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.73.1">
       fetch
      </span>
     </code>
     <span class="koboSpan" id="kobo.74.1">
      API, check out the official documentation at
     </span>
     <a href="https://developer.mozilla.org/docs/Web/API/fetch">
      <span class="url">
       <span class="koboSpan" id="kobo.75.1">
        https://developer.mozilla.org/docs/Web/API/fetch
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.76.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.77.1">
     We have already learned that observables are flexible for managing asynchronous operations.
    </span>
    <span class="koboSpan" id="kobo.77.2">
     You are probably wondering how we can apply this pattern when consuming information from an HTTP service.
    </span>
    <span class="koboSpan" id="kobo.77.3">
     So far, you will be becoming used to submitting asynchronous requests to AJAX services and then passing the response to a callback or a promise.
    </span>
    <span class="koboSpan" id="kobo.77.4">
     Now, we will handle the call by returning an observable.
    </span>
    <span class="koboSpan" id="kobo.77.5">
     The observable will emit the server response as an event in the context of a stream, which can be funneled through RxJS operators to better digest the response.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.78.1">
     Let’s
    </span>
    <a id="_idIndexMarker447">
    </a>
    <span class="koboSpan" id="kobo.79.1">
     convert the previous
    </span>
    <a id="_idIndexMarker448">
    </a>
    <span class="koboSpan" id="kobo.80.1">
     example with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.81.1">
      fetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.82.1">
     API to an observable.
    </span>
    <span class="koboSpan" id="kobo.82.2">
     We use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.83.1">
      Observable
     </span>
    </code>
    <span class="koboSpan" id="kobo.84.1">
     class to wrap the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.85.1">
      fetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.86.1">
     call in an observable stream and replace the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.87.1">
      console
     </span>
    </code>
    <span class="koboSpan" id="kobo.88.1">
     methods with the appropriate
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.89.1">
      observer
     </span>
    </code>
    <span class="koboSpan" id="kobo.90.1">
     object methods:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.91.1">const request$ = new Observable(observer =&gt; {</span></strong></span>
  <span class="hljs-title"><span class="koboSpan" id="kobo.92.1">fetch</span></span><span class="koboSpan" id="kobo.93.1">(url)
    .</span><span class="hljs-title"><span class="koboSpan" id="kobo.94.1">then</span></span><span class="koboSpan" id="kobo.95.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.96.1">response</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.97.1"> =&gt;</span></span><span class="koboSpan" id="kobo.98.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.99.1">return</span></span><span class="koboSpan" id="kobo.100.1"> response.</span><span class="hljs-property"><span class="koboSpan" id="kobo.101.1">ok</span></span><span class="koboSpan" id="kobo.102.1"> ? </span><span class="koboSpan" id="kobo.102.2">response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.103.1">text</span></span><span class="koboSpan" id="kobo.104.1">() : </span><span class="hljs-string"><span class="koboSpan" id="kobo.105.1">''</span></span><span class="koboSpan" id="kobo.106.1">;
    })
    .</span><span class="hljs-title"><span class="koboSpan" id="kobo.107.1">then</span></span><span class="koboSpan" id="kobo.108.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.109.1">result</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.110.1"> =&gt;</span></span><span class="koboSpan" id="kobo.111.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.112.1">if</span></span><span class="koboSpan" id="kobo.113.1"> (result) {
        </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.114.1">observer.next(result);</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.115.1">observer.complete();</span></strong></span><span class="koboSpan" id="kobo.116.1">
      } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.117.1">else</span></span><span class="koboSpan" id="kobo.118.1"> {
        </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.119.1">observer.error('An error has occurred');</span></strong></span><span class="koboSpan" id="kobo.120.1">
      }
    });
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.121.1">});</span></strong></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.122.1">
     In the preceding snippet, we use the following
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.123.1">
      observer
     </span>
    </code>
    <span class="koboSpan" id="kobo.124.1">
     methods:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.125.1">
       next
      </span>
     </code>
     <span class="koboSpan" id="kobo.126.1">
      : This returns
     </span>
     <a id="_idIndexMarker449">
     </a>
     <span class="koboSpan" id="kobo.127.1">
      the response data to subscribers when they arrive
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.128.1">
       complete
      </span>
     </code>
     <span class="koboSpan" id="kobo.129.1">
      : This
     </span>
     <a id="_idIndexMarker450">
     </a>
     <span class="koboSpan" id="kobo.130.1">
      notifies subscribers that no other data will be available in the stream
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.131.1">
       error
      </span>
     </code>
     <span class="koboSpan" id="kobo.132.1">
      : This alerts
     </span>
     <a id="_idIndexMarker451">
     </a>
     <span class="koboSpan" id="kobo.133.1">
      subscribers that an error has occurred
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.134.1">
     That’s it!
    </span>
    <span class="koboSpan" id="kobo.134.2">
     We have now built a custom HTTP client.
    </span>
    <span class="koboSpan" id="kobo.134.3">
     Of course, this isn’t much.
    </span>
    <span class="koboSpan" id="kobo.134.4">
     Our custom HTTP client
    </span>
    <a id="_idIndexMarker452">
    </a>
    <span class="koboSpan" id="kobo.135.1">
     only handles a
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.136.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.137.1">
     operation to get data from a remote
    </span>
    <a id="_idIndexMarker453">
    </a>
    <span class="koboSpan" id="kobo.138.1">
     endpoint.
    </span>
    <span class="koboSpan" id="kobo.138.2">
     We
    </span>
    <a id="_idIndexMarker454">
    </a>
    <span class="koboSpan" id="kobo.139.1">
     are not handling many other operations of the
    </span>
    <a id="_idIndexMarker455">
    </a>
    <span class="koboSpan" id="kobo.140.1">
     HTTP protocol, such as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.141.1">
      POST
     </span>
    </strong>
    <span class="koboSpan" id="kobo.142.1">
     ,
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.143.1">
      PUT
     </span>
    </strong>
    <span class="koboSpan" id="kobo.144.1">
     , and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.145.1">
      DELETE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.146.1">
     .
    </span>
    <span class="koboSpan" id="kobo.146.2">
     It was, however, essential to realize all the heavy lifting the HTTP client in Angular is doing for us.
    </span>
    <span class="koboSpan" id="kobo.146.3">
     Another important lesson is how easy it is to turn an asynchronous API into an observable API that fits nicely with the rest of our asynchronous concepts.
    </span>
    <span class="koboSpan" id="kobo.146.4">
     So, let’s continue with Angular’s implementation of an HTTP service.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-148">
    <span class="koboSpan" id="kobo.147.1">
     Introducing the Angular HTTP client
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.148.1">
     The HTTP
    </span>
    <a id="_idIndexMarker456">
    </a>
    <span class="koboSpan" id="kobo.149.1">
     client of the Angular framework is a separate Angular library that resides in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.150.1">
      @angular/common
     </span>
    </code>
    <span class="koboSpan" id="kobo.151.1">
     npm package under the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.152.1">
      http
     </span>
    </code>
    <span class="koboSpan" id="kobo.153.1">
     namespace.
    </span>
    <span class="koboSpan" id="kobo.153.2">
     The Angular CLI installs this package by default when creating a new Angular project.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.154.1">
      You will need the source code of the Angular application we created in
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.155.1">
       Chapter 6
      </span>
     </em>
     <span class="koboSpan" id="kobo.156.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.157.1">
       Reactive Patterns in Angular
      </span>
     </em>
     <span class="koboSpan" id="kobo.158.1">
      , to follow along with the rest of the chapter.
     </span>
     <span class="koboSpan" id="kobo.158.2">
      After you get the code, we suggest you remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.159.1">
       key-logger
      </span>
     </code>
     <span class="koboSpan" id="kobo.160.1">
      folder for simplicity.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.161.1">
     To start using the Angular HTTP client, we need to import the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.162.1">
      provideHttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.163.1">
     method in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.164.1">
      app.config.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.165.1">
     file:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.166.1">import { provideHttpClient } from '@angular/common/http';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.167.1">import</span></span><span class="koboSpan" id="kobo.168.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.169.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.170.1">, provideZoneChangeDetection } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.171.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.172.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.173.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.174.1">import</span></span><span class="koboSpan" id="kobo.175.1"> { provideRouter } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.176.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.177.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.178.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.179.1">import</span></span><span class="koboSpan" id="kobo.180.1"> { routes } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.181.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.182.1">'./app.routes'</span></span><span class="koboSpan" id="kobo.183.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.184.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.185.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.186.1">appConfig</span></span><span class="koboSpan" id="kobo.187.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.188.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.189.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.190.1">providers</span></span><span class="koboSpan" id="kobo.191.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.192.1">provideZoneChangeDetection</span></span><span class="koboSpan" id="kobo.193.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.194.1">eventCoalescing</span></span><span class="koboSpan" id="kobo.195.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.196.1">true</span></span><span class="koboSpan" id="kobo.197.1"> }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.198.1">provideRouter</span></span><span class="koboSpan" id="kobo.199.1">(routes),
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.200.1">provideHttpClient()</span></strong></span><span class="koboSpan" id="kobo.201.1">
  ]
};
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.202.1">
      Suppose we want to use the HTTP client in applications built with older versions
     </span>
     <a id="_idIndexMarker457">
     </a>
     <span class="koboSpan" id="kobo.203.1">
      of Angular.
     </span>
     <span class="koboSpan" id="kobo.203.2">
      In that case, we need to import an Angular module, called
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.204.1">
       HttpClientModule
      </span>
     </code>
     <span class="koboSpan" id="kobo.205.1">
      , from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.206.1">
       @angular/common/http
      </span>
     </code>
     <span class="koboSpan" id="kobo.207.1">
      namespace into one of the modules of our application.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.208.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.209.1">
      provideHttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.210.1">
     method exposes various Angular services we can use to handle asynchronous
    </span>
    <a id="_idIndexMarker458">
    </a>
    <span class="koboSpan" id="kobo.211.1">
     HTTP communication.
    </span>
    <span class="koboSpan" id="kobo.211.2">
     The most basic is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.212.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.213.1">
     service, which provides a robust API and abstracts all operations required to handle asynchronous connections through the following HTTP methods:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.214.1">
       get
      </span>
     </code>
     <span class="koboSpan" id="kobo.215.1">
      : This performs a
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.216.1">
       GET
      </span>
     </strong>
     <span class="koboSpan" id="kobo.217.1">
      operation to fetch data
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.218.1">
       post
      </span>
     </code>
     <span class="koboSpan" id="kobo.219.1">
      : This performs a
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.220.1">
       POST
      </span>
     </strong>
     <span class="koboSpan" id="kobo.221.1">
      operation to add new data
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.222.1">
       put
      </span>
     </code>
     <span class="koboSpan" id="kobo.223.1">
      /
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.224.1">
       patch
      </span>
     </code>
     <span class="koboSpan" id="kobo.225.1">
      : This performs a
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.226.1">
       PUT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.227.1">
      /
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.228.1">
       PATCH
      </span>
     </strong>
     <span class="koboSpan" id="kobo.229.1">
      operation to update existing data
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.230.1">
       delete
      </span>
     </code>
     <span class="koboSpan" id="kobo.231.1">
      : This performs a
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.232.1">
       DELETE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.233.1">
      operation to remove existing data
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.234.1">
     The previous
    </span>
    <a id="_idIndexMarker459">
    </a>
    <span class="koboSpan" id="kobo.235.1">
     HTTP methods constitute the primary operations for
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.236.1">
      Create, Read, Update, Delete
     </span>
    </strong>
    <span class="koboSpan" id="kobo.237.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.238.1">
      CRUD
     </span>
    </strong>
    <span class="koboSpan" id="kobo.239.1">
     ) applications.
    </span>
    <span class="koboSpan" id="kobo.239.2">
     All the earlier methods of the Angular HTTP client return an observable data stream.
    </span>
    <span class="koboSpan" id="kobo.239.3">
     Angular components
    </span>
    <a id="_idIndexMarker460">
    </a>
    <span class="koboSpan" id="kobo.240.1">
     can use the RxJS library to subscribe to those methods and interact with a remote API.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.241.1">
      The Angular team is currently investigating and experimenting to see if they can make the use of RxJS optional in the framework.
     </span>
     <span class="koboSpan" id="kobo.241.2">
      In that case, we might see an HTTP implementation that is based on signals.
     </span>
     <span class="koboSpan" id="kobo.241.3">
      For the rest of this chapter, we will stick with observables because the Angular HTTP client does not support signals out of the box.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.242.1">
     In the following section, we will explore how to use these methods and communicate with a remote API.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-149">
    <span class="koboSpan" id="kobo.243.1">
     Setting up a backend API
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.244.1">
     A web CRUD application usually connects to a server and uses an HTTP backend API to perform
    </span>
    <a id="_idIndexMarker461">
    </a>
    <span class="koboSpan" id="kobo.245.1">
     operations on data.
    </span>
    <span class="koboSpan" id="kobo.245.2">
     It fetches existing data, updates it, creates new data, or deletes it.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.246.1">
     In a real-world
    </span>
    <a id="_idIndexMarker462">
    </a>
    <span class="koboSpan" id="kobo.247.1">
     scenario, you will most likely interact with a real backend API service through HTTP.
    </span>
    <span class="koboSpan" id="kobo.247.2">
     In this book, we will use a fake API called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.248.1">
      Fake Store API
     </span>
    </strong>
    <span class="koboSpan" id="kobo.249.1">
     .
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.250.1">
      The official
     </span>
     <a id="_idIndexMarker463">
     </a>
     <span class="koboSpan" id="kobo.251.1">
      Fake Store API documentation can be found at
     </span>
     <a href="https://fakestoreapi.com">
      <span class="url">
       <span class="koboSpan" id="kobo.252.1">
        https://fakestoreapi.com
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.253.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.254.1">
     The Fake Store API is a backend REST API available online that you can use when you need fake data for an e-commerce or e-shop web application.
    </span>
    <span class="koboSpan" id="kobo.254.2">
     It can manage products, shopping carts, and users available in the JSON format.
    </span>
    <span class="koboSpan" id="kobo.254.3">
     It exposes the following main endpoints:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.255.1">
       products
      </span>
     </strong>
     <span class="koboSpan" id="kobo.256.1">
      : This manages a set of product items
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.257.1">
       cart
      </span>
     </strong>
     <span class="koboSpan" id="kobo.258.1">
      : This manages the shopping cart of a user
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.259.1">
       user
      </span>
     </strong>
     <span class="koboSpan" id="kobo.260.1">
      : This manages a collection of application users
     </span>
    </li>
    <li class="bulletList">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.261.1">
       login
      </span>
     </strong>
     <span class="koboSpan" id="kobo.262.1">
      : This handles user authentication
     </span>
     <div class="note">
      <p class="normal">
       <span class="koboSpan" id="kobo.263.1">
        In this chapter, we will work only with the products and login endpoints.
       </span>
       <span class="koboSpan" id="kobo.263.2">
        However, we will revisit the cart endpoint later in the book.
       </span>
      </p>
     </div>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.264.1">
     All operations
    </span>
    <a id="_idIndexMarker464">
    </a>
    <span class="koboSpan" id="kobo.265.1">
     that modify data do not persist them physically in a database.
    </span>
    <span class="koboSpan" id="kobo.265.2">
     However, they return an indication of whether the operation was successful.
    </span>
    <span class="koboSpan" id="kobo.265.3">
     All operations that get data return a predefined collection of items.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-150">
    <span class="koboSpan" id="kobo.266.1">
     Handling CRUD data in Angular
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.267.1">
     CRUD applications are widely used in the Angular world.
    </span>
    <span class="koboSpan" id="kobo.267.2">
     You will hardly find any web application
    </span>
    <a id="_idIndexMarker465">
    </a>
    <span class="koboSpan" id="kobo.268.1">
     that does not follow this pattern.
    </span>
    <span class="koboSpan" id="kobo.268.2">
     Angular
    </span>
    <a id="_idIndexMarker466">
    </a>
    <span class="koboSpan" id="kobo.269.1">
     does a great job of supporting this type of application by providing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.270.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.271.1">
     service.
    </span>
    <span class="koboSpan" id="kobo.271.2">
     In this section, we will explore the Angular HTTP client by interacting with the products endpoint of the Fake Store API.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-151">
    <span class="koboSpan" id="kobo.272.1">
     Fetching data through HTTP
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.273.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.274.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.275.1">
     class uses the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.276.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.277.1">
     class to fetch and display product
    </span>
    <a id="_idIndexMarker467">
    </a>
    <span class="koboSpan" id="kobo.278.1">
     data.
    </span>
    <span class="koboSpan" id="kobo.278.2">
     Data is currently hardcoded into the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.279.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.280.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.281.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.282.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.282.2">
     In this section, we will modify our Angular application to work with live data from the Fake Store API:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.283.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.284.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.285.1">
      file and remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.286.1">
       providers
      </span>
     </code>
     <span class="koboSpan" id="kobo.287.1">
      property from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.288.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.289.1">
      decorator.
     </span>
     <span class="koboSpan" id="kobo.289.2">
      We will provide
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.290.1">
       APP_SETTINGS
      </span>
     </code>
     <span class="koboSpan" id="kobo.291.1">
      directly through the application configuration file.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.292.1">
      At this point, we can also remove the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.293.1">
       title
      </span>
     </code>
     <span class="koboSpan" id="kobo.294.1">
      property, the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.295.1">
       title$
      </span>
     </code>
     <span class="koboSpan" id="kobo.296.1">
      observable, the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.297.1">
       setTitle
      </span>
     </code>
     <span class="koboSpan" id="kobo.298.1">
      property, and the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.299.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.300.1">
      of the component class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.301.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.302.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.303.1">AppComponent</span></span><span class="koboSpan" id="kobo.304.1"> {
  settings = </span><span class="hljs-title"><span class="koboSpan" id="kobo.305.1">inject</span></span><span class="koboSpan" id="kobo.306.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.307.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.308.1">);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.309.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.310.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.311.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.312.1">
       &lt;header&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.313.1">
      HTML element so that
     </span>
     <a id="_idIndexMarker468">
     </a>
     <span class="koboSpan" id="kobo.314.1">
      it uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.315.1">
       settings
      </span>
     </code>
     <span class="koboSpan" id="kobo.316.1">
      object directly:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.317.1">&lt;header&gt;{{ </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.318.1">settings.title</span></strong></span><span class="koboSpan" id="kobo.319.1"> }}&lt;/header&gt;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.320.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.321.1">
       app.config.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.322.1">
      file and add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.323.1">
       APP_SETTINGS
      </span>
     </code>
     <span class="koboSpan" id="kobo.324.1">
      provider as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.325.1">import</span></span><span class="koboSpan" id="kobo.326.1"> { provideHttpClient } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.327.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.328.1">'@angular/common/http'</span></span><span class="koboSpan" id="kobo.329.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.330.1">import</span></span><span class="koboSpan" id="kobo.331.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.332.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.333.1">, provideZoneChangeDetection } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.334.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.335.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.336.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.337.1">import</span></span><span class="koboSpan" id="kobo.338.1"> { provideRouter } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.339.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.340.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.341.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.342.1">import</span></span><span class="koboSpan" id="kobo.343.1"> { routes } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.344.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.345.1">'./app.routes'</span></span><span class="koboSpan" id="kobo.346.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.347.1">import { APP_SETTINGS, appSettings } from './app.settings';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.348.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.349.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.350.1">appConfig</span></span><span class="koboSpan" id="kobo.351.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.352.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.353.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.354.1">providers</span></span><span class="koboSpan" id="kobo.355.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.356.1">provideZoneChangeDetection</span></span><span class="koboSpan" id="kobo.357.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.358.1">eventCoalescing</span></span><span class="koboSpan" id="kobo.359.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.360.1">true</span></span><span class="koboSpan" id="kobo.361.1"> }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.362.1">provideRouter</span></span><span class="koboSpan" id="kobo.363.1">(routes),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.364.1">provideHttpClient</span></span><span class="koboSpan" id="kobo.365.1">(),
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.366.1">{ provide: APP_SETTINGS, useValue: appSettings }</span></strong></span><span class="koboSpan" id="kobo.367.1">
  ]
};
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.368.1">
     We provide
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.369.1">
      APP_SETTINGS
     </span>
    </code>
    <span class="koboSpan" id="kobo.370.1">
     from the application configuration file because we want it to be accessible globally in the application.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.371.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.372.1">
       app.settings.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.373.1">
      file and add a new property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.374.1">
       AppSettings
      </span>
     </code>
     <span class="koboSpan" id="kobo.375.1">
      interface that represents the URL of the Fake Store API:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.376.1">import</span></span><span class="koboSpan" id="kobo.377.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.378.1">InjectionToken</span></span><span class="koboSpan" id="kobo.379.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.380.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.381.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.382.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.383.1">export</span></span><span class="koboSpan" id="kobo.384.1"> interface </span><span class="hljs-title"><span class="koboSpan" id="kobo.385.1">AppSettings</span></span><span class="koboSpan" id="kobo.386.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.387.1">title</span></span><span class="koboSpan" id="kobo.388.1">: string;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.389.1">version</span></span><span class="koboSpan" id="kobo.390.1">: string;
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.391.1">apiUrl: string;</span></strong></span><span class="koboSpan" id="kobo.392.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.393.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.394.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.395.1">appSettings</span></span><span class="koboSpan" id="kobo.396.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.397.1">AppSettings</span></span><span class="koboSpan" id="kobo.398.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.399.1">title</span></span><span class="koboSpan" id="kobo.400.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.401.1">'My e-shop'</span></span><span class="koboSpan" id="kobo.402.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.403.1">version</span></span><span class="koboSpan" id="kobo.404.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.405.1">'1.0'</span></span><span class="koboSpan" id="kobo.406.1">,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.407.1">apiUrl: 'https://fakestoreapi.com'</span></strong></span><span class="koboSpan" id="kobo.408.1">
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.409.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.410.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.411.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.412.1"> = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.413.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.414.1">InjectionToken</span></span><span class="koboSpan" id="kobo.415.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.416.1">AppSettings</span></span><span class="koboSpan" id="kobo.417.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.418.1">'app.settings'</span></span><span class="koboSpan" id="kobo.419.1">);
</span></code></pre>
     <div class="note-one">
      <p class="normal">
       <span class="koboSpan" id="kobo.420.1">
        The URL
       </span>
       <a id="_idIndexMarker469">
       </a>
       <span class="koboSpan" id="kobo.421.1">
        of a backend API can also be added in environment files, as we will learn in
       </span>
       <em class="chapterRef">
        <span class="koboSpan" id="kobo.422.1">
         Chapter 14
        </span>
       </em>
       <span class="koboSpan" id="kobo.423.1">
        ,
       </span>
       <em class="italic">
        <span class="koboSpan" id="kobo.424.1">
         Bringing Applications to Production
        </span>
       </em>
       <span class="koboSpan" id="kobo.425.1">
        .
       </span>
      </p>
     </div>
    </li>
   </ol>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.426.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.427.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.428.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.429.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.430.1">
      statements accordingly:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.431.1">import { HttpClient } from '@angular/common/http';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.432.1">import</span></span><span class="koboSpan" id="kobo.433.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.434.1">Injectable</span></span><span class="koboSpan" id="kobo.435.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.436.1">inject</span></strong></span><span class="koboSpan" id="kobo.437.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.438.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.439.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.440.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.441.1">import</span></span><span class="koboSpan" id="kobo.442.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.443.1">Product</span></span><span class="koboSpan" id="kobo.444.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.445.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.446.1">'./product'</span></span><span class="koboSpan" id="kobo.447.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.448.1">import</span></span><span class="koboSpan" id="kobo.449.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.450.1">Observable</span></span><span class="koboSpan" id="kobo.451.1">, </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.452.1">of</span></span><span class="koboSpan" id="kobo.453.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.454.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.455.1">'rxjs'</span></span><span class="koboSpan" id="kobo.456.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.457.1">import { APP_SETTINGS } from './app.settings';</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.458.1">
      Create the following property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.459.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.460.1">
      class that represents the API products endpoint:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.461.1">private productsUrl = </span><span class="hljs-title"><span class="koboSpan" id="kobo.462.1">inject</span></span><span class="koboSpan" id="kobo.463.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.464.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.465.1">).</span><span class="hljs-property"><span class="koboSpan" id="kobo.466.1">apiUrl</span></span><span class="koboSpan" id="kobo.467.1"> + </span><span class="hljs-string"><span class="koboSpan" id="kobo.468.1">'/products'</span></span><span class="koboSpan" id="kobo.469.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.470.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.471.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.472.1">
      to inject the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.473.1">
       HttpClient
      </span>
     </code>
     <span class="koboSpan" id="kobo.474.1">
      service:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.475.1">constructor</span></span><span class="koboSpan" id="kobo.476.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.477.1">private http: HttpClient</span></strong></span><span class="koboSpan" id="kobo.478.1">) { }
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.479.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.480.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.481.1">
      method so that it uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.482.1">
       HttpClient
      </span>
     </code>
     <span class="koboSpan" id="kobo.483.1">
      service to get the list of products:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.484.1">getProducts</span></span><span class="koboSpan" id="kobo.485.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.486.1">Observable</span></span><span class="koboSpan" id="kobo.487.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.488.1">Product</span></span><span class="koboSpan" id="kobo.489.1">[]&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.490.1">return</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.491.1">this.http.get&lt;Product[]&gt;(this.productsUrl);</span></strong></span><span class="koboSpan" id="kobo.492.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.493.1">
     In the preceding method, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.494.1">
      get
     </span>
    </code>
    <span class="koboSpan" id="kobo.495.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.496.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.497.1">
     class and pass the products endpoint of the API as a parameter.
    </span>
    <span class="koboSpan" id="kobo.497.2">
     We also define the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.498.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.499.1">
     as a generic type in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.500.1">
      get
     </span>
    </code>
    <span class="koboSpan" id="kobo.501.1">
     method to indicate that the response from the API contains a list of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.502.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.503.1">
     objects.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="10">
     <span class="koboSpan" id="kobo.504.1">
      Convert the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.505.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.506.1">
      property to an empty array:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.507.1">private </span><span class="hljs-attr"><span class="koboSpan" id="kobo.508.1">products</span></span><span class="koboSpan" id="kobo.509.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.510.1">Product</span></span><span class="koboSpan" id="kobo.511.1">[] = </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.512.1">[]</span></strong></span><span class="koboSpan" id="kobo.513.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.514.1">
     We will use this for local cache purposes later, in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.515.1">
      Modifying data through HTTP
     </span>
    </em>
    <span class="koboSpan" id="kobo.516.1">
     section.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="11">
     <span class="koboSpan" id="kobo.517.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.518.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.519.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.520.1">
       @if
      </span>
     </code>
     <span class="koboSpan" id="kobo.521.1">
      block so that it
     </span>
     <a id="_idIndexMarker470">
     </a>
     <span class="koboSpan" id="kobo.522.1">
      checks if the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.523.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.524.1">
      template variable exists:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.525.1">@</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.526.1">if</span></span><span class="koboSpan" id="kobo.527.1"> (</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.528.1">products</span></strong></span><span class="koboSpan" id="kobo.529.1">) {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.530.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.531.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.532.1">&gt;</span></span><span class="koboSpan" id="kobo.533.1">Products ({{products.length}})</span><span class="hljs-tag"><span class="koboSpan" id="kobo.534.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.535.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.536.1">&gt;</span></span><span class="koboSpan" id="kobo.537.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.538.1">
     We need to check if the variable exists because data is now fetched from the Fake Store API and there will be a network delay before the variable has a value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.539.1">
     If we run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.540.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.541.1">
     command, we should see an extended list of products from the API similar to the following:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.542.1">
     <img alt="img" src="../Images/B21418_08_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.543.1">
     Figure 8.1: Product list from the Fake Store API
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.544.1">
     The products endpoint supports passing a request parameter to limit the results returned from the API.
    </span>
    <span class="koboSpan" id="kobo.544.2">
     As indicated at
    </span>
    <a href="https://fakestoreapi.com/docs#p-limit">
     <span class="url">
      <span class="koboSpan" id="kobo.545.1">
       https://fakestoreapi.com/docs#p-limit
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.546.1">
     , we can use a query parameter named
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.547.1">
      limit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.548.1">
     to accomplish that task.
    </span>
    <span class="koboSpan" id="kobo.548.2">
     Let’s see how we can pass query parameters in the Angular HTTP client:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.549.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.550.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.551.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.552.1">
       HttpParams
      </span>
     </code>
     <span class="koboSpan" id="kobo.553.1">
      class from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.554.1">
       @angular/common/http
      </span>
     </code>
     <span class="koboSpan" id="kobo.555.1">
      namespace:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.556.1">import</span></span><span class="koboSpan" id="kobo.557.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.558.1">HttpClient</span></span><span class="koboSpan" id="kobo.559.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.560.1">HttpParams</span></strong></span><span class="koboSpan" id="kobo.561.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.562.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.563.1">'@angular/common/http'</span></span><span class="koboSpan" id="kobo.564.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.565.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.566.1">
      HttpParams
     </span>
    </code>
    <span class="koboSpan" id="kobo.567.1">
     class is used to pass query parameters in an HTTP request.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.568.1">
      Create the
     </span>
     <a id="_idIndexMarker471">
     </a>
     <span class="koboSpan" id="kobo.569.1">
      following variable inside the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.570.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.571.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.572.1">const</span></span><span class="koboSpan" id="kobo.573.1"> options = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.574.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.575.1">HttpParams</span></span><span class="koboSpan" id="kobo.576.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.577.1">set</span></span><span class="koboSpan" id="kobo.578.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.579.1">'limit'</span></span><span class="koboSpan" id="kobo.580.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.581.1">10</span></span><span class="koboSpan" id="kobo.582.1">);
</span></code></pre>
    </li>
   </ol>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.583.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.584.1">
       HttpParams
      </span>
     </code>
     <span class="koboSpan" id="kobo.585.1">
      class is
     </span>
     <a id="_idIndexMarker472">
     </a>
     <span class="koboSpan" id="kobo.586.1">
      immutable.
     </span>
     <span class="koboSpan" id="kobo.586.2">
      The following would not work because every operation returns a new instance:
     </span>
    </p>
    <pre class="programlisting code"><code class="hljs-code"><code class="inlineCode"><span class="koboSpan" id="kobo.587.1">const options = new HttpParams();</span></code>
<code class="inlineCode"><span class="koboSpan" id="kobo.588.1">options.set('limit', 10);</span></code>
</code></pre>
   </div>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.589.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.590.1">
      set
     </span>
    </code>
    <span class="koboSpan" id="kobo.591.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.592.1">
      HttpParams
     </span>
    </code>
    <span class="koboSpan" id="kobo.593.1">
     class creates a new query parameter.
    </span>
    <span class="koboSpan" id="kobo.593.2">
     If we wanted to pass additional parameters, we should chain more
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.594.1">
      set
     </span>
    </code>
    <span class="koboSpan" id="kobo.595.1">
     methods, such as:
    </span>
   </p>
   <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.596.1">const</span></span><span class="koboSpan" id="kobo.597.1"> options = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.598.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.599.1">HttpParams</span></span><span class="koboSpan" id="kobo.600.1">()
  .</span><span class="hljs-title"><span class="koboSpan" id="kobo.601.1">set</span></span><span class="koboSpan" id="kobo.602.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.603.1">'limit'</span></span><span class="koboSpan" id="kobo.604.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.605.1">10</span></span><span class="koboSpan" id="kobo.606.1">)
  .</span><span class="hljs-title"><span class="koboSpan" id="kobo.607.1">set</span></span><span class="koboSpan" id="kobo.608.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.609.1">'page'</span></span><span class="koboSpan" id="kobo.610.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.611.1">1</span></span><span class="koboSpan" id="kobo.612.1">);
</span></code></pre>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.613.1">
      We use the second parameter of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.614.1">
       get
      </span>
     </code>
     <span class="koboSpan" id="kobo.615.1">
      method to pass query parameters using the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.616.1">
       params
      </span>
     </code>
     <span class="koboSpan" id="kobo.617.1">
      property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.618.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.619.1">this</span></span><span class="koboSpan" id="kobo.620.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.621.1">http</span></span><span class="koboSpan" id="kobo.622.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.623.1">get</span></span><span class="koboSpan" id="kobo.624.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.625.1">Product</span></span><span class="koboSpan" id="kobo.626.1">[]&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.627.1">this</span></span><span class="koboSpan" id="kobo.628.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.629.1">productsUrl</span></span><span class="koboSpan" id="kobo.630.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.631.1">{</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.632.1">params: options</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.633.1">}</span></strong></span><span class="koboSpan" id="kobo.634.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.635.1">
      Save your
     </span>
     <a id="_idIndexMarker473">
     </a>
     <span class="koboSpan" id="kobo.636.1">
      changes, wait for the application to reload, and observe the application’s output:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.637.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.638.1">
     Figure 8.2: Product list
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.639.1">
     In the preceding list, all products are displayed with the same tag icon, which is the default one according to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.640.1">
      @switch
     </span>
    </code>
    <span class="koboSpan" id="kobo.641.1">
     block in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.642.1">
      product-list.component.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.643.1">
     file:
    </span>
   </p>
   <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.644.1">&lt;li </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.645.1">class</span></span><span class="koboSpan" id="kobo.646.1">=</span><span class="hljs-string"><span class="koboSpan" id="kobo.647.1">"pill"</span></span><span class="koboSpan" id="kobo.648.1"> (click)=</span><span class="hljs-string"><span class="koboSpan" id="kobo.649.1">"selectedProduct = product"</span></span><span class="koboSpan" id="kobo.650.1">&gt;
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.651.1">@switch (product.title) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.652.1">@case ('Keyboard') { </span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.653.1"><img alt="img" src="../Images/Icon-041.png"/></span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.654.1"> }</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.655.1">@case ('Microphone') { </span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.656.1"><img alt="img" src="../Images/Icon-05.png"/></span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.657.1"> }</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.658.1">@default { </span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.659.1"><img alt="img" src="../Images/Icon-09.png"/></span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.660.1"> }</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.661.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.662.1">{{product.title}}</span></strong></span><span class="koboSpan" id="kobo.663.1">
&lt;/li&gt;
</span></code></pre>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.664.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.665.1">
      @switch
     </span>
    </code>
    <span class="koboSpan" id="kobo.666.1">
     block relies on the product
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.667.1">
      title
     </span>
    </code>
    <span class="koboSpan" id="kobo.668.1">
     property.
    </span>
    <span class="koboSpan" id="kobo.668.2">
     We will change it so that it
    </span>
    <a id="_idIndexMarker474">
    </a>
    <span class="koboSpan" id="kobo.669.1">
     is based on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.670.1">
      category
     </span>
    </code>
    <span class="koboSpan" id="kobo.671.1">
     property, which comes from the products endpoint of the API.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.672.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.673.1">
       product.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.674.1">
      file and replace the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.675.1">
       categories
      </span>
     </code>
     <span class="koboSpan" id="kobo.676.1">
      property with the following property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.677.1">category</span></span><span class="koboSpan" id="kobo.678.1">: string;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.679.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.680.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.681.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.682.1">
       @switch
      </span>
     </code>
     <span class="koboSpan" id="kobo.683.1">
      block as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.684.1">@</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.685.1">switch</span></span><span class="koboSpan" id="kobo.686.1"> (product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.687.1">category</span></span><span class="koboSpan" id="kobo.688.1">) {
  @</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.689.1">case</span></span><span class="koboSpan" id="kobo.690.1"> (</span><span class="hljs-string"><span class="koboSpan" id="kobo.691.1">'electronics'</span></span><span class="koboSpan" id="kobo.692.1">) { </span><span class="koboSpan" id="kobo.693.1"><img alt="img" src="../Images/Icon-041.png"/></span><span class="koboSpan" id="kobo.694.1"> }
  @</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.695.1">case</span></span><span class="koboSpan" id="kobo.696.1"> (</span><span class="hljs-string"><span class="koboSpan" id="kobo.697.1">'jewelery'</span></span><span class="koboSpan" id="kobo.698.1">) { </span><span class="koboSpan" id="kobo.699.1"><img alt="img" src="../Images/Icon-10.png"/></span><span class="koboSpan" id="kobo.700.1"> }
  @</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.701.1">default</span></span><span class="koboSpan" id="kobo.702.1"> { </span><span class="koboSpan" id="kobo.703.1"><img alt="img" src="../Images/Icon-09.png"/></span><span class="koboSpan" id="kobo.704.1"> }
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.705.1">
      We also need to modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.706.1">
       product-detail.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.707.1">
      file because we replaced the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.708.1">
       categories
      </span>
     </code>
     <span class="koboSpan" id="kobo.709.1">
      property in step 1:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.710.1">@</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.711.1">if</span></span><span class="koboSpan" id="kobo.712.1"> (</span><span class="hljs-title"><span class="koboSpan" id="kobo.713.1">product</span></span><span class="koboSpan" id="kobo.714.1">()) {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.715.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.716.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.717.1">&gt;</span></span><span class="koboSpan" id="kobo.718.1">You selected:
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.719.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.720.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.721.1">&gt;</span></span><span class="koboSpan" id="kobo.722.1">{{product()!.title}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.723.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.724.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.725.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.726.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.727.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.728.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.729.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.730.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.731.1">&gt;</span></span><span class="koboSpan" id="kobo.732.1">{{product()!.price | currency:'EUR'}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.733.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.734.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.735.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.736.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.737.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.738.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.739.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.740.1">"pill-group"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.741.1">&gt;</span></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.742.1">&lt;p class="pill"&gt;{{ product()!.category }}&lt;/p&gt;</span></strong></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.743.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.744.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.745.1">&gt;</span></span>  
  <span class="hljs-tag"><span class="koboSpan" id="kobo.746.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.747.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.748.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.749.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.750.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.751.1">"addToCart()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.752.1">&gt;</span></span><span class="koboSpan" id="kobo.753.1">Add to cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.754.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.755.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.756.1">&gt;</span></span><span class="koboSpan" id="kobo.757.1">
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.758.1">
      Save your
     </span>
     <a id="_idIndexMarker475">
     </a>
     <span class="koboSpan" id="kobo.759.1">
      changes, wait for the application to reload, and observe the application’s output:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.760.1">
     <img alt="img" src="../Images/B21418_08_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.761.1">
     Figure 8.3: Product list with categories
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.762.1">
     If you click on a product in the list, you will notice that the product details are shown correctly:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.763.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.764.1">
     Figure 8.4: Product details
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.765.1">
     The product
    </span>
    <a id="_idIndexMarker476">
    </a>
    <span class="koboSpan" id="kobo.766.1">
     details component continues to work as expected because we pass the selected product as an input property from the product list:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.767.1">&lt;app-product-detail
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.768.1">[product]="selectedProduct"</span></strong></span><span class="koboSpan" id="kobo.769.1">
  (added)=</span><span class="hljs-string"><span class="koboSpan" id="kobo.770.1">"onAdded()"</span></span><span class="koboSpan" id="kobo.771.1">
&gt;&lt;/app-product-detail&gt;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.772.1">
     We will change the previous behavior and get the product details directly from the API using an HTTP GET request.
    </span>
    <span class="koboSpan" id="kobo.772.2">
     The Fake Store API contains an endpoint method that we can use to get the details for a specific product based on its ID:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.773.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.774.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.775.1">
      file and create a new
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.776.1">
       getProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.777.1">
      method that accepts the product
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.778.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.779.1">
      as a parameter and initiates a GET request to the API based on that
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.780.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.781.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.782.1">getProduct</span></span><span class="koboSpan" id="kobo.783.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.784.1">id</span></span><span class="koboSpan" id="kobo.785.1">: number): </span><span class="hljs-title"><span class="koboSpan" id="kobo.786.1">Observable</span></span><span class="koboSpan" id="kobo.787.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.788.1">Product</span></span><span class="koboSpan" id="kobo.789.1">&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.790.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.791.1">this</span></span><span class="koboSpan" id="kobo.792.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.793.1">http</span></span><span class="koboSpan" id="kobo.794.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.795.1">get</span></span><span class="koboSpan" id="kobo.796.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.797.1">Product</span></span><span class="koboSpan" id="kobo.798.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.799.1">`</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.800.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.801.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.802.1">.productsUrl}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.803.1">/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.804.1">${id}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.805.1">`</span></span><span class="koboSpan" id="kobo.806.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.807.1">
     The preceding method uses the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.808.1">
      get
     </span>
    </code>
    <span class="koboSpan" id="kobo.809.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.810.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.811.1">
     service.
    </span>
    <span class="koboSpan" id="kobo.811.2">
     It accepts the products endpoint URL followed by the product
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.812.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.813.1">
     as a parameter.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.814.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.815.1">
       product-detail.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.816.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.817.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.818.1">
      statements as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.819.1">import</span></span><span class="koboSpan" id="kobo.820.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.821.1">CommonModule</span></span><span class="koboSpan" id="kobo.822.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.823.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.824.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.825.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.826.1">import</span></span><span class="koboSpan" id="kobo.827.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.828.1">Component</span></span><span class="koboSpan" id="kobo.829.1">,
  input,
  output,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.830.1">OnChanges</span></strong></span><span class="koboSpan" id="kobo.831.1">
} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.832.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.833.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.834.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.835.1">import</span></span><span class="koboSpan" id="kobo.836.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.837.1">Product</span></span><span class="koboSpan" id="kobo.838.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.839.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.840.1">'../product'</span></span><span class="koboSpan" id="kobo.841.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.842.1">import { Observable } from 'rxjs';</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.843.1">import { ProductsService } from '../products.service';</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.844.1">
      Add the
     </span>
     <a id="_idIndexMarker477">
     </a>
     <span class="koboSpan" id="kobo.845.1">
      following property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.846.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.847.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.848.1">id = input&lt;number&gt;();
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.849.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.850.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.851.1">
     component property will be used to pass the ID of the selected product from the list.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.852.1">
      Replace the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.853.1">
       product
      </span>
     </code>
     <span class="koboSpan" id="kobo.854.1">
      input property with the following observable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.855.1">product$</span></span><span class="koboSpan" id="kobo.856.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.857.1">Observable</span></span><span class="koboSpan" id="kobo.858.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.859.1">Product</span></span><span class="koboSpan" id="kobo.860.1">&gt; | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.861.1">undefined</span></span><span class="koboSpan" id="kobo.862.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.863.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.864.1">
      product$
     </span>
    </code>
    <span class="koboSpan" id="kobo.865.1">
     property will be used to call the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.866.1">
      getProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.867.1">
     method from the service.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.868.1">
      Add a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.869.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.870.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.871.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.872.1">
      class and inject
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.873.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.874.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.875.1">constructor</span></span><span class="koboSpan" id="kobo.876.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.877.1">private productService: ProductsService</span></span><span class="koboSpan" id="kobo.878.1">) { }
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.879.1">
      Add
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.880.1">
       OnChanges
      </span>
     </code>
     <span class="koboSpan" id="kobo.881.1">
      in the list of implemented interfaces:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.882.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.883.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.884.1">ProductDetailComponent</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.885.1">implements OnChanges</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.886.1">
      Implement the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.887.1">
       ngOnChanges
      </span>
     </code>
     <span class="koboSpan" id="kobo.888.1">
      method as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.889.1">ngOnChanges</span></span><span class="koboSpan" id="kobo.890.1">(): </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.891.1">void</span></span><span class="koboSpan" id="kobo.892.1"> {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.893.1">this</span></span><span class="koboSpan" id="kobo.894.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.895.1">product$</span></span><span class="koboSpan" id="kobo.896.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.897.1">this</span></span><span class="koboSpan" id="kobo.898.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.899.1">productService</span></span><span class="koboSpan" id="kobo.900.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.901.1">getProduct</span></span><span class="koboSpan" id="kobo.902.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.903.1">this</span></span><span class="koboSpan" id="kobo.904.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.905.1">id</span></span><span class="koboSpan" id="kobo.906.1">()!);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.907.1">
     In the preceding method, we assign the value of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.908.1">
      getProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.909.1">
     method from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.910.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.911.1">
     to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.912.1">
      product$
     </span>
    </code>
    <span class="koboSpan" id="kobo.913.1">
     component property every time a new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.914.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.915.1">
     is passed using the input binding.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="8">
     <span class="koboSpan" id="kobo.916.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.917.1">
       product-detail.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.918.1">
      file and modify its content so that it
     </span>
     <a id="_idIndexMarker478">
     </a>
     <span class="koboSpan" id="kobo.919.1">
      uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.920.1">
       product$
      </span>
     </code>
     <span class="koboSpan" id="kobo.921.1">
      observable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.922.1">@let product = (product$ | async);</span></strong></span><span class="koboSpan" id="kobo.923.1">
@</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.924.1">if</span></span><span class="koboSpan" id="kobo.925.1"> (</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.926.1">product</span></strong></span><span class="koboSpan" id="kobo.927.1">) {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.928.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.929.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.930.1">&gt;</span></span><span class="koboSpan" id="kobo.931.1">You selected:
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.932.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.933.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.934.1">&gt;</span></span><span class="koboSpan" id="kobo.935.1">{{</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.936.1">product</span></strong></span><span class="koboSpan" id="kobo.937.1">.title}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.938.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.939.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.940.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.941.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.942.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.943.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.944.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.945.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.946.1">&gt;</span></span><span class="koboSpan" id="kobo.947.1">{{</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.948.1">product</span></strong></span><span class="koboSpan" id="kobo.949.1">.price | currency:'EUR'}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.950.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.951.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.952.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.953.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.954.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.955.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.956.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.957.1">"pill-group"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.958.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.959.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.960.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.961.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.962.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.963.1">"pill"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.964.1">&gt;</span></span><span class="koboSpan" id="kobo.965.1">{{ </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.966.1">product</span></strong></span><span class="koboSpan" id="kobo.967.1">.category }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.968.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.969.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.970.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.971.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.972.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.973.1">&gt;</span></span>  
  <span class="hljs-tag"><span class="koboSpan" id="kobo.974.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.975.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.976.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.977.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.978.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.979.1">"addToCart()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.980.1">&gt;</span></span><span class="koboSpan" id="kobo.981.1">Add to cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.982.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.983.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.984.1">&gt;</span></span><span class="koboSpan" id="kobo.985.1">
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.986.1">
      Finally, open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.987.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.988.1">
      file and bind the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.989.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.990.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.991.1">
       selectedProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.992.1">
      property to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.993.1">
       id
      </span>
     </code>
     <span class="koboSpan" id="kobo.994.1">
      input binding of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.995.1">
       &lt;app-product-detail&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.996.1">
      component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.997.1">&lt;app-product-detail
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.998.1">[id]="selectedProduct?.id"</span></strong></span><span class="koboSpan" id="kobo.999.1">
  (added)=</span><span class="hljs-string"><span class="koboSpan" id="kobo.1000.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1001.1">onAdded()"</span></span><span class="koboSpan" id="kobo.1002.1">
&gt;&lt;/app-product-detail&gt;
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1003.1">
     If we run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1004.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.1005.1">
     command and select a product from the list, we will verify that the product detail is displayed correctly.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1006.1">
     We have learned how to get a list of items and a single item from a backend API and covered the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1007.1">
      Read
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1008.1">
     part of a CRUD operation.
    </span>
    <span class="koboSpan" id="kobo.1008.2">
     In the following section, we cover the remaining parts of a CRUD operation, which are mainly concerned with modifying data.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-152">
    <span class="koboSpan" id="kobo.1009.1">
     Modifying data through HTTP
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1010.1">
     Modifying data in a CRUD application usually refers to adding new data and updating or deleting
    </span>
    <a id="_idIndexMarker479">
    </a>
    <span class="koboSpan" id="kobo.1011.1">
     existing data.
    </span>
    <span class="koboSpan" id="kobo.1011.2">
     To demonstrate how to implement such functionality in an Angular application using the HTTP client, we will make the following changes to our application:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1012.1">
      Create an Angular component to add new products
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1013.1">
      Modify the product detail component to change the price of an existing product
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1014.1">
      Add a button in the product detail component to delete an existing product
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1015.1">
     We have already mentioned that no HTTP operations persist data physically in the Fake Store API, so we need to implement a local cache mechanism for our product data and interact with it directly in the products service:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1016.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1017.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1018.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1019.1">
       map
      </span>
     </code>
     <span class="koboSpan" id="kobo.1020.1">
      RxJS operator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1021.1">import</span></span><span class="koboSpan" id="kobo.1022.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1023.1">Observable</span></span><span class="koboSpan" id="kobo.1024.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1025.1">map</span></strong></span><span class="koboSpan" id="kobo.1026.1">, </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1027.1">of</span></span><span class="koboSpan" id="kobo.1028.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1029.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1030.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1031.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1032.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1033.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1034.1">
      method as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1035.1">getProducts</span></span><span class="koboSpan" id="kobo.1036.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1037.1">Observable</span></span><span class="koboSpan" id="kobo.1038.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1039.1">Product</span></span><span class="koboSpan" id="kobo.1040.1">[]&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1041.1">const</span></span><span class="koboSpan" id="kobo.1042.1"> options = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1043.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1044.1">HttpParams</span></span><span class="koboSpan" id="kobo.1045.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1046.1">set</span></span><span class="koboSpan" id="kobo.1047.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1048.1">'limit'</span></span><span class="koboSpan" id="kobo.1049.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1050.1">10</span></span><span class="koboSpan" id="kobo.1051.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1052.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1053.1">this</span></span><span class="koboSpan" id="kobo.1054.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1055.1">http</span></span><span class="koboSpan" id="kobo.1056.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1057.1">get</span></span><span class="koboSpan" id="kobo.1058.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1059.1">Product</span></span><span class="koboSpan" id="kobo.1060.1">[]&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1061.1">this</span></span><span class="koboSpan" id="kobo.1062.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1063.1">productsUrl</span></span><span class="koboSpan" id="kobo.1064.1">, {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1065.1">params</span></span><span class="koboSpan" id="kobo.1066.1">: options
  })</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1067.1">.pipe(map(products =&gt; {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1068.1">this.products = products;</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1069.1">return products;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1070.1">}));</span></strong></span><span class="koboSpan" id="kobo.1071.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1072.1">
     The preceding method fills the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1073.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.1074.1">
     array with data from the API and returns product data as an observable.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.1075.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1076.1">
       getProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.1077.1">
      method so that it uses the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1078.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.1079.1">
      array to return a product object instead of the Fake Store API:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1080.1">getProduct</span></span><span class="koboSpan" id="kobo.1081.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1082.1">id</span></span><span class="koboSpan" id="kobo.1083.1">: number): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1084.1">Observable</span></span><span class="koboSpan" id="kobo.1085.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1086.1">Product</span></span><span class="koboSpan" id="kobo.1087.1">&gt; {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1088.1">const product = this.products.find(p =&gt; p.id === id);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1089.1">return of(product!);</span></strong></span><span class="koboSpan" id="kobo.1090.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1091.1">
     We now have our products service in place and can start building the component for adding new products.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-153">
    <span class="koboSpan" id="kobo.1092.1">
     Adding new products
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1093.1">
     To add
    </span>
    <a id="_idIndexMarker480">
    </a>
    <span class="koboSpan" id="kobo.1094.1">
     a new product through our application, we need to send its details to the Fake Store API:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1095.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1096.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1097.1">
      file and add the following method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1098.1">addProduct</span></span><span class="koboSpan" id="kobo.1099.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1100.1">newProduct</span></span><span class="koboSpan" id="kobo.1101.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1102.1">Partial</span></span><span class="koboSpan" id="kobo.1103.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1104.1">Product</span></span><span class="koboSpan" id="kobo.1105.1">&gt;): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1106.1">Observable</span></span><span class="koboSpan" id="kobo.1107.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1108.1">Product</span></span><span class="koboSpan" id="kobo.1109.1">&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1110.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1111.1">this</span></span><span class="koboSpan" id="kobo.1112.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1113.1">http</span></span><span class="koboSpan" id="kobo.1114.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1115.1">post</span></span><span class="koboSpan" id="kobo.1116.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1117.1">Product</span></span><span class="koboSpan" id="kobo.1118.1">&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1119.1">this</span></span><span class="koboSpan" id="kobo.1120.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1121.1">productsUrl</span></span><span class="koboSpan" id="kobo.1122.1">, newProduct).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1123.1">pipe</span></span><span class="koboSpan" id="kobo.1124.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1125.1">map</span></span><span class="koboSpan" id="kobo.1126.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1127.1">product</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1128.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1129.1"> {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1130.1">this</span></span><span class="koboSpan" id="kobo.1131.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1132.1">products</span></span><span class="koboSpan" id="kobo.1133.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1134.1">push</span></span><span class="koboSpan" id="kobo.1135.1">(product);
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1136.1">return</span></span><span class="koboSpan" id="kobo.1137.1"> product;
    })
  );
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1138.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1139.1">
      post
     </span>
    </code>
    <span class="koboSpan" id="kobo.1140.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1141.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.1142.1">
     class and pass the products endpoint of the API along with a new product object as parameters.
    </span>
   </p>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1143.1">
      We define the new product as
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1144.1">
       Partial
      </span>
     </code>
     <span class="koboSpan" id="kobo.1145.1">
      because new products do not have an ID.
     </span>
    </p>
   </div>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1146.1">
     The generic type defined in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1147.1">
      post
     </span>
    </code>
    <span class="koboSpan" id="kobo.1148.1">
     method indicates that the returned product from the API is a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1149.1">
      Product
     </span>
    </code>
    <span class="koboSpan" id="kobo.1150.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.1150.2">
     We also add the new product into the local cache and return it.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.1151.1">
      Run the following Angular CLI command to create a new component:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1152.1">ng generate component product-create
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1153.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1154.1">
       product-create.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1155.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1156.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1157.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1158.1">import</span></span><span class="koboSpan" id="kobo.1159.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1160.1">ProductsService</span></span><span class="koboSpan" id="kobo.1161.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1162.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1163.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1164.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1165.1">
      Create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1166.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.1167.1">
      and inject the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1168.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1169.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1170.1">constructor</span></span><span class="koboSpan" id="kobo.1171.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1172.1">private productsService: ProductsService</span></span><span class="koboSpan" id="kobo.1173.1">) {}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1174.1">
      Add the following method to the component class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1175.1">createProduct</span></span><span class="koboSpan" id="kobo.1176.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1177.1">title: string, price: string, category: string</span></span><span class="koboSpan" id="kobo.1178.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1179.1">this</span></span><span class="koboSpan" id="kobo.1180.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1181.1">productsService</span></span><span class="koboSpan" id="kobo.1182.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1183.1">addProduct</span></span><span class="koboSpan" id="kobo.1184.1">({
    title,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1185.1">price</span></span><span class="koboSpan" id="kobo.1186.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1187.1">Number</span></span><span class="koboSpan" id="kobo.1188.1">(price),
    category
  }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1189.1">subscribe</span></span><span class="koboSpan" id="kobo.1190.1">();
}
</span></code></pre>
    </li>
   </ol>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1191.1">
      We do not need to unsubscribe when interacting with the Angular HTTP client because the framework will do it automatically for us.
     </span>
    </p>
   </div>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1192.1">
     The
    </span>
    <a id="_idIndexMarker481">
    </a>
    <span class="koboSpan" id="kobo.1193.1">
     preceding method accepts the product details as parameters and calls the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1194.1">
      addProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.1195.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1196.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1197.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.1197.2">
     We use the native
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1198.1">
      Number
     </span>
    </code>
    <span class="koboSpan" id="kobo.1199.1">
     function to convert the price value to a number because it will be passed as a string from the template.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.1200.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1201.1">
       product-create.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1202.1">
      file and replace its content with the following HTML template:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1203.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1204.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1205.1">&gt;</span></span><span class="koboSpan" id="kobo.1206.1">Add new product</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1207.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1208.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1209.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1210.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1211.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1212.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1213.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1214.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1215.1">for</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1216.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1217.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1218.1">&gt;</span></span><span class="koboSpan" id="kobo.1219.1">Title</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1220.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1221.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1222.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1223.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1224.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1225.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1226.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1227.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1228.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1229.1">title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1230.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1231.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1232.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1233.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1234.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1235.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1236.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1237.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1238.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1239.1">for</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1240.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1241.1">"price"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1242.1">&gt;</span></span><span class="koboSpan" id="kobo.1243.1">Price</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1244.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1245.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1246.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1247.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1248.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1249.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1250.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1251.1">"price"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1252.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1253.1">price</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1254.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1255.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1256.1">"number"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1257.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1258.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1259.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1260.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1261.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1262.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1263.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1264.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1265.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1266.1">for</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1267.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1268.1">"category"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1269.1">&gt;</span></span><span class="koboSpan" id="kobo.1270.1">Category</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1271.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1272.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1273.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1274.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1275.1">select</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1276.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1277.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1278.1">"category"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1279.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1280.1">category</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1281.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1282.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1283.1">option</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1284.1">&gt;</span></span><span class="koboSpan" id="kobo.1285.1">Select a category</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1286.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1287.1">option</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1288.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1289.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1290.1">option</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1291.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1292.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1293.1">"electronics"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1294.1">&gt;</span></span><span class="koboSpan" id="kobo.1295.1">Electronics</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1296.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1297.1">option</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1298.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1299.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1300.1">option</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1301.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1302.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1303.1">"jewelery"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1304.1">&gt;</span></span><span class="koboSpan" id="kobo.1305.1">Jewelery</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1306.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1307.1">option</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1308.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1309.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1310.1">option</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1311.1">&gt;</span></span><span class="koboSpan" id="kobo.1312.1">Other</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1313.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1314.1">option</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1315.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1316.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1317.1">select</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1318.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1319.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1320.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1321.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1322.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1323.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1324.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1325.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1326.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1327.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1328.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1329.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1330.1">"createProduct(title.value, price.value, category.value)"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1331.1">&gt;</span></span><span class="koboSpan" id="kobo.1332.1">Create</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1333.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1334.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1335.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1336.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1337.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1338.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1339.1">
     In the preceding template, we bind the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1340.1">
      createProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.1341.1">
     method to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1342.1">
      click
     </span>
    </code>
    <span class="koboSpan" id="kobo.1343.1">
     event of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1344.1">
      Create
     </span>
    </code>
    <span class="koboSpan" id="kobo.1345.1">
     button and pass the value of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1346.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1347.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1348.1">
      &lt;select&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1349.1">
     HTML elements using the respective template reference variables.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="7">
     <span class="koboSpan" id="kobo.1350.1">
      Open
     </span>
     <a id="_idIndexMarker482">
     </a>
     <span class="koboSpan" id="kobo.1351.1">
      the global
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1352.1">
       styles.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1353.1">
      file and add the following CSS style:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.1354.1">input</span></span><span class="koboSpan" id="kobo.1355.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1356.1">border-radius</span></span><span class="koboSpan" id="kobo.1357.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1358.1">4px</span></span><span class="koboSpan" id="kobo.1359.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1360.1">padding</span></span><span class="koboSpan" id="kobo.1361.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1362.1">8px</span></span><span class="koboSpan" id="kobo.1363.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1364.1">margin-bottom</span></span><span class="koboSpan" id="kobo.1365.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1366.1">16px</span></span><span class="koboSpan" id="kobo.1367.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1368.1">border</span></span><span class="koboSpan" id="kobo.1369.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1370.1">1px</span></span><span class="koboSpan" id="kobo.1371.1"> solid </span><span class="hljs-number"><span class="koboSpan" id="kobo.1372.1">#BDBDBD</span></span><span class="koboSpan" id="kobo.1373.1">;
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1374.1">
     Also, move the button-related styles from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1375.1">
      product-detail.component.css
     </span>
    </code>
    <span class="koboSpan" id="kobo.1376.1">
     file in the global CSS styles file.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="8">
     <span class="koboSpan" id="kobo.1377.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1378.1">
       product-create.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1379.1">
      file and add the following CSS styles to give a nice look and feel to our new component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.1380.1">input</span></span><span class="koboSpan" id="kobo.1381.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1382.1">width</span></span><span class="koboSpan" id="kobo.1383.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1384.1">200px</span></span><span class="koboSpan" id="kobo.1385.1">;
}
select {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1386.1">border-radius</span></span><span class="koboSpan" id="kobo.1387.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1388.1">4px</span></span><span class="koboSpan" id="kobo.1389.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1390.1">padding</span></span><span class="koboSpan" id="kobo.1391.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1392.1">8px</span></span><span class="koboSpan" id="kobo.1393.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1394.1">margin-bottom</span></span><span class="koboSpan" id="kobo.1395.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1396.1">16px</span></span><span class="koboSpan" id="kobo.1397.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1398.1">border</span></span><span class="koboSpan" id="kobo.1399.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1400.1">1px</span></span><span class="koboSpan" id="kobo.1401.1"> solid </span><span class="hljs-number"><span class="koboSpan" id="kobo.1402.1">#BDBDBD</span></span><span class="koboSpan" id="kobo.1403.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1404.1">width</span></span><span class="koboSpan" id="kobo.1405.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1406.1">220px</span></span><span class="koboSpan" id="kobo.1407.1">;
}
 
</span><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.1408.1">label</span></span><span class="koboSpan" id="kobo.1409.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1410.1">margin-bottom</span></span><span class="koboSpan" id="kobo.1411.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1412.1">4px</span></span><span class="koboSpan" id="kobo.1413.1">;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1414.1">display</span></span><span class="koboSpan" id="kobo.1415.1">: block;
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1416.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1417.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1418.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1419.1">
       ProductCreateComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1420.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1421.1">import</span></span><span class="koboSpan" id="kobo.1422.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1423.1">AsyncPipe</span></span><span class="koboSpan" id="kobo.1424.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1425.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1426.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.1427.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1428.1">import</span></span><span class="koboSpan" id="kobo.1429.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1430.1">Component</span></span><span class="koboSpan" id="kobo.1431.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1432.1">OnInit</span></span><span class="koboSpan" id="kobo.1433.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1434.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1435.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1436.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1437.1">import</span></span><span class="koboSpan" id="kobo.1438.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1439.1">Observable</span></span><span class="koboSpan" id="kobo.1440.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1441.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1442.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1443.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1444.1">import</span></span><span class="koboSpan" id="kobo.1445.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1446.1">Product</span></span><span class="koboSpan" id="kobo.1447.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1448.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1449.1">'../product'</span></span><span class="koboSpan" id="kobo.1450.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1451.1">import</span></span><span class="koboSpan" id="kobo.1452.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1453.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1454.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1455.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1456.1">'../product-detail/product-detail.component'</span></span><span class="koboSpan" id="kobo.1457.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1458.1">import</span></span><span class="koboSpan" id="kobo.1459.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1460.1">SortPipe</span></span><span class="koboSpan" id="kobo.1461.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1462.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1463.1">'../sort.pipe'</span></span><span class="koboSpan" id="kobo.1464.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1465.1">import</span></span><span class="koboSpan" id="kobo.1466.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1467.1">ProductsService</span></span><span class="koboSpan" id="kobo.1468.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1469.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1470.1">'../products.service'</span></span><span class="koboSpan" id="kobo.1471.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1472.1">import { ProductCreateComponent } from '../product-create/product-create.component';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.1473.1">@Component</span></span><span class="koboSpan" id="kobo.1474.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1475.1">selector</span></span><span class="koboSpan" id="kobo.1476.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1477.1">'app-product-list'</span></span><span class="koboSpan" id="kobo.1478.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1479.1">imports</span></span><span class="koboSpan" id="kobo.1480.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1481.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1482.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1483.1">SortPipe</span></span><span class="koboSpan" id="kobo.1484.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1485.1">AsyncPipe</span></span><span class="koboSpan" id="kobo.1486.1">,
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1487.1">ProductCreateComponent</span></strong></span><span class="koboSpan" id="kobo.1488.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1489.1">templateUrl</span></span><span class="koboSpan" id="kobo.1490.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1491.1">'./product-list.component.html'</span></span><span class="koboSpan" id="kobo.1492.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1493.1">styleUrl</span></span><span class="koboSpan" id="kobo.1494.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1495.1">'./product-list.component.css'</span></span><span class="koboSpan" id="kobo.1496.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1497.1">
      Finally, open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1498.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1499.1">
      file and add the following snippet
     </span>
     <a id="_idIndexMarker483">
     </a>
     <span class="koboSpan" id="kobo.1500.1">
      at the end of the template:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1501.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1502.1">app-product-create</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1503.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1504.1">app-product-create</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1505.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1506.1">
     If we now run our Angular application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1507.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.1508.1">
     command, we should see the component for adding new products at the end of the page:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1509.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, αριθμός  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1510.1">
     Figure 8.5: Create a product
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1511.1">
     To experiment, try
    </span>
    <a id="_idIndexMarker484">
    </a>
    <span class="koboSpan" id="kobo.1512.1">
     to add a new product by filling in its details, clicking on the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.1513.1">
      Create
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1514.1">
     button, and verifying that the new product has been added to the list.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1515.1">
     The next feature we will add to our application is to modify data by changing the price of an existing product.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-154">
    <span class="koboSpan" id="kobo.1516.1">
     Updating product price
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1517.1">
     The price
    </span>
    <a id="_idIndexMarker485">
    </a>
    <span class="koboSpan" id="kobo.1518.1">
     of a product in an e-commerce application may need to change at some point.
    </span>
    <span class="koboSpan" id="kobo.1518.2">
     We need to provide a way for our users to update that price through our application:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1519.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1520.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1521.1">
      file and add a new method for updating a product:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1522.1">updateProduct</span></span><span class="koboSpan" id="kobo.1523.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1524.1">id</span></span><span class="koboSpan" id="kobo.1525.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1526.1">number</span></span><span class="koboSpan" id="kobo.1527.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1528.1">price</span></span><span class="koboSpan" id="kobo.1529.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1530.1">number</span></span><span class="koboSpan" id="kobo.1531.1">): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1532.1">Observable</span></span><span class="koboSpan" id="kobo.1533.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1534.1">Product</span></span><span class="koboSpan" id="kobo.1535.1">&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1536.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1537.1">this</span></span><span class="koboSpan" id="kobo.1538.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1539.1">http</span></span><span class="koboSpan" id="kobo.1540.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1541.1">patch</span></span><span class="koboSpan" id="kobo.1542.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1543.1">Product</span></span><span class="koboSpan" id="kobo.1544.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1545.1">`</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1546.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.1547.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1548.1">.productsUrl}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1549.1">/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1550.1">${id}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1551.1">`</span></span><span class="koboSpan" id="kobo.1552.1">, {
    price
  }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1553.1">pipe</span></span><span class="koboSpan" id="kobo.1554.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1555.1">map</span></span><span class="koboSpan" id="kobo.1556.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1557.1">product</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1558.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1559.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1560.1">const</span></span><span class="koboSpan" id="kobo.1561.1"> index = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1562.1">this</span></span><span class="koboSpan" id="kobo.1563.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1564.1">products</span></span><span class="koboSpan" id="kobo.1565.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1566.1">findIndex</span></span><span class="koboSpan" id="kobo.1567.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1568.1">p</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1569.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1570.1"> p.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1571.1">id</span></span><span class="koboSpan" id="kobo.1572.1"> === id);
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1573.1">this</span></span><span class="koboSpan" id="kobo.1574.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1575.1">products</span></span><span class="koboSpan" id="kobo.1576.1">[index].</span><span class="hljs-property"><span class="koboSpan" id="kobo.1577.1">price</span></span><span class="koboSpan" id="kobo.1578.1"> = price;
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1579.1">return</span></span><span class="koboSpan" id="kobo.1580.1"> product;
    })
  );
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1581.1">
     In the preceding method, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1582.1">
      patch
     </span>
    </code>
    <span class="koboSpan" id="kobo.1583.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1584.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.1585.1">
     class to send the details of the product that we want to modify to the API.
    </span>
    <span class="koboSpan" id="kobo.1585.2">
     We also update the price of the selected product in the local cache of products and return it.
    </span>
   </p>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.1586.1">
      Alternatively, we could have used the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1587.1">
       put
      </span>
     </code>
     <span class="koboSpan" id="kobo.1588.1">
      method of the HTTP client.
     </span>
     <span class="koboSpan" id="kobo.1588.2">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1589.1">
       patch
      </span>
     </code>
     <span class="koboSpan" id="kobo.1590.1">
      method should be used when we want to update only a subset of an object, whereas the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1591.1">
       put
      </span>
     </code>
     <span class="koboSpan" id="kobo.1592.1">
      method interacts with all object properties.
     </span>
     <span class="koboSpan" id="kobo.1592.2">
      In this case, we do not want to update the product title, so we use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1593.1">
       patch
      </span>
     </code>
     <span class="koboSpan" id="kobo.1594.1">
      method.
     </span>
     <span class="koboSpan" id="kobo.1594.2">
      Both methods accept the API endpoint and the object we want to update as parameters.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.1595.1">
      Add the following method to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1596.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1597.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1598.1">changePrice</span></span><span class="koboSpan" id="kobo.1599.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1600.1">product</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1601.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1602.1">Product</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1603.1">, </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1604.1">price</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1605.1">: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1606.1">string</span></span><span class="koboSpan" id="kobo.1607.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1608.1">this</span></span><span class="koboSpan" id="kobo.1609.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1610.1">productService</span></span><span class="koboSpan" id="kobo.1611.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1612.1">updateProduct</span></span><span class="koboSpan" id="kobo.1613.1">(product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1614.1">id</span></span><span class="koboSpan" id="kobo.1615.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1616.1">Number</span></span><span class="koboSpan" id="kobo.1617.1">(price)).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1618.1">subscribe</span></span><span class="koboSpan" id="kobo.1619.1">();
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1620.1">
     The preceding method accepts an existing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1621.1">
      product
     </span>
    </code>
    <span class="koboSpan" id="kobo.1622.1">
     and its new
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1623.1">
      price
     </span>
    </code>
    <span class="koboSpan" id="kobo.1624.1">
     as parameters and calls the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1625.1">
      updateProduct
     </span>
    </code>
    <span class="koboSpan" id="kobo.1626.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1627.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1628.1">
     class.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.1629.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1630.1">
       product-detail.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1631.1">
      file and add an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1632.1">
       &lt;input&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1633.1">
      and a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1634.1">
       &lt;button&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1635.1">
      element after the paragraph element of the price:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1636.1">@let</span></span><span class="koboSpan" id="kobo.1637.1"> product = (product$ | </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1638.1">async</span></span><span class="koboSpan" id="kobo.1639.1">);
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1640.1">@if</span></span><span class="koboSpan" id="kobo.1641.1"> (product) {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1642.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1643.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1644.1">&gt;</span></span><span class="koboSpan" id="kobo.1645.1">You selected:
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1646.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1647.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1648.1">&gt;</span></span><span class="koboSpan" id="kobo.1649.1">{{product.title}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1650.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1651.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1652.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1653.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1654.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1655.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1656.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1657.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1658.1">&gt;</span></span><span class="koboSpan" id="kobo.1659.1">{{product.price | currency:'EUR'}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1660.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1661.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1662.1">&gt;</span></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1663.1">&lt;input placeholder="New price" #price type="number" /&gt;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1664.1">&lt;button</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1665.1">class="secondary"</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1666.1">(click)="changePrice(product, price.value)"&gt;</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1667.1">Change</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1668.1">&lt;/button&gt;</span></strong></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1669.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1670.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1671.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1672.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1673.1">"pill-group"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1674.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1675.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1676.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1677.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1678.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1679.1">"pill"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1680.1">&gt;</span></span><span class="koboSpan" id="kobo.1681.1">{{ product.category }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1682.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1683.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1684.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1685.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1686.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1687.1">&gt;</span></span>  
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1688.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1689.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1690.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1691.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1692.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1693.1">"addToCart()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1694.1">&gt;</span></span><span class="koboSpan" id="kobo.1695.1">Add to cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1696.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1697.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1698.1">&gt;</span></span><span class="koboSpan" id="kobo.1699.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1700.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1701.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1702.1">
     element is used to enter the new price of the product and defines
    </span>
    <a id="_idIndexMarker486">
    </a>
    <span class="koboSpan" id="kobo.1703.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1704.1">
      price
     </span>
    </code>
    <span class="koboSpan" id="kobo.1705.1">
     template reference variable.
    </span>
    <span class="koboSpan" id="kobo.1705.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1706.1">
      click
     </span>
    </code>
    <span class="koboSpan" id="kobo.1707.1">
     event of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1708.1">
      &lt;button&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1709.1">
     element is bound to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1710.1">
      changePrice
     </span>
    </code>
    <span class="koboSpan" id="kobo.1711.1">
     method that passes the current
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1712.1">
      product
     </span>
    </code>
    <span class="koboSpan" id="kobo.1713.1">
     object and the value of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1714.1">
      price
     </span>
    </code>
    <span class="koboSpan" id="kobo.1715.1">
     variable.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.1716.1">
      Finally, open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1717.1">
       product-detail.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1718.1">
      file and add the following CSS styles:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.1719.1">button</span></span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.1720.1">.secondary</span></span><span class="koboSpan" id="kobo.1721.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1722.1">display</span></span><span class="koboSpan" id="kobo.1723.1">: inline;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1724.1">margin-left</span></span><span class="koboSpan" id="kobo.1725.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1726.1">5px</span></span><span class="koboSpan" id="kobo.1727.1">;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1728.1">--button-accent</span></span><span class="koboSpan" id="kobo.1729.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1730.1">var</span></span><span class="koboSpan" id="kobo.1731.1">(--vivid-pink);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1732.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1733.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.1734.1">
      command to start the Angular application and select a product from the list.
     </span>
     <span class="koboSpan" id="kobo.1734.2">
      The product details should look like the following:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1735.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1736.1">
     Figure 8.6: Product details
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.1737.1">
      Enter a
     </span>
     <a id="_idIndexMarker487">
     </a>
     <span class="koboSpan" id="kobo.1738.1">
      price in the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1739.1">
       New price
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1740.1">
      input box and click the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.1741.1">
       Change
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1742.1">
      button.
     </span>
     <span class="koboSpan" id="kobo.1742.2">
      The existing price should be updated to reflect the change, for example:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1743.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1744.1">
     Figure 8.7: Product details with changed price
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1745.1">
     We can
    </span>
    <a id="_idIndexMarker488">
    </a>
    <span class="koboSpan" id="kobo.1746.1">
     now modify a product by changing its price.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1747.1">
      Remember that changes in products that come from the Fake Store API are not physically persisted.
     </span>
     <span class="koboSpan" id="kobo.1747.2">
      If you change the price and refresh the browser, it will restore the initial price.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1748.1">
     The next and final step of our CRUD application will be to delete an existing product.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-155">
    <span class="koboSpan" id="kobo.1749.1">
     Removing a product
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1750.1">
     Deleting a product from an e-shop application is not very common.
    </span>
    <span class="koboSpan" id="kobo.1750.2">
     However, we need to
    </span>
    <a id="_idIndexMarker489">
    </a>
    <span class="koboSpan" id="kobo.1751.1">
     provide functionality for it in case users enter incorrect or invalid data and want to delete it afterward.
    </span>
    <span class="koboSpan" id="kobo.1751.2">
     In our application, deleting an existing product will be done with the product details component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1752.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1753.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1754.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1755.1">
       tap
      </span>
     </code>
     <span class="koboSpan" id="kobo.1756.1">
      operator from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1757.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.1758.1">
      package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1759.1">import</span></span><span class="koboSpan" id="kobo.1760.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1761.1">Observable</span></span><span class="koboSpan" id="kobo.1762.1">, map, </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1763.1">of</span></span><span class="koboSpan" id="kobo.1764.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1765.1">tap</span></strong></span><span class="koboSpan" id="kobo.1766.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1767.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1768.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1769.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1770.1">
      Add the following method to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1771.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1772.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1773.1">deleteProduct</span></span><span class="koboSpan" id="kobo.1774.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1775.1">id</span></span><span class="koboSpan" id="kobo.1776.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1777.1">number</span></span><span class="koboSpan" id="kobo.1778.1">): </span><span class="hljs-title"><span class="koboSpan" id="kobo.1779.1">Observable</span></span><span class="koboSpan" id="kobo.1780.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1781.1">void</span></span><span class="koboSpan" id="kobo.1782.1">&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1783.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1784.1">this</span></span><span class="koboSpan" id="kobo.1785.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1786.1">http</span></span><span class="koboSpan" id="kobo.1787.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1788.1">delete</span></span><span class="koboSpan" id="kobo.1789.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1790.1">void</span></span><span class="koboSpan" id="kobo.1791.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1792.1">`</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1793.1">${</span></span><span class="hljs-variable"><span class="koboSpan" id="kobo.1794.1">this</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1795.1">.productsUrl}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1796.1">/</span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1797.1">${id}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1798.1">`</span></span><span class="koboSpan" id="kobo.1799.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1800.1">pipe</span></span><span class="koboSpan" id="kobo.1801.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1802.1">tap</span></span><span class="koboSpan" id="kobo.1803.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1804.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1805.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1806.1">const</span></span><span class="koboSpan" id="kobo.1807.1"> index = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1808.1">this</span></span><span class="koboSpan" id="kobo.1809.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1810.1">products</span></span><span class="koboSpan" id="kobo.1811.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1812.1">findIndex</span></span><span class="koboSpan" id="kobo.1813.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1814.1">p</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1815.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1816.1"> p.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1817.1">id</span></span><span class="koboSpan" id="kobo.1818.1"> === id);
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1819.1">this</span></span><span class="koboSpan" id="kobo.1820.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1821.1">products</span></span><span class="koboSpan" id="kobo.1822.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1823.1">splice</span></span><span class="koboSpan" id="kobo.1824.1">(index, </span><span class="hljs-number"><span class="koboSpan" id="kobo.1825.1">1</span></span><span class="koboSpan" id="kobo.1826.1">);
    })
  );
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1827.1">
     In the preceding method, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1828.1">
      delete
     </span>
    </code>
    <span class="koboSpan" id="kobo.1829.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1830.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.1831.1">
     class, passing the products endpoint and the product
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1832.1">
      id
     </span>
    </code>
    <span class="koboSpan" id="kobo.1833.1">
     we want to delete in the API.
    </span>
    <span class="koboSpan" id="kobo.1833.2">
     We are also using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1834.1">
      splice
     </span>
    </code>
    <span class="koboSpan" id="kobo.1835.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1836.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.1837.1">
     array to remove the product from the local cache.
    </span>
   </p>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1838.1">
     The return type of the method is set to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1839.1">
      Observable&lt;void&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1840.1">
     because we are not currently interested in the result of the HTTP request.
    </span>
    <span class="koboSpan" id="kobo.1840.2">
     We only need to know if it was successful or not.
    </span>
    <span class="koboSpan" id="kobo.1840.3">
     We also use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1841.1">
      tap
     </span>
    </code>
    <span class="koboSpan" id="kobo.1842.1">
     RxJS operator because we are not altering the returned value from the observable.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.1843.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1844.1">
       product-detail.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1845.1">
      file and create a new output property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1846.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1847.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1848.1">deleted = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1849.1">output</span></span><span class="koboSpan" id="kobo.1850.1">();
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1851.1">
     The preceding property will notify the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1852.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1853.1">
     that the selected product has been deleted.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.1854.1">
      Create
     </span>
     <a id="_idIndexMarker490">
     </a>
     <span class="koboSpan" id="kobo.1855.1">
      the following method, which calls the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1856.1">
       deleteProduct
      </span>
     </code>
     <span class="koboSpan" id="kobo.1857.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1858.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1859.1">
      class and triggers the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1860.1">
       deleted
      </span>
     </code>
     <span class="koboSpan" id="kobo.1861.1">
      output event:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1862.1">remove</span></span><span class="koboSpan" id="kobo.1863.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.1864.1">product</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1865.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.1866.1">Product</span></span><span class="koboSpan" id="kobo.1867.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1868.1">this</span></span><span class="koboSpan" id="kobo.1869.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1870.1">productService</span></span><span class="koboSpan" id="kobo.1871.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1872.1">deleteProduct</span></span><span class="koboSpan" id="kobo.1873.1">(product.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1874.1">id</span></span><span class="koboSpan" id="kobo.1875.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1876.1">subscribe</span></span><span class="koboSpan" id="kobo.1877.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1878.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1879.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1880.1">this</span></span><span class="koboSpan" id="kobo.1881.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1882.1">deleted</span></span><span class="koboSpan" id="kobo.1883.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1884.1">emit</span></span><span class="koboSpan" id="kobo.1885.1">();
  });
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1886.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1887.1">
       product-detail.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1888.1">
      file, create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1889.1">
       &lt;button&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1890.1">
      element, and bind its
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1891.1">
       click
      </span>
     </code>
     <span class="koboSpan" id="kobo.1892.1">
      event to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1893.1">
       emit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1894.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1895.1">
       deleted
      </span>
     </code>
     <span class="koboSpan" id="kobo.1896.1">
      output:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1897.1">@let</span></span><span class="koboSpan" id="kobo.1898.1"> product = (product$ | </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1899.1">async</span></span><span class="koboSpan" id="kobo.1900.1">);
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.1901.1">@if</span></span><span class="koboSpan" id="kobo.1902.1"> (product) {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1903.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1904.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1905.1">&gt;</span></span><span class="koboSpan" id="kobo.1906.1">You selected:
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1907.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1908.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1909.1">&gt;</span></span><span class="koboSpan" id="kobo.1910.1">{{product.title}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1911.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1912.1">strong</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1913.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1914.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1915.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1916.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1917.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1918.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1919.1">&gt;</span></span><span class="koboSpan" id="kobo.1920.1">{{product.price | currency:'EUR'}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1921.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1922.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1923.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1924.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1925.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1926.1">placeholder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1927.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1928.1">"New price"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1929.1"> #</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1930.1">price</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1931.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1932.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1933.1">"number"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1934.1"> /&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1935.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1936.1">button</span></span>
<span class="hljs-tag">    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1937.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1938.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1939.1">"secondary"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1940.1">    (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1941.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1942.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1943.1">"changePrice(product, price.value)"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1944.1">&gt;</span></span><span class="koboSpan" id="kobo.1945.1">
      Change
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1946.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1947.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1948.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1949.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1950.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1951.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1952.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1953.1">"pill-group"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1954.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.1955.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1956.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1957.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1958.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1959.1">"pill"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1960.1">&gt;</span></span><span class="koboSpan" id="kobo.1961.1">{{ product.category }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1962.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1963.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1964.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1965.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1966.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1967.1">&gt;</span></span>  
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1968.1">&lt;div class="button-group"&gt;  </span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1969.1">&lt;button (click)="addToCart()"&gt;Add to cart&lt;/button&gt;</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1970.1">&lt;button class="delete" (click)="remove(product)"&gt;Delete&lt;/button&gt;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1971.1">&lt;/div&gt;</span></strong></span><span class="koboSpan" id="kobo.1972.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1973.1">
     In the preceding snippet, we grouped the two buttons in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1974.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1975.1">
     HTML element so that they appear side by side.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.1976.1">
      Add
     </span>
     <a id="_idIndexMarker491">
     </a>
     <span class="koboSpan" id="kobo.1977.1">
      an appropriate style for the new button and the button group in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1978.1">
       product-detail.component.css
      </span>
     </code>
     <span class="koboSpan" id="kobo.1979.1">
      file:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-selector-tag"><span class="koboSpan" id="kobo.1980.1">button</span></span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.1981.1">.delete</span></span><span class="koboSpan" id="kobo.1982.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1983.1">display</span></span><span class="koboSpan" id="kobo.1984.1">: inline;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1985.1">margin-left</span></span><span class="koboSpan" id="kobo.1986.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1987.1">5px</span></span><span class="koboSpan" id="kobo.1988.1">;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1989.1">--button-accent</span></span><span class="koboSpan" id="kobo.1990.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1991.1">var</span></span><span class="koboSpan" id="kobo.1992.1">(--hot-red);
}
</span><span class="hljs-selector-class"><span class="koboSpan" id="kobo.1993.1">.button-group</span></span><span class="koboSpan" id="kobo.1994.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1995.1">display</span></span><span class="koboSpan" id="kobo.1996.1">: flex;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1997.1">flex-direction</span></span><span class="koboSpan" id="kobo.1998.1">: row;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.1999.1">align-items</span></span><span class="koboSpan" id="kobo.2000.1">: start;
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.2001.1">flex-wrap</span></span><span class="koboSpan" id="kobo.2002.1">: wrap;
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2003.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2004.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.2005.1">
      file and add a binding to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2006.1">
       deleted
      </span>
     </code>
     <span class="koboSpan" id="kobo.2007.1">
      event of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2008.1">
       &lt;app-product-detail&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2009.1">
      component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2010.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2011.1">app-product-detail</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2012.1">  [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2013.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2014.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2015.1">"selectedProduct?.id"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2016.1">  (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2017.1">added</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2018.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2019.1">"onAdded()"</span></span>
<span class="hljs-tag">  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2020.1">(deleted)="selectedProduct = undefined"</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2021.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2022.1">app-product-detail</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2023.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2024.1">
     If we run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2025.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.2026.1">
     command and select a product from the list, we should see something like the following:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2027.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_08.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2028.1">
     Figure 8.8: Product details
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2029.1">
     The
    </span>
    <a id="_idIndexMarker492">
    </a>
    <span class="koboSpan" id="kobo.2030.1">
     product detail component now has a
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2031.1">
      Delete
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2032.1">
     button that deletes the product and removes it from the list when it is clicked.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2033.1">
      Remember that changes in products that come from the Fake Store API are not physically persisted.
     </span>
     <span class="koboSpan" id="kobo.2033.2">
      If you delete a product and refresh the browser, the product will appear again on the list.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2034.1">
     The e-shop application we have built so far has an
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2035.1">
      Add to cart
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2036.1">
     button that we can use to add a product to a shopping cart.
    </span>
    <span class="koboSpan" id="kobo.2036.2">
     The button does not do much yet, but we will implement the full cart functionality in the following chapters.
    </span>
    <span class="koboSpan" id="kobo.2036.3">
     According to the documentation of the Fake Store API, shopping carts are only available to authenticated users, so we must ensure that the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2037.1">
      Add to cart
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2038.1">
     button will only be available to them in our application.
    </span>
   </p>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.2039.1">
      In an Angular enterprise application, the product management feature must also be protected from unauthorized users.
     </span>
     <span class="koboSpan" id="kobo.2039.2">
      In this case, we would implement a more granular authorization scheme with user roles, allowing only administrators to change and add products.
     </span>
     <span class="koboSpan" id="kobo.2039.3">
      We will not implement this feature, but we encourage you to experiment.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2040.1">
     In the following section, we will learn about authentication and authorization in Angular.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-156">
    <span class="koboSpan" id="kobo.2041.1">
     Authentication and authorization with HTTP
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2042.1">
     The Fake Store API provides an endpoint for authenticating users.
    </span>
    <span class="koboSpan" id="kobo.2042.2">
     It contains a login method
    </span>
    <a id="_idIndexMarker493">
    </a>
    <span class="koboSpan" id="kobo.2043.1">
     that accepts a username and a password
    </span>
    <a id="_idIndexMarker494">
    </a>
    <span class="koboSpan" id="kobo.2044.1">
     as parameters and returns an authentication token.
    </span>
    <span class="koboSpan" id="kobo.2044.2">
     We will use the authentication token in our application to differentiate between a logged-in user and a guest.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2045.1">
      A predefined pool from the users endpoint at
     </span>
     <a href="https://fakestoreapi.com/users">
      <span class="url">
       <span class="koboSpan" id="kobo.2046.1">
        https://fakestoreapi.com/users
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2047.1">
      provides the username and password.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2048.1">
     We will explore the following authentication and authorization topics in this section:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2049.1">
      Authenticating with a backend API
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2050.1">
      Authorizing users for certain features
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2051.1">
      Authorizing HTTP requests using interceptors
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2052.1">
     Let’s get started with the topic of authenticating with the Fake Store API.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-157">
    <span class="koboSpan" id="kobo.2053.1">
     Authenticating with a backend API
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2054.1">
     In Angular real-world applications, we usually create an Angular component, allowing users
    </span>
    <a id="_idIndexMarker495">
    </a>
    <span class="koboSpan" id="kobo.2055.1">
     to log in and out of the application.
    </span>
    <span class="koboSpan" id="kobo.2055.2">
     An Angular service will communicate with the API and handle all authentication tasks.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2056.1">
     Let’s get started by creating the authentication service:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2057.1">
      Run the following command to create a new Angular service:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2058.1">ng generate service auth
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2059.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2060.1">
       auth.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2061.1">
      file and modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2062.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2063.1">
      statements as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2064.1">import</span></span><span class="koboSpan" id="kobo.2065.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2066.1">Injectable</span></span><span class="koboSpan" id="kobo.2067.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2068.1">computed, inject, signal</span></strong></span><span class="koboSpan" id="kobo.2069.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2070.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2071.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2072.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2073.1">import { HttpClient } from '@angular/common/http';</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2074.1">import { Observable, tap } from 'rxjs';</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2075.1">import { APP_SETTINGS } from './app.settings';</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2076.1">
      Create the following properties in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2077.1">
       AuthService
      </span>
     </code>
     <span class="koboSpan" id="kobo.2078.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2079.1">private</span></span><span class="koboSpan" id="kobo.2080.1"> accessToken = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2081.1">signal</span></span><span class="koboSpan" id="kobo.2082.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2083.1">''</span></span><span class="koboSpan" id="kobo.2084.1">);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2085.1">private</span></span><span class="koboSpan" id="kobo.2086.1"> authUrl = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2087.1">inject</span></span><span class="koboSpan" id="kobo.2088.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2089.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.2090.1">).</span><span class="hljs-property"><span class="koboSpan" id="kobo.2091.1">apiUrl</span></span><span class="koboSpan" id="kobo.2092.1"> + </span><span class="hljs-string"><span class="koboSpan" id="kobo.2093.1">'/auth'</span></span><span class="koboSpan" id="kobo.2094.1">;
isLoggedIn = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2095.1">computed</span></span><span class="koboSpan" id="kobo.2096.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2097.1">() =&gt;</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2098.1">this</span></span><span class="koboSpan" id="kobo.2099.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2100.1">accessToken</span></span><span class="koboSpan" id="kobo.2101.1">() !== </span><span class="hljs-string"><span class="koboSpan" id="kobo.2102.1">''</span></span><span class="koboSpan" id="kobo.2103.1">);
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2104.1">
     In the preceding snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2105.1">
      accessToken
     </span>
    </code>
    <span class="koboSpan" id="kobo.2106.1">
     signal will store the authentication token from the API, and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2107.1">
      isLoggedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2108.1">
     signal indicates whether the user is logged in.
    </span>
    <span class="koboSpan" id="kobo.2108.2">
     The logged-in status of the user depends on whether the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2109.1">
      accessToken
     </span>
    </code>
    <span class="koboSpan" id="kobo.2110.1">
     property has a value.
    </span>
   </p>
   <div class="note-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.2111.1">
      Signals can be used not only in Angular components but also inside services.
     </span>
    </p>
   </div>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2112.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2113.1">
      authUrl
     </span>
    </code>
    <span class="koboSpan" id="kobo.2114.1">
     property points to the authentication endpoint URL of the Fake Store API.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.2115.1">
      Inject
     </span>
     <a id="_idIndexMarker496">
     </a>
     <span class="koboSpan" id="kobo.2116.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2117.1">
       HttpClient
      </span>
     </code>
     <span class="koboSpan" id="kobo.2118.1">
      class in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2119.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.2120.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2121.1">constructor</span></span><span class="koboSpan" id="kobo.2122.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2123.1">private http: HttpClient</span></strong></span><span class="koboSpan" id="kobo.2124.1">) { }
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2125.1">
      Create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2126.1">
       login
      </span>
     </code>
     <span class="koboSpan" id="kobo.2127.1">
      method to allow users to log in to the Fake Store API:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2128.1">login</span></span><span class="koboSpan" id="kobo.2129.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.2130.1">username</span></span><span class="koboSpan" id="kobo.2131.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2132.1">string</span></span><span class="koboSpan" id="kobo.2133.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2134.1">password</span></span><span class="koboSpan" id="kobo.2135.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2136.1">string</span></span><span class="koboSpan" id="kobo.2137.1">): </span><span class="hljs-title"><span class="koboSpan" id="kobo.2138.1">Observable</span></span><span class="koboSpan" id="kobo.2139.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2140.1">string</span></span><span class="koboSpan" id="kobo.2141.1">&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2142.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2143.1">this</span></span><span class="koboSpan" id="kobo.2144.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2145.1">http</span></span><span class="koboSpan" id="kobo.2146.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2147.1">post</span></span><span class="koboSpan" id="kobo.2148.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.2149.1">string</span></span><span class="koboSpan" id="kobo.2150.1">&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2151.1">this</span></span><span class="koboSpan" id="kobo.2152.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2153.1">authUrl</span></span><span class="koboSpan" id="kobo.2154.1"> + </span><span class="hljs-string"><span class="koboSpan" id="kobo.2155.1">'/login'</span></span><span class="koboSpan" id="kobo.2156.1">, {
    username, password
  }).</span><span class="hljs-title"><span class="koboSpan" id="kobo.2157.1">pipe</span></span><span class="koboSpan" id="kobo.2158.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2159.1">tap</span></span><span class="koboSpan" id="kobo.2160.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2161.1">token</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2162.1"> =&gt;</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2163.1">this</span></span><span class="koboSpan" id="kobo.2164.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2165.1">accessToken</span></span><span class="koboSpan" id="kobo.2166.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2167.1">set</span></span><span class="koboSpan" id="kobo.2168.1">(token)));
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2169.1">
     The preceding method initiates a POST request to the API, using the login endpoint and passing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2170.1">
      username
     </span>
    </code>
    <span class="koboSpan" id="kobo.2171.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2172.1">
      password
     </span>
    </code>
    <span class="koboSpan" id="kobo.2173.1">
     in the request body.
    </span>
    <span class="koboSpan" id="kobo.2173.2">
     The observable returned from the POST request is passed to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2174.1">
      tap
     </span>
    </code>
    <span class="koboSpan" id="kobo.2175.1">
     operator, which updates the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2176.1">
      accessToken
     </span>
    </code>
    <span class="koboSpan" id="kobo.2177.1">
     signal.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.2178.1">
      Create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2179.1">
       logout
      </span>
     </code>
     <span class="koboSpan" id="kobo.2180.1">
      method that resets the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2181.1">
       accessToken
      </span>
     </code>
     <span class="koboSpan" id="kobo.2182.1">
      signal:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2183.1">logout</span></span><span class="koboSpan" id="kobo.2184.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2185.1">this</span></span><span class="koboSpan" id="kobo.2186.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2187.1">accessToken</span></span><span class="koboSpan" id="kobo.2188.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2189.1">set</span></span><span class="koboSpan" id="kobo.2190.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2191.1">''</span></span><span class="koboSpan" id="kobo.2192.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2193.1">
     We have
    </span>
    <a id="_idIndexMarker497">
    </a>
    <span class="koboSpan" id="kobo.2194.1">
     already set up the business logic for authenticating users in our Angular application.
    </span>
    <span class="koboSpan" id="kobo.2194.2">
     In the following section, we will learn how to use it to control authorization in the application.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-158">
    <span class="koboSpan" id="kobo.2195.1">
     Authorizing user access
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2196.1">
     First, we will
    </span>
    <a id="_idIndexMarker498">
    </a>
    <span class="koboSpan" id="kobo.2197.1">
     create an authentication component that will allow our users to log in and out of the application:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2198.1">
      Run the following command to create a new Angular component:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2199.1">ng generate component auth
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2200.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2201.1">
       auth.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2202.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2203.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2204.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2205.1">import</span></span><span class="koboSpan" id="kobo.2206.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2207.1">AuthService</span></span><span class="koboSpan" id="kobo.2208.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2209.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2210.1">'../auth.service'</span></span><span class="koboSpan" id="kobo.2211.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2212.1">
      Inject
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2213.1">
       AuthService
      </span>
     </code>
     <span class="koboSpan" id="kobo.2214.1">
      in the component’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2215.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.2216.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2217.1">constructor</span></span><span class="koboSpan" id="kobo.2218.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2219.1">public</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2220.1">authService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2221.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.2222.1">AuthService</span></span><span class="koboSpan" id="kobo.2223.1">) {}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2224.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2225.1">
      public
     </span>
    </code>
    <span class="koboSpan" id="kobo.2226.1">
     access modifier to inject
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2227.1">
      AuthService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2228.1">
     because we want it to be accessible from the component’s template.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.2229.1">
      Create the following methods in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2230.1">
       AuthComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.2231.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2232.1">login</span></span><span class="koboSpan" id="kobo.2233.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2234.1">this</span></span><span class="koboSpan" id="kobo.2235.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2236.1">authService</span></span><span class="koboSpan" id="kobo.2237.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2238.1">login</span></span><span class="koboSpan" id="kobo.2239.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2240.1">'david_r'</span></span><span class="koboSpan" id="kobo.2241.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.2242.1">'3478*#54'</span></span><span class="koboSpan" id="kobo.2243.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.2244.1">subscribe</span></span><span class="koboSpan" id="kobo.2245.1">();
}
</span><span class="hljs-title"><span class="koboSpan" id="kobo.2246.1">logout</span></span><span class="koboSpan" id="kobo.2247.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2248.1">this</span></span><span class="koboSpan" id="kobo.2249.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2250.1">authService</span></span><span class="koboSpan" id="kobo.2251.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2252.1">logout</span></span><span class="koboSpan" id="kobo.2253.1">();
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2254.1">
     In the preceding snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2255.1">
      login
     </span>
    </code>
    <span class="koboSpan" id="kobo.2256.1">
     method uses predefined credentials from the users endpoint.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.2257.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2258.1">
       auth.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.2259.1">
      file and replace its content with the following HTML template:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.2260.1">@if</span></span><span class="koboSpan" id="kobo.2261.1"> (!authService.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2262.1">isLoggedIn</span></span><span class="koboSpan" id="kobo.2263.1">()) {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2264.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2265.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2266.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2267.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2268.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2269.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2270.1">login()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2271.1">&gt;</span></span><span class="koboSpan" id="kobo.2272.1">Login</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2273.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2274.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2275.1">&gt;</span></span><span class="koboSpan" id="kobo.2276.1">
} </span><span class="hljs-meta"><span class="koboSpan" id="kobo.2277.1">@else</span></span><span class="koboSpan" id="kobo.2278.1"> {
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2279.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2280.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2281.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2282.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2283.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2284.1">"logout()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2285.1">&gt;</span></span><span class="koboSpan" id="kobo.2286.1">Logout</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2287.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2288.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2289.1">&gt;</span></span><span class="koboSpan" id="kobo.2290.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2291.1">
     The preceding template contains two
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2292.1">
      &lt;button&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2293.1">
     HTML elements for login/logout purposes.
    </span>
    <span class="koboSpan" id="kobo.2293.2">
     Each button is displayed conditionally according to the value of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2294.1">
      isLoggedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2295.1">
     signal of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2296.1">
      AuthService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2297.1">
     class.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2298.1">
     We can
    </span>
    <a id="_idIndexMarker499">
    </a>
    <span class="koboSpan" id="kobo.2299.1">
     now leverage the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2300.1">
      isLoggedIn
     </span>
    </code>
    <span class="koboSpan" id="kobo.2301.1">
     signal in the product detail component and toggle the visibility of the
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.2302.1">
      Add to cart
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2303.1">
     button:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2304.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2305.1">
       product-detail.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2306.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2307.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.2308.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2309.1">import</span></span><span class="koboSpan" id="kobo.2310.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2311.1">AuthService</span></span><span class="koboSpan" id="kobo.2312.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2313.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2314.1">'../auth.service'</span></span><span class="koboSpan" id="kobo.2315.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2316.1">
      Inject
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2317.1">
       AuthService
      </span>
     </code>
     <span class="koboSpan" id="kobo.2318.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2319.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.2320.1">
      of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2321.1">
       ProductDetailComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.2322.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2323.1">constructor</span></span><span class="koboSpan" id="kobo.2324.1">(</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2325.1">private</span></span><span class="hljs-params"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2326.1">productService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2327.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.2328.1">ProductsService</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2329.1">, </span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2330.1">public authService: AuthService</span></strong></span><span class="koboSpan" id="kobo.2331.1">) { }
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2332.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2333.1">
       product-detail.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.2334.1">
      file and use an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2335.1">
       @if
      </span>
     </code>
     <span class="koboSpan" id="kobo.2336.1">
      block to display the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2337.1">
       Add to cart
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2338.1">
      button conditionally:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2339.1">@if (authService.isLoggedIn()) {  </span></strong></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.2340.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2341.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2342.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2343.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2344.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2345.1">"addToCart()"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2346.1">&gt;</span></span><span class="koboSpan" id="kobo.2347.1">Add to cart</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2348.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2349.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2350.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2351.1">}</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2352.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2353.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2354.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2355.1">
       AuthComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.2356.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2357.1">import</span></span><span class="koboSpan" id="kobo.2358.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2359.1">Component</span></span><span class="koboSpan" id="kobo.2360.1">, inject } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2361.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2362.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2363.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2364.1">import</span></span><span class="koboSpan" id="kobo.2365.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2366.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.2367.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2368.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2369.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2370.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2371.1">import</span></span><span class="koboSpan" id="kobo.2372.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2373.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.2374.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2375.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2376.1">'./product-list/product-list.component'</span></span><span class="koboSpan" id="kobo.2377.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2378.1">import</span></span><span class="koboSpan" id="kobo.2379.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2380.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.2381.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2382.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2383.1">'./copyright.directive'</span></span><span class="koboSpan" id="kobo.2384.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2385.1">import</span></span><span class="koboSpan" id="kobo.2386.1"> { </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2387.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.2388.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2389.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2390.1">'./app.settings'</span></span><span class="koboSpan" id="kobo.2391.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2392.1">import { AuthComponent } from './auth/auth.component';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2393.1">@Component</span></span><span class="koboSpan" id="kobo.2394.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2395.1">selector</span></span><span class="koboSpan" id="kobo.2396.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2397.1">'app-root'</span></span><span class="koboSpan" id="kobo.2398.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2399.1">imports</span></span><span class="koboSpan" id="kobo.2400.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2401.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.2402.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2403.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.2404.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2405.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.2406.1">,
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2407.1">AuthComponent</span></strong></span><span class="koboSpan" id="kobo.2408.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2409.1">templateUrl</span></span><span class="koboSpan" id="kobo.2410.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2411.1">'./app.component.html'</span></span><span class="koboSpan" id="kobo.2412.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2413.1">styleUrl</span></span><span class="koboSpan" id="kobo.2414.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2415.1">'./app.component.css'</span></span><span class="koboSpan" id="kobo.2416.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2417.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2418.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.2419.1">
      file and add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2420.1">
       &lt;app-auth&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2421.1">
      tag inside the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2422.1">
       &lt;header&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2423.1">
      HTML element:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2424.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2425.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2426.1">&gt;</span></span><span class="koboSpan" id="kobo.2427.1">
  {{ settings.title }}
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2428.1">&lt;app-auth&gt;&lt;/app-auth&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2429.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2430.1">header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2431.1">&gt;</span></span>
</code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2432.1">
     To try
    </span>
    <a id="_idIndexMarker500">
    </a>
    <span class="koboSpan" id="kobo.2433.1">
     the authentication feature in the application, follow these steps:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2434.1">
      Run the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2435.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.2436.1">
      command to start the application and navigate to
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2437.1">
       http://localhost:4200
      </span>
     </code>
     <span class="koboSpan" id="kobo.2438.1">
      .
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2439.1">
      Select a product from the list and verify that the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2440.1">
       Add to cart
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2441.1">
      button is not visible.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2442.1">
      Click the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2443.1">
       Login
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2444.1">
      button in the top-left corner of the page.
     </span>
     <span class="koboSpan" id="kobo.2444.2">
      The text should change to
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2445.1">
       Logout
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2446.1">
      after you have logged in successfully to the Fake Store API, and the
     </span>
     <strong class="screenText">
      <span class="koboSpan" id="kobo.2447.1">
       Add to cart
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2448.1">
      button should appear.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2449.1">
     Congratulations!
    </span>
    <span class="koboSpan" id="kobo.2449.2">
     You have added basic authentication and authorization patterns to your Angular application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2450.1">
     It is common in enterprise applications to perform authorization in the business logic layer while communicating with the backend API.
    </span>
    <span class="koboSpan" id="kobo.2450.2">
     The backend API often requires certain method calls to pass the authentication token in each request through headers.
    </span>
    <span class="koboSpan" id="kobo.2450.3">
     We will learn how
    </span>
    <a id="_idIndexMarker501">
    </a>
    <span class="koboSpan" id="kobo.2451.1">
     to work with
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2452.1">
      HTTP headers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2453.1">
     in the following section.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-159">
    <span class="koboSpan" id="kobo.2454.1">
     Authorizing HTTP requests
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2455.1">
     The Fake Store API does not require authorization while communicating with its endpoints.
    </span>
    <span class="koboSpan" id="kobo.2455.2">
     However, suppose we are working with a backend API that expects all HTTP requests
    </span>
    <a id="_idIndexMarker502">
    </a>
    <span class="koboSpan" id="kobo.2456.1">
     to contain an authentication token using HTTP headers.
    </span>
    <span class="koboSpan" id="kobo.2456.2">
     A common pattern in web applications is to include the token in an
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2457.1">
      Authorization
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2458.1">
     header.
    </span>
    <span class="koboSpan" id="kobo.2458.2">
     We can use HTTP headers in an Angular application by importing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2459.1">
      HttpHeaders
     </span>
    </code>
    <span class="koboSpan" id="kobo.2460.1">
     class from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2461.1">
      @angular/common/http
     </span>
    </code>
    <span class="koboSpan" id="kobo.2462.1">
     namespace and modifying our methods accordingly.
    </span>
    <span class="koboSpan" id="kobo.2462.2">
     Here is an example of how the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2463.1">
      getProducts
     </span>
    </code>
    <span class="koboSpan" id="kobo.2464.1">
     method should look:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2465.1">getProducts</span></span><span class="koboSpan" id="kobo.2466.1">(): </span><span class="hljs-title"><span class="koboSpan" id="kobo.2467.1">Observable</span></span><span class="koboSpan" id="kobo.2468.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2469.1">Product</span></span><span class="koboSpan" id="kobo.2470.1">[]&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2471.1">const</span></span><span class="koboSpan" id="kobo.2472.1"> options = {
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2473.1">params: new HttpParams().set('limit', 10),</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2474.1">headers: new HttpHeaders({ Authorization: 'myToken' })</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2475.1">};</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2476.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2477.1">this</span></span><span class="koboSpan" id="kobo.2478.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2479.1">http</span></span><span class="koboSpan" id="kobo.2480.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2481.1">get</span></span><span class="koboSpan" id="kobo.2482.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2483.1">Product</span></span><span class="koboSpan" id="kobo.2484.1">[]&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.2485.1">this</span></span><span class="koboSpan" id="kobo.2486.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2487.1">productsUrl</span></span><span class="koboSpan" id="kobo.2488.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2489.1">options</span></strong></span><span class="koboSpan" id="kobo.2490.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.2491.1">pipe</span></span><span class="koboSpan" id="kobo.2492.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2493.1">map</span></span><span class="koboSpan" id="kobo.2494.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2495.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2496.1"> =&gt;</span></span><span class="koboSpan" id="kobo.2497.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2498.1">this</span></span><span class="koboSpan" id="kobo.2499.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2500.1">products</span></span><span class="koboSpan" id="kobo.2501.1"> = products;
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2502.1">return</span></span><span class="koboSpan" id="kobo.2503.1"> products;
  }));
}
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2504.1">
      For simplicity, we are using a hardcoded value for the authentication token.
     </span>
     <span class="koboSpan" id="kobo.2504.2">
      In a real-world scenario, we may get it from the local storage of the browser or some other means.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2505.1">
     All
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2506.1">
      HttpClient
     </span>
    </code>
    <span class="koboSpan" id="kobo.2507.1">
     methods accept an optional object as a parameter for passing additional options to an HTTP request, including HTTP headers.
    </span>
    <span class="koboSpan" id="kobo.2507.2">
     To set headers, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2508.1">
      headers
     </span>
    </code>
    <span class="koboSpan" id="kobo.2509.1">
     property of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2510.1">
      options
     </span>
    </code>
    <span class="koboSpan" id="kobo.2511.1">
     object and create a new instance of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2512.1">
      HttpHeaders
     </span>
    </code>
    <span class="koboSpan" id="kobo.2513.1">
     class as a value.
    </span>
    <span class="koboSpan" id="kobo.2513.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2514.1">
      HttpHeaders
     </span>
    </code>
    <span class="koboSpan" id="kobo.2515.1">
     object is a key-value pair that defines custom HTTP headers.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2516.1">
     Now, imagine what will happen if we need to pass the authentication token in all methods of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2517.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2518.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.2518.2">
     We should go to each of them and write the same code repeatedly.
    </span>
    <span class="koboSpan" id="kobo.2518.3">
     Our code could quickly become cluttered and difficult to test.
    </span>
    <span class="koboSpan" id="kobo.2518.4">
     Luckily, the Angular
    </span>
    <a id="_idIndexMarker503">
    </a>
    <span class="koboSpan" id="kobo.2519.1">
     HTTP client has another feature we can use to help us in such a situation called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.2520.1">
      interceptors
     </span>
    </strong>
    <span class="koboSpan" id="kobo.2521.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2522.1">
     An HTTP interceptor is an Angular service that intercepts HTTP requests and responses that pass through the Angular HTTP client.
    </span>
    <span class="koboSpan" id="kobo.2522.2">
     It can be used in the following scenarios:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2523.1">
      When we want to pass custom HTTP headers in every request, such as an authentication token
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2524.1">
      When we want to display a loading indicator while we wait for a response from the server
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2525.1">
      When we want to provide a logging mechanism for every HTTP communication
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2526.1">
     In our case, we can
    </span>
    <a id="_idIndexMarker504">
    </a>
    <span class="koboSpan" id="kobo.2527.1">
     create an interceptor for passing the authentication token to each HTTP request:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2528.1">
      Run the following command to create a new interceptor:
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2529.1">ng generate interceptor auth
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2530.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2531.1">
       app.config.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2532.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2533.1">
       withInterceptors
      </span>
     </code>
     <span class="koboSpan" id="kobo.2534.1">
      function from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2535.1">
       @angular/common/http
      </span>
     </code>
     <span class="koboSpan" id="kobo.2536.1">
      namespace:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2537.1">import</span></span><span class="koboSpan" id="kobo.2538.1"> { provideHttpClient, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2539.1">withInterceptors</span></strong></span><span class="koboSpan" id="kobo.2540.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2541.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2542.1">'@angular/common/http'</span></span><span class="koboSpan" id="kobo.2543.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2544.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2545.1">
      withInterceptors
     </span>
    </code>
    <span class="koboSpan" id="kobo.2546.1">
     function is used to register an interceptor with the HTTP client.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.2547.1">
      Import the interceptor we created in the previous step using the following statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2548.1">import</span></span><span class="koboSpan" id="kobo.2549.1"> { authInterceptor } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2550.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2551.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2552.1">./auth.interceptor'</span></span><span class="koboSpan" id="kobo.2553.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2554.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2555.1">
       provideHttpClient
      </span>
     </code>
     <span class="koboSpan" id="kobo.2556.1">
      method to register the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2557.1">
       authInterceptor
      </span>
     </code>
     <span class="koboSpan" id="kobo.2558.1">
      :
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2559.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2560.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2561.1">appConfig</span></span><span class="koboSpan" id="kobo.2562.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2563.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.2564.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2565.1">providers</span></span><span class="koboSpan" id="kobo.2566.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2567.1">provideZoneChangeDetection</span></span><span class="koboSpan" id="kobo.2568.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2569.1">eventCoalescing</span></span><span class="koboSpan" id="kobo.2570.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2571.1">true</span></span><span class="koboSpan" id="kobo.2572.1"> }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2573.1">provideRouter</span></span><span class="koboSpan" id="kobo.2574.1">(routes),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2575.1">provideHttpClient</span></span><span class="koboSpan" id="kobo.2576.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2577.1">withInterceptors([authInterceptor])</span></strong></span><span class="koboSpan" id="kobo.2578.1">),
    { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2579.1">provide</span></span><span class="koboSpan" id="kobo.2580.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2581.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.2582.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2583.1">useValue</span></span><span class="koboSpan" id="kobo.2584.1">: appSettings }
  ]
};
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2585.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2586.1">
      withInterceptors
     </span>
    </code>
    <span class="koboSpan" id="kobo.2587.1">
     function accepts a list of registered interceptors, and their order matters.
    </span>
    <span class="koboSpan" id="kobo.2587.2">
     In the following diagram, you can see how interceptors process HTTP requests and responses according to their order:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2588.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, διάγραμμα, γραμματοσειρά  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_08_09.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2589.1">
     Figure 8.9: Execution order of Angular interceptors
    </span>
   </p>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.2590.1">
      By default, the last
     </span>
     <a id="_idIndexMarker505">
     </a>
     <span class="koboSpan" id="kobo.2591.1">
      interceptor before sending the request to the server is a built-in Angular service named
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2592.1">
       HttpBackend
      </span>
     </strong>
     <span class="koboSpan" id="kobo.2593.1">
      .
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.2594.1">
      Open
     </span>
     <a id="_idIndexMarker506">
     </a>
     <span class="koboSpan" id="kobo.2595.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2596.1">
       auth.interceptor.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.2597.1">
      file and modify the arrow function of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2598.1">
       authInterceptor
      </span>
     </code>
     <span class="koboSpan" id="kobo.2599.1">
      function as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2600.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2601.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2602.1">authInterceptor</span></span><span class="koboSpan" id="kobo.2603.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2604.1">HttpInterceptorFn</span></span><span class="koboSpan" id="kobo.2605.1"> = </span><span class="hljs-function"><span class="koboSpan" id="kobo.2606.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2607.1">req, next</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2608.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2609.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2610.1">const authReq = req.clone({</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2611.1">setHeaders: { Authorization: 'myToken' }</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2612.1">});</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2613.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2614.1">next</span></span><span class="koboSpan" id="kobo.2615.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2616.1">authReq</span></strong></span><span class="koboSpan" id="kobo.2617.1">);
};
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.2618.1">
     The arrow function accepts the following parameters:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2619.1">
      req
     </span>
    </code>
    <span class="koboSpan" id="kobo.2620.1">
     , which indicates the current request, and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2621.1">
      next
     </span>
    </code>
    <span class="koboSpan" id="kobo.2622.1">
     , which is the next interceptor in the chain.
    </span>
    <span class="koboSpan" id="kobo.2622.2">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2623.1">
      clone
     </span>
    </code>
    <span class="koboSpan" id="kobo.2624.1">
     method to modify the existing request because HTTP requests are immutable by default.
    </span>
    <span class="koboSpan" id="kobo.2624.2">
     Similarly, due to the immutable nature of HTTP headers, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2625.1">
      setHeaders
     </span>
    </code>
    <span class="koboSpan" id="kobo.2626.1">
     method to update them.
    </span>
    <span class="koboSpan" id="kobo.2626.2">
     Finally, we delegate the request to the next interceptor using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2627.1">
      handle
     </span>
    </code>
    <span class="koboSpan" id="kobo.2628.1">
     method.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2629.1">
     Interceptors can use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2630.1">
      inject
     </span>
    </code>
    <span class="koboSpan" id="kobo.2631.1">
     method to get dependencies that they may need from the Angular
    </span>
    <a id="_idIndexMarker507">
    </a>
    <span class="koboSpan" id="kobo.2632.1">
     DI mechanism.
    </span>
    <span class="koboSpan" id="kobo.2632.2">
     For example, if we wanted to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2633.1">
      AuthService
     </span>
    </code>
    <span class="koboSpan" id="kobo.2634.1">
     class inside the interceptor, we could modify it as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2635.1">import { inject } from '@angular/core';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2636.1">import</span></span><span class="koboSpan" id="kobo.2637.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2638.1">HttpInterceptorFn</span></span><span class="koboSpan" id="kobo.2639.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2640.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2641.1">'@angular/common/http'</span></span><span class="koboSpan" id="kobo.2642.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2643.1">import { AuthService } from './auth.service';</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2644.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2645.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2646.1">authInterceptor</span></span><span class="koboSpan" id="kobo.2647.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2648.1">HttpInterceptorFn</span></span><span class="koboSpan" id="kobo.2649.1"> = </span><span class="hljs-function"><span class="koboSpan" id="kobo.2650.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2651.1">req, next</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2652.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2653.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2654.1">const authService = inject(AuthService);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2655.1">const</span></span><span class="koboSpan" id="kobo.2656.1"> authReq = req.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2657.1">clone</span></span><span class="koboSpan" id="kobo.2658.1">({
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2659.1">setHeaders</span></span><span class="koboSpan" id="kobo.2660.1">: { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2661.1">Authorization</span></span><span class="koboSpan" id="kobo.2662.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2663.1">'myToken'</span></span><span class="koboSpan" id="kobo.2664.1"> }
  });
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2665.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2666.1">next</span></span><span class="koboSpan" id="kobo.2667.1">(authReq);
};
</span></code></pre>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2668.1">
      In applications built with older versions of the Angular framework, you may notice that interceptors are TypeScript classes instead of pure functions.
     </span>
     <span class="koboSpan" id="kobo.2668.2">
      To register an interceptor with the HTTP client, we need to add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2669.1">
       provide
      </span>
     </code>
     <span class="koboSpan" id="kobo.2670.1">
      object literal in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2671.1">
       providers
      </span>
     </code>
     <span class="koboSpan" id="kobo.2672.1">
      array of the module, which also provides the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2673.1">
       HttpClientModule
      </span>
     </code>
     <span class="koboSpan" id="kobo.2674.1">
      :
     </span>
    </p>
    <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2675.1">{
  provide: HTTP_INTERCEPTORS,
  useClass: AuthInterceptor,
  multi: true
}
</span></code></pre>
    <p class="normal">
     <span class="koboSpan" id="kobo.2676.1">
      In the preceding snippet,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2677.1">
       HTTP_INTERCEPTORS
      </span>
     </code>
     <span class="koboSpan" id="kobo.2678.1">
      is an injection token that can be provided multiple times as indicated by the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2679.1">
       multi
      </span>
     </code>
     <span class="koboSpan" id="kobo.2680.1">
      property.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2681.1">
     Angular interceptors have many uses, and authorization is one of the most basic.
    </span>
    <span class="koboSpan" id="kobo.2681.2">
     Passing authentication tokens during HTTP requests is a common scenario in enterprise web applications.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-160">
    <span class="koboSpan" id="kobo.2682.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2683.1">
     Enterprise web applications must exchange information with a backend API almost daily.
    </span>
    <span class="koboSpan" id="kobo.2683.2">
     The Angular framework enables applications to communicate with an API over HTTP using the Angular HTTP client.
    </span>
    <span class="koboSpan" id="kobo.2683.3">
     In this chapter, we explored the essential parts of the Angular HTTP client.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2684.1">
     We learned to move away from the traditional
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2685.1">
      fetch
     </span>
    </code>
    <span class="koboSpan" id="kobo.2686.1">
     API and use observables to communicate over HTTP.
    </span>
    <span class="koboSpan" id="kobo.2686.2">
     We explored the basic parts of a CRUD application using the Fake Store API as our backend.
    </span>
    <span class="koboSpan" id="kobo.2686.3">
     We investigated how to implement authentication and authorization in Angular applications.
    </span>
    <span class="koboSpan" id="kobo.2686.4">
     Finally, we learned what Angular interceptors are and how to use them to authorize HTTP calls.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2687.1">
     Now that we know how to consume data from a backend API in our components, we can further improve the user experience of our application.
    </span>
    <span class="koboSpan" id="kobo.2687.2">
     In the next chapter, we will learn how to load our components through navigation using the Angular router.
    </span>
   </p>
  </div>
 </body></html>