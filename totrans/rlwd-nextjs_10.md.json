["```js\nyarn add express react react-dom next\n```", "```js\nconst { parse } = require('url');\nconst express = require('express');\nconst next = require('next');\n```", "```js\nconst dev = process.env.NODE_ENV !== 'production';\nconst app = next({ dev });\n```", "```js\nasync function main() {\n  try {\n    await app.prepare();\n    const handle = app.getRequestHandler();\n    const server = express();\n    server\n      .get('*', (req, res) => {\n        const url = parse(req.url, true);\n        handle(req, res, url);\n      })\n      .listen(3000, () => console.log('server ready'));\n  } catch (err) {\n    console.log(err.stack);\n  }\n}\nmain();\n```", "```js\nexport default function Homepage() {\n  return <div> Homepage </div>;\n}\n```", "```js\nexport function getServerSideProps(req) {\n  return {\n    props: {\n      user: req.params.user,\n    },\n  };\n}\nexport default function GreetUser({ user }) {\n  return (\n    <div>\n      <h1>Hello {user}!</h1>\n    </div>\n  );\n}\n```", "```js\n    server\n      .get('/', (req, res) => {\n        res.send('Hello World!');\n      })\n      .get('/api/greet', (req, res) => {\n        res.json({ name: req.query?.name ?? 'unknown' });\n      })\n      .listen(3000, () => console.log('server ready'));\n```", "```js\nexport default function About() {\n  return <div> This about page is served from Next.js </div>;\n}\n```", "```js\nserver\n  .get('/', (req, res) => {\n    res.send('Hello World!');\n  })\n  .get('/about', (req, res) => {\n    const { query } = parse(req.url, true);\n    app.render(req, res, '/about', query);\n  })\n  .get('/api/greet', (req, res) => {\n    res.json({ name: req.query?.name ?? 'unknown' });\n  })\n  .listen(3000, () => console.log('server ready'));\n```", "```js\n// ...\nawait app.prepare();\nconst handle = app.getRequestHandler();\nconst server = express();\nserver\n  .get('/', (req, res) => {\n    res.send('Hello World!');\n  })\n  .get('/about', (req, res) => {\n    const { query } = parse(req.url, true);\n    app.render(req, res, '/about', query);\n  })\n  .get('/api/greet', (req, res) => {\n    res.json({ name: req.query?.name ?? 'unknown' });\n  })\n  .get(/_next\\/.+/, (req, res) => {\n    const parsedUrl = parse(req.url, true);\n    handle(req, res, parsedUrl);\n  })\n  .listen(3000, () => console.log('server ready'));\n```", "```js\nyarn add react react-dom fastify fastify-nextjs next\n```", "```js\nexport default function Homepage() {\n  return <div> Homepage </div>;\n}\n```", "```js\nexport default function About() {\n  return <div> This about page is served from Next.js </div>;\n}\n```", "```js\nexport function getServerSideProps(req) {\n  return {\n    props: {\n      user: req.params.user,\n    },\n  };\n}\nexport default function GreetUser({ user }) {\n  return (\n    <div>\n      <h1>Hello {user}!</h1>\n    </div>\n  );\n}\n```", "```js\nconst fastify = require('fastify')();\nfastify\n  .register(require('fastify-nextjs'))\n  .after(() => {\n    fastify.next('/');\n    fastify.next('/about');\n    fastify.next('/greet/:user');\n  });\nfastify.listen(3000, () => {\n  console.log('Server listening on http://localhost:3000');\n});\n```", "```js\nfastify.register(require('fastify-nextjs')).after(() => {\n  fastify.next('/');\n  fastify.next('/about');\n  fastify.next('/greet/:user');\n  fastify.get('/contacts', (req, reply) => {\n    reply\n      .type('html')\n      .send('<h1>Contacts page</h1>');\n  });\n});\n```"]