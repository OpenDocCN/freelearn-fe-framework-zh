<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer038">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 class="chapterTitle" id="_idParaDest-14"><span class="koboSpan" id="kobo.2.1">Winning Component Communication</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In this chapter, you’ll master component communication in Angular. </span><span class="koboSpan" id="kobo.3.2">You’ll learn different techniques to establish communication between components and will learn which technique is suitable in which situation. </span><span class="koboSpan" id="kobo.3.3">You’ll also learn about the new Signals API, which is stable since Angular v17, in this chapter.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">The following are the recipes we’re going to cover in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.5.1">Component communication using component </span><strong class="keyWord"><span class="koboSpan" id="kobo.6.1">@Input</span></strong><span class="koboSpan" id="kobo.7.1"> and </span><strong class="keyWord"><span class="koboSpan" id="kobo.8.1">@Output </span></strong><span class="koboSpan" id="kobo.9.1">properties</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.10.1">Component communication using services</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.11.1">Using setters for intercepting input property changes</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.12.1">Using </span><strong class="keyWord"><span class="koboSpan" id="kobo.13.1">ngOnChanges</span></strong><span class="koboSpan" id="kobo.14.1"> to intercept input property changes</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.15.1">Accessing a child component in a parent template via template variables</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.16.1">Accessing a child component in a parent component class using </span><strong class="keyWord"><span class="koboSpan" id="kobo.17.1">ViewChild</span></strong></li>
<li class="bulletList"><span class="koboSpan" id="kobo.18.1">Standalone components and passing data through route params</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.19.1">Component communication using signals</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-15"><span class="koboSpan" id="kobo.20.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.21.1">For the recipes in this chapter, ensure your setup is complete as per the 'Technical Requirements' in the 'Angular-Cookbook-2E' GitHub repository. </span><span class="koboSpan" id="kobo.21.2">For setup details, visit: </span><a href="https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/docs/technical-requirements.md"><span class="url"><span class="koboSpan" id="kobo.22.1">https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/docs/technical-requirements.md</span></span></a><span class="koboSpan" id="kobo.23.1">. </span><span class="koboSpan" id="kobo.23.2">The starter code for this chapter is located at </span><a href="https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/start/apps/chapter01"><span class="url"><span class="koboSpan" id="kobo.24.1">https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/start/apps/chapter01</span></span></a><span class="koboSpan" id="kobo.25.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-16"><span class="koboSpan" id="kobo.26.1">Component communication using component @Input and @Output properties</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.27.1">You’ll start </span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.28.1">with an app with a parent component and two child components. </span><span class="koboSpan" id="kobo.28.2">You’ll then use Angular </span><code class="inlineCode"><span class="koboSpan" id="kobo.29.1">@Input</span></code><span class="koboSpan" id="kobo.30.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.31.1">@Output</span></code><span class="koboSpan" id="kobo.32.1"> decorators to establish communication between</span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.33.1"> them using attributes and </span><strong class="keyWord"><span class="koboSpan" id="kobo.34.1">EventEmitter</span></strong><span class="koboSpan" id="kobo.35.1">(s). </span><span class="koboSpan" id="kobo.35.2">The flow of the communication is shown in </span><em class="italic"><span class="koboSpan" id="kobo.36.1">Figure 1.1</span></em><span class="koboSpan" id="kobo.37.1">.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.38.1"><img alt="" role="presentation" src="../Images/B18469_01_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.39.1">Figure 1.1: Communication flow using @Input() and @Output() properties</span></p>
<h2 class="heading-2" id="_idParaDest-17"><span class="koboSpan" id="kobo.40.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.41.1">The app that </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.42.1">we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.43.1">start/apps/chapter01/cc-inputs-outputs</span></code><span class="koboSpan" id="kobo.44.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.45.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.46.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.47.1">npm run serve cc-inputs-outputs
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.48.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.49.1"><img alt="" role="presentation" src="../Images/B18469_01_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.50.1">Figure 1.2: The cc-inputs-outputs app running on http://localhost:4200</span></p></li>
</ol>
<h2 class="heading-2" id="_idParaDest-18"><span class="koboSpan" id="kobo.51.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.52.1">So far, we </span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.53.1">have an app with </span><code class="inlineCode"><span class="koboSpan" id="kobo.54.1">AppComponent</span></code><span class="koboSpan" id="kobo.55.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.56.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.57.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.58.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.59.1">. </span><span class="koboSpan" id="kobo.59.2">While </span><code class="inlineCode"><span class="koboSpan" id="kobo.60.1">AppComponent</span></code><span class="koboSpan" id="kobo.61.1"> is the parent of the other two components mentioned, there is absolutely no component communication between them to sync the notification count value among both components. </span><span class="koboSpan" id="kobo.61.2">Let’s establish the appropriate communication between them using the following steps:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.62.1">We’ll move the </span><code class="inlineCode"><span class="koboSpan" id="kobo.63.1">notificationsCount</span></code><span class="koboSpan" id="kobo.64.1"> variable from </span><code class="inlineCode"><span class="koboSpan" id="kobo.65.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.66.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.67.1">AppComponent</span></code><span class="koboSpan" id="kobo.68.1">. </span><span class="koboSpan" id="kobo.68.2">To do so, create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.69.1">notificationsCount</span></code><span class="koboSpan" id="kobo.70.1"> property in </span><code class="inlineCode"><span class="koboSpan" id="kobo.71.1">app.component.ts</span></code><span class="koboSpan" id="kobo.72.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.73.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.74.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.75.1">AppComponent</span></span><span class="koboSpan" id="kobo.76.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.77.1">notificationsCount = </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.78.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.79.1">;</span></strong></span><span class="koboSpan" id="kobo.80.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.81.1">Next, convert </span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.82.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.83.1">notificationsCount</span></code><span class="koboSpan" id="kobo.84.1"> property in </span><code class="inlineCode"><span class="koboSpan" id="kobo.85.1">notifications-manager.component.ts</span></code><span class="koboSpan" id="kobo.86.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.87.1">@Input()</span></code><span class="koboSpan" id="kobo.88.1">, rename it to </span><code class="inlineCode"><span class="koboSpan" id="kobo.89.1">count</span></code><span class="koboSpan" id="kobo.90.1">, and replace its</span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.91.1"> usages as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.92.1">import</span></span><span class="koboSpan" id="kobo.93.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.94.1">Component</span></span><span class="koboSpan" id="kobo.95.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.96.1">OnInit</span></span><span class="koboSpan" id="kobo.97.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.98.1">Input</span></strong></span><span class="koboSpan" id="kobo.99.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.100.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.101.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.102.1">@angular/core'</span></span><span class="koboSpan" id="kobo.103.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.104.1">@Component</span></span><span class="koboSpan" id="kobo.105.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.106.1">selector</span></span><span class="koboSpan" id="kobo.107.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.108.1">'app-notifications-manager'</span></span><span class="koboSpan" id="kobo.109.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.110.1">templateUrl</span></span><span class="koboSpan" id="kobo.111.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.112.1">'./notifications-manager.component.html'</span></span><span class="koboSpan" id="kobo.113.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.114.1">styleUrls</span></span><span class="koboSpan" id="kobo.115.1">: [</span><span class="hljs-string"><span class="koboSpan" id="kobo.116.1">'./notifications-manager.component.scss'</span></span><span class="koboSpan" id="kobo.117.1">]
})
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.118.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.119.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.120.1">NotificationsManagerComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.121.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.122.1">OnInit</span></span><span class="koboSpan" id="kobo.123.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.124.1">@Input</span></span><span class="koboSpan" id="kobo.125.1">() </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.126.1">count</span></strong></span><span class="koboSpan" id="kobo.127.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.128.1">0</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.129.1">constructor</span></span><span class="koboSpan" id="kobo.130.1">() { }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.131.1">ngOnInit</span></span><span class="koboSpan" id="kobo.132.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.133.1">void</span></span><span class="koboSpan" id="kobo.134.1"> {
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.135.1">addNotification</span></span><span class="koboSpan" id="kobo.136.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.137.1">this</span></span><span class="koboSpan" id="kobo.138.1">.</span><span class="code-highlight"><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.139.1">count</span></strong></span><span class="koboSpan" id="kobo.140.1">++;
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.141.1">removeNotification</span></span><span class="koboSpan" id="kobo.142.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.143.1">if</span></span><span class="koboSpan" id="kobo.144.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.145.1">this</span></span><span class="koboSpan" id="kobo.146.1">.</span><span class="code-highlight"><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.147.1">count</span></strong></span><span class="koboSpan" id="kobo.148.1"> == </span><span class="hljs-number"><span class="koboSpan" id="kobo.149.1">0</span></span><span class="koboSpan" id="kobo.150.1">) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.151.1">return</span></span><span class="koboSpan" id="kobo.152.1">;
    }
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.153.1">this</span></span><span class="koboSpan" id="kobo.154.1">.</span><span class="code-highlight"><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.155.1">count</span></strong></span><span class="koboSpan" id="kobo.156.1">--;
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.157.1">resetCount</span></span><span class="koboSpan" id="kobo.158.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.159.1">this</span></span><span class="koboSpan" id="kobo.160.1">.</span><span class="code-highlight"><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.161.1">count</span></strong></span><span class="koboSpan" id="kobo.162.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.163.1">0</span></span><span class="koboSpan" id="kobo.164.1">;
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.165.1">Update </span><code class="inlineCode"><span class="koboSpan" id="kobo.166.1">notifications-manager.component.html</span></code><span class="koboSpan" id="kobo.167.1"> to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.168.1">count</span></code><span class="koboSpan" id="kobo.169.1"> instead of </span><code class="inlineCode"><span class="koboSpan" id="kobo.170.1">notificationsCount</span></code><span class="koboSpan" id="kobo.171.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.172.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.173.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.174.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.175.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.176.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.177.1">notif-manager"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.178.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.179.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.180.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.181.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.182.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.183.1">"notif-manager__count"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.184.1">&gt;</span></span><span class="koboSpan" id="kobo.185.1">
    Notifications Count: {{</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.186.1">count</span></strong></span><span class="koboSpan" id="kobo.187.1">}}
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.188.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.189.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.190.1">&gt;</span></span><span class="koboSpan" id="kobo.191.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.192.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.193.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.194.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.195.1">Next, pass the </span><code class="inlineCode"><span class="koboSpan" id="kobo.196.1">notificationsCount</span></code><span class="koboSpan" id="kobo.197.1"> property from </span><code class="inlineCode"><span class="koboSpan" id="kobo.198.1">app.component.html</span></code><span class="koboSpan" id="kobo.199.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.200.1">&lt;app-notifications-manager&gt;</span></code><span class="koboSpan" id="kobo.201.1"> element as an input:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.202.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.203.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.204.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.205.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.206.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.207.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.208.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.209.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.210.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.211.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.212.1">app-notifications-manager</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.213.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.214.1">count</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.215.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.216.1">"notificationsCount"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.217.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.218.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.219.1">app-notifications-manager</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.220.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.221.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.222.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.223.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.224.1">You</span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.225.1"> could now test whether the value is being correctly passed from </span><code class="inlineCode"><span class="koboSpan" id="kobo.226.1">app.component.html</span></code><span class="koboSpan" id="kobo.227.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.228.1">app-notifications-manager</span></code><span class="koboSpan" id="kobo.229.1"> by assigning the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.230.1">notificationsCount</span></code><span class="koboSpan" id="kobo.231.1"> in </span><code class="inlineCode"><span class="koboSpan" id="kobo.232.1">app.component.ts</span></code><span class="koboSpan" id="kobo.233.1"> as </span><code class="inlineCode"><span class="koboSpan" id="kobo.234.1">10</span></code><span class="koboSpan" id="kobo.235.1">. </span><span class="koboSpan" id="kobo.235.2">You’ll see that in </span><code class="inlineCode"><span class="koboSpan" id="kobo.236.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.237.1">, the initial value shown will be </span><code class="inlineCode"><span class="koboSpan" id="kobo.238.1">10</span></code><span class="koboSpan" id="kobo.239.1">:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.240.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.241.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.242.1">AppComponent</span></span><span class="koboSpan" id="kobo.243.1"> {
  notificationsCount = </span><span class="code-highlight"><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.244.1">10</span></strong></span><span class="koboSpan" id="kobo.245.1">;
}
</span></code></pre> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.246.1">Now, create</span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.247.1"> an </span><code class="inlineCode"><span class="koboSpan" id="kobo.248.1">@Input()</span></code><span class="koboSpan" id="kobo.249.1"> in </span><code class="inlineCode"><span class="koboSpan" id="kobo.250.1">notifications-button.component.ts</span></code><span class="koboSpan" id="kobo.251.1"> named </span><code class="inlineCode"><span class="koboSpan" id="kobo.252.1">count</span></code><span class="koboSpan" id="kobo.253.1"> as well:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.254.1">import</span></span><span class="koboSpan" id="kobo.255.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.256.1">Component</span></span><span class="koboSpan" id="kobo.257.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.258.1">OnInit</span></span><span class="koboSpan" id="kobo.259.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.260.1">Input</span></strong></span><span class="koboSpan" id="kobo.261.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.262.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.263.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.264.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.265.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.266.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.267.1">NotificationsButtonComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.268.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.269.1">OnInit</span></span><span class="koboSpan" id="kobo.270.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.271.1">@</span></span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.272.1">Input</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.273.1">() count = </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.274.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.275.1">;</span></strong></span><span class="koboSpan" id="kobo.276.1">
  ...
</span><span class="koboSpan" id="kobo.276.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.277.1">Pass </span><code class="inlineCode"><span class="koboSpan" id="kobo.278.1">notificationsCount</span></code><span class="koboSpan" id="kobo.279.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.280.1">&lt;app-notifications-button&gt;</span></code><span class="koboSpan" id="kobo.281.1"> as well from </span><code class="inlineCode"><span class="koboSpan" id="kobo.282.1">app.component.html</span></code><span class="koboSpan" id="kobo.283.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.284.1">&lt;!-- Toolbar --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.285.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.286.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.287.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.288.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.289.1">"toolbar"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.290.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.291.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.292.1">"banner"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.293.1">&gt;</span></span><span class="koboSpan" id="kobo.294.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.295.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.296.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.297.1">&gt;</span></span><span class="koboSpan" id="kobo.298.1">@Component Inputs and Outputs</span><span class="hljs-tag"><span class="koboSpan" id="kobo.299.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.300.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.301.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.302.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.303.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.304.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.305.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.306.1">"spacer"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.307.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.308.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.309.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.310.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.311.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.312.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.313.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.314.1">"notif-bell"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.315.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.316.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.317.1">app-notifications-button</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.318.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.319.1">count</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.320.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.321.1">"notificationsCount"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.322.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.323.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.324.1">app-notifications-button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.325.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.326.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.327.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.328.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.329.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.330.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.331.1">&gt;</span></span><span class="koboSpan" id="kobo.332.1">
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.333.1">Use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.334.1">count</span></code><span class="koboSpan" id="kobo.335.1"> input in </span><code class="inlineCode"><span class="koboSpan" id="kobo.336.1">notifications-button.component.html</span></code><span class="koboSpan" id="kobo.337.1"> with the notification bell icon:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.338.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.339.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.340.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.341.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.342.1">"bell"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.343.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.344.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.345.1">i</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.346.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.347.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.348.1">"material-icons"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.349.1">&gt;</span></span><span class="koboSpan" id="kobo.350.1">notifications</span><span class="hljs-tag"><span class="koboSpan" id="kobo.351.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.352.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.353.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.354.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.355.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.356.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.357.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.358.1">"bell__count"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.359.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.360.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.361.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.362.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.363.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.364.1">"bell__count__digits"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.365.1">&gt;</span></span><span class="koboSpan" id="kobo.366.1">
      {{</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.367.1">count</span></strong></span><span class="koboSpan" id="kobo.368.1">}}
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.369.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.370.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.371.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.372.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.373.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.374.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.375.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.376.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.377.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.378.1">You should now see the value </span><code class="inlineCode"><span class="koboSpan" id="kobo.379.1">10</span></code><span class="koboSpan" id="kobo.380.1"> for the notification bell icon count as well.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.381.1">Right now, if you change the count by adding/removing notifications from </span><code class="inlineCode"><span class="koboSpan" id="kobo.382.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.383.1">, the count on the notification bell icon won’t change.</span></p>
</div>
</li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.384.1">To </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.385.1">communicate</span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.386.1"> the change from </span><code class="inlineCode"><span class="koboSpan" id="kobo.387.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.388.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.389.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.390.1">, we’ll use an Angular </span><code class="inlineCode"><span class="koboSpan" id="kobo.391.1">@Output()</span></code><span class="koboSpan" id="kobo.392.1"> property now. </span><span class="koboSpan" id="kobo.392.2">Use </span><code class="inlineCode"><span class="koboSpan" id="kobo.393.1">@Output</span></code><span class="koboSpan" id="kobo.394.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.395.1">@EventEmitter</span></code><span class="koboSpan" id="kobo.396.1"> from </span><code class="inlineCode"><span class="koboSpan" id="kobo.397.1">'@angular/core'</span></code><span class="koboSpan" id="kobo.398.1"> inside </span><code class="inlineCode"><span class="koboSpan" id="kobo.399.1">notifications-manager.component.ts</span></code><span class="koboSpan" id="kobo.400.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.401.1">import</span></span><span class="koboSpan" id="kobo.402.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.403.1">Component</span></span><span class="koboSpan" id="kobo.404.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.405.1">OnInit</span></span><span class="koboSpan" id="kobo.406.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.407.1">Input</span></span><span class="koboSpan" id="kobo.408.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.409.1">Output</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.410.1">,</span></strong></span> <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.411.1">EventEmitter</span></strong><strong class="hljs-slc"> </strong></span><span class="koboSpan" id="kobo.412.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.413.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.414.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.415.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.416.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.417.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.418.1">NotificationsManagerComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.419.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.420.1">OnInit</span></span><span class="koboSpan" id="kobo.421.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.422.1">@Input</span></span><span class="koboSpan" id="kobo.423.1">() count = </span><span class="hljs-number"><span class="koboSpan" id="kobo.424.1">0</span></span>
<span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.425.1">@Output</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.426.1">() countChanged = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.427.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.428.1">EventEmitter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.429.1">&lt;</span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.430.1">number</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.431.1">&gt;();</span></strong></span><span class="koboSpan" id="kobo.432.1">
...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.433.1">addNotification</span></span><span class="koboSpan" id="kobo.434.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.435.1">this</span></span><span class="koboSpan" id="kobo.436.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.437.1">count</span></span><span class="koboSpan" id="kobo.438.1">++;
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.439.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.440.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.441.1">countChanged</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.442.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.443.1">emit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.444.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.445.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.446.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.447.1">count</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.448.1">);</span></strong></span><span class="koboSpan" id="kobo.449.1">
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.450.1">removeNotification</span></span><span class="koboSpan" id="kobo.451.1">() {
    ...
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.452.1">this</span></span><span class="koboSpan" id="kobo.453.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.454.1">count</span></span><span class="koboSpan" id="kobo.455.1">--;
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.456.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.457.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.458.1">countChanged</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.459.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.460.1">emit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.461.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.462.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.463.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.464.1">count</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.465.1">);</span></strong></span><span class="koboSpan" id="kobo.466.1">
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.467.1">resetCount</span></span><span class="koboSpan" id="kobo.468.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.469.1">this</span></span><span class="koboSpan" id="kobo.470.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.471.1">count</span></span><span class="koboSpan" id="kobo.472.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.473.1">0</span></span><span class="koboSpan" id="kobo.474.1">;
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.475.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.476.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.477.1">countChanged</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.478.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.479.1">emit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.480.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.481.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.482.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.483.1">count</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.484.1">)</span></strong></span><span class="koboSpan" id="kobo.485.1">;
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.486.1">Then, we’ll </span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.487.1">listen in </span><code class="inlineCode"><span class="koboSpan" id="kobo.488.1">app.component.html</span></code><span class="koboSpan" id="kobo.489.1"> for the previously emitted event</span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.490.1"> from </span><code class="inlineCode"><span class="koboSpan" id="kobo.491.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.492.1"> and update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.493.1">notificationsCount</span></code><span class="koboSpan" id="kobo.494.1"> property accordingly:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.495.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.496.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.497.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.498.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.499.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.500.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.501.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.502.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.503.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.504.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.505.1">app-notifications-manager</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.506.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.507.1">countChanged</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.508.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.509.1">"updateNotificationsCount($event)</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.510.1">"</span></span>
<span class="hljs-string"> </span><span class="hljs-tag"><span class="koboSpan" id="kobo.511.1">[</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.512.1">count</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.513.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.514.1">"notificationsCount"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.515.1">&gt;</span></span>
<span class="hljs-tag"> </span><span class="koboSpan" id="kobo.516.1">&lt;/</span><span class="hljs-name"><span class="koboSpan" id="kobo.517.1">app-notifications</span></span><span class="koboSpan" id="kobo.518.1">- </span><span class="hljs-name"><span class="koboSpan" id="kobo.519.1">manager</span></span><span class="koboSpan" id="kobo.520.1">&gt;
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.521.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.522.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.523.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.524.1">Since we’ve listened to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.525.1">countChanged</span></code><span class="koboSpan" id="kobo.526.1"> event previously and called the </span><code class="inlineCode"><span class="koboSpan" id="kobo.527.1">updateNotificationsCount</span></code><span class="koboSpan" id="kobo.528.1"> method, we need to create this method in </span><code class="inlineCode"><span class="koboSpan" id="kobo.529.1">app.component.ts</span></code><span class="koboSpan" id="kobo.530.1"> and update the value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.531.1">notificationsCount</span></code><span class="koboSpan" id="kobo.532.1"> property accordingly:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.533.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.534.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.535.1">AppComponent</span></span><span class="koboSpan" id="kobo.536.1"> {
  notificationsCount = </span><span class="hljs-number"><span class="koboSpan" id="kobo.537.1">10</span></span><span class="koboSpan" id="kobo.538.1">;
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.539.1">updateNotificationsCount</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.540.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.541.1">count: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.542.1">number</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.543.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.544.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.545.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.546.1">notificationsCount</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.547.1"> = count;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.548.1">}</span></strong></span><span class="koboSpan" id="kobo.549.1">
}
</span></code></pre>
</li>
</ol>
<h2 class="heading-2" id="_idParaDest-19"><span class="koboSpan" id="kobo.550.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.551.1">In order to communicate between components using </span><code class="inlineCode"><span class="koboSpan" id="kobo.552.1">@Input()</span></code><span class="koboSpan" id="kobo.553.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.554.1">@Output()</span></code><span class="koboSpan" id="kobo.555.1"> properties, the data flow will always go </span><em class="italic"><span class="koboSpan" id="kobo.556.1">from</span></em><span class="koboSpan" id="kobo.557.1"> the </span><strong class="keyWord"><span class="koboSpan" id="kobo.558.1">child components</span></strong> <em class="italic"><span class="koboSpan" id="kobo.559.1">to</span></em><span class="koboSpan" id="kobo.560.1"> the </span><strong class="keyWord"><span class="koboSpan" id="kobo.561.1">parent component via output event emitters</span></strong><span class="koboSpan" id="kobo.562.1"> (</span><code class="inlineCode"><span class="koboSpan" id="kobo.563.1">@Output()</span></code><span class="koboSpan" id="kobo.564.1">), </span><strong class="keyWord"><span class="koboSpan" id="kobo.565.1">and from the parent component to the child component via input bindings</span></strong><span class="koboSpan" id="kobo.566.1"> (</span><code class="inlineCode"><span class="koboSpan" id="kobo.567.1">@Input()</span></code><span class="koboSpan" id="kobo.568.1">). </span><span class="koboSpan" id="kobo.568.2">In general, when two sibling components have to communicate, one of them has to use an output emitter to pass the value to the parent, which can then provide the new (updated) value </span><em class="italic"><span class="koboSpan" id="kobo.569.1">as an input</span></em><span class="koboSpan" id="kobo.570.1"> to the other child components. </span><span class="koboSpan" id="kobo.570.2">So, </span><code class="inlineCode"><span class="koboSpan" id="kobo.571.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.572.1"> emits the </span><code class="inlineCode"><span class="koboSpan" id="kobo.573.1">countChanged</span></code><span class="koboSpan" id="kobo.574.1"> event. </span><code class="inlineCode"><span class="koboSpan" id="kobo.575.1">AppComponent</span></code><span class="koboSpan" id="kobo.576.1"> (being the parent component) listens for the event and updates the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.577.1">notificationsCount</span></code><span class="koboSpan" id="kobo.578.1">, which automatically updates the </span><code class="inlineCode"><span class="koboSpan" id="kobo.579.1">count</span></code><span class="koboSpan" id="kobo.580.1"> property in </span><code class="inlineCode"><span class="koboSpan" id="kobo.581.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.582.1"> because </span><code class="inlineCode"><span class="koboSpan" id="kobo.583.1">notificationsCount</span></code><span class="koboSpan" id="kobo.584.1"> is being passed as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.585.1">@Input()</span></code><span class="koboSpan" id="kobo.586.1"> count to </span><code class="inlineCode"><span class="koboSpan" id="kobo.587.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.588.1">. </span><em class="italic"><span class="koboSpan" id="kobo.589.1">Figure 1.3</span></em><span class="koboSpan" id="kobo.590.1"> shows the entire process:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.591.1"><img alt="" role="presentation" src="../Images/B18469_01_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.592.1">Figure 1.3: How component communication works with inputs and outputs</span></p>
<h2 class="heading-2" id="_idParaDest-20"><span class="koboSpan" id="kobo.593.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.594.1">How do Angular components communicate? </span><a href="https://www.thirdrocktechkno.com/blog/how-angular-components-communicate"><span class="url"><span class="koboSpan" id="kobo.595.1">https://www.thirdrocktechkno.com/blog/how-angular-components-communicate</span></span></a></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.596.1">Component Communication in Angular</span></em><span class="koboSpan" id="kobo.597.1"> by Dhananjay Kumar: </span><a href="https://www.youtube.com/watch?v=I8Z8g9APaDY"><span class="url"><span class="koboSpan" id="kobo.598.1">https://www.youtube.com/watch?v=I8Z8g9APaDY</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-21"><span class="koboSpan" id="kobo.599.1">Component communication using services</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.600.1">In this </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.601.1">recipe, you’ll start with an app</span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.602.1"> with a parent component and a child component. </span><span class="koboSpan" id="kobo.602.2">You’ll then use an Angular service to establish communication between them. </span><span class="koboSpan" id="kobo.602.3">We’re going to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.603.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.604.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.605.1">Observable</span></code><span class="koboSpan" id="kobo.606.1"> streams to communicate between components and the service.</span></p>
<h2 class="heading-2" id="_idParaDest-22"><span class="koboSpan" id="kobo.607.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.608.1">The project for this recipe resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.609.1">start/apps/chapter01/cc-services</span></code><span class="koboSpan" id="kobo.610.1">:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.611.1">Open the project in Visual Studio Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.612.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.613.1">npm run serve cc-services
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.614.1">This should open the app in a new browser tab, and you should see the app as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.615.1"><img alt="" role="presentation" src="../Images/B18469_01_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.616.1">Figure 1.4: The cc-services app running on http://localhost:4200</span></p></li>
</ol>
<h2 class="heading-2" id="_idParaDest-23"><span class="koboSpan" id="kobo.617.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.618.1">Similar to the previous recipe, we have an app with </span><code class="inlineCode"><span class="koboSpan" id="kobo.619.1">AppComponent</span></code><span class="koboSpan" id="kobo.620.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.621.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.622.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.623.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.624.1">. </span><code class="inlineCode"><span class="koboSpan" id="kobo.625.1">AppComponent</span></code><span class="koboSpan" id="kobo.626.1"> is the parent of the other two components mentioned previously, and we need to establish the </span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.627.1">appropriate communication between them using the following steps:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.628.1">From the terminal, make sure you are at the root of the workspace, and create a new service called </span><code class="inlineCode"><span class="koboSpan" id="kobo.629.1">NotificationsService</span></code><span class="koboSpan" id="kobo.630.1"> by running the following command:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.631.1">cd start &amp;&amp; nx g s services/Notifications --project cc-services
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.632.1">Create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.633.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.634.1"> named </span><code class="inlineCode"><span class="koboSpan" id="kobo.635.1">count$</span></code><span class="koboSpan" id="kobo.636.1"> inside </span><code class="inlineCode"><span class="koboSpan" id="kobo.637.1">notifications.service.ts</span></code><span class="koboSpan" id="kobo.638.1"> and initialize</span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.639.1"> it with </span><code class="inlineCode"><span class="koboSpan" id="kobo.640.1">0</span></code><span class="koboSpan" id="kobo.641.1"> (a </span><code class="inlineCode"><span class="koboSpan" id="kobo.642.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.643.1"> requires an initial value):
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.644.1">import</span></span><span class="koboSpan" id="kobo.645.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.646.1">Injectable</span></span><span class="koboSpan" id="kobo.647.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.648.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.649.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.650.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.651.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.652.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.653.1">BehaviorSubject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.654.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.655.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.656.1">'rxjs'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.657.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.658.1">@Injectable</span></span><span class="koboSpan" id="kobo.659.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.660.1">providedIn</span></span><span class="koboSpan" id="kobo.661.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.662.1">'root'</span></span><span class="koboSpan" id="kobo.663.1">
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.664.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.665.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.666.1">NotificationsService</span></span><span class="koboSpan" id="kobo.667.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.668.1">count$ = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.669.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.670.1">BehaviorSubject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.671.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.672.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.673.1">);</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.674.1">setCount</span></span><span class="koboSpan" id="kobo.675.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.676.1">value: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.677.1">number</span></span><span class="koboSpan" id="kobo.678.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.679.1">this</span></span><span class="koboSpan" id="kobo.680.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.681.1">count$</span></span><span class="koboSpan" id="kobo.682.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.683.1">next</span></span><span class="koboSpan" id="kobo.684.1">(value);
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.685.1">Rename the </span><code class="inlineCode"><span class="koboSpan" id="kobo.686.1">notificationsCount</span></code><span class="koboSpan" id="kobo.687.1"> property in </span><code class="inlineCode"><span class="koboSpan" id="kobo.688.1">notifications-manager.component.ts</span></code><span class="koboSpan" id="kobo.689.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.690.1">notificationsCount$</span></code><span class="koboSpan" id="kobo.691.1"> and assign the services’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.692.1">count$</span></code><span class="koboSpan" id="kobo.693.1"> property to it as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.694.1">import</span></span><span class="koboSpan" id="kobo.695.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.696.1">Component</span></span><span class="koboSpan" id="kobo.697.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.698.1">inject</span></strong></span><span class="koboSpan" id="kobo.699.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.700.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.701.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.702.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.703.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.704.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.705.1">NotificationsService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.706.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.707.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.708.1">'../services/notifications.service'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.709.1">;</span></strong></span><span class="koboSpan" id="kobo.710.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.711.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.712.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.713.1">NotificationsManagerComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.714.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.715.1">OnInit</span></span><span class="koboSpan" id="kobo.716.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.717.1">notificationService = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.718.1">inject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.719.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.720.1">NotificationsService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.721.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.722.1">notificationsCount$ = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.723.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.724.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.725.1">notificationService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.726.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.727.1">count$</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.728.1">;</span></strong></span><span class="koboSpan" id="kobo.729.1">
...
</span><span class="koboSpan" id="kobo.729.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.730.1">Modify the functions with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.731.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.732.1"> to update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.733.1">Behavior Subject</span></code><span class="koboSpan" id="kobo.734.1"> value as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.735.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.736.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.737.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.738.1">NotificationsManagerComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.739.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.740.1">OnInit</span></span><span class="koboSpan" id="kobo.741.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.742.1">addNotification</span></span><span class="koboSpan" id="kobo.743.1">() {
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.744.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.745.1"> currentValue =</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.746.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.747.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.748.1">notificationsCount$</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.749.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.750.1">getValue</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.751.1">();</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.752.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.753.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.754.1">notificationService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.755.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.756.1">setCount</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.757.1">(currentValue + </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.758.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.759.1">);</span></strong></span><span class="koboSpan" id="kobo.760.1">
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.761.1">removeNotification</span></span><span class="koboSpan" id="kobo.762.1">() {
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.763.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.764.1"> currentValue =</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.765.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.766.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.767.1">notificationsCount$</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.768.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.769.1">getValue</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.770.1">();</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.771.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.772.1"> (currentValue === </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.773.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.774.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.775.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.776.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.777.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.778.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.779.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.780.1">notificationService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.781.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.782.1">setCount</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.783.1">(currentValue - </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.784.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.785.1">);</span></strong></span><span class="koboSpan" id="kobo.786.1">
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.787.1">resetCount</span></span><span class="koboSpan" id="kobo.788.1">() {
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.789.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.790.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.791.1">notificationService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.792.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.793.1">setCount</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.794.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.795.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.796.1">);</span></strong></span><span class="koboSpan" id="kobo.797.1">
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.798.1">Use </span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.799.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.800.1">notificationsCount$</span></code><span class="koboSpan" id="kobo.801.1"> Observable in </span><code class="inlineCode"><span class="koboSpan" id="kobo.802.1">notifications-manager.component.html</span></code><span class="koboSpan" id="kobo.803.1"> with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.804.1">async</span></code><span class="koboSpan" id="kobo.805.1"> pipe to </span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.806.1">show its value:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.807.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.808.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.809.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.810.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.811.1">"notif-manager"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.812.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.813.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.814.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.815.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.816.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.817.1">"notif-manager__count"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.818.1">&gt;</span></span><span class="koboSpan" id="kobo.819.1">
    Notifications Count: {{</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.820.1">notificationsCount$ | async</span></strong></span><span class="koboSpan" id="kobo.821.1">}}
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.822.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.823.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.824.1">&gt;</span></span><span class="koboSpan" id="kobo.825.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.826.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.827.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.828.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.829.1">Now, similarly inject </span><code class="inlineCode"><span class="koboSpan" id="kobo.830.1">NotificationsService</span></code><span class="koboSpan" id="kobo.831.1"> in </span><code class="inlineCode"><span class="koboSpan" id="kobo.832.1">notifications-button.component.ts</span></code><span class="koboSpan" id="kobo.833.1">, create an Observable named </span><code class="inlineCode"><span class="koboSpan" id="kobo.834.1">notificationsCount$</span></code><span class="koboSpan" id="kobo.835.1"> inside </span><code class="inlineCode"><span class="koboSpan" id="kobo.836.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.837.1">, and assign the service’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.838.1">count$</span></code><span class="koboSpan" id="kobo.839.1"> Observable to it:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.840.1">import</span></span><span class="koboSpan" id="kobo.841.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.842.1">Component</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.843.1">, inject</span></strong></span><span class="koboSpan" id="kobo.844.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.845.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.846.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.847.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.848.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.849.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.850.1">NotificationsService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.851.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.852.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.853.1">'../services/notifications.service'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.854.1">;</span></strong></span><span class="koboSpan" id="kobo.855.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.856.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.857.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.858.1">NotificationsButtonComponent</span></span><span class="koboSpan" id="kobo.859.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.860.1">notificationsCount$ = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.861.1">inject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.862.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.863.1">NotificationsService</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.864.1">).</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.865.1">count$</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.866.1">;</span></strong></span><span class="koboSpan" id="kobo.867.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.868.1">Use </span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.869.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.870.1">notificationsCount$</span></code><span class="koboSpan" id="kobo.871.1"> Observable in </span><code class="inlineCode"><span class="koboSpan" id="kobo.872.1">notifications-button.component.html</span></code><span class="koboSpan" id="kobo.873.1"> with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.874.1">async</span></code><span class="koboSpan" id="kobo.875.1"> pipe:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.876.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.877.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.878.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.879.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.880.1">"bell"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.881.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.882.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.883.1">i</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.884.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.885.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.886.1">"material-icons"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.887.1">&gt;</span></span><span class="koboSpan" id="kobo.888.1">notifications</span><span class="hljs-tag"><span class="koboSpan" id="kobo.889.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.890.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.891.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.892.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.893.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.894.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.895.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.896.1">"bell__count"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.897.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.898.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.899.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.900.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.901.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.902.1">"bell__count__digits"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.903.1">&gt;</span></span><span class="koboSpan" id="kobo.904.1">
      {{</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.905.1">notificationsCount$ | async</span></strong></span><span class="koboSpan" id="kobo.906.1">}}
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.907.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.908.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.909.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.910.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.911.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.912.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.913.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.914.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.915.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.916.1">If you refresh the app now, you should be able to see the value </span><code class="inlineCode"><span class="koboSpan" id="kobo.917.1">0</span></code><span class="koboSpan" id="kobo.918.1"> for both the notifications manager component and the notifications button component.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.919.1">Change </span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.920.1">the initial value for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.921.1">count BehaviorSubject</span></code><span class="koboSpan" id="kobo.922.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.923.1">10</span></code><span class="koboSpan" id="kobo.924.1"> and see whether that reflects in both components:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.925.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.926.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.927.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.928.1">NotificationsService</span></span><span class="koboSpan" id="kobo.929.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.930.1">private</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.931.1">count</span></span><span class="koboSpan" id="kobo.932.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.933.1">BehaviorSubject</span></span><span class="koboSpan" id="kobo.934.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.935.1">number</span></span><span class="koboSpan" id="kobo.936.1">&gt; = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.937.1">new</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.938.1">BehaviorSubject</span></span><span class="koboSpan" id="kobo.939.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.940.1">number</span></span><span class="koboSpan" id="kobo.941.1">&gt;(</span><span class="code-highlight"><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.942.1">10</span></strong></span><span class="koboSpan" id="kobo.943.1">);
  ...
</span><span class="koboSpan" id="kobo.943.2">}
</span></code></pre>
</li>
</ol>
<h2 class="heading-2" id="_idParaDest-24"><span class="koboSpan" id="kobo.944.1">How it works…</span></h2>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.945.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.946.1"> is a</span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.947.1"> special type of </span><strong class="keyWord"><span class="koboSpan" id="kobo.948.1">Observable</span></strong><span class="koboSpan" id="kobo.949.1"> that</span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.950.1"> requires an initial value and can be used by many subscribers. </span><span class="koboSpan" id="kobo.950.2">In </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.951.1">this recipe, we create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.952.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.953.1"> to store the value of the notifications count.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.954.1">Once we have created the </span><code class="inlineCode"><span class="koboSpan" id="kobo.955.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.956.1"> named </span><code class="inlineCode"><span class="koboSpan" id="kobo.957.1">count$</span></code><span class="koboSpan" id="kobo.958.1">, we inject </span><code class="inlineCode"><span class="koboSpan" id="kobo.959.1">NotificationsService</span></code><span class="koboSpan" id="kobo.960.1"> in our components using the (fairly new) </span><code class="inlineCode"><span class="koboSpan" id="kobo.961.1">inject</span></code><span class="koboSpan" id="kobo.962.1"> function and assign the </span><code class="inlineCode"><span class="koboSpan" id="kobo.963.1">count$</span></code><span class="koboSpan" id="kobo.964.1"> property of the service to a property of the components. </span><span class="koboSpan" id="kobo.964.2">This allows us to work with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.965.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.966.1"> in both the </span><code class="inlineCode"><span class="koboSpan" id="kobo.967.1">NotificationsButtonComponent</span></code><span class="koboSpan" id="kobo.968.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.969.1">NotificationsManagerComponent</span></code><span class="koboSpan" id="kobo.970.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.971.1">Then we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.972.1">notificationsCount$</span></code><span class="koboSpan" id="kobo.973.1"> property in the templates of both above-mentioned functions to be able to render the count value. </span><span class="koboSpan" id="kobo.973.2">Notice that we use the </span><strong class="keyWord"><span class="koboSpan" id="kobo.974.1">async</span></strong><span class="koboSpan" id="kobo.975.1"> pipe in the templates. </span><span class="koboSpan" id="kobo.975.2">This helps Angular to let the template subscribe to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.976.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.977.1"> when the component is rendered and to unsubscribe automatically when the component is destroyed.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.978.1">To update the </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.979.1">value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.980.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.981.1">, we use its </span><code class="inlineCode"><span class="koboSpan" id="kobo.982.1">next</span></code><span class="koboSpan" id="kobo.983.1"> method by providing the new value to be set. </span><span class="koboSpan" id="kobo.983.2">As soon as the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.984.1">count$</span></code><span class="koboSpan" id="kobo.985.1"> is updated, the components rerender the new value, thanks to RxJS and Angular’s change detection.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.986.1"><img alt="" role="presentation" src="../Images/B18469_01_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.987.1">Figure 1.5: How component communication works using an Angular service</span></p>
<h2 class="heading-2" id="_idParaDest-25"><span class="koboSpan" id="kobo.988.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.989.1">Subjects from RxJS’s official documentation: </span><a href="https://www.learnrxjs.io/learn-rxjs/subjects"><span class="url"><span class="koboSpan" id="kobo.990.1">https://www.learnrxjs.io/learn-rxjs/subjects</span></span></a></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.991.1">BehaviorSubject</span></code><span class="koboSpan" id="kobo.992.1"> versus </span><strong class="keyWord"><span class="koboSpan" id="kobo.993.1">Observable</span></strong><span class="koboSpan" id="kobo.994.1"> on Stack Overflow: </span><a href="https://stackoverflow.com/a/40231605"><span class="url"><span class="koboSpan" id="kobo.995.1">https://stackoverflow.com/a/40231605</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-26"><span class="koboSpan" id="kobo.996.1">Using setters for intercepting input property changes</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.997.1">In this recipe, you</span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.998.1"> will learn how to intercept </span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.999.1">changes in an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1000.1">@Input</span></code><span class="koboSpan" id="kobo.1001.1"> passed from a parent component and how to perform some action on this event. </span><span class="koboSpan" id="kobo.1001.2">We’ll intercept the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1002.1">vName</span></code><span class="koboSpan" id="kobo.1003.1"> input passed from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1004.1">VersionControlComponent</span></code><span class="koboSpan" id="kobo.1005.1"> parent component to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1006.1">VcLogsComponent</span></code><span class="koboSpan" id="kobo.1007.1"> child component. </span><span class="koboSpan" id="kobo.1007.2">We’ll use </span><em class="italic"><span class="koboSpan" id="kobo.1008.1">setters</span></em><span class="koboSpan" id="kobo.1009.1"> to generate a log whenever the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1010.1">vName</span></code><span class="koboSpan" id="kobo.1011.1"> changes and will show those logs in the child component.</span></p>
<h2 class="heading-2" id="_idParaDest-27"><span class="koboSpan" id="kobo.1012.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1013.1">The project for this recipe resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1014.1">start/apps/chapter01/cc-setters</span></code><span class="koboSpan" id="kobo.1015.1">:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1016.1">Open the project in Visual Studio Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1017.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1018.1">npm run serve cc-setters
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1019.1">This should open the app in a new browser tab, and you should see the app as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1020.1"><img alt="" role="presentation" src="../Images/B18469_01_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1021.1">Figure 1.6: The cc-setters app running on http://localhost:4200</span></p></li>
</ol>
<h2 class="heading-2" id="_idParaDest-28"><span class="koboSpan" id="kobo.1022.1">How to do it…</span></h2>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1023.1">We’ll first create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1024.1">logs</span></code><span class="koboSpan" id="kobo.1025.1"> array in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1026.1">VcLogsComponent</span></code><span class="koboSpan" id="kobo.1027.1"> as follows to store all the logs that we’ll display later using our template:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1028.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1029.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1030.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1031.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1032.1">OnInit</span></span><span class="koboSpan" id="kobo.1033.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1034.1">@Input</span></span><span class="koboSpan" id="kobo.1035.1">() vName;
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1036.1">logs</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1037.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1038.1">string</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1039.1">[] = [];</span></strong></span><span class="koboSpan" id="kobo.1040.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1041.1">Let’s modify </span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.1042.1">the HTML template </span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.1043.1">so we can show the logs. </span><span class="koboSpan" id="kobo.1043.2">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1044.1">vc-logs.component.html</span></code><span class="koboSpan" id="kobo.1045.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1046.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1047.1">h5</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1048.1">&gt;</span></span><span class="koboSpan" id="kobo.1049.1">Latest Version = {{vName}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1050.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1051.1">h5</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1052.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1053.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1054.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1055.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1056.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1057.1">"logs"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1058.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1059.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1060.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1061.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1062.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1063.1">"logs__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1064.1"> *</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1065.1">ngFor</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1066.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1067.1">"let log of logs"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1068.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1069.1">{{log}}</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1070.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1071.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1072.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1073.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1074.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1075.1">&gt;</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1076.1">The following screenshot shows the app with the logs container:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1077.1"><img alt="" role="presentation" src="../Images/B18469_01_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1078.1">Figure 1.7: The cc-setters app with logs container</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.1079.1">Now, we’ll convert the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1080.1">@Input()</span></code><span class="koboSpan" id="kobo.1081.1"> in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1082.1">vc-logs.component.ts</span></code><span class="koboSpan" id="kobo.1083.1"> to use a </span><em class="italic"><span class="koboSpan" id="kobo.1084.1">getter</span></em><span class="koboSpan" id="kobo.1085.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.1086.1">setter</span></em><span class="koboSpan" id="kobo.1087.1"> so we can intercept the input changes. </span><span class="koboSpan" id="kobo.1087.2">To do that, we’ll also create an internal property named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1088.1">_vName</span></code><span class="koboSpan" id="kobo.1089.1">. </span><span class="koboSpan" id="kobo.1089.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1090.1">import</span></span><span class="koboSpan" id="kobo.1091.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1092.1">Component</span></span><span class="koboSpan" id="kobo.1093.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1094.1">Input</span></strong></span><span class="koboSpan" id="kobo.1095.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1096.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1097.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1098.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1099.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1100.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1101.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1102.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1103.1">OnInit</span></span><span class="koboSpan" id="kobo.1104.1"> {
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.1105.1">@Input</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1106.1">()</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1107.1">get</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1108.1">vName</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1109.1">() {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1110.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1111.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1112.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1113.1">_vName</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1114.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1115.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1116.1">set</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1117.1">vName</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1118.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1119.1">name: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1120.1">string</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1121.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1122.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1123.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1124.1">_vName</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1125.1"> = name;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1126.1">}</span></strong></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.1127.1">logs</span></span><span class="koboSpan" id="kobo.1128.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1129.1">string</span></span><span class="koboSpan" id="kobo.1130.1">[] = [];
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1131.1">_vName!: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1132.1">string</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1133.1">;</span></strong></span><span class="koboSpan" id="kobo.1134.1">
...
</span><span class="koboSpan" id="kobo.1134.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1135.1">Modify </span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.1136.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1137.1">setter</span></code><span class="koboSpan" id="kobo.1138.1"> to create some </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.1139.1">logs now. </span><span class="koboSpan" id="kobo.1139.2">We’ll push a new log to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1140.1">logs </span></code><span class="koboSpan" id="kobo.1141.1">array whenever the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1142.1">vName</span></code><span class="koboSpan" id="kobo.1143.1"> changes. </span><span class="koboSpan" id="kobo.1143.2">For the first time, we’ll push a log saying </span><code class="inlineCode"><span class="koboSpan" id="kobo.1144.1">'initial version is x.x.x'</span></code><span class="koboSpan" id="kobo.1145.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1146.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1147.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1148.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1149.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1150.1">OnInit</span></span><span class="koboSpan" id="kobo.1151.1"> {
  ...
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1152.1">set</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1153.1">vName</span></span><span class="koboSpan" id="kobo.1154.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1155.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1156.1">string</span></span><span class="koboSpan" id="kobo.1157.1">) {
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1158.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1159.1"> (!</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1160.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1161.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1162.1">_vName</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1163.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1164.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1165.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1166.1">logs</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1167.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1168.1">push</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1169.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1170.1">`initial version is </span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1171.1">${name.trim()}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1172.1">`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1173.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1174.1">}</span></strong></span>
<span class="hljs-variable"><span class="koboSpan" id="kobo.1175.1">this</span></span><span class="koboSpan" id="kobo.1176.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1177.1">_vName</span></span><span class="koboSpan" id="kobo.1178.1"> = name;
  }
...
</span><span class="koboSpan" id="kobo.1178.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1179.1">Now, every</span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.1180.1"> time we change the </span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.1181.1">version name, we need to show a different message saying </span><code class="inlineCode"><span class="koboSpan" id="kobo.1182.1">'version changed to x.x.x'</span></code><span class="koboSpan" id="kobo.1183.1">. </span><em class="italic"><span class="koboSpan" id="kobo.1184.1">Figure 1.8</span></em><span class="koboSpan" id="kobo.1185.1"> shows the final output. </span><span class="koboSpan" id="kobo.1185.2">To make the required changes, let’s modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1186.1">vName</span></code><span class="koboSpan" id="kobo.1187.1"> setter as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1188.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1189.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1190.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1191.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1192.1">OnInit</span></span><span class="koboSpan" id="kobo.1193.1"> {
  ...
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1194.1">set</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1195.1">vName</span></span><span class="koboSpan" id="kobo.1196.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1197.1">name: </span></span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1198.1">string</span></span><span class="koboSpan" id="kobo.1199.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1200.1">if</span></span><span class="koboSpan" id="kobo.1201.1"> (!name) </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1202.1">return</span></span><span class="koboSpan" id="kobo.1203.1">;
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1204.1">if</span></span><span class="koboSpan" id="kobo.1205.1"> (!</span><span class="hljs-variable"><span class="koboSpan" id="kobo.1206.1">this</span></span><span class="koboSpan" id="kobo.1207.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1208.1">_vName</span></span><span class="koboSpan" id="kobo.1209.1">) {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1210.1">this</span></span><span class="koboSpan" id="kobo.1211.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1212.1">logs</span></span><span class="koboSpan" id="kobo.1213.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1214.1">push</span></span><span class="koboSpan" id="kobo.1215.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1216.1">`initial version is </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1217.1">${name.trim()}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1218.1">`</span></span><span class="koboSpan" id="kobo.1219.1">)
    }</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1220.1">else</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1221.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1222.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1223.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1224.1">logs</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1225.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1226.1">push</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1227.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1228.1">`version changed to </span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1229.1">${name.trim()}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1230.1">`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1231.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1232.1">}</span></strong></span>
<span class="hljs-variable"><span class="koboSpan" id="kobo.1233.1">this</span></span><span class="koboSpan" id="kobo.1234.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1235.1">_vName</span></span><span class="koboSpan" id="kobo.1236.1"> = name;
  }
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1237.1">The following screenshot shows the final output:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1238.1"><img alt="" role="presentation" src="../Images/B18469_01_08.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1239.1">Figure 1.8: Final output using the setter</span></p> </li>
</ol>
<h2 class="heading-2" id="_idParaDest-29"><span class="koboSpan" id="kobo.1240.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1241.1">JavaScript </span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.1242.1">has </span><code class="inlineCode"><span class="koboSpan" id="kobo.1243.1">getters</span></code><span class="koboSpan" id="kobo.1244.1"> as functions that </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.1245.1">return a dynamically computed value. </span><span class="koboSpan" id="kobo.1245.2">It also has </span><code class="inlineCode"><span class="koboSpan" id="kobo.1246.1">setters</span></code><span class="koboSpan" id="kobo.1247.1"> as functions that execute some logic when the targeted property changes. </span><span class="koboSpan" id="kobo.1247.2">Angular uses TypeScript, which is a superset of JavaScript and Angular’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.1248.1">@Input()</span></code><span class="koboSpan" id="kobo.1249.1"> properties can also use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1250.1">getters</span></code><span class="koboSpan" id="kobo.1251.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1252.1">setters</span></code><span class="koboSpan" id="kobo.1253.1"> since they’re basically properties of the provided class.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1254.1"><img alt="" role="presentation" src="../Images/B18469_01_09.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1255.1">Figure 1.9: Diagram explaining the flow of data in the cc-setters app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1256.1">For this recipe, we </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.1257.1">use a getter and a setter </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.1258.1">for our input named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1259.1">vName</span></code><span class="koboSpan" id="kobo.1260.1"> so whenever the input changes, we use the setter function to push the new version to the logs list. </span><span class="koboSpan" id="kobo.1260.2">Then we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1261.1">logs</span></code><span class="koboSpan" id="kobo.1262.1"> array in the template to render the list of logs on the view.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1263.1">It is always a good idea to use a private variable/property along with the property using getters and setters. </span><span class="koboSpan" id="kobo.1263.2">This is so that we can modify the private property in our component and the template only accesses the public property using the getter.</span></p>
<h2 class="heading-2" id="_idParaDest-30"><span class="koboSpan" id="kobo.1264.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1265.1">Angular’s official docs for setters: </span><a href="https://angular.io/guide/component-interaction#intercept-input-property-changes-with-a-setter"><span class="url"><span class="koboSpan" id="kobo.1266.1">https://angular.io/guide/component-interaction#intercept-input-property-changes-with-a-setter</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1267.1">Mozilla’s official docs for a getter function: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get"><span class="url"><span class="koboSpan" id="kobo.1268.1">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1269.1">Mozilla’s official docs for a setter function: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set"><span class="url"><span class="koboSpan" id="kobo.1270.1">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-31"><span class="koboSpan" id="kobo.1271.1">Using ngOnChanges to intercept input property changes</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1272.1">In this recipe, you’ll</span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.1273.1"> learn how to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1274.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1275.1"> to intercept changes using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1276.1">SimpleChanges</span></code><span class="koboSpan" id="kobo.1277.1"> API. </span><span class="koboSpan" id="kobo.1277.2">We’ll listen to a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1278.1">vName</span></code><span class="koboSpan" id="kobo.1279.1"> input </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.1280.1">passed from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1281.1">VersionControlComponent</span></code><span class="koboSpan" id="kobo.1282.1"> parent component to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1283.1">VcLogsComponent</span></code><span class="koboSpan" id="kobo.1284.1"> child component.</span></p>
<h2 class="heading-2" id="_idParaDest-32"><span class="koboSpan" id="kobo.1285.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1286.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1287.1">start/apps/chapter01/cc-ng-on-changes</span></code><span class="koboSpan" id="kobo.1288.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1289.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1290.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1291.1">npm run serve cc-ng-on-changes
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1292.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1293.1"><img alt="" role="presentation" src="../Images/B18469_01_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1294.1">Figure 1.10: The cc-ng-on-changes app running on http://localhost:4200</span></p></li>
</ol>
<h2 class="heading-2" id="_idParaDest-33"><span class="koboSpan" id="kobo.1295.1">How to do it…</span></h2>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1296.1">We’ll first </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.1297.1">create a</span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.1298.1"> logs array in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1299.1">VcLogsComponent</span></code><span class="koboSpan" id="kobo.1300.1"> as follows to store all the logs that we’ll display later using our template:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1301.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1302.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1303.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1304.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1305.1">OnInit</span></span><span class="koboSpan" id="kobo.1306.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1307.1">@Input</span></span><span class="koboSpan" id="kobo.1308.1">() vName;
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1309.1">logs</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1310.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1311.1">string</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1312.1">[] = [];</span></strong></span><span class="koboSpan" id="kobo.1313.1">
...
</span><span class="koboSpan" id="kobo.1313.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1314.1">Let’s create the HTML for where we’ll show the logs. </span><span class="koboSpan" id="kobo.1314.2">Let’s add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1315.1">logs</span></code><span class="koboSpan" id="kobo.1316.1"> container and log items using the following code to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1317.1">vc-logs.component.html</span></code><span class="koboSpan" id="kobo.1318.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1319.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1320.1">h5</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1321.1">&gt;</span></span><span class="koboSpan" id="kobo.1322.1">Latest Version = {{vName}}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1323.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1324.1">h5</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1325.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1326.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1327.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1328.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1329.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1330.1">"logs"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1331.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1332.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1333.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1334.1">class</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1335.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1336.1">"logs__item"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1337.1"> *</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1338.1">ngFor</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1339.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1340.1">"let log of logs"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1341.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1342.1">{{log}}</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1343.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1344.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1345.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1346.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1347.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1348.1">&gt;</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1349.1">The following screenshot shows the app with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1350.1">logs</span></code><span class="koboSpan" id="kobo.1351.1"> container:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1352.1"><img alt="" role="presentation" src="../Images/B18469_01_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1353.1">Figure 1.11: The cc-ng-on-changes app with logs container</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.1354.1">Now, let’s</span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.1355.1"> implement </span><code class="inlineCode"><span class="koboSpan" id="kobo.1356.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1357.1"> using simple changes in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1358.1">VcLogsComponent</span></code><span class="koboSpan" id="kobo.1359.1"> as follows in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1360.1">vc-logs.component.ts</span></code><span class="koboSpan" id="kobo.1361.1"> file:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1362.1">import</span></span><span class="koboSpan" id="kobo.1363.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1364.1">Component</span></span><span class="koboSpan" id="kobo.1365.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1366.1">Input</span></span><span class="koboSpan" id="kobo.1367.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1368.1">OnChanges</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1369.1">,</span></strong></span> <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1370.1">SimpleChanges</span></strong></span><span class="koboSpan" id="kobo.1371.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1372.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1373.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1374.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1375.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1376.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1377.1">VcLogsComponent</span></span> <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1378.1">implements</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1379.1">OnChanges</span></strong></span><span class="koboSpan" id="kobo.1380.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1381.1">@Input</span></span><span class="koboSpan" id="kobo.1382.1">() vName;
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1383.1">logs</span></span><span class="koboSpan" id="kobo.1384.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1385.1">string</span></span><span class="koboSpan" id="kobo.1386.1">[] = [];
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1387.1">ngOnChanges</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1388.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1389.1">changes: SimpleChanges</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1390.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1391.1">}</span></strong></span><span class="koboSpan" id="kobo.1392.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1393.1">We now can add a</span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.1394.1"> log for the initial value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1395.1">vName</span></code><span class="koboSpan" id="kobo.1396.1"> input saying </span><code class="inlineCode"><span class="koboSpan" id="kobo.1397.1">'initial version is x.x.x'</span></code><span class="koboSpan" id="kobo.1398.1">. </span><span class="koboSpan" id="kobo.1398.2">We do this by checking whether it is the initial value using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1399.1">isFirstChange</span></code><span class="koboSpan" id="kobo.1400.1"> method as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1401.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1402.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1403.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1404.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1405.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1406.1">OnChanges</span></span><span class="koboSpan" id="kobo.1407.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1408.1">ngOnChanges</span></span><span class="koboSpan" id="kobo.1409.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1410.1">changes: SimpleChanges</span></span><span class="koboSpan" id="kobo.1411.1">) {
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1412.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1413.1"> { currentValue } = changes[</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1414.1">'vName'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1415.1">];</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1416.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1417.1"> (changes[</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1418.1">'vName'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1419.1">].</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1420.1">isFirstChange</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1421.1">()) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1422.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1423.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1424.1">logs</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1425.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1426.1">push</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1427.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1428.1">`initial version is </span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1429.1">${currentValue.trim()}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1430.1">`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1431.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1432.1">}</span></strong></span><span class="koboSpan" id="kobo.1433.1">
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1434.1">Let’s </span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.1435.1">handle the case where we update the version after the initial value is assigned. </span><span class="koboSpan" id="kobo.1435.2">For that, we’ll add </span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.1436.1">another log that says </span><code class="inlineCode"><span class="koboSpan" id="kobo.1437.1">'version changed to x.x.x'</span></code><span class="koboSpan" id="kobo.1438.1"> using an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1439.1">else</span></code><span class="koboSpan" id="kobo.1440.1"> condition, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1441.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1442.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1443.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1444.1">VcLogsComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1445.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1446.1">OnInit</span></span><span class="koboSpan" id="kobo.1447.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1448.1">OnChanges</span></span><span class="koboSpan" id="kobo.1449.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1450.1">ngOnChanges</span></span><span class="koboSpan" id="kobo.1451.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1452.1">changes: SimpleChanges</span></span><span class="koboSpan" id="kobo.1453.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1454.1">const</span></span><span class="koboSpan" id="kobo.1455.1"> { currentValue } = changes[</span><span class="hljs-string"><span class="koboSpan" id="kobo.1456.1">'vName'</span></span><span class="koboSpan" id="kobo.1457.1">];
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1458.1">if</span></span><span class="koboSpan" id="kobo.1459.1"> (changes[</span><span class="hljs-string"><span class="koboSpan" id="kobo.1460.1">'vName'</span></span><span class="koboSpan" id="kobo.1461.1">].</span><span class="hljs-title"><span class="koboSpan" id="kobo.1462.1">isFirstChange</span></span><span class="koboSpan" id="kobo.1463.1">()) {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1464.1">this</span></span><span class="koboSpan" id="kobo.1465.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1466.1">logs</span></span><span class="koboSpan" id="kobo.1467.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1468.1">push</span></span><span class="koboSpan" id="kobo.1469.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1470.1">`</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1471.1">initial version is </span></span><span class="hljs-subst"><span class="koboSpan" id="kobo.1472.1">${currentValue.trim()}</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1473.1">`</span></span><span class="koboSpan" id="kobo.1474.1">);
    } </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1475.1">else</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1476.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1477.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1478.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1479.1">logs</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1480.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1481.1">push</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1482.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1483.1">`version changed to </span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1484.1">${currentValue.trim()}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1485.1">`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1486.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1487.1">}</span></strong></span><span class="koboSpan" id="kobo.1488.1">
  }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1489.1">The following screenshot shows the final output:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1490.1"><img alt="" role="presentation" src="../Images/B18469_01_12.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1491.1">Figure 1.12: Final output using ngOnChanges</span></p> </li>
</ol>
<h2 class="heading-2" id="_idParaDest-34"><span class="koboSpan" id="kobo.1492.1">How it works…</span></h2>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.1493.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1494.1"> is</span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.1495.1"> one of the </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.1496.1">many </span><strong class="keyWord"><span class="koboSpan" id="kobo.1497.1">lifecycle hooks</span></strong><span class="koboSpan" id="kobo.1498.1"> that Angular provides out of the box. </span><span class="koboSpan" id="kobo.1498.2">It triggers even before the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1499.1">ngOnInit</span></code><span class="koboSpan" id="kobo.1500.1"> hook. </span><span class="koboSpan" id="kobo.1500.2">So, you get the </span><em class="italic"><span class="koboSpan" id="kobo.1501.1">initial values</span></em><span class="koboSpan" id="kobo.1502.1"> in the first call and the </span><em class="italic"><span class="koboSpan" id="kobo.1503.1">updated values</span></em><span class="koboSpan" id="kobo.1504.1"> later on. </span><span class="koboSpan" id="kobo.1504.2">Whenever any of the inputs change, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1505.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1506.1"> callback is triggered with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1507.1">SimpleChanges</span></code><span class="koboSpan" id="kobo.1508.1">. </span><span class="koboSpan" id="kobo.1508.2">And in the changes, for each </span><code class="inlineCode"><span class="koboSpan" id="kobo.1509.1">@Input()</span></code><span class="koboSpan" id="kobo.1510.1">, you can get the previous value, the current value, and a </span><em class="italic"><span class="koboSpan" id="kobo.1511.1">Boolean</span></em><span class="koboSpan" id="kobo.1512.1"> representing whether this is the first change to the input (that is, the initial value). </span><span class="koboSpan" id="kobo.1512.2">When we update the value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1513.1">vName</span></code><span class="koboSpan" id="kobo.1514.1"> input in the parent, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1515.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1516.1"> gets called with the updated value. </span><span class="koboSpan" id="kobo.1516.2">Then, based on the situation, we add an appropriate log into our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1517.1">logs</span></code><span class="koboSpan" id="kobo.1518.1"> array and display it on the UI.</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1519.1"><img alt="" role="presentation" src="../Images/B18469_01_13.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1520.1">Figure 1.13: How ngOnChanges pushes the new version to the logs array</span></p>
<h2 class="heading-2" id="_idParaDest-35"><span class="koboSpan" id="kobo.1521.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1522.1">Angular lifecycle hooks: </span><a href="https://angular.io/guide/lifecycle-hooks"><span class="url"><span class="koboSpan" id="kobo.1523.1">https://angular.io/guide/lifecycle-hooks</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1524.1">Using change detection hooks with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1525.1">ngOnChanges</span></code><span class="koboSpan" id="kobo.1526.1">: </span><a href="https://angular.io/guide/lifecycle-hooks#using-change-detection-hooks"><span class="url"><span class="koboSpan" id="kobo.1527.1">https://angular.io/guide/lifecycle-hooks#using-change-detection-hooks</span></span></a></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.1528.1">SimpleChanges</span></strong><span class="koboSpan" id="kobo.1529.1"> API reference: </span><a href="https://angular.io/api/core/SimpleChanges "><span class="url"><span class="koboSpan" id="kobo.1530.1">https://angular.io/api/core/SimpleChanges</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-36"><span class="koboSpan" id="kobo.1531.1">Accessing a child component in a parent template via template variables</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1532.1">In this</span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.1533.1"> recipe, you’ll learn how to use </span><strong class="keyWord"><span class="koboSpan" id="kobo.1534.1">Angular template reference variables</span></strong><span class="koboSpan" id="kobo.1535.1"> to access a child component in</span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.1536.1"> the parent component’s template. </span><span class="koboSpan" id="kobo.1536.2">You’ll start with an app having </span><code class="inlineCode"><span class="koboSpan" id="kobo.1537.1">AppComponent </span></code><span class="koboSpan" id="kobo.1538.1">as the parent component </span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.1539.1">and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1540.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1541.1"> as the child component. </span><span class="koboSpan" id="kobo.1541.2">You’ll then create a template variable for the child component in the parent’s template to access it and perform some actions in the component class.</span></p>
<h2 class="heading-2" id="_idParaDest-37"><span class="koboSpan" id="kobo.1542.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1543.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1544.1">start/apps/chapter01/cc-template-vars</span></code><span class="koboSpan" id="kobo.1545.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1546.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1547.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1548.1">npm run serve cc-template-vars
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1549.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1550.1"><img alt="" role="presentation" src="../Images/B18469_01_14.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1551.1">Figure 1.14: The cc-template-vars app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1552.1">Click the buttons at the top to see the respective console logs. </span><span class="koboSpan" id="kobo.1552.2">This shows that we have click handlers already bound to the buttons.</span></p>
<h2 class="heading-2" id="_idParaDest-38"><span class="koboSpan" id="kobo.1553.1">How to do it…</span></h2>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1554.1">We’ll start </span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.1555.1">with creating a template variable named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1556.1">#gallery</span></code><span class="koboSpan" id="kobo.1557.1"> on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1558.1">&lt;app-gallery&gt;</span></code><span class="koboSpan" id="kobo.1559.1"> component in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1560.1">app.component.html</span></code><span class="koboSpan" id="kobo.1561.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1562.1">...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1563.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1564.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1565.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1566.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1567.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1568.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1569.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1570.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1571.1">&gt;</span></span><span class="koboSpan" id="kobo.1572.1">
  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1573.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1574.1">app-gallery</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1575.1">#</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1576.1">gallery</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1577.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1578.1">app-gallery</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1579.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1580.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1581.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1582.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1583.1">Modify </span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.1584.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1585.1">addNewPicture</span></code><span class="koboSpan" id="kobo.1586.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1587.1">removeFirstPicture</span></code><span class="koboSpan" id="kobo.1588.1"> methods in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1589.1">app.component.ts</span></code><span class="koboSpan" id="kobo.1590.1"> to accept an argument named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1591.1">gallery</span></code><span class="koboSpan" id="kobo.1592.1">. </span><span class="koboSpan" id="kobo.1592.2">This is so that we can pass the</span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.1593.1"> template variable </span><code class="inlineCode"><span class="koboSpan" id="kobo.1594.1">#gallery</span></code><span class="koboSpan" id="kobo.1595.1"> to them from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1596.1">app.component.html</span></code><span class="koboSpan" id="kobo.1597.1"> when we click the buttons. </span><span class="koboSpan" id="kobo.1597.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1598.1">import</span></span><span class="koboSpan" id="kobo.1599.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1600.1">Component</span></span><span class="koboSpan" id="kobo.1601.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1602.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1603.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1604.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1605.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1606.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1607.1">GalleryComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1608.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1609.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1610.1">'./components/gallery/gallery.component'</span></strong></span><span class="koboSpan" id="kobo.1611.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1612.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1613.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1614.1">AppComponent</span></span><span class="koboSpan" id="kobo.1615.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1616.1">addNewPicture</span></span><span class="koboSpan" id="kobo.1617.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1618.1">gallery: GalleryComponent</span></strong></span><span class="koboSpan" id="kobo.1619.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1620.1">console</span></span><span class="koboSpan" id="kobo.1621.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1622.1">log</span></span><span class="koboSpan" id="kobo.1623.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1624.1">'added new picture'</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1625.1">, gallery</span></strong></span><span class="koboSpan" id="kobo.1626.1">);
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1627.1">removeFirstPicture</span></span><span class="koboSpan" id="kobo.1628.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1629.1">gallery: GalleryComponent</span></strong></span><span class="koboSpan" id="kobo.1630.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1631.1">console</span></span><span class="koboSpan" id="kobo.1632.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1633.1">log</span></span><span class="koboSpan" id="kobo.1634.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1635.1">'removed first picture'</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1636.1">, gallery</span></strong></span><span class="koboSpan" id="kobo.1637.1">);
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1638.1">Now, let’s pass the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1639.1">#gallery</span></code><span class="koboSpan" id="kobo.1640.1"> template variable from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1641.1">app.component.html</span></code><span class="koboSpan" id="kobo.1642.1"> to the click handlers for both buttons as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1643.1">...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1644.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1645.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1646.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1647.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1648.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1649.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1650.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1651.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1652.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1653.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1654.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1655.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1656.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1657.1">"gallery-actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1658.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1659.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1660.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1661.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1662.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1663.1">"btn btn-primary"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1664.1">      (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1665.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1666.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1667.1">"addNewPicture(</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1668.1">gallery</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.1669.1">)"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1670.1">&gt;</span></span><span class="koboSpan" id="kobo.1671.1">Add Picture</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1672.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1673.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1674.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1675.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1676.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1677.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1678.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1679.1">"btn btn-danger"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1680.1">      (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1681.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1682.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1683.1">"removeFirstPicture(</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1684.1">gallery</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.1685.1">)"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1686.1">&gt;</span></span><span class="koboSpan" id="kobo.1687.1">Remove First</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1688.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1689.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1690.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1691.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1692.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1693.1">&gt;</span></span><span class="koboSpan" id="kobo.1694.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1695.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1696.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1697.1">&gt;</span></span>
</code></pre>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1698.1"><img alt="" role="presentation" src="../Images/B18469_01_15.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1699.1">Figure 1.15: Console log on clicking the Add Picture button</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.1700.1">We can </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.1701.1">now</span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.1702.1"> implement </span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.1703.1">the code for adding a new picture. </span><span class="koboSpan" id="kobo.1703.2">For this, we’ll access </span><code class="inlineCode"><span class="koboSpan" id="kobo.1704.1">GalleryComponent </span></code><span class="koboSpan" id="kobo.1705.1">class’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.1706.1">generateImage</span></code><span class="koboSpan" id="kobo.1707.1"> method and add a new item to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1708.1">pictures</span></code><span class="koboSpan" id="kobo.1709.1"> array as the first element. </span><span class="koboSpan" id="kobo.1709.2">The code is as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1710.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1711.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1712.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1713.1">AppComponent</span></span><span class="koboSpan" id="kobo.1714.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1715.1">addNewPicture</span></span><span class="koboSpan" id="kobo.1716.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1717.1">gallery: GalleryComponent</span></span><span class="koboSpan" id="kobo.1718.1">) {
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1719.1">gallery.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1720.1">pictures</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1721.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1722.1">unshift</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1723.1">(gallery.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1724.1">generateImage</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1725.1">());</span></strong></span><span class="koboSpan" id="kobo.1726.1">
  }
  ...
</span><span class="koboSpan" id="kobo.1726.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1727.1">For removing the first item from the array, we’ll use the JavaScript array class’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.1728.1">shift</span></code><span class="koboSpan" id="kobo.1729.1"> method on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1730.1">pictures</span></code><span class="koboSpan" id="kobo.1731.1"> array in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1732.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1733.1"> class. </span><span class="koboSpan" id="kobo.1733.2">The code looks as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1734.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1735.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1736.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1737.1">AppComponent</span></span><span class="koboSpan" id="kobo.1738.1"> {
   ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1739.1">removeFirstPicture</span></span><span class="koboSpan" id="kobo.1740.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1741.1">gallery: GalleryComponent</span></span><span class="koboSpan" id="kobo.1742.1">) {
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1743.1">gallery.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1744.1">pictures</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1745.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1746.1">shift</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1747.1">();</span></strong></span><span class="koboSpan" id="kobo.1748.1">
  }
}
</span></code></pre>
</li>
</ol>
<h2 class="heading-2" id="_idParaDest-39"><span class="koboSpan" id="kobo.1749.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1750.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.1751.1">template reference variable</span></strong><span class="koboSpan" id="kobo.1752.1"> is </span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.1753.1">often a reference to a DOM element within a template. </span><span class="koboSpan" id="kobo.1753.2">It can also refer to a component or directive in Angular (source: </span><a href="https://angular.io/guide/template-reference-variables"><span class="url"><span class="koboSpan" id="kobo.1754.1">https://angular.io/guide/template-reference-variables</span></span></a><span class="koboSpan" id="kobo.1755.1">).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1756.1">In this recipe, we create a reference (variable) to the gallery component in our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1757.1">app.component.html</span></code><span class="koboSpan" id="kobo.1758.1"> by putting it on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1759.1">&lt;app-gallery&gt;</span></code><span class="koboSpan" id="kobo.1760.1"> tag. </span><span class="koboSpan" id="kobo.1760.2">And that tag is an Angular component in this case. </span><span class="koboSpan" id="kobo.1760.3">After referencing it with the variable in our template, we pass the reference (template variable) to the functions in our component as the function arguments. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.1761.1">We then access the properties and the methods of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1762.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1763.1"> by using the passed template variable. </span><span class="koboSpan" id="kobo.1763.2">You can see that we are able to add and remove items from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1764.1">pictures</span></code><span class="koboSpan" id="kobo.1765.1"> array that resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1766.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1767.1"> directly from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1768.1">AppComponent</span></code><span class="koboSpan" id="kobo.1769.1"> – i.e., we’re accessing the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1770.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1771.1">'s properties and methods from the parent (</span><code class="inlineCode"><span class="koboSpan" id="kobo.1772.1">App</span></code><span class="koboSpan" id="kobo.1773.1">) component.</span></p>
<h2 class="heading-2" id="_idParaDest-40"><span class="koboSpan" id="kobo.1774.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1775.1">Angular template variables: </span><a href="https://angular.io/guide/template-reference-variables"><span class="url"><span class="koboSpan" id="kobo.1776.1">https://angular.io/guide/template-reference-variables</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1777.1">Angular template statements: </span><a href="https://angular.io/guide/template-statements"><span class="url"><span class="koboSpan" id="kobo.1778.1">https://angular.io/guide/template-statements</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-41"><span class="koboSpan" id="kobo.1779.1">Accessing a child component in a parent component class using ViewChild</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1780.1">In this</span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.1781.1"> recipe, you’ll</span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.1782.1"> learn how to </span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.1783.1">use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1784.1">ViewChild</span></code><span class="koboSpan" id="kobo.1785.1"> decorator to access a child component in a parent component’s class. </span><span class="koboSpan" id="kobo.1785.2">You’ll start with an app that has </span><code class="inlineCode"><span class="koboSpan" id="kobo.1786.1">AppComponent</span></code><span class="koboSpan" id="kobo.1787.1"> as the parent component and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1788.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1789.1"> as the child component. </span><span class="koboSpan" id="kobo.1789.2">You’ll then create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1790.1">ViewChild</span></code><span class="koboSpan" id="kobo.1791.1"> for the child component in the parent’s component class to access it and perform some actions.</span></p>
<h2 class="heading-2" id="_idParaDest-42"><span class="koboSpan" id="kobo.1792.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1793.1">The project </span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.1794.1">that we are </span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.1795.1">going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1796.1">chapter01/start_here/cc-view-child</span></code><span class="koboSpan" id="kobo.1797.1"> inside the </span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.1798.1">cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1799.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1800.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1801.1">npm run serve cc-view-child to serve the project.
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1802.1">This should open the app in a new browser tab, and you should see something like the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1803.1"><img alt="" role="presentation" src="../Images/B18469_01_16.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1804.1">Figure 1.16: The cc-view-child app running on http://localhost:4200</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1805.1">Click the buttons at the top to see the respective console logs.</span></p>
<h2 class="heading-2" id="_idParaDest-43"><span class="koboSpan" id="kobo.1806.1">How to do it…</span></h2>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1807.1">We’ll start </span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.1808.1">with importing </span><code class="inlineCode"><span class="koboSpan" id="kobo.1809.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1810.1"> into our </span><code class="inlineCode"><span class="koboSpan" id="kobo.1811.1">app.component.ts</span></code><span class="koboSpan" id="kobo.1812.1"> file so we can create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1813.1">ViewChild</span></code><span class="koboSpan" id="kobo.1814.1"> for it:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1815.1">import</span></span><span class="koboSpan" id="kobo.1816.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1817.1">Component</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1818.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1819.1">ViewChild</span></strong></span><span class="koboSpan" id="kobo.1820.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1821.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1822.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1823.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1824.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1825.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1826.1">GalleryComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1827.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1828.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1829.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1830.1">./components/gallery/gallery.component'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1831.1">;</span></strong></span><span class="koboSpan" id="kobo.1832.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1833.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1834.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1835.1">AppComponent</span></span><span class="koboSpan" id="kobo.1836.1"> {
  </span><span class="code-highlight"><strong class="hljs-meta-slc"><span class="koboSpan" id="kobo.1837.1">@ViewChild</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1838.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1839.1">GalleryComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1840.1">) gallery!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1841.1">GalleryComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1842.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1843.1">  ...</span></strong></span><span class="koboSpan" id="kobo.1844.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1845.1">To handle</span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.1846.1"> adding new pictures, we will use the gallery </span><code class="inlineCode"><span class="koboSpan" id="kobo.1847.1">ViewChild</span></code><span class="koboSpan" id="kobo.1848.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1849.1">addNewPicture</span></code><span class="koboSpan" id="kobo.1850.1"> method</span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.1851.1"> inside </span><code class="inlineCode"><span class="koboSpan" id="kobo.1852.1">AppComponent</span></code><span class="koboSpan" id="kobo.1853.1">. </span><span class="koboSpan" id="kobo.1853.2">We will add a new picture to the top of that array using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1854.1">generateImage</span></code><span class="koboSpan" id="kobo.1855.1"> method of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1856.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1857.1">, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1858.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1859.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1860.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1861.1">AppComponent</span></span><span class="koboSpan" id="kobo.1862.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.1863.1">@ViewChild</span></span><span class="koboSpan" id="kobo.1864.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1865.1">GalleryComponent</span></span><span class="koboSpan" id="kobo.1866.1">) gallery!: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1867.1">GalleryComponent</span></span><span class="koboSpan" id="kobo.1868.1">;
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1869.1">addNewPicture</span></span><span class="koboSpan" id="kobo.1870.1">() {    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1871.1">console</span></span><span class="koboSpan" id="kobo.1872.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1873.1">log</span></span><span class="koboSpan" id="kobo.1874.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1875.1">'added new picture'</span></span><span class="koboSpan" id="kobo.1876.1">);
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1877.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1878.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1879.1">gallery</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1880.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1881.1">pictures</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1882.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1883.1">unshift</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1884.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1885.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1886.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1887.1">gallery</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1888.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1889.1">generateImage</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1890.1">()</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1891.1">);</span></strong></span><span class="koboSpan" id="kobo.1892.1">
  }
  ...
</span><span class="koboSpan" id="kobo.1892.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1893.1">To handle removing pictures, we’ll add the logic to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1894.1">removeFirstPicture</span></code><span class="koboSpan" id="kobo.1895.1"> method inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1896.1">AppComponent</span></code><span class="koboSpan" id="kobo.1897.1"> class. </span><span class="koboSpan" id="kobo.1897.2">We’ll use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1898.1">Array.prototype.shift</span></code><span class="koboSpan" id="kobo.1899.1"> method on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1900.1">pictures</span></code><span class="koboSpan" id="kobo.1901.1"> array to remove the first element as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1902.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1903.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1904.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1905.1">AppComponent</span></span><span class="koboSpan" id="kobo.1906.1"> {
...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1907.1">removeFirstPicture</span></span><span class="koboSpan" id="kobo.1908.1">() {
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1909.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1910.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1911.1">gallery</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1912.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1913.1">pictures</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1914.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1915.1">shift</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1916.1">();</span></strong></span><span class="koboSpan" id="kobo.1917.1">
  }
}
</span></code></pre>
</li>
</ol>
<h2 class="heading-2" id="_idParaDest-44"><span class="koboSpan" id="kobo.1918.1">How it works…</span></h2>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.1919.1">ViewChild()</span></code><span class="koboSpan" id="kobo.1920.1"> is a </span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.1921.1">decorator that Angular provides to access child components used in the template of a parent component. </span><span class="koboSpan" id="kobo.1921.2">It configures</span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.1922.1"> a </span><strong class="keyWord"><span class="koboSpan" id="kobo.1923.1">view query</span></strong><span class="koboSpan" id="kobo.1924.1"> for the Angular change detector. </span><span class="koboSpan" id="kobo.1924.2">The </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.1925.1">change detector tries to find the first element matching the query and assigns it to the property associated with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1926.1">ViewChild()</span></code><span class="koboSpan" id="kobo.1927.1"> decorator. </span><span class="koboSpan" id="kobo.1927.2">In our recipe, we create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1928.1">ViewChild</span></code><span class="koboSpan" id="kobo.1929.1"> by providing </span><code class="inlineCode"><span class="koboSpan" id="kobo.1930.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1931.1"> as the query parameter, that is, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1932.1">ViewChild(GalleryComponent)</span></code><span class="koboSpan" id="kobo.1933.1">. </span><span class="koboSpan" id="kobo.1933.2">This allows the Angular change detector to find the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1934.1">&lt;app-gallery&gt;</span></code><span class="koboSpan" id="kobo.1935.1"> element inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1936.1">app.component.html</span></code><span class="koboSpan" id="kobo.1937.1"> template, and then it assigns it to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1938.1">gallery</span></code><span class="koboSpan" id="kobo.1939.1"> property </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.1940.1">within the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1941.1">AppComponent</span></code><span class="koboSpan" id="kobo.1942.1"> class. </span><span class="koboSpan" id="kobo.1942.2">It is important to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1943.1">gallery </span></code><span class="koboSpan" id="kobo.1944.1">property’s type as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1945.1">GalleryComponent</span></code><span class="koboSpan" id="kobo.1946.1"> so we can easily use that in the component later with all the TypeScript magic.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.1947.1">The view query is executed after the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1948.1">ngOnInit</span></code><span class="koboSpan" id="kobo.1949.1"> lifecycle hook and before the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1950.1">ngAfterViewInit</span></code><span class="koboSpan" id="kobo.1951.1"> hook.</span></p>
</div>
<h2 class="heading-2" id="_idParaDest-45"><span class="koboSpan" id="kobo.1952.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1953.1">Angular </span><code class="inlineCode"><span class="koboSpan" id="kobo.1954.1">ViewChild</span></code><span class="koboSpan" id="kobo.1955.1">: </span><a href="https://angular.io/api/core/ViewChild"><span class="url"><span class="koboSpan" id="kobo.1956.1">https://angular.io/api/core/ViewChild</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1957.1">Array’s shift method: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/shift"><span class="url"><span class="koboSpan" id="kobo.1958.1">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/shift</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-46"><span class="koboSpan" id="kobo.1959.1">Standalone components and passing data through route params</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1960.1">In this </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.1961.1">recipe, we’ll learn how to work with </span><strong class="keyWord"><span class="koboSpan" id="kobo.1962.1">standalone components</span></strong><span class="koboSpan" id="kobo.1963.1"> and how to pass some data using route parameters to other components. </span><span class="koboSpan" id="kobo.1963.2">Note</span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.1964.1"> that this is not limited to standalone components and can be achieved with regular components as well. </span><span class="koboSpan" id="kobo.1964.2">The app’s starter code gives us a list view of some users. </span><span class="koboSpan" id="kobo.1964.3">Our task is to implement the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1965.1">details</span></code><span class="koboSpan" id="kobo.1966.1"> view using the route parameters.</span></p>
<h2 class="heading-2" id="_idParaDest-47"><span class="koboSpan" id="kobo.1967.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1968.1">The project that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1969.1">start/apps/cc-standalone-components</span></code><span class="koboSpan" id="kobo.1970.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1971.1">Open the </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.1972.1">code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1973.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1974.1">npm run serve cc-standalone-components
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1975.1">You should be able to see the app as follows:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1976.1"><img alt="" role="presentation" src="../Images/B18469_01_17.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1977.1">Figure 1.17: Users list is shown for the app cc-standalone-components</span></p></li>
</ol>
<h2 class="heading-2" id="_idParaDest-48"><span class="koboSpan" id="kobo.1978.1">How to do it…</span></h2>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1979.1">Create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1980.1">UserDetails</span></code><span class="koboSpan" id="kobo.1981.1"> component/page where we will see individual user’s details later. </span><span class="koboSpan" id="kobo.1981.2">Run the following command to create it from the project root:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1982.1">cd start &amp;&amp; nx g c user-details --standalone --directory apps/chapter01/cc-standalone-components/src/app/user-details
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1983.1">If asked, choose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1984.1">@nx/angular:component</span></code> <code class="inlineCode"><span class="koboSpan" id="kobo.1985.1">schematics</span></code><span class="koboSpan" id="kobo.1986.1"> and choose the “As provided” action.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.1987.1">We’re now going to create a route for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1988.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.1989.1">. </span><span class="koboSpan" id="kobo.1989.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1990.1">app.routes.ts</span></code><span class="koboSpan" id="kobo.1991.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1992.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1993.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1994.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1995.1">appRoutes</span></span><span class="koboSpan" id="kobo.1996.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1997.1">Route</span></span><span class="koboSpan" id="kobo.1998.1">[] = [
  {...},
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1999.1">{</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2000.1">path</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2001.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2002.1">':uuid'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2003.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2004.1">loadComponent</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2005.1">: </span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2006.1">() =&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2007.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2008.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2009.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2010.1">./user-details/user-details.component'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2011.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2012.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2013.1">then</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2014.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2015.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2016.1">m</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2017.1">) =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2018.1"> m.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2019.1">UserDetailsComponent</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2020.1">),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2021.1">},</span></strong></span><span class="koboSpan" id="kobo.2022.1">
];
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2023.1">Now </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.2024.1">add </span><code class="inlineCode"><span class="koboSpan" id="kobo.2025.1">RouterModule</span></code><span class="koboSpan" id="kobo.2026.1"> as an import in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2027.1">UsersComponent</span></code><span class="koboSpan" id="kobo.2028.1"> as follows in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2029.1">users.component.ts</span></code><span class="koboSpan" id="kobo.2030.1"> file:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2031.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2032.1">import</span></span><span class="koboSpan" id="kobo.2033.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2034.1">RouterModule</span></span><span class="koboSpan" id="kobo.2035.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2036.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2037.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2038.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2039.1">@Component</span></span><span class="koboSpan" id="kobo.2040.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2041.1">imports</span></span><span class="koboSpan" id="kobo.2042.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.2043.1">CommonModule</span></span><span class="koboSpan" id="kobo.2044.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2045.1">RouterModule</span></span><span class="koboSpan" id="kobo.2046.1">],
  ...
</span><span class="koboSpan" id="kobo.2046.2">})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2047.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2048.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2049.1">UsersComponent</span></span><span class="koboSpan" id="kobo.2050.1">{}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2051.1">Add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2052.1">routerLink</span></code><span class="koboSpan" id="kobo.2053.1"> for each user item in the users list in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2054.1">users.component.html</span></code><span class="koboSpan" id="kobo.2055.1"> to navigate to the user details page, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2056.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2057.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2058.1">&gt;</span></span><span class="koboSpan" id="kobo.2059.1">
  @for (user of users; track user.uuid) {
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2060.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2061.1">li</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2062.1">routerLink</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2063.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2064.1">"/{{ user.uuid }}"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2065.1">&gt;</span></strong></span><span class="koboSpan" id="kobo.2066.1">
      ...
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2067.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2068.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2069.1">&gt;</span></span><span class="koboSpan" id="kobo.2070.1">
  }
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2071.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2072.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2073.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2074.1">Add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2075.1">RouterModule</span></code><span class="koboSpan" id="kobo.2076.1"> in the imports of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2077.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.2078.1"> class in the file </span><code class="inlineCode"><span class="koboSpan" id="kobo.2079.1">user-details.component.ts</span></code><span class="koboSpan" id="kobo.2080.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2081.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2082.1">import</span></span><span class="koboSpan" id="kobo.2083.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2084.1">RouterModule</span></span><span class="koboSpan" id="kobo.2085.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2086.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2087.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2088.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2089.1">@Component</span></span><span class="koboSpan" id="kobo.2090.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2091.1">imports</span></span><span class="koboSpan" id="kobo.2092.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.2093.1">CommonModule</span></span><span class="koboSpan" id="kobo.2094.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2095.1">RouterModule</span></span><span class="koboSpan" id="kobo.2096.1">],
  ...
</span><span class="koboSpan" id="kobo.2096.2">})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2097.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2098.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2099.1">UserDetailsComponent</span></span><span class="koboSpan" id="kobo.2100.1"> {}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2101.1">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2102.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.2103.1"> further to create an </span><strong class="keyWord"><span class="koboSpan" id="kobo.2104.1">Observable</span></strong><span class="koboSpan" id="kobo.2105.1"> to keep the currently</span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.2106.1"> displayed user data:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2107.1">import</span></span><span class="koboSpan" id="kobo.2108.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2109.1">Component</span></span><span class="koboSpan" id="kobo.2110.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2111.1">inject </span></strong></span><span class="koboSpan" id="kobo.2112.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2113.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2114.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2115.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2116.1">import</span></span><span class="koboSpan" id="kobo.2117.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2118.1">CommonModule</span></span><span class="koboSpan" id="kobo.2119.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2120.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2121.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.2122.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2123.1">import</span></span><span class="koboSpan" id="kobo.2124.1"> { </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2125.1">ActivatedRoute</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2126.1">, </span></strong></span><span class="hljs-title"><span class="koboSpan" id="kobo.2127.1">RouterModule</span></span><span class="koboSpan" id="kobo.2128.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2129.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2130.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2131.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2132.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2133.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2134.1">Observable</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2135.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2136.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2137.1">'rxjs'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2138.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2139.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2140.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2141.1">User</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2142.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2143.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2144.1">'../data'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2145.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.2146.1">@Component</span></span><span class="koboSpan" id="kobo.2147.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2148.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2149.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2150.1">UserDetailsComponent</span></span><span class="koboSpan" id="kobo.2151.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2152.1">route = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2153.1">inject</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2154.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2155.1">ActivatedRoute</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2156.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2157.1">user$!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2158.1">Observable</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2159.1">&lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2160.1">User</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2161.1"> | </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.2162.1">undefined</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2163.1">&gt;;</span></strong></span><span class="koboSpan" id="kobo.2164.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2165.1">Now create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2166.1">constructor</span></code><span class="koboSpan" id="kobo.2167.1"> function to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2168.1">uuid</span></code><span class="koboSpan" id="kobo.2169.1"> from the route parameters and to get and set the currently displayed user data as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2170.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2171.1">import</span></span><span class="koboSpan" id="kobo.2172.1"> { filter, map, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2173.1">Observable</span></span><span class="koboSpan" id="kobo.2174.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2175.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2176.1">'rxjs'</span></span><span class="koboSpan" id="kobo.2177.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2178.1">import</span></span><span class="koboSpan" id="kobo.2179.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2180.1">User</span></span><span class="koboSpan" id="kobo.2181.1">, </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2182.1">USERS</span></span><span class="koboSpan" id="kobo.2183.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2184.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2185.1">'../data'</span></span><span class="koboSpan" id="kobo.2186.1">;
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.2187.1">@Component</span></span><span class="koboSpan" id="kobo.2188.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2189.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2190.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2191.1">UserDetailsComponent</span></span><span class="koboSpan" id="kobo.2192.1"> {
  ...
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.2193.1">constructor</span></span><span class="koboSpan" id="kobo.2194.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2195.1">this</span></span><span class="koboSpan" id="kobo.2196.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2197.1">user$</span></span><span class="koboSpan" id="kobo.2198.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.2199.1">this</span></span><span class="koboSpan" id="kobo.2200.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2201.1">route</span></span><span class="koboSpan" id="kobo.2202.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2203.1">paramMap</span></span><span class="koboSpan" id="kobo.2204.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2205.1">pipe</span></span><span class="koboSpan" id="kobo.2206.1">(
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2207.1">filter</span></span><span class="koboSpan" id="kobo.2208.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2209.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2210.1">params</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2211.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2212.1"> !!params.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2213.1">get</span></span><span class="koboSpan" id="kobo.2214.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2215.1">'uuid'</span></span><span class="koboSpan" id="kobo.2216.1">)),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2217.1">map</span></span><span class="koboSpan" id="kobo.2218.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2219.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2220.1">params</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2221.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2222.1"> {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2223.1">const</span></span><span class="koboSpan" id="kobo.2224.1"> uuid = params.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2225.1">get</span></span><span class="koboSpan" id="kobo.2226.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2227.1">'uuid'</span></span><span class="koboSpan" id="kobo.2228.1">);
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2229.1">return</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2230.1">USERS</span></span><span class="koboSpan" id="kobo.2231.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2232.1">find</span></span><span class="koboSpan" id="kobo.2233.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2234.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2235.1">user</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2236.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2237.1"> user.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2238.1">uuid</span></span><span class="koboSpan" id="kobo.2239.1"> === uuid);
      })
    );
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2240.1">Finally, let’s update the template of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2241.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.2242.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2243.1">user-details.component.html</span></code><span class="koboSpan" id="kobo.2244.1"> file to show the user as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2245.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2246.1">ng-container</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2247.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2248.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2249.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2250.1">"user$ | async as user"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2251.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2252.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2253.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2254.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2255.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2256.1">"flex gap-4 items-center"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2257.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2258.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2259.1">a</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2260.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2261.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2262.1">"/"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2263.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2264.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2265.1">"hover:text-slate-500"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2266.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2267.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2268.1">span</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2269.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2270.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2271.1">"material-symbols-outlined"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2272.1">&gt;</span></span><span class="koboSpan" id="kobo.2273.1"> arrow_back
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2274.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2275.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2276.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2277.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2278.1">a</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2279.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2280.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2281.1">article</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2282.1">routerLink</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2283.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2284.1">"/{{ user.uuid }}"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2285.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2286.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2287.1">img</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2288.1">src</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2289.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2290.1">"{{ user.picture.thumbnail }}"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2291.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2292.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2293.1">h4</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2294.1">&gt;</span></span><span class="koboSpan" id="kobo.2295.1">{{ user.name.first }} {{ user.name.last }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2296.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2297.1">h4</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2298.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2299.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2300.1">article</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2301.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2302.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2303.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2304.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2305.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2306.1">ng-container</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2307.1">&gt;</span></span>
</code></pre>
<figure class="mediaobject"><span class="koboSpan" id="kobo.2308.1"><img alt="" role="presentation" src="../Images/B18469_01_18.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.2309.1">Figure 1.18: User Details paging showing the currently selected user information</span></p> </li>
</ol>
<h2 class="heading-2" id="_idParaDest-49"><span class="koboSpan" id="kobo.2310.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2311.1">The application’s </span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.2312.1">starter template contained a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2313.1">UsersComponent</span></code><span class="koboSpan" id="kobo.2314.1"> configured to be shown on the home route (</span><strong class="keyWord"><span class="koboSpan" id="kobo.2315.1">/</span></strong><span class="koboSpan" id="kobo.2316.1">). </span><span class="koboSpan" id="kobo.2316.2">We first create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2317.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.2318.1"> using the Nx CLI command </span><code class="inlineCode"><span class="koboSpan" id="kobo.2319.1">nx g c user-details --standalone --directory apps/chapter01/cc-standalone-components/src/app/user-details</span></code><span class="koboSpan" id="kobo.2320.1">. </span><span class="koboSpan" id="kobo.2320.2">Notice that this uses </span><code class="inlineCode"><span class="koboSpan" id="kobo.2321.1">--standalone</span></code><span class="koboSpan" id="kobo.2322.1"> to let Angular know that we need a standalone component. </span><span class="koboSpan" id="kobo.2322.2">We also use </span><code class="inlineCode"><span class="koboSpan" id="kobo.2323.1">--directory apps/chapter01/cc-standalone-components/src/app/user-details</span></code><span class="koboSpan" id="kobo.2324.1">; since we’re working with an Nx repository, we need to specify which exact directory we’re creating the component in.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2325.1">Then we add the route for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2326.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.2327.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2328.1">app.routes.ts</span></code><span class="koboSpan" id="kobo.2329.1"> file. </span><span class="koboSpan" id="kobo.2329.2">Notice that we use </span><code class="inlineCode"><span class="koboSpan" id="kobo.2330.1">':uuid'</span></code><span class="koboSpan" id="kobo.2331.1"> as the path for this route. </span><span class="koboSpan" id="kobo.2331.2">This would result in an example route </span><code class="inlineCode"><span class="koboSpan" id="kobo.2332.1">http://localhost:4200/abc123</span></code><span class="koboSpan" id="kobo.2333.1"> showing the component, and the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.2334.1">uuid</span></code><span class="koboSpan" id="kobo.2335.1"> becomes </span><code class="inlineCode"><span class="koboSpan" id="kobo.2336.1">abc123</span></code><span class="koboSpan" id="kobo.2337.1"> as the route parameter. </span><span class="koboSpan" id="kobo.2337.2">We then import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2338.1">RouterModule</span></code><span class="koboSpan" id="kobo.2339.1"> in both </span><code class="inlineCode"><span class="koboSpan" id="kobo.2340.1">UserDetailsComponent</span></code><span class="koboSpan" id="kobo.2341.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2342.1">UsersComponent</span></code><span class="koboSpan" id="kobo.2343.1"> classes in the decorator metadata. </span><span class="koboSpan" id="kobo.2343.2">If you’ve worked with Angular before, you may be thinking that this usually is imported in an </span><code class="inlineCode"><span class="koboSpan" id="kobo.2344.1">NgModule</span></code><span class="koboSpan" id="kobo.2345.1">. </span><span class="koboSpan" id="kobo.2345.2">Well, you’re right. </span><span class="koboSpan" id="kobo.2345.3">But since these are standalone components, they need to have their own imports handled since they’re not part of any </span><code class="inlineCode"><span class="koboSpan" id="kobo.2346.1">NgModule</span></code><span class="koboSpan" id="kobo.2347.1"> themselves.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2348.1">We then add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2349.1">routerLink</span></code><span class="koboSpan" id="kobo.2350.1"> for </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.2351.1">each user item on the home route (in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2352.1">UsersComponent</span></code><span class="koboSpan" id="kobo.2353.1"> template) to navigate to the user’s detail page passing the user’s ID as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2354.1">uuid</span></code><span class="koboSpan" id="kobo.2355.1"> parameter. </span><span class="koboSpan" id="kobo.2355.2">The final step is then to retrieve the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2356.1">uuid</span></code><span class="koboSpan" id="kobo.2357.1"> parameter from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2358.1">ActivatedRoute</span></code><span class="koboSpan" id="kobo.2359.1"> service and to get the desired user using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2360.1">uuid</span></code><span class="koboSpan" id="kobo.2361.1"> (the ID of the user). </span><span class="koboSpan" id="kobo.2361.2">You’ll notice that we execute the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2362.1">find</span></code><span class="koboSpan" id="kobo.2363.1"> method on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2364.1">USERS</span></code><span class="koboSpan" id="kobo.2365.1"> array to find the desired user by </span><code class="inlineCode"><span class="koboSpan" id="kobo.2366.1">uuid</span></code><span class="koboSpan" id="kobo.2367.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2368.1">In the end, we modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2369.1">user-details.component.html</span></code><span class="koboSpan" id="kobo.2370.1"> file to update the template to show the desired user on the view. </span><span class="koboSpan" id="kobo.2370.2">Easy peasy!</span></p>
<h2 class="heading-2" id="_idParaDest-50"><span class="koboSpan" id="kobo.2371.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2372.1">Standalone Components - Angular Official: </span><a href="https://angular.io/guide/standalone-components"><span class="url"><span class="koboSpan" id="kobo.2373.1">https://angular.io/guide/standalone-components</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2374.1">Getting started with Angular standalone components: </span><a href="https://www.youtube.com/watch?v=x5PZwb4XurU"><span class="url"><span class="koboSpan" id="kobo.2375.1">https://www.youtube.com/watch?v=x5PZwb4XurU</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-51"><span class="koboSpan" id="kobo.2376.1">Component communication using signals</span></h1>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.2377.1">Signals</span></strong><span class="koboSpan" id="kobo.2378.1"> are a</span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.2379.1"> powerful addition in the Angular ecosystem. </span><span class="koboSpan" id="kobo.2379.2">They are also more efficient than regular Angular class properties because when you change the value of a signal, Angular will only </span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.2380.1">notify the components that are subscribed to that signal to run the change detection. </span><span class="koboSpan" id="kobo.2380.2">This can improve the</span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.2381.1"> performance of your application, especially if there are many components that are subscribed to the signal. </span><span class="koboSpan" id="kobo.2381.2">In this recipe, we will work with Angular Signals to achieve a few interesting results. </span><span class="koboSpan" id="kobo.2381.3">We will show the number of the finished tasks against total tasks. </span><span class="koboSpan" id="kobo.2381.4">And we will show a message when all tasks are completed. </span><span class="koboSpan" id="kobo.2381.5">Let’s do this!</span></p>
<h2 class="heading-2" id="_idParaDest-52"><span class="koboSpan" id="kobo.2382.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2383.1">The app</span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.2384.1"> that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2385.1">start/apps/chapter01/ng-cc-signals</span></code><span class="koboSpan" id="kobo.2386.1"> inside the cloned repository. </span><span class="koboSpan" id="kobo.2386.2">Perform the following </span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.2387.1">steps to get started:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2388.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2389.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2390.1">npm run serve ng-cc-signals
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2391.1">This should open the app a new tab in the browser should see the following at </span><code class="inlineCode"><span class="koboSpan" id="kobo.2392.1">http://localhost:4200</span></code><span class="koboSpan" id="kobo.2393.1">:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.2394.1"><img alt="" role="presentation" src="../Images/B18469_01_19.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.2395.1">Figure 1.19: ng-cc-signals app running on http://localhost:4200</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2396.1">Now that we have the app running locally, let’s walk through the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-53"><span class="koboSpan" id="kobo.2397.1">How to do it</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2398.1">The app which we are working with is a basic </span><em class="italic"><span class="koboSpan" id="kobo.2399.1">tasks manager</span></em><span class="koboSpan" id="kobo.2400.1"> application. </span><span class="koboSpan" id="kobo.2400.2">However, we have two interesting requirements as follows:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2401.1">We should be able to see the finished tasks count against the total tasks along the </span><strong class="screenText"><span class="koboSpan" id="kobo.2402.1">Task Manager</span></strong><span class="koboSpan" id="kobo.2403.1"> heading </span><em class="italic"><span class="koboSpan" id="kobo.2404.1">reactively</span></em><span class="koboSpan" id="kobo.2405.1">. </span><span class="koboSpan" id="kobo.2405.2">That means that any changes to tasks should update it automatically.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2406.1">When</span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.2407.1"> all tasks are completed, we should show a message to the user to congratulate them.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.2408.1">Let’s get started:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2409.1">First, we will</span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.2410.1"> create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2411.1">type</span></code><span class="koboSpan" id="kobo.2412.1"> for the tasks and an </span><code class="inlineCode"><span class="koboSpan" id="kobo.2413.1">enum</span></code><span class="koboSpan" id="kobo.2414.1"> for the filters because – </span><em class="italic"><span class="koboSpan" id="kobo.2415.1">TypeScript for the win</span></em><span class="koboSpan" id="kobo.2416.1">. </span><span class="koboSpan" id="kobo.2416.2">Create a new file inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2417.1">src/app</span></code><span class="koboSpan" id="kobo.2418.1"> folder named </span><code class="inlineCode"><span class="koboSpan" id="kobo.2419.1">task.model.ts</span></code><span class="koboSpan" id="kobo.2420.1">, and add the following code to it:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2421.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2422.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2423.1">type</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2424.1">Task</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2425.1"> = {</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2426.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2427.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2428.1">boolean</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2429.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2430.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2431.1">: </span></strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.2432.1">string</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2433.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2434.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2435.1">export</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2436.1">enum</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2437.1">TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2438.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2439.1">All</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2440.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2441.1">Active</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2442.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2443.1">Completed</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2444.1">}</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2445.1">Now, we will create our first signal for the tasks array in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2446.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2447.1"> file. </span><span class="koboSpan" id="kobo.2447.2">Update it as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2448.1">import</span></span><span class="koboSpan" id="kobo.2449.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2450.1">CommonModule</span></span><span class="koboSpan" id="kobo.2451.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2452.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2453.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.2454.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2455.1">import</span></span><span class="koboSpan" id="kobo.2456.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2457.1">Component</span></span><span class="koboSpan" id="kobo.2458.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2459.1">signal </span></strong></span><span class="koboSpan" id="kobo.2460.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2461.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2462.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2463.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2464.1">import</span></span><span class="koboSpan" id="kobo.2465.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2466.1">RouterModule</span></span><span class="koboSpan" id="kobo.2467.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2468.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2469.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2470.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2471.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2472.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2473.1">Task</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2474.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2475.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2476.1">'./task.model'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2477.1">;</span></strong></span><span class="koboSpan" id="kobo.2478.1">
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2479.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2480.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2481.1">AppComponent</span></span><span class="koboSpan" id="kobo.2482.1"> {
  tasks = </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2483.1">signal&lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2484.1">Task</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2485.1">[]&gt;(</span></strong></span><span class="koboSpan" id="kobo.2486.1">[
    { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2487.1">title</span></span><span class="koboSpan" id="kobo.2488.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2489.1">'Buy milk'</span></span><span class="koboSpan" id="kobo.2490.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2491.1">completed</span></span><span class="koboSpan" id="kobo.2492.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2493.1">false</span></span><span class="koboSpan" id="kobo.2494.1"> },
    { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2495.1">title</span></span><span class="koboSpan" id="kobo.2496.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2497.1">'Read a book'</span></span><span class="koboSpan" id="kobo.2498.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2499.1">completed</span></span><span class="koboSpan" id="kobo.2500.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2501.1">true</span></span><span class="koboSpan" id="kobo.2502.1"> },
  ]</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2503.1">)</span></strong></span><span class="koboSpan" id="kobo.2504.1">;
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2505.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.2506.1">app.component.html</span></code><span class="koboSpan" id="kobo.2507.1"> should start crying now because of the change of the property to being a signal.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.2508.1">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2509.1">app.component.html</span></code><span class="koboSpan" id="kobo.2510.1"> file to use the signal via its getter function as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2511.1">&lt;!-- Task List --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2512.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2513.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2514.1">&gt;</span></span><span class="koboSpan" id="kobo.2515.1">
      @for (task of </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2516.1">tasks()</span></strong></span><span class="koboSpan" id="kobo.2517.1">; track $index) {
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2518.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2519.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2520.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2521.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2522.1">"mb-2 flex gap-4 items-center cursor</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.2523.1">-pointer hover:opacity-70"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2524.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2525.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2526.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2527.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2528.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2529.1">"checkbox"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2530.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2531.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2532.1">]=</span></span>
<span class="hljs-tag"> </span><span class="hljs-string"><span class="koboSpan" id="kobo.2533.1">"task.completed"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2534.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2535.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2536.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2537.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2538.1">ngClass</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2539.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2540.1">"{'line-through': task.completed}"</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.2541.1">&gt;</span></span><span class="koboSpan" id="kobo.2542.1">{{ task.title }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2543.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2544.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2545.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2546.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2547.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2548.1">&gt;</span></span><span class="koboSpan" id="kobo.2549.1">
      }
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2550.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2551.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2552.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2553.1">We will </span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.2554.1">implement the ability to</span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.2555.1"> toggle a task as completed or incomplete. </span><span class="koboSpan" id="kobo.2555.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2556.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2557.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2558.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2559.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2560.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2561.1">AppComponent</span></span><span class="koboSpan" id="kobo.2562.1"> {
  tasks = signal&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2563.1">Task</span></span><span class="koboSpan" id="kobo.2564.1">[]&gt;([...]);
 
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2565.1">toggleTask</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2566.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2567.1">task: Task</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2568.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2569.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2570.1"> updatedTasks = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2571.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2572.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2573.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2574.1">().</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2575.1">map</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2576.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2577.1">taskItem</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2578.1"> =&gt;</span></strong><strong class="hljs-slc"> </strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2579.1">taskItem.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2580.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2581.1"> === task.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2582.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2583.1"> ? </span><span class="koboSpan" id="kobo.2583.2">{...taskItem,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2584.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2585.1">: !taskItem.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2586.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2587.1">} : taskItem</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2588.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2589.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2590.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2591.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2592.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2593.1">set</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2594.1">(updatedTasks);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2595.1">}</span></strong></span><span class="koboSpan" id="kobo.2596.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2597.1">Now update the template to bind the click handler on each item to toggle its </span><code class="inlineCode"><span class="koboSpan" id="kobo.2598.1">completed</span></code><span class="koboSpan" id="kobo.2599.1"> status. </span><span class="koboSpan" id="kobo.2599.2">Update </span><code class="inlineCode"><span class="koboSpan" id="kobo.2600.1">app.component.html</span></code><span class="koboSpan" id="kobo.2601.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2602.1">&lt;!-- Task List --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2603.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2604.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2605.1">&gt;</span></span><span class="koboSpan" id="kobo.2606.1">
      @for (task of tasks(); track $index) {
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2607.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2608.1">li</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2609.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2610.1">click</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2611.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2612.1">"toggleTask(task)"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2613.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2614.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2615.1">"mb-2 flex</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.2616.1">gap-4 items-center cursor-pointer</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.2617.1">hover:opacity-70"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2618.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2619.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2620.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2621.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2622.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2623.1">"checkbox"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2624.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2625.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2626.1">]=</span></span>
<span class="hljs-tag"> </span><span class="hljs-string"><span class="koboSpan" id="kobo.2627.1">"task.completed"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2628.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2629.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2630.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2631.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2632.1">ngClass</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2633.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2634.1">"{'line-through':</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.2635.1">task.completed}"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2636.1">&gt;</span></span><span class="koboSpan" id="kobo.2637.1">{{ task.title }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2638.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2639.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2640.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2641.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2642.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2643.1">&gt;</span></span><span class="koboSpan" id="kobo.2644.1">
      }
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2645.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2646.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2647.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2648.1">You should be able to mark the tasks as </span><code class="inlineCode"><span class="koboSpan" id="kobo.2649.1">completed</span></code><span class="koboSpan" id="kobo.2650.1"> or not by clicking the task items.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="6"><span class="koboSpan" id="kobo.2651.1">We</span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.2652.1"> will now create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2653.1">computed</span></code><span class="koboSpan" id="kobo.2654.1"> property </span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.2655.1">to keep track of the finished tasks. </span><span class="koboSpan" id="kobo.2655.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2656.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2657.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2658.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2659.1">import</span></span><span class="koboSpan" id="kobo.2660.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2661.1">Component</span></span><span class="koboSpan" id="kobo.2662.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2663.1">computed, </span></strong></span><span class="koboSpan" id="kobo.2664.1">signal } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2665.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2666.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2667.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2668.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2669.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2670.1">AppComponent</span></span><span class="koboSpan" id="kobo.2671.1"> {
  tasks = signal&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2672.1">Task</span></span><span class="koboSpan" id="kobo.2673.1">[]&gt;([...]);
 
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2674.1">finishedTasksCount = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2675.1">computed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2676.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2677.1">() =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2678.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2679.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2680.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2681.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2682.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2683.1">().</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2684.1">filter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2685.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2686.1">task</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2687.1"> =&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2688.1">task.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2689.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2690.1">).</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2691.1">length</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2692.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2693.1">})</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.2694.1">toggleTask</span></span><span class="koboSpan" id="kobo.2695.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2696.1">task: Task</span></span><span class="koboSpan" id="kobo.2697.1">) {...}
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2698.1">Update the template to show the finished tasks count. </span><span class="koboSpan" id="kobo.2698.2">We will update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2699.1">app.component.html</span></code><span class="koboSpan" id="kobo.2700.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.2701.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2702.1">main</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2703.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2704.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2705.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2706.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2707.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2708.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2709.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2710.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2711.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2712.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2713.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2714.1">"mx-auto p-4"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2715.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2716.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2717.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2718.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2719.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2720.1">"flex items-center justify-between mb-4"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2721.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2722.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2723.1">h1</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2724.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2725.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2726.1">"text-2xl"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2727.1">&gt;</span></span><span class="koboSpan" id="kobo.2728.1">Task Manager</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2729.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2730.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2731.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2732.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2733.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2734.1">&gt;</span></span><span class="koboSpan" id="kobo.2735.1">
        (</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2736.1">{{finishedTasksCount()}}</span></strong></span><span class="koboSpan" id="kobo.2737.1"> / </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2738.1">{{tasks().length}}</span></strong></span><span class="koboSpan" id="kobo.2739.1">)
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2740.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2741.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2742.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2743.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2744.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2745.1">&gt;</span></span><span class="koboSpan" id="kobo.2746.1">
    ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2747.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2748.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2749.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2750.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2751.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2752.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2753.1">You should be able to see the finished tasks count and the tasks count as shown in the following figure:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.2754.1"><img alt="" role="presentation" src="../Images/B18469_01_20.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.2755.1">Figure 1.20: Finished tasks count being displayed</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.2756.1">We will </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.2757.1">now add the ability to add a new </span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.2758.1">task. </span><span class="koboSpan" id="kobo.2758.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2759.1">app.component.ts file</span></code><span class="koboSpan" id="kobo.2760.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2761.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2762.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2763.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2764.1">AppComponent</span></span><span class="koboSpan" id="kobo.2765.1"> {
  ...
  </span><span class="koboSpan" id="kobo.2765.2">finishedTasksCount = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2766.1">computed</span></span><span class="koboSpan" id="kobo.2767.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2768.1">() =&gt;</span></span><span class="koboSpan" id="kobo.2769.1"> {...})
 
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2770.1">addTask</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2771.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2772.1">titleInput: HTMLInputElement</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2773.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2774.1">if</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2775.1"> (titleInput.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2776.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2777.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2778.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2779.1"> newTask = { </span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2780.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2781.1">: titleInput.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2782.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2783.1">, </span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2784.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2785.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.2786.1">false</span></strong><strong class="hljs-slc"> </strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2787.1">};</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2788.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2789.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2790.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2791.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2792.1">set</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2793.1">([...</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2794.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2795.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2796.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2797.1">(), newTask]);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2798.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2799.1">titleInput.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2800.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2801.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2802.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2803.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2804.1">}</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.2805.1">toggleTask</span></span><span class="koboSpan" id="kobo.2806.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2807.1">task: Task</span></span><span class="koboSpan" id="kobo.2808.1">) {...}
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2809.1">Now, update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2810.1">app.component.html</span></code><span class="koboSpan" id="kobo.2811.1"> to bind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2812.1">addTask</span></code><span class="koboSpan" id="kobo.2813.1"> method to the input and </span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.2814.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2815.1">Add</span></code><span class="koboSpan" id="kobo.2816.1"> button as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2817.1">&lt;!-- Task Input --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2818.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2819.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2820.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2821.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2822.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2823.1">mb-4"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2824.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2825.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2826.1">input</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2827.1">#</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2828.1">titleInput</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2829.1"> (</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2830.1">keydown.enter</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2831.1">)=</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2832.1">"addTask(titleInput)"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2833.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2834.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2835.1">"p-2 border rounded</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.2836.1">mr-2"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2837.1">placeholder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2838.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2839.1">"New task..."</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2840.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2841.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2842.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2843.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2844.1">click</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2845.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2846.1">"addTask(titleInput)"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2847.1">&gt;</span></span><span class="koboSpan" id="kobo.2848.1">Add</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2849.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2850.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2851.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2852.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2853.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2854.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2855.1">You should be able to create new tasks as shown in the following figure:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.2856.1"><img alt="" role="presentation" src="../Images/B18469_01_21.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.2857.1">Figure 1.21: Creating new tasks in the app</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="10"><span class="koboSpan" id="kobo.2858.1">We will</span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.2859.1"> now add the possibility of filtering items by their completed status. </span><span class="koboSpan" id="kobo.2859.2">Let us add a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.2860.1">signal</span></code><span class="koboSpan" id="kobo.2861.1"> and a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2862.1">computed</span></code><span class="koboSpan" id="kobo.2863.1"> property for this in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2864.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2865.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2866.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2867.1">import</span></span><span class="koboSpan" id="kobo.2868.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2869.1">Task</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2870.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2871.1">TasksFilter</span></strong></span><span class="koboSpan" id="kobo.2872.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2873.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2874.1">'./task.model'</span></span><span class="koboSpan" id="kobo.2875.1">;
 
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2876.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2877.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2878.1">AppComponent</span></span><span class="koboSpan" id="kobo.2879.1"> {
  tasks = signal&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.2880.1">Task</span></span><span class="koboSpan" id="kobo.2881.1">[]&gt;([...]);
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2882.1">filter = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2883.1">signal</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2884.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2885.1">TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2886.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2887.1">All</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2888.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2889.1">filters = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2890.1">TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2891.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2892.1">filteredTasks = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2893.1">computed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2894.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2895.1">() =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2896.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2897.1">switch</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2898.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2899.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2900.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2901.1">filter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2902.1">()) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2903.1">case</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2904.1">TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2905.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2906.1">All</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2907.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2908.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2909.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2910.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2911.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2912.1">();</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2913.1">case</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2914.1">TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2915.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2916.1">Active</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2917.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2918.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2919.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2920.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2921.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2922.1">().</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2923.1">filter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2924.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2925.1">taskItem</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2926.1"> =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2927.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2928.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2929.1"> !taskItem.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2930.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2931.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2932.1">});</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2933.1">case</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2934.1">TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2935.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2936.1">Completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2937.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2938.1">return</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2939.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2940.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2941.1">tasks</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2942.1">().</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2943.1">filter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2944.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2945.1">taskItem</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2946.1"> =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2947.1"> {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2948.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2949.1"> taskItem.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2950.1">completed</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2951.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2952.1">});</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2953.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2954.1">})</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2955.1">changeFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2956.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2957.1">filter: TasksFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2958.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2959.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2960.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2961.1">filter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2962.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2963.1">set</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2964.1">(filter);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2965.1">}</span></strong></span><span class="koboSpan" id="kobo.2966.1">
  ...
</span><span class="koboSpan" id="kobo.2966.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2967.1">We can</span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.2968.1"> now use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2969.1">changeFilter</span></code><span class="koboSpan" id="kobo.2970.1"> method and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2971.1">filteredTasks</span></code><span class="koboSpan" id="kobo.2972.1"> computed signal in the template to filter the</span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.2973.1"> tasks. </span><span class="koboSpan" id="kobo.2973.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2974.1">app.component.html</span></code><span class="koboSpan" id="kobo.2975.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.2976.1">&lt;!-- Task List --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2977.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2978.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2979.1">&gt;</span></span><span class="koboSpan" id="kobo.2980.1">
      @for (task of </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2981.1">filteredTasks()</span></strong></span><span class="koboSpan" id="kobo.2982.1">; track $index) {
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2983.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2984.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2985.1"> (</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2986.1">click</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2987.1">)=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2988.1">"toggleTask(task)"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2989.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2990.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2991.1">"mb-2 flex gap-</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.2992.1">4 items-center cursor-pointer hover:opacity-70"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2993.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2994.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2995.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2996.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2997.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2998.1">"checkbox"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2999.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3000.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3001.1">]=</span></span>
<span class="hljs-tag"> </span><span class="hljs-string"><span class="koboSpan" id="kobo.3002.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3003.1">task.completed"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3004.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3005.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3006.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3007.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.3008.1">ngClass</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3009.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3010.1">"{'line-through':</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.3011.1">task.completed}"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3012.1">&gt;</span></span><span class="koboSpan" id="kobo.3013.1">{{ task.title }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3014.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3015.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3016.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3017.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3018.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3019.1">&gt;</span></span><span class="koboSpan" id="kobo.3020.1">
      }
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.3021.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3022.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3023.1">&gt;</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.3024.1">&lt;!-- Filters --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3025.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3026.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3027.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3028.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3029.1">"mt-4"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3030.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3031.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3032.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3033.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3034.1">click</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3035.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3036.1">"changeFilter(filters.All)"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3037.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3038.1">ngClass</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3039.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3040.1">"{'!bg-purple-500 text-white': filter()</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3041.1">=== filters.All}"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3042.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3043.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3044.1">"p-2 rounded mr-2"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3045.1">&gt;</span></span><span class="koboSpan" id="kobo.3046.1">
        All</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3047.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3048.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3049.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3050.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3051.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3052.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3053.1">click</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3054.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3055.1">"changeFilter(filters.Active)"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3056.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3057.1">ngClass</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3058.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3059.1">"{'!bg-purple-500 text-white': filter()</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3060.1">=== filters.Active}"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3061.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3062.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3063.1">"p-2 rounded mr-2"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3064.1">&gt;</span></span><span class="koboSpan" id="kobo.3065.1">
        Active</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3066.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3067.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3068.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3069.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3070.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3071.1">(</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3072.1">click</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3073.1">)=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3074.1">"changeFilter(filters.Completed)"</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3075.1">[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.3076.1">ngClass</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3077.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3078.1">"{'!bg-purple-500 text-white': filter()</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.3079.1">=== filters.Completed}"</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3080.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3081.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3082.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.3083.1">p-2 rounded"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3084.1">&gt;</span></span><span class="koboSpan" id="kobo.3085.1">
        Completed</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3086.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3087.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3088.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.3089.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3090.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3091.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3092.1">If you </span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.3093.1">now see the application, you </span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.3094.1">can filter the tasks by </span><strong class="screenText"><span class="koboSpan" id="kobo.3095.1">All</span></strong><span class="koboSpan" id="kobo.3096.1">, </span><strong class="screenText"><span class="koboSpan" id="kobo.3097.1">Active</span></strong><span class="koboSpan" id="kobo.3098.1">, or </span><strong class="screenText"><span class="koboSpan" id="kobo.3099.1">Completed</span></strong><span class="koboSpan" id="kobo.3100.1">, as shown in the following figure:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.3101.1"><img alt="" role="presentation" src="../Images/B18469_01_22.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.3102.1">Figure 1.22: Filtering tasks in the application by Active</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="12"><span class="koboSpan" id="kobo.3103.1">Finally, we will implement the snack bar. </span><span class="koboSpan" id="kobo.3103.2">We want to show it whenever the user completes all the active tasks. </span><span class="koboSpan" id="kobo.3103.3">Let us update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3104.1">app.component.ts</span></code><span class="koboSpan" id="kobo.3105.1"> file first to import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3106.1">SnackbarComponent</span></code><span class="koboSpan" id="kobo.3107.1"> and to create an </span><code class="inlineCode"><span class="koboSpan" id="kobo.3108.1">effect</span></code><span class="koboSpan" id="kobo.3109.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.3110.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3111.1">import</span></span><span class="koboSpan" id="kobo.3112.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.3113.1">Component</span></span><span class="koboSpan" id="kobo.3114.1">, computed, signal, effect, </span><span class="hljs-title"><span class="koboSpan" id="kobo.3115.1">ViewChild</span></span><span class="koboSpan" id="kobo.3116.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3117.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3118.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.3119.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3120.1">import</span></span><span class="koboSpan" id="kobo.3121.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.3122.1">SnackbarComponent</span></span><span class="koboSpan" id="kobo.3123.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3124.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.3125.1">'./components/snackbar/snackbar.component'</span></span><span class="koboSpan" id="kobo.3126.1">;
 
</span><span class="hljs-meta"><span class="koboSpan" id="kobo.3127.1">@Component</span></span><span class="koboSpan" id="kobo.3128.1">({
  ...,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.3129.1">imports</span></span><span class="koboSpan" id="kobo.3130.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.3131.1">CommonModule</span></span><span class="koboSpan" id="kobo.3132.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.3133.1">RouterModule</span></span><span class="koboSpan" id="kobo.3134.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.3135.1">SnackbarComponent</span></span><span class="koboSpan" id="kobo.3136.1">],
})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3137.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.3138.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.3139.1">AppComponent</span></span><span class="koboSpan" id="kobo.3140.1"> {
  </span><span class="hljs-meta"><span class="koboSpan" id="kobo.3141.1">@ViewChild</span></span><span class="koboSpan" id="kobo.3142.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.3143.1">SnackbarComponent</span></span><span class="koboSpan" id="kobo.3144.1">) snackbar!: </span><span class="hljs-title"><span class="koboSpan" id="kobo.3145.1">SnackbarComponent</span></span><span class="koboSpan" id="kobo.3146.1">;
  ...
  </span><span class="koboSpan" id="kobo.3146.2">completedEffectRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.3147.1">effect</span></span><span class="koboSpan" id="kobo.3148.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.3149.1">() =&gt;</span></span><span class="koboSpan" id="kobo.3150.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3151.1">const</span></span><span class="koboSpan" id="kobo.3152.1"> tasks = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3153.1">this</span></span><span class="koboSpan" id="kobo.3154.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3155.1">tasks</span></span><span class="koboSpan" id="kobo.3156.1">();
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.3157.1">if</span></span><span class="koboSpan" id="kobo.3158.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.3159.1">this</span></span><span class="koboSpan" id="kobo.3160.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3161.1">finishedTasksCount</span></span><span class="koboSpan" id="kobo.3162.1">() === tasks.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3163.1">length</span></span><span class="koboSpan" id="kobo.3164.1"> &amp;&amp; tasks.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3165.1">length</span></span><span class="koboSpan" id="kobo.3166.1"> &gt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.3167.1">0</span></span><span class="koboSpan" id="kobo.3168.1">) {
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3169.1">this</span></span><span class="koboSpan" id="kobo.3170.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3171.1">snackbar</span></span><span class="koboSpan" id="kobo.3172.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3173.1">show</span></span><span class="koboSpan" id="kobo.3174.1">();
    }
  })
 
  ...
</span><span class="koboSpan" id="kobo.3174.2">}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.3175.1">Now, we </span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.3176.1">can</span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.3177.1"> update the template to add the snackbar component in the UI. </span><span class="koboSpan" id="kobo.3177.2">Let us update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3178.1">app.component.html</span></code><span class="koboSpan" id="kobo.3179.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.3180.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3181.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3182.1">&gt;</span></span><span class="koboSpan" id="kobo.3183.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.3184.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.3185.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.3186.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3187.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3188.1">app-snackbar</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3189.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.3190.1">Congratulations! </span><span class="koboSpan" id="kobo.3190.2">You completed all tasks.</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3191.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.3192.1">app-snackbar</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.3193.1">&gt;</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3194.1">If you now mark all the tasks as completed, you should see the snackbar as shown in the following figure:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.3195.1"><img alt="" role="presentation" src="../Images/B18469_01_23.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.3196.1">Figure 1.23: Snackbar displayed on all tasks’ completion using an </span><strong class="keyWord"><span class="koboSpan" id="kobo.3197.1">effect</span></strong></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.3198.1">Voila! </span><span class="koboSpan" id="kobo.3198.2">Just by </span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.3199.1">using the signals, we can create a</span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.3200.1"> fully functional (mini) tasks manager application in Angular. </span><span class="koboSpan" id="kobo.3200.2">Now that you know how to work with signals in Angular, see the next section to understand how the recipe works.</span></p>
<h2 class="heading-2" id="_idParaDest-54"><span class="koboSpan" id="kobo.3201.1">How it works</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.3202.1">The Angular core team </span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.3203.1">published a </span><strong class="keyWord"><span class="koboSpan" id="kobo.3204.1">Request for Comments</span></strong><span class="koboSpan" id="kobo.3205.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.3206.1">RFC</span></strong><span class="koboSpan" id="kobo.3207.1">) about signals, and I was excited. </span><span class="koboSpan" id="kobo.3207.2">Did I already say that? </span><em class="italic"><span class="koboSpan" id="kobo.3208.1">I guess yes!</span></em><span class="koboSpan" id="kobo.3209.1"> But it is so awesome that I had to mention it again. </span><span class="koboSpan" id="kobo.3209.2">The biggest benefit of signals is the way they work with Angular’s change detection. </span><span class="koboSpan" id="kobo.3209.3">Instead of Angular’s change detection looking for changes in the application, signals can notify the Angular change detection when something changes.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3210.1">In this recipe, we started by creating a </span><code class="inlineCode"><span class="koboSpan" id="kobo.3211.1">type</span></code><span class="koboSpan" id="kobo.3212.1"> for the task item and an </span><code class="inlineCode"><span class="koboSpan" id="kobo.3213.1">enum</span></code><span class="koboSpan" id="kobo.3214.1"> for the filters. </span><span class="koboSpan" id="kobo.3214.2">Then we used the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3215.1">signal</span></code><span class="koboSpan" id="kobo.3216.1"> function from </span><code class="inlineCode"><span class="koboSpan" id="kobo.3217.1">@angular/core</span></code><span class="koboSpan" id="kobo.3218.1"> package to create a </span><code class="inlineCode"><span class="koboSpan" id="kobo.3219.1">WritableSignal</span></code><span class="koboSpan" id="kobo.3220.1"> of type </span><code class="inlineCode"><span class="koboSpan" id="kobo.3221.1">Task</span></code><span class="koboSpan" id="kobo.3222.1">. </span><span class="koboSpan" id="kobo.3222.2">This is because the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3223.1">signal</span></code><span class="koboSpan" id="kobo.3224.1"> function returns a </span><code class="inlineCode"><span class="koboSpan" id="kobo.3225.1">WritableSignal</span></code><span class="koboSpan" id="kobo.3226.1">.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.3227.1">At the time of authoring this book, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3228.1">signal</span></code><span class="koboSpan" id="kobo.3229.1"> function is exported from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3230.1">@angular/core</span></code><span class="koboSpan" id="kobo.3231.1"> package and signals are still in developer preview. </span><span class="koboSpan" id="kobo.3231.2">This might change with future releases.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.3232.1">When using signals in Angular, the way to get or render the value of a signal is to use its getter function, which is just calling the signal as a function. </span><span class="koboSpan" id="kobo.3232.2">In the recipe, you can see that we have </span><code class="inlineCode"><span class="koboSpan" id="kobo.3233.1">this.tasks()</span></code><span class="koboSpan" id="kobo.3234.1"> mentioned at several places. </span><span class="koboSpan" id="kobo.3234.2">We are getting the value of the tasks signal, which is an array of type </span><code class="inlineCode"><span class="koboSpan" id="kobo.3235.1">Task</span></code><span class="koboSpan" id="kobo.3236.1">. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.3237.1">Note that we also use this signal the same way in our template (</span><code class="inlineCode"><span class="koboSpan" id="kobo.3238.1">app.component.html</span></code><span class="koboSpan" id="kobo.3239.1">) to render the count of total tasks by using </span><code class="inlineCode"><span class="koboSpan" id="kobo.3240.1">{{tasks().length}}</span></code><span class="koboSpan" id="kobo.3241.1">. </span><span class="koboSpan" id="kobo.3241.2">And that’s all about how you can get the value of a signal. </span><span class="koboSpan" id="kobo.3241.3">However, to set a signal, we need to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3242.1">set</span></code><span class="koboSpan" id="kobo.3243.1"> method on the signal itself. </span><span class="koboSpan" id="kobo.3243.2">Let us observe the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3244.1">filter</span></code><span class="koboSpan" id="kobo.3245.1"> signal and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3246.1">changeFilter</span></code><span class="koboSpan" id="kobo.3247.1"> method as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.3248.1">filter = </span><span class="hljs-title"><span class="koboSpan" id="kobo.3249.1">signal</span></span><span class="koboSpan" id="kobo.3250.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.3251.1">TasksFilter</span></span><span class="koboSpan" id="kobo.3252.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3253.1">All</span></span><span class="koboSpan" id="kobo.3254.1">); 
...
</span><span class="hljs-title"><span class="koboSpan" id="kobo.3255.1">changeFilter</span></span><span class="koboSpan" id="kobo.3256.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.3257.1">filter: TasksFilter</span></span><span class="koboSpan" id="kobo.3258.1">) {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.3259.1">this</span></span><span class="koboSpan" id="kobo.3260.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3261.1">filter</span></span><span class="koboSpan" id="kobo.3262.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.3263.1">set</span></span><span class="koboSpan" id="kobo.3264.1">(filter);
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3265.1">Notice that </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.3266.1">to update the filter signal’s value, we use the statement </span><code class="inlineCode"><span class="koboSpan" id="kobo.3267.1">this.filter.set(filter)</span></code><span class="koboSpan" id="kobo.3268.1">. </span><span class="koboSpan" id="kobo.3268.2">We could have avoided creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3269.1">changeFilter</span></code><span class="koboSpan" id="kobo.3270.1"> method and could have used statements like </span><code class="inlineCode"><span class="koboSpan" id="kobo.3271.1">filter.set(filters.All)</span></code><span class="koboSpan" id="kobo.3272.1"> etc, in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3273.1">app.component.html</span></code><span class="koboSpan" id="kobo.3274.1"> (the template) but I find this approach much cleaner and easier to read in both the TypeScript and HTML files.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3275.1">Apart from signals, we also used </span><em class="italic"><span class="koboSpan" id="kobo.3276.1">computed properties</span></em><span class="koboSpan" id="kobo.3277.1">. </span><span class="koboSpan" id="kobo.3277.2">These are properties that depend on one or more signals and will automatically update if any of those signals are changed. </span><span class="koboSpan" id="kobo.3277.3">This is powerful and provides reactivity in the application without writing much code. </span><span class="koboSpan" id="kobo.3277.4">If you mouseover the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3278.1">finishedTasksCount</span></code><span class="koboSpan" id="kobo.3279.1"> (computed) property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.3280.1">app.component.ts</span></code><span class="koboSpan" id="kobo.3281.1">, you will notice it says:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.3282.1">(property) </span><span class="hljs-title"><span class="koboSpan" id="kobo.3283.1">AppComponent</span></span><span class="koboSpan" id="kobo.3284.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.3285.1">finishedTasksCount</span></span><span class="koboSpan" id="kobo.3286.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.3287.1">Signal</span></span><span class="koboSpan" id="kobo.3288.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.3289.1">number</span></span><span class="koboSpan" id="kobo.3290.1">&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.3291.1">This means that </span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.3292.1">computed properties are not writable signals since they are computed automatically, and we don’t change them manually.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3293.1">Finally, we worked with an </span><code class="inlineCode"><span class="koboSpan" id="kobo.3294.1">effect</span></code><span class="koboSpan" id="kobo.3295.1">. </span><span class="koboSpan" id="kobo.3295.2">An </span><code class="inlineCode"><span class="koboSpan" id="kobo.3296.1">effect</span></code><span class="koboSpan" id="kobo.3297.1"> is a piece of code – technically a function that triggers automatically if any of the signals used in the function’s code block change. </span><span class="koboSpan" id="kobo.3297.2">This can be useful for things like making an API call, saving stuff to local storage, reporting an analytics event, and logging. </span><span class="koboSpan" id="kobo.3297.3">If there is a side-effect in your code that you need to trigger based on signals, you can use an </span><code class="inlineCode"><span class="koboSpan" id="kobo.3298.1">effect</span></code><span class="koboSpan" id="kobo.3299.1"> for it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.3300.1">Now that you know how the recipe works, see the next section for further reading.</span></p>
<h2 class="heading-2" id="_idParaDest-55"><span class="koboSpan" id="kobo.3301.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.3302.1">Angular Signals with examples: </span><a href="https://www.youtube.com/watch?v=IzMzjZXbeQk"><span class="url"><span class="koboSpan" id="kobo.3303.1">https://www.youtube.com/watch?v=IzMzjZXbeQk</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.3304.1">Angular Signals official docs: </span><a href="https://angular.dev/guide/signals#writable-signals"><span class="url"><span class="koboSpan" id="kobo.3305.1">https://angular.dev/guide/signals#writable-signals</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.3306.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3307.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_1.xhtml"><span class="url"><span class="koboSpan" id="kobo.3308.1">https://packt.link/AngularCookbook2e</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.3309.1"><img alt="" role="presentation" src="../Images/QR_Code1388317275422265.png"/></span></p>
</div>
</body></html>