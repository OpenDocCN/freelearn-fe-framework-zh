# 前言

构建前端应用程序具有挑战性，尤其是在构建大型应用程序时，如果没有适当的指导，难度会不断升级。不幸的是，由于库的 UI 中心性质，许多基于 React 的应用程序都陷入了这种困境，使得开发者必须独自应对前端开发的其它复杂性。还有许多其他考虑因素，例如异步网络请求、可访问性、性能和状态管理，仅举几例。这些因素增加了前端应用程序的复杂性。随着应用程序规模的扩大，维护代码变得是一项艰巨的任务。添加新功能所需的时间比最初看起来要多得多，而识别缺陷（然后修复它们）同样具有挑战性，甚至更甚。

然而，这些挑战是可以克服的。我们可以学会识别导致问题的常见反模式，然后利用既定的模式、设计原则和实践来解决和纠正这些问题。历史告诉我们，在一个领域得出的解决方案往往对其他领域也有相关性，尤其是在像单一职责原则、依赖倒置原则和不要重复自己这样的基本设计原则方面。这些原则在 20 世纪 70 年代指导了 UNIX 系统的构建，在 20 世纪 90 年代指导了 Java Swing 应用程序的构建，并且至今仍然有效。毫无疑问，它们将继续对未来框架和库的相关性产生影响。

本书旨在深入探讨这些问题，并考察既定模式和惯例如何减轻构建大型应用程序的挑战。我们将看到设计原则和设计模式如何简化设计，使代码更容易理解、修改和长期维护。通过这次探索，读者将更深入地了解如何使用 React 导航前端开发的复杂世界，确保他们的应用程序既健壮又易于维护。

# 这本书面向谁

本书面向对提高代码可维护性和效率感兴趣的 React 开发者。无论你是初学者还是有经验，这里都有适合你的内容。对 React 有基本的了解是有益的，但本书旨在以直接的方式指导你理解这些概念。

重点在于识别常见反模式，并使用既定的设计原则和模式来解决它们。通过实际示例和逐步方法，你将学习如何简化代码以实现更好的理解、更轻松的修改和长期维护。

# 本书涵盖的内容

在*第一章*《介绍 React 反模式》中，你将更深入地了解构建用户界面、处理状态管理、解决“不愉快路径”以及识别 React 中常见反模式的障碍。

在*第二章**，理解 React 基础知识*，你将深入了解 React 的基础，包括静态组件、props、UI 分解、状态管理、渲染过程和常见的 React Hooks，为后续章节打下坚实的基础。

在*第三章**，组织你的 React 应用程序*，你将了解 React 中不同类型的项目结构，探讨它们的优缺点和实际应用。

在*第四章**，设计你的 React 组件*，你将学会识别 React 组件设计中常见的反模式，并探索包括单一职责原则和不要重复自己等基本设计原则，以改进组件结构。

在*第五章**，React 中的测试*，你将了解软件测试的重要性，探索各种测试类型，如单元测试、集成测试和端到端测试，并熟悉 Cypress 和 Jest 等流行测试工具，为 React 应用程序中的复杂测试场景打下坚实基础。

在*第六章**，探索常见的重构技术*，你将了解重构的本质，并深入研究各种重构技术，如重命名变量、提取变量和用管道替换循环，以增强代码的可维护性和可读性。

在*第七章**，介绍使用 React 进行测试驱动开发*，你将通过一个实际示例学习测试驱动开发的核心原则，同时在 React 应用程序中构建比萨店菜单页面的各种功能。

在*第八章**，探索 React 中的数据管理*，你将深入了解 React 中状态管理的常见挑战，如业务逻辑泄漏和属性钻取，并探讨包括采用反腐败层和利用 React 上下文 API 来增强代码可维护性和用户体验的解决方案。

在*第九章**，在 React 中应用设计原则*，你将回顾单一职责原则，接受依赖倒置原则，并理解在 React 中应用命令查询责任分离，以巩固你对关键设计原则的知识，帮助你掌握 React。

在*第十章**，深入组合模式*，你将通过高阶组件和自定义 Hooks 深入了解组合，并探索无头组件模式。你将欣赏到在 React 中创建可扩展、可维护和用户友好的 UI 的组合技术。

在*第十一章**，介绍 React 中的分层架构*中，你将探索分层架构，深入研究应用关注层，定义数据模型，并通过实际示例学习策略模式，了解它们对大型应用的重要性。

在*第十二章**，实现端到端项目*中，你将遍历开发天气应用程序的完整过程，从理解需求到实现城市搜索和添加到收藏夹等功能，同时确保代码可维护、可理解和可扩展。

在*第十三章**，回顾反模式原则*中，我们将简要回顾常见的反模式、React 设计模式和基本原理，并回顾本书中讨论的技术和实践，在你继续将这些见解应用到自己的项目中之前，提供一个简洁的复习。

# 要充分利用这本书

要深入阅读这本书，手头有一个文本编辑器至关重要；Visual Studio Code 或 Vim 等选择值得称赞，但任何其他你偏好的编辑器也能很好地满足需求。另一种选择是功能齐全的**集成开发环境**（**IDE**）如 WebStorm 或 IntelliJ，虽然不是强制性的，但可以显著提高你的效率。

命令行界面是另一个必需品；对于 Mac 或 Linux 用户，设置已经就绪，但 Windows 用户可能需要安装——Windows Terminal 是一个不错的选择，它提供了一个现代的终端和命令行体验。提前准备这些工具将确保你在穿越本书内容时有一个无缝的旅程。

| **本书涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| React 16+ | Windows、macOS 或 Linux |
| TypeScript 4.9.5 |  |
| Visual Studio Code 或 WebStorm |  |
| 终端/Window Terminal（适用于 Windows 用户） |  |

# 下载示例代码文件

你可以从 GitHub（[`github.com/PacktPublishing/React-Anti-Patterns/`](https://github.com/PacktPublishing/React-Anti-Patterns/)）下载本书的示例代码文件。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的书籍和视频目录的代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 使用的约定

本书中使用了多种文本约定。

`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“然后我们可以将所需的`标题`和`摘要`传递给`Article`组件。”

代码块设置如下：

```js
<Article
  heading="Think in components"
  summary="It's important to change your mindset when coding with React."
/>
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```js
<article>
  <h3>Think in components</h3>
  <p>It's important to change your mindset when coding with React.</p>
</article>
```

任何命令行输入或输出都按以下方式编写：

```js
$ mkdir css
$ cd css
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词以粗体显示。以下是一个示例：“从**管理**面板中选择**系统信息**。”

小贴士或重要注意事项

看起来像这样。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过 customercare@packtpub.com 给我们发邮件，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告这一点。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过版权@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com.](http://authors.packtpub.com.)

# 分享您的想法

读完《React Anti-Patterns》后，我们很乐意听听您的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1-805-12397-1)并分享您的反馈。

您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。

# 下载此书的免费 PDF 副本

感谢您购买此书！

您喜欢在路上阅读，但无法携带您的印刷书籍到处走？

您的电子书购买是否与您选择的设备不兼容？

不要担心，现在，您每购买一本 Packt 书籍，都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制和粘贴代码到您的应用程序中。

优惠远不止于此，您还可以获得独家折扣、时事通讯和每日免费内容的每日电子邮件。

按照以下简单步骤获取好处：

1.  扫描二维码或访问以下链接

![下载此书免费 PDF 副本的二维码](img/B21103_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781805123972`](https://packt.link/free-ebook/9781805123972)

1.  提交您的购买证明

1.  就这样！我们将直接将您的免费 PDF 和其他优惠发送到您的电子邮件中

# 第一部分：介绍基础知识

在本书的第一部分，你将通过探索其核心基础知识并了解如何高效地构建应用程序来踏入 React 的领域。本部分将有助于构建一个坚实的基础，这对于在后续部分中导航更复杂的 React 方面至关重要。

本部分包含以下章节：

+   *第一章*, *介绍 React 反模式*

+   *第二章*, *理解 React 基础知识*

+   *第三章*, *组织你的 React 应用程序*

+   *第四章*, *设计你的 React 组件*
