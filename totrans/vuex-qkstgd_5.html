<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Debugging Vuex Applications</h1>
                </header>
            
            <article>
                
<p class="mce-root">By developing your applications using test-driven development, you will reduce debugging time <span>considerably</span>. Still, there are moments when a piece of code refuses to work as expected or a subtle bug hides among your code.</p>
<p>Fortunately, browsers provide developer tools to help frontend developers debug their applications and Vue provides vue-devtools .</p>
<p>In the following chapter, we will learn about:</p>
<ul>
<li>Using vue-devtools</li>
<li>Using the built-in logger plugin</li>
</ul>
<div class="packt_infobox"><span>To understand this chapter, you need to have basic knowledge of the Chrome developer Tools instrument.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using vue-devtools</h1>
                </header>
            
            <article>
                
<p>Vue.js provides the vue-devtools utility to help programmers debug Vue applications. Vuex enhances this tool to keep track of every mutation committed.</p>
<p>You can install this utility as an extension for Chrome or FireFox, or you can navigate to <a href="https://github.com/vuejs/vue-devtools">https://github.com/vuejs/vue-devtools</a> for instructions on how to install it.</p>
<p>Start the <em>EveryNote</em> application by typing <kbd>npm start</kbd>, open Google Chrome with vue-devtools installed at <kbd>http://localhost:8080/</kbd>, then press <em>F12</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Component inspector</h1>
                </header>
            
            <article>
                
<p>If you select the <span class="packt_screen">Elements</span> tab in Chrome Developer Tools, you will see something like the following screenshot:</p>
<div class="CDPAlignCenter"><img src="assets/32680610-2418-4a97-a269-b152b8136e60.png"/></div>
<div class="packt_figref CDPAlignCenter">Figure 4.1: Chrome Developer Tools, Elements tab</div>
<p>Below the <span class="packt_screen">Elements</span> tab, you can see the current DOM tree of the <em>EveryNote</em> application. The selected <kbd>div</kbd> is the element containing the second note.</p>
<p>By mapping the DOM structure back to the Vue components we've just coded, you can understand that the selected element is the root element of the component <kbd>Note</kbd>. Wouldn't it be better to see something like <kbd>&lt;Note&gt;</kbd> instead of the detailed <kbd>Note</kbd> DOM elements structure?</p>
<p>Now select the <span class="packt_screen">Vue</span> tab, and you will see something like the following screenshot:</p>
<div class="CDPAlignCenter"><img src="assets/57a83bdd-0259-484b-85ff-0fa6ebd320cd.png"/></div>
<div class="CDPAlignCenter packt_figref">Figure 4.2: Vue tab inside Chrome Developer Tools.</div>
<p>In a glance, you can see the application structure with the components' names instead of the components' DOM elements. By moving the mouse over the components, the corresponding element will be highlighted in the HTML page. If you press the select button (<img src="assets/cbb17bef-a076-403f-a362-b15ad1953cdc.png"/>), you can select an element inside the HTML page and have it highlighted in the components tree.</p>
<p>By selecting an element from the tree below the <span class="packt_screen">Filter components</span> box, you will also see its properties in the <kbd>props</kbd> frame, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8f9edcc6-1c91-4783-abf6-50697b9fa0a9.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Figure 4.3: Props frame</div>
<p>If the selected component has a binding to Vuex, it will appear in the same box. This next screenshot is an example:</p>
<div class="CDPAlignCenter"><img src="assets/71bb1954-c2cd-49ae-b3d2-dfbc5a3ac78a.png" style=""/></div>
<div class="CDPAlignCenter packt_figref">Figure 4.4: Vuex component bindings</div>
<p>This way, it becomes easy to move across Vue components inside a page, and see their state.</p>
<p>The next feature we will see is the events inspector.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Events inspector</h1>
                </header>
            
            <article>
                
<p>Watching the components state is useful, but wouldn't it be great if we could also record the interaction between components? In fact, vue-devtools provides two other features: events and Vuex mutation recording.</p>
<p>In the following screenshot, you can see the <span><span class="packt_screen">Filter events</span></span> section of vue-devtools:</p>
<div class="CDPAlignCenter"><img src="assets/173462fc-fc41-420d-b07c-06f0d4d0aa22.png" style=""/></div>
<div class="CDPAlignCenter packt_figref">Figure 4.5: Filter events section</div>
<p>As an example, I added a note and, because of this action, the <span class="packt_screen">Filter events</span> tab recorded that an <kbd>editDone</kbd> event has been fired inside <kbd>NoteEditor</kbd>. It also shows the event payload.</p>
<p>Finally, we will explore a <span class="packt_screen">Vuex</span> dedicated tab.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Vuex time travel</h1>
                </header>
            
            <article>
                
<p>By moving to the Vuex section by pressing the Vue button <img src="assets/00343d22-729f-4de2-91e6-9b061686d342.png"/>, you will be able to record all the Vuex mutations committed. The following screenshot shows this feature:</p>
<div class="CDPAlignCenter CDPAlign"> <img src="assets/fefc1aae-c780-405e-894a-7b82ce341061.png" style=""/></div>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref">Figure 4.6: Vuex time travel tab</div>
<p>As you can see, after the application has been loaded, two notes have been added. Those are the notes that get added because of the fake call to a hypothetical server, triggered by the action <kbd>loadNotesFromServer</kbd>.</p>
<p>After that, I clicked the Delete button of the second note. In fact, the third mutation recorded is <kbd>DELETE_NOTE</kbd>. You can see the state and the mutation payload for each mutation, and even undo a commit, as demonstrated in the following screenshot, where I am about to undo the <kbd>DELETE_NOTE</kbd> mutation:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0d9d9f07-ac3a-406e-83e4-5e6a5e07cbbc.png" style=""/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Figure 4.7: Undoing the DELETE_NOTE mutation</div>
<p>As a result of the undo, the application state reverts to the previous mutation, and the application shows the second note again, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f65780c8-471e-4ea6-9aba-00833695922e.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Figure 4.8: Application state after undoing the DELETE_NOTE mutation.</div>
<p>The ability of undo mutations comes in handy when you want to debug an action and the corresponding mutation: you can put a breakpoint in the action code using the <span class="packt_screen">Sources</span> tab in Chrome Developer Tools, and then execute and rollback the mutation as many times as you need. Note that, if you use Chrome debugger to restart the <span class="packt_screen">Action</span> code after a mutation has been committed, then the application state has already been changed, and the second execution is influenced by the new state. On the contrary, if you undo a commit, you can safely re-execute a piece of code without the need to reload the entire page.</p>
<p>Finally, the two buttons above the <span class="packt_screen">state</span> frame let you export and import the application state from and to the clipboard.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Enabling the Vuex built-in logger plugin</h1>
                </header>
            
            <article>
                
<p>Vuex provides a built-in plugin to log every mutation. It can be added to the application store as follows:</p>
<pre><span>// src/store/index.js<br/><strong>import createLogger from 'vuex/dist/logger';</strong><br/>// ...<br/><br/>const </span>debug = <span>process</span>.<span>env</span>.<span>NODE_ENV </span>!== <span>'production'</span><span>;<br/></span><strong>const plugins = debug ? [createLogger({})] : []</strong><span><strong>;</strong></span><span><br/></span><span>const </span>store = <span>new </span>Vuex.Store({<br/>  <span>state</span>: {<br/>   // ...<span><br/></span><span>  </span>}<span>,<br/></span><span>  </span>mutations<span>,<br/></span><span>  </span>actions<span>,<br/></span><span>  </span><span>strict</span>: debug<span>,<br/></span><span>  </span><strong>plugins</strong><span>,<br/></span>})<span>;</span></pre>
<p>The resulting output for the <em>EveryNote</em> app is:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/be72e543-fe03-4f32-ae75-ddaf340b6981.png" style=""/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Figure 4.8: Vuex built-in logger plugin</div>
<p>As you can see in the preceding screenshot, it logs not only the mutation name but also the previous and next state.</p>
<p>You can download the code at this stage by typing:</p>
<pre><strong>git checkout step-6_vuex-built-in-logger</strong></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we went through vue-devtools features, and we introduced the Vuex built-in logger plugin. But what exactly is a Vuex plugin?</p>
<p>Well, that is the topic of <a href="51bea87a-c56f-4f3f-8d2b-79ca84cc2de1.xhtml" target="_blank">Chapter 5</a>, <em>Using the Vuex Plugin System</em>; in the next few pages, we will learn what a Vuex plugin is, and how we can write a custom one.</p>


            </article>

            
        </section>
    </body></html>