- en: Deploying to Google Play
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Although deploying an app to Google Play can be slightly simpler when compared
    to the Apple App Store, there's still a few key steps that we need to pay attention
    to. We covered some preparation steps in [Chapter 14](part0154.html#4IRMK0-289fe2426d594f99a90e4363b2c9c34d),
    *Deployment Preparation with webpack Bundling*, and [Chapter 15](part0163.html#4REBM0-289fe2426d594f99a90e4363b2c9c34d),
    *Deploying to the Apple App Store*, such as using webpack to bundle the app and
    preparing app icons and splash screens, so we will jump right into building a
    releasable APK.
  prefs: []
  type: TYPE_NORMAL
- en: We express our gratitude to TJ VanToll for an excellent eight-step article to
    deploy NativeScript apps ([https://www.nativescript.org/blog/steps-to-publish-your-nativescript-app-to-the-app-stores](https://www.nativescript.org/blog/steps-to-publish-your-nativescript-app-to-the-app-stores))
    from which we will insert excerpts from and expand wherever possible.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following topics are covered in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: Generating a keystore to build your APK with
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building a releasable APK with the NativeScript CLI
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Uploading the APK to Google Play for publication
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building an APK for Google Play
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Before you open Google Play to register and publish this app (which is the next
    step), let's double-check a couple of things to ensure that our metadata is correct.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open `app/App_Resources/Android/app.gradle` and ensure that the `applicationId`
    is correct for your package name:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00075.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Also, open `package.json` at the root of the project and double-check the `nativescript.id`
    there as well for good measure:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00076.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Now, you will need to generate an executable Android file for your application.
    On Android, this file has a `.apk` extension, and you can generate this file using
    the NativeScript CLI.
  prefs: []
  type: TYPE_NORMAL
- en: 'The `tns run` command you were using during NativeScript development actually
    generates a `.apk` file for you and installs that file on an Android emulator
    or device. However, for a Google Play release, the build you create must also
    be code signed. You can refer to Android''s documentation ([https://developer.android.com/studio/publish/app-signing.html](https://developer.android.com/studio/publish/app-signing.html))
    on code signing if you want to dive into the cryptographic details, but at a high
    level, you will need to do the following two things to create a release version
    of your Android app:'
  prefs: []
  type: TYPE_NORMAL
- en: Create a `.keystore` or `.jks` (Java keystore) file
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use that `.keystore` or `.jks` file to sign in to your app during a build
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The Android documentation provides you a few options on how you can create your
    keystore file ([https://developer.android.com/studio/publish/app-signing.html#release-mode](https://developer.android.com/studio/publish/app-signing.html#release-mode)).
    Our preferred approach is the `keytool` command-line utility, which is included
    in the Java JDK that NativeScript installs for you, so it should already be available
    on your development machine's command line.
  prefs: []
  type: TYPE_NORMAL
- en: 'To use `keytool` to generate a keystore for code signing our app, we will use
    the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The `keytool` utility will ask you a number of questions, several of which
    are optional (name of organization and the names of your city, state, and country),
    but the most important ones are the passwords for both the keystore and the alias
    (more on that later on). Here''s what the `keytool` process looks like when we
    generate the keystore:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00077.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Before we move on to how to use this `.jks` file, there's one important thing
    you need to know. Place this `.jks` file somewhere safe, and do not forget the
    password for the keystore or for the alias. (Personally, I like using the same
    password for my keystore and my aliases to simplify my life.) Android requires
    you to use this exact same `.jks` file to sign in to any and all updates to your
    app. This means that if you lose this `.jks` file, or its password, you will not
    be able to update your Android app. You'll have to create a brand new entry in
    Google Play, and your existing users will not be able to upgrade—so take care
    not to lose it!
  prefs: []
  type: TYPE_NORMAL
- en: Oh, and one more thing to note in most cases is that you'll want to use a single
    keystore file to sign in to all of your personal or company's Android applications.
    Remember how you had to pass a -alias flag to the keytool utility, and how that
    alias had its own password? It turns out that one keystore can have many aliases,
    and you'll want to create one for each Android app that you build.
  prefs: []
  type: TYPE_NORMAL
- en: Okay, so now that you have this `.jks` file, and you have it stored in a nice
    and secure location, the rest of the process is quite easy.
  prefs: []
  type: TYPE_NORMAL
- en: 'Build our Android app using webpack and pass it the information you just used
    to create the `.jks` file. For example, the following command is used to create
    a release build of `nStudio`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Once the command finishes running, you''ll have a releasable `.apk` file in
    your app''s `platforms/android/build/outputs/apk` folder; note the location of
    that file, as you''ll need it in the next step—deploying your app on Google Play:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00078.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Uploading to Google Play
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Google Play is where Android users find and install apps, and the Google Play
    Developer Console ([https://play.google.com/apps/publish/](https://play.google.com/apps/publish/))
    is where developers register and upload apps for users.
  prefs: []
  type: TYPE_NORMAL
- en: 'You will first create a new application by its name and then see it listed:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00079.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Android's documentation on uploading apps and setting up your store listing
    is quite good, so we will not recreate all that information here. Instead, a few
    tips will be provided that you might find helpful when uploading your own NativeScript
    apps to Google Play.
  prefs: []
  type: TYPE_NORMAL
- en: 'On the Store Listing tab in the Google Play Developer Console, you''ll have
    to provide at least two screenshots of your app in action, as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00080.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Launch your app in an Android **Android Virtual Device** (**AVD**) using the
    `tns run android --emulator` command. The Android AVDs have a built-in way of
    taking screenshots using the little camera icon in the emulator's sidebar.
  prefs: []
  type: TYPE_NORMAL
- en: 'Use this button to take a few screenshots of the most important screens in
    your app, and the image files themselves will appear on your desktop. From there,
    you could take those files and upload them directly into the Google Play Developer
    Console. A 1024 x 500 Feature Graphic image file is also required, which will
    appear at the top of your store listing, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00081.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Although not shown in the preceding screenshot, we recommend that you use a
    service like DaVinci ([https://www.davinciapps.com](https://www.davinciapps.com))
    to add a little flair to your screenshots, and turn them into a little tutorial
    of what your app does.
  prefs: []
  type: TYPE_NORMAL
- en: APK
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The App Releases section of the Google Play Developer Console is where you upload
    the `.apk` file you generated in the preceding step of this chapter.
  prefs: []
  type: TYPE_NORMAL
- en: 'You may see mention of opting into Google Play App Signing when you view the
    App Releases section. It''s best to opt in now rather than later. Once you''ve
    opted in, it will show Enabled:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00082.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: You can then proceed to upload the apk in your app's `platforms/android/build/outputs/apk` folder.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you have your APK uploaded, you should see it listed on that same page
    where you can type out release notes for the uploaded version in multiple languages
    of your choice:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00083.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: After you click on Save on that page, you will probably want to return to the
    Store listing section to finish filling out all of your app's information. Once
    you have everything set, you're ready to submit your app. Android app reviews
    generally take a few hours, and unless Google flags any problems, your app should
    be available in Google Play within half a day or so.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Woohoo! We built an app from *zero to published* in both stores, Apple App Store
    and Google Play. This has been quite an adventure with many twists and turns.
    We sincerely hope that this has given you deep insight into NativeScript for Angular
    app development as well as demystified any areas of this exciting tech stack for
    those who have been curious.
  prefs: []
  type: TYPE_NORMAL
- en: Both NativeScript and Angular have thriving global communities, and we encourage
    you to get involved, speak about your experiences, and share your excitement with
    others with all the exhilarating projects you and your teams may be working on.
    Never hesitate to reach out and ask for help, as we all take responsibility in
    our love and admiration for these two technologies.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are some additional helpful resources that you can check out:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://forum.nativescript.org](http://forum.nativescript.org)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[http://nativescript.rocks](http://nativescript.rocks)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: And of course get to know the docs!
  prefs: []
  type: TYPE_NORMAL
- en: '[http://docs.nativescript.org/angular/start/introduction.html](http://docs.nativescript.org/angular/start/introduction.html)'
  prefs: []
  type: TYPE_NORMAL
- en: Cheers!
  prefs: []
  type: TYPE_NORMAL
