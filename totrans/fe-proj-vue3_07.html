<html><head></head><body>
<div id="_idContainer237">
<h1 class="chapter-number" id="_idParaDest-148"><a id="_idTextAnchor248"/><span class="koboSpan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-149"><a id="_idTextAnchor249"/><span class="koboSpan" id="kobo.2.1">Routing</span></h1>
<p><a id="_idTextAnchor250"/><span class="koboSpan" id="kobo.3.1">In the previous chapter, you learned about sharing common logic between components using mixins, creating app plugins, and other approaches to creating components, such as dynamic and </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">functional components.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This chapter will guide you through how routing and Vue Router work. </span><span class="koboSpan" id="kobo.5.2">You will learn how to set up, implement, and manage the routing system in your app with Vue Router. </span><span class="koboSpan" id="kobo.5.3">You will look at dynamic routing for passing parameter values and nested routes for better reusability in complex applications. </span><span class="koboSpan" id="kobo.5.4">In addition, we will also look at JavaScript Hooks, which are helpful for authentication and </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">error handling.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">By the end of this chapter, you will be ready to handle static and dynamic routing in any </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">Vue application.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">This chapter covers the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following topics:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.11.1">Understanding routing</span></span></li>
<li><span class="koboSpan" id="kobo.12.1">Understanding </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">Vue Router</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Exploring the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.15.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.16.1"> element</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Defining </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">the routes</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Setting up a default layout for </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">your app</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Setting up navigation links </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.23.1">RouterLink</span></strong></span></li>
<li><span class="koboSpan" id="kobo.24.1">Passing </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">route parameters</span></span></li>
<li><span class="koboSpan" id="kobo.26.1">Understanding </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">Router Hooks</span></span></li>
<li><span class="koboSpan" id="kobo.28.1">Decoupling params </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">with props</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.30.1">Dynamic routing</span></span></li>
<li><span class="koboSpan" id="kobo.31.1">Catching </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">error paths</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.33.1">Nested routes</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.34.1">Using layouts</span></span></li>
</ul>
<h1 id="_idParaDest-150"><a id="_idTextAnchor251"/><span class="koboSpan" id="kobo.35.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.36.1">In this chapter, you need to set up a basic Vue project following the instructions in </span><a href="B18645_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.37.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.38.1">, </span><em class="italic"><span class="koboSpan" id="kobo.39.1">Starting Your First Vue Project</span></em><span class="koboSpan" id="kobo.40.1">. </span><span class="koboSpan" id="kobo.40.2">It’s recommended to create a single file Vue component to practice working with the examples and concepts </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">mentioned easily.</span></span></p>
<p><a id="_idTextAnchor252"/><span class="koboSpan" id="kobo.42.1">You can find this chapter’s source code </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">here: </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07"><span class="No-Break"><span class="koboSpan" id="kobo.44.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.45.1">.</span></span></p>
<h1 id="_idParaDest-151"><a id="_idTextAnchor253"/><span class="koboSpan" id="kobo.46.1">Understanding routing</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.47.1">Routing</span></strong><span class="koboSpan" id="kobo.48.1"> is one of the </span><a id="_idIndexMarker767"/><span class="koboSpan" id="kobo.49.1">most essential and primary parts of building dynamic web applications. </span><span class="koboSpan" id="kobo.49.2">You may be familiar with the word in its everyday context. </span><span class="koboSpan" id="kobo.49.3">It is the process of getting a user to their desired location. </span><span class="koboSpan" id="kobo.49.4">Users who enter </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">website.com/about</span></strong><span class="koboSpan" id="kobo.51.1"> into their URL bar will be redirected to the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.52.1">About</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.53.1"> page.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">In web development, routing is the matching mechanism by which we decide how to connect HTTP requests to the code that handles them. </span><span class="koboSpan" id="kobo.54.2">We use routing whenever there is a need for URL navigation in our application. </span><span class="koboSpan" id="kobo.54.3">Most modern web applications contain a lot of different URLs, even </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">single-page ones.</span></span></p>
<p><span class="koboSpan" id="kobo.56.1">Thus, routing creates a navigation system and helps users quickly move around our application and the </span><a id="_idIndexMarker768"/><span class="koboSpan" id="kobo.57.1">web. </span><span class="koboSpan" id="kobo.57.2">With </span><strong class="bold"><span class="koboSpan" id="kobo.58.1">Single-Page Applications</span></strong><span class="koboSpan" id="kobo.59.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.60.1">SPAs</span></strong><span class="koboSpan" id="kobo.61.1">), routing allows you to smoothly navigate within an application without the need for </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">page refreshing.</span></span></p>
<p><span class="koboSpan" id="kobo.63.1">In short, routing is a way for an application to interpret what resource users want based on the URL provided. </span><span class="koboSpan" id="kobo.63.2">It is a system for web-based resource navigation with URLs, such as paths to assets (images and videos), scripts, </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">and stylesheets.</span></span></p>
<h1 id="_idParaDest-152"><a id="_idTextAnchor254"/><span class="koboSpan" id="kobo.65.1">Understanding Vue Router</span></h1>
<p><span class="koboSpan" id="kobo.66.1">As stated in the </span><a id="_idIndexMarker769"/><span class="koboSpan" id="kobo.67.1">Vue.js documentation, </span><strong class="bold"><span class="koboSpan" id="kobo.68.1">Vue Router</span></strong><span class="koboSpan" id="kobo.69.1"> is the official router service for any Vue.js application. </span><span class="koboSpan" id="kobo.69.2">It provides a single-entry point for communication between components with routes and therefore effectively controls the application’s flow, regardless of the </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">user’s behavior.</span></span></p>
<h2 id="_idParaDest-153"><a id="_idTextAnchor255"/><span class="koboSpan" id="kobo.71.1">Installing Vue Router</span></h2>
<p><span class="koboSpan" id="kobo.72.1">Vue Router is not </span><a id="_idIndexMarker770"/><span class="koboSpan" id="kobo.73.1">installed by default; however, it can easily be enabled when creating an application with Vite. </span><span class="koboSpan" id="kobo.73.2">Create a new application by running the </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.75.1">
npm init vue@3</span></pre>
<p><span class="koboSpan" id="kobo.76.1">Select the </span><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">Yes</span></strong><span class="koboSpan" id="kobo.78.1"> option for adding Vue Router to the project as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.79.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.80.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.82.1"><img alt="Figure 7.1 – Adding Vue Router during creating a project" src="image/B18645_07_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.83.1">Figure 7.1 – Adding Vue Router during creating a project</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.84.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.85.1">If you would like to add Vue Router to an existing Vue.js application, you can install it as an application’s dependency with the </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.87.1">
npm install vue-router</span></pre>
<p><span class="koboSpan" id="kobo.88.1">The next step is understanding how Vue Router synchronizes the browser URL and the </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">application’s view.</span></span></p>
<p><span class="koboSpan" id="kobo.90.1">First, let’s look at the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.92.1"> elemen</span><a id="_idTextAnchor256"/><span class="koboSpan" id="kobo.93.1">t.</span></span></p>
<h1 id="_idParaDest-154"><span class="koboSpan" id="kobo.94.1">Exploring the RouterView eleme</span><a id="_idTextAnchor257"/><span class="koboSpan" id="kobo.95.1">nt</span></h1>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.96.1">RouterView</span></strong><span class="koboSpan" id="kobo.97.1"> is a Vue</span><a id="_idIndexMarker771"/><span class="koboSpan" id="kobo.98.1"> component whose job is to do </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.100.1">Render different </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">child components</span></span></li>
<li><span class="koboSpan" id="kobo.102.1">Mount and unmount itself automatically at any nesting level, depending on the route’s </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">given path</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.104.1">Without </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">RouterView</span></strong><span class="koboSpan" id="kobo.106.1">, it is almost impossible to render dynamic content correctly for users at runtime. </span><span class="koboSpan" id="kobo.106.2">For example, when a user navigates to the </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">Home</span></strong><span class="koboSpan" id="kobo.108.1"> page, </span><strong class="source-inline"><span class="koboSpan" id="kobo.109.1">RouterView</span></strong><span class="koboSpan" id="kobo.110.1"> knows and only generates the content related to </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">that page.</span></span></p>
<p><span class="koboSpan" id="kobo.112.1">Let’s see how we can pass props to the view </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">through </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">.</span></span></p>
<h2 id="_idParaDest-155"><a id="_idTextAnchor258"/><span class="koboSpan" id="kobo.116.1">Passing props to view</span></h2>
<p><span class="koboSpan" id="kobo.117.1">Since </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1">RouterView</span></strong><span class="koboSpan" id="kobo.119.1"> is a </span><a id="_idIndexMarker772"/><span class="koboSpan" id="kobo.120.1">component, it can also receive props. </span><span class="koboSpan" id="kobo.120.2">The only prop it receives is </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">name</span></strong><span class="koboSpan" id="kobo.122.1">, which is the same name registered in the corresponding route’s record defined in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.123.1">router</span></strong><span class="koboSpan" id="kobo.124.1"> object at the </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">initialization phase.</span></span></p>
<p><span class="koboSpan" id="kobo.126.1">The Vue engine automatically passes any other additional HTML attributes to any view component that </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.127.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.128.1"> renders.</span></span></p>
<p><span class="koboSpan" id="kobo.129.1">Take the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.130.1">RouterView</span></strong><span class="koboSpan" id="kobo.131.1"> component with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.132.1">"main-app-view"</span></strong><span class="koboSpan" id="kobo.133.1"> class, </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">for instance:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.135.1">
&lt;RouterView class="main-app-view"/&gt;</span></pre>
<p><span class="koboSpan" id="kobo.136.1">Let’s say we have a view component’s template with the </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.138.1">
&lt;template&gt;
  &lt;div&gt;Hello World&lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.139.1">In this case, the child component will receive the </span><strong class="source-inline"><span class="koboSpan" id="kobo.140.1">"main-app-view"</span></strong><span class="koboSpan" id="kobo.141.1"> attribute class when it’s the active view. </span><span class="koboSpan" id="kobo.141.2">The actual output after rendering will be </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.143.1">
&lt;div class="main-app-view"&gt;Hello World&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.144.1">Next, let’s look at how </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.146.1"> works.</span></span></p>
<h2 id="_idParaDest-156"><a id="_idTextAnchor259"/><span class="koboSpan" id="kobo.147.1">Working with RouterView</span></h2>
<p><span class="koboSpan" id="kobo.148.1">In your newly created </span><a id="_idIndexMarker773"/><span class="koboSpan" id="kobo.149.1">application, let’s navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">App.vue</span></strong><span class="koboSpan" id="kobo.151.1"> and replace the default code of </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.153.1"> with </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.155.1">
&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;RouterView/&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.156.1">Then, go to </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">src/router/index.js</span></strong><span class="koboSpan" id="kobo.158.1"> and comment out the generated code within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">routes</span></strong><span class="koboSpan" id="kobo.160.1"> array, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.162.1">
const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    // {
    //   path: '/',
    //   name: 'home',
    //   component: HomeView
    // },
    // {
    //   path: '/about',
    //   name: 'about',
    //   component: () =&gt; import('../views/AboutView.vue')
    // }
  ]
})</span></pre>
<p><span class="koboSpan" id="kobo.163.1">When you run the app locally and open the local server URL in the browser, the output will be as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.164.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.165.1">.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.166.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer193">
<span class="koboSpan" id="kobo.167.1"><img alt="Figure 7.2 – Output of the app when there is no route defined" src="image/B18645_07_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.168.1">Figure 7.2 – Output of the app when there is no route defined</span></p>
<p><span class="koboSpan" id="kobo.169.1">The output is an empty page because we have not set up any router configurations in our file, including mapping the paths with the related view. </span><span class="koboSpan" id="kobo.169.2">Without this step, the routing system cannot </span><a id="_idIndexMarker774"/><span class="koboSpan" id="kobo.170.1">dynamically pick the suitable view component and render it into our </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.172.1"> element.</span></span></p>
<p><span class="koboSpan" id="kobo.173.1">In the next section, we will see how to set up </span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">Vue Router.</span></span></p>
<h1 id="_idParaDest-157"><a id="_idTextAnchor260"/><span class="koboSpan" id="kobo.175.1">Setting up Vue Router</span></h1>
<p><span class="koboSpan" id="kobo.176.1">When we add Vue </span><a id="_idIndexMarker775"/><span class="koboSpan" id="kobo.177.1">Router to our project, Vite creates and adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">router</span></strong><span class="koboSpan" id="kobo.179.1"> folder to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">/src</span></strong><span class="koboSpan" id="kobo.181.1"> directory with a single auto-generated </span><strong class="source-inline"><span class="koboSpan" id="kobo.182.1">index.js</span></strong><span class="koboSpan" id="kobo.183.1"> file. </span><span class="koboSpan" id="kobo.183.2">This file contains the necessary configurations for our router system, which we will explore in the </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">next section.</span></span></p>
<p><span class="koboSpan" id="kobo.185.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">src/main.js</span></strong><span class="koboSpan" id="kobo.187.1"> file, we import the defined configuration object and uses the Vue instance method</span><strong class="source-inline"><span class="koboSpan" id="kobo.188.1"> use()</span></strong><span class="koboSpan" id="kobo.189.1"> to install the router system into the application, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">following</span><a id="_idTextAnchor261"/><span class="koboSpan" id="kobo.191.1"> code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.192.1">
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
const app = createApp(App)
app.use(router)</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">app.use</span></strong><span class="koboSpan" id="kobo.194.1"> is an instance method with a built-in mechanism to prevent you from installing a plugin more </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">than once.</span></span></p>
<p><span class="koboSpan" id="kobo.196.1">After executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">app.use(router)</span></strong><span class="koboSpan" id="kobo.198.1">, the following objects are available for access in </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">any component:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">this.$router</span></strong><span class="koboSpan" id="kobo.201.1">: The global </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">router object</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">this.$route</span></strong><span class="koboSpan" id="kobo.204.1">: The current route object points to the element </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">in context</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.206.1">If you are using </span><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">setup()</span></strong><span class="koboSpan" id="kobo.208.1"> and Composition API (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.209.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.210.1">), you can import </span><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">useRoute()</span></strong><span class="koboSpan" id="kobo.212.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">useRouter()</span></strong><span class="koboSpan" id="kobo.214.1"> functions from </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">vue-router</span></strong><span class="koboSpan" id="kobo.216.1"> package and get the current route object (instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">this.$route</span></strong><span class="koboSpan" id="kobo.218.1">), and global router object (instead of </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">this.$router</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">) respectively.</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.221.1">
&lt;script setup&gt;
import { useRoute, useRouter } from 'vue-router'
const route = useRoute();
const router = useRouter();
// component's logic…
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.222.1">Now that we have </span><a id="_idIndexMarker776"/><span class="koboSpan" id="kobo.223.1">registered the use of Vue Router in our application, let’s move on to the next step – defining the routes for the configuration object of the </span><span class="No-Break"><span class="koboSpan" id="kobo.224.1">router instance.</span></span></p>
<h1 id="_idParaDest-158"><span class="koboSpan" id="kobo.225.1">Defining the</span><a id="_idTextAnchor262"/><span class="koboSpan" id="kobo.226.1"> routes</span></h1>
<p><span class="koboSpan" id="kobo.227.1">In a web application, a </span><a id="_idIndexMarker777"/><span class="koboSpan" id="kobo.228.1">route is a URL path pattern. </span><span class="koboSpan" id="kobo.228.2">Vue Router will map it to a specific handler. </span><span class="koboSpan" id="kobo.228.3">This handler is a Vue component, defined and located in a physical file. </span><span class="koboSpan" id="kobo.228.4">For example, when the user enters the </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">localhost:3000/home</span></strong><span class="koboSpan" id="kobo.230.1"> route, if you map the </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">HomeView</span></strong><span class="koboSpan" id="kobo.232.1"> component to this specific route, the routing system knows how to render </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">HomeView</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.234.1">content accordingly.</span></span></p>
<p><span class="koboSpan" id="kobo.235.1">As seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.236.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.237.1">.2</span></em><span class="koboSpan" id="kobo.238.1">, it is crucial to set up </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">routes</span></strong><span class="koboSpan" id="kobo.240.1"> (or paths) for navigation within the application; otherwise, your application will display </span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">as empty.</span></span></p>
<p><span class="koboSpan" id="kobo.242.1">Each route is an object literal that uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">RouteRecordRaw</span></strong><span class="koboSpan" id="kobo.244.1"> interface with the </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">following properties:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.246.1">
interface RouteRecordRaw = {
  path: string,
  component?: Component,
  name?: string, // for named routes
  components?: { [name: string]: Component }, // for named
    views
  redirect?: string | Location | Function,
  props?: boolean | Object | Function,
  alias?: string | Array&lt;string&gt;,
  children?: Array&lt;RouteConfig&gt;, // for nested routes
  beforeEnter?: (to: Route, from: Route, next: Function) =&gt;
    void,
  meta?: any,
  sensitive?: Boolean,
  strict?: Boolean
}</span></pre>
<p><span class="koboSpan" id="kobo.247.1">We define all the </span><a id="_idIndexMarker778"/><span class="koboSpan" id="kobo.248.1">routes needed for an application as a list </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.251.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.252.1">
const routes = [
  //Route1,
  //Route2,
</span><a id="_idTextAnchor263"/><span class="koboSpan" id="kobo.253.1">  //...
</span><span class="koboSpan" id="kobo.253.2">]</span></pre>
<p><span class="koboSpan" id="kobo.254.1">We return to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">src/router/index.js</span></strong><span class="koboSpan" id="kobo.256.1"> file and uncomment the code inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">routes</span></strong><span class="koboSpan" id="kobo.258.1">. </span><span class="koboSpan" id="kobo.258.2">For convenience, there will be two predefined routes called </span><strong class="source-inline"><span class="koboSpan" id="kobo.259.1">home</span></strong><span class="koboSpan" id="kobo.260.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.261.1">about</span></strong><span class="koboSpan" id="kobo.262.1">, each being an object located in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.264.1"> array.</span></span></p>
<p><span class="koboSpan" id="kobo.265.1">Let’s take a closer look at the first route as </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">an example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.267.1">
  {
    path: '/',
    name: 'home',
    component: Hom</span><a id="_idTextAnchor264"/><span class="koboSpan" id="kobo.268.1">eView
  }</span></pre>
<p><span class="koboSpan" id="kobo.269.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">path</span></strong><span class="koboSpan" id="kobo.271.1"> property is a required string that indicates the path of the targeted route. </span><span class="koboSpan" id="kobo.271.2">Vue Router resolves this property to an absolute URL path for the browser’s navigation. </span><span class="koboSpan" id="kobo.271.3">For instance, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">/about</span></strong><span class="koboSpan" id="kobo.273.1"> path will be translated into </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">&lt;app domain&gt;/about</span></strong><span class="koboSpan" id="kobo.275.1"> (</span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">localhost:8080/about</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.277.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">example.com/about</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.279.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.280.1">In this case, Vue Router understands </span><strong class="source-inline"><span class="koboSpan" id="kobo.281.1">/</span></strong><span class="koboSpan" id="kobo.282.1"> – the empty path – as the default path for loading the application</span><a id="_idIndexMarker779"/><span class="koboSpan" id="kobo.283.1"> when there is no other indicator after the forward slash (</span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">/</span></strong><span class="koboSpan" id="kobo.285.1">) – for example, when the user navigates to </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">&lt;app-domain&gt;</span></strong><span class="koboSpan" id="kobo.287.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">&lt;app-domain&gt;/</span></strong><span class="koboSpan" id="kobo.289.1"> (without setting </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">strict: true</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.292.1">The next property is </span><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">name</span></strong><span class="koboSpan" id="kobo.294.1">, a string indicating the name given to the targeted route. </span><span class="koboSpan" id="kobo.294.2">Even though it is optional, we recommend defining every path with a name for better code maintenance and route tracking purposes, which we will discuss later in this chapter in the </span><em class="italic"><span class="koboSpan" id="kobo.295.1">Passing route </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.296.1">parameters</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.297.1"> section.</span></span></p>
<p><span class="koboSpan" id="kobo.298.1">The last property is </span><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">component</span></strong><span class="koboSpan" id="kobo.300.1">, which is a Vue component instance. </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">RouterView</span></strong><span class="koboSpan" id="kobo.302.1"> uses this property to reference the view component to render the page content when the path </span><span class="No-Break"><span class="koboSpan" id="kobo.303.1">is active.</span></span></p>
<p><span class="koboSpan" id="kobo.304.1">Here, the route is defined as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">home</span></strong><span class="koboSpan" id="kobo.306.1"> route, mapped as the default path to the application, and tied to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">HomeView</span></strong><span class="koboSpan" id="kobo.308.1"> component </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">for content.</span></span></p>
<p><span class="koboSpan" id="kobo.310.1">Vite also auto-generates two simple components for these two sample routes – </span><strong class="source-inline"><span class="koboSpan" id="kobo.311.1">HomeView</span></strong><span class="koboSpan" id="kobo.312.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">AboutView</span></strong><span class="koboSpan" id="kobo.314.1">, located in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.315.1">src/views</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.316.1"> folder.</span></span></p>
<p><span class="koboSpan" id="kobo.317.1">In the next section, we’ll go over some tips that can be helpful when you use loading components</span><a id="_idIndexMarker780"/> <span class="No-Break"><span class="koboSpan" id="kobo.318.1">with routes.</span></span></p>
<h2 id="_idParaDest-159"><span class="koboSpan" id="kobo.319.1">Tips on loading components for route co</span><a id="_idTextAnchor265"/><span class="koboSpan" id="kobo.320.1">nfiguration</span></h2>
<p><span class="koboSpan" id="kobo.321.1">Indeed, we need to </span><a id="_idIndexMarker781"/><span class="koboSpan" id="kobo.322.1">import the component to tie it to the targeted route in the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">index.js</span></strong><span class="koboSpan" id="kobo.324.1"> file. </span><span class="koboSpan" id="kobo.324.2">The classic and most popular way is to import it at the top of the file </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.326.1">
import Home from '../views/HomeView.vue'</span></pre>
<p><span class="koboSpan" id="kobo.327.1">Often, we add this code line under the main imports as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.328.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.329.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.330.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer194">
<span class="koboSpan" id="kobo.331.1"><img alt="Figure 7.3 – Importing the HomeView component on line 2 – src/router/index.js" src="image/B18645_07_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.332.1">Figure 7.3 – Importing the HomeView component on line 2 – src/router/index.js</span></p>
<p><span class="koboSpan" id="kobo.333.1">However, a more efficient way is to lazy-load </span><span class="No-Break"><span class="koboSpan" id="kobo.334.1">the component.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.335.1">Lazy loading</span></strong><span class="koboSpan" id="kobo.336.1">, also</span><a id="_idIndexMarker782"/><span class="koboSpan" id="kobo.337.1"> known as</span><a id="_idIndexMarker783"/><span class="koboSpan" id="kobo.338.1"> on-demand loading, is a technique that aims to optimize the content of a website or web application at runtime. </span><span class="koboSpan" id="kobo.338.2">It helps to reduce the time consumption and number of resources required to download an application on the </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">first load.</span></span></p>
<p><span class="koboSpan" id="kobo.340.1">This optimization is critical to ensure the best user experience possible, where every millisecond of waiting matters. </span><span class="koboSpan" id="kobo.340.2">Besides this, lazy loading also enables better code-splitting at the route level and performance optimization in large or </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">complex applications.</span></span></p>
<p><span class="koboSpan" id="kobo.342.1">We can lazy-load the component by using Vite (and Rollup). </span><span class="koboSpan" id="kobo.342.2">Instead of importing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">AboutView</span></strong><span class="koboSpan" id="kobo.344.1"> component into the top of the file, as we did with </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">HomeView</span></strong><span class="koboSpan" id="kobo.346.1"> (see </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.347.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.348.1">.3</span></em><span class="koboSpan" id="kobo.349.1">), we can dynamically add the following right after defining the name of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">about</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.351.1">route instead:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.352.1">
component: () =&gt; import('../views/AboutView.vue')</span></pre>
<p><span class="koboSpan" id="kobo.353.1">Here, we dynamically lazy-load the </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">AboutView</span></strong><span class="koboSpan" id="kobo.355.1"> view component for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">about</span></strong><span class="koboSpan" id="kobo.357.1"> route. </span><span class="koboSpan" id="kobo.357.2">During compilation, Vite generates a separate chunk with the designated name (</span><strong class="source-inline"><span class="koboSpan" id="kobo.358.1">about</span></strong><span class="koboSpan" id="kobo.359.1">) for the target route and only loads it when the user visits </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">this route.</span></span></p>
<p><span class="koboSpan" id="kobo.361.1">In most cases, since the user will likely land on the default path on the first go, it is better not to lazy-load the default component (</span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">HomeView</span></strong><span class="koboSpan" id="kobo.363.1"> in our app) but to import it in the usual way. </span><span class="koboSpan" id="kobo.363.2">Hence, the tip here is to determine which elements should be lazily loaded when </span><a id="_idIndexMarker784"/><span class="koboSpan" id="kobo.364.1">designing your routing and combine the two methods for the </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">most benefit.</span></span></p>
<p><span class="koboSpan" id="kobo.366.1">We will now see how to set up the </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">router instance.</span></span></p>
<h2 id="_idParaDest-160"><a id="_idTextAnchor266"/><span class="koboSpan" id="kobo.368.1">Setting up the router instance</span></h2>
<p><span class="koboSpan" id="kobo.369.1">After defining the </span><a id="_idIndexMarker785"/><span class="koboSpan" id="kobo.370.1">routes, the final step is to create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">router</span></strong><span class="koboSpan" id="kobo.372.1"> instance based on the given configuration options by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">createRouter</span></strong><span class="koboSpan" id="kobo.374.1"> method, as </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.376.1">
import { createRouter, createWebHistory } from 'vue-router'
const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_UR</span><a id="_idTextAnchor267"/><span class="koboSpan" id="kobo.377.1">L),
  routes
})</span></pre>
<p><span class="koboSpan" id="kobo.378.1">A configuration is an object consisting of different properties that help to form the app’s router. </span><span class="koboSpan" id="kobo.378.2">We will now examine these properties in the </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">following subsections.</span></span></p>
<h3><span class="koboSpan" id="kobo.380.1">routes</span></h3>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">routes</span></strong><span class="koboSpan" id="kobo.382.1"> is a required</span><a id="_idIndexMarker786"/><span class="koboSpan" id="kobo.383.1"> option. </span><span class="koboSpan" id="kobo.383.2">Without this, the router won’t be able to recognize the paths and direct users to the suitable view </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">content accordingly.</span></span></p>
<h3><span class="koboSpan" id="kobo.385.1">history</span></h3>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">history</span></strong><span class="koboSpan" id="kobo.387.1"> determines the</span><a id="_idIndexMarker787"/><span class="koboSpan" id="kobo.388.1"> router’s mode. </span><span class="koboSpan" id="kobo.388.2">There are two modes in Vue Router </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">for URLs:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.390.1">HTML History mode</span></strong><span class="koboSpan" id="kobo.391.1">: You </span><a id="_idIndexMarker788"/><span class="koboSpan" id="kobo.392.1">can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.393.1">createWebHistory()</span></strong><span class="koboSpan" id="kobo.394.1"> method to leverage the default </span><strong class="source-inline"><span class="koboSpan" id="kobo.395.1">history.pushState()</span></strong><span class="koboSpan" id="kobo.396.1"> API, as well as the HTML5 History API. </span><span class="koboSpan" id="kobo.396.2">It allows us to achieve URL navigation without a page reload and makes the URL path human-readable – for </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">example, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">yourapplication.com/about</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.400.1">Hash mode</span></strong><span class="koboSpan" id="kobo.401.1">: You </span><a id="_idIndexMarker789"/><span class="koboSpan" id="kobo.402.1">can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">createWebHashHistory()</span></strong><span class="koboSpan" id="kobo.404.1"> method to create a hash mode, which allows you to use a hash symbol (</span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">#</span></strong><span class="koboSpan" id="kobo.406.1">) to simulate a URL – for example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">yourapplication.com/#about</span></strong><span class="koboSpan" id="kobo.408.1"> for an </span><strong class="bold"><span class="koboSpan" id="kobo.409.1">About</span></strong><span class="koboSpan" id="kobo.410.1"> page or </span><strong class="source-inline"><span class="koboSpan" id="kobo.411.1">youapplication.com/#/</span></strong><span class="koboSpan" id="kobo.412.1"> for the </span><strong class="bold"><span class="koboSpan" id="kobo.413.1">Home</span></strong><span class="koboSpan" id="kobo.414.1"> URL of </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">your application.</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.416.1">base</span></h3>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">base</span></strong><span class="koboSpan" id="kobo.418.1"> determines the </span><a id="_idIndexMarker790"/><span class="koboSpan" id="kobo.419.1">base URL for the app. </span><span class="koboSpan" id="kobo.419.2">For example, when we set it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">process.env.BASE_URL</span></strong><span class="koboSpan" id="kobo.421.1">, it allows developers to control the base URL from outside the application code, specifically from a </span><strong class="source-inline"><span class="koboSpan" id="kobo.422.1">.env</span></strong><span class="koboSpan" id="kobo.423.1"> file. </span><span class="koboSpan" id="kobo.423.2">Hence, developers can set the directory from which the hosting platform serves the code </span><span class="No-Break"><span class="koboSpan" id="kobo.424.1">at runtime.</span></span></p>
<p><span class="koboSpan" id="kobo.425.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">base</span></strong><span class="koboSpan" id="kobo.427.1"> finally out of the way, we have created the </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">router</span></strong><span class="koboSpan" id="kobo.429.1"> instance. </span><span class="koboSpan" id="kobo.429.2">All that is left is to </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">export it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.431.1">
export default router</span></pre>
<p><span class="koboSpan" id="kobo.432.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">main.js</span></strong><span class="koboSpan" id="kobo.434.1">, we import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.435.1">router</span></strong><span class="koboSpan" id="kobo.436.1"> instance and use it in the router plugin right after the creation of the main </span><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">app</span></strong><span class="koboSpan" id="kobo.438.1"> instance received from </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1">createApp</span></strong><span class="koboSpan" id="kobo.440.1">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.442.1">
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
const app = createApp(App)
app.use(router)
app.mount('#app')</span></pre>
<p><span class="koboSpan" id="kobo.443.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.444.1">App.vue</span></strong><span class="koboSpan" id="kobo.445.1">, replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.447.1"> with the </span><span class="No-Break"><span class="koboSpan" id="kobo.448.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.449.1">
&lt;template&gt;
  &lt;header&gt;
    &lt;img alt="Vue logo" class="logo"
      src="@/assets/logo.svg" width="125" height="125" /&gt;
    &lt;div class="wrapper"&gt;
      &lt;HelloWorld msg="You did it!" </span><span class="koboSpan" id="kobo.449.2">/&gt;
    &lt;/div&gt;
  &lt;/header&gt;
  &lt;RouterView /&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.450.1">Our application will now render </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer195">
<span class="koboSpan" id="kobo.452.1"><img alt="Figure 7.4 – Home page in the browser" src="image/B18645_07_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.453.1">Figure 7.4 – Home page in the browser</span></p>
<p><span class="koboSpan" id="kobo.454.1">If we navigate</span><a id="_idIndexMarker791"/><span class="koboSpan" id="kobo.455.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">/about</span></strong><span class="koboSpan" id="kobo.457.1">, let’s assume the content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.458.1">about</span></strong><span class="koboSpan" id="kobo.459.1"> component from the auto-generated code is as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.461.1">
&lt;template&gt;
  &lt;div class="about"&gt;
    &lt;h1&gt;This is an about page&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.462.1">The website should look like that shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.463.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.464.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer196">
<span class="koboSpan" id="kobo.466.1"><img alt="Figure 7.5 – The About page of the applic﻿ation in the browser" src="image/B18645_07_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.467.1">Figure 7.5 – The About page of the applic</span><a id="_idTextAnchor268"/><span class="koboSpan" id="kobo.468.1">ation in the browser</span></p>
<p><span class="koboSpan" id="kobo.469.1">In this section, we looked at how we can lazy-load components to speed up large and complex SPAs. </span><span class="koboSpan" id="kobo.469.2">We also looked at some options for setting up your router systems, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">routes</span></strong><span class="koboSpan" id="kobo.471.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">history</span></strong><span class="koboSpan" id="kobo.473.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">base</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.477.1">You also saw the Vue engine renders both pages, </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">/about</span></strong><span class="koboSpan" id="kobo.479.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">/home</span></strong><span class="koboSpan" id="kobo.481.1">, with the same header content, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.482.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.483.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.484.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer197">
<span class="koboSpan" id="kobo.485.1"><img alt="Figure 7.6 – The Home page with the same header displayed in the About ﻿page in Figure 7.5" src="image/B18645_07_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.486.1">Figure 7.6 – The Home page with the same header displayed in the About </span><a id="_idTextAnchor269"/><span class="koboSpan" id="kobo.487.1">page in Figure 7.5</span></p>
<p><span class="koboSpan" id="kobo.488.1">The reason is that Vue only replaces the placeholder component, </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">RouterView</span></strong><span class="koboSpan" id="kobo.490.1">, with the target view’s </span><a id="_idIndexMarker792"/><span class="koboSpan" id="kobo.491.1">content, and whatever template is defined outside this scope will remain. </span><span class="koboSpan" id="kobo.491.2">In this way, we can create a default layout for all our views in </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">the app.</span></span></p>
<h1 id="_idParaDest-161"><a id="_idTextAnchor270"/><span class="koboSpan" id="kobo.493.1">Setting up a default layout for your app</span></h1>
<p><span class="koboSpan" id="kobo.494.1">For our template to </span><a id="_idIndexMarker793"/><span class="koboSpan" id="kobo.495.1">be</span><a id="_idIndexMarker794"/><span class="koboSpan" id="kobo.496.1"> functional, it should also contain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">&lt;RouterView/&gt;</span></strong><span class="koboSpan" id="kobo.498.1"> element. </span><span class="koboSpan" id="kobo.498.2">One standard setup is to have a navigation menu, </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">&lt;nav&gt;</span></strong><span class="koboSpan" id="kobo.500.1">, within the template and </span><strong class="source-inline"><span class="koboSpan" id="kobo.501.1">RouterView</span></strong><span class="koboSpan" id="kobo.502.1"> underneath. </span><span class="koboSpan" id="kobo.502.2">That way, the content changes between pages while the </span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">header</span></strong><span class="koboSpan" id="kobo.504.1"> menu stays </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">the same.</span></span></p>
<p><span class="koboSpan" id="kobo.506.1">Navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1">App.vue</span></strong><span class="koboSpan" id="kobo.508.1"> and ensure that your template has the </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.510.1">
&lt;template&gt;
  &lt;header&gt;
    &lt;nav&gt;
      &lt;RouterLink to="/"&gt;Home&lt;/RouterLink&gt;
      &lt;RouterLink to="/about"&gt;About&lt;/RouterLink&gt;
    &lt;/nav&gt;
  &lt;/header&gt;
  &lt;RouterView /&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.511.1">Your output </span><a id="_idIndexMarker795"/><span class="koboSpan" id="kobo.512.1">should </span><a id="_idIndexMarker796"/><span class="koboSpan" id="kobo.513.1">now contain a static header with two navigation links – </span><strong class="bold"><span class="koboSpan" id="kobo.514.1">Home</span></strong><span class="koboSpan" id="kobo.515.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.516.1">About</span></strong><span class="koboSpan" id="kobo.517.1"> – while the content changes depending on </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">the route:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer198">
<span class="koboSpan" id="kobo.519.1"><img alt="Figure 7.7 – The Home page’s content" src="image/B18645_07_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.520.1">Figure 7.7 – The Home page’s content</span></p>
<p><span class="koboSpan" id="kobo.521.1">Once you navigate </span><a id="_idIndexMarker797"/><span class="koboSpan" id="kobo.522.1">to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">/about</span></strong><span class="koboSpan" id="kobo.524.1"> page, the header links will </span><a id="_idIndexMarker798"/><span class="koboSpan" id="kobo.525.1">not change, while the content now become </span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer199">
<span class="koboSpan" id="kobo.527.1"><img alt="Figure 7.8 – The About page’s content" src="image/B18645_07_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.528.1">Figure 7.8 – The About page’s content</span></p>
<p><span class="koboSpan" id="kobo.529.1">By this point, you have learned how to create a default layout and render the target content</span><a id="_idIndexMarker799"/><span class="koboSpan" id="kobo.530.1"> view </span><a id="_idIndexMarker800"/><span class="koboSpan" id="kobo.531.1">using </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">RouterView</span></strong><span class="koboSpan" id="kobo.533.1"> dynamically. </span><span class="koboSpan" id="kobo.533.2">In the next section, we will learn how to implement and add a </span><strong class="bold"><span class="koboSpan" id="kobo.534.1">Message Feed</span></strong><span class="koboSpan" id="kobo.535.1"> page with the help of </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">Vue Router.</span></span></p>
<h2 id="_idParaDest-162"><a id="_idTextAnchor271"/><span class="koboSpan" id="kobo.537.1">Exercise 7.01 – implementing a Message Feed page using Vue Router</span></h2>
<p><span class="koboSpan" id="kobo.538.1">In this </span><a id="_idIndexMarker801"/><span class="koboSpan" id="kobo.539.1">exercise, you will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">RouterView</span></strong><span class="koboSpan" id="kobo.541.1"> to </span><a id="_idIndexMarker802"/><span class="koboSpan" id="kobo.542.1">render a new view component that displays a </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">message feed.</span></span></p>
<p><span class="koboSpan" id="kobo.544.1">To access the code file </span><a id="_idTextAnchor272"/><span class="koboSpan" id="kobo.545.1">for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.01"><span class="No-Break"><span class="koboSpan" id="kobo.547.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.01</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.548.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.549.1">We are going to create a new page that displays a list of messages to the user. </span><span class="koboSpan" id="kobo.549.2">Users will be able to visit this page whenever they enter the </span><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">localhost:3000/messages</span></strong><span class="koboSpan" id="kobo.551.1"> path in the browser. </span><span class="koboSpan" id="kobo.551.2">P</span><a id="_idTextAnchor273"/><span class="koboSpan" id="kobo.552.1">erform the </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.554.1">Use the application generated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.556.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">Chapter07/Exercise7.01</span></strong><span class="koboSpan" id="kobo.558.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.559.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.560.1">&gt; cd Chapter07/Exercise7.01/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.561.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.562.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">code .</span></strong><span class="koboSpan" id="kobo.564.1"> command within the project direct</span><a id="_idTextAnchor274"/><span class="koboSpan" id="kobo.565.1">ory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.567.1">Let’s create a new view component called </span><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">MessageFeed</span></strong><span class="koboSpan" id="kobo.569.1"> by adding a </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.571.1"> file to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">./</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.573.1">src/views/</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.574.1"> folder:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer200">
<span class="koboSpan" id="kobo.575.1"><img alt="Figure 7.9 – The views directory hierarchy" src="image/B18645_07_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.576.1">Figure 7.9 – The views directory hierarchy</span></p>
<p><span class="koboSpan" id="kobo.577.1">This component will render a list of messages. </span><span class="koboSpan" id="kobo.577.2">We define </span><strong class="source-inline"><span class="koboSpan" id="kobo.578.1">messages</span></strong><span class="koboSpan" id="kobo.579.1"> – an array of strings – as our</span><a id="_idIndexMarker803"/><span class="koboSpan" id="kobo.580.1"> local data </span><a id="_idIndexMarker804"/><span class="koboSpan" id="kobo.581.1">using </span><strong class="source-inline"><span class="koboSpan" id="kobo.582.1">&lt;script setup&gt;</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.583.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.584.1">
&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt; Message Feed &lt;/h2&gt;
    &lt;p v-for="(m, i) in messages" :key="i"&gt;
    {{ m }}
    &lt;/p&gt;
&lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
const messages = [
        'Hello, how are you?',
        'The weather is nice',
        'This is the message feed',
        'And I am the fourth message'
      ]
&lt;/script&gt;</span></pre>
<ol>
<li value="4"><span class="koboSpan" id="kobo.585.1">Create a router file at </span><strong class="source-inline"><span class="koboSpan" id="kobo.586.1">src/router/index.js</span></strong><span class="koboSpan" id="kobo.587.1"> if it doesn’t exist. </span><span class="koboSpan" id="kobo.587.2">Make sure you import </span><strong class="source-inline"><span class="koboSpan" id="kobo.588.1">createRoute</span></strong><span class="koboSpan" id="kobo.589.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.590.1">createWebHistory</span></strong><span class="koboSpan" id="kobo.591.1"> from </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">'vue-router'</span></strong><span class="koboSpan" id="kobo.593.1"> and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">HomeView</span></strong><span class="koboSpan" id="kobo.595.1"> component, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">following code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.597.1">
import { createRouter, createWebHistory } from 'vue-router'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.598.1">
import HomeView from '../views/HomeView.vue'</span></pre></li>
<li><span class="koboSpan" id="kobo.599.1">We declare a route designated to </span><strong class="source-inline"><span class="koboSpan" id="kobo.600.1">MessageFeed</span></strong><span class="koboSpan" id="kobo.601.1">, named </span><strong class="source-inline"><span class="koboSpan" id="kobo.602.1">messageFeed</span></strong><span class="koboSpan" id="kobo.603.1"> with its path set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.604.1">/messages</span></strong><span class="koboSpan" id="kobo.605.1">. </span><span class="koboSpan" id="kobo.605.2">We will also lazy-load the component. </span><span class="koboSpan" id="kobo.605.3">This step will be completed by </span><a id="_idIndexMarker805"/><span class="koboSpan" id="kobo.606.1">appending </span><a id="_idIndexMarker806"/><span class="koboSpan" id="kobo.607.1">an object with the required information to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.608.1">routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.609.1"> array:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.610.1">
export const routes = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.611.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.612.1">
    path: '/',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.613.1">
    name: 'home',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.614.1">
    component: HomeView</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.615.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.616.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.617.1">
    path: '/about',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.618.1">
    name: 'about',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.619.1">
    component: () =&gt; import('../views/AboutView.vue')</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.620.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.621.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.622.1">
    path: '/messages',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.623.1">
    name: 'messageFeed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.624.1">
    component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.625.1">
      import('../views/MessageFeed.vue')</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.626.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.627.1">
]</span></pre></li>
<li><span class="koboSpan" id="kobo.628.1">Finally, within the same file, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">router</span></strong><span class="koboSpan" id="kobo.630.1"> instance using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">routes</span></strong><span class="koboSpan" id="kobo.632.1"> array we defined and with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1">createRouter</span></strong><span class="koboSpan" id="kobo.634.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.635.1">createWebHistory</span></strong><span class="koboSpan" id="kobo.636.1"> functions </span><span class="No-Break"><span class="koboSpan" id="kobo.637.1">we imported:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.638.1">
const router = createRouter({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.639.1">
  history: createWebHistory(import.meta.env.BASE_URL),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.640.1">
  routes</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.641.1">
})</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.642.1">
export default router</span></pre></li>
<li><span class="koboSpan" id="kobo.643.1">Make sure that in </span><strong class="source-inline"><span class="koboSpan" id="kobo.644.1">src/main.js</span></strong><span class="koboSpan" id="kobo.645.1">. </span><span class="koboSpan" id="kobo.645.2">we import the created </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">router</span></strong><span class="koboSpan" id="kobo.647.1"> instance and attach</span><a id="_idIndexMarker807"/><span class="koboSpan" id="kobo.648.1"> it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">app</span></strong><span class="koboSpan" id="kobo.650.1"> instance</span><a id="_idIndexMarker808"/><span class="koboSpan" id="kobo.651.1"> as a plugin by </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">app.use(router)</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.654.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.655.1">
import router from './router'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.656.1">
const app = createApp(App)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.657.1">
app.use(router)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.658.1">
app.mount('#app')</span></pre></li>
<li><span class="koboSpan" id="kobo.659.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">App.vue</span></strong><span class="koboSpan" id="kobo.661.1">, make sure </span><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.663.1"> only contains the </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">following code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.665.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.666.1">
  &lt;RouterView /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.667.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.668.1">Run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.669.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.670.1">yarn dev</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.671.1">Upon visiting </span><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">localhost:3000/messages</span></strong><span class="koboSpan" id="kobo.673.1"> in the browser (or any local server Vite has created), the page should appear with the correct content – the </span><strong class="bold"><span class="koboSpan" id="kobo.674.1">Message Feed</span></strong><span class="koboSpan" id="kobo.675.1"> page as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer201">
<span class="koboSpan" id="kobo.677.1"><img alt="Figure 7.10 – The Message Feed Page" src="image/B18645_07_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.678.1">Figure 7.10 – The Message Feed Page</span></p>
<p><span class="koboSpan" id="kobo.679.1">This exercise demonstrates how simple it is to add a new page route to a Vue.js application using Vue Router, while keeping your code organized and easy to read. </span><span class="koboSpan" id="kobo.679.2">Now that we have </span><a id="_idIndexMarker809"/><span class="koboSpan" id="kobo.680.1">our </span><a id="_idIndexMarker810"/><span class="koboSpan" id="kobo.681.1">routes ready to use, we can allow users to navigate between pa</span><a id="_idTextAnchor275"/><span class="koboSpan" id="kobo.682.1">ges without typing the </span><span class="No-Break"><span class="koboSpan" id="kobo.683.1">full path.</span></span></p>
<h1 id="_idParaDest-163"><a id="_idTextAnchor276"/><span class="koboSpan" id="kobo.684.1">Setting up navigation links with RouterLink</span></h1>
<p><span class="koboSpan" id="kobo.685.1">As we know, </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">RouterView</span></strong><span class="koboSpan" id="kobo.687.1"> oversees </span><a id="_idIndexMarker811"/><span class="koboSpan" id="kobo.688.1">rendering the </span><a id="_idIndexMarker812"/><span class="koboSpan" id="kobo.689.1">correct active view content relative to the URL path; </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1">RouterLink</span></strong><span class="koboSpan" id="kobo.691.1">, on the other hand, oversees mapping the routes to navigable links. </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">RouterLink</span></strong><span class="koboSpan" id="kobo.693.1"> is a Vue component that helps users navigate within an app with routing enabled. </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">RouterLink</span></strong><span class="koboSpan" id="kobo.695.1"> by default renders an anchor tag, </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">&lt;a&gt;</span></strong><span class="koboSpan" id="kobo.697.1">, with a valid </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">href</span></strong><span class="koboSpan" id="kobo.699.1"> link generated by its </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">to</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.701.1"> prop.</span></span></p>
<p><span class="koboSpan" id="kobo.702.1">In our example app generated by Vite, since there are two routes pre-populated, there are also two </span><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">RouterLink</span></strong><span class="koboSpan" id="kobo.704.1"> instances added to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.705.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.706.1"> section of </span><strong class="source-inline"><span class="koboSpan" id="kobo.707.1">App.vue</span></strong><span class="koboSpan" id="kobo.708.1"> as the header </span><span class="No-Break"><span class="koboSpan" id="kobo.709.1">navigation menu:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.710.1">
&lt;nav&gt;
  &lt;RouterLink to="/"&gt;Home&lt;/RouterLink&gt;
  &lt;RouterLink to="/about"&gt;About&lt;/RouterLink&gt;
&lt;/nav&gt;</span></pre>
<p><span class="koboSpan" id="kobo.711.1">Since we are using the web history mode with </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">createWebHistory()</span></strong><span class="koboSpan" id="kobo.713.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">to</span></strong><span class="koboSpan" id="kobo.715.1"> prop of each </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1">RouterLink</span></strong><span class="koboSpan" id="kobo.717.1"> should receive an identical value with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">path</span></strong><span class="koboSpan" id="kobo.719.1"> property declared in the targeted route object (as in the list of routes defined </span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">src/router/index.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.723.1">Since we name our routes, an alternative way of using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.724.1">to</span></strong><span class="koboSpan" id="kobo.725.1"> prop is to bind it with an object containing the route name instead of the path. </span><span class="koboSpan" id="kobo.725.2">Using the name is highly recommended to avoid complex link refactoring when we need to adjust the paths given to certain routes in our app. </span><span class="koboSpan" id="kobo.725.3">Hence, we can rewrite our links </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.727.1">
&lt;nav&gt;
  &lt;RouterLink :to="{ name: 'home'}"&gt;Home&lt;/RouterLink&gt;
  &lt;RouterLink :to="{ name: </span><a id="_idTextAnchor277"/><span class="koboSpan" id="kobo.728.1">'about'}"&gt;About&lt;/RouterLink&gt;
&lt;/nav&gt;</span></pre>
<p><span class="koboSpan" id="kobo.729.1">Also, Vue </span><a id="_idIndexMarker813"/><span class="koboSpan" id="kobo.730.1">Router </span><a id="_idIndexMarker814"/><span class="koboSpan" id="kobo.731.1">adds an extra CSS class, </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">router-link-active</span></strong><span class="koboSpan" id="kobo.733.1">, to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.734.1">&lt;a&gt;</span></strong><span class="koboSpan" id="kobo.735.1"> tag when the route in question is active. </span><span class="koboSpan" id="kobo.735.2">We can customize this class selector through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.736.1">active-class</span></strong><span class="koboSpan" id="kobo.737.1"> prop of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.738.1">RouterLink</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.739.1"> component.</span></span></p>
<p><span class="koboSpan" id="kobo.740.1">In the </span><strong class="bold"><span class="koboSpan" id="kobo.741.1">Element</span></strong><span class="koboSpan" id="kobo.742.1"> tab of the browser dev tools, we can see the </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">RouterLink</span></strong><span class="koboSpan" id="kobo.744.1"> component rendered </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer202">
<span class="koboSpan" id="kobo.746.1"><img alt="Figure 7.11 – RouterLink in the browser’s Element tab" src="image/B18645_07_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.747.1">Figure 7.11 – RouterLink in the browser’s Element tab</span></p>
<p><span class="koboSpan" id="kobo.748.1">The view in the browser will be </span><span class="No-Break"><span class="koboSpan" id="kobo.749.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer203">
<span class="koboSpan" id="kobo.750.1"><img alt="Figure 7.12 – The Home page with navigation links" src="image/B18645_07_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.751.1">Figure 7.12 – The Home page with navigation links</span></p>
<p><span class="koboSpan" id="kobo.752.1">Note that since we have access to </span><strong class="source-inline"><span class="koboSpan" id="kobo.753.1">this.$router</span></strong><span class="koboSpan" id="kobo.754.1"> within a component, we can trigger a navigation route programmatically by using </span><strong class="source-inline"><span class="koboSpan" id="kobo.755.1">this.$router.push()</span></strong><span class="koboSpan" id="kobo.756.1"> and pass a path or a </span><a id="_idIndexMarker815"/><span class="koboSpan" id="kobo.757.1">router</span><a id="_idIndexMarker816"/><span class="koboSpan" id="kobo.758.1"> object in a similar way to </span><span class="No-Break"><span class="koboSpan" id="kobo.759.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.760.1">to</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.762.1">
this.$router.push('/home')</span></pre>
<p><span class="koboSpan" id="kobo.763.1">Or within the &lt;script setup&gt;, we can perform the following </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">alternative code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.765.1">
import { useRouter } from 'vue-router'
const router = useRouter();
router.push('/home');</span></pre>
<p><span class="koboSpan" id="kobo.766.1">In this section, we looked at how you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.767.1">&lt;RouterLink/&gt;</span></strong><span class="koboSpan" id="kobo.768.1"> element to navigate between our views as with traditional HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.769.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.770.1">a&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.771.1"> tags.</span></span></p>
<p><span class="koboSpan" id="kobo.772.1">Next, we will see how you can programmatically send a user to their last viewed route in a manner </span><a id="_idIndexMarker817"/><span class="koboSpan" id="kobo.773.1">similar</span><a id="_idIndexMarker818"/><span class="koboSpan" id="kobo.774.1"> to the web browser’s </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.775.1">Back</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.776.1"> button.</span></span></p>
<h2 id="_idParaDest-164"><a id="_idTextAnchor278"/><span class="koboSpan" id="kobo.777.1">Tip for implementing the Back button</span></h2>
<p><span class="koboSpan" id="kobo.778.1">Sometimes, we want</span><a id="_idIndexMarker819"/><span class="koboSpan" id="kobo.779.1"> to navigate back to the previous page. </span><span class="koboSpan" id="kobo.779.2">Using </span><strong class="source-inline"><span class="koboSpan" id="kobo.780.1">this.$router.push()</span></strong><span class="koboSpan" id="kobo.781.1"> can achieve this, but it adds more routes in the history stack instead of going back. </span><span class="koboSpan" id="kobo.781.2">The correct technique is to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.782.1">this.$router.go(steps)</span></strong><span class="koboSpan" id="kobo.783.1">, in which </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">steps</span></strong><span class="koboSpan" id="kobo.785.1"> is an integer that indicates the number of steps to go back or forward in the history stack. </span><span class="koboSpan" id="kobo.785.2">This functionality works similarly </span><span class="No-Break"><span class="koboSpan" id="kobo.786.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.787.1">window.history.go(steps)</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.788.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.789.1">Consider the </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1">following example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.791.1">
this.$router.go(-1) // similar to window.history.back()  -
  go back one page</span></pre>
<p><span class="koboSpan" id="kobo.792.1">Besides this, you can also navigate forward to a page that was loaded before and still exists in the history stack by using the same method </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.794.1">
this.$router.go(1) // similar to window.history.forward() –
  go forward one page</span></pre>
<p><span class="koboSpan" id="kobo.795.1">Alternatively, we can rewrite the above code using useRouter() and &lt;script setup&gt;, </span><span class="No-Break"><span class="koboSpan" id="kobo.796.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.797.1">
import { useRouter } from 'vue-router'
const router = useRouter();
router.go(1); //forward one page
router.go(-1); //back one page</span></pre>
<p><span class="koboSpan" id="kobo.798.1">Next, we’ll make use of navigation links to add our new message feed page to our application’s </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.799.1">nav</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.800.1"> menu.</span></span></p>
<h2 id="_idParaDest-165"><a id="_idTextAnchor279"/><span class="koboSpan" id="kobo.801.1">Exercise 7.02 – adding the navigation link to the MessageFeed route</span></h2>
<p><span class="koboSpan" id="kobo.802.1">We will add </span><a id="_idIndexMarker820"/><span class="koboSpan" id="kobo.803.1">a quick link to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.804.1">MessageFeed</span></strong><span class="koboSpan" id="kobo.805.1"> route </span><a id="_idIndexMarker821"/><span class="koboSpan" id="kobo.806.1">we created in </span><em class="italic"><span class="koboSpan" id="kobo.807.1">Exercise 7.01</span></em><span class="koboSpan" id="kobo.808.1">, using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.809.1">to</span></strong><span class="koboSpan" id="kobo.810.1"> prop and </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">Route</span><a id="_idTextAnchor280"/><span class="koboSpan" id="kobo.812.1">rLink</span></strong><span class="koboSpan" id="kobo.813.1"> as explained in the </span><span class="No-Break"><span class="koboSpan" id="kobo.814.1">preceding topic.</span></span></p>
<p><span class="koboSpan" id="kobo.815.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.02"><span class="No-Break"><span class="koboSpan" id="kobo.817.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.02</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.818.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.819.1">Let’s go through the </span><span class="No-Break"><span class="koboSpan" id="kobo.820.1">following steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.821.1">Use the application generated with </span><strong class="source-inline"><span class="koboSpan" id="kobo.822.1">npm init vue@3</span></strong><span class="koboSpan" id="kobo.823.1"> as a starting point, or within the root folder of the code repository, navigate into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.824.1">Chapter07/Exercise7.02</span></strong><span class="koboSpan" id="kobo.825.1"> folder by using the following commands </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">in order:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.827.1">&gt; cd Chapter07/Exercise7.02/</span></strong></pre><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.828.1">&gt; yarn</span></strong></pre></li>
<li><span class="koboSpan" id="kobo.829.1">Open the exercise project in VS Code (by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1">code .</span></strong><span class="koboSpan" id="kobo.831.1"> command within the project directory) or your </span><span class="No-Break"><span class="koboSpan" id="kobo.832.1">preferred IDE.</span></span></li>
<li><span class="koboSpan" id="kobo.833.1">Follow the instructions in </span><em class="italic"><span class="koboSpan" id="kobo.834.1">Exercise 7.01</span></em><span class="koboSpan" id="kobo.835.1"> to create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.836.1">MessageFeed</span></strong><span class="koboSpan" id="kobo.837.1"> component, register it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.838.1">/messages</span></strong><span class="koboSpan" id="kobo.839.1"> path, and make sure your router is enabled in </span><span class="No-Break"><span class="koboSpan" id="kobo.840.1">the application.</span></span></li>
<li><span class="koboSpan" id="kobo.841.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.842.1">./src/App.vue</span></strong><span class="koboSpan" id="kobo.843.1"> file, besides the auto-generated </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">RouterLink</span></strong><span class="koboSpan" id="kobo.845.1"> components for </span><strong class="source-inline"><span class="koboSpan" id="kobo.846.1">home</span></strong><span class="koboSpan" id="kobo.847.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.848.1">about</span></strong><span class="koboSpan" id="kobo.849.1">, add another </span><strong class="source-inline"><span class="koboSpan" id="kobo.850.1">RouterLink</span></strong><span class="koboSpan" id="kobo.851.1"> component that points </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.853.1">/messages</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.855.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.856.1">
  &lt;header&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.857.1">
    &lt;nav&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.858.1">
      &lt;RouterLink to="/"&gt;Home&lt;/RouterLink&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.859.1">
      &lt;RouterLink to="/about"&gt;About&lt;/RouterLink&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.860.1">
      &lt;RouterLink to="/messages"&gt;Message Feed</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.861.1">
        &lt;/RouterLink&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.862.1">
    &lt;/nav&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.863.1">
  &lt;/header&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.864.1">
  &lt;RouterView /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.865.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.866.1">Run the application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.867.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.868.1">yarn dev</span></strong></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.869.1">We will see the navigation links available in any view – they will not disappear when users </span><a id="_idIndexMarker822"/><span class="koboSpan" id="kobo.870.1">navigate away since </span><a id="_idIndexMarker823"/><span class="koboSpan" id="kobo.871.1">they are not a part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.872.1">RouterView</span></strong><span class="koboSpan" id="kobo.873.1"> component. </span><span class="koboSpan" id="kobo.873.2">Our screen should look </span><span class="No-Break"><span class="koboSpan" id="kobo.874.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer204">
<span class="koboSpan" id="kobo.875.1"><img alt="Figure 7.13 – The Home page with updated navigation links" src="image/B18645_07_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.876.1">Figure 7.13 – The Home page with updated navigation links</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.877.1">Within </span><strong class="source-inline"><span class="koboSpan" id="kobo.878.1">App.vue</span></strong><span class="koboSpan" id="kobo.879.1">, let’s change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.880.1">to</span></strong><span class="koboSpan" id="kobo.881.1"> value to point to the object named </span><strong class="source-inline"><span class="koboSpan" id="kobo.882.1">messageFeed</span></strong><span class="koboSpan" id="kobo.883.1">. </span><span class="koboSpan" id="kobo.883.2">This is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.884.1">name</span></strong><span class="koboSpan" id="kobo.885.1"> value given to this route defined </span><span class="No-Break"><span class="koboSpan" id="kobo.886.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.887.1">./src/router/index.js</span><a id="_idTextAnchor281"/></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.889.1">
&lt;RouterLink :to="{ name: 'messageFeed' }"&gt;Message Feed</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.890.1">
  &lt;/RouterLink&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.891.1">The navigation should work as before; clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.892.1">Message Feed</span></strong><span class="koboSpan" id="kobo.893.1"> button should direct you to </span><strong class="source-inline"><span class="koboSpan" id="kobo.894.1">/messages</span></strong><span class="koboSpan" id="kobo.895.1">, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.896.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer205">
<span class="koboSpan" id="kobo.897.1"><img alt="Figure 7.14 – Active page changes to Message Feed after clicking on the Message Feed link" src="image/B18645_07_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.898.1">Figure 7.14 – Active page changes to Message Feed after clicking on the Message Feed link</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.899.1">Now, open</span><a id="_idIndexMarker824"/><span class="koboSpan" id="kobo.900.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.901.1">index.js</span></strong><span class="koboSpan" id="kobo.902.1"> file</span><a id="_idIndexMarker825"/><span class="koboSpan" id="kobo.903.1"> located in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.904.1">./src/router/</span></strong><span class="koboSpan" id="kobo.905.1"> folder and change the path defined for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.906.1">messageFeed</span></strong><span class="koboSpan" id="kobo.907.1"> route from </span><strong class="source-inline"><span class="koboSpan" id="kobo.908.1">/messages/</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.909.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.910.1">/messagesFeed</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.911.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.912.1">
export const routes = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.913.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.914.1">
    path: '/',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.915.1">
    name: 'home',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.916.1">
    component: HomeView</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.917.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.918.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.919.1">
    path: '/about',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.920.1">
    name: 'about',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.921.1">
    component: () =&gt; import('../views/AboutView.vue')</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.922.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.923.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.924.1">
    path: '/messagesFeed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.925.1">
    name: 'messageFeed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.926.1">
    component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.927.1">
      import('../views/MessageFeed.vue')</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.928.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.929.1">
]</span></pre></li>
<li><span class="koboSpan" id="kobo.930.1">Navigate </span><a id="_idIndexMarker826"/><span class="koboSpan" id="kobo.931.1">to</span><a id="_idIndexMarker827"/><span class="koboSpan" id="kobo.932.1"> the app’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">Home</span></strong><span class="koboSpan" id="kobo.934.1"> page and click on </span><strong class="bold"><span class="koboSpan" id="kobo.935.1">Message Feed</span></strong><span class="koboSpan" id="kobo.936.1"> again. </span><span class="koboSpan" id="kobo.936.2">It should display the same </span><strong class="bold"><span class="koboSpan" id="kobo.937.1">Message Feed</span></strong><span class="koboSpan" id="kobo.938.1"> page as before but note that the URL path has changed </span><span class="No-Break"><span class="koboSpan" id="kobo.939.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.940.1">/messagesFeed</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.941.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer206">
<span class="koboSpan" id="kobo.942.1"><img alt="Figure 7.1﻿5 – The Message Feed page with a new URL path" src="image/B18645_07_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.943.1">Figure 7.1</span><a id="_idTextAnchor282"/><span class="koboSpan" id="kobo.944.1">5 – The Message Feed page with a new URL path</span></p>
<p><span class="koboSpan" id="kobo.945.1">Note how straightforward it is to set up the link to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.946.1">/messages</span></strong><span class="koboSpan" id="kobo.947.1"> path with just one line of code and update the related </span><span class="No-Break"><span class="koboSpan" id="kobo.948.1">path accordingly.</span></span></p>
<p><span class="koboSpan" id="kobo.949.1">So far, we have defined some simple routes without additional parameters for the targ</span><a id="_idTextAnchor283"/><span class="koboSpan" id="kobo.950.1">eted </span><a id="_idIndexMarker828"/><span class="koboSpan" id="kobo.951.1">route – this</span><a id="_idIndexMarker829"/><span class="koboSpan" id="kobo.952.1"> will </span><a id="_idTextAnchor284"/><span class="koboSpan" id="kobo.953.1">be our </span><span class="No-Break"><span class="koboSpan" id="kobo.954.1">next challenge.</span></span></p>
<h1 id="_idParaDest-166"><a id="_idTextAnchor285"/><span class="koboSpan" id="kobo.955.1">Passing route parameters</span></h1>
<p><span class="koboSpan" id="kobo.956.1">Previously we learnt </span><a id="_idIndexMarker830"/><span class="koboSpan" id="kobo.957.1">each route was a standalone view and did not need to pass or connect any data to the other routes. </span><span class="koboSpan" id="kobo.957.2">But Vue Router doesn’t limit the power of routing to only this. </span><span class="koboSpan" id="kobo.957.3">With named routes, we can also easily enable data communication </span><span class="No-Break"><span class="koboSpan" id="kobo.958.1">between routes.</span></span></p>
<p><span class="koboSpan" id="kobo.959.1">In our example app, we want our </span><strong class="source-inline"><span class="koboSpan" id="kobo.960.1">about</span></strong><span class="koboSpan" id="kobo.961.1"> page to be able to receive a data string called </span><strong class="source-inline"><span class="koboSpan" id="kobo.962.1">user</span></strong><span class="koboSpan" id="kobo.963.1"> as the user’s name from the link triggered. </span><span class="koboSpan" id="kobo.963.2">Prior to Vue Router 4.1.4, we can achieve this feature by changing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.964.1">to</span></strong><span class="koboSpan" id="kobo.965.1"> prop from a string literal to an object literal with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.966.1">name</span></strong><span class="koboSpan" id="kobo.967.1"> an</span><a id="_idTextAnchor286"/><span class="koboSpan" id="kobo.968.1">d </span><strong class="source-inline"><span class="koboSpan" id="kobo.969.1">params</span></strong><span class="koboSpan" id="kobo.970.1"> properties, as </span><span class="No-Break"><span class="koboSpan" id="kobo.971.1">shown below:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.972.1">
&lt;RouterLink :to="{ name: 'about', params: { user: 'Adam' }}"&gt;
  About
&lt;/RouterLink&gt;</span></pre>
<p><span class="koboSpan" id="kobo.973.1">This change informs the router to pass the desired parameters to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.974.1">About</span></strong><span class="koboSpan" id="kobo.975.1"> page when users click on the targeted link. </span><span class="koboSpan" id="kobo.975.2">These additional parameters are not visible on the rendered </span><strong class="source-inline"><span class="koboSpan" id="kobo.976.1">href</span></strong><span class="koboSpan" id="kobo.977.1"> link, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.978.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer207">
<span class="koboSpan" id="kobo.979.1"><img alt="Figure 7.16 - Generated href link is without parameters" src="image/B18645_07_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.980.1">Figure 7.16 - Generated href link is without parameters</span></p>
<p><span class="koboSpan" id="kobo.981.1">The output will be </span><span class="No-Break"><span class="koboSpan" id="kobo.982.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer208">
<span class="koboSpan" id="kobo.983.1"><img alt="Figure 7.17 – The About pag﻿﻿﻿e renders the user passed through route params" src="image/B18645_07_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.984.1">Figure 7.17 – The About pag</span><a id="_idTextAnchor287"/><a id="_idTextAnchor288"/><a id="_idTextAnchor289"/><span class="koboSpan" id="kobo.985.1">e renders the user passed through route params</span></p>
<p><span class="koboSpan" id="kobo.986.1">However, there is one significant downside to </span><span class="No-Break"><span class="koboSpan" id="kobo.987.1">this approach.</span></span></p>
<p><span class="koboSpan" id="kobo.988.1">Let’s refresh the page while you are still on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.989.1">./about</span></strong><span class="koboSpan" id="kobo.990.1"> path. </span><span class="koboSpan" id="kobo.990.2">The output will be an page without </span><a id="_idIndexMarker831"/><span class="koboSpan" id="kobo.991.1">user’s name, as </span><span class="No-Break"><span class="koboSpan" id="kobo.992.1">seen below:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer209">
<span class="koboSpan" id="kobo.993.1"><img alt="Figure 7.18 – About page on refresh loses user’s details" src="image/B18645_07_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.994.1">Figure 7.18 – About page on refresh loses user’s details</span></p>
<p><span class="koboSpan" id="kobo.995.1">Upon refresh, the Vue engine triggers route without any </span><strong class="source-inline"><span class="koboSpan" id="kobo.996.1">user</span></strong><span class="koboSpan" id="kobo.997.1"> passed to the route’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.998.1">params</span></strong><span class="koboSpan" id="kobo.999.1"> field, unlike when the user clicked on a specific predefined link. </span><span class="koboSpan" id="kobo.999.2">And parameters passed using this approach was not saved or cached. </span><span class="koboSpan" id="kobo.999.3">We consider this an anti-pattern for </span><span class="No-Break"><span class="koboSpan" id="kobo.1000.1">Vue practice.</span></span></p>
<p><span class="koboSpan" id="kobo.1001.1">Starting from Vue Router 4.1.4, passing params directly on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1002.1">to</span></strong><span class="koboSpan" id="kobo.1003.1"> object is deprecated. </span><span class="koboSpan" id="kobo.1003.2">for passing params to a route, we should use alternative approach such as using Pinia as the global’s data store, or to use the query params of </span><span class="No-Break"><span class="koboSpan" id="kobo.1004.1">the URL.</span></span></p>
<p><span class="koboSpan" id="kobo.1005.1">Query params for a URL route starts after the question mask - </span><strong class="source-inline"><span class="koboSpan" id="kobo.1006.1">?</span></strong><span class="koboSpan" id="kobo.1007.1">, as seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1">syntax below:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1009.1">
&lt;your-app-url&gt;?&lt;param1&gt;=&lt;value1&gt;&amp;&lt;param2&gt;=&lt;value2&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1010.1">In the above syntax, each parameter field is separated by </span><strong class="source-inline"><span class="koboSpan" id="kobo.1011.1">&amp;</span></strong><span class="koboSpan" id="kobo.1012.1"> symbol. </span><span class="koboSpan" id="kobo.1012.2">For example,  to pass the user parameter to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1013.1">/about</span></strong><span class="koboSpan" id="kobo.1014.1"> page, we will construct our URL </span><span class="No-Break"><span class="koboSpan" id="kobo.1015.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1016.1">
localhost:3000/about?user=Adam</span></pre>
<p><span class="koboSpan" id="kobo.1017.1">And in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1018.1">About</span></strong><span class="koboSpan" id="kobo.1019.1"> component, we will retrieve the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1020.1">query</span></strong><span class="koboSpan" id="kobo.1021.1"> field from </span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1">the </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1023.1">route</span></strong></span></p>
<p><span class="koboSpan" id="kobo.1024.1">object, and get the relevant field’s value, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1025.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1026.1">
&lt;script setup&gt;
import { useRoute} from 'vue-router'
const route = useRoute();
const { user } = route.query;
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1027.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1028.1">template</span></strong><span class="koboSpan" id="kobo.1029.1"> section, we can replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.1030.1">$route.params.user</span></strong><span class="koboSpan" id="kobo.1031.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1032.1">user</span></strong><span class="koboSpan" id="kobo.1033.1">, and the output stays the same, even on refreshing </span><span class="No-Break"><span class="koboSpan" id="kobo.1034.1">the page.</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1035.1">
&lt;template&gt;
  &lt;div class="about"&gt;
    &lt;h1&gt;About {{ user }}&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1036.1">In the </span><a id="_idIndexMarker832"/><span class="koboSpan" id="kobo.1037.1">following section, we will learn how to intercept the navigation flow and dynamically ass</span><a id="_idTextAnchor290"/><a id="_idTextAnchor291"/><span class="koboSpan" id="kobo.1038.1">igning </span><strong class="source-inline"><span class="koboSpan" id="kobo.1039.1">params</span></strong><span class="koboSpan" id="kobo.1040.1"> between routes with </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1041.1">Router Hooks</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1042.1">.</span></span></p>
<h1 id="_idParaDest-167"><a id="_idTextAnchor292"/><span class="koboSpan" id="kobo.1043.1">Understanding Router Hooks</span></h1>
<p><span class="koboSpan" id="kobo.1044.1">To understand Vue </span><a id="_idIndexMarker833"/><span class="koboSpan" id="kobo.1045.1">Router Hooks, first, we need to understand the general flow of route navigation as described in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1046.1">following diagram:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer210">
<span class="koboSpan" id="kobo.1047.1"><img alt="Figure 7.19 – Navigation resolution flow diagram" src="image/B18645_07_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1048.1">Figure 7.19 – Navigation resolution flow diagram</span></p>
<p><span class="koboSpan" id="kobo.1049.1">Once navigation is triggered for a certain route, Vue Router provides several primary navigation guards, or Hooks, for developers to guard or intercept that navigation process. </span><span class="koboSpan" id="kobo.1049.2">These</span><a id="_idIndexMarker834"/><span class="koboSpan" id="kobo.1050.1"> guards can be hooked either globally or in the component, depending on </span><span class="No-Break"><span class="koboSpan" id="kobo.1051.1">the type.</span></span></p>
<p><span class="koboSpan" id="kobo.1052.1">Some examples are </span><span class="No-Break"><span class="koboSpan" id="kobo.1053.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.1054.1">Globally</span></strong><span class="koboSpan" id="kobo.1055.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1056.1">beforeEach</span></strong><span class="koboSpan" id="kobo.1057.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1058.1">beforeResolve</span></strong><span class="koboSpan" id="kobo.1059.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1060.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1061.1">afterEach</span></strong></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1062.1">Per </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1063.1">component</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1064.1">: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1065.1">beforeEnter</span></strong></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.1066.1">In-component</span></strong><span class="koboSpan" id="kobo.1067.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1068.1">beforeRouteUpdate</span></strong><span class="koboSpan" id="kobo.1069.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1070.1">beforeRouteEnter</span></strong><span class="koboSpan" id="kobo.1071.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1072.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1073.1">beforeRouteLeave</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.1074.1">For Composition API, those in-component Hooks are available as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1075.1">onBeforeRouteUpdate</span></strong><span class="koboSpan" id="kobo.1076.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1077.1">onBeforeRouteLeave</span></strong><span class="koboSpan" id="kobo.1078.1">. </span><span class="koboSpan" id="kobo.1078.2">There is no </span><strong class="source-inline"><span class="koboSpan" id="kobo.1079.1">onBeforeRouteEnter</span></strong><span class="koboSpan" id="kobo.1080.1"> since this is equivalent to using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1081.1">setup()</span></strong><span class="koboSpan" id="kobo.1082.1"> (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1083.1">script </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1084.1">setup</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1085.1">) itself.</span></span></p>
<p><span class="koboSpan" id="kobo.1086.1">As seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1087.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1088.1">.19</span></em><span class="koboSpan" id="kobo.1089.1">, the Vue engine considers navigation only after all the Hooks or guards have been</span><a id="_idIndexMarker835"/><span class="koboSpan" id="kobo.1090.1"> resolved, including any </span><span class="No-Break"><span class="koboSpan" id="kobo.1091.1">asynchronous guar</span><a id="_idTextAnchor293"/><span class="koboSpan" id="kobo.1092.1">d.</span></span></p>
<p><span class="koboSpan" id="kobo.1093.1">Now, let’s see how to set up </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1094.1">beforeEach</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1"> Hooks.</span></span></p>
<h2 id="_idParaDest-168"><a id="_idTextAnchor294"/><span class="koboSpan" id="kobo.1096.1">Setting up beforeEach Hooks</span></h2>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1097.1">beforeEach</span></strong><span class="koboSpan" id="kobo.1098.1"> is a global </span><a id="_idIndexMarker836"/><span class="koboSpan" id="kobo.1099.1">Hook and is called at the very </span><a id="_idIndexMarker837"/><span class="koboSpan" id="kobo.1100.1">beginning of navigation, </span><em class="italic"><span class="koboSpan" id="kobo.1101.1">before</span></em><span class="koboSpan" id="kobo.1102.1"> the other global and in-component Hooks are triggered (except for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1103.1">beforeRouteLeave</span></strong><span class="koboSpan" id="kobo.1104.1"> in the previous view component). </span><span class="koboSpan" id="kobo.1104.2">It should be defined as a global method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1105.1">router</span></strong><span class="koboSpan" id="kobo.1106.1"> instance during initialization in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1107.1">index.js</span></strong><span class="koboSpan" id="kobo.1108.1"> file and takes the </span><span class="No-Break"><span class="koboSpan" id="kobo.1109.1">following syntax:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1110.1">
const router = createRouter({
  //...
</span><span class="koboSpan" id="kobo.1110.2">})
router.beforeEach(beforeEachCallback)</span></pre>
<p><span class="koboSpan" id="kobo.1111.1">In the preceding snippet, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">beforeEachCallback</span></strong><span class="koboSpan" id="kobo.1113.1"> is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1114.1">hook</span></strong><span class="koboSpan" id="kobo.1115.1"> function that receives </span><span class="No-Break"><span class="koboSpan" id="kobo.1116.1">three arguments:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1117.1">
const beforeEachCallback = (
  to, // The destination route
  from, //The source route
  next //The function to trigger to resolve the hook
) =&gt; { … })</span></pre>
<p><span class="koboSpan" id="kobo.1118.1">We could write this directly </span><span class="No-Break"><span class="koboSpan" id="kobo.1119.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1120.1">
router.beforeEach((to, from, next) =&gt; { … })</span></pre>
<p><span class="koboSpan" id="kobo.1121.1">For example, if we want to display a different page to display a generic message whenever a user navigates to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1122.1">About</span></strong><span class="koboSpan" id="kobo.1123.1"> without a value for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1124.1">user</span></strong><span class="koboSpan" id="kobo.1125.1"> passed </span><a id="_idTextAnchor295"/><span class="koboSpan" id="kobo.1126.1">to query params, we can hook </span><strong class="source-inline"><span class="koboSpan" id="kobo.1127.1">beforeEach</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1128.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1129.1">
router.beforeEach((
  to, // The destination route
  from, //The source route
  next //The function to trigger to resolve the hook
) =&gt; {
  if (to.name === 'about' &amp;&amp; (!to.query?.user)) {
    next({ name: </span><a id="_idTextAnchor296"/><span class="koboSpan" id="kobo.1130.1">'error' })
  }
  else {
    next();
  }
})</span></pre>
<p><span class="koboSpan" id="kobo.1131.1">Here, we </span><a id="_idIndexMarker838"/><span class="koboSpan" id="kobo.1132.1">check </span><a id="_idIndexMarker839"/><span class="koboSpan" id="kobo.1133.1">whether the destination route is </span><strong class="source-inline"><span class="koboSpan" id="kobo.1134.1">about</span></strong><span class="koboSpan" id="kobo.1135.1">, and if it doesn’t pass any additional parameters nor any value for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1136.1">user</span></strong><span class="koboSpan" id="kobo.1137.1"> parameter, we will navigate to an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1138.1">error</span></strong><span class="koboSpan" id="kobo.1139.1"> route instead. </span><span class="koboSpan" id="kobo.1139.2">Otherwise, we will just proceed as normal </span><span class="No-Break"><span class="koboSpan" id="kobo.1140.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">next()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1142.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1143.1">Note</span></p>
<p class="callout"><strong class="source-inline"><span class="koboSpan" id="kobo.1144.1">next()</span></strong><span class="koboSpan" id="kobo.1145.1"> is required to be called </span><em class="italic"><span class="koboSpan" id="kobo.1146.1">exactly once in any given non-overlapped flow logic</span></em><span class="koboSpan" id="kobo.1147.1"> (once for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1148.1">if</span></strong><span class="koboSpan" id="kobo.1149.1"> and once for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1150.1">else</span></strong><span class="koboSpan" id="kobo.1151.1">); otherwise, there will </span><span class="No-Break"><span class="koboSpan" id="kobo.1152.1">be errors.</span></span></p>
<p><span class="koboSpan" id="kobo.1153.1">We still need to create an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1154.1">error</span></strong><span class="koboSpan" id="kobo.1155.1"> page with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1156.1">Err</span><a id="_idTextAnchor297"/><span class="koboSpan" id="kobo.1157.1">or.vue</span></strong><span class="koboSpan" id="kobo.1158.1"> view component that displays a </span><span class="No-Break"><span class="koboSpan" id="kobo.1159.1">simple message:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1160.1">
&lt;template&gt;
    &lt;div&gt;
        &lt;h2&gt;No param passed.&lt;/h2&gt;
    &lt;/div&gt;
&lt;/templa</span><a id="_idTextAnchor298"/><span class="koboSpan" id="kobo.1161.1">te&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1162.1">Also, make sure to register the </span><span class="No-Break"><span class="koboSpan" id="kobo.1163.1">path accordingly:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1164.1">
{
    path: '/error',
    name: 'error',
    component: () =&gt; import('../views/Error.vue'),
  }</span></pre>
<p><span class="koboSpan" id="kobo.1165.1">Now, in the default view, after clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.1166.1">About</span></strong><span class="koboSpan" id="kobo.1167.1"> link, the app will render the </span><strong class="bold"><span class="koboSpan" id="kobo.1168.1">Error</span></strong><span class="koboSpan" id="kobo.1169.1"> page instead </span><a id="_idIndexMarker840"/><span class="koboSpan" id="kobo.1170.1">of the </span><strong class="bold"><span class="koboSpan" id="kobo.1171.1">About</span></strong><span class="koboSpan" id="kobo.1172.1"> page, as seen in the</span><a id="_idIndexMarker841"/> <span class="No-Break"><span class="koboSpan" id="kobo.1173.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer211">
<span class="koboSpan" id="kobo.1174.1"><img alt="Figure 7.20 – The Error page displayed when About is clicked without param being passed" src="image/B18645_07_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1175.1">Figure 7.20 – The Error page displayed when About is clicked without param being passed</span></p>
<p><span class="koboSpan" id="kobo.1176.1">Now, let’s go to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1177.1">App.vue</span></strong><span class="koboSpan" id="kobo.1178.1"> file and assign the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1179.1">to</span></strong><span class="koboSpan" id="kobo.1180.1"> prop to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1181.1">path </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1182.1">"/about?user=Adam":</span></strong></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1183.1">
&lt;RouterLink to="/about?user=Adam"&gt;About&lt;/RouterLink&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1184.1">And in the About.vue file, we use the following </span><span class="No-Break"><span class="koboSpan" id="kobo.1185.1">template code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1186.1">
&lt;div class="about"&gt;
    &lt;h1&gt;About {{ $route.query.user }}&lt;/h1&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1187.1">Let’s navigate back to our app’s </span><strong class="bold"><span class="koboSpan" id="kobo.1188.1">Home</span></strong><span class="koboSpan" id="kobo.1189.1"> page and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1190.1">About</span></strong><span class="koboSpan" id="kobo.1191.1"> link. </span><span class="koboSpan" id="kobo.1191.2">Since we have a proper </span><strong class="source-inline"><span class="koboSpan" id="kobo.1192.1">user</span></strong><span class="koboSpan" id="kobo.1193.1"> passed, the output will be </span><span class="No-Break"><span class="koboSpan" id="kobo.1194.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer212">
<span class="koboSpan" id="kobo.1195.1"><img alt="Figure 7.21 – The About page displayed when there is a user passed in query params" src="image/B18645_07_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1196.1">Figure 7.21 – The About page displayed when there is a user passed in query params</span></p>
<p><span class="koboSpan" id="kobo.1197.1">We shall now look </span><a id="_idIndexMarker842"/><span class="koboSpan" id="kobo.1198.1">at a few key points that</span><a id="_idIndexMarker843"/><span class="koboSpan" id="kobo.1199.1"> differentiate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1200.1">beforeEach</span></strong><span class="koboSpan" id="kobo.1201.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1202.1">beforeResolve</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1203.1"> Hooks.</span></span></p>
<h2 id="_idParaDest-169"><a id="_idTextAnchor299"/><span class="koboSpan" id="kobo.1204.1">Distinguishing between the beforeEach and beforeResolve Hooks</span></h2>
<p><span class="koboSpan" id="kobo.1205.1">We can </span><a id="_idIndexMarker844"/><span class="koboSpan" id="kobo.1206.1">also</span><a id="_idIndexMarker845"/><span class="koboSpan" id="kobo.1207.1"> register </span><a id="_idIndexMarker846"/><span class="koboSpan" id="kobo.1208.1">a global Hook with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1209.1">beforeResolve</span></strong><span class="koboSpan" id="kobo.1210.1"> with the same syntax. </span><span class="koboSpan" id="kobo.1210.2">Unlike </span><strong class="source-inline"><span class="koboSpan" id="kobo.1211.1">beforeEach</span></strong><span class="koboSpan" id="kobo.1212.1">, which is triggered when navigation is set up, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1213.1">beforeResolve</span></strong><span class="koboSpan" id="kobo.1214.1"> will be triggered just before the navigation is carried out and confirmed </span><em class="italic"><span class="koboSpan" id="kobo.1215.1">after all the Hooks (both global and in-component) </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1216.1">are resolved</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1217.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1218.1">
router.beforeResolve((
  to, // The destination route
  from, //The source route
  next //The function to trigger to resolve the hook
) =&gt; {
  if (to.name === 'about' &amp;&amp; (!to.query?.user)) {
    next({ name: 'error' })
  }
  else {
    next();
  }
})</span></pre>
<p><span class="koboSpan" id="kobo.1219.1">The </span><a id="_idIndexMarker847"/><span class="koboSpan" id="kobo.1220.1">output</span><a id="_idIndexMarker848"/><span class="koboSpan" id="kobo.1221.1"> results </span><a id="_idIndexMarker849"/><span class="koboSpan" id="kobo.1222.1">will remain the same as in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1223.1">Figure 7</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1224.1">.20</span></em><span class="koboSpan" id="kobo.1225.1"> and </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1226.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1227.1">.21</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1228.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1229.1">Let’s now look at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1230.1">afterEach</span></strong><span class="koboSpan" id="kobo.1231.1"> Hook </span><span class="No-Break"><span class="koboSpan" id="kobo.1232.1">in detail.</span></span></p>
<h2 id="_idParaDest-170"><a id="_idTextAnchor300"/><span class="koboSpan" id="kobo.1233.1">The afterEach Hook</span></h2>
<p><span class="koboSpan" id="kobo.1234.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1235.1">afterEach()</span></strong><span class="koboSpan" id="kobo.1236.1"> Hook</span><a id="_idIndexMarker850"/><span class="koboSpan" id="kobo.1237.1"> is the last global navigation guard to be </span><a id="_idIndexMarker851"/><span class="koboSpan" id="kobo.1238.1">triggered after the navigation is confirmed (which means after </span><strong class="source-inline"><span class="koboSpan" id="kobo.1239.1">beforeResolve()</span></strong><span class="koboSpan" id="kobo.1240.1">). </span><span class="koboSpan" id="kobo.1240.2">Unlike the other global guards, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1241.1">hook</span></strong><span class="koboSpan" id="kobo.1242.1"> function to pass to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1243.1">afterEach()</span></strong><span class="koboSpan" id="kobo.1244.1"> does not receive a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1245.1">next</span></strong><span class="koboSpan" id="kobo.1246.1"> function – hence, it won’t affect </span><span class="No-Break"><span class="koboSpan" id="kobo.1247.1">the navigation.</span></span></p>
<p><span class="koboSpan" id="kobo.1248.1">In addition, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1249.1">to</span></strong><span class="koboSpan" id="kobo.1250.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1251.1">from</span></strong><span class="koboSpan" id="kobo.1252.1"> parameters are read-only </span><strong class="source-inline"><span class="koboSpan" id="kobo.1253.1">Route</span></strong><span class="koboSpan" id="kobo.1254.1"> objects. </span><span class="koboSpan" id="kobo.1254.2">Hence, the best use case for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1255.1">afterEach</span></strong><span class="koboSpan" id="kobo.1256.1"> is to save data such as the last visited </span><strong class="source-inline"><span class="koboSpan" id="kobo.1257.1">Route</span></strong><span class="koboSpan" id="kobo.1258.1"> object for a </span><strong class="bold"><span class="koboSpan" id="kobo.1259.1">Back</span></strong><span class="koboSpan" id="kobo.1260.1"> button, the passed parameters of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1261.1">route</span></strong><span class="koboSpan" id="kobo.1262.1"> destination, or page </span><span class="No-Break"><span class="koboSpan" id="kobo.1263.1">view tracking.</span></span></p>
<p><span class="koboSpan" id="kobo.1264.1">For example, we can have a default value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1265.1">user</span></strong><span class="koboSpan" id="kobo.1266.1">, assign it, and save it </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">whenever needed:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1268.1">
let user = 'Adam';
router.beforeEach((to, from, next) =&gt; {
  if (to.name === 'about' &amp;&amp; (!to.query?.user)) {
    next({ name: 'about', query: { user }})
  }
  else {
    user = to.query.user;
    next()
  }
});
router.afterEach((to, from) =&gt; {
  if (to.name === 'about' &amp;&amp; to.query &amp;&amp; to.query.user) {
    user = to.query.user;
  }
})</span></pre>
<p><span class="koboSpan" id="kobo.1269.1">Now, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1270.1">App.vue</span></strong><span class="koboSpan" id="kobo.1271.1"> file, let’s change the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1272.1">user</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1273.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1274.1">Alex</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1275.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1276.1">
&lt;RouterLink to="/about?user=Alex"&gt; About &lt;/RouterLink&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1277.1">The </span><a id="_idIndexMarker852"/><span class="koboSpan" id="kobo.1278.1">output </span><a id="_idIndexMarker853"/><span class="koboSpan" id="kobo.1279.1">when clicking on the </span><strong class="bold"><span class="koboSpan" id="kobo.1280.1">About</span></strong><span class="koboSpan" id="kobo.1281.1"> link now is </span><span class="No-Break"><span class="koboSpan" id="kobo.1282.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer213">
<span class="koboSpan" id="kobo.1283.1"><img alt="Figure 7.22 – The About page displaying the new user’s name (Alex)" src="image/B18645_07_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1284.1">Figure 7.22 – The About page displaying the new user’s name (Alex)</span></p>
<p><span class="koboSpan" id="kobo.1285.1">However, on navigating to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1286.1">"/about"</span></strong><span class="koboSpan" id="kobo.1287.1"> only, the </span><strong class="bold"><span class="koboSpan" id="kobo.1288.1">About</span></strong><span class="koboSpan" id="kobo.1289.1"> page renders with the default user – </span><strong class="bold"><span class="koboSpan" id="kobo.1290.1">Adam</span></strong><span class="koboSpan" id="kobo.1291.1"> – instead, </span><span class="No-Break"><span class="koboSpan" id="kobo.1292.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer214">
<span class="koboSpan" id="kobo.1293.1"><img alt="Figure 7.23 – The About page displaying the default user value on reloading (Adam)" src="image/B18645_07_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1294.1">Figure 7.23 – The About page displaying the default user value on reloading (Adam)</span></p>
<p><span class="koboSpan" id="kobo.1295.1">In this section, we looked at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1296.1">afterEach</span></strong><span class="koboSpan" id="kobo.1297.1"> Hook. </span><span class="koboSpan" id="kobo.1297.2">We used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1298.1">afterEach</span></strong><span class="koboSpan" id="kobo.1299.1"> Hook to pass data through to the </span><strong class="bold"><span class="koboSpan" id="kobo.1300.1">About</span></strong><span class="koboSpan" id="kobo.1301.1"> page without having to contain that data in the URL. </span><span class="koboSpan" id="kobo.1301.2">This same </span><a id="_idIndexMarker854"/><span class="koboSpan" id="kobo.1302.1">technique</span><a id="_idIndexMarker855"/><span class="koboSpan" id="kobo.1303.1"> can be used for updating other behavior such as the desired target page when pressing the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1304.1">Back</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1305.1"> button.</span></span></p>
<h2 id="_idParaDest-171"><a id="_idTextAnchor301"/><span class="koboSpan" id="kobo.1306.1">Personalizing Hooks per route</span></h2>
<p><span class="koboSpan" id="kobo.1307.1">Instead of</span><a id="_idIndexMarker856"/><span class="koboSpan" id="kobo.1308.1"> defining a global Hook, which can cause unseen bugs and requires a route check, we can define a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1309.1">beforeEnter</span></strong><span class="koboSpan" id="kobo.1310.1"> guard directly in the targeted route’s configuration object – for example, our </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1311.1">about</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1312.1"> route:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1313.1">
beforeEnter: (to, from, next) =&gt; {
      if (!to.query?.user) {
        to.query = { user : 'Adam' }
      }
      next()
    }</span></pre>
<p><span class="koboSpan" id="kobo.1314.1">With this approach, whether reloading the page or clicking on the link to navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.1315.1">About</span></strong><span class="koboSpan" id="kobo.1316.1"> page, the output is now consistent, but the URL doesn’t show the default params (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1317.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1318.1">.24</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1319.1">)</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer215">
<span class="koboSpan" id="kobo.1320.1"><img alt="Figure 7.24 – The About page displaying the default user (Adam) without URL updated" src="image/B18645_07_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1321.1">Figure 7.24 – The About page displaying the default user (Adam) without URL updated</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1322.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1323.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.1324.1">beforeEnter()</span></strong><span class="koboSpan" id="kobo.1325.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1326.1">to</span></strong><span class="koboSpan" id="kobo.1327.1"> is writeable and you will have access to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1328.1">this</span></strong><span class="koboSpan" id="kobo.1329.1"> (which points to the specific route – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1330.1">About</span></strong><span class="koboSpan" id="kobo.1331.1">). </span><span class="koboSpan" id="kobo.1331.2">It will only be triggered when users trigger navigation to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1332.1">About</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1333.1"> page.</span></span></p>
<p><span class="koboSpan" id="kobo.1334.1">In this section, we looked at the different Router Hooks available in Vue, including </span><strong class="source-inline"><span class="koboSpan" id="kobo.1335.1">beforeEach</span></strong><span class="koboSpan" id="kobo.1336.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1337.1">beforeResolve</span></strong><span class="koboSpan" id="kobo.1338.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1339.1">afterEach</span></strong><span class="koboSpan" id="kobo.1340.1">. </span><span class="koboSpan" id="kobo.1340.2">We saw how each of these Hooks is called at a different point in the routing process. </span><span class="koboSpan" id="kobo.1340.3">As a practical example, we looked at a route that, if not provided a parameter, instead directs the user to an </span><strong class="bold"><span class="koboSpan" id="kobo.1341.1">Error</span></strong><span class="koboSpan" id="kobo.1342.1"> page. </span><span class="koboSpan" id="kobo.1342.2">These Hooks </span><a id="_idIndexMarker857"/><span class="koboSpan" id="kobo.1343.1">can be very useful, especially when setting up an </span><span class="No-Break"><span class="koboSpan" id="kobo.1344.1">authenticated route.</span></span><a id="_idTextAnchor302"/></p>
<p><span class="koboSpan" id="kobo.1345.1">In the next section, we’ll look at setting up </span><span class="No-Break"><span class="koboSpan" id="kobo.1346.1">in-component Hooks.</span></span></p>
<h2 id="_idParaDest-172"><a id="_idTextAnchor303"/><span class="koboSpan" id="kobo.1347.1">Setting up in-component Hooks</span></h2>
<p><span class="koboSpan" id="kobo.1348.1">Finally, we can </span><a id="_idIndexMarker858"/><span class="koboSpan" id="kobo.1349.1">also use in-component Hooks </span><a id="_idIndexMarker859"/><span class="koboSpan" id="kobo.1350.1">as component lifecycle Hooks when we want to scope those Hooks at the component level for better code maintenance or enhance the workflow when the same component needs to behave differently in a certain </span><span class="No-Break"><span class="koboSpan" id="kobo.1351.1">use case.</span></span></p>
<p><span class="koboSpan" id="kobo.1352.1">We can have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1353.1">abou</span><a id="_idTextAnchor304"/><span class="koboSpan" id="kobo.1354.1">t</span></strong><span class="koboSpan" id="kobo.1355.1"> component now with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1356.1">beforeRouteEnter()</span></strong><span class="koboSpan" id="kobo.1357.1"> Hook defined </span><span class="No-Break"><span class="koboSpan" id="kobo.1358.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1359.1">
&lt;script&gt;
export default {
  data() {
    return {
      user: ''
    }
  },
  beforeRouteEnter(to, from, next) {
    if (!to.params || !to.params.user) {
      next(comp =&gt; {
        comp.user = 'Alex'
      })
    }
    else {
      next();
    }
  }
}
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1360.1">As you can </span><a id="_idIndexMarker860"/><span class="koboSpan" id="kobo.1361.1">see, we </span><a id="_idIndexMarker861"/><span class="koboSpan" id="kobo.1362.1">don’t have access to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1363.1">this</span></strong><span class="koboSpan" id="kobo.1364.1"> scope of the component during </span><strong class="source-inline"><span class="koboSpan" id="kobo.1365.1">beforeRouteEnter</span></strong><span class="koboSpan" id="kobo.1366.1"> because the view component is still being created. </span><span class="koboSpan" id="kobo.1366.2">Luckily, we can access the instance through a callback passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1367.1">next()</span></strong><span class="koboSpan" id="kobo.1368.1">. </span><span class="koboSpan" id="kobo.1368.2">Whenever the navigation is confirmed, which means the component is created, the callback will be triggered, and the component instance will be available as the sole argument (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1369.1">comp</span></strong><span class="koboSpan" id="kobo.1370.1">) of </span><span class="No-Break"><span class="koboSpan" id="kobo.1371.1">the callback.</span></span></p>
<p><span class="koboSpan" id="kobo.1372.1">Alternatively, we can rewrite the above code using Composition API and the hook </span><strong class="source-inline"><span class="koboSpan" id="kobo.1373.1">useRoute</span></strong><span class="koboSpan" id="kobo.1374.1"> imported from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1375.1">'vue-router'</span></strong><span class="koboSpan" id="kobo.1376.1"> package, </span><span class="No-Break"><span class="koboSpan" id="kobo.1377.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1378.1">
import { useRoute } from 'vue-router';
import { ref } from 'vue';
const user = ref('');
const route = useRoute();
if (!route.params || !route.params.user) {
  user.value = 'Alex'
}</span></pre>
<p class="callout-heading"><span class="koboSpan" id="kobo.1379.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1380.1">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.1381.1">beforeRouteUpdate</span></strong><span class="koboSpan" id="kobo.1382.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1383.1">beforeRouteLeave</span></strong><span class="koboSpan" id="kobo.1384.1">, the component has been created – hence, this instance is available and there is no need for a callback for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1385.1">next()</span></strong><span class="koboSpan" id="kobo.1386.1">. </span><span class="koboSpan" id="kobo.1386.2">In fact, a callback function is only supported in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1387.1">next()</span></strong><span class="koboSpan" id="kobo.1388.1"> within the use </span><span class="No-Break"><span class="koboSpan" id="kobo.1389.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1390.1">beforeRouteEnter()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1391.1">.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1392.1">beforeRouteUpdate</span></strong><span class="koboSpan" id="kobo.1393.1"> (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1394.1">onBeforeRouteUpdate</span></strong><span class="koboSpan" id="kobo.1395.1">) is called when the same component is </span><a id="_idIndexMarker862"/><span class="koboSpan" id="kobo.1396.1">reused for a different route. </span><span class="koboSpan" id="kobo.1396.2">This</span><a id="_idIndexMarker863"/><span class="koboSpan" id="kobo.1397.1"> applies when we use dynamic routing, which will be discussed in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1398.1">next section.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1399.1">beforeRouteLeave</span></strong><span class="koboSpan" id="kobo.1400.1"> (or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1401.1">onBeforeRouteLeave</span></strong><span class="koboSpan" id="kobo.1402.1">) is triggered when the component is deactivated or before the user navigates away from the current view. </span><span class="koboSpan" id="kobo.1402.2">This is called right before the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1403.1">beforeEach</span></strong><span class="koboSpan" id="kobo.1404.1"> guard of the new navigation and is usually used in editor components to prevent users from navigating away </span><span class="No-Break"><span class="koboSpan" id="kobo.1405.1">without saving.</span></span></p>
<p><span class="koboSpan" id="kobo.1406.1">In this guard, we can cancel the new navigation by passing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1407.1">false</span></strong><span class="koboSpan" id="kobo.1408.1"> to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1409.1">next()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1410.1"> function.</span></span></p>
<p><span class="koboSpan" id="kobo.1411.1">For example, imagine that we add the following Hook to the component’s option in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1412.1">AboutView.vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1413.1"> fi</span><a id="_idTextAnchor305"/><a id="_idTextAnchor306"/><span class="koboSpan" id="kobo.1414.1">le:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1415.1">
import { onBeforeRouteLeave } from 'vue-router';
onBeforeRouteLeave((to, from, next) =&gt; {
  const ans = window.confirm(
   'You are about to leave the About page. </span><span class="koboSpan" id="kobo.1415.2">Are you sure?'
</span><span class="koboSpan" id="kobo.1415.3">  );
  next(!!ans);
})</span></pre>
<p><span class="koboSpan" id="kobo.1416.1">When we navigate away from the </span><strong class="bold"><span class="koboSpan" id="kobo.1417.1">About</span></strong><span class="koboSpan" id="kobo.1418.1"> page, a pop-up dialog will appear asking for confirmation, as shown in the following screenshot, and then continue </span><span class="No-Break"><span class="koboSpan" id="kobo.1419.1">navigating accordingly:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer216">
<span class="koboSpan" id="kobo.1420.1"><img alt="Figure 7.25 – Dialog asking to confirm before navigating away from the About page" src="image/B18645_07_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1421.1">Figure 7.25 – Dialog asking to confirm before navigating away from the About page</span></p>
<p><span class="koboSpan" id="kobo.1422.1">In this section, we looked at setting up in-component Hooks – that is, Hooks that are scoped to specific </span><a id="_idIndexMarker864"/><span class="koboSpan" id="kobo.1423.1">components. </span><span class="koboSpan" id="kobo.1423.2">We set up an in-component</span><a id="_idIndexMarker865"/><span class="koboSpan" id="kobo.1424.1"> Hook for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1425.1">about</span></strong><span class="koboSpan" id="kobo.1426.1"> component that asks a user to confirm before leaving </span><span class="No-Break"><span class="koboSpan" id="kobo.1427.1">the page.</span></span></p>
<p><span class="koboSpan" id="kobo.1428.1">We will now see how to decouple passed parameters </span><span class="No-Break"><span class="koboSpan" id="kobo.1429.1">into </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1430.1">props</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1431.1">.</span></span></p>
<h1 id="_idParaDest-173"><a id="_idTextAnchor307"/><span class="koboSpan" id="kobo.1432.1">Decoupling Params with Props</span></h1>
<p><span class="koboSpan" id="kobo.1433.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1434.1">index.js</span></strong><span class="koboSpan" id="kobo.1435.1"> file, let’s </span><a id="_idIndexMarker866"/><span class="koboSpan" id="kobo.1436.1">adjust the configuration </span><a id="_idIndexMarker867"/><span class="koboSpan" id="kobo.1437.1">of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1438.1">about</span></strong><span class="koboSpan" id="kobo.1439.1"> route with an additional property </span><span class="No-Break"><span class="koboSpan" id="kobo.1440.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1441.1">props</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1442.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1443.1">By setting this property’s value as a function which accepts a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1444.1">route</span></strong><span class="koboSpan" id="kobo.1445.1"> and returns an object containing an </span><strong class="source-inline"><span class="koboSpan" id="kobo.1446.1">user</span></strong><span class="koboSpan" id="kobo.1447.1"> field of value based on </span><strong class="source-inline"><span class="koboSpan" id="kobo.1448.1">route.query.user</span></strong><span class="koboSpan" id="kobo.1449.1">, the router will automatically understand and map any </span><strong class="source-inline"><span class="koboSpan" id="kobo.1450.1">route.query</span></strong><span class="koboSpan" id="kobo.1451.1"> parameters into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1452.1">props</span></strong><span class="koboSpan" id="kobo.1453.1"> of the view </span><span class="No-Break"><span class="koboSpan" id="kobo.1454.1">component accordingly:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1455.1">
{
    path: '/about',
    name: 'about',
    component: () =&gt; import('../views/AboutView.vue'),
     props: route =&gt; ({ user: route.query.user || 'Adam' })
}</span></pre>
<p><span class="koboSpan" id="kobo.1456.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1457.1">AboutView.vue</span></strong><span class="koboSpan" id="kobo.1458.1"> file, we </span><a id="_idIndexMarker868"/><span class="koboSpan" id="kobo.1459.1">will define a prop type </span><strong class="source-inline"><span class="koboSpan" id="kobo.1460.1">user</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1461.1">as</span></span><span class="No-Break"><a id="_idIndexMarker869"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1462.1"> follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1463.1">
&lt;script setup&gt;
import { defineProps } from 'vue'
const props = defineProps({
    user: String
})
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1464.1">And in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1465.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.1466.1"> section, we will replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.1467.1">$route.query.user</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1468.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1469.1">user</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1470.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1471.1">
&lt;template&gt;
  &lt;div class="about"&gt;
    &lt;h1&gt;About {{user}}&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1472.1">The output will still be the same, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1473.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer217">
<span class="koboSpan" id="kobo.1474.1"><img alt="Figure 7.26 – The user is passed through route params and mapped to props" src="image/B18645_07_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1475.1">Figure 7.26 – The user is passed through route params and mapped to props</span></p>
<p><span class="koboSpan" id="kobo.1476.1">Also, you can define a static data that you want to pass within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1477.1">props</span></strong><span class="koboSpan" id="kobo.1478.1"> property of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1479.1">route</span></strong><span class="koboSpan" id="kobo.1480.1"> configuration. </span><span class="koboSpan" id="kobo.1480.2">Instead of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1481.1">Function</span></strong><span class="koboSpan" id="kobo.1482.1"> value, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1483.1">props</span></strong><span class="koboSpan" id="kobo.1484.1"> can now be declared as an object with the required data, as in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1485.1">following example:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1486.1">
{
    //…
    props: { age: 32 },
  }</span></pre>
<p><span class="koboSpan" id="kobo.1487.1">With a similar</span><a id="_idIndexMarker870"/><span class="koboSpan" id="kobo.1488.1"> step, we will declare </span><strong class="source-inline"><span class="koboSpan" id="kobo.1489.1">age</span></strong><span class="koboSpan" id="kobo.1490.1"> as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1491.1">props</span></strong><span class="koboSpan" id="kobo.1492.1"> component </span><a id="_idIndexMarker871"/><span class="koboSpan" id="kobo.1493.1">in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1494.1">AboutView.vue</span></strong><span class="koboSpan" id="kobo.1495.1">, and print it out to the screen </span><span class="No-Break"><span class="koboSpan" id="kobo.1496.1">as text:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1497.1">
&lt;template&gt;
  &lt;div class="about"&gt;
    &lt;h2&gt;Age: {{age}}&lt;/h2&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { defineProps } from 'vue'
const props = defineProps({
    age: Number
})
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1498.1">Now when</span><a id="_idIndexMarker872"/><span class="koboSpan" id="kobo.1499.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1500.1">About</span></strong><span class="koboSpan" id="kobo.1501.1"> page is clicked, the page will </span><a id="_idIndexMarker873"/><span class="koboSpan" id="kobo.1502.1">render </span><span class="No-Break"><span class="koboSpan" id="kobo.1503.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer218">
<span class="koboSpan" id="kobo.1504.1"><img alt="Figure 7.27 – With the props preset in the router configuration" src="image/B18645_07_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1505.1">Figure 7.27 – With the props preset in the router configuration</span></p>
<h2 id="_idParaDest-174"><a id="_idTextAnchor308"/><span class="koboSpan" id="kobo.1506.1">Exercise 7.03: Passing the content of the selected message to a new message page and having it printed out</span></h2>
<p><span class="koboSpan" id="kobo.1507.1">We </span><a id="_idIndexMarker874"/><span class="koboSpan" id="kobo.1508.1">shall </span><a id="_idIndexMarker875"/><span class="koboSpan" id="kobo.1509.1">continue from </span><em class="italic"><span class="koboSpan" id="kobo.1510.1">Exercise 7.02</span></em><span class="koboSpan" id="kobo.1511.1">, </span><em class="italic"><span class="koboSpan" id="kobo.1512.1">Adding the Navigation Link to the MessageFeed Route</span></em><span class="koboSpan" id="kobo.1513.1">, where we defined the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1514.1">MessageFeed</span></strong><span class="koboSpan" id="kobo.1515.1"> route with a URL path to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1516.1">messages</span></strong><span class="koboSpan" id="kobo.1517.1">. </span><span class="koboSpan" id="kobo.1517.2">This view will render a list of predefined messages in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1518.1">data</span></strong><span class="koboSpan" id="kobo.1519.1"> property of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1520.1">view</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1521.1">component’s options.</span></span></p>
<p><span class="koboSpan" id="kobo.1522.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.1523.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.03"><span class="No-Break"><span class="koboSpan" id="kobo.1524.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.03</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1525.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1526.1">In this exercise, we will create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.1527.1">/message</span></strong><span class="koboSpan" id="kobo.1528.1"> page, designated to render the content of a message selected by the user. </span><span class="koboSpan" id="kobo.1528.2">It should </span><span class="No-Break"><span class="koboSpan" id="kobo.1529.1">be reusable.</span></span></p>
<p><span class="koboSpan" id="kobo.1530.1">Do </span><span class="No-Break"><span class="koboSpan" id="kobo.1531.1">the following:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1532.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1533.1">./src/views/</span></strong><span class="koboSpan" id="kobo.1534.1"> folder, we create a new single-file component called </span><strong class="source-inline"><span class="koboSpan" id="kobo.1535.1">Message.vue</span></strong><span class="koboSpan" id="kobo.1536.1">. </span><span class="koboSpan" id="kobo.1536.2">This component receives a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1537.1">content</span></strong><span class="koboSpan" id="kobo.1538.1"> prop of type </span><strong class="source-inline"><span class="koboSpan" id="kobo.1539.1">string</span></strong><span class="koboSpan" id="kobo.1540.1"> and renders it under a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1541.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1542.1">p&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1543.1"> tag:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1544.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1545.1">
    &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1546.1">
        &lt;p&gt;{{content}}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1547.1">
    &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1548.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1549.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1550.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1551.1">
const props = defineProps({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1552.1">
    content: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1553.1">
        default: '',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1554.1">
        type: String</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1555.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1556.1">
})</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1557.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1558.1">Let’s </span><a id="_idIndexMarker876"/><span class="koboSpan" id="kobo.1559.1">register </span><a id="_idIndexMarker877"/><span class="koboSpan" id="kobo.1560.1">a new route with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1561.1">Message</span></strong><span class="koboSpan" id="kobo.1562.1"> component to the existing </span><strong class="source-inline"><span class="koboSpan" id="kobo.1563.1">routes</span></strong><span class="koboSpan" id="kobo.1564.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1565.1">./src/router/index.js</span></strong><span class="koboSpan" id="kobo.1566.1">. </span><span class="koboSpan" id="kobo.1566.2">We will define the new route as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1567.1">message</span></strong><span class="koboSpan" id="kobo.1568.1"> with the path </span><span class="No-Break"><span class="koboSpan" id="kobo.1569.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1570.1">/message</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1571.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1572.1">
export const routes = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1573.1">
  //…,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1574.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1575.1">
    path: '/message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1576.1">
    name: 'message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1577.1">
    component: () =&gt; import('../views/Message.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1578.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1579.1">
]</span></pre></li>
<li><span class="koboSpan" id="kobo.1580.1">Since the route is registered and ready to be used, we need to make changes to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1581.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.1582.1"> section of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1583.1">./src/views/MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.1584.1"> to ensure each message line is now clickable and will redirect the user to the new route </span><span class="No-Break"><span class="koboSpan" id="kobo.1585.1">when clicked.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1586.1">Let’s replace the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1587.1">&lt;p&gt;</span></strong><span class="koboSpan" id="kobo.1588.1"> tag with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1589.1">router-click</span></strong><span class="koboSpan" id="kobo.1590.1">. </span><span class="koboSpan" id="kobo.1590.2">And because we have named our new route </span><a id="_idIndexMarker878"/><span class="koboSpan" id="kobo.1591.1">as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1592.1">message</span></strong><span class="koboSpan" id="kobo.1593.1">, we</span><a id="_idIndexMarker879"/><span class="koboSpan" id="kobo.1594.1"> will set </span><strong class="source-inline"><span class="koboSpan" id="kobo.1595.1">to</span></strong><span class="koboSpan" id="kobo.1596.1"> of each </span><strong class="source-inline"><span class="koboSpan" id="kobo.1597.1">RouterLink</span></strong><span class="koboSpan" id="kobo.1598.1"> to bind </span><span class="No-Break"><span class="koboSpan" id="kobo.1599.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1600.1">/message</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1601.1">.</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1602.1">
&lt;template&gt;
  &lt;div&gt;
  &lt;h2&gt; Message Feed &lt;/h2&gt;
  &lt;div v-for="(m, i) in messages" :key="i" &gt;
    &lt;RouterLink :to="`/message`"&gt;
      {{ m }}
    &lt;/RouterLink&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;/template&gt;</span></pre>
<ol>
<li value="4"><span class="koboSpan" id="kobo.1603.1">Under </span><strong class="source-inline"><span class="koboSpan" id="kobo.1604.1">template</span></strong><span class="koboSpan" id="kobo.1605.1">, we’ll add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1606.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.1607.1"> tag containing some sample data for </span><span class="No-Break"><span class="koboSpan" id="kobo.1608.1">our </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1609.1">messages</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1610.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1611.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1612.1">
const messages = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1613.1">
    'Hello, how are you?',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1614.1">
    'The weather is nice',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1615.1">
    'This is the message feed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1616.1">
    'And I am the fourth message'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1617.1">
  ]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1618.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1619.1">Within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1620.1">message</span></strong><span class="koboSpan" id="kobo.1621.1"> route definition (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1622.1">router/index.js</span></strong><span class="koboSpan" id="kobo.1623.1">), we add </span><strong class="source-inline"><span class="koboSpan" id="kobo.1624.1">props: route =&gt; ({ content: route.query.content })</span></strong><span class="koboSpan" id="kobo.1625.1"> to map all </span><strong class="source-inline"><span class="koboSpan" id="kobo.1626.1">content</span></strong><span class="koboSpan" id="kobo.1627.1"> query</span><a id="_idIndexMarker880"/><span class="koboSpan" id="kobo.1628.1"> passed to the </span><a id="_idIndexMarker881"/><span class="koboSpan" id="kobo.1629.1">route to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1630.1">related prop.</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1631.1">
export const routes = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1632.1">
  //…,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1633.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1634.1">
    path: '/message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1635.1">
    name: 'message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1636.1">
    component: () =&gt; import('../views/Message.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1637.1">
    props: route =&gt; ({ content: route.query.content })</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1638.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1639.1">
]</span></pre></li>
<li><span class="koboSpan" id="kobo.1640.1">When you open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1641.1">./messages</span></strong><span class="koboSpan" id="kobo.1642.1"> page, all the messages are now clickable as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1643.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer219">
<span class="koboSpan" id="kobo.1644.1"><img alt="Figure 7.28 – Each message now is a navigable link" src="image/B18645_07_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1645.1">Figure 7.28 – Each message now is a navigable link</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.1646.1">Now when the</span><a id="_idIndexMarker882"/><span class="koboSpan" id="kobo.1647.1"> user clicks on a </span><a id="_idIndexMarker883"/><span class="koboSpan" id="kobo.1648.1">message, it will open a new page. </span><span class="koboSpan" id="kobo.1648.2">However, the page content will be empty, as we have not passed any content parameter to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1649.1">&lt;RouteLink&gt;</span></strong><span class="koboSpan" id="kobo.1650.1"> component, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1651.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer220">
<span class="koboSpan" id="kobo.1652.1"><img alt="Figure 7.29 – Empty message page" src="image/B18645_07_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1653.1">Figure 7.29 – Empty message page</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.1654.1">Let’s go back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1655.1">./src/views/MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.1656.1"> and add </span><strong class="source-inline"><span class="koboSpan" id="kobo.1657.1">?content=${m}</span></strong><span class="koboSpan" id="kobo.1658.1"> to the route link of message, in which </span><strong class="source-inline"><span class="koboSpan" id="kobo.1659.1">m</span></strong><span class="koboSpan" id="kobo.1660.1"> is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1661.1">message</span></strong><span class="koboSpan" id="kobo.1662.1"> at index </span><strong class="source-inline"><span class="koboSpan" id="kobo.1663.1">i</span></strong><span class="koboSpan" id="kobo.1664.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1665.1">messages</span></strong><span class="koboSpan" id="kobo.1666.1"> list, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1667.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1668.1">template&gt; </span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1669.1">section:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1670.1">
  &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1671.1">
  &lt;h2&gt; Message Feed &lt;/h2&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1672.1">
  &lt;div v-for="(m, i) in messages" :key="i" &gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1673.1">
    &lt;RouterLink :to="`/message?content=${m}`"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1674.1">
      {{ m }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1675.1">
    &lt;/RouterLink&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1676.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1677.1">
&lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1678.1">
&lt;/template&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1679.1">Now when </span><a id="_idIndexMarker884"/><span class="koboSpan" id="kobo.1680.1">you click on the </span><a id="_idIndexMarker885"/><span class="koboSpan" id="kobo.1681.1">first message, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1682.1">Hello, how are you?</span></strong><span class="koboSpan" id="kobo.1683.1">, the output will be </span><span class="No-Break"><span class="koboSpan" id="kobo.1684.1">the following:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer221">
<span class="koboSpan" id="kobo.1685.1"><img alt="Figure 7.30 – Message page with the passed content" src="image/B18645_07_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1686.1">Figure 7.30 – Message page with the passed content</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.1687.1">Next, let’s extract the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1688.1">messages</span></strong><span class="koboSpan" id="kobo.1689.1"> static data from </span><strong class="source-inline"><span class="koboSpan" id="kobo.1690.1">./src/views/MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.1691.1"> and save it </span><span class="No-Break"><span class="koboSpan" id="kobo.1692.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1693.1">./src/assets/messages.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1694.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1695.1">
const messages = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1696.1">
  'Hello, how are you?',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1697.1">
  'The weather is nice',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1698.1">
  'This is the message feed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1699.1">
  'And I am the fourth message'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1700.1">
];</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1701.1">
export default messages;</span></pre></li>
<li><span class="koboSpan" id="kobo.1702.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.1703.1">./src/views/MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.1704.1">, we will</span><a id="_idTextAnchor309"/><span class="koboSpan" id="kobo.1705.1"> replace the local data property with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1706.1">props</span></strong><span class="koboSpan" id="kobo.1707.1"> which has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1708.1">messages</span></strong><span class="koboSpan" id="kobo.1709.1"> array type, </span><span class="No-Break"><span class="koboSpan" id="kobo.1710.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1711.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1712.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1713.1">
const props = defineProps({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1714.1">
    messages: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1715.1">
        default: [],</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1716.1">
        type: Array</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1717.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1718.1">
})</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1719.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1720.1">Now, we need </span><a id="_idIndexMarker886"/><span class="koboSpan" id="kobo.1721.1">to load the list </span><a id="_idIndexMarker887"/><span class="koboSpan" id="kobo.1722.1">of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1723.1">messages</span></strong><span class="koboSpan" id="kobo.1724.1"> and assign it the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1725.1">props</span></strong><span class="koboSpan" id="kobo.1726.1"> upon navigating to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1727.1">/messages</span></strong><span class="koboSpan" id="kobo.1728.1"> route. </span><span class="koboSpan" id="kobo.1728.2">We will do this by using the Function </span><strong class="source-inline"><span class="koboSpan" id="kobo.1729.1">props</span></strong><span class="koboSpan" id="kobo.1730.1"> of the route definition, and the hook </span><strong class="source-inline"><span class="koboSpan" id="kobo.1731.1">beforeEnter()</span></strong><span class="koboSpan" id="kobo.1732.1"> to normalize the data into related </span><strong class="source-inline"><span class="koboSpan" id="kobo.1733.1">props</span></strong><span class="koboSpan" id="kobo.1734.1"> for rendering. </span><span class="koboSpan" id="kobo.1734.2">You can do that by modifying your </span><strong class="source-inline"><span class="koboSpan" id="kobo.1735.1">messageFeed</span></strong><span class="koboSpan" id="kobo.1736.1"> route defined in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1737.1">src/router/index.js</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1738.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1739.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1740.1">
    path: '/messages',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1741.1">
    name: 'messageFeed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1742.1">
    component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1743.1">
      import('../views/MessageFeed.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1744.1">
    props: route =&gt; ({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1745.1">
    messages: route.query.messages?.length &gt; 0</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1746.1">
            ? </span><span class="koboSpan" id="kobo.1746.2">route.query.messages : []</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1747.1">
    }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1748.1">
    async beforeEnter(to, from, next) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1749.1">
      next()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1750.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1751.1">
  },</span></pre></li>
<li><span class="koboSpan" id="kobo.1752.1">Within </span><strong class="source-inline"><span class="koboSpan" id="kobo.1753.1">beforeEnter</span></strong><span class="koboSpan" id="kobo.1754.1">, we will lazy-load the list of messages </span><span class="No-Break"><span class="koboSpan" id="kobo.1755.1">with </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1756.1">import</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1757.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1758.1">
const module = await import ('../assets/messages.js');</span></pre></li>
<li><span class="koboSpan" id="kobo.1759.1">Then, we</span><a id="_idIndexMarker888"/><span class="koboSpan" id="kobo.1760.1"> can retrieve the needed </span><a id="_idIndexMarker889"/><span class="koboSpan" id="kobo.1761.1">information </span><span class="No-Break"><span class="koboSpan" id="kobo.1762.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1763.1">
  const messages = module.default;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1764.1">
  if (messages &amp;&amp; messages.length &gt; 0) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1765.1">
    to.query.messages = messages;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1766.1">
  }</span></pre></li>
<li><span class="koboSpan" id="kobo.1767.1">The full code for the route in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1768.1">src/router/index.js</span></strong><span class="koboSpan" id="kobo.1769.1"> should be </span><span class="No-Break"><span class="koboSpan" id="kobo.1770.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1771.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1772.1">
    path: '/messages',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1773.1">
    name: 'messageFeed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1774.1">
    component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1775.1">
      import('../views/MessageFeed.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1776.1">
    props: route =&gt; ({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1777.1">
      messages: route.query.messages?.length &gt; 0</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1778.1">
        ? </span><span class="koboSpan" id="kobo.1778.2">route.query.messages : []</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1779.1">
    }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1780.1">
    async beforeEnter(to, from, next) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1781.1">
      if (!to.query || !to.query.messages) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1782.1">
        const module = await import</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1783.1">
          ('../assets/messages.js');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1784.1">
        const messages = module.default;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1785.1">
        if (messages &amp;&amp; messages.length &gt; 0) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1786.1">
          to.query.messages = messages;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1787.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1788.1">
      }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1789.1">
      next()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1790.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1791.1">
  },</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1792.1">When viewing the website, we should see a message feed like in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1793.1">Figure 7</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1794.1">.28</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1795.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1796.1">At this point, we have learned and practiced how to configure routers, pass parameters, and </span><a id="_idIndexMarker890"/><span class="koboSpan" id="kobo.1797.1">intercept </span><a id="_idIndexMarker891"/><span class="koboSpan" id="kobo.1798.1">navigation between pages in the application using different routin</span><a id="_idTextAnchor310"/><a id="_idTextAnchor311"/><span class="koboSpan" id="kobo.1799.1">g Hooks. </span><span class="koboSpan" id="kobo.1799.2">In the </span><a id="_idTextAnchor312"/><span class="koboSpan" id="kobo.1800.1">next section, we are going to look at a more advanced topic – </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1801.1">dynamic routing</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1802.1">.</span></span></p>
<h1 id="_idParaDest-175"><a id="_idTextAnchor313"/><span class="koboSpan" id="kobo.1803.1">Dynamic routing</span></h1>
<p><span class="koboSpan" id="kobo.1804.1">If there is a lot of</span><a id="_idIndexMarker892"/><span class="koboSpan" id="kobo.1805.1"> data that follows the same format, such as a list of users or a list of messages, and it’s required to create a page for each of them, so we need to use a routing pattern. </span><span class="koboSpan" id="kobo.1805.2">With a routing pattern, we can create a new route dynamically from the same component based on some </span><span class="No-Break"><span class="koboSpan" id="kobo.1806.1">additional information.</span></span></p>
<p><span class="koboSpan" id="kobo.1807.1">For example, we want to render the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1808.1">User</span></strong><span class="koboSpan" id="kobo.1809.1"> view component for every user but with different </span><strong class="source-inline"><span class="koboSpan" id="kobo.1810.1">id</span></strong><span class="koboSpan" id="kobo.1811.1"> values. </span><span class="koboSpan" id="kobo.1811.2">Vue Router provides us with the ability to use dynamic segments denoted by a colon (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1812.1">:</span></strong><span class="koboSpan" id="kobo.1813.1">) to achieve </span><span class="No-Break"><span class="koboSpan" id="kobo.1814.1">dynamic routing.</span></span></p>
<p><span class="koboSpan" id="kobo.1815.1">Instead of using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1816.1">params</span></strong><span class="koboSpan" id="kobo.1817.1">, which doesn’t persist its value when you refres</span><a id="_idTextAnchor314"/><span class="koboSpan" id="kobo.1818.1">h the page or appear in the URL, we define the required </span><strong class="source-inline"><span class="koboSpan" id="kobo.1819.1">params</span></strong><span class="koboSpan" id="kobo.1820.1"> directly in the path </span><span class="No-Break"><span class="koboSpan" id="kobo.1821.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1822.1">
{
    path: '/user/:id',
    name: 'user',
    component: () =&gt; import('../views/User.vue'),
    props: true,
  }</span></pre>
<p><span class="koboSpan" id="kobo.1823.1">In the preceding code, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1824.1">:id</span></strong><span class="koboSpan" id="kobo.1825.1"> means </span><strong class="source-inline"><span class="koboSpan" id="kobo.1826.1">params</span></strong><span class="koboSpan" id="kobo.1827.1"> here is not static. </span><span class="koboSpan" id="kobo.1827.2">When the route matches the given pattern, Vue Router will render the corresponding component with the appropriate content while keeping the URL as it sho</span><a id="_idTextAnchor315"/><span class="koboSpan" id="kobo.1828.1">uld be. </span><span class="koboSpan" id="kobo.1828.2">The value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1829.1">:id</span></strong><span class="koboSpan" id="kobo.1830.1"> will be exposed as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1831.1">$route.params.id</span></strong><span class="koboSpan" id="kobo.1832.1"> in that view </span><span class="No-Break"><span class="koboSpan" id="kobo.1833.1">component’s instance:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1834.1">
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;About a user: {{$route.params.id}}&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1835.1">When users select URLs such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1836.1">/user/1</span></strong><span class="koboSpan" id="kobo.1837.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.1838.1">/user/2</span></strong><span class="koboSpan" id="kobo.1839.1"> (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1840.1">./src/App.vue</span></strong><span class="koboSpan" id="kobo.1841.1">), Vue will automatically generate sub-pages using </span><span class="No-Break"><span class="koboSpan" id="kobo.1842.1">our template.</span></span></p>
<p><span class="koboSpan" id="kobo.1843.1">Navigation paths will be mapped to the same route pattern and component but with different information, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1844.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer222">
<span class="koboSpan" id="kobo.1845.1"><img alt="Figure 7.31 – Navigating to /user/2" src="image/B18645_07_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1846.1">Figure 7.31 – Navigating to /user/2</span></p>
<p><span class="koboSpan" id="kobo.1847.1">When you click on </span><strong class="bold"><span class="koboSpan" id="kobo.1848.1">User 1</span></strong><span class="koboSpan" id="kobo.1849.1">, you will see </span><span class="No-Break"><span class="koboSpan" id="kobo.1850.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer223">
<span class="koboSpan" id="kobo.1851.1"><img alt="Figure 7.32 – Navigating to /user/1" src="image/B18645_07_32.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1852.1">Figure 7.32 – Navigating to /user/1</span></p>
<p><span class="koboSpan" id="kobo.1853.1">We can also </span><a id="_idIndexMarker893"/><span class="koboSpan" id="kobo.1854.1">normalize </span><strong class="source-inline"><span class="koboSpan" id="kobo.1855.1">id</span></strong><span class="koboSpan" id="kobo.1856.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1857.1">props</span></strong><span class="koboSpan" id="kobo.1858.1"> of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1859.1">User</span></strong><span class="koboSpan" id="kobo.1860.1"> component with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1861.1">p</span><a id="_idTextAnchor316"/><span class="koboSpan" id="kobo.1862.1">rops: true</span></strong><span class="koboSpan" id="kobo.1863.1"> and load the data of the selected user before the instance is created </span><span class="No-Break"><span class="koboSpan" id="kobo.1864.1">and rendered:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1865.1">
&lt;script setup&gt;
import users from '../assets/users.js';
import { ref } from 'vue'
const name = ref('');
const age = ref(0);
const props = defineProps(['id'])
name.value = users[props.id - 1].name;
age.value = users[pr</span><a id="_idTextAnchor317"/><span class="koboSpan" id="kobo.1866.1">ops.id - 1].age;
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1867.1">Now, we can </span><a id="_idIndexMarker894"/><span class="koboSpan" id="kobo.1868.1">adjust </span><strong class="source-inline"><span class="koboSpan" id="kobo.1869.1">&lt;template&gt;</span></strong><span class="koboSpan" id="kobo.1870.1"> to print out the details of </span><span class="No-Break"><span class="koboSpan" id="kobo.1871.1">the user:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1872.1">
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;About a user: {{id}}&lt;/h1&gt;
    &lt;h2&gt;Name: {{name}}&lt;/h2&gt;
    &lt;p&gt;Age: {{age}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.1873.1">The output when selec</span><a id="_idTextAnchor318"/><span class="koboSpan" id="kobo.1874.1">ting </span><strong class="source-inline"><span class="koboSpan" id="kobo.1875.1">/user/1</span></strong><span class="koboSpan" id="kobo.1876.1"> will now be </span><span class="No-Break"><span class="koboSpan" id="kobo.1877.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer224">
<span class="koboSpan" id="kobo.1878.1"><img alt="Figure 7.33 – Navigating to /user/1 with an updated UI" src="image/B18645_07_33.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1879.1">Figure 7.33 – Navigating to /user/1 with an updated UI</span></p>
<p><span class="koboSpan" id="kobo.1880.1">In this section, we looked at dynamic routing by setting up a route that extracts a parameter from a given URL. </span><span class="koboSpan" id="kobo.1880.2">This technique allows you to create user-friendly URLs and pass</span><a id="_idTextAnchor319"/><span class="koboSpan" id="kobo.1881.1"> information to</span><a id="_idIndexMarker895"/><span class="koboSpan" id="kobo.1882.1"> routes dynamically. </span><span class="koboSpan" id="kobo.1882.2">In the next section, we will look at catching </span><span class="No-Break"><span class="koboSpan" id="kobo.1883.1">error paths.</span></span></p>
<h1 id="_idParaDest-176"><a id="_idTextAnchor320"/><span class="koboSpan" id="kobo.1884.1">Catching error paths</span></h1>
<p><span class="koboSpan" id="kobo.1885.1">Other important </span><a id="_idIndexMarker896"/><span class="koboSpan" id="kobo.1886.1">routes that we always need to remember to handle besides the </span><strong class="bold"><span class="koboSpan" id="kobo.1887.1">Home</span></strong><span class="koboSpan" id="kobo.1888.1"> page (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1889.1">'/'</span></strong><span class="koboSpan" id="kobo.1890.1">) include </span><strong class="source-inline"><span class="koboSpan" id="kobo.1891.1">error</span></strong><span class="koboSpan" id="kobo.1892.1"> routes, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1893.1">404 Not found</span></strong><span class="koboSpan" id="kobo.1894.1"> when the URL path doesn’t match any registered path, </span><span class="No-Break"><span class="koboSpan" id="kobo.1895.1">among others.</span></span></p>
<p><span class="koboSpan" id="kobo.1896.1">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.1897.1">404 Not found</span></strong><span class="koboSpan" id="kobo.1898.1">, we can use the Regex pattern, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1899.1">/:pathMatch(.*)*</span></strong><span class="koboSpan" id="kobo.1900.1">, which stands for </span><em class="italic"><span class="koboSpan" id="kobo.1901.1">matching every other URLs,  </span></em><span class="koboSpan" id="kobo.1902.1">to collect all the cases that don’t match the definted routes. </span><span class="koboSpan" id="kobo.1902.2">The router’s </span><a id="_idTextAnchor321"/><span class="koboSpan" id="kobo.1903.1">configuration should be located at the end of the array routes to avoid matching the </span><span class="No-Break"><span class="koboSpan" id="kobo.1904.1">wrong path:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1905.1">
{
    path: '/:pathMatch(.*)*',
    name: '404',
    component: () =&gt; import('../views/404.vue'),
  }</span></pre>
<p><span class="koboSpan" id="kobo.1906.1">When we type the wrong path for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1907.1">/users</span></strong><span class="koboSpan" id="kobo.1908.1">, the output will be </span><span class="No-Break"><span class="koboSpan" id="kobo.1909.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer225">
<span class="koboSpan" id="kobo.1910.1"><img alt="Figure 7.34 – Redirecting to 404 when the /users path is not found" src="image/B18645_07_34.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1911.1">Figure 7.34 – Redirecting to 404 when the /users path is not found</span></p>
<p><span class="koboSpan" id="kobo.1912.1">In this section, we looked at how to use the Regex pattern to create a catch-all </span><strong class="source-inline"><span class="koboSpan" id="kobo.1913.1">404 </span></strong><span class="koboSpan" id="kobo.1914.1">page displayed to anyone that navigates to a non-existent route. </span><span class="koboSpan" id="kobo.1914.2">Next, we will be implementing</span><a id="_idTextAnchor322"/><span class="koboSpan" id="kobo.1915.1"> a message route that passes relevant data to the URL itself using the dynamic </span><a id="_idIndexMarker897"/><span class="No-Break"><span class="koboSpan" id="kobo.1916.1">routing pattern.</span></span></p>
<h2 id="_idParaDest-177"><a id="_idTextAnchor323"/><span class="koboSpan" id="kobo.1917.1">Exercise 7.04 – implementing a message route for each message with the dynamic routing pattern</span></h2>
<p><span class="koboSpan" id="kobo.1918.1">This e</span><a id="_idIndexMarker898"/><span class="koboSpan" id="kobo.1919.1">xercise will get you </span><a id="_idTextAnchor324"/><span class="koboSpan" id="kobo.1920.1">familiar </span><a id="_idIndexMarker899"/><span class="koboSpan" id="kobo.1921.1">with creating and maintaining dynamic routes in combination with other </span><span class="No-Break"><span class="koboSpan" id="kobo.1922.1">navigation Hooks.</span></span></p>
<p><span class="koboSpan" id="kobo.1923.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.1924.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.04"><span class="No-Break"><span class="koboSpan" id="kobo.1925.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.04</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1926.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1927.1">Let’s go back to our message feed in </span><em class="italic"><span class="koboSpan" id="kobo.1928.1">Exercise 7.03</span></em><span class="koboSpan" id="kobo.1929.1">, we will refactor our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1930.1">Message</span></strong><span class="koboSpan" id="kobo.1931.1"> path to use routing patterns to dynamically navigate to a specific </span><strong class="source-inline"><span class="koboSpan" id="kobo.1932.1">message</span></strong><span class="koboSpan" id="kobo.1933.1"> path upon the user’s selection and perform the </span><span class="No-Break"><span class="koboSpan" id="kobo.1934.1">following steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.1935.1">Let’s open </span><strong class="source-inline"><span class="koboSpan" id="kobo.1936.1">./src/router/index.js</span></strong><span class="koboSpan" id="kobo.1937.1"> and change the path configuration of the mes</span><a id="_idTextAnchor325"/><span class="koboSpan" id="kobo.1938.1">sage route to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1939.1">/message/:id</span></strong><span class="koboSpan" id="kobo.1940.1">, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.1941.1">id</span></strong><span class="koboSpan" id="kobo.1942.1"> will be the index of a given </span><strong class="source-inline"><span class="koboSpan" id="kobo.1943.1">message</span></strong><span class="koboSpan" id="kobo.1944.1"> in the list </span><span class="No-Break"><span class="koboSpan" id="kobo.1945.1">of messages:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1946.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1947.1">
    path: '/message/:id',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1948.1">
    name: 'message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1949.1">
    component: () =&gt; import('../views/Message.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1950.1">
    //…</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1951.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.1952.1">Now, navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1953.1">./</span><a id="_idTextAnchor326"/><span class="koboSpan" id="kobo.1954.1">src/views/MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.1955.1">, and change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1956.1">to</span></strong><span class="koboSpan" id="kobo.1957.1"> prop of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1958.1">RouterLink</span></strong><span class="koboSpan" id="kobo.1959.1"> for each message to </span><span class="No-Break"><span class="koboSpan" id="kobo.1960.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1961.1">
&lt;RouterLink :to="'/message/${i}'"&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.1962.1">Let’s go back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1963.1">./src/router/index.js</span></strong><span class="koboSpan" id="kobo.1964.1">. </span><span class="koboSpan" id="kobo.1964.2">Here, define </span><strong class="source-inline"><span class="koboSpan" id="kobo.1965.1">beforeEnter</span></strong><span class="koboSpan" id="kobo.1966.1"> as an asynchronous Hook for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1967.1">/m</span><a id="_idTextAnchor327"/><span class="koboSpan" id="kobo.1968.1">essage</span></strong><span class="koboSpan" id="kobo.1969.1"> route and lazy-load the content of the message into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1970.1">content</span></strong><span class="koboSpan" id="kobo.1971.1"> field of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1972.1">route’s </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1973.1">query</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1974.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1975.1">
async beforeEnter(to, from, next) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1976.1">
  if (to.params &amp;&amp; to.params.id) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1977.1">
    const id = to.params.id;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1978.1">
    const module = await import</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1979.1">
      ('../assets/messages.js');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1980.1">
    const messages = module.default;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1981.1">
    if (messages &amp;&amp; messages.length &gt; 0 &amp;&amp; id &lt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1982.1">
      messages.length) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1983.1">
      to.query.content = messages[id];</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1984.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1985.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1986.1">
  next()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1987.1">
},</span></pre></li>
<li><span class="koboSpan" id="kobo.1988.1">Then we will define the props field as a function that returns an object containing </span><a id="_idIndexMarker900"/><span class="koboSpan" id="kobo.1989.1">the </span><a id="_idIndexMarker901"/><span class="koboSpan" id="kobo.1990.1">original params.id, and the query.content as id and content </span><span class="No-Break"><span class="koboSpan" id="kobo.1991.1">fields, respectively.</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1992.1">
props: route =&gt; ({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1993.1">
  id: route.params.id,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1994.1">
  content: route.query.content</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1995.1">
}),</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.1996.1">The full routes should look </span><span class="No-Break"><span class="koboSpan" id="kobo.1997.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1998.1">
const routes = [
  //…
  {
    path: '/message/:id',
    name: 'message',
    component: () =&gt; import('../views/Message.vue'),
    props: route =&gt; ({
      id: route.params.id,
      content: route.query.content
    }),
    async beforeEnter(to, from, next) {
      if (to.params &amp;&amp; to.params.id) {
        const id = to.params.id;
        const module = await import ('../assets/messages.js');
        const messages = module.default;
        if (messages &amp;&amp; messages.length &gt; 0 &amp;&amp; id &lt;
          messages.length) {
          to.query.content = messages[id];
        }
      }
      next()
    },
  }
]</span></pre>
<ol>
<li value="5"><span class="koboSpan" id="kobo.1999.1">Run the</span><a id="_idIndexMarker902"/><span class="koboSpan" id="kobo.2000.1"> application</span><a id="_idIndexMarker903"/><span class="koboSpan" id="kobo.2001.1"> using the </span><span class="No-Break"><span class="koboSpan" id="kobo.2002.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2003.1">yarn dev</span></strong></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.2004.1">When clicking on the first message in </span><strong class="bold"><span class="koboSpan" id="kobo.2005.1">Message Feed</span></strong><span class="koboSpan" id="kobo.2006.1">, the next page will be </span><span class="No-Break"><span class="koboSpan" id="kobo.2007.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer226">
<span class="koboSpan" id="kobo.2008.1"><img alt="Figure 7.35 – The page displayed when visiting the /message/0 path" src="image/B18645_07_35.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2009.1">Figure 7.35 – The page displayed when visiting the /message/0 path</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.2010.1">Alternatively, you can also set props: true, and instead of mapping the content to query.content</span><a id="_idIndexMarker904"/><span class="koboSpan" id="kobo.2011.1"> in </span><a id="_idIndexMarker905"/><span class="koboSpan" id="kobo.2012.1">beforeEnter hook, you can also map it to the route.params directly, as </span><span class="No-Break"><span class="koboSpan" id="kobo.2013.1">seen below:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2014.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2015.1">
  path: '/message/:id',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2016.1">
    name: 'message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2017.1">
    component: () =&gt; import('../views/Message.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2018.1">
    props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2019.1">
    async beforeEnter(to, from, next) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2020.1">
      if (to.params &amp;&amp; to.params.id) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2021.1">
        const id = to.params.id;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2022.1">
        const module = await import</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2023.1">
          ('../assets/messages.js');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2024.1">
        const messages = module.default;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2025.1">
        if (messages &amp;&amp; messages.length &gt; 0 &amp;&amp; id &lt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2026.1">
          messages.length) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2027.1">
          to.params.content = messages[id];</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2028.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2029.1">
      }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2030.1">
      next()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2031.1">
    },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2032.1">
}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.2033.1">The output should stay </span><span class="No-Break"><span class="koboSpan" id="kobo.2034.1">the same.</span></span></p>
<p><span class="koboSpan" id="kobo.2035.1">Now that you have learned how to use dynamic routing, you can play around even further with </span><a id="_idIndexMarker906"/><span class="koboSpan" id="kobo.2036.1">more layers of </span><a id="_idIndexMarker907"/><span class="koboSpan" id="kobo.2037.1">routing patterns,</span><a id="_idTextAnchor328"/><a id="_idTextAnchor329"/><span class="koboSpan" id="kobo.2038.1"> such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2039.1">message/:id/author/:aid</span></strong><span class="koboSpan" id="kobo.2040.1">. </span><span class="koboSpan" id="kobo.2040.2">For these scenarios, we normally use a better approach – </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2041.1">nested routes</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2042.1">.</span></span></p>
<h1 id="_idParaDest-178"><a id="_idTextAnchor330"/><span class="koboSpan" id="kobo.2043.1">Nested routes</span></h1>
<p><span class="koboSpan" id="kobo.2044.1">Many applications </span><a id="_idIndexMarker908"/><span class="koboSpan" id="kobo.2045.1">are composed of components that consist of several multiple-level nested components. </span><span class="koboSpan" id="kobo.2045.2">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2046.1">/user/settings/general</span></strong><span class="koboSpan" id="kobo.2047.1"> indicates that a general view is nested in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2048.1">settings</span></strong><span class="koboSpan" id="kobo.2049.1"> view and this </span><strong class="source-inline"><span class="koboSpan" id="kobo.2050.1">settings</span></strong><span class="koboSpan" id="kobo.2051.1"> view is nested within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2052.1">user</span></strong><span class="koboSpan" id="kobo.2053.1"> view. </span><span class="koboSpan" id="kobo.2053.2">It represents the </span><strong class="bold"><span class="koboSpan" id="kobo.2054.1">General information</span></strong><span class="koboSpan" id="kobo.2055.1"> section of a user’s </span><span class="No-Break"><span class="koboSpan" id="kobo.2056.1">settings page.</span></span></p>
<p><span class="koboSpan" id="kobo.2057.1">Most of the time, we want the URL to correspond to such a structure, as demonstrated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2058.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer227">
<span class="koboSpan" id="kobo.2059.1"><img alt="Figure 7.36 – User with two nested views – Info and Extra" src="image/B18645_07_36.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2060.1">Figure 7.36 – User with two nested views – Info and Extra</span></p>
<p><span class="koboSpan" id="kobo.2061.1">Vue Router makes it easy to achieve this structure using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2062.1">nested</span></strong><span class="koboSpan" id="kobo.2063.1"> route configurations and the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2064.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2065.1"> component.</span></span></p>
<p><span class="koboSpan" id="kobo.2066.1">Let’s go back to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2067.1">User.vue</span></strong><span class="koboSpan" id="kobo.2068.1"> view in our pr</span><a id="_idTextAnchor331"/><span class="koboSpan" id="kobo.2069.1">evious example (located in </span><strong class="source-inline"><span class="koboSpan" id="kobo.2070.1">./src/views/</span></strong><span class="koboSpan" id="kobo.2071.1">) and </span><a id="_idIndexMarker909"/><span class="koboSpan" id="kobo.2072.1">add a nested </span><strong class="source-inline"><span class="koboSpan" id="kobo.2073.1">RouterView</span></strong><span class="koboSpan" id="kobo.2074.1"> component in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2075.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2076.1">template&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2077.1"> section:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2078.1">
&lt;div&gt;
  &lt;h1&gt;About a user: {{$route.params.id}}&lt;/h1&gt;
  &lt;RouterLink :to="`/user/${$route.params.id}/info`"&gt;
    Info
  &lt;/RouterLink&gt; |
  &lt;RouterLink :to="`/user/${$route.params.id}/extra`"&gt;
    Extra
  &lt;/RouterLink&gt;
  &lt;RouterView /&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2079.1">To start rendering components to this </span><strong class="source-inline"><span class="koboSpan" id="kobo.2080.1">RouterView</span></strong><span class="koboSpan" id="kobo.2081.1">, we will configure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2082.1">user</span></strong><span class="koboSpan" id="kobo.2083.1"> route to have the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2084.1">children</span></strong><span class="koboSpan" id="kobo.2085.1"> option, which accepts an array of route configurations for the child routes. </span><span class="koboSpan" id="kobo.2085.2">For our example, we’ll be adding an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2086.1">info</span></strong><span class="koboSpan" id="kobo.2087.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2088.1">extra</span></strong><span class="koboSpan" id="kobo.2089.1"> page for </span><span class="No-Break"><span class="koboSpan" id="kobo.2090.1">each user.</span></span></p>
<p><span class="koboSpan" id="kobo.2091.1">These child routes will be accessed as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2092.1">/user/:id/info</span></strong><span class="koboSpan" id="kobo.2093.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2094.1">/user/:id/extra</span></strong><span class="koboSpan" id="kobo.2095.1"> giving each user a unique </span><strong class="source-inline"><span class="koboSpan" id="kobo.2096.1">info</span></strong><span class="koboSpan" id="kobo.2097.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2098.1">extra</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2099.1"> page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2100.1">
{
    path: '/user/:id',
    name: 'user',
    component: () =&gt; import('../views/User.vue'),
    props: true,
    children: [{
      path: 'info',
      name: 'userinfo',
      component: () =&gt; import('../views/UserInfo.vue'),
      props: true,
    }, {
      path: 'extra',
      component: () =&gt; import('../views/UserExtra.vue')
    }]
  }</span></pre>
<p><span class="koboSpan" id="kobo.2101.1">Certainly, we must</span><a id="_idIndexMarker910"/><span class="koboSpan" id="kobo.2102.1"> create two new views. </span><span class="koboSpan" id="kobo.2102.2">Th</span><a id="_idTextAnchor332"/><span class="koboSpan" id="kobo.2103.1">e first one is </span><strong class="source-inline"><span class="koboSpan" id="kobo.2104.1">UserInfo</span></strong><span class="koboSpan" id="kobo.2105.1">, which will render all the information about a user based on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2106.1">id</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2107.1">value received:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2108.1">
&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;Name: {{name}}&lt;/h2&gt;
    &lt;p&gt;Age: {{age}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import users from '../assets/users.js';
import { ref } from 'vue';
import { onBeforeRouteUpdate } from 'vue-router';
const props = defineProps(['id'])
const name = ref('')
const age = ref(0)
const user = users[props.id - 1];
name.value = user.name;
age.value = user.age;
onBeforeRouteUpdate((to, from, next) =&gt; {
  const user = users[props.id - 1];
  name.value = user.name;
  age.value = user.age;
  next();
})
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2109.1">We also </span><a id="_idIndexMarker911"/><span class="koboSpan" id="kobo.2110.1">create </span><strong class="source-inline"><span class="koboSpan" id="kobo.2111.1">UserExtra.vue</span></strong><span class="koboSpan" id="kobo.2112.1">, </span><a id="_idTextAnchor333"/><span class="koboSpan" id="kobo.2113.1">which will render any extra information (if there is any). </span><span class="koboSpan" id="kobo.2113.2">In this example, it will only render </span><span class="No-Break"><span class="koboSpan" id="kobo.2114.1">simple text:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2115.1">
&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;I'm an extra section&lt;/h2&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2116.1">The nested views are ready! </span><span class="koboSpan" id="kobo.2116.2">Whenever the user clicks on the </span><strong class="bold"><span class="koboSpan" id="kobo.2117.1">Info</span></strong><span class="koboSpan" id="kobo.2118.1"> link, it will load the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2119.1">UserInfo</span></strong><span class="koboSpan" id="kobo.2120.1"> view and update the URL </span><span class="No-Break"><span class="koboSpan" id="kobo.2121.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer228">
<span class="koboSpan" id="kobo.2122.1"><img alt="Figure 7.37 – The User page with the nested UserInfo view" src="image/B18645_07_37.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2123.1">Figure 7.37 – The User page with the nested UserInfo view</span></p>
<p><span class="koboSpan" id="kobo.2124.1">When the user</span><a id="_idIndexMarker912"/><span class="koboSpan" id="kobo.2125.1"> clicks on </span><strong class="bold"><span class="koboSpan" id="kobo.2126.1">Extra</span></strong><span class="koboSpan" id="kobo.2127.1">, they will see the same, as is shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2128.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer229">
<span class="koboSpan" id="kobo.2129.1"><img alt="Figure 7.38 – The User page with the nested UserExtra view" src="image/B18645_07_38.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2130.1">Figure 7.38 – The User page with the nested UserExtra view</span></p>
<p><span class="koboSpan" id="kobo.2131.1">In this section, we looked at nested routes – routes that have multiple children. </span><span class="koboSpan" id="kobo.2131.2">In our example, the child routes were </span><strong class="source-inline"><span class="koboSpan" id="kobo.2132.1">/user/:id/info</span></strong><span class="koboSpan" id="kobo.2133.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2134.1">/user/:id/extra</span></strong><span class="koboSpan" id="kobo.2135.1">. </span><span class="koboSpan" id="kobo.2135.2">This pattern allows us to create pages that extend their </span><span class="No-Break"><span class="koboSpan" id="kobo.2136.1">parent pages.</span></span></p>
<p><span class="koboSpan" id="kobo.2137.1">In the preceding example, we can now make edits to the </span><strong class="bold"><span class="koboSpan" id="kobo.2138.1">About a user</span></strong><span class="koboSpan" id="kobo.2139.1"> header and apply them to all child routes. </span><span class="koboSpan" id="kobo.2139.2">As projects grow, making use of this pattern will allow you to avoid</span><a id="_idIndexMarker913"/><span class="koboSpan" id="kobo.2140.1"> duplicating code across </span><span class="No-Break"><span class="koboSpan" id="kobo.2141.1">multiple views.</span></span></p>
<p><span class="koboSpan" id="kobo.2142.1">In the </span><a id="_idTextAnchor334"/><span class="koboSpan" id="kobo.2143.1">next section, we will use what we’ve learned so far to create navigation tabs for our message </span><span class="No-Break"><span class="koboSpan" id="kobo.2144.1">view component.</span></span></p>
<h2 id="_idParaDest-179"><a id="_idTextAnchor335"/><span class="koboSpan" id="kobo.2145.1">Exercise 7.05 – building navigation tabs within the message view</span></h2>
<p><span class="koboSpan" id="kobo.2146.1">We will</span><a id="_idIndexMarker914"/><span class="koboSpan" id="kobo.2147.1"> adapt the knowledge learned in </span><a id="_idIndexMarker915"/><span class="koboSpan" id="kobo.2148.1">the </span><em class="italic"><span class="koboSpan" id="kobo.2149.1">Nested routes</span></em><span class="koboSpan" id="kobo.2150.1"> section to build a </span><strong class="bold"><span class="koboSpan" id="kobo.2151.1">Navigation</span></strong><span class="koboSpan" id="kobo.2152.1"> tab section within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2153.1">Message</span></strong><span class="koboSpan" id="kobo.2154.1"> view from </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.2155.1">Exercise 7.04</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.2156.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2157.1">To access the code file for this exercise, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.2158.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.05"><span class="No-Break"><span class="koboSpan" id="kobo.2159.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Exercise7.05</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.2160.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2161.1">Perform the </span><span class="No-Break"><span class="koboSpan" id="kobo.2162.1">following steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.2163.1">Firstly, let’s make s</span><a id="_idTextAnchor336"/><span class="koboSpan" id="kobo.2164.1">ome changes to our </span><strong class="source-inline"><span class="koboSpan" id="kobo.2165.1">messages</span></strong><span class="koboSpan" id="kobo.2166.1"> database in </span><strong class="source-inline"><span class="koboSpan" id="kobo.2167.1">src/assets/messages.js</span></strong><span class="koboSpan" id="kobo.2168.1"> by adding the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.2169.1">author</span></strong><span class="koboSpan" id="kobo.2170.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2171.1">sent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2172.1"> fields:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2173.1">
const messages = [</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2174.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2175.1">
    content: 'Hello, how are you?',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2176.1">
    author: 'John',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2177.1">
    sent: '12 May 2019'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2178.1">
  }, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2179.1">
    content: 'The weather is nice',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2180.1">
    author: 'Lily',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2181.1">
    sent: '12 Jun 2019'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2182.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2183.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2184.1">
    content: 'This is message feed',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2185.1">
    author: 'Smith',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2186.1">
    sent: '10 Jan 2020'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2187.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2188.1">
  {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2189.1">
    content: 'And I am the fourth message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2190.1">
    author: 'Chuck',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2191.1">
    sent: '1 Apr 2021'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2192.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2193.1">
];</span></pre></li>
<li><span class="koboSpan" id="kobo.2194.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.2195.1">MessageFeed.vue</span></strong><span class="koboSpan" id="kobo.2196.1">, we update the field to render as </span><strong class="source-inline"><span class="koboSpan" id="kobo.2197.1">message.content</span></strong><span class="koboSpan" id="kobo.2198.1">, and not </span><strong class="source-inline"><span class="koboSpan" id="kobo.2199.1">message</span></strong><span class="koboSpan" id="kobo.2200.1"> si</span><a id="_idTextAnchor337"/><span class="koboSpan" id="kobo.2201.1">nce </span><strong class="source-inline"><span class="koboSpan" id="kobo.2202.1">m</span><a id="_idTextAnchor338"/><span class="koboSpan" id="kobo.2203.1">essage</span></strong><span class="koboSpan" id="kobo.2204.1"> is no longer </span><span class="No-Break"><span class="koboSpan" id="kobo.2205.1">a string:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2206.1">
&lt;RouterLink :to="`/message/${i}`"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2207.1">
  {{ m.content }}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2208.1">
&lt;/RouterLink&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2209.1">Next, we </span><a id="_idIndexMarker916"/><span class="koboSpan" id="kobo.2210.1">will </span><a id="_idIndexMarker917"/><span class="koboSpan" id="kobo.2211.1">create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2212.1">MessageAuthor.vue</span></strong><span class="koboSpan" id="kobo.2213.1"> view that only renders the name of the creator of </span><span class="No-Break"><span class="koboSpan" id="kobo.2214.1">the message:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2215.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2216.1">
  &lt;h3&gt;Author:&lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2217.1">
  &lt;p&gt;{{message.author}}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2218.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2219.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2220.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2221.1">
const { message } = defineProps({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2222.1">
  id: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2223.1">
    default: '',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2224.1">
    type: String</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2225.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2226.1">
  message: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2227.1">
    default: () =&gt; ({ author: '' }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2228.1">
    type: Object</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2229.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2230.1">
})</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2231.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2232.1">Then, we </span><a id="_idIndexMarker918"/><span class="koboSpan" id="kobo.2233.1">will </span><a id="_idIndexMarker919"/><span class="koboSpan" id="kobo.2234.1">create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2235.1">MessageInfo.vue</span></strong><span class="koboSpan" id="kobo.2236.1"> view that renders the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2237.1">message.sent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2238.1"> value:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2239.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2240.1">
  &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2241.1">
    &lt;h3&gt;Message info: &lt;/h3&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2242.1">
    &lt;p&gt;{{message.sent}}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2243.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2244.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2245.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2246.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2247.1">
const { message } = defineProps({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2248.1">
  id: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2249.1">
    default: '',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2250.1">
    type: String</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2251.1">
  },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2252.1">
  message: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2253.1">
    default: () =&gt; ({ sent: '' }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2254.1">
    type: Object</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2255.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2256.1">
})</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2257.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2258.1">Once we are </span><a id="_idIndexMarker920"/><span class="koboSpan" id="kobo.2259.1">done with the components, we </span><a id="_idIndexMarker921"/><span class="koboSpan" id="kobo.2260.1">need to register the new nested route under the children of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2261.1">message</span></strong><span class="koboSpan" id="kobo.2262.1"> route inside our router </span><span class="No-Break"><span class="koboSpan" id="kobo.2263.1">at </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2264.1">src/router/index</span><a id="_idTextAnchor339"/><span class="koboSpan" id="kobo.2265.1">.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2266.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2267.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2268.1">
    path: '/message/:id',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2269.1">
    name: 'message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2270.1">
  </span><a id="_idTextAnchor340"/><span class="koboSpan" id="kobo.2271.1">  component: () =&gt; import('../views/Message.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2272.1">
    async beforeEnter(to, from, next) { ... </span><span class="koboSpan" id="kobo.2272.2">},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2273.1">
    props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2274.1">
    children: [{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2275.1">
      path: 'author',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2276.1">
      name: 'messageAuthor',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2277.1">
      props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2278.1">
      component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2279.1">
        import('../views/MessageAuthor.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2280.1">
    }, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2281.1">
      path: 'info',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2282.1">
      props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2283.1">
      name: 'messageInfo',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2284.1">
      component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2285.1">
        import('../views/MessageInfo.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2286.1">
    }]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2287.1">
  }</span></pre></li>
<li><span class="koboSpan" id="kobo.2288.1">We need to move the logic of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2289.1">beforeEnter</span></strong><span class="koboSpan" id="kobo.2290.1"> for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2291.1">message</span></strong><span class="koboSpan" id="kobo.2292.1"> route to a separate function – </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2293.1">beforeEnterMessage</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2294.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2295.1">
async function beforeEnterMessage(to, from, next) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2296.1">
  const id = to.params.id;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2297.1">
  const module = await import</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2298.1">
    ('../assets/messages.js');</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2299.1">
  const messages = module.default;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2300.1">
  if (messages &amp;&amp; messages.length &gt; 0 &amp;&amp; id &lt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2301.1">
    messages.length) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2302.1">
    to.params.message = messages[id];</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2303.1">
  }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2304.1">
  next()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2305.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.2306.1">Then, bind</span><a id="_idIndexMarker922"/><span class="koboSpan" id="kobo.2307.1"> it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2308.1">message</span></strong><span class="koboSpan" id="kobo.2309.1"> route’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.2310.1">beforeEnter</span></strong><span class="koboSpan" id="kobo.2311.1">, and </span><a id="_idIndexMarker923"/><span class="koboSpan" id="kobo.2312.1">also to each of its child route’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.2313.1">beforeEnter</span></strong><span class="koboSpan" id="kobo.2314.1"> Hook, as shown in the followi</span><a id="_idTextAnchor341"/><span class="koboSpan" id="kobo.2315.1">ng </span><span class="No-Break"><span class="koboSpan" id="kobo.2316.1">code block:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2317.1">
{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2318.1">
    path: '/message/:id',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2319.1">
    name: 'message',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2320.1">
    component: () =&gt; import('../views/Message.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2321.1">
    beforeEnter: beforeEnterMessage,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2322.1">
    props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2323.1">
    children: [{</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2324.1">
      path: 'author',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2325.1">
      name: 'messageAuthor',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2326.1">
      props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2327.1">
      component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2328.1">
        import('../views/MessageAuthor.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2329.1">
        beforeEnter: beforeEnterMessage,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2330.1">
    }, {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2331.1">
      path: 'info',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2332.1">
      props: true,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2333.1">
      name: 'messageInfo',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2334.1">
      component: () =&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2335.1">
        import('../views/MessageInfo.vue'),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2336.1">
        beforeEnter: beforeEnterMessage,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2337.1">
    }]</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2338.1">
  }</span></pre></li>
<li><span class="koboSpan" id="kobo.2339.1">Finally, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.2340.1">Message.vue</span></strong><span class="koboSpan" id="kobo.2341.1">, we </span><a id="_idIndexMarker924"/><span class="koboSpan" id="kobo.2342.1">will</span><a id="_idIndexMarker925"/><span class="koboSpan" id="kobo.2343.1"> refactor the code to </span><span class="No-Break"><span class="koboSpan" id="kobo.2344.1">the following:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.2345.1">
&lt;template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2346.1">
  &lt;div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2347.1">
    &lt;p&gt;Message content: {{message.content}}&lt;/p&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2348.1">
    &lt;RouterLink :to="{ name: 'messageAuthor'}"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2349.1">
Author</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2350.1">
&lt;/RouterLink&gt; |</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2351.1">
    &lt;RouterLink :to="{ name: 'messageInfo'}"&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2352.1">
      Info</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2353.1">
    &lt;/RouterLink&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2354.1">
    &lt;RouterView/&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2355.1">
  &lt;/div&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2356.1">
&lt;/template&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2357.1">
&lt;script setup&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2358.1">
import { defineProps } from 'vue'</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2359.1">
const { message } = defineProps({</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2360.1">
    message: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2361.1">
        default: () =&gt; ({ content: '' }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2362.1">
        type: Object</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2363.1">
    },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2364.1">
    id: {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2365.1">
        default: '',</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2366.1">
        type: String</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2367.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2368.1">
})</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.2369.1">
&lt;/script&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.2370.1">Run </span><a id="_idIndexMarker926"/><span class="koboSpan" id="kobo.2371.1">the </span><a id="_idIndexMarker927"/><span class="koboSpan" id="kobo.2372.1">application using the </span><span class="No-Break"><span class="koboSpan" id="kobo.2373.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.2374.1">yarn dev</span></strong></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.2375.1">You will see the following when you select the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.2376.1">Author</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2377.1"> option:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer230">
<span class="koboSpan" id="kobo.2378.1"><img alt="Figure 7.39 – Message page with Author selected" src="image/B18645_07_39.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2379.1">Figure 7.39 – Message page with Author selected</span></p>
<p><span class="koboSpan" id="kobo.2380.1">When we navigate to the </span><strong class="bold"><span class="koboSpan" id="kobo.2381.1">Info</span></strong><span class="koboSpan" id="kobo.2382.1"> tab, the </span><span class="No-Break"><span class="koboSpan" id="kobo.2383.1">output becomes:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer231">
<span class="koboSpan" id="kobo.2384.1"><img alt="Figure 7.40 – The Message page with Info selected" src="image/B18645_07_40.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2385.1">Figure 7.40 – The Message page with Info selected</span></p>
<p><span class="koboSpan" id="kobo.2386.1">With this exercise, we have covered almost all the basic functionalities of Vue Router, especially in </span><a id="_idIndexMarker928"/><span class="koboSpan" id="kobo.2387.1">terms of handling dynamic and </span><a id="_idIndexMarker929"/><span class="koboSpan" id="kobo.2388.1">nested rou</span><a id="_idTextAnchor342"/><a id="_idTextAnchor343"/><span class="koboSpan" id="kobo.2389.1">ting. </span><span class="koboSpan" id="kobo.2389.2">In the f</span><a id="_idTextAnchor344"/><span class="koboSpan" id="kobo.2390.1">inal section, we will go through how to create a reusable layout for the view by templating </span><span class="No-Break"><span class="koboSpan" id="kobo.2391.1">our application.</span></span></p>
<h1 id="_idParaDest-180"><a id="_idTextAnchor345"/><span class="koboSpan" id="kobo.2392.1">Using layouts</span></h1>
<p><span class="koboSpan" id="kobo.2393.1">There are many </span><a id="_idIndexMarker930"/><span class="koboSpan" id="kobo.2394.1">ways to implement layouts in a Vue application. </span><span class="koboSpan" id="kobo.2394.2">One of them is using a slot and creating a static wrapper </span><strong class="source-inline"><span class="koboSpan" id="kobo.2395.1">layout</span></strong><span class="koboSpan" id="kobo.2396.1"> component on top of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2397.1">RouterView</span></strong><span class="koboSpan" id="kobo.2398.1">. </span><span class="koboSpan" id="kobo.2398.2">Despite its flexibility, this approach results in a heavy performance cost, both in terms of the unnecessary recreation of the component and in the extra data fetching required for every </span><span class="No-Break"><span class="koboSpan" id="kobo.2399.1">route change.</span></span></p>
<p><span class="koboSpan" id="kobo.2400.1">In this section, we will discuss a better approach, which is to take advantage of the power of the dynamic component. </span><span class="koboSpan" id="kobo.2400.2">The components are </span><span class="No-Break"><span class="koboSpan" id="kobo.2401.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2402.1">
&lt;component :is="layout"/&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2403.1">Let’s create an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2404.1">src/layouts</span></strong><span class="koboSpan" id="kobo.2405.1"> folder with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2406.1">default</span></strong><span class="koboSpan" id="kobo.2407.1"> layout component. </span><span class="koboSpan" id="kobo.2407.2">This component has a</span><a id="_idTextAnchor346"/><span class="koboSpan" id="kobo.2408.1"> simple header navigation, a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2409.1">main</span></strong><span class="koboSpan" id="kobo.2410.1"> slot to render the actual content (which is </span><a id="_idIndexMarker931"/><span class="koboSpan" id="kobo.2411.1">whatever </span><strong class="source-inline"><span class="koboSpan" id="kobo.2412.1">&lt;RouterView&gt;</span></strong><span class="koboSpan" id="kobo.2413.1"> renders), and </span><span class="No-Break"><span class="koboSpan" id="kobo.2414.1">a footer:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2415.1">
&lt;template&gt;
  &lt;div class="default"&gt;
    &lt;nav&gt;
      &lt;RouterLink to="/"&gt;Home&lt;/RouterLink&gt; |
      &lt;RouterLink to="/about"&gt;About&lt;/RouterLink&gt;
    &lt;/nav&gt;
    &lt;main class="main"&gt;
      &lt;slot/&gt;
    &lt;/main&gt;
    &lt;footer&gt;
      &lt;div&gt;Vue Workshop Chapter 07&lt;/div&gt;
    &lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2416.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2417.1">App.vue</span></strong><span class="koboSpan" id="kobo.2418.1"> file, we will change the default view generated by Vite to only </span><strong class="source-inline"><span class="koboSpan" id="kobo.2419.1">&lt;RouterView&gt;</span></strong><span class="koboSpan" id="kobo.2420.1"> and a wrapper arou</span><a id="_idTextAnchor347"/><span class="koboSpan" id="kobo.2421.1">nd it. </span><span class="koboSpan" id="kobo.2421.2">This wrapper is a dynamic component that will render whatever in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2422.1">layout</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2423.1"> variable:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2424.1">
&lt;template&gt;
  &lt;componen</span><a id="_idTextAnchor348"/><span class="koboSpan" id="kobo.2425.1">t :is="layout"&gt;
    &lt;RouterView/&gt;
  &lt;/component&gt;
&lt;/template&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2426.1">We will also initialize </span><strong class="source-inline"><span class="koboSpan" id="kobo.2427.1">layout</span></strong><span class="koboSpan" id="kobo.2428.1"> to be the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2429.1">default.vue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2430.1"> component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2431.1">
&lt;script setup&gt;
import Default from './layouts/default.vue'
const layout = Default
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2432.1">Now, to render the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2433.1">layout</span></strong><span class="koboSpan" id="kobo.2434.1"> component in response to corresponding route changes, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2435.1">RouterView</span></strong><span class="koboSpan" id="kobo.2436.1"> should control which layout to render. </span><span class="koboSpan" id="kobo.2436.2">In other words, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2437.1">layout</span></strong><span class="koboSpan" id="kobo.2438.1"> should be updatable and decided by the view component rendered </span><span class="No-Break"><span class="koboSpan" id="kobo.2439.1">inside </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2440.1">RouterView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2441.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.2442.1">To achieve</span><a id="_idIndexMarker932"/><span class="koboSpan" id="kobo.2443.1"> this, we will pass </span><strong class="source-inline"><span class="koboSpan" id="kobo.2444.1">layout</span></strong><span class="koboSpan" id="kobo.2445.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2446.1">currentLayout</span></strong><span class="koboSpan" id="kobo.2447.1"> prop and update </span><strong class="source-inline"><span class="koboSpan" id="kobo.2448.1">layout</span></strong><span class="koboSpan" id="kobo.2449.1"> with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2450.1">@update</span></strong><span class="koboSpan" id="kobo.2451.1"> event </span><span class="No-Break"><span class="koboSpan" id="kobo.2452.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2453.1">&lt;RouterView&gt;</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2454.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2455.1">
  &lt;component :is="layout"&gt;
    &lt;RouterView
      :currentLayout="layout"
      @update:currentLayout="newLayout =&gt; layout = newLayout"
    /&gt;
  &lt;/component&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2456.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2457.1">&lt;script setup&gt;</span></strong><span class="koboSpan" id="kobo.2458.1"> section, we change </span><strong class="source-inline"><span class="koboSpan" id="kobo.2459.1">layout</span></strong><span class="koboSpan" id="kobo.2460.1"> into a reactive variable using </span><strong class="source-inline"><span class="koboSpan" id="kobo.2461.1">shallowRef</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2462.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2463.1">
import Default from './layouts/default.vue'
import { shallowRef } from 'vue'
const layout = shallowRef(Default)</span></pre>
<p><span class="koboSpan" id="kobo.2464.1">Upon creating an instance of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2465.1">HomeView.vue</span></strong><span class="koboSpan" id="kobo.2466.1"> component, we will emit an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2467.1">update:currentLayout</span></strong><span class="koboSpan" id="kobo.2468.1"> event to update and render the desired </span><span class="No-Break"><span class="koboSpan" id="kobo.2469.1">layout accordingly:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.2470.1">
&lt;script setup&gt;
import TheWelcome from '@/components/TheWelcome.vue'
import DefaultLayout from '../layouts/default.vue';
const props = defineProps(['currentLayout']);
const emits = defineEmits(["update:currentLayout"]);
emits('update:currentLayout', DefaultLayout);
&lt;/script&gt;</span></pre>
<p><span class="koboSpan" id="kobo.2471.1">The output </span><a id="_idIndexMarker933"/><span class="koboSpan" id="kobo.2472.1">will be </span><span class="No-Break"><span class="koboSpan" id="kobo.2473.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer232">
<span class="koboSpan" id="kobo.2474.1"><img alt="Figure 7.41 – The Home page rendered with a layout" src="image/B18645_07_41.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2475.1">Figure 7.41 – The Home page rendered with a layout</span></p>
<p><span class="koboSpan" id="kobo.2476.1">Since the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2477.1">layout</span></strong><span class="koboSpan" id="kobo.2478.1"> component is not part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2479.1">RouterView</span></strong><span class="koboSpan" id="kobo.2480.1"> component, it will only re-r</span><a id="_idTextAnchor349"/><span class="koboSpan" id="kobo.2481.1">ender whenever the layout changes from within the view. </span><span class="koboSpan" id="kobo.2481.2">This will maintain the performance of the app during </span><span class="No-Break"><span class="koboSpan" id="kobo.2482.1">user navigation.</span></span></p>
<p><span class="koboSpan" id="kobo.2483.1">In this section, we looked at how a dynamic component can be used to provide different layouts for different routes. </span><span class="koboSpan" id="kobo.2483.2">This gives us the ability to have different common layouts – for example, one global menu for user-facing pages and another for admin pages, rendered based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.2484.1">routes used.</span></span></p>
<p><span class="koboSpan" id="kobo.2485.1">In the next section, we’ll build on what we learned here by creating a message application </span><a id="_idIndexMarker934"/><span class="koboSpan" id="kobo.2486.1">with dynamic nested routing </span><span class="No-Break"><span class="koboSpan" id="kobo.2487.1">and layouts.</span></span></p>
<h2 id="_idParaDest-181"><a id="_idTextAnchor350"/><span class="koboSpan" id="kobo.2488.1">Activity 7.01 – creating a message SPA with dynamic, nested routing, and layouts</span></h2>
<p><span class="koboSpan" id="kobo.2489.1">To access the code file for this activity, refer </span><span class="No-Break"><span class="koboSpan" id="kobo.2490.1">to </span></span><a href="https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Activity7.01"><span class="No-Break"><span class="koboSpan" id="kobo.2491.1">https://github.com/PacktPublishing/Frontend-Development-Projects-with-Vue.js-3/tree/v2-edition/Chapter07/Activity7.01</span></span></a></p>
<p><span class="koboSpan" id="kobo.2492.1">This</span><a id="_idIndexMarker935"/><span class="koboSpan" id="kobo.2493.1"> activity</span><a id="_idIndexMarker936"/><span class="koboSpan" id="kobo.2494.1"> aims</span><a id="_idIndexMarker937"/><span class="koboSpan" id="kobo.2495.1"> to</span><a id="_idIndexMarker938"/><span class="koboSpan" id="kobo.2496.1"> leverage </span><a id="_idIndexMarker939"/><span class="koboSpan" id="kobo.2497.1">your </span><a id="_idIndexMarker940"/><span class="koboSpan" id="kobo.2498.1">knowledge about Vue Router regarding registering routes and handling dynamic routes, nested routes, and route Hooks to create a </span><strong class="bold"><span class="koboSpan" id="kobo.2499.1">Message SPA</span></strong><span class="koboSpan" id="kobo.2500.1">. </span><span class="koboSpan" id="kobo.2500.2">This application will allow users to compose new messages, view a message feed, and navigate between messages to see </span><span class="No-Break"><span class="koboSpan" id="kobo.2501.1">their details:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.2502.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2503.1">MessageEditor</span></strong><span class="koboSpan" id="kobo.2504.1"> view (at </span><strong class="source-inline"><span class="koboSpan" id="kobo.2505.1">src/views/MessageEditor.vue</span></strong><span class="koboSpan" id="kobo.2506.1">), which will render a view with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2507.1">textarea</span></strong><span class="koboSpan" id="kobo.2508.1"> to the user, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2509.1">submit</span></strong><span class="koboSpan" id="kobo.2510.1"> button to save </span><span class="No-Break"><span class="koboSpan" id="kobo.2511.1">the message.</span></span></li>
<li><span class="koboSpan" id="kobo.2512.1">Register the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2513.1">editor</span></strong><span class="koboSpan" id="kobo.2514.1"> route with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2515.1">MessageEditor</span></strong><span class="koboSpan" id="kobo.2516.1"> as its view </span><span class="No-Break"><span class="koboSpan" id="kobo.2517.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2518.1">src/router/index.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2519.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2520.1">Create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2521.1">MessageList</span></strong><span class="koboSpan" id="kobo.2522.1"> view (at </span><strong class="source-inline"><span class="koboSpan" id="kobo.2523.1">src/views/MessageList.vue</span></strong><span class="koboSpan" id="kobo.2524.1">) that will render a list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2525.1">message id</span></strong><span class="koboSpan" id="kobo.2526.1"> values wrapped by an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2527.1">a</span></strong><span class="koboSpan" id="kobo.2528.1"> tag, which will direct to the single message page with the given </span><strong class="source-inline"><span class="koboSpan" id="kobo.2529.1">id</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2530.1">upon selection.</span></span></li>
<li><span class="koboSpan" id="kobo.2531.1">Register the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2532.1">list</span></strong><span class="koboSpan" id="kobo.2533.1"> route with </span><strong class="source-inline"><span class="koboSpan" id="kobo.2534.1">MessageList</span></strong><span class="koboSpan" id="kobo.2535.1"> as its view </span><span class="No-Break"><span class="koboSpan" id="kobo.2536.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2537.1">src/router/index.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2538.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2539.1">Add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2540.1">Messages</span></strong><span class="koboSpan" id="kobo.2541.1"> view (at </span><strong class="source-inline"><span class="koboSpan" id="kobo.2542.1">src/views/Messages.vue</span></strong><span class="koboSpan" id="kobo.2543.1">), which will render links to either </span><strong class="source-inline"><span class="koboSpan" id="kobo.2544.1">editor</span></strong><span class="koboSpan" id="kobo.2545.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.2546.1">list</span></strong><span class="koboSpan" id="kobo.2547.1"> as its nested routes and render the nested </span><span class="No-Break"><span class="koboSpan" id="kobo.2548.1">view accordingly.</span></span></li>
<li><span class="koboSpan" id="kobo.2549.1">When the user navigates away from </span><strong class="source-inline"><span class="koboSpan" id="kobo.2550.1">editor</span></strong><span class="koboSpan" id="kobo.2551.1">, should some content not yet have been submitted, display a message asking whether they want to save before navigating away. </span><strong class="source-inline"><span class="koboSpan" id="kobo.2552.1">Yes</span></strong><span class="koboSpan" id="kobo.2553.1"> will continue and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2554.1">No</span></strong><span class="koboSpan" id="kobo.2555.1"> will abort </span><span class="No-Break"><span class="koboSpan" id="kobo.2556.1">the navigation.</span></span></li>
<li><span class="koboSpan" id="kobo.2557.1">Add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2558.1">Message</span></strong><span class="koboSpan" id="kobo.2559.1"> view (at </span><strong class="source-inline"><span class="koboSpan" id="kobo.2560.1">src/views/Message.vue</span></strong><span class="koboSpan" id="kobo.2561.1">), which will render message content from </span><strong class="source-inline"><span class="koboSpan" id="kobo.2562.1">props</span></strong><span class="koboSpan" id="kobo.2563.1">, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.2564.1">back</span></strong><span class="koboSpan" id="kobo.2565.1"> button to go back to the previous view. </span><span class="koboSpan" id="kobo.2565.2">By default, it should go </span><span class="No-Break"><span class="koboSpan" id="kobo.2566.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2567.1">messages</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2568.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2569.1">Register the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2570.1">Message</span></strong><span class="koboSpan" id="kobo.2571.1"> view with the dynamic route of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2572.1">message/:id</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.2573.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2574.1">src/router/index.js</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2575.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.2576.1">Improve the UI by creating two different simple layouts, one for </span><strong class="source-inline"><span class="koboSpan" id="kobo.2577.1">messages</span></strong><span class="koboSpan" id="kobo.2578.1"> (with the title only) and one for </span><strong class="source-inline"><span class="koboSpan" id="kobo.2579.1">message</span></strong><span class="koboSpan" id="kobo.2580.1"> (with both the title and the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.2581.1">back</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.2582.1"> button).</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.2583.1">The expected output is </span><span class="No-Break"><span class="koboSpan" id="kobo.2584.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.2585.1">After </span><a id="_idIndexMarker941"/><span class="koboSpan" id="kobo.2586.1">adding</span><a id="_idIndexMarker942"/><span class="koboSpan" id="kobo.2587.1"> messages </span><a id="_idIndexMarker943"/><span class="koboSpan" id="kobo.2588.1">via </span><a id="_idIndexMarker944"/><span class="koboSpan" id="kobo.2589.1">the </span><a id="_idIndexMarker945"/><span class="koboSpan" id="kobo.2590.1">editor </span><a id="_idIndexMarker946"/><span class="koboSpan" id="kobo.2591.1">route, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.2592.1">/list</span></strong><span class="koboSpan" id="kobo.2593.1"> view that displays a feed of messages should look </span><span class="No-Break"><span class="koboSpan" id="kobo.2594.1">as follows:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer233">
<span class="koboSpan" id="kobo.2595.1"><img alt="Figure 7.42 – The /list view in the Messages app" src="image/B18645_07_42.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2596.1">Figure 7.42 – The /list view in the Messages app</span></p>
<ul>
<li><span class="koboSpan" id="kobo.2597.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2598.1">/editor</span></strong><span class="koboSpan" id="kobo.2599.1"> view that allows the user to compose and send a new message looks </span><span class="No-Break"><span class="koboSpan" id="kobo.2600.1">as follows:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer234">
<span class="koboSpan" id="kobo.2601.1"><img alt="Figure 7.43 – The /editor view in the Messages app" src="image/B18645_07_43.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2602.1">Figure 7.43 – The /editor view in the Messages app</span></p>
<ul>
<li><span class="koboSpan" id="kobo.2603.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.2604.1">/message/:id</span></strong><span class="koboSpan" id="kobo.2605.1"> dynamic route (here, </span><strong class="source-inline"><span class="koboSpan" id="kobo.2606.1">/message/0</span></strong><span class="koboSpan" id="kobo.2607.1"> for a message with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.2608.1">id</span></strong><span class="koboSpan" id="kobo.2609.1"> value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.2610.1">0</span></strong><span class="koboSpan" id="kobo.2611.1">) in the </span><strong class="bold"><span class="koboSpan" id="kobo.2612.1">Message</span></strong><span class="koboSpan" id="kobo.2613.1"> app looks </span><span class="No-Break"><span class="koboSpan" id="kobo.2614.1">as follows:</span></span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer235">
<span class="koboSpan" id="kobo.2615.1"><img alt="Figure 7.44 – The /message/0 view in the Message app" src="image/B18645_07_44.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2616.1">Figure 7.44 – The /message/0 view in the Message app</span></p>
<p><span class="koboSpan" id="kobo.2617.1">An</span><a id="_idIndexMarker947"/><span class="koboSpan" id="kobo.2618.1"> alert </span><a id="_idIndexMarker948"/><span class="koboSpan" id="kobo.2619.1">will be</span><a id="_idIndexMarker949"/><span class="koboSpan" id="kobo.2620.1"> displayed </span><a id="_idIndexMarker950"/><span class="koboSpan" id="kobo.2621.1">when </span><a id="_idIndexMarker951"/><span class="koboSpan" id="kobo.2622.1">the </span><a id="_idIndexMarker952"/><span class="koboSpan" id="kobo.2623.1">user tries to navigate away with an unsaved message as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.2624.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer236">
<span class="koboSpan" id="kobo.2625.1"><img alt="Figure 7.45 – The /editor view whe﻿n the user tries to leave the page with an unsaved message" src="image/B18645_07_45.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.2626.1">Figure 7.45 – The /editor view whe</span><a id="_idTextAnchor351"/><span class="koboSpan" id="kobo.2627.1">n the user tries to leave the page with an unsaved message</span></p>
<h1 id="_idParaDest-182"><a id="_idTextAnchor352"/><span class="koboSpan" id="kobo.2628.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.2629.1">Throughout this chapter, we have learned about the most basic and useful functionalities offered by Vue Router for building routing for any Vue.js application in an effective and </span><span class="No-Break"><span class="koboSpan" id="kobo.2630.1">organized way.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.2631.1">RouterView</span></strong><span class="koboSpan" id="kobo.2632.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.2633.1">RouterLink</span></strong><span class="koboSpan" id="kobo.2634.1"> allow app developers to easily set up the navigation paths to their related views and maintain the SPA concept. </span><span class="koboSpan" id="kobo.2634.2">The fact that they are Vue components themselves provides us as developers with the benefits of the Vue architecture, giving us flexibility in implementing nested views </span><span class="No-Break"><span class="koboSpan" id="kobo.2635.1">or layouts.</span></span></p>
<p><span class="koboSpan" id="kobo.2636.1">Defining the route as an object with different properties simplifies the architecture process, including refactoring existing paths and adding a new route to the system. </span><span class="koboSpan" id="kobo.2636.2">Using router parameters and patterns provides dynamic routing with reusable views and enables communication and data preservation </span><span class="No-Break"><span class="koboSpan" id="kobo.2637.1">between pages.</span></span></p>
<p><span class="koboSpan" id="kobo.2638.1">Finally, with Hooks, we saw how we can intercept the navigation flow, set up authentication where needed, redirect to the desired path, or even load and keep certain important data before the user lands on the targeted page. </span><span class="koboSpan" id="kobo.2638.2">There is an unlimited number of use cases in which these Hooks can be extremely useful, such as when implementing a back button, for instance. </span><span class="koboSpan" id="kobo.2638.3">With Vue Router, we are now capable of composing a Vue.js application with a proper navigation system for users </span><span class="No-Break"><span class="koboSpan" id="kobo.2639.1">to explore.</span></span></p>
<p><span class="koboSpan" id="kobo.2640.1">In the next chapter, we will explore how we can enhance the UI experience for users by adding transitions and animations to </span><span class="No-Break"><span class="koboSpan" id="kobo.2641.1">our application.</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer238">
</div>
</div>
</body></html>