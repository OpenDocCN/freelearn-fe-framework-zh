<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" style="font-size:1.200rem;">
<head><title>Chapter&#160;4.&#160;Exploring Bosonic Tools for Web Component Development</title>
<link rel="stylesheet" href="../Styles/style0001.css" type="text/css"/>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/>
</head>
<body id="page">
<div class="chapter" title="Chapter&#160;4.&#160;Exploring Bosonic Tools for Web Component Development" id="aid-19UOO1"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"></a>Chapter&#160;4.&#160;Exploring Bosonic Tools for Web Component Development</h1>
</div>
</div>
</div>
<p>Bosonic provides a set of tools that help developers build a web component development. In this chapter, we will learn about configuration, lifecycle, built-in elements, and custom element development using the Bosonic tool.</p>
<div class="section" title="What is Bosonic?"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec39"></a>What is Bosonic?</h1>
</div>
</div>
</div>
<p>Bosonic is a library for <a id="id370" class="indexterm"></a>web component development based on the W3C specification. The Bosonic library came about so as to support not-so-modern browsers, such as IE9. Bosonic is built on top of the PolymerJS polyfill and its own polyfill. Bosonic acts like a transpiler. A<a id="id371" class="indexterm"></a> <span class="strong"><strong>transpiler</strong></span> is a simple compiler, which takes a source code as input and output in another programming language. The following diagram shows the Bosonic acting as a transpiler:</p>
<div class="mediaobject"><img src="../Images/image00283.jpeg" alt="What is Bosonic?"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The Bosonic transpiler takes the element definition in the HTML format and generates the respective JavaScript<a id="id372" class="indexterm"></a> and CSS file.</p>
</div>
</div>


<div class="section" title="Browser support" id="aid-1AT9A1"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec40"></a>Browser support</h1>
</div>
</div>
</div>
<p>As mentioned in the first chapter, web component specification is very new and is not implemented by all <a id="id373" class="indexterm"></a>browsers. However, Bosonic tries to support more recent browsers by using polyfill. As of today, Bosonic supports the<a id="id374" class="indexterm"></a> following listed browsers:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Mozilla Firefox 25+</li>
<li class="listitem">Google Chrome 30+</li>
<li class="listitem">Internet Explorer 9+</li>
<li class="listitem">Safari 6+</li>
<li class="listitem">Opera 12+</li>
</ul>
</div>
</div>


<div class="section" title="Configuring Bosonic" id="aid-1BRPS1"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec41"></a>Configuring Bosonic</h1>
</div>
</div>
</div>
<p>Bosonic library is<a id="id375" class="indexterm"></a> hosted by GitHub. The complete library can be<a id="id376" class="indexterm"></a> downloaded from the following link:</p>
<p>
<a class="ulink" href="https://github.com/bosonic/bosonic">https://github.com/bosonic/bosonic</a>
</p>
</div>


<div class="section" title="Bosonic packages" id="aid-1CQAE1"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec42"></a>Bosonic packages</h1>
</div>
</div>
</div>
<p>The Bosonic elements<a id="id377" class="indexterm"></a> are made up of four packages. We can consider these packages as layers of a technology stack that supports Bosonic elements. The following diagram<a id="id378" class="indexterm"></a> shows the Bosonic packages:</p>
<div class="mediaobject"><img src="../Images/image00284.jpeg" alt="Bosonic packages"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The details of the <a id="id379" class="indexterm"></a>mentioned packages are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Bosonic platform</strong></span>: This<a id="id380" class="indexterm"></a> package contains all the polyfill JavaScript files to provide the missing features from web component specification</li>
<li class="listitem"><span class="strong"><strong>Grunt Bosonic</strong></span>: This is a<a id="id381" class="indexterm"></a> Grunt task that uses the transpiler to build your elements</li>
<li class="listitem"><span class="strong"><strong>Bosonic transpiler</strong></span>: This is an<a id="id382" class="indexterm"></a> <span class="strong"><strong>node package manager</strong></span> (<span class="strong"><strong>npm</strong></span>) module for converting the Bosonic <a id="id383" class="indexterm"></a>element definition to CSS and JS</li>
<li class="listitem"><span class="strong"><strong>Yeoman Bosonic</strong></span>: This is a <a id="id384" class="indexterm"></a>Yeoman generator that creates the skeleton of a new element</li>
</ul>
</div>
</div>


<div class="section" title="Built-in elements" id="aid-1DOR01"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec43"></a>Built-in elements</h1>
</div>
</div>
</div>
<p>The Bosonic library<a id="id385" class="indexterm"></a> comes with a set of built-in components<a id="id386" class="indexterm"></a> that can be used by a developer for web application development. The complete list of built-in elements<a id="id387" class="indexterm"></a> can be found by visiting the following URL:</p>
<p>
<a class="ulink" href="http://bosonic.github.io/elements.html">http://bosonic.github.io/elements.html</a>
</p>
<p>We will explore a few of them in this chapter.</p>
<div class="section" title="The b-sortable element"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec58"></a>The b-sortable element</h2>
</div>
</div>
</div>
<p>The <code class="literal">b-sortable</code> element <a id="id388" class="indexterm"></a>can be used to group and sort the DOM elements. The <code class="literal">&lt;b-sortable&gt;</code> element can be installed using the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install --save b-sortable</strong></span>
</pre>
</div>
<p>The <code class="literal">--save</code> switch is used to include the <code class="literal">b-sortable</code> element code in the local project. After the successful execution of the preceding command, it generates a directory structure. </p>
<p>The following screenshot shows the directory and file structure generated by the preceding command:</p>
<div class="mediaobject"><img src="../Images/image00285.jpeg" alt="The b-sortable element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>From the<a id="id389" class="indexterm"></a> preceding screenshot, we can see that the parent directory named <code class="literal">node_module</code> is created with a subdirectory named <code class="literal">b-sortable</code>, which contains the real JavaScript code definition for the element.</p>
<p>The dependent files for the <code class="literal">&lt;b-sortable&gt;</code> element can be installed using the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with the <code class="literal">b-sortable</code> element by installing dependent files using the preceding command:</p>
<div class="mediaobject"><img src="../Images/image00286.jpeg" alt="The b-sortable element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Once the entire dependent files are generated using npm, we can start the Grunt task for transpiling the <code class="literal">b-sortable.html</code> file. To get a copy of the <code class="literal">&lt;b-sortable&gt;</code> element in the <code class="literal">demo</code> directory, we use the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>grunt demo</strong></span>
</pre>
</div>
<p>The following screenshot shows the Grunt task execution, which generates the corresponding CSS and JS files in the <code class="literal">demo</code> directory:</p>
<div class="mediaobject"><img src="../Images/image00287.jpeg" alt="The b-sortable element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Once the <a id="id390" class="indexterm"></a>Grunt task is successfully executed, the corresponding CSS and JS files are generated inside the <code class="literal">demo</code> directory. The following screenshot shows the updated directory structure:</p>
<div class="mediaobject"><img src="../Images/image00288.jpeg" alt="The b-sortable element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Now, we can<a id="id391" class="indexterm"></a> view the demo of the <code class="literal">&lt;b-sortable&gt;</code> element by running the <code class="literal">index.html</code> file present inside the <code class="literal">demo</code> subdirectory:</p>
<div class="mediaobject"><img src="../Images/image00289.jpeg" alt="The b-sortable element"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="The b-toggle-button element"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec59"></a>The b-toggle-button element</h2>
</div>
</div>
</div>
<p>The <code class="literal">b-toggle-button</code> element <a id="id392" class="indexterm"></a>has two different states, <span class="emphasis"><em>on</em></span> and <span class="emphasis"><em>off</em></span>, representing the checked and unchecked element. The <code class="literal">&lt;b-toggle-button&gt;</code> element can be installed using the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install --save b-toggle-button</strong></span>
</pre>
</div>
<p>After the successful execution of the preceding command, it generates a directory structure. The following screenshot shows the directory and file structure generated by the preceding command:</p>
<div class="mediaobject"><img src="../Images/image00290.jpeg" alt="The b-toggle-button element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The dependent files for the <code class="literal">&lt;b-toggle-button&gt;</code> element can be installed using the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install</strong></span>
</pre>
</div>
<p>The following<a id="id393" class="indexterm"></a> screenshot shows the terminal with the <code class="literal">b-toggle-button</code> element by installing dependent files using preceding command:</p>
<div class="mediaobject"><img src="../Images/image00291.jpeg" alt="The b-toggle-button element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Once the entire dependent files are generated using npm, we can start the Grunt task for transpiling the <code class="literal">b-toggle-button.html</code> file. To get a copy of the <code class="literal">&lt;b-toggle-button&gt;</code> element in the<a id="id394" class="indexterm"></a> <code class="literal">demo</code> directory, we use the following command:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>grunt demo</strong></span>
</pre>
</div>
<p>The following screenshot shows the Grunt task execution, which generates the corresponding CSS and JS files in the <code class="literal">demo</code> directory:</p>
<div class="mediaobject"><img src="../Images/image00292.jpeg" alt="The b-toggle-button element"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Now, we can view the demo of the <code class="literal">&lt;b-toggle-button&gt;</code> element by running the <code class="literal">index.html</code> file present inside the <code class="literal">demo</code> subdirectory. Here is the screenshot for this:</p>
<div class="mediaobject"><img src="../Images/image00293.jpeg" alt="The b-toggle-button element"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>


<div class="section" title="Developing custom component"><div class="titlepage" id="aid-1ENBI2"><div><div><h1 class="title"><a id="ch04lvl1sec44"></a>Developing custom component</h1>
</div>
</div>
</div>
<p>The Bosonic<a id="id395" class="indexterm"></a> framework supports the development of a custom element. In this section, we will learn step-by-step details for developing a custom element. We will build a custom element named <code class="literal">&lt;red-message&gt;</code>. The detailed steps are as follows:</p>
<div class="section" title="Step 1 – creating the red-message element directory"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec60"></a>Step 1 – creating the red-message element directory</h2>
</div>
</div>
</div>
<p>Create a <a id="id396" class="indexterm"></a>directory named <code class="literal">red-message</code> using your terminal and the <code class="literal">mkdir</code> command. The following screenshot shows the terminal with a directory name <code class="literal">red-message</code> creation. We can verify the directory creation using the <code class="literal">dir</code> or <code class="literal">ls</code> command in the terminal, depending on the operating system used by the developer.</p>
<div class="mediaobject"><img src="../Images/image00294.jpeg" alt="Step 1 – creating the red-message element directory"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Step 2 – changing the current directory to red-message"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec61"></a>Step 2 – changing the current directory to red-message</h2>
</div>
</div>
</div>
<p>Change the<a id="id397" class="indexterm"></a> current directory to <code class="literal">red-message</code> using the <code class="literal">cd</code> command in the terminal. The following screenshot shows the terminal with the <code class="literal">cd</code> command in execution:</p>
<div class="mediaobject"><img src="../Images/image00295.jpeg" alt="Step 2 – changing the current directory to red-message"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Step 3 – generating the skeleton for &lt;red-message&gt;"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec62"></a>Step 3 – generating the skeleton for &lt;red-message&gt;</h2>
</div>
</div>
</div>
<p>We need to generate the skeleton of the Bosonic custom element using Yeoman Bosonic generator. The package name for Bosonic generator is <code class="literal">generator-bosonic</code>, and it can be installed<a id="id398" class="indexterm"></a> using the <code class="literal">npm install --save generator-bosonic</code> command. The skeleton of the <code class="literal">&lt;red-message&gt;</code> element can be generated using the <code class="literal">yo bosonic</code> command in the terminal. Refer to the following screenshot:</p>
<div class="mediaobject"><img src="../Images/image00296.jpeg" alt="Step 3 – generating the skeleton for &lt;red-message&gt;"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Step 4 – verifying the directory structure"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec63"></a>Step 4 – verifying the directory structure</h2>
</div>
</div>
</div>
<p>Verify the directory structure generated by Yeoman Bosonic generator using the <code class="literal">ls</code> command. The following <a id="id399" class="indexterm"></a>screenshot shows the directory structure generated by the generator:</p>
<div class="mediaobject"><img src="../Images/image00297.jpeg" alt="Step 4 – verifying the directory structure"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="Step 5 – defining code for the &lt;red-message&gt; element"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec64"></a>Step 5 – defining code for the &lt;red-message&gt; element</h2>
</div>
</div>
</div>
<p>Now, it's time to <a id="id400" class="indexterm"></a>write the definition for the <code class="literal">&lt;red-message&gt;</code> element in the <code class="literal">red-message.html</code> file present in the <code class="literal">src</code> directory. The modified content of the <code class="literal">red-message.html</code> file is listed as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;element name="red-message"&gt;
    <span class="strong"><strong>&lt;style&gt;</strong></span>
        h1{
            color: red;
        }
    <span class="strong"><strong>&lt;/style&gt;</strong></span>
<span class="strong"><strong>    &lt;template&gt;</strong></span>
        &lt;h1&gt;Welcome to Bosonic framework.&lt;/h1&gt;
<span class="strong"><strong>    &lt;/template&gt;</strong></span>
<span class="strong"><strong>    &lt;script&gt;</strong></span>
        ({
            <span class="strong"><strong>createdCallback: function() {</strong></span>
<span class="strong"><strong>                this.appendChild(this.template.content.cloneNode(true));</strong></span>
<span class="strong"><strong>            }</strong></span>
        });
    <span class="strong"><strong>&lt;/script&gt;</strong></span>
&lt;/element&gt;</pre>
</div>
<p>The details of the preceding code are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;template&gt;</code> element contains an <code class="literal">h1</code> element with a message that is going to be<a id="id401" class="indexterm"></a> rendered</li>
<li class="listitem">The <code class="literal">&lt;style&gt;</code> element contains the style for the <code class="literal">color: red</code> attribute for the <code class="literal">h1</code> element</li>
<li class="listitem">The <code class="literal">&lt;script&gt;</code> element overrides the <code class="literal">createdCallback</code> method, which clones the template content and appends it to the <code class="literal">&lt;red-message&gt;</code> element</li>
</ul>
</div>
</div>
<div class="section" title="Step 6 – modifying the index.html demo file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec65"></a>Step 6 – modifying the index.html demo file</h2>
</div>
</div>
</div>
<p>To test the <code class="literal">red-message</code> element, we<a id="id402" class="indexterm"></a> need to include the <code class="literal">red-message</code> tag in the <code class="literal">index.html</code> file. The following code shows the content of the <code class="literal">index.html</code> file:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Demo&lt;/title&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;script src="js/<span class="strong"><strong>bosonic-polyfills.js</strong></span>"&gt;&lt;/script&gt;
    &lt;script src="js/<span class="strong"><strong>red-message.js</strong></span>"&gt;&lt;/script&gt;
    &lt;link href="css/<span class="strong"><strong>red-message.css</strong></span>" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    <span class="strong"><strong>&lt;red-message&gt; &lt;/red-message&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>As shown in the preceding code, <code class="literal">red-message.js</code> and <code class="literal">red-message.css</code> are the files that are generated <a id="id403" class="indexterm"></a>by the transpiler. These files will be used in the next step.</p>
</div>
<div class="section" title="Step 7 – generating distribution files using Grunt"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec66"></a>Step 7 – generating distribution files using Grunt</h2>
</div>
</div>
</div>
<p>In this step, we <a id="id404" class="indexterm"></a>need to call the transpiler which will generate the CSS and JS file from the <code class="literal">red-message.html</code> file. A Grunt task watcher can watch the changes in the <code class="literal">red-message.html</code> file<a id="id405" class="indexterm"></a> and generate the <code class="literal">red-message.css</code> and <code class="literal">red-message.js</code> files. A Grunt task watcher can be executed using the <code class="literal">grunt demo</code> command. The following screenshot shows the terminal with Grunt watcher in execution:</p>
<div class="mediaobject"><img src="../Images/image00298.jpeg" alt="Step 7 – generating distribution files using Grunt"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>After successful execution of the Grunt compiler, it generates the <code class="literal">red-message.js</code> and <code class="literal">red-message.css</code> files in the <code class="literal">dist</code> directory and copies a set of these files to the <code class="literal">demo</code> directory. The<a id="id406" class="indexterm"></a> following screenshot<a id="id407" class="indexterm"></a> shows the generated files after compilation:</p>
<div class="mediaobject"><img src="../Images/image00299.jpeg" alt="Step 7 – generating distribution files using Grunt"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Any changes to the <code class="literal">red-message.html</code> file will be picked up by the Grunt task watcher and also made to the corresponding CSS and JS files. The following screenshot displays the Grunt task watcher logs in the terminal:</p>
<div class="mediaobject"><img src="../Images/image00300.jpeg" alt="Step 7 – generating distribution files using Grunt"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The following <a id="id408" class="indexterm"></a>code has the content of the <code class="literal">red-message.js</code> file which is generated by the Grunt<a id="id409" class="indexterm"></a> transpiler:</p>
<div class="informalexample"><pre class="programlisting">(function () {
    var <span class="strong"><strong>RedMessagePrototype = Object.create(HTMLElement.prototype</strong></span>, {
            createdCallback: {
                enumerable: true,
                value: function () {
                    this.appendChild(this.template.content.cloneNode(true));
                }
            }
        });
    window.RedMessage = <span class="strong"><strong>document.registerElement</strong></span>('red-message', { prototype: RedMessagePrototype });
    Object.defineProperty(RedMessagePrototype, 'template', {
        <span class="strong"><strong>get: function () {</strong></span>
            var fragment = document.createDocumentFragment();
            var div = fragment.appendChild(document.createElement('div'));
            div.innerHTML = ' &lt;h1&gt;Welcome to Bosonic framework.&lt;/h1&gt; ';
            while (child = div.firstChild) {
                fragment.insertBefore(child, div);
            }
            fragment.removeChild(div);
            <span class="strong"><strong>return { content: fragment };</strong></span>
        }
    });
}());</pre>
</div>
<p>The details of the preceding code are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A new <a id="id410" class="indexterm"></a>object prototype <code class="literal">RedMessagePrototype</code> is created using the <code class="literal">Object.createElement</code> method</li>
<li class="listitem">It uses the <code class="literal">Object.defineProperty</code> method to create a property for the <code class="literal">RedMessagePrototype</code> object</li>
<li class="listitem">It registers<a id="id411" class="indexterm"></a> the element with DOM as <code class="literal">red-message</code> using the <code class="literal">document.registerElement</code> method</li>
</ul>
</div>
</div>
<div class="section" title="Step 8 – running the index.html file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec67"></a>Step 8 – running the index.html file</h2>
</div>
</div>
</div>
<p>We can see the <a id="id412" class="indexterm"></a>use of the <code class="literal">&lt;red-message&gt;</code> custom element by running the <code class="literal">index.html</code> file. The following screenshot shows the output of <code class="literal">index.html</code>, which shows the text message in the color red:</p>
<div class="mediaobject"><img src="../Images/image00301.jpeg" alt="Step 8 – running the index.html file"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>


<div class="section" title="Bosonic lifecycle"><div class="titlepage" id="aid-1FLS42"><div><div><h1 class="title"><a id="ch04lvl1sec45"></a>Bosonic lifecycle</h1>
</div>
</div>
</div>
<p>A Bosonic element goes through different states during its lifecycle. Bosonic provides callback methods for<a id="id413" class="indexterm"></a> each state to override with our own code. The lifecycle callback methods are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">createdCallback</code>: This callback method is for handling the <code class="literal">created</code> state. An element is in the <code class="literal">created</code> <a id="id414" class="indexterm"></a>state when it is instantiated at first.</li>
<li class="listitem"><code class="literal">attachedCallback</code>: This callback method is for handling the DOM <code class="literal">attached</code> state. An <code class="literal">attached</code> state represents the element when it is attached to DOM tree.</li>
<li class="listitem"><code class="literal">detachedCallback</code>: This callback method is for handling the DOM <code class="literal">detached</code> state. A <code class="literal">detached</code> state represents the element when it is removed from the DOM.</li>
<li class="listitem"><code class="literal">attributeChangedCallback</code>: This callback method is for handling the changes<a id="id415" class="indexterm"></a> in attributes.</li>
</ul>
</div>
<div class="section" title="Example of lifecycle"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec68"></a>Example of lifecycle</h2>
</div>
</div>
</div>
<p>In this section, we will develop a custom element <code class="literal">&lt;say-hello&gt;</code> demonstrating the lifecycle callback method. A skeleton for creating a custom element <code class="literal">&lt;say-hello&gt;</code> can be generated using the<a id="id416" class="indexterm"></a> previously explained steps. The following screenshot shows the terminal with the previous steps in execution:</p>
<div class="mediaobject"><img src="../Images/image00302.jpeg" alt="Example of lifecycle"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>After the directory and file structure is generated, we can start the Grunt task, which will watch over the modified element and generate the <code class="literal">dist</code> directory containing the respective CSS and JS files. The <code class="literal">say-hello.html</code> file present in the <code class="literal">src</code> directory has the code definition for the <code class="literal">&lt;say-hello&gt;</code> element. The following code shows the definition of the <code class="literal">&lt;say-hello&gt;</code> element:</p>
<div class="informalexample"><pre class="programlisting">&lt;element name="say-hello" message=""&gt;
    &lt;template&gt;
        <span class="strong"><strong>&lt;h1&gt;Hello &lt;span&gt;&lt;/span&gt;&lt;/h1&gt;</strong></span>
    &lt;/template&gt;
    &lt;script&gt;
    ({
       <span class="strong"><strong>createdCallback</strong></span>: function(){
         console.log(this.localName+" Element is created.");
         <span class="strong"><strong>var shadowRootNode = this.createShadowRoot(),</strong></span>
<span class="strong"><strong>             templateContent = this.template.content.cloneNode(true),</strong></span>
<span class="strong"><strong>             spanPlaceHolder = templateContent.querySelector("span");</strong></span>
<span class="strong"><strong>         spanPlaceHolder.innerText = this.getAttribute("message");</strong></span>
<span class="strong"><strong>         shadowRootNode.appendChild(templateContent);</strong></span>
       },
<span class="strong"><strong>attachedCallback</strong></span>: function(){
         console.log(this.localName+" is attached to DOM.");
       },
<span class="strong"><strong>detachedCallback</strong></span>: function(){
        console.log(this.localName+" is removed from DOM.");
       },	
<span class="strong"><strong>attributeChangedCallback</strong></span>: function(<span class="strong"><strong>attributeName</strong></span>){
          var newMessageValue = <span class="strong"><strong>this.getAttribute("message")</strong></span>;
console.log(attributeName+" value is changed to "+ newMessageValue);  
         <span class="strong"><strong>this.createdCallback();</strong></span>
       }
    });
    &lt;/script&gt;
&lt;/element&gt;</pre>
</div>
<p>The details of the preceding code are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The name<a id="id417" class="indexterm"></a> of the custom element is <code class="literal">say-hello</code> and a <code class="literal">message</code> attribute with no value.</li>
<li class="listitem">The <code class="literal">&lt;template&gt;</code> element contains the HTML markup containing a header <code class="literal">&lt;h1&gt;</code> and a <code class="literal">&lt;span&gt;</code> tag. The <code class="literal">&lt;span&gt;</code> tag acts as a placeholder for the <code class="literal">message</code> attribute value.</li>
<li class="listitem">The element definition contains four lifecycle callback methods. The details of these callback methods are listed as follows:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">createdCallback</code> method clones the template content, reads the message attribute value, and inserts it as a text node to the <code class="literal">&lt;span&gt;</code> element. It has a console to log the created event.</li>
<li class="listitem">The <code class="literal">attachedCallback</code> method has just the console log to print the message when the element is attached to DOM.</li>
<li class="listitem">The <code class="literal">detachedCallback</code> method has a console log to print the message when the element is removed from the DOM.</li>
<li class="listitem">The <code class="literal">attributeChangesCallback</code> method calls the <code class="literal">createdCallback</code> method whenever the value of the <code class="literal">message</code> attribute is changed. It also contains the console log to print the message whenever any attribute is changed.</li>
</ul>
</div></li>
</ul>
</div>
<p>The <code class="literal">&lt;say-hello&gt;</code> element<a id="id418" class="indexterm"></a> will generate the <code class="literal">say-hello.css</code> and <code class="literal">say-hello.js</code> files in the <code class="literal">dist</code> directory with a copy inside the <code class="literal">demo</code> directory. The <code class="literal">demo</code> directory contains the <code class="literal">index.html</code> file, which shows the use of the <code class="literal">&lt;say-hello&gt;</code> element. The code for the <code class="literal">index.html</code> file is listed as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Say-Hello Element Demo&lt;/title&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;script src="js/<code class="literal">say-hello.js</code>"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="elementContainer"&gt;
<span class="strong"><strong>        &lt;say-hello message="Web Component"&gt;</strong></span>
<span class="strong"><strong>        &lt;/say-hello&gt;</strong></span>
    &lt;/div&gt;

<span class="strong"><strong>    &lt;input type="text" id="messageElement" placeholder="Enter some message"&gt;</strong></span>
    &lt;br&gt;&lt;br&gt;

<span class="strong"><strong>    &lt;button onclick="changeMessageHandler()"&gt;Change Message&lt;/button&gt;</strong></span>
<span class="strong"><strong>    &lt;button onclick="deleteElementHandler()"&gt;Delete SayHello Element&lt;/button&gt;</strong></span>
<span class="strong"><strong>    &lt;button onclick="createElementHandler()"&gt;Create SayHello Element&lt;/button&gt;</strong></span>

    &lt;script type="text/javascript"&gt;
        //changes the value of the message
       var <span class="strong"><strong>changeMessageHandler</strong></span> = function(){
           var sayHelloElement = document.querySelector("say- hello"),messageText = document.getElementById("messageElement").value;
sayHelloElement.setAttribute("message",messageText);
       },
       //delete the say-hello element
       <span class="strong"><strong>deleteElementHandler</strong></span> = function(){
           var sayHelloElement = document.querySelector("say- hello");
           sayHelloElement.remove();
       },
       //create new say-hello element
       <span class="strong"><strong>createElementHandler</strong></span> = function(){
           var sayHelloElement = document.createElement("say- hello"),elementContainer = document.getElementById("elementContainer");
sayHelloElement.setAttribute("message","Developers");
elementContainer.appendChild(sayHelloElement);
       };
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>In the <code class="literal">index.html</code> file, the code contains an <code class="literal">&lt;input&gt;</code> element having the<code class="literal"> messageElement</code> ID value and three buttons for modifying the <code class="literal">&lt;say-hello&gt;</code> element. The details of these<a id="id419" class="indexterm"></a> elements are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;input&gt;</code> element takes the value from the user, which can be used as a value for the <code class="literal">message</code> attribute.</li>
<li class="listitem">The first button <span class="strong"><strong>Change Message</strong></span> value has an onclick handler attached to the <code class="literal">changeMessageHandler</code> method. This method takes the value entered by the user in the <code class="literal">&lt;input&gt;</code> element and updates the <code class="literal">message</code> attribute. The change in the <code class="literal">message</code> attribute calls the <code class="literal">attributeChangedCallback</code> method, which in turn calls the <code class="literal">createdCallback</code> method and the new value of the message then gets rendered in the browser.</li>
<li class="listitem">The second button <span class="strong"><strong>Delete SayHello Element</strong></span> has an onclick handler attached to the <code class="literal">deleteElementHandler</code> method. This method finds the <code class="literal">say-hello</code> element and removes it from the DOM using the <code class="literal">remove</code> method. It fires the <code class="literal">detachedCallback</code> lifecycle method.</li>
<li class="listitem">The third button <span class="strong"><strong>Create SayHello Element</strong></span> has an onclick handler attached to the <code class="literal">createElementHandler</code> method. This method creates a new <code class="literal">say-hello</code> element using the <code class="literal">document.createElement</code> method and then attaches the <code class="literal">say-hello</code> element to <code class="literal">elementContainer</code>. This process fires the <code class="literal">createdCallback</code> lifecycle method.</li>
</ul>
</div>
<p>The output of the<a id="id420" class="indexterm"></a> demo code in <code class="literal">index.html</code> will render the following screenshot:</p>
<div class="mediaobject"><img src="../Images/image00303.jpeg" alt="Example of lifecycle"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Now, enter a text message such as <code class="literal">Bosonic Framework</code> in the <code class="literal">&lt;input&gt;</code> element and hit the <span class="strong"><strong>Change Message</strong></span> button. The following screenshot shows the output after entering the text in the <code class="literal">&lt;input&gt;</code> element:</p>
<div class="mediaobject"><img src="../Images/image00304.jpeg" alt="Example of lifecycle"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>In the preceding screenshot, we can see that the new <span class="strong"><strong>Hello Bosonic Framework</strong></span> message gets rendered in the browser. In the console, we can find two logs generated from the <code class="literal">attributeChangedCallback</code> and <code class="literal">createdCallback</code> methods, as the <code class="literal">message</code> attribute value is changed <a id="id421" class="indexterm"></a>with the user entered text and the element is reinitialized.</p>
<p>Now, press the <span class="strong"><strong>Delete SayHello Element</strong></span> button which will remove the element form the DOM tree. The following screenshot shows the output after the deletion of the <code class="literal">&lt;say-hello&gt;</code> element from DOM:</p>
<div class="mediaobject"><img src="../Images/image00305.jpeg" alt="Example of lifecycle"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>In the preceding screenshot, we can see that the <code class="literal">&lt;say-hello&gt;</code> element is removed from the DOM. In the<a id="id422" class="indexterm"></a> console, a message is logged which is generated by the <code class="literal">detachedCallback</code> method.</p>
<p>Now, press the <span class="strong"><strong>Create SayHello Element</strong></span> button which will create a new <code class="literal">&lt;say-hello&gt;</code> element and append it to <code class="literal">elementContainer</code>. The following screenshot shows the new <code class="literal">&lt;say-hello&gt;</code> element created after pressing the button:</p>
<div class="mediaobject"><img src="../Images/image00306.jpeg" alt="Example of lifecycle"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>In the preceding screenshot, we can see that the new <code class="literal">&lt;say-hello&gt;</code> element is rendered in the browser with<a id="id423" class="indexterm"></a> the <code class="literal">message</code> attribute value set to <code class="literal">Developers</code>. In the console, we can see that four different log message are generated by the <code class="literal">createdCallback</code>, <code class="literal">attributeChangedCallback</code>, and <code class="literal">attachedCallback</code> method.</p>
</div>
</div>


<div class="section" title="Digital clock development"><div class="titlepage" id="aid-1GKCM2"><div><div><h1 class="title"><a id="ch04lvl1sec46"></a>Digital clock development</h1>
</div>
</div>
</div>
<p>In this section, we will develop the <code class="literal">&lt;ts-clock&gt;</code> custom element using the Bosonic framework. The<a id="id424" class="indexterm"></a> following screenshot shows the terminal with the command to generate the default directory and file structure for creating a <code class="literal">&lt;ts-clock&gt;</code> element:</p>
<div class="mediaobject"><img src="../Images/image00307.jpeg" alt="Digital clock development"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Now, we can run the Grunt task runner to watch the changes to the <code class="literal">ts-clock.html</code> file. The task runner<a id="id425" class="indexterm"></a> transpiles the <code class="literal">ts-clock.html</code> file and generates the <code class="literal">ts-clock.css</code> and <code class="literal">ts-clock.js</code> files in the <code class="literal">dist</code> directory, and a copy in the <code class="literal">demo</code> directory. The following screenshot shows the terminal with the Grunt task runner in execution:</p>
<div class="mediaobject"><img src="../Images/image00308.jpeg" alt="Digital clock development"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>Now, the platform<a id="id426" class="indexterm"></a> is set up for writing the code for the <code class="literal">&lt;ts-clock&gt;</code> digital clock element. The <code class="literal">ts-clock.html</code> file contains the code for the definition of the digital clock. The details of the code in the <code class="literal">ts-clock.html</code> file are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;ts-clock&gt;</code> element will have three attributes <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code>. The following code shows the syntax for the code definition for the <code class="literal">&lt;ts-clock&gt;</code> element:<div class="informalexample"><pre class="programlisting">&lt;element name=<span class="strong"><strong>"ts-clock</strong></span>" hour="" minute="" second=""&gt;
    <span class="strong"><strong>&lt;template&gt;</strong></span>
   	&lt;!--HTML template content for ts-clock element --&gt;
   &lt;!--CSS style attributes for shadow DOM element--&gt;
    <span class="strong"><strong>&lt;/template&gt;</strong></span>
    <span class="strong"><strong>&lt;script&gt;</strong></span>
   // Lifecycle callback method for ts-clock element
    <span class="strong"><strong>&lt;/script&gt;</strong></span>
&lt;/element&gt;</pre>
</div></li>
<li class="listitem">The <code class="literal">&lt;template&gt;</code> element contains the CSS style and HTML elements. The CSS styles and HTML element that we used for the template is used from the previous chapter. The HTML element has three different <code class="literal">div</code> elements, which has <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> classes wrapped inside a <code class="literal">div</code> element with the <code class="literal">clock</code> class. The following code shows the HTML and CSS content present inside the <code class="literal">&lt;template&gt;</code> element:<div class="informalexample"><pre class="programlisting">&lt;template&gt;
   &lt;style&gt;
     :host .clock{
        display: inline-flex;
        justify-content: space-around;
        background: floralwhite;
        font-size: 2rem;
        font-family: serif;
      }
     :host .clock .hour,
  :host .clock .minute, 
  :host .clock .second{
        color: tomato;
        padding: 1.5rem;
        text-shadow: 0px 1px grey;
      }
   <span class="strong"><strong>&lt;/style&gt;</strong></span>
<span class="strong"><strong>   &lt;div class="clock"&gt;</strong></span>
<span class="strong"><strong>      &lt;div class="hour"&gt;&lt;/div&gt;</strong></span>
<span class="strong"><strong>      &lt;div class="minute"&gt;&lt;/div&gt;</strong></span>
<span class="strong"><strong>      &lt;div class="second"&gt;&lt;/div&gt;</strong></span>
<span class="strong"><strong>   &lt;/div&gt;</strong></span>
&lt;/template&gt;</pre>
</div></li>
<li class="listitem">The <code class="literal">&lt;script&gt;</code> element contains the real code definition for the <code class="literal">&lt;ts-clock&gt;</code> element. The<a id="id427" class="indexterm"></a> following code shows the content of the <code class="literal">&lt;script&gt;</code> element:<div class="informalexample"><pre class="programlisting">&lt;script&gt;
    ({
        <span class="strong"><strong>createdCallback</strong></span>: function() {
            var shadowRootNode = this.createShadowRoot(),
                content = this.template.content.cloneNode(true);
            shadowRootNode.appendChild(content);
        },
        <span class="strong"><strong>attachedCallback</strong></span>: function() {
            var clockElement = this;
            <span class="strong"><strong>window.setInterval(function() {</strong></span>
<span class="strong"><strong>                var date = new Date();</strong></span>
<span class="strong"><strong>                clockElement.setAttribute("hour", date.getHours());</strong></span>
<span class="strong"><strong>                clockElement.setAttribute("minute", date.getMinutes());</strong></span>
<span class="strong"><strong>                clockElement.setAttribute("second", date.getSeconds());</strong></span>
<span class="strong"><strong>            }, 1000);</strong></span>
<span class="strong"><strong>        },</strong></span>
<span class="strong"><strong>        attributeChangedCallback</strong></span>: function(attributeName) {
            var shadowRootNode = this.shadowRoot,
                hourPlaceholder = shadowRootNode.querySelector('.hour'),
                minutePlaceholder = shadowRootNode.querySelector('.minute'),
                secondPlaceHolder = shadowRootNode.querySelector('.second');
            <span class="strong"><strong>switch (attributeName) {</strong></span>
<span class="strong"><strong>                case "hour":</strong></span>
<span class="strong"><strong>                    hourPlaceholder.innerText = this.getAttribute("hour");</strong></span>
<span class="strong"><strong>                    break;</strong></span>
<span class="strong"><strong>                case "minute":</strong></span>
<span class="strong"><strong>                    minutePlaceholder.innerText = this.getAttribute("minute");</strong></span>
<span class="strong"><strong>                    break;</strong></span>
<span class="strong"><strong>                case "second":</strong></span>
<span class="strong"><strong>                    secondPlaceHolder.innerText = this.getAttribute("second");</strong></span>
<span class="strong"><strong>                    break;</strong></span>
<span class="strong"><strong>            }</strong></span>
        }
    });
&lt;/script&gt;</pre>
</div><p>The details of the preceding code are listed here:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">createdCallback</code> method creates <code class="literal">shadowRoot</code> for the host element. It finds and clones the content of the element to activate it. After activation, it appends the HTML content to <code class="literal">shadowRoot</code>.</li>
<li class="listitem">The <code class="literal">attachedCallback</code> method has a <code class="literal">setInterval</code> method, which contains the code for setting the attributes <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> with the current time using a <code class="literal">date</code> object. The code block gets executed in every 1 second and updates the value of the <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> attributes.</li>
<li class="listitem">The <code class="literal">attributeChangedCallback</code> method gets called whenever there is change of value in the <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> attributes. It has a <code class="literal">switch</code> block containing cases like <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code>. Based on the change in the attribute, one of the <code class="literal">switch</code> case gets activated, which updates the text content of the DOM element.</li>
</ul>
</div></li>
</ul>
</div>
<p>The <code class="literal">demo</code> directory<a id="id428" class="indexterm"></a> contains the code for testing the <code class="literal">&lt;ts-clock&gt;</code> element. The <code class="literal">index.html</code> file contains the <code class="literal">&lt;ts-clock&gt;</code> element with <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> having default values <code class="literal">HH</code>, <code class="literal">MM</code>, and <code class="literal">SS</code>, respectively. The content of the <code class="literal">index.html</code> file is listed as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Digital Clock Demo&lt;/title&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;script src="js/<span class="strong"><strong>ts-clock.js</strong></span>"&gt;&lt;/script&gt;
    &lt;link href="css/<span class="strong"><strong>ts-clock.css</strong></span>" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
   <span class="strong"><strong>&lt;ts-clock hour="HH" minute="MM" second="SS"&gt;</strong></span>
<span class="strong"><strong>   &lt;/ts-clock&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The output of the preceding code is rendered in the following screenshot showing <code class="literal">hour</code> (HH), <code class="literal">minute</code> (MM), and <code class="literal">second</code> (SS) in the 24-hour format:</p>
<div class="mediaobject"><img src="../Images/image00309.jpeg" alt="Digital clock development"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The following screenshot shows the Chrome developer tool with the HTML inspection for the output of the preceding code. We can find the Shadow DOM subtree of the <code class="literal">&lt;ts-clock&gt;</code> element containing the CSS style and HTML element.</p>
<div class="mediaobject"><img src="../Images/image00310.jpeg" alt="Digital clock development"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>


<div class="section" title="Summary" id="aid-1HIT81"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec47"></a>Summary</h1>
</div>
</div>
</div>
<p>In this chapter, we learned about the Bosonic framework that is used to create a custom element with the lifecycle callback methods. In the next chapter, we will learn about the Mozilla Brick framework based on X-Tag.</p>
</div>
</body>
</html>