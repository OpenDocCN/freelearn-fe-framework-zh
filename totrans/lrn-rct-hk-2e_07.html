<html><head></head><body>
<div id="_idContainer099">
<h1 class="chapterNumber"><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.1.1">5</span></h1>
<h1 class="chapterTitle" id="_idParaDest-123"><a id="_idTextAnchor128"/><span class="koboSpan" id="kobo.2.1">Implementing React Contexts</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In the previous chapters, we learned about the State Hook, the Reducer Hook, and the Effect Hook. </span><span class="koboSpan" id="kobo.3.2">We developed a small blog application using these Hooks. </span><span class="koboSpan" id="kobo.3.3">As we noticed during the development of our blog app, we had to pass down the </span><code class="inlineCode"><span class="koboSpan" id="kobo.4.1">username</span></code><span class="koboSpan" id="kobo.5.1"> state from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.6.1">App</span></code><span class="koboSpan" id="kobo.7.1"> component to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.8.1">UserBar</span></code><span class="koboSpan" id="kobo.9.1"> component, and from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.10.1">UserBar</span></code><span class="koboSpan" id="kobo.11.1"> component to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.12.1">Login</span></code><span class="koboSpan" id="kobo.13.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.14.1">Register</span></code><span class="koboSpan" id="kobo.15.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.16.1">Logout</span></code><span class="koboSpan" id="kobo.17.1"> components. </span><span class="koboSpan" id="kobo.17.2">To avoid having to pass down the state like this, we are now going to learn about React Context and Context Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.18.1">We are going to begin by learning what React Context is, and what providers and consumers are, by implementing themes as an example for contexts. </span><span class="koboSpan" id="kobo.18.2">Then, we are going to use Hooks as a context consumer and discuss when contexts should be used. </span><span class="koboSpan" id="kobo.18.3">Finally, we are going to implement global state using contexts.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.19.1">The following topics will be covered in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.20.1">Introducing React Context</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.21.1">Implementing themes via context</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.22.1">Alternatives to contexts</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.23.1">Using context for global state</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-124"><a id="_idTextAnchor129"/><span class="koboSpan" id="kobo.24.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.25.1">A fairly recent version of Node.js should already be installed. </span><span class="koboSpan" id="kobo.25.2">The Node Package Manager (</span><code class="inlineCode"><span class="koboSpan" id="kobo.26.1">npm</span></code><span class="koboSpan" id="kobo.27.1">) also needs to be installed (it should come with Node.js). </span><span class="koboSpan" id="kobo.27.2">For more information on how to install Node.js, please check out the official website: </span><a href="https://nodejs.org/"><span class="url"><span class="koboSpan" id="kobo.28.1">https://nodejs.org/</span></span></a><span class="koboSpan" id="kobo.29.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.30.1">We are going to use </span><strong class="keyWord"><span class="koboSpan" id="kobo.31.1">Visual Studio Code</span></strong><span class="koboSpan" id="kobo.32.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.33.1">VS Code</span></strong><span class="koboSpan" id="kobo.34.1">) for the guides in this book, but everything should </span><a id="_idIndexMarker213"/><span class="koboSpan" id="kobo.35.1">work similarly in any other editor. </span><span class="koboSpan" id="kobo.35.2">For more information on how to install VS Code, please refer to the official website: </span><a href="https://code.visualstudio.com"><span class="url"><span class="koboSpan" id="kobo.36.1">https://code.visualstudio.com</span></span></a><span class="koboSpan" id="kobo.37.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.38.1">In this book, we use the following versions:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.39.1">Node.js v22.14.0</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.40.1">npm</span></code><span class="koboSpan" id="kobo.41.1"> v10.9.2</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.42.1">VS Code v1.97.2</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.43.1">While installing a newer version should not be an issue, please note that certain steps might work differently on a newer version. </span><span class="koboSpan" id="kobo.43.2">If you are having an issue with the code and steps provided in this book, please try using the mentioned versions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.44.1">You can find the code for this chapter on GitHub: </span><a href="https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter05"><span class="url"><span class="koboSpan" id="kobo.45.1">https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter05</span></span></a><span class="koboSpan" id="kobo.46.1">.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.47.1">It is highly recommended that you write the code on your own. </span><span class="koboSpan" id="kobo.47.2">Do not simply run the code examples that are provided with the book. </span><span class="koboSpan" id="kobo.47.3">It is important to write the code yourself to be able to learn and understand it properly. </span><span class="koboSpan" id="kobo.47.4">However, if you run into any issues, you can always refer to the code example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-125"><a id="_idTextAnchor130"/><span class="koboSpan" id="kobo.48.1">Introducing React Context</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.49.1">In the previous chapters, we passed down the </span><code class="inlineCode"><span class="koboSpan" id="kobo.50.1">username</span></code><span class="koboSpan" id="kobo.51.1"> state and </span><code class="inlineCode"><span class="koboSpan" id="kobo.52.1">setUsername</span></code><span class="koboSpan" id="kobo.53.1"> function from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.54.1">App</span></code><span class="koboSpan" id="kobo.55.1"> component to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.56.1">UserBar</span></code><span class="koboSpan" id="kobo.57.1"> component; and then from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.58.1">UserBar</span></code><span class="koboSpan" id="kobo.59.1"> component to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.60.1">Logout</span></code><span class="koboSpan" id="kobo.61.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.62.1">Login</span></code><span class="koboSpan" id="kobo.63.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.64.1">Register</span></code><span class="koboSpan" id="kobo.65.1"> components. </span><span class="koboSpan" id="kobo.65.2">React Context provides a solution to </span><a id="_idIndexMarker214"/><span class="koboSpan" id="kobo.66.1">this cumbersome way of passing down props over multiple levels of components, by allowing us to share values between components without having to explicitly pass them down via props. </span><span class="koboSpan" id="kobo.66.2">As we are going to see, contexts are perfect for sharing global state across the whole application.</span></p>
<h2 class="heading-2" id="_idParaDest-126"><a id="_idTextAnchor131"/><span class="koboSpan" id="kobo.67.1">Passing down props</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.68.1">Before learning about React Context in depth, let’s recap what we implemented in the earlier chapters </span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.69.1">to get a feeling for the problem that contexts solve. </span><span class="koboSpan" id="kobo.69.2">You do not need to edit any code at this point; these steps are just a recap of what we have already done. </span><span class="koboSpan" id="kobo.69.3">Just read along for the following steps:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.70.1">In </span><code class="inlineCode"><span class="koboSpan" id="kobo.71.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.72.1">, we defined the </span><code class="inlineCode"><span class="koboSpan" id="kobo.73.1">username</span></code><span class="koboSpan" id="kobo.74.1"> state and </span><code class="inlineCode"><span class="koboSpan" id="kobo.75.1">setUsername</span></code><span class="koboSpan" id="kobo.76.1"> function using a State Hook:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.77.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.78.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.79.1">App</span></span><span class="koboSpan" id="kobo.80.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.81.1">const</span></span><span class="koboSpan" id="kobo.82.1"> [posts, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.83.1">useReducer</span></span><span class="koboSpan" id="kobo.84.1">(postsReducer, defaultPosts)
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.85.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.86.1"> [username, setUsername] = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.87.1">useState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.88.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.89.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.90.1">)</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.91.1">Then, we passed the </span><code class="inlineCode"><span class="koboSpan" id="kobo.92.1">username</span></code><span class="koboSpan" id="kobo.93.1"> state and </span><code class="inlineCode"><span class="koboSpan" id="kobo.94.1">setUsername</span></code><span class="koboSpan" id="kobo.95.1"> function to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.96.1">UserBar</span></code><span class="koboSpan" id="kobo.97.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.98.1">return</span></span><span class="koboSpan" id="kobo.99.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.100.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.101.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.102.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.103.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.104.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.105.1">padding:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.106.1">8</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.107.1"> }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.108.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.109.1">UserBar</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.110.1">username</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.111.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.112.1">{username}</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.113.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.114.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.115.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.116.1"> /&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.117.1">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.118.1">src/user/UserBar.jsx</span></code><span class="koboSpan" id="kobo.119.1"> file, we defined a </span><code class="inlineCode"><span class="koboSpan" id="kobo.120.1">UserBar</span></code><span class="koboSpan" id="kobo.121.1"> component that takes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.122.1">username</span></code><span class="koboSpan" id="kobo.123.1"> state as a prop and then passes it down to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.124.1">Logout</span></code><span class="koboSpan" id="kobo.125.1"> component. </span><span class="koboSpan" id="kobo.125.2">We also </span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.126.1">passed down the </span><code class="inlineCode"><span class="koboSpan" id="kobo.127.1">setUsername</span></code><span class="koboSpan" id="kobo.128.1"> function to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.129.1">Logout</span></code><span class="koboSpan" id="kobo.130.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.131.1">Login</span></code><span class="koboSpan" id="kobo.132.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.133.1">Register</span></code><span class="koboSpan" id="kobo.134.1"> components:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.135.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.136.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.137.1">UserBar</span></span><span class="koboSpan" id="kobo.138.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.139.1">{ </span></span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.140.1">username, setUsername</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.141.1"> }</span></span><span class="koboSpan" id="kobo.142.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.143.1">if</span></span><span class="koboSpan" id="kobo.144.1"> (username) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.145.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.146.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.147.1">Logout</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.148.1">username</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.149.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.150.1">{username}</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.151.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.152.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.153.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.154.1"> /&gt;</span></span><span class="koboSpan" id="kobo.155.1">
  } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.156.1">else</span></span><span class="koboSpan" id="kobo.157.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.158.1">return</span></span><span class="koboSpan" id="kobo.159.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.160.1">&lt;&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.161.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.162.1">Login</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.163.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.164.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.165.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.166.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.167.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.168.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.169.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.170.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.171.1">Register</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.172.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.173.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.174.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.175.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.176.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.177.1">
    )
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.178.1">Finally, we used the </span><code class="inlineCode"><span class="koboSpan" id="kobo.179.1">setUsername</span></code><span class="koboSpan" id="kobo.180.1"> function and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.181.1">username</span></code><span class="koboSpan" id="kobo.182.1"> state in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.183.1">Logout</span></code><span class="koboSpan" id="kobo.184.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.185.1">Login</span></code><span class="koboSpan" id="kobo.186.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.187.1">Register</span></code><span class="koboSpan" id="kobo.188.1"> components:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.189.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.190.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.191.1">Login</span></span><span class="koboSpan" id="kobo.192.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.193.1">{ </span></span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.194.1">setUsername </span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.195.1">}</span></span><span class="koboSpan" id="kobo.196.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.197.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.198.1">handleSubmit</span></span><span class="koboSpan" id="kobo.199.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.200.1">e</span></span><span class="koboSpan" id="kobo.201.1">) {
    e.</span><span class="hljs-title"><span class="koboSpan" id="kobo.202.1">preventDefault</span></span><span class="koboSpan" id="kobo.203.1">()
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.204.1">const</span></span><span class="koboSpan" id="kobo.205.1"> username = e.</span><span class="hljs-property"><span class="koboSpan" id="kobo.206.1">target</span></span><span class="koboSpan" id="kobo.207.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.208.1">elements</span></span><span class="koboSpan" id="kobo.209.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.210.1">username</span></span><span class="koboSpan" id="kobo.211.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.212.1">value</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.213.1">setUsername</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.214.1">(username)</span></strong></span><span class="koboSpan" id="kobo.215.1">
  }
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.216.1">React Context allows us to skip </span><em class="italic"><span class="koboSpan" id="kobo.217.1">steps 2</span></em><span class="koboSpan" id="kobo.218.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.219.1">3</span></em><span class="koboSpan" id="kobo.220.1"> and jump straight from </span><em class="italic"><span class="koboSpan" id="kobo.221.1">step 1</span></em><span class="koboSpan" id="kobo.222.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.223.1">step 4</span></em><span class="koboSpan" id="kobo.224.1">. </span><span class="koboSpan" id="kobo.224.2">As you can imagine, in larger apps, context becomes even more useful because we might have to pass down props over many levels.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.225.1">In the </span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.226.1">next section, we are first going to learn how context works by implementing a theme system for our blog. </span><span class="koboSpan" id="kobo.226.2">Then, we will use React Context to deal with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.227.1">username</span></code><span class="koboSpan" id="kobo.228.1"> global state in our blog app.</span></p>
<h1 class="heading-1" id="_idParaDest-127"><a id="_idTextAnchor132"/><span class="koboSpan" id="kobo.229.1">Implementing themes via context</span></h1>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.230.1">React Context</span></strong><span class="koboSpan" id="kobo.231.1"> is used to share values across a tree of React components. </span><span class="koboSpan" id="kobo.231.2">Usually, we want to </span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.232.1">share global values, such as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.233.1">username</span></code><span class="koboSpan" id="kobo.234.1"> state, the </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.235.1">theme of our app, or the chosen language (if the app supports multiple languages).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.236.1">React Context consists of three parts:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.237.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.238.1">context</span></strong><span class="koboSpan" id="kobo.239.1"> itself, which </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.240.1">defines a default value and allows us to provide and consume values</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.241.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.242.1">provider</span></strong><span class="koboSpan" id="kobo.243.1">, which </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.244.1">provides (sets) the value</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.245.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.246.1">consumer</span></strong><span class="koboSpan" id="kobo.247.1">, which </span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.248.1">consumes (uses) the value</span></li>
</ul>
<h2 class="heading-2" id="_idParaDest-128"><a id="_idTextAnchor133"/><span class="koboSpan" id="kobo.249.1">Defining the context</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.250.1">First, we have to define the context. </span><span class="koboSpan" id="kobo.250.2">The way this works has not changed since Hooks were introduced. </span><span class="koboSpan" id="kobo.250.3">We simply use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.251.1">createContext(defaultValue)</span></code><span class="koboSpan" id="kobo.252.1"> function from React to create a </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.253.1">new context object. </span><span class="koboSpan" id="kobo.253.2">In this case, we will set the default value to </span><code class="inlineCode"><span class="koboSpan" id="kobo.254.1">{ primaryColor: 'maroon' }</span></code><span class="koboSpan" id="kobo.255.1">, so our default primary color, when no provider is defined, will be maroon.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.256.1">Now, let’s get started defining the context:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.257.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.258.1">Chapter04_2</span></code><span class="koboSpan" id="kobo.259.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.260.1">Chapter05_1</span></code><span class="koboSpan" id="kobo.261.1"> folder by executing the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.262.1">$ cp -R Chapter04_2 Chapter05_1
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.263.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.264.1">Chapter05_1</span></code><span class="koboSpan" id="kobo.265.1"> folder in VS Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.266.1">To keep our project clean as it grows, we are now extending the folder structure by grouping by base primitives first, then grouping by features within that folder. </span><span class="koboSpan" id="kobo.266.2">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.267.1">src/contexts/</span></code><span class="koboSpan" id="kobo.268.1"> folder now.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.269.1">Also, create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.270.1">src/components/</span></code><span class="koboSpan" id="kobo.271.1"> folder.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.272.1">Move the </span><code class="inlineCode"><span class="koboSpan" id="kobo.273.1">src/post/</span></code><span class="koboSpan" id="kobo.274.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.275.1">src/user/</span></code><span class="koboSpan" id="kobo.276.1"> folders into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.277.1">src/components/</span></code><span class="koboSpan" id="kobo.278.1"> folder.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.279.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.280.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.281.1"> and adjust the imports, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.282.1">import</span></span><span class="koboSpan" id="kobo.283.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.284.1">UserBar</span></span><span class="koboSpan" id="kobo.285.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.286.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.287.1">'./</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.288.1">components/</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.289.1">user/UserBar.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.290.1">import</span></span><span class="koboSpan" id="kobo.291.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.292.1">CreatePost</span></span><span class="koboSpan" id="kobo.293.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.294.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.295.1">'./</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.296.1">components/</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.297.1">post/CreatePost.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.298.1">import</span></span><span class="koboSpan" id="kobo.299.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.300.1">PostList</span></span><span class="koboSpan" id="kobo.301.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.302.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.303.1">'./</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.304.1">components/</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.305.1">post/PostList.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.306.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.307.1">src/contexts/ThemeContext.js</span></code><span class="koboSpan" id="kobo.308.1"> file. </span><span class="koboSpan" id="kobo.308.2">Inside it, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.309.1">createContext</span></code><span class="koboSpan" id="kobo.310.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.311.1">import</span></span><span class="koboSpan" id="kobo.312.1"> { createContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.313.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.314.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.315.1">Now, define the </span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.316.1">context with the aforementioned default value:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.317.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.318.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.319.1">ThemeContext</span></span><span class="koboSpan" id="kobo.320.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.321.1">createContext</span></span><span class="koboSpan" id="kobo.322.1">(
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.323.1">primaryColor</span></span><span class="koboSpan" id="kobo.324.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.325.1">'maroon'</span></span><span class="koboSpan" id="kobo.326.1"> }
)
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.327.1">When the context is consumed but no provider is defined, then it will return this default value.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.328.1">Note how we are exporting </span><code class="inlineCode"><span class="koboSpan" id="kobo.329.1">ThemeContext</span></code><span class="koboSpan" id="kobo.330.1"> here because we are going to need to import it later to create the provider and consume it using a Context Hook.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.331.1">That’s all we need to do to define a context with React.</span></p>
<h2 class="heading-2" id="_idParaDest-129"><a id="_idTextAnchor134"/><span class="koboSpan" id="kobo.332.1">Quick detour – absolute imports</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.333.1">If we were to import the context in a component now, we would have to import from </span><code class="inlineCode"><span class="koboSpan" id="kobo.334.1">../../contexts/ThemeContext.js</span></code><span class="koboSpan" id="kobo.335.1">. </span><span class="koboSpan" id="kobo.335.2">Besides the fact that it becomes hard to read when files are </span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.336.1">deeply nested, it can cause issues when organizing files into subfolders later. </span><span class="koboSpan" id="kobo.336.2">To avoid these problems, we can use </span><strong class="keyWord"><span class="koboSpan" id="kobo.337.1">absolute imports</span></strong><span class="koboSpan" id="kobo.338.1">. </span><span class="koboSpan" id="kobo.338.2">Absolute imports </span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.339.1">allow us to import from the root of a project. </span><span class="koboSpan" id="kobo.339.2">They are implemented using </span><strong class="keyWord"><span class="koboSpan" id="kobo.340.1">resolve aliases</span></strong><span class="koboSpan" id="kobo.341.1"> in Vite. </span><span class="koboSpan" id="kobo.341.2">Basically, we can tell Vite to resolve a special character, such as an </span><code class="inlineCode"><span class="koboSpan" id="kobo.342.1">@</span></code><span class="koboSpan" id="kobo.343.1"> symbol, to an absolute path to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.344.1">src</span></code><span class="koboSpan" id="kobo.345.1"> folder. </span><span class="koboSpan" id="kobo.345.2">This means that we can import the context from </span><code class="inlineCode"><span class="koboSpan" id="kobo.346.1">@/contexts/ThemeContext.js</span></code><span class="koboSpan" id="kobo.347.1"> instead.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.348.1">Let’s get started configuring absolute imports now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.349.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.350.1">vite.config.js</span></code><span class="koboSpan" id="kobo.351.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.352.1">path</span></code><span class="koboSpan" id="kobo.353.1"> utils:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.354.1">import</span></span><span class="koboSpan" id="kobo.355.1"> path </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.356.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.357.1">'node:path'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.358.1">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.359.1">config</span></code><span class="koboSpan" id="kobo.360.1"> object, add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.361.1">resolve</span></code><span class="koboSpan" id="kobo.362.1"> alias, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.363.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.364.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.365.1">defineConfig</span></span><span class="koboSpan" id="kobo.366.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.367.1">plugins</span></span><span class="koboSpan" id="kobo.368.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.369.1">react</span></span><span class="koboSpan" id="kobo.370.1">()],
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.371.1">resolve</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.372.1">: {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.373.1">alias</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.374.1">: [{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.375.1">find</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.376.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.377.1">'@'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.378.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.379.1">replacement</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.380.1">: </span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.381.1">      path.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.382.1">resolve</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.383.1">(</span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.384.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.385.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.386.1">meta</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.387.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.388.1">dirname</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.389.1">, </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.390.1">'src'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.391.1">) }],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.392.1">  },</span></strong></span><span class="koboSpan" id="kobo.393.1">
})
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.394.1">Additionally, we can improve autocompletion in our code editor or IDE by creating a </span><code class="inlineCode"><span class="koboSpan" id="kobo.395.1">jsconfig.json</span></code><span class="koboSpan" id="kobo.396.1"> file. </span><span class="koboSpan" id="kobo.396.2">This file will tell the editor about our absolute import </span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.397.1">configuration and let us easily import files from it. </span><span class="koboSpan" id="kobo.397.2">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.398.1">jsconfig.json</span></code><span class="koboSpan" id="kobo.399.1"> file now.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.400.1">Inside it, add the following config:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.401.1">{
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.402.1">"compilerOptions"</span></span><span class="koboSpan" id="kobo.403.1">: {
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.404.1">"baseUrl"</span></span><span class="koboSpan" id="kobo.405.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.406.1">"."</span></span><span class="koboSpan" id="kobo.407.1">,
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.408.1">"paths"</span></span><span class="koboSpan" id="kobo.409.1">: {
      </span><span class="hljs-string"><span class="koboSpan" id="kobo.410.1">"@/*"</span></span><span class="koboSpan" id="kobo.411.1">: [</span><span class="hljs-string"><span class="koboSpan" id="kobo.412.1">"./src/*"</span></span><span class="koboSpan" id="kobo.413.1">]
    }
  },
  </span><span class="hljs-string"><span class="koboSpan" id="kobo.414.1">"exclude"</span></span><span class="koboSpan" id="kobo.415.1">: [</span><span class="hljs-string"><span class="koboSpan" id="kobo.416.1">"node_modules"</span></span><span class="koboSpan" id="kobo.417.1">]
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.418.1">Now that we can use absolute imports, let’s continue defining the consumer.</span></p>
<h2 class="heading-2" id="_idParaDest-130"><a id="_idTextAnchor135"/><span class="koboSpan" id="kobo.419.1">Defining the consumer</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.420.1">To use </span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.421.1">a context, we need a consumer. </span><span class="koboSpan" id="kobo.421.2">Let’s first revisit the traditional way of defining a consumer before we get started using Hooks:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.422.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.423.1">src/components/post/Post.jsx</span></code><span class="koboSpan" id="kobo.424.1"> and import </span><code class="inlineCode"><span class="koboSpan" id="kobo.425.1">ThemeContext</span></code><span class="koboSpan" id="kobo.426.1"> there:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.427.1">import</span></span><span class="koboSpan" id="kobo.428.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.429.1">ThemeContext</span></span><span class="koboSpan" id="kobo.430.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.431.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.432.1">'@/contexts/ThemeContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.433.1">Wrap the whole component with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.434.1">ThemeContext.Consumer</span></code><span class="koboSpan" id="kobo.435.1"> component and a </span><strong class="keyWord"><span class="koboSpan" id="kobo.436.1">render function</span></strong><span class="koboSpan" id="kobo.437.1"> as its </span><code class="inlineCode"><span class="koboSpan" id="kobo.438.1">children</span></code><span class="koboSpan" id="kobo.439.1"> prop, to </span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.440.1">make use of the context value:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.441.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.442.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.443.1">Post</span></span><span class="koboSpan" id="kobo.444.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.445.1">{ title, content, author }</span></span><span class="koboSpan" id="kobo.446.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.447.1">return</span></span><span class="koboSpan" id="kobo.448.1"> (
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.449.1">    &lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.450.1">ThemeContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.451.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.452.1">Consumer</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.453.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.454.1">      {</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.455.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.456.1">theme</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.457.1">) =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.458.1"> (</span></strong></span>
</code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.459.1">The render function allows us to pass values down to the children of a component.</span></p>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.460.1">Inside the </span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.461.1">render function, we can now make use of the context value to set the color of the title of a blog post, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-tag"><span class="koboSpan" id="kobo.462.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.463.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.464.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.465.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.466.1">h3</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.467.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.468.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.469.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.470.1">color:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.471.1">theme.primaryColor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.472.1"> }}&gt;</span></span><span class="koboSpan" id="kobo.473.1">
            {title}
          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.474.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.475.1">h3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.476.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.477.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.478.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.479.1">&gt;</span></span><span class="koboSpan" id="kobo.480.1">{content}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.481.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.482.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.483.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.484.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.485.1">br</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.486.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.487.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.488.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.489.1">&gt;</span></span><span class="koboSpan" id="kobo.490.1">
            Written by </span><span class="hljs-tag"><span class="koboSpan" id="kobo.491.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.492.1">b</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.493.1">&gt;</span></span><span class="koboSpan" id="kobo.494.1">{author}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.495.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.496.1">b</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.497.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.498.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.499.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.500.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.501.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.502.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.503.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.504.1">      )}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.505.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.506.1">ThemeContext.Consumer</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.507.1">&gt;</span></strong></span><span class="koboSpan" id="kobo.508.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.509.1">Using contexts like this works, but as we have learned in the first chapter, using components with render functions in this way clutters the React tree and makes our app harder to debug and maintain.</span></p>
<h2 class="heading-2" id="_idParaDest-131"><a id="_idTextAnchor136"/><span class="koboSpan" id="kobo.510.1">Using Hooks to consume a context</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.511.1">A better way </span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.512.1">to consume contexts is using a Context Hook! </span><span class="koboSpan" id="kobo.512.2">That way, we can use context values like any other value.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.513.1">Follow these steps to change the consumer to a Context Hook:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.514.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.515.1">src/components/post/Post.jsx</span></code><span class="koboSpan" id="kobo.516.1"> and add the following import:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.517.1">import</span></span><span class="koboSpan" id="kobo.518.1"> { useContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.519.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.520.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.521.1">react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.522.1">Then, define a Context Hook, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.523.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.524.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.525.1">Post</span></span><span class="koboSpan" id="kobo.526.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.527.1">{ title, content, author }</span></span><span class="koboSpan" id="kobo.528.1">) {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.529.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.530.1"> theme = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.531.1">useContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.532.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.533.1">ThemeContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.534.1">)</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.535.1">Next, </span><em class="italic"><span class="koboSpan" id="kobo.536.1">remove</span></em><span class="koboSpan" id="kobo.537.1"> the following highlighted parts of the code:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.538.1">return</span></span><span class="koboSpan" id="kobo.539.1"> (
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.540.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.541.1">ThemeContext.Consumer</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.542.1">&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.543.1">      {(theme) =&gt; (</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.544.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.545.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.546.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.547.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.548.1">h3</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.549.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.550.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.551.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.552.1">color:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.553.1">theme.primaryColor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.554.1"> }}&gt;</span></span><span class="koboSpan" id="kobo.555.1">{title}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.556.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.557.1">h3</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.558.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.559.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.560.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.561.1">&gt;</span></span><span class="koboSpan" id="kobo.562.1">{content}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.563.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.564.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.565.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.566.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.567.1">br</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.568.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.569.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.570.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.571.1">&gt;</span></span><span class="koboSpan" id="kobo.572.1">
            Written by </span><span class="hljs-tag"><span class="koboSpan" id="kobo.573.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.574.1">b</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.575.1">&gt;</span></span><span class="koboSpan" id="kobo.576.1">{author}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.577.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.578.1">b</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.579.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.580.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.581.1">i</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.582.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.583.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.584.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.585.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.586.1">      )}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.587.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.588.1">ThemeContext.Consumer</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.589.1">&gt;</span></strong></span><span class="koboSpan" id="kobo.590.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.591.1">As you </span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.592.1">can see, using a Context Hook allows us to directly consume the value from the context and simply render the post without needing a wrapper component.</span></p>
<ol>
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.593.1">Start the blog app by executing the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.594.1">$ npm run dev
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.595.1">We can see that the title of blog posts is now maroon colored:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.596.1"><img alt="Figure 5.1 – Using a Context Hook to change the theme of our app" src="../Images/B31327_05_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.597.1">Figure 5.1 – Using a Context Hook to change the theme of our app</span></p>
<p class="normal"><span class="koboSpan" id="kobo.598.1">As we can see, the theme context successfully provides the color for the post title.</span></p>
<h2 class="heading-2" id="_idParaDest-132"><a id="_idTextAnchor137"/><span class="koboSpan" id="kobo.599.1">Defining the provider</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.600.1">Contexts use the default value that is passed to </span><code class="inlineCode"><span class="koboSpan" id="kobo.601.1">createContext</span></code><span class="koboSpan" id="kobo.602.1"> when there is no provider defined. </span><span class="koboSpan" id="kobo.602.2">For example, let’s imagine our component uses </span><code class="inlineCode"><span class="koboSpan" id="kobo.603.1">ThemeContext</span></code><span class="koboSpan" id="kobo.604.1"> and is rendered as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.605.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.606.1">Component</span></span><span class="koboSpan" id="kobo.607.1"> /&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.608.1">Then, </span><code class="inlineCode"><span class="koboSpan" id="kobo.609.1">primaryColor</span></code><span class="koboSpan" id="kobo.610.1"> will be set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.611.1">maroon</span></code><span class="koboSpan" id="kobo.612.1"> (we defined this earlier). </span><span class="koboSpan" id="kobo.612.2">This can be used as a fallback, for example, when the component is not embedded in the app but instead embedded in </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.613.1">an interactive style guide (such as Storybook).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.614.1">When there is a provider defined, they will use the value of the provider. </span><span class="koboSpan" id="kobo.614.2">Let’s render the component like this instead:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.615.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.616.1">ThemeContext</span></span><span class="koboSpan" id="kobo.617.1">.</span><span class="hljs-name"><span class="koboSpan" id="kobo.618.1">Provider</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.619.1">value</span></span><span class="koboSpan" id="kobo.620.1">={{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.621.1">primaryColor</span></span><span class="koboSpan" id="kobo.622.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.623.1">'black'</span></span><span class="koboSpan" id="kobo.624.1"> }}&gt;
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.625.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.626.1">Component</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.627.1"> /&gt;</span></span><span class="koboSpan" id="kobo.628.1">
&lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.629.1">ThemeContext</span></span><span class="koboSpan" id="kobo.630.1">.</span><span class="hljs-name"><span class="koboSpan" id="kobo.631.1">Provider</span></span><span class="koboSpan" id="kobo.632.1">&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.633.1">Then, </span><code class="inlineCode"><span class="koboSpan" id="kobo.634.1">primaryColor</span></code><span class="koboSpan" id="kobo.635.1"> will be set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.636.1">black</span></code><span class="koboSpan" id="kobo.637.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.638.1">If there are multiple providers in the tree, the components will use the value from the closest parent provider. </span><span class="koboSpan" id="kobo.638.2">For example, let’s say we render components like this:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.639.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.640.1">ThemeContext</span></span><span class="koboSpan" id="kobo.641.1">.</span><span class="hljs-name"><span class="koboSpan" id="kobo.642.1">Provider</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.643.1">value</span></span><span class="koboSpan" id="kobo.644.1">={{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.645.1">primaryColor</span></span><span class="koboSpan" id="kobo.646.1">: </span><span class="hljs-tag"><span class="koboSpan" id="kobo.647.1">'</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.648.1">black</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.649.1">'</span></span><span class="koboSpan" id="kobo.650.1"> }}&gt;
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.651.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.652.1">OtherComponent</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.653.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.654.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.655.1">ThemeContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.656.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.657.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.658.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.659.1">primaryColor:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.660.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.661.1">red</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.662.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.663.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.664.1">Component</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.665.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.666.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.667.1">ThemeContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.668.1">&gt;</span></span><span class="koboSpan" id="kobo.669.1">
&lt;/</span><span class="hljs-title"><span class="koboSpan" id="kobo.670.1">ThemeContext</span></span><span class="koboSpan" id="kobo.671.1">.</span><span class="hljs-name"><span class="koboSpan" id="kobo.672.1">Provider</span></span><span class="koboSpan" id="kobo.673.1">&gt;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.674.1">Then, </span><code class="inlineCode"><span class="koboSpan" id="kobo.675.1">primaryColor</span></code><span class="koboSpan" id="kobo.676.1"> in the component will be set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.677.1">red</span></code><span class="koboSpan" id="kobo.678.1">, as that is the provider closest to the component in the tree. </span><span class="koboSpan" id="kobo.678.2">However, </span><code class="inlineCode"><span class="koboSpan" id="kobo.679.1">OtherComponent</span></code><span class="koboSpan" id="kobo.680.1"> in this example will still have </span><code class="inlineCode"><span class="koboSpan" id="kobo.681.1">primaryColor</span></code><span class="koboSpan" id="kobo.682.1"> set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.683.1">black</span></code><span class="koboSpan" id="kobo.684.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.685.1">As we can see, a context without a provider is just a static value; the provider (especially in combination with other Hooks, such as a State Hook for the value) is what allows us to dynamically change the value of a context.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.686.1">Let’s define the provider now. </span><span class="koboSpan" id="kobo.686.2">Follow these steps to get started:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.687.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.688.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.689.1"> and import </span><code class="inlineCode"><span class="koboSpan" id="kobo.690.1">ThemeContext</span></code><span class="koboSpan" id="kobo.691.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.692.1">import</span></span><span class="koboSpan" id="kobo.693.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.694.1">ThemeContext</span></span><span class="koboSpan" id="kobo.695.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.696.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.697.1">'./contexts/ThemeContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.698.1">Then, wrap the contents of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.699.1">App</span></code><span class="koboSpan" id="kobo.700.1"> component with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.701.1">ThemeContext.Provider</span></code><span class="koboSpan" id="kobo.702.1"> component, and provide a value:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.703.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.704.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.705.1">App</span></span><span class="koboSpan" id="kobo.706.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.707.1">const</span></span><span class="koboSpan" id="kobo.708.1"> [posts, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.709.1">useReducer</span></span><span class="koboSpan" id="kobo.710.1">(postsReducer, defaultPosts)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.711.1">const</span></span><span class="koboSpan" id="kobo.712.1"> [username, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.713.1">useState</span></span><span class="koboSpan" id="kobo.714.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.715.1">''</span></span><span class="koboSpan" id="kobo.716.1">)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.717.1">return</span></span><span class="koboSpan" id="kobo.718.1"> (
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.719.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.720.1">ThemeContext.Provider</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.721.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.722.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.723.1">{{</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.724.1">primaryColor:</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.725.1"> '</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.726.1">black</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.727.1">'</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.728.1"> }}&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.729.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.730.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.731.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.732.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.733.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.734.1">padding:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.735.1">8</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.736.1"> }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.737.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.738.1">UserBar</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.739.1">username</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.740.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.741.1">{username}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.742.1">setUsername</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.743.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.744.1">{setUsername}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.745.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.746.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.747.1">br</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.748.1"> /&gt;</span></span><span class="koboSpan" id="kobo.749.1">
        {username &amp;&amp; </span><span class="hljs-tag"><span class="koboSpan" id="kobo.750.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.751.1">CreatePost</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.752.1">username</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.753.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.754.1">{username}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.755.1">dispatch</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.756.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.757.1">{dispatch}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.758.1"> /&gt;</span></span><span class="koboSpan" id="kobo.759.1">}
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.760.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.761.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.762.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.763.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.764.1">PostList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.765.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.766.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.767.1">{posts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.768.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.769.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.770.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.771.1">&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.772.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.773.1">ThemeContext.Provider</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.774.1">&gt;</span></strong></span><span class="koboSpan" id="kobo.775.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.776.1">As we can see, the post titles are now back to being rendered in black. </span><span class="koboSpan" id="kobo.776.2">If we want to change the value </span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.777.1">of our context, we can simply adjust the </span><code class="inlineCode"><span class="koboSpan" id="kobo.778.1">value</span></code><span class="koboSpan" id="kobo.779.1"> prop that is passed to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.780.1">provider</span></code><span class="koboSpan" id="kobo.781.1"> component. </span><span class="koboSpan" id="kobo.781.2">We could also, for example, use a State Hook to dynamically change the value of a context. </span><span class="koboSpan" id="kobo.781.3">We will try this later when we use a context for the global state.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.782.1">If we do not pass a </span><code class="inlineCode"><span class="koboSpan" id="kobo.783.1">value</span></code><span class="koboSpan" id="kobo.784.1"> prop to the provider, the default value of a context will </span><em class="italic"><span class="koboSpan" id="kobo.785.1">not</span></em><span class="koboSpan" id="kobo.786.1"> be used! </span><span class="koboSpan" id="kobo.786.2">If we define a provider without a </span><code class="inlineCode"><span class="koboSpan" id="kobo.787.1">value</span></code><span class="koboSpan" id="kobo.788.1"> prop, then the value of the context will be </span><code class="inlineCode"><span class="koboSpan" id="kobo.789.1">undefined</span></code><span class="koboSpan" id="kobo.790.1">.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.791.1">Now that we have defined a single provider for the context, let’s move on to defining multiple nested providers.</span></p>
<h2 class="heading-2" id="_idParaDest-133"><a id="_idTextAnchor138"/><span class="koboSpan" id="kobo.792.1">Nesting providers</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.793.1">With React </span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.794.1">Context, it is also possible to define multiple providers for the same context. </span><span class="koboSpan" id="kobo.794.2">Using this technique, we can override the context value in certain parts of our app. </span><span class="koboSpan" id="kobo.794.3">For example, let’s say we want to implement a featured posts section for our blog app. </span><span class="koboSpan" id="kobo.794.4">Then, we could do the following:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.795.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.796.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.797.1"> and define a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.798.1">featuredPosts</span></code><span class="koboSpan" id="kobo.799.1"> array:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.800.1">const</span></span><span class="koboSpan" id="kobo.801.1"> featuredPosts = [
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.802.1">title</span></span><span class="koboSpan" id="kobo.803.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.804.1">'React Context'</span></span><span class="koboSpan" id="kobo.805.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.806.1">content</span></span><span class="koboSpan" id="kobo.807.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.808.1">'Manage global state with ease!'</span></span><span class="koboSpan" id="kobo.809.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.810.1">author</span></span><span class="koboSpan" id="kobo.811.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.812.1">'Daniel Bugl'</span></span><span class="koboSpan" id="kobo.813.1">,
  },
]
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.814.1">Now, inside </span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.815.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.816.1">App</span></code><span class="koboSpan" id="kobo.817.1"> component, render a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.818.1">PostList</span></code><span class="koboSpan" id="kobo.819.1"> component rendering the </span><code class="inlineCode"><span class="koboSpan" id="kobo.820.1">featuredPosts</span></code><span class="koboSpan" id="kobo.821.1"> array, but wrap it inside another </span><code class="inlineCode"><span class="koboSpan" id="kobo.822.1">ThemeContext.Provider</span></code><span class="koboSpan" id="kobo.823.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.824.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.825.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.826.1">App</span></span><span class="koboSpan" id="kobo.827.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.828.1">const</span></span><span class="koboSpan" id="kobo.829.1"> [posts, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.830.1">useReducer</span></span><span class="koboSpan" id="kobo.831.1">(postsReducer, defaultPosts)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.832.1">const</span></span><span class="koboSpan" id="kobo.833.1"> [username, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.834.1">useState</span></span><span class="koboSpan" id="kobo.835.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.836.1">''</span></span><span class="koboSpan" id="kobo.837.1">)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.838.1">return</span></span><span class="koboSpan" id="kobo.839.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.840.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.841.1">ThemeContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.842.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.843.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.844.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.845.1">primaryColor:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.846.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.847.1">black</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.848.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.849.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.850.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.851.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.852.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.853.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.854.1">padding:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.855.1">8</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.856.1"> }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.857.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.858.1">UserBar</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.859.1">username</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.860.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.861.1">{username}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.862.1">setUsername</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.863.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.864.1">{setUsername}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.865.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.866.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.867.1">br</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.868.1"> /&gt;</span></span><span class="koboSpan" id="kobo.869.1">
        {username &amp;&amp; </span><span class="hljs-tag"><span class="koboSpan" id="kobo.870.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.871.1">CreatePost</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.872.1">username</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.873.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.874.1">{username}</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.875.1">dispatch</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.876.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.877.1">{dispatch}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.878.1"> /&gt;</span></span><span class="koboSpan" id="kobo.879.1">}
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.880.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.881.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.882.1"> /&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.883.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.884.1">ThemeContext.Provider</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.885.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.886.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.887.1">{{</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.888.1">primaryColor:</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.889.1"> '</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.890.1">salmon</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.891.1">' }}&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.892.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.893.1">PostList</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.894.1">posts</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.895.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.896.1">{featuredPosts}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.897.1"> /&gt;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.898.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.899.1">ThemeContext.Provider</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.900.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.901.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.902.1">PostList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.903.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.904.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.905.1">{posts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.906.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.907.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.908.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.909.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.910.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.911.1">ThemeContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.912.1">&gt;</span></span><span class="koboSpan" id="kobo.913.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.914.1">You will now see that the featured post has a different color from the other posts:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.915.1"><img alt="Figure 5.2 – Implementing featured posts by overriding context values with nested providers" src="../Images/B31327_05_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.916.1">Figure 5.2 – Implementing featured posts by overriding context values with nested providers</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.917.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.918.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.919.1">Chapter05/Chapter05_1</span></code><span class="koboSpan" id="kobo.920.1"> folder. </span><span class="koboSpan" id="kobo.920.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.921.1">README.md</span></code><span class="koboSpan" id="kobo.922.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-134"><a id="_idTextAnchor139"/><span class="koboSpan" id="kobo.923.1">Alternatives to contexts</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.924.1">We should be careful not to use React Context too often, as it makes reusing components </span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.925.1">more difficult. </span><span class="koboSpan" id="kobo.925.2">We should only use context when we need to access data in many components, which are at different nesting levels. </span><span class="koboSpan" id="kobo.925.3">Additionally, we need to make sure that we only use contexts for non-frequently changing data. </span><span class="koboSpan" id="kobo.925.4">Frequently changing values of contexts, especially contexts that are used high up in the component tree, may cause large parts of the component tree to re-render, resulting in performance problems. </span><span class="koboSpan" id="kobo.925.5">That is why, for frequently changing values, we should use a state management solution such as Jotai, Redux, or MobX instead. </span><span class="koboSpan" id="kobo.925.6">These state management solutions allow us to access small parts of the state in a fine-grained way and thus reduce the amount of re-renders. </span><span class="koboSpan" id="kobo.925.7">Good candidates for contexts are features such as theming and translation (i18n) systems.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.926.1">If we only want to avoid having to pass down props, in some cases, we can pass down the rendered component instead of the data. </span><span class="koboSpan" id="kobo.926.2">For example, let’s say we have a </span><code class="inlineCode"><span class="koboSpan" id="kobo.927.1">Page</span></code><span class="koboSpan" id="kobo.928.1"> component that renders a </span><code class="inlineCode"><span class="koboSpan" id="kobo.929.1">Header</span></code><span class="koboSpan" id="kobo.930.1"> component, which renders a </span><code class="inlineCode"><span class="koboSpan" id="kobo.931.1">Profile</span></code><span class="koboSpan" id="kobo.932.1"> component, which then renders an </span><code class="inlineCode"><span class="koboSpan" id="kobo.933.1">Avatar</span></code><span class="koboSpan" id="kobo.934.1"> component. </span><span class="koboSpan" id="kobo.934.2">We get a </span><code class="inlineCode"><span class="koboSpan" id="kobo.935.1">headerSize</span></code><span class="koboSpan" id="kobo.936.1"> prop passed to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.937.1">Page</span></code><span class="koboSpan" id="kobo.938.1"> component, which we need in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.939.1">Header</span></code><span class="koboSpan" id="kobo.940.1"> component, but also in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.941.1">Avatar</span></code><span class="koboSpan" id="kobo.942.1"> component:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.943.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.944.1">Page</span></span><span class="koboSpan" id="kobo.945.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.946.1">{ headerSize }</span></span><span class="koboSpan" id="kobo.947.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.948.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.949.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.950.1">Header</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.951.1">size</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.952.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.953.1">{headerSize}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.954.1"> /&gt;</span></span><span class="koboSpan" id="kobo.955.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.956.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.957.1">Header</span></span><span class="koboSpan" id="kobo.958.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.959.1">{ size }</span></span><span class="koboSpan" id="kobo.960.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.961.1">// ... </span><span class="koboSpan" id="kobo.961.2">makes use of size ...</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.962.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.963.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.964.1">Profile</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.965.1">size</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.966.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.967.1">{size}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.968.1"> /&gt;</span></span><span class="koboSpan" id="kobo.969.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.970.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.971.1">Profile</span></span><span class="koboSpan" id="kobo.972.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.973.1">{ size }</span></span><span class="koboSpan" id="kobo.974.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.975.1">// ... </span><span class="koboSpan" id="kobo.975.2">does not use size, only passes it down ...</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.976.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.977.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.978.1">Avatar</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.979.1">size</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.980.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.981.1">{size}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.982.1"> /&gt;</span></span><span class="koboSpan" id="kobo.983.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.984.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.985.1">Avatar</span></span><span class="koboSpan" id="kobo.986.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.987.1">{ size }</span></span><span class="koboSpan" id="kobo.988.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.989.1">// ... </span><span class="koboSpan" id="kobo.989.2">makes use of size ...</span></span><span class="koboSpan" id="kobo.990.1">
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.991.1">Instead of passing down props through multiple levels, we could do the following:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.992.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.993.1">Page</span></span><span class="koboSpan" id="kobo.994.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.995.1">{ headerSize }</span></span><span class="koboSpan" id="kobo.996.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.997.1">const</span></span><span class="koboSpan" id="kobo.998.1"> profile = (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.999.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1000.1">Profile</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1001.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1002.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1003.1">Avatar</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1004.1">size</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1005.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1006.1">{headerSize}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1007.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1008.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1009.1">Profile</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1010.1">&gt;</span></span><span class="koboSpan" id="kobo.1011.1">
  )
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1012.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.1013.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1014.1">Header</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1015.1">size</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1016.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1017.1">{headerSize}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1018.1">profile</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1019.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1020.1">{profile}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1021.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1022.1">
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1023.1">Now, only the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1024.1">Page</span></code><span class="koboSpan" id="kobo.1025.1"> component needs to know about the props, and there is no need to pass them down </span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.1026.1">further in the tree. </span><span class="koboSpan" id="kobo.1026.2">In this case, contexts are not necessary.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1027.1">Such a pattern </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.1028.1">is called </span><strong class="keyWord"><span class="koboSpan" id="kobo.1029.1">inversion of control</span></strong><span class="koboSpan" id="kobo.1030.1">, and it can make your code much cleaner than passing down props or using a context. </span><span class="koboSpan" id="kobo.1030.2">However, we should not always use this pattern either because it makes the higher-level component more complicated.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1031.1">Now, let’s continue by learning about using context for global state.</span></p>
<h1 class="heading-1" id="_idParaDest-135"><a id="_idTextAnchor140"/><span class="koboSpan" id="kobo.1032.1">Using context for global state</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1033.1">After learning how to use React Context to implement themes in our blog app, we are now going to </span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.1034.1">use a context to avoid having to manually pass down the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1035.1">username</span></code><span class="koboSpan" id="kobo.1036.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1037.1">setUsername</span></code><span class="koboSpan" id="kobo.1038.1"> props. </span><span class="koboSpan" id="kobo.1038.2">The user state is a global state, which means it is used across the whole app. </span><span class="koboSpan" id="kobo.1038.3">It also does not change frequently. </span><span class="koboSpan" id="kobo.1038.4">As such, it is a good candidate for using a context. </span><span class="koboSpan" id="kobo.1038.5">Like we did before, we start by defining the context.</span></p>
<h2 class="heading-2" id="_idParaDest-136"><a id="_idTextAnchor141"/><span class="koboSpan" id="kobo.1039.1">Defining the context</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1040.1">To define the context, we need to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1041.1">createContext</span></code><span class="koboSpan" id="kobo.1042.1"> function again. </span><span class="koboSpan" id="kobo.1042.2">In this case, we set the default </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.1043.1">value to an array with an empty string and a </span><strong class="keyWord"><span class="koboSpan" id="kobo.1044.1">no-op function</span></strong><span class="koboSpan" id="kobo.1045.1"> (a function that does nothing). </span><span class="koboSpan" id="kobo.1045.2">Later, when defining the provider, we will provide this array by using the result from the State Hook. </span><span class="koboSpan" id="kobo.1045.3">Remember, the State Hook returns an array like this: </span><code class="inlineCode"><span class="koboSpan" id="kobo.1046.1">[value, setValue]</span></code><span class="koboSpan" id="kobo.1047.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1048.1">Now, let’s get started defining the context:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1049.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1050.1">Chapter05_1</span></code><span class="koboSpan" id="kobo.1051.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1052.1">Chapter05_2</span></code><span class="koboSpan" id="kobo.1053.1"> folder by executing the following command:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1054.1">$ cp -R Chapter05_1 Chapter05_2
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1055.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1056.1">Chapter05_2</span></code><span class="koboSpan" id="kobo.1057.1"> folder in VS Code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1058.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1059.1">src/contexts/UserContext.js</span></code><span class="koboSpan" id="kobo.1060.1"> file. </span><span class="koboSpan" id="kobo.1060.2">Inside it, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1061.1">createContext</span></code><span class="koboSpan" id="kobo.1062.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1063.1">import</span></span><span class="koboSpan" id="kobo.1064.1"> { createContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1065.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1066.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1067.1">Now, define the context with the aforementioned default value, which imitates the return </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.1068.1">value of a State Hook, but with an empty string and a </span><strong class="keyWord"><span class="koboSpan" id="kobo.1069.1">no-op function</span></strong><span class="koboSpan" id="kobo.1070.1"> (a function that does nothing):
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1071.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1072.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1073.1">UserContext</span></span><span class="koboSpan" id="kobo.1074.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1075.1">createContext</span></span><span class="koboSpan" id="kobo.1076.1">(
  [</span><span class="hljs-string"><span class="koboSpan" id="kobo.1077.1">''</span></span><span class="koboSpan" id="kobo.1078.1">, </span><span class="hljs-function"><span class="koboSpan" id="kobo.1079.1">() =&gt;</span></span><span class="koboSpan" id="kobo.1080.1"> {}]
)
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.1081.1">When the context is consumed but no provider is defined, then it will return this default value.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1082.1">Now, let’s continue with defining the context provider.</span></p>
<h2 class="heading-2" id="_idParaDest-137"><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.1083.1">Defining the context provider</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1084.1">We have already created a State Hook for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1085.1">username </span></code><span class="koboSpan" id="kobo.1086.1">state. </span><span class="koboSpan" id="kobo.1086.2">We can now use the result from this </span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.1087.1">State Hook and pass it to the context provider so that any component in our app can make use of it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1088.1">Let’s get started defining the context provider now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1089.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1090.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.1091.1"> and import </span><code class="inlineCode"><span class="koboSpan" id="kobo.1092.1">UserContext</span></code><span class="koboSpan" id="kobo.1093.1">, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1094.1">import</span></span><span class="koboSpan" id="kobo.1095.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1096.1">UserContext</span></span><span class="koboSpan" id="kobo.1097.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1098.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1099.1">'./contexts/UserContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1100.1">Then, wrap the result of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1101.1">App</span></code><span class="koboSpan" id="kobo.1102.1"> component with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1103.1">UserContext.Provider</span></code><span class="koboSpan" id="kobo.1104.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1105.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1106.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1107.1">App</span></span><span class="koboSpan" id="kobo.1108.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1109.1">const</span></span><span class="koboSpan" id="kobo.1110.1"> [posts, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1111.1">useReducer</span></span><span class="koboSpan" id="kobo.1112.1">(postsReducer, defaultPosts)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1113.1">const</span></span><span class="koboSpan" id="kobo.1114.1"> [username, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1115.1">useState</span></span><span class="koboSpan" id="kobo.1116.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1117.1">''</span></span><span class="koboSpan" id="kobo.1118.1">)
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1119.1">return</span></span><span class="koboSpan" id="kobo.1120.1"> (
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1121.1">&lt;</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1122.1">UserContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1123.1">.</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1124.1">Provider</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-addition-slc"><span class="koboSpan" id="kobo.1125.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1126.1">={[</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1127.1">username</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1128.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1129.1">setUsername</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1130.1">]}&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1131.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1132.1">ThemeContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1133.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1134.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1135.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1136.1">primaryColor:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1137.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1138.1">black</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1139.1">' }}&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1140.1">Now, we can </span><em class="italic"><span class="koboSpan" id="kobo.1141.1">remove</span></em><span class="koboSpan" id="kobo.1142.1"> the following props we previously passed down:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-tag"><span class="koboSpan" id="kobo.1143.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1144.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1145.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1146.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1147.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1148.1">padding:</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1149.1">8</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1150.1"> }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1151.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1152.1">UserBar</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1153.1">username</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1154.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1155.1">{username}</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1156.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1157.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1158.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1159.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1160.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1161.1">br</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1162.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1163.1">
          {username &amp;&amp; </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1164.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1165.1">CreatePost</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1166.1">username</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1167.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1168.1">{username}</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1169.1">dispatch</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1170.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1171.1">{dispatch}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1172.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1173.1">}
          </span><span class="hljs-name"><span class="koboSpan" id="kobo.1174.1">&lt;hr /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1175.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1176.1">ThemeContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1177.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1178.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1179.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1180.1">primaryColor:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1181.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1182.1">salmon</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1183.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1184.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1185.1">PostList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1186.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1187.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1188.1">{featuredPosts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1189.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1190.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1191.1">ThemeContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1192.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1193.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1194.1">PostList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1195.1">posts</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1196.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1197.1">{posts}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1198.1"> /&gt;</span></span>
<span class="hljs-name"><span class="koboSpan" id="kobo.1199.1">&lt;/div&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1200.1">Do not </span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.1201.1">forget to add the closing tag for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1202.1">UserContext.Provider</span></code><span class="koboSpan" id="kobo.1203.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1204.1">      &lt;</span><span class="hljs-regexp"><span class="koboSpan" id="kobo.1205.1">/ThemeContext.Provider&gt;</span></span>
<span class="code-highlight"><strong class="hljs-regexp-slc"><span class="koboSpan" id="kobo.1206.1">    &lt;/</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1207.1">UserContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1208.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1209.1">Provider</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1210.1">&gt;</span></strong></span><span class="koboSpan" id="kobo.1211.1">
  )
}
</span></code></pre>
</li>
</ol>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.1212.1">Of course, it is also possible to use a similar pattern to pass the result of a Reducer Hook into a context.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.1213.1">The context provider now provides the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1214.1">username</span></code><span class="koboSpan" id="kobo.1215.1"> value and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1216.1">setUsername</span></code><span class="koboSpan" id="kobo.1217.1"> function to the rest of our app.</span></p>
<h2 class="heading-2" id="_idParaDest-138"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.1218.1">Refactoring the app to use UserContext</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1219.1">Now that we have a context provider, we can refactor the rest of our app to use the context instead of props.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1220.1">Follow </span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.1221.1">these steps to get started:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1222.1">First, edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1223.1">src/components/user/UserBar.jsx</span></code><span class="koboSpan" id="kobo.1224.1"> and add imports to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1225.1">useContext</span></code><span class="koboSpan" id="kobo.1226.1"> function and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1227.1">UserContext</span></code><span class="koboSpan" id="kobo.1228.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1229.1">import</span></span><span class="koboSpan" id="kobo.1230.1"> { useContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1231.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1232.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1233.1">import</span></span><span class="koboSpan" id="kobo.1234.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1235.1">UserContext</span></span><span class="koboSpan" id="kobo.1236.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1237.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1238.1">'@/contexts/UserContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1239.1">Then, </span><em class="italic"><span class="koboSpan" id="kobo.1240.1">remove</span></em><span class="koboSpan" id="kobo.1241.1"> the props passed to the component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1242.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1243.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1244.1">UserBar</span></span><span class="koboSpan" id="kobo.1245.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1246.1">{ username, setUsername }</span></strong></span><span class="koboSpan" id="kobo.1247.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1248.1">Next, define the Context Hook and get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1249.1">username</span></code><span class="koboSpan" id="kobo.1250.1"> value from it:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1251.1">const</span></span><span class="koboSpan" id="kobo.1252.1"> [username] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1253.1">useContext</span></span><span class="koboSpan" id="kobo.1254.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1255.1">UserContext</span></span><span class="koboSpan" id="kobo.1256.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1257.1">We can </span><a id="_idIndexMarker246"/><span class="koboSpan" id="kobo.1258.1">now </span><em class="italic"><span class="koboSpan" id="kobo.1259.1">remove</span></em><span class="koboSpan" id="kobo.1260.1"> the props passed down to the other components:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1261.1">if</span></span><span class="koboSpan" id="kobo.1262.1"> (username) {
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1263.1">    return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.1264.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1265.1">Logout</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1266.1">username</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1267.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1268.1">{username}</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1269.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1270.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1271.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1272.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1273.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1274.1">return</span></span><span class="koboSpan" id="kobo.1275.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1276.1">&lt;&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1277.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1278.1">Login</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1279.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1280.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1281.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1282.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1283.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1284.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1285.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1286.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1287.1">Register</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1288.1">setUsername</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1289.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1290.1">{setUsername}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1291.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1292.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1293.1">
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1294.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1295.1">src/components/user/Login.jsx</span></code><span class="koboSpan" id="kobo.1296.1"> and add an import of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1297.1">useContext</span></code><span class="koboSpan" id="kobo.1298.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1299.1">UserContext</span></code><span class="koboSpan" id="kobo.1300.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1301.1">import</span></span><span class="koboSpan" id="kobo.1302.1"> { useContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1303.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1304.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1305.1">import</span></span><span class="koboSpan" id="kobo.1306.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1307.1">UserContext</span></span><span class="koboSpan" id="kobo.1308.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1309.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1310.1">'@/contexts/UserContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1311.1">Then, </span><em class="italic"><span class="koboSpan" id="kobo.1312.1">remove</span></em><span class="koboSpan" id="kobo.1313.1"> the props from the component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1314.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1315.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1316.1">Login</span></span><span class="koboSpan" id="kobo.1317.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1318.1">{ setUsername }</span></strong></span><span class="koboSpan" id="kobo.1319.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1320.1">Add the Context Hook:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1321.1">const</span></span><span class="koboSpan" id="kobo.1322.1"> [, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1323.1">useContext</span></span><span class="koboSpan" id="kobo.1324.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1325.1">UserContext</span></span><span class="koboSpan" id="kobo.1326.1">)
</span></code></pre>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.1327.1">If we do not need the first element of an array, we can skip it when destructuring by simply putting a comma without specifying the name of the first variable.</span></p>
</div>
</li>
</ol>
<ol>
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.1328.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1329.1">src/components/user/Logout.jsx</span></code><span class="koboSpan" id="kobo.1330.1"> and add an import of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1331.1">useContext</span></code><span class="koboSpan" id="kobo.1332.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1333.1">UserContext</span></code><span class="koboSpan" id="kobo.1334.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1335.1">import</span></span><span class="koboSpan" id="kobo.1336.1"> { useState, useEffect, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1337.1">useContext</span></strong></span><span class="koboSpan" id="kobo.1338.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1339.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1340.1">'react'</span></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1341.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1342.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1343.1">UserContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1344.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1345.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1346.1">'@/contexts/UserContext.js'</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1347.1">Then, </span><em class="italic"><span class="koboSpan" id="kobo.1348.1">remove</span></em><span class="koboSpan" id="kobo.1349.1"> the props from the component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1350.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1351.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1352.1">Logout</span></span><span class="koboSpan" id="kobo.1353.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1354.1">{ username, setUsername }</span></strong></span><span class="koboSpan" id="kobo.1355.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1356.1">Add the </span><a id="_idIndexMarker247"/><span class="koboSpan" id="kobo.1357.1">Context Hook:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1358.1">const</span></span><span class="koboSpan" id="kobo.1359.1"> [username, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1360.1">useContext</span></span><span class="koboSpan" id="kobo.1361.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1362.1">UserContext</span></span><span class="koboSpan" id="kobo.1363.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1364.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1365.1">src/components/user/Register.jsx</span></code><span class="koboSpan" id="kobo.1366.1"> and add an import of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1367.1">useContext</span></code><span class="koboSpan" id="kobo.1368.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1369.1">UserContext</span></code><span class="koboSpan" id="kobo.1370.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1371.1">import</span></span><span class="koboSpan" id="kobo.1372.1"> { useState, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1373.1">useContext</span></strong></span><span class="koboSpan" id="kobo.1374.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1375.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1376.1">'react'</span></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1377.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1378.1"> { </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1379.1">UserContext</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1380.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1381.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1382.1">'@/contexts/UserContext.js'</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1383.1">Then, </span><em class="italic"><span class="koboSpan" id="kobo.1384.1">remove</span></em><span class="koboSpan" id="kobo.1385.1"> the props from the component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1386.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1387.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1388.1">Register</span></span><span class="koboSpan" id="kobo.1389.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1390.1">{ setUsername }</span></strong></span><span class="koboSpan" id="kobo.1391.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1392.1">Add the Context Hook:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1393.1">const</span></span><span class="koboSpan" id="kobo.1394.1"> [, setUsername] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1395.1">useContext</span></span><span class="koboSpan" id="kobo.1396.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1397.1">UserContext</span></span><span class="koboSpan" id="kobo.1398.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1399.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1400.1">src/components/post/CreatePost.jsx</span></code><span class="koboSpan" id="kobo.1401.1"> and add an import of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1402.1">useContext</span></code><span class="koboSpan" id="kobo.1403.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1404.1">UserContext</span></code><span class="koboSpan" id="kobo.1405.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1406.1">import</span></span><span class="koboSpan" id="kobo.1407.1"> { useContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1408.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1409.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1410.1">import</span></span><span class="koboSpan" id="kobo.1411.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1412.1">UserContext</span></span><span class="koboSpan" id="kobo.1413.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1414.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1415.1">'@/contexts/UserContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1416.1">Then, </span><em class="italic"><span class="koboSpan" id="kobo.1417.1">remove</span></em><span class="koboSpan" id="kobo.1418.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1419.1">username</span></code><span class="koboSpan" id="kobo.1420.1"> prop from the component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1421.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1422.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1423.1">CreatePost</span></span><span class="koboSpan" id="kobo.1424.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1425.1">{ </span></span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1426.1">username,</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.1427.1"> dispatch }</span></span><span class="koboSpan" id="kobo.1428.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1429.1">Add the Context Hook, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1430.1">const</span></span><span class="koboSpan" id="kobo.1431.1"> [username] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1432.1">useContext</span></span><span class="koboSpan" id="kobo.1433.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1434.1">UserContext</span></span><span class="koboSpan" id="kobo.1435.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1436.1">Start the app, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1437.1">$ npm run dev
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1438.1">Now, the app </span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.1439.1">works the same way as before, but our code is a lot cleaner and more concise, all thanks to React Context and the Context Hook!</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.1440.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.1441.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1442.1">Chapter05/Chapter05_2 </span></code><span class="koboSpan" id="kobo.1443.1">folder. </span><span class="koboSpan" id="kobo.1443.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1444.1">README.md</span></code><span class="koboSpan" id="kobo.1445.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-139"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.1446.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1447.1">In this chapter, we first learned about React Context as an alternative to passing down props over multiple levels of React components. </span><span class="koboSpan" id="kobo.1447.2">We then learned about context providers and consumers, and the new way to define consumers via Hooks. </span><span class="koboSpan" id="kobo.1447.3">We used what we learned in practice, by implementing theme support in our blog app. </span><span class="koboSpan" id="kobo.1447.4">Next, we learned when it does not make sense to use contexts, and when we should use inversion of control instead. </span><span class="koboSpan" id="kobo.1447.5">Finally, we used a context for the global </span><code class="inlineCode"><span class="koboSpan" id="kobo.1448.1">username</span></code><span class="koboSpan" id="kobo.1449.1"> state in our blog app.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1450.1">In the next chapter, we are going to learn how to request data from a server, using React and Hooks. </span><span class="koboSpan" id="kobo.1450.2">Then, we are going to learn about React Suspense, so that we do not have to wait for the requests to finish before rendering our app.</span></p>
<h1 class="heading-1" id="_idParaDest-140"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.1451.1">Questions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1452.1">To recap what we have learned in this chapter, try to answer the following questions:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1453.1">What problem do contexts avoid?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1454.1">What are the three parts that contexts consist of?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1455.1">Are all parts required to be defined in order to use contexts?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1456.1">What is the advantage of using Hooks instead of traditional context consumers?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1457.1">What is an alternative to contexts and when should we use it?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1458.1">How can we implement dynamically changing contexts?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1459.1">When does it make sense to use contexts for state?</span></li>
</ol>
<h1 class="heading-1" id="_idParaDest-141"><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.1460.1">Further reading</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1461.1">If you are interested in more information about the concepts that we have learned in this chapter, take a look at the following links:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1462.1">Official docs on React Context: </span><a href="https://react.dev/learn/passing-data-deeply-with-context"><span class="url"><span class="koboSpan" id="kobo.1463.1">https://react.dev/learn/passing-data-deeply-with-context</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1464.1">List of HTML color codes (if you want to adjust your theme): </span><a href="https://www.rapidtables.com/web/color/html-color-codes.html"><span class="url"><span class="koboSpan" id="kobo.1465.1">https://www.rapidtables.com/web/color/html-color-codes.html</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1466.1">Example of contexts for local state used by </span><code class="inlineCode"><span class="koboSpan" id="kobo.1467.1">react-aria</span></code><span class="koboSpan" id="kobo.1468.1">: </span><a href="https://react-spectrum.adobe.com/react-aria/advanced.html#contexts"><span class="url"><span class="koboSpan" id="kobo.1469.1">https://react-spectrum.adobe.com/react-aria/advanced.html#contexts</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1470.1">Example of contexts for global state used by </span><code class="inlineCode"><span class="koboSpan" id="kobo.1471.1">react-i18next</span></code><span class="koboSpan" id="kobo.1472.1">: </span><a href="https://react.i18next.com/latest/i18nextprovider"><span class="url"><span class="koboSpan" id="kobo.1473.1">https://react.i18next.com/latest/i18nextprovider</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.1474.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1475.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_05.xhtml"><span class="url"><span class="koboSpan" id="kobo.1476.1">https://packt.link/wnXT0</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.1477.1"><img alt="" src="../Images/image_%283%29.png"/></span></p>
</div>
</body></html>