<html><head></head><body>
		<div id="_idContainer111">
			<h1 id="_idParaDest-149" class="chapter-number"><a id="_idTextAnchor151"/>6</h1>
			<h1 id="_idParaDest-150"><a id="_idTextAnchor152"/>Routing with React Router</h1>
			<p>In this chapter, we will build a simple app implementing the <span class="No-Break">following pages:</span></p>
			<ul>
				<li>A home page that welcomes <span class="No-Break">the user</span></li>
				<li>A products list page that lists all <span class="No-Break">the products</span></li>
				<li>A product page that provides details about a <span class="No-Break">particular product</span></li>
				<li>An admin page for <span class="No-Break">privileged users</span></li>
			</ul>
			<p>This will all be managed using a library called <span class="No-Break"><strong class="bold">React Router</strong></span><span class="No-Break">.</span></p>
			<p>Through this, we will learn how to implement static links from the products list to the product page and implement route parameters on the product page for the product ID. We will also learn about form navigation and query parameters when it comes to the search feature of <span class="No-Break">our app.</span></p>
			<p>Finally, the chapter will end with how to lazily load code for a page to <span class="No-Break">improve performance.</span></p>
			<p>So, in this chapter, we will cover the <span class="No-Break">following topics:</span></p>
			<ul>
				<li>Introducing <span class="No-Break">React Router</span></li>
				<li><span class="No-Break">Declaring routes</span></li>
				<li><span class="No-Break">Creating navigation</span></li>
				<li>Using <span class="No-Break">nested routes</span></li>
				<li>Using <span class="No-Break">route parameters</span></li>
				<li>Creating an <span class="No-Break">error page</span></li>
				<li>Using <span class="No-Break">index routes</span></li>
				<li>Using <span class="No-Break">search parameters</span></li>
				<li><span class="No-Break">Navigating programmatically</span></li>
				<li>Using <span class="No-Break">form navigation</span></li>
				<li>Implementing <span class="No-Break">lazy loading</span></li>
			</ul>
			<h1 id="_idParaDest-151"><a id="_idTextAnchor153"/>Technical requirements</h1>
			<p>We will use the following technologies in <span class="No-Break">this chapter:</span></p>
			<ul>
				<li><strong class="bold">Browser</strong>: A modern browser such as <span class="No-Break">Google Chrome</span></li>
				<li><strong class="bold">Node.js</strong> and <strong class="bold">npm</strong>: You can install them <span class="No-Break">from </span><a href="https://nodejs.org/en/download/"><span class="No-Break">https://nodejs.org/en/download/</span></a></li>
				<li><strong class="bold">Visual Studio Code</strong>: You can install it <span class="No-Break">from </span><a href="https://code.visualstudio.com/"><span class="No-Break">https://code.visualstudio.com/</span></a></li>
			</ul>
			<p>All the code snippets in this chapter can be found online <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Learn-React-with-TypeScript-2nd-Edition/tree/main/Chapter6"><span class="No-Break">https://github.com/PacktPublishing/Learn-React-with-TypeScript-2nd-Edition/tree/main/Chapter6</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-152"><a id="_idTextAnchor154"/>Introducing React Router</h1>
			<p>In this section, we <a id="_idIndexMarker456"/>start by creating a new React project for the app before understanding what React Router is and how to <span class="No-Break">install it.</span></p>
			<h2 id="_idParaDest-153"><a id="_idTextAnchor155"/>Creating the project</h2>
			<p>We will develop the <a id="_idIndexMarker457"/>app locally using Visual Studio Code, which requires a new Create React App-based project setup. We have covered this several times, so we will not cover the steps in this chapter – instead, see <a href="B19051_03.xhtml#_idTextAnchor072"><span class="No-Break"><em class="italic">Chapter 3</em></span></a>, <em class="italic">Setting Up React and TypeScript</em>. Create the project for the app with a name of <span class="No-Break">your choice.</span></p>
			<p>We will style the app with Tailwind CSS. We covered how to install and configure Tailwind in Create React App in <a href="B19051_05.xhtml#_idTextAnchor127"><span class="No-Break"><em class="italic">Chapter 5</em></span></a>, <em class="italic">Approaches to Styling Frontends</em>, so after you have created the React and TypeScript project for the app, install and <span class="No-Break">configure Tailwind.</span></p>
			<h2 id="_idParaDest-154"><a id="_idTextAnchor156"/>Understanding React Router</h2>
			<p>As the name suggests, React<a id="_idIndexMarker458"/> Router is a routing library for React apps. A router is responsible for selecting what to show in the app for a requested path. For example, React Router is responsible for determining what components to render when a path of <strong class="source-inline">/products/6</strong> is requested. For any app containing multiple pages, a router is essential, and React Router has been a popular router library for React for <span class="No-Break">many years.</span></p>
			<h2 id="_idParaDest-155"><a id="_idTextAnchor157"/>Installing React Router</h2>
			<p>React Router is in a package<a id="_idIndexMarker459"/> called <strong class="source-inline">react-router-dom</strong>. Install this in the project using the following command in <span class="No-Break">the terminal:</span></p>
			<pre class="source-code">
npm i react-router-dom</pre>
			<p>TypeScript types are included in <strong class="source-inline">react-router-dom</strong>, so there is no need for a <span class="No-Break">separate installation.</span></p>
			<p>Next, we will create a page in the app and declare a route that <span class="No-Break">shows it.</span></p>
			<h1 id="_idParaDest-156"><a id="_idTextAnchor158"/>Declaring routes</h1>
			<p>We will start this section by creating a page<a id="_idIndexMarker460"/> component that lists the app’s products. We will then learn how to create a router and declare routes using React Router’s <span class="No-Break"><strong class="source-inline">createBrowserRouter</strong></span><span class="No-Break"> function.</span></p>
			<h2 id="_idParaDest-157"><a id="_idTextAnchor159"/>Creating the products list page</h2>
			<p>The products list page<a id="_idIndexMarker461"/> component will contain the list of the React tools in the app. Carry out the following steps to <span class="No-Break">create this:</span></p>
			<ol>
				<li>We will start by creating the data source for the page. First, create a folder called <strong class="source-inline">data</strong> in the <strong class="source-inline">src</strong> folder and then a file called <strong class="source-inline">products.ts</strong> <span class="No-Break">within </span><span class="No-Break"><strong class="source-inline">data</strong></span><span class="No-Break">.</span></li>
				<li>Add the following content into <strong class="source-inline">products.ts</strong> (you can copy and paste it from the GitHub<a id="_idIndexMarker462"/> repository <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Learn-React-with-TypeScript-2nd-Edition/blob/main/Chapter6/src/data/products.ts"><span class="No-Break">https://github.com/PacktPublishing/Learn-React-with-TypeScript-2nd-Edition/blob/main/Chapter6/src/data/products.ts</span></a><span class="No-Break">):</span><pre class="source-code">
export type Product = {</pre><pre class="source-code">
  id: number,</pre><pre class="source-code">
  name: string,</pre><pre class="source-code">
  description: string,</pre><pre class="source-code">
  price: number,</pre><pre class="source-code">
};</pre><pre class="source-code">
export const products: Product[] = [</pre><pre class="source-code">
  {</pre><pre class="source-code">
    description:</pre><pre class="source-code">
      'A collection of navigational components that         compose declaratively with your app',</pre><pre class="source-code">
    id: 1,</pre><pre class="source-code">
    name: 'React Router',</pre><pre class="source-code">
    price: 8,</pre><pre class="source-code">
  },</pre><pre class="source-code">
  {</pre><pre class="source-code">
    description: 'A library that helps manage state       across your app',</pre><pre class="source-code">
    id: 2,</pre><pre class="source-code">
    name: 'React Redux',</pre><pre class="source-code">
    price: 12,</pre><pre class="source-code">
  },</pre><pre class="source-code">
  {</pre><pre class="source-code">
    description: 'A library that helps you implement       robust forms',</pre><pre class="source-code">
    id: 3,</pre><pre class="source-code">
    name: 'React Hook Form',</pre><pre class="source-code">
    price: 9,</pre><pre class="source-code">
  },</pre><pre class="source-code">
  {</pre><pre class="source-code">
    description: 'A library that helps you interact with       a REST API',</pre><pre class="source-code">
    id: 4,</pre><pre class="source-code">
    name: 'React Apollo',</pre><pre class="source-code">
    price: 10,</pre><pre class="source-code">
  },</pre><pre class="source-code">
  {</pre><pre class="source-code">
    description: 'A library that provides utility CSS       classes',</pre><pre class="source-code">
    id: 5,</pre><pre class="source-code">
    name: 'Tailwind CSS',</pre><pre class="source-code">
    price: 7,</pre><pre class="source-code">
  },</pre><pre class="source-code">
];</pre></li>
			</ol>
			<p>This is a list of all the<a id="_idIndexMarker463"/> React tools in the app held in a <span class="No-Break">JavaScript array.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">Usually, this kind of data is on a server somewhere, but this adds complexity beyond the scope of this chapter. We cover how to interact with server data in detail in <a href="B19051_09.xhtml#_idTextAnchor220"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>, <em class="italic">Interacting with RESTful APIs</em>, including how to do this efficiently with <span class="No-Break">React Router.</span></p>
			<ol>
				<li value="3">We will create the<a id="_idIndexMarker464"/> products list page component now. First, create a folder for all the page components in the <strong class="source-inline">src</strong> folder called <strong class="source-inline">pages</strong>. Next, create a file called <strong class="source-inline">ProductsPage.tsx</strong> in the <strong class="source-inline">pages</strong> folder for the products list <span class="No-Break">page component.</span></li>
				<li>Add the following <strong class="source-inline">import</strong> statement into <strong class="source-inline">ProductsPage.tsx</strong> to import the products we <span class="No-Break">just created:</span><pre class="source-code">
import { products } from '../data/products';</pre></li>
				<li>Next, start to create the <strong class="source-inline">ProductsPage</strong> component by outputting a heading for <span class="No-Break">the page:</span><pre class="source-code">
export function ProductsPage() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;div className="text-center p-5"&gt;</pre><pre class="source-code">
      &lt;h2 className="text-xl font-bold text-slate-600"&gt;</pre><pre class="source-code">
        Here are some great tools for React</pre><pre class="source-code">
      &lt;/h2&gt;</pre><pre class="source-code">
    &lt;/div&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>This uses Tailwind classes to make the heading large, bold, gray, and <span class="No-Break">horizontally centered.</span></p>
			<ol>
				<li value="6">Next, add the list of the products in <span class="No-Break">the JSX:</span><pre class="source-code">
&lt;div className="text-center p-5 text-xl"&gt;</pre><pre class="source-code">
  &lt;h2 className="text-base text-slate-600"&gt;</pre><pre class="source-code">
    Here are some great tools for React</pre><pre class="source-code">
  &lt;/h2&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;ul className="list-none m-0 p-0"&gt;</strong></pre><pre class="source-code">
<strong class="bold">    {products.map((product) =&gt; (</strong></pre><pre class="source-code">
<strong class="bold">      &lt;li key={product.id} className="p-1 text-base text-        slate-800"&gt;</strong></pre><pre class="source-code">
<strong class="bold">        {product.name}</strong></pre><pre class="source-code">
<strong class="bold">      &lt;/li&gt;</strong></pre><pre class="source-code">
<strong class="bold">    ))}</strong></pre><pre class="source-code">
<strong class="bold">  &lt;/ul&gt;</strong></pre><pre class="source-code">
&lt;/div&gt;</pre></li>
			</ol>
			<p>The Tailwind classes <a id="_idIndexMarker465"/>remove the bullet points, margin, and padding from the unordered list element, and make the list <span class="No-Break">items gray.</span></p>
			<p>Notice that we use the products array <strong class="source-inline">map</strong> function to iterate over each product and return a <strong class="source-inline">li</strong> element. Using <strong class="source-inline">Array.map</strong> is common practice for JSX <span class="No-Break">looping logic.</span></p>
			<p>Notice the <strong class="source-inline">key</strong> prop on the list item elements. React requires this on elements in a loop to update the corresponding DOM elements efficiently. The value of the <strong class="source-inline">key</strong> prop must be unique and stable within the array, so we have used the <span class="No-Break">product ID.</span></p>
			<p>That completes the product page for now. This page won’t show in the app yet because it isn’t part of its component tree – we need to declare it as a page using React Router, which we’ll <span class="No-Break">do next.</span></p>
			<h2 id="_idParaDest-158"><a id="_idTextAnchor160"/>Understanding React Router’s router</h2>
			<p>A router in React Router is<a id="_idIndexMarker466"/> a component that tracks the browser’s URL and performs navigation. Several routers are available in React Router, and the one recommended for web <a id="_idIndexMarker467"/>applications is called a <strong class="bold">browser router</strong>. As its name suggests, the <strong class="source-inline">createBrowserRouter</strong> function creates a <span class="No-Break">browser router.</span></p>
			<p><strong class="source-inline">createBrowserRouter</strong> requires an argument containing all the <strong class="bold">routes</strong> in the application. A route contains a path and what component to render when the app’s browser address matches that path. The following code snippet creates a router with <span class="No-Break">two routes:</span></p>
			<pre class="source-code">
const router = createBrowserRouter([
  {
    path: 'some-page',
    element: &lt;SomePage /&gt;,
  },
  {
    path: 'another-page',
    element: &lt;AnotherPage /&gt;,
  }
]);</pre>
			<p>When the path is <strong class="source-inline">/some-page</strong>, the <strong class="source-inline">SomePage</strong> component will be rendered. When the path is <strong class="source-inline">/another-page</strong>, the <strong class="source-inline">AnotherPage</strong> component will <span class="No-Break">be rendered.</span></p>
			<p>The router returned by <strong class="source-inline">createBrowserRouter</strong> is passed to a <strong class="source-inline">RouterProvider</strong> component and placed high up in the React component tree, as <span class="No-Break">shown here:</span></p>
			<pre class="source-code">
const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  &lt;React.StrictMode&gt;
<strong class="bold">    &lt;RouterProvider router={router} /&gt;</strong>
  &lt;/React.StrictMode&gt;
);</pre>
			<p>Now that we are starting to <a id="_idIndexMarker468"/>understand React Router’s router, we will use it in <span class="No-Break">our project.</span></p>
			<h2 id="_idParaDest-159"><a id="_idTextAnchor161"/>Declaring the products route</h2>
			<p>We will declare the products list <a id="_idIndexMarker469"/>page in the app using <strong class="source-inline">createBrowserRouter</strong> and <strong class="source-inline">RouterProvider</strong>. Carry out the <span class="No-Break">following steps:</span></p>
			<ol>
				<li value="1">We will create our own component to hold all the route definitions. Create a file called <strong class="source-inline">Routes.tsx</strong> in the <strong class="source-inline">src</strong> folder containing the following <span class="No-Break"><strong class="source-inline">import</strong></span><span class="No-Break"> statements:</span><pre class="source-code">
import {</pre><pre class="source-code">
  createBrowserRouter,</pre><pre class="source-code">
  RouterProvider,</pre><pre class="source-code">
} from 'react-router-dom';</pre><pre class="source-code">
import { ProductsPage } from './pages/ProductsPage';</pre></li>
			</ol>
			<p>We have imported <strong class="source-inline">createBrowserRouter</strong> and <strong class="source-inline">RouterProvider</strong> from React Router. We have also imported <strong class="source-inline">ProductsPage</strong>, which we’ll render in a <strong class="source-inline">products</strong> <span class="No-Break">route next.</span></p>
			<ol>
				<li value="2">Add the following component underneath the <strong class="source-inline">import</strong> statements to define the router with a <span class="No-Break"><strong class="source-inline">products</strong></span><span class="No-Break"> route:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: 'products',</pre><pre class="source-code">
    element: &lt;ProductsPage /&gt;,</pre><pre class="source-code">
  },</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>So, the <strong class="source-inline">ProductsPage</strong> component will be rendered when the path <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">/products</strong></span><span class="No-Break">.</span></p>
			<ol>
				<li value="3">Still in <strong class="source-inline">Routes.tsx</strong>, create a component called <strong class="source-inline">Routes</strong> under the router <span class="No-Break">as follows:</span><pre class="source-code">
export function Routes() {</pre><pre class="source-code">
  return &lt;RouterProvider router={router} /&gt;;</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>This component <a id="_idIndexMarker470"/>wraps <strong class="source-inline">RouterProvider</strong> with the router passed <span class="No-Break">into it.</span></p>
			<ol>
				<li value="4">Open the <strong class="source-inline">index.tsx</strong> file and add an <strong class="source-inline">import</strong> statement for the <strong class="source-inline">Routes</strong> component we just created beneath the other <span class="No-Break"><strong class="source-inline">import</strong></span><span class="No-Break"> statements:</span><pre class="source-code">
import { Routes } from './Routes';</pre></li>
				<li>Render <strong class="source-inline">Routes</strong> instead of <strong class="source-inline">App</strong> as the top-level component <span class="No-Break">as follows:</span><pre class="source-code">
root.render(</pre><pre class="source-code">
  &lt;React.StrictMode&gt;</pre><pre class="source-code">
    &lt;Routes /&gt;</pre><pre class="source-code">
  &lt;/React.StrictMode&gt;</pre><pre class="source-code">
);</pre></li>
			</ol>
			<p>This causes the <strong class="source-inline">products</strong> route we defined to be part of the component tree. This means the products list page will be rendered in the app when the path <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">/products</strong></span><span class="No-Break">.</span></p>
			<ol>
				<li value="6">Remove the <strong class="source-inline">import</strong> statement for the <strong class="source-inline">App</strong> component, as this is not needed at <span class="No-Break">the moment.</span></li>
				<li>Run the app using <span class="No-Break"><strong class="source-inline">npm start</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>An error screen appears explaining that the current route <span class="No-Break">isn’t found:</span></p>
			<div>
				<div id="_idContainer093" class="IMG---Figure">
					<img src="image/B19051_06_01.jpg" alt="Figure 6.1 – React Router’s standard error page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.1 – React Router’s standard error page</p>
			<p>The error page is from<a id="_idIndexMarker471"/> React Router. As the error message suggests, we can provide our own error screen, which we will do later in <span class="No-Break">this chapter.</span></p>
			<ol>
				<li value="8">Change the browser URL <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">http://localhost:3000/products</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>You will see the products list page component rendered <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer094" class="IMG---Figure">
					<img src="image/B19051_06_02.jpg" alt="Figure 6.2 – Products list page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.2 – Products list page</p>
			<p>This confirms that the <strong class="source-inline">products</strong> route is working nicely. Keep the app running as we recap and move to the <span class="No-Break">next section.</span></p>
			<p>Here’s a recap of what we have learned in <span class="No-Break">this section:</span></p>
			<ul>
				<li>In a web app, routes in React Router are defined <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">createBrowserRouter</strong></span></li>
				<li>Each route has a path and a component to render when the browser’s URL matches <span class="No-Break">that path</span></li>
				<li>The router returned from <strong class="source-inline">createBrowserRouter</strong> is passed into a <strong class="source-inline">RouterProvider</strong> component, which should be placed high up in the <span class="No-Break">component tree</span></li>
			</ul>
			<p>For more information on <strong class="source-inline">createBrowserRouter</strong>, see the following link in the React Router documentation: <a href="https://reactrouter.com/en/main/routers/create-browser-router">https://reactrouter.com/en/main/routers/create-browser-router</a>. For more information on <strong class="source-inline">RouterProvider</strong>, see the following link in the React Router <span class="No-Break">documentation: </span><a href="https://reactrouter.com/en/main/routers/router-provider"><span class="No-Break">https://reactrouter.com/en/main/routers/router-provider</span></a><span class="No-Break">.</span></p>
			<p>Next, we will learn about <a id="_idIndexMarker472"/>React Router components that can <span class="No-Break">perform navigation.</span></p>
			<h1 id="_idParaDest-160"><a id="_idTextAnchor162"/>Creating navigation</h1>
			<p>React Router comes <a id="_idIndexMarker473"/>with components called <strong class="source-inline">Link</strong> and <strong class="source-inline">NavLink</strong>, which provide navigation. In this section, we will create a navigation bar at the top of the app containing the <strong class="source-inline">Link</strong> component from React Router. We will then swap <strong class="source-inline">Link</strong> for the <strong class="source-inline">NavLink</strong> component and understand the difference between the <span class="No-Break">two components.</span></p>
			<h2 id="_idParaDest-161"><a id="_idTextAnchor163"/>Using the Link component</h2>
			<p>Carry out the following steps to <a id="_idIndexMarker474"/>create an app header containing React <a id="_idIndexMarker475"/>Router’s <span class="No-Break"><strong class="source-inline">Link</strong></span><span class="No-Break"> component:</span></p>
			<ol>
				<li value="1">Start by creating a file for the app header called <strong class="source-inline">Header.tsx</strong> in the <strong class="source-inline">src</strong> folder containing the following <span class="No-Break"><strong class="source-inline">import</strong></span><span class="No-Break"> statements:</span><pre class="source-code">
import { Link } from 'react-router-dom';</pre><pre class="source-code">
import logo from './logo.svg';</pre></li>
			</ol>
			<p>We have imported the <strong class="source-inline">Link</strong> component from <span class="No-Break">React Router.</span></p>
			<p>We have also imported the React logo because we will include this in the app header with the <span class="No-Break">navigation options.</span></p>
			<ol>
				<li value="2">Create the <strong class="source-inline">Header</strong> component <span class="No-Break">as follows:</span><pre class="source-code">
export function Header() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;header className="text-center text-slate-50       bg-slate-900 h-40 p-5"&gt;</pre><pre class="source-code">
      &lt;img</pre><pre class="source-code">
        src={logo}</pre><pre class="source-code">
        alt="Logo"</pre><pre class="source-code">
        className="inline-block h-20"</pre><pre class="source-code">
      /&gt;</pre><pre class="source-code">
      &lt;h1 className="text-2xl"&gt;React Tools&lt;/h1&gt;</pre><pre class="source-code">
      &lt;nav&gt;&lt;/nav&gt;</pre><pre class="source-code">
    &lt;/header&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The component contains a <strong class="source-inline">header</strong> element containing the React logo, the app title, and an <a id="_idIndexMarker476"/>empty <strong class="source-inline">nav</strong> element. We have used Tailwind classes<a id="_idIndexMarker477"/> to make the header gray with the logo and title <span class="No-Break">horizontally centered.</span></p>
			<ol>
				<li value="3">Now, create a link inside the <span class="No-Break"><strong class="source-inline">nav</strong></span><span class="No-Break"> element:</span><pre class="source-code">
&lt;nav&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;Link</strong></pre><pre class="source-code">
<strong class="bold">    to="products"</strong></pre><pre class="source-code">
<strong class="bold">    className="text-white no-underline p-1"</strong></pre><pre class="source-code">
<strong class="bold">  &gt;</strong></pre><pre class="source-code">
<strong class="bold">    Products</strong></pre><pre class="source-code">
<strong class="bold">  &lt;/Link&gt;</strong></pre><pre class="source-code">
&lt;/nav&gt;</pre></li>
			</ol>
			<p>The <strong class="source-inline">Link</strong> component has a <strong class="source-inline">to</strong> prop that defines the path to navigate to. The text to display can be specified in<a id="_idIndexMarker478"/> the <span class="No-Break"><strong class="source-inline">Link</strong></span><span class="No-Break"> content.</span></p>
			<ol>
				<li value="4">Open <strong class="source-inline">Routes.tsx</strong> and add<a id="_idIndexMarker479"/> an import statement for the <strong class="source-inline">Header</strong> component we <span class="No-Break">just created:</span><pre class="source-code">
import { Header } from './Header';</pre></li>
				<li>In the <strong class="source-inline">router</strong> definition, add a root path that renders the <strong class="source-inline">Header</strong> component <span class="No-Break">as follows:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  <strong class="bold">{</strong></pre><pre class="source-code">
<strong class="bold">    path: '/',</strong></pre><pre class="source-code">
<strong class="bold">    element: &lt;Header /&gt;,</strong></pre><pre class="source-code">
<strong class="bold">  },</strong></pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: 'products',</pre><pre class="source-code">
    element: &lt;ProductsPage /&gt;,</pre><pre class="source-code">
  },</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>What we have just done isn’t ideal because the <strong class="source-inline">Header</strong> component needs to show on all routes and not just the root route. However, it will allow us to explore React Router’s <strong class="source-inline">Link</strong> component. We will tidy this up in the <em class="italic">Using nested </em><span class="No-Break"><em class="italic">routes</em></span><span class="No-Break"> section.</span></p>
			<ol>
				<li value="6">In the running app, change the browser address to the root of the app. The new app header appears, containing the <span class="No-Break"><strong class="bold">Products</strong></span><span class="No-Break"> link:</span></li>
			</ol>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="image/B19051_06_03.jpg" alt="Figure 6.3 – App header"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.3 – App header</p>
			<ol>
				<li value="7">Now, inspect the<a id="_idIndexMarker480"/> app header elements using the <span class="No-Break">browser’s DevTools:</span></li>
			</ol>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="image/B19051_06_04.jpg" alt="Figure 6.4 – Header component inspection"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.4 – Header component inspection</p>
			<p>We can see that the <strong class="source-inline">Link</strong> component is<a id="_idIndexMarker481"/> rendered as an HTML <span class="No-Break">anchor element.</span></p>
			<ol>
				<li value="8">Select the <strong class="bold">Network</strong> tab in DevTools and clear any existing requests that are shown. Click on the <strong class="bold">Products</strong> link in the app header. The browser will navigate to the products <span class="No-Break">list page.</span></li>
			</ol>
			<p>Notice that a network request wasn’t made for the products list page. This is because React Router overrides the anchor element’s default behavior with <span class="No-Break">client-side navigation:</span></p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="image/B19051_06_05.jpg" alt="Figure 6.5 – Client-side navigation"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.5 – Client-side navigation</p>
			<p>Finally, notice that the app <a id="_idIndexMarker482"/>header disappears on the products list page, which is not what we want. We <a id="_idIndexMarker483"/>will resolve this in the <em class="italic">Using nested </em><span class="No-Break"><em class="italic">routes</em></span><span class="No-Break"> section.</span></p>
			<p>Keep the app running as we move to the <span class="No-Break">next section.</span></p>
			<p>The navigation is working well but it would be nice if the <strong class="bold">Products</strong> link had a different style when the products list page was active. We will make this <span class="No-Break">improvement next.</span></p>
			<h2 id="_idParaDest-162"><a id="_idTextAnchor164"/>Using the NavLink component</h2>
			<p>React Router’s <strong class="source-inline">NavLink</strong> is like a <strong class="source-inline">Link</strong> element but<a id="_idIndexMarker484"/> allows it to be styled differently <a id="_idIndexMarker485"/>when active. This is really handy for a <span class="No-Break">navigation bar.</span></p>
			<p>Carry out the following steps to replace <strong class="source-inline">Link</strong> with <strong class="source-inline">NavLink</strong> in the <span class="No-Break">app header:</span></p>
			<ol>
				<li value="1">Open <strong class="source-inline">Header.tsx</strong> and change the <strong class="source-inline">Link</strong> references <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">NavLink</strong></span><span class="No-Break">:</span><pre class="source-code">
import { <strong class="bold">NavLink</strong> } from 'react-router-dom';</pre><pre class="source-code">
...</pre><pre class="source-code">
export function Header() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;header ...&gt;</pre><pre class="source-code">
      ...</pre><pre class="source-code">
      &lt;nav&gt;</pre><pre class="source-code">
        &lt;<strong class="bold">NavLink</strong></pre><pre class="source-code">
          to="products"</pre><pre class="source-code">
          className="..."</pre><pre class="source-code">
        &gt;</pre><pre class="source-code">
          Products</pre><pre class="source-code">
        &lt;/<strong class="bold">NavLink</strong>&gt;</pre><pre class="source-code">
      &lt;/nav&gt;</pre><pre class="source-code">
    &lt;/header&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The app header will look <a id="_idIndexMarker486"/>and behave exactly the same at <span class="No-Break">the moment.</span></p>
			<ol>
				<li value="2">The <strong class="source-inline">className</strong> prop on the <strong class="source-inline">NavLink</strong> component <a id="_idIndexMarker487"/>accepts a function that can be used to conditionally style it, depending on whether its page is active. Update the <strong class="source-inline">className</strong> attribute to <span class="No-Break">the following:</span><pre class="source-code">
&lt;NavLink</pre><pre class="source-code">
  to="products"</pre><pre class="source-code">
  className=<strong class="bold">{({ isActive }) =&gt;</strong></pre><pre class="source-code">
<strong class="bold">    `text-white no-underline p-1 pb-0.5 border-solid        border-b-2 ${</strong></pre><pre class="source-code">
<strong class="bold">      isActive ? "border-white" : "border-transparent"</strong></pre><pre class="source-code">
<strong class="bold">    }`</strong></pre><pre class="source-code">
<strong class="bold">  }</strong></pre><pre class="source-code">
&gt;</pre><pre class="source-code">
  Products</pre><pre class="source-code">
&lt;/NavLink&gt;</pre></li>
			</ol>
			<p>The function takes in a parameter, <strong class="source-inline">isActive</strong>, for defining whether the link’s page is active. We’ve added a bottom border to the link if it <span class="No-Break">is active.</span></p>
			<p>We can’t see the impact of this change just yet, because the <strong class="bold">Products</strong> link doesn’t appear on the <a id="_idIndexMarker488"/>products list page yet. We will resolve this in the <span class="No-Break">next section.</span></p>
			<p>That completes the app header and <a id="_idIndexMarker489"/>our exploration of the <span class="No-Break"><strong class="source-inline">NavLink</strong></span><span class="No-Break"> component.</span></p>
			<p>To recap, <strong class="source-inline">NavLink</strong> is great for main app navigation when we want to highlight an active link, and <strong class="source-inline">Link</strong> is great for all the other links in <span class="No-Break">our app.</span></p>
			<p>For more information on the <strong class="source-inline">Link</strong> component, see the following link: <a href="https://reactrouter.com/en/main/components/link">https://reactrouter.com/en/main/components/link</a>. For more information on the <strong class="source-inline">NavLink</strong> component, see the following <span class="No-Break">link: </span><a href="https://reactrouter.com/en/main/components/nav-link"><span class="No-Break">https://reactrouter.com/en/main/components/nav-link</span></a><span class="No-Break">.</span></p>
			<p>Next, we will learn about <span class="No-Break">nested routes.</span></p>
			<h1 id="_idParaDest-163"><a id="_idTextAnchor165"/>Using nested routes</h1>
			<p>In this section, we will cover <strong class="bold">nested routes</strong> and the situations in which they are useful, before using a nested route in<a id="_idIndexMarker490"/> our app. The nested route will also resolve the disappearing app header problem we experienced in the <span class="No-Break">previous sections.</span></p>
			<h2 id="_idParaDest-164"><a id="_idTextAnchor166"/>Understanding nested routes</h2>
			<p>A nested route allows a segment of a route to render <a id="_idIndexMarker491"/>a component. For example, the following mock-up is commonly implemented using <span class="No-Break">nested routes:</span></p>
			<div>
				<div id="_idContainer098" class="IMG---Figure">
					<img src="image/B19051_06_06.jpg" alt="Figure 6.6 – Use case for nested routes"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.6 – Use case for nested routes</p>
			<p>The mock-up displays information <a id="_idIndexMarker492"/>about a customer. The path determines the active tab – in the mockup, <strong class="bold">Profile</strong> is the active tab because that is the last segment in the path. If the user selects the <strong class="bold">History</strong> tab, the path would change <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">/customers/1234/history</strong></span><span class="No-Break">.</span></p>
			<p>A <strong class="source-inline">Customer</strong> component could render the shell of this screen, including the customer’s name, picture, and tab headings. The component that renders the tab contents could be decoupled from the <strong class="source-inline">Customer</strong> component and coupled to the <span class="No-Break">path instead.</span></p>
			<p>This feature<a id="_idIndexMarker493"/> is referred to as <em class="italic">nested routes</em> because <strong class="source-inline">Route</strong> components are nested inside each other. Here’s what the routes for the mock-up <span class="No-Break">could be:</span></p>
			<pre class="source-code">
const router = createBrowserRouter([
  {
    path: 'customer/:id',
    element: &lt;Customer /&gt;,
    <strong class="bold">children: [</strong>
<strong class="bold">      {</strong>
<strong class="bold">        path: 'profile',</strong>
<strong class="bold">        element: &lt;CustomerProfile /&gt;,</strong>
<strong class="bold">      },</strong>
<strong class="bold">      {</strong>
<strong class="bold">        path: 'history',</strong>
<strong class="bold">        element: &lt;CustomerHistory /&gt;,</strong>
<strong class="bold">      },</strong>
<strong class="bold">      {</strong>
<strong class="bold">        path: 'tasks',</strong>
<strong class="bold">        element: &lt;CustomerTasks /&gt;,</strong>
<strong class="bold">      },</strong>
<strong class="bold">    ],</strong>
  },
]);</pre>
			<p>This nested approach to defining <a id="_idIndexMarker494"/>routes makes them easy to read and understand, as you can see in the preceding <span class="No-Break">code snippet.</span></p>
			<p>A critical part of nested routes is where child components are rendered in their parent. In the preceding code snippet, where would the <strong class="source-inline">CustomerProfile</strong> component be rendered in the <strong class="source-inline">Customer</strong> component? The solution is React Router’s <strong class="source-inline">Outlet</strong> component. Here’s an example of <strong class="source-inline">Outlet</strong> in the <strong class="source-inline">Customer</strong> component from <span class="No-Break">the mock-up:</span></p>
			<pre class="source-code">
export function Customer() {
  ...
  return (
    &lt;div&gt;
      &lt;Name ... /&gt;
      &lt;Picture ... /&gt;
      &lt;nav&gt;
        &lt;NavLink to="profile" ... &gt;Profile&lt;/NavLink&gt;
        &lt;NavLink to="history" ... &gt;History&lt;/NavLink&gt;
        &lt;NavLink to="tasks" ... &gt;Tasks&lt;/NavLink&gt;
      &lt;/nav&gt;
      <strong class="bold">&lt;Outlet /&gt;</strong>
    &lt;/div&gt;
  );
}</pre>
			<p>So, in this example, the <strong class="source-inline">CustomerProfile</strong> component would be rendered after the navigation options in the <strong class="source-inline">Customer</strong> component. Notice that the <strong class="source-inline">Customer</strong> component is decoupled from<a id="_idIndexMarker495"/> the nested content. This means new tabs can be added to the customer page without changing the <strong class="source-inline">Customer</strong> component. This is another benefit of <span class="No-Break">nested routes.</span></p>
			<p>Next, we will use a nested route within <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-165"><a id="_idTextAnchor167"/>Using nested routes in the app</h2>
			<p>In our app, we will use the <strong class="source-inline">App</strong> component<a id="_idIndexMarker496"/> for the app’s shell, which renders the root path. We will then nest the products list page <span class="No-Break">within this:</span></p>
			<ol>
				<li value="1">Open <strong class="source-inline">App.tsx</strong> and replace all the existing content with <span class="No-Break">the following:</span><pre class="source-code">
import { Outlet } from 'react-router-dom';</pre><pre class="source-code">
import { Header } from './Header';</pre><pre class="source-code">
export default function App() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;&gt;</pre><pre class="source-code">
      &lt;Header /&gt;</pre><pre class="source-code">
      &lt;Outlet /&gt;</pre><pre class="source-code">
    &lt;/&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The component renders the<a id="_idIndexMarker497"/> app header with nested content <span class="No-Break">underneath it.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">The empty JSX elements, <strong class="source-inline">&lt;&gt;</strong> and <strong class="source-inline">&lt;/&gt;</strong>, are <strong class="bold">React fragments</strong>. React fragments are not added to the DOM and are used as a workaround to<a id="_idIndexMarker498"/> React components only being able to return a single element, so they are a way of returning multiple elements in a React component that keeps <span class="No-Break">React happy.</span></p>
			<ol>
				<li value="2">Open <strong class="source-inline">Routes.tsx</strong>, import the <strong class="source-inline">App</strong> component we just modified, and remove the <strong class="source-inline">import</strong> component <span class="No-Break">for </span><span class="No-Break"><strong class="source-inline">Header</strong></span><span class="No-Break">:</span><pre class="source-code">
import {</pre><pre class="source-code">
  createBrowserRouter,</pre><pre class="source-code">
  RouterProvider,</pre><pre class="source-code">
} from 'react-router-dom';</pre><pre class="source-code">
import { ProductsPage } from './pages/ProductsPage5';</pre><pre class="source-code">
<strong class="bold">import App from './App';</strong></pre></li>
				<li>Update the <strong class="source-inline">router</strong> definition <span class="No-Break">as follows:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    <strong class="bold">path: '/',</strong></pre><pre class="source-code">
<strong class="bold">    element: &lt;App /&gt;,</strong></pre><pre class="source-code">
<strong class="bold">    children: [</strong></pre><pre class="source-code">
<strong class="bold">      {</strong></pre><pre class="source-code">
        path: 'products',</pre><pre class="source-code">
        element: &lt;ProductsPage /&gt;,</pre><pre class="source-code">
      <strong class="bold">}</strong></pre><pre class="source-code">
<strong class="bold">    ]</strong></pre><pre class="source-code">
  }</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>The products list page is <a id="_idIndexMarker499"/>now nested inside the <span class="No-Break"><strong class="source-inline">App</strong></span><span class="No-Break"> component.</span></p>
			<ol>
				<li value="4">If you return to the running app, you will see that the app header now appears on the products list page. You will also see the <strong class="bold">Products</strong> link underlined because it is an <span class="No-Break">active link:</span></li>
			</ol>
			<div>
				<div id="_idContainer099" class="IMG---Figure">
					<img src="image/B19051_06_07.jpg" alt="Figure 6.7 – App header on the products list page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.7 – App header on the products list page</p>
			<p>To recap, nested routes allow components to be rendered for different path segments. An <strong class="source-inline">Outlet</strong> component is to<a id="_idIndexMarker500"/> render nested content within a <span class="No-Break">parent component.</span></p>
			<p>For more information on the <strong class="source-inline">Outlet</strong> component, see the following <span class="No-Break">link: </span><a href="https://reactrouter.com/en/main/components/outlet"><span class="No-Break">https://reactrouter.com/en/main/components/outlet</span></a><span class="No-Break">.</span></p>
			<p>Next, we will learn about <span class="No-Break">route parameters.</span></p>
			<h1 id="_idParaDest-166"><a id="_idTextAnchor168"/>Using route parameters</h1>
			<p>In this section, we will understand <strong class="bold">route parameters</strong> and how they are useful before using a route parameter in <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-167"><a id="_idTextAnchor169"/>Understanding route parameters</h2>
			<p>A route parameter is a<a id="_idIndexMarker501"/> segment in the path that varies. The value of the variable segment is available to components so that they can render <span class="No-Break">something conditionally.</span></p>
			<p>In the following path, <strong class="source-inline">1234</strong> is the ID of a <span class="No-Break">customer: </span><span class="No-Break"><strong class="source-inline">/customers/1234/</strong></span><span class="No-Break">.</span></p>
			<p>This can be defined as a route parameter in a route <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
{ path: '/customer/<strong class="bold">:id</strong>', element: &lt;Customer /&gt; }</pre>
			<p>A colon (<strong class="source-inline">:</strong>) followed by a name defines a route parameter. It is up to us to choose a parameter name that makes sense, so the <strong class="source-inline">:id</strong> segment in the path is the route parameter definition in the <span class="No-Break">preceding route.</span></p>
			<p>Multiple route parameters can be used in a path <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
{
  path: '/customer/<strong class="bold">:customerId</strong>/tasks/<strong class="bold">:taskId</strong>',
  element: &lt;CustomerTask /&gt;,
}</pre>
			<p>Route parameter names obviously have to be unique within <span class="No-Break">a path.</span></p>
			<p>Route parameters are available to components using React Router’s <strong class="source-inline">useParams</strong> hook. The following code snippet is an example of how the <strong class="source-inline">customerId</strong> and <strong class="source-inline">taskId</strong> route parameter values could <span class="No-Break">be obtained:</span></p>
			<pre class="source-code">
const params = <strong class="bold">useParams&lt;Params&gt;()</strong>;
console.log('Customer id', <strong class="bold">params.customerId</strong>);
console.log('Task id', <strong class="bold">params.taskId</strong>);</pre>
			<p>As we can see from the code snippet, <strong class="source-inline">useParams</strong> has a generic argument that defines the type for the parameters. The <strong class="source-inline">type</strong> definition for the preceding code snippet is <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
type Params = {
  customerId: string;
  taskId: string;
};</pre>
			<p>It is important to note<a id="_idIndexMarker502"/> that the route parameter values are always strings because they are extracted from paths, which <span class="No-Break">are strings.</span></p>
			<p>Now that we understand route parameters, we will use a route parameter in <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-168"><a id="_idTextAnchor170"/>Using route parameters in the app</h2>
			<p>We will add a product page to our <a id="_idIndexMarker503"/>app to show the description and price of each product. The path to the page will have a route parameter for the product ID. Carry out the following steps to implement the <span class="No-Break">product page:</span></p>
			<ol>
				<li value="1">We will start by creating the product page. In the <strong class="source-inline">src/pages</strong> folder, create a file called <strong class="source-inline">ProductPage.tsx</strong> with the following <span class="No-Break"><strong class="source-inline">import</strong></span><span class="No-Break"> statements:</span><pre class="source-code">
import { useParams } from 'react-router-dom';</pre><pre class="source-code">
import { products } from '../data/products';</pre></li>
			</ol>
			<p>We have imported the <strong class="source-inline">useParams</strong> hook from React Router, which will allow us to get the value of an <strong class="source-inline">id</strong> route parameter – the product’s ID. We have also imported the <span class="No-Break"><strong class="source-inline">products</strong></span><span class="No-Break"> array.</span></p>
			<ol>
				<li value="2">Start creating the <strong class="source-inline">ProductPage</strong> component <span class="No-Break">as follows:</span><pre class="source-code">
type Params = {</pre><pre class="source-code">
  id: string;</pre><pre class="source-code">
};</pre><pre class="source-code">
export function ProductPage() {</pre><pre class="source-code">
  const params = useParams&lt;Params&gt;();</pre><pre class="source-code">
  const id =</pre><pre class="source-code">
    params.id === undefined ? undefined :       parseInt(params.id);</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>We use the <strong class="source-inline">useParams</strong> hook to <a id="_idIndexMarker504"/>obtain the <strong class="source-inline">id</strong> route parameter and turn it into an integer if it has <span class="No-Break">a value.</span></p>
			<ol>
				<li value="3">Now, add a variable that is assigned to the product with the ID from the <span class="No-Break">route parameter:</span><pre class="source-code">
export function ProductPage() {</pre><pre class="source-code">
  const params = useParams&lt;Params&gt;();</pre><pre class="source-code">
  const id =</pre><pre class="source-code">
    params.id === undefined ? undefined :       parseInt(params.id);</pre><pre class="source-code">
<strong class="bold">  const product = products.find(</strong></pre><pre class="source-code">
<strong class="bold">    (product) =&gt; product.id === id</strong></pre><pre class="source-code">
<strong class="bold">  );</strong></pre><pre class="source-code">
}</pre></li>
				<li>Return the product<a id="_idIndexMarker505"/> information from the <strong class="source-inline">product</strong> variable in <span class="No-Break">the JSX:</span><pre class="source-code">
export function ProductPage() {</pre><pre class="source-code">
  ...</pre><pre class="source-code">
  <strong class="bold">return (</strong></pre><pre class="source-code">
<strong class="bold">    &lt;div className="text-center p-5 text-xl"&gt;</strong></pre><pre class="source-code">
<strong class="bold">      {product === undefined ? (</strong></pre><pre class="source-code">
<strong class="bold">        &lt;h1 className="text-xl text-slate-900"&gt;</strong></pre><pre class="source-code">
<strong class="bold">          Unknown product</strong></pre><pre class="source-code">
<strong class="bold">        &lt;/h1&gt;</strong></pre><pre class="source-code">
<strong class="bold">      ) : (</strong></pre><pre class="source-code">
<strong class="bold">        &lt;&gt;</strong></pre><pre class="source-code">
<strong class="bold">          &lt;h1 className="text-xl text-slate-900"&gt;</strong></pre><pre class="source-code">
<strong class="bold">            {product.name}</strong></pre><pre class="source-code">
<strong class="bold">          &lt;/h1&gt;</strong></pre><pre class="source-code">
<strong class="bold">          &lt;p className="text-base text-slate-800"&gt;</strong></pre><pre class="source-code">
<strong class="bold">            {product.description}</strong></pre><pre class="source-code">
<strong class="bold">          &lt;/p&gt;</strong></pre><pre class="source-code">
<strong class="bold">          &lt;p className="text-base text-slate-800"&gt;</strong></pre><pre class="source-code">
<strong class="bold">            {new Intl.NumberFormat('en-US', {</strong></pre><pre class="source-code">
<strong class="bold">              currency: 'USD',</strong></pre><pre class="source-code">
<strong class="bold">              style: 'currency',</strong></pre><pre class="source-code">
<strong class="bold">            }).format(product.price)}</strong></pre><pre class="source-code">
<strong class="bold">          &lt;/p&gt;</strong></pre><pre class="source-code">
<strong class="bold">        &lt;/&gt;</strong></pre><pre class="source-code">
<strong class="bold">      )}</strong></pre><pre class="source-code">
<strong class="bold">    &lt;/div&gt;</strong></pre><pre class="source-code">
<strong class="bold">  );</strong></pre><pre class="source-code">
}</pre></li>
			</ol>
			<p><strong class="source-inline">Unknown product</strong> is returned if the product can’t be found. Its name, description, and price are returned if the product is found. We use JavaScript’s <strong class="source-inline">Intl.NumberFormat</strong> function to nicely format <span class="No-Break">the price.</span></p>
			<p>That completes the <span class="No-Break">product page.</span></p>
			<ol>
				<li value="5">The next task is to add the route for the product page. Open <strong class="source-inline">Routes.tsx</strong> and add an <strong class="source-inline">import</strong> statement for<a id="_idIndexMarker506"/> the <span class="No-Break">product page:</span><pre class="source-code">
import { ProductPage } from './pages/ProductPage';</pre></li>
				<li>Add the following highlighted route for the <span class="No-Break">product page:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: '/',</pre><pre class="source-code">
    element: &lt;App /&gt;,</pre><pre class="source-code">
    children: [</pre><pre class="source-code">
      {</pre><pre class="source-code">
        path: 'products',</pre><pre class="source-code">
        element: &lt;ProductsPage /&gt;,</pre><pre class="source-code">
      },</pre><pre class="source-code">
      <strong class="bold">{</strong></pre><pre class="source-code">
<strong class="bold">        path: 'products/:id',</strong></pre><pre class="source-code">
<strong class="bold">        element: &lt;ProductPage /&gt;,</strong></pre><pre class="source-code">
<strong class="bold">      }</strong></pre><pre class="source-code">
    ]</pre><pre class="source-code">
  }</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>So, the <strong class="source-inline">/products/2</strong> path should return a product page for <span class="No-Break">React Redux.</span></p>
			<ol>
				<li value="7">In the running app, change the browser URL to <a href="http://localhost:3000/products/2">http://localhost:3000/products/2</a>. The React Redux product should <span class="No-Break">show up:</span></li>
			</ol>
			<div>
				<div id="_idContainer100" class="IMG---Figure">
					<img src="image/B19051_06_08.jpg" alt="Figure 6.8 – The product page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.8 – The product page</p>
			<ol>
				<li value="8">The last task in this section is to<a id="_idIndexMarker507"/> turn the products list on the products list page into links that open the relevant product page. Open <strong class="source-inline">ProductsPage.tsx</strong> and import the <strong class="source-inline">Link</strong> component from <span class="No-Break">React Router:</span><pre class="source-code">
import { Link } from 'react-router-dom';</pre></li>
				<li>Add a <strong class="source-inline">Link</strong> component around the product name in <span class="No-Break">the JSX:</span><pre class="source-code">
&lt;ul className="list-none m-0 p-0"&gt;</pre><pre class="source-code">
  {products.map((product) =&gt; (</pre><pre class="source-code">
    &lt;li key={product.id}&gt;</pre><pre class="source-code">
      <strong class="bold">&lt;Link</strong></pre><pre class="source-code">
<strong class="bold">        to={`${product.id}`}</strong></pre><pre class="source-code">
<strong class="bold">        className="p-1 text-base text-slate-800           hover:underline"</strong></pre><pre class="source-code">
<strong class="bold">      &gt;</strong></pre><pre class="source-code">
        {product.name}</pre><pre class="source-code">
<strong class="bold">      &lt;/Link&gt;</strong></pre><pre class="source-code">
    &lt;/li&gt;</pre><pre class="source-code">
  ))}</pre><pre class="source-code">
&lt;/ul&gt;</pre></li>
			</ol>
			<p>Link paths are relative to the component’s path. Given that the component path is <strong class="source-inline">/products</strong>, we set the link path to the product ID, which should match the <span class="No-Break"><strong class="source-inline">product</strong></span><span class="No-Break"> route.</span></p>
			<ol>
				<li value="10">Return to the running app and go to<a id="_idIndexMarker508"/> the products list page. Hover over the products and you will now see that they <span class="No-Break">are links:</span></li>
			</ol>
			<div>
				<div id="_idContainer101" class="IMG---Figure">
					<img src="image/B19051_06_09.jpg" alt="Figure 6.9 – Product list links"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.9 – Product list links</p>
			<ol>
				<li value="11">Click one of the products and the relevant product page <span class="No-Break">will appear.</span></li>
			</ol>
			<p>That completes this section on<a id="_idIndexMarker509"/> route parameters. Here’s a <span class="No-Break">quick recap:</span></p>
			<ul>
				<li>A route parameter is a varying segment in a path defined using a colon followed by the <span class="No-Break">parameter name</span></li>
				<li>Route parameters can be accessed using React Router’s <span class="No-Break"><strong class="source-inline">useParams</strong></span><span class="No-Break"> hook</span></li>
			</ul>
			<p>For more information on the <strong class="source-inline">useParams</strong> hook, see the following link in the React Router <span class="No-Break">documentation: </span><a href="https://reactrouter.com/en/main/hooks/use-params"><span class="No-Break">https://reactrouter.com/en/main/hooks/use-params</span></a><span class="No-Break">.</span></p>
			<p>Remember React Router’s error page we experienced in the <em class="italic">Declaring routes</em> section? Next, we will learn how to customize that <span class="No-Break">error page.</span></p>
			<h1 id="_idParaDest-169"><a id="_idTextAnchor171"/>Creating an error page</h1>
			<p>In this section, we will understand <a id="_idIndexMarker510"/>how error pages work in React Router before implementing one in <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-170"><a id="_idTextAnchor172"/>Understanding error pages</h2>
			<p>Currently, a React Router built-in error page is shown when an error occurs. We can check this by entering an invalid path in the <span class="No-Break">running app:</span></p>
			<div>
				<div id="_idContainer102" class="IMG---Figure">
					<img src="image/B19051_06_10.jpg" alt="Figure 6.10 – Standard React Router error page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.10 – Standard React Router error page</p>
			<p>An error is raised because no matching routes are found in the router. The <em class="italic">404 Not Found</em> message on the error page <span class="No-Break">confirms this.</span></p>
			<p>This standard error page isn’t ideal because the information is targeted at a developer rather than a real user. Also, the app header isn’t shown, so users can’t easily navigate to a page that <span class="No-Break">does exist.</span></p>
			<p>As the error message suggests, an <strong class="source-inline">errorElement</strong> prop can be used on a route to override the standard error page. The following is an example of a custom error page defined for a customer’s route; if any<a id="_idIndexMarker511"/> error occurs on this route, the <strong class="source-inline">CustomersErrorPage</strong> component will <span class="No-Break">be rendered:</span></p>
			<pre class="source-code">
const router = createBrowserRouter([
  ...,
  {
    path: 'customers',
    element: &lt;CustomersPage /&gt;,
<strong class="bold">    errorElement: &lt;CustomersErrorPage /&gt;</strong>
  },
  ...
]);</pre>
			<p>Now that we have started understanding error pages in React Router, we will implement one in <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-171"><a id="_idTextAnchor173"/>Adding an error page</h2>
			<p>Carry out the steps below to create an <a id="_idIndexMarker512"/>error page in <span class="No-Break">the app:</span></p>
			<ol>
				<li value="1">First, create a new page called <strong class="source-inline">ErrorPage.tsx</strong> in the <strong class="source-inline">src/pages</strong> folder with the <span class="No-Break">following content:</span><pre class="source-code">
import { Header } from '../Header';</pre><pre class="source-code">
export function ErrorPage() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;&gt;</pre><pre class="source-code">
      &lt;Header /&gt;</pre><pre class="source-code">
      &lt;div className="text-center p-5 text-xl"&gt;</pre><pre class="source-code">
        &lt;h1 className="text-xl text-slate-900"&gt;</pre><pre class="source-code">
          Sorry, an error has occurred</pre><pre class="source-code">
        &lt;/h1&gt;</pre><pre class="source-code">
      &lt;/div&gt;</pre><pre class="source-code">
    &lt;/&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The component simply<a id="_idIndexMarker513"/> returns the app header with a <em class="italic">Sorry, an error has occurred</em> <span class="No-Break">message underneath.</span></p>
			<ol>
				<li value="2">Open <strong class="source-inline">Routes.tsx</strong> and add an <strong class="source-inline">import</strong> statement for the <span class="No-Break">error page:</span><pre class="source-code">
import { ErrorPage } from './pages/ErrorPage';</pre></li>
				<li>Specify the error page on the root route <span class="No-Break">as follows:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: '/',</pre><pre class="source-code">
    element: &lt;App /&gt;,</pre><pre class="source-code">
<strong class="bold">    errorElement: &lt;ErrorPage /&gt;,</strong></pre><pre class="source-code">
    children: ...</pre><pre class="source-code">
  },</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>Specifying the error page on the root route means that it will show if any routes <span class="No-Break">have errors.</span></p>
			<ol>
				<li value="4">Switch back to the running app and change the browser URL to <a href="http://localhost:3000/invalid">http://localhost:3000/invalid</a>. The error page will <span class="No-Break">be shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer103" class="IMG---Figure">
					<img src="image/B19051_06_11.jpg" alt="Figure 6.11 – Error page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.11 – Error page</p>
			<ol>
				<li value="5">This is a good start, but we can improve it by providing the user with more information, which we can get from React Router’s <strong class="source-inline">useRouteError</strong> hook. Open <strong class="source-inline">ErrorPage.tsx</strong> again <a id="_idIndexMarker514"/>and add an <strong class="source-inline">import</strong> statement <span class="No-Break">for </span><span class="No-Break"><strong class="source-inline">useRouteError</strong></span><span class="No-Break">:</span><pre class="source-code">
import { useRouteError } from 'react-router-dom';</pre></li>
				<li>Assign the error to an <strong class="source-inline">error</strong> variable before the component’s <strong class="source-inline">return</strong> statement <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">useRouteError</strong></span><span class="No-Break">:</span><pre class="source-code">
export function ErrorPage() {</pre><pre class="source-code">
  <strong class="bold">const error = useRouteError();</strong></pre><pre class="source-code">
  return ...</pre><pre class="source-code">
}</pre></li>
				<li>The <strong class="source-inline">error</strong> variable is of the <strong class="source-inline">unknown</strong> type – you can verify this by hovering over it. We can use a type predicate function to allow TypeScript to narrow it to something we can work with. Add the following type predicate function beneath <span class="No-Break">the component:</span><pre class="source-code">
function isError(error: any): error is { statusText: string } {</pre><pre class="source-code">
  return "statusText" in error;</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The function checks whether the error object has a <strong class="source-inline">statusText</strong> property and if so, gives it a type with <span class="No-Break">this property.</span></p>
			<ol>
				<li value="8">We can now use this function<a id="_idIndexMarker515"/> to render the information in the <span class="No-Break"><strong class="source-inline">statusText</strong></span><span class="No-Break"> property:</span><pre class="source-code">
return (</pre><pre class="source-code">
  &lt;&gt;</pre><pre class="source-code">
    &lt;Header /&gt;</pre><pre class="source-code">
    &lt;div className="text-center p-5 text-xl"&gt;</pre><pre class="source-code">
      &lt;h1 className="text-xl text-slate-900"&gt;</pre><pre class="source-code">
        Sorry, an error has occurred</pre><pre class="source-code">
      &lt;/h1&gt;</pre><pre class="source-code">
      <strong class="bold">{isError(error) &amp;&amp; (</strong></pre><pre class="source-code">
<strong class="bold">        &lt;p className="text-base text-slate-700"&gt;</strong></pre><pre class="source-code">
<strong class="bold">          {error.statusText}</strong></pre><pre class="source-code">
<strong class="bold">        &lt;/p&gt;</strong></pre><pre class="source-code">
<strong class="bold">      )}</strong></pre><pre class="source-code">
    &lt;/div&gt;</pre><pre class="source-code">
  &lt;/&gt;</pre><pre class="source-code">
);</pre></li>
				<li>In the running app, the information about the error appears on the error page as an <span class="No-Break">invalid path:</span></li>
			</ol>
			<div>
				<div id="_idContainer104" class="IMG---Figure">
					<img src="image/B19051_06_12.jpg" alt="Figure 6.12 – Error page containing information about the error"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.12 – Error page containing information about the error</p>
			<p>That completes this section on error <a id="_idIndexMarker516"/>pages. The key point is to use an <strong class="source-inline">errorElement</strong> prop on a route to catch and display errors. Specific error information can be obtained using the <span class="No-Break"><strong class="source-inline">useRouteError</strong></span><span class="No-Break"> hook.</span></p>
			<p>For more information on <strong class="source-inline">errorElement</strong>, see the following link: <a href="https://reactrouter.com/en/main/route/error-element">https://reactrouter.com/en/main/route/error-element</a>. For more information on the <strong class="source-inline">useRouteError</strong> hook, see the following <span class="No-Break">link: </span><a href="https://reactrouter.com/en/main/hooks/use-route-error"><span class="No-Break">https://reactrouter.com/en/main/hooks/use-route-error</span></a><span class="No-Break">.</span></p>
			<p>Next, we will learn about <span class="No-Break">index routes.</span></p>
			<h1 id="_idParaDest-172"><a id="_idTextAnchor174"/>Using index routes</h1>
			<p>Currently, the app’s root path displays<a id="_idIndexMarker517"/> nothing other than the header. In this section, we will learn about index routes to display a nice welcome message in the <span class="No-Break">root path.</span></p>
			<h2 id="_idParaDest-173"><a id="_idTextAnchor175"/>Understanding index routes</h2>
			<p>An <strong class="bold">index route</strong> can be thought of as a <a id="_idIndexMarker518"/>default child route. In React Router, if no children match a parent route, it will display an index route if one is defined. An index route has no path and instead has an <strong class="source-inline">index</strong> Boolean property, as in the <span class="No-Break">following example:</span></p>
			<pre class="source-code">
{
  path: "/",
  element: &lt;App /&gt;,
  children: [
    <strong class="bold">{</strong>
<strong class="bold">      index: true,</strong>
<strong class="bold">      element: &lt;HomePage /&gt;,</strong>
<strong class="bold">    },</strong>
    ...,
  ]
}</pre>
			<p>Next, we will add a home page<a id="_idIndexMarker519"/> using an index route in <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-174"><a id="_idTextAnchor176"/>Using an index route in the app</h2>
			<p>Carry out the following steps to add a<a id="_idIndexMarker520"/> home page using an index route in <span class="No-Break">our app:</span></p>
			<ol>
				<li value="1">Create a new file in the <strong class="source-inline">src/pages</strong> folder called <strong class="source-inline">HomePage.tsx</strong> with the <span class="No-Break">following content:</span><pre class="source-code">
export function HomePage() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;div className="text-center p-5 text-xl"&gt;</pre><pre class="source-code">
      &lt;h1 className="text-xl text-slate-900"&gt;Welcome to         React Tools!&lt;/h1&gt;</pre><pre class="source-code">
    &lt;/div&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The page displays a <span class="No-Break">welcome message.</span></p>
			<ol>
				<li value="2">Open <strong class="source-inline">Routes.tsx</strong> and import the home page we <span class="No-Break">just created:</span><pre class="source-code">
import { HomePage } from './pages/HomePage';</pre></li>
				<li>Add the home page as an index<a id="_idIndexMarker521"/> page for the root path <span class="No-Break">as follows:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: '/',</pre><pre class="source-code">
    element: &lt;App /&gt;,</pre><pre class="source-code">
    errorElement: &lt;ErrorPage /&gt;,</pre><pre class="source-code">
    children: [</pre><pre class="source-code">
      <strong class="bold">{</strong></pre><pre class="source-code">
<strong class="bold">        index: true,</strong></pre><pre class="source-code">
<strong class="bold">        element: &lt;HomePage /&gt;,</strong></pre><pre class="source-code">
<strong class="bold">      },</strong></pre><pre class="source-code">
      ...</pre><pre class="source-code">
    ]</pre><pre class="source-code">
  }</pre><pre class="source-code">
]);</pre></li>
				<li>We will add links to the logo and app title in the header to go to the home page. Open <strong class="source-inline">Header.tsx</strong> and import the <strong class="source-inline">Link</strong> component from <span class="No-Break">React Router:</span><pre class="source-code">
import { NavLink, <strong class="bold">Link</strong> } from 'react-router-dom';</pre></li>
				<li>Wrap links to the root page around the logo and title <span class="No-Break">as follows:</span><pre class="source-code">
&lt;header ...&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;Link to=""&gt;</strong></pre><pre class="source-code">
    &lt;img src={logo} ... /&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;/Link&gt;</strong></pre><pre class="source-code">
  <strong class="bold">&lt;Link to=""&gt;</strong></pre><pre class="source-code">
    &lt;h1 ...&gt;React Tools&lt;/h1&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;/Link&gt;</strong></pre><pre class="source-code">
  &lt;nav&gt;</pre><pre class="source-code">
    ...</pre><pre class="source-code">
  &lt;/nav&gt;</pre><pre class="source-code">
&lt;/header&gt;</pre></li>
				<li>In the running app, click the app<a id="_idIndexMarker522"/> title to go to the root page, and you will see the welcome <span class="No-Break">message displayed:</span></li>
			</ol>
			<div>
				<div id="_idContainer105" class="IMG---Figure">
					<img src="image/B19051_06_13.jpg" alt="Figure 6.13 – Welcome page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.13 – Welcome page</p>
			<p>That completes this section on <span class="No-Break">index routes.</span></p>
			<p>To recap, an index route is a default child route and is defined using an <strong class="source-inline">index</strong> <span class="No-Break">Boolean property.</span></p>
			<p>For more information on index routes, see the following <span class="No-Break">link: </span><a href="https://reactrouter.com/en/main/route/route#index"><span class="No-Break">https://reactrouter.com/en/main/route/route#index</span></a><span class="No-Break">.</span></p>
			<p>Next, we will learn about <span class="No-Break">search parameters.</span></p>
			<h1 id="_idParaDest-175"><a id="_idTextAnchor177"/>Using search parameters</h1>
			<p>In this section, we will learn<a id="_idIndexMarker523"/> about search parameters in React Router and use them to implement a search feature in <span class="No-Break">the app.</span></p>
			<h2 id="_idParaDest-176"><a id="_idTextAnchor178"/>Understanding search parameters</h2>
			<p><strong class="bold">Search parameters</strong> are part of a URL that comes after the <strong class="source-inline">?</strong> character and separated by the <strong class="source-inline">&amp;</strong> character. Search parameters are sometimes<a id="_idIndexMarker524"/> referred to as <strong class="bold">query parameters</strong>. In the following URL, <strong class="source-inline">type</strong> and <strong class="source-inline">when</strong> are search <span class="No-Break">parameters: </span><span class="No-Break"><strong class="source-inline">https://somewhere.com/?type=sometype&amp;when=recent</strong></span><span class="No-Break">.</span></p>
			<p>React Router has a hook that returns functions for getting and setting search parameters <span class="No-Break">called </span><span class="No-Break"><strong class="source-inline">useSearchParams</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
const [searchParams, setSearchParams] = useSearchParams();</pre>
			<p><strong class="source-inline">searchParams</strong> is a JavaScript <strong class="source-inline">URLSearchParams</strong> object. There is a <strong class="source-inline">get</strong> method on <strong class="source-inline">URLSearchParams</strong>, which can be used to get the value of a search parameter. The following example gets the value of a search parameter <span class="No-Break">called </span><span class="No-Break"><strong class="source-inline">type</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
const type = searchParams.get('type');</pre>
			<p><strong class="source-inline">setSearchParams</strong> is a function used to set search parameter values. The function parameter is an object as in the <span class="No-Break">following example:</span></p>
			<pre class="source-code">
setSearchParams({ type: 'sometype', when: 'recent' });</pre>
			<p>Next, we will add search functionality to <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-177"><a id="_idTextAnchor179"/>Adding search functionality to the app</h2>
			<p>We will add a search box to the header of <a id="_idIndexMarker525"/>the app. Submitting a search will take the user to the products list page and list a filtered set of products matching the search criteria. Carry out the <span class="No-Break">following steps:</span></p>
			<ol>
				<li value="1">Open <strong class="source-inline">Header.tsx</strong> and add <strong class="source-inline">useSearchParams</strong> to the React Router import. Also, add an <strong class="source-inline">import</strong> statement for the <strong class="source-inline">FormEvent</strong> type <span class="No-Break">from React:</span><pre class="source-code">
<strong class="bold">import { FormEvent } from 'react';</strong></pre><pre class="source-code">
import {</pre><pre class="source-code">
  NavLink,</pre><pre class="source-code">
  Link<strong class="bold">,</strong></pre><pre class="source-code">
<strong class="bold">  useSearchParams</strong></pre><pre class="source-code">
} from 'react-router-dom';</pre></li>
				<li>Use the <strong class="source-inline">useSearchParams</strong> hook to destructure functions to get and set search parameters <a id="_idIndexMarker526"/>before the <span class="No-Break"><strong class="source-inline">return</strong></span><span class="No-Break"> statement:</span><pre class="source-code">
export function Header() {</pre><pre class="source-code">
  <strong class="bold">const [searchParams, setSearchParams] = useSearchParams();</strong></pre><pre class="source-code">
  return ...</pre><pre class="source-code">
}</pre></li>
				<li>Add the following search form above <span class="No-Break">the logo:</span><pre class="source-code">
&lt;header ...&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;form</strong></pre><pre class="source-code">
<strong class="bold">    className="relative text-right"</strong></pre><pre class="source-code">
<strong class="bold">    onSubmit={handleSearchSubmit}</strong></pre><pre class="source-code">
<strong class="bold">  &gt;</strong></pre><pre class="source-code">
<strong class="bold">    &lt;input</strong></pre><pre class="source-code">
<strong class="bold">      type="search"</strong></pre><pre class="source-code">
<strong class="bold">      name="search"</strong></pre><pre class="source-code">
<strong class="bold">      placeholder="Search"</strong></pre><pre class="source-code">
<strong class="bold">      defaultValue={searchParams.get('search') ?? ''}</strong></pre><pre class="source-code">
<strong class="bold">      className="absolute right-0 top-0 rounded py-2 px-3         text-gray-700"</strong></pre><pre class="source-code">
<strong class="bold">    /&gt;</strong></pre><pre class="source-code">
<strong class="bold">  &lt;/form&gt;</strong></pre><pre class="source-code">
  &lt;Link to=""&gt;</pre><pre class="source-code">
    &lt;img src={logo} ... /&gt;</pre><pre class="source-code">
  &lt;/Link&gt;</pre><pre class="source-code">
  ...</pre><pre class="source-code">
&lt;/header&gt;</pre></li>
			</ol>
			<p>The form contains a search box with its default value as the value of a <strong class="source-inline">search</strong> parameter. <strong class="source-inline">searchParams.get</strong> returns <strong class="source-inline">null</strong> if the parameter doesn’t exist, so a <strong class="bold">nullish coalescing operator</strong> (<strong class="source-inline">??</strong>) is used to<a id="_idIndexMarker527"/> set the search box’s default value<a id="_idIndexMarker528"/> to an empty string in <span class="No-Break">this case.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">The <strong class="bold">nullish coalescing operator</strong> (<strong class="source-inline">??</strong>) returns the right operand if the left operand is <strong class="source-inline">null</strong> or <strong class="source-inline">undefined</strong>; otherwise, it returns the left operand. For more information, see the following <span class="No-Break">link: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing"><span class="No-Break">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing</span></a><span class="No-Break">.</span></p>
			<p>The form submission calls a <strong class="source-inline">handleSearchSubmit</strong> function, which we’ll implement in the <span class="No-Break">next step.</span></p>
			<ol>
				<li value="4">Add a <strong class="source-inline">handleSearchSubmit</strong> function as follows, just above the <span class="No-Break"><strong class="source-inline">return</strong></span><span class="No-Break"> statement:</span><pre class="source-code">
export function Header() {</pre><pre class="source-code">
  const [searchParams, setSearchParams] =     useSearchParams();</pre><pre class="source-code">
  <strong class="bold">function handleSearchSubmit(e:     FormEvent&lt;HTMLFormElement&gt;) {</strong></pre><pre class="source-code">
<strong class="bold">    e.preventDefault();</strong></pre><pre class="source-code">
<strong class="bold">    const formData = new FormData(e.currentTarget);</strong></pre><pre class="source-code">
<strong class="bold">    const search = formData.get('search') as string;</strong></pre><pre class="source-code">
<strong class="bold">    setSearchParams({ search });</strong></pre><pre class="source-code">
<strong class="bold">  }</strong></pre><pre class="source-code">
  return ...</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The submit handler<a id="_idIndexMarker529"/> parameter is typed using <strong class="source-inline">FormEvent</strong>. <strong class="source-inline">FormEvent</strong> is a generic type that takes in the type of the element, which is <strong class="source-inline">HTMLFormElement</strong> for a form <span class="No-Break">submit handler.</span></p>
			<p>We use the <strong class="source-inline">preventDefault</strong> method on submit handler parameters to prevent the form from being submitted to the server because we handle all the logic in <span class="No-Break">this function.</span></p>
			<p>We use the JavaScript <strong class="source-inline">FormData</strong> interface to get the value of the search field. Then, we use a type assertion to set the type of the search field value to <span class="No-Break">a string.</span></p>
			<p>The last line of code in the submit handler sets the value of the search parameter. This will update the browser’s URL to have this <span class="No-Break">search parameter.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">We will learn a lot more about forms in React in <a href="B19051_07.xhtml#_idTextAnchor188"><span class="No-Break"><em class="italic">Chapter 7</em></span></a>, <em class="italic">Working </em><span class="No-Break"><em class="italic">with Forms</em></span><span class="No-Break">.</span></p>
			<ol>
				<li value="5">Now, we need to filter the products list with the value of the search parameter. Open <strong class="source-inline">ProductsPage.tsx</strong> and add <strong class="source-inline">useSearchParams</strong> to the <span class="No-Break"><strong class="source-inline">import</strong></span><span class="No-Break"> statement:</span><pre class="source-code">
import { Link<strong class="bold">, useSearchParams</strong> } from 'react-router-dom';</pre></li>
				<li>At the top of the <strong class="source-inline">ProductsPage</strong> component, destructure <strong class="source-inline">searchParams</strong> from <strong class="source-inline">useSearchParams</strong> <span class="No-Break">as follows:</span><pre class="source-code">
export function ProductsPage() {</pre><pre class="source-code">
<strong class="bold">  const [searchParams] = useSearchParams();</strong></pre><pre class="source-code">
  return ...</pre><pre class="source-code">
}</pre></li>
				<li>Add the following function just before the <strong class="source-inline">return</strong> statement to filter the products list by the <span class="No-Break">search </span><span class="No-Break"><a id="_idIndexMarker530"/></span><span class="No-Break">value:</span><pre class="source-code">
const [searchParams] = useSearchParams();</pre><pre class="source-code">
<strong class="bold">function getFilteredProducts() {</strong></pre><pre class="source-code">
<strong class="bold">  const search = searchParams.get('search');</strong></pre><pre class="source-code">
<strong class="bold">  if (search === null || search === "") {</strong></pre><pre class="source-code">
<strong class="bold">    return products;</strong></pre><pre class="source-code">
<strong class="bold">  } else {</strong></pre><pre class="source-code">
<strong class="bold">    return products.filter(</strong></pre><pre class="source-code">
<strong class="bold">      (product) =&gt;</strong></pre><pre class="source-code">
<strong class="bold">        product.name</strong></pre><pre class="source-code">
<strong class="bold">          .toLowerCase()</strong></pre><pre class="source-code">
<strong class="bold">          .indexOf(search.toLowerCase()) &gt; -1</strong></pre><pre class="source-code">
<strong class="bold">    );</strong></pre><pre class="source-code">
<strong class="bold">  }</strong></pre><pre class="source-code">
<strong class="bold">}</strong></pre><pre class="source-code">
return ...</pre></li>
			</ol>
			<p>The function starts by getting the value of the <strong class="source-inline">search</strong> parameter. The full product list is returned if there is no search parameter or if the value is an empty string. Otherwise, the product list is filtered using the array’s <strong class="source-inline">filter</strong> function, checking that the search value is contained within the product name irrespective of <span class="No-Break">the case.</span></p>
			<ol>
				<li value="8">Use the function we just created in the JSX to output the filtered products. Replace the reference to <strong class="source-inline">products</strong> with a call to <strong class="source-inline">getFilteredProducts</strong> <span class="No-Break">as follows:</span><pre class="source-code">
&lt;ul className="list-none m-0 p-0"&gt;</pre><pre class="source-code">
  {<strong class="bold">getFilteredProducts()</strong>.map((product) =&gt; (</pre><pre class="source-code">
    &lt;li</pre><pre class="source-code">
      key={product.id}</pre><pre class="source-code">
      className="p-1 text-base text-slate-800"</pre><pre class="source-code">
    &gt;</pre><pre class="source-code">
      &lt;Link</pre><pre class="source-code">
        to={`${product.id}`}</pre><pre class="source-code">
        className="p-1 text-base text-slate-800           hover:underline"</pre><pre class="source-code">
      &gt;</pre><pre class="source-code">
        {product.name}</pre><pre class="source-code">
      &lt;/Link&gt;</pre><pre class="source-code">
    &lt;/li&gt;</pre><pre class="source-code">
  ))}</pre><pre class="source-code">
&lt;/ul&gt;</pre></li>
				<li>In the running app, whilst on the <a id="_idIndexMarker531"/>home page, enter some search criteria in the search box and press <em class="italic">Enter</em> to submit <span class="No-Break">the search.</span></li>
			</ol>
			<p>The search parameter is added to the URL in the browser. However, it doesn’t navigate to the products list page. Don’t worry about this because we’ll address this issue in the <span class="No-Break">next section:</span></p>
			<div>
				<div id="_idContainer106" class="IMG---Figure">
					<img src="image/B19051_06_14.jpg" alt="Figure 6.14 – The search parameter added to the URL"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.14 – The search parameter added to the URL</p>
			<p>The key point in this section is <a id="_idIndexMarker532"/>that the <strong class="source-inline">useSearchParams</strong> hook from React Router allows you to set and get URL search parameters. The parameters are also structured in a JavaScript <span class="No-Break"><strong class="source-inline">URLSearchParams</strong></span><span class="No-Break"> object.</span></p>
			<p>For more information on the <strong class="source-inline">useSearchParams</strong> hook, see the following link in the React Router documentation: <a href="https://reactrouter.com/en/main/hooks/use-search-params">https://reactrouter.com/en/main/hooks/use-search-params</a>. More information on <strong class="source-inline">URLSearchParams</strong> is available <span class="No-Break">at </span><a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><span class="No-Break">https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams</span></a><span class="No-Break">.</span></p>
			<p>Next, we will explore another React Router hook that enables <span class="No-Break">programmatic navigation.</span></p>
			<h1 id="_idParaDest-178"><a id="_idTextAnchor180"/>Navigating programmatically</h1>
			<p>React Router’s <strong class="source-inline">Link</strong> and <strong class="source-inline">NavLink</strong> components allow <a id="_idIndexMarker533"/>declarative navigation. However, sometimes we must navigate imperatively – in fact, this would be useful for the search feature in our app to navigate to the products list page. In this section, we will learn how to programmatically navigate with React Router and use this to complete the app’s search feature. Carry out the <span class="No-Break">following steps:</span></p>
			<ol>
				<li value="1">Open <strong class="source-inline">Header.tsx</strong> and add import the <strong class="source-inline">useNavigate</strong> hook from <span class="No-Break">React Router:</span><pre class="source-code">
import {</pre><pre class="source-code">
  NavLink,</pre><pre class="source-code">
  Link,</pre><pre class="source-code">
  useSearchParams<strong class="bold">,</strong></pre><pre class="source-code">
<strong class="bold">  useNavigate</strong></pre><pre class="source-code">
} from 'react-router-dom';</pre></li>
			</ol>
			<p>The <strong class="source-inline">useNavigate</strong> hook returns a function we can use to perform <span class="No-Break">programmatic navigation.</span></p>
			<ol>
				<li value="2">Invoke <strong class="source-inline">useNavigate</strong> after the<a id="_idIndexMarker534"/> call to the <strong class="source-inline">useSearchParams</strong> hook. Assign the result to a variable <span class="No-Break">called </span><span class="No-Break"><strong class="source-inline">navigate</strong></span><span class="No-Break">:</span><pre class="source-code">
export function Header() {</pre><pre class="source-code">
  const [searchParams, setSearchParams] =     useSearchParams();</pre><pre class="source-code">
<strong class="bold">  const navigate = useNavigate();</strong></pre><pre class="source-code">
  ...</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The <strong class="source-inline">navigate</strong> variable is a function that can be used to navigate. It takes in an argument for the path to <span class="No-Break">navigate to.</span></p>
			<ol>
				<li value="3">In <strong class="source-inline">handleSearchSubmit</strong>, replace the <strong class="source-inline">setSearchParams</strong> call with a call to <strong class="source-inline">navigate</strong> to go to the products list page with the relevant <span class="No-Break">search parameter:</span><pre class="source-code">
function handleSearchSubmit(e: FormEvent&lt;HTMLFormElement&gt;) {</pre><pre class="source-code">
  e.preventDefault();</pre><pre class="source-code">
  const formData = new FormData(e.currentTarget);</pre><pre class="source-code">
  const search = formData.get('search') as string;</pre><pre class="source-code">
  <strong class="bold">navigate(`/products/?search=${search}`);</strong></pre><pre class="source-code">
}</pre></li>
				<li>We no longer need <strong class="source-inline">setSearchParams</strong> because the setting of the search parameter is included in the navigation path, so remove this from the <span class="No-Break"><strong class="source-inline">useSearchParams</strong></span><span class="No-Break"> call:</span><pre class="source-code">
const [searchParams] = useSearchParams();</pre></li>
				<li>In the running app, enter<a id="_idIndexMarker535"/> some search criteria in the search box and press <em class="italic">Enter</em> to submit <span class="No-Break">the search.</span></li>
			</ol>
			<p>The search parameter is used to navigate to the products list page. When the products list page appears, the correctly filtered products <span class="No-Break">are shown:</span></p>
			<div>
				<div id="_idContainer107" class="IMG---Figure">
					<img src="image/B19051_06_15.jpg" alt="Figure 6.15 – Products list page with filter products"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.15 – Products list page with filter products</p>
			<p>So, programmatic navigation is achieved using the <strong class="source-inline">useNavigate</strong> hook. This returns a function that can navigate to the path passed <span class="No-Break">into it.</span></p>
			<p>For more information on the <strong class="source-inline">useNavigate</strong> hook, see the following link in the React Router <span class="No-Break">documentation: </span><a href="https://reactrouter.com/en/main/hooks/use-navigate"><span class="No-Break">https://reactrouter.com/en/main/hooks/use-navigate</span></a><span class="No-Break">.</span></p>
			<p>Next, we will refactor the search form’s navigation to use React Router’s <span class="No-Break"><strong class="source-inline">Form</strong></span><span class="No-Break"> component.</span></p>
			<h1 id="_idParaDest-179"><a id="_idTextAnchor181"/>Using form navigation</h1>
			<p>In this section, we will use<a id="_idIndexMarker536"/> React Router’s <strong class="source-inline">Form</strong> component to navigate to the products list page when the search criteria are submitted. <strong class="source-inline">Form</strong> is a wrapper around the HTML <strong class="source-inline">form</strong> element that handles the form submission on the client side. This will replace the use of <strong class="source-inline">useNavigate</strong> and simplify the code. Carry out the <span class="No-Break">following steps:</span></p>
			<ol>
				<li value="1">In <strong class="source-inline">Header.tsx</strong>, start by removing <strong class="source-inline">useNavigate</strong> from <strong class="source-inline">import</strong> for the React Router and replace it with the <span class="No-Break"><strong class="source-inline">Form</strong></span><span class="No-Break"> component:</span><pre class="source-code">
import {</pre><pre class="source-code">
  NavLink,</pre><pre class="source-code">
  Link,</pre><pre class="source-code">
  useSearchParams,</pre><pre class="source-code">
  <strong class="bold">Form</strong></pre><pre class="source-code">
} from 'react-router-dom';</pre></li>
				<li>In the JSX, replace<a id="_idIndexMarker537"/> the <strong class="source-inline">form</strong> element with React Router’s <span class="No-Break"><strong class="source-inline">Form</strong></span><span class="No-Break"> component:</span><pre class="source-code">
&lt;<strong class="bold">Form</strong></pre><pre class="source-code">
  className="relative text-right"</pre><pre class="source-code">
  onSubmit={handleSearchSubmit}</pre><pre class="source-code">
&gt;</pre><pre class="source-code">
  &lt;input ... /&gt;</pre><pre class="source-code">
&lt;/<strong class="bold">Form</strong>&gt;</pre></li>
				<li>In the <strong class="source-inline">Form</strong> element in the JSX, remove the <strong class="source-inline">onSubmit</strong> handler. Replace this with the following <strong class="source-inline">action</strong> attribute so that the form is sent to the <span class="No-Break"><strong class="source-inline">products</strong></span><span class="No-Break"> route:</span><pre class="source-code">
&lt;Form</pre><pre class="source-code">
  className="relative text-right"</pre><pre class="source-code">
<strong class="bold">  action="/products"</strong></pre><pre class="source-code">
&gt;</pre><pre class="source-code">
  ...</pre><pre class="source-code">
&lt;/Form&gt;</pre></li>
			</ol>
			<p>React Router’s form submission mimics how a native <strong class="source-inline">form</strong> element submits to a server path. However, React Router submits the form to a client-side route instead. In addition, <strong class="source-inline">Form</strong> mimics an HTTP <strong class="source-inline">GET</strong> request by default, so a <strong class="source-inline">search</strong> parameter will automatically be added to <span class="No-Break">the URL.</span></p>
			<ol>
				<li value="4">The remaining tasks are<a id="_idIndexMarker538"/> to remove the <span class="No-Break">following code:</span><ul><li>Remove the React import statement because <strong class="source-inline">FormEvent</strong> is <span class="No-Break">redundant now</span></li><li>Remove the call to <strong class="source-inline">useNavigate</strong> because this is no <span class="No-Break">longer required</span></li><li>Remove the <strong class="source-inline">handleSearchSubmit</strong> function because this is no <span class="No-Break">longer required</span></li></ul></li>
				<li>In the running app, enter some search criteria in the search box and press <em class="italic">Enter</em> to submit the search. This will work as it <span class="No-Break">did before.</span></li>
			</ol>
			<p>That has simplified the code quite <span class="No-Break">a bit!</span></p>
			<p>We will learn more about React Router’s <strong class="source-inline">Form</strong> component in <a href="B19051_07.xhtml#_idTextAnchor188"><span class="No-Break"><em class="italic">Chapter 7</em></span></a> and <a href="B19051_09.xhtml#_idTextAnchor220"><span class="No-Break"><em class="italic">Chapter 9</em></span></a>. The key takeaway from this section is that <strong class="source-inline">Form</strong> wraps the HTML <strong class="source-inline">form</strong> element, handling form submission on <span class="No-Break">the client.</span></p>
			<p>For more information on <strong class="source-inline">Form</strong>, see the following link in the React Router <span class="No-Break">documentation: </span><a href="https://reactrouter.com/en/main/components/form"><span class="No-Break">https://reactrouter.com/en/main/components/form</span></a><span class="No-Break">.</span></p>
			<p>Next, we will learn about a type of performance optimization that can be applied to large pages in <span class="No-Break">the app.</span></p>
			<h1 id="_idParaDest-180"><a id="_idTextAnchor182"/>Implementing lazy loading</h1>
			<p>Currently, all the JavaScript for <a id="_idIndexMarker539"/>our app is loaded when the app first loads. This can be problematic in large apps. In this section, we will learn how to only load the JavaScript for components when their route becomes active. This pattern is often referred to as <strong class="bold">lazy loading</strong>. In our app, we will create a lazily loaded <span class="No-Break">admin page.</span></p>
			<h2 id="_idParaDest-181"><a id="_idTextAnchor183"/>Understanding React lazy loading</h2>
			<p>By default, all React components <a id="_idIndexMarker540"/>are bundled together and loaded when the app first loads. This is inefficient for large apps – particularly when a user does not use many components. Lazily loading React components addresses this issue because lazy components aren’t included in the initial bundle that is loaded; instead, their JavaScript is fetched and loaded <span class="No-Break">when rendered.</span></p>
			<p>There are two main steps to lazy loading React components. First, the component must be dynamically imported <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
const LazyPage = lazy(() =&gt; import('./LazyPage'));</pre>
			<p>In the code block, <strong class="source-inline">lazy</strong> is a function from React that enables the imported component to be lazily loaded. Note that the lazy page must be a default export – lazy loading doesn’t work with <span class="No-Break">named exports.</span></p>
			<p>Webpack can then split the JavaScript for <strong class="source-inline">LazyPage</strong> into a separate bundle. Note that this separate bundle will include any child components <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">LazyPage</strong></span><span class="No-Break">.</span></p>
			<p>The second step is to render the lazy component inside React’s <strong class="source-inline">Suspense</strong> component <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
&lt;Route
  path="lazy"
  element={
    <strong class="bold">&lt;Suspense fallback={&lt;div&gt;Loading…&lt;/div&gt;}&gt;</strong>
      &lt;LazyPage /&gt;
<strong class="bold">    &lt;/Suspense&gt;</strong>
  }
/&gt;</pre>
			<p>The <strong class="source-inline">Suspense</strong> component’s <strong class="source-inline">fallback</strong> prop can be set to an element to render while the lazy page is <span class="No-Break">being fetched.</span></p>
			<p>Next, we will create a lazy<a id="_idIndexMarker541"/> admin page in <span class="No-Break">our app.</span></p>
			<h2 id="_idParaDest-182"><a id="_idTextAnchor184"/>Adding a lazy admin page to the app</h2>
			<p>Carry out the<a id="_idIndexMarker542"/> following steps to add a lazy admin page to <span class="No-Break">our app:</span></p>
			<ol>
				<li value="1">Create a file called <strong class="source-inline">AdminPage.tsx</strong> in the <strong class="source-inline">src/pages</strong> folder with the <span class="No-Break">following content:</span><pre class="source-code">
export default function AdminPage() {</pre><pre class="source-code">
  return (</pre><pre class="source-code">
    &lt;div classNa"e="text-center p-5 text"xl"&gt;</pre><pre class="source-code">
      &lt;h1 classNa"e="text-xl text-slate-"00"&gt;Admin         Panel&lt;/h1&gt;</pre><pre class="source-code">
      &lt;p classNa"e="text-base text-slate-"00"&gt;</pre><pre class="source-code">
        You shou'dn't come here often becaus' I'm lazy</pre><pre class="source-code">
      &lt;/p&gt;</pre><pre class="source-code">
    &lt;/div&gt;</pre><pre class="source-code">
  );</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The page is very small, so it is not a great use case for lazy loading. However, its simplicity will allow us to focus on how to implement <span class="No-Break">lazy loading.</span></p>
			<ol>
				<li value="2">Open <strong class="source-inline">Routes.tsx</strong> and import <strong class="source-inline">lazy</strong> and <strong class="source-inline">Suspense</strong> <span class="No-Break">from React:</span><pre class="source-code">
import { lazy, Suspense } fr'm 're'ct';</pre></li>
				<li>Import the admin page as follows (it is important that this comes after all the other <span class="No-Break"><strong class="source-inline">import</strong></span><span class="No-Break"> statements):</span><pre class="source-code">
const AdminPage = lazy(() =&gt; impo't('./pages/AdminP'ge'));</pre></li>
				<li> Add the <strong class="source-inline">admin</strong> route <a id="_idIndexMarker543"/><span class="No-Break">as follows:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    pat':''/',</pre><pre class="source-code">
    element: &lt;App /&gt;,</pre><pre class="source-code">
    errorElement: &lt;ErrorPage /&gt;,</pre><pre class="source-code">
    children: [</pre><pre class="source-code">
      ...,</pre><pre class="source-code">
      <strong class="bold">{</strong></pre><pre class="source-code">
<strong class="bold">        pat': 'ad'in',</strong></pre><pre class="source-code">
<strong class="bold">        element: (</strong></pre><pre class="source-code">
<strong class="bold">          &lt;Suspense</strong></pre><pre class="source-code">
<strong class="bold">            fallback={</strong></pre><pre class="source-code">
<strong class="bold">              &lt;div classNa"e="text-center p-5 text-xl                 text-slate-"00"&gt;</strong></pre><pre class="source-code">
<strong class="bold">                Loading...</strong></pre><pre class="source-code">
<strong class="bold">              &lt;/div&gt;</strong></pre><pre class="source-code">
<strong class="bold">            }</strong></pre><pre class="source-code">
<strong class="bold">          &gt;</strong></pre><pre class="source-code">
<strong class="bold">            &lt;AdminPage /&gt;</strong></pre><pre class="source-code">
<strong class="bold">          &lt;/Suspense&gt;</strong></pre><pre class="source-code">
<strong class="bold">        )</strong></pre><pre class="source-code">
<strong class="bold">      }</strong></pre><pre class="source-code">
    ]</pre><pre class="source-code">
  }</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>The path to the admin page is <strong class="source-inline">/admin</strong>. A loading indicator will render as the admin page’s JavaScript <span class="No-Break">is fetched.</span></p>
			<ol>
				<li value="5">Open <strong class="source-inline">Header.tsx</strong> and add <a id="_idIndexMarker544"/>a link to the admin page after the <strong class="source-inline">Products</strong> link <span class="No-Break">as follows:</span><pre class="source-code">
&lt;nav&gt;</pre><pre class="source-code">
  &lt;NavLink ... &gt;</pre><pre class="source-code">
    Products</pre><pre class="source-code">
  &lt;/NavLink&gt;</pre><pre class="source-code">
  <strong class="bold">&lt;NavLink</strong></pre><pre class="source-code">
<strong class="bold">    "o="ad"in"</strong></pre><pre class="source-code">
<strong class="bold">    className={({ isActive }) =&gt;</strong></pre><pre class="source-code">
<strong class="bold">      `text-white no-underline p-1 pb-0.5 border-solid          border-b-2 ${</strong></pre><pre class="source-code">
<strong class="bold">        isActive"? "border-wh"te"": "border-transpar"nt"</strong></pre><pre class="source-code">
<strong class="bold">      }`</strong></pre><pre class="source-code">
<strong class="bold">    }</strong></pre><pre class="source-code">
<strong class="bold">  &gt;</strong></pre><pre class="source-code">
<strong class="bold">    Admin</strong></pre><pre class="source-code">
<strong class="bold">  &lt;/NavLink&gt;</strong></pre><pre class="source-code">
&lt;/nav&gt;</pre></li>
				<li>In the running app, open the browser DevTools and go to the <strong class="bold">Network</strong> tab and clear out any existing <a id="_idIndexMarker545"/>requests. Slow down the connection by selecting <strong class="bold">Slow 3G</strong> from the <strong class="bold">No </strong><span class="No-Break"><strong class="bold">throttling</strong></span><span class="No-Break"> menu:</span></li>
			</ol>
			<div>
				<div id="_idContainer108" class="IMG---Figure">
					<img src="image/B19051_06_16.jpg" alt="Figure 6.16 – Setting a slow connection"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.16 – Setting a slow connection</p>
			<ol>
				<li value="7">Now, click on the <strong class="bold">Admin</strong> link in the header. The loading indicator appears because the JavaScript for the admin page is <span class="No-Break">being downloaded:</span></li>
			</ol>
			<div>
				<div id="_idContainer109" class="IMG---Figure">
					<img src="image/B19051_06_17.jpg" alt="Figure 6.17 – The loading indicator"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.17 – The loading indicator</p>
			<p>After the admin page has been downloaded, it will render in the browser. If you look at the <strong class="bold">Network</strong> tab in DevTools, you will see confirmation of the admin page bundle being <span class="No-Break">lazily loaded:</span></p>
			<div>
				<div id="_idContainer110" class="IMG---Figure">
					<img src="image/B19051_06_18.jpg" alt="Figure 6.18 – Admin page download"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.18 – Admin page download</p>
			<p>That completes this <a id="_idIndexMarker546"/>section on lazily loading React components. In summary, lazily loading React components is achieved by dynamically importing the component file and rendering the component inside a <span class="No-Break"><strong class="source-inline">Suspense</strong></span><span class="No-Break"> component.</span></p>
			<p>For more information on lazily loading React components, see the following link in the React <span class="No-Break">documentation: </span><a href="https://reactjs.org/docs/code-splitting.html"><span class="No-Break">https://reactjs.org/docs/code-splitting.html</span></a><span class="No-Break">.</span></p>
			<p>That also completes this chapter. Next, we will recap what we have learned about <span class="No-Break">React Router.</span></p>
			<h1 id="_idParaDest-183"><a id="_idTextAnchor185"/>Summary</h1>
			<p>React Router gives us a comprehensive set of components and hooks for managing the navigation between pages in our app. We used <strong class="source-inline">createBrowserRouter</strong> to define all our web app’s routes. A route contains a path and a component to render when the path matches the browser URL. We used an <strong class="source-inline">errorElement</strong> prop for a route to render a custom error page in <span class="No-Break">our app.</span></p>
			<p>We used nested routes to allow the <strong class="source-inline">App</strong> component to render the app shell and page components within it. We used React Router’s <strong class="source-inline">Outlet</strong> component inside the <strong class="source-inline">App</strong> component to render page content. We also used an index route on the root route to render a <span class="No-Break">welcome message.</span></p>
			<p>We used React Router’s <strong class="source-inline">NavLink</strong> component to render navigation links that are highlighted when their route is active. The <strong class="source-inline">Link</strong> component is great for other links that have static styling requirements – we used this for product links on the product list. We used React Router’s <strong class="source-inline">Form</strong> component to navigate to the products list page when the search form <span class="No-Break">is submitted.</span></p>
			<p>Route parameters and search parameters allow parameters to be passed into components so that they can render dynamic content. <strong class="source-inline">useParams</strong> gives access to route parameters, and <strong class="source-inline">useSearchParams</strong> provides access to <span class="No-Break">search parameters.</span></p>
			<p>React components can be lazily loaded to increase startup performance. This is achieved by dynamically importing the component file and rendering the component inside a <span class="No-Break"><strong class="source-inline">Suspense</strong></span><span class="No-Break"> component.</span></p>
			<p>In the next chapter, we will learn all about forms <span class="No-Break">in React.</span></p>
			<h1 id="_idParaDest-184"><a id="_idTextAnchor186"/>Questions</h1>
			<p>Let’s test our knowledge of React Router with the <span class="No-Break">following questions:</span></p>
			<ol>
				<li value="1">We have declared the following routes in <span class="No-Break">an app:</span><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: "/",</pre><pre class="source-code">
    element: &lt;App /&gt;,</pre><pre class="source-code">
    errorElement: &lt;ErrorPage /&gt;,</pre><pre class="source-code">
    children: [</pre><pre class="source-code">
      { path: "customers", element: &lt;CustomersPage /&gt; }</pre><pre class="source-code">
    ]</pre><pre class="source-code">
  }</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>What component will render when the path <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">/customers</strong></span><span class="No-Break">?</span></p>
			<p>What component will render when the path <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">/products</strong></span><span class="No-Break">?</span></p>
			<ol>
				<li value="2">What would the path be in a route that could handle a <strong class="source-inline">/customers/37</strong> path? <strong class="source-inline">37</strong> is a customer ID and <span class="No-Break">could vary.</span></li>
				<li>The routes for a <strong class="source-inline">settings</strong> page are defined <span class="No-Break">as follows:</span><pre class="source-code">
{</pre><pre class="source-code">
  path: "/settings",</pre><pre class="source-code">
  element: &lt;SettingsPage /&gt;,</pre><pre class="source-code">
  children: [</pre><pre class="source-code">
    { path: "general", element: &lt;GeneralSettingsTab /&gt; },</pre><pre class="source-code">
    { path: "dangerous", element: &lt;DangerousSettingsTab       /&gt; }</pre><pre class="source-code">
  ]</pre><pre class="source-code">
}</pre></li>
			</ol>
			<p>The settings page has <strong class="bold">General</strong> and <strong class="bold">Dangerous</strong> tabs, which show when the path is <strong class="source-inline">/settings/general</strong> and <strong class="source-inline">/settings/dangerous</strong>, respectively. However, when these paths are requested, no tab content is shown on the settings page – so, what could we have forgotten to add in the <span class="No-Break"><strong class="source-inline">SettingsPage</strong></span><span class="No-Break"> component?</span></p>
			<ol>
				<li value="4">We are implementing a navigation bar in an app. When clicking on a navigation item, the app should navigate to the relevant page. Which React Router component should we use to render the navigational items? <strong class="source-inline">Link</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">NavLink</strong></span><span class="No-Break">?</span></li>
				<li>A route is defined <span class="No-Break">as follows:</span><pre class="source-code">
{ path: "/user/:userId", element: &lt;UserPage /&gt; }</pre></li>
			</ol>
			<p>Inside the <strong class="source-inline">UserPage</strong> component, the following code is used to get the user <strong class="source-inline">id</strong> information from the <span class="No-Break">browser URL:</span></p>
			<pre class="source-code">
const params = useParams&lt;{id: string}&gt;();
const id = params.id;</pre>
			<p>However, <strong class="source-inline">id</strong> is always <strong class="source-inline">undefined</strong>. What is <span class="No-Break">the problem?</span></p>
			<ol>
				<li value="6">The following URL contains an example of a search parameter on a <span class="No-Break"><strong class="source-inline">customers</strong></span><span class="No-Break"> page:</span></li>
			</ol>
			<p><strong class="source-inline">/</strong><span class="No-Break"><strong class="source-inline">customers/?search=cool company</strong></span></p>
			<p>However, an error occurs in the <span class="No-Break">following implementation:</span></p>
			<pre class="source-code">
function getFilteredCustomers() {
  const criteria = useSearchParams.get('search');
  if (criteria === null || criteria === "") {
    return customers;
  } else {
    return customers.filter(
      (customer) =&gt;
        customer.name.toLowerCase().indexOf(criteria.          toLowerCase()) &gt; -1
    );
  }
}</pre>
			<p>What is <span class="No-Break">the problem?</span></p>
			<ol>
				<li value="7">A React component is lazily loaded <span class="No-Break">as follows:</span><pre class="source-code">
const SpecialPage = lazy(() =&gt; import('./pages/SpecialPage'));</pre><pre class="source-code">
const router = createBrowserRouter([</pre><pre class="source-code">
  ...,</pre><pre class="source-code">
  {</pre><pre class="source-code">
    path: '/special',</pre><pre class="source-code">
    element: &lt;SpecialPage /&gt;,</pre><pre class="source-code">
  },</pre><pre class="source-code">
  ...</pre><pre class="source-code">
]);</pre></li>
			</ol>
			<p>However, React throws an error. What is <span class="No-Break">the problem?</span></p>
			<h1 id="_idParaDest-185"><a id="_idTextAnchor187"/>Answers</h1>
			<ol>
				<li value="1"><strong class="source-inline">CustomersPage</strong> will render when the path <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">/customers</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p><strong class="source-inline">ErrorPage</strong> will render when the path <span class="No-Break">is </span><span class="No-Break"><strong class="source-inline">/products</strong></span><span class="No-Break">.</span></p>
			<ol>
				<li value="2">The path could <span class="No-Break">be </span><span class="No-Break"><strong class="source-inline">path="customers/:customerId"</strong></span><span class="No-Break">.</span></li>
				<li>It is likely that the <strong class="source-inline">Outlet</strong> component has not been added <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">SettingsPage</strong></span><span class="No-Break">.</span></li>
				<li>Both will work, but <strong class="source-inline">NavLink</strong> is better because it enables items to be styled <span class="No-Break">when active.</span></li>
				<li>The route parameter referenced should <span class="No-Break">be </span><span class="No-Break"><strong class="source-inline">userId</strong></span><span class="No-Break">:</span><pre class="source-code">
const params = useParams&lt;{<strong class="bold">userId</strong>: string}&gt;();</pre><pre class="source-code">
const id = params.<strong class="bold">userId</strong>;</pre></li>
				<li>Hooks must be called at the top level of function components. Also, the <strong class="source-inline">useSearchParams</strong> hook doesn’t directly have a <strong class="source-inline">get</strong> method. Here’s the <span class="No-Break">corrected code:</span><pre class="source-code">
<strong class="bold">const [searchParams] = useSearchParams();</strong></pre><pre class="source-code">
function getFilteredCustomers() {</pre><pre class="source-code">
  const criteria = <strong class="bold">searchParams</strong>.get('search');</pre><pre class="source-code">
  ...</pre><pre class="source-code">
}</pre></li>
				<li>The lazy component must be nested inside a <strong class="source-inline">Suspense</strong> component <span class="No-Break">as follows:</span><pre class="source-code">
{</pre><pre class="source-code">
  path: '/special',</pre><pre class="source-code">
  element: (</pre><pre class="source-code">
    <strong class="bold">&lt;Suspense fallback={&lt;Loading /&gt;}&gt;</strong></pre><pre class="source-code">
      &lt;SpecialPage /&gt;</pre><pre class="source-code">
    <strong class="bold">&lt;/Suspense&gt;</strong></pre><pre class="source-code">
  )</pre><pre class="source-code">
}</pre></li>
			</ol>
		</div>
		<div>
			<div id="_idContainer112" class="IMG---Figure">
			</div>
		</div>
	</body></html>