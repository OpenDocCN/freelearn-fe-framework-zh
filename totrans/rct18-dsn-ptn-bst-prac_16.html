<html><head></head><body>
<div id="sbo-rt-content"><div class="Basic-Text-Frame" id="_idContainer176">
<h1 class="chapterNumber">16</h1>
<h1 class="chapterTitle" id="_idParaDest-283">Testing and Debugging</h1>
<p class="normal">Thanks to its components, React makes it easy to test our applications. There are many different tools available that we can use to create tests with React. In this chapter, we will cover the most popular ones to understand the benefits they provide.</p>
<p class="normal"><strong class="keyWord">Jest</strong> is an <em class="italic">all-in-one</em> testing framework <a id="_idIndexMarker865"/>solution maintained by Christoph Nakazawa from Meta and contributors within the community and aims to give you the best developer experience.</p>
<p class="normal">By the end of this chapter, you’ll be able to create a test environment from scratch and write tests for your application’s components.</p>
<p class="normal">In this chapter, we will look at the following topics:</p>
<ul>
<li class="bulletList">Why it is important to test our applications and how they help developers move faster</li>
<li class="bulletList">How to set up a Jest environment to test components using Enzyme</li>
<li class="bulletList">What the React Testing Library is and why it is a <em class="italic">must-have</em> for testing React applications</li>
<li class="bulletList">How to test events</li>
<li class="bulletList">How to implement Vitest</li>
<li class="bulletList">React DevTools and some error-handling techniques</li>
</ul>
<h1 class="heading-1" id="_idParaDest-284">Technical requirements</h1>
<p class="normal">To complete this chapter, you will need the following:</p>
<ul>
<li class="bulletList">Node.js 19+</li>
<li class="bulletList">Visual Studio Code</li>
</ul>
<p class="normal">You can find the code for this chapter in the book’s GitHub repository: <a href="https://github.com/PacktPublishing/React-18-Design-Patterns-and-Best-Practices-Fourth-Edition/tree/main/Chapter16"><span class="url">https://github.com/PacktPublishing/React-18-Design-Patterns-and-Best-Practices-Fourth-Edition/tree/main/Chapter16</span></a>.</p>
<h1 class="heading-1" id="_idParaDest-285">Understanding the benefits of testing</h1>
<p class="normal">Testing web UIs has always been a difficult job. From unit to end-to-end tests, the fact that the interfaces depend<a id="_idIndexMarker866"/> on browsers, user interactions, and many other variables makes it difficult to implement an effective testing strategy.</p>
<p class="normal">If you’ve ever tried to write end-to-end tests for the web, you’ll know how complex it is to get consistent results and how the results are often affected by false negatives due to different factors, such as the network. Other than that, user interfaces are frequently updated to improve the experience, maximize conversions, or simply add new features.</p>
<p class="normal">If tests are hard to write and maintain, developers are less prone to cover their applications. On the other hand, tests are important because they make developers more confident with their code, which is reflected in speed and quality. If a piece of code is well tested (and the tests are well written), developers can be sure that it works and is ready to ship. Similarly, thanks to tests, it becomes easier to refactor the code because tests guarantee that the functionalities do not change during the rewrite.</p>
<p class="normal">Developers tend to focus on the feature they are currently implementing, and sometimes it is hard to know if other parts of the application are affected by those changes. Tests help to avoid regressions because they can tell if the new code breaks the old tests. Greater confidence in writing new features leads to faster releases.</p>
<p class="normal">Testing the main functionalities of an application makes the code base more solid, and whenever a new bug is found, it can be reproduced, fixed, and covered by tests so that it does not happen again in the future.</p>
<p class="normal">Luckily, React (and the component era) makes testing user interfaces easy and efficient. Testing components, or trees of components, is a less arduous job because every single part of the application has its responsibilities and boundaries. If components are built in the right way, if they are pure and aim for composability and reusability, they can be tested as simple functions.</p>
<p class="normal">Another great power that modern tools bring us is the ability to run tests using Node.js and the console. Spinning up a browser for every single test makes tests slower and less predictable, degrading the developer experience; instead, running the tests using the console is faster.</p>
<p class="normal">Testing components only in the console can sometimes give unexpected behaviors when they are rendered in a real browser, but in my experience, this is rare. When we test React components, we want to make sure that they work properly and that, given different sets of props, their output is always correct.</p>
<p class="normal">We may also want to <a id="_idIndexMarker867"/>cover all the various states that a component can have. The state might change by clicking a button, so we write tests to check if all the event handlers are doing what they are supposed to do.</p>
<p class="normal">When all the functionalities of the component are covered, but we want to do more, we can write tests to verify the component’s behavior on <strong class="keyWord">edge cases</strong>. Edge cases are states that the component can assume <a id="_idIndexMarker868"/>when, for example, all the props are null or there is an error. Once the tests are written, we can be pretty confident that the component behaves as expected.</p>
<p class="normal">Testing a single component is great, but it does not guarantee that multiple individually tested components will still work once they are put together. As we will see later, with React, we can mount a tree of components and test the integration between them.</p>
<p class="normal">There are different techniques<a id="_idIndexMarker869"/> that we can use to write tests, and one of the most popular ones is <strong class="keyWord">test-driven development</strong> (<strong class="keyWord">TDD</strong>). Applying TDD means writing the tests first and then writing the code to pass the tests.</p>
<p class="normal">Following this pattern helps us to write better code because we are forced to think more about the design before implementing the functionalities, which usually leads to higher quality.</p>
<p class="normal">So, now that we have covered all of this, let’s roll up our sleeves and start writing tests for our React components. We will also learn about a cool way of writing code called test-driven development and use a handy tool called Jest to simplify our JavaScript testing. Are <a id="_idIndexMarker870"/>you ready? Let’s dive in and start working with real code!</p>
<h1 class="heading-1" id="_idParaDest-286">Painless JavaScript testing with Jest</h1>
<p class="normal">The most important way to learn how to test React components in the right way is by writing some code, and that is what we are going to do in this section.</p>
<p class="normal">The React documentation says that <a id="_idIndexMarker871"/>Facebook uses Jest to tests its components. However, React does not force you to use a particular test framework, and you can use your favorite one without any problems. To see Jest in action, we are going to create a project from scratch, install all the dependencies, and write a component with some tests. It’ll be fun!</p>
<p class="normal">The first thing to do is to move into a new folder and run the following:</p>
<pre class="programlisting con"><code class="hljs-con">npm init
</code></pre>
<p class="normal">Once <code class="inlineCode">package.json</code> is created, we can start installing the dependencies, with the first one being the <code class="inlineCode">jest</code> package itself:</p>
<pre class="programlisting con"><code class="hljs-con">npm install --save-dev jest
</code></pre>
<p class="normal">To tell <code class="inlineCode">npm</code> that we want to use the <code class="inlineCode">jest</code> command to run the tests, we must add the following scripts to <code class="inlineCode">package.json</code>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-string">"scripts"</span>: {
  <span class="hljs-string">"build"</span>: <span class="hljs-string">"webpack"</span>,
  <span class="hljs-string">"start"</span>: <span class="hljs-string">"node ./dist/server"</span>,
  <span class="hljs-string">"test"</span>: <span class="hljs-string">"jest"</span>,
  <span class="hljs-string">"test:coverage"</span>: <span class="hljs-string">"jest --coverage"</span>
}
</code></pre>
<p class="normal">To write components and tests using ES6 and JSX, we must install all Babel-related packages so that Jest can use them to transpile and understand the code.</p>
<p class="normal">The second set of dependencies is installed as follows:</p>
<pre class="programlisting con"><code class="hljs-con">npm install --save-dev @babel/core @babel/preset-env @babel/preset-react ts-jest
</code></pre>
<p class="normal">As you may know, we now have to create a <code class="inlineCode">.babelrc</code> file, which is used by Babel to know the presets and the plugins that we would like to use inside the project.</p>
<p class="normal">The <code class="inlineCode">.babelrc</code> file looks like the following:</p>
<pre class="programlisting code"><code class="hljs-code">{
  <span class="hljs-string">"presets"</span>: [<span class="hljs-string">"@babel/preset-env"</span>, <span class="hljs-string">"@babel/preset-react"</span>]
}
</code></pre>
<p class="normal">Now, it is time to install <a id="_idIndexMarker872"/>React and ReactDOM, which we need to create and render components:</p>
<pre class="programlisting con"><code class="hljs-con">npm install --save react react-dom
</code></pre>
<p class="normal">The setup is ready, and we can run Jest against the ES6 code and render our components in the DOM, but there is one more thing to do.</p>
<p class="normal">We need to install <code class="inlineCode">jest-environment-jsdom</code>, <code class="inlineCode">@testing-library/jest-dom</code>, and <code class="inlineCode">@testing-library/react</code>:</p>
<pre class="programlisting con"><code class="hljs-con">npm install @testing-library/jest-dom @testing-library/react jest-environment-jsdom
</code></pre>
<p class="normal">After you have installed these packages, you must create the <code class="inlineCode">jest.config.js</code> file:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-variable">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">preset</span>: <span class="hljs-string">'ts-jest'</span>,
  <span class="hljs-attr">setupFilesAfterEnv</span>: [<span class="hljs-string">'&lt;rootDir&gt;/setUpTests.ts'</span>],
  <span class="hljs-attr">testEnvironment</span>: <span class="hljs-string">'jsdom'</span>
}
</code></pre>
<p class="normal">Then, let’s create the <code class="inlineCode">setUpTests.ts</code> file:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> <span class="hljs-string">'@testing-library/jest-dom/extend-expect'</span>
</code></pre>
<p class="normal">Now, let’s imagine we have a <code class="inlineCode">Hello</code> component (<code class="inlineCode">src/components/Hello/index.tsx</code>):</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> <span class="hljs-title">React</span>, { <span class="hljs-variable">FC</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
type <span class="hljs-title">Props</span> = {
  name?: string
}
<span class="hljs-keyword">function</span> <span class="hljs-title">Hello</span>(<span class="hljs-params">{ name }: Props</span>) { 
  <span class="hljs-keyword">return</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">className</span><span class="hljs-tag">=</span><span class="hljs-string">"Hello"</span><span class="hljs-tag">&gt;</span>Hello {name || <span class="hljs-string">'World'</span>}<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
}
 <span class="hljs-title">Hello</span>.<span class="hljs-property">defaultProps</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">Hello</span>
</code></pre>
<p class="normal">In order to test this component, we need to create a file with the same name but add the <code class="inlineCode">.test</code> (or <code class="inlineCode">.spec</code>) suffix<a id="_idIndexMarker873"/> to the new file. This will be our test file:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> <span class="hljs-title">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { render, cleanup } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./index'</span>
 <span class="hljs-title">describe</span>(<span class="hljs-string">'Hello Component'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title">it</span>(<span class="hljs-string">'should render Hello World'</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> /&gt;</span>)
   <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">'Hello World'</span>)).<span class="hljs-title">toBeInTheDocument</span>()
  })
  <span class="hljs-title">it</span>(<span class="hljs-string">'should render the name prop'</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"Carlos"</span><span class="hljs-tag"> /&gt;</span>)
   <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">'Hello Carlos'</span>)).<span class="hljs-title">toBeInTheDocument</span>()
  })
  <span class="hljs-title">it</span>(<span class="hljs-string">'should has .Home classname'</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> /&gt;</span>)
   <span class="hljs-title">expect</span>(wrapper.<span class="hljs-property">container</span>.<span class="hljs-property">firstChild</span>).<span class="hljs-title">toHaveClass</span>(<span class="hljs-string">'Hello'</span>)
  })
  <span class="hljs-title">afterAll</span>(cleanup)
})
</code></pre>
<p class="normal">Then, in order to run the test, you need to execute the following command:</p>
<pre class="programlisting con"><code class="hljs-con">npm test
</code></pre>
<p class="normal">You should see this result:</p>
<figure class="mediaobject"><img alt="Text  Description automatically generated" height="304" src="../Images/B18414_16_01.png" width="414"/></figure>
<p class="packt_figref">Figure 16.1: npm test</p>
<p class="normal">The <strong class="screenText">PASS</strong> label means that <a id="_idIndexMarker874"/>all tests have been passed successfully; if at least one test failed, you will see the <strong class="screenText">FAIL</strong> label. Let’s change one of our tests to make it fail:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title">it</span>(<span class="hljs-string">'should render the name prop'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"Carlos"</span><span class="hljs-tag"> /&gt;</span>)
  <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">'Hello World'</span>)).<span class="hljs-title">toBeInTheDocument</span>()
})
</code></pre>
<p class="normal">This is the result:</p>
<figure class="mediaobject"><img alt="Text  Description automatically generated" height="573" src="../Images/B18414_16_02.png" width="825"/></figure>
<p class="packt_figref">Figure 16.2: Fail tests</p>
<p class="normal">As you can see, the <strong class="screenText">FAIL</strong> label is specified with an <strong class="screenText">X</strong>. Also, the expected and received values provide <a id="_idIndexMarker875"/>useful information, and you can see which value is expected and which value is received.</p>
<p class="normal">If you want to see the coverage percentage of all your unit tests, you can execute the following command:</p>
<pre class="programlisting con"><code class="hljs-con">npm run test:coverage
</code></pre>
<p class="normal">The result is the following:</p>
<figure class="mediaobject"><img alt="Graphical user interface, text  Description automatically generated" height="418" src="../Images/B18414_16_03.png" width="686"/></figure>
<p class="packt_figref">Figure 16.3: Passing tests</p>
<p class="normal">The coverage also generates an HTML version of the result; it creates a directory called <code class="inlineCode">coverage</code> and inside <a id="_idIndexMarker876"/>another called <code class="inlineCode">Icov-report</code>. If you open the <code class="inlineCode">index.xhtml</code> file in your browser, you will see the HTML version as follows:</p>
<figure class="mediaobject"><img alt="Graphical user interface, application, table  Description automatically generated" height="185" src="../Images/B18414_16_04.png" width="825"/></figure>
<p class="packt_figref">Figure 16.4: Icov-report</p>
<p class="normal">Now that you have done your first tests and you know how to collect the coverage data, let’s see how we can test events in the next section.</p>
<h2 class="heading-2" id="_idParaDest-287">Testing events</h2>
<p class="normal">Events are very <a id="_idIndexMarker877"/>common in any web application, and we need to test them as well, so let’s learn how to test events. For this, let’s create a new <code class="inlineCode">ShowInformation</code> component:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { useState, <span class="hljs-title">ChangeEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
 
 <span class="hljs-keyword">function</span> <span class="hljs-title">ShowInformation</span>() {
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-keyword">const</span> <span class="hljs-title">handleOnChange</span> = (<span class="hljs-params">e: ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
   <span class="hljs-keyword">const</span> { name, value } = e.<span class="hljs-property">target</span>
   <span class="hljs-title">setState</span>({
    ...state,
    [name]: value
   })
  }
  <span class="hljs-keyword">const</span> <span class="hljs-title">handleShowInformation</span> = () =&gt; {
   <span class="hljs-title">setState</span>({
    ...state,
    <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>
   })
  }
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">show</span>) {
   <span class="hljs-keyword">return</span> (
    <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">className</span><span class="hljs-tag">=</span><span class="hljs-string">"ShowInformation"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>Personal Information<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
     <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">className</span><span class="hljs-tag">=</span><span class="hljs-string">"personalInformation"</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span>Name:<span class="hljs-tag">&lt;/</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span> {state.name}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span>Age:<span class="hljs-tag">&lt;/</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span> {state.age}<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
     <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
   )
  }
 
  <span class="hljs-keyword">return</span> (
   <span class="hljs-tag">&lt;</span><span class="hljs-name">div</span><span class="hljs-tag"> </span><span class="hljs-attr">className</span><span class="hljs-tag">=</span><span class="hljs-string">"ShowInformation"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>Personal Information<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;</span>Name:<span class="hljs-tag">&lt;/</span><span class="hljs-name">strong</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
     <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"name"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"text"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{state.name}</span><span class="hljs-tag"> </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{handleOnChange}</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
     <span class="hljs-tag">&lt;</span><span class="hljs-name">input</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"age"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"number"</span><span class="hljs-tag"> </span><span class="hljs-attr">value</span><span class="hljs-tag">=</span><span class="hljs-string">{state.age}</span><span class="hljs-tag"> </span><span class="hljs-attr">onChange</span><span class="hljs-tag">=</span><span class="hljs-string">{handleOnChange}</span><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">onClick</span><span class="hljs-tag">=</span><span class="hljs-string">{handleShowInformation}</span><span class="hljs-tag">&gt;</span>Show Information<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
   <span class="hljs-tag">&lt;/</span><span class="hljs-name">div</span><span class="hljs-tag">&gt;</span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">ShowInformation</span>
</code></pre>
<p class="normal">Now, let’s create the<a id="_idIndexMarker878"/> test file at <code class="inlineCode">src/components/ShowInformation/index.test.tsx</code>:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { render, cleanup, fireEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title">ShowInformation</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./index'</span>
<span class="hljs-title">describe</span>(<span class="hljs-string">'Show Information Component'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> wrapper
  <span class="hljs-title">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
   wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">ShowInformation</span><span class="hljs-tag"> /&gt;</span>)
  })
  it (<span class="hljs-string">'should modify the name'</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> nameInput = wrapper.<span class="hljs-property">container</span>.<span class="hljs-title">querySelector</span>(<span class="hljs-string">'input[name="name"]'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title">HTMLInputElement</span>
   <span class="hljs-keyword">const</span> ageInput = wrapper.<span class="hljs-property">container</span>.<span class="hljs-title">querySelector</span>(<span class="hljs-string">'input[name="age"]'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title">HTMLInputElement</span>
   fireEvent.<span class="hljs-title">change</span>(nameInput, { <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">'Carlos'</span> } })
   fireEvent.<span class="hljs-title">change</span>(ageInput, { <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">34</span> } })
   <span class="hljs-title">expect</span>(nameInput.<span class="hljs-property">value</span>).<span class="hljs-title">toBe</span>(<span class="hljs-string">'Carlos'</span>)
   <span class="hljs-title">expect</span>(ageInput.<span class="hljs-property">value</span>).<span class="hljs-title">toBe</span>(<span class="hljs-string">'34'</span>)
  })
  it (<span class="hljs-string">'should show the personal information when user clicks on the button'</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> button = wrapper.<span class="hljs-property">container</span>.<span class="hljs-title">querySelector</span>(<span class="hljs-string">'button'</span>)
   fireEvent.<span class="hljs-title">click</span>(button)
   <span class="hljs-keyword">const</span> showInformation = wrapper.<span class="hljs-property">container</span>.<span class="hljs-title">querySelector</span>(<span class="hljs-string">'.personalInformation'</span>)
   <span class="hljs-title">expect</span>(showInformation).<span class="hljs-title">toBeInTheDocument</span>()
})
  <span class="hljs-title">afterAll</span>(cleanup)
})
</code></pre>
<p class="normal">If you run the test and it works fine, you should see this:</p>
<figure class="mediaobject"><img alt="Text  Description automatically generated" height="306" src="../Images/B18414_16_05.png" width="825"/></figure>
<p class="packt_figref">Figure 16.5: Passing tests</p>
<h1 class="heading-1" id="_idParaDest-288">Introducing Vitest</h1>
<p class="normal"><strong class="keyWord">Vitest</strong> is a unit test framework built on <strong class="keyWord">Vite</strong>, designed for<a id="_idIndexMarker879"/> speed and minimal configuration. It serves as a <a id="_idIndexMarker880"/>replacement for various testing tools such as Jest, Mocha, and Chai. Since Vitest is built on top of the Jest API, if you already know how to use Jest, it works in a similar manner. </p>
<p class="normal">In this context, we will utilize Vite, a build tool that aims to provide a fast and lean development experience for modern web projects.</p>
<p class="normal">Firstly, you need to install Vite globally with:</p>
<pre class="programlisting con"><code class="hljs-con">npm install vite -g
</code></pre>
<p class="normal">After it’s installed, you need to create your first project with the <code class="inlineCode">npm</code> command:</p>
<pre class="programlisting con"><code class="hljs-con">npm create vite@latest
</code></pre>
<p class="normal">It will ask you for the project name. You can use <code class="inlineCode">my-first-vite-project</code>, then for the framework you want to use (<code class="inlineCode">React</code>), and finally, choose the variant (<code class="inlineCode">TypeScript</code>):</p>
<figure class="mediaobject"><img alt="" height="247" src="../Images/B18414_16_06.png" width="697"/></figure>
<p class="packt_figref">Figure 16.6: npm create vite@latest</p>
<p class="normal">Next, you need to install the project dependencies and run the <code class="inlineCode">npm run dev</code> command. If you <a id="_idIndexMarker881"/>do so, you will see something similar to the following on port <code class="inlineCode">5173</code>:</p>
<figure class="mediaobject"><img alt="" height="555" src="../Images/B18414_16_07.png" width="452"/></figure>
<p class="packt_figref">Figure 16.7: Vite app</p>
<h2 class="heading-2" id="_idParaDest-289">Installing and configuring Vitest</h2>
<p class="normal">Once you have <a id="_idIndexMarker882"/>your Vite app running, it is time to install Vitest. To do so, you simply need to run this <a id="_idIndexMarker883"/>command in your project terminal:</p>
<pre class="programlisting con"><code class="hljs-con"> npm install -D vitest @test-library/react
</code></pre>
<p class="normal">After you’ve installed Vitest, you need to modify the <code class="inlineCode">vite.config.ts</code> file with the following code:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">/// &lt;reference types="vitest" /&gt;</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'</span><span class="hljs-string">@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
 
<span class="hljs-comment">// https://vitejs.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title">react</span>()],
  <span class="hljs-attr">test</span>: {
   <span class="hljs-attr">environment</span>: <span class="hljs-string">'jsdom'</span>
  }
})
</code></pre>
<p class="normal">As you can see, we will use the <code class="inlineCode">jsdom</code> environment, so you’ll need to install it as well:</p>
<pre class="programlisting con"><code class="hljs-con">npm install -D jsdom
</code></pre>
<p class="normal">Additionally, Vitest offers a plugin called Vitest UI, which enables Vitest to provide a visually appealing user interface for viewing and interacting with your tests in the browser. While it is an optional plugin, we will be using it. You can install it by executing the following command:</p>
<pre class="programlisting con"><code class="hljs-con">npm install -D @vitest/ui
</code></pre>
<p class="normal">In order to test your code, you need to add the test script to your <code class="inlineCode">package.json</code> file using the <code class="inlineCode">vitest --ui</code> command:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-string">"scripts"</span>: {
  <span class="hljs-string">"</span><span class="hljs-string">dev"</span>: <span class="hljs-string">"vite"</span>,
  <span class="hljs-string">"build"</span>: <span class="hljs-string">"tsc &amp;&amp; vite build"</span>,
  <span class="hljs-string">"preview"</span>: <span class="hljs-string">"vite preview"</span>,
  <span class="hljs-string">"test"</span>: <span class="hljs-string">"vitest --ui"</span>
}
</code></pre>
<p class="normal">We will be using the same <code class="inlineCode">Hello</code> component that we used for Jest, although there will be a few differences. You need to<a id="_idIndexMarker884"/> save this component at <code class="inlineCode">src/components/Hello/index.tsx</code>:</p>
<pre class="programlisting code"><code class="hljs-code"> <span class="hljs-keyword">import</span> <span class="hljs-title">React</span>, { <span class="hljs-variable">FC</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
 type <span class="hljs-title">Props</span> = {
  name?: string
 }
 <span class="hljs-keyword">const</span> <span class="hljs-title">Hello</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">(</span><span class="hljs-params">{ name }</span><span class="hljs-function">) =&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">className</span><span class="hljs-tag">=</span><span class="hljs-string">"Hello"</span><span class="hljs-tag">&gt;</span>Hello {name || <span class="hljs-string">"World"</span>}<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
 <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">Hello</span>
</code></pre>
<p class="normal">Then you need to create a<a id="_idIndexMarker885"/> test file called <code class="inlineCode">index.test.tsx</code> under the same component directory:</p>
<pre class="programlisting code"><code class="hljs-code"> <span class="hljs-keyword">import</span> { cleanup, render } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react'</span>
 <span class="hljs-keyword">import</span> { afterAll, describe, expect, it } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>
 <span class="hljs-keyword">import</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./index'</span>
 <span class="hljs-title">describe</span>(<span class="hljs-string">"Hello Component"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title">it</span>(<span class="hljs-string">"should render Hello World"</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> /&gt;</span>)
   <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">"Hello World"</span>)).<span class="hljs-title">toBeDefined</span>()
  })
  
  <span class="hljs-title">it</span>(<span class="hljs-string">"should render the name prop"</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"Carlos"</span><span class="hljs-tag"> /&gt;</span>)
   <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">"Hello Carlos"</span>)).<span class="hljs-title">toBeDefined</span>()
  })
 
  <span class="hljs-title">it</span>(<span class="hljs-string">"should has .Home classname"</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> /&gt;</span>)
   <span class="hljs-keyword">const</span> firstChild = wrapper.<span class="hljs-property">container</span>.<span class="hljs-property">firstChild</span> <span class="hljs-keyword">as</span> <span class="hljs-title">HTMLElement</span>
   <span class="hljs-title">expect</span>(firstChild?.<span class="hljs-property">classList</span>.<span class="hljs-title">contains</span>(<span class="hljs-string">"Hello"</span>)).<span class="hljs-title">toBe</span>(<span class="hljs-literal">true</span>)
  })
 
  <span class="hljs-title">afterAll</span>(cleanup)
 })
</code></pre>
<p class="normal">As you can see, the code is quite similar to Jest. However, one of the main differences is that we are now importing all the testing methods we will use, such as <code class="inlineCode">afterAll</code>, <code class="inlineCode">describe</code>, <code class="inlineCode">expect</code>, and <code class="inlineCode">it</code>. </p>
<p class="normal">If you run the <code class="inlineCode">test</code> command, you should see something similar to this in your terminal:</p>
<figure class="mediaobject"><img alt="" height="386" src="../Images/B18414_16_08.png" width="705"/></figure>
<p class="packt_figref">Figure 16.8: npm test</p>
<p class="normal">If you have noticed, there<a id="_idIndexMarker886"/> is a link that is generated by the Vitest UI plugin we<a id="_idIndexMarker887"/> installed earlier. If you click on that link, you will see the following:</p>
<figure class="mediaobject"><img alt="" height="441" src="../Images/B18414_16_09.png" width="825"/></figure>
<p class="packt_figref">Figure 16.9: Vitest UI</p>
<p class="normal">Currently, we only have one test file, but if you add more, you will see them listed on the sidebar on the left. Now, let’s click on our current <code class="inlineCode">Hello</code> test:</p>
<figure class="mediaobject"><img alt="" height="169" src="../Images/B18414_16_10.png" width="825"/></figure>
<p class="packt_figref">Figure 16.10 – Report</p>
<p class="normal">You will be able to see<a id="_idIndexMarker888"/> the test cases that are passing correctly. However, one <a id="_idIndexMarker889"/>of the most interesting advantages of this UI plugin is that you can even modify the test code directly in the browser by clicking on the <strong class="screenText">Code</strong> tab:</p>
<figure class="mediaobject"><img alt="" height="555" src="../Images/B18414_16_11.png" width="825"/></figure>
<p class="packt_figref">Figure 16.11: Code</p>
<p class="normal">Let’s modify our code to intentionally cause some tests to fail. You can change the first test to say <code class="inlineCode">"Hello Foo"</code> instead of <code class="inlineCode">"Hello World"</code> and make sure to save it (<em class="keystroke">Cmd + S</em>):</p>
<figure class="mediaobject"><img alt="" height="397" src="../Images/B18414_16_12.png" width="825"/></figure>
<p class="packt_figref">Figure 16.12: Failing test</p>
<p class="normal">As <a id="_idIndexMarker890"/>you can see, now <a id="_idIndexMarker891"/>our first test fails because it is unable to find the <code class="inlineCode">"Hello Foo"</code> text.</p>
<h2 class="heading-2" id="_idParaDest-290">Enabling globals</h2>
<p class="normal">Personally, I prefer<a id="_idIndexMarker892"/> importing all the necessary functions or variables in a file. However, I am aware that when creating numerous test files, repeatedly<a id="_idIndexMarker893"/> importing global testing variables like <code class="inlineCode">describe</code>, <code class="inlineCode">it</code>, <code class="inlineCode">expect</code>, and so on, can become tedious and cumbersome.</p>
<p class="normal">Fortunately, Vitest offers a configuration option to enable <code class="inlineCode">globals</code>, eliminating the need to import them every time. To enable this feature, you need to modify your <code class="inlineCode">vite.config.ts</code> file with the following code:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment">/// &lt;reference types="vitest" /&gt;</span>
<span class="hljs-comment">/// &lt;reference types="vite/client" /&gt;</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-comment">// https://vitejs.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title">react</span>()],
  <span class="hljs-attr">test</span>: {
   <span class="hljs-attr">environment</span>: <span class="hljs-string">"jsdom"</span>,
   <span class="hljs-attr">globals</span>: <span class="hljs-literal">true</span>
  }
})
</code></pre>
<p class="normal">After making the changes mentioned earlier, you also need to update your <code class="inlineCode">tsconfig.json</code> file by adding the global types:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-string">"compilerOptions"</span>: {
  <span class="hljs-string">"types"</span>: [<span class="hljs-string">"vitest/globals"</span>]
}
</code></pre>
<p class="normal">After following these<a id="_idIndexMarker894"/> steps, you will now be able to remove the import <a id="_idIndexMarker895"/>of the <code class="inlineCode">globals</code> in your test file. If you still encounter any TypeScript errors, it is likely that you will need to restart your TypeScript server or reload the window in your VSCode.</p>
<h2 class="heading-2" id="_idParaDest-291">In-source testing</h2>
<p class="normal">Vitest also offers a way to <a id="_idIndexMarker896"/>run tests within your source code alongside the implementation, similar to Rust’s module tests.</p>
<p class="normal">Personally, I have an old-school approach, and I usually prefer to have a separate test file for my testing. However, there are situations where the component or functions being tested are very small, and creating a new test file may seem excessive.</p>
<p class="normal">To enable this feature, you need to modify your <code class="inlineCode">vite.config.ts</code> file and add the <code class="inlineCode">includeSource</code> option:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title">react</span>()],
  <span class="hljs-attr">test</span>: {
   <span class="hljs-attr">environment</span>: <span class="hljs-string">"</span><span class="hljs-string">jsdom"</span>,
   <span class="hljs-attr">globals</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-attr">includeSource</span>: [<span class="hljs-string">"src/**/*.{ts,tsx}"</span>]
  }
})
</code></pre>
<p class="normal">To resolve the TypeScript issues, you need to make another change by adding the <code class="inlineCode">vitest/importMeta</code> type to your <code class="inlineCode">tsconfig.json</code> file:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-string">"compilerOptions"</span>: {
  <span class="hljs-string">"types"</span>: [<span class="hljs-string">"</span><span class="hljs-string">vitest/globals"</span>, <span class="hljs-string">"vitest/importMeta"</span>]
}
</code></pre>
<p class="normal">Now, let’s move our <code class="inlineCode">Hello</code> component test file inside the same <code class="inlineCode">Hello</code> component. Again, this is optional and is just to demonstrate that it is possible to do so. In the end, you can decide which testing approach to use.</p>
<p class="normal">To achieve this, we need to add an <code class="inlineCode">if</code> statement inside our <code class="inlineCode">Hello</code> component to check if we are in<a id="_idIndexMarker897"/> testing mode. We can accomplish this with the following code: <code class="inlineCode">if (import.meta.vitest)</code>. Inside this block, we will move all the testing cases, and we will also<a id="_idIndexMarker898"/> require the <strong class="keyWord">React Testing Library</strong> methods only within that block. This way, our code will resemble the following:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> <span class="hljs-title">React</span>, { <span class="hljs-variable">FC</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
  type <span class="hljs-title">Props</span> = {
  name?: string;
}
<span class="hljs-keyword">const</span> <span class="hljs-title">Hello</span>: <span class="hljs-variable">FC</span>&lt;<span class="hljs-title">Props</span>&gt; = <span class="hljs-function">(</span><span class="hljs-params">{ name }</span><span class="hljs-function">) =&gt;</span> <span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag"> </span><span class="hljs-attr">className</span><span class="hljs-tag">=</span><span class="hljs-string">"Hello"</span><span class="hljs-tag">&gt;</span>Hello {name || "World"}<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title">Hello</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">vitest</span>) {
  <span class="hljs-keyword">const</span> { cleanup, render } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@testing-library/react'</span>)
  
  <span class="hljs-title">describe</span>(<span class="hljs-string">"Hello Component"</span>, <span class="hljs-function">() =&gt;</span> {
   <span class="hljs-title">it</span>(<span class="hljs-string">"should render Hello World"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> /&gt;</span>)
    <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">"Hello World"</span>)).<span class="hljs-title">toBeDefined</span>()
   })
   
   <span class="hljs-title">it</span>(<span class="hljs-string">"should render the name prop"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"Carlos"</span><span class="hljs-tag"> /&gt;</span>)
    <span class="hljs-title">expect</span>(wrapper.<span class="hljs-title">getByText</span>(<span class="hljs-string">"Hello Carlos"</span>)).<span class="hljs-title">toBeDefined</span>()
   })
   <span class="hljs-title">it</span>(<span class="hljs-string">"should has .Home classname"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title">render</span>(<span class="hljs-tag">&lt;</span><span class="hljs-name">Hello</span><span class="hljs-tag"> /&gt;</span>)
    <span class="hljs-keyword">const</span> firstChild = wrapper.<span class="hljs-property">container</span>.<span class="hljs-property">firstChild</span> <span class="hljs-keyword">as</span> <span class="hljs-title">HTMLElement</span>
    <span class="hljs-title">expect</span>(firstChild?.<span class="hljs-property">classList</span>.<span class="hljs-title">contains</span>(<span class="hljs-string">"Hello"</span>)).<span class="hljs-title">toBe</span>(<span class="hljs-literal">true</span>)
   })
   
   <span class="hljs-title">afterAll</span>(cleanup)
  })
}
</code></pre>
<p class="normal">Now you can delete your previous file (<code class="inlineCode">index.test.tsx</code>). If you run your tests again, they should work the same.</p>
<p class="normal">The difference is that now you will be able to see the entire code (<code class="inlineCode">Component</code> and <code class="inlineCode">Test</code> cases):</p>
<figure class="mediaobject"><img alt="" height="585" src="../Images/B18414_16_13.png" width="825"/></figure>
<p class="packt_figref">Figure 16.13: Passing test</p>
<p class="normal">This approach may <a id="_idIndexMarker899"/>potentially speed up the testing process for a component or a function. However, personally, I still prefer to perform testing in a separate test file. Nevertheless, you are free to choose what works best for you and your project.</p>
<p class="normal">After exploring the concept of in-source testing, let’s proceed to understand how React DevTools can be effectively applied in our development process to optimize our application’s performance and ensure it runs smoothly.</p>
<h1 class="heading-1" id="_idParaDest-292">Using React DevTools</h1>
<p class="normal">When testing in the <a id="_idIndexMarker900"/>console is not enough, and we want to inspect our application while it is running inside the browser, we can use React DevTools.</p>
<div class="note">
<p class="normal">You can install this as a Chrome extension at the following URL: <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en"><span class="url">https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgo fadopljbjfkapdkoienihi?hl=en</span></a>.</p>
</div>
<p class="normal">The installation adds a tab to the Chrome DevTools called <strong class="screenText">React</strong>, where you can inspect the rendered tree of components and check which properties they have received and what their state is at a particular point in time.</p>
<p class="normal">Props and states <a id="_idIndexMarker901"/>can be read, and they can be changed in real time to trigger updates in the UI and see the results straight away. This is a must-have tool, and in the most recent versions, it has a new feature that can be enabled by checking the <strong class="screenText">Trace React Updates</strong> checkbox.</p>
<p class="normal">When this functionality is enabled, we can use our application and see which components get updated when we perform a particular action. The updated components are highlighted with colored rectangles, and it becomes easy to spot possible optimizations.</p>
<h2 class="heading-2" id="_idParaDest-293">Using Redux DevTools</h2>
<p class="normal">If you are using Redux in<a id="_idIndexMarker902"/> your application, you probably want to use Redux DevTools to be able to debug your Redux flow. You can install it at the following URL: <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=es"><span class="url">https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=es</span></a></p>
<p class="normal">Also, you need to install the <code class="inlineCode">redux-devtools-extension</code> package:</p>
<pre class="programlisting con"><code class="hljs-con">npm install --save-dev redux-devtools-extension
</code></pre>
<p class="normal">Once you have installed React DevTools and Redux DevTools, you will need to configure them.</p>
<p class="normal">If you try to use Redux DevTools directly, it won’t work; this is because we need to pass the <code class="inlineCode">composeWithDevTools</code> method into the Redux store; this should be the <code class="inlineCode">configureStore.ts</code> file:</p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { createStore, applyMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-thunk'</span>;
<span class="hljs-keyword">import</span> { composeWithDevTools } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-devtools-extension'</span>;
<span class="hljs-keyword">import</span> rootReducer <span class="hljs-keyword">from</span> <span class="hljs-string">'@reducers'</span>;
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title">configureStore</span>(<span class="hljs-params">{</span>
<span class="hljs-params">  initialState,</span>
<span class="hljs-params">  reducer</span>
<span class="hljs-params">}</span>) {
<span class="hljs-keyword">const</span> middleware = [thunk];
<span class="hljs-keyword">return</span> <span class="hljs-title">createStore</span>(
   rootReducer,
   initialState,
   <span class="hljs-title">composeWithDevTools</span>(<span class="hljs-title">applyMiddleware</span>(...middleware))
  );
}
</code></pre>
<p class="normal">This is the best tool <a id="_idIndexMarker903"/>to test our Redux applications.</p>
<h1 class="heading-1" id="_idParaDest-294">Summary</h1>
<p class="normal">In this chapter, you gained a comprehensive understanding of the benefits of testing, as well as the various frameworks and tools available for testing React components. You learned how to implement and test components and events using the React Testing Library and how to use Jest coverage to optimize your testing process. Additionally, you explored tools such as React DevTools and Redux DevTools to further enhance your development experience. It’s important to keep in mind common solutions when it comes to testing complex components, such as higher-order components or forms with multiple nested fields, to ensure that your tests accurately reflect the functionality of your application.</p>
<p class="normal">In the next chapter, you will learn how to deploy your application to production.</p>
</div>
</div></body></html>