<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" style="font-size:1.200rem;">
<head><title>Chapter&#160;6.&#160;Building Web Components with ReactJS</title>
<link rel="stylesheet" href="../Styles/style0001.css" type="text/css"/>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2"/>
</head>
<body id="page">
<div class="chapter" title="Chapter&#160;6.&#160;Building Web Components with ReactJS" id="aid-1R42S1"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"></a>Chapter&#160;6.&#160;Building Web Components with ReactJS</h1>
</div>
</div>
</div>
<p>In this chapter, we will learn about the "react way" for web component development offered by the Facebook team. We will also learn to develop a web component using the ReactJS library. We will explore the flux architecture of a web application and understand how the data flows in it. Finally, we will develop a custom component using the ReactJS library.</p>
<div class="section" title="The reactive approach"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec57"></a>The reactive approach</h1>
</div>
</div>
</div>
<p>Before understanding the ReactJS framework in detail, we should know some of the applications that have been developed. The <a id="id502" class="indexterm"></a>comment section of Facebook, LiveFyre, and Disqus are developed using ReactJS. These applications are developed by following the flux architecture.</p>
</div>
</div>


<div class="section" title="The flux architecture" id="aid-1S2JE1"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec58"></a>The flux architecture</h1>
</div>
</div>
</div>
<p>A flux application<a id="id503" class="indexterm"></a> has three important partsâ€”<span class="strong"><strong>dispatcher</strong></span>, <span class="strong"><strong>store</strong></span>, and <span class="strong"><strong>views</strong></span>. These<a id="id504" class="indexterm"></a> parts are connected by<a id="id505" class="indexterm"></a> <span class="strong"><strong>action</strong></span>. The <a id="id506" class="indexterm"></a>following diagram shows the three building blocks and action data flow in the flux architecture:</p>
<div class="mediaobject"><img src="../Images/image00330.jpeg" alt="The flux architecture"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The details of these three parts of flux architecture are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>View</strong></span>: This represents<a id="id507" class="indexterm"></a> the UI components that are rendered in the browser to be used by the end users.</li>
<li class="listitem"><span class="strong"><strong>Store</strong></span>: This holds the <a id="id508" class="indexterm"></a>application data and business logic. It is similar to the model of the MVC framework. <span class="strong"><strong>Store</strong></span> represents a collection of data objects, whereas model represents a single object.</li>
<li class="listitem"><span class="strong"><strong>Dispatcher</strong></span>: This is the <a id="id509" class="indexterm"></a>central hub through which all actions have to pass. It contains all the callback registered by the stores.</li>
</ul>
</div>
<p>Applications developed in flux architecture work as follows:</p>
<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Generally, <a id="id510" class="indexterm"></a>actions are generated by the user, interacting with the views. These actions are asynchronous in nature.</li>
<li class="listitem">These actions are then passed to the dispatcher for processing. The dispatcher then invokes the callback method registered in the store.</li>
<li class="listitem">The execution of the callback method may change the state of the data. The store then emits the change event with the updated data. The view listens to the change event and accesses the modified data from the store using event handler. The view then calls their own <code class="literal">setState</code> method, which causes the re-rendering of itself and its children element.</li>
<li class="listitem">The data flow is unidirectional. Flux architecture does not allow two-way data binding, which can cause more cascading updates.<div class="note" title="Note"><h3 class="title"><a id="tip06"></a>Tip</h3>
<p>The data flow in flux-based application is unidirectional.</p>
</div></li>
</ol>
<div style="height:10px; width: 1px"></div>
</div>
<div class="section" title="Flux key features"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec75"></a>Flux key features</h2>
</div>
</div>
</div>
<p>The flux architecture provides some key features that a flux-based web application must follow. These key<a id="id511" class="indexterm"></a> features are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Synchrony</strong></span>: All the callback methods registered for each action are synchronous in execution, but the action is triggered asynchronously from the source.</li>
<li class="listitem"><span class="strong"><strong>Inversion of control</strong></span>: The flow of control is transferred to the appropriate store object and targeted callback.</li>
<li class="listitem"><span class="strong"><strong>Semantic actions</strong></span>: The action triggered from the source contains some sematic information, which helps the store object decide the appropriate method execution.</li>
<li class="listitem"><span class="strong"><strong>No cascading actions</strong></span>: Flux disallows cascading actions that generate multiple updates.<div class="note" title="Note"><h3 class="title"><a id="note28"></a>Note</h3>
<p>To find out<a id="id512" class="indexterm"></a> more about flux architecture use the following link:</p>
<p>
<a class="ulink" href="http://fluxxor.com/what-is-flux.html">http://fluxxor.com/what-is-flux.html</a>
</p>
</div></li>
</ul>
</div>
</div>
</div>


<div class="section" title="Installing ReactJS" id="aid-1T1401"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec59"></a>Installing ReactJS</h1>
</div>
</div>
</div>
<p>The ReactJS library can <a id="id513" class="indexterm"></a>be installed using Bower. Assuming that Bower is already present in your machine, use the following command to install the ReactJS library:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>bower install react</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with ReactJS installation in progress using Bower:</p>
<div class="mediaobject"><img src="../Images/image00331.jpeg" alt="Installing ReactJS"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>After successful <a id="id514" class="indexterm"></a>execution of the Bower command, the system loads the ReactJS library file inside the <code class="literal">react</code> subdirectory present inside the <code class="literal">bower_components</code> directory. The following screenshot shows the files present inside the ReactJS library:</p>
<div class="mediaobject"><img src="../Images/image00332.jpeg" alt="Installing ReactJS"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The ReactJS library has three different parts:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>ReactJS core library</strong></span>: This is the core ReactJS library. The name of this file is <code class="literal">ReactJS</code> and the minified <a id="id515" class="indexterm"></a>version of this library is <code class="literal">react.min.js</code>.</li>
<li class="listitem"><span class="strong"><strong>ReactJS addon</strong></span>: This<a id="id516" class="indexterm"></a> represents the additional utility packages that can be used with ReactJS. The<a id="id517" class="indexterm"></a> name of this file is <code class="literal">react-with-addons.js</code> and the minified version of this library is <code class="literal">react-with-addons.min.js</code>.</li>
<li class="listitem"><span class="strong"><strong>JSX transformer library</strong></span>: This library can be used in the browser to transfer the JSX code to JavaScript. The<a id="id518" class="indexterm"></a> name of this file is <code class="literal">JSXTransformer.js</code>.</li>
</ul>
</div>
</div>


<div class="section" title="Configuring ReactJS" id="aid-1TVKI1"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec60"></a>Configuring ReactJS</h1>
</div>
</div>
</div>
<p>The ReactJS library can be used as a standalone or with the JSX transformer file. We will find out more about <a id="id519" class="indexterm"></a>JSX in the coming section. For now, we can include the following <code class="literal">&lt;script&gt;</code> tag to start using the ReactJS library:</p>
<div class="informalexample"><pre class="programlisting">&lt;script src="bower_components/react/<span class="strong"><strong>react.js</strong></span>"&gt;&lt;/script&gt;
&lt;script src="bower_components/react/<span class="strong"><strong>JSXTransformer.js</strong></span>"&gt;&lt;/script&gt;</pre>
</div>
<p>The ReactJS library can also be used directly from the Facebook CDN to increase the performance of the page load. The <code class="literal">&lt;script&gt;</code> code to load the ReactJS library from the CDN is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;script src="<span class="strong"><strong>http://fb.me/react-0.12.2.js</strong></span>"&gt;&lt;/script&gt;
&lt;script src="<span class="strong"><strong>http://fb.me/JSXTransformer-0.12.2.js</strong></span>"&gt;&lt;/script&gt;</pre>
</div>
<div class="note" title="Note"><h3 class="title"><a id="note29"></a>Note</h3>
<p>During the writing of this book, the ReactJS library has the 0.12.2 version.</p>
</div>
</div>


<div class="section" title="Using ReactJS" id="aid-1UU541"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec61"></a>Using ReactJS</h1>
</div>
</div>
</div>
<p>We can <a id="id520" class="indexterm"></a>use the ReactJS library by including the <code class="literal">ReactJS</code> or <code class="literal">rect.min.js</code> file using the <code class="literal">&lt;script&gt;</code> element. We can create a DOM element using the <code class="literal">React.createElement</code> method. The syntax for the <code class="literal">createElement</code> method is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>var reactElement = React.createElement(type, properties, children);</strong></span>
</pre>
</div>
<p>The details of the preceding syntax are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">type</code>: This represents the HTML element name in a string format</li>
<li class="listitem"><code class="literal">properties</code>: This represents an object with the key-value pair for attribute name and values</li>
<li class="listitem"><code class="literal">children</code>: This represents the child nodes that an element can have</li>
</ul>
</div>
<p>A <code class="literal">React</code> element can be rendered in the browser using the <code class="literal">React.render</code> method. The syntax for the <code class="literal">render</code> method is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>React.render(reactElement, targetDOMNode)</strong></span>
</pre>
</div>
<p>The details of the preceding syntax are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">reactElement</code>: It represents the ReactJS element which need to be rendered in the browser.</li>
<li class="listitem"><code class="literal">targetDOMNode</code>: It represent the DOM node where the ReactJS element needs to be appended for displaying in browser.</li>
</ul>
</div>
<p>Now, let's checkout<a id="id521" class="indexterm"></a> an example for displaying the <code class="literal">React</code> element using the <code class="literal">createElement</code> and <code class="literal">render</code> method. The following code shows the use of these methods:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ReactJS Without JSX Demo&lt;/title&gt;
    &lt;script src="bower_components/react/<span class="strong"><strong>react.js</strong></span>"&gt;&lt;/script&gt;
    &lt;style&gt;
<span class="strong"><strong>        .headerStyle{</strong></span>
<span class="strong"><strong>          color: red;</strong></span>
<span class="strong"><strong>        }</strong></span>
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
<span class="strong"><strong>        var helloMessage = React.createElement('h1',</strong></span>
<span class="strong"><strong>                { className: 'headerStyle' }, 'Hello ReactJS');</strong></span>
<span class="strong"><strong>        React.render(helloMessage, document.body);</strong></span>
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A header element <code class="literal">h1</code> is created using the <code class="literal">React.createElement</code> method. This header element has a <code class="literal">headerStyle</code> class and a child node of type <code class="literal">TEXT</code> with a <code class="literal">Hello ReactJS</code> value. Reference of this header element is saved in the <code class="literal">helloMessage</code> variable.</li>
<li class="listitem">The <code class="literal">React.render</code> method is used to display the header element <code class="literal">helloMessage</code> in the <code class="literal">document.body</code> position.</li>
</ul>
</div>
<p>The output of the preceding code is rendered in the following screenshot containing the <span class="strong"><strong>Hello ReactJS</strong></span> string message in the color red:</p>
<div class="mediaobject"><img src="../Images/image00333.jpeg" alt="Using ReactJS"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>


<div class="section" title="What is JSX"><div class="titlepage" id="aid-1VSLM2"><div><div><h1 class="title"><a id="ch06lvl1sec62"></a>What is JSX</h1>
</div>
</div>
</div>
<p>ReactJS comes with another flavor named JSX. <span class="strong"><strong>JSX</strong></span> stands for <span class="strong"><strong>JavaScript XML</strong></span>. It follows<a id="id522" class="indexterm"></a> XML type element declaration for web component development. There are many benefits of using JSX:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Familiarity</strong></span>: Developers <a id="id523" class="indexterm"></a>are familiar with XML, and JSX provides a similar type of element declaration.</li>
<li class="listitem"><span class="strong"><strong>Semantics</strong></span>: JSX is easier to understand as it follows a declarative type of programming.</li>
<li class="listitem"><span class="strong"><strong>Separation of concern</strong></span>: JSX provides a clean way to encapsulate all the logic and markup in one definition.</li>
</ul>
</div>
<div class="section" title="Custom components with JSX"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec76"></a>Custom components with JSX</h2>
</div>
</div>
</div>
<p>ReactJS provides the <code class="literal">JSXTransformer.js</code> script file for transpiling of the JSX code in the browser. A JSX<a id="id524" class="indexterm"></a> code block is defined using the following syntax:</p>
<div class="informalexample"><pre class="programlisting">&lt;script <span class="strong"><strong>type="text/jsx</strong></span>"&gt;
   //JSX code goes here
&lt;/script&gt;</pre>
</div>
<p>A custom element can be created using the <code class="literal">React.createClass</code> method. The syntax for the <code class="literal">createClass</code> method is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>React.createClass(objectSpecification)</strong></span>
</pre>
</div>
<p>In the preceding syntax, the <code class="literal">objectSpecification</code> class takes a <code class="literal">render</code> method and other optional lifecycle methods and properties. We will learn more about the lifecycle method and properties in the coming sections. For now, let's check out an example of developing a custom element using JSX. The following code contains the use of the <code class="literal">createClass</code> method to develop a custom element:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ReactJS With JSX Demo&lt;/title&gt;
    &lt;script src="bower_components/react/<span class="strong"><strong>react.js</strong></span>"&gt;&lt;/script&gt;
    &lt;script src="bower_components/react/<span class="strong"><strong>JSXTransformer.js</strong></span>"&gt;&lt;/script&gt;
    &lt;style&gt;
<span class="strong"><strong>        .headerStyle{</strong></span>
<span class="strong"><strong>            color: red;</strong></span>
<span class="strong"><strong>        }</strong></span>
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script <span class="strong"><strong>type="text/jsx"</strong></span>&gt;
<span class="strong"><strong>    var HelloMessage = React.createClass({</strong></span>
<span class="strong"><strong>        render: function() {</strong></span>
<span class="strong"><strong>            return (</strong></span>
<span class="strong"><strong>              &lt;h1 className="headerStyle"&gt;</strong></span>
<span class="strong"><strong>                Hello ReactJS</strong></span>
<span class="strong"><strong>              &lt;/h1&gt;</strong></span>
<span class="strong"><strong>            );</strong></span>
<span class="strong"><strong>        }</strong></span>
<span class="strong"><strong>    });</strong></span>
<span class="strong"><strong>    React.render(&lt;HelloMessage/&gt;, document.body);</strong></span>
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">A custom element named <code class="literal">HelloMessage</code> is created using the <code class="literal">React.createClass</code> method inside a <code class="literal">&lt;script&gt;</code> block with <code class="literal">type</code> set to <code class="literal">text/jsx</code>.</li>
<li class="listitem">The specification object contains the <code class="literal">render</code> method, which has a JSX element. The <code class="literal">h1</code> element has a <code class="literal">className</code> attribute. The <code class="literal">className</code> attribute is <a id="id525" class="indexterm"></a>a JSX attribute, but looks familiar to an HTML element attribute.</li>
<li class="listitem">The specification object for <code class="literal">HelloMessage</code> contains a <code class="literal">render</code> method which returns a JSX element.</li>
<li class="listitem">The <code class="literal">&lt;HelloMessage&gt;</code> element is then rendered using the <code class="literal">React.render</code> method inside the <code class="literal">&lt;body&gt;</code> tag.</li>
</ul>
</div>
<p>The output of the preceding code is rendered as the following screenshot. We can find a similar result that the <span class="strong"><strong>Hello ReactJS</strong></span> message is rendered in red color:</p>
<div class="mediaobject"><img src="../Images/image00334.jpeg" alt="Custom components with JSX"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="ReactJS inline style"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec77"></a>ReactJS inline style</h2>
</div>
</div>
</div>
<p>In ReactJS, we can<a id="id526" class="indexterm"></a> add an inline style using the <code class="literal">style</code> attribute and ReactJS expression. ReactJS takes inline style as a JavaScript <span class="emphasis"><em>anonymous object</em></span> containing a key/value pair representing properties and their values separated with a <span class="emphasis"><em>colon</em></span> (<code class="literal">:</code>). The following<a id="id527" class="indexterm"></a> syntax shows the JavaScript object for inline style:</p>
<div class="informalexample"><pre class="programlisting">var styleObject={
<span class="strong"><strong>        styleAttribute: "styleValue",</strong></span>
<span class="strong"><strong>    };</strong></span>
</pre>
</div>
<p>The details of the preceding syntax are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">styleAttribute</code>: This represents the CSS property name as key. The name should follow <span class="strong"><strong>camelCase</strong></span> representation. For example, the <code class="literal">box-shadow</code> style attribute becomes <code class="literal">boxShadow</code>. The vendor prefix attribute starts with a capital letter except <code class="literal">ms</code>(Microsoft Internet Explorer).</li>
<li class="listitem"><code class="literal">styleValue</code>: This represents a value for the CSS property, and it is in string format. For<a id="id528" class="indexterm"></a> example, <code class="literal">1px solid grey</code> should be <a id="id529" class="indexterm"></a>wrapped in double quotes like <code class="literal">"1px solid grey"</code>.</li>
</ul>
</div>
<p>Let's check out an example for using inline style in a ReactJS element. The code for the ReactJS element is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ReactJS inline style demo&lt;/title&gt;
    &lt;script src="bower_components/react/react.js"&gt;&lt;/script&gt;
    &lt;script src="bower_components/react/JSXTransformer.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type="text/jsx"&gt;
<span class="strong"><strong>    var messageStyle={</strong></span>
<span class="strong"><strong>            color: "red",</strong></span>
<span class="strong"><strong>            border:"1px solid grey",</strong></span>
<span class="strong"><strong>            boxShadow:"2px 2px 2px lightGrey",</strong></span>
<span class="strong"><strong>            padding: "20px",</strong></span>
<span class="strong"><strong>            width: "200px"</strong></span>
<span class="strong"><strong>        },</strong></span>
        GoodMorning = React.createClass({
            render: function() {
                return (
                  &lt;div <span class="strong"><strong>style={messageStyle}</strong></span>&gt;
                    Good Morning Developers
                  &lt;/div&gt;
                );
            }
    });
    React.render(&lt;<span class="strong"><strong>GoodMorning</strong></span>/&gt;, document.body);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">messageStyle</code> object contains an anonymous object containing the CSS attribute's name as <code class="literal">key</code> and the styles as a string <code class="literal">value</code></li>
<li class="listitem">This <code class="literal">messageStyle</code> object is then bound with the <code class="literal">style</code> attribute of the <code class="literal">div</code> element using curly braces</li>
</ul>
</div>
<p>The output of the <a id="id530" class="indexterm"></a>preceding code is shown in the following<a id="id531" class="indexterm"></a> screenshot, with the <code class="literal">style</code> attributes applied to the <code class="literal">div</code> element:</p>
<div class="mediaobject"><img src="../Images/image00335.jpeg" alt="ReactJS inline style"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
<div class="section" title="ReactJS event handling"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec78"></a>ReactJS event handling</h2>
</div>
</div>
</div>
<p>The event handling in ReactJS is similar to DOM <a id="id532" class="indexterm"></a>events, with a difference in naming the handler. For<a id="id533" class="indexterm"></a> example, an <code class="literal">onclick</code> handler is renamed to <code class="literal">onClick</code> in ReactJS. This follows the camelCase syntax to name the handler. Let's check out an example of event handling. The following code shows a simple example of event handling in ReactJS:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ReactJS Event Demo&lt;/title&gt;
    &lt;script src="bower_components/react/react.js"&gt;&lt;/script&gt;
    &lt;script src="bower_components/react/JSXTransformer.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type="text/jsx"&gt;
    var SayHello = React.createClass({
<span class="strong"><strong>        helloHandler: function(event){</strong></span>
<span class="strong"><strong>            alert("Hello Developers");</strong></span>
<span class="strong"><strong>        },</strong></span>
        render: function() {
            return (
              &lt;button <span class="strong"><strong>onClick = {this.helloHandler}</strong></span>&gt;
Click Me
  &lt;/button&gt;
            );
        }
    });
    React.render(<span class="strong"><strong>&lt;SayHello/&gt;</strong></span>, document.body);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details<a id="id534" class="indexterm"></a> of the code are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;SayHello&gt;</code> element is created using the <code class="literal">React.createClass</code> method. The <code class="literal">render</code> method contains the <code class="literal">&lt;button&gt;</code> element with an <code class="literal">onClick</code> event handler, which is bound to the <code class="literal">helloHandler</code> method using <code class="literal">this</code> keyword. The <code class="literal">this</code> keyword refers to the <code class="literal">&lt;SayHello&gt; </code>custom element.</li>
<li class="listitem">The <code class="literal">helloHandler</code> method definition is present inside the specification object. This method contains an <code class="literal">alert</code> method with a string message.</li>
</ul>
</div>
<p>The output of the preceding code contains a button with the <span class="strong"><strong>Click Me</strong></span> text and is rendered as the following screenshot:</p>
<div class="mediaobject"><img src="../Images/image00336.jpeg" alt="ReactJS event handling"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>When the user clicks on this button, the <code class="literal">helloHandler</code> method gets called and an alert window <a id="id535" class="indexterm"></a>appears, containing the <span class="strong"><strong>Hello Developers</strong></span> message. The output of the preceding code is rendered in the following screenshot:</p>
<div class="mediaobject"><img src="../Images/image00337.jpeg" alt="ReactJS event handling"/></div>
<p style="clear:both; height: 1em;"> </p>
<div class="note" title="Note"><h3 class="title"><a id="note30"></a>Note</h3>
<p>To find out more about the event handling system in ReactJS library use the following link: <a class="ulink" href="http://facebook.github.io/react/docs/events.html">http://facebook.github.io/react/docs/events.html</a>
</p>
</div>
</div>
<div class="section" title="Useful non-DOM attributes"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec79"></a>Useful non-DOM attributes</h2>
</div>
</div>
</div>
<p>In this section, we will learn <a id="id536" class="indexterm"></a>some non-DOM attributes that can be used with the JSX element. The following list contains some of the non-DOM attributes:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">key</code>: This is <a id="id537" class="indexterm"></a>an optional attribute that can be used to uniquely identify each component in the page</li>
<li class="listitem"><code class="literal">ref</code>: This is an<a id="id538" class="indexterm"></a> optional attribute that can be used to access the child element from outside the <code class="literal">render</code> method</li>
<li class="listitem"><code class="literal">dangerouslySetInnerHTML</code>: This<a id="id539" class="indexterm"></a> attribute can be used inside the JSX element to set HTML content inside the component</li>
</ul>
</div>
<p>Let' check out a simple example with the use of these three attributes. The code for this example is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt; ReactJS NonDOM Attribute Demo &lt;/title&gt;
    &lt;script src="bower_components/react/react.js"&gt;&lt;/script&gt;
    &lt;script src="bower_components/react/JSXTransformer.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type="text/jsx"&gt;
    var <span class="strong"><strong>StudentsReport</strong></span> = React.createClass({
        render: function() {
            var <span class="strong"><strong>studentDetails</strong></span> = {
                <span class="strong"><strong>headerHTML:{</strong></span>
<span class="strong"><strong>                    __html: "&lt;i&gt;Student List&lt;/i&gt;"</strong></span>
<span class="strong"><strong>                },</strong></span>
                <span class="strong"><strong>subject</strong></span>:"Mathematics",
                <span class="strong"><strong>list</strong></span>: [
                    {roll:123, name:"Sandeep"},
                    {roll:124, name:"Surabhi"}
                ]
            };
            return (
              &lt;div&gt;
                <span class="strong"><strong>&lt;h1 dangerouslySetInnerHTML={studentDetails.headerHTML}&gt;</strong></span>
<span class="strong"><strong>                &lt;/h1&gt;</strong></span>
<span class="strong"><strong>                  &lt;h3 ref="subjectName"&gt;{studentDetails.subject}&lt;/h3&gt;</strong></span>
                &lt;ol&gt;
                {studentDetails.list.map(function(student) {
                    <span class="strong"><strong>return &lt;li key={student.roll}&gt;{student.name}&lt;/li&gt;;</strong></span>
                })}
                &lt;/ol&gt;
                  <span class="strong"><strong>&lt;button onClick={this.logSubject}&gt;Log Subject&lt;/button&gt;</strong></span>
              &lt;/div&gt;
            );
        },
      <span class="strong"><strong>logSubject</strong></span>: function(event){
<span class="strong"><strong>       console.log("Subject React Element: ",this.refs.subjectName);</strong></span>
<span class="strong"><strong>console.log("Subject DOM Element: ",this.refs.subjectName.getDOMNode());</strong></span>
        }
    });
    React.render(&lt;StudentsReport /&gt;, document.body);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The details of the<a id="id540" class="indexterm"></a> preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;StudentsReport&gt;</code> element contains the <code class="literal">render</code> method, which has the <code class="literal">studentDetails</code> object containing <code class="literal">headerHTML</code>, <code class="literal">subject</code>, and <code class="literal">list</code> properties.</li>
<li class="listitem">The <code class="literal">headerHTML</code> properties contain another object with the <code class="literal">__html</code> property, which has HTML content wrapped in an <code class="literal">&lt;i&gt;</code> element. The <code class="literal">headerHTML</code> property is used with the <code class="literal">dangerouslySetInnerHTML</code> attribute of a <code class="literal">React</code> element present inside the <code class="literal">render</code> block. The <code class="literal">dangerouslySetInnerHTML</code> attribute is used to bind the HTML content in runtime. The code to bind HTML is as follows:<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>&lt;h1 dangerouslySetInnerHTML={studentDetails.headerHTML}&gt;</strong></span>
<span class="strong"><strong>&lt;/h1&gt;</strong></span>
</pre>
</div></li>
<li class="listitem">The <code class="literal">list</code> property contains an array of student objects with the <code class="literal">roll</code> and <code class="literal">name</code> properties. A <code class="literal">map</code> function is used to iterate over the list array. While iterating <code class="literal">&lt;li&gt;</code> elements, the <code class="literal">key</code> attribute takes its value from <code class="literal">roll</code> property and the inner text takes its value from <code class="literal">name</code> property. The <code class="literal">key</code> attribute is used for uniquely identifying the <code class="literal">&lt;li&gt;</code> student element. The code to bind student details is as follows:<div class="informalexample"><pre class="programlisting">&lt;ol&gt;
  <span class="strong"><strong>{studentDetails.list.map(function(student) {</strong></span>
<span class="strong"><strong>     return &lt;li key={student.roll}&gt;{student.name}&lt;/li&gt;;</strong></span>
<span class="strong"><strong>  })}</strong></span>
&lt;/ol&gt;</pre>
</div></li>
<li class="listitem">The <code class="literal">subject</code> property contains the name of the course taken by all the students. In the <code class="literal">render</code> block, <code class="literal">subject</code> is bound with the <code class="literal">h1</code> element and with a <code class="literal">ref</code> attribute named <code class="literal">subjectName</code>. The <code class="literal">render</code> block also contains the <code class="literal">&lt;button&gt;</code> element which is attached with an <code class="literal">onClick</code> handler referring to the <code class="literal">logSubject</code> method. The <code class="literal">logSubject</code> method does the following two things:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">It retrieves the entire referred element using the <code class="literal">this.refs</code> property and finds <code class="literal">studentName</code> and prints it in the console. It returns a ReactJS element. The code to access <code class="literal">studentName</code> is as follows:<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>this.refs.subjectName</strong></span>
</pre>
</div></li>
<li class="listitem">It retrieves the DOM version of the <code class="literal">React</code> element using the <code class="literal">getDOMNode</code> method. The code to access the DOM version of <code class="literal">studentName</code> is as follows:<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>this.refs.subjectName.getDOMNode()</strong></span>
</pre>
</div></li>
</ul>
</div></li>
</ul>
</div>
<p>The output of the preceding code is rendered as the following screenshot, where the <code class="literal">dangerouslySetInnerHTML</code> attribute renders the HTML content:</p>
<div class="mediaobject"><img src="../Images/image00338.jpeg" alt="Useful non-DOM attributes"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>When the user clicks<a id="id541" class="indexterm"></a> on the <span class="strong"><strong>Log Subject</strong></span> button, it prints the ReactJS and DOM element for the <code class="literal">this.refs.subjectName</code> value in the console. The following screenshot shows the Chrome developer console with two printed messages:</p>
<div class="mediaobject"><img src="../Images/image00339.jpeg" alt="Useful non-DOM attributes"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>


<div class="section" title="ReactJS component lifecycle"><div class="titlepage" id="aid-20R682"><div><div><h1 class="title"><a id="ch06lvl1sec63"></a>ReactJS component lifecycle</h1>
</div>
</div>
</div>
<p>Every object in<a id="id542" class="indexterm"></a> the word has a lifecycle and passes through different states during its lifetime. We can categorize these states into three different phases. The following diagram shows these three common phases that an element goes through in its lifetime:</p>
<div class="mediaobject"><img src="../Images/image00340.jpeg" alt="ReactJS component lifecycle"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The details of these phases are listed as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Initialization</strong></span>: This is<a id="id543" class="indexterm"></a> the phase when the instance for the element is created for the first time. Subsequent instances during the lifetime have slight changes.</li>
<li class="listitem"><span class="strong"><strong>Lifetime</strong></span>: This is the<a id="id544" class="indexterm"></a> phase when an element lives and changes its states and properties.</li>
<li class="listitem"><span class="strong"><strong>Teardown</strong></span>: This is the<a id="id545" class="indexterm"></a> phase when an element finishes its execution and cleanup takes place.</li>
</ul>
</div>
<p>Similarly, each ReactJS element has a lifecycle and has different callback methods to handle each state. We will now learn how the ReactJS element goes through each of these phases.</p>
<div class="section" title="ReactJS initialization phase"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec80"></a>ReactJS initialization phase</h2>
</div>
</div>
</div>
<p>In this phase, a<a id="id546" class="indexterm"></a> ReactJS element instance is created for the first time and rendered in the browser. ReactJS provides a set <a id="id547" class="indexterm"></a>of methods for the setup and preprocessing during this phase. During initialization of an element, the methods are called in a specific order. The following diagram shows the order in which the callback methods are called during the initialization phase:</p>
<div class="mediaobject"><img src="../Images/image00341.jpeg" alt="ReactJS initialization phase"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The details of these methods are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">getDefaultProps</code>: This method is<a id="id548" class="indexterm"></a> used to create default properties for a ReactJS element. This <a id="id549" class="indexterm"></a>method must return an object or NULL.</li>
<li class="listitem"><code class="literal">getInitialState</code>: This method is used to create states for the component. This method must return an<a id="id550" class="indexterm"></a> object or NULL.</li>
<li class="listitem"><code class="literal">componentWillMount</code>: This <a id="id551" class="indexterm"></a>method gets executed just before the component is mounted to the page.</li>
<li class="listitem"><code class="literal">render</code>: This method returns the ReactJS component tree for rendering in the browser.</li>
<li class="listitem"><code class="literal">componentDidMount</code>: This method gets executed just after the initial rendering of the component in<a id="id552" class="indexterm"></a> the browser.</li>
</ul>
</div>
</div>
<div class="section" title="ReactJS lifetime phase"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec81"></a>ReactJS lifetime phase</h2>
</div>
</div>
</div>
<p>Once the ReactJS component is instantiated successfully, the lifetime phase starts. In this phase, the component<a id="id553" class="indexterm"></a> can go through many changes. These changes include a change in the current state, or a change in any property value. ReactJS provides a set of callback methods for overriding and implementing our own logic for these states .The<a id="id554" class="indexterm"></a> following diagram shows the order in which the callback methods are called during lifetime phase:</p>
<div class="mediaobject"><img src="../Images/image00342.jpeg" alt="ReactJS lifetime phase"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The details of these methods are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">componentWillRecieveProps</code>: This<a id="id555" class="indexterm"></a> method gets executed whenever a new property is created for the component.</li>
<li class="listitem"><code class="literal">shouldComponentUpdate</code>: This method returns a Boolean value <code class="literal">true</code> or <code class="literal">false</code>. The <code class="literal">true</code> flag indicates<a id="id556" class="indexterm"></a> that the <code class="literal">render</code> method will be called when a new property is received.</li>
<li class="listitem"><code class="literal">componentWillUpdate</code>: This method get executed just before the new property is received by the<a id="id557" class="indexterm"></a> component. It provides an opportunity for preprocessing before the <code class="literal">render</code> method is called.</li>
<li class="listitem"><code class="literal">render</code>: This method returns the<a id="id558" class="indexterm"></a> updated component tree for rendering in the browser.</li>
<li class="listitem"><code class="literal">componentDidUpdate</code>: This method <a id="id559" class="indexterm"></a>gets executed just after the modified changes are rendered in<a id="id560" class="indexterm"></a> the browser.</li>
</ul>
</div>
</div>
<div class="section" title="ReactJS teardown phase"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec82"></a>ReactJS teardown phase</h2>
</div>
</div>
</div>
<p>This phase is the<a id="id561" class="indexterm"></a> last state of a ReactJS component. The instance of the component is removed and memory cleanups take place. The following diagram shows the callback method that gets executed during this period:</p>
<div class="mediaobject"><img src="../Images/image00343.jpeg" alt="ReactJS teardown phase"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The <code class="literal">componentWillUnmount</code> method<a id="id562" class="indexterm"></a> gets executed immediately before a component is unmounted from the DOM.</p>
</div>
<div class="section" title="ReactJS lifecycle example"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec83"></a>ReactJS lifecycle example</h2>
</div>
</div>
</div>
<p>In this section, we<a id="id563" class="indexterm"></a> will develop a simple ReactJS component to demonstrate the order of the lifecycle methods in which they are executed. The following code contains the definition of the <code class="literal">&lt;Welcome&gt;</code> element with all of its lifecycle callback method:</p>
<div class="informalexample"><pre class="programlisting">&lt;script type="text/jsx"&gt;
    var Welcome = React.createClass({
        <span class="strong"><strong>getDefaultProps</strong></span>: function(){
            console.log("inside getDefaultProps method");
            return{
                <span class="strong"><strong>myName</strong></span>:"Sandeep"
            };
        }, <span class="strong"><strong>getInitialState</strong></span>:function(){
            console.log("inside getInitialState method");
            return null;
        },<span class="strong"><strong>componentWillMount</strong></span>:function(){
            console.log("inside componentWillMount method");
        },<span class="strong"><strong>componentDidMount</strong></span>:function(){
            console.log("inside componentDidMount method");
        },<span class="strong"><strong>render</strong></span>: function() {
            console.log("inside render method");
            return (
<span class="strong"><strong>             &lt;div&gt;</strong></span>
<span class="strong"><strong>                &lt;h1&gt;Welcome {this.props.myName}&lt;/h1&gt;</strong></span>
<span class="strong"><strong>                &lt;button onClick={this.changeName}&gt;</strong></span>
<span class="strong"><strong>                    Change myName to John</strong></span>
<span class="strong"><strong>                &lt;/button&gt;</strong></span>
<span class="strong"><strong>                &lt;button onClick={this.removeHandler}&gt;</strong></span>
<span class="strong"><strong>                    Remove Welcome Element</strong></span>
<span class="strong"><strong>                &lt;/button&gt;</strong></span>
<span class="strong"><strong>              &lt;/div&gt;</strong></span>
            );
        },<span class="strong"><strong>componentWillReceiveProps</strong></span>:function(){
           console.log("inside componentWillReceiveProps method");
        },<span class="strong"><strong>shouldComponentUpdate</strong></span>:function(){
            console.log("inside shouldComponentUpdate method");
            return true;
        },<span class="strong"><strong>componentWillUpdate</strong></span>:function(){
            console.log("inside componentWillUpdate method");
        },<span class="strong"><strong>componentDidUpdate</strong></span>:function(){
            console.log("inside componentDidUpdate method");
        },<span class="strong"><strong>componentWillUnmount</strong></span>:function(){
            console.log("inside componentWillUnmount method");
        },<span class="strong"><strong>changeName</strong></span>:function(){
            this.setProps({myName :"John"})
        },<span class="strong"><strong>removeHandler</strong></span>: function(){
            var thisElement = this.getDOMNode();
            this.unmountComponent(thisElement);
        }
    });React.render(&lt;Welcome/&gt;, document.body);
&lt;/script&gt;</pre>
</div>
<p>The following <a id="id564" class="indexterm"></a>screenshot shows the output of the <code class="literal">&lt;Welcome&gt;</code> element when it is initialized and rendered for the first time:</p>
<div class="mediaobject"><img src="../Images/image00344.jpeg" alt="ReactJS lifecycle example"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>When the user<a id="id565" class="indexterm"></a> presses the first button to change the <code class="literal">myName</code> property to <code class="literal">John</code>, the lifetime callback method gets executed. The following screenshot shows the output of the <code class="literal">&lt;Welcome&gt;</code> element for the change in the <code class="literal">myName</code> property:</p>
<div class="mediaobject"><img src="../Images/image00345.jpeg" alt="ReactJS lifecycle example"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>When the user presses the second button to remove the <code class="literal">&lt;Welcome&gt;</code> element, the method of the teardown<a id="id566" class="indexterm"></a> phase gets called. The following screenshot shows the output of the preceding code for the <code class="literal">&lt;Welcome&gt;</code> element, when it is removed from the DOM:</p>
<div class="mediaobject"><img src="../Images/image00346.jpeg" alt="ReactJS lifecycle example"/></div>
<p style="clear:both; height: 1em;"> </p>
<div class="note" title="Note"><h3 class="title"><a id="note31"></a>Note</h3>
<p>To find out <a id="id567" class="indexterm"></a>more about the ReactJS component lifecycle methods, use the following link:</p>
<p>
<a class="ulink" href="http://facebook.github.io/react/docs/component-specs.html">http://facebook.github.io/react/docs/component-specs.html</a>
</p>
</div>
</div>
</div>


<div class="section" title="Stateful custom component" id="aid-21PMQ1"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec64"></a>Stateful custom component</h1>
</div>
</div>
</div>
<p>ReactJS provides features to create and programmatically update the state during the creation of a ReactJS element. This increases the interaction of the application. The states are private and mutable<a id="id568" class="indexterm"></a> to the component and referred to using <code class="literal">this.states</code>. The React component provides the <code class="literal">this.setState</code> method to update the values of the state.</p>
<p>Let's check out an example of using the state in the ReactJS element. The following code contains the definition of the <code class="literal">&lt;StudentResult&gt;</code> element:</p>
<div class="informalexample"><pre class="programlisting">&lt;script type="text/jsx"&gt;
    var <span class="strong"><strong>StudentResult</strong></span> = React.createClass({
        <span class="strong"><strong>getInitialState</strong></span>: function(){
            return{
                <span class="strong"><strong>result</strong></span>:" "
            };
        },
        <span class="strong"><strong>calculateResult</strong></span>: function(){
            var refScore = this.refs.studentScore.getDOMNode().value,
                score = parseInt(refScore,10);
            if(score &gt; 30){
                <span class="strong"><strong>this.setState({result: "PASS"})</strong></span>
            }else if(score &lt; 30){
                <span class="strong"><strong>this.setState({result: "FAIL"})</strong></span>
            }else{
                <span class="strong"><strong>this.setState({result:""})</strong></span>
            }
        },
        <span class="strong"><strong>render</strong></span>: function() {
            return (
             &lt;div className="score-container"&gt;
                &lt;input type="number" ref="studentScore"
                       onChange={this.calculateResult}
                       placeholder="Enter student score"/&gt;
                 &lt;h2&gt;Result :<span class="strong"><strong>{this.state.result}</strong></span>&lt;/h2&gt;
             &lt;/div&gt;
            );
        }
    });
    React.render(&lt;<span class="strong"><strong>StudentResult</strong></span>/&gt;, document.body);
&lt;/script&gt;</pre>
</div>
<p>The details of the code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;StudentResult&gt;</code> element has an initial state name <code class="literal">result</code> with a value empty string.</li>
<li class="listitem">The <code class="literal">render</code> method contains an <code class="literal">&lt;input&gt;</code> type <code class="literal">number</code> to enter a student score. This element has the <code class="literal">ref</code> attribute with <code class="literal">studentScore</code> for accessing it inside the component. A callback method <code class="literal">calculateResult</code> is bound with the <code class="literal">onChange</code> event.</li>
<li class="listitem">The <code class="literal">calculateResult</code> method gets the entered score by the user and decides <span class="strong"><strong>PASS</strong></span> or <span class="strong"><strong>FAIL</strong></span>. If the score is more than <code class="literal">30</code>, the result is shown as <span class="strong"><strong>PASS</strong></span>. If it is less than <code class="literal">30</code>, the result is classes as a <code class="literal">FAIL</code> or else an empty string.</li>
<li class="listitem">The <code class="literal">render</code> method <a id="id569" class="indexterm"></a>displays the result using the <code class="literal">{this.state.result}</code> expression.</li>
</ul>
</div>
<p>The following screenshot shows the output of the <code class="literal">&lt;StudentResult&gt;</code> component:</p>
<div class="mediaobject"><img src="../Images/image00347.jpeg" alt="Stateful custom component"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>When the user enters a score the change handler gets executed, and <span class="strong"><strong>PASS</strong></span> or <span class="strong"><strong>FAIL</strong></span> gets printed in the browser. The following screenshot shows the output of the <code class="literal">&lt;StudentResult&gt;</code> component when the user enters <code class="literal">45</code> in the <code class="literal">&lt;input&gt;</code> element:</p>
<div class="mediaobject"><img src="../Images/image00348.jpeg" alt="Stateful custom component"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>


<div class="section" title="Precompiled JSX for production"><div class="titlepage" id="aid-22O7C2"><div><div><h1 class="title"><a id="ch06lvl1sec65"></a>Precompiled JSX for production</h1>
</div>
</div>
</div>
<p>In ReactJS, the <code class="literal">JSXTranformer.js</code> file provides the in-browser JSX compilation to vanilla JavaScript format. The in-browser compilation is not recommended for production due to the following reasons:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Additional computation</strong></span>: It slows down the rendering speed due to the overhead of JSX compilation on the client's side at runtime.</li>
<li class="listitem"><span class="strong"><strong>File size</strong></span>: The <code class="literal">JSXTransformer.js</code> file size is big. This increases the additional load to the client side.</li>
</ul>
</div>
<p>ReactJS comes <a id="id570" class="indexterm"></a>with a precompiled JSX process to resolve the in-browser compilation issue. Using this approach, the developer can compile the JSX to vanilla JavaScript in offline mode. We can achieve this offline JSX compilation by installing the <code class="literal">react-tool</code> with the npm package. Assuming that npm is present in the system, use the following command to install <code class="literal">react-tool</code> in the system:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>npm install -g react-tools</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with the <code class="literal">react-tool</code> package installation in progress:</p>
<div class="mediaobject"><img src="../Images/image00349.jpeg" alt="Precompiled JSX for production"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>To demonstrate<a id="id571" class="indexterm"></a> the JSX precompilation, we created two subdirectories <code class="literal">dev</code> and <code class="literal">production</code> under the <code class="literal">precompile</code> directory. A new ReactJS component <code class="literal">&lt;ShowDate&gt;</code> is defined inside the <code class="literal">react-date.js</code> file under the <code class="literal">dev</code> directory. The following screenshot shows the terminal with new directory structure:</p>
<div class="mediaobject"><img src="../Images/image00350.jpeg" alt="Precompiled JSX for production"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The JSX codes<a id="id572" class="indexterm"></a> for the <code class="literal">&lt;ShowDate&gt;</code> element in the <code class="literal">react-date.js</code> file are as follows:</p>
<div class="informalexample"><pre class="programlisting">var <span class="strong"><strong>ShowDate</strong></span> = React.createClass({
    <span class="strong"><strong>getDefaultProps</strong></span>: function(){
        return{
            <span class="strong"><strong>today</strong></span>: new Date().toDateString()
        };
    },
    <span class="strong"><strong>render</strong></span>: function() {
        return (
            &lt;h1&gt;
            Today: <span class="strong"><strong>{this.props.today}</strong></span>
            &lt;/h1&gt;
        );
    }
});
React.render(&lt;<span class="strong"><strong>ShowDate</strong></span>/&gt;, document.body);</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">&lt;ShowDate&gt;</code> element definition contains the <code class="literal">getDefaultProps</code> method that returns an object with the <code class="literal">key</code> name as <code class="literal">today</code> and the value as <code class="literal">new Date().toDateString()</code></li>
<li class="listitem">The <code class="literal">&lt;ShowDate&gt;</code> element definition contains the <code class="literal">render</code> method returning an <code class="literal">h1</code> element with the <code class="literal">this.props.today</code> expression for display</li>
</ul>
</div>
<p>Now, we can precompile the JSX code present in the <code class="literal">dev/react-date.js</code> file to the vanilla JavaScript. The command for JSX compilation to vanilla JavaScript is as follows:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>jsx dev production --no-cache-dir</strong></span>
</pre>
</div>
<p>The following<a id="id573" class="indexterm"></a> screenshot shows a terminal with JSX precompilation, which converts the <code class="literal">react-date.js</code> file to vanilla JavaScript and moves it to the <code class="literal">production</code> directory:</p>
<div class="mediaobject"><img src="../Images/image00351.jpeg" alt="Precompiled JSX for production"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>The compiled vanilla JavaScript code produced by JSX precompiler is as follows:</p>
<div class="informalexample"><pre class="programlisting">var ShowDate = React.createClass({
<span class="strong"><strong> displayName:</strong></span> "ShowDate",
    <span class="strong"><strong>getDefaultProps</strong></span>: function(){
        return{
            <span class="strong"><strong>today</strong></span>: new Date().toDateString()
        };
    },
    <span class="strong"><strong>render</strong></span>: function() {
        return (
            <span class="strong"><strong>React.createElement("h1", null, </strong></span>
            <span class="strong"><strong>"Today: ", this.props.today</strong></span>
            )
        );
    }
});
React.render(<span class="strong"><strong>React.createElement(ShowDate, null),</strong></span> document.body);</pre>
</div>
<p>The details of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">It contains a <code class="literal">displayName</code> property, which has the string value <code class="literal">ShowDate</code> as the name of the ReactJS element</li>
<li class="listitem">The <code class="literal">render</code> method creates an <code class="literal">h1</code> element using the <code class="literal">React.createElement</code> method, the text content <code class="literal">Today</code> and the <code class="literal">this.props.today</code> value</li>
</ul>
</div>
<p>The vanilla JavaScript code present inside the <code class="literal">production\react-date.js</code> file is precompiled <a id="id574" class="indexterm"></a>and can be used directly in an HTML page without the in-browser compilation provided by the <code class="literal">JSXTranformer.js</code> file. The code for using the <code class="literal">&lt;ShowDate&gt;</code> element is as follows:</p>
<div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ReactJS precompilation demo&lt;/title&gt;
    &lt;script src="../bower_components/react/react.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
<span class="strong"><strong>&lt;script src="production/react-date.js"&gt;&lt;/script&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>The following screenshot shows the output of the preceding code, where the <code class="literal">&lt;ShowDate&gt;</code> element is displaying the current date:</p>
<div class="mediaobject"><img src="../Images/image00352.jpeg" alt="Precompiled JSX for production"/></div>
<p style="clear:both; height: 1em;"> </p>
<div class="section" title="JSX file watcher"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec84"></a>JSX file watcher</h2>
</div>
</div>
</div>
<p>The <code class="literal">react-tools</code> package comes with a file watcher, which can be used to observe the code changes in<a id="id575" class="indexterm"></a> the JSX file and automatically generates the vanilla JavaScript code. The following command is used to startup the file watcher:</p>
<div class="informalexample"><pre class="programlisting"><span class="strong"><strong>jsx --watch dev production</strong></span>
</pre>
</div>
<p>The following screenshot shows the terminal with the JSX file watcher, which observes the <code class="literal">dev</code> directory for any JSX code change in the <code class="literal">react-date.js</code> file. Any changes in the JSX code can be logged by the file watcher in the terminal:</p>
<div class="mediaobject"><img src="../Images/image00353.jpeg" alt="JSX file watcher"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>


<div class="section" title="Developing a digital clock using ReactJS" id="aid-23MNU1"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec66"></a>Developing a digital clock using ReactJS</h1>
</div>
</div>
</div>
<p>In this section, we <a id="id576" class="indexterm"></a>will develop a digital clock element <code class="literal">&lt;TsClock&gt;</code> using the <a id="id577" class="indexterm"></a>ReactJS library. The steps to develop a<a id="id578" class="indexterm"></a> digital clock are as follows:</p>
<div class="section" title="Step1 â€“ defining the digital clock lifecycle script"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec85"></a>Step1 â€“ defining the digital clock lifecycle script</h2>
</div>
</div>
</div>
<p>The following<a id="id579" class="indexterm"></a> code contains the lifecycle callback method definition for a <code class="literal">&lt;TsClock&gt; </code>digital clock element developed in the ReactJS library:</p>
<div class="informalexample"><pre class="programlisting">&lt;script type="text/jsx"&gt;
    var TsClock = React.<span class="strong"><strong>createClass</strong></span>({
        <span class="strong"><strong>getDefaultProps</strong></span>: function(){
            return{
                hour: "HH",
                minute: "MM",
                second: "SS"
            };
        },
        <span class="strong"><strong>render</strong></span>: function() {
            return (
              &lt;div className="<span class="strong"><strong>clock</strong></span>"&gt;
                  &lt;div className="hour"&gt;
<span class="strong"><strong>{this.props.hour}</strong></span>
  &lt;/div&gt;
                  &lt;div className="minute"&gt;
<span class="strong"><strong>{this.props.minute}</strong></span>
  &lt;/div&gt;
                  &lt;div className="second"&gt;
<span class="strong"><strong>{this.props.second}</strong></span>
  &lt;/div&gt;
              &lt;/div&gt;
            );
        },
        <span class="strong"><strong>updateClock</strong></span>: function(){
            var clock = new Date();
            this.setProps({
                hour : clock.getHours(),
                minute: clock.getMinutes(),
                second: clock.getSeconds()
            });
        },
        <span class="strong"><strong>componentDidMount</strong></span>: function(){
            window.setInterval(this.updateClock, 1000);
        }
    });
    React.render(<span class="strong"><strong>&lt;TsClock/&gt;</strong></span>, document.body);
&lt;/script&gt;</pre>
</div>
<p>The details<a id="id580" class="indexterm"></a> of the preceding code are as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">This block defines the <code class="literal">&lt;TsClock&gt;</code> element using the <code class="literal">React.createElement</code> method.</li>
<li class="listitem">It has three default properties named <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> with values <code class="literal">HH</code>, <code class="literal">MM</code>, and <code class="literal">SS</code> inside the <code class="literal">getDefaultProps</code> method.</li>
<li class="listitem">The <code class="literal">render</code> method returns the ReactJS component tree with the digital clock template. The template displays the values of <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> inside a ReactJS expression <code class="literal">{}</code> using the <code class="literal">this.props</code> object.</li>
<li class="listitem">The <code class="literal">componentDidMount</code> lifecycle callback method gets fired when the <code class="literal">&lt;TsClock&gt;</code> element is mounted on the DOM for the first time. This method has the <code class="literal">setInterval</code> method bound with the <code class="literal">updateClock</code> method, with a duration of 1 second.</li>
<li class="listitem">The <code class="literal">updateClock</code> method creates a new date object and modifies the value of <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> properties by calling the <code class="literal">setProps</code> method provided by ReactJS. After updating the value of <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code>, the <code class="literal">setProps</code> method calls the <code class="literal">render</code> method in the background. This updates the DOM in the browser displaying the latest time.</li>
</ul>
</div>
</div>
<div class="section" title="Step2 â€“ defining CSS styles for the digital clock"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec86"></a>Step2 â€“ defining CSS styles for the digital clock</h2>
</div>
</div>
</div>
<p>The following<a id="id581" class="indexterm"></a> CSS code is used to apply styles to a digital clock:</p>
<div class="informalexample"><pre class="programlisting">  &lt;style&gt;
        .clock {
            display: inline-flex;
            justify-content: space-around;
            background: floralwhite;
            font-size: 2rem;
            font-family: serif;
        }
        .clock .hour,
        .clock .minute,
        .clock .second {
            color: tomato;
            padding: 1.5rem;
            text-shadow: 0px 1px grey;
        }
  &lt;/style&gt;</pre>
</div>
<p>The following screenshot shows the output of the preceding code with the digital clock containing <code class="literal">hour</code>, <code class="literal">minute</code>, and <code class="literal">second</code> properties:</p>
<div class="mediaobject"><img src="../Images/image00354.jpeg" alt="Step2 â€“ defining CSS styles for the digital clock"/></div>
<p style="clear:both; height: 1em;"> </p>
</div>
</div>


<div class="section" title="Debugging ReactJS" id="aid-24L8G1"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec67"></a>Debugging ReactJS</h1>
</div>
</div>
</div>
<p>ReactJS<a id="id582" class="indexterm"></a> provides a debugging tool for the Chrome browser. It can be installed to the Chrome browser<a id="id583" class="indexterm"></a> using the following<a id="id584" class="indexterm"></a> link:</p>
<p>
<a class="ulink" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi">https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi</a>
</p>
<p>The following screenshot shows the Chrome store with the ReactJS debugging tool:</p>
<div class="mediaobject"><img src="../Images/image00355.jpeg" alt="Debugging ReactJS"/></div>
<p style="clear:both; height: 1em;"> </p>
<p>After successful installation of <span class="strong"><strong>React Developer Tools</strong></span>, we can see a new tab name <span class="strong"><strong>React</strong></span> added to the Chrome developer console. The <span class="strong"><strong>React Developer Tools</strong></span> tab contains the following<a id="id585" class="indexterm"></a> five different windows for debugging:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Elements</strong></span>: This window shows the ReactJS element markup for the rendered page.</li>
<li class="listitem"><span class="strong"><strong>Props</strong></span>: This window lists all the properties used by the <code class="literal">React</code> element.</li>
<li class="listitem"><span class="strong"><strong>State</strong></span>: This window lists all the states used by the <code class="literal">React</code> element.</li>
<li class="listitem"><span class="strong"><strong>Component</strong></span>: This window lists all the properties and methods used by the <code class="literal">React</code> element.</li>
<li class="listitem"><span class="strong"><strong>Event Listeners</strong></span>: This window lists all the event listeners used by the <code class="literal">React</code> element.</li>
</ul>
</div>
<p>The following screenshot shows the React developer tool for the digital clock <code class="literal">&lt;TsClock&gt;</code> element:</p>
<div class="mediaobject"><img src="../Images/image00356.jpeg" alt="Debugging ReactJS"/></div>
<p style="clear:both; height: 1em;"> </p>
<div class="note" title="Note"><h3 class="title"><a id="note32"></a>Note</h3>
<p>To find out more about the React developer tool for debugging use<a id="id586" class="indexterm"></a> the following link:</p>
<p>
<a class="ulink" href="http://facebook.github.io/react/blog/2014/01/02/react-chrome-developer-tools.html">http://facebook.github.io/react/blog/2014/01/02/react-chrome-developer-tools.html</a>
</p>
</div>
</div>


<div class="section" title="Summary" id="aid-25JP21"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec68"></a>Summary</h1>
</div>
</div>
</div>
<p>In this chapter, we learned about the ReactJS library and its different features, such as JSX, virtual DOM, and custom component development. We understood the flux architecture and how data flows in a ReactJS-based application. With this chapter, we have come to the end of this book. I hope you now understand the web component specification concepts. Happy coding!</p>
</div>
</body>
</html>