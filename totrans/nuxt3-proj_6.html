<html><head></head><body>
<div id="book-content">
<div id="sbo-rt-content"><div id="_idContainer075">
			<h1 id="_idParaDest-125" class="chapter-number"><a id="_idTextAnchor124"/>6</h1>
			<h1 id="_idParaDest-126"><a id="_idTextAnchor125"/>Enhancing a Recipe-Sharing Site While Optimizing SEO Using Nuxt 3</h1>
			<p>In this chapter, we’ll enrich a recipe-sharing site with Nuxt 3, focusing on SEO (Search Engine Optimization) for better online visibility. We’ll start with Nuxt SEO, a powerful collection of handcrafted Nuxt modules designed to enhance a website’s appeal to both search engines and audiences. It simplifies complex SEO tasks, ensuring our recipe-sharing site ranks high in <span class="No-Break">search results.</span></p>
			<p>Then, we’ll learn about metadata, such<a id="_idIndexMarker333"/> as <strong class="bold">Open Graph</strong> (<strong class="bold">OG</strong>) tags, and how to customize them for each page. We will also examine the crucial role of schema markup. This structured data approach helps clarify our content for search engines, aiding in accurate and enhanced search <span class="No-Break">result presentation.</span></p>
			<p>We’ll also introduce a unique feature – creating a custom <strong class="source-inline">og:image</strong> for each recipe using a Nuxt component, making each shared recipe <span class="No-Break">visually distinctive.</span></p>
			<p>Additionally, we’ll cover dynamically generating XML site maps, which guide search engines efficiently through our <span class="No-Break">site’s content.</span></p>
			<p>In this chapter, we’re going to cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>Defining metadata for <span class="No-Break">each page</span></li>
				<li>Implementing structured data for improved search <span class="No-Break">engine rankings</span></li>
				<li>Optimizing recipe images to load <span class="No-Break">pages faster</span></li>
				<li>Creating a custom <strong class="source-inline">og:image</strong> for the <span class="No-Break">recipe page</span></li>
				<li>Generating dynamic site maps for the <span class="No-Break">recipe-sharing site</span></li>
			</ul>
			<h1 id="_idParaDest-127"><a id="_idTextAnchor126"/>Technical requirements</h1>
			<p>The code files for this chapter can be found <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Nuxt-3-Projects/tree/main/chapter06"><span class="No-Break">https://github.com/PacktPublishing/Nuxt-3-Projects/tree/main/chapter06</span></a><span class="No-Break">.</span></p>
			<p>The CiA video for this chapter can be found <span class="No-Break">on </span><a href="https://packt.link/YQ8As"><span class="No-Break">https://packt.link/YQ8As</span></a></p>
			<h1 id="_idParaDest-128"><a id="_idTextAnchor127"/>Essential background – Understanding Search Engine Optimization (SEO)</h1>
			<p>As we prepare to start <a id="_idIndexMarker334"/>enhancing our recipe-sharing site with SEO using Nuxt 3, it’s crucial to first get acquainted with the <span class="No-Break">key concepts:</span></p>
			<ul>
				<li><strong class="bold">SEO basics</strong>: <strong class="bold">SEO</strong> involves <a id="_idIndexMarker335"/>techniques to improve a website’s visibility on search engines. It’s about making your site easily understandable to search engines, which helps in making it rank higher in <span class="No-Break">search results.</span></li>
				<li><strong class="bold">The OG protocol</strong>: This protocol enhances the way web content is represented on social media platforms. By using specific tags, you can control how your content appears <span class="No-Break">when shared.</span></li>
				<li><strong class="bold">Schema markup</strong>: Schema markup is like a detailed label for your website’s content, helping search engines understand what your site is about. For instance, using recipe schema on a recipe-sharing site can dramatically improve its appearance in search results, displaying rich snippets such as ingredients and cooking time directly in the <span class="No-Break">search listings.</span></li>
				<li><strong class="bold">Site map generation</strong>: A site map is a roadmap of your website that guides search engines to all your important pages. In just a couple of lines of code, Nuxt 3 can generate dynamic <span class="No-Break">site maps.</span></li>
			</ul>
			<p>This background prepares you to effectively utilize Nuxt 3’s SEO capabilities on our recipe-sharing website. Armed with this knowledge, we’re ready to use Nuxt 3’s SEO tools effectively. Let’s proceed to the practical application and exploration of <span class="No-Break">our repository.</span></p>
			<h1 id="_idParaDest-129"><a id="_idTextAnchor128"/>Exploring the repository</h1>
			<p>Let’s take a moment to<a id="_idIndexMarker336"/> familiarize ourselves with the <strong class="source-inline">chapter06/starter</strong> folder in the root folder of our repository. This folder is designed to give you a head start, containing pre-defined components, basic page structures, data, and TypeScript interfaces. These elements are crafted to provide a solid foundation for our recipe-sharing site, allowing us to focus primarily on enhancing <span class="No-Break">its SEO.</span></p>
			<p>Note that we won’t delve into every detail of these resources here, as our primary focus is to learn about the SEO concepts and practices needed to optimize our recipe-sharing <span class="No-Break">site effectively.</span></p>
			<h1 id="_idParaDest-130"><a id="_idTextAnchor129"/>Defining metadata for each page</h1>
			<p>Let’s start by setting up<a id="_idIndexMarker337"/> our new website as we’ve done in previous chapters. Add the Tailwind CSS and Google Fonts modules to the website to enhance styling. Once you’ve completed these steps, run the website and take a moment to ensure that everything <span class="No-Break">works fine.</span></p>
			<h2 id="_idParaDest-131"><a id="_idTextAnchor130"/>Setting up the project structure</h2>
			<p>To set up the<a id="_idIndexMarker338"/> project, we’ll be using predefined files and components from the repository <strong class="source-inline">starter</strong> folder. Clone the repository, and then copy the entire contents of the <strong class="source-inline">starter</strong> folder into our new project’s root directory. If there are any existing files in your project that match the names of those in the <strong class="source-inline">starter</strong> folder, overwrite them with the <strong class="source-inline">starter</strong> files. Here’s a breakdown of the <span class="No-Break">starter content:</span></p>
			<ul>
				<li><strong class="source-inline">pages/index.vue</strong>: This file sets up the homepage layout, including sections such as hero images and <span class="No-Break">featured recipes</span></li>
				<li><strong class="source-inline">components/RecipeCard.vue</strong> and <strong class="source-inline">components/RecipeInfo.vue</strong>: These Vue components are used to display recipes and their details as cards on the <span class="No-Break">home page</span></li>
				<li><strong class="source-inline">data/recipes.ts</strong>: Contains the data structure for the recipes, which will be used to populate the content on <span class="No-Break">your site</span></li>
				<li><strong class="source-inline">types/index.ts</strong>: Provides TypeScript definitions for the data structures used in <span class="No-Break">the project</span></li>
				<li><strong class="source-inline">pages/recipe/[slug].vue</strong>: A dynamic route that creates individual pages for each recipe, based on <span class="No-Break">its slug</span></li>
			</ul>
			<p>By copying the <strong class="source-inline">starter</strong> folder’s contents into your project, you can quickly set up the foundational elements of your recipe-sharing site and focus more on the SEO aspects, as outlined in <span class="No-Break">this chapter.</span></p>
			<p>Start your project to test the progress. You should see the home page of your recipe-sharing site, similar<a id="_idIndexMarker339"/> to the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer060" class="IMG---Figure">
					<img src="image/B19760_06_1.jpg" alt="Figure 6.1: The home page" width="1228" height="1092"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.1: The home page</p>
			<p>Click on any recipe listed on the home page. This should take you to the detailed page of the selected recipe, thanks to the dynamic routing implemented in Nuxt. The detailed page will show more information about the recipe, as defined <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">pages/recipe/[slug].vue</strong></span><span class="No-Break">.</span></p>
			<div>
				<div id="_idContainer061" class="IMG---Figure">
					<img src="image/B19760_06_2.jpg" alt="Figure 6.2: The recipe details page" width="1228" height="836"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.2: The recipe details page</p>
			<p>Having tested <a id="_idIndexMarker340"/>our project and seen our home page and recipe details come to life, let’s turn our attention <span class="No-Break">to SEO.</span></p>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor131"/>Setting up site configuration with nuxt SEO</h2>
			<p>Nuxt SEO is a<a id="_idIndexMarker341"/> powerful module that enhances your Nuxt site’s SEO capabilities. It simplifies the configuration process and ensures compatibility across various SEO modules. The module offers streamlined management of meta tags and best practices for metadata, including automatically generated canonical URLs and open-graph meta tags. This setup is essential for optimizing your site’s search engine presence and <span class="No-Break">user engagement.</span></p>
			<p>To add the module to your project run, run the <span class="No-Break">following command:</span></p>
			<pre class="console">
$ pnpm i -d @nuxtjs/seo</pre>			<p>In your <strong class="source-inline">nuxt.config.js</strong>, add <strong class="source-inline">@nuxtjs/seo</strong> to the modules array, and then add a <strong class="source-inline">site</strong> property. Here’s <a id="_idIndexMarker342"/>an example configuration based on <span class="No-Break">your setup:</span></p>
			<pre class="source-code">
export default defineNuxtConfig({
  // Other Nuxt Configurations
  modules: [
    '@nuxtjs/seo',
    '@nuxtjs/tailwindcss',
    '@nuxtjs/google-fonts',
  ],
  site: {
    url: 'http://localhost:3000',
    name: `Let's Cook - Your Go-To Destination for
      Delicious Recipes`,
    description: `Dive into a world of flavors with Let's
      Cook! Discover a diverse array of mouth-watering
      recipes. and find inspiration for your next kitchen
      adventure. Join us and elevate your cooking
      experience!`,
    defaultLocale: 'en'
  }
}</pre>			<p>If you open the browser Devtools, you’ll notice a couple of automatically generated tags in the document’s <span class="No-Break"><strong class="source-inline">head</strong></span><span class="No-Break"> element:</span></p>
			<ul>
				<li><strong class="source-inline">UTF-8</strong>: Ensures your website uses <strong class="source-inline">UTF-8</strong> character encoding for universal <span class="No-Break">character representation.</span></li>
				<li><strong class="source-inline">Viewport</strong>: Sets up the viewport to control how your site displays on different devices, which is crucial for <span class="No-Break">responsive design.</span></li>
				<li><strong class="source-inline">Favicon</strong>: Utilizes <strong class="source-inline">favicon.ico</strong> from your <strong class="source-inline">public</strong> folder to display your site’s icon in <span class="No-Break">browser tabs.</span></li>
				<li><strong class="source-inline">Robots</strong>: Instructs search engine robots on how to index your site, impacting SEO and <span class="No-Break">site visibility.</span></li>
				<li><strong class="source-inline">og:type</strong>: Defines the type of content for OG. The default value <span class="No-Break">is website.</span></li>
				<li><strong class="source-inline">url canonical</strong>: Matches the <strong class="source-inline">site.url</strong> configuration. Helps prevent duplicate <a id="_idIndexMarker343"/><span class="No-Break">content issues.</span></li>
				<li><strong class="source-inline">og:canonical</strong>: The OG version of the canonical URL, which is important for social <span class="No-Break">media platforms.</span></li>
				<li><strong class="source-inline">title / og:title / og:site_name</strong>: Sets the page title to <strong class="source-inline">site.name</strong> and is used in browser tabs, search results, and <span class="No-Break">social media.</span></li>
				<li><strong class="source-inline">meta description / og:description</strong>: Provides a brief description of your site. Used in search engine listings and <span class="No-Break">social shares.</span></li>
				<li><strong class="source-inline">og:locale</strong>: Sets the locale to <strong class="source-inline">site.defaultLocale</strong>, indicating the language and regional settings <span class="No-Break">for OG.</span></li>
			</ul>
			<p>Imagine enhancing your website’s SEO with just four lines of code! Moreover, <strong class="source-inline">nuxt/seo</strong> features an enhanced page title functionality for internal pages. If you don’t set a title for a page, the module automatically generates one from the last <span class="No-Break">slug segment.</span></p>
			<p>For example, if we open our steak recipe page in the browser, the page title automatically becomes <span class="No-Break">the following:</span></p>
			<div>
				<div id="_idContainer062" class="IMG---Figure">
					<img src="image/B19760_06_3.jpg" alt="Figure 6.3: The recipe details page title" width="587" height="74"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.3: The recipe details page title</p>
			<p>Note that the URL is http://localhost:3000/recipe/steak-with-vegetables and the title is a combination of the capitalized version of the last slug and the main site title. Isn’t this awesome? This feature is especially handy for managing numerous pages, ensuring that each <a id="_idIndexMarker344"/>one has a descriptive, SEO-friendly title without manual input for each page. Now, let’s shift our focus to overriding metadata in <span class="No-Break">custom pages.</span></p>
			<h2 id="_idParaDest-133"><a id="_idTextAnchor132"/>Overriding metadata</h2>
			<p>If you inspect the <a id="_idIndexMarker345"/>meta description of the recipe details page, you’ll notice that it’s similar to the home page description. Ideally, we should tailor this to match the content of each specific page. To achieve this customization, we can utilize the <span class="No-Break"><strong class="source-inline">useSeoMeta</strong></span><span class="No-Break"> composable.</span></p>
			<p><strong class="source-inline">useSeoMeta</strong> allows you to define your site’s SEO meta tags as a flat object with full TypeScript support. It helps you avoid common errors and ensures your meta tags are accurate <span class="No-Break">and effective.</span></p>
			<p>Now, let’s apply this to our <span class="No-Break"><strong class="source-inline">pages/recipe/[slug].vue</strong></span><span class="No-Break"> component:</span></p>
			<pre class="source-code">
&lt;script lang="ts" setup&gt;
// other script content
const route = useRoute()
const recipe = recipes.find(item =&gt; item.slug ===
route.params.slug)
useSeoMeta({
  description: recipe?.description,
  ogDescription: recipe?.description
})
&lt;/script&gt;</pre>			<p>After refreshing the page, the updated description should appear in the head tag, reflecting the specific content of each <span class="No-Break">recipe page.</span></p>
			<div>
				<div id="_idContainer063" class="IMG---Figure">
					<img src="image/B19760_06_4.jpg" alt="Figure 6.4: Overriding the meta description" width="887" height="66"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.4: Overriding the meta description</p>
			<p>With our metadata now dynamically ready and customized for each recipe page, let’s progress to learn<a id="_idIndexMarker346"/> about the structured data from <a href="http://Schema.org">Schema.org</a> in order to further boost our site’s search <span class="No-Break">engine rankings.</span></p>
			<h1 id="_idParaDest-134"><a id="_idTextAnchor133"/>Implementing structured data for improved search engine rankings</h1>
			<p><a href="http://Schema.org">Schema.org</a> plays a pivotal <a id="_idIndexMarker347"/>role in enhancing<a id="_idIndexMarker348"/> your site’s visibility to search engines. It provides a shared vocabulary for structured data on the internet, allowing search engines to better understand and display your content. To check the pre-defined structured data for our website, click on the <strong class="source-inline">nuxt-devtools</strong> icon on the website, press <em class="italic">Ctrl</em> + <em class="italic">K</em>, or <em class="italic">Command</em> + <em class="italic">K</em>, and then type the <span class="No-Break">word </span><span class="No-Break"><strong class="source-inline">Schema</strong></span><span class="No-Break">.</span></p>
			<div>
				<div id="_idContainer064" class="IMG---Figure">
					<img src="image/B19760_06_5.jpg" alt="Figure 6.5: Nuxt Devtools" width="812" height="620"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.5: Nuxt Devtools</p>
			<p>It should reveal <a id="_idIndexMarker349"/>two <a id="_idIndexMarker350"/><span class="No-Break">key objects:</span></p>
			<ul>
				<li><strong class="bold">WebSite Object</strong>: Represents the overall website, providing search engines with high-level information such as the site’s nature, its focus, and <span class="No-Break">general details</span></li>
				<li><strong class="bold">WebPage Object</strong>: Describes individual pages on your site, offering more specific data such as the content of a <span class="No-Break">particular page</span></li>
			</ul>
			<p>These objects are automatically generated from the site configuration, leveraging the power of the <strong class="source-inline">nuxt/seo</strong> module. Taking our SEO strategy a step further, let’s learn how to create a <a id="_idIndexMarker351"/><span class="No-Break">recipe</span><span class="No-Break"><a id="_idIndexMarker352"/></span><span class="No-Break"> node.</span></p>
			<h2 id="_idParaDest-135"><a id="_idTextAnchor134"/>Creating a recipe node</h2>
			<p>In the context <a id="_idIndexMarker353"/>of SEO and structured data, a “node” refers<a id="_idIndexMarker354"/> to a set of information that represents a specific type of content on a web page, structured in a way that search engines can easily understand and index. In our case, a recipe node is a collection of structured data that specifically describes a recipe, including elements such as ingredients, cooking time, and <span class="No-Break">nutritional information.</span></p>
			<p>If you open Google and search for the term <strong class="source-inline">fettuccine alfredo recipe</strong>, you’ll get a similar result <span class="No-Break">to this:</span></p>
			<div>
				<div id="_idContainer065" class="IMG---Figure">
					<img src="image/B19760_06_6.jpg" alt="Figure 6.6: The recipe node in the search result" width="782" height="556"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.6: The recipe node in the search result</p>
			<p>Note that the result includes a list of recipes with images, preparation times, ingredients, ratings, and so on. This card in this search result refers to a <span class="No-Break">recipe node.</span></p>
			<p>The <strong class="source-inline">nuxt/seo</strong> module supports the creation of various types of nodes, such as <strong class="source-inline">defineRecipe</strong> for recipes. You can learn more about the recipe node <span class="No-Break">at </span><span class="No-Break">https://unhead.unjs.io/schema-org/schema/recipe</span><span class="No-Break">.</span></p>
			<p>To implement <a id="_idIndexMarker355"/>the<a id="_idIndexMarker356"/> recipe node, navigate to <strong class="source-inline">pages/recipe/[slug].vue</strong> and add the following to <span class="No-Break">the script:</span></p>
			<pre class="source-code">
&lt;script lang="ts" setup&gt;
useSchemaOrg([
  defineRecipe({
    name: recipe?.title,
    description: recipe?.description,
    image: recipe?.image,
    cookTime: recipe?.cookingTime,
    prepTime: recipe?.prepTime,
    nutrition: recipe?.nutrition,
    recipeYield: recipe?.recipeYield,
    recipeCategory: recipe?.recipeCategory,
    recipeCuisine: recipe?.recipeCuisine,
    aggregateRating: {
      ratingValue: recipe?.ratings
    },
    recipeIngredient: recipe?.recipeIngredient,
    recipeInstructions: recipe?.recipeInstructions
  })
])
&lt;/script&gt;</pre>			<p>Here is a breakdown of the <span class="No-Break">preceding code:</span></p>
			<ul>
				<li><strong class="source-inline">cookTime</strong> and <strong class="source-inline">prepTime</strong>: Specify the cooking and preparation <span class="No-Break">times, respectively.</span></li>
				<li><strong class="source-inline">nutrition</strong>: Details the nutritional information of <span class="No-Break">the recipe.</span></li>
				<li><strong class="source-inline">recipeYield</strong>: Indicates the quantity or servings the recipe makes, such as “four servings” or “<span class="No-Break">three cups.”</span></li>
				<li><strong class="source-inline">recipeCategory</strong> and <strong class="source-inline">recipeCuisine</strong>: Classify the recipe into a specific category and cuisine, respectively, helping users find relevant dishes based on <span class="No-Break">their preferences.</span></li>
				<li><strong class="source-inline">aggregateRating</strong>: Shows the average rating value of <span class="No-Break">the recipe.</span></li>
				<li><strong class="source-inline">recipeIngredient</strong>: An array of a string that lists the <span class="No-Break">ingredients required.</span></li>
				<li><strong class="source-inline">recipeInstructions</strong>: An array where each element is an object detailing a specific step of the recipe. Each object can contain <span class="No-Break">the following:</span><ul><li><strong class="source-inline">name</strong>: The title or a brief description of the <span class="No-Break">step (optional)</span></li><li><strong class="source-inline">text</strong>: The detailed instructions for <span class="No-Break">that step</span></li><li><strong class="source-inline">image</strong>: An optional image URL for the step, providing a <span class="No-Break">visual guide</span></li></ul></li>
			</ul>
			<p>After <a id="_idIndexMarker357"/>implementing<a id="_idIndexMarker358"/> the <strong class="source-inline">defineRecipe</strong> function in your <strong class="source-inline">pages/recipe/[slug].vue</strong> file, you can verify its effect by revisiting the Nuxt <span class="No-Break">development tools:</span></p>
			<ol>
				<li>Open your Nuxt project in <span class="No-Break">the browser.</span></li>
				<li>Search for the <strong class="source-inline">Schema</strong> section within the <span class="No-Break">Nuxt Devtools.</span></li>
				<li>Here, you should now see a new object labeled <strong class="source-inline">Recipe</strong>, representing the structured data for the specific recipe page you <span class="No-Break">are viewing.</span></li>
			</ol>
			<p>This <strong class="source-inline">Recipe</strong> object will contain all the structured data you’ve defined using <strong class="source-inline">defineRecipe</strong>, such as the recipe’s name, description, cooking and preparation times, ingredients, and instructions. This visualization in the Nuxt Devtools is a great way to confirm that your structured data is correctly implemented and recognized by Nuxt. You can also validate the object using the <a href="http://shcema.org">shcema.org</a> <span class="No-Break">validator: </span><span class="No-Break">https://validator.schema.org/</span><span class="No-Break">.</span></p>
			<p>With our recipe<a id="_idIndexMarker359"/> node<a id="_idIndexMarker360"/> successfully implemented and visible in the Nuxt Devtools, let’s now turn our attention to optimizing recipe images for faster <span class="No-Break">page-loading speeds.</span></p>
			<h1 id="_idParaDest-136"><a id="_idTextAnchor135"/>Optimizing recipe images to load pages faster</h1>
			<p>To optimize <a id="_idIndexMarker361"/>recipe images and enhance page-loading speed, we will focus on the importance of image optimization in web performance. Large, unoptimized images can significantly slow down page load times, negatively impacting the user experience <span class="No-Break">and SEO.</span></p>
			<p>To optimize images in Nuxt, we can use <strong class="source-inline">nuxt-img</strong>, a component from Nuxt Image, designed to optimize and transform images efficiently. It provides features such as on-the-fly image resizing, modern format conversion, and lazy loading, a placeholder while the image is loading, all crucial for speed <span class="No-Break">and performance.</span></p>
			<p>Implementing <strong class="source-inline">nuxt-img</strong> in our project is a key step toward optimizing our images. Let’s start by installing <span class="No-Break">the package:</span></p>
			<pre class="console">
$ pnpm i -d @nuxt/image</pre>			<p>Then, we add it to the <span class="No-Break"><strong class="source-inline">nuxt.config.ts</strong></span><span class="No-Break"> modules:</span></p>
			<pre class="source-code">
export default defineNuxtConfig({
  // other nuxt configuration
  modules: [
    '@nuxtjs/seo',
    '@nuxtjs/tailwindcss',
    '@nuxtjs/google-fonts',
    '@nuxt/image'
  ],
})</pre>			<p>Next, we go to the <strong class="source-inline">pages/recipe/[slug].vue</strong> file. There, replace the standard <strong class="source-inline">&lt;img&gt;</strong> tags with the <strong class="source-inline">&lt;nuxt-img&gt;</strong> tag to take advantage of Nuxt <span class="No-Break">Image’s features:</span></p>
			<pre class="source-code">
&lt;nuxt-img
  :src="recipe.image"
  alt="recipe Image"
  class="absolute w-full h-full object-cover"
/&gt;</pre>			<p>Before implementing this change, let’s assess the current image size. Open your browser’s developer <a id="_idIndexMarker362"/>tools, navigate to the image tag, and open the image source in a <span class="No-Break">new tab:</span></p>
			<div>
				<div id="_idContainer066" class="IMG---Figure">
					<img src="image/B19760_06_7.jpg" alt="Figure 6.7: The image size before optimization" width="615" height="300"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.7: The image size before optimization</p>
			<p>If you download the image, you might find it’s sizeable, perhaps around 4 MB, which is quite large for a web image. Now, let’s add the <strong class="source-inline">format="webp"</strong> property to the <span class="No-Break"><strong class="source-inline">nuxt-img</strong></span><span class="No-Break"> component:</span></p>
			<pre class="source-code">
&lt;nuxt-img
  format="webp"
  :src="recipe.image"
  alt="recipe Image"
  class="absolute w-full h-full object-cover"
/&gt;</pre>			<p>After making this change, redo the test. You’ll likely notice that the image size is now significantly reduced, by around 400 KB, which means we’ve achieved a 90% reduction in size while<a id="_idIndexMarker363"/> <span class="No-Break">maintaining quality.</span></p>
			<div>
				<div id="_idContainer067" class="IMG---Figure">
					<img src="image/B19760_06_8.jpg" alt="Figure 6.8: The Nuxt image after optimization" width="609" height="319"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.8: The Nuxt image after optimization</p>
			<p>Another important feature in the Nuxt image is <strong class="source-inline">placeholder</strong>. This significantly enhances the user experience by displaying a blurry placeholder image while the full-size image loads. This approach is much more visually appealing compared to the traditional method of loading an image line <span class="No-Break">by line.</span></p>
			<p>To utilize this feature, simply add the <strong class="source-inline">placeholder</strong> prop to the <strong class="source-inline">nuxt-img</strong> component – for instance, in the <span class="No-Break"><strong class="source-inline">pages/recipe/[slug].vue</strong></span><span class="No-Break"> image:</span></p>
			<pre class="source-code">
&lt;nuxt-img
  :src="recipe.image"
  format="webp"
  placeholder
  alt="recipe Image"
  class="absolute w-full h-full object-cover"
/&gt;</pre>			<p>After adding this prop, when you visit the page, you’ll initially see a blurred version of the image, which<a id="_idIndexMarker364"/> gradually sharpens into the full image, resulting in a smoother <span class="No-Break">visual experience.</span></p>
			<div>
				<div id="_idContainer068" class="IMG---Figure">
					<img src="image/B19760_06_9.jpg" alt="Figure 6.9: The Nuxt image placeholder" width="794" height="487"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.9: The Nuxt image placeholder</p>
			<p>Now, let’s discuss optimizing images further by specifying their width and height, which is especially useful when displaying images in <span class="No-Break">smaller sizes.</span></p>
			<p><strong class="source-inline">nuxt-img</strong> allows you to define the width and height attributes, ensuring that images are served in the most appropriate size for their intended display area. This will create a smaller image based on the specified size, reducing unnecessary data transfer and improving image optimization. For example, in the <strong class="source-inline">components/RecipeCard.vue</strong> file, let’s replace the <strong class="source-inline">img</strong> tag with <strong class="source-inline">nuxt-img</strong> and add webp format, placeholder, and a height of <strong class="source-inline">250px</strong>, as we specified in the <span class="No-Break">TailwindCSS classes:</span></p>
			<pre class="source-code">
    &lt;nuxt-img
      format="webp"
      class="w-full h-[250px]"
      height="250"
      :src="recipe.image"
      alt="Recipe Image"
      placeholder
    /&gt;</pre>			<p>By setting the height to <strong class="source-inline">250</strong> px, <strong class="source-inline">nuxt-img</strong> resizes the image to these dimensions. This resize operation, performed under the hood by Nuxt Image, dramatically reduces the <span class="No-Break">file size.</span></p>
			<p>In this case, the <a id="_idIndexMarker365"/>original image size, which was around 4 MB, is first reduced to about 400 KB by converting to WebP. Then, with the specified height, it’s further reduced to an astonishingly small size of approximately 18 KB! This significant reduction demonstrates the effectiveness of specifying dimensions in combination with the WebP format, showcasing how <strong class="source-inline">nuxt-img</strong> optimizes images to enhance the page-loading speed while maintaining <span class="No-Break">image quality.</span></p>
			<div>
				<div id="_idContainer069" class="IMG---Figure">
					<img src="image/B19760_06_10.jpg" alt="Figure 6.10: The Nuxt image after specifying a size" width="648" height="303"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.10: The Nuxt image after specifying a size</p>
			<p>Having optimized<a id="_idIndexMarker366"/> our recipe images, we now turn to a creative approach – using a custom Nuxt component to automatically generate unique OG images for each recipe page, improving their visual impact on <span class="No-Break">social media.</span></p>
			<h1 id="_idParaDest-137"><a id="_idTextAnchor136"/>Creating a custom og:image for the recipe page</h1>
			<p>OG images (<strong class="source-inline">og:image</strong>) play a crucial role in how content is visually presented when shared on<a id="_idIndexMarker367"/> social<a id="_idIndexMarker368"/> media. For instance, when someone shares a recipe link from your site, <strong class="source-inline">og:image</strong> is what typically appears as the visual highlight of the post, drawing attention and potentially driving more traffic to <span class="No-Break">your site.</span></p>
			<p>The <strong class="source-inline">useSeoMeta</strong> composable from Nuxt allows you to append an <strong class="source-inline">og:image</strong> link to each page, as explained in more detail in the Nuxt <span class="No-Break">documentation: </span><a href="https://nuxt.com/docs/api/composables/use-seo-meta#usage"><span class="No-Break">https://nuxt.com/docs/api/composables/use-seo-meta#usage</span></a><span class="No-Break">.</span></p>
			<p>However, in this section, we’re going to explore a more dynamic and creative solution. Instead of manually designing an image for each recipe, we’ll create a Nuxt component that automatically generates an OG image. This feature from the <strong class="source-inline">nuxt/seo</strong> module is useful to dynamically convert our component into an <strong class="source-inline">og:image</strong>, saving much time and effort in creating custom <span class="No-Break">graphic design.</span></p>
			<p>We’ll start by creating a new component in <strong class="source-inline">components/OgImage/CustomTemplate.vue</strong> inside the template, by adding <span class="No-Break">the following:</span></p>
			<pre class="source-code">
&lt;template&gt;
  &lt;div class="h-full w-full flex flex-row relative"&gt;
    &lt;div class="flex flex-col justify-between w-2/3 p-16
    bg-slate-800"&gt;
      &lt;img src="/logo.png" width="128" height="128"
        class="w-32 object-contain" /&gt;
      &lt;h1 class="text-[64px] font-black text-white"&gt;
        {{ title }}
      &lt;/h1&gt;
      &lt;div class="text-2xl leading-10 font-black
      text-slate-100 mb-4"&gt;
        {{ description }}
      &lt;/div&gt;
      &lt;p class="text-2xl font-bold text-primary mb-0"&gt;
        {{ siteConfig.url }}&lt;/p&gt;
    &lt;/div&gt;
    &lt;img :src="image" alt="Card Image" class="w-1/3 h-full
      object-cover" /&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>			<p>The template creates<a id="_idIndexMarker369"/> a<a id="_idIndexMarker370"/> recipe card. It features a combination of the site’s logo, the recipe’s title and description, the website URL, and the <span class="No-Break">recipe’s image.</span></p>
			<p>In the same component, add <span class="No-Break">this script:</span></p>
			<pre class="source-code">
&lt;script lang="ts" setup&gt;
const siteConfig = useSiteConfig()
withDefaults(
  defineProps&lt;{
    title: string
    description: string
    image?: string
  }&gt;(),
  { image: '/images/hero.png' }
)
&lt;/script&gt;</pre>			<p>In the <strong class="source-inline">&lt;script&gt;</strong> section, we’re <a id="_idIndexMarker371"/>utilizing Nuxt<a id="_idIndexMarker372"/> composables to dynamically set up the <span class="No-Break">component’s properties:</span></p>
			<ul>
				<li><strong class="source-inline">useSiteConfig</strong>: This composable from the <strong class="source-inline">nuxt/seo</strong> module retrieves the site configuration defined in <strong class="source-inline">nuxt.config.ts</strong>, allowing us to access global site settings such as <span class="No-Break">the URL.</span></li>
				<li><strong class="source-inline">withDefaults</strong>: This function from Vue is used to assign default values to the component’s props. Specifically, it sets a default image (<strong class="source-inline">'/images/hero.png'</strong>) for scenarios where a specific recipe image isn’t provided, such as when creating an OG image for the <span class="No-Break">home page.</span></li>
			</ul>
			<p>To use our custom component in the home page, we first need to modify the script in <span class="No-Break">our </span><span class="No-Break"><strong class="source-inline">pages/index.vue</strong></span><span class="No-Break">:</span></p>
			<pre class="source-code">
&lt;script setup lang="ts"&gt;
defineOgImageComponent('CustomTemplate', {
  title: `Let's Cook`
});
&lt;/script&gt;</pre>			<p>By doing this, we set a custom title for the OG image. Since we haven’t specified a description, the default site description, defined globally in the <strong class="source-inline">nuxt.config.ts</strong> <strong class="source-inline">site</strong> object, will be used. Similarly, in the absence of a specified recipe image, our default hero image is <span class="No-Break">automatically selected.</span></p>
			<p>To debug and view the results of these changes, follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>Navigate <span class="No-Break">to </span><span class="No-Break">http://localhost:3000/</span><span class="No-Break">.</span></li>
				<li>Click on the Nuxt <span class="No-Break">Devtools icon.</span></li>
				<li>Open the search bar (using <em class="italic">Ctrl</em> + <em class="italic">K</em> or <em class="italic">Command</em> + <em class="italic">K</em> on a Mac) and search for <span class="No-Break"><strong class="source-inline">og Image</strong></span><span class="No-Break">.</span></li>
				<li>You should<a id="_idIndexMarker373"/> now see a preview of the OG <a id="_idIndexMarker374"/>image, which will look something like <span class="No-Break"><em class="italic">Figure 6</em></span><span class="No-Break"><em class="italic">.11</em></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer070" class="IMG---Figure">
					<img src="image/B19760_06_11.jpg" alt="Figure 6.11: The Nuxt Devtools – og:image debugging" width="1032" height="480"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.11: The Nuxt Devtools – og:image debugging</p>
			<p>This process confirms that our custom OG image was successfully implemented for the home page. Next, let’s apply a similar approach to create one for <span class="No-Break">each recipe.</span></p>
			<p>Open the <strong class="source-inline">/pages/recipe/[slug].vue</strong> file and append this to <span class="No-Break">the script:</span></p>
			<pre class="source-code">
defineOgImageComponent('CustomTemplate', {
  title: recipe?.title,
  description: recipe?.description,
  image: recipe?.image
});</pre>			<p>This code dynamically sets the title, description, and image for the OG image based on the specific recipe details. When you visit a recipe page and check the <strong class="bold">OG Image</strong> section in the Nuxt Devtools, you’ll see the custom image reflecting the recipe’s <span class="No-Break">unique attributes:</span></p>
			<div>
				<div id="_idContainer071" class="IMG---Figure">
					<img src="image/B19760_06_12.jpg" alt="Figure 6.12: The recipe’s OG image" width="1089" height="695"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.12: The recipe’s OG image</p>
			<p>Having personalized<a id="_idIndexMarker375"/> our <a id="_idIndexMarker376"/>OG images for each recipe, let’s now move on to our final task – generating dynamic site maps for the <span class="No-Break">recipe-sharing site.</span></p>
			<h1 id="_idParaDest-138"><a id="_idTextAnchor137"/>Generating dynamic site maps for the recipe-sharing site</h1>
			<p>As we’ve <a id="_idIndexMarker377"/>customized our OG images <a id="_idIndexMarker378"/>for each recipe, our next and final step is to generate dynamic site maps for our recipe-sharing site. Site maps are crucial, as they guide search engines in discovering and indexing all the pages on your site, thereby <span class="No-Break">enhancing SEO.</span></p>
			<p>While the <strong class="source-inline">nuxt/seo</strong> module automatically creates site maps for static pages such as the Homepage and About page, it doesn’t automatically detect dynamic pages such as individual recipes. To see the current site map, visit <a href="http://localhost:3000/sitemap.xml">http://localhost:3000/sitemap.xml</a>. You’ll notice that it includes only <span class="No-Break">static pages:</span></p>
			<div>
				<div id="_idContainer072" class="IMG---Figure">
					<img src="image/B19760_06_13.jpg" alt="Figure 6.13: The default Sitemap.xml" width="649" height="216"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.13: The default Sitemap.xml</p>
			<p>However, our<a id="_idIndexMarker379"/> site <a id="_idIndexMarker380"/>also features dynamic recipe pages that are not automatically included in this site map. To remedy this, we need to provide <strong class="source-inline">nuxt/seo</strong> with a way to identify these dynamic pages. We’ll achieve this by setting up an API endpoint that fetches a list of recipes. This list can then be fed into <strong class="source-inline">nuxt/seo</strong> to dynamically generate a comprehensive site map that includes both static and dynamic pages, ensuring complete visibility of our site to <span class="No-Break">search engines.</span></p>
			<p>In a typical project, the backend’s responsibility includes creating an external API to list dynamic pages. However, Nuxt offers a more integrated approach – using its <strong class="source-inline">server</strong> directory, we can create an internal API within our project. This method is particularly beneficial for scenarios such as ours, where we need to generate a dynamic <span class="No-Break">site map.</span></p>
			<p>The Nuxt server directory is a powerful feature that enables us to write server-side logic directly in our Nuxt application. It’s an ideal solution for internal APIs and server-side functionalities without needing a separate <span class="No-Break">backend service.</span></p>
			<p>To use this in our recipe-sharing site, we’ll create a file named <strong class="source-inline">server/api/__sitemap__/urls.ts</strong>. In this file, we’ll define a site map handler using <strong class="source-inline">defineSitemapEventHandler</strong>, which will dynamically generate URLs from our <span class="No-Break">recipe data:</span></p>
			<pre class="source-code">
import recipes from '~/data/recipes'
// server/api/__sitemap__/urls.ts
export default defineSitemapEventHandler(() =&gt; {
  return recipes.map(recipe =&gt; ({
    loc: `/recipe/${recipe.slug}`,
    _sitemap: 'pages'
  }));
});</pre>			<p>In Nuxt’s <a id="_idIndexMarker381"/>server<a id="_idIndexMarker382"/> directory, the <strong class="source-inline">api</strong> folder is specially designed to create APIs, with each file path corresponding to an API route. This feature allows for easy integration of server-side APIs directly within the Nuxt project. In our case, the <strong class="source-inline">server/api/__sitemap__/urls.ts</strong> file will automatically be converted into an accessible API route. To test and see the output of this newly created API, you can navigate to http://localhost:3000/api/__sitemap__/urls. When you visit this URL, it will display the list of URLs generated for our dynamic <span class="No-Break">recipe pages:</span></p>
			<div>
				<div id="_idContainer073" class="IMG---Figure">
					<img src="image/B19760_06_14.jpg" alt="Figure 6.14: Testing the internal API" width="385" height="293"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.14: Testing the internal API</p>
			<p>To include our <a id="_idIndexMarker383"/>dynamically <a id="_idIndexMarker384"/>generated recipe URLs in the site map, we’ll adjust <strong class="source-inline">nuxt.config.ts</strong> by adding the <span class="No-Break">following object:</span></p>
			<pre class="source-code">
export default defineNuxtConfig({
  // other nuxt configuration
  sitemap: {
    sources: ['http://localhost:3000/api/__sitemap__/urls']
  },
})</pre>			<p>This line directs Nuxt to use the URLs from our internal API as a source for the site map, combining them with all the static pages that are <span class="No-Break">automatically generated.</span></p>
			<p>Now, revisit <a href="http://localhost:3000/sitemap.xml">http://localhost:3000/sitemap.xml</a> in your browser. You should see that all the recipes, along with the static pages, are now correctly listed in the site map, ensuring they are discoverable by <span class="No-Break">search engines:</span></p>
			<div>
				<div id="_idContainer074" class="IMG---Figure">
					<img src="image/B19760_06_15.jpg" alt="Figure 6.15: The final sitemap.xml result" width="637" height="275"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.15: The final sitemap.xml result</p>
			<p>With this final step, we’ve successfully completed our project, enhancing our recipe-sharing site with optimized SEO, dynamic OG images, and an effective site map. This achievement <a id="_idIndexMarker385"/>marks a<a id="_idIndexMarker386"/> significant milestone in our journey to create real-world <span class="No-Break">Nuxt projects!</span></p>
			<h1 id="_idParaDest-139"><a id="_idTextAnchor138"/>Summary</h1>
			<p><a href="B19760_06.xhtml#_idTextAnchor124"><span class="No-Break"><em class="italic">Chapter 6</em></span></a> focused on elevating a recipe-sharing site using Nuxt 3, with a focus on SEO. We kickstarted with <strong class="source-inline">nuxt/seo</strong> for site configuration, efficiently adding key SEO elements such as meta tags and OG protocols, enhancing the site’s search <span class="No-Break">engine visibility.</span></p>
			<p>Our journey included implementing <strong class="source-inline">defineRecipe</strong> for structured data, improving the recipe visibility in search results. The use of <strong class="source-inline">nuxt-img</strong> was crucial in optimizing images, significantly enhancing page loading speed. A highlight was creating dynamic OG images via a custom Nuxt component, automatically generating unique images for each recipe shared and enriching our social <span class="No-Break">media engagement.</span></p>
			<p>We overcame the challenge of dynamic site map generation by utilizing Nuxt’s server directory to create an internal API, ensuring complete site visibility for <span class="No-Break">search engines.</span></p>
			<p>As we close this chapter, we gear up for <a href="B19760_07.xhtml#_idTextAnchor141"><span class="No-Break"><em class="italic">Chapter 7</em></span></a>, Building a Quiz Game Application to Learn and Testing. This next adventure will dive into creating an interactive quiz game app, which will introduce Nuxt 3’s testing capabilities to build a scalable, error-free application. We’ll explore unit testing, Pinia store testing, end-to-end testing, further enhancing our Nuxt 3 <span class="No-Break">development skills.</span></p>
			<h1 id="_idParaDest-140"><a id="_idTextAnchor139"/>Practice questions</h1>
			<ul>
				<li>How do you set up a canonical URL <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">nuxt/seo</strong></span><span class="No-Break">?</span></li>
				<li>How can you convert images to the WebP format in <span class="No-Break">Nuxt 3?</span></li>
				<li>Explain how to implement a blurred placeholder <span class="No-Break">for images.</span></li>
				<li>How do you customize OG images for social <span class="No-Break">media sharing?</span></li>
				<li>How do you test the implementation of a recipe node in <span class="No-Break">Nuxt Devtools?</span></li>
				<li>What is the importance of specifying width and height <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">nuxt-img</strong></span><span class="No-Break">?</span></li>
				<li>How do you include dynamic page URLs in <span class="No-Break">a sitemap?</span></li>
				<li>What is the importance <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">useSeoMeta</strong></span><span class="No-Break">?</span></li>
				<li>How do you verify the contents of a dynamically generated <span class="No-Break">site map?</span></li>
				<li>How do you add structured data or a schema to a <span class="No-Break">Nuxt page?</span></li>
			</ul>
			<h1 id="_idParaDest-141"><a id="_idTextAnchor140"/>Further reading</h1>
			<ul>
				<li>Nuxt <span class="No-Break">SEO: </span><a href="https://nuxtseo.com/%20"><span class="No-Break">https://nuxtseo.com/</span></a></li>
				<li><span class="No-Break"><strong class="source-inline">useSeoMeta</strong></span><span class="No-Break">: </span><a href="https://nuxt.com/docs/api/composables/use-seo-meta%0D"><span class="No-Break">https://nuxt.com/docs/api/composables/use-seo-meta</span></a></li>
				<li>Nuxt SEO supported <span class="No-Break">nodes: </span><a href="https://nuxtseo.com/schema-org/guides/nodes"><span class="No-Break">https://nuxtseo.com/schema-org/guides/nodes</span></a></li>
				<li>Nuxt <span class="No-Break">Image:</span><span class="No-Break"> </span><a href="https://image.nuxt.com/"><span class="No-Break">https://image.nuxt.com/</span></a></li>
				<li><span class="No-Break">OG: </span><a href="https://www.semrush.com/blog/open-graph"><span class="No-Break">https://www.semrush.com/blog/open-graph</span></a></li>
				<li>Dynamic site map URLs from an external <span class="No-Break">API: </span><a href="https://nuxtseo.com/sitemap/guides/dynamic-urls#dynamic-urls-from-an-external-api"><span class="No-Break">https://nuxtseo.com/sitemap/guides/dynamic-urls#dynamic-urls-from-an-external-api</span></a></li>
			</ul>
		</div>
	</div>
</div>
</body></html>