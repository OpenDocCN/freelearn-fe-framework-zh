<html><head></head><body>
<div id="_idContainer218">
<h1 class="chapterNumber"><a id="_idTextAnchor325"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 class="chapterTitle" id="_idParaDest-276"><a id="_idTextAnchor326"/><span class="koboSpan" id="kobo.2.1">Migrating from React Class Components</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In the previous chapter, we learned how to build our own Hooks by extracting custom Hooks from existing code. </span><span class="koboSpan" id="kobo.3.2">Then, we used our custom Hooks in the blog app. </span><span class="koboSpan" id="kobo.3.3">Finally, we learned how to write tests for Hooks, using the React Testing Library, and wrote tests for our custom Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">In this chapter, we are going to start by implementing a todo app using React class components. </span><span class="koboSpan" id="kobo.4.2">Then, we are going to learn how to migrate an existing React class component application to Hooks. </span><span class="koboSpan" id="kobo.4.3">Seeing the differences between Hooks and class components in practice will deepen our understanding of the trade-offs of using either solution.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.5.1">The following topics will be covered in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.6.1">Handling state with React class components</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.7.1">Migrating from React class components</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.8.1">Trade-offs of React class components vs React Hooks</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-277"><a id="_idTextAnchor327"/><span class="koboSpan" id="kobo.9.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.10.1">A fairly recent version of Node.js should already be installed. </span><span class="koboSpan" id="kobo.10.2">The Node Package Manager (</span><code class="inlineCode"><span class="koboSpan" id="kobo.11.1">npm</span></code><span class="koboSpan" id="kobo.12.1">) also needs to be installed (it should come with Node.js). </span><span class="koboSpan" id="kobo.12.2">For more information on how to install Node.js, please check out their official website: </span><a href="https://nodejs.org/"><span class="url"><span class="koboSpan" id="kobo.13.1">https://nodejs.org/</span></span></a><span class="koboSpan" id="kobo.14.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.15.1">We are going </span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.16.1">to use </span><strong class="keyWord"><span class="koboSpan" id="kobo.17.1">Visual Studio Code</span></strong><span class="koboSpan" id="kobo.18.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.19.1">VS Code</span></strong><span class="koboSpan" id="kobo.20.1">) for the guides in this book, but everything should work similarly in any other editor. </span><span class="koboSpan" id="kobo.20.2">For more information on how to install VS Code, please refer to their official website: </span><a href="https://code.visualstudio.com"><span class="url"><span class="koboSpan" id="kobo.21.1">https://code.visualstudio.com</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.22.1">In this book, we use the following versions:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.23.1">Node.js v22.14.0</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.24.1">npm</span></code><span class="koboSpan" id="kobo.25.1"> v10.9.2</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.26.1">Visual Studio Code v1.97.2</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.27.1">The versions mentioned in the preceding list are the ones used in the book. </span><span class="koboSpan" id="kobo.27.2">While installing a newer version should not be an issue, please note that certain steps might work differently on a newer version. </span><span class="koboSpan" id="kobo.27.3">If you are having an issue with the code and steps provided in this book, please try using the mentioned versions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.28.1">You can find the code for this chapter on GitHub: </span><a href="https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter13"><span class="url"><span class="koboSpan" id="kobo.29.1">https://github.com/PacktPublishing/Learn-React-Hooks-Second-Edition/tree/main/Chapter13</span></span></a></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.30.1">It is highly recommended that you write the code on your own. </span><span class="koboSpan" id="kobo.30.2">Do not simply run the code examples that are provided with the book. </span><span class="koboSpan" id="kobo.30.3">It is important to write the code yourself to be able to learn and understand it properly. </span><span class="koboSpan" id="kobo.30.4">However, if you run into any issues, you can always refer to the code example.</span></p>
</div>
<h1 class="heading-1" id="_idParaDest-278"><a id="_idTextAnchor328"/><span class="koboSpan" id="kobo.31.1">Handling state with React class components</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.32.1">Before we start migrating from class components to Hooks, we are going to create a small todo list app </span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.33.1">using class components. </span><span class="koboSpan" id="kobo.33.2">Afterward</span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.34.1">, we are going to turn these class components into function components using Hooks. </span><span class="koboSpan" id="kobo.34.2">Finally, we are going to compare the two solutions.</span></p>
<h2 class="heading-2" id="_idParaDest-279"><a id="_idTextAnchor329"/><span class="koboSpan" id="kobo.35.1">Designing the app structure</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.36.1">As we did </span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.37.1">before with the blog app, we are going to start by thinking about the basic structure of our todo app. </span><span class="koboSpan" id="kobo.37.2">Here, we are going to need the following:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.38.1">A header</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.39.1">A way to add new todo items</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.40.1">A way to show all todo items in a list</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.41.1">A filter for the todo items</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.42.1">It is always a good idea to start with a mock-up. </span><span class="koboSpan" id="kobo.42.2">So let’s begin:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.43.1">Based on the previous list of structural elements, start by drawing a mock-up of an interface for our todo app:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.44.1"><img alt="Figure 13.1 – Mock-up of our todo app" src="../Images/B31327_13_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.45.1">Figure 13.1 – Mock-up of our todo app</span></p>
<ol>
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.46.1">Next, map out </span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.47.1">the simple components by drawing around the UI elements and giving them a name, in a similar way to how we did it with the blog app:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.48.1"><img alt="Figure 13.2 – Mapping out simple components in our app mock-up" src="../Images/B31327_13_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.49.1">Figure 13.2 – Mapping out simple components in our app mock-up</span></p>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.50.1">Now, map </span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.51.1">out the container components, which group together the simple components:</span></li>
</ol>
<figure class="mediaobject"><span class="koboSpan" id="kobo.52.1"><img alt="Figure 13.3 – Mapping out container components in our app mock-up" src="../Images/B31327_13_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.53.1">Figure 13.3 – Mapping out container components in our app mock-up</span></p>
<p class="normal"><span class="koboSpan" id="kobo.54.1">As we </span><a id="_idIndexMarker648"/><span class="koboSpan" id="kobo.55.1">can see, we are going to need the following components:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.56.1">App</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.57.1">Header</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.58.1">AddTodo</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.59.1">TodoList</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.60.1">TodoItem</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.61.1">TodoFilter</span></code><span class="koboSpan" id="kobo.62.1"> (+ </span><code class="inlineCode"><span class="koboSpan" id="kobo.63.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.64.1">)</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.65.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.66.1">TodoList</span></code><span class="koboSpan" id="kobo.67.1"> component makes use of a </span><code class="inlineCode"><span class="koboSpan" id="kobo.68.1">TodoItem</span></code><span class="koboSpan" id="kobo.69.1"> component, which is used to show an item, with a checkbox to complete and a button to remove it. </span><span class="koboSpan" id="kobo.69.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.70.1">TodoFilter</span></code><span class="koboSpan" id="kobo.71.1"> component internally uses a </span><code class="inlineCode"><span class="koboSpan" id="kobo.72.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.73.1"> component to show the various filters.</span></p>
<h2 class="heading-2" id="_idParaDest-280"><a id="_idTextAnchor330"/><span class="koboSpan" id="kobo.74.1">Initializing the project</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.75.1">We are going to use the barebones Vite app from </span><a href="Chapter_01.xhtml#_idTextAnchor016"><em class="italic"><span class="koboSpan" id="kobo.76.1">Chapter 1</span></em></a><em class="italic"><span class="koboSpan" id="kobo.77.1">, Introducing React and React Hooks</span></em><span class="koboSpan" id="kobo.78.1"> to create </span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.79.1">a new project. </span><span class="koboSpan" id="kobo.79.2">Let’s initialize the project now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.80.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.81.1">Chapter01_3</span></code><span class="koboSpan" id="kobo.82.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.83.1">Chapter13_1</span></code><span class="koboSpan" id="kobo.84.1"> folder, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.85.1">$ cp -R Chapter01_3 Chapter13_1
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.86.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.87.1">Chapter13_1</span></code><span class="koboSpan" id="kobo.88.1"> folder in VS Code.</span></li>
<li class="numberedList"><em class="italic"><span class="koboSpan" id="kobo.89.1">Delete</span></em><span class="koboSpan" id="kobo.90.1"> the current </span><code class="inlineCode"><span class="koboSpan" id="kobo.91.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.92.1"> file, as we are going to create a new one in the next step.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.93.1">With our project initialized, we can start defining the app structure.</span></p>
<h2 class="heading-2" id="_idParaDest-281"><a id="_idTextAnchor331"/><span class="koboSpan" id="kobo.94.1">Defining the app structure</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.95.1">We already </span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.96.1">know what the basic structure of our app is going to be like from the mock-ups, so let’s start by defining the </span><code class="inlineCode"><span class="koboSpan" id="kobo.97.1">App</span></code><span class="koboSpan" id="kobo.98.1"> component:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.99.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.100.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.101.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.102.1">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.103.1">React</span></code><span class="koboSpan" id="kobo.104.1">, and all the container components of our app:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.105.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.106.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.107.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.108.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.109.1">import</span></span><span class="koboSpan" id="kobo.110.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.111.1">Header</span></span><span class="koboSpan" id="kobo.112.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.113.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.114.1">'./Header.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.115.1">import</span></span><span class="koboSpan" id="kobo.116.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.117.1">AddTodo</span></span><span class="koboSpan" id="kobo.118.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.119.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.120.1">'./AddTodo.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.121.1">import</span></span><span class="koboSpan" id="kobo.122.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.123.1">TodoList</span></span><span class="koboSpan" id="kobo.124.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.125.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.126.1">'./TodoList.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.127.1">import</span></span><span class="koboSpan" id="kobo.128.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.129.1">TodoFilter</span></span><span class="koboSpan" id="kobo.130.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.131.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.132.1">'./TodoFilter.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.133.1">Next, define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.134.1">App</span></code><span class="koboSpan" id="kobo.135.1"> component as a class component. </span><span class="koboSpan" id="kobo.135.2">In a class component, we need to define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.136.1">render</span></code><span class="koboSpan" id="kobo.137.1"> method to render our component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.138.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.139.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.140.1">App</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.141.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.142.1">React.Component</span></span><span class="koboSpan" id="kobo.143.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.144.1">render</span></span><span class="koboSpan" id="kobo.145.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.146.1">return</span></span><span class="koboSpan" id="kobo.147.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.148.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.149.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.150.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.151.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.152.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.153.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.154.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.155.1">400px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.156.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.157.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.158.1">Header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.159.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.160.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.161.1">AddTodo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.162.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.163.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.164.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.165.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.166.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.167.1">TodoList</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.168.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.169.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.170.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.171.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.172.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.173.1">TodoFilter</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.174.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.175.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.176.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.177.1">&gt;</span></span><span class="koboSpan" id="kobo.178.1">
    )
  }
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.179.1">The App </span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.180.1">component defines the basic structure of our app. </span><span class="koboSpan" id="kobo.180.2">It will consist of a header, a way to add new todo items, a list of todo items, and a filter.</span></p>
<h2 class="heading-2" id="_idParaDest-282"><a id="_idTextAnchor332"/><span class="koboSpan" id="kobo.181.1">Defining the components</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.182.1">Now, we are </span><a id="_idIndexMarker652"/><span class="koboSpan" id="kobo.183.1">going to </span><a id="_idIndexMarker653"/><span class="koboSpan" id="kobo.184.1">define the following components as static components:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.185.1">Header</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.186.1">AddTodo</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.187.1">TodoList</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.188.1">TodoItem</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.189.1">TodoFilter</span></code></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.190.1">Later in this chapter, we are going to add dynamic functionality to them.</span></p>
<h3 class="heading-3" id="_idParaDest-283"><a id="_idTextAnchor333"/><span class="koboSpan" id="kobo.191.1">Defining the Header component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.192.1">We are </span><a id="_idIndexMarker654"/><span class="koboSpan" id="kobo.193.1">going to </span><a id="_idIndexMarker655"/><span class="koboSpan" id="kobo.194.1">start with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.195.1">Header</span></code><span class="koboSpan" id="kobo.196.1"> component, as it is the most simple out of all the components:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.197.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.198.1">src/Header.jsx</span></code><span class="koboSpan" id="kobo.199.1"> file.</span></li>
</ol>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.200.1">In this project, we decided to put all components directly in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.201.1">src/</span></code><span class="koboSpan" id="kobo.202.1"> folder, as there are only a handful of components anyway.</span></p>
</div>
<ol>
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.203.1">Inside the newly created file, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.204.1">React</span></code><span class="koboSpan" id="kobo.205.1">, and define the class component with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.206.1">render</span></code><span class="koboSpan" id="kobo.207.1"> method:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.208.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.209.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.210.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.211.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.212.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.213.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.214.1">Header</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.215.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.216.1">React.Component</span></span><span class="koboSpan" id="kobo.217.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.218.1">render</span></span><span class="koboSpan" id="kobo.219.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.220.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.221.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.222.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.223.1">&gt;</span></span><span class="koboSpan" id="kobo.224.1">ToDo</span><span class="hljs-tag"><span class="koboSpan" id="kobo.225.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.226.1">h1</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.227.1">&gt;</span></span><span class="koboSpan" id="kobo.228.1">
  }
}
</span></code></pre>
</li>
</ol>
<h3 class="heading-3" id="_idParaDest-284"><a id="_idTextAnchor334"/><span class="koboSpan" id="kobo.229.1">Defining the AddTodo component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.230.1">Next, we are </span><a id="_idIndexMarker656"/><span class="koboSpan" id="kobo.231.1">going to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.232.1">AddTodo</span></code><span class="koboSpan" id="kobo.233.1"> component, which </span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.234.1">renders an </span><code class="inlineCode"><span class="koboSpan" id="kobo.235.1">input</span></code><span class="koboSpan" id="kobo.236.1"> field and a button:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.237.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.238.1">src/AddTodo.jsx</span></code><span class="koboSpan" id="kobo.239.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.240.1">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.241.1">React</span></code><span class="koboSpan" id="kobo.242.1"> and define the class component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.243.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.244.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.245.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.246.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.247.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.248.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.249.1">AddTodo</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.250.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.251.1">React.Component</span></span><span class="koboSpan" id="kobo.252.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.253.1">render</span></span><span class="koboSpan" id="kobo.254.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.255.1">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.256.1">render</span></code><span class="koboSpan" id="kobo.257.1"> method, we </span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.258.1">return a form </span><a id="_idIndexMarker659"/><span class="koboSpan" id="kobo.259.1">that contains an input field and a submit button:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.260.1">return</span></span><span class="koboSpan" id="kobo.261.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.262.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.263.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.264.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.265.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.266.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.267.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.268.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.269.1">'text'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.270.1">placeholder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.271.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.272.1">'enter new task...'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.273.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.274.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.275.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.276.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.277.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.278.1">350px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.279.1">' }}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.280.1">        /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.281.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.282.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.283.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.284.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.285.1">'submit'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.286.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.287.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.288.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.289.1">float:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.290.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.291.1">right</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.292.1">'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.293.1"> }}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.294.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.295.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.296.1">'add'</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.297.1">        /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.298.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.299.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.300.1">&gt;</span></span><span class="koboSpan" id="kobo.301.1">
    )
  }
}
</span></code></pre>
</li>
</ol>
<h3 class="heading-3" id="_idParaDest-285"><a id="_idTextAnchor335"/><span class="koboSpan" id="kobo.302.1">Defining the TodoList component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.303.1">Now, we define </span><a id="_idIndexMarker660"/><span class="koboSpan" id="kobo.304.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.305.1">TodoList</span></code><span class="koboSpan" id="kobo.306.1"> component, which is </span><a id="_idIndexMarker661"/><span class="koboSpan" id="kobo.307.1">going to make use of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.308.1">TodoItem</span></code><span class="koboSpan" id="kobo.309.1"> component (we will create that one in the next step). </span><span class="koboSpan" id="kobo.309.2">For now, we are going to statically define the data for two todo items in an array and use it to render </span><code class="inlineCode"><span class="koboSpan" id="kobo.310.1">TodoItem</span></code><span class="koboSpan" id="kobo.311.1"> components.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.312.1">Let’s start defining the </span><code class="inlineCode"><span class="koboSpan" id="kobo.313.1">TodoList</span></code><span class="koboSpan" id="kobo.314.1"> component:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.315.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.316.1">src/TodoList.jsx</span></code><span class="koboSpan" id="kobo.317.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.318.1">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.319.1">React</span></code><span class="koboSpan" id="kobo.320.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.321.1">TodoItem</span></code><span class="koboSpan" id="kobo.322.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.323.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.324.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.325.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.326.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.327.1">import</span></span><span class="koboSpan" id="kobo.328.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.329.1">TodoItem</span></span><span class="koboSpan" id="kobo.330.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.331.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.332.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.333.1">./TodoItem.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.334.1">Then, define the class component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.335.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.336.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.337.1">TodoList</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.338.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.339.1">React.Component</span></span><span class="koboSpan" id="kobo.340.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.341.1">render</span></span><span class="koboSpan" id="kobo.342.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.343.1">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.344.1">render</span></code><span class="koboSpan" id="kobo.345.1"> method, we </span><a id="_idIndexMarker662"/><span class="koboSpan" id="kobo.346.1">statically define two todo items:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.347.1">const</span></span><span class="koboSpan" id="kobo.348.1"> items = [
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.349.1">id</span></span><span class="koboSpan" id="kobo.350.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.351.1">1</span></span><span class="koboSpan" id="kobo.352.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.353.1">title</span></span><span class="koboSpan" id="kobo.354.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.355.1">'Finish React Hooks book'</span></span><span class="koboSpan" id="kobo.356.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.357.1">completed</span></span><span class="koboSpan" id="kobo.358.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.359.1">true</span></span><span class="koboSpan" id="kobo.360.1"> },
      { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.361.1">id</span></span><span class="koboSpan" id="kobo.362.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.363.1">2</span></span><span class="koboSpan" id="kobo.364.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.365.1">title</span></span><span class="koboSpan" id="kobo.366.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.367.1">'Promote the book'</span></span><span class="koboSpan" id="kobo.368.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.369.1">completed</span></span><span class="koboSpan" id="kobo.370.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.371.1">false</span></span><span class="koboSpan" id="kobo.372.1"> },
    ]
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.373.1">Finally, we are </span><a id="_idIndexMarker663"/><span class="koboSpan" id="kobo.374.1">going to render the items using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.375.1">map</span></code><span class="koboSpan" id="kobo.376.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.377.1">return</span></span><span class="koboSpan" id="kobo.378.1"> items.</span><span class="hljs-title"><span class="koboSpan" id="kobo.379.1">map</span></span><span class="koboSpan" id="kobo.380.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.381.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.382.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.383.1">) =&gt;</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.384.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.385.1">TodoItem</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.386.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.387.1">...item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.388.1">} </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.389.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.390.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.391.1">{item.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.392.1"> /&gt;</span></span><span class="koboSpan" id="kobo.393.1">)
  }
}
</span></code></pre>
</li>
</ol>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.394.1">We define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.395.1">key</span></code><span class="koboSpan" id="kobo.396.1"> property last, in order to avoid overwriting it with the spreading of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.397.1">item</span></code><span class="koboSpan" id="kobo.398.1"> object.</span></p>
</div>
<h3 class="heading-3" id="_idParaDest-286"><a id="_idTextAnchor336"/><span class="koboSpan" id="kobo.399.1">Defining the TodoItem component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.400.1">After </span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.401.1">defining the </span><code class="inlineCode"><span class="koboSpan" id="kobo.402.1">TodoList</span></code><span class="koboSpan" id="kobo.403.1"> component, we are </span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.404.1">now going to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.405.1">TodoItem</span></code><span class="koboSpan" id="kobo.406.1"> component, in order to render single items. </span><span class="koboSpan" id="kobo.406.2">Let’s start defining the </span><code class="inlineCode"><span class="koboSpan" id="kobo.407.1">TodoItem</span></code><span class="koboSpan" id="kobo.408.1"> component:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.409.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.410.1">src/TodoItem.jsx</span></code><span class="koboSpan" id="kobo.411.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.412.1">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.413.1">React</span></code><span class="koboSpan" id="kobo.414.1"> and define the class component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.415.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.416.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.417.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.418.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.419.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.420.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.421.1">TodoItem</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.422.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.423.1">React.Component</span></span><span class="koboSpan" id="kobo.424.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.425.1">render</span></span><span class="koboSpan" id="kobo.426.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.427.1">Now, we are going to use destructuring to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.428.1">title</span></code><span class="koboSpan" id="kobo.429.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.430.1">completed</span></code><span class="koboSpan" id="kobo.431.1"> props:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.432.1">    const</span></span><span class="koboSpan" id="kobo.433.1"> { title, completed } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.434.1">this</span></span><span class="koboSpan" id="kobo.435.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.436.1">props</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.437.1">Finally, we are </span><a id="_idIndexMarker666"/><span class="koboSpan" id="kobo.438.1">going to render a checkbox, the title and </span><a id="_idIndexMarker667"/><span class="koboSpan" id="kobo.439.1">a button to delete the item:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.440.1">return</span></span><span class="koboSpan" id="kobo.441.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.442.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.443.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.444.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.445.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.446.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.447.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.448.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.449.1">400px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.450.1">', </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.451.1">height:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.452.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.453.1">25px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.454.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.455.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.456.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.457.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.458.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.459.1">'checkbox'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.460.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.461.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.462.1">{completed}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.463.1"> /&gt;</span></span><span class="koboSpan" id="kobo.464.1">
        {title}
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.465.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.466.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.467.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.468.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.469.1">'button'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.470.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.471.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.472.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.473.1">float:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.474.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.475.1">right</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.476.1">'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.477.1"> }}&gt;</span></span><span class="koboSpan" id="kobo.478.1">x</span><span class="hljs-tag"><span class="koboSpan" id="kobo.479.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.480.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.481.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.482.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.483.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.484.1">&gt;</span></span><span class="koboSpan" id="kobo.485.1">
    )
  }
}
</span></code></pre>
</li>
</ol>
<h3 class="heading-3" id="_idParaDest-287"><a id="_idTextAnchor337"/><span class="koboSpan" id="kobo.486.1">Defining the TodoFilter component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.487.1">Finally, we are </span><a id="_idIndexMarker668"/><span class="koboSpan" id="kobo.488.1">going to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.489.1">TodoFilter</span></code><span class="koboSpan" id="kobo.490.1"> component. </span><span class="koboSpan" id="kobo.490.2">In the </span><a id="_idIndexMarker669"/><span class="koboSpan" id="kobo.491.1">same file, we are also going to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.492.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.493.1"> component, as they are tightly coupled to each other. </span><span class="koboSpan" id="kobo.493.2">So, let’s start implementing these components:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.494.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.495.1">src/TodoFilter.jsx</span></code><span class="koboSpan" id="kobo.496.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.497.1">Inside it, import </span><code class="inlineCode"><span class="koboSpan" id="kobo.498.1">React</span></code><span class="koboSpan" id="kobo.499.1"> and define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.500.1">TodoFil</span><a id="_idTextAnchor338"/><span class="koboSpan" id="kobo.501.1">terItem</span></code><span class="koboSpan" id="kobo.502.1"> class component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.503.1">import</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.504.1">React</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.505.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.506.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.507.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.508.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.509.1">TodoFilterItem</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.510.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.511.1">React.Component</span></span><span class="koboSpan" id="kobo.512.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.513.1">render</span></span><span class="koboSpan" id="kobo.514.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.515.1">We use destructuring to get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.516.1">name</span></code><span class="koboSpan" id="kobo.517.1"> prop:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.518.1">const</span></span><span class="koboSpan" id="kobo.519.1"> { name } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.520.1">this</span></span><span class="koboSpan" id="kobo.521.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.522.1">props</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.523.1">Then, we </span><a id="_idIndexMarker670"/><span class="koboSpan" id="kobo.524.1">return a button to select the filter:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.525.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.526.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.527.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.528.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.529.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.530.1">'button'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.531.1">&gt;</span></span><span class="koboSpan" id="kobo.532.1">{name}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.533.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.534.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.535.1">&gt;</span></span><span class="koboSpan" id="kobo.536.1">
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.537.1">Finally, we define </span><a id="_idIndexMarker671"/><span class="koboSpan" id="kobo.538.1">the actual </span><code class="inlineCode"><span class="koboSpan" id="kobo.539.1">TodoFilter</span></code><span class="koboSpan" id="kobo.540.1"> component, which is going to render three </span><code class="inlineCode"><span class="koboSpan" id="kobo.541.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.542.1"> components:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.543.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.544.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.545.1">TodoFilter</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.546.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.547.1">React.Component</span></span><span class="koboSpan" id="kobo.548.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.549.1">render</span></span><span class="koboSpan" id="kobo.550.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.551.1">return</span></span><span class="koboSpan" id="kobo.552.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.553.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.554.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.555.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.556.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.557.1">TodoFilterItem</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.558.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.559.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.560.1">'all'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.561.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.562.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.563.1">TodoFilterItem</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.564.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.565.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.566.1">'active'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.567.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.568.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.569.1">TodoFilterItem</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.570.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.571.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.572.1">'completed'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.573.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.574.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.575.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.576.1">&gt;</span></span><span class="koboSpan" id="kobo.577.1">
    )
  }
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.578.1">Now that we finished implementing all static components, we can start the app.</span></p>
<h3 class="heading-3" id="_idParaDest-288"><a id="_idTextAnchor339"/><span class="koboSpan" id="kobo.579.1">Starting the app</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.580.1">To start the app, run the following command:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.581.1">$ npm run dev
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.582.1">Open the </span><a id="_idIndexMarker672"/><span class="koboSpan" id="kobo.583.1">URL in a browser and you will see that the app looks just like our mock-up!</span></p>
<p class="normal"><span class="koboSpan" id="kobo.584.1">However, the app is completely static, and when we click on anything, nothing happens. </span><span class="koboSpan" id="kobo.584.2">In the next step, we are going to make our app dynamic.</span></p>
<h2 class="heading-2" id="_idParaDest-289"><a id="_idTextAnchor340"/><span class="koboSpan" id="kobo.585.1">Implementing dynamic code</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.586.1">Now that </span><a id="_idIndexMarker673"/><span class="koboSpan" id="kobo.587.1">we have defined all of the static components, our app should look just like the mock-up. </span><span class="koboSpan" id="kobo.587.2">The next step is to implement </span><a id="_idIndexMarker674"/><span class="koboSpan" id="kobo.588.1">dynamic code using React state, life cycle, and handler functions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.589.1">In this section, we are going to:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.590.1">Define a mock API</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.591.1">Define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.592.1">StateContext</span></code></li>
<li class="bulletList"><span class="koboSpan" id="kobo.593.1">Make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.594.1">App</span></code><span class="koboSpan" id="kobo.595.1"> component dynamic</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.596.1">Make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.597.1">AddTodo</span></code><span class="koboSpan" id="kobo.598.1"> component dynamic</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.599.1">Make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.600.1">TodoList</span></code><span class="koboSpan" id="kobo.601.1"> component dynamic</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.602.1">Make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.603.1">TodoItem</span></code><span class="koboSpan" id="kobo.604.1"> component dynamic</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.605.1">Make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.606.1">TodoFilter</span></code><span class="koboSpan" id="kobo.607.1"> component dynamic</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.608.1">Let’s get started.</span></p>
<h3 class="heading-3" id="_idParaDest-290"><a id="_idTextAnchor341"/><span class="koboSpan" id="kobo.609.1">Defining a mock API</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.610.1">First of all, we are going to define an API that will fetch todos. </span><span class="koboSpan" id="kobo.610.2">In our case, we are simply going to return </span><a id="_idIndexMarker675"/><span class="koboSpan" id="kobo.611.1">an array of todo items, after a short delay, to simulate a network request, which usually takes some time to resolve.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.612.1">Let’s start </span><a id="_idIndexMarker676"/><span class="koboSpan" id="kobo.613.1">implementing the mock API now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.614.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.615.1">src/api.js</span></code><span class="koboSpan" id="kobo.616.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.617.1">Inside it, define and export a function that returns items after a short delay:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.618.1">const</span></span><span class="koboSpan" id="kobo.619.1"> mockItems = [
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.620.1">id</span></span><span class="koboSpan" id="kobo.621.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.622.1">1</span></span><span class="koboSpan" id="kobo.623.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.624.1">title</span></span><span class="koboSpan" id="kobo.625.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.626.1">'Finish React Hooks book'</span></span><span class="koboSpan" id="kobo.627.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.628.1">completed</span></span><span class="koboSpan" id="kobo.629.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.630.1">true</span></span><span class="koboSpan" id="kobo.631.1"> },
  { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.632.1">id</span></span><span class="koboSpan" id="kobo.633.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.634.1">2</span></span><span class="koboSpan" id="kobo.635.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.636.1">title</span></span><span class="koboSpan" id="kobo.637.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.638.1">'Promote the book'</span></span><span class="koboSpan" id="kobo.639.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.640.1">completed</span></span><span class="koboSpan" id="kobo.641.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.642.1">false</span></span><span class="koboSpan" id="kobo.643.1"> },
]
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.644.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.645.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.646.1">fetchTodos</span></span><span class="koboSpan" id="kobo.647.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.648.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.649.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.650.1">Promise</span></span><span class="koboSpan" id="kobo.651.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.652.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.653.1">resolve</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.654.1">) =&gt;</span></span><span class="koboSpan" id="kobo.655.1"> {
    </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.656.1">setTimeout</span></span><span class="koboSpan" id="kobo.657.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.658.1">() =&gt;</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.659.1">resolve</span></span><span class="koboSpan" id="kobo.660.1">(mockItems), </span><span class="hljs-number"><span class="koboSpan" id="kobo.661.1">100</span></span><span class="koboSpan" id="kobo.662.1">)
  })
}
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.663.1">Here we are using the Promise API to resolve with an array of mock items after waiting for 100ms to simulate a real API request.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.664.1">Next, we are going to define a context that will keep our current list of todos.</span></p>
<h3 class="heading-3" id="_idParaDest-291"><a id="_idTextAnchor342"/><span class="koboSpan" id="kobo.665.1">Defining the StateContext</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.666.1">We are </span><a id="_idIndexMarker677"/><span class="koboSpan" id="kobo.667.1">now going to define the context that will keep the </span><a id="_idIndexMarker678"/><span class="koboSpan" id="kobo.668.1">current state of our todo app:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.669.1">Creat</span><a id="_idTextAnchor343"/><span class="koboSpan" id="kobo.670.1">e a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.671.1">src/StateContext.js</span></code><span class="koboSpan" id="kobo.672.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.673.1">Inside it, import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.674.1">createContext</span></code><span class="koboSpan" id="kobo.675.1"> function from React:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.676.1">import</span></span><span class="koboSpan" id="kobo.677.1"> { createContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.678.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.679.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.680.1">Then, define and export a context that contains an empty array:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.681.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.682.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.683.1">StateContext</span></span><span class="koboSpan" id="kobo.684.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.685.1">createContext</span></span><span class="koboSpan" id="kobo.686.1">([])
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.687.1">Now that </span><a id="_idIndexMarker679"/><span class="koboSpan" id="kobo.688.1">we have a context where we can store our array of todo items, let’s </span><a id="_idIndexMarker680"/><span class="koboSpan" id="kobo.689.1">move on to making the components dynamic.</span></p>
<h3 class="heading-3" id="_idParaDest-292"><a id="_idTextAnchor344"/><span class="koboSpan" id="kobo.690.1">Making the App component dynamic</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.691.1">We are </span><a id="_idIndexMarker681"/><span class="koboSpan" id="kobo.692.1">going to start by making the </span><code class="inlineCode"><span class="koboSpan" id="kobo.693.1">App</span></code><span class="koboSpan" id="kobo.694.1"> component </span><a id="_idIndexMarker682"/><span class="koboSpan" id="kobo.695.1">dynamic, adding functionality to fetch, add, toggle, filter, and remove todo items. </span><span class="koboSpan" id="kobo.695.2">To do this:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.696.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.697.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.698.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.699.1">StateContext</span></code><span class="koboSpan" id="kobo.700.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.701.1">fetchTodos</span></code><span class="koboSpan" id="kobo.702.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.703.1">import</span></span><span class="koboSpan" id="kobo.704.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.705.1">StateContext</span></span><span class="koboSpan" id="kobo.706.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.707.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.708.1">'./StateContext.js'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.709.1">import</span></span><span class="koboSpan" id="kobo.710.1"> { fetchTodos } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.711.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.712.1">'./api.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.713.1">Next, we are going to modify our </span><code class="inlineCode"><span class="koboSpan" id="kobo.714.1">App</span></code><span class="koboSpan" id="kobo.715.1"> class code, adding a </span><code class="inlineCode"><span class="koboSpan" id="kobo.716.1">constructor</span></code><span class="koboSpan" id="kobo.717.1"> to </span><a id="_idTextAnchor345"/><span class="koboSpan" id="kobo.718.1">it, which will set the initial state:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.719.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.720.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.721.1">App</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.722.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.723.1">React.Component</span></span><span class="koboSpan" id="kobo.724.1"> {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.725.1">constructor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.726.1">(props) {</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.727.1">In this constructor, we first need to call </span><code class="inlineCode"><span class="koboSpan" id="kobo.728.1">super</span></code><span class="koboSpan" id="kobo.729.1"> to make sure that the parent class (</span><code class="inlineCode"><span class="koboSpan" id="kobo.730.1">React.Component</span></code><span class="koboSpan" id="kobo.731.1">) constructor gets called and the component gets initialized properly:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-variable"><span class="koboSpan" id="kobo.732.1">super</span></span><span class="koboSpan" id="kobo.733.1">(props)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.734.1">Now, we can set the initial state with </span><code class="inlineCode"><span class="koboSpan" id="kobo.735.1">this.state</span></code><span class="koboSpan" id="kobo.736.1">. </span><span class="koboSpan" id="kobo.736.2">Initially, there are no todo items, and the filter is set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.737.1">all</span></code><span class="koboSpan" id="kobo.738.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-variable"><span class="koboSpan" id="kobo.739.1">this</span></span><span class="koboSpan" id="kobo.740.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.741.1">state</span></span><span class="koboSpan" id="kobo.742.1"> = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.743.1">todos</span></span><span class="koboSpan" id="kobo.744.1">: [], </span><span class="hljs-attr"><span class="koboSpan" id="kobo.745.1">filteredTodos</span></span><span class="koboSpan" id="kobo.746.1">: [], </span><span class="hljs-attr"><span class="koboSpan" id="kobo.747.1">filter</span></span><span class="koboSpan" id="kobo.748.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.749.1">'all'</span></span><span class="koboSpan" id="kobo.750.1"> }
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.751.1">Then, we define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.752.1">componentDidMount</span></code><span class="koboSpan" id="kobo.753.1"> lifecycle method, which is going to load todo items when the component first renders:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.754.1">componentDidMount</span></span><span class="koboSpan" id="kobo.755.1">() {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.756.1">this</span></span><span class="koboSpan" id="kobo.757.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.758.1">loadTodos</span></span><span class="koboSpan" id="kobo.759.1">()
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.760.1">Next, we are going to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.761.1">loadTodos</span></code><span class="koboSpan" id="kobo.762.1"> method, which in our case, is simply going to </span><a id="_idIndexMarker683"/><span class="koboSpan" id="kobo.763.1">set the state, as we are not going </span><a id="_idIndexMarker684"/><span class="koboSpan" id="kobo.764.1">to connect this simple app to a backend. </span><span class="koboSpan" id="kobo.764.2">We are also going to call </span><code class="inlineCode"><span class="koboSpan" id="kobo.765.1">this.filterTodos()</span></code><span class="koboSpan" id="kobo.766.1"> to update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.767.1">filteredTodos</span></code><span class="koboSpan" id="kobo.768.1"> array after fetching:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.769.1">async</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.770.1">loadTodos</span></span><span class="koboSpan" id="kobo.771.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.772.1">const</span></span><span class="koboSpan" id="kobo.773.1"> todos = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.774.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.775.1">fetchTodos</span></span><span class="koboSpan" id="kobo.776.1">()
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.777.1">this</span></span><span class="koboSpan" id="kobo.778.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.779.1">setState</span></span><span class="koboSpan" id="kobo.780.1">({ todos })
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.781.1">this</span></span><span class="koboSpan" id="kobo.782.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.783.1">filterTodos</span></span><span class="koboSpan" id="kobo.784.1">()
  }
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.785.1">We will define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.786.1">filterTodos</span></code><span class="koboSpan" id="kobo.787.1"> method later in this section.</span></p>
<ol>
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.788.1">Next, we define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.789.1">addTodo</span></code><span class="koboSpan" id="kobo.790.1"> method, which creates a new item and adds it to the array:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.791.1">addTodo</span></span><span class="koboSpan" id="kobo.792.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.793.1">title</span></span><span class="koboSpan" id="kobo.794.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.795.1">const</span></span><span class="koboSpan" id="kobo.796.1"> { todos } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.797.1">this</span></span><span class="koboSpan" id="kobo.798.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.799.1">state</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.800.1">const</span></span><span class="koboSpan" id="kobo.801.1"> newTodo = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.802.1">id</span></span><span class="koboSpan" id="kobo.803.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.804.1">Date</span></span><span class="koboSpan" id="kobo.805.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.806.1">now</span></span><span class="koboSpan" id="kobo.807.1">(), title, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.808.1">completed</span></span><span class="koboSpan" id="kobo.809.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.810.1">false</span></span><span class="koboSpan" id="kobo.811.1"> }
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.812.1">this</span></span><span class="koboSpan" id="kobo.813.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.814.1">setState</span></span><span class="koboSpan" id="kobo.815.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.816.1">todos</span></span><span class="koboSpan" id="kobo.817.1">: [newTodo, ...todos] })
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.818.1">this</span></span><span class="koboSpan" id="kobo.819.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.820.1">filterTodos</span></span><span class="koboSpan" id="kobo.821.1">()
  }
</span></code></pre>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.822.1">To keep things simple, we are just using </span><code class="inlineCode"><span class="koboSpan" id="kobo.823.1">Date.now()</span></code><span class="koboSpan" id="kobo.824.1"> to generate a unique id for each todo item.</span></p>
</div>
</li>
</ol>
<ol>
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.825.1">We now define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.826.1">toggleTodo</span></code><span class="koboSpan" id="kobo.827.1"> method, which uses the </span><code class="inlineCode"><span class="koboSpan" id="kobo.828.1">map</span></code><span class="koboSpan" id="kobo.829.1"> function </span><a id="_idTextAnchor346"/><span class="koboSpan" id="kobo.830.1">to find and modify a certain todo item:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.831.1">toggleTodo</span></span><span class="koboSpan" id="kobo.832.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.833.1">id</span></span><span class="koboSpan" id="kobo.834.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.835.1">const</span></span><span class="koboSpan" id="kobo.836.1"> { todos } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.837.1">this</span></span><span class="koboSpan" id="kobo.838.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.839.1">state</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.840.1">const</span></span><span class="koboSpan" id="kobo.841.1"> updatedTodos = todos.</span><span class="hljs-title"><span class="koboSpan" id="kobo.842.1">map</span></span><span class="koboSpan" id="kobo.843.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.844.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.845.1"> =&gt;</span></span><span class="koboSpan" id="kobo.846.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.847.1">if</span></span><span class="koboSpan" id="kobo.848.1"> (item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.849.1">id</span></span><span class="koboSpan" id="kobo.850.1"> === id) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.851.1">return</span></span><span class="koboSpan" id="kobo.852.1"> { ...item, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.853.1">completed</span></span><span class="koboSpan" id="kobo.854.1">: !item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.855.1">completed</span></span><span class="koboSpan" id="kobo.856.1"> }
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.857.1">return</span></span><span class="koboSpan" id="kobo.858.1"> item
    })
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.859.1">this</span></span><span class="koboSpan" id="kobo.860.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.861.1">setState</span></span><span class="koboSpan" id="kobo.862.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.863.1">todos</span></span><span class="koboSpan" id="kobo.864.1">: updatedTodos })
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.865.1">this</span></span><span class="koboSpan" id="kobo.866.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.867.1">filterTodos</span></span><span class="koboSpan" id="kobo.868.1">()
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.869.1">Now, define </span><a id="_idIndexMarker685"/><span class="koboSpan" id="kobo.870.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.871.1">removeTodo</span></code><span class="koboSpan" id="kobo.872.1"> method, which </span><a id="_idIndexMarker686"/><span class="koboSpan" id="kobo.873.1">uses the </span><code class="inlineCode"><span class="koboSpan" id="kobo.874.1">filter</span></code><span class="koboSpan" id="kobo.875.1"> function to find and remove a certain todo item:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.876.1">removeTodo</span></span><span class="koboSpan" id="kobo.877.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.878.1">id</span></span><span class="koboSpan" id="kobo.879.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.880.1">const</span></span><span class="koboSpan" id="kobo.881.1"> { todos } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.882.1">this</span></span><span class="koboSpan" id="kobo.883.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.884.1">state</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.885.1">const</span></span><span class="koboSpan" id="kobo.886.1"> updatedTodos = todos.</span><span class="hljs-title"><span class="koboSpan" id="kobo.887.1">filter</span></span><span class="koboSpan" id="kobo.888.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.889.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.890.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.891.1">) =&gt;</span></span><span class="koboSpan" id="kobo.892.1"> item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.893.1">id</span></span><span class="koboSpan" id="kobo.894.1"> !== id)
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.895.1">this</span></span><span class="koboSpan" id="kobo.896.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.897.1">setState</span></span><span class="koboSpan" id="kobo.898.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.899.1">todos</span></span><span class="koboSpan" id="kobo.900.1">: updatedTodos })
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.901.1">this</span></span><span class="koboSpan" id="kobo.902.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.903.1">filterTodos</span></span><span class="koboSpan" id="kobo.904.1">()
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.905.1">Then, define a method to apply different filters to todo items, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.906.1">active</span></code><span class="koboSpan" id="kobo.907.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.908.1">completed</span></code><span class="koboSpan" id="kobo.909.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.910.1">all</span></code><span class="koboSpan" id="kobo.911.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.912.1">applyFilter</span></span><span class="koboSpan" id="kobo.913.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.914.1">todos, filter</span></span><span class="koboSpan" id="kobo.915.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.916.1">switch</span></span><span class="koboSpan" id="kobo.917.1"> (filter) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.918.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.919.1">'active'</span></span><span class="koboSpan" id="kobo.920.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.921.1">return</span></span><span class="koboSpan" id="kobo.922.1"> todos.</span><span class="hljs-title"><span class="koboSpan" id="kobo.923.1">filter</span></span><span class="koboSpan" id="kobo.924.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.925.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.926.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.927.1">) =&gt;</span></span><span class="koboSpan" id="kobo.928.1"> item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.929.1">completed</span></span><span class="koboSpan" id="kobo.930.1"> === </span><span class="hljs-literal"><span class="koboSpan" id="kobo.931.1">false</span></span><span class="koboSpan" id="kobo.932.1">)
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.933.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.934.1">'completed'</span></span><span class="koboSpan" id="kobo.935.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.936.1">return</span></span><span class="koboSpan" id="kobo.937.1"> todos.</span><span class="hljs-title"><span class="koboSpan" id="kobo.938.1">filter</span></span><span class="koboSpan" id="kobo.939.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.940.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.941.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.942.1">) =&gt;</span></span><span class="koboSpan" id="kobo.943.1"> item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.944.1">completed</span></span><span class="koboSpan" id="kobo.945.1"> === </span><span class="hljs-literal"><span class="koboSpan" id="kobo.946.1">true</span></span><span class="koboSpan" id="kobo.947.1">)
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.948.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.949.1">'all'</span></span><span class="koboSpan" id="kobo.950.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.951.1">default</span></span><span class="koboSpan" id="kobo.952.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.953.1">return</span></span><span class="koboSpan" id="kobo.954.1"> todos
    }
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.955.1">Now, we can </span><a id="_idIndexMarker687"/><span class="koboSpan" id="kobo.956.1">define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.957.1">filterTodos</span></code><span class="koboSpan" id="kobo.958.1"> method, which </span><a id="_idIndexMarker688"/><span class="koboSpan" id="kobo.959.1">is going to call the </span><code class="inlineCode"><span class="koboSpan" id="kobo.960.1">applyFilter</span></code><span class="koboSpan" id="kobo.961.1"> method and update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.962.1">filteredTodos</span></code><span class="koboSpan" id="kobo.963.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.964.1">filter</span></code><span class="koboSpan" id="kobo.965.1"> state:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.966.1">filterTodos</span></span><span class="koboSpan" id="kobo.967.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.968.1">filterArg</span></span><span class="koboSpan" id="kobo.969.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.970.1">this</span></span><span class="koboSpan" id="kobo.971.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.972.1">setState</span></span><span class="koboSpan" id="kobo.973.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.974.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.975.1">{ todos, filter }</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.976.1">) =&gt;</span></span><span class="koboSpan" id="kobo.977.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.978.1">const</span></span><span class="koboSpan" id="kobo.979.1"> newFilter = filterArg ?? </span><span class="koboSpan" id="kobo.979.2">filter
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.980.1">return</span></span><span class="koboSpan" id="kobo.981.1"> {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.982.1">filter</span></span><span class="koboSpan" id="kobo.983.1">: newFilter,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.984.1">filteredTodos</span></span><span class="koboSpan" id="kobo.985.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.986.1">this</span></span><span class="koboSpan" id="kobo.987.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.988.1">applyFilter</span></span><span class="koboSpan" id="kobo.989.1">(todos, newFilter),
      }
    })
  }
</span></code></pre>
</li>
</ol>
<p class="normal-one"><span class="koboSpan" id="kobo.990.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.991.1">nullish coalescing</span></strong><span class="koboSpan" id="kobo.992.1"> (</span><code class="inlineCode"><span class="koboSpan" id="kobo.993.1">??</span></code><span class="koboSpan" id="kobo.994.1">) operator is used to fall back to a different value when the value on the left hand side is </span><code class="inlineCode"><span class="koboSpan" id="kobo.995.1">undefined</span></code><span class="koboSpan" id="kobo.996.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.997.1">null</span></code><span class="koboSpan" id="kobo.998.1">. </span><span class="koboSpan" id="kobo.998.2">Unlike the </span><code class="inlineCode"><span class="koboSpan" id="kobo.999.1">||</span></code><span class="koboSpan" id="kobo.1000.1"> operator, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1001.1">??</span></code><span class="koboSpan" id="kobo.1002.1"> operator only triggers for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1003.1">undefined</span></code><span class="koboSpan" id="kobo.1004.1">/</span><code class="inlineCode"><span class="koboSpan" id="kobo.1005.1">null</span></code><span class="koboSpan" id="kobo.1006.1"> values, not for falsy values like </span><code class="inlineCode"><span class="koboSpan" id="kobo.1007.1">0</span></code><span class="koboSpan" id="kobo.1008.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1009.1">''</span></code><span class="koboSpan" id="kobo.1010.1">, or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1011.1">false</span></code><span class="koboSpan" id="kobo.1012.1">.</span></p>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.1013.1">We are using </span><code class="inlineCode"><span class="koboSpan" id="kobo.1014.1">filterTodos</span></code><span class="koboSpan" id="kobo.1015.1"> to re-filter todos after adding/removing, as well as changing the filter. </span><span class="koboSpan" id="kobo.1015.2">To allow for both functionalities to work properly, we need to check if the filter argument </span><code class="inlineCode"><span class="koboSpan" id="kobo.1016.1">filterArg</span></code><span class="koboSpan" id="kobo.1017.1"> was passed. </span><span class="koboSpan" id="kobo.1017.2">If not, we fall back to the current </span><code class="inlineCode"><span class="koboSpan" id="kobo.1018.1">filter</span></code><span class="koboSpan" id="kobo.1019.1"> value from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1020.1">state</span></code><span class="koboSpan" id="kobo.1021.1"> object.</span></p>
</div>
<ol>
<li class="numberedList" value="12"><span class="koboSpan" id="kobo.1022.1">Then, we </span><a id="_idIndexMarker689"/><span class="koboSpan" id="kobo.1023.1">adjust the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1024.1">render</span></code><span class="koboSpan" id="kobo.1025.1"> method and </span><a id="_idIndexMarker690"/><span class="koboSpan" id="kobo.1026.1">use the state to provide a value for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1027.1">StateContext</span></code><span class="koboSpan" id="kobo.1028.1">. </span><span class="koboSpan" id="kobo.1028.2">We also pass certain methods down to the components:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1029.1">render</span></span><span class="koboSpan" id="kobo.1030.1">() {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1031.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1032.1"> { filter, filteredTodos } = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1033.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1034.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1035.1">state</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1036.1">return</span></span><span class="koboSpan" id="kobo.1037.1"> (
      </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1038.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1039.1">StateContext.Provider</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1040.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1041.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1042.1">{filteredTodos}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1043.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1044.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1045.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1046.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1047.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1048.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1049.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1050.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1051.1">400px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1052.1">'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1053.1"> }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1054.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1055.1">Header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1056.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1057.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1058.1">AddTodo</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1059.1">addTodo</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1060.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1061.1">{this.addTodo}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1062.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1063.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1064.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1065.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1066.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1067.1">TodoList</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1068.1">toggleTodo</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1069.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1070.1">{this.toggleTodo}</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1071.1">removeTodo</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1072.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1073.1">{this.removeTodo}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1074.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1075.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1076.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1077.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1078.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1079.1">TodoFilter</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1080.1">filter</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1081.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1082.1">{filter}</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1083.1">filterTodos</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1084.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1085.1">{this.filterTodos}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1086.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1087.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1088.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1089.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1090.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1091.1">StateContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1092.1">&gt;</span></span><span class="koboSpan" id="kobo.1093.1">
    )
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1094.1">Finally, we need to re-bind </span><code class="inlineCode"><span class="koboSpan" id="kobo.1095.1">this</span></code><span class="koboSpan" id="kobo.1096.1"> to the class, so that we can pass the methods to our components without the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1097.1">this</span></code><span class="koboSpan" id="kobo.1098.1"> context changing. </span><span class="koboSpan" id="kobo.1098.2">Adjust the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1099.1">constructor</span></code><span class="koboSpan" id="kobo.1100.1"> method by rebinding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1101.1">this</span></code><span class="koboSpan" id="kobo.1102.1"> context of all methods, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1103.1">constructor</span></span><span class="koboSpan" id="kobo.1104.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1105.1">props</span></span><span class="koboSpan" id="kobo.1106.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1107.1">super</span></span><span class="koboSpan" id="kobo.1108.1">(props)
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1109.1">this</span></span><span class="koboSpan" id="kobo.1110.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1111.1">state</span></span><span class="koboSpan" id="kobo.1112.1"> = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1113.1">todos</span></span><span class="koboSpan" id="kobo.1114.1">: [], </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1115.1">filteredTodos</span></span><span class="koboSpan" id="kobo.1116.1">: [], </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1117.1">filter</span></span><span class="koboSpan" id="kobo.1118.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1119.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1120.1">all'</span></span><span class="koboSpan" id="kobo.1121.1"> }
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1122.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1123.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1124.1">loadTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1125.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1126.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1127.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1128.1">loadTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1129.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1130.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1131.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1132.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1133.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1134.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1135.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1136.1">addTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1137.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1138.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1139.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1140.1">addTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1141.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1142.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1143.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1144.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1145.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1146.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1147.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1148.1">toggleTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1149.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1150.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1151.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1152.1">toggleTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1153.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1154.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1155.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1156.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1157.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1158.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1159.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1160.1">removeTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1161.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1162.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1163.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1164.1">removeTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1165.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1166.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1167.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1168.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1169.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1170.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1171.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1172.1">filterTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1173.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1174.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1175.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1176.1">filterTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1177.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1178.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1179.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1180.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1181.1">)</span></strong></span><span class="koboSpan" id="kobo.1182.1">
  }
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1183.1">Now, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1184.1">App</span></code><span class="koboSpan" id="kobo.1185.1"> component </span><a id="_idIndexMarker691"/><span class="koboSpan" id="kobo.1186.1">can dynamically fetch, add, toggle, remove and filter todo items. </span><span class="koboSpan" id="kobo.1186.2">As we can see, when we use class components, we need </span><a id="_idIndexMarker692"/><span class="koboSpan" id="kobo.1187.1">to re-bind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1188.1">this</span></code><span class="koboSpan" id="kobo.1189.1"> context of the handler functions to the class. </span><span class="koboSpan" id="kobo.1189.2">Otherwise, we would get an error when we call the methods, because their </span><code class="inlineCode"><span class="koboSpan" id="kobo.1190.1">this</span></code><span class="koboSpan" id="kobo.1191.1"> context is not bound to the class anymore and thus they cannot call methods such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1192.1">this.setState</span></code><span class="koboSpan" id="kobo.1193.1">.</span></p>
<h3 class="heading-3" id="_idParaDest-293"><a id="_idTextAnchor347"/><span class="koboSpan" id="kobo.1194.1">Making the AddTodo component dynamic</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1195.1">After making </span><a id="_idIndexMarker693"/><span class="koboSpan" id="kobo.1196.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1197.1">App</span></code><span class="koboSpan" id="kobo.1198.1"> component dynamic, it is time </span><a id="_idIndexMarker694"/><span class="koboSpan" id="kobo.1199.1">to make all of our other components dynamic, too. </span><span class="koboSpan" id="kobo.1199.2">We are going to start from the top, with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1200.1">AddTodo</span></code><span class="koboSpan" id="kobo.1201.1"> component:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1202.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1203.1">src/AddTodo.jsx</span></code><span class="koboSpan" id="kobo.1204.1"> and define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1205.1">constructor</span></code><span class="koboSpan" id="kobo.1206.1">, which sets the initial state for the input field:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1207.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1208.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1209.1">AddTodo</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1210.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1211.1">React.Component</span></span><span class="koboSpan" id="kobo.1212.1"> {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1213.1">constructor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1214.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1215.1">props</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1216.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1217.1">super</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1218.1">(props)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1219.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1220.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1221.1">state</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1222.1"> = {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1223.1">input</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1224.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1225.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1226.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1227.1">    }</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1228.1">  }</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1229.1">Then, define </span><a id="_idTextAnchor348"/><span class="koboSpan" id="kobo.1230.1">a method for handling changes in the input field:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1231.1">handleInput</span></span><span class="koboSpan" id="kobo.1232.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1233.1">e</span></span><span class="koboSpan" id="kobo.1234.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1235.1">this</span></span><span class="koboSpan" id="kobo.1236.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1237.1">setState</span></span><span class="koboSpan" id="kobo.1238.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1239.1">input</span></span><span class="koboSpan" id="kobo.1240.1">: e.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1241.1">target</span></span><span class="koboSpan" id="kobo.1242.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1243.1">value</span></span><span class="koboSpan" id="kobo.1244.1"> })
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1245.1">Now, define a method to handle submission of the form:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1246.1">handleSubmit</span></span><span class="koboSpan" id="kobo.1247.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1248.1">e</span></span><span class="koboSpan" id="kobo.1249.1">) {
    e.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1250.1">preventDefault</span></span><span class="koboSpan" id="kobo.1251.1">()
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1252.1">const</span></span><span class="koboSpan" id="kobo.1253.1"> { input } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1254.1">this</span></span><span class="koboSpan" id="kobo.1255.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1256.1">state</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1257.1">const</span></span><span class="koboSpan" id="kobo.1258.1"> { addTodo } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1259.1">this</span></span><span class="koboSpan" id="kobo.1260.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1261.1">props</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1262.1">if</span></span><span class="koboSpan" id="kobo.1263.1"> (input) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1264.1">addTodo</span></span><span class="koboSpan" id="kobo.1265.1">(input)
      </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1266.1">this</span></span><span class="koboSpan" id="kobo.1267.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1268.1">setState</span></span><span class="koboSpan" id="kobo.1269.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1270.1">input</span></span><span class="koboSpan" id="kobo.1271.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1272.1">''</span></span><span class="koboSpan" id="kobo.1273.1"> })
    }
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1274.1">Next, we can </span><a id="_idIndexMarker695"/><span class="koboSpan" id="kobo.1275.1">assign the input value, as well </span><a id="_idIndexMarker696"/><span class="koboSpan" id="kobo.1276.1">as the input and submit handlers, to the relevant components. </span><span class="koboSpan" id="kobo.1276.2">Additionally, we’ll disable the button when the input field is empty:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1277.1">render</span></span><span class="koboSpan" id="kobo.1278.1">() {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1279.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1280.1"> { input } = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1281.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1282.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1283.1">state</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1284.1">return</span></span><span class="koboSpan" id="kobo.1285.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1286.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1287.1">form</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1288.1">onSubmit</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1289.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1290.1">{this.handleSubmit}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1291.1">&gt;</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1292.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1293.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1294.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1295.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1296.1">'text'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1297.1">placeholder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1298.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1299.1">'enter new task...'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1300.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1301.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1302.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1303.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1304.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1305.1">350px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1306.1">' }}</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1307.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1308.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1309.1">{input}</span></strong></span>
<span class="code-highlight"><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1310.1">onChange</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1311.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1312.1">{this.handleInput}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1313.1">        /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1314.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1315.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1316.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1317.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1318.1">'submit'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1319.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1320.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1321.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1322.1">float:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1323.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1324.1">right</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1325.1">' }}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1326.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1327.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1328.1">'add'</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1329.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1330.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1331.1">{!input}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1332.1">        /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1333.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1334.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1335.1">&gt;</span></span><span class="koboSpan" id="kobo.1336.1">
    )
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1337.1">Finally, we need </span><a id="_idIndexMarker697"/><span class="koboSpan" id="kobo.1338.1">to adjust the </span><a id="_idIndexMarker698"/><span class="koboSpan" id="kobo.1339.1">constructor by re-binding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1340.1">this</span></code><span class="koboSpan" id="kobo.1341.1"> context for all of the handler methods, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1342.1">constructor</span></span><span class="koboSpan" id="kobo.1343.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1344.1">props</span></span><span class="koboSpan" id="kobo.1345.1">) {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1346.1">super</span></span><span class="koboSpan" id="kobo.1347.1">(props)
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1348.1">this</span></span><span class="koboSpan" id="kobo.1349.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1350.1">state</span></span><span class="koboSpan" id="kobo.1351.1"> = {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1352.1">input</span></span><span class="koboSpan" id="kobo.1353.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1354.1">''</span></span><span class="koboSpan" id="kobo.1355.1">,
    }
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1356.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1357.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1358.1">handleInput</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1359.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1360.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1361.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1362.1">handleInput</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1363.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1364.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1365.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1366.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1367.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1368.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1369.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1370.1">handleSubmit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1371.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1372.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1373.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1374.1">handleSubmit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1375.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1376.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1377.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1378.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1379.1">)</span></strong></span><span class="koboSpan" id="kobo.1380.1">
  }
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1381.1">Now, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1382.1">AddTodo</span></code><span class="koboSpan" id="kobo.1383.1"> component will show a disabled button as long as no text is entered. </span><span class="koboSpan" id="kobo.1383.2">Once we enter some text and click the button, it will trigger the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1384.1">addTodo</span></code><span class="koboSpan" id="kobo.1385.1"> method from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1386.1">App</span></code><span class="koboSpan" id="kobo.1387.1"> component.</span></p>
<h3 class="heading-3" id="_idParaDest-294"><a id="_idTextAnchor349"/><span class="koboSpan" id="kobo.1388.1">Making the TodoList component dynamic</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1389.1">The next </span><a id="_idIndexMarker699"/><span class="koboSpan" id="kobo.1390.1">component in our todo app is the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1391.1">TodoList</span></code><span class="koboSpan" id="kobo.1392.1"> component. </span><span class="koboSpan" id="kobo.1392.2">Here, we </span><a id="_idIndexMarker700"/><span class="koboSpan" id="kobo.1393.1">just need to get the todo items from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1394.1">StateContext</span></code><span class="koboSpan" id="kobo.1395.1">. </span><span class="koboSpan" id="kobo.1395.2">To do this:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1396.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1397.1">src/TodoList.jsx</span></code><span class="koboSpan" id="kobo.1398.1"> and import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1399.1">StateContext</span></code><span class="koboSpan" id="kobo.1400.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1401.1">import</span></span><span class="koboSpan" id="kobo.1402.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1403.1">StateContext</span></span><span class="koboSpan" id="kobo.1404.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1405.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1406.1">'./StateContext.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1407.1">Then, we set </span><a id="_idIndexMarker701"/><span class="koboSpan" id="kobo.1408.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1409.1">contextType</span></code><span class="koboSpan" id="kobo.1410.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1411.1">StateContext</span></code><span class="koboSpan" id="kobo.1412.1">, which will allow us to use the context via </span><code class="inlineCode"><span class="koboSpan" id="kobo.1413.1">this.context</span></code><span class="koboSpan" id="kobo.1414.1">:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1415.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1416.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1417.1">TodoList</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1418.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1419.1">React.Component</span></span><span class="koboSpan" id="kobo.1420.1"> {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1421.1">static</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1422.1"> contextType = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1423.1">StateContext</span></strong></span>
</code></pre>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.1424.1">With class components, if you want to use multiple contexts, you have to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1425.1">StateContext.Consumer</span></code><span class="koboSpan" id="kobo.1426.1"> component, as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><code class="inlineCode"><span class="koboSpan" id="kobo.1427.1">&lt;StateContext.Consumer&gt;</span></code>
<code class="inlineCode"><span class="koboSpan" id="kobo.1428.1">  {value =&gt; &lt;div&gt;State is: {value}&lt;/div&gt;}</span></code>
<code class="inlineCode"><span class="koboSpan" id="kobo.1429.1">&lt;/StateContext.Consumer&gt;</span></code>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1430.1">As you can imagine, using multiple contexts like this will result in a very deep component tree, and the code will be hard to read and refactor.</span></p>
</div>
</li>
</ol>
<ol>
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.1431.1">Now we </span><a id="_idIndexMarker702"/><span class="koboSpan" id="kobo.1432.1">can get the items from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1433.1">this.context</span></code><span class="koboSpan" id="kobo.1434.1">, instead of statically defining them:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1435.1">render</span></span><span class="koboSpan" id="kobo.1436.1">() {
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1437.1">    const</span></span><span class="koboSpan" id="kobo.1438.1"> items = </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1439.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1440.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1441.1">context</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1442.1">Finally, we pass all props down to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1443.1">TodoItem</span></code><span class="koboSpan" id="kobo.1444.1"> component, so that we can use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1445.1">removeTodo</span></code><span class="koboSpan" id="kobo.1446.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1447.1">toggleTodo</span></code><span class="koboSpan" id="kobo.1448.1"> methods there:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1449.1">return</span></span><span class="koboSpan" id="kobo.1450.1"> items.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1451.1">map</span></span><span class="koboSpan" id="kobo.1452.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1453.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1454.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1455.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1456.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1457.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1458.1">TodoItem</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1459.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1460.1">...item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1461.1">} </span></span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1462.1">{</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1463.1">...this.props</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1464.1">}</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1465.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1466.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1467.1">{item.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1468.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1469.1">
    ))
  }
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1470.1">Now the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1471.1">TodoList</span></code><span class="koboSpan" id="kobo.1472.1"> component gets the items from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1473.1">StateContext</span></code><span class="koboSpan" id="kobo.1474.1"> instead of statically defining them. </span><span class="koboSpan" id="kobo.1474.2">Next, let’s move on to making the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1475.1">TodoItem</span></code><span class="koboSpan" id="kobo.1476.1"> component dynamic.</span></p>
<h3 class="heading-3" id="_idParaDest-295"><a id="_idTextAnchor350"/><span class="koboSpan" id="kobo.1477.1">Making the TodoItem component dynamic</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1478.1">Now that </span><a id="_idIndexMarker703"/><span class="koboSpan" id="kobo.1479.1">we have passed on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1480.1">removeTodo</span></code><span class="koboSpan" id="kobo.1481.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1482.1">toggleTodo</span></code><span class="koboSpan" id="kobo.1483.1"> methods as props to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1484.1">TodoItem</span></code><span class="koboSpan" id="kobo.1485.1"> component, we can implement </span><a id="_idIndexMarker704"/><span class="koboSpan" id="kobo.1486.1">these features there and make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1487.1">TodoItem</span></code><span class="koboSpan" id="kobo.1488.1"> component dynamic too:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1489.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1490.1">src/TodoItem.jsx</span></code><span class="koboSpan" id="kobo.1491.1"> and define h</span><a id="_idTextAnchor351"/><span class="koboSpan" id="kobo.1492.1">andler methods for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1493.1">toggleTodo</span></code><span class="koboSpan" id="kobo.1494.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1495.1">removeTodo</span></code><span class="koboSpan" id="kobo.1496.1"> functions:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1497.1">handleToggle</span></span><span class="koboSpan" id="kobo.1498.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1499.1">const</span></span><span class="koboSpan" id="kobo.1500.1"> { toggleTodo, id } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1501.1">this</span></span><span class="koboSpan" id="kobo.1502.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1503.1">props</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.1504.1">toggleTodo</span></span><span class="koboSpan" id="kobo.1505.1">(id)
  }
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1506.1">handleRemove</span></span><span class="koboSpan" id="kobo.1507.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1508.1">const</span></span><span class="koboSpan" id="kobo.1509.1"> { removeTodo, id } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1510.1">this</span></span><span class="koboSpan" id="kobo.1511.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1512.1">props</span></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.1513.1">removeTodo</span></span><span class="koboSpan" id="kobo.1514.1">(id)
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1515.1">Then, we assign the handler functions to the checkbox and button, respectively:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1516.1">render</span></span><span class="koboSpan" id="kobo.1517.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1518.1">const</span></span><span class="koboSpan" id="kobo.1519.1"> { title, completed } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1520.1">this</span></span><span class="koboSpan" id="kobo.1521.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1522.1">props</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1523.1">return</span></span><span class="koboSpan" id="kobo.1524.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1525.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1526.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1527.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1528.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1529.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1530.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1531.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1532.1">400px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1533.1">', </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1534.1">height:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1535.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1536.1">25px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1537.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1538.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1539.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1540.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1541.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1542.1">'checkbox'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1543.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1544.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1545.1">{completed}</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1546.1">onChange</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1547.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1548.1">{this.handleToggle}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1549.1">        /&gt;</span></span><span class="koboSpan" id="kobo.1550.1">
        {title}
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1551.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1552.1">button</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1553.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1554.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1555.1">'button'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1556.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1557.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1558.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1559.1">float:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1560.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1561.1">right</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1562.1">' }}</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1563.1">onClick</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1564.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1565.1">{this.handleRemove}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1566.1">        &gt;</span></span><span class="koboSpan" id="kobo.1567.1">
          x
        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1568.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1569.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1570.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1571.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1572.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1573.1">&gt;</span></span><span class="koboSpan" id="kobo.1574.1">
    )
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1575.1">Finally, we need </span><a id="_idIndexMarker705"/><span class="koboSpan" id="kobo.1576.1">to re-bind </span><a id="_idIndexMarker706"/><span class="koboSpan" id="kobo.1577.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1578.1">this</span></code><span class="koboSpan" id="kobo.1579.1"> context for the handler methods. </span><span class="koboSpan" id="kobo.1579.2">Define a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1580.1">constructor</span></code><span class="koboSpan" id="kobo.1581.1"> method, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1582.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1583.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1584.1">TodoItem</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1585.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1586.1">React.Component</span></span><span class="koboSpan" id="kobo.1587.1"> {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1588.1">constructor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1589.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1590.1">props</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1591.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1592.1">super</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1593.1">(props)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1594.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1595.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1596.1">handleToggle</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1597.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1598.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1599.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1600.1">handleToggle</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1601.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1602.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1603.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1604.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1605.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1606.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1607.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1608.1">handleRemove</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1609.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1610.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1611.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1612.1">handleRemove</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1613.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1614.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1615.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1616.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1617.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1618.1">  }</span></strong></span>
</code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1619.1">Now the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1620.1">TodoItem</span></code><span class="koboSpan" id="kobo.1621.1"> component properly triggers the toggle and remove methods. </span><span class="koboSpan" id="kobo.1621.2">Next, we are going to make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1622.1">TodoFilter</span></code><span class="koboSpan" id="kobo.1623.1"> component dynamic.</span></p>
<h3 class="heading-3" id="_idParaDest-296"><a id="_idTextAnchor352"/><span class="koboSpan" id="kobo.1624.1">Making the TodoFilter component dynamic</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1625.1">Lastly, we are </span><a id="_idIndexMarker707"/><span class="koboSpan" id="kobo.1626.1">going to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1627.1">filterTodos</span></code><span class="koboSpan" id="kobo.1628.1"> method to </span><a id="_idIndexMarker708"/><span class="koboSpan" id="kobo.1629.1">dynamically filter our todo item list:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1630.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1631.1">src/TodoFilter.jsx</span></code><span class="koboSpan" id="kobo.1632.1"> and, in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1633.1">TodoFilter</span></code><span class="koboSpan" id="kobo.1634.1"> class component, pass all props down to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1635.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.1636.1"> component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1637.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1638.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1639.1">TodoFilter</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1640.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1641.1">React.Component</span></span><span class="koboSpan" id="kobo.1642.1"> {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1643.1">render</span></span><span class="koboSpan" id="kobo.1644.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1645.1">return</span></span><span class="koboSpan" id="kobo.1646.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1647.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1648.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1649.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1650.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1651.1">TodoFilterItem</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1652.1">{</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1653.1">...this.props</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1654.1">}</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1655.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1656.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1657.1">'all'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1658.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1659.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1660.1">TodoFilterItem</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1661.1">{</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1662.1">...this.props</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1663.1">}</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1664.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1665.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1666.1">'active'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1667.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1668.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1669.1">TodoFilterItem</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1670.1">{</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1671.1">...this.props</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1672.1">}</span></strong></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1673.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1674.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1675.1">'completed'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1676.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1677.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1678.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1679.1">&gt;</span></span><span class="koboSpan" id="kobo.1680.1">
    )
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1681.1">In the </span><a id="_idIndexMarker709"/><span class="koboSpan" id="kobo.1682.1">same file, add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1683.1">handleFilter</span></code><span class="koboSpan" id="kobo.1684.1"> method </span><a id="_idIndexMarker710"/><span class="koboSpan" id="kobo.1685.1">to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1686.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.1687.1"> class component:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1688.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1689.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1690.1">TodoFilterItem</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1691.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1692.1">React.Component</span></span><span class="koboSpan" id="kobo.1693.1"> {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1694.1">handleFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1695.1">() {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1696.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1697.1"> { name, filterTodos } = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1698.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1699.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1700.1">props</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1701.1">filterTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1702.1">(name)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1703.1">  }</span></strong></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1704.1">Then, get the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1705.1">filter</span></code><span class="koboSpan" id="kobo.1706.1"> prop, disable the button with the currently selected filter, and call </span><code class="inlineCode"><span class="koboSpan" id="kobo.1707.1">this.handleFilter</span></code><span class="koboSpan" id="kobo.1708.1"> when the button is clicked:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.1709.1">render</span></span><span class="koboSpan" id="kobo.1710.1">() {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1711.1">const</span></span><span class="koboSpan" id="kobo.1712.1"> { name, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1713.1">filter = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1714.1">'all'</span></strong></span><span class="koboSpan" id="kobo.1715.1"> } = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1716.1">this</span></span><span class="koboSpan" id="kobo.1717.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1718.1">props</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1719.1">return</span></span><span class="koboSpan" id="kobo.1720.1"> (
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1721.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1722.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1723.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1724.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1725.1">'button'</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1726.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1727.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1728.1">{filter</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1729.1"> === </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1730.1">name}</span></strong></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1731.1">onClick</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1732.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1733.1">{this.handleFilter}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1734.1">&gt;</span></span><span class="koboSpan" id="kobo.1735.1">
        {name}
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1736.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1737.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1738.1">&gt;</span></span><span class="koboSpan" id="kobo.1739.1">
    )
  }
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1740.1">Finally, we </span><a id="_idIndexMarker711"/><span class="koboSpan" id="kobo.1741.1">define a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1742.1">constructor</span></code><span class="koboSpan" id="kobo.1743.1"> method </span><a id="_idIndexMarker712"/><span class="koboSpan" id="kobo.1744.1">for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1745.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.1746.1"> class component and re-bind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1747.1">this</span></code><span class="koboSpan" id="kobo.1748.1"> context of the handler function:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1749.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1750.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1751.1">TodoFilterItem</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1752.1">extends</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1753.1">React.Component</span></span><span class="koboSpan" id="kobo.1754.1"> {
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1755.1">constructor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1756.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1757.1">props</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1758.1">) {</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1759.1">super</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1760.1">(props)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1761.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1762.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1763.1">handleFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1764.1"> = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1765.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1766.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1767.1">handleFilter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1768.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1769.1">bind</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1770.1">(</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1771.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1772.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1773.1">  }</span></strong></span>
</code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1774.1">Now the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1775.1">TodoFilter</span></code><span class="koboSpan" id="kobo.1776.1"> component triggers the filter handler function to change the filter. </span><span class="koboSpan" id="kobo.1776.2">Our whole app is dynamic now, and we can use all of its functionalities!</span></p>
<h3 class="heading-3" id="_idParaDest-297"><a id="_idTextAnchor353"/><span class="koboSpan" id="kobo.1777.1">Starting the app</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.1778.1">At this </span><a id="_idIndexMarker713"/><span class="koboSpan" id="kobo.1779.1">point, we have finished making all components dynamic and can start the app, as follows:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1780.1">$ npm run dev
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1781.1">Open the URL in a browser, try adding/toggling/removing/filtering todos, and you will see that everything works as expected!</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1782.1"><img alt="Figure 13.4 – Showing only completed items in our todo app" src="../Images/B31327_13_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1783.1">Figure 13.4 – Showing only completed items in our todo app</span></p>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.1784.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.1785.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1786.1">Chapter13/Chapter13_1</span></code><span class="koboSpan" id="kobo.1787.1"> folder. </span><span class="koboSpan" id="kobo.1787.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1788.1">README.md</span></code><span class="koboSpan" id="kobo.1789.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.1790.1">Now that our </span><a id="_idIndexMarker714"/><span class="koboSpan" id="kobo.1791.1">app works well with React class components, let’s use it to learn how to migrate an existing app to React Hooks.</span></p>
<h1 class="heading-1" id="_idParaDest-298"><a id="_idTextAnchor354"/><span class="koboSpan" id="kobo.1792.1">Migrating from React class components</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1793.1">After setting </span><a id="_idIndexMarker715"/><span class="koboSpan" id="kobo.1794.1">up our example project with React class components, we are now going to migrate this project to React Hooks. </span><span class="koboSpan" id="kobo.1794.2">We are going to show how to migrate side effects, such as fetching todos when the component mounts, as well as migrating the state management to a Hook based solution.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1795.1">In this section, we are going to migrate the following components:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1796.1">TodoItem</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1797.1">TodoList</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1798.1">TodoFilterItem</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1799.1">TodoFilter</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1800.1">AddTodo</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1801.1">App</span></code></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.1802.1">Before we </span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.1803.1">do that, please create a new folder for the migrated project, as follows:</span></p>
<ol>
<li class="numberedList" value="1"><a id="_idTextAnchor355"/><span class="koboSpan" id="kobo.1804.1">Copy the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1805.1">Chapter13_1</span></code><span class="koboSpan" id="kobo.1806.1"> folder to a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1807.1">Chapter13_2</span></code><span class="koboSpan" id="kobo.1808.1"> folder, as follows:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.1809.1">$ cp -R Chapter13_1 Chapter13_2
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1810.1">Open the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.1811.1">Chapter13_2</span></code><span class="koboSpan" id="kobo.1812.1"> folder in VS Code.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1813.1">Now, we can get started migrating the components.</span></p>
<h2 class="heading-2" id="_idParaDest-299"><a id="_idTextAnchor356"/><span class="koboSpan" id="kobo.1814.1">Migrating the TodoItem component</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1815.1">One of the simplest components to migrate is the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1816.1">TodoItem</span></code><span class="koboSpan" id="kobo.1817.1"> component. </span><span class="koboSpan" id="kobo.1817.2">It does not use any state or </span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.1818.1">side effects, so we can simply </span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.1819.1">convert it to a function component.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1820.1">Let’s start migrating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1821.1">TodoItem</span></code><span class="koboSpan" id="kobo.1822.1"> component now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1823.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.1824.1">src/TodoItem.jsx</span></code><span class="koboSpan" id="kobo.1825.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.1826.1">delete</span></em><span class="koboSpan" id="kobo.1827.1"> all of the existing code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1828.1">Now, we define a function compon</span><a id="_idTextAnchor357"/><span class="koboSpan" id="kobo.1829.1">ent which accepts </span><code class="inlineCode"><span class="koboSpan" id="kobo.1830.1">title</span></code><span class="koboSpan" id="kobo.1831.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1832.1">completed</span></code><span class="koboSpan" id="kobo.1833.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1834.1">id</span></code><span class="koboSpan" id="kobo.1835.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1836.1">toggleTodo</span></code><span class="koboSpan" id="kobo.1837.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1838.1">removeTodo</span></code><span class="koboSpan" id="kobo.1839.1"> props:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1840.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1841.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1842.1">TodoItem</span></span><span class="koboSpan" id="kobo.1843.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1844.1">{ title, completed, id, toggleTodo,</span></span>
<span class="hljs-keyword"> </span><span class="hljs-params"><span class="koboSpan" id="kobo.1845.1">removeTodo }</span></span><span class="koboSpan" id="kobo.1846.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1847.1">Then, we define two handler functions to toggle and remove todo items:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1848.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1849.1">handleToggle</span></span><span class="koboSpan" id="kobo.1850.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1851.1">toggleTodo</span></span><span class="koboSpan" id="kobo.1852.1">(id)
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1853.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1854.1">handleRemove</span></span><span class="koboSpan" id="kobo.1855.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1856.1">removeTodo</span></span><span class="koboSpan" id="kobo.1857.1">(id)
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1858.1">Finally, we </span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.1859.1">render the </span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.1860.1">component:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1861.1">return</span></span><span class="koboSpan" id="kobo.1862.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1863.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1864.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1865.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1866.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1867.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1868.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1869.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1870.1">400px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1871.1">', </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1872.1">height:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1873.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1874.1">25px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1875.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1876.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1877.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1878.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1879.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1880.1">'checkbox'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1881.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1882.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1883.1">{completed}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1884.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1885.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1886.1">{handleToggle}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1887.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1888.1">
      {title}
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1889.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1890.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1891.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1892.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1893.1">'button'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1894.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1895.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1896.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1897.1">float:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1898.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1899.1">right</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1900.1">' }}  </span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1901.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1902.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1903.1">{handleRemove}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1904.1">&gt;</span></span><span class="koboSpan" id="kobo.1905.1">
        x
      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1906.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1907.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1908.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1909.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1910.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1911.1">&gt;</span></span><span class="koboSpan" id="kobo.1912.1">
  )
}
</span></code></pre>
</li>
</ol>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.1913.1">Try to keep your function components small, and combine them by creating new function components that use other function components (this pattern is called </span><strong class="keyWord"><span class="koboSpan" id="kobo.1914.1">composition</span></strong><span class="koboSpan" id="kobo.1915.1">). </span><span class="koboSpan" id="kobo.1915.2">It is always a good idea to have many small components, rather than one large component. </span><span class="koboSpan" id="kobo.1915.3">They are much easier to maintain, reuse, and refactor.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.1916.1">As you can see, function components do not require us to re-bind </span><code class="inlineCode"><span class="koboSpan" id="kobo.1917.1">this</span></code><span class="koboSpan" id="kobo.1918.1">, or to define constructors at all. </span><span class="koboSpan" id="kobo.1918.2">Also, we do not need to destructure from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1919.1">this.props</span></code><span class="koboSpan" id="kobo.1920.1"> multiple times in multiple places. </span><span class="koboSpan" id="kobo.1920.2">We </span><a id="_idIndexMarker721"/><span class="koboSpan" id="kobo.1921.1">can simply destructure all props </span><a id="_idIndexMarker722"/><span class="koboSpan" id="kobo.1922.1">in the function definition.</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.1923.1">If you run the app now, you will see that it still works. </span><span class="koboSpan" id="kobo.1923.2">React actually lets you combine function components with class components, so there is no need to migrate the whole codebase at once, you can migrate certain parts at a time. </span><span class="koboSpan" id="kobo.1923.3">React class components can even render function components that use Hooks. </span><span class="koboSpan" id="kobo.1923.4">The only limitation is that we cannot use Hooks in class components. </span><span class="koboSpan" id="kobo.1923.5">Therefore, we need to migrate a whole component at a time.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.1924.1">Now, let’s move on to migrating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1925.1">TodoList</span></code><span class="koboSpan" id="kobo.1926.1"> component.</span></p>
<h2 class="heading-2" id="_idParaDest-300"><a id="_idTextAnchor358"/><span class="koboSpan" id="kobo.1927.1">Migrating the TodoList component</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1928.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1929.1">TodoList</span></code><span class="koboSpan" id="kobo.1930.1"> component </span><a id="_idIndexMarker723"/><span class="koboSpan" id="kobo.1931.1">renders multiple </span><code class="inlineCode"><span class="koboSpan" id="kobo.1932.1">TodoItem</span></code><span class="koboSpan" id="kobo.1933.1"> components. </span><span class="koboSpan" id="kobo.1933.2">Here, we </span><a id="_idIndexMarker724"/><span class="koboSpan" id="kobo.1934.1">used a context, which means that we can now use a Context Hook.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1935.1">Let’s migrate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1936.1">TodoList</span></code><span class="koboSpan" id="kobo.1937.1"> component now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1938.1">Ed</span><a id="_idTextAnchor359"/><span class="koboSpan" id="kobo.1939.1">it </span><code class="inlineCode"><span class="koboSpan" id="kobo.1940.1">src/TodoList.jsx</span></code><span class="koboSpan" id="kobo.1941.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.1942.1">delete</span></em><span class="koboSpan" id="kobo.1943.1"> all of the existing code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1944.1">Import the following:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1945.1">import</span></span><span class="koboSpan" id="kobo.1946.1"> { useContext } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1947.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1948.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1949.1">import</span></span><span class="koboSpan" id="kobo.1950.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1951.1">StateContext</span></span><span class="koboSpan" id="kobo.1952.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1953.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1954.1">'./StateContext.js'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1955.1">import</span></span><span class="koboSpan" id="kobo.1956.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1957.1">TodoItem</span></span><span class="koboSpan" id="kobo.1958.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1959.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1960.1">'./TodoItem.jsx'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1961.1">Define a function component. </span><span class="koboSpan" id="kobo.1961.2">In this case, we do not destructure the props, but simply get the whole object:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1962.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1963.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1964.1">TodoList</span></span><span class="koboSpan" id="kobo.1965.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1966.1">props</span></span><span class="koboSpan" id="kobo.1967.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1968.1">Now, define the Context Hook:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1969.1">const</span></span><span class="koboSpan" id="kobo.1970.1"> items = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1971.1">useContext</span></span><span class="koboSpan" id="kobo.1972.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1973.1">StateContext</span></span><span class="koboSpan" id="kobo.1974.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1975.1">Finally, return the list of rendered items:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1976.1">return</span></span><span class="koboSpan" id="kobo.1977.1"> items.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1978.1">map</span></span><span class="koboSpan" id="kobo.1979.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1980.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1981.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1982.1">) =&gt;</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.1983.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1984.1">TodoItem</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1985.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1986.1">...item</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1987.1">} {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1988.1">...props</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1989.1">}</span></span>
<span class="hljs-keyword"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1990.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1991.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1992.1">{item.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1993.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1994.1">)
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1995.1">As we can see, using </span><a id="_idIndexMarker725"/><span class="koboSpan" id="kobo.1996.1">contexts with Hooks is </span><a id="_idIndexMarker726"/><span class="koboSpan" id="kobo.1997.1">much more straightforward. </span><span class="koboSpan" id="kobo.1997.2">We can simply call a function (the Context Hook), and use the return value. </span><span class="koboSpan" id="kobo.1997.3">No magical assignment of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1998.1">this.context</span></code><span class="koboSpan" id="kobo.1999.1">!</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2000.1">Next, let’s migrate the TodoFilter component.</span></p>
<h2 class="heading-2" id="_idParaDest-301"><a id="_idTextAnchor360"/><span class="koboSpan" id="kobo.2001.1">Migrating the TodoFilter component</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2002.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.2003.1">TodoFilter</span></code><span class="koboSpan" id="kobo.2004.1"> component </span><a id="_idIndexMarker727"/><span class="koboSpan" id="kobo.2005.1">does not use any Hooks. </span><span class="koboSpan" id="kobo.2005.2">However, we are </span><a id="_idIndexMarker728"/><span class="koboSpan" id="kobo.2006.1">going to replace the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2007.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.2008.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2009.1">TodoFilter</span></code><span class="koboSpan" id="kobo.2010.1"> class components with two function components – one for </span><code class="inlineCode"><span class="koboSpan" id="kobo.2011.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.2012.1">, and one for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2013.1">TodoFilter</span></code><span class="koboSpan" id="kobo.2014.1"> component:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2015.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.2016.1">src/TodoFilter.jsx</span></code><span class="koboSpan" id="kobo.2017.1"> and</span><a id="_idTextAnchor361"/> <em class="italic"><span class="koboSpan" id="kobo.2018.1">delete</span></em><span class="koboSpan" id="kobo.2019.1"> all of the existing code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2020.1">Define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2021.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.2022.1"> component, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2023.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2024.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2025.1">TodoFilterItem</span></span><span class="koboSpan" id="kobo.2026.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2027.1">{ name, filterTodos, filter = </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2028.1">'all'</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2029.1"> }</span></span><span class="koboSpan" id="kobo.2030.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2031.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2032.1">handleFilter</span></span><span class="koboSpan" id="kobo.2033.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2034.1">filterTodos</span></span><span class="koboSpan" id="kobo.2035.1">(name)
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2036.1">return</span></span><span class="koboSpan" id="kobo.2037.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2038.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2039.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2040.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2041.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2042.1">'button'</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2043.1">disabled</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2044.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2045.1">{filter</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2046.1"> === </span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2047.1">name}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2048.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2049.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2050.1">{handleFilter}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2051.1">&gt;</span></span><span class="koboSpan" id="kobo.2052.1">
      {name}
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2053.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2054.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2055.1">&gt;</span></span><span class="koboSpan" id="kobo.2056.1">
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2057.1">Next, define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2058.1">TodoFilter</span></code><span class="koboSpan" id="kobo.2059.1"> component, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2060.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2061.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2062.1">TodoFilter</span></span><span class="koboSpan" id="kobo.2063.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2064.1">props</span></span><span class="koboSpan" id="kobo.2065.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2066.1">return</span></span><span class="koboSpan" id="kobo.2067.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2068.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2069.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2070.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2071.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2072.1">TodoFilterItem</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2073.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2074.1">...props</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2075.1">} </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2076.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2077.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2078.1">'all'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2079.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2080.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2081.1">TodoFilterItem</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2082.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2083.1">...props</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2084.1">} </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2085.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2086.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2087.1">'active'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2088.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2089.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2090.1">TodoFilterItem</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2091.1"> {</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2092.1">...props</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2093.1">} </span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2094.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2095.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2096.1">'completed'</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2097.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2098.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2099.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2100.1">&gt;</span></span><span class="koboSpan" id="kobo.2101.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2102.1">As we </span><a id="_idIndexMarker729"/><span class="koboSpan" id="kobo.2103.1">can see, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2104.1">TodoFilter</span></code><span class="koboSpan" id="kobo.2105.1"> component </span><a id="_idIndexMarker730"/><span class="koboSpan" id="kobo.2106.1">statically renders three </span><code class="inlineCode"><span class="koboSpan" id="kobo.2107.1">TodoFilterItem</span></code><span class="koboSpan" id="kobo.2108.1"> components, which are used to toggle the filter between showing </span><code class="inlineCode"><span class="koboSpan" id="kobo.2109.1">all</span></code><span class="koboSpan" id="kobo.2110.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.2111.1">active</span></code><span class="koboSpan" id="kobo.2112.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.2113.1">completed</span></code><span class="koboSpan" id="kobo.2114.1"> todo items. </span><span class="koboSpan" id="kobo.2114.2">Next, let’s migrate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2115.1">AddTodo</span></code><span class="koboSpan" id="kobo.2116.1"> component.</span></p>
<h2 class="heading-2" id="_idParaDest-302"><a id="_idTextAnchor362"/><span class="koboSpan" id="kobo.2117.1">Migrating the AddTodo component</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2118.1">For the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2119.1">AddTodo</span></code><span class="koboSpan" id="kobo.2120.1"> component, we </span><a id="_idIndexMarker731"/><span class="koboSpan" id="kobo.2121.1">are going to use a State Hook </span><a id="_idIndexMarker732"/><span class="koboSpan" id="kobo.2122.1">to handle the input field state.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2123.1">Let’s migrate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2124.1">AddTodo</span></code><span class="koboSpan" id="kobo.2125.1"> component now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2126.1">E</span><a id="_idTextAnchor363"/><span class="koboSpan" id="kobo.2127.1">dit </span><code class="inlineCode"><span class="koboSpan" id="kobo.2128.1">src/AddTodo.jsx</span></code><span class="koboSpan" id="kobo.2129.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.2130.1">delete</span></em><span class="koboSpan" id="kobo.2131.1"> all of the existing code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2132.1">Import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2133.1">useState</span></code><span class="koboSpan" id="kobo.2134.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2135.1">import</span></span><span class="koboSpan" id="kobo.2136.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2137.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2138.1">'react'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2139.1">Define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2140.1">AddTodo</span></code><span class="koboSpan" id="kobo.2141.1"> component, which accepts an </span><code class="inlineCode"><span class="koboSpan" id="kobo.2142.1">addTodo</span></code><span class="koboSpan" id="kobo.2143.1"> function as prop:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2144.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2145.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2146.1">AddTodo</span></span><span class="koboSpan" id="kobo.2147.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2148.1">{ addTodo }</span></span><span class="koboSpan" id="kobo.2149.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2150.1">Next, define </span><a id="_idIndexMarker733"/><span class="koboSpan" id="kobo.2151.1">a State Hook </span><a id="_idIndexMarker734"/><span class="koboSpan" id="kobo.2152.1">for the input field state:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2153.1">const</span></span><span class="koboSpan" id="kobo.2154.1"> [input, setInput] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2155.1">useState</span></span><span class="koboSpan" id="kobo.2156.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2157.1">''</span></span><span class="koboSpan" id="kobo.2158.1">)
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2159.1">Now, define the handler functions:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2160.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2161.1">handleInput</span></span><span class="koboSpan" id="kobo.2162.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2163.1">e</span></span><span class="koboSpan" id="kobo.2164.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2165.1">setInput</span></span><span class="koboSpan" id="kobo.2166.1">(e.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2167.1">target</span></span><span class="koboSpan" id="kobo.2168.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2169.1">value</span></span><span class="koboSpan" id="kobo.2170.1">)
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2171.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2172.1">handleSubmit</span></span><span class="koboSpan" id="kobo.2173.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2174.1">e</span></span><span class="koboSpan" id="kobo.2175.1">) {
    e.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2176.1">preventDefault</span></span><span class="koboSpan" id="kobo.2177.1">()
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2178.1">if</span></span><span class="koboSpan" id="kobo.2179.1"> (input) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2180.1">addTodo</span></span><span class="koboSpan" id="kobo.2181.1">(input)
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2182.1">setInput</span></span><span class="koboSpan" id="kobo.2183.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2184.1">''</span></span><span class="koboSpan" id="kobo.2185.1">)
    }
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2186.1">Finally, render the input field and button:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2187.1">return</span></span><span class="koboSpan" id="kobo.2188.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2189.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2190.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2191.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2192.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2193.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2194.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2195.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2196.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2197.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2198.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2199.1">'text'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2200.1">placeholder</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2201.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2202.1">'enter new task...'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2203.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2204.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2205.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2206.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2207.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2208.1">350px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2209.1">' }}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2210.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2211.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2212.1">{input}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2213.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2214.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2215.1">{handleInput}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2216.1">      /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2217.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2218.1">input</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2219.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2220.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2221.1">'submit'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2222.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2223.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2224.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2225.1">float:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2226.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2227.1">right</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2228.1">' }}</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2229.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2230.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2231.1">'add'</span></span>
<span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2232.1">disabled</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2233.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2234.1">{!input}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2235.1">      /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2236.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2237.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2238.1">&gt;</span></span><span class="koboSpan" id="kobo.2239.1">
  )
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2240.1">As we can see, using the State Hook makes state management much simpler. </span><span class="koboSpan" id="kobo.2240.2">We can define a separate value </span><a id="_idIndexMarker735"/><span class="koboSpan" id="kobo.2241.1">and setter function for each state value, instead </span><a id="_idIndexMarker736"/><span class="koboSpan" id="kobo.2242.1">of having to deal with a single </span><code class="inlineCode"><span class="koboSpan" id="kobo.2243.1">state</span></code><span class="koboSpan" id="kobo.2244.1"> object. </span><span class="koboSpan" id="kobo.2244.2">Additionally, we do not need to destructure from </span><code class="inlineCode"><span class="koboSpan" id="kobo.2245.1">this.state</span></code><span class="koboSpan" id="kobo.2246.1"> all the time. </span><span class="koboSpan" id="kobo.2246.2">As a result, our code is much more clean and concise.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2247.1">Now, let’s move on to migrating the App component.</span></p>
<h2 class="heading-2" id="_idParaDest-303"><a id="_idTextAnchor364"/><span class="koboSpan" id="kobo.2248.1">Migrating the state management and App component</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2249.1">At last, all that is left to do is migrate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2250.1">App</span></code><span class="koboSpan" id="kobo.2251.1"> component. </span><span class="koboSpan" id="kobo.2251.2">Then, our whole todo app will be migrated to </span><a id="_idIndexMarker737"/><span class="koboSpan" id="kobo.2252.1">React Hooks. </span><span class="koboSpan" id="kobo.2252.2">Here, we are </span><a id="_idIndexMarker738"/><span class="koboSpan" id="kobo.2253.1">going to use a Reducer Hook to manage </span><a id="_idIndexMarker739"/><span class="koboSpan" id="kobo.2254.1">the state, an Effect Hook to fetch todos when the </span><a id="_idIndexMarker740"/><span class="koboSpan" id="kobo.2255.1">component mounts, and a Memo Hook to store the filtered todos list.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2256.1">In this section we are going to:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2257.1">Define the actions</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2258.1">Define the reducers</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2259.1">Migrate the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2260.1">App</span></code><span class="koboSpan" id="kobo.2261.1"> component</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.2262.1">Let’s get started.</span></p>
<h3 class="heading-3" id="_idParaDest-304"><a id="_idTextAnchor365"/><span class="koboSpan" id="kobo.2263.1">Defining the actions</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.2264.1">Our app is </span><a id="_idIndexMarker741"/><span class="koboSpan" id="kobo.2265.1">going to accept five actions, let’s first take a moment to think about what they will look like:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.2266.1">LOAD_TODOS</span></code><span class="koboSpan" id="kobo.2267.1">: To load a new list of todo items
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2268.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2269.1">type</span></span><span class="koboSpan" id="kobo.2270.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2271.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2272.1">LOAD_TODOS'</span></span><span class="koboSpan" id="kobo.2273.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2274.1">todos</span></span><span class="koboSpan" id="kobo.2275.1">: [] }
</span></code></pre>
</li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.2276.1">ADD_TODO</span></code><span class="koboSpan" id="kobo.2277.1">: To insert a new todo item
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2278.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2279.1">type</span></span><span class="koboSpan" id="kobo.2280.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2281.1">'ADD_TODO'</span></span><span class="koboSpan" id="kobo.2282.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2283.1">title</span></span><span class="koboSpan" id="kobo.2284.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2285.1">'Test todo app'</span></span><span class="koboSpan" id="kobo.2286.1"> }
</span></code></pre>
</li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.2287.1">TOGGLE_TODO</span></code><span class="koboSpan" id="kobo.2288.1">: To toggle the completed value of a todo item
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2289.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2290.1">type</span></span><span class="koboSpan" id="kobo.2291.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2292.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2293.1">TOGGLE_TODO'</span></span><span class="koboSpan" id="kobo.2294.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2295.1">id</span></span><span class="koboSpan" id="kobo.2296.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2297.1">'xxx'</span></span><span class="koboSpan" id="kobo.2298.1"> }
</span></code></pre>
</li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.2299.1">REMOVE_TODO</span></code><span class="koboSpan" id="kobo.2300.1">: To remove a todo item
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2301.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2302.1">type</span></span><span class="koboSpan" id="kobo.2303.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2304.1">'REMOVE_TODO'</span></span><span class="koboSpan" id="kobo.2305.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2306.1">id</span></span><span class="koboSpan" id="kobo.2307.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2308.1">'xxx'</span></span><span class="koboSpan" id="kobo.2309.1"> }
</span></code></pre>
</li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.2310.1">FILTER_TODOS</span></code><span class="koboSpan" id="kobo.2311.1">: To filter todo items
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.2312.1">{ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2313.1">type</span></span><span class="koboSpan" id="kobo.2314.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2315.1">'FILTER_TODOS'</span></span><span class="koboSpan" id="kobo.2316.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2317.1">filter</span></span><span class="koboSpan" id="kobo.2318.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2319.1">'completed'</span></span><span class="koboSpan" id="kobo.2320.1"> }
</span></code></pre>
</li>
</ul>
<h3 class="heading-3" id="_idParaDest-305"><a id="_idTextAnchor366"/><span class="koboSpan" id="kobo.2321.1">Defining the reducers</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.2322.1">Now we are </span><a id="_idIndexMarker742"/><span class="koboSpan" id="kobo.2323.1">going to define the reducers for our state. </span><span class="koboSpan" id="kobo.2323.2">We are </span><a id="_idIndexMarker743"/><span class="koboSpan" id="kobo.2324.1">going to need one app reducer and two sub-reducers: one for todos and one for the filter.</span></p>
<h4 class="heading-4"><span class="koboSpan" id="kobo.2325.1">Defining the filter reducer</span></h4>
<p class="normal"><span class="koboSpan" id="kobo.2326.1">We are </span><a id="_idIndexMarker744"/><span class="koboSpan" id="kobo.2327.1">going to start by defining the reducer for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2328.1">filter</span></code><span class="koboSpan" id="kobo.2329.1"> value:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2330.1">Create a new </span><code class="inlineCode"><span class="koboSpan" id="kobo.2331.1">src/reducers.js</span></code><span class="koboSpan" id="kobo.2332.1"> file.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2333.1">In this file, define a </span><a id="_idIndexMarker745"/><span class="koboSpan" id="kobo.2334.1">function for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2335.1">filterReducer</span></code><span class="koboSpan" id="kobo.2336.1">, which is going to handle the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2337.1">FILTER_TODOS</span></code><span class="koboSpan" id="kobo.2338.1"> action and set the filter value accordingly:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2339.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2340.1">filterReducer</span></span><span class="koboSpan" id="kobo.2341.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2342.1">state, action</span></span><span class="koboSpan" id="kobo.2343.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2344.1">if</span></span><span class="koboSpan" id="kobo.2345.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2346.1">type</span></span><span class="koboSpan" id="kobo.2347.1"> === </span><span class="hljs-string"><span class="koboSpan" id="kobo.2348.1">'FILTER_TODOS'</span></span><span class="koboSpan" id="kobo.2349.1">) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2350.1">return</span></span><span class="koboSpan" id="kobo.2351.1"> action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2352.1">filter</span></span><span class="koboSpan" id="kobo.2353.1">
    }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2354.1">return</span></span><span class="koboSpan" id="kobo.2355.1"> state
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2356.1">Next, let’s move on to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2357.1">todosReducer</span></code><span class="koboSpan" id="kobo.2358.1"> function.</span></p>
<h4 class="heading-4"><span class="koboSpan" id="kobo.2359.1">Defining the todos reducer</span></h4>
<p class="normal"><span class="koboSpan" id="kobo.2360.1">Now, we are </span><a id="_idIndexMarker746"/><span class="koboSpan" id="kobo.2361.1">going to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2362.1">todosReducer</span></code><span class="koboSpan" id="kobo.2363.1"> function for the todo items. </span><span class="koboSpan" id="kobo.2363.2">Here, we </span><a id="_idIndexMarker747"/><span class="koboSpan" id="kobo.2364.1">are going to handle the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2365.1">LOAD_TODOS</span></code><span class="koboSpan" id="kobo.2366.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.2367.1">ADD_TODO</span></code><span class="koboSpan" id="kobo.2368.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.2369.1">TOGGLE_TODO</span></code><span class="koboSpan" id="kobo.2370.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2371.1">REMOVE_</span><a id="_idTextAnchor367"/><span class="koboSpan" id="kobo.2372.1">TODO</span></code><span class="koboSpan" id="kobo.2373.1"> actions:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2374.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.2375.1">src/reducers.js</span></code><span class="koboSpan" id="kobo.2376.1"> and define a new function, which is going to handle these actions:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2377.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2378.1">todosReducer</span></span><span class="koboSpan" id="kobo.2379.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2380.1">state, action</span></span><span class="koboSpan" id="kobo.2381.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2382.1">switch</span></span><span class="koboSpan" id="kobo.2383.1"> (action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2384.1">type</span></span><span class="koboSpan" id="kobo.2385.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2386.1">For the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2387.1">LOAD_TODOS</span></code><span class="koboSpan" id="kobo.2388.1"> action, we simply replace the current state with the new </span><code class="inlineCode"><span class="koboSpan" id="kobo.2389.1">todos</span></code><span class="koboSpan" id="kobo.2390.1"> array:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2391.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2392.1">'LOAD_TODOS'</span></span><span class="koboSpan" id="kobo.2393.1">:
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2394.1">return</span></span><span class="koboSpan" id="kobo.2395.1"> action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2396.1">todos</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2397.1">For the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2398.1">ADD_TODO</span></code><span class="koboSpan" id="kobo.2399.1"> action, we are going to insert a new item at the beginning of the current state array:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2400.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2401.1">'ADD_TODO'</span></span><span class="koboSpan" id="kobo.2402.1">: {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2403.1">const</span></span><span class="koboSpan" id="kobo.2404.1"> newTodo = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2405.1">id</span></span><span class="koboSpan" id="kobo.2406.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2407.1">Date</span></span><span class="koboSpan" id="kobo.2408.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2409.1">now</span></span><span class="koboSpan" id="kobo.2410.1">(), </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2411.1">title</span></span><span class="koboSpan" id="kobo.2412.1">: action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2413.1">title</span></span><span class="koboSpan" id="kobo.2414.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2415.1">completed</span></span><span class="koboSpan" id="kobo.2416.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2417.1">false</span></span><span class="koboSpan" id="kobo.2418.1"> }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2419.1">return</span></span><span class="koboSpan" id="kobo.2420.1"> [newTodo, ...state]
    }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2421.1">For the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2422.1">TOGGLE_TODO</span></code><span class="koboSpan" id="kobo.2423.1"> action, we </span><a id="_idIndexMarker748"/><span class="koboSpan" id="kobo.2424.1">are going to use </span><a id="_idIndexMarker749"/><span class="koboSpan" id="kobo.2425.1">the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2426.1">map</span></code><span class="koboSpan" id="kobo.2427.1"> function to update a single todo item:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2428.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2429.1">'TOGGLE_TODO'</span></span><span class="koboSpan" id="kobo.2430.1">: {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2431.1">return</span></span><span class="koboSpan" id="kobo.2432.1"> state.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2433.1">map</span></span><span class="koboSpan" id="kobo.2434.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2435.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2436.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2437.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2438.1"> {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2439.1">if</span></span><span class="koboSpan" id="kobo.2440.1"> (item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2441.1">id</span></span><span class="koboSpan" id="kobo.2442.1"> === action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2443.1">id</span></span><span class="koboSpan" id="kobo.2444.1">) {
          </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2445.1">return</span></span><span class="koboSpan" id="kobo.2446.1"> { ...item, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2447.1">completed</span></span><span class="koboSpan" id="kobo.2448.1">: !item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2449.1">completed</span></span><span class="koboSpan" id="kobo.2450.1"> }
        }
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2451.1">return</span></span><span class="koboSpan" id="kobo.2452.1"> item
      })
    }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2453.1">For the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2454.1">REMOVE_TODO</span></code><span class="koboSpan" id="kobo.2455.1"> action, we are going to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2456.1">filter</span></code><span class="koboSpan" id="kobo.2457.1"> function to remove a single todo item:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2458.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2459.1">'REMOVE_TODO'</span></span><span class="koboSpan" id="kobo.2460.1">: {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2461.1">return</span></span><span class="koboSpan" id="kobo.2462.1"> state.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2463.1">filter</span></span><span class="koboSpan" id="kobo.2464.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2465.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2466.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2467.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2468.1"> item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2469.1">id</span></span><span class="koboSpan" id="kobo.2470.1"> !== action.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2471.1">id</span></span><span class="koboSpan" id="kobo.2472.1">)
    }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2473.1">By default (for all other actions), we simply return the current state:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-attr"><span class="koboSpan" id="kobo.2474.1">default</span></span><span class="koboSpan" id="kobo.2475.1">:
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2476.1">return</span></span><span class="koboSpan" id="kobo.2477.1"> state
  }
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2478.1">Now we just need to define the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2479.1">appReducer</span></code><span class="koboSpan" id="kobo.2480.1">, which will combine the other two reducers into one.</span></p>
<h4 class="heading-4"><span class="koboSpan" id="kobo.2481.1">Defining the app reducer</span></h4>
<p class="normal"><span class="koboSpan" id="kobo.2482.1">To handle </span><a id="_idIndexMarker750"/><span class="koboSpan" id="kobo.2483.1">our todo app state in one Reducer Hook, we are going to combine the </span><a id="_idIndexMarker751"/><span class="koboSpan" id="kobo.2484.1">two reducers we created into a single </span><code class="inlineCode"><span class="koboSpan" id="kobo.2485.1">appRed</span><a id="_idTextAnchor368"/><span class="koboSpan" id="kobo.2486.1">ucer</span></code><span class="koboSpan" id="kobo.2487.1"> function. </span><span class="koboSpan" id="kobo.2487.2">To do that:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2488.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.2489.1">src/reducers.js</span></code><span class="koboSpan" id="kobo.2490.1"> and define and export a new function for the app reducer:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2491.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2492.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2493.1">appReducer</span></span><span class="koboSpan" id="kobo.2494.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2495.1">state, action</span></span><span class="koboSpan" id="kobo.2496.1">) {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2497.1">In this function, we return an object with the values from the other reducers. </span><span class="koboSpan" id="kobo.2497.2">We simply pass the sub-state and action to the other reducers:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2498.1">return</span></span><span class="koboSpan" id="kobo.2499.1"> {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2500.1">todos</span></span><span class="koboSpan" id="kobo.2501.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2502.1">todosReducer</span></span><span class="koboSpan" id="kobo.2503.1">(state.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2504.1">todos</span></span><span class="koboSpan" id="kobo.2505.1">, action),
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2506.1">filter</span></span><span class="koboSpan" id="kobo.2507.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2508.1">filterReducer</span></span><span class="koboSpan" id="kobo.2509.1">(state.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2510.1">filter</span></span><span class="koboSpan" id="kobo.2511.1">, action),
  }
}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2512.1">Now that we have defined a reducer to manage the app state, we can start migrating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2513.1">App</span></code><span class="koboSpan" id="kobo.2514.1"> component.</span></p>
<h3 class="heading-3" id="_idParaDest-306"><a id="_idTextAnchor369"/><span class="koboSpan" id="kobo.2515.1">Migrating the App component</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.2516.1">Let’s get </span><a id="_idIndexMarker752"/><span class="koboSpan" id="kobo.2517.1">started mi</span><a id="_idTextAnchor370"/><span class="koboSpan" id="kobo.2518.1">grating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2519.1">App</span></code><span class="koboSpan" id="kobo.2520.1"> component now:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2521.1">Edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.2522.1">src/App.jsx</span></code><span class="koboSpan" id="kobo.2523.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.2524.1">delete</span></em><span class="koboSpan" id="kobo.2525.1"> all of the existing code.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2526.1">Import the following:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2527.1">import</span></span><span class="koboSpan" id="kobo.2528.1"> { useReducer, useEffect, useMemo } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2529.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2530.1">'react'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2531.1">import</span></span><span class="koboSpan" id="kobo.2532.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2533.1">Header</span></span><span class="koboSpan" id="kobo.2534.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2535.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2536.1">'./Header.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2537.1">import</span></span><span class="koboSpan" id="kobo.2538.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2539.1">AddTodo</span></span><span class="koboSpan" id="kobo.2540.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2541.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2542.1">'./AddTodo.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2543.1">import</span></span><span class="koboSpan" id="kobo.2544.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2545.1">TodoList</span></span><span class="koboSpan" id="kobo.2546.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2547.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2548.1">'./TodoList.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2549.1">import</span></span><span class="koboSpan" id="kobo.2550.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2551.1">TodoFilter</span></span><span class="koboSpan" id="kobo.2552.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2553.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2554.1">'./TodoFilter.jsx'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2555.1">import</span></span><span class="koboSpan" id="kobo.2556.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2557.1">StateContext</span></span><span class="koboSpan" id="kobo.2558.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2559.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2560.1">'./StateContext.js'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2561.1">import</span></span><span class="koboSpan" id="kobo.2562.1"> { fetchTodos } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2563.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2564.1">'./api.js'</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2565.1">import</span></span><span class="koboSpan" id="kobo.2566.1"> { appReducer } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2567.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2568.1">'./reducers.js'</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2569.1">First, we define the function component, which is not going to accept any props:
        </span><pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2570.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2571.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2572.1">App</span></span><span class="koboSpan" id="kobo.2573.1">() {
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2574.1">Now, we define </span><a id="_idIndexMarker753"/><span class="koboSpan" id="kobo.2575.1">a Reducer Hook using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2576.1">appReducer</span></code><span class="koboSpan" id="kobo.2577.1"> function:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2578.1">const</span></span><span class="koboSpan" id="kobo.2579.1"> [state, dispatch] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2580.1">useReducer</span></span><span class="koboSpan" id="kobo.2581.1">(appReducer, { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2582.1">todos</span></span><span class="koboSpan" id="kobo.2583.1">: [],
</span><span class="hljs-keyword"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2584.1">filter</span></span><span class="koboSpan" id="kobo.2585.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2586.1">'all'</span></span><span class="koboSpan" id="kobo.2587.1"> })
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2588.1">Let’s also destructure the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2589.1">state</span></code><span class="koboSpan" id="kobo.2590.1"> object to make it easier for us to access later:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2591.1">const</span></span><span class="koboSpan" id="kobo.2592.1"> { todos, filter } = state
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2593.1">Then, we implement the filter mechanism using a Memo Hook. </span><span class="koboSpan" id="kobo.2593.2">This is one of the few cases where using the Memo Hook is actually necessary. </span><span class="koboSpan" id="kobo.2593.3">Otherwise, our component would re-render too often, causing an infinite loop. </span><span class="koboSpan" id="kobo.2593.4">We can use the Memo Hook to ensure that a change to </span><code class="inlineCode"><span class="koboSpan" id="kobo.2594.1">filteredTodos</span></code><span class="koboSpan" id="kobo.2595.1"> is only triggered when the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2596.1">todos</span></code><span class="koboSpan" id="kobo.2597.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.2598.1">filter</span></code><span class="koboSpan" id="kobo.2599.1"> state changes, as follows:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2600.1">const</span></span><span class="koboSpan" id="kobo.2601.1"> filteredTodos = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2602.1">useMemo</span></span><span class="koboSpan" id="kobo.2603.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2604.1">() =&gt;</span></span><span class="koboSpan" id="kobo.2605.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2606.1">switch</span></span><span class="koboSpan" id="kobo.2607.1"> (filter) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2608.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2609.1">'active'</span></span><span class="koboSpan" id="kobo.2610.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2611.1">return</span></span><span class="koboSpan" id="kobo.2612.1"> todos.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2613.1">filter</span></span><span class="koboSpan" id="kobo.2614.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2615.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2616.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2617.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2618.1"> item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2619.1">completed</span></span><span class="koboSpan" id="kobo.2620.1"> === </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2621.1">false</span></span><span class="koboSpan" id="kobo.2622.1">)
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2623.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2624.1">'completed'</span></span><span class="koboSpan" id="kobo.2625.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2626.1">return</span></span><span class="koboSpan" id="kobo.2627.1"> todos.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2628.1">filter</span></span><span class="koboSpan" id="kobo.2629.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2630.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.2631.1">item</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.2632.1">) =&gt;</span></span><span class="koboSpan" id="kobo.2633.1"> item.</span><span class="hljs-property"><span class="koboSpan" id="kobo.2634.1">completed</span></span><span class="koboSpan" id="kobo.2635.1"> === </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2636.1">true</span></span><span class="koboSpan" id="kobo.2637.1">)
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2638.1">case</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2639.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2640.1">all'</span></span><span class="koboSpan" id="kobo.2641.1">:
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2642.1">default</span></span><span class="koboSpan" id="kobo.2643.1">:
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2644.1">return</span></span><span class="koboSpan" id="kobo.2645.1"> todos
    }
  }, [todos, filter])
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2646.1">Now, we define </span><a id="_idIndexMarker754"/><span class="koboSpan" id="kobo.2647.1">an Effect Hook, which is going to fetch todos from our mock API and then dispatch a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2648.1">LOAD_TODOS</span></code><span class="koboSpan" id="kobo.2649.1"> action:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.2650.1">useEffect</span></span><span class="koboSpan" id="kobo.2651.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.2652.1">() =&gt;</span></span><span class="koboSpan" id="kobo.2653.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2654.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2655.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2656.1">loadTodos</span></span><span class="koboSpan" id="kobo.2657.1">() {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2658.1">const</span></span><span class="koboSpan" id="kobo.2659.1"> todos = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2660.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2661.1">fetchTodos</span></span><span class="koboSpan" id="kobo.2662.1">()
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2663.1">dispatch</span></span><span class="koboSpan" id="kobo.2664.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2665.1">type</span></span><span class="koboSpan" id="kobo.2666.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2667.1">'LOAD_TODOS'</span></span><span class="koboSpan" id="kobo.2668.1">, todos })
    }
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2669.1">void</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2670.1">loadTodos</span></span><span class="koboSpan" id="kobo.2671.1">()
  }, [])
</span></code></pre>
</li>
</ol>
<div class="note-one">
<p class="normal"><span class="koboSpan" id="kobo.2672.1">The function inside an Effect Hook needs to be synchronous, so we are using a workaround to get the async/await construct to work here. </span><span class="koboSpan" id="kobo.2672.2">When not caring about waiting for an async function to complete, it is best practice to prefix the function call with </span><code class="inlineCode"><span class="koboSpan" id="kobo.2673.1">void</span></code><span class="koboSpan" id="kobo.2674.1"> to show that we intentionally did not </span><code class="inlineCode"><span class="koboSpan" id="kobo.2675.1">await</span></code><span class="koboSpan" id="kobo.2676.1"> it.</span></p>
</div>
<ol>
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.2677.1">Next, we define various functions that are going to dispatch actions and change the state of our app:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2678.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2679.1">addTodo</span></span><span class="koboSpan" id="kobo.2680.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2681.1">title</span></span><span class="koboSpan" id="kobo.2682.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2683.1">dispatch</span></span><span class="koboSpan" id="kobo.2684.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2685.1">type</span></span><span class="koboSpan" id="kobo.2686.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2687.1">'ADD_TODO'</span></span><span class="koboSpan" id="kobo.2688.1">, title })
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2689.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2690.1">toggleTodo</span></span><span class="koboSpan" id="kobo.2691.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2692.1">id</span></span><span class="koboSpan" id="kobo.2693.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2694.1">dispatch</span></span><span class="koboSpan" id="kobo.2695.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2696.1">type</span></span><span class="koboSpan" id="kobo.2697.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2698.1">'TOGGLE_TODO'</span></span><span class="koboSpan" id="kobo.2699.1">, id })
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2700.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2701.1">removeTodo</span></span><span class="koboSpan" id="kobo.2702.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2703.1">id</span></span><span class="koboSpan" id="kobo.2704.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2705.1">dispatch</span></span><span class="koboSpan" id="kobo.2706.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2707.1">type</span></span><span class="koboSpan" id="kobo.2708.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2709.1">'REMOVE_TODO'</span></span><span class="koboSpan" id="kobo.2710.1">, id })
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2711.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2712.1">filterTodos</span></span><span class="koboSpan" id="kobo.2713.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2714.1">filter</span></span><span class="koboSpan" id="kobo.2715.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2716.1">dispatch</span></span><span class="koboSpan" id="kobo.2717.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2718.1">type</span></span><span class="koboSpan" id="kobo.2719.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2720.1">'FILTER_TODOS'</span></span><span class="koboSpan" id="kobo.2721.1">, filter })
  }
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2722.1">Finally, we render </span><a id="_idIndexMarker755"/><span class="koboSpan" id="kobo.2723.1">all the components that are needed for our todo app:
        </span><pre class="programlisting code-one"><code class="hljs-code"> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2724.1">return</span></span><span class="koboSpan" id="kobo.2725.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2726.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2727.1">StateContext.Provider</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2728.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2729.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2730.1">{filteredTodos}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2731.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2732.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2733.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2734.1">style</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2735.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2736.1">{{</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2737.1">width:</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2738.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.2739.1">400px</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2740.1">' }}&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2741.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2742.1">Header</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2743.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2744.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2745.1">AddTodo</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2746.1">addTodo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2747.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2748.1">{addTodo}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2749.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2750.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2751.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2752.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2753.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2754.1">TodoList</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2755.1">toggleTodo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2756.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2757.1">{toggleTodo}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2758.1">removeTodo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2759.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2760.1">{removeTodo}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2761.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2762.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2763.1">hr</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2764.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2765.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2766.1">TodoFilter</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2767.1">filter</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2768.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2769.1">{filter}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2770.1">filterTodos</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2771.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2772.1">{filterTodos}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2773.1"> /&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2774.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2775.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2776.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2777.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2778.1">StateContext.Provider</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2779.1">&gt;</span></span><span class="koboSpan" id="kobo.2780.1">
  )
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2781.1">Now that our app is fully migrated, we can start the dev server and verify that everything still works:
        </span><pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.2782.1">$ npm run dev
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2783.1">As we can see, using a Reducer Hook to handle complex state changes makes our code much more concise and easier to maintain. </span><span class="koboSpan" id="kobo.2783.2">Our app is now fully migrated to Hooks, and it still works exactly the same way as before!</span></p>
<div class="note">
<p class="normal"><span class="koboSpan" id="kobo.2784.1">Another possibility to further refactor and improve the code would be to store the state and dispatch function </span><a id="_idIndexMarker756"/><span class="koboSpan" id="kobo.2785.1">in a context, and then define custom Hooks for handling the various functions of our todo app. </span><span class="koboSpan" id="kobo.2785.2">However, in this example, we wanted to keep it as close to the original class component code as possible, so any further refactoring is left as an exercise for the reader.</span></p>
</div>
<div class="note">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.2786.1">Example code</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.2787.1">The example code for this section can be found in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2788.1">Chapter13/Chapter13_2</span></code><span class="koboSpan" id="kobo.2789.1"> folder. </span><span class="koboSpan" id="kobo.2789.2">Check the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2790.1">README.md</span></code><span class="koboSpan" id="kobo.2791.1"> file inside the folder for instructions on how to set up and run the example.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.2792.1">Now, let’s wrap up the book by discussing the trade-offs of using React class components vs React Hooks.</span></p>
<h1 class="heading-1" id="_idParaDest-307"><a id="_idTextAnchor371"/><span class="koboSpan" id="kobo.2793.1">Trade-offs of React class components vs React Hooks</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2794.1">Now that we have finished our migration from class components to Hooks, let us revise and sum up what we have learned.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2795.1">Function components </span><a id="_idIndexMarker757"/><span class="koboSpan" id="kobo.2796.1">with Hooks are easier to </span><a id="_idIndexMarker758"/><span class="koboSpan" id="kobo.2797.1">understand and test, since they are simply JavaScript functions instead of complex React constructs. </span><span class="koboSpan" id="kobo.2797.2">We were also able to refactor the state-changing logic into a separate </span><code class="inlineCode"><span class="koboSpan" id="kobo.2798.1">reducers.js</span></code><span class="koboSpan" id="kobo.2799.1"> file, thus decoupling it from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2800.1">App</span></code><span class="koboSpan" id="kobo.2801.1"> component, and making it easier to refactor and test. </span><span class="koboSpan" id="kobo.2801.2">We can safely say that separating concerns between app logic and components significantly improved the maintainability of our project.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2802.1">Now, let’s recap the advantages we gained by refactoring our app. </span><span class="koboSpan" id="kobo.2802.2">With function components and Hooks, the following points do not need to be taken into consideration anymore:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2803.1">No need to deal with constructors.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2804.1">No confusing </span><code class="inlineCode"><span class="koboSpan" id="kobo.2805.1">this</span></code><span class="koboSpan" id="kobo.2806.1"> context (</span><code class="inlineCode"><span class="koboSpan" id="kobo.2807.1">this</span></code><span class="koboSpan" id="kobo.2808.1"> re-binding).</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2809.1">No need to destructure the same values over and over again.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2810.1">No magic when dealing with contexts, props, and state.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2811.1">No need to define </span><code class="inlineCode"><span class="koboSpan" id="kobo.2812.1">componentDidMount</span></code><span class="koboSpan" id="kobo.2813.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2814.1">componentDidUpdate</span></code><span class="koboSpan" id="kobo.2815.1"> if we want to re-fetch data when the props change.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.2816.1">Additionally, function </span><a id="_idIndexMarker759"/><span class="koboSpan" id="kobo.2817.1">components have the following advantages:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2818.1">Encourage making small and simple components.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2819.1">Are easier to refactor.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2820.1">Are easier to test.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2821.1">Require less code.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2822.1">Are easier to understand for beginners.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2823.1">Are more declarative.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2824.1">React Server Components (RSCs) can only be function components.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.2825.1">However, class </span><a id="_idIndexMarker760"/><span class="koboSpan" id="kobo.2826.1">components can be fine in the following situations:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2827.1">When sticking to certain conventions.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2828.1">When using arrow functions to avoid </span><code class="inlineCode"><span class="koboSpan" id="kobo.2829.1">this</span></code><span class="koboSpan" id="kobo.2830.1"> re-binding.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2831.1">Possibly easier to understand for the team, because of existing knowledge.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2832.1">Many projects still use classes. </span><span class="koboSpan" id="kobo.2832.2">For dependencies, this is not such a problem, as they can still be easily used in function components. </span><span class="koboSpan" id="kobo.2832.3">However, in legacy codebases, you may still need to work with class components.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.2833.1">In the end, it is a matter of preference, but Hooks do have many advantages over classes! </span><span class="koboSpan" id="kobo.2833.2">If you are starting a new project, definitely go for Hooks. </span><span class="koboSpan" id="kobo.2833.3">If you are working on an existing project, consider whether it might make sense to refactor certain components to Hook-based components in order to make them simpler.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2834.1">However, you should </span><a id="_idIndexMarker761"/><span class="koboSpan" id="kobo.2835.1">not immediately port all your </span><a id="_idIndexMarker762"/><span class="koboSpan" id="kobo.2836.1">projects to Hooks, as refactoring can always introduce new bugs. </span><span class="koboSpan" id="kobo.2836.2">The best way to adopt Hooks is to slowly but surely replace old class components with Hook-based function components when appropriate. </span><span class="koboSpan" id="kobo.2836.3">For example, if you are already refactoring a component, you can refactor it to use Hooks!</span></p>
<h1 class="heading-1" id="_idParaDest-308"><a id="_idTextAnchor372"/><span class="koboSpan" id="kobo.2837.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2838.1">In this chapter, we first built a todo app using React class components. </span><span class="koboSpan" id="kobo.2838.2">We started by designing the app structure, then implemented static components, and finally, we made them dynamic. </span><span class="koboSpan" id="kobo.2838.3">Next, we learned how to migrate an existing project using class components, to function components using Hooks. </span><span class="koboSpan" id="kobo.2838.4">Finally, we learned about the trade-offs of class components, when class components or Hooks should be used, and how one should go about migrating an existing project to Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2839.1">We have now seen in practice how React class components differ to function components with Hooks. </span><span class="koboSpan" id="kobo.2839.2">Hooks make our code much more concise and easier to read and maintain. </span><span class="koboSpan" id="kobo.2839.3">We have also learned that we should gradually migrate our components from class components to function components with Hooks—there is no need to immediately migrate the whole application.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2840.1">This chapter marks the end of this book. </span><span class="koboSpan" id="kobo.2840.2">In this book, we started out with a motivation to use Hooks. </span><span class="koboSpan" id="kobo.2840.3">We learned that there are common problems in React apps, which could not be easily solved without Hooks. </span><span class="koboSpan" id="kobo.2840.4">Then, we created our first component using Hooks, and compared it to the class-based solution. </span><span class="koboSpan" id="kobo.2840.5">Next, we learned about the State Hook, which is the most ubiquitous of them all. </span><span class="koboSpan" id="kobo.2840.6">We also learned about solving common problems with Hooks, such as conditional Hooks, and Hooks in loops. </span><span class="koboSpan" id="kobo.2840.7">We gained a deep understanding of how Hooks work internally and what their limitations are.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2841.1">After learning about the State Hook in depth, we developed a small blog app using Hooks. </span><span class="koboSpan" id="kobo.2841.2">We then learned about Reducer Hooks, Effect Hooks, and Context Hooks, in order to be able to implement more features in our app. </span><span class="koboSpan" id="kobo.2841.3">Next, we learned how to use TanStack Query Hooks and React Suspense for data fetching. </span><span class="koboSpan" id="kobo.2841.4">Then, we used Hooks to handle forms. </span><span class="koboSpan" id="kobo.2841.5">Next, we used React Router to implement routes in our blog app, and we learned how Hooks can make dynamic routing much easier. </span><span class="koboSpan" id="kobo.2841.6">We gained experience developing a real-world frontend application with Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2842.1">We also learned about the various built-in Hooks provided by React, even the advanced ones. </span><span class="koboSpan" id="kobo.2842.2">Then, we learned about various Hooks that are provided by the community, which make dealing with application state and various use cases much easier. </span><span class="koboSpan" id="kobo.2842.3">We gained an in-depth understanding of all the Hooks that React provides, and where to find more Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2843.1">Towards the end of the book, we learned about the rules of Hooks, how to create our own custom Hooks and how to write tests for them using Vitest. </span><span class="koboSpan" id="kobo.2843.2">We also learned how to migrate an existing class-component based app to a Hook-based solution. </span><span class="koboSpan" id="kobo.2843.3">We thus gained an understanding on how to effectively refactor React applications with Hooks.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2844.1">Now that you have learned about Hooks in depth, you are ready to use them in your applications! </span><span class="koboSpan" id="kobo.2844.2">You have also learned how to migrate existing projects to Hooks, so you can start doing that now. </span><span class="koboSpan" id="kobo.2844.3">I hope you enjoyed learning about React Hooks, and that you are looking forward to implementing Hooks in your applications! </span><span class="koboSpan" id="kobo.2844.4">I am sure that using Hooks will make coding much more enjoyable for you, just like they did for me.</span></p>
<h1 class="heading-1" id="_idParaDest-309"><a id="_idTextAnchor373"/><span class="koboSpan" id="kobo.2845.1">Questions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2846.1">To recap what we have learned in this chapter, try to answer the following questions:</span></p>
<ol>
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2847.1">How are React class components defined?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2848.1">What do we need to call when using a constructor with class components? </span><span class="koboSpan" id="kobo.2848.2">Why?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2849.1">How do we set the initial state with class components?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2850.1">How do we change the state with class components?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2851.1">Why do we need to re-bind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2852.1">this</span></code><span class="koboSpan" id="kobo.2853.1"> context with class component methods?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2854.1">How can we re-bind the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2855.1">this</span></code><span class="koboSpan" id="kobo.2856.1"> context?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2857.1">How can we use React Context with class components?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2858.1">What can we replace state management with when migrating to Hooks?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2859.1">What are the trade-offs of using Hooks versus class components?</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2860.1">When, and how, should an existing project be migrated to Hooks?</span></li>
</ol>
<h1 class="heading-1" id="_idParaDest-310"><a id="_idTextAnchor374"/><span class="koboSpan" id="kobo.2861.1">Further reading</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2862.1">If you are interested in more informati</span><a id="_idTextAnchor375"/><span class="koboSpan" id="kobo.2863.1">on about the concepts that we have learned in this chapter, take a look at the following links:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2864.1">Clas</span><a id="_idTextAnchor376"/><span class="koboSpan" id="kobo.2865.1">ses in JavaScript: </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes"><span class="url"><span class="koboSpan" id="kobo.2866.1">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2867.1">React class components</span><a id="_idTextAnchor377"/><span class="koboSpan" id="kobo.2868.1">: </span><a href="https://www.robinwieruch.de/react-component-types/#react-class-components"><span class="url"><span class="koboSpan" id="kobo.2869.1">https://www.robinwieruch.de/react-component-types/#react-class-components</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2870.1">Migrating class components to functions: </span><a href="https://react.dev/reference/react/Component#migrating-a-simple-component-from-a-class-to-a-function"><span class="url"><span class="koboSpan" id="kobo.2871.1">https://react.dev/reference/react/Component#migrating-a-simple-component-from-a-class-to-a-function</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.2872.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2873.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_13.xhtml"><span class="url"><span class="koboSpan" id="kobo.2874.1">https://packt.link/wnXT0</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.2875.1"><img alt="" src="../Images/image_%283%29.png"/></span></p>
</div>


<div id="_idContainer222">
<p class="BM-packtLogo"><span class="koboSpan" id="kobo.1.1"><img alt="" src="../Images/New_Packt_Logo1.png"/></span></p>
<p class="FM-copyright-text"><a href="https://www.packtpub.com"><span class="url"><span class="koboSpan" id="kobo.2.1">www.packtpub.com</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.3.1">Subscribe to our online digital library for full access to over 7,000 books and videos, as well as industry leading tools to help you plan your personal development and advance your career. </span><span class="koboSpan" id="kobo.3.2">For more information, please visit our website.</span></p>
<h1 class="heading-1" id="_idParaDest-311"><a id="_idTextAnchor378"/><span class="koboSpan" id="kobo.4.1">Why subscribe?</span></h1>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.5.1">Spend less time learning and more time coding with practical eBooks and Videos from over 4,000 industry professionals</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.6.1">Improve your learning with Skill Plans built especially for you</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.7.1">Get a free eBook or video every month</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.8.1">Fully searchable for easy access to vital information</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.9.1">Copy and paste, print, and bookmark content</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.10.1">At </span><a href="https://www.packtpub.com"><span class="url"><span class="koboSpan" id="kobo.11.1">www.packtpub.com</span></span></a><span class="koboSpan" id="kobo.12.1">, you can also read a collection of free technical articles, sign up for a range of free newsletters, and receive exclusive discounts and offers on Packt books and eBooks.</span></p>
<p class="eop"/>
<h1 class="mainHeading" id="_idParaDest-312"><a id="_idTextAnchor379"/><span class="koboSpan" id="kobo.13.1">Other Books You May Enjoy</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.14.1">If you enjoyed this book, you may be interested in these other books by Packt:</span></p>
<p class="normal"><a href="https://www.packtpub.com/en-us/product/react-key-concepts-9781836202264"><span class="koboSpan" id="kobo.15.1"><img alt="" src="../Images/9781836202271.jpg"/></span></a></p>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.16.1">React Key Concepts, Second Edition</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.17.1">Maximilian Schwarzmüller</span></p>
<p class="normal"><span class="koboSpan" id="kobo.18.1">ISBN: 978-1-83620-227-1</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.19.1">Build modern, user-friendly, and reactive web apps</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.20.1">Create components and utilize props to pass data between them</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.21.1">Handle events, perform state updates, and manage conditional content</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.22.1">Add styles dynamically and conditionally for modern user interfaces</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.23.1">Use advanced state management techniques such as React’s Context API</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.24.1">Utilize React Router to render different pages for different URLs</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.25.1">Understand key best practices and optimization opportunities</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.26.1">Learn about React Server Components and Server Actions</span></li>
</ul>
<p class="normal"><a href="https://www.packtpub.com/en-us/product/modern-full-stack-react-projects-9781837632756"><span class="koboSpan" id="kobo.27.1"><img alt="" src="../Images/9781837637959.jpg"/></span></a></p>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.28.1">Modern Full-Stack React Projects</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.29.1">Daniel Bugl</span></p>
<p class="normal"><span class="koboSpan" id="kobo.30.1">ISBN: 978-1-83763-795-9</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.31.1">Implement a backend using Express and MongoDB, and unit-test it with Jest</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.32.1">Deploy full-stack web apps using Docker, set up CI/CD and end-to-end tests using Playwright</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.33.1">Add authentication using JSON Web Tokens (JWT)</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.34.1">Create a GraphQL backend and integrate it with a frontend using Apollo Client</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.35.1">Build a chat app based on event-driven architecture using Socket.IO</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.36.1">Facilitate Search Engine Optimization (SEO) and implement server-side rendering</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.37.1">Use Next.js, an enterprise-ready full-stack framework, with React Server Components and Server Actions</span></li>
</ul>
<p class="eop"/>
<h1 class="heading-1" id="_idParaDest-313"><a id="_idTextAnchor380"/><span class="koboSpan" id="kobo.38.1">Packt is searching for authors like you</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.39.1">If you’re interested in becoming an author for Packt, please visit </span><a href="https://www.authors.packtpub.com"><span class="url"><span class="koboSpan" id="kobo.40.1">authors.packtpub.com</span></span></a><span class="koboSpan" id="kobo.41.1"> and apply today. </span><span class="koboSpan" id="kobo.41.2">We have worked with thousands of developers and tech professionals, just like you, to help them share their insight with the global tech community. </span><span class="koboSpan" id="kobo.41.3">You can make a general application, apply for a specific hot topic that we are recruiting an author for, or submit your own idea.</span></p>
</div>
<div class="Basic-Text-Frame" id="_idContainer223">
<p class="eop"/>
<h1 class="heading-1" id="_idParaDest-314"><a id="_idTextAnchor381"/><span class="koboSpan" id="kobo.42.1">Share your thoughts</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.43.1">Now you’ve finished </span><em class="italic"><span class="koboSpan" id="kobo.44.1">Learn React Hooks</span></em><span class="koboSpan" id="kobo.45.1">, </span><em class="italic"><span class="koboSpan" id="kobo.46.1">Second Edition</span></em><span class="koboSpan" id="kobo.47.1">, we’d love to hear your thoughts! </span><span class="koboSpan" id="kobo.47.2">If you purchased the book from Amazon, please </span><a href="https://packt.link/r/1836209177"><span class="url"><span class="koboSpan" id="kobo.48.1">click here to go straight to the Amazon review pag</span></span></a><span class="koboSpan" id="kobo.49.1">e for this book and share your feedback or leave a review on the site that you purchased it from.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.50.1">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</span></p>
</div>
</body></html>