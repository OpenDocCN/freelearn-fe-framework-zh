<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer084">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 class="chapterTitle" id="_idParaDest-120"><span class="koboSpan" id="kobo.2.1">Understanding Angular Animations</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In this chapter, you’ll learn about working with </span><strong class="keyWord"><span class="koboSpan" id="kobo.4.1">animations</span></strong><span class="koboSpan" id="kobo.5.1"> in Angular. </span><span class="koboSpan" id="kobo.5.2">You’ll learn about multi-state animations, staggering animations, and keyframe animations, as well as how to implement animations for switching routes in your Angular apps and how to conditionally disable animations.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.6.1">The following are the recipes that we’re going to cover in this chapter:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.7.1">Creating your first two-state Angular animation</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.8.1">Working with multi-state animations</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.9.1">Creating complex Angular animations using keyframes</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.10.1">Animating lists in Angular using stagger animations</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.11.1">Sequential vs parallel animations in Angular</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.12.1">Route animations in Angular</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.13.1">Disabling Angular animations conditionally</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-121"><span class="koboSpan" id="kobo.14.1">Technical requirements</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.15.1">For the recipes in this chapter, ensure your setup is complete as per the 'Technical Requirements' in the 'Angular-Cookbook-2E' GitHub repository. </span><span class="koboSpan" id="kobo.15.2">For setup details, visit: </span><a href="https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/docs/technical-requirements.md"><span class="url"><span class="koboSpan" id="kobo.16.1">https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/docs/technical-requirements.md</span></span></a><span class="koboSpan" id="kobo.17.1">. </span><span class="koboSpan" id="kobo.17.2">The starter code for this chapter is located at </span><a href="https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/start/apps/chapter04"><span class="url"><span class="koboSpan" id="kobo.18.1">https://github.com/PacktPublishing/Angular-Cookbook-2E/tree/main/start/apps/chapter04</span></span></a><span class="koboSpan" id="kobo.19.1">.</span></p>
<h1 class="heading-1" id="_idParaDest-122"><span class="koboSpan" id="kobo.20.1">Creating your first two-state Angular animation</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.21.1">In this</span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.22.1"> recipe, you’ll create a basic two-state Angular animation that has a fading effect. </span><span class="koboSpan" id="kobo.22.2">We’ll start with an Angular app with a UI already built into it. </span><span class="koboSpan" id="kobo.22.3">We’ll then enable animations in the app using Angular animations and will move toward creating our first animation.</span></p>
<h2 class="heading-2" id="_idParaDest-123"><span class="koboSpan" id="kobo.23.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.24.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.25.1">start/apps/chapter04/ng-basic-animation</span></code><span class="koboSpan" id="kobo.26.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.27.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.28.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.29.1">npm run serve ng-basic-animation
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.30.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.31.1"><img alt="" role="presentation" src="../Images/B18469_04_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.32.1">Figure 4.1: ng-basic-animation app running on http://localhost:4200</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.33.1">Now that we have the app running, we will move on to the steps for the recipe.</span></p>
<h2 class="heading-2" id="_idParaDest-124"><span class="koboSpan" id="kobo.34.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.35.1">We have an</span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.36.1"> app that doesn’t have Angular animations configured at all. </span><span class="koboSpan" id="kobo.36.2">We will create a fading effect for the cards using Angular animations. </span><span class="koboSpan" id="kobo.36.3">Let’s continue with the steps as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.37.1">First, we’ll import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.38.1">provideAnimations</span></code><span class="koboSpan" id="kobo.39.1"> function from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.40.1">@angular/platform-browser/animations</span></code><span class="koboSpan" id="kobo.41.1"> package in our </span><code class="inlineCode"><span class="koboSpan" id="kobo.42.1">src/app/app.config.ts</span></code><span class="koboSpan" id="kobo.43.1"> file so we can use animations in the app. </span><span class="koboSpan" id="kobo.43.2">We’ll use it in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.44.1">providers</span></code><span class="koboSpan" id="kobo.45.1"> array as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.46.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.47.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.48.1"> { provideAnimations } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.49.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.50.1">'@angular/platform-browser/animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.51.1">; </span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.52.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.53.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.54.1">appConfig</span></span><span class="koboSpan" id="kobo.55.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.56.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.57.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.58.1">providers</span></span><span class="koboSpan" id="kobo.59.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.60.1">provideRouter</span></span><span class="koboSpan" id="kobo.61.1">(appRoutes, </span><span class="hljs-title"><span class="koboSpan" id="kobo.62.1">withEnabledBlockingInitialNavigation</span></span><span class="koboSpan" id="kobo.63.1">())</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.64.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.65.1">provideAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.66.1">()</span></strong></span><span class="koboSpan" id="kobo.67.1">
  ],
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.68.1">Now modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.69.1">app.component.ts</span></code><span class="koboSpan" id="kobo.70.1"> file to add the animations as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.71.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.72.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.73.1"> { trigger, transition, style, animate } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.74.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.75.1">'@angular/animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.76.1">;</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.77.1">@Component</span></span><span class="koboSpan" id="kobo.78.1">({
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.79.1">imports</span></span><span class="koboSpan" id="kobo.80.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.81.1">CommonModule</span></span><span class="koboSpan" id="kobo.82.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.83.1">FbCardComponent</span></span><span class="koboSpan" id="kobo.84.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.85.1">TwitterCardComponent</span></span><span class="koboSpan" id="kobo.86.1">],
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.87.1">animations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.88.1">: [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.89.1">trigger</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.90.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.91.1">'fadeInOut'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.92.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.93.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.94.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.95.1">':enter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.96.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.97.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.98.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.99.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.100.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.101.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.102.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.103.1">scale</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.104.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.105.1">0.85</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.106.1"> }),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.107.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.108.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.109.1">'200ms 100ms'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.110.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.111.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.112.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.113.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.114.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.115.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.116.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.117.1">scale</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.118.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.119.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.120.1"> })),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.121.1">]),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.122.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.123.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.124.1">':leave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.125.1">, [ </span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.126.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.127.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.128.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.129.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.130.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.131.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.132.1">scale</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.133.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.134.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.135.1"> }), </span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.136.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.137.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.138.1">'100ms'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.139.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.140.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.141.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.142.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.143.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.144.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.145.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.146.1">scale</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.147.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.148.1">0.85</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.149.1"> })),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.150.1">]),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.151.1">]),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.152.1">],</span></strong></span><span class="koboSpan" id="kobo.153.1"> 
})
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.154.1">Finally, add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.155.1">fadeInOut</span></code><span class="koboSpan" id="kobo.156.1"> animation on both the cards in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.157.1">app.component.html</span></code><span class="koboSpan" id="kobo.158.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"> <span class="hljs-comment"><span class="koboSpan" id="kobo.159.1">&lt;!-- Toolbar --&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.160.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.161.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.162.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.163.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.164.1">"toolbar"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.165.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.166.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.167.1">"banner"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.168.1">&gt;</span></span><span class="koboSpan" id="kobo.169.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.170.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.171.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.172.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.173.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.174.1">main</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.175.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.176.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.177.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.178.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.179.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.180.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.181.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.182.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.183.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.184.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.185.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.186.1">"type-picker mb-8"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.187.1">&gt;</span></span><span class="koboSpan" id="kobo.188.1">...</span><span class="hljs-tag"><span class="koboSpan" id="kobo.189.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.190.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.191.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.192.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.193.1">ng-container</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.194.1"> [</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.195.1">ngSwitch</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.196.1">]=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.197.1">"selectedCardType"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.198.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.199.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.200.1">app-fb-card</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.201.1">[@</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.202.1">fadeInOut</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.203.1">]</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.204.1">*</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.205.1">ngSwitchCase</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.206.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.207.1">"'facebook'"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.208.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.209.1">app-fb-card</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.210.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.211.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.212.1">app-twitter-card</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.213.1">[@</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.214.1">fadeInOut</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.215.1">]</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.216.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.217.1">ngSwitchCase</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.218.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.219.1">"'twitter'"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.220.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.221.1">app-twitter-card</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.222.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.223.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.224.1">ng-container</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.225.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.226.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.227.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.228.1">&gt;</span></span><span class="koboSpan" id="kobo.229.1">}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.230.1">Great! </span><span class="koboSpan" id="kobo.230.2">You</span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.231.1"> have now implemented a basic </span><em class="italic"><span class="koboSpan" id="kobo.232.1">fade-in</span></em><span class="koboSpan" id="kobo.233.1"> &lt;=&gt; </span><em class="italic"><span class="koboSpan" id="kobo.234.1">fade-out</span></em><span class="koboSpan" id="kobo.235.1"> animation for the cards. </span><span class="koboSpan" id="kobo.235.2">Simple, but pretty! </span><span class="koboSpan" id="kobo.235.3">Refer to the next section to understand how the recipe works.</span></p>
<h2 class="heading-2" id="_idParaDest-125"><span class="koboSpan" id="kobo.236.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.237.1">Angular provides its own animation API that allows you to animate any property that the CSS transitions work on. </span><span class="koboSpan" id="kobo.237.2">The benefit is that you can configure them dynamically based on the conditions required. </span><span class="koboSpan" id="kobo.237.3">If we were to create the same behavior in CSS, we would have to do the following:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.238.1">We would have to create the keyframes in CSS as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.239.1">@keyframes</span></span><span class="koboSpan" id="kobo.240.1"> fadeIn {
  </span><span class="hljs-number"><span class="koboSpan" id="kobo.241.1">0%</span></span><span class="koboSpan" id="kobo.242.1"> { </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.243.1">opacity</span></span><span class="koboSpan" id="kobo.244.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.245.1">0</span></span><span class="koboSpan" id="kobo.246.1">; </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.247.1">transform</span></span><span class="koboSpan" id="kobo.248.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.249.1">scale</span></span><span class="koboSpan" id="kobo.250.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.251.1">0.85</span></span><span class="koboSpan" id="kobo.252.1">); }
  </span><span class="hljs-number"><span class="koboSpan" id="kobo.253.1">100%</span></span><span class="koboSpan" id="kobo.254.1"> { </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.255.1">opacity</span></span><span class="koboSpan" id="kobo.256.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.257.1">1</span></span><span class="koboSpan" id="kobo.258.1">; </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.259.1">transform</span></span><span class="koboSpan" id="kobo.260.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.261.1">scale</span></span><span class="koboSpan" id="kobo.262.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.263.1">1</span></span><span class="koboSpan" id="kobo.264.1">); }
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.265.1">@keyframes</span></span><span class="koboSpan" id="kobo.266.1"> fadeOut {
  </span><span class="hljs-number"><span class="koboSpan" id="kobo.267.1">0%</span></span><span class="koboSpan" id="kobo.268.1"> { </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.269.1">opacity</span></span><span class="koboSpan" id="kobo.270.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.271.1">1</span></span><span class="koboSpan" id="kobo.272.1">; </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.273.1">transform</span></span><span class="koboSpan" id="kobo.274.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.275.1">scale</span></span><span class="koboSpan" id="kobo.276.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.277.1">1</span></span><span class="koboSpan" id="kobo.278.1">); }
  </span><span class="hljs-number"><span class="koboSpan" id="kobo.279.1">100%</span></span><span class="koboSpan" id="kobo.280.1"> { </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.281.1">opacity</span></span><span class="koboSpan" id="kobo.282.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.283.1">0</span></span><span class="koboSpan" id="kobo.284.1">; </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.285.1">transform</span></span><span class="koboSpan" id="kobo.286.1">: </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.287.1">scale</span></span><span class="koboSpan" id="kobo.288.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.289.1">0.85</span></span><span class="koboSpan" id="kobo.290.1">); }
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.291.1">Creating the CSS classes to apply these animations:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-comment"><span class="koboSpan" id="kobo.292.1">/* For elements that are entering */</span></span>
<span class="hljs-selector-class"><span class="koboSpan" id="kobo.293.1">.fade-in</span></span><span class="koboSpan" id="kobo.294.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.295.1">animation</span></span><span class="koboSpan" id="kobo.296.1">: fadeIn </span><span class="hljs-number"><span class="koboSpan" id="kobo.297.1">200ms</span></span> <span class="hljs-number"><span class="koboSpan" id="kobo.298.1">100ms</span></span><span class="koboSpan" id="kobo.299.1"> forwards;
}
 
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.300.1">/* For elements that are leaving */</span></span>
<span class="hljs-selector-class"><span class="koboSpan" id="kobo.301.1">.fade-out</span></span><span class="koboSpan" id="kobo.302.1"> {
  </span><span class="hljs-attribute"><span class="koboSpan" id="kobo.303.1">animation</span></span><span class="koboSpan" id="kobo.304.1">: fadeOut </span><span class="hljs-number"><span class="koboSpan" id="kobo.305.1">100ms</span></span><span class="koboSpan" id="kobo.306.1"> forwards;
}
</span></code></pre></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.307.1">Then we would have to add and remove the CSS classes on each element as they are </span><strong class="keyWord"><span class="koboSpan" id="kobo.308.1">created</span></strong><span class="koboSpan" id="kobo.309.1"> on the DOM and are </span><strong class="keyWord"><span class="koboSpan" id="kobo.310.1">removed</span></strong><span class="koboSpan" id="kobo.311.1">. </span><span class="koboSpan" id="kobo.311.2">However, Angular handles this process using the built-in </span><code class="inlineCode"><span class="koboSpan" id="kobo.312.1">:enter </span></code><span class="koboSpan" id="kobo.313.1">and </span><code class="inlineCode"><span class="koboSpan" id="kobo.314.1">:leave</span></code><span class="koboSpan" id="kobo.315.1"> states, which get triggered once an item is added or removed from the DOM, respectively.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.316.1">Even with</span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.317.1"> the steps above, more challenges can appear when working with such animations. </span><span class="koboSpan" id="kobo.317.2">Thanks to Angular animations, we can implement these a lot faster.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.318.1">We first used the </span><code class="inlineCode"><span class="koboSpan" id="kobo.319.1">trigger</span></code><span class="koboSpan" id="kobo.320.1"> function to register the animation named </span><code class="inlineCode"><span class="koboSpan" id="kobo.321.1">fadeInOut</span></code><span class="koboSpan" id="kobo.322.1">. </span><span class="koboSpan" id="kobo.322.2">Then we had the </span><code class="inlineCode"><span class="koboSpan" id="kobo.323.1">:enter</span></code><span class="koboSpan" id="kobo.324.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.325.1">:leave</span></code><span class="koboSpan" id="kobo.326.1"> transitions being registered with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.327.1">transition</span></code><span class="koboSpan" id="kobo.328.1"> function. </span><span class="koboSpan" id="kobo.328.2">Finally, we defined the styles and animations for those transitions using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.329.1">style</span></code><span class="koboSpan" id="kobo.330.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.331.1">animate</span></code><span class="koboSpan" id="kobo.332.1"> functions. </span><span class="koboSpan" id="kobo.332.2">Note that we’re using </span><code class="inlineCode"><span class="koboSpan" id="kobo.333.1">'200ms 100ms..'</span></code><span class="koboSpan" id="kobo.334.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.335.1">:enter</span></code><span class="koboSpan" id="kobo.336.1"> transition. </span><code class="inlineCode"><span class="koboSpan" id="kobo.337.1">200ms</span></code><span class="koboSpan" id="kobo.338.1"> is the duration of the transition while </span><code class="inlineCode"><span class="koboSpan" id="kobo.339.1">100ms</span></code><span class="koboSpan" id="kobo.340.1"> is the delay. </span><span class="koboSpan" id="kobo.340.2">We add this </span><code class="inlineCode"><span class="koboSpan" id="kobo.341.1">delay</span></code><span class="koboSpan" id="kobo.342.1"> so we can wait for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.343.1">:leave</span></code><span class="koboSpan" id="kobo.344.1"> transition of the previously shown card to finish before we can move to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.345.1">:enter</span></code><span class="koboSpan" id="kobo.346.1"> transition of the next card to be shown. </span><span class="koboSpan" id="kobo.346.2">Let’s delve deeper into each of the functions we used:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.347.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.348.1">trigger</span></code><span class="koboSpan" id="kobo.349.1"> function: The </span><code class="inlineCode"><span class="koboSpan" id="kobo.350.1">trigger</span></code><span class="koboSpan" id="kobo.351.1"> function is used to define an animation trigger in Angular. </span><span class="koboSpan" id="kobo.351.2">The first argument is the name of the trigger, which will be used in the template to bind the animation to a specific element. </span><span class="koboSpan" id="kobo.351.3">The second argument is an array of state and transition definitions. </span><span class="koboSpan" id="kobo.351.4">For example, </span><code class="inlineCode"><span class="koboSpan" id="kobo.352.1">trigger('fadeInOut', [...])</span></code><span class="koboSpan" id="kobo.353.1"> registers an animation trigger named </span><code class="inlineCode"><span class="koboSpan" id="kobo.354.1">'fadeInOut</span></code><span class="koboSpan" id="kobo.355.1">'.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.356.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.357.1">:enter</span></code><span class="koboSpan" id="kobo.358.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.359.1">:leave</span></code><span class="koboSpan" id="kobo.360.1"> transitions: </span><code class="inlineCode"><span class="koboSpan" id="kobo.361.1">:enter</span></code><span class="koboSpan" id="kobo.362.1"> is an alias for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.363.1">void =&gt; *</span></code><span class="koboSpan" id="kobo.364.1"> state transition. </span><span class="koboSpan" id="kobo.364.2">It represents the state of an element that is being added to the DOM. </span><code class="inlineCode"><span class="koboSpan" id="kobo.365.1">:leave</span></code><span class="koboSpan" id="kobo.366.1"> is an alias for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.367.1">* =&gt; void</span></code><span class="koboSpan" id="kobo.368.1"> state transition. </span><span class="koboSpan" id="kobo.368.2">It represents the state of an element that is being removed from the DOM. </span><span class="koboSpan" id="kobo.368.3">These aliases are useful for animations that are common to elements entering or leaving the view, such as fade-in and fade-out animations.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.369.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.370.1">transition</span></code><span class="koboSpan" id="kobo.371.1"> function: The </span><code class="inlineCode"><span class="koboSpan" id="kobo.372.1">transition</span></code><span class="koboSpan" id="kobo.373.1"> function is used to define the states</span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.374.1"> between which transitions will occur. </span><span class="koboSpan" id="kobo.374.2">It accepts two arguments: the first is a string that defines the state change expression, and the second is an array of animation steps to run when the transition is triggered. </span><span class="koboSpan" id="kobo.374.3">For example, </span><code class="inlineCode"><span class="koboSpan" id="kobo.375.1">transition(':enter', [...])</span></code><span class="koboSpan" id="kobo.376.1"> defines the animation steps that will be executed when an element enters the view.</span></li>
<li class="numberedList"><code class="inlineCode"><span class="koboSpan" id="kobo.377.1">style</span></code><span class="koboSpan" id="kobo.378.1">: The </span><code class="inlineCode"><span class="koboSpan" id="kobo.379.1">style</span></code><span class="koboSpan" id="kobo.380.1"> function is used to define a set of CSS styles that will be used in the animation. </span><span class="koboSpan" id="kobo.380.2">It accepts an object where the keys are CSS properties and the values are the desired values for those properties. </span><span class="koboSpan" id="kobo.380.3">For example, </span><code class="inlineCode"><span class="koboSpan" id="kobo.381.1">style({ opacity: 0, scale: 0.85 })</span></code><span class="koboSpan" id="kobo.382.1"> sets the opacity to </span><code class="inlineCode"><span class="koboSpan" id="kobo.383.1">0</span></code><span class="koboSpan" id="kobo.384.1"> and scales the element down to 85% of its original size.</span></li>
<li class="numberedList"><code class="inlineCode"><span class="koboSpan" id="kobo.385.1">animate</span></code><span class="koboSpan" id="kobo.386.1">: The </span><code class="inlineCode"><span class="koboSpan" id="kobo.387.1">animate</span></code><span class="koboSpan" id="kobo.388.1"> function is used to define the timing and easing for the transition between styles. </span><span class="koboSpan" id="kobo.388.2">The first argument is a string that defines the duration, delay, and easing curve. </span><span class="koboSpan" id="kobo.388.3">For instance, </span><code class="inlineCode"><span class="koboSpan" id="kobo.389.1">200ms 100ms</span></code><span class="koboSpan" id="kobo.390.1"> means the animation will last 200 ms and will start after a delay of 100 ms. </span><span class="koboSpan" id="kobo.390.2">The second argument is the style or a set of styles that the animation will transition to. </span><span class="koboSpan" id="kobo.390.3">For example, </span><code class="inlineCode"><span class="koboSpan" id="kobo.391.1">animate('200ms 100ms', style({ opacity: 1, scale: 1 }))</span></code><span class="koboSpan" id="kobo.392.1"> will transition the element to full opacity and original scale over 300 ms, after waiting for 100 ms.</span></li>
</ol>
<h2 class="heading-2" id="_idParaDest-126"><span class="koboSpan" id="kobo.393.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.394.1">Animations in Angular: </span><a href="https://angular.io/guide/animations"><span class="url"><span class="koboSpan" id="kobo.395.1">https://angular.io/guide/animations</span></span></a></li>
<li class="bulletList"><em class="italic"><span class="koboSpan" id="kobo.396.1">Angular Animations Explained with Examples</span></em><span class="koboSpan" id="kobo.397.1">: </span><a href="https://www.freecodecamp.org/news/angular-animations-explained-with-examples/"><span class="url"><span class="koboSpan" id="kobo.398.1">https://www.freecodecamp.org/news/angular-animations-explained-with-examples/</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-127"><span class="koboSpan" id="kobo.399.1">Working with multi-state animations</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.400.1">In</span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.401.1"> this recipe, we’ll work with Angular animations containing multiple states. </span><span class="koboSpan" id="kobo.401.2">This means that we’ll work with more than two states for a particular item. </span><span class="koboSpan" id="kobo.401.3">We’ll be using the same Facebook and Twitter cards example for this recipe as well.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.402.1">We’ll configure the following states for both cards:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.403.1">The state when a card appears on the screen.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.404.1">The state when the user hovers over a card.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.405.1">The state when the user moves the mouse away from the card.</span></li>
</ul>
<h2 class="heading-2" id="_idParaDest-128"><span class="koboSpan" id="kobo.406.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.407.1">The app that</span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.408.1"> we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.409.1">start/apps/chapter04/ng-multi-state-animations</span></code><span class="koboSpan" id="kobo.410.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.411.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.412.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.413.1">npm run serve ng-multi-state-animations
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.414.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.415.1"><img alt="" role="presentation" src="../Images/B18469_04_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.416.1">Figure 4.2: ng-multi-state-animations app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.417.1">Now that we have the app running locally, let’s look at the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-129"><span class="koboSpan" id="kobo.418.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.419.1">We already have a </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.420.1">working app that has a single animation built for the reach of social cards. </span><span class="koboSpan" id="kobo.420.2">When you tap either the Facebook or Twitter button, you’ll see the respective card appearing with a slide-in animation from left to right. </span><span class="koboSpan" id="kobo.420.3">To keep the recipe simple, we’ll implement two more states and two animations for when the user moves the mouse cursor over the card and when the user moves away from the card. </span><span class="koboSpan" id="kobo.420.4">Let’s add the relevant code in the following steps:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.421.1">We’ll start by adding two </span><code class="inlineCode"><span class="koboSpan" id="kobo.422.1">@HostListener</span></code><span class="koboSpan" id="kobo.423.1"> instances to </span><code class="inlineCode"><span class="koboSpan" id="kobo.424.1">FbCardComponent</span></code><span class="koboSpan" id="kobo.425.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.426.1">components/fb-card/fb-card.component.ts</span></code><span class="koboSpan" id="kobo.427.1"> file, one for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.428.1">mouseenter</span></code><span class="koboSpan" id="kobo.429.1"> event on the card and one for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.430.1">mouseleave</span></code><span class="koboSpan" id="kobo.431.1"> event. </span><span class="koboSpan" id="kobo.431.2">We’ll name the states </span><code class="inlineCode"><span class="koboSpan" id="kobo.432.1">hovered</span></code><span class="koboSpan" id="kobo.433.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.434.1">active</span></code><span class="koboSpan" id="kobo.435.1">, respectively. </span><span class="koboSpan" id="kobo.435.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.436.1">import</span></span><span class="koboSpan" id="kobo.437.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.438.1">Component</span></span><span class="koboSpan" id="kobo.439.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.440.1">HostListener</span></strong><strong class="hljs-slc"> </strong></span><span class="koboSpan" id="kobo.441.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.442.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.443.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.444.1">;
...
</span><span class="koboSpan" id="kobo.444.2">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.445.1">Component</span></span><span class="koboSpan" id="kobo.446.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.447.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.448.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.449.1">FbCardComponent</span></span><span class="koboSpan" id="kobo.450.1"> {
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.451.1">cardState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.452.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.453.1">'active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.454.1"> | </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.455.1">'hovered'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.456.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.457.1">'active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.458.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.459.1">@</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.460.1">HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.461.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.462.1">'mouseenter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.463.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.464.1">onMouseEnter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.465.1">() {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.466.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.467.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.468.1">cardState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.469.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.470.1">'hovered'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.471.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.472.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.473.1">@</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.474.1">HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.475.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.476.1">'mouseleave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.477.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.478.1">onMouseLeave</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.479.1">() {</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.480.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.481.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.482.1">cardState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.483.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.484.1">'active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.485.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.486.1">}</span></strong></span><span class="koboSpan" id="kobo.487.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.488.1">Now, we’ll do the same for </span><code class="inlineCode"><span class="koboSpan" id="kobo.489.1">TwitterCardComponent</span></code><span class="koboSpan" id="kobo.490.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.491.1">components/twitter-card/twitter-card-component.ts</span></code><span class="koboSpan" id="kobo.492.1"> file. </span><span class="koboSpan" id="kobo.492.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.493.1">import</span></span><span class="koboSpan" id="kobo.494.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.495.1">Component</span></span><span class="koboSpan" id="kobo.496.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.497.1">HostListener</span></strong><strong class="hljs-slc"> </strong></span><span class="koboSpan" id="kobo.498.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.499.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.500.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.501.1">;
...
</span><span class="koboSpan" id="kobo.501.2">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.502.1">Component</span></span><span class="koboSpan" id="kobo.503.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.504.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.505.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.506.1">TwitterCardComponent</span></span><span class="koboSpan" id="kobo.507.1"> {
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.508.1">cardState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.509.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.510.1">'active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.511.1"> | </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.512.1">'hovered'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.513.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.514.1">'active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.515.1">;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.516.1">@</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.517.1">HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.518.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.519.1">'mouseenter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.520.1">) </span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.521.1">onMouseEnter</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.522.1">() { </span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.523.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.524.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.525.1">cardState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.526.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.527.1">'hovered'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.528.1">; </span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.529.1">} </span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.530.1">@</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.531.1">HostListener</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.532.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.533.1">'mouseleave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.534.1">) </span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.535.1">onMouseLeave</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.536.1">() { </span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.537.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.538.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.539.1">cardState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.540.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.541.1">'active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.542.1">; </span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.543.1">}</span></strong></span><span class="koboSpan" id="kobo.544.1">
}
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.545.1">There </span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.546.1">should be no visual change so far since we’re only updating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.547.1">cardState</span></code><span class="koboSpan" id="kobo.548.1"> variable to have the hover and active states. </span><span class="koboSpan" id="kobo.548.2">We haven’t defined the transitions yet for the animation.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.549.1">We’ll now define our state for when the user’s cursor enters the card, that is, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.550.1">mouseenter</span></code><span class="koboSpan" id="kobo.551.1"> event. </span><span class="koboSpan" id="kobo.551.2">The state is called </span><code class="inlineCode"><span class="koboSpan" id="kobo.552.1">hovered</span></code><span class="koboSpan" id="kobo.553.1"> and should look as follows in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.554.1">animation.ts</span></code><span class="koboSpan" id="kobo.555.1"> file:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.556.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.557.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.558.1">const</span></span><span class="koboSpan" id="kobo.559.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.560.1">trigger</span></span><span class="koboSpan" id="kobo.561.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.562.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.563.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.564.1">state</span></span><span class="koboSpan" id="kobo.565.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.566.1">'active'</span></span><span class="koboSpan" id="kobo.567.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.568.1">style</span></span><span class="koboSpan" id="kobo.569.1">({
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.570.1">color</span></span><span class="koboSpan" id="kobo.571.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.572.1">'rgb(51, 51, 51)'</span></span><span class="koboSpan" id="kobo.573.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.574.1">backgroundColor</span></span><span class="koboSpan" id="kobo.575.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.576.1">'white'</span></span><span class="koboSpan" id="kobo.577.1">
  })),
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.578.1">state</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.579.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.580.1">'hovered'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.581.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.582.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.583.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.584.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.585.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.586.1">'scale3d(1.05, 1.05, 1.05)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.587.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.588.1">backgroundColor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.589.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.590.1">'#333'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.591.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.592.1">color</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.593.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.594.1">'white'</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.595.1">})),</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.596.1">transition</span></span><span class="koboSpan" id="kobo.597.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.598.1">'void =&gt; active'</span></span><span class="koboSpan" id="kobo.599.1">, [...]),
])
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.600.1">If you refresh the app now, tap either the Facebook or Twitter button, and hover the mouse over the card, you’ll see the card’s UI changing. </span><span class="koboSpan" id="kobo.600.2">That’s because we changed the state to </span><code class="inlineCode"><span class="koboSpan" id="kobo.601.1">hovered</span></code><span class="koboSpan" id="kobo.602.1">. </span><span class="koboSpan" id="kobo.602.2">However, there’s no animation yet between the style changes. </span><span class="koboSpan" id="kobo.602.3">Let’s add the animation in the next step.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.603.1">We’ll add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.604.1">active =&gt; hovered</span></code><span class="koboSpan" id="kobo.605.1"> transition now in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.606.1">animations.ts</span></code><span class="koboSpan" id="kobo.607.1"> file so that we can smoothly navigate from </span><code class="inlineCode"><span class="koboSpan" id="kobo.608.1">active</span></code><span class="koboSpan" id="kobo.609.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.610.1">hovered</span></code><span class="koboSpan" id="kobo.611.1"> state:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.612.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.613.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.614.1">const</span></span><span class="koboSpan" id="kobo.615.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.616.1">trigger</span></span><span class="koboSpan" id="kobo.617.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.618.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.619.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.620.1">state</span></span><span class="koboSpan" id="kobo.621.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.622.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.623.1">active'</span></span><span class="koboSpan" id="kobo.624.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.625.1">style</span></span><span class="koboSpan" id="kobo.626.1">(...)),
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.627.1">state</span></span><span class="koboSpan" id="kobo.628.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.629.1">'hovered'</span></span><span class="koboSpan" id="kobo.630.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.631.1">style</span></span><span class="koboSpan" id="kobo.632.1">(...)),
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.633.1">transition</span></span><span class="koboSpan" id="kobo.634.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.635.1">'void =&gt; active'</span></span><span class="koboSpan" id="kobo.636.1">, [...]),
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.637.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.638.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.639.1">'active =&gt; hovered'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.640.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.641.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.642.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.643.1">'0.3s 0s ease-out'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.644.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.645.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.646.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.647.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.648.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.649.1">'scale3d(1.05, 1.05, 1.05)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.650.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.651.1">backgroundColor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.652.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.653.1">'#333'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.654.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.655.1">color</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.656.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.657.1">'white'</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.658.1">}))</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.659.1">]),</span></strong></span><span class="koboSpan" id="kobo.660.1">
])
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.661.1">You </span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.662.1">should now see the smooth transition on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.663.1">mouseenter</span></code><span class="koboSpan" id="kobo.664.1"> event if you refresh the app.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.665.1">Finally, we’ll add the final transition, </span><code class="inlineCode"><span class="koboSpan" id="kobo.666.1">hovered =&gt;</span></code> <code class="inlineCode"><span class="koboSpan" id="kobo.667.1">active</span></code><span class="koboSpan" id="kobo.668.1">, so when the user leaves the card, we revert to the active state with a smooth animation. </span><span class="koboSpan" id="kobo.668.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.669.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.670.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.671.1">const</span></span><span class="koboSpan" id="kobo.672.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.673.1">trigger</span></span><span class="koboSpan" id="kobo.674.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.675.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.676.1">cardAnimation'</span></span><span class="koboSpan" id="kobo.677.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.678.1">state</span></span><span class="koboSpan" id="kobo.679.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.680.1">'active'</span></span><span class="koboSpan" id="kobo.681.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.682.1">style</span></span><span class="koboSpan" id="kobo.683.1">(...)),
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.684.1">state</span></span><span class="koboSpan" id="kobo.685.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.686.1">'hovered'</span></span><span class="koboSpan" id="kobo.687.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.688.1">style</span></span><span class="koboSpan" id="kobo.689.1">(...)),
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.690.1">transition</span></span><span class="koboSpan" id="kobo.691.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.692.1">'void =&gt; active'</span></span><span class="koboSpan" id="kobo.693.1">, [...]),
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.694.1">transition</span></span><span class="koboSpan" id="kobo.695.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.696.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.697.1">active =&gt; hovered'</span></span><span class="koboSpan" id="kobo.698.1">, [...]),
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.699.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.700.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.701.1">'hovered =&gt; active'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.702.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.703.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.704.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.705.1">'0.3s 0s ease-out'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.706.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.707.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.708.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.709.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.710.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.711.1">'scale3d(1, 1, 1)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.712.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.713.1">color</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.714.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.715.1">'rgb(51, 51, 51)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.716.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.717.1">backgroundColor</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.718.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.719.1">'white'</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.720.1">}))</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.721.1">]),</span></strong></span><span class="koboSpan" id="kobo.722.1">
])
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.723.1">Ta-da! </span><span class="koboSpan" id="kobo.723.2">You now know how to implement different states and different animations on a single element </span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.724.1">using </span><strong class="keyWord"><span class="koboSpan" id="kobo.725.1">Angular animations</span></strong><span class="koboSpan" id="kobo.726.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-130"><span class="koboSpan" id="kobo.727.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.728.1">Angular uses triggers to understand what state the animation is in. </span><span class="koboSpan" id="kobo.728.2">An example syntax looks as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.729.1">&lt;div [@animationTriggerName]=</span><span class="hljs-string"><span class="koboSpan" id="kobo.730.1">"expression"</span></span><span class="koboSpan" id="kobo.731.1">&gt;...&lt;/div&gt;;
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.732.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.733.1">expression</span></code><span class="koboSpan" id="kobo.734.1"> can be a valid JavaScript expression, and it evaluates to the name of the state. </span><span class="koboSpan" id="kobo.734.2">In our case, we bind</span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.735.1"> it to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.736.1">cardState</span></code><span class="koboSpan" id="kobo.737.1"> property, which contains either </span><code class="inlineCode"><span class="koboSpan" id="kobo.738.1">active</span></code><span class="koboSpan" id="kobo.739.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.740.1">hovered</span></code><span class="koboSpan" id="kobo.741.1">. </span><span class="koboSpan" id="kobo.741.2">Therefore, we end up with three transitions for our cards:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.742.1">void =&gt; active</span></code><span class="koboSpan" id="kobo.743.1"> (when the element is added to the DOM and is rendered)</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.744.1">active =&gt; hovered</span></code><span class="koboSpan" id="kobo.745.1"> (when the </span><code class="inlineCode"><span class="koboSpan" id="kobo.746.1">mouseenter</span></code><span class="koboSpan" id="kobo.747.1"> event triggers on the card)</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.748.1">hovered =&gt; active</span></code><span class="koboSpan" id="kobo.749.1"> (when the </span><code class="inlineCode"><span class="koboSpan" id="kobo.750.1">mouseleave</span></code><span class="koboSpan" id="kobo.751.1"> event triggers on the card)</span></li>
</ul>
<h2 class="heading-2" id="_idParaDest-131"><span class="koboSpan" id="kobo.752.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.753.1">Triggering the animation: </span><a href="https://angular.io/guide/animations#triggering-the-animation"><span class="url"><span class="koboSpan" id="kobo.754.1">https://angular.io/guide/animations#triggering-the-animation</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.755.1">Reusable animations: </span><a href="https://angular.io/guide/reusable-animations"><span class="url"><span class="koboSpan" id="kobo.756.1">https://angular.io/guide/reusable-animations</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-132"><span class="koboSpan" id="kobo.757.1">Creating complex Angular animations using keyframes</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.758.1">Since </span><a id="_idIndexMarker238"/><span class="koboSpan" id="kobo.759.1">you already know about Angular animations from the previous recipes, you might be thinking, “That’s easy enough.” </span><span class="koboSpan" id="kobo.759.2">Well, time </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.760.1">to level up your animation skills in this recipe. </span><span class="koboSpan" id="kobo.760.2">You’ll create a complex Angular animation using </span><code class="inlineCode"><span class="koboSpan" id="kobo.761.1">keyframes</span></code><span class="koboSpan" id="kobo.762.1"> in this recipe to get started with writing some advanced animations.</span></p>
<h2 class="heading-2" id="_idParaDest-133"><span class="koboSpan" id="kobo.763.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.764.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.765.1">start/apps/chapter04/ng-animations-keyframes</span></code><span class="koboSpan" id="kobo.766.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.767.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.768.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.769.1">npm run serve ng-animations-keyframes
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.770.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.771.1"><img alt="" role="presentation" src="../Images/B18469_04_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.772.1">Figure 4.3: ng-animations-keyframes app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.773.1">Now that </span><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.774.1">we have the app running locally, let’s </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.775.1">look at the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-134"><span class="koboSpan" id="kobo.776.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.777.1">We have an app right now that has a single transition, that is, </span><code class="inlineCode"><span class="koboSpan" id="kobo.778.1">void =&gt; active</span></code><span class="koboSpan" id="kobo.779.1">, which triggers when the element enters the DOM. </span><span class="koboSpan" id="kobo.779.2">Right now, the animation is pretty simple. </span><span class="koboSpan" id="kobo.779.3">We’ll use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.780.1">keyframes</span></code><span class="koboSpan" id="kobo.781.1"> function to build a complex animation:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.782.1">Let’s begin with adding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.783.1">keyframes</span></code><span class="koboSpan" id="kobo.784.1"> function from </span><code class="inlineCode"><span class="koboSpan" id="kobo.785.1">@angular/animations</span></code><span class="koboSpan" id="kobo.786.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.787.1">animations.ts</span></code><span class="koboSpan" id="kobo.788.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.789.1">import</span></span><span class="koboSpan" id="kobo.790.1"> {
  ...,
  keyframes
} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.791.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.792.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.793.1">@angular/animations'</span></span><span class="koboSpan" id="kobo.794.1">;
...
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.795.1">Now, we’ll convert the single-style animation for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.796.1">void =&gt; transition</span></code><span class="koboSpan" id="kobo.797.1"> to use keyframes as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.798.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.799.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.800.1">const</span></span><span class="koboSpan" id="kobo.801.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.802.1">trigger</span></span><span class="koboSpan" id="kobo.803.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.804.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.805.1">, [
  ...,
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.806.1">transition</span></span><span class="koboSpan" id="kobo.807.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.808.1">'void =&gt; *'</span></span><span class="koboSpan" id="kobo.809.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.810.1">style</span></span><span class="koboSpan" id="kobo.811.1">({ </span><span class="hljs-comment"><span class="koboSpan" id="kobo.812.1">// ← Remove this style</span></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.813.1">transform</span></span><span class="koboSpan" id="kobo.814.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.815.1">'translateX(-200px)'</span></span><span class="koboSpan" id="kobo.816.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.817.1">opacity</span></span><span class="koboSpan" id="kobo.818.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.819.1">0</span></span><span class="koboSpan" id="kobo.820.1">
    }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.821.1">animate</span></span><span class="koboSpan" id="kobo.822.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.823.1">'0.2s ease'</span></span><span class="koboSpan" id="kobo.824.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.825.1">keyframes</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.826.1">([</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.827.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.828.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.829.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.830.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.831.1">'translateX(-200px)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.832.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.833.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.834.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.835.1">0</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.836.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.837.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.838.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.839.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.840.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.841.1">'translateX(0)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.842.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.843.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.844.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.845.1">1</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.846.1">})</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.847.1">]))</span></strong></span><span class="koboSpan" id="kobo.848.1">
  ]),
])
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.849.1">Notice </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.850.1">that previously </span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.851.1">we had to define the initial style and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.852.1">animate </span></code><span class="koboSpan" id="kobo.853.1">function. </span><span class="koboSpan" id="kobo.853.2">Now we can define the same inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.854.1">keyframes</span></code><span class="koboSpan" id="kobo.855.1"> function in chronological order. </span><span class="koboSpan" id="kobo.855.2">If you refresh the app now and try it, you’ll still see the same animation as before. </span><span class="koboSpan" id="kobo.855.3">But now we have it using </span><code class="inlineCode"><span class="koboSpan" id="kobo.856.1">keyframes</span></code><span class="koboSpan" id="kobo.857.1">.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="3"><span class="koboSpan" id="kobo.858.1">Finally, let’s start adding some complex animations. </span><span class="koboSpan" id="kobo.858.2">Let’s start the animation with a scaled-down card by adding </span><code class="inlineCode"><span class="koboSpan" id="kobo.859.1">scale3d</span></code><span class="koboSpan" id="kobo.860.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.861.1">transform</span></code><span class="koboSpan" id="kobo.862.1"> property of </span><code class="inlineCode"><span class="koboSpan" id="kobo.863.1">style</span></code><span class="koboSpan" id="kobo.864.1"> at </span><code class="inlineCode"><span class="koboSpan" id="kobo.865.1">offset: 0</span></code><span class="koboSpan" id="kobo.866.1">. </span><span class="koboSpan" id="kobo.866.2">We’ll also increase the animation time to </span><code class="inlineCode"><span class="koboSpan" id="kobo.867.1">1.5s</span></code><span class="koboSpan" id="kobo.868.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.869.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.870.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.871.1">const</span></span><span class="koboSpan" id="kobo.872.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.873.1">trigger</span></span><span class="koboSpan" id="kobo.874.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.875.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.876.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.877.1">transition</span></span><span class="koboSpan" id="kobo.878.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.879.1">'void =&gt; active'</span></span><span class="koboSpan" id="kobo.880.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.881.1">animate</span></span><span class="koboSpan" id="kobo.882.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.883.1">'</span></span><span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.884.1">1.5s</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.885.1"> ease'</span></span><span class="koboSpan" id="kobo.886.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.887.1">keyframes</span></span><span class="koboSpan" id="kobo.888.1">([
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.889.1">style</span></span><span class="koboSpan" id="kobo.890.1">({
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.891.1">transform</span></span><span class="koboSpan" id="kobo.892.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.893.1">'translateX(-200px)</span></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.894.1">scale3d(0.4,0.4,0.4)</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.895.1">'</span></span><span class="koboSpan" id="kobo.896.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.897.1">offset</span></span><span class="koboSpan" id="kobo.898.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.899.1">0</span></span><span class="koboSpan" id="kobo.900.1">
      }),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.901.1">style</span></span><span class="koboSpan" id="kobo.902.1">({...})
    ]))
  ]),
])
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.903.1">You should now see that the card animation starts with a small card that slides from the left and moves toward the right, increasing in size.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.904.1">Now</span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.905.1"> we’ll implement a </span><em class="italic"><span class="koboSpan" id="kobo.906.1">zig-zag-ish</span></em><span class="koboSpan" id="kobo.907.1"> animation for the appearance of the card instead of the slide-in </span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.908.1">animation. </span><span class="koboSpan" id="kobo.908.2">Let’s add the following keyframe elements to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.909.1">keyframes</span></code><span class="koboSpan" id="kobo.910.1"> array to add a bumpy effect to our animation:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.911.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.912.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.913.1">const</span></span><span class="koboSpan" id="kobo.914.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.915.1">trigger</span></span><span class="koboSpan" id="kobo.916.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.917.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.918.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.919.1">transition</span></span><span class="koboSpan" id="kobo.920.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.921.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.922.1">void =&gt; *'</span></span><span class="koboSpan" id="kobo.923.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.924.1">animate</span></span><span class="koboSpan" id="kobo.925.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.926.1">'1.5s 0s ease'</span></span><span class="koboSpan" id="kobo.927.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.928.1">keyframes</span></span><span class="koboSpan" id="kobo.929.1">([
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.930.1">style</span></span><span class="koboSpan" id="kobo.931.1">({
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.932.1">transform</span></span><span class="koboSpan" id="kobo.933.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.934.1">'translateX(-200px)</span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.935.1">scale3d(0.4,0.4,0.4)'</span></span><span class="koboSpan" id="kobo.936.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.937.1">offset</span></span><span class="koboSpan" id="kobo.938.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.939.1">0</span></span><span class="koboSpan" id="kobo.940.1">
      }),
      </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.941.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.942.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.943.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.944.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.945.1">'translateX(0px) rotate(-90deg)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.946.1">scale3d(0.5, 0.5, 0.5)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.947.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.948.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.949.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.950.1">0.25</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.951.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.952.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.953.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.954.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.955.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.956.1">'translateX(-200px) rotate(90deg)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.957.1">translateY(0) scale3d(0.6, 0.6, 0.6)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.958.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.959.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.960.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.961.1">0.5</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.962.1">}),</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.963.1">style</span></span><span class="koboSpan" id="kobo.964.1">({
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.965.1">transform</span></span><span class="koboSpan" id="kobo.966.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.967.1">'translateX(0)'</span></span><span class="koboSpan" id="kobo.968.1">,
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.969.1">offset</span></span><span class="koboSpan" id="kobo.970.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.971.1">1</span></span><span class="koboSpan" id="kobo.972.1">
      })
    ]))
  ]),
])
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.973.1">If you refresh the app and tap any of the buttons, you should see the card bumping to the right wall, and then to the left wall of the card, before returning to the normal state:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.974.1"><img alt="" role="presentation" src="../Images/B18469_04_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.975.1">Figure 4.4: Card bumping to the right and then the left wall</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.976.1">As</span><a id="_idIndexMarker246"/><span class="koboSpan" id="kobo.977.1"> the last step, we’ll </span><a id="_idIndexMarker247"/><span class="koboSpan" id="kobo.978.1">spin the card clockwise before it returns to its original position. </span><span class="koboSpan" id="kobo.978.2">For that, we’ll use </span><code class="inlineCode"><span class="koboSpan" id="kobo.979.1">offset: 0.75</span></code><span class="koboSpan" id="kobo.980.1">, using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.981.1">rotate</span></code><span class="koboSpan" id="kobo.982.1"> function with some additional angles. </span><span class="koboSpan" id="kobo.982.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.983.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.984.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.985.1">const</span></span><span class="koboSpan" id="kobo.986.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.987.1">trigger</span></span><span class="koboSpan" id="kobo.988.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.989.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.990.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.991.1">transition</span></span><span class="koboSpan" id="kobo.992.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.993.1">'void =&gt; *'</span></span><span class="koboSpan" id="kobo.994.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.995.1">animate</span></span><span class="koboSpan" id="kobo.996.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.997.1">'1.5s 0s ease'</span></span><span class="koboSpan" id="kobo.998.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.999.1">keyframes</span></span><span class="koboSpan" id="kobo.1000.1">([
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1001.1">style</span></span><span class="koboSpan" id="kobo.1002.1">({...}),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1003.1">style</span></span><span class="koboSpan" id="kobo.1004.1">({...}),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1005.1">style</span></span><span class="koboSpan" id="kobo.1006.1">({...}),
      </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1007.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1008.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1009.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1010.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1011.1">'translateX(-100px) rotate(135deg)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1012.1">translateY(0) scale3d(0.6, 0.6, 0.6)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1013.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1014.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1015.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1016.1">0.75</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1017.1">}),</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.1018.1">style</span></span><span class="koboSpan" id="kobo.1019.1">({...})
    ]))
  ]),
])
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1020.1">Awesome! </span><span class="koboSpan" id="kobo.1020.2">You now know how to implement complex animations in Angular using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1021.1">keyframes</span></code><span class="koboSpan" id="kobo.1022.1"> function. </span><span class="koboSpan" id="kobo.1022.2">You will see in the next section how it works.</span></p>
<h2 class="heading-2" id="_idParaDest-135"><span class="koboSpan" id="kobo.1023.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1024.1">For complex </span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.1025.1">animations in Angular, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1026.1">keyframes</span></code><span class="koboSpan" id="kobo.1027.1"> function from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1028.1">@angular/animations</span></code><span class="koboSpan" id="kobo.1029.1"> package is an amazing way of providing </span><a id="_idIndexMarker249"/><span class="koboSpan" id="kobo.1030.1">different timing offsets for the animation throughout its journey. </span><span class="koboSpan" id="kobo.1030.2">We can define the offsets using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1031.1">style</span></code><span class="koboSpan" id="kobo.1032.1"> function, which returns an object of type </span><code class="inlineCode"><span class="koboSpan" id="kobo.1033.1">AnimationStyleMetadata</span></code><span class="koboSpan" id="kobo.1034.1">. </span><span class="koboSpan" id="kobo.1034.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1035.1">style</span></code><span class="koboSpan" id="kobo.1036.1"> function takes tokens as inputs, which are a key-value pair where the keys are of the string type and the value can be either a string or a number. </span><span class="koboSpan" id="kobo.1036.2">Essentially, a token represents a CSS property. </span><span class="koboSpan" id="kobo.1036.3">This allows us to pass the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1037.1">offset</span></code><span class="koboSpan" id="kobo.1038.1"> property as shown in the recipe, which can have a value between </span><code class="inlineCode"><span class="koboSpan" id="kobo.1039.1">0</span></code><span class="koboSpan" id="kobo.1040.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1041.1">1</span></code><span class="koboSpan" id="kobo.1042.1">, reflecting the timing from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1043.1">0%</span></code><span class="koboSpan" id="kobo.1044.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1045.1">100%</span></code><span class="koboSpan" id="kobo.1046.1"> of the animation. </span><span class="koboSpan" id="kobo.1046.2">Thus, we can define different styles for different offsets to create advanced animations.</span></p>
<h2 class="heading-2" id="_idParaDest-136"><span class="koboSpan" id="kobo.1047.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1048.1">Animations in Angular: </span><a href="https://angular.io/guide/animations"><span class="url"><span class="koboSpan" id="kobo.1049.1">https://angular.io/guide/animations</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1050.1">Angular Animations Explained with Examples: </span><a href="https://www.freecodecamp.org/news/angular-animations-explained-with-examples/"><span class="url"><span class="koboSpan" id="kobo.1051.1">https://www.freecodecamp.org/news/angular-animations-explained-with-examples/</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-137"><span class="koboSpan" id="kobo.1052.1">Animating lists in Angular using stagger animations</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1053.1">No matter</span><a id="_idIndexMarker250"/><span class="koboSpan" id="kobo.1054.1"> what kind of web application you build today, you are likely to implement some sort of list in it. </span><span class="koboSpan" id="kobo.1054.2">And to make those lists even</span><a id="_idIndexMarker251"/><span class="koboSpan" id="kobo.1055.1"> better, why not implement elegant animations for them? </span><span class="koboSpan" id="kobo.1055.2">In this recipe, you’ll learn how to animate lists in Angular using stagger animations.</span></p>
<h2 class="heading-2" id="_idParaDest-138"><span class="koboSpan" id="kobo.1056.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1057.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1058.1">start/apps/chapter04/ng-animating-lists </span></code><span class="koboSpan" id="kobo.1059.1">inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1060.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1061.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1062.1">npm run serve ng-animating-lists
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1063.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1064.1"><img alt="" role="presentation" src="../Images/B18469_04_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1065.1">Figure 4.5: ng-animating-lists app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1066.1">Now that</span><a id="_idIndexMarker252"/><span class="koboSpan" id="kobo.1067.1"> we have the app running locally, let’s </span><a id="_idIndexMarker253"/><span class="koboSpan" id="kobo.1068.1">see the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-139"><span class="koboSpan" id="kobo.1069.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1070.1">We have an app right now that has a list of bucket items. </span><span class="koboSpan" id="kobo.1070.2">We need to animate the list using staggering animations. </span><span class="koboSpan" id="kobo.1070.3">We’ll be doing this step by step. </span><span class="koboSpan" id="kobo.1070.4">I’m excited – are you?</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1071.1">Cool. </span><span class="koboSpan" id="kobo.1071.2">We’ll go through the following steps for the recipe:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1072.1">First, let’s provide Angular Animations using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1073.1">provideAnimations</span></code><span class="koboSpan" id="kobo.1074.1"> function from Angular in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1075.1">src/app/app.config.ts</span></code><span class="koboSpan" id="kobo.1076.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1077.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1078.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1079.1"> { provideAnimations } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1080.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1081.1">'@angular/platform-browser/animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1082.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1083.1">import</span></span><span class="koboSpan" id="kobo.1084.1"> { appRoutes } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1085.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1086.1">'./app.routes'</span></span><span class="koboSpan" id="kobo.1087.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1088.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1089.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1090.1">appConfig</span></span><span class="koboSpan" id="kobo.1091.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1092.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.1093.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1094.1">providers</span></span><span class="koboSpan" id="kobo.1095.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1096.1">provideRouter</span></span><span class="koboSpan" id="kobo.1097.1">(appRoutes,
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1098.1">withEnabledBlockingInitialNavigation</span></span><span class="koboSpan" id="kobo.1099.1">()),
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1100.1">provideAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1101.1">()</span></strong></span><span class="koboSpan" id="kobo.1102.1">
  ],
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1103.1">Now, create a file named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1104.1">animations.ts</span></code><span class="koboSpan" id="kobo.1105.1"> in the project’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.1106.1">app </span></code><span class="koboSpan" id="kobo.1107.1">folder and add the</span><a id="_idIndexMarker254"/><span class="koboSpan" id="kobo.1108.1"> following code to register a basic list item animation named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1109.1">listItemAnimation</span></code><span class="koboSpan" id="kobo.1110.1">:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1111.1">import</span></span><span class="koboSpan" id="kobo.1112.1"> { trigger, style, animate, transition } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1113.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1114.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1115.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1116.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1117.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1118.1">ANIMATIONS</span></span><span class="koboSpan" id="kobo.1119.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1120.1">LIST_ITEM_ANIMATION</span></span><span class="koboSpan" id="kobo.1121.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1122.1">trigger</span></span><span class="koboSpan" id="kobo.1123.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1124.1">'listItemAnimation'</span></span><span class="koboSpan" id="kobo.1125.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1126.1">transition</span></span><span class="koboSpan" id="kobo.1127.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1128.1">':enter'</span></span><span class="koboSpan" id="kobo.1129.1">, [
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1130.1">style</span></span><span class="koboSpan" id="kobo.1131.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1132.1">opacity</span></span><span class="koboSpan" id="kobo.1133.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1134.1">0</span></span><span class="koboSpan" id="kobo.1135.1"> }),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1136.1">animate</span></span><span class="koboSpan" id="kobo.1137.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1138.1">'0.5s ease'</span></span><span class="koboSpan" id="kobo.1139.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1140.1">style</span></span><span class="koboSpan" id="kobo.1141.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1142.1">opacity</span></span><span class="koboSpan" id="kobo.1143.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1144.1">1</span></span><span class="koboSpan" id="kobo.1145.1"> })),
    ]),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1146.1">transition</span></span><span class="koboSpan" id="kobo.1147.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1148.1">':leave'</span></span><span class="koboSpan" id="kobo.1149.1">, [
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1150.1">style</span></span><span class="koboSpan" id="kobo.1151.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1152.1">opacity</span></span><span class="koboSpan" id="kobo.1153.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1154.1">1</span></span><span class="koboSpan" id="kobo.1155.1"> }),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1156.1">animate</span></span><span class="koboSpan" id="kobo.1157.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1158.1">'0.5s ease'</span></span><span class="koboSpan" id="kobo.1159.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1160.1">style</span></span><span class="koboSpan" id="kobo.1161.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1162.1">opacity</span></span><span class="koboSpan" id="kobo.1163.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1164.1">0</span></span><span class="koboSpan" id="kobo.1165.1"> })),
    ]),
  ]),
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1166.1">Now, we’ll </span><a id="_idIndexMarker255"/><span class="koboSpan" id="kobo.1167.1">add the animation to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1168.1">BucketComponent</span></code><span class="koboSpan" id="kobo.1169.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1170.1">app/bucket/bucket.component.ts</span></code><span class="koboSpan" id="kobo.1171.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1172.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1173.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1174.1"> { </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1175.1">ANIMATIONS</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1176.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1177.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1178.1">'../../../constants/animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1179.1">;</span></strong></span><span class="koboSpan" id="kobo.1180.1">
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1181.1">Component</span></span><span class="koboSpan" id="kobo.1182.1">({
  ...
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1183.1">animations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1184.1">: [</span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1185.1">ANIMATIONS</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1186.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1187.1">LIST_ITEM_ANIMATION</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1188.1">]</span></strong></span><span class="koboSpan" id="kobo.1189.1">
})
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1190.1">Since we have the animation imported into the component, we can use it in the template now.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.1191.1">Let’s add the animation to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1192.1">html</span></code><span class="koboSpan" id="kobo.1193.1"> element, with the class </span><code class="inlineCode"><span class="koboSpan" id="kobo.1194.1">fruits__item</span></code><span class="koboSpan" id="kobo.1195.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1196.1">bucket.component.html</span></code><span class="koboSpan" id="kobo.1197.1"> file, as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1198.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1199.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1200.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1201.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1202.1">"fruits__item"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1203.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1204.1">ngFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1205.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1206.1">"let item of bucket"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1207.1">@</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1208.1">listItemAnimation</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1209.1">&gt;</span></span><span class="koboSpan" id="kobo.1210.1">
  ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1211.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1212.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1213.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1214.1">If you now refresh the app and add an item to the bucket list, you should see it appear with a fade-in effect. </span><span class="koboSpan" id="kobo.1214.2">And if you delete an item, you should see it disappear with the animation as well.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="5"><span class="koboSpan" id="kobo.1215.1">We’ll </span><a id="_idIndexMarker256"/><span class="koboSpan" id="kobo.1216.1">modify </span><code class="inlineCode"><span class="koboSpan" id="kobo.1217.1">LIST_ITEM_ANIMATION</span></code><span class="koboSpan" id="kobo.1218.1"> now to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1219.1">stagger</span></code><span class="koboSpan" id="kobo.1220.1"> function. </span><span class="koboSpan" id="kobo.1220.2">This is because the staggering</span><a id="_idIndexMarker257"/><span class="koboSpan" id="kobo.1221.1"> animation is applied on the list, and not the list items. </span><span class="koboSpan" id="kobo.1221.2">First, we need to import the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1222.1">stagger</span></code><span class="koboSpan" id="kobo.1223.1"> function from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1224.1">@angular/animations</span></code><span class="koboSpan" id="kobo.1225.1">. </span><span class="koboSpan" id="kobo.1225.2">Then we need to remove everything from the trigger array, and then create a wildcard transition for the list as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1226.1">import</span></span><span class="koboSpan" id="kobo.1227.1"> {
  ...,
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1228.1">stagger,</span></strong></span><span class="koboSpan" id="kobo.1229.1">
} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1230.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1231.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1232.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1233.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1234.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1235.1">ANIMATIONS</span></span><span class="koboSpan" id="kobo.1236.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1237.1">LIST_ITEM_ANIMATION</span></span><span class="koboSpan" id="kobo.1238.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1239.1">trigger</span></span><span class="koboSpan" id="kobo.1240.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1241.1">'listItemAnimation'</span></span><span class="koboSpan" id="kobo.1242.1">, [
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1243.1">transition</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1244.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1245.1">'* &lt;=&gt; *'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1246.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1247.1">// we'll add more code here</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1248.1">]),</span></strong></span><span class="koboSpan" id="kobo.1249.1">
  ]),
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1250.1">Now we’ll add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1251.1">query</span></code><span class="koboSpan" id="kobo.1252.1"> for what happens when a new item is added to the list. </span><span class="koboSpan" id="kobo.1252.2">We’ll use a staggering animation here. </span><span class="koboSpan" id="kobo.1252.3">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1253.1">import</span></span><span class="koboSpan" id="kobo.1254.1"> { trigger, style, animate, transition, stagger, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1255.1">query </span></strong></span><span class="koboSpan" id="kobo.1256.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1257.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1258.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1259.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1260.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1261.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1262.1">ANIMATIONS</span></span><span class="koboSpan" id="kobo.1263.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1264.1">LIST_ITEM_ANIMATION</span></span><span class="koboSpan" id="kobo.1265.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1266.1">trigger</span></span><span class="koboSpan" id="kobo.1267.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1268.1">'listItemAnimation'</span></span><span class="koboSpan" id="kobo.1269.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1270.1">transition</span></span><span class="koboSpan" id="kobo.1271.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1272.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1273.1">, [
      </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1274.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1275.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1276.1">':enter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1277.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1278.1">[</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1279.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1280.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1281.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1282.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1283.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1284.1"> }),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1285.1">stagger</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1286.1">(</span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1287.1">100</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1288.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1289.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1290.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1291.1">'0.5s ease'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1292.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1293.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1294.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1295.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1296.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1297.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1298.1"> }))</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1299.1">]),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1300.1">],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1301.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1302.1">optional</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1303.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1304.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1305.1"> }</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1306.1">),</span></strong></span><span class="koboSpan" id="kobo.1307.1">
    ]),
  ]),
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1308.1">Now we’ll </span><a id="_idIndexMarker258"/><span class="koboSpan" id="kobo.1309.1">add the query for when an item leaves the list. </span><span class="koboSpan" id="kobo.1309.2">The code should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1310.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1311.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1312.1">ANIMATIONS</span></span><span class="koboSpan" id="kobo.1313.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1314.1">LIST_ITEM_ANIMATION</span></span><span class="koboSpan" id="kobo.1315.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1316.1">trigger</span></span><span class="koboSpan" id="kobo.1317.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1318.1">'listItemAnimation'</span></span><span class="koboSpan" id="kobo.1319.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1320.1">transition</span></span><span class="koboSpan" id="kobo.1321.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1322.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1323.1">, [
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1324.1">query</span></span><span class="koboSpan" id="kobo.1325.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1326.1">':enter'</span></span><span class="koboSpan" id="kobo.1327.1">, [...],
        { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1328.1">optional</span></span><span class="koboSpan" id="kobo.1329.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1330.1">true</span></span><span class="koboSpan" id="kobo.1331.1"> }
      ),
      </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1332.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1333.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1334.1">':leave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1335.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1336.1">[</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1337.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1338.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1339.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1340.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1341.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1342.1"> }),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1343.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1344.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1345.1">'0.5s ease'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1346.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1347.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1348.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1349.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1350.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1351.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1352.1"> }))</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1353.1">],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1354.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1355.1">optional</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1356.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1357.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1358.1"> }</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1359.1">),</span></strong></span><span class="koboSpan" id="kobo.1360.1">
    ]),
  ]),
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1361.1">Now </span><a id="_idIndexMarker259"/><span class="koboSpan" id="kobo.1362.1">we can apply the animation to the list itself. </span><span class="koboSpan" id="kobo.1362.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1363.1">bucket.component.html</span></code><span class="koboSpan" id="kobo.1364.1"> as follows to put the animation on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1365.1">div</span></code><span class="koboSpan" id="kobo.1366.1"> with the class </span><code class="inlineCode"><span class="koboSpan" id="kobo.1367.1">fruits</span></code><span class="koboSpan" id="kobo.1368.1"> instead:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1369.1">  ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1370.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1371.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1372.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1373.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1374.1">"fruits"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1375.1"> *</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1376.1">ngIf</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1377.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1378.1">"$bucket | async as bucket"</span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1379.1">[@</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1380.1">listItemAnimation</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1381.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1382.1">"bucket.length"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1383.1">&gt;</span></span><span class="koboSpan" id="kobo.1384.1">
    ...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1385.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1386.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1387.1">&gt;</span></span><span class="koboSpan" id="kobo.1388.1">
...
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1389.1">Notice that we’re binding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1390.1">[@ listAnimationlistItemAnimation]</span></code><span class="koboSpan" id="kobo.1391.1"> property to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1392.1">bucket.length</span></code><span class="koboSpan" id="kobo.1393.1">. </span><span class="koboSpan" id="kobo.1393.2">This will make sure that the animation triggers whenever the length of the bucket changes, that is, when an item is added or removed from the bucket. </span><span class="koboSpan" id="kobo.1393.3">And this is possible because of the transition </span><code class="inlineCode"><span class="koboSpan" id="kobo.1394.1">('* &lt;=&gt; *')</span></code><span class="koboSpan" id="kobo.1395.1">.</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1396.1">Awesome! </span><span class="koboSpan" id="kobo.1396.2">You now know how to implement staggering animations for lists in Angular. </span><span class="koboSpan" id="kobo.1396.3">You’ll see in the next section how it works.</span></p>
<h2 class="heading-2" id="_idParaDest-140"><span class="koboSpan" id="kobo.1397.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1398.1">Stagger animations</span><a id="_idIndexMarker260"/><span class="koboSpan" id="kobo.1399.1"> only work inside </span><code class="inlineCode"><span class="koboSpan" id="kobo.1400.1">query</span></code><span class="koboSpan" id="kobo.1401.1"> functions and are applied on the list (containing the items) instead of the items themselves. </span><span class="koboSpan" id="kobo.1401.2">To search or query the items, we first use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1402.1">query</span></code><span class="koboSpan" id="kobo.1403.1"> function. </span><span class="koboSpan" id="kobo.1403.2">Then we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1404.1">stagger</span></code><span class="koboSpan" id="kobo.1405.1"> function to define how many milliseconds of staggering we want before the animation starts for the next list item. </span><span class="koboSpan" id="kobo.1405.2">We also use the animation in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1406.1">stagger</span></code><span class="koboSpan" id="kobo.1407.1"> functions to define the animation for each element found in the query. </span><span class="koboSpan" id="kobo.1407.2">Notice that we’re using </span><code class="inlineCode"><span class="koboSpan" id="kobo.1408.1">{</span></code> <code class="inlineCode"><span class="koboSpan" id="kobo.1409.1">optional: true</span></code> <code class="inlineCode"><span class="koboSpan" id="kobo.1410.1">}</span></code><span class="koboSpan" id="kobo.1411.1"> for both the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1412.1">:enter</span></code><span class="koboSpan" id="kobo.1413.1"> query and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1414.1">:leave</span></code><span class="koboSpan" id="kobo.1415.1"> query. </span><span class="koboSpan" id="kobo.1415.2">We’re using it because if there is no item to animate, either when the app starts or if all items are removed, Angular throws an error because it can’t find anything to animate.</span></p>
<h2 class="heading-2" id="_idParaDest-141"><span class="koboSpan" id="kobo.1416.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1417.1">Animations in Angular: </span><a href="https://angular.io/guide/animations"><span class="url"><span class="koboSpan" id="kobo.1418.1">https://angular.io/guide/animations</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1419.1">Angular animations stagger docs: </span><a href="https://angular.io/api/animations/stagger "><span class="url"><span class="koboSpan" id="kobo.1420.1">https://angular.io/api/animations/stagger</span></span></a></li>
</ul>
<h1 class="heading-1" id="_idParaDest-142"><span class="koboSpan" id="kobo.1421.1">Sequential vs parallel animations in Angular</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1422.1">In this recipe, you’ll</span><a id="_idIndexMarker261"/><span class="koboSpan" id="kobo.1423.1"> learn how to run Angular animations in a sequence vs in parallel. </span><span class="koboSpan" id="kobo.1423.2">This is handy for when we want to have one</span><a id="_idIndexMarker262"/><span class="koboSpan" id="kobo.1424.1"> animation finished before we start the next one, or to run the animations simultaneously.</span></p>
<h2 class="heading-2" id="_idParaDest-143"><span class="koboSpan" id="kobo.1425.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1426.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1427.1">start/apps/chapter04/ng-seq-parallel-animations</span></code><span class="koboSpan" id="kobo.1428.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1429.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1430.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1431.1">npm run serve ng-seq-parallel-animations
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1432.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1433.1"><img alt="" role="presentation" src="../Images/B18469_04_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1434.1">Figure 4.6: ng-seq-parallel-animations app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1435.1">Now that we </span><a id="_idIndexMarker263"/><span class="koboSpan" id="kobo.1436.1">have the app running locally, let’s see the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-144"><span class="koboSpan" id="kobo.1437.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1438.1">We have </span><a id="_idIndexMarker264"/><span class="koboSpan" id="kobo.1439.1">an app that displays the two social cards we used in the previous recipes. </span><span class="koboSpan" id="kobo.1439.2">One for Facebook and one for Twitter.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.1440.1">To run the animations sequentially and in parallel for both cards, we will use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1441.1">query</span></code><span class="koboSpan" id="kobo.1442.1"> function to configure the animations sequentially. </span><span class="koboSpan" id="kobo.1442.2">And then we will use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1443.1">group</span></code><span class="koboSpan" id="kobo.1444.1"> function to run them in parallel. </span><span class="koboSpan" id="kobo.1444.2">Let’s get started:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1445.1">First, let’s provide Angular animations using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1446.1">provideAnimations</span></code><span class="koboSpan" id="kobo.1447.1"> function from Angular in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1448.1">src/app/app.config.ts</span></code><span class="koboSpan" id="kobo.1449.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1450.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1451.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1452.1"> { provideAnimations } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1453.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1454.1">'@angular/platform-browser/animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1455.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1456.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1457.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1458.1">appConfig</span></span><span class="koboSpan" id="kobo.1459.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1460.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.1461.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1462.1">providers</span></span><span class="koboSpan" id="kobo.1463.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1464.1">provideRouter</span></span><span class="koboSpan" id="kobo.1465.1">(appRoutes,
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1466.1">withEnabledBlockingInitialNavigation</span></span><span class="koboSpan" id="kobo.1467.1">())</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1468.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1469.1">provideAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1470.1">()</span></strong></span><span class="koboSpan" id="kobo.1471.1">
  ],
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1472.1">We will </span><a id="_idIndexMarker265"/><span class="koboSpan" id="kobo.1473.1">create a simple wrapper </span><a id="_idIndexMarker266"/><span class="koboSpan" id="kobo.1474.1">transition to handle the cards entering and leaving the DOM. </span><span class="koboSpan" id="kobo.1474.2">Afterward, we’ll handle how they can be triggered together when the current card leaves the view. </span><span class="koboSpan" id="kobo.1474.3">Create a new file named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1475.1">animations.ts</span></code><span class="koboSpan" id="kobo.1476.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1477.1">app </span></code><span class="koboSpan" id="kobo.1478.1">folder. </span><span class="koboSpan" id="kobo.1478.2">Add the following code to it:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1479.1">import</span></span><span class="koboSpan" id="kobo.1480.1"> { trigger, style, transition, animate, query, group, keyframes } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1481.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1482.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1483.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1484.1">const</span></span><span class="koboSpan" id="kobo.1485.1"> duration = </span><span class="hljs-string"><span class="koboSpan" id="kobo.1486.1">'1.5s'</span></span><span class="koboSpan" id="kobo.1487.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1488.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1489.1">const</span></span><span class="koboSpan" id="kobo.1490.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1491.1">trigger</span></span><span class="koboSpan" id="kobo.1492.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1493.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.1494.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1495.1">transition</span></span><span class="koboSpan" id="kobo.1496.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1497.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1498.1">, [
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1499.1">// more code here later</span></span><span class="koboSpan" id="kobo.1500.1">
  ]),
]);
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1501.1">Now let’s add a query for when the card leaves the view. </span><span class="koboSpan" id="kobo.1501.2">Inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1502.1">transition</span></code><span class="koboSpan" id="kobo.1503.1"> array, add the following </span><code class="inlineCode"><span class="koboSpan" id="kobo.1504.1">query</span></code><span class="koboSpan" id="kobo.1505.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1506.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1507.1">const</span></span><span class="koboSpan" id="kobo.1508.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1509.1">trigger</span></span><span class="koboSpan" id="kobo.1510.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1511.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1512.1">cardAnimation'</span></span><span class="koboSpan" id="kobo.1513.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1514.1">transition</span></span><span class="koboSpan" id="kobo.1515.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1516.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1517.1">, [
     </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1518.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1519.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1520.1">':leave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1521.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1522.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1523.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1524.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1525.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1526.1">'translateX(0)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1527.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1528.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1529.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1530.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1531.1"> }),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1532.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1533.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1534.1">`</span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1535.1">${duration}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1536.1"> ease`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1537.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1538.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1539.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1540.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1541.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1542.1">'translateX(100%)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1543.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1544.1">})</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1545.1">),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1546.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1547.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1548.1">`</span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1549.1">${duration}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1550.1"> ease`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1551.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1552.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1553.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1554.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1555.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1556.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1557.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1558.1">})</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1559.1">),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1560.1">],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1561.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1562.1">optional</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1563.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1564.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1565.1"> }</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1566.1">)</span></strong></span><span class="koboSpan" id="kobo.1567.1">
  ]),
]);
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1568.1">We will import the animation in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1569.1">app.component.ts</span></code><span class="koboSpan" id="kobo.1570.1"> file and add it to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1571.1">animations</span></code><span class="koboSpan" id="kobo.1572.1"> array as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1573.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1574.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1575.1"> { cardAnimation } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1576.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1577.1">'./animation'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1578.1">;</span></strong></span><span class="koboSpan" id="kobo.1579.1">
...
</span><span class="koboSpan" id="kobo.1579.2">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.1580.1">Component</span></span><span class="koboSpan" id="kobo.1581.1">({
  ...
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1582.1">animations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1583.1">: [cardAnimation],</span></strong></span><span class="koboSpan" id="kobo.1584.1">
  ...
</span><span class="koboSpan" id="kobo.1584.2">})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1585.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1586.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1587.1">AppComponent</span></span><span class="koboSpan" id="kobo.1588.1"> {...}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1589.1">Now </span><a id="_idIndexMarker267"/><span class="koboSpan" id="kobo.1590.1">we’ll update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1591.1">app.component.html</span></code><span class="koboSpan" id="kobo.1592.1"> to </span><a id="_idIndexMarker268"/><span class="koboSpan" id="kobo.1593.1">use the animation on the element with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1594.1">card-container</span></code><span class="koboSpan" id="kobo.1595.1"> class. </span><span class="koboSpan" id="kobo.1595.2">Update the file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1596.1">...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.1597.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1598.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1599.1">&gt;</span></span><span class="koboSpan" id="kobo.1600.1">
  …
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1601.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1602.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1603.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1604.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1605.1">"card-container relative h-[600px] w-full </span></span>
<span class="hljs-string"><span class="koboSpan" id="kobo.1606.1">overflow-hidden py-4" </span></span>
<span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1607.1">[@</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1608.1">cardAnimation</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1609.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1610.1">"selectedCardType"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1611.1">&gt;</span></span><span class="koboSpan" id="kobo.1612.1">
    ...
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1613.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1614.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1615.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1616.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1617.1">main</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1618.1">&gt;</span></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1619.1">You should be able to see the animation now by clicking the Facebook and Twitter buttons. </span><span class="koboSpan" id="kobo.1619.2">That is, the card slides from its position to the right of the screen. </span><span class="koboSpan" id="kobo.1619.3">However, it doesn’t look pretty.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="6"><span class="koboSpan" id="kobo.1620.1">Let’s add another query for when the next card enters the view. </span><span class="koboSpan" id="kobo.1620.2">We’ll first make sure that the card is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1621.1">invisible</span></code><span class="koboSpan" id="kobo.1622.1"> when starting to enter the DOM. </span><span class="koboSpan" id="kobo.1622.2">Replace the animation in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1623.1">animations.ts</span></code><span class="koboSpan" id="kobo.1624.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1625.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1626.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1627.1">const</span></span><span class="koboSpan" id="kobo.1628.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1629.1">trigger</span></span><span class="koboSpan" id="kobo.1630.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1631.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.1632.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1633.1">transition</span></span><span class="koboSpan" id="kobo.1634.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1635.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1636.1">, [
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1637.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1638.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1639.1">':enter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1640.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1641.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1642.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1643.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1644.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1645.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1646.1"> }),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1647.1">]),</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.1648.1">query</span></span><span class="koboSpan" id="kobo.1649.1">( </span><span class="hljs-string"><span class="koboSpan" id="kobo.1650.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1651.1">:leave'</span></span><span class="koboSpan" id="kobo.1652.1">, [
      ...
    </span><span class="koboSpan" id="kobo.1652.2">]),
]);
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1653.1">Now add the second </span><code class="inlineCode"><span class="koboSpan" id="kobo.1654.1">query</span></code><span class="koboSpan" id="kobo.1655.1"> for the card to be entered in the screen. </span><span class="koboSpan" id="kobo.1655.2">We’ll make sure it</span><a id="_idIndexMarker269"/><span class="koboSpan" id="kobo.1656.1"> slides in from the</span><a id="_idIndexMarker270"/><span class="koboSpan" id="kobo.1657.1"> left and becomes visible slowly. </span><span class="koboSpan" id="kobo.1657.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1658.1">animations.ts</span></code><span class="koboSpan" id="kobo.1659.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1660.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1661.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1662.1">const</span></span><span class="koboSpan" id="kobo.1663.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1664.1">trigger</span></span><span class="koboSpan" id="kobo.1665.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1666.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.1667.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1668.1">transition</span></span><span class="koboSpan" id="kobo.1669.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1670.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1671.1">, [    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1672.1">query</span></span><span class="koboSpan" id="kobo.1673.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1674.1">':enter'</span></span><span class="koboSpan" id="kobo.1675.1">, [...]),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1676.1">query</span></span><span class="koboSpan" id="kobo.1677.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1678.1">':leave'</span></span><span class="koboSpan" id="kobo.1679.1">, [...]),
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1680.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1681.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1682.1">':enter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1683.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1684.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1685.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1686.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1687.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1688.1">'translateX(-100%)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1689.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1690.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1691.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1692.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1693.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1694.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1695.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1696.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1697.1">`</span></strong><strong class="hljs-subst-slc"><span class="koboSpan" id="kobo.1698.1">${duration}</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1699.1"> ease`</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1700.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1701.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1702.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1703.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1704.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1705.1">'translateX(0)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1706.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1707.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1708.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1709.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1710.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1711.1">})</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1712.1">),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1713.1">],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1714.1">{ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1715.1">optional</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1716.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1717.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1718.1"> }</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1719.1">),</span></strong></span><span class="koboSpan" id="kobo.1720.1">
  ]),
]);
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1721.1">You’ll notice that the animations are working now. </span><span class="koboSpan" id="kobo.1721.2">However, they are really slow. </span><span class="koboSpan" id="kobo.1721.3">That is, the next card takes a lot of time to appear after the current card has left the screen. </span><span class="koboSpan" id="kobo.1721.4">That’s because they are all running in sequence.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="8"><span class="koboSpan" id="kobo.1722.1">We can wrap the second and third queries in a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1723.1">group</span></code><span class="koboSpan" id="kobo.1724.1"> function to run them in parallel. </span><span class="koboSpan" id="kobo.1724.2">Update the code in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1725.1">animations.ts</span></code><span class="koboSpan" id="kobo.1726.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1727.1">import</span></span><span class="koboSpan" id="kobo.1728.1"> { ..., </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1729.1">group </span></strong></span><span class="koboSpan" id="kobo.1730.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1731.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1732.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1733.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1734.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1735.1">const</span></span><span class="koboSpan" id="kobo.1736.1"> cardAnimation = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1737.1">trigger</span></span><span class="koboSpan" id="kobo.1738.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1739.1">'cardAnimation'</span></span><span class="koboSpan" id="kobo.1740.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1741.1">transition</span></span><span class="koboSpan" id="kobo.1742.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1743.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1744.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1745.1">query</span></span><span class="koboSpan" id="kobo.1746.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1747.1">':enter'</span></span><span class="koboSpan" id="kobo.1748.1">, [...]),
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1749.1">group</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1750.1">([</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.1751.1">query</span></span><span class="koboSpan" id="kobo.1752.1">( </span><span class="hljs-string"><span class="koboSpan" id="kobo.1753.1">':leave'</span></span><span class="koboSpan" id="kobo.1754.1">, [...], { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1755.1">optional</span></span><span class="koboSpan" id="kobo.1756.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1757.1">true</span></span><span class="koboSpan" id="kobo.1758.1"> }),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1759.1">query</span></span><span class="koboSpan" id="kobo.1760.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1761.1">':enter'</span></span><span class="koboSpan" id="kobo.1762.1">, [...], { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1763.1">optional</span></span><span class="koboSpan" id="kobo.1764.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1765.1">true</span></span><span class="koboSpan" id="kobo.1766.1"> }),
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1767.1">]),</span></strong></span><span class="koboSpan" id="kobo.1768.1">
  ]),
]);
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1769.1">And boom! </span><span class="koboSpan" id="kobo.1769.2">You </span><a id="_idIndexMarker271"/><span class="koboSpan" id="kobo.1770.1">can now see that the animations are running in parallel and are not waiting for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1771.1">:leave</span></code><span class="koboSpan" id="kobo.1772.1"> transition to be finished before the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1773.1">:enter</span></code><span class="koboSpan" id="kobo.1774.1"> transition is executed.</span></p>
<h2 class="heading-2" id="_idParaDest-145"><span class="koboSpan" id="kobo.1775.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1776.1">Animations in Angular</span><a id="_idIndexMarker272"/><span class="koboSpan" id="kobo.1777.1"> run in sequence by default. </span><span class="koboSpan" id="kobo.1777.2">If a transition has more than one step, i.e., </span><code class="inlineCode"><span class="koboSpan" id="kobo.1778.1">style</span></code><span class="koboSpan" id="kobo.1779.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1780.1">animate</span></code><span class="koboSpan" id="kobo.1781.1"> usages, the animations will run in sequence. </span><span class="koboSpan" id="kobo.1781.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1782.1">group</span></code><span class="koboSpan" id="kobo.1783.1"> function makes it possible for us to run animations in parallel. </span><span class="koboSpan" id="kobo.1783.2">For this recipe, we wanted both </span><code class="inlineCode"><span class="koboSpan" id="kobo.1784.1">:enter</span></code><span class="koboSpan" id="kobo.1785.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1786.1">:leave</span></code><span class="koboSpan" id="kobo.1787.1"> transitions to run at the same time so we grouped them to run in parallel at the end.</span></p>
<h2 class="heading-2" id="_idParaDest-146"><span class="koboSpan" id="kobo.1788.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.1789.1">Sequential vs parallel animations in Angular (</span><a href="https://angular.io/guide/complex-animation-sequences#sequential-vs-parallel-animation"><span class="url"><span class="koboSpan" id="kobo.1790.1">https://angular.io/guide/complex-animation-sequences#sequential-vs-parallel-animation</span></span></a><span class="koboSpan" id="kobo.1791.1">)</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.1792.1">Angular animations </span><code class="inlineCode"><span class="koboSpan" id="kobo.1793.1">sequence</span></code><span class="koboSpan" id="kobo.1794.1"> function (</span><a href="https://angular.io/api/animations/sequence"><span class="url"><span class="koboSpan" id="kobo.1795.1">https://angular.io/api/animations/sequence</span></span></a><span class="koboSpan" id="kobo.1796.1">)</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-147"><span class="koboSpan" id="kobo.1797.1">Route animations in Angular</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.1798.1">In this </span><a id="_idIndexMarker273"/><span class="koboSpan" id="kobo.1799.1">recipe, you’ll learn how to implement route animations in Angular. </span><span class="koboSpan" id="kobo.1799.2">You’ll learn how to configure route animations by passing the transition state name to the route as a data property. </span><span class="koboSpan" id="kobo.1799.3">You’ll also learn how to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1800.1">RouterOutlet</span></code><span class="koboSpan" id="kobo.1801.1"> API to get the transition name and apply it to the animation to be executed. </span><span class="koboSpan" id="kobo.1801.2">We’ll implement some 3D transitions, so it is going to be fun!</span></p>
<h2 class="heading-2" id="_idParaDest-148"><span class="koboSpan" id="kobo.1802.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1803.1">The app that we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.1804.1">start/apps/chapter04/ng-route-animations</span></code><span class="koboSpan" id="kobo.1805.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1806.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.1807.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.1808.1">npm run serve ng-route-animations
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1809.1">This should open the app in a new browser tab, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.1810.1"><img alt="" role="presentation" src="../Images/B18469_04_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.1811.1">Figure 4.7: ng-route-animations app running on http://localhost:4200</span></p></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.1812.1">Now that </span><a id="_idIndexMarker274"/><span class="koboSpan" id="kobo.1813.1">we have the app running locally, let’s see the steps of the recipe in the next section.</span></p>
<h2 class="heading-2" id="_idParaDest-149"><span class="koboSpan" id="kobo.1814.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.1815.1">We have a simple app with two lazy-loaded routes now. </span><span class="koboSpan" id="kobo.1815.2">The routes are for the </span><strong class="screenText"><span class="koboSpan" id="kobo.1816.1">Home</span></strong><span class="koboSpan" id="kobo.1817.1"> and the </span><strong class="screenText"><span class="koboSpan" id="kobo.1818.1">About</span></strong><span class="koboSpan" id="kobo.1819.1"> pages, and we will now start configuring the animations for the app:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.1820.1">First, let us provide Angular animations using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1821.1">provideAnimations</span></code><span class="koboSpan" id="kobo.1822.1"> function from Angular in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1823.1">src/app/app.config.ts</span></code><span class="koboSpan" id="kobo.1824.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.1825.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1826.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1827.1"> { provideAnimations } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1828.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1829.1">'@angular/platform-browser/animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1830.1">; </span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1831.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1832.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1833.1">appConfig</span></span><span class="koboSpan" id="kobo.1834.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1835.1">ApplicationConfig</span></span><span class="koboSpan" id="kobo.1836.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1837.1">providers</span></span><span class="koboSpan" id="kobo.1838.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1839.1">provideRouter</span></span><span class="koboSpan" id="kobo.1840.1">(appRoutes,
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1841.1">withEnabledBlockingInitialNavigation</span></span><span class="koboSpan" id="kobo.1842.1">())</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1843.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1844.1">provideAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1845.1">()</span></strong></span><span class="koboSpan" id="kobo.1846.1">
  ],
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1847.1">We will now create a new file named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1848.1">animations.ts</span></code><span class="koboSpan" id="kobo.1849.1"> inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1850.1">app</span></code><span class="koboSpan" id="kobo.1851.1"> folder. </span><span class="koboSpan" id="kobo.1851.2">Let us put the following code in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1852.1">animations.ts</span></code><span class="koboSpan" id="kobo.1853.1"> file to register a basic trigger to handle animations from a route to every other route:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1854.1">import</span></span><span class="koboSpan" id="kobo.1855.1"> {trigger,  transition } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1856.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1857.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1858.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1859.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1860.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1861.1">ROUTE_ANIMATION</span></span><span class="koboSpan" id="kobo.1862.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1863.1">trigger</span></span><span class="koboSpan" id="kobo.1864.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1865.1">'routeAnimation'</span></span><span class="koboSpan" id="kobo.1866.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1867.1">transition</span></span><span class="koboSpan" id="kobo.1868.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1869.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1870.1">, [
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1871.1">// states and transitions to be added here</span></span><span class="koboSpan" id="kobo.1872.1">
  ])
]);
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1873.1">We’ll </span><a id="_idIndexMarker275"/><span class="koboSpan" id="kobo.1874.1">now register some queries and basic states for the animations. </span><span class="koboSpan" id="kobo.1874.2">Let’s add the following items in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1875.1">transition</span></code><span class="koboSpan" id="kobo.1876.1"> function’s array as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1877.1">import</span></span><span class="koboSpan" id="kobo.1878.1"> { trigger, transition, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1879.1">style</span></strong></span><span class="koboSpan" id="kobo.1880.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1881.1">query </span></strong></span><span class="koboSpan" id="kobo.1882.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1883.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1884.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.1885.1">;
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1886.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1887.1"> optional = { </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1888.1">optional</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1889.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1890.1">true</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1891.1"> };</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1892.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1893.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1894.1">ROUTE_ANIMATION</span></span><span class="koboSpan" id="kobo.1895.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1896.1">trigger</span></span><span class="koboSpan" id="kobo.1897.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1898.1">'routeAnimation'</span></span><span class="koboSpan" id="kobo.1899.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.1900.1">transition</span></span><span class="koboSpan" id="kobo.1901.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1902.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.1903.1">, [
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1904.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1905.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1906.1">position</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1907.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1908.1">'relative'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1909.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1910.1">perspective</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1911.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1912.1">'1000px'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1913.1"> }),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1914.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1915.1">(</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1916.1">':enter, :leave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1917.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1918.1">[</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1919.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1920.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1921.1">position</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1922.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1923.1">'absolute'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1924.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1925.1">width</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1926.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1927.1">'100%'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1928.1"> })],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1929.1">optional</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1930.1">),</span></strong></span><span class="koboSpan" id="kobo.1931.1">
  ]),
]);
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.1932.1">Alright! </span><span class="koboSpan" id="kobo.1932.2">We have the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1933.1">routeAnimation</span></code><span class="koboSpan" id="kobo.1934.1"> trigger registered now for transitioning from a route to every other route. </span><span class="koboSpan" id="kobo.1934.2">Now, let’s provide those transition states in the routes.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="4"><span class="koboSpan" id="kobo.1935.1">We can provide the states for the transitions using a unique identifier for each route. </span><span class="koboSpan" id="kobo.1935.2">There are many ways to do this, but the easiest way is to provide them using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1936.1">data</span></code><span class="koboSpan" id="kobo.1937.1"> attribute in the route configuration as follows in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1938.1">app.routes.ts</span></code><span class="koboSpan" id="kobo.1939.1"> file:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1940.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1941.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1942.1">appRoutes</span></span><span class="koboSpan" id="kobo.1943.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1944.1">Route</span></span><span class="koboSpan" id="kobo.1945.1">[] = [
  ...,
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1946.1">path</span></span><span class="koboSpan" id="kobo.1947.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1948.1">'home'</span></span><span class="koboSpan" id="kobo.1949.1">,
   </span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1950.1">data</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1951.1">: { </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1952.1">transitionState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1953.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1954.1">'HomePage'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1955.1"> },</span></strong></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.1956.1">loadComponent</span></span><span class="koboSpan" id="kobo.1957.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.1958.1">() =&gt;</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1959.1">import</span></span><span class="koboSpan" id="kobo.1960.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1961.1">'./home/home.component'</span></span><span class="koboSpan" id="kobo.1962.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1963.1">then</span></span><span class="koboSpan" id="kobo.1964.1">(
        </span><span class="hljs-function"><span class="koboSpan" id="kobo.1965.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1966.1">m</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1967.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1968.1"> m.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1969.1">HomeComponent</span></span><span class="koboSpan" id="kobo.1970.1">),
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1971.1">path</span></span><span class="koboSpan" id="kobo.1972.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1973.1">'about'</span></span><span class="koboSpan" id="kobo.1974.1">,
    </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1975.1">data</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1976.1">: { </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1977.1">transitionState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1978.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1979.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1980.1">AboutPage'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1981.1"> },</span></strong></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.1982.1">loadComponent</span></span><span class="koboSpan" id="kobo.1983.1">: </span><span class="hljs-function"><span class="koboSpan" id="kobo.1984.1">() =&gt;</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1985.1">import</span></span><span class="koboSpan" id="kobo.1986.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1987.1">'./about/about.component'</span></span><span class="koboSpan" id="kobo.1988.1">).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1989.1">then</span></span><span class="koboSpan" id="kobo.1990.1">(
        </span><span class="hljs-function"><span class="koboSpan" id="kobo.1991.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1992.1">m</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1993.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1994.1"> m.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1995.1">AboutComponent</span></span><span class="koboSpan" id="kobo.1996.1">),
  },
];
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.1997.1">Now, we</span><a id="_idIndexMarker276"/><span class="koboSpan" id="kobo.1998.1"> need to provide this </span><code class="inlineCode"><span class="koboSpan" id="kobo.1999.1">transitionState</span></code><span class="koboSpan" id="kobo.2000.1"> property from the current route to the route animation trigger in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2001.1">app.component.html</span></code><span class="koboSpan" id="kobo.2002.1"> file. </span><span class="koboSpan" id="kobo.2002.2">For this, create an </span><code class="inlineCode"><span class="koboSpan" id="kobo.2003.1">@ViewChild</span></code><span class="koboSpan" id="kobo.2004.1"> property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2005.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2006.1"> file. </span><span class="koboSpan" id="kobo.2006.2">This </span><code class="inlineCode"><span class="koboSpan" id="kobo.2007.1">ViewChild</span></code><span class="koboSpan" id="kobo.2008.1"> is going to target the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2009.1">&lt;router-outlet&gt;</span></code><span class="koboSpan" id="kobo.2010.1"> element in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2011.1">app.component.html</span></code><span class="koboSpan" id="kobo.2012.1"> template. </span><span class="koboSpan" id="kobo.2012.2">This is so we can get the current route’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.2013.1">data</span></code><span class="koboSpan" id="kobo.2014.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2015.1">transitionState</span></code><span class="koboSpan" id="kobo.2016.1"> value provided. </span><span class="koboSpan" id="kobo.2016.2">The code in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2017.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2018.1"> file should look as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2019.1">import</span></span><span class="koboSpan" id="kobo.2020.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2021.1">CommonModule</span></span><span class="koboSpan" id="kobo.2022.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2023.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2024.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.2025.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2026.1">import</span></span><span class="koboSpan" id="kobo.2027.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2028.1">Component</span></span><span class="koboSpan" id="kobo.2029.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2030.1">ViewChild</span></strong><strong class="hljs-slc"> </strong></span><span class="koboSpan" id="kobo.2031.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2032.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2033.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2034.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2035.1">import</span></span><span class="koboSpan" id="kobo.2036.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2037.1">RouterModule</span></span><span class="koboSpan" id="kobo.2038.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2039.1">RouterOutlet</span></strong><strong class="hljs-slc"> </strong></span><span class="koboSpan" id="kobo.2040.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2041.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2042.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.2043.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2044.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2045.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2046.1">AppComponent</span></span><span class="koboSpan" id="kobo.2047.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2048.1">@</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2049.1">ViewChild</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2050.1">(</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2051.1">RouterOutlet</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2052.1">) routerOutlet!: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2053.1">RouterOutlet</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2054.1">;</span></strong></span><span class="koboSpan" id="kobo.2055.1">
}
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2056.1">We’ll also import </span><code class="inlineCode"><span class="koboSpan" id="kobo.2057.1">ROUTE_ANIMATION</span></code><span class="koboSpan" id="kobo.2058.1"> from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2059.1">animations.ts</span></code><span class="koboSpan" id="kobo.2060.1"> file into </span><code class="inlineCode"><span class="koboSpan" id="kobo.2061.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2062.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2063.1">...
</span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2064.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2065.1"> { </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2066.1">ROUTE_ANIMATION</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2067.1"> } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2068.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2069.1">'./animations'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2070.1">;</span></strong></span><span class="koboSpan" id="kobo.2071.1">
@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2072.1">Component</span></span><span class="koboSpan" id="kobo.2073.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2074.1">selector</span></span><span class="koboSpan" id="kobo.2075.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2076.1">"app-root"</span></span><span class="koboSpan" id="kobo.2077.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2078.1">templateUrl</span></span><span class="koboSpan" id="kobo.2079.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2080.1">"./app.component.html"</span></span><span class="koboSpan" id="kobo.2081.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2082.1">styleUrls</span></span><span class="koboSpan" id="kobo.2083.1">: [</span><span class="hljs-string"><span class="koboSpan" id="kobo.2084.1">"./app.component.scss"</span></span><span class="koboSpan" id="kobo.2085.1">],
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2086.1">animations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2087.1">: [</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2088.1">ROUTE_ANIMATION</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2089.1">]</span></strong></span><span class="koboSpan" id="kobo.2090.1">
})
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2091.1">We’ll now</span><a id="_idIndexMarker277"/><span class="koboSpan" id="kobo.2092.1"> create a method named </span><code class="inlineCode"><span class="koboSpan" id="kobo.2093.1">getRouteAnimationState</span></code><span class="koboSpan" id="kobo.2094.1">, which will get the current route’s data and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2095.1">transitionState</span></code><span class="koboSpan" id="kobo.2096.1"> value and return it. </span><span class="koboSpan" id="kobo.2096.2">This function will later be used in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2097.1">app.component.html</span></code><span class="koboSpan" id="kobo.2098.1">. </span><span class="koboSpan" id="kobo.2098.2">Modify your code in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2099.1">app.component.ts</span></code><span class="koboSpan" id="kobo.2100.1"> as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2101.1">...
</span><span class="koboSpan" id="kobo.2101.2">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2102.1">Component</span></span><span class="koboSpan" id="kobo.2103.1">({
...
</span><span class="koboSpan" id="kobo.2103.2">})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2104.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2105.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2106.1">AppComponent</span></span><span class="koboSpan" id="kobo.2107.1"> {
  @</span><span class="hljs-title"><span class="koboSpan" id="kobo.2108.1">ViewChild</span></span><span class="koboSpan" id="kobo.2109.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2110.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.2111.1">) routerOutlet!: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2112.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.2113.1">;
  </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2114.1">getRouteAnimationState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2115.1">() {</span></strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2116.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2117.1"> (</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2118.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2119.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2120.1">routerOutlet</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2121.1"> &amp;&amp;</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2122.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2123.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2124.1">routerOutlet</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2125.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2126.1">activatedRouteData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2127.1"> &amp;&amp;</span></strong></span>
<span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2128.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2129.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2130.1">routerOutlet</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2131.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2132.1">activatedRouteData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2133.1">[</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2134.1">'transitionState'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2135.1">]</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2136.1">);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2137.1">}</span></strong></span><span class="koboSpan" id="kobo.2138.1">
}
</span></code></pre> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="7"><span class="koboSpan" id="kobo.2139.1">Finally, let’s use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2140.1">getRouteAnimationState</span></code><span class="koboSpan" id="kobo.2141.1"> method with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2142.1">@routeAnimation</span></code><span class="koboSpan" id="kobo.2143.1"> trigger in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2144.1">app.component.html</span></code><span class="koboSpan" id="kobo.2145.1"> so we can see the animation in play:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2146.1">...
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.2147.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2148.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2149.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2150.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2151.1">"content"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2152.1">role</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2153.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2154.1">"main"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2155.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2156.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2157.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2158.1">class</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2159.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2160.1">"router-container"</span></span>
<span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2161.1">[@</span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2162.1">routeAnimation</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2163.1">]=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2164.1">"getRouteAnimationState()"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2165.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2166.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2167.1">router-outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2168.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2169.1">router-outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2170.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2171.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2172.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2173.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.2174.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2175.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2176.1">&gt;</span></span>
</code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2177.1">Now that we have everything set up, let’s finalize the animations. </span><span class="koboSpan" id="kobo.2177.2">We’ll add a query for when a route leaves the view. </span><span class="koboSpan" id="kobo.2177.3">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2178.1">animations.ts</span></code><span class="koboSpan" id="kobo.2179.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2180.1">import</span></span><span class="koboSpan" id="kobo.2181.1"> { trigger, style, transition, query, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2182.1">animate, keyframes </span></strong></span><span class="koboSpan" id="kobo.2183.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2184.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2185.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.2186.1">;
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2187.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2188.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2189.1">ROUTE_ANIMATION</span></span><span class="koboSpan" id="kobo.2190.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2191.1">trigger</span></span><span class="koboSpan" id="kobo.2192.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2193.1">'routeAnimation'</span></span><span class="koboSpan" id="kobo.2194.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.2195.1">transition</span></span><span class="koboSpan" id="kobo.2196.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2197.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.2198.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2199.1">style</span></span><span class="koboSpan" id="kobo.2200.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2201.1">position</span></span><span class="koboSpan" id="kobo.2202.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2203.1">'relative'</span></span><span class="koboSpan" id="kobo.2204.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2205.1">perspective</span></span><span class="koboSpan" id="kobo.2206.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2207.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2208.1">1000px'</span></span><span class="koboSpan" id="kobo.2209.1"> }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2210.1">query</span></span><span class="koboSpan" id="kobo.2211.1">( </span><span class="hljs-string"><span class="koboSpan" id="kobo.2212.1">':enter, :leave'</span></span><span class="koboSpan" id="kobo.2213.1">, [...] ,optional),
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2214.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2215.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2216.1">':leave'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2217.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2218.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2219.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2220.1">'1s ease-in'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2221.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2222.1">keyframes</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2223.1">([</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2224.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2225.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2226.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2227.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2228.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2229.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2230.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2231.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2232.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2233.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2234.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2235.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2236.1">'rotateY(0) translateX(0)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2237.1">translateZ(0)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2238.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2239.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2240.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2241.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2242.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2243.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2244.1">0.25</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2245.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2246.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2247.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2248.1">'rotateY(45deg) translateX(25%)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2249.1">translateZ(100px) translateY(5%)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2250.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2251.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2252.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2253.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2254.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2255.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2256.1">0.5</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2257.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2258.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2259.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2260.1">'rotateY(90deg) translateX(75%)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2261.1">translateZ(400px) translateY(10%)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2262.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2263.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2264.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2265.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2266.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2267.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2268.1">0.75</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2269.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2270.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2271.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2272.1">'rotateY(135deg) translateX(75%)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2273.1">translateZ(800px) translateY(15%)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2274.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2275.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2276.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2277.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2278.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2279.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2280.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2281.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2282.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2283.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2284.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2285.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2286.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2287.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2288.1">'rotateY(180deg) translateX(0)</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2289.1">translateZ(1200px) translateY(25%)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2290.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2291.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2292.1">])</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2293.1">),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2294.1">],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2295.1">optional</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2296.1">),</span></strong></span><span class="koboSpan" id="kobo.2297.1">
  ]),
]);
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2298.1">If you navigate</span><a id="_idIndexMarker278"/><span class="koboSpan" id="kobo.2299.1"> between routes, you’ll notice the leaving route going out with animation behind the entering route. </span><span class="koboSpan" id="kobo.2299.2">Let’s add the animation for the entering route as well.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="9"><span class="koboSpan" id="kobo.2300.1">We’ll add the animation for the route entering the view. </span><span class="koboSpan" id="kobo.2300.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2301.1">animations.ts</span></code><span class="koboSpan" id="kobo.2302.1"> as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2303.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2304.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2305.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2306.1">ROUTE_ANIMATION</span></span><span class="koboSpan" id="kobo.2307.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2308.1">trigger</span></span><span class="koboSpan" id="kobo.2309.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2310.1">'routeAnimation'</span></span><span class="koboSpan" id="kobo.2311.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.2312.1">transition</span></span><span class="koboSpan" id="kobo.2313.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2314.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.2315.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2316.1">style</span></span><span class="koboSpan" id="kobo.2317.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2318.1">position</span></span><span class="koboSpan" id="kobo.2319.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2320.1">'relative'</span></span><span class="koboSpan" id="kobo.2321.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2322.1">perspective</span></span><span class="koboSpan" id="kobo.2323.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2324.1">'1000px'</span></span><span class="koboSpan" id="kobo.2325.1"> }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2326.1">query</span></span><span class="koboSpan" id="kobo.2327.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2328.1">':enter, :leave'</span></span><span class="koboSpan" id="kobo.2329.1">, ...),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2330.1">query</span></span><span class="koboSpan" id="kobo.2331.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2332.1">':leave'</span></span><span class="koboSpan" id="kobo.2333.1">, ...),
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2334.1">query</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2335.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2336.1">':enter'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2337.1">, [</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2338.1">animate</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2339.1">( </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2340.1">'</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2341.1">1s ease-out'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2342.1">, </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2343.1">keyframes</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2344.1">([</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2345.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2346.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2347.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2348.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2349.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2350.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2351.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2352.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2353.1">0</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2354.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2355.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2356.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2357.1">'rotateY(180deg) translateX(25%) </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2358.1">translateZ(1200px)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2359.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2360.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2361.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2362.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2363.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2364.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2365.1">0.25</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2366.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2367.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2368.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2369.1">'rotateY(225deg) translateX(-25%) translateZ(1200px)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2370.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2371.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2372.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2373.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2374.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2375.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2376.1">0.5</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2377.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2378.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2379.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2380.1">'rotateY(270deg) translateX(-50%) translateZ(400px)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2381.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2382.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2383.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2384.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2385.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2386.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2387.1">0.75</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2388.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2389.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2390.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2391.1">'rotateY(315deg) translateX(-50%) translateZ(25px)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2392.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2393.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2394.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2395.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2396.1">opacity</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2397.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2398.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2399.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2400.1">offset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2401.1">: </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.2402.1">1</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2403.1">, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2404.1">transform</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2405.1">:</span></strong></span>
<span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2406.1">'rotateY(360deg) translateX(0) translateZ(0)'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2407.1">,</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2408.1">}),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2409.1">])</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2410.1">),</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2411.1">],</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2412.1">optional</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2413.1">),</span></strong></span><span class="koboSpan" id="kobo.2414.1">
  ]),
]);
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2415.1">If you look </span><a id="_idIndexMarker279"/><span class="koboSpan" id="kobo.2416.1">at the animation route while navigating, you’ll notice that the entering route appears immediately, then we see the leaving route’s animation, and after that, we see the entering route’s animation. </span><span class="koboSpan" id="kobo.2416.2">Let’s group the entering and leaving animations together to run them in parallel.</span></p> </li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="10"><span class="koboSpan" id="kobo.2417.1">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2418.1">animations.ts</span></code><span class="koboSpan" id="kobo.2419.1"> as follows to run the entering and leaving routes’ animations in parallel:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2420.1">import</span></span><span class="koboSpan" id="kobo.2421.1"> {..., </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2422.1">group </span></strong></span><span class="koboSpan" id="kobo.2423.1">} </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2424.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2425.1">'@angular/animations'</span></span><span class="koboSpan" id="kobo.2426.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2427.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2428.1">const</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.2429.1">ROUTE_ANIMATION</span></span><span class="koboSpan" id="kobo.2430.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2431.1">trigger</span></span><span class="koboSpan" id="kobo.2432.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2433.1">'routeAnimation'</span></span><span class="koboSpan" id="kobo.2434.1">, [
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.2435.1">transition</span></span><span class="koboSpan" id="kobo.2436.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2437.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.2438.1">, [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2439.1">style</span></span><span class="koboSpan" id="kobo.2440.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2441.1">position</span></span><span class="koboSpan" id="kobo.2442.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2443.1">'relative'</span></span><span class="koboSpan" id="kobo.2444.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2445.1">perspective</span></span><span class="koboSpan" id="kobo.2446.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2447.1">'1000px'</span></span><span class="koboSpan" id="kobo.2448.1"> }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2449.1">query</span></span><span class="koboSpan" id="kobo.2450.1">( </span><span class="hljs-string"><span class="koboSpan" id="kobo.2451.1">':enter, :leave'</span></span><span class="koboSpan" id="kobo.2452.1">, ...),
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2453.1">group</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2454.1">([</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.2455.1">query</span></span><span class="koboSpan" id="kobo.2456.1">( </span><span class="hljs-string"><span class="koboSpan" id="kobo.2457.1">':leave'</span></span><span class="koboSpan" id="kobo.2458.1">, [...], optional ),
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2459.1">query</span></span><span class="koboSpan" id="kobo.2460.1">( </span><span class="hljs-string"><span class="koboSpan" id="kobo.2461.1">':enter'</span></span><span class="koboSpan" id="kobo.2462.1">, [...], optional),
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2463.1">]),</span></strong></span><span class="koboSpan" id="kobo.2464.1">
  ]),
]);
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2465.1">Voilà! </span><span class="koboSpan" id="kobo.2465.2">Refresh the </span><a id="_idIndexMarker280"/><span class="koboSpan" id="kobo.2466.1">app and see the magic. </span><span class="koboSpan" id="kobo.2466.2">You should now see the 3D animation for both the entering and leaving routes as you navigate from the </span><strong class="screenText"><span class="koboSpan" id="kobo.2467.1">Home</span></strong><span class="koboSpan" id="kobo.2468.1"> page to the </span><strong class="screenText"><span class="koboSpan" id="kobo.2469.1">About</span></strong><span class="koboSpan" id="kobo.2470.1"> page and vice versa. </span><span class="koboSpan" id="kobo.2470.2">The sky’s the limit when it comes to what you can do with keyframes and animations in Angular.</span></p>
<h2 class="heading-2" id="_idParaDest-150"><span class="koboSpan" id="kobo.2471.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2472.1">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2473.1">animations.ts</span></code><span class="koboSpan" id="kobo.2474.1"> file, we first define our animation trigger named </span><code class="inlineCode"><span class="koboSpan" id="kobo.2475.1">routeAnimation</span></code><span class="koboSpan" id="kobo.2476.1">. </span><span class="koboSpan" id="kobo.2476.2">Then we make sure that by default, the HTML element to which the trigger is assigned has </span><code class="inlineCode"><span class="koboSpan" id="kobo.2477.1">position: 'relative'</span></code><span class="koboSpan" id="kobo.2478.1"> set as a style:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.2479.1">transition</span></span><span class="koboSpan" id="kobo.2480.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2481.1">'* &lt;=&gt; *'</span></span><span class="koboSpan" id="kobo.2482.1">, [
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2483.1">style</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2484.1">({</span></strong></span>
<span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2485.1">position</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2486.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2487.1">'relative'</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2488.1">}),</span></strong></span><span class="koboSpan" id="kobo.2489.1">
    ...
</span><span class="koboSpan" id="kobo.2489.2">])
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2490.1">Then we apply the styled </span><code class="inlineCode"><span class="koboSpan" id="kobo.2491.1">position: 'absolute'</span></code><span class="koboSpan" id="kobo.2492.1"> to the children, as mentioned, using </span><code class="inlineCode"><span class="koboSpan" id="kobo.2493.1">:enter</span></code><span class="koboSpan" id="kobo.2494.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2495.1">:leave</span></code><span class="koboSpan" id="kobo.2496.1"> as follows:</span></p>
<pre class="programlisting code"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.2497.1">query</span></span><span class="koboSpan" id="kobo.2498.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2499.1">':enter, :leave'</span></span><span class="koboSpan" id="kobo.2500.1">, [
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.2501.1">style</span></span><span class="koboSpan" id="kobo.2502.1">({
        </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2503.1">position</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2504.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2505.1">'absolute'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2506.1">,</span></strong></span>
<span class="hljs-attr"><span class="koboSpan" id="kobo.2507.1">width</span></span><span class="koboSpan" id="kobo.2508.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.2509.1">'100%'</span></span><span class="koboSpan" id="kobo.2510.1">
      })
    ], {</span><span class="hljs-attr"><span class="koboSpan" id="kobo.2511.1">optional</span></span><span class="koboSpan" id="kobo.2512.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2513.1">true</span></span><span class="koboSpan" id="kobo.2514.1">}),
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2515.1">This makes sure that these elements, that is, the routes to be loaded, have the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2516.1">position: 'absolute'</span></code><span class="koboSpan" id="kobo.2517.1"> style and a full width using </span><code class="inlineCode"><span class="koboSpan" id="kobo.2518.1">width: '100%'</span></code><span class="koboSpan" id="kobo.2519.1"> so they can appear on top of each other. </span><span class="koboSpan" id="kobo.2519.2">You can always play around with it by commenting on either of the styles to see what happens (at your own risk, though!).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2520.1">Then we defined</span><a id="_idIndexMarker281"/><span class="koboSpan" id="kobo.2521.1"> our route transitions as a combination of two animations, the first for </span><code class="inlineCode"><span class="koboSpan" id="kobo.2522.1">query :leave</span></code><span class="koboSpan" id="kobo.2523.1"> and the second for </span><code class="inlineCode"><span class="koboSpan" id="kobo.2524.1">query :enter</span></code><span class="koboSpan" id="kobo.2525.1">. </span><span class="koboSpan" id="kobo.2525.2">For the route leaving the view, we set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2526.1">opacity</span></code><span class="koboSpan" id="kobo.2527.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.2528.1">0</span></code><span class="koboSpan" id="kobo.2529.1"> via the animation, and for the route entering the view, we set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2530.1">opacity</span></code><span class="koboSpan" id="kobo.2531.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.2532.1">1</span></code><span class="koboSpan" id="kobo.2533.1"> via the animation as well. </span><span class="koboSpan" id="kobo.2533.2">Note that animations via Angular animations run in sequence:</span></p>
<pre class="programlisting code"><code class="hljs-code"> <span class="hljs-title"><span class="koboSpan" id="kobo.2534.1">query</span></span><span class="koboSpan" id="kobo.2535.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2536.1">':leave'</span></span><span class="koboSpan" id="kobo.2537.1">, [
      ...
    </span><span class="koboSpan" id="kobo.2537.2">], {</span><span class="hljs-attr"><span class="koboSpan" id="kobo.2538.1">optional</span></span><span class="koboSpan" id="kobo.2539.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2540.1">true</span></span><span class="koboSpan" id="kobo.2541.1">}),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2542.1">query</span></span><span class="koboSpan" id="kobo.2543.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2544.1">':enter'</span></span><span class="koboSpan" id="kobo.2545.1">, [
      ...
    </span><span class="koboSpan" id="kobo.2545.2">], {</span><span class="hljs-attr"><span class="koboSpan" id="kobo.2546.1">optional</span></span><span class="koboSpan" id="kobo.2547.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2548.1">true</span></span><span class="koboSpan" id="kobo.2549.1">}),
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2550.1">You’ll notice that in our code, we’re using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2551.1">keyframes</span></code><span class="koboSpan" id="kobo.2552.1"> function for animations. </span><span class="koboSpan" id="kobo.2552.2">For the leaving route, The “</span><code class="inlineCode"><span class="koboSpan" id="kobo.2553.1">keyframes</span></code><span class="koboSpan" id="kobo.2554.1"> function” starts with </span><code class="inlineCode"><span class="koboSpan" id="kobo.2555.1">opacity</span></code> <code class="inlineCode"><span class="koboSpan" id="kobo.2556.1">1</span></code><span class="koboSpan" id="kobo.2557.1">, and without any transformations initially. </span><span class="koboSpan" id="kobo.2557.2">And then it ends with </span><code class="inlineCode"><span class="koboSpan" id="kobo.2558.1">opacity 0</span></code><span class="koboSpan" id="kobo.2559.1"> but with the transform set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.2560.1">'rotateY(180deg) translateX(0) translateZ(1200px) translateY(25%)'</span></code><span class="koboSpan" id="kobo.2561.1">. </span><span class="koboSpan" id="kobo.2561.2">This is the opposite of the entering route.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.2562.1">Finally, we use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2563.1">group</span></code><span class="koboSpan" id="kobo.2564.1"> function to wrap both the leaving and entering animations together so they can run in parallel instead of in sequence. </span><span class="koboSpan" id="kobo.2564.2">This makes it so that the entering route comes in as the leaving route goes away.</span></p>
<h2 class="heading-2" id="_idParaDest-151"><span class="koboSpan" id="kobo.2565.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2566.1">Animations in Angular (</span><a href="https://angular.io/guide/animations"><span class="url"><span class="koboSpan" id="kobo.2567.1">https://angular.io/guide/animations</span></span></a><span class="koboSpan" id="kobo.2568.1">)</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2569.1">Angular route transition animations (</span><a href="https://angular.io/guide/route-animations"><span class="url"><span class="koboSpan" id="kobo.2570.1">https://angular.io/guide/route-animations</span></span></a><span class="koboSpan" id="kobo.2571.1">)</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-152"><span class="koboSpan" id="kobo.2572.1">Disabling Angular animations conditionally</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2573.1">In this recipe, you’ll </span><a id="_idIndexMarker282"/><span class="koboSpan" id="kobo.2574.1">learn how to disable animations in Angular conditionally. </span><span class="koboSpan" id="kobo.2574.2">This is useful for a variety of cases, including disabling animations on a particular device, for example.</span></p>
<div class="packt_tip">
<p class="normal"><span class="koboSpan" id="kobo.2575.1">Pro tip: Use </span><code class="inlineCode"><span class="koboSpan" id="kobo.2576.1">ngx-device-detector</span></code><span class="koboSpan" id="kobo.2577.1"> to identify if your Angular app is running on a mobile, tablet, etc. </span><span class="koboSpan" id="kobo.2577.2">(A little secret that is not so-secret anymore…I built it!)</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.2578.1">Shameless plug aside, in this recipe, we’ll disable animations for employees in the application, considering we’re rolling out animations only for admins at the moment.</span></p>
<h2 class="heading-2" id="_idParaDest-153"><span class="koboSpan" id="kobo.2579.1">Getting ready</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2580.1">The app that</span><a id="_idIndexMarker283"/><span class="koboSpan" id="kobo.2581.1"> we are going to work with resides in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2582.1">start/apps/chapter04/ng-disable-animations</span></code><span class="koboSpan" id="kobo.2583.1"> inside the cloned repository:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2584.1">Open the code repository in your code editor.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.2585.1">Open the terminal, navigate to the code repository directory, and run the following command to serve the project:
        </span><pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.2586.1">npm run serve ng-disable-animations
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2587.1">This should open the app in a new browser tab. </span><span class="koboSpan" id="kobo.2587.2">Log in as an admin, add a few bucket items, and you should see the following:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.2588.1"><img alt="" role="presentation" src="../Images/B18469_04_08.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.2589.1">Figure 4.8: ng-disable-animations app running on http://localhost:4200</span></p> </li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2590.1">Now that we have the app running, we will move on to the steps for the recipe.</span></p>
<h2 class="heading-2" id="_idParaDest-154"><span class="koboSpan" id="kobo.2591.1">How to do it…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2592.1">We have an</span><a id="_idIndexMarker284"/><span class="koboSpan" id="kobo.2593.1"> app that already has some Angular animations configured. </span><span class="koboSpan" id="kobo.2593.2">You will notice that both the admin and employee pages have animations enabled. </span><span class="koboSpan" id="kobo.2593.3">We will disable the animations for the employee page using a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2594.1">config</span></code><span class="koboSpan" id="kobo.2595.1">. </span><span class="koboSpan" id="kobo.2595.2">Let’s continue with the steps as follows:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.2596.1">First, we’ll add a new property named </span><code class="inlineCode"><span class="koboSpan" id="kobo.2597.1">disableAnimations</span></code><span class="koboSpan" id="kobo.2598.1"> to our </span><code class="inlineCode"><span class="koboSpan" id="kobo.2599.1">IEmployeeConfig</span></code><span class="koboSpan" id="kobo.2600.1"> interface and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2601.1">EMPLOYEE_CONFIG</span></code><span class="koboSpan" id="kobo.2602.1"> variable in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2603.1">src/app/app.config.ts</span></code><span class="koboSpan" id="kobo.2604.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.2605.1">...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2606.1">export</span></span><span class="koboSpan" id="kobo.2607.1"> interface </span><span class="hljs-title"><span class="koboSpan" id="kobo.2608.1">IEmployeeConfig</span></span><span class="koboSpan" id="kobo.2609.1"> {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2610.1">canDeleteItems</span></span><span class="koboSpan" id="kobo.2611.1">: boolean;
</span><span class="code-highlight"><strong class="hljs-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2612.1">disableAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2613.1">: boolean;</span></strong></span><span class="koboSpan" id="kobo.2614.1">
}
...
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2615.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2616.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2617.1">employeeConfig</span></span><span class="koboSpan" id="kobo.2618.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2619.1">IEmployeeConfig</span></span><span class="koboSpan" id="kobo.2620.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2621.1">canDeleteItems</span></span><span class="koboSpan" id="kobo.2622.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2623.1">true</span></span><span class="koboSpan" id="kobo.2624.1">,
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2625.1">disableAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2626.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.2627.1">false</span></strong></span><span class="koboSpan" id="kobo.2628.1">
};
...
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.2629.1">If you save the file, TypeScript will start throwing errors in the console as we need to add the same </span><code class="inlineCode"><span class="koboSpan" id="kobo.2630.1">disableAnimations</span></code><span class="koboSpan" id="kobo.2631.1"> property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2632.1">employee.config.ts</span></code><span class="koboSpan" id="kobo.2633.1"> file as well.</span></p></li>
</ol>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="2"><span class="koboSpan" id="kobo.2634.1">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2635.1">src/app/employee/employee.config.ts</span></code><span class="koboSpan" id="kobo.2636.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2637.1">import</span></span><span class="koboSpan" id="kobo.2638.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2639.1">IEmployeeConfig</span></span><span class="koboSpan" id="kobo.2640.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2641.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2642.1">'../app.config'</span></span><span class="koboSpan" id="kobo.2643.1">;
 
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2644.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2645.1">const</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.2646.1">employeeConfig</span></span><span class="koboSpan" id="kobo.2647.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.2648.1">IEmployeeConfig</span></span><span class="koboSpan" id="kobo.2649.1"> = {
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2650.1">canDeleteItems</span></span><span class="koboSpan" id="kobo.2651.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.2652.1">false</span></span><span class="koboSpan" id="kobo.2653.1">,
  </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2654.1">disableAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2655.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.2656.1">true</span></strong></span><span class="koboSpan" id="kobo.2657.1">
};
</span></code></pre>
</li>
<li class="numberedList"><span class="koboSpan" id="kobo.2658.1">Finally, add a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2659.1">HostBinding</span></code><span class="koboSpan" id="kobo.2660.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2661.1">bucket.component.ts</span></code><span class="koboSpan" id="kobo.2662.1"> to disable the animations in the bucket component based on the config. </span><span class="koboSpan" id="kobo.2662.2">Update the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2663.1">bucket/bucket.component.ts</span></code><span class="koboSpan" id="kobo.2664.1"> file as follows:
        </span><pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2665.1">import</span></span><span class="koboSpan" id="kobo.2666.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2667.1">CommonModule</span></span><span class="koboSpan" id="kobo.2668.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2669.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2670.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.2671.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2672.1">import</span></span><span class="koboSpan" id="kobo.2673.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.2674.1">Component</span></span><span class="koboSpan" id="kobo.2675.1">, inject, </span><span class="hljs-title"><span class="koboSpan" id="kobo.2676.1">OnInit</span></span><span class="koboSpan" id="kobo.2677.1">, </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2678.1">HostBinding</span></strong></span><span class="koboSpan" id="kobo.2679.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2680.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2681.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.2682.1">;
...
</span><span class="koboSpan" id="kobo.2682.2">@</span><span class="hljs-title"><span class="koboSpan" id="kobo.2683.1">Component</span></span><span class="koboSpan" id="kobo.2684.1">({...})
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2685.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2686.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2687.1">BucketComponent</span></span><span class="koboSpan" id="kobo.2688.1"> implements </span><span class="hljs-title"><span class="koboSpan" id="kobo.2689.1">OnInit</span></span><span class="koboSpan" id="kobo.2690.1"> {
  ...
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2691.1">fruits</span></span><span class="koboSpan" id="kobo.2692.1">: string[] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2693.1">Object</span></span><span class="koboSpan" id="kobo.2694.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2695.1">values</span></span><span class="koboSpan" id="kobo.2696.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.2697.1">Fruit</span></span><span class="koboSpan" id="kobo.2698.1">);
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2699.1">@</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2700.1">HostBinding</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2701.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2702.1">'@.disabled'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2703.1">)</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2704.1">animationsDisabled = </span></strong><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.2705.1">this</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2706.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2707.1">appConfig</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2708.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.2709.1">disableAnimations</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2710.1">;</span></strong></span>
<span class="hljs-title"><span class="koboSpan" id="kobo.2711.1">ngOnInit</span></span><span class="koboSpan" id="kobo.2712.1">(): </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2713.1">void</span></span><span class="koboSpan" id="kobo.2714.1"> {...}
        ...
</span><span class="koboSpan" id="kobo.2714.2">}
</span></code></pre>
</li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.2715.1">Great! </span><span class="koboSpan" id="kobo.2715.2">If </span><a id="_idIndexMarker285"/><span class="koboSpan" id="kobo.2716.1">you now refresh the app and view the </span><strong class="screenText"><span class="koboSpan" id="kobo.2717.1">Admin</span></strong><span class="koboSpan" id="kobo.2718.1"> page, you’ll see the animations working. </span><span class="koboSpan" id="kobo.2718.2">And if you go to the </span><strong class="screenText"><span class="koboSpan" id="kobo.2719.1">Employee </span></strong><span class="koboSpan" id="kobo.2720.1">page, you’ll see that the animations are disabled there. </span><span class="koboSpan" id="kobo.2720.2">Magic! </span><span class="koboSpan" id="kobo.2720.3">Check out the next section to understand how the recipe works.</span></p>
<h2 class="heading-2" id="_idParaDest-155"><span class="koboSpan" id="kobo.2721.1">How it works…</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.2722.1">Angular provides a way to disable animations using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2723.1">[@.disabled]</span></code><span class="koboSpan" id="kobo.2724.1"> binding. </span><span class="koboSpan" id="kobo.2724.2">You can put it anywhere in the template with an expression that evaluates a truth value. </span><span class="koboSpan" id="kobo.2724.3">And in that case, all the child animations that are applied in its nested HTML tree will be disabled. </span><span class="koboSpan" id="kobo.2724.4">We had an application-level config that is overridden in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2725.1">employee</span></code><span class="koboSpan" id="kobo.2726.1"> component via the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2727.1">EmployeeConfig</span></code><span class="koboSpan" id="kobo.2728.1"> object. </span><span class="koboSpan" id="kobo.2728.2">So first we created a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2729.1">disableAnimations</span></code><span class="koboSpan" id="kobo.2730.1"> property in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2731.1">IAppConfig</span></code><span class="koboSpan" id="kobo.2732.1"> interface. </span><span class="koboSpan" id="kobo.2732.2">This interface is used by both the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2733.1">AppConfig</span></code><span class="koboSpan" id="kobo.2734.1"> variable in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2735.1">app-config.ts</span></code><span class="koboSpan" id="kobo.2736.1"> file and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2737.1">employeeConfig</span></code><span class="koboSpan" id="kobo.2738.1"> variable in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2739.1">employee.config.ts</span></code><span class="koboSpan" id="kobo.2740.1"> file. </span><span class="koboSpan" id="kobo.2740.2">As you can see, we set the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.2741.1">disabledAnimations</span></code><span class="koboSpan" id="kobo.2742.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.2743.1">false</span></code><span class="koboSpan" id="kobo.2744.1"> for the configuration defined in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2745.1">app.config.ts</span></code><span class="koboSpan" id="kobo.2746.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2747.1">true</span></code><span class="koboSpan" id="kobo.2748.1"> for the configuration defined in </span><code class="inlineCode"><span class="koboSpan" id="kobo.2749.1">employee.config.ts</span></code><span class="koboSpan" id="kobo.2750.1">. </span><span class="koboSpan" id="kobo.2750.2">And then we used the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2751.1">@HostBinding()</span></code><span class="koboSpan" id="kobo.2752.1"> decorator in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2753.1">BucketComponent</span></code><span class="koboSpan" id="kobo.2754.1"> class by assigning its value to the provided config’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.2755.1">disabledAnimations</span></code><span class="koboSpan" id="kobo.2756.1"> property. </span><span class="koboSpan" id="kobo.2756.2">Since the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2757.1">AdminComponent</span></code><span class="koboSpan" id="kobo.2758.1"> class gets the configuration defined in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2759.1">app.config.ts</span></code><span class="koboSpan" id="kobo.2760.1"> against the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2761.1">EMPLOYEE_CONFIG </span></code><span class="koboSpan" id="kobo.2762.1">token, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2763.1">EmployeeComponent</span></code><span class="koboSpan" id="kobo.2764.1"> class gets the configuration defined in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2765.1">employee.config.ts</span></code><span class="koboSpan" id="kobo.2766.1"> against the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2767.1">EMPLOYEE_CONFIG </span></code><span class="koboSpan" id="kobo.2768.1">token, the animations are enabled and disabled, respectively, for these components.</span></p>
<h2 class="heading-2" id="_idParaDest-156"><span class="koboSpan" id="kobo.2769.1">See also</span></h2>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.2770.1">Animations in Angular: </span><a href="https://angular.io/guide/animations"><span class="url"><span class="koboSpan" id="kobo.2771.1">https://angular.io/guide/animations</span></span></a></li>
<li class="bulletList"><span class="koboSpan" id="kobo.2772.1">Angular Animations Explained with Examples: </span><a href="https://www.freecodecamp.org/news/angular-animations-explained-with-examples/"><span class="url"><span class="koboSpan" id="kobo.2773.1">https://www.freecodecamp.org/news/angular-animations-explained-with-examples/</span></span></a></li>
</ul>
<h1 class="heading-1"><span class="koboSpan" id="kobo.2774.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.2775.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="Chapter_4.xhtml"><span class="url"><span class="koboSpan" id="kobo.2776.1">https://packt.link/AngularCookbook2e</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.2777.1"><img alt="" role="presentation" src="../Images/QR_Code1388317275422265.png"/></span></p>
</div>
</body></html>