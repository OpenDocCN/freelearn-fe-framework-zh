<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a Signup Component</h1>
                
            
            <article>
                
<p class="calibre2"> In this chapter, we will start our journey in application development. We will build a signup page. During the process, we will also explore different features of Firebase. We will take a look at how to enable Firebase authentication in the console, which is required to interact with the authentication feature module. Firebase supports many authentication mechanisms but, in this project, we will enable Email/Password authentication. Then, we will go ahead and build a signup form template. We will add a functionality in the signup component. In this process, we will also handle error scenarios. This will make our application more robust and <span>less </span>error-prone.</p>
<p class="calibre2">In this chapter,<span> we will cover the</span> following topics:</p>
<ul class="calibre7">
<li class="calibre8">Enabling authentication in Firebase</li>
<li class="calibre8">Introduction to AngularFire2</li>
<li class="calibre8">Creating an authentication module</li>
<li class="calibre8">Creating services</li>
<li class="calibre8">Defining a domain model</li>
<li class="calibre8">Creating a signup template</li>
<li class="calibre8">Error handling</li>
<li class="calibre8">Creating a customized alert dialog</li>
<li class="calibre8">Creating a signup component</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Enabling authentication in Firebase</h1>
                
            
            <article>
                
<p class="calibre2">The first step in our application development is to enable authentication in our Firebase portal. We have already created our Firebase project in the preceding chapter. Perform the following steps to enable Firebase authentication:</p>
<ol class="calibre13">
<li value="1" class="calibre8">Open your friends project in the Firebase console.</li>
<li value="2" class="calibre8">Expand <span>DEVELOP</span> on left panel.</li>
<li value="3" class="calibre8">Click on <span>Authentication</span>.</li>
<li value="4" class="calibre8">Go to the <span>SIGN-IN METHOD</span> tab on the right panel.</li>
<li value="5" class="calibre8">Click on the <span>Email/Password</span> item and enable it.</li>
</ol>
<p class="calibre2">The enabled <span>Email/Password</span> authentication in Firebase will look as the following screenshot:</p>
<div class="cdpaligncenter"><img src="../images/00009.jpeg" class="calibre29"/></div>
<p class="calibre2">This is all we need to do to enable the <span>Email/Password</span> mode of authentication. Firebase also supports other modes of authentication. In this book, we will implement <span>Email/Password</span> authentication only. You can work with other authentications as an exercise.</p>
<p class="calibre2">Different modes of authentications are required to target different sets of users. It's good to understand other authentication modes. Other supported modes are as follows:</p>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Phone</strong>: This is a simple form of authentication and doesn't require much information from the user. Just the user's mobile number is enough to authenticate the user. This mode has become popular in mobile applications.</li>
<li class="calibre8"><strong class="calibre1">Google</strong>: It is good to enable Google authentication, as most of the targeted users have a Google account. In this mode, authentication happens via Google credentials.</li>
<li class="calibre8"><strong class="calibre1">Facebook</strong>: This is similar to Google authentication. The only difference is that authentication happens via Facebook credentials instead of Google credentials.</li>
<li class="calibre8"><strong class="calibre1">Twitter</strong>: This is similar to the preceding authentication, but the authentication happens via your Twitter account. </li>
<li class="calibre8"><strong class="calibre1">GitHub</strong>: This is quite helpful for the developer community. They have a GitHub account, and you don't need to give any personal account information.</li>
<li class="calibre8"><strong class="calibre1">Anonymous</strong>: This authentication is useful for an application where its user doesn't want to sign up. This is mainly used on an e-commerce application, where the user can browse the products using this authentication.</li>
</ul>
<p class="calibre2">In all the preceding authentications, Firebase generates a unique ID called a user UID and the user is registered in a Firebase authentication with a UID, identifier, and so on. The same UID is also used to register the user in Firebase database with more information, such as email, UID, name, and number. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introduction to angularfire2</h1>
                
            
            <article>
                
<p class="calibre2"><span><kbd class="calibre11">angularfire2</kbd> is the official library for Angular and Firebase. We will use this library in our application. This library provides the following features:</span></p>
<ul class="calibre7">
<li class="calibre8"><span>It uses the power of RxJS, Angular, and Firebase</span></li>
<li class="calibre8">It provides APIs to interact with a Firebase database and authentication</li>
<li class="calibre8">It synchronizes data in real time</li>
<li class="calibre8">It provides APIs to interact with <kbd class="calibre11">AngularFirestore</kbd></li>
</ul>
<p class="calibre2"><span>For more details, refer <a href="https://github.com/angular/angularfire2" class="calibre10">https://github.com/angular/angularfire2</a>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating the authentication module</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will create our first module using the Angular CLI command. Perform the following steps to create the authentication module:</p>
<ol class="calibre13">
<li value="1" class="calibre8">Navigate to the <kbd class="calibre11">src</kbd> folder of your project and execute the module CLI command, as follows:</li>
</ol>
<pre class="calibre18"><strong class="calibre1">$ cd &lt;your directory&gt;\friends\src\app</strong><br class="title-page-name"/><strong class="calibre1">$ ng g module authentication --routing`</strong></pre>
<p class="mce-root">The preceding command creates the file skeleton of <kbd class="calibre11">authentication.module.ts</kbd> and <kbd class="calibre11">authentication.routing.ts</kbd>. You can follow the Angular CLI command to create other components.</p>
<ol start="2" class="calibre13">
<li value="2" class="calibre8">Add an authentication module in the app module and also configure Angular- and Firebase-related components, as follows; take a look at the <kbd class="calibre11">app.module.ts</kbd> file<span>:</span></li>
</ol>
<pre class="calibre18"><span>import </span>{NgModule} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><span>import </span>{AppComponent} <span>from </span><span>'./app.component'</span>;<br class="title-page-name"/><span>import </span>{FormsModule} <span>from </span><span>'@angular/forms'</span>;<br class="title-page-name"/><span>import </span>{BrowserModule} <span>from </span><span>'@angular/platform-browser'</span>;<br class="title-page-name"/><br class="title-page-name"/><span>import </span>{AuthenticationModule} <span>from </span><span>'./authentication/authentication.module'</span>;<br class="title-page-name"/><span>import </span>{AngularFireModule} <span>from </span><span>'angularfire2'</span>;<br class="title-page-name"/><span>import </span>{<span>environment</span>} <span>from </span><span>'./environments/environment'</span>;<br class="title-page-name"/><span>import </span>{BrowserAnimationsModule} <span>from </span><span>'@angular/platform-browser/animations'</span>;<br class="title-page-name"/><span>import </span>{AngularFireAuth} <span>from </span><span>'angularfire2/auth'</span>;<br class="title-page-name"/><span>import </span>{AngularFireDatabase} <span>from </span><span>'angularfire2/database'</span>;<br class="title-page-name"/><span>import </span>{CommonModule} <span>from </span><span>'@angular/common'</span>;<br class="title-page-name"/><span>import </span>{RouterModule} <span>from </span><span>'@angular/router'</span>;<br class="title-page-name"/><br class="title-page-name"/>@<span>NgModule</span>({<br class="title-page-name"/>  <span>declarations</span>: [<br class="title-page-name"/>    AppComponent<br class="title-page-name"/>  ],<br class="title-page-name"/>  <span>imports</span>: [<br class="title-page-name"/>    CommonModule,<br class="title-page-name"/>    BrowserModule,<br class="title-page-name"/>    FormsModule,<br class="title-page-name"/>    AngularFireModule.<span>initializeApp</span>(<span>environment</span>.<span>firebase</span>),<br class="title-page-name"/>    BrowserAnimationsModule,<br class="title-page-name"/>    RouterModule.<span>forRoot</span>([]),<br class="title-page-name"/>    AuthenticationModule<br class="title-page-name"/>  ],<br class="title-page-name"/>  <span>providers</span>: [<br class="title-page-name"/>    AngularFireAuth,<br class="title-page-name"/>    AngularFireDatabase,<br class="title-page-name"/>  ],<br class="title-page-name"/>  <span>bootstrap</span>: [AppComponent]<br class="title-page-name"/>})<br class="title-page-name"/><span>export class </span>AppModule {<br class="title-page-name"/>}</pre>
<ol start="3" class="calibre13">
<li class="calibre8" value="3">Add the placeholder in the app component template, as shown in the following<span> </span><kbd class="calibre11">app.component.html</kbd> file<span>:</span></li>
</ol>
<pre class="calibre18"><span>&lt;</span><span>router-outlet</span><span>&gt;&lt;/</span><span>router-outlet</span><span>&gt;</span></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating services</h1>
                
            
            <article>
                
<p class="calibre2">Services in an Angular application contain core business logic. As a part of the signup component, we created two services:</p>
<ul class="calibre7">
<li class="calibre8">Authentication service</li>
<li class="calibre8">User service</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Authentication service</h1>
                
            
            <article>
                
<p class="calibre2">We introduced authentication service in <span>the</span> preceding chapter, so we will add more methods in an authentication service. Remember the following steps while creating angular services.</p>
<ol class="calibre13">
<li value="1" class="calibre8"><strong class="calibre1">Writing the services</strong>: AngularFire2<span> has an</span> <span><kbd class="calibre11">AngularFireAuth</kbd> class. This class gives access to <kbd class="calibre11">firebase.auth.Auth</kbd>, </span><span>which has the</span> <kbd class="calibre11">createUserWithEmailAndPassword</kbd> <span>API to sign up to Firebase.</span></li>
</ol>
<pre class="calibre18"><span>import </span>{Injectable} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><span>import </span>{AngularFireAuth} <span>from </span><span>'angularfire2/auth'</span>;<br class="title-page-name"/><br class="title-page-name"/><span>/**<br class="title-page-name"/></span><span> * Authentication service<br class="title-page-name"/></span><span> *<br class="title-page-name"/></span><span> */<br class="title-page-name"/></span>@<span>Injectable</span>()<br class="title-page-name"/><span>export class </span>AuthenticationService {<br class="title-page-name"/><br class="title-page-name"/>  <span>/**<br class="title-page-name"/></span><span>   * Constructor<br class="title-page-name"/></span><span>   *<br class="title-page-name"/></span><span>   * </span><span>@param </span><span>{AngularFireAuth} angularFireAuth provides the <br class="title-page-name"/>     functionality related to authentication<br class="title-page-name"/></span><span>   */<br class="title-page-name"/></span><span>  </span><span>constructor</span>(<span>private </span>angularFireAuth: AngularFireAuth) {<br class="title-page-name"/>  }<br class="title-page-name"/><br class="title-page-name"/>  <span>public </span><span>signup</span>(email: <span>string</span>, password: <span>string</span>): Promise&lt;<span>any</span>&gt; {<br class="title-page-name"/>    <span>return <br class="title-page-name"/>    this</span>.angularFireAuth.<span>auth</span>.<span>createUserWithEmailAndPassword</span>(email, <br class="title-page-name"/>    password);<br class="title-page-name"/>  }<br class="title-page-name"/>}</pre>
<ol start="2" class="calibre13">
<li value="2" class="calibre8"><strong class="calibre1">Registering the service</strong>: We will need to include this service in the authentication module before using the APIs. Take a look at the following details.</li>
</ol>
<p class="calibre23">We will need to change <kbd class="calibre11">authentication.module.ts</kbd> to include authentication service. The <kbd class="calibre11">NgModule</kbd> metadata of the authentication module will look the following code snippet; we have added the <kbd class="calibre11">providers</kbd> tag to include the <kbd class="calibre11">AuthenticationService</kbd>.</p>
<pre class="calibre19">@NgModule({<br class="title-page-name"/>    <span>imports</span>: [<br class="title-page-name"/>       ...    <br class="title-page-name"/>    ],<br class="title-page-name"/>    <span>declarations</span>: [<br class="title-page-name"/>        ...<br class="title-page-name"/>    ],<br class="title-page-name"/>    <span>providers</span>: [<br class="title-page-name"/>        AuthenticationService<br class="title-page-name"/>    ]<br class="title-page-name"/>})<br class="title-page-name"/>...</pre>
<ol start="3" class="calibre13">
<li class="calibre8" value="3"><span><strong class="calibre1">Injecting and using the</strong> <strong class="calibre1">service:</strong> Once the service is registered, we will need to declare it in the constructor. The instance will be injected by the Angular framework. Finally, the signup component uses the <kbd class="calibre11">AuthenticationService</kbd> </span><kbd class="calibre11">signup()</kbd><span> API to authenticate a user to Firebase.</span></li>
</ol>
<p class="calibre23">The following example shows the declaration of <kbd class="calibre11">AuthenticationService</kbd> in the signup component:</p>
<pre class="calibre19"><span>constructor</span>(<span>private </span>authService:  AuthenticationService) {}</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">User service</h1>
                
            
            <article>
                
<p class="calibre2">In addition to registering a new user to Firebase authentication, we will also need to store more information about the user, such as the mobile, email, and so on, in our Firebase database.</p>
<p class="calibre2">The user service is used to enter user information in the Firebase database. We use <kbd class="calibre11">AngularFireDatabase</kbd> from <kbd class="calibre11">angularfire2</kbd> to set user information to the Firebase database. This class is injected in the constructor of the <kbd class="calibre11">UserService</kbd> class:</p>
<pre class="calibre17"><span>constructor</span>(<span>private </span>fireDb: AngularFireDatabase) {}</pre>
<p class="calibre2"><kbd class="calibre11">AngularFireDatabase</kbd> provides an object method, which accepts the path of the data in the Firebase database; this returns <kbd class="calibre11">AngularFireObject</kbd> to <kbd class="calibre11">set</kbd> the data to Firebase:</p>
<pre class="calibre17"><span>public </span><span>addUser</span>(user: User): <span>void </span>{<br class="title-page-name"/><span>    this</span>.fireDb.<span>object</span>(<span>`</span>${<span>USERS_CHILD</span>}<span>/</span>${user.<span>uid</span>}<span>`</span>).<span>set</span>(user);<br class="title-page-name"/>}</pre>
<p class="calibre2"><span>The complete <kbd class="calibre11">user.service.ts</kbd> file </span><span>as of now is as follows:</span></p>
<pre class="calibre17"><span>import </span>{Injectable} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><span>import </span>{AngularFireDatabase} <span>from </span><span>'angularfire2/database'</span>;<br class="title-page-name"/><span>import </span>{User} <span>from </span><span>'./user'</span>;<br class="title-page-name"/><span>import </span><span>'firebase/storage'</span>;<br class="title-page-name"/><span>import </span>{<span>USERS_CHILD</span>} <span>from </span><span>'./database-constants'</span>;<br class="title-page-name"/><br class="title-page-name"/><span>/**<br class="title-page-name"/></span><span> * User service<br class="title-page-name"/></span><span> *<br class="title-page-name"/></span><span> */<br class="title-page-name"/></span>@<span>Injectable</span>()<br class="title-page-name"/><span>export class </span>UserService {<br class="title-page-name"/><br class="title-page-name"/>  <span>/**<br class="title-page-name"/></span><span>   * Constructor<br class="title-page-name"/></span><span>   *<br class="title-page-name"/></span><span>   * </span><span>@param </span><span>{AngularFireDatabase} fireDb provides the functionality for <br class="title-page-name"/>     Firebase Database<br class="title-page-name"/></span><span>   */<br class="title-page-name"/></span><span>  </span><span>constructor</span>(<span>private </span>fireDb: AngularFireDatabase) {<br class="title-page-name"/>  }<br class="title-page-name"/><br class="title-page-name"/>  <span>public </span><span>addUser</span>(user: User): <span>void </span>{<br class="title-page-name"/>    <span>this</span>.fireDb.<span>object</span>(<span>`</span>${<span>USERS_CHILD</span>}<span>/</span>${user.<span>uid</span>}<span>`</span>).<span>set</span>(user);<br class="title-page-name"/>  }<br class="title-page-name"/>}</pre>
<p class="calibre2">As covered in the preceding section, we will need to register the service in <kbd class="calibre11">authentication.module.ts</kbd>:</p>
<pre class="calibre17">@NgModule({<br class="title-page-name"/>    <span>imports</span>: [<br class="title-page-name"/>       ...    <br class="title-page-name"/>    ],<br class="title-page-name"/>    <span>declarations</span>: [<br class="title-page-name"/>        ...<br class="title-page-name"/>    ],<br class="title-page-name"/>    <span>providers</span>: [<br class="title-page-name"/>        AuthenticationService,<br class="title-page-name"/>        UserService<br class="title-page-name"/>    ]<br class="title-page-name"/>})</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Defining domain model</h1>
                
            
            <article>
                
<p class="calibre2">The object model contains information about the key domain of our application. This helps to store our unstructured data in a more readable and structured way. In our application, we will introduce a lot of object models to store our domain information.</p>
<p class="calibre2">When we sign up a new user, we will store the user details in the Firebase database, and we created a user model with properties related to the user<span> to store the user's data</span>. All the properties are declared as member variables with type since TypeScript supports types for variables as shown in the following<span> <kbd class="calibre11">user.ts</kbd></span><span>:</span></p>
<pre class="calibre17"><span>export class </span>User {<br class="title-page-name"/><br class="title-page-name"/>   <span>email</span>: <span>string</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>name</span>: <span>string</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>mobile</span>: <span>string</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>uid</span>: <span>string</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>friendcount</span>: <span>number</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>image</span>: <span>string</span>;<br class="title-page-name"/>}</pre>
<div class="packt_infobox"><span class="calibre20">TypeScript is the type version of JavaScript, and it compiles into JavaScript. Programming in Typescript is much easier and faster. You can learn more about this at</span> <a href="https://www.typescriptlang.org/docs/home.html" class="calibre30">https://www.typescriptlang.org/docs/home.html</a><span class="calibre20">.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating signup templates</h1>
                
            
            <article>
                
<p class="calibre2">A signup template represents the view of web page. It provides the form elements to type user inputs. It also handles user errors in the template. We will go through all tags used in the template in this section. Error handling used in the template will be covered in the next section.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">FormModule</h1>
                
            
            <article>
                
<p class="calibre2">We use <kbd class="calibre11">&lt;form&gt;</kbd> from <kbd class="calibre11">FormModule</kbd> to create the template for signup. <kbd class="calibre11">ngForm</kbd> contains the signup form data. This is required to retrieve the user-filled data. We pass this form data to the <kbd class="calibre11">onSignup()</kbd> method in the signup component. This user-filled data is retrieved using,<span> for example,</span> <kbd class="calibre11">signupFormData.<span>value.email</span></kbd><span>, as follows:</span></p>
<pre class="calibre17"><span>&lt;</span><span>form </span><span>name=</span><span>"form" </span><span>(ngSubmit)=</span><span>"</span><span>onSignup</span><span>(</span><span>signupFormData</span><span>)" </span><span>#signupFormData=</span><span>'ngForm'</span><span>&gt;&lt;/form&gt;</span></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Bootstrap elements</h1>
                
            
            <article>
                
<p class="calibre2">We used bootstrap elements to design our signup form. We included bootstrap and other dependent libraries such as tether and jQuery in our <kbd class="calibre11">index.html</kbd> file, as follows:</p>
<pre class="calibre17"><span>&lt;!DOCTYPE </span><span>html</span><span>&gt;</span><br class="title-page-name"/><span>&lt;</span><span>html</span><span>&gt;</span><br class="title-page-name"/><span>&lt;</span><span>head</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>meta </span><span>charset=</span><span>UTF-8</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>meta </span><span>name=</span><span>"viewport" </span><span>content=</span><span>"width=device-width, initial-scale=1"</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>script </span><span>src=</span><span>"https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"</span><span>&gt;&lt;/</span><span>script</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>link </span><span>rel=</span><span>"stylesheet" <br class="title-page-name"/></span><span>  href=</span><span>"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/<br class="title-page-name"/>  css/bootstrap.min.css"&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>script </span><span>src=</span><span>"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/<br class="title-page-name"/>  jquery.min.js"</span><span>&gt;&lt;/</span><span>script</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>script </span><span>src=</span><span>"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/<br class="title-page-name"/>  js/bootstrap.min.js"</span><span>&gt;&lt;/</span><span>script</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>title</span><span>&gt;</span>Friends - A Social App<span>&lt;/</span><span>title</span><span>&gt;</span><br class="title-page-name"/>  <span>&lt;</span><span>base </span><span>href=</span><span>"/"</span><span>&gt;</span><br class="title-page-name"/><span>&lt;/</span><span>head</span><span>&gt;</span><br class="title-page-name"/><span>&lt;</span><span>body</span><span>&gt;</span><br class="title-page-name"/><span>&lt;</span><span>app-friends</span><span>&gt;</span><br class="title-page-name"/>  Loading...<br class="title-page-name"/><span>&lt;/</span><span>app-friends</span><span>&gt;</span><br class="title-page-name"/><span>&lt;/</span><span>body</span><span>&gt;</span><br class="title-page-name"/><span>&lt;/</span><span>html</span><span>&gt;</span></pre>
<div class="packt_infobox"><span class="calibre20">Bootstrap is an open source toolkit for developing HTML, CSS, and JavaScript. </span><span class="calibre20">For more details, refer to <a href="https://getbootstrap.com/docs/4.0/getting-started/introduction/" class="calibre30">https://getbootstrap.com/docs/4.0/getting-started/introduction/</a></span><span class="calibre20">.</span></div>
<p class="calibre2">The elements used are as follows:</p>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Grid styles</strong>: We use bootstrap grid styles to align our form to the middle as follows:</li>
</ul>
<pre class="calibre18"><span>&lt;</span><span>div </span><span>class=</span><span>"col-md-6 col-md-offset-3"</span><span>&gt;&lt;/div&gt;</span></pre>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Alert</strong>: This element is used to provide context messages when a user performs any action on the element as follows:</li>
</ul>
<pre class="calibre18"><span>&lt;div class=</span><span>"alert alert-danger"</span><span>&gt;</span><span>&lt;/</span><span>div&gt;</span></pre>
<div class="packt_infobox"><span class="calibre20">For more details about bootstrap, refer to</span> <a href="https://getbootstrap.com/docs/4.0/components/alerts/" class="calibre30">https://getbootstrap.com/docs/4.0/components/alerts/</a><span class="calibre20">.</span></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Angular data binding</h1>
                
            
            <article>
                
<p class="calibre2">As discussed in the preceding chapter, Angular supports various ways to bind data. In this particular case, we will support one-way binding using <kbd class="calibre11"><span>(ngModel)='</span><span>name'</span></kbd><span>.</span></p>
<p class="calibre2"><span>Take a look at the complete <kbd class="calibre11">signup.component.html</kbd> file </span><span>as of now:</span></p>
<pre class="calibre17"><span>&lt;</span><span>div </span><span>class=</span><span>"col-md-6 col-md-offset-3"</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;</span><span>h2</span><span>&gt;</span>Signup<span>&lt;/</span><span>h2</span><span>&gt;</span><br class="title-page-name"/> <span>&lt;</span><span>app-error-alert </span><span>*ngIf=</span><span>"</span><span>showError</span><span>" </span><span>[errorMessage]=</span><span>"</span><span>errorMessage</span><span>"</span><span>&gt;  <br class="title-page-name"/> &lt;/</span><span>app-error-alert</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;</span><span>form </span><span>name=</span><span>"form" </span><span>(ngSubmit)=</span><span>"</span><span>onSignup</span><span>(</span><span>signupFormData</span><span>)" <br class="title-page-name"/></span><span>     #signupFormData=</span><span>'ngForm'</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>label </span><span>for=</span><span>"name"</span><span>&gt;</span>Name<span>&lt;/</span><span>label</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>input </span><span>type=</span><span>"text" </span><span>class=</span><span>"form-control" </span><span>name=</span><span>"name" <br class="title-page-name"/></span><span>             (ngModel)=</span><span>"</span><span>name</span><span>" </span><span>#name=</span><span>"ngModel" </span><span>required id=</span><span>"name"</span><span>/&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"</span><span>name</span><span>.</span><span>valid</span><span> || </span><span>name</span><span>.</span><span>pristine</span><span>"<br class="title-page-name"/></span><span>                 </span><span>class=</span><span>"alert alert-danger"</span><span>&gt;</span><br class="title-page-name"/>                Name is required<br class="title-page-name"/>            <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>label </span><span>for=</span><span>"email"</span><span>&gt;</span>Email<span>&lt;/</span><span>label</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>input </span><span>type=</span><span>"text" </span><span>class=</span><span>"form-control" </span><span>name=</span><span>"email" <br class="title-page-name"/></span><span>             (ngModel)=</span><span>"</span><span>email</span><span>" </span><span>#email=</span><span>"ngModel"<br class="title-page-name"/></span><span>                   </span><span>required<br class="title-page-name"/></span><span>                   pattern=</span><span>"^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*<br class="title-page-name"/>                   (\.\w{2,3})+$"<br class="title-page-name"/></span><span>                   </span><span>id=</span><span>"email"</span><span>/&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"</span><span>email</span><span>.</span><span>valid</span><span> || </span><span>email</span><span>.</span><span>pristine</span><span>"<br class="title-page-name"/></span><span>                 </span><span>class=</span><span>"alert alert-danger"</span><span>&gt;</span><br class="title-page-name"/>                <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>email</span><span>.</span><span>hasError</span><span>('required')"</span><span>&gt;</span>Email is <br class="title-page-name"/>                 required<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>                <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>email</span><span>.</span><span>hasError</span><span>('pattern')"</span><span>&gt;</span>Email format <br class="title-page-name"/>                 should be<br class="title-page-name"/>                    <span>&lt;</span><span>small</span><span>&gt;&lt;</span><span>b</span><span>&gt;</span>codingchum@gmail.com<span>&lt;/</span><span>b</span><span>&gt;&lt;/</span><span>small</span><span>&gt;</span><br class="title-page-name"/>                <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>label </span><span>for=</span><span>"password"</span><span>&gt;</span>Password<span>&lt;/</span><span>label</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>input </span><span>type=</span><span>"password" </span><span>class=</span><span>"form-control" </span><span>name=</span><span>"password" <br class="title-page-name"/></span><span>            (ngModel)=</span><span>"</span><span>password</span><span>" </span><span>#password=</span><span>"ngModel" </span><span>required <br class="title-page-name"/>             id=</span><span>"password"</span><span>/&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"</span><span>password</span><span>.</span><span>valid</span><span> || </span><span>password</span><span>.</span><span>pristine</span><span>"<br class="title-page-name"/></span><span>                 </span><span>class=</span><span>"alert alert-danger"</span><span>&gt;</span><br class="title-page-name"/>                Password is required<br class="title-page-name"/>            <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>label </span><span>for=</span><span>"name"</span><span>&gt;</span>Retype Password<span>&lt;/</span><span>label</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>input </span><span>type=</span><span>"password" </span><span>class=</span><span>"form-control" <br class="title-page-name"/></span><span>             id=</span><span>"confirmPassword"<br class="title-page-name"/></span><span>                   </span><span>required<br class="title-page-name"/></span><span>                   passwordEqual=</span><span>"password"<br class="title-page-name"/></span><span>                   </span><span>(ngModel)=</span><span>"</span><span>confirmPassword</span><span>" </span><span>name=</span><span>"confirmPassword"<br class="title-page-name"/></span><span>                   </span><span>#confirmPassword=</span><span>"ngModel"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"</span><span>confirmPassword</span><span>.</span><span>valid</span><span> || <br class="title-page-name"/></span><span>            confirmPassword</span><span>.</span><span>pristine</span><span>"<br class="title-page-name"/></span><span>                 </span><span>class=</span><span>"alert alert-danger"</span><span>&gt;</span><br class="title-page-name"/>                Passwords did not match<br class="title-page-name"/>            <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>label </span><span>for=</span><span>"mobile"</span><span>&gt;</span>Mobile<span>&lt;/</span><span>label</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>input </span><span>type=</span><span>"text" </span><span>class=</span><span>"form-control" </span><span>name=</span><span>"mobile" <br class="title-page-name"/></span><span>             (ngModel)=</span><span>"</span><span>mobile</span><span>" </span><span>#mobile=</span><span>"ngModel"<br class="title-page-name"/></span><span>                   </span><span>required<br class="title-page-name"/></span><span>                   pattern=</span><span>"[0-9]*"<br class="title-page-name"/></span><span>                   </span><span>minlength=</span><span>"10"<br class="title-page-name"/></span><span>                   </span><span>maxlength=</span><span>"10"<br class="title-page-name"/></span><span>                   </span><span>id=</span><span>"mobile"</span><span>/&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"</span><span>mobile</span><span>.</span><span>valid</span><span> || </span><span>mobile</span><span>.</span><span>pristine</span><span>"<br class="title-page-name"/></span><span>                 </span><span>class=</span><span>"alert alert-danger"</span><span>&gt;</span><br class="title-page-name"/>                <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>mobile</span><span>.</span><span>hasError</span><span>('minlength')"</span><span>&gt;</span>Mobile <br class="title-page-name"/>                 should be 10 digit<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>                <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>mobile</span><span>.</span><span>hasError</span><span>('required')"</span><span>&gt;</span>Mobile is <br class="title-page-name"/>                 required<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>                <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>mobile</span><span>.</span><span>hasError</span><span>('pattern')"</span><span>&gt;</span>Mobile  <br class="title-page-name"/>                 number should be only numbers<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>button </span><span>type=</span><span>"submit" </span><span>class=</span><span>"btn btn-success" <br class="title-page-name"/></span><span>            [disabled]=</span><span>"!</span><span>signupFormData</span><span>.</span><span>form</span><span>.</span><span>valid</span><span>"</span><span>&gt;</span>SIGNUP<span>&lt;/</span><span>button</span><span>&gt;</span><br class="title-page-name"/>            <span>&lt;</span><span>a </span><span>[routerLink]=</span><span>"['/app-friends-login']" </span><span>class=</span><span>"btn btn-<br class="title-page-name"/>            link"</span><span>&gt;</span>CANCEL<span>&lt;/</span><span>a</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;/</span><span>form</span><span>&gt;</span><br class="title-page-name"/><span>&lt;/</span><span>div</span><span>&gt;</span></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Error handling</h1>
                
            
            <article>
                
<p class="calibre2">Error handling is an important step to create a good application. It makes our product more robust and error-resistant.</p>
<p class="calibre2">We use angular validators to validate user inputs for accuracy and completeness. For user input, we can use a common inbuilt validator or create our own custom validator.</p>
<div class="packt_infobox"><span class="calibre20">Please note that these validators are built into HTML, not angular itself.</span></div>
<p class="calibre2">The following are a few of the inbuilt validators that are used:</p>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Required</strong>: This makes the input field mandatory.</li>
<li class="calibre8"><strong class="calibre1">Min length</strong>: This defines a lower limit to the user input. For example, we can limit the minimum length of mobile numbers to 10 digits.</li>
<li class="calibre8"><strong class="calibre1">Max length</strong>. This defines a higher limit to the user input. For example, we can limit the maximum length of mobile number to 10 digits.</li>
<li class="calibre8"><strong class="calibre1">Pattern</strong>: We can create a pattern for user input. For example, the mobile number takes only number as its input. </li>
</ul>
<p class="calibre2">Inbuilt validators can be used in a signup template, as follows:</p>
<pre class="calibre17"><span>&lt;</span><span>div </span><span>class=</span><span>"form-group"</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;</span><span>label </span><span>for=</span><span>"mobile"</span><span>&gt;</span>Mobile<span>&lt;/</span><span>label</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;</span><span>input </span><span>type=</span><span>"text" </span><span>class=</span><span>"form-control" </span><span>name=</span><span>"mobile" <br class="title-page-name"/></span><span>     [(ngModel)]=</span><span>"</span><span>model</span><span>.</span><span>mobile</span><span>" </span><span>#mobile=</span><span>"ngModel"<br class="title-page-name"/></span><span>           </span><span>required<br class="title-page-name"/></span><span>           pattern=</span><span>"[0-9]*"<br class="title-page-name"/></span><span>           </span><span>minlength=</span><span>"10"<br class="title-page-name"/></span><span>           </span><span>maxlength=</span><span>"10"<br class="title-page-name"/></span><span>           </span><span>id=</span><span>"mobile"</span><span>/&gt;</span><br class="title-page-name"/>    <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"</span><span>mobile</span><span>.</span><span>valid</span><span> || </span><span>mobile</span><span>.</span><span>pristine</span><span>"<br class="title-page-name"/></span><span>         </span><span>class=</span><span>"alert alert-danger"</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>mobile</span><span>.</span><span>hasError</span><span>('minlength')"</span><span>&gt;</span>Mobile should be <br class="title-page-name"/>         10 digit<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>mobile</span><span>.</span><span>hasError</span><span>('required')"</span><span>&gt;</span>Mobile is <br class="title-page-name"/>         required<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>        <span>&lt;</span><span>div </span><span>[hidden]=</span><span>"!</span><span>mobile</span><span>.</span><span>hasError</span><span>('pattern')"</span><span>&gt;</span>Mobile number <br class="title-page-name"/>         should be only numbers<span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/><span>&lt;/</span><span>div</span><span>&gt;</span></pre>
<p class="calibre2">A custom validator is the customized validator for our application's use case. In our application, we will take a password and make the user retype their password for confirmation, to validate those two passwords, we will create a custom password validator.</p>
<p class="calibre2">To create our validator, we will extend <kbd class="calibre11">Validator</kbd> from our form module. This provides a <kbd class="calibre11">validate</kbd> method to write our custom implementation: </p>
<pre class="calibre17"><span>import </span>{Directive, <span>forwardRef</span>, Attribute} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><span>import </span>{Validator, AbstractControl, <span>NG_VALIDATORS</span>} <span>from </span><span>'@angular/forms'</span>;<br class="title-page-name"/><br class="title-page-name"/>@Directive({<br class="title-page-name"/>    <span>selector</span>: <span>'[passwordEqual][formControlName],[passwordEqual]<br class="title-page-name"/>    [formControl],[passwordEqual][ngModel]'</span>,<br class="title-page-name"/>    <span>providers</span>: [<br class="title-page-name"/>        {<span>provide</span>: <span>NG_VALIDATORS</span>, <span>useExisting</span>: <span>forwardRef</span>(() =&gt; <br class="title-page-name"/>         PasswordEqualValidator), <span>multi</span>: <span>true</span>}<br class="title-page-name"/>    ]<br class="title-page-name"/>})<br class="title-page-name"/><span>export class </span>PasswordEqualValidator <span>implements </span>Validator {<br class="title-page-name"/>    <span>constructor</span>(@Attribute(<span>'passwordEqual'</span>) <span>public </span>passwordEqual: <br class="title-page-name"/><span>    string</span>) {<br class="title-page-name"/>    }<br class="title-page-name"/><br class="title-page-name"/>    <span>validate</span>(control: AbstractControl): { [<span>key</span>: <span>string</span>]: <span>any </span>} {<br class="title-page-name"/>        <span>let </span><span>retypePassword </span>= control.<span>value</span>;<br class="title-page-name"/><br class="title-page-name"/>        <span>let </span><span>originalPassword </span>= control.<span>root</span>.<span>get</span>(<span>this</span>.passwordEqual);<br class="title-page-name"/><br class="title-page-name"/>        <span>// original &amp; retype password is egual<br class="title-page-name"/></span><span>        </span><span>return </span>(<span>originalPassword </span>&amp;&amp; <span>retypePassword </span>!== <br class="title-page-name"/><span>        originalPassword</span>.<span>value</span>)<br class="title-page-name"/>            ? {<span>passwordEqual</span>: <span>false</span>} : <span>null</span>;<br class="title-page-name"/>    }<br class="title-page-name"/>}</pre>
<p class="calibre2">We include the validator in our module, and our <kbd class="calibre11">authentication.module.ts</kbd> looks as follows:</p>
<pre class="calibre17">@NgModule({<br class="title-page-name"/>    <span>imports</span>: [<br class="title-page-name"/>       ...    <br class="title-page-name"/>    ],<br class="title-page-name"/>    <span>declarations</span>: [<br class="title-page-name"/>        PasswordEqualValidator<br class="title-page-name"/>    ],<br class="title-page-name"/>    <span>providers</span>: [<br class="title-page-name"/>        ...<br class="title-page-name"/>    ]<br class="title-page-name"/>})<br class="title-page-name"/>...</pre>
<p class="calibre2">Finally, we use <kbd class="calibre11">PasswordEqualValidator</kbd> using the <kbd class="calibre11">passwordEqual</kbd> selector in our signup template to confirm the password, as shown in the following code:</p>
<pre class="calibre17"><span>&lt;</span><span>input </span><span>type=</span><span>"password" </span><span>class=</span><span>"form-control" </span><span>id=</span><span>"confirmPassword"<br class="title-page-name"/></span><span>       </span><span>required<br class="title-page-name"/></span><span>       passwordEqual=</span><span>"password"<br class="title-page-name"/></span><span>       </span><span>[(ngModel)]=</span><span>"</span><span>model</span><span>.confirmPassword" </span><span>name=</span><span>"confirmPassword"<br class="title-page-name"/></span><span>       </span><span>#confirmPassword=</span><span>"ngModel"</span><span>&gt;</span></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Firebase errors</h1>
                
            
            <article>
                
<p class="calibre2">Once a user provides correct input and clicks on the <span>SIGNUP</span> button, we can call the <kbd class="calibre11">signup()</kbd> method and the user is directed to their profile page. If any user input is incorrect, Firebase APIs throw an error to the application, and we will need to handle it in our application. </p>
<p class="calibre2"> <kbd class="calibre11">createUserWithEmailAndPassword</kbd> of <kbd class="calibre11">AngularFireAuth</kbd> throws the following errors:</p>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">auth/email-already-in-use</strong><span>: This error is thrown when a user provides an already-used email address for signing up. </span></li>
<li class="calibre8"><strong class="calibre1">auth/invalid-email</strong><span>: This error is thrown when the email address is not valid.</span></li>
<li class="calibre8"><strong class="calibre1">auth/operation-not-allowed</strong><span>: This error is thrown when Firebase authentication is not enabled when we create signup for the user. Most of the time, this occurs during development.</span></li>
<li class="calibre8"><strong class="calibre1">auth/weak-password</strong><span>: This is thrown when the password provided is weak.</span></li>
</ul>
<p class="calibre2">When we call the signup API, <kbd class="calibre11">auth</kbd> returns <kbd class="calibre11">Promise&lt;any&gt;</kbd>. This class has <kbd class="calibre11">then</kbd> and <kbd class="calibre11">catch</kbd> methods for success and failure scenarios. In the <kbd class="calibre11">catch</kbd> block, we read the error message and show error in alert dialog. <span>Firebase error message has a human-readable error message, so we don't map the error code with message. </span>We can also  a create custom alert dialog and show the error message. In the next section, we will create a custom error alert and integrate it with the signup template.</p>
<pre class="calibre17"><span>onSignup</span>(signupFormData): <span>void </span>{   <span>this</span>.authService.<span>signup</span>(signupFormData.<span>value</span>.<span>email</span>, signupFormData.<span>value</span>.<span>password</span>).<span>then</span>((userInfo) =&gt; {<br class="title-page-name"/>        <span>...</span><br class="title-page-name"/>    }).<span>catch</span>((error) =&gt; {<br class="title-page-name"/>        <span>this</span>.<span>showError </span>= <span>true;</span><br class="title-page-name"/>        <span>this</span>.<span>errorMessage </span>= error.<span>message</span>;<br class="title-page-name"/>    });<br class="title-page-name"/>}</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a customized alert dialog</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will create an alert dialog component. This is used to display an error message. It is a reusable component, which means it can be used across the application. We will need to follow the following steps to create and configure our independent alert dialog:</p>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Creating the component</strong>: This is same as creating any other component. We have provided the <kbd class="calibre11">@Input errorMessage:any</kbd> binding to accept an error message from an other integrated component. This message will be displayed on the signup page.</li>
</ul>
<p class="mce-root"><span>Here's the complete <kbd class="calibre11">error-alert.component.ts</kbd></span><span>:</span></p>
<pre class="calibre18"><span>import </span>{Component, Input} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><br class="title-page-name"/>@<span>Component</span>({<br class="title-page-name"/>   <span>selector</span>: <span>'app-error-alert'</span>,<br class="title-page-name"/>   <span>templateUrl</span>: <span>'./error-alert.component.html'</span>,<br class="title-page-name"/>   <span>styleUrls</span>: [<span>'./error-alert.component.scss'</span>]<br class="title-page-name"/>})<br class="title-page-name"/><span>export class </span>ErrorAlertComponent {<br class="title-page-name"/><br class="title-page-name"/>   @<span>Input</span>() <span>errorMessage</span>: <span>any</span>;<br class="title-page-name"/><br class="title-page-name"/>}</pre>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Creating the template</strong>: We have used alert from bootstrap components. The <kbd class="calibre11">errorMessage</kbd> variable in curly braces accepts the text and displays the error message on the signup page.</li>
</ul>
<p class="mce-root"><span>Here's the complete <kbd class="calibre11">error-alert.component.html</kbd></span><span>:</span></p>
<pre class="calibre18"><span>&lt;</span><span>div </span><span>class=</span><span>"error-alert-container"</span><span>&gt;</span><br class="title-page-name"/>   <span>&lt;</span><span>div </span><span>class=</span><span>"alert alert-danger fade show" </span><span>role=</span><span>"alert"</span><span>&gt;</span><br class="title-page-name"/>      {{<span>errorMessage</span>}}<br class="title-page-name"/>   <span>&lt;/</span><span>div</span><span>&gt;</span><br class="title-page-name"/><span>&lt;/</span><span>div</span><span>&gt;</span></pre>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Creating the style sheets</strong>: We have margin <kbd class="calibre11">top</kbd> and <kbd class="calibre11">bottom</kbd> to align the alert properly.</li>
</ul>
<p class="mce-root"><span>Here's the complete <kbd class="calibre11">error-alert.component.scss</kbd></span><span>:</span></p>
<pre class="calibre18">.<span>error-alert-container </span>{<br class="title-page-name"/>    <span>margin-top</span>: <span>24</span><span>px</span>;<br class="title-page-name"/>    <span>margin-bottom</span>: <span>8</span><span>px</span>;<br class="title-page-name"/>}</pre>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Configuring in the signup template</strong>: Once our error alert is ready, we can integrate it with other components. In this chapter, we integrated an error alert with our signup component. This contains the <kbd class="calibre11">*ngIf</kbd> directive to enable the error alert and error message binding to display the text from the signup component.</li>
</ul>
<p class="mce-root"><span>Here's the modified <kbd class="calibre11">signup.component.html</kbd> file with an error alert, as follows</span><span>:</span></p>
<pre class="calibre18"><span>&lt;</span><span>div </span><span>class=</span><span>"col-md-6 col-md-offset-3"</span><span>&gt;</span><br class="title-page-name"/>    <span>&lt;</span><span>h2</span><span>&gt;</span>Signup<span>&lt;/</span><span>h2</span><span>&gt;</span><br class="title-page-name"/>   <span>&lt;</span><span>app-error-alert </span><span>*ngIf=</span><span>"showError" </span><span>[errorMessage]=</span><span>"errorMessage"</span><span>&gt;  <br class="title-page-name"/>   &lt;/</span><span>app-error-alert</span><span>&gt;</span><br class="title-page-name"/> ...<br class="title-page-name"/>&lt;/div&gt;</pre>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Assigning the error message</strong>: We have created two member variables: <kbd class="calibre11">errorMessage</kbd> and <kbd class="calibre11">showError</kbd>. These variables are enabled in the <kbd class="calibre11">onSignup()</kbd> method when an error occurs. <kbd class="calibre11">errorMessage</kbd> is assigned from <kbd class="calibre11">error.message</kbd>.</li>
</ul>
<p class="mce-root"><span>Here's the complete <kbd class="calibre11">signup.component.ts</kbd> with an error message</span><span>:</span></p>
<pre class="calibre18"><span>export class </span>SignupComponent {<br class="title-page-name"/><br class="title-page-name"/>   <span>errorMessage</span>: <span>string</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>showError: boolean</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>onSignup</span>(signupFormData): <span>void </span>{    <br class="title-page-name"/><span>   this</span>.authService.<span>signup</span>(signupFormData.<span>value</span>.<span>email</span>, <br class="title-page-name"/>   signupFormData.<span>value</span>.<span>password</span>).<span>then</span>((userInfo) =&gt; {<br class="title-page-name"/>         <span>// Register the new user<br class="title-page-name"/></span><span>         ...<br class="title-page-name"/></span><span>      </span>}).<span>catch</span>((error) =&gt; {<br class="title-page-name"/>         <span>this</span>.<span>showError </span>= <span>true</span>;<br class="title-page-name"/>         <span>this</span>.<span>errorMessage </span>= error.<span>message</span>;<br class="title-page-name"/>      });<br class="title-page-name"/>   }<br class="title-page-name"/>}</pre>
<p class="calibre2">During signup of a new user, if you type a password with just one character, the error in the <span>Signup</span> page looks as follows:</p>
<div class="cdpaligncenter"><img src="../images/00010.jpeg" class="calibre31"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating a signup component</h1>
                
            
            <article>
                
<p class="calibre2">A signup component is a controller and it is used to react to a user's action, such as sign up or cancel. It is injected with the following two services:</p>
<ul class="calibre7">
<li class="calibre8"><strong class="calibre1">Authentication service</strong>: It provides authentication-related functionalities, such as login, signup, and logout</li>
<li class="calibre8"><strong class="calibre1">User service</strong>: It interacts with the Firebase database to store extra user information, such as the mobile number and name.</li>
</ul>
<p class="mce-root">The constructor of the signup component accepts authentication and user services, as follows:</p>
<pre class="calibre18"><span>constructor</span>(<span>private </span>authService: AuthenticationService, <span>private </span>userService: UserService) {<br class="title-page-name"/>}</pre>
<p class="calibre2">When the user clicks on the <span>SIGNUP</span> button, the <kbd class="calibre11">onSignup</kbd> method is called. It accepts form data as a parameter, which has user-typed information. The email and password are retrieved and passed to the authentication service's <kbd class="calibre11">signup</kbd> method. On successful signup, we retrieve other information from the form data and store it in the user domain model. Finally, we will pass this newly created <kbd class="calibre11">User</kbd> object to user service and register it in the Firebase database:</p>
<div class="packt_infobox">On successful signup, the user info contains the UID. This is the unique identifier for a particular user. It is used as an indicator to store data in the Firebase database. This is also used to retrieve user information from the database.</div>
<pre class="calibre17"><span>onSignup</span>(signupFormData): <span>void </span>{<br class="title-page-name"/>   <span>this</span>.authService.<span>signup</span>(signupFormData.<span>value</span>.<span>email</span>, <br class="title-page-name"/>   signupFormData.<span>value</span>.<span>password</span>).<span>then</span>((userInfo) =&gt; {<br class="title-page-name"/>      <span>// Register the new user<br class="title-page-name"/></span><span>      </span><span>const </span><span>user</span>: User = <span>new </span>User(signupFormData.<span>value</span>.<span>email</span>,<br class="title-page-name"/>         signupFormData.<span>value</span>.<span>name</span>, signupFormData.<span>value</span>.<span>mobile</span>, <br class="title-page-name"/>         userInfo.<span>uid</span>, <span>0</span>, <span>''</span>);<br class="title-page-name"/>      <span>this</span>.<span>writeNewUser</span>(<span>user</span>);<br class="title-page-name"/>   }).<span>catch</span>((error) =&gt; {<br class="title-page-name"/>      <span>this</span>.<span>showError </span>= <span>true</span>;<br class="title-page-name"/>      <span>this</span>.<span>errorMessage </span>= error.<span>message</span>;<br class="title-page-name"/>   });<br class="title-page-name"/>}<br class="title-page-name"/><br class="title-page-name"/><span>private </span><span>writeNewUser</span>(user: User): <span>void </span>{<br class="title-page-name"/>   <span>this</span>.userService.<span>addUser</span>(user);<br class="title-page-name"/>}</pre>
<p class="calibre2">After a successful signup, Firebase authentication will have the following entry:</p>
<div class="cdpaligncenter"><img src="../images/00011.jpeg" class="calibre32"/></div>
<p class="calibre2">The Firebase database will have the following entry:</p>
<div class="cdpaligncenter"><img src="../images/00012.jpeg" class="calibre33"/></div>
<p class="calibre2"><span>Here's the complete <kbd class="calibre11">signup.component.ts</kbd> file </span><span>as of now:</span></p>
<pre class="calibre17"><span>import </span>{Component} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><span>import </span>{User} <span>from </span><span>'../../services/user'</span>;<br class="title-page-name"/><span>import </span>{AuthenticationService} <span>from </span><span>'../../services/authentication.service'</span>;<br class="title-page-name"/><span>import </span>{UserService} <span>from </span><span>'../../services/user.service'</span>;<br class="title-page-name"/><br class="title-page-name"/>@<span>Component</span>({<br class="title-page-name"/>   <span>selector</span>: <span>'app-friends-signup'</span>,<br class="title-page-name"/>   <span>styleUrls</span>: [<span>'signup.component.scss'</span>],<br class="title-page-name"/>   <span>templateUrl</span>: <span>'signup.component.html'<br class="title-page-name"/></span>})<br class="title-page-name"/><span>export class </span>SignupComponent {<br class="title-page-name"/><br class="title-page-name"/>   <span>errorMessage</span>: <span>string</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>showError: boolean</span>;<br class="title-page-name"/><br class="title-page-name"/>   <span>constructor</span>(<span>private </span>authService: AuthenticationService,<br class="title-page-name"/>            <span>private </span>userService: UserService) {<br class="title-page-name"/>   }<br class="title-page-name"/><br class="title-page-name"/>   <span>onSignup</span>(signupFormData): <span>void </span>{<br class="title-page-name"/>      <span>this</span>.authService.<span>signup</span>(signupFormData.<span>value</span>.<span>email</span>, <br class="title-page-name"/>      signupFormData.<span>value</span>.<span>password</span>).<span>then</span>((userInfo) =&gt; {<br class="title-page-name"/>         <span>// Register the new user<br class="title-page-name"/></span><span>         </span><span>const </span><span>user</span>: User = <span>new </span>User(signupFormData.<span>value</span>.<span>email</span>,<br class="title-page-name"/>            signupFormData.<span>value</span>.<span>name</span>, signupFormData.<span>value</span>.<span>mobile</span>, <br class="title-page-name"/>            userInfo.<span>uid</span>, <span>0</span>, <span>''</span>);<br class="title-page-name"/>         <span>this</span>.<span>writeNewUser</span>(<span>user</span>);<br class="title-page-name"/>      }).<span>catch</span>((error) =&gt; {<br class="title-page-name"/>         <span>this</span>.<span>showError </span>= <span>true</span>;<br class="title-page-name"/>         <span>this</span>.<span>errorMessage </span>= error.<span>message</span>;<br class="title-page-name"/>      });<br class="title-page-name"/>   }<br class="title-page-name"/><br class="title-page-name"/>   <span>private </span><span>writeNewUser</span>(user: User): <span>void </span>{<br class="title-page-name"/>      <span>this</span>.userService.<span>addUser</span>(user);<br class="title-page-name"/>   }</pre>
<p class="calibre2">Finally, register <kbd class="calibre11">signupComponent</kbd> in the authentication routing module, as follows:</p>
<pre class="calibre17"><span>import </span>{NgModule} <span>from </span><span>'@angular/core'</span>;<br class="title-page-name"/><span>import </span>{RouterModule, Routes} <span>from </span><span>'@angular/router'</span>;<br class="title-page-name"/><span>import </span>{SignupComponent} <span>from </span><span>'./signup/signup.component'</span>;<br class="title-page-name"/><br class="title-page-name"/><span>export const </span><span>ROUTES</span>: Routes = [<br class="title-page-name"/>  {<span>path</span>: <span>'app-friends-signup'</span>, <span>component</span>: SignupComponent}<br class="title-page-name"/>];<br class="title-page-name"/><br class="title-page-name"/><span>/**<br class="title-page-name"/></span><span> * Authentication Routing Module<br class="title-page-name"/></span><span> */<br class="title-page-name"/></span>@<span>NgModule</span>({<br class="title-page-name"/>  <span>imports</span>: [RouterModule.<span>forChild</span>(<span>ROUTES</span>)],<br class="title-page-name"/>  <span>exports</span>: [RouterModule]<br class="title-page-name"/>})<br class="title-page-name"/><span>export class </span>AuthenticationRouting {<br class="title-page-name"/>}</pre>
<p class="calibre2"> Now, take a look at your component in the browser using <kbd class="calibre11">http://localhost:4200/app-friends-signup</kbd>, the component looks as follows:</p>
<div class="cdpaligncenter"><img src="../images/00013.jpeg" class="calibre34"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">Finally, we build our signup component. The key learning in this chapter is injectable services. We created authentication and user services. These services used the Angular fire library to interact with Firebase authentication and database services. These new services were added to the signup component using dependency injection. This component used the services to sign up new users and add them to Firebase database. We inbuilt and customized message alerts.</p>
<p class="calibre2">In the next chapter, we will create a login component and log-in the newly registered user account. After successful login, the user will be directed to the user profile page.</p>


            </article>

            
        </section>
    </body></html>