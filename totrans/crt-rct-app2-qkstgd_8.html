<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting Your App Ready for Production</h1>
                </header>
            
            <article>
                
<p class="mce-root">We've put together a pretty nice starter application in Create React App over the span of this book. While it probably won't win any awards, you now have the foundation that you need to be able to build on top of this and turn it into the next world-leading pomodoro tracker, or maybe something like a new task manager application for developers! Throughout all of this, we've covered the build process and the bootstrap process, but have yet to focus on the final portion of building any application: shipping it to production!</p>
<p class="mce-root">We've spent a lot of time talking about the different important features in Create React App, and have built an application on top of it. We've added a lot to our application; we took something from zero to an app that is functional, uses the latest and greatest modern JavaScript programming techniques, and uses the sort of techniques that you'll see when working with Create React App in any sort of professional environment.</p>
<p class="mce-root">We'll need to expand on that and cover the remaining Create React App CLI commands that we can run: <kbd>build</kbd> and <kbd>eject</kbd>. We have added a few extra libraries here and there, primarily as utility libraries, but we should also spend a little bit of time working with a few additional libraries, in order to get a feel for how that impacts the workflow. So, we'll discuss a few common libraries, including their usage, impact, and where to go to learn more about them.</p>
<p class="mce-root">By the end of this chapter, you will have learned about the following topics:</p>
<ul>
<li class="mce-root">Adding other libraries to our application</li>
<li class="mce-root">Using Create React App <kbd>eject</kbd>, and its impact on your application</li>
<li class="mce-root">Using Create React App <kbd>build</kbd> to create a production build</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding other libraries</h1>
                </header>
            
            <article>
                
<p class="mce-root">As we mentioned previously, we'll be adding a few more libraries. If you're not interested in swapping either of these libraries, you can safely skip this section, but there are a few items to cover that may be representative of scenarios that you'll run into while working on JavaScript in a team environment. For example, Redux was, at one point, considered important (if not essential) for building a React project of any significant complexity. Recently, that mentality has ebbed a bit, and generally speaking, people will only opt for using libraries like Redux when it is more necessary and state management is a harder part of their applications. Regardless, we should have experience in adding it to our applications, so that we will be ready to contribute, should we ever be working on a project that is using it as well. There are a lot of other common libraries that people use in conjunction with React, and we'll cover them very quickly here, before moving on to a quick example of using Redux in a Create React App project!</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Other popular React libraries</h1>
                </header>
            
            <article>
                
<p>There are other libraries that come up frequently when working with React. These may be libraries that help you to use your browser's address bar to figure out what component to render as its main application, or they may be libraries that give any form elements that you use in React a little more native functionality and remove more boilerplate code.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">React Router</h1>
                </header>
            
            <article>
                
<p>React Router is a library aimed at helping you route requests to particular components. The idea is that when someone visits your project, they may want to interact with a specific component. This helps you to manage those requests and figure out the right way to get the user directly to that component. The good news is that installing React Router and using it inside of a Create React App project is actually pretty simple! To install it, all you need to run is the following command:</p>
<pre><strong>$ yarn add react-router-dom</strong></pre>
<p>Then, you can modify your <kbd>src/App/App.js</kbd> file to start adding new routes to components! React Router is similar to Redux, in that it is an incredibly complex project by itself; so, if you want to learn more, you can visit <a href="https://reacttraining.com/react-router/">https://reacttraining.com/react-router/.</a></p>
<p><a href="https://reacttraining.com/react-router/"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">React Final Form</h1>
                </header>
            
            <article>
                
<p>Odds are, if you're working with any form of interactive web application, you'll need to be able to handle web forms in a consistent and performant way. The great news is that, because this is such a common problem, there are a number of popular libraries out there to handle dealing with forms in React efficiently. The most popular of these is React Final Form, which you can add to your project by running the following command:</p>
<pre><strong>$ yarn add react-final-form final-form</strong></pre>
<p>From there, you can use any of React Final Form's functionality to replace the forms in your application! For more information on how to properly take advantage of this library, you can visit <a href="https://github.com/final-form/react-final-form">https://github.com/final-form/react-final-form</a>.<a href="https://github.com/final-form/react-final-form"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Adding Redux for state management</h1>
                </header>
            
            <article>
                
<p class="mce-root">Redux is a common library for managing the state of your application, especially when it is a little more complicated, and you want to control the flow of events in your frontend project! Redux provides a way for you to tightly control how the entire state of your application is affected by different types of events, such as button clicks or form changes. If your application gets incredibly large and complex, and managing too many different streams of events affecting your application becomes too hard, it is a great time to introduce something like Redux to your project!<br/>
<br/>
The good news is that, similar to the previous libraries, you can also add Redux to your Create React App project without a lot of extra fuss! You'll want both <kbd>redux</kbd> and <kbd>react-redux</kbd>, to make sure that you have all of the bindings that you'd normally need to connect everything together:</p>
<pre class="mce-root"><strong>$ yarn add redux react-redux</strong></pre>
<p class="mce-root">This should install everything that you need to get started with Redux. Similar to the other libraries that we've mentioned, Redux is an incredibly complex topic that could easily fill up an entire book by itself. If you'd like to learn more about Redux, visit <a href="https://redux.js.org/">https://redux.js.org/</a>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Creating a production build</h1>
                </header>
            
            <article>
                
<p class="mce-root">Finally, we're ready to get this all bundled up and ready for a production deployment! Our code is done, our code works, and everything is great; so, what do we do now?</p>
<p class="mce-root">It's simple; we just run <kbd>yarn build</kbd> and call it a day! Well, that's most of the process. You see, when you run <kbd>yarn build</kbd>, Create React App tries to figure out the best, most efficient way to bundle up everything that you've been working on in your Create React App project and minify/productionize everything that you've written<span>—</span>every image and asset that you've added, every library that needs to be included<span>—</span>everything.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to create a production build</h1>
                </header>
            
            <article>
                
<p class="mce-root">To create a production build, we just need to run <kbd>yarn build</kbd>. It's that simple! See the following:</p>
<pre class="mce-root"><strong>$ yarn build</strong><br/><strong>yarn run v1.12.3</strong><br/><strong>$ react-scripts build</strong><br/><strong>Creating an optimized production build...</strong><br/><strong>Compiled successfully.</strong><br/><br/><strong>File sizes after gzip:</strong><br/><br/><strong>69.67 KB (+4.53 KB) build/static/js/1.877dc59d.chunk.js</strong><br/><strong>21.85 KB build/static/css/1.4cb1c3c1.chunk.css</strong><br/><strong>2.32 KB (+46 B) build/static/js/main.1f5d1459.chunk.js</strong><br/><strong>763 B build/static/js/runtime~main.229c360f.js</strong><br/><strong>507 B build/static/css/main.af121e46.chunk.css</strong><br/><br/><strong>The project was built assuming it is hosted at the server root.</strong><br/><strong>You can control this with the homepage field in your package.json.</strong><br/><strong>For example, add this to build it for GitHub Pages:</strong><br/><br/><strong>"homepage" : "http://myname.github.io/myapp",</strong><br/><br/><strong>The build folder is ready to be deployed.</strong><br/><strong>You may serve it with a static server:</strong><br/><br/><strong>yarn global add serve</strong><br/><strong>serve -s build</strong><br/><br/><strong>Find out more about deployment here:</strong><br/><br/><strong>http://bit.ly/CRA-deploy</strong><br/><br/><strong>Done in 26.70s.</strong></pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">You should now have a production-ready build of files in the <kbd>build/</kbd> directory of your application! This is a heavily-optimized build, ready to be copied and deployed, wherever you can deploy your application!</p>
<p>What's important to note is that the output of this process are static files (fully compiled HTML/JS/CSS) that can be deployed and run from any place that can serve static files back to a user<span>—</span>so, essentially, any kind of <strong>content delivery network</strong> (<span><strong>CDN</strong>)</span> or web server that you may already have.</p>
<p class="mce-root">This process relies heavily on Webpack's build process and multiple different build and optimization plugins that optimize nearly every part of the build process. Files are minified, chunked by their usage and scope (to reduce importing files that we don't need), and set up in a way that allows for browser caching, to reduce as much effort as possible each time a person revisits your site!</p>
<div class="mce-root packt_tip"><strong>Minified</strong> means that the files are reduced down in file size as much as possible, by renaming code, minimizing whitespace, or otherwise cutting down on extraneous code, so that the amount of JavaScript that needs to be deployed is as small as possible.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Thoughts on the deployment process</h1>
                </header>
            
            <article>
                
<p class="mce-root">The actual deployment process is a little bit more tricky. There are a million and one ways to deploy this, but as we have built our application off of a proxy backend server, one of the methods is for us to integrate our project into an existing backend server with something to serve our frontend code from, such as a Rails/node/Phoenix server. This allows us to run this code as our frontend and have a backend server behind the scenes, powering this application. Without that, our app won't work; as you may recall, this is an application powered by a <kbd>Todo</kbd> backend.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Ejecting our project</h1>
                </header>
            
            <article>
                
<p class="mce-root">One of the other options available to us is the ability to <kbd>eject</kbd> our project in Create React App. <strong>Ejecting</strong> an app means that it removes all of the scaffolds and confines of the Create React App CLI, with all of the bonuses and caveats that you might expect from such an operation. For one, we gain greater ability and control over our project, and can tweak things as we see fit, which is great; but it also puts you into a world where you need to understand your Babel configs, your Webpack configs, and every other behind the scenes configuration option that you were previously able to ignore.</p>
<p class="mce-root"/>
<p class="mce-root">Eject is very much a double-edged sword; it's a powerful tool, and it allows you to move beyond the rules that Create React App introduces into your world. However, you'll now be responsible for any headaches that come as a result of configuration modifications in the future.</p>
<p class="mce-root">That being said, <kbd>eject</kbd> is also an important command in the Create React App world. I've seen many projects that started off with a Create React App built project, but changed when the app became sufficiently complex. At that point, ejecting is a good idea, in order to be able to appropriately tweak things as you need to. Again, a big focus of this book is to understand how to become an expert on Create React App and its latest version; so, understanding and using all of the commands is a major part of that.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to eject</h1>
                </header>
            
            <article>
                
<p class="mce-root">Let's start by talking about how to perform an <kbd>eject</kbd> with Create React App. The process itself is actually simple enough: you just run <kbd>npm run eject</kbd> or <kbd>yarn eject</kbd>, and the process begins. This is also not quite enough information to be able to make an informed decision about when and where to <kbd>eject</kbd> with Create React App, so we'll actually explore the results of running the command. We'll start off by moving this into a new branch in our source control of choice (or, if you're not using one, copy the directory somewhere, so that you can play with this without fear of losing your project).</p>
<div class="mce-root packt_infobox">This is a permanent operation. If you don't want to be stuck with these changes, ensure that you have copied your folder, or branched it in such a way that you don't get locked into an <kbd>eject</kbd> during this section!</div>
<p>We get the following output:</p>
<pre class="mce-root"><strong>$ yarn eject</strong><br/><br/><strong>yarn run v1.12.3</strong><br/><strong>$ react-scripts eject</strong><br/><strong>? Are you sure you want to eject? This action is permanent. (y/N)</strong><br/><strong>If you answer yes, you'll see a ton of output:</strong><br/><br/><strong>Ejecting...</strong><br/><br/><strong>Copying files into /Users/brandon/Documents/dev/create-react-app-book/code/todoifier</strong><br/><strong>Adding /config/env.js to the project</strong><br/><strong>Adding /config/paths.js to the project</strong><br/><strong>Adding /config/webpack.config.dev.js to the project</strong><br/><strong>Adding /config/webpack.config.prod.js to the project</strong><br/><strong>Adding /config/webpackDevServer.config.js to the project</strong><br/><strong>Adding /config/jest/cssTransform.js to the project</strong><br/><strong>Adding /config/jest/fileTransform.js to the project</strong><br/><strong>Adding /scripts/build.js to the project</strong><br/><strong>Adding /scripts/start.js to the project</strong><br/><strong>Adding /scripts/test.js to the project</strong><br/><br/><strong>Updating the dependencies</strong><br/><strong>Removing react-scripts from dependencies</strong><br/><strong>Adding ...lots of packages... to dependencies</strong><br/><br/><strong>Updating the scripts</strong><br/><strong>Replacing "react-scripts start" with "node scripts/start.js"</strong><br/><strong>Replacing "react-scripts build" with "node scripts/build.js"</strong><br/><strong>Replacing "react-scripts test" with "node scripts/test.js"</strong><br/><br/><strong>Configuring package.json</strong><br/><strong>Adding Jest configuration</strong><br/><strong>Adding Babel preset</strong><br/><strong>Adding ESLint configuration</strong><br/><br/><strong>Running yarn...</strong><br/><strong>[1/4] Resolving packages...</strong><br/><strong>[2/4] Fetching packages...</strong><br/><strong>[3/4] Linking dependencies...</strong><br/><strong>[4/4] Building fresh packages...</strong><br/><br/><strong>success Saved lockfile.</strong><br/><strong>Ejected successfully!</strong><br/><br/><strong>Please consider sharing why you ejected in this survey:</strong><br/><strong>http://goo.gl/forms/Bi6CZjk1EqsdelXk1</strong><br/><br/><strong>Done in 14.39s.</strong></pre>
<p class="mce-root">Wow! A lot happens when you <kbd>eject</kbd>! It creates roughly 13 new scripts, most of which are either helper/utility JavaScript files or configuration files for things like Webpack, Babel, or Jest. A lot of this is the process of allowing you to continue to use your project as if it were already a major Create React App project, despite the fact that you just ejected. For example, most of our commands should work identically. If I run <kbd>yarn test</kbd>, for example, I should still get a full <kbd>Test Suite</kbd> running and passing:</p>
<pre class="mce-root"><strong>$ yarn test</strong><br/><strong>yarn run v1.12.3</strong><br/><strong>node scripts/test.js</strong><br/><br/><strong>PASS src/NewTodo/NewTodo.test.js</strong><br/><strong>PASS src/TodoList/TodoList.test.js</strong><br/><strong>PASS src/Todo/Todo.test.js</strong><br/><strong>PASS src/App/App.test.js</strong><br/><br/><strong>Test Suites: 4 passed, 4 total</strong><br/><strong>Tests: 21 passed, 21 total</strong><br/><strong>Snapshots: 3 passed, 3 total</strong><br/><strong>Time: 5.939s</strong><br/><strong>Ran all test suites.</strong><br/><br/><strong>Watch Usage: Press w to show more.</strong></pre>
<p class="mce-root">Similarly, if I run <kbd>yarn start</kbd>, I should be able to expect to use my React project in the same way that I always have:</p>
<pre><strong>$ yarn run v1.12.3</strong><br/><strong>node scripts/start.js</strong></pre>
<p class="mce-root">Our browser should still spin up and open itself to <kbd>http://localhost:3000/</kbd>. We can also continue to run our own backend simulation server, with requests getting proxied appropriately! As you can see, the Create React App team did everything they could to make <kbd>eject</kbd> as painless and seamless a process as it possibly could be. We can even still build for production with <kbd>yarn build</kbd>.</p>
<p class="mce-root">We can also see the configuration files that are created for us, based on how Create React App structures its projects. We can see the Webpack configs, for example, in these files:</p>
<pre class="mce-root">Adding /config/webpack.config.dev.js to the project<br/>Adding /config/webpack.config.prod.js to the project</pre>
<p class="mce-root">If you wanted to tweak your <kbd>config</kbd> in some custom way, this is where you'd do it, and you can base your configs off of the incredibly elaborate files that they've populated here.</p>
<p class="mce-root">You can also see how they've set up Jest to work so seamlessly, by looking at the scripts folder for <kbd>scripts/test.js</kbd>, as well as the Jest-specific configuration files located in <kbd>config/</kbd>.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Drawbacks of using eject</h1>
                </header>
            
            <article>
                
<p class="mce-root">Remember that this does not all come for free, and there's no reason not to just immediately <kbd>eject</kbd> a project. First off, you will not get any potential time-saving changes or productivity enhancers when the Create React App team updates the scripts for Create React App. You'll be in your own world if something breaks, if something doesn't work right, or otherwise, and you won't really have anywhere to reach out to for support.</p>
<p class="mce-root">The <kbd>eject</kbd> command is like buying something as-is. It might not have any strings attached to it anymore, but it also doesn't have any support, either. Buyer beware!</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p class="mce-root">That's it! At this point, you should have a solid grasp of Create React App 2's changes and benefits. We've explored functionality, both old and new, to make sure that we're building the most up-to-date, modern JavaScript implementations that we possibly can! We're using libraries and techniques that we would already be using in most frontend projects that we might build.</p>
<p class="mce-root">We've also taken a deep dive into how to set up a healthy software development life cycle using Create React App, getting us to a point where our application runs smoothly and is resilient when changes do occur. Our application is well and thoroughly tested, and is not prone to random breaking. This is all something that we've done with absolutely zero configuration; in my mind, this is one of the biggest strengths of working with a frontend development project in Create React App!</p>
<p class="mce-root">We've also integrated a number of other non-specific Create React App solutions into our code, whether it is better CSS support through CSS modules or SASS, or additional libraries and clever abstractions via service libraries. We've striven to code our projects in a smart way that allows for easy reuse and expandability, without making our projects obtuse or difficult for other developers to contribute to. We've also proxied a backend API, so that we can work with backend developers and show them the interface and data language that the frontend uses, reducing the friction and back-and-forth between multiple development teams and ideologies!</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">Finally, you've seen what our options become when we outgrow the safe confines of Create React App and eject our application into a standard Webpack configuration! Our application lives on, and we can configure new and exciting additions to our project without hobbling ourselves or our development team!</p>
<p class="mce-root">I hope you've learned a lot about how to really get started with Create React App (and, by proxy, React itself). Thank you so much for coming with me on this journey, and I can't wait to see what you build out there!</p>


            </article>

            
        </section>
    </div>



  </body></html>