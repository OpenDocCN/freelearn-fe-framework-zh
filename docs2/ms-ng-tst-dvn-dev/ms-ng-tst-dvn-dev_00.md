# 第一章：<st c="0">前言</st>

<st c="8">大家好！</st> **<st c="26">测试驱动开发</st>** <st c="49">(**<st c="51">TDD</st>**<st c="54">**)是一种在 Angular 开发中广泛使用的软件开发流程，用于确保代码质量并减少调试时间。</st> <st c="186">TDD 是一种敏捷的软件开发方法，强调在编写实际代码之前迭代编写测试。</st> <st c="314">TDD 过程包括</st> <st c="340">三个步骤：</st>

+   <st c="352">红色：在这个初始阶段，开发者为他们打算实现的功能编写测试。</st> <st c="450">由于还没有相应的代码，这个测试最初会失败，因此用“红色”这个词来表示测试的失败状态。</st>

+   <st c="586">绿色：在红色阶段之后，开发者编写必要的最少代码以使测试通过。</st> <st c="696">这一阶段的目标是快速从失败的测试（红色）过渡到通过的测试（绿色），重点是满足测试条件，而不一定优化代码。</st>

+   <st c="866">重构：在测试成功通过后，代码随后得到改进和优化。</st> <st c="955">这一阶段涉及改进代码的设计、结构和效率，同时确保测试保持绿色状态，即继续通过。</st> <st c="1098">重构对于在不改变代码外部行为的情况下提高代码质量、可维护性和性能至关重要，正如通过测试所证实的那样。</st>

<st c="1268">这些步骤会循环重复，用于每个新的功能，确保软件的每个部分都经过彻底测试并由测试支持，从而促进高代码质量，减少错误，并促进</st> <st c="1485">自信的重构。</st>

<st c="1507">本书是一本全面的指南，为开发者提供了提高技能和交付高质量 Angular 应用程序的必要资源。</st> <st c="1668">通过实践方法和真实世界的示例，它全面涵盖了 TDD 概念、技术和工具，不仅限于单元测试，还探索了 Angular 的管道、表单和响应式编程测试。</st> <st c="1869">在这本书中，你将学习如何使用管道验证和操作数据，测试 Angular 表单的输入验证和用户交互，以及使用响应式编程处理异步操作。</st> <st c="2069">此外，你将探索使用 Protractor、Cypress 和 Playwright 框架进行端到端测试，获得编写健壮的 Web 应用程序测试的宝贵见解，涵盖导航、元素交互和行为验证。</st> <st c="2315">你还将探索 TDD 与 CI/CD 的集成，学习自动化测试、部署 Angular 应用程序和实现更快反馈循环的最佳实践。</st> <st c="2485">借助具体的示例、最佳实践和清晰的解释，你将在本书结束时能够成功地在 Angular 项目中实施 TDD。</st>

# <st c="2655">本书面向对象</st>

*<st c="2676">精通 Angular 测试驱动开发</st>* <st c="2718">是一本全面的指南，为开发者提供了增强技能和交付高质量 Angular 应用程序的必要资源。</st> <st c="2865">通过实践方法和真实世界的示例，它全面涵盖了 TDD 概念、技术和工具，不仅限于单元测试，还探索了测试 Angular 管道、表单和响应式编程。</st> <st c="3068">在这本书中，你将学习如何使用管道验证和操作数据，测试 Angular 表单的输入验证和用户交互，以及使用响应式编程处理异步操作。</st> <st c="3269">此外，你将探索使用 Protractor、Cypress 和 Playwright 框架进行端到端测试，获得编写健壮的 Web 应用程序测试的宝贵见解，涵盖导航、元素交互和行为验证。</st> <st c="3516">你还将探索将 TDD 与 CI/CD 集成，学习自动化测试、部署 Angular 应用程序和实现更快反馈循环的最佳实践。</st> <st c="3663">反馈循环。</st>

<st c="3678">借助实践示例、最佳实践和清晰的解释，你将在本书结束时成功地在 Angular 项目中实施 TDD。</st>

# <st c="3839">本书涵盖内容</st>

*<st c="3861">第一章</st>*<st c="3871">,</st> *<st c="3873">使用 TDD 的第一步</st>*<st c="3906">，旨在理解和设置测试驱动开发。</st> <st c="3983">我们将通过它解决的问题、它带来的优势、其实施背后的逻辑以及它与 Angular 项目成功的相关性来分析这个概念。</st>

*<st c="4166">第二章</st>*<st c="4176">,</st> *<st c="4178">使用 Jasmine 和 Karma 测试 Angular 应用程序</st>* *<st c="4205">测试</st>* *<st c="4209">Angular 应用程序</st>*<st c="4230">，目标是熟悉 Jasmine 和 Karma 并编写你的第一个单元测试。</st> <st c="4323">你将了解如何在 Angular 项目中实施 Jasmine 和 Karma 的配置。</st>

*<st c="4421">第三章</st>*<st c="4431">,</st> *<st c="4433">为 Angular 组件、服务和指令编写有效的单元测试</st>*<st c="4510">，探讨了在尊重 TDD 原则的情况下重构为 Angular 组件编写的测试，并编写用于我们项目业务逻辑的 Angular 服务和指令的测试。</st> <st c="4700">测试将逐步重构，以突出 TDD 的渐进性特征。</st>

*<st c="4785">第四章</st>*<st c="4795">,</st> *<st c="4797">在 Angular 测试中模拟和存根依赖项</st>*<st c="4847">，专注于创建模拟，这是测试 Angular 服务和指令时不可避免的一个方面。</st> <st c="4960">同时，我们将利用这个机会完成和重构我们服务和指令的先前测试。</st>

*<st c="5083">第五章</st>*<st c="5093">,</st> *<st c="5095">测试 Angular 管道、表单和响应式编程</st>*<st c="5149">，探讨了基于测试驱动开发原则如何测试 Angular 项目的管道、响应式表单和 RxJS 操作符。</st>

*<st c="5291">第六章</st>*<st c="5301">,</st> *<st c="5303">使用 Protractor、Cypress 和 Playwright 探索端到端测试</st>*<st c="5372">，探讨了端到端测试——一种评估产品在端到端流程中功能的方法。</st> <st c="5483">因此，当你想要确保所构建应用程序的质量时，查阅它是非常明智的。</st> <st c="5593">目标是理解它，并了解在 Angular 项目中实施它的好处。</st>

*<st c="5702">第七章</st>*<st c="5712">,</st> *<st c="5714">理解 Cypress 及其</st>* *<st c="5744">在 Web 应用程序端到端测试中的作用</st>* *<st c="5748">，探讨了 Cypress 是如何成为 Angular 端到端测试最佳工具的。</st> <st c="5864">我们将一起发现如何安装它、配置它以及如何使用它来执行我们的各种面向组件的端到端测试。</st> <st c="5976">。

*<st c="5993">第八章</st>*<st c="6003">,</st> *<st c="6005">使用 Cypress 编写有效的端到端组件测试</st>*<st c="6062">，更深入地讨论了使用 Cypress 编写端到端测试的问题——始终采用 TDD 方法，因为我们将在尊重 Cypress 最佳实践的同时改进和重构与组件相关的先前测试。</st> <st c="6271">。

*<st c="6284">第九章</st>*<st c="6294">,</st> *<st c="6296">理解持续集成和持续部署（CI/CD）</st>*<st c="6366">，讨论了持续集成和持续开发的主题。</st> <st c="6443">目标是了解如何设置一个管道，该管道将负责在软件被编译并通过自动化作业通过所有测试之后，在将软件部署到我们的远程服务器之前使用 GitLab CI/CD 进行验证。</st> <st c="6653">。

*<st c="6666">第十章</st>*<st c="6677">,</st> *<st c="6679">Angular TDD 的最佳实践和模式</st>*<st c="6722">，专注于在 Angular 项目中实施测试驱动开发时的最佳实践以及存在的模式。</st> <st c="6846">目标是探索向易于维护且更不易出现 bug 的清洁代码收敛的方法。</st> <st c="6948">。

*<st c="6956">第十一章</st>*<st c="6967">,</st> *<st c="6969">通过 TDD 重构和改进 Angular 代码</st>*<st c="7019">，专注于利用测试驱动开发（TDD）技术重构和改进现有的 Angular 代码。</st> <st c="7131">通过在做出更改之前编写测试，您可以确保代码质量和可维护性，并自信地增强功能。</st> <st c="7258">TDD 通过基于测试反馈的编写测试、重构和改进代码的迭代周期，导致更健壮和高效的 Angular 应用程序。</st> <st c="7398">。

# <st c="7419">为了充分利用本书</st>

*<st c="7452">亲爱的读者，在您开始阅读本书之前，您应该对如何使用 Angular 框架及其相关的 TypeScript 语言创建应用程序有一个基本的了解。</st> <st c="7638">最后，您还需要了解如何使用 Git</st> * *<st c="7687">和 GitHub。</st> *。

| **本书涵盖的软件/硬件** **操作系统要求** |
| --- |
| Angular 17 或 更新版 LTS | Windows, macOS, 或 Linux |
| TypeScript 5.1 | Windows, macOS, 或 Linux |
| Node.js 18 或 更新版 LTS | Windows, macOS, 或 Linux |

**如果您正在使用本书的数字版，我们建议您亲自输入代码或从书的 GitHub 仓库获取代码（下一节中有一个链接）。这样做将帮助您避免与代码的复制和粘贴相关的任何潜在错误。** **代码的复制和粘贴。**

# 下载示例代码文件

您可以从 GitHub 在[`github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development`](https://github.com/PacktPublishing/Mastering-Angular-Test-Driven-Development)下载本书的示例代码文件。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富图书和视频目录的代码包可供在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)获取。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`<代码文本>`: 表示文本中的代码单词、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL 和用户输入。

以下是一个示例：“关于`percent.pipe.spec.ts`的内容，我们有以下内容：”

代码块设置如下：

```js
 import { PercentPipe } from './percent.pipe';
describe('PercentPipe', () => {
  it('create an instance', () => {
    const pipe = new PercentPipe();
    expect(pipe).toBeTruthy();
  });
});
```

任何命令行输入或输出都如下所示：

```js
 $ ng g pipe percent –skip-import
$ ng test
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以**粗体**显示。以下是一个示例：“现在我们可以通过点击**提交** **更改** **按钮**来保存文件。”

提示或重要注意事项

如此显示。

# 联系我们

读者反馈始终受欢迎。

**<st c="9532">一般反馈</st>**<st c="9549">：如果您对本书的任何方面有疑问，请通过</st> <st c="9617">customercare@packtpub.com</st> <st c="9642">给我们发邮件，并在邮件主题中提及书名。</st>

**<st c="9701">勘误表</st>**<st c="9708">：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。</st> <st c="9804">如果您在这本书中发现了错误，我们非常感谢您向我们报告。</st> <st c="9899">请访问</st> [<st c="9912">www.packtpub.com/support/errata</st>](http://www.packtpub.com/support/errata) <st c="9943">并填写</st> <st c="9956">表格。</st>

**<st c="9965">盗版</st>**<st c="9972">：如果您在互联网上以任何形式发现我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。</st> <st c="10143">请通过</st> <st c="10164">copyright@packt.com</st> <st c="10183">与我们联系，并提供</st> <st c="10199">材料的链接。</st>

**<st c="10212">如果您有兴趣成为作者</st>**<st c="10256">：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请</st> <st c="10381">访问</st> [<st c="10387">authors.packtpub.com</st>](http://authors.packtpub.com)<st c="10407">。</st>

# <st c="10408">分享您的想法</st>

<st c="10428">一旦您阅读了</st> *<st c="10446">精通 Angular 测试驱动开发</st>*<st c="10487">，我们很乐意听听您的想法！</st> <st c="10522">请</st> [<st c="10529">点击此处直接跳转到亚马逊评论页面</st>](https://packt.link/r/1805126083) <st c="10580">为此书分享</st> <st c="10605">您的反馈。</st>

<st c="10619">您的评论对我们和科技社区都很重要，并将帮助我们确保我们提供优质</st> <st c="10728">的内容。</st>

# <st c="10744">免费下载本书的 PDF 副本</st>

<st c="10782">感谢您购买</st> <st c="10805">这本书！</st>

<st c="10815">您喜欢在路上阅读，但又无法携带您的印刷</st> <st c="10881">书籍到处走吗？</st>

<st c="10898">您的电子书购买是否与您选择的设备不兼容？</st>

<st c="10968">不用担心，现在每购买一本 Packt 图书，您都可以免费获得该书的 DRM 免费 PDF 版本。</st> <st c="11055">无需付费。</st>

<st c="11063">在任何地方、任何地点、任何设备上阅读。</st> <st c="11105">从您最喜欢的技术书籍中搜索、复制和粘贴代码，直接将其放入</st> <st c="11183">您的应用程序中。</st>

<st c="11200">优惠远不止于此，您还可以获得独家折扣、时事通讯和丰富的免费内容，这些内容将每日出现在您的</st> <st c="11316">收件箱中</st>

<st c="11327">遵循以下简单步骤即可获得</st> <st c="11361">以下好处：</st>

1.  <st c="11374">扫描二维码或访问以下</st> <st c="11405">链接</st>

![](img/B21146_QR_Free_PDF.jpg)

[<st c="11417">https://packt.link/free-ebook/9781805126089</st>](https://packt.link/free-ebook/9781805126089)

1.  <st c="11460">提交您的购买证明</st>

1.  <st c="11490">就是这样！</st> <st c="11502">我们将直接将您的免费 PDF 和其他福利发送到您的</st> <st c="11554">电子邮件</st>

# <st c="0">第一部分：在 Angular 中开始测试驱动开发</st>

<st c="64">在本部分中，您将了解**<st c="121">测试驱动开发</st>**（**<st c="146">TDD</st>**）的优势、Angular 项目中的测试环境、使用 Jasmine 编写单元测试以及</st> <st c="237">配置 Karma。</st>

<st c="255">本部分包含以下章节：</st>

+   *<st c="293">第一章</st>*<st c="303">,</st> *<st c="305">使用 TDD 的第一步</st>*

+   *<st c="337">第二章</st>*<st c="347">,</st> *<st c="349">使用 Jasmine 和 Karma 测试 Angular 应用程序</st>*
