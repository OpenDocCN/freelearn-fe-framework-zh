<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer153">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     6
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-124">
    <span class="koboSpan" id="kobo.2.1">
     Reactive Patterns in Angular
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.3.1">
     Handling asynchronous information is a common task in our everyday lives as developers.
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.4.1">
      Reactive programming
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     is a
    </span>
    <a id="_idIndexMarker363">
    </a>
    <span class="koboSpan" id="kobo.6.1">
     paradigm that helps us consume, digest, and transform asynchronous information using data streams.
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.7.1">
      RxJS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.8.1">
     is a
    </span>
    <a id="_idIndexMarker364">
    </a>
    <span class="koboSpan" id="kobo.9.1">
     JavaScript library that provides methods to manipulate data streams using
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.10.1">
      observables
     </span>
    </strong>
    <span class="koboSpan" id="kobo.11.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.12.1">
     Angular provides an unparalleled toolset to help us when working with asynchronous data.
    </span>
    <span class="koboSpan" id="kobo.12.2">
     Observable streams
    </span>
    <a id="_idIndexMarker365">
    </a>
    <span class="koboSpan" id="kobo.13.1">
     are at the forefront of this toolset, giving developers a rich set of capabilities when creating Angular applications.
    </span>
    <span class="koboSpan" id="kobo.13.2">
     The core of the Angular framework is lightly dependent on RxJS.
    </span>
    <span class="koboSpan" id="kobo.13.3">
     Other Angular packages, such as the router and the HTTP client, are more tightly coupled with observables.
    </span>
    <span class="koboSpan" id="kobo.13.4">
     However, at the time of writing, the Angular team is currently investigating making the preceding packages less dependent on observables.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.14.1">
     In this chapter, we will learn about the following concepts:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.15.1">
      Strategies for handling asynchronous information
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.16.1">
      Reactive programming in Angular
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.17.1">
      The RxJS library
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.18.1">
      Subscribing to observables
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.19.1">
      Unsubscribing from observables
     </span>
    </li>
   </ul>
   <h1 class="heading-1" id="_idParaDest-125">
    <span class="koboSpan" id="kobo.20.1">
     Technical requirements
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.21.1">
     The chapter contains various code samples to walk you through observables and RxJS.
    </span>
    <span class="koboSpan" id="kobo.21.2">
     You can find the related source code in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.22.1">
      ch06
     </span>
    </code>
    <span class="koboSpan" id="kobo.23.1">
     folder of the following GitHub repository:
    </span>
   </p>
   <p class="normal">
    <a href="https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition">
     <span class="url">
      <span class="koboSpan" id="kobo.24.1">
       https://www.github.com/PacktPublishing/Learning-Angular-Fifth-Edition
      </span>
     </span>
    </a>
   </p>
   <h1 class="heading-1" id="_idParaDest-126">
    <span class="koboSpan" id="kobo.25.1">
     Strategies for handling asynchronous information
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.26.1">
     We manage data asynchronously in different forms, such as consuming data from a backend API, a typical operation in our daily development workflow, or reading contents from the local file system.
    </span>
    <span class="koboSpan" id="kobo.26.2">
     We always consume data over HTTP, such as when authenticating users by sending credentials to an authentication service.
    </span>
    <span class="koboSpan" id="kobo.26.3">
     We also use HTTP when fetching the
    </span>
    <a id="_idIndexMarker366">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     latest posts in our favorite social network application.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.28.1">
     Modern mobile devices have introduced a unique way of consuming remote services.
    </span>
    <span class="koboSpan" id="kobo.28.2">
     They defer requests and response consumption until mobile connectivity is available.
    </span>
    <span class="koboSpan" id="kobo.28.3">
     Responsivity and availability have become a big deal.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.29.1">
     Although internet connections are high-speed nowadays, response time is always involved when serving such information.
    </span>
    <span class="koboSpan" id="kobo.29.2">
     Thus, as we will see in this section, we put in place mechanisms to handle the state of our applications transparently for the end user.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-127">
    <span class="koboSpan" id="kobo.30.1">
     Shifting from callback hell to promises
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.31.1">
     Sometimes we might need to build functionalities in our application that change its state asynchronously once time has
    </span>
    <a id="_idIndexMarker367">
    </a>
    <span class="koboSpan" id="kobo.32.1">
     elapsed.
    </span>
    <span class="koboSpan" id="kobo.32.2">
     In these cases we must introduce code
    </span>
    <a id="_idIndexMarker368">
    </a>
    <span class="koboSpan" id="kobo.33.1">
     patterns, such as the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.34.1">
      callback pattern
     </span>
    </strong>
    <span class="koboSpan" id="kobo.35.1">
     , to handle this deferred change in the application state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.36.1">
     In a callback, the function that triggers asynchronous action accepts another function as a parameter.
    </span>
    <span class="koboSpan" id="kobo.36.2">
     The function is executed when the asynchronous operation has been completed.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.37.1">
      You will need the source code of the Angular application we created in
     </span>
     <em class="chapterRef">
      <span class="koboSpan" id="kobo.38.1">
       Chapter 5
      </span>
     </em>
     <span class="koboSpan" id="kobo.39.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.40.1">
       Managing Complex Tasks with Services
      </span>
     </em>
     <span class="koboSpan" id="kobo.41.1">
      , to follow along with the rest of the chapter.
     </span>
     <span class="koboSpan" id="kobo.41.2">
      After you get the code, we suggest you take the following actions for simplicity:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.42.1">
       Remove the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.43.1">
        favorites
       </span>
      </code>
      <span class="koboSpan" id="kobo.44.1">
       folder
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.45.1">
       Remove the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.46.1">
        favorites.service.ts
       </span>
      </code>
      <span class="koboSpan" id="kobo.47.1">
       and its unit test file
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.48.1">
       Remove the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.49.1">
        favorite.ts
       </span>
      </code>
      <span class="koboSpan" id="kobo.50.1">
       file
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.51.1">
       Remove the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.52.1">
        numeric.directive.ts
       </span>
      </code>
      <span class="koboSpan" id="kobo.53.1">
       file and its unit test file
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.54.1">
       Remove the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.55.1">
        product-view
       </span>
      </code>
      <span class="koboSpan" id="kobo.56.1">
       folder
      </span>
     </li>
    </ul>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.57.1">
     Let’s see how to use a callback through an example:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.58.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.59.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.60.1">
      file and add a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.61.1">
       &lt;header&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.62.1">
      HTML element to display the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.63.1">
       title
      </span>
     </code>
     <span class="koboSpan" id="kobo.64.1">
      component property using interpolation:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.65.1">&lt;header&gt;{{ title }}&lt;/header&gt;</span></strong></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.66.1">&lt;main class="main"&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.67.1">  &lt;div class="content"&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.68.1">    &lt;app-product-list&gt;&lt;/</span></span><span class="koboSpan" id="kobo.69.1">app-product-list&gt;
  &lt;</span><span class="hljs-regexp"><span class="koboSpan" id="kobo.70.1">/div&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.71.1">&lt;/m</span></span><span class="koboSpan" id="kobo.72.1">ain&gt;
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.73.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.74.1">footer</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.75.1">appCopyright</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.76.1">&gt;</span></span><span class="koboSpan" id="kobo.77.1"> - v{{ settings.version }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.78.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.79.1">footer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.80.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.81.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.82.1">router-outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.83.1"> /&gt;</span></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.84.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.85.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.86.1">
      file and
     </span>
     <a id="_idIndexMarker369">
     </a>
     <span class="koboSpan" id="kobo.87.1">
      create the following property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.88.1">private</span></span><span class="koboSpan" id="kobo.89.1"> setTitle = </span><span class="hljs-function"><span class="koboSpan" id="kobo.90.1">() =&gt;</span></span><span class="koboSpan" id="kobo.91.1"> {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.92.1">this</span></span><span class="koboSpan" id="kobo.93.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.94.1">title</span></span><span class="koboSpan" id="kobo.95.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.96.1">this</span></span><span class="koboSpan" id="kobo.97.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.98.1">settings</span></span><span class="koboSpan" id="kobo.99.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.100.1">title</span></span><span class="koboSpan" id="kobo.101.1">;
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.102.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.103.1">
      setTitle
     </span>
    </code>
    <span class="koboSpan" id="kobo.104.1">
     property is used to change the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.105.1">
      title
     </span>
    </code>
    <span class="koboSpan" id="kobo.106.1">
     component property based on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.107.1">
      title
     </span>
    </code>
    <span class="koboSpan" id="kobo.108.1">
     property from application settings.
    </span>
    <span class="koboSpan" id="kobo.108.2">
     It returns an arrow function because we will use it as a callback to another method.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.109.1">
      Next, create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.110.1">
       changeTitle
      </span>
     </code>
     <span class="koboSpan" id="kobo.111.1">
      method that calls another method, named, by convention,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.112.1">
       callback
      </span>
     </code>
     <span class="koboSpan" id="kobo.113.1">
      , after two seconds:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.114.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.115.1">changeTitle</span></span><span class="koboSpan" id="kobo.116.1">(</span><span class="hljs-attr"><span class="koboSpan" id="kobo.117.1">callback</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.118.1">: </span></span><span class="hljs-title"><span class="koboSpan" id="kobo.119.1">Function</span></span><span class="koboSpan" id="kobo.120.1">) {
  </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.121.1">setTimeout</span></span><span class="koboSpan" id="kobo.122.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.123.1">() =&gt;</span></span><span class="koboSpan" id="kobo.124.1"> {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.125.1">callback</span></span><span class="koboSpan" id="kobo.126.1">();
  }, </span><span class="hljs-number"><span class="koboSpan" id="kobo.127.1">2000</span></span><span class="koboSpan" id="kobo.128.1">);
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.129.1">
      Add a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.130.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.131.1">
      to call the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.132.1">
       changeTitle
      </span>
     </code>
     <span class="koboSpan" id="kobo.133.1">
      method, passing the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.134.1">
       setTitle
      </span>
     </code>
     <span class="koboSpan" id="kobo.135.1">
      property as a parameter:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.136.1">constructor</span></span><span class="koboSpan" id="kobo.137.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.138.1">this</span></span><span class="koboSpan" id="kobo.139.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.140.1">changeTitle</span></span><span class="koboSpan" id="kobo.141.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.142.1">this</span></span><span class="koboSpan" id="kobo.143.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.144.1">setTitle</span></span><span class="koboSpan" id="kobo.145.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.146.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.147.1">
      setTitle
     </span>
    </code>
    <span class="koboSpan" id="kobo.148.1">
     property without parentheses because we pass function signatures and not actual function calls when we use callbacks.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.149.1">
     If we run the
    </span>
    <a id="_idIndexMarker370">
    </a>
    <span class="koboSpan" id="kobo.150.1">
     Angular application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.151.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.152.1">
     command, we see that the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.153.1">
      title
     </span>
    </code>
    <span class="koboSpan" id="kobo.154.1">
     property changes after two seconds.
    </span>
    <span class="koboSpan" id="kobo.154.2">
     The problem with the pattern we just described is that the code can become confusing and cumbersome as we introduce more nested callbacks.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.155.1">
     Consider the following scenario where we need to drill down into a folder hierarchy to access photos on a device:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.156.1">getRootFolder</span></span><span class="koboSpan" id="kobo.157.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.158.1">folder</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.159.1"> =&gt;</span></span><span class="koboSpan" id="kobo.160.1"> { 
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.161.1">getAssetsFolder</span></span><span class="koboSpan" id="kobo.162.1">(folder, </span><span class="hljs-params"><span class="koboSpan" id="kobo.163.1">assets</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.164.1"> =&gt;</span></span><span class="koboSpan" id="kobo.165.1"> {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.166.1">getPhotos</span></span><span class="koboSpan" id="kobo.167.1">(assets, </span><span class="hljs-params"><span class="koboSpan" id="kobo.168.1">photos</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.169.1"> =&gt;</span></span><span class="koboSpan" id="kobo.170.1"> {}); 
  });   
});
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.171.1">
     We depend on the previous asynchronous call and the data it brings back before we can do the next call.
    </span>
    <span class="koboSpan" id="kobo.171.2">
     We must execute a method inside a callback that executes another method with a callback.
    </span>
    <span class="koboSpan" id="kobo.171.3">
     The code quickly
    </span>
    <a id="_idIndexMarker371">
    </a>
    <span class="koboSpan" id="kobo.172.1">
     looks complex and difficult to read, leading to a situation known as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.173.1">
      callback hell
     </span>
    </strong>
    <span class="koboSpan" id="kobo.174.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.175.1">
     We can avoid callback hell using
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.176.1">
      promises
     </span>
    </strong>
    <span class="koboSpan" id="kobo.177.1">
     .
    </span>
    <span class="koboSpan" id="kobo.177.2">
     Promises
    </span>
    <a id="_idIndexMarker372">
    </a>
    <span class="koboSpan" id="kobo.178.1">
     introduce a new way of envisioning asynchronous data management by conforming to a neater and more solid interface.
    </span>
    <span class="koboSpan" id="kobo.178.2">
     Different asynchronous operations can be chained at the same level and even be split and returned from other functions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.179.1">
     To better understand how promises work, let’s refactor our previous callback example:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.180.1">
      Create a new method in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.181.1">
       AppComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.182.1">
      class named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.183.1">
       onComplete
      </span>
     </code>
     <span class="koboSpan" id="kobo.184.1">
      that returns a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.185.1">
       Promise
      </span>
     </code>
     <span class="koboSpan" id="kobo.186.1">
      object.
     </span>
     <span class="koboSpan" id="kobo.186.2">
      A promise can either be
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.187.1">
       resolved
      </span>
     </strong>
     <span class="koboSpan" id="kobo.188.1">
      or
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.189.1">
       rejected
      </span>
     </strong>
     <span class="koboSpan" id="kobo.190.1">
      .
     </span>
     <span class="koboSpan" id="kobo.190.2">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.191.1">
       resolve
      </span>
     </code>
     <span class="koboSpan" id="kobo.192.1">
      parameter indicates that the
     </span>
     <a id="_idIndexMarker373">
     </a>
     <span class="koboSpan" id="kobo.193.1">
      promise was completed successfully
     </span>
     <a id="_idIndexMarker374">
     </a>
     <span class="koboSpan" id="kobo.194.1">
      and optionally returns a result:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.195.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.196.1">onComplete</span></span><span class="koboSpan" id="kobo.197.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.198.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.199.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.200.1">Promise</span></span><span class="koboSpan" id="kobo.201.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.202.1">void</span></span><span class="koboSpan" id="kobo.203.1">&gt;(</span><span class="hljs-params"><span class="koboSpan" id="kobo.204.1">resolve</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.205.1"> =&gt;</span></span><span class="koboSpan" id="kobo.206.1"> {
  });
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.207.1">
      Introduce a timeout of two seconds in the promise so that it resolves after this time has elapsed:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.208.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.209.1">onComplete</span></span><span class="koboSpan" id="kobo.210.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.211.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.212.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.213.1">Promise</span></span><span class="koboSpan" id="kobo.214.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.215.1">void</span></span><span class="koboSpan" id="kobo.216.1">&gt;(</span><span class="hljs-params"><span class="koboSpan" id="kobo.217.1">resolve</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.218.1"> =&gt;</span></span><span class="koboSpan" id="kobo.219.1"> {
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.220.1">setTimeout(() =&gt; {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.221.1">resolve();</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.222.1">}, 2000);</span></strong></span><span class="koboSpan" id="kobo.223.1">
  });
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.224.1">
      Now, replace the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.225.1">
       changeTitle
      </span>
     </code>
     <span class="koboSpan" id="kobo.226.1">
      call in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.227.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.228.1">
      with the promise-based method.
     </span>
     <span class="koboSpan" id="kobo.228.2">
      To execute a method that returns a promise, we invoke the method and chain it with the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.229.1">
       then
      </span>
     </code>
     <span class="koboSpan" id="kobo.230.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.231.1">constructor</span></span><span class="koboSpan" id="kobo.232.1">() {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.233.1">this.onComplete().then(this.setTitle);</span></strong></span><span class="koboSpan" id="kobo.234.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.235.1">
     We should not notice any significant difference if we rerun the Angular application.
    </span>
    <span class="koboSpan" id="kobo.235.2">
     The real value of promises lies in
    </span>
    <a id="_idIndexMarker375">
    </a>
    <span class="koboSpan" id="kobo.236.1">
     the simplicity and readability afforded to our code.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     We could now refactor the previous folder hierarchy example accordingly:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.237.1">getRootFolder</span></span><span class="koboSpan" id="kobo.238.1">()
  .</span><span class="hljs-title"><span class="koboSpan" id="kobo.239.1">then</span></span><span class="koboSpan" id="kobo.240.1">(getAssetsFolder)
  .</span><span class="hljs-title"><span class="koboSpan" id="kobo.241.1">then</span></span><span class="koboSpan" id="kobo.242.1">(getPhotos); 
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.243.1">
     The chaining of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.244.1">
      then
     </span>
    </code>
    <span class="koboSpan" id="kobo.245.1">
     method in the preceding code shows how we can line up one asynchronous call after another.
    </span>
    <span class="koboSpan" id="kobo.245.2">
     Each previous asynchronous call passes its result in the upcoming asynchronous method.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.246.1">
     Promises are compelling, but sometimes we might need to produce a response output that follows a more complex digest process or even cancel the whole process.
    </span>
    <span class="koboSpan" id="kobo.246.2">
     We cannot accomplish such behavior with promises because they are triggered as soon as they are instantiated.
    </span>
    <span class="koboSpan" id="kobo.246.3">
     In other words, promises are not lazy.
    </span>
    <span class="koboSpan" id="kobo.246.4">
     On the other hand, the possibility of tearing down an asynchronous operation after it has been fired but not completed yet can become quite handy in specific scenarios.
    </span>
    <span class="koboSpan" id="kobo.246.5">
     Promises allow us to resolve or reject an asynchronous operation, but sometimes we might want to abort everything before getting to that point.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.247.1">
     On top of that, promises behave as one-time operations.
    </span>
    <span class="koboSpan" id="kobo.247.2">
     Once they are resolved, we cannot expect to receive any further information or state change notifications unless we run everything from scratch.
    </span>
    <span class="koboSpan" id="kobo.247.3">
     To summarize the limitations of promises:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.248.1">
      They cannot be canceled
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.249.1">
      They are immediately executed
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.250.1">
      They are one-time operations; there is no easy way to retry them
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.251.1">
      They respond with only one value
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.252.1">
     Let’s illustrate some
    </span>
    <a id="_idIndexMarker376">
    </a>
    <span class="koboSpan" id="kobo.253.1">
     of the limitations with an example:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.254.1">
      Replace
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.255.1">
       setTimeout
      </span>
     </code>
     <span class="koboSpan" id="kobo.256.1">
      with
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.257.1">
       setInterval
      </span>
     </code>
     <span class="koboSpan" id="kobo.258.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.259.1">
       onComplete
      </span>
     </code>
     <span class="koboSpan" id="kobo.260.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.261.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.262.1">onComplete</span></span><span class="koboSpan" id="kobo.263.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.264.1">return</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.265.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.266.1">Promise</span></span><span class="koboSpan" id="kobo.267.1">&lt;</span><span class="hljs-built_in"><span class="koboSpan" id="kobo.268.1">void</span></span><span class="koboSpan" id="kobo.269.1">&gt;(</span><span class="hljs-params"><span class="koboSpan" id="kobo.270.1">resolve</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.271.1"> =&gt;</span></span><span class="koboSpan" id="kobo.272.1"> {
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.273.1">setInterval</span></strong></span><span class="koboSpan" id="kobo.274.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.275.1">() =&gt;</span></span><span class="koboSpan" id="kobo.276.1"> {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.277.1">resolve</span></span><span class="koboSpan" id="kobo.278.1">();
    }, </span><span class="hljs-number"><span class="koboSpan" id="kobo.279.1">2000</span></span><span class="koboSpan" id="kobo.280.1">);
  });
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.281.1">
     The promise will now resolve repeatedly every two seconds.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.282.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.283.1">
       setTitle
      </span>
     </code>
     <span class="koboSpan" id="kobo.284.1">
      property to append the current
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.285.1">
       timestamp
      </span>
     </code>
     <span class="koboSpan" id="kobo.286.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.287.1">
       title
      </span>
     </code>
     <span class="koboSpan" id="kobo.288.1">
      property of the component:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.289.1">private</span></span><span class="koboSpan" id="kobo.290.1"> setTitle = </span><span class="hljs-function"><span class="koboSpan" id="kobo.291.1">() =&gt;</span></span><span class="koboSpan" id="kobo.292.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.293.1">const timestamp = new Date();</span></strong></span>
  <span class="hljs-variable"><span class="koboSpan" id="kobo.294.1">this</span></span><span class="koboSpan" id="kobo.295.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.296.1">title</span></span><span class="koboSpan" id="kobo.297.1"> = </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.298.1">`${this.settings.title} (${timestamp})`;</span></strong></span><span class="koboSpan" id="kobo.299.1">
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.300.1">
      Run the Angular application and you will notice that the timestamp is set only once after two seconds and never changes again.
     </span>
     <span class="koboSpan" id="kobo.300.2">
      The promise resolves itself, and the entire asynchronous event terminates at that very moment.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.301.1">
     We may need a more proactive implementation of asynchronous data handling to fix the preceding behavior, which is where observables come into the picture.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-128">
    <span class="koboSpan" id="kobo.302.1">
     Observables in a nutshell
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.303.1">
     An observable is an object that maintains a
    </span>
    <a id="_idIndexMarker377">
    </a>
    <span class="koboSpan" id="kobo.304.1">
     list of dependents, called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.305.1">
      observers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.306.1">
     , and informs them about state and
    </span>
    <a id="_idIndexMarker378">
    </a>
    <span class="koboSpan" id="kobo.307.1">
     data changes by emitting events asynchronously.
    </span>
    <span class="koboSpan" id="kobo.307.2">
     To do so, the observable implements all the necessary machinery to produce and emit such events.
    </span>
    <span class="koboSpan" id="kobo.307.3">
     It can be triggered and canceled at any time, regardless of whether it has emitted the expected data already.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.308.1">
     Observers must subscribe to an observable to be notified and react to reflect the state change.
    </span>
    <span class="koboSpan" id="kobo.308.2">
     This pattern, known as the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.309.1">
      observer pattern
     </span>
    </strong>
    <span class="koboSpan" id="kobo.310.1">
     , allows
    </span>
    <a id="_idIndexMarker379">
    </a>
    <span class="koboSpan" id="kobo.311.1">
     concurrent operations and more advanced logic.
    </span>
    <span class="koboSpan" id="kobo.311.2">
     These observers, also known as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.312.1">
      subscribers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.313.1">
     , keep listening to whatever
    </span>
    <a id="_idIndexMarker380">
    </a>
    <span class="koboSpan" id="kobo.314.1">
     happens in the
    </span>
    <a id="_idIndexMarker381">
    </a>
    <span class="koboSpan" id="kobo.315.1">
     observable until it is destroyed.
    </span>
    <span class="koboSpan" id="kobo.315.2">
     We can see all this with more transparency in an actual example:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.316.1">
      Import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.317.1">
       Observable
      </span>
     </code>
     <span class="koboSpan" id="kobo.318.1">
      artifact from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.319.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.320.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.321.1">import</span></span><span class="koboSpan" id="kobo.322.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.323.1">Observable</span></span><span class="koboSpan" id="kobo.324.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.325.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.326.1">'rxjs'</span></span><span class="koboSpan" id="kobo.327.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.328.1">
      Create a component property named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.329.1">
       title$
      </span>
     </code>
     <span class="koboSpan" id="kobo.330.1">
      that creates an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.331.1">
       Observable
      </span>
     </code>
     <span class="koboSpan" id="kobo.332.1">
      object.
     </span>
     <span class="koboSpan" id="kobo.332.2">
      The constructor of an observable accepts an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.333.1">
       observer
      </span>
     </code>
     <span class="koboSpan" id="kobo.334.1">
      object as a parameter.
     </span>
     <span class="koboSpan" id="kobo.334.2">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.335.1">
       observer
      </span>
     </code>
     <span class="koboSpan" id="kobo.336.1">
      is an arrow function that contains the business logic that will be executed when someone uses the observable.
     </span>
     <span class="koboSpan" id="kobo.336.2">
      Call the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.337.1">
       next
      </span>
     </code>
     <span class="koboSpan" id="kobo.338.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.339.1">
       observer
      </span>
     </code>
     <span class="koboSpan" id="kobo.340.1">
      every two seconds to indicate a data or application state change:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.341.1">title$ = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.342.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.343.1">Observable</span></span><span class="koboSpan" id="kobo.344.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.345.1">observer</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.346.1"> =&gt;</span></span><span class="koboSpan" id="kobo.347.1"> {
  </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.348.1">setInterval</span></span><span class="koboSpan" id="kobo.349.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.350.1">() =&gt;</span></span><span class="koboSpan" id="kobo.351.1"> {
    observer.</span><span class="hljs-title"><span class="koboSpan" id="kobo.352.1">next</span></span><span class="koboSpan" id="kobo.353.1">();
  }, </span><span class="hljs-number"><span class="koboSpan" id="kobo.354.1">2000</span></span><span class="koboSpan" id="kobo.355.1">);
});
</span></code></pre>
    </li>
   </ol>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.356.1">
      When we define an observable variable, we tend to append the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.357.1">
       $
      </span>
     </code>
     <span class="koboSpan" id="kobo.358.1">
      sign to the variable name.
     </span>
     <span class="koboSpan" id="kobo.358.2">
      It is a convention that we follow to identify observables in our code efficiently and quickly.
     </span>
    </p>
   </div>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.359.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.360.1">
       constructor
      </span>
     </code>
     <span class="koboSpan" id="kobo.361.1">
      component to use the newly created
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.362.1">
       title$
      </span>
     </code>
     <span class="koboSpan" id="kobo.363.1">
      property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.364.1">constructor</span></span><span class="koboSpan" id="kobo.365.1">() {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.366.1">this.title$.subscribe</span></strong></span><span class="koboSpan" id="kobo.367.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.368.1">this</span></span><span class="koboSpan" id="kobo.369.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.370.1">setTitle</span></span><span class="koboSpan" id="kobo.371.1">);
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.372.1">
     We use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.373.1">
      subscribe
     </span>
    </code>
    <span class="koboSpan" id="kobo.374.1">
     method to register to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.375.1">
      title$
     </span>
    </code>
    <span class="koboSpan" id="kobo.376.1">
     observable and get notified of any changes.
    </span>
    <span class="koboSpan" id="kobo.376.2">
     If we do not call this method, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.377.1">
      setTitle
     </span>
    </code>
    <span class="koboSpan" id="kobo.378.1">
     method will never execute.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.379.1">
      An observable will not do anything unless a subscriber subscribes to it.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.380.1">
     If you run the application, you will notice that the timestamp changes every two seconds.
    </span>
    <span class="koboSpan" id="kobo.380.2">
     Congratulations!
    </span>
    <span class="koboSpan" id="kobo.380.3">
     You have entered the world of observables and reactive programming!
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.381.1">
     Observables return a stream of events, and our subscribers receive prompt notifications of those events so that they can act accordingly.
    </span>
    <span class="koboSpan" id="kobo.381.2">
     They do not perform an asynchronous operation and terminate (although we can configure them to do so) but start a stream of ongoing events to which we can subscribe.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.382.1">
     That’s not all, however.
    </span>
    <span class="koboSpan" id="kobo.382.2">
     This
    </span>
    <a id="_idIndexMarker382">
    </a>
    <span class="koboSpan" id="kobo.383.1">
     stream can combine many operations before hitting observers subscribed to it.
    </span>
    <span class="koboSpan" id="kobo.383.2">
     Just as we can manipulate arrays with methods such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.384.1">
      map
     </span>
    </code>
    <span class="koboSpan" id="kobo.385.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.386.1">
      filter
     </span>
    </code>
    <span class="koboSpan" id="kobo.387.1">
     to transform them, we can do the same with the stream of
    </span>
    <a id="_idIndexMarker383">
    </a>
    <span class="koboSpan" id="kobo.388.1">
     events emitted by
    </span>
    <a id="_idIndexMarker384">
    </a>
    <span class="koboSpan" id="kobo.389.1">
     observables.
    </span>
    <span class="koboSpan" id="kobo.389.2">
     It is a pattern known as reactive programming, and Angular makes the most of this paradigm to handle asynchronous information.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-129">
    <span class="koboSpan" id="kobo.390.1">
     Reactive programming in Angular
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.391.1">
     The observer pattern stands at the core of reactive programming.
    </span>
    <span class="koboSpan" id="kobo.391.2">
     The most basic implementation of a
    </span>
    <a id="_idIndexMarker385">
    </a>
    <span class="koboSpan" id="kobo.392.1">
     reactive script encompasses several concepts that we need to become familiar with:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.393.1">
      An observable
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.394.1">
      An observer
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.395.1">
      A timeline
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.396.1">
      A stream of events
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.397.1">
      A set of composable operators
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.398.1">
     It may sound daunting, but it isn’t.
    </span>
    <span class="koboSpan" id="kobo.398.2">
     The big challenge here is to change our mindset and learn how to think reactively, which is the primary goal of this section.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.399.1">
      Reactive programming entails applying asynchronous subscriptions and transformations to observable streams of events.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.400.1">
     Let’s explain through a more descriptive example.
    </span>
    <span class="koboSpan" id="kobo.400.2">
     Think about an interaction device such as a keyboard.
    </span>
    <span class="koboSpan" id="kobo.400.3">
     It has keys that the user presses.
    </span>
    <span class="koboSpan" id="kobo.400.4">
     Each one of those keystrokes triggers a specific keyboard
    </span>
    <a id="_idIndexMarker386">
    </a>
    <span class="koboSpan" id="kobo.401.1">
     event, such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.402.1">
      keyUp
     </span>
    </code>
    <span class="koboSpan" id="kobo.403.1">
     .
    </span>
    <span class="koboSpan" id="kobo.403.2">
     The keyUp event features a wide range of metadata, including—but not limited to—the numeric code of the specific key the user pressed at a given moment.
    </span>
    <span class="koboSpan" id="kobo.403.3">
     As the user continues hitting keys, more keyUp events are triggered and piped through an imaginary timeline.
    </span>
    <span class="koboSpan" id="kobo.403.4">
     The timeline is a continuous stream of data where the keyUp event can happen at any time; after all, the user decides when to press those keys.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.404.1">
     Recall the example with observables from the previous section.
    </span>
    <span class="koboSpan" id="kobo.404.2">
     That code could notify an observer that every two seconds, another value was emitted.
    </span>
    <span class="koboSpan" id="kobo.404.3">
     We know how often a timer interval is triggered.
    </span>
    <span class="koboSpan" id="kobo.404.4">
     In the case of keyUp events, we don’t know because they are not under our control.
    </span>
    <span class="koboSpan" id="kobo.404.5">
     Let’s try to explain
    </span>
    <a id="_idIndexMarker387">
    </a>
    <span class="koboSpan" id="kobo.405.1">
     it further by implementing a key logger in our application:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.406.1">
      Create a new Angular component named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.407.1">
       key-logger
      </span>
     </code>
     <span class="koboSpan" id="kobo.408.1">
      :
     </span>
     <pre class="programlisting con-one"><code class="hljs-con"><span class="koboSpan" id="kobo.409.1">ng generate component key-logger
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.410.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.411.1">
       key-logger.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.412.1">
      file and replace its content with the following HTML template:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.413.1">&lt;input </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.414.1">type</span></span><span class="koboSpan" id="kobo.415.1">=</span><span class="hljs-string"><span class="koboSpan" id="kobo.416.1">"text"</span></span><span class="koboSpan" id="kobo.417.1"> #keyContainer /&gt;
</span><span class="hljs-title"><span class="koboSpan" id="kobo.418.1">You</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.419.1">pressed</span></span><span class="koboSpan" id="kobo.420.1">: {{keys}}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.421.1">
     In the preceding template, we added an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.422.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.423.1">
     HTML element and attached the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.424.1">
      keyContainer
     </span>
    </code>
    <span class="koboSpan" id="kobo.425.1">
     template reference variable.
    </span>
   </p>
   <div class="packt_tip-one">
    <p class="normal">
     <span class="koboSpan" id="kobo.426.1">
      A template reference variable can be added to any HTML element, not just components.
     </span>
    </p>
   </div>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.427.1">
     We also display
    </span>
    <a id="_idIndexMarker388">
    </a>
    <span class="koboSpan" id="kobo.428.1">
     a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.429.1">
      keys
     </span>
    </code>
    <span class="koboSpan" id="kobo.430.1">
     property representing all the keyboard keys the user has pressed.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.431.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.432.1">
       key-logger.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.433.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.434.1">
       OnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.435.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.436.1">
       viewChild
      </span>
     </code>
     <span class="koboSpan" id="kobo.437.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.438.1">
       ElementRef
      </span>
     </code>
     <span class="koboSpan" id="kobo.439.1">
      artifacts from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.440.1">
       @angular/core
      </span>
     </code>
     <span class="koboSpan" id="kobo.441.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.442.1">import</span></span><span class="koboSpan" id="kobo.443.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.444.1">Component</span></span><span class="koboSpan" id="kobo.445.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.446.1">ElementRef, OnInit, viewChild</span></strong></span><span class="koboSpan" id="kobo.447.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.448.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.449.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.450.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.451.1">
      Create
     </span>
     <a id="_idIndexMarker389">
     </a>
     <span class="koboSpan" id="kobo.452.1">
      the following properties in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.453.1">
       KeyLoggerComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.454.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.455.1">input = viewChild&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.456.1">ElementRef</span></span><span class="koboSpan" id="kobo.457.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.458.1">'keyContainer'</span></span><span class="koboSpan" id="kobo.459.1">);
keys = </span><span class="hljs-string"><span class="koboSpan" id="kobo.460.1">''</span></span><span class="koboSpan" id="kobo.461.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.462.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.463.1">
      input
     </span>
    </code>
    <span class="koboSpan" id="kobo.464.1">
     property is used to query the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.465.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.466.1">
     HTML element using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.467.1">
      keyContainer
     </span>
    </code>
    <span class="koboSpan" id="kobo.468.1">
     template reference variable.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.469.1">
      Add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.470.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.471.1">
      statement to import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.472.1">
       fromEvent
      </span>
     </code>
     <span class="koboSpan" id="kobo.473.1">
      artifact from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.474.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.475.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.476.1">import</span></span><span class="koboSpan" id="kobo.477.1"> { fromEvent } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.478.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.479.1">'rxjs'</span></span><span class="koboSpan" id="kobo.480.1">;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.481.1">
     The RxJS library has various
    </span>
    <a id="_idIndexMarker390">
    </a>
    <span class="koboSpan" id="kobo.482.1">
     helpful artifacts, called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.483.1">
      operators
     </span>
    </strong>
    <span class="koboSpan" id="kobo.484.1">
     , that we can use with observables.
    </span>
    <span class="koboSpan" id="kobo.484.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.485.1">
      fromEvent
     </span>
    </code>
    <span class="koboSpan" id="kobo.486.1">
     operator creates an observable from the DOM event of a native HTML element.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="6">
     <span class="koboSpan" id="kobo.487.1">
      Implement the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.488.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.489.1">
      method from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.490.1">
       OnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.491.1">
      interface to listen for
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.492.1">
       keyup
      </span>
     </code>
     <span class="koboSpan" id="kobo.493.1">
      events in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.494.1">
       &lt;input&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.495.1">
      element and save pressed keys in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.496.1">
       keys
      </span>
     </code>
     <span class="koboSpan" id="kobo.497.1">
      property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.498.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.499.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.500.1">KeyLoggerComponent</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.501.1">implements OnInit</span></strong></span><span class="koboSpan" id="kobo.502.1"> {
  input = viewChild&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.503.1">ElementRef</span></span><span class="koboSpan" id="kobo.504.1">&gt;(</span><span class="hljs-string"><span class="koboSpan" id="kobo.505.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.506.1">keyContainer'</span></span><span class="koboSpan" id="kobo.507.1">);
  keys = </span><span class="hljs-string"><span class="koboSpan" id="kobo.508.1">''</span></span><span class="koboSpan" id="kobo.509.1">;
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.510.1">ngOnInit(): void {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.511.1">const logger$ = fromEvent&lt;KeyboardEvent&gt;(this.input()!.nativeElement, 'keyup');</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.512.1">logger$.subscribe(evt =&gt; this.keys += evt.key);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.513.1">}</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.514.1">}</span></strong></span>
</code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.515.1">
     Notice that we get access to the native HTML input element through the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.516.1">
      nativeElement
     </span>
    </code>
    <span class="koboSpan" id="kobo.517.1">
     property of the template reference variable.
    </span>
    <span class="koboSpan" id="kobo.517.2">
     The result of querying
    </span>
    <a id="_idIndexMarker391">
    </a>
    <span class="koboSpan" id="kobo.518.1">
     using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.519.1">
      viewChild
     </span>
    </code>
    <span class="koboSpan" id="kobo.520.1">
     function is an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.521.1">
      ElementRef
     </span>
    </code>
    <span class="koboSpan" id="kobo.522.1">
     object, which is a wrapper over the actual HTML element.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="7">
     <span class="koboSpan" id="kobo.523.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.524.1">
       app.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.525.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.526.1">
       KeyLoggerComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.527.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.528.1">import</span></span><span class="koboSpan" id="kobo.529.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.530.1">Component</span></span><span class="koboSpan" id="kobo.531.1">, inject } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.532.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.533.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.534.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.535.1">import</span></span><span class="koboSpan" id="kobo.536.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.537.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.538.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.539.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.540.1">'@angular/router'</span></span><span class="koboSpan" id="kobo.541.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.542.1">import</span></span><span class="koboSpan" id="kobo.543.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.544.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.545.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.546.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.547.1">'./product-list/product-list.component'</span></span><span class="koboSpan" id="kobo.548.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.549.1">import</span></span><span class="koboSpan" id="kobo.550.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.551.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.552.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.553.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.554.1">'./copyright.directive'</span></span><span class="koboSpan" id="kobo.555.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.556.1">import</span></span><span class="koboSpan" id="kobo.557.1"> { </span><span class="hljs-variable"><span class="koboSpan" id="kobo.558.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.559.1">, appSettings } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.560.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.561.1">'./app.settings'</span></span><span class="koboSpan" id="kobo.562.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.563.1">import</span></span><span class="koboSpan" id="kobo.564.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.565.1">Observable</span></span><span class="koboSpan" id="kobo.566.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.567.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.568.1">'rxjs'</span></span><span class="koboSpan" id="kobo.569.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.570.1">import { KeyLoggerComponent } from './key-logger/key-logger.component';</span></strong></span>
<span class="hljs-meta"><span class="koboSpan" id="kobo.571.1">@Component</span></span><span class="koboSpan" id="kobo.572.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.573.1">selector</span></span><span class="koboSpan" id="kobo.574.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.575.1">'app-root'</span></span><span class="koboSpan" id="kobo.576.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.577.1">imports</span></span><span class="koboSpan" id="kobo.578.1">: [
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.579.1">RouterOutlet</span></span><span class="koboSpan" id="kobo.580.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.581.1">ProductListComponent</span></span><span class="koboSpan" id="kobo.582.1">,
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.583.1">CopyrightDirective</span></span><span class="koboSpan" id="kobo.584.1">,
    </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.585.1">KeyLoggerComponent</span></strong></span><span class="koboSpan" id="kobo.586.1">
  ],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.587.1">templateUrl</span></span><span class="koboSpan" id="kobo.588.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.589.1">'./app.component.html'</span></span><span class="koboSpan" id="kobo.590.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.591.1">styleUrl</span></span><span class="koboSpan" id="kobo.592.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.593.1">'./app.component.css'</span></span><span class="koboSpan" id="kobo.594.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.595.1">providers</span></span><span class="koboSpan" id="kobo.596.1">: [
    { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.597.1">provide</span></span><span class="koboSpan" id="kobo.598.1">: </span><span class="hljs-variable"><span class="koboSpan" id="kobo.599.1">APP_SETTINGS</span></span><span class="koboSpan" id="kobo.600.1">, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.601.1">useValue</span></span><span class="koboSpan" id="kobo.602.1">: appSettings }
  ]
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.603.1">
      Open
     </span>
     <a id="_idIndexMarker392">
     </a>
     <span class="koboSpan" id="kobo.604.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.605.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.606.1">
      file and add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.607.1">
       &lt;app-key-logger&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.608.1">
      selector in the
     </span>
     <a id="_idIndexMarker393">
     </a>
     <span class="koboSpan" id="kobo.609.1">
      template:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.610.1">&lt;header&gt;{{ title }}&lt;</span><span class="hljs-regexp"><span class="koboSpan" id="kobo.611.1">/header&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.612.1">&lt;main class="main"&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.613.1">  &lt;div class="content"&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.614.1">    &lt;app-product-list&gt;&lt;/</span></span><span class="koboSpan" id="kobo.615.1">app-product-list&gt;
  &lt;</span><span class="hljs-regexp"><span class="koboSpan" id="kobo.616.1">/div&gt;</span></span>
<span class="hljs-regexp"><span class="koboSpan" id="kobo.617.1">&lt;/m</span></span><span class="koboSpan" id="kobo.618.1">ain&gt;
</span><span class="hljs-tag"><span class="koboSpan" id="kobo.619.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.620.1">footer</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.621.1">appCopyright</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.622.1">&gt;</span></span><span class="koboSpan" id="kobo.623.1"> - v{{ settings.version }}</span><span class="hljs-tag"><span class="koboSpan" id="kobo.624.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.625.1">footer</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.626.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.627.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.628.1">router-outlet</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.629.1"> /&gt;</span></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.630.1">&lt;app-key-logger&gt;&lt;/app-key-logger&gt;</span></strong></span>
</code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.631.1">
     Run the application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.632.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.633.1">
     command and start pressing keys to verify the usage of the key logger that we have just created:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.634.1">
     <img alt="img" src="../Images/B21418_06_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.635.1">
     Figure 6.1: Key logger output
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.636.1">
     An essential aspect of observables is using operators and chaining observables together, enabling
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.637.1">
      rich composition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.638.1">
     .
    </span>
    <span class="koboSpan" id="kobo.638.2">
     Observable
    </span>
    <a id="_idIndexMarker394">
    </a>
    <span class="koboSpan" id="kobo.639.1">
     operators look like array methods when we want to use them.
    </span>
    <span class="koboSpan" id="kobo.639.2">
     For example, a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.640.1">
      map
     </span>
    </code>
    <span class="koboSpan" id="kobo.641.1">
     operator for
    </span>
    <a id="_idIndexMarker395">
    </a>
    <span class="koboSpan" id="kobo.642.1">
     observables is used similarly to
    </span>
    <a id="_idIndexMarker396">
    </a>
    <span class="koboSpan" id="kobo.643.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.644.1">
      map
     </span>
    </code>
    <span class="koboSpan" id="kobo.645.1">
     method of an array.
    </span>
    <span class="koboSpan" id="kobo.645.2">
     In the following section, we will learn about the RxJS
    </span>
    <strong class="keyWord">
    </strong>
    <span class="koboSpan" id="kobo.646.1">
     library, which provides these operators, and learn about some of them through examples.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-130">
    <span class="koboSpan" id="kobo.647.1">
     The RxJS library
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.648.1">
     As mentioned previously, Angular comes with a peer dependency on RxJS, the JavaScript flavor of the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.649.1">
      ReactiveX
     </span>
    </strong>
    <span class="koboSpan" id="kobo.650.1">
     library, which allows
    </span>
    <a id="_idIndexMarker397">
    </a>
    <span class="koboSpan" id="kobo.651.1">
     us to create observables out of a large variety of scenarios, including the
    </span>
    <a id="_idIndexMarker398">
    </a>
    <span class="koboSpan" id="kobo.652.1">
     following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.653.1">
      Interaction events
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.654.1">
      Promises
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.655.1">
      Callback functions
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.656.1">
      Events
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.657.1">
     Reactive programming does not aim to replace asynchronous patterns like promises or callbacks.
    </span>
    <span class="koboSpan" id="kobo.657.2">
     All the way around, it can leverage them as well to create observable sequences.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.658.1">
     RxJS has built-in support for various composable operators to transform, filter, and combine the resulting event streams.
    </span>
    <span class="koboSpan" id="kobo.658.2">
     Its API provides convenient methods for observers to subscribe to these streams so that our components can respond accordingly to state changes or input interaction.
    </span>
    <span class="koboSpan" id="kobo.658.3">
     Let’s see some of these operators in action in the following subsections.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-131">
    <span class="koboSpan" id="kobo.659.1">
     Creating observables
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.660.1">
     We have already learned how to create an observable from a DOM event using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.661.1">
      fromEvent
     </span>
    </code>
    <span class="koboSpan" id="kobo.662.1">
     operator.
    </span>
    <span class="koboSpan" id="kobo.662.2">
     Two
    </span>
    <a id="_idIndexMarker399">
    </a>
    <span class="koboSpan" id="kobo.663.1">
     other popular operators concerned with observable creation are the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.664.1">
      of
     </span>
    </code>
    <span class="koboSpan" id="kobo.665.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.666.1">
      from
     </span>
    </code>
    <span class="koboSpan" id="kobo.667.1">
     operators.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.668.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.669.1">
      of
     </span>
    </code>
    <span class="koboSpan" id="kobo.670.1">
     operator is used to
    </span>
    <a id="_idIndexMarker400">
    </a>
    <span class="koboSpan" id="kobo.671.1">
     create an observable from values such as numbers:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.672.1">const</span></span><span class="koboSpan" id="kobo.673.1"> values = </span><span class="hljs-title"><span class="koboSpan" id="kobo.674.1">of</span></span><span class="koboSpan" id="kobo.675.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.676.1">1</span></span><span class="koboSpan" id="kobo.677.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.678.1">2</span></span><span class="koboSpan" id="kobo.679.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.680.1">3</span></span><span class="koboSpan" id="kobo.681.1">);
values.</span><span class="hljs-title"><span class="koboSpan" id="kobo.682.1">subscribe</span></span><span class="koboSpan" id="kobo.683.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.684.1">value</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.685.1"> =&gt;</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.686.1">console</span></span><span class="koboSpan" id="kobo.687.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.688.1">log</span></span><span class="koboSpan" id="kobo.689.1">(value));
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.690.1">
     The previous snippet prints the numbers
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.691.1">
      1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.692.1">
     ,
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.693.1">
      2
     </span>
    </strong>
    <span class="koboSpan" id="kobo.694.1">
     , and
    </span>
    <strong class="screenText">
     <span class="koboSpan" id="kobo.695.1">
      3
     </span>
    </strong>
    <span class="koboSpan" id="kobo.696.1">
     in the browser console window
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.697.1">
      in order
     </span>
    </em>
    <span class="koboSpan" id="kobo.698.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.699.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.700.1">
      from
     </span>
    </code>
    <span class="koboSpan" id="kobo.701.1">
     operator is used to convert an array to an observable:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.702.1">const</span></span><span class="koboSpan" id="kobo.703.1"> values = </span><span class="hljs-title"><span class="koboSpan" id="kobo.704.1">from</span></span><span class="koboSpan" id="kobo.705.1">([</span><span class="hljs-number"><span class="koboSpan" id="kobo.706.1">1</span></span><span class="koboSpan" id="kobo.707.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.708.1">2</span></span><span class="koboSpan" id="kobo.709.1">, </span><span class="hljs-number"><span class="koboSpan" id="kobo.710.1">3</span></span><span class="koboSpan" id="kobo.711.1">]);
values.</span><span class="hljs-title"><span class="koboSpan" id="kobo.712.1">subscribe</span></span><span class="koboSpan" id="kobo.713.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.714.1">value</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.715.1"> =&gt;</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.716.1">console</span></span><span class="koboSpan" id="kobo.717.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.718.1">log</span></span><span class="koboSpan" id="kobo.719.1">(value));
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.720.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.721.1">
      from
     </span>
    </code>
    <span class="koboSpan" id="kobo.722.1">
     operator is also very useful when converting promises or callbacks to observables.
    </span>
    <span class="koboSpan" id="kobo.722.2">
     We could wrap the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.723.1">
      onComplete
     </span>
    </code>
    <span class="koboSpan" id="kobo.724.1">
     method in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.725.1">
      constructor
     </span>
    </code>
    <span class="koboSpan" id="kobo.726.1">
     of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.727.1">
      AppComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.728.1">
     class as follows:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.729.1">constructor</span></span><span class="koboSpan" id="kobo.730.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.731.1">const</span></span><span class="koboSpan" id="kobo.732.1"> complete$ = </span><span class="hljs-title"><span class="koboSpan" id="kobo.733.1">from</span></span><span class="koboSpan" id="kobo.734.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.735.1">this</span></span><span class="koboSpan" id="kobo.736.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.737.1">onComplete</span></span><span class="koboSpan" id="kobo.738.1">());
  complete$.</span><span class="hljs-title"><span class="koboSpan" id="kobo.739.1">subscribe</span></span><span class="koboSpan" id="kobo.740.1">(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.741.1">this</span></span><span class="koboSpan" id="kobo.742.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.743.1">setTitle</span></span><span class="koboSpan" id="kobo.744.1">);
}
</span></code></pre>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.745.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.746.1">
       from
      </span>
     </code>
     <span class="koboSpan" id="kobo.747.1">
      operator is an excellent way to migrate to observables if you use promises in an existing application!
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.748.1">
     Besides creating
    </span>
    <a id="_idIndexMarker401">
    </a>
    <span class="koboSpan" id="kobo.749.1">
     observables, the RxJS library also contains a
    </span>
    <a id="_idIndexMarker402">
    </a>
    <span class="koboSpan" id="kobo.750.1">
     couple of handy operators to manipulate and transform data emitted from observables.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-132">
    <span class="koboSpan" id="kobo.751.1">
     Transforming observables
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.752.1">
     We have already learned how to
    </span>
    <a id="_idIndexMarker403">
    </a>
    <span class="koboSpan" id="kobo.753.1">
     create a numeric-only directive in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.754.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.755.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.756.1">
      Enriching Applications Using Pipes and Directives
     </span>
    </em>
    <span class="koboSpan" id="kobo.757.1">
     .
    </span>
    <span class="koboSpan" id="kobo.757.2">
     We will now
    </span>
    <a id="_idIndexMarker404">
    </a>
    <span class="koboSpan" id="kobo.758.1">
     use RxJS operators to accomplish the same thing in our key logger component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.759.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.760.1">
       key-logger.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.761.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.762.1">
       tap
      </span>
     </code>
     <span class="koboSpan" id="kobo.763.1">
      operator from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.764.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.765.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.766.1">import</span></span><span class="koboSpan" id="kobo.767.1"> { fromEvent, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.768.1">tap</span></strong></span><span class="koboSpan" id="kobo.769.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.770.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.771.1">'rxjs'</span></span><span class="koboSpan" id="kobo.772.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.773.1">
      Refactor the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.774.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.775.1">
      method as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.776.1">ngOnInit</span></span><span class="koboSpan" id="kobo.777.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.778.1">void</span></span><span class="koboSpan" id="kobo.779.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.780.1">const</span></span><span class="koboSpan" id="kobo.781.1"> logger$ = fromEvent&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.782.1">KeyboardEvent</span></span><span class="koboSpan" id="kobo.783.1">&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.784.1">this</span></span><span class="koboSpan" id="kobo.785.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.786.1">input</span></span><span class="koboSpan" id="kobo.787.1">()!.</span><span class="hljs-property"><span class="koboSpan" id="kobo.788.1">nativeElement</span></span><span class="koboSpan" id="kobo.789.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.790.1">'keyup'</span></span><span class="koboSpan" id="kobo.791.1">);
  logger$</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.792.1">.pipe(</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.793.1">tap(evt =&gt; this.keys += evt.key)</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.794.1">).subscribe();</span></strong></span><span class="koboSpan" id="kobo.795.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.796.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.797.1">
      pipe
     </span>
    </code>
    <span class="koboSpan" id="kobo.798.1">
     operator links and combines multiple operators separated by commas.
    </span>
    <span class="koboSpan" id="kobo.798.2">
     We can think of it as a recipe that defines the operators that should be applied to an observable.
    </span>
    <span class="koboSpan" id="kobo.798.3">
     One of them is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.799.1">
      tap
     </span>
    </code>
    <span class="koboSpan" id="kobo.800.1">
     operator, which is used when we want to do something with the data emitted without modifying it.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="3">
     <span class="koboSpan" id="kobo.801.1">
      We want to exclude non-numeric values that the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.802.1">
       logger$
      </span>
     </code>
     <span class="koboSpan" id="kobo.803.1">
      observable emits.
     </span>
     <span class="koboSpan" id="kobo.803.2">
      We already get the actual key pressed from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.804.1">
       evt
      </span>
     </code>
     <span class="koboSpan" id="kobo.805.1">
      property, but it returns alphanumeric values.
     </span>
     <span class="koboSpan" id="kobo.805.2">
      It would not be efficient to list all non-numeric values and exclude them manually.
     </span>
     <span class="koboSpan" id="kobo.805.3">
      Instead, we will use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.806.1">
       map
      </span>
     </code>
     <span class="koboSpan" id="kobo.807.1">
      operator to get the actual Unicode value of the key.
     </span>
     <span class="koboSpan" id="kobo.807.2">
      It behaves
     </span>
     <a id="_idIndexMarker405">
     </a>
     <span class="koboSpan" id="kobo.808.1">
      similarly to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.809.1">
       map
      </span>
     </code>
     <span class="koboSpan" id="kobo.810.1">
      method of an array as it
     </span>
     <a id="_idIndexMarker406">
     </a>
     <span class="koboSpan" id="kobo.811.1">
      returns an observable with a modified version of the initial data.
     </span>
     <span class="koboSpan" id="kobo.811.2">
      Import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.812.1">
       map
      </span>
     </code>
     <span class="koboSpan" id="kobo.813.1">
      operator from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.814.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.815.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.816.1">import</span></span><span class="koboSpan" id="kobo.817.1"> { fromEvent, tap, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.818.1">map</span></strong></span><span class="koboSpan" id="kobo.819.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.820.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.821.1">'rxjs'</span></span><span class="koboSpan" id="kobo.822.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.823.1">
      Add the following snippet above the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.824.1">
       tap
      </span>
     </code>
     <span class="koboSpan" id="kobo.825.1">
      operator in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.826.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.827.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.828.1">map</span></span><span class="koboSpan" id="kobo.829.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.830.1">evt</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.831.1"> =&gt;</span></span><span class="koboSpan" id="kobo.832.1"> evt.</span><span class="hljs-property"><span class="koboSpan" id="kobo.833.1">key</span></span><span class="koboSpan" id="kobo.834.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.835.1">charCodeAt</span></span><span class="koboSpan" id="kobo.836.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.837.1">0</span></span><span class="koboSpan" id="kobo.838.1">))
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.839.1">
      We can now add
     </span>
     <a id="_idIndexMarker407">
     </a>
     <span class="koboSpan" id="kobo.840.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.841.1">
       filter
      </span>
     </code>
     <span class="koboSpan" id="kobo.842.1">
      operator, which operates similarly
     </span>
     <a id="_idIndexMarker408">
     </a>
     <span class="koboSpan" id="kobo.843.1">
      to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.844.1">
       filter
      </span>
     </code>
     <span class="koboSpan" id="kobo.845.1">
      method of an array for excluding non-numeric values.
     </span>
     <span class="koboSpan" id="kobo.845.2">
      Import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.846.1">
       filter
      </span>
     </code>
     <span class="koboSpan" id="kobo.847.1">
      operator from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.848.1">
       rxjs
      </span>
     </code>
     <span class="koboSpan" id="kobo.849.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.850.1">import</span></span><span class="koboSpan" id="kobo.851.1"> { fromEvent, tap, map, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.852.1">filter</span></strong></span><span class="koboSpan" id="kobo.853.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.854.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.855.1">'rxjs'</span></span><span class="koboSpan" id="kobo.856.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.857.1">
      Add the following snippet after the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.858.1">
       map
      </span>
     </code>
     <span class="koboSpan" id="kobo.859.1">
      operator in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.860.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.861.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.862.1">filter</span></span><span class="koboSpan" id="kobo.863.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.864.1">code</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.865.1"> =&gt;</span></span><span class="koboSpan" id="kobo.866.1"> (code &gt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.867.1">31</span></span><span class="koboSpan" id="kobo.868.1"> &amp;&amp; (code &lt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.869.1">48</span></span><span class="koboSpan" id="kobo.870.1"> || code &gt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.871.1">57</span></span><span class="koboSpan" id="kobo.872.1">)) === </span><span class="hljs-literal"><span class="koboSpan" id="kobo.873.1">false</span></span><span class="koboSpan" id="kobo.874.1">)
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.875.1">
      The observable currently emits Unicode character codes.
     </span>
     <span class="koboSpan" id="kobo.875.2">
      We must convert them back to keyboard characters to display them on the HTML template.
     </span>
     <span class="koboSpan" id="kobo.875.3">
      Refactor the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.876.1">
       tap
      </span>
     </code>
     <span class="koboSpan" id="kobo.877.1">
      operator to accommodate this change:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.878.1">tap</span></span><span class="koboSpan" id="kobo.879.1">(</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.880.1">digit</span></strong></span><span class="hljs-function"><span class="koboSpan" id="kobo.881.1"> =&gt;</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.882.1">this</span></span><span class="koboSpan" id="kobo.883.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.884.1">keys</span></span><span class="koboSpan" id="kobo.885.1"> += </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.886.1">String.fromCharCode(digit)</span></strong></span><span class="koboSpan" id="kobo.887.1">)
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.888.1">
     As a final touch, we will add an input binding in the component to toggle the numeric-only feature on and off conditionally:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.889.1">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.890.1">
       input
      </span>
     </code>
     <span class="koboSpan" id="kobo.891.1">
      function in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.892.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.893.1">
      statement of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.894.1">
       @angular/core
      </span>
     </code>
     <span class="koboSpan" id="kobo.895.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.896.1">import</span></span><span class="koboSpan" id="kobo.897.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.898.1">Component</span></span><span class="koboSpan" id="kobo.899.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.900.1">ElementRef</span></span><span class="koboSpan" id="kobo.901.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.902.1">OnInit</span></span><span class="koboSpan" id="kobo.903.1">, viewChild, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.904.1">input</span></strong></span><span class="koboSpan" id="kobo.905.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.906.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.907.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.908.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.909.1">
      Add a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.910.1">
       numeric
      </span>
     </code>
     <span class="koboSpan" id="kobo.911.1">
      input property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.912.1">
       KeyLoggerComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.913.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.914.1">numeric = </span><span class="hljs-title"><span class="koboSpan" id="kobo.915.1">input</span></span><span class="koboSpan" id="kobo.916.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.917.1">false</span></span><span class="koboSpan" id="kobo.918.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.919.1">
      Refactor the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.920.1">
       filter
      </span>
     </code>
     <span class="koboSpan" id="kobo.921.1">
      operator
     </span>
     <a id="_idIndexMarker409">
     </a>
     <span class="koboSpan" id="kobo.922.1">
      in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.923.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.924.1">
      method so
     </span>
     <a id="_idIndexMarker410">
     </a>
     <span class="koboSpan" id="kobo.925.1">
      that it takes into account the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.926.1">
       numeric
      </span>
     </code>
     <span class="koboSpan" id="kobo.927.1">
      property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.928.1">filter</span></span><span class="koboSpan" id="kobo.929.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.930.1">code</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.931.1"> =&gt;</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.932.1">{</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.933.1">if (this.numeric()) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.934.1">return (code &gt; 31 &amp;&amp; (code &lt; 48 || code &gt; 57)) === false;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.935.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.936.1">return true;</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.937.1">}</span></strong></span><span class="koboSpan" id="kobo.938.1">)
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.939.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.940.1">
      logger$
     </span>
    </code>
    <span class="koboSpan" id="kobo.941.1">
     observable will filter non-numeric values only if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.942.1">
      numeric
     </span>
    </code>
    <span class="koboSpan" id="kobo.943.1">
     input property is
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.944.1">
      true
     </span>
    </code>
    <span class="koboSpan" id="kobo.945.1">
     .
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.946.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.947.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.948.1">
      method should finally look like the following:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.949.1">ngOnInit</span></span><span class="koboSpan" id="kobo.950.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.951.1">void</span></span><span class="koboSpan" id="kobo.952.1"> {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.953.1">const</span></span><span class="koboSpan" id="kobo.954.1"> logger$ = fromEvent&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.955.1">KeyboardEvent</span></span><span class="koboSpan" id="kobo.956.1">&gt;(</span><span class="hljs-variable"><span class="koboSpan" id="kobo.957.1">this</span></span><span class="koboSpan" id="kobo.958.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.959.1">input</span></span><span class="koboSpan" id="kobo.960.1">()!.</span><span class="hljs-property"><span class="koboSpan" id="kobo.961.1">nativeElement</span></span><span class="koboSpan" id="kobo.962.1">, </span><span class="hljs-string"><span class="koboSpan" id="kobo.963.1">'keyup'</span></span><span class="koboSpan" id="kobo.964.1">);
  logger$.</span><span class="hljs-title"><span class="koboSpan" id="kobo.965.1">pipe</span></span><span class="koboSpan" id="kobo.966.1">(
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.967.1">map</span></span><span class="koboSpan" id="kobo.968.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.969.1">evt</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.970.1"> =&gt;</span></span><span class="koboSpan" id="kobo.971.1"> evt.</span><span class="hljs-property"><span class="koboSpan" id="kobo.972.1">key</span></span><span class="koboSpan" id="kobo.973.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.974.1">charCodeAt</span></span><span class="koboSpan" id="kobo.975.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.976.1">0</span></span><span class="koboSpan" id="kobo.977.1">)),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.978.1">filter</span></span><span class="koboSpan" id="kobo.979.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.980.1">code</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.981.1"> =&gt;</span></span><span class="koboSpan" id="kobo.982.1"> {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.983.1">if</span></span><span class="koboSpan" id="kobo.984.1"> (</span><span class="hljs-variable"><span class="koboSpan" id="kobo.985.1">this</span></span><span class="koboSpan" id="kobo.986.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.987.1">numeric</span></span><span class="koboSpan" id="kobo.988.1">()) {
        </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.989.1">return</span></span><span class="koboSpan" id="kobo.990.1"> (code &gt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.991.1">31</span></span><span class="koboSpan" id="kobo.992.1"> &amp;&amp; (code &lt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.993.1">48</span></span><span class="koboSpan" id="kobo.994.1"> || code &gt; </span><span class="hljs-number"><span class="koboSpan" id="kobo.995.1">57</span></span><span class="koboSpan" id="kobo.996.1">)) === </span><span class="hljs-literal"><span class="koboSpan" id="kobo.997.1">false</span></span><span class="koboSpan" id="kobo.998.1">;
      }
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.999.1">return</span></span> <span class="hljs-literal"><span class="koboSpan" id="kobo.1000.1">true</span></span><span class="koboSpan" id="kobo.1001.1">;
    }),
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1002.1">tap</span></span><span class="koboSpan" id="kobo.1003.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1004.1">digit</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1005.1"> =&gt;</span></span> <span class="hljs-variable"><span class="koboSpan" id="kobo.1006.1">this</span></span><span class="koboSpan" id="kobo.1007.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1008.1">keys</span></span><span class="koboSpan" id="kobo.1009.1"> += </span><span class="hljs-title"><span class="koboSpan" id="kobo.1010.1">String</span></span><span class="koboSpan" id="kobo.1011.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1012.1">fromCharCode</span></span><span class="koboSpan" id="kobo.1013.1">(digit))
  ).</span><span class="hljs-title"><span class="koboSpan" id="kobo.1014.1">subscribe</span></span><span class="koboSpan" id="kobo.1015.1">();
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1016.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1017.1">
       app.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1018.1">
      file and add a binding to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1019.1">
       numeric
      </span>
     </code>
     <span class="koboSpan" id="kobo.1020.1">
      property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1021.1">
       &lt;app-key-logger&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1022.1">
      selector:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="koboSpan" id="kobo.1023.1">&lt;app-key-logger </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1024.1">[numeric]="true"</span></strong></span><span class="koboSpan" id="kobo.1025.1">&gt;&lt;/app-key-logger&gt;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1026.1">
      Run the application using the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1027.1">
       ng serve
      </span>
     </code>
     <span class="koboSpan" id="kobo.1028.1">
      command and enter
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1029.1">
       Angular 19
      </span>
     </code>
     <span class="koboSpan" id="kobo.1030.1">
      inside the input box:
     </span>
    </li>
   </ol>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1031.1">
     <img alt="Εικόνα που περιέχει κείμενο, γραμματοσειρά, στιγμιότυπο οθόνης, γραμμή  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_06_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1032.1">
     Figure 6.2: Numeric key logger
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1033.1">
     We have seen RxJS operators manipulating observables that return primitive data types such as
    </span>
    <a id="_idIndexMarker411">
    </a>
    <span class="koboSpan" id="kobo.1034.1">
     numbers, strings, and arrays.
    </span>
    <span class="koboSpan" id="kobo.1034.2">
     In the following
    </span>
    <a id="_idIndexMarker412">
    </a>
    <span class="koboSpan" id="kobo.1035.1">
     section, we will learn how to use observables in our e-shop application.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-133">
    <span class="koboSpan" id="kobo.1036.1">
     Subscribing to observables
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1037.1">
     We have already learned that an observer needs to subscribe to an observable to get emitted data.
    </span>
    <span class="koboSpan" id="kobo.1037.2">
     The observer in our case will be the product list component and the observable will reside inside
    </span>
    <a id="_idIndexMarker413">
    </a>
    <span class="koboSpan" id="kobo.1038.1">
     the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1039.1">
      products.service.ts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1040.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1040.2">
     Thus, we first need to convert the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1041.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1042.1">
     class to use observables instead of plain arrays so that components can subscribe to get data:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1043.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1044.1">
       products.service.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1045.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1046.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1047.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1048.1">import</span></span><span class="koboSpan" id="kobo.1049.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1050.1">Observable</span></span><span class="koboSpan" id="kobo.1051.1">, </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1052.1">of</span></span><span class="koboSpan" id="kobo.1053.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1054.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1055.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1056.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1057.1">
      Extract the product data used in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1058.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1059.1">
      method into a separate service property to enhance code readability:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1060.1">private</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1061.1">products</span></span><span class="koboSpan" id="kobo.1062.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1063.1">Product</span></span><span class="koboSpan" id="kobo.1064.1">[] = [
  { 
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1065.1">id</span></span><span class="koboSpan" id="kobo.1066.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1067.1">1</span></span><span class="koboSpan" id="kobo.1068.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1069.1">title</span></span><span class="koboSpan" id="kobo.1070.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1071.1">'Keyboard'</span></span><span class="koboSpan" id="kobo.1072.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1073.1">price</span></span><span class="koboSpan" id="kobo.1074.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1075.1">100</span></span><span class="koboSpan" id="kobo.1076.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1077.1">categories</span></span><span class="koboSpan" id="kobo.1078.1">: {
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.1079.1">1</span></span><span class="koboSpan" id="kobo.1080.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1081.1">'Computing'</span></span><span class="koboSpan" id="kobo.1082.1">,
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.1083.1">2</span></span><span class="koboSpan" id="kobo.1084.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1085.1">'Peripherals'</span></span><span class="koboSpan" id="kobo.1086.1">
    }
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1087.1">id</span></span><span class="koboSpan" id="kobo.1088.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1089.1">2</span></span><span class="koboSpan" id="kobo.1090.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1091.1">title</span></span><span class="koboSpan" id="kobo.1092.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1093.1">'Microphone'</span></span><span class="koboSpan" id="kobo.1094.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1095.1">price</span></span><span class="koboSpan" id="kobo.1096.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1097.1">35</span></span><span class="koboSpan" id="kobo.1098.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1099.1">categories</span></span><span class="koboSpan" id="kobo.1100.1">: { </span><span class="hljs-number"><span class="koboSpan" id="kobo.1101.1">3</span></span><span class="koboSpan" id="kobo.1102.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1103.1">'Multimedia'</span></span><span class="koboSpan" id="kobo.1104.1"> }
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1105.1">id</span></span><span class="koboSpan" id="kobo.1106.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1107.1">3</span></span><span class="koboSpan" id="kobo.1108.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1109.1">title</span></span><span class="koboSpan" id="kobo.1110.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1111.1">'Web camera'</span></span><span class="koboSpan" id="kobo.1112.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1113.1">price</span></span><span class="koboSpan" id="kobo.1114.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1115.1">79</span></span><span class="koboSpan" id="kobo.1116.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1117.1">categories</span></span><span class="koboSpan" id="kobo.1118.1">: {
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.1119.1">1</span></span><span class="koboSpan" id="kobo.1120.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1121.1">'Computing'</span></span><span class="koboSpan" id="kobo.1122.1">,
      </span><span class="hljs-number"><span class="koboSpan" id="kobo.1123.1">3</span></span><span class="koboSpan" id="kobo.1124.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1125.1">'Multimedia'</span></span><span class="koboSpan" id="kobo.1126.1">
    }
  },
  {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1127.1">id</span></span><span class="koboSpan" id="kobo.1128.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1129.1">4</span></span><span class="koboSpan" id="kobo.1130.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1131.1">title</span></span><span class="koboSpan" id="kobo.1132.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1133.1">'Tablet'</span></span><span class="koboSpan" id="kobo.1134.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1135.1">price</span></span><span class="koboSpan" id="kobo.1136.1">: </span><span class="hljs-number"><span class="koboSpan" id="kobo.1137.1">500</span></span><span class="koboSpan" id="kobo.1138.1">,
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1139.1">categories</span></span><span class="koboSpan" id="kobo.1140.1">: { </span><span class="hljs-number"><span class="koboSpan" id="kobo.1141.1">4</span></span><span class="koboSpan" id="kobo.1142.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1143.1">'Entertainment'</span></span><span class="koboSpan" id="kobo.1144.1"> }
  }
];
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1145.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1146.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1147.1">
      method
     </span>
     <a id="_idIndexMarker414">
     </a>
     <span class="koboSpan" id="kobo.1148.1">
      so that it returns the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1149.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.1150.1">
      property as an observable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1151.1">getProducts</span></span><span class="koboSpan" id="kobo.1152.1">(): </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1153.1">Observable&lt;Product[]</span></strong></span><span class="koboSpan" id="kobo.1154.1">&gt; {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1155.1">return</span></span> <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1156.1">of(this.products);</span></strong></span><span class="koboSpan" id="kobo.1157.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1158.1">
     In the preceding snippet, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1159.1">
      of
     </span>
    </code>
    <span class="koboSpan" id="kobo.1160.1">
     operator to create a new observable from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1161.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.1162.1">
     array.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1163.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1164.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1165.1">
     class now emits product data using observables.
    </span>
    <span class="koboSpan" id="kobo.1165.2">
     We must modify the component to subscribe and get this data:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1166.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1167.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1168.1">
      file and create a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1169.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1170.1">
      method in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1171.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1172.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1173.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1174.1">getProducts</span></span><span class="koboSpan" id="kobo.1175.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1176.1">this</span></span><span class="koboSpan" id="kobo.1177.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1178.1">productService</span></span><span class="koboSpan" id="kobo.1179.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1180.1">getProducts</span></span><span class="koboSpan" id="kobo.1181.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1182.1">subscribe</span></span><span class="koboSpan" id="kobo.1183.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1184.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1185.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1186.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1187.1">this</span></span><span class="koboSpan" id="kobo.1188.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1189.1">products</span></span><span class="koboSpan" id="kobo.1190.1"> = products;
  });
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1191.1">
     In the preceding method, we subscribe to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1192.1">
      getProducts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1193.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1194.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1195.1">
     class because it returns an observable instead of a plain array.
    </span>
    <span class="koboSpan" id="kobo.1195.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1196.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.1197.1">
     array is returned inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1198.1">
      subscribe
     </span>
    </code>
    <span class="koboSpan" id="kobo.1199.1">
     method, where we set the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1200.1">
      products
     </span>
    </code>
    <span class="koboSpan" id="kobo.1201.1">
     component property to the array emitted from the observable.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.1202.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1203.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1204.1">
      method
     </span>
     <a id="_idIndexMarker415">
     </a>
     <span class="koboSpan" id="kobo.1205.1">
      so that it calls the newly created
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1206.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1207.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1208.1">ngOnInit</span></span><span class="koboSpan" id="kobo.1209.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1210.1">void</span></span><span class="koboSpan" id="kobo.1211.1"> {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1212.1">this.getProducts();</span></strong></span><span class="koboSpan" id="kobo.1213.1">
}
</span></code></pre>
    </li>
   </ol>
   <div class="packt_tip">
    <p class="normal">
     <span class="koboSpan" id="kobo.1214.1">
      We could have added the body of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1215.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1216.1">
      method inside the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1217.1">
       ngOnInit
      </span>
     </code>
     <span class="koboSpan" id="kobo.1218.1">
      method directly.
     </span>
     <span class="koboSpan" id="kobo.1218.2">
      We did not as component lifecycle event methods should be as clear and concise as possible.
     </span>
     <span class="koboSpan" id="kobo.1218.3">
      Always try to extract their logic in a separate method for clarity.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1219.1">
     Run the
    </span>
    <a id="_idIndexMarker416">
    </a>
    <span class="koboSpan" id="kobo.1220.1">
     application using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1221.1">
      ng serve
     </span>
    </code>
    <span class="koboSpan" id="kobo.1222.1">
     command, and you should see the product list displayed on the page successfully:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1223.1">
     <img alt="Εικόνα που περιέχει κείμενο, στιγμιότυπο οθόνης, γραμματοσειρά, λογότυπο  Περιγραφή που δημιουργήθηκε αυτόματα" src="../Images/B21418_06_03.png"/>
    </span>
   </figure>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1224.1">
     Figure 6.3: Product list
    </span>
   </figure>
   <p class="normal">
    <span class="koboSpan" id="kobo.1225.1">
     As depicted in the previous image, we have achieved the same result of displaying the product list as in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1226.1">
      Chapter 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.1227.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1228.1">
      Managing Complex Tasks with Services
     </span>
    </em>
    <span class="koboSpan" id="kobo.1229.1">
     , but using observables.
    </span>
    <span class="koboSpan" id="kobo.1229.2">
     It may not be evident at once, but we have set the foundation for working with the Angular HTTP client which is based on observables.
    </span>
    <span class="koboSpan" id="kobo.1229.3">
     In
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1230.1">
      Chapter 8
     </span>
    </em>
    <span class="koboSpan" id="kobo.1231.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1232.1">
      Communicating with Data Services over HTTP
     </span>
    </em>
    <span class="koboSpan" id="kobo.1233.1">
     , we will explore the HTTP client in more detail.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1234.1">
     When we subscribe to observables, we are prone to potential memory leaks if we do not clean them up on
    </span>
    <a id="_idIndexMarker417">
    </a>
    <span class="koboSpan" id="kobo.1235.1">
     time.
    </span>
    <span class="koboSpan" id="kobo.1235.2">
     In the following section, we will learn about different ways to accomplish that.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-134">
    <span class="koboSpan" id="kobo.1236.1">
     Unsubscribing from observables
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1237.1">
     When we
    </span>
    <a id="_idIndexMarker418">
    </a>
    <span class="koboSpan" id="kobo.1238.1">
     subscribe to an observable, we create an observer that listens for changes in a data stream.
    </span>
    <span class="koboSpan" id="kobo.1238.2">
     The observer watches the stream continuously while the subscription remains active.
    </span>
    <span class="koboSpan" id="kobo.1238.3">
     When a subscription is active, it reserves memory in the browser and consumes certain resources.
    </span>
    <span class="koboSpan" id="kobo.1238.4">
     If we do not tell the observer to unsubscribe at some point and clean up any resources, the subscription to the observable will
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1239.1">
      possibly
     </span>
    </em>
    <span class="koboSpan" id="kobo.1240.1">
     lead to a memory leak.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.1241.1">
      An observer usually needs to unsubscribe when the Angular component that created the subscription must be destroyed.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1242.1">
     Some of the most well-known techniques to use for unsubscribing from observables are the following:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1243.1">
      Unsubscribe from an observable manually
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1244.1">
      Use the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1245.1">
       async
      </span>
     </code>
     <span class="koboSpan" id="kobo.1246.1">
      pipe in a component template
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1247.1">
     Let’s see both techniques in action in the following subsections.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-135">
    <span class="koboSpan" id="kobo.1248.1">
     Destroying a component
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1249.1">
     A component has lifecycle events
    </span>
    <a id="_idIndexMarker419">
    </a>
    <span class="koboSpan" id="kobo.1250.1">
     we can use to hook on and perform custom logic, as we learned in
    </span>
    <em class="chapterRef">
     <span class="koboSpan" id="kobo.1251.1">
      Chapter 3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1252.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1253.1">
      Structuring User Interfaces with Components
     </span>
    </em>
    <span class="koboSpan" id="kobo.1254.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1254.2">
     One of them is the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1255.1">
      ngOnDestroy
     </span>
    </code>
    <span class="koboSpan" id="kobo.1256.1">
     event, which is called when the component is destroyed and no longer exists.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1257.1">
     Recall
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1258.1">
      ProductListComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1259.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1260.1">
      ProductViewComponent
     </span>
    </code>
    <span class="koboSpan" id="kobo.1261.1">
     , which we used earlier in our examples.
    </span>
    <span class="koboSpan" id="kobo.1261.2">
     They subscribe to the appropriate methods of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1262.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1263.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1264.1">
      ProductViewService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1265.1">
     upon component initialization.
    </span>
    <span class="koboSpan" id="kobo.1265.2">
     When components are destroyed, the reference of the subscriptions stays active, which may lead to unpredictable behavior.
    </span>
    <span class="koboSpan" id="kobo.1265.3">
     We need to manually unsubscribe when components are destroyed to clean up any resources properly:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1266.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1267.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1268.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1269.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1270.1">
      statement:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1271.1">import</span></span><span class="koboSpan" id="kobo.1272.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1273.1">Subscription</span></span><span class="koboSpan" id="kobo.1274.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1275.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1276.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1277.1">rxjs'</span></span><span class="koboSpan" id="kobo.1278.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1279.1">
      Create the following property in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1280.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1281.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1282.1">private</span></span> <span class="hljs-attr"><span class="koboSpan" id="kobo.1283.1">productsSub</span></span><span class="koboSpan" id="kobo.1284.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1285.1">Subscription</span></span><span class="koboSpan" id="kobo.1286.1"> | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1287.1">undefined</span></span><span class="koboSpan" id="kobo.1288.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1289.1">
      Assign the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1290.1">
       productsSub
      </span>
     </code>
     <span class="koboSpan" id="kobo.1291.1">
      property to the subscription result in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1292.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1293.1">
      method:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1294.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1295.1">getProducts</span></span><span class="koboSpan" id="kobo.1296.1">() {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1297.1">this.productsSub</span></strong></span><span class="koboSpan" id="kobo.1298.1"> = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1299.1">this</span></span><span class="koboSpan" id="kobo.1300.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1301.1">productService</span></span><span class="koboSpan" id="kobo.1302.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1303.1">getProducts</span></span><span class="koboSpan" id="kobo.1304.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1305.1">subscribe</span></span><span class="koboSpan" id="kobo.1306.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1307.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1308.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1309.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1310.1">this</span></span><span class="koboSpan" id="kobo.1311.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1312.1">products</span></span><span class="koboSpan" id="kobo.1313.1"> = products;
  });
}
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1314.1">
      Import
     </span>
     <a id="_idIndexMarker420">
     </a>
     <span class="koboSpan" id="kobo.1315.1">
      the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1316.1">
       OnDestroy
      </span>
     </code>
     <span class="koboSpan" id="kobo.1317.1">
      lifecycle hook from the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1318.1">
       @angular/core
      </span>
     </code>
     <span class="koboSpan" id="kobo.1319.1">
      npm package:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1320.1">import</span></span><span class="koboSpan" id="kobo.1321.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1322.1">Component</span></span><span class="koboSpan" id="kobo.1323.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1324.1">OnInit</span></span><span class="koboSpan" id="kobo.1325.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1326.1">OnDestroy</span></strong></span><span class="koboSpan" id="kobo.1327.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1328.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1329.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1330.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1331.1">
      Add
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1332.1">
       OnDestroy
      </span>
     </code>
     <span class="koboSpan" id="kobo.1333.1">
      to the implemented interface list of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1334.1">
       ProductListComponent
      </span>
     </code>
     <span class="koboSpan" id="kobo.1335.1">
      class:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1336.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1337.1">class</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1338.1">ProductListComponent</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1339.1">implements</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1340.1">OnInit</span></span><span class="koboSpan" id="kobo.1341.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1342.1">OnDestroy</span></strong></span>
</code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1343.1">
      Implement the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1344.1">
       ngOnDestroy
      </span>
     </code>
     <span class="koboSpan" id="kobo.1345.1">
      method as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-title"><span class="koboSpan" id="kobo.1346.1">ngOnDestroy</span></span><span class="koboSpan" id="kobo.1347.1">(): </span><span class="hljs-built_in"><span class="koboSpan" id="kobo.1348.1">void</span></span><span class="koboSpan" id="kobo.1349.1"> {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1350.1">this</span></span><span class="koboSpan" id="kobo.1351.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1352.1">productsSub</span></span><span class="koboSpan" id="kobo.1353.1">?.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1354.1">unsubscribe</span></span><span class="koboSpan" id="kobo.1355.1">();
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1356.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1357.1">
      unsubscribe
     </span>
    </code>
    <span class="koboSpan" id="kobo.1358.1">
     method removes an observer from the active listeners of a subscription and cleans up any reserved resources.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1359.1">
     That’s a lot of boilerplate code to unsubscribe from a single subscription.
    </span>
    <span class="koboSpan" id="kobo.1359.2">
     It may quickly become unreadable and unmaintainable if we have many subscriptions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1360.1">
     Alternatively, we can use a particular type of operator called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1361.1">
      takeUntilDestroyed
     </span>
    </code>
    <strong class="bold-italic" style="font-style: italic;">
     <span class="koboSpan" id="kobo.1362.1">
      ,
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1363.1">
     which is available in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1364.1">
      @angular/core/rxjs-interop
     </span>
    </code>
    <span class="koboSpan" id="kobo.1365.1">
     package.
    </span>
    <span class="koboSpan" id="kobo.1365.2">
     We will explore the way of unsubscribing from
    </span>
    <a id="_idIndexMarker421">
    </a>
    <span class="koboSpan" id="kobo.1366.1">
     observables using this operator in the product list component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1367.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1368.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1369.1">
      file and import the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1370.1">
       inject
      </span>
     </code>
     <span class="koboSpan" id="kobo.1371.1">
      ,
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1372.1">
       DestroyRef
      </span>
     </code>
     <span class="koboSpan" id="kobo.1373.1">
      , and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1374.1">
       takeUntilDestroyed
      </span>
     </code>
     <span class="koboSpan" id="kobo.1375.1">
      artifacts as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1376.1">import</span></span><span class="koboSpan" id="kobo.1377.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1378.1">Component</span></span><span class="koboSpan" id="kobo.1379.1">, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1380.1">DestroyRef, inject</span></strong></span><span class="koboSpan" id="kobo.1381.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1382.1">OnInit</span></span><span class="koboSpan" id="kobo.1383.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1384.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1385.1">'@angular/core'</span></span><span class="koboSpan" id="kobo.1386.1">;
</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1387.1">import { takeUntilDestroyed } from '@angular/core/rxjs-interop';</span></strong></span>
</code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1388.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1389.1">
      takeUntilDestroyed
     </span>
    </code>
    <span class="koboSpan" id="kobo.1390.1">
     artifact is an operator that unsubscribes from an observable when the component is destroyed.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="2">
     <span class="koboSpan" id="kobo.1391.1">
      Declare the following property to inject the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1392.1">
       DestroyRef
      </span>
     </code>
     <span class="koboSpan" id="kobo.1393.1">
      service:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1394.1">private</span></span><span class="koboSpan" id="kobo.1395.1"> destroyRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1396.1">inject</span></span><span class="koboSpan" id="kobo.1397.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1398.1">DestroyRef</span></span><span class="koboSpan" id="kobo.1399.1">);
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1400.1">
      Modify the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1401.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1402.1">
      method as follows:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1403.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1404.1">getProducts</span></span><span class="koboSpan" id="kobo.1405.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1406.1">this</span></span><span class="koboSpan" id="kobo.1407.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1408.1">productService</span></span><span class="koboSpan" id="kobo.1409.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1410.1">getProducts</span></span><span class="koboSpan" id="kobo.1411.1">()</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1412.1">.pipe(</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1413.1">takeUntilDestroyed(this.destroyRef)</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1414.1">)</span></strong></span><span class="koboSpan" id="kobo.1415.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1416.1">subscribe</span></span><span class="koboSpan" id="kobo.1417.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1418.1">products</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1419.1"> =&gt;</span></span><span class="koboSpan" id="kobo.1420.1"> {
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1421.1">this</span></span><span class="koboSpan" id="kobo.1422.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.1423.1">products</span></span><span class="koboSpan" id="kobo.1424.1"> = products;
  });
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1425.1">
     In the preceding method, we use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1426.1">
      pipe
     </span>
    </code>
    <span class="koboSpan" id="kobo.1427.1">
     operator to chain the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1428.1">
      takeUntilDestroyed
     </span>
    </code>
    <span class="koboSpan" id="kobo.1429.1">
     operator with the subscription from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1430.1">
      getProducts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1431.1">
     method of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1432.1">
      ProductsService
     </span>
    </code>
    <span class="koboSpan" id="kobo.1433.1">
     class.
    </span>
    <span class="koboSpan" id="kobo.1433.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1434.1">
      takeUntilDestroyed
     </span>
    </code>
    <span class="koboSpan" id="kobo.1435.1">
     operator accepts a parameter of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1436.1">
      DestroyRef
     </span>
    </code>
    <span class="koboSpan" id="kobo.1437.1">
     service.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="4">
     <span class="koboSpan" id="kobo.1438.1">
      Remove any code related to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1439.1">
       ngOnDestroy
      </span>
     </code>
     <span class="koboSpan" id="kobo.1440.1">
      method.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1441.1">
     That’s it!
    </span>
    <span class="koboSpan" id="kobo.1441.2">
     We have
    </span>
    <a id="_idIndexMarker422">
    </a>
    <span class="koboSpan" id="kobo.1442.1">
     now converted our subscription to be more declarative and readable.
    </span>
    <span class="koboSpan" id="kobo.1442.2">
     However, the problem of maintainability still exists.
    </span>
    <span class="koboSpan" id="kobo.1442.3">
     Our components are now unsubscribing from their observables manually.
    </span>
    <span class="koboSpan" id="kobo.1442.4">
     We can solve that using a special-purpose Angular pipe, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1443.1">
      async
     </span>
    </code>
    <span class="koboSpan" id="kobo.1444.1">
     pipe, which allows us to unsubscribe automatically with less code.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-136">
    <span class="koboSpan" id="kobo.1445.1">
     Using the async pipe
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1446.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1447.1">
      async
     </span>
    </code>
    <span class="koboSpan" id="kobo.1448.1">
     pipe is a built-in Angular pipe used in conjunction with observables, and its role is two-fold.
    </span>
    <span class="koboSpan" id="kobo.1448.2">
     It helps us to type less code and saves us from having to set up and tear down a subscription.
    </span>
    <span class="koboSpan" id="kobo.1448.3">
     It automatically
    </span>
    <a id="_idIndexMarker423">
    </a>
    <span class="koboSpan" id="kobo.1449.1">
     subscribes to an observable and
    </span>
    <a id="_idIndexMarker424">
    </a>
    <span class="koboSpan" id="kobo.1450.1">
     unsubscribes when the component is destroyed.
    </span>
    <span class="koboSpan" id="kobo.1450.2">
     We will use it to simplify the code of the product list component:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1451.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1452.1">
       product-list.component.ts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1453.1">
      file and add the following
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1454.1">
       import
      </span>
     </code>
     <span class="koboSpan" id="kobo.1455.1">
      statements:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1456.1">import</span></span><span class="koboSpan" id="kobo.1457.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1458.1">AsyncPipe</span></span><span class="koboSpan" id="kobo.1459.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1460.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1461.1">'@angular/common'</span></span><span class="koboSpan" id="kobo.1462.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1463.1">import</span></span><span class="koboSpan" id="kobo.1464.1"> { </span><span class="hljs-title"><span class="koboSpan" id="kobo.1465.1">Observable</span></span><span class="koboSpan" id="kobo.1466.1"> } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1467.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1468.1">'rxjs'</span></span><span class="koboSpan" id="kobo.1469.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1470.1">
      Add the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1471.1">
       AsyncPipe
      </span>
     </code>
     <span class="koboSpan" id="kobo.1472.1">
      class into the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1473.1">
       imports
      </span>
     </code>
     <span class="koboSpan" id="kobo.1474.1">
      array of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1475.1">
       @Component
      </span>
     </code>
     <span class="koboSpan" id="kobo.1476.1">
      decorator:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1477.1">@Component</span></span><span class="koboSpan" id="kobo.1478.1">({
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1479.1">selector</span></span><span class="koboSpan" id="kobo.1480.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1481.1">'app-product-list'</span></span><span class="koboSpan" id="kobo.1482.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1483.1">imports</span></span><span class="koboSpan" id="kobo.1484.1">: [</span><span class="hljs-title"><span class="koboSpan" id="kobo.1485.1">ProductDetailComponent</span></span><span class="koboSpan" id="kobo.1486.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1487.1">SortPipe</span></span><span class="koboSpan" id="kobo.1488.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1489.1">AsyncPipe</span></span><span class="koboSpan" id="kobo.1490.1">],
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1491.1">templateUrl</span></span><span class="koboSpan" id="kobo.1492.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1493.1">'./product-list.component.html'</span></span><span class="koboSpan" id="kobo.1494.1">,
  </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1495.1">styleUrl</span></span><span class="koboSpan" id="kobo.1496.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1497.1">'./product-list.component.css'</span></span><span class="koboSpan" id="kobo.1498.1">
})
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1499.1">
      Convert the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1500.1">
       products
      </span>
     </code>
     <span class="koboSpan" id="kobo.1501.1">
      component property to an observable:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-attr"><span class="koboSpan" id="kobo.1502.1">products$</span></span><span class="koboSpan" id="kobo.1503.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1504.1">Observable</span></span><span class="koboSpan" id="kobo.1505.1">&lt;</span><span class="hljs-title"><span class="koboSpan" id="kobo.1506.1">Product</span></span><span class="koboSpan" id="kobo.1507.1">[]&gt; | </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1508.1">undefined</span></span><span class="koboSpan" id="kobo.1509.1">;
</span></code></pre>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1510.1">
      Assign the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1511.1">
       getProducts
      </span>
     </code>
     <span class="koboSpan" id="kobo.1512.1">
      method of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1513.1">
       ProductsService
      </span>
     </code>
     <span class="koboSpan" id="kobo.1514.1">
      class to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1515.1">
       products$
      </span>
     </code>
     <span class="koboSpan" id="kobo.1516.1">
      component property:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1517.1">private</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1518.1">getProducts</span></span><span class="koboSpan" id="kobo.1519.1">() {
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1520.1">this.products$ = this.productService.getProducts();</span></strong></span><span class="koboSpan" id="kobo.1521.1">
}
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1522.1">
     The body of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1523.1">
      getProducts
     </span>
    </code>
    <span class="koboSpan" id="kobo.1524.1">
     method has now been reduced to one line and has become more readable.
    </span>
   </p>
   <ol>
    <li class="numberedList" value="5">
     <span class="koboSpan" id="kobo.1525.1">
      Open the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1526.1">
       product-list.component.html
      </span>
     </code>
     <span class="koboSpan" id="kobo.1527.1">
      file and add the following snippet at the beginning of the file:
     </span>
     <pre class="programlisting code-one"><code class="hljs-code"><span class="hljs-meta"><span class="koboSpan" id="kobo.1528.1">@let</span></span><span class="koboSpan" id="kobo.1529.1"> products = (products$ | </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1530.1">async</span></span><span class="koboSpan" id="kobo.1531.1">)!;
</span></code></pre>
    </li>
   </ol>
   <p class="normal-one">
    <span class="koboSpan" id="kobo.1532.1">
     In the preceding snippet, we subscribe to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1533.1">
      products$
     </span>
    </code>
    <span class="koboSpan" id="kobo.1534.1">
     observable using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1535.1">
      async
     </span>
    </code>
    <span class="koboSpan" id="kobo.1536.1">
     pipe and create a template variable using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1537.1">
      @let
     </span>
    </code>
    <span class="koboSpan" id="kobo.1538.1">
     keyword.
    </span>
    <span class="koboSpan" id="kobo.1538.2">
     The template variable has the same name as the respective component property we had previously, so
    </span>
    <a id="_idIndexMarker425">
    </a>
    <span class="koboSpan" id="kobo.1539.1">
     we do not need to change the component template further.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1540.1">
     That’s it!
    </span>
    <span class="koboSpan" id="kobo.1540.2">
     We do not need to subscribe or unsubscribe from the observable manually anymore!
    </span>
    <span class="koboSpan" id="kobo.1540.3">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1541.1">
      async
     </span>
    </code>
    <span class="koboSpan" id="kobo.1542.1">
     pipe takes care of everything for us.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1543.1">
     We have learned that
    </span>
    <a id="_idIndexMarker426">
    </a>
    <span class="koboSpan" id="kobo.1544.1">
     observables react to application events and emit values asynchronously in registered observers.
    </span>
    <span class="koboSpan" id="kobo.1544.2">
     We could visualize observables as wrapper objects around emitted values.
    </span>
    <span class="koboSpan" id="kobo.1544.3">
     Angular enriches the reactivity field of web applications by providing a similar wrapper that works synchronously and reacts to application state changes.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-137">
    <span class="koboSpan" id="kobo.1545.1">
     Summary
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1546.1">
     It takes much more than a single chapter to cover in detail all the great things we can do with reactivity in Angular.
    </span>
    <span class="koboSpan" id="kobo.1546.2">
     The good news is that we have covered all the tools and classes we need for basic Angular development.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1547.1">
     We learned what reactive programming is and how it can be used in Angular.
    </span>
    <span class="koboSpan" id="kobo.1547.2">
     We saw how to apply reactive techniques like observables to interact with data streams.
    </span>
    <span class="koboSpan" id="kobo.1547.3">
     We explored the RxJS library and how to use some operators to manipulate observables.
    </span>
    <span class="koboSpan" id="kobo.1547.4">
     We learned different ways of subscribing and unsubscribing from observables in Angular components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1548.1">
     The rest is just left to your imagination, so feel free to go the extra mile and put all of this knowledge into practice in your Angular applications.
    </span>
    <span class="koboSpan" id="kobo.1548.2">
     The possibilities are endless, and you have strategies ranging from promises and observables.
    </span>
    <span class="koboSpan" id="kobo.1548.3">
     You can leverage the incredible functionalities of the reactive patterns and build amazing reactive experiences for your Angular applications.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1549.1">
     As we have already highlighted, the sky’s the limit.
    </span>
    <span class="koboSpan" id="kobo.1549.2">
     However, we still have a long and exciting road ahead.
    </span>
    <span class="koboSpan" id="kobo.1549.3">
     In the next chapter, we will explore signals, an alternate reactive pattern built into the Angular framework.
    </span>
    <span class="koboSpan" id="kobo.1549.4">
     We will learn how to use Angular signals to handle the state of an Angular application.
    </span>
   </p>
  </div>
 </body></html>