<html><head></head><body>
  <div id="_idContainer212" class="Basic-Text-Frame">
    <h1 class="chapterNumber">4</h1>
    <h1 id="_idParaDest-124" class="chapterTitle">Creating a Router-First Line-of-Business App</h1>
    <p class="normal">As you read in <em class="chapterRef">Chapter 3</em>, <em class="italic">Architecting an Enterprise App</em>, <strong class="keyWord">Line-of-Business</strong> (<strong class="keyWord">LOB</strong>) applications are the bread and butter of the<a id="_idIndexMarker342"/> software development world.</p>
    <p class="normal">In this and the remaining chapters of the book, we’ll set up a new application with rich features that can meet the demands of an LOB application with scalable architecture and engineering best practices that will help you start small and be able to grow your solution quickly if there’s demand. We will follow the router-first design pattern, relying on reusable components to create a grocery store LOB application named LemonMart. We’ll discuss designing around major data entities and the importance of completing high-level mock-ups for your application before implementing various conditional navigation elements, which may change significantly during the design phase.</p>
    <p class="normal">The source code for this project is provided on GitHub at <a href="https://github.com/duluca/lemon-mart"><span class="url">https://github.com/duluca/lemon-mart</span></a>, including various stages of development in the <code class="inlineCode">Projects</code> folder. The project is supported by unit tests using Jasmine and E2E tests using Cypress, environment variables, Angular Material, and a <strong class="keyWord">Continuous Integration and</strong> <strong class="keyWord">Continuous Delivery</strong> (<strong class="keyWord">CI/CD</strong>) pipeline leveraging<a id="_idIndexMarker343"/> CircleCI. You can find more information on CI/CD in <em class="chapterRef">Chapter 10</em>, <em class="italic">Releasing to Production with CI/CD</em>.</p>
    <div class="note">
      <p class="normal">LemonMart is a separate Angular repo. For enterprise or full-stack development, you may ask, why is it not configured as a monorepo? In <em class="chapterRef">Chapter 5</em>, <em class="italic">Designing Authentication and Authorization</em>, we cover how to create a monorepo using Git’s submodule feature. For a more opinionated and ergonomic approach to working on large Angular applications, I urge you to consider Nx. Its smart build system alone can save hours of build time. Check it out at <a href="https://nx.dev"><span class="url">https://nx.dev</span></a>. However, a deep dive of this tool is outside the scope of this book.</p>
      <p class="normal">Feeling adventurous? Run the following command to create your Nx workspace: </p>
      <pre class="programlisting con"><code class="hljs-con">$ npx create-nx-workspace
</code></pre>
    </div>
    <p class="normal">In this chapter, we’re going to cover the following topics:</p>
    <ul>
      <li class="bulletList">Creating LemonMart</li>
      <li class="bulletList">Generating router-enabled modules</li>
      <li class="bulletList">Branding, customization, and Material icons</li>
      <li class="bulletList">Feature modules with lazy loading</li>
      <li class="bulletList">Creating the walking skeleton</li>
      <li class="bulletList">Common testing module</li>
      <li class="bulletList">Designing around major data entities</li>
      <li class="bulletList">High-level UX design</li>
    </ul>
    <p class="normal">In <em class="italic">Chapters 5</em> to <em class="italic">9</em>, we will evolve LemonMart to demonstrate the aforementioned concepts.</p>
    <h1 id="_idParaDest-125" class="heading-1">Technical requirements</h1>
    <p class="normal">The most up-to-date versions of the sample code for the book are on GitHub at the following linked repository. The repository contains the final and completed state of the code. You can verify your progress at the end of this chapter by looking for the end-of-chapter snapshot of code under the <code class="inlineCode">projects</code> folder.</p>
    <p class="normal">For <em class="italic">Chapter 4</em>:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Clone the repo: <a href="https://github.com/duluca/lemon-mart"><span class="url">https://github.com/duluca/lemon-mart</span></a>.</li>
      <li class="numberedList">Execute <code class="inlineCode">npm install</code> on the root folder to install dependencies.</li>
      <li class="numberedList">The end state of the project is reflected at:
        <pre class="programlisting con"><code class="hljs-con">projects/stage7
</code></pre>
      </li>
      <li class="numberedList">Add the stage name to any <code class="inlineCode">ng</code> command to act only on that stage:
        <pre class="programlisting con"><code class="hljs-con">npx ng build stage7
</code></pre>
      </li>
    </ol>
    <div class="packt_tip">
      <p class="normal">Note that the <code class="inlineCode">dist/stage7</code> folder at the root of the repository will contain the compiled result.</p>
    </div>
    <div class="note">
      <p class="normal">Beware that the source code provided in the book and the version on GitHub are likely to be different. The ecosystem around these projects is ever-evolving. Between changes to how the Angular CLI generates new code, bug fixes, new versions of libraries, or side-by-side implementations of multiple techniques, there’s a lot of variation that’s impossible to account for. If you find errors or have questions, please create an issue, or submit a pull request on GitHub.</p>
    </div>
    <div class="packt_tip">
      <p class="normal">Read more about updating Angular in the supplemental guide <em class="keystroke">Keeping Angular and Tools Evergreen</em> at <a href="https://angularforenterprise.com/evergreen"><span class="url">https://angularforenterprise.com/evergreen</span></a>.</p>
    </div>
    <p class="normal">Next, let’s start by creating LemonMart<sup class="superscript">™</sup>, a fully featured LOB app you can use as a template to kickstart your next professional project. LemonMart is a robust and realistic project that can support feature growth and different backend implementations, and it comes with a complete and configurable authentication and authorization solution out of the box.</p>
    <div class="note">
      <p class="normal">Since its introduction in 2018, LemonMart has served over 257,000 lemons to more than 32,500 developers. Zesty! </p>
    </div>
    <p class="normal">You can always clone the finished project from GitHub, <a href="https://www.github.com/duluca/lemon-mart"><span class="url">https://www.github.com/duluca/lemon-mart</span></a>, whenever needed. Let’s jump right into it.</p>
    <h1 id="_idParaDest-126" class="heading-1">Creating LemonMart</h1>
    <p class="normal">LemonMart will be a mid-sized line-of-business application with over 90 code files. We will start our journey by <a id="_idIndexMarker344"/>creating a new Angular app, with routing and Angular Material configured.</p>
    <div class="note">
      <p class="normal"> It is presumed that you have installed all the requisite software mentioned in <em class="chapterRef">Appendix A</em>, <em class="italic">Setting Up Your Development Environment</em>. If you have not, execute the following commands for your OS to configure your environment.</p>
      <p class="normal">On Windows PowerShell, execute:</p>
      <pre class="programlisting con"><code class="hljs-con">PS&gt; Install-Script -Name setup-windows-dev-env
PS&gt; setup-windows-dev-env.ps1
</code></pre>
      <p class="normal">On macOS Terminal, execute:</p>
      <pre class="programlisting con"><code class="hljs-con">$&gt; bash &lt;(wget -O - https://git.io/JvHi1)
</code></pre>
      <p class="normal">For more information, refer to <a href="https://github.com/duluca/web-dev-environment-setup"><span class="url">https://github.com/duluca/web-dev-environment-setup</span></a>.</p>
    </div>
    <h2 id="_idParaDest-127" class="heading-2">Creating a router-first app</h2>
    <p class="normal">We will create LemonMart as a standalone project, which means a root module is not required to bootstrap the application, and all components created within the application will be<a id="_idIndexMarker345"/> configured as a standalone component. We will implement a modular architecture using lazy-loaded feature modules and selectively use lazy-loaded standalone components for components shared across feature modules. With the router-first approach, we want to enable routing early on in our application:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">You can create the new application, with routing already configured, by executing this command:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npm create @angular
(Enter project name)
(select SCSS)
(respond no to SSR)
</code></pre>
      </li>
      <li class="numberedList">A new <code class="inlineCode">app.routes.ts</code> file has been created for us:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">routes</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = []
</code></pre>
      
    <p class="normal">We will be defining <code class="inlineCode">routes</code> inside the routes array. </p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Observe that the <code class="inlineCode">routes</code> are<a id="_idIndexMarker346"/> provided in <code class="inlineCode">app.config.ts</code>, as shown:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">config</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">ApplicationConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { provideRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;
<span class="hljs-keyword">import</span> { routes } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.routes'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">appConfig</span>: <span class="hljs-title">ApplicationConfig</span> = {
  <span class="hljs-attr">providers</span>: [<span class="hljs-title">provideRouter</span>(<span class="code-highlight"><strong class="hljs-slc">routes</strong></span>) ]
};
</code></pre>
      </li>
      <li class="numberedList">Ultimately, <code class="inlineCode">ApplicationConfig</code> is consumed by <code class="inlineCode">bootstrapApplication</code> in <code class="inlineCode">main.ts</code>, which kicks off the application bootstrap process:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/main.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { bootstrapApplication } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="hljs-keyword">import</span> { appConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app/app.config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'</span><span class="hljs-string">./app/app.component'</span>;
<span class="hljs-title">bootstrapApplication</span>(<span class="hljs-title">AppComponent</span>, <span class="code-highlight"><strong class="hljs-slc">appConfig</strong></span>)
  .<span class="hljs-title">catch</span>(<span class="hljs-function">(</span><span class="hljs-params">err</span><span class="hljs-function">) =&gt;</span> <span class="hljs-variable">console</span>.<span class="hljs-title">error</span>(err));
</code></pre>
      </li>
      <li class="numberedList">Execute your project by running <code class="inlineCode">npm start</code>.</li>
    </ol>
    <h2 id="_idParaDest-128" class="heading-2">Configuring Angular and VS Code</h2>
    <p class="normal">Apply the following <a id="_idIndexMarker347"/>configuration steps to your project using <code class="inlineCode">mrm</code>, a command-line tool to help keep configuration files in projects in sync:</p>
    <div class="packt_tip">
      <p class="normal"> The following scripts do not require you to use VS Code. If you wish to use another IDE like WebStorm, the <code class="inlineCode">npm</code> scripts that are configured will run equally well.</p>
      <p class="normal">You can read more about <code class="inlineCode">mrm</code> at <a href="https://mrm.js.org/docs/getting-started"><span class="url">https://mrm.js.org/docs/getting-started</span></a>.</p>
    </div>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Apply the Angular VS Code configuration:
        <pre class="programlisting con"><code class="hljs-con">npx mrm angular-vscode
</code></pre>
      </li>
      <li class="numberedList">Apply the <code class="inlineCode">npm</code><code class="inlineCode"><a id="_idIndexMarker348"/></code> scripts for the Docker configuration:
        <pre class="programlisting con"><code class="hljs-con">npx mrm npm-docker
</code></pre>
      </li>
      <li class="numberedList">Implement an <code class="inlineCode">npm</code> script to build your application in production mode named <code class="inlineCode">build:prod</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-attr-slc">"scripts"</strong><strong class="hljs-punctuation-slc">: {</strong></span>
<span class="code-highlight"><strong class="hljs-punctuation-slc">  ...,</strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-attr-slc">"build:prod"</strong><strong class="hljs-punctuation-slc">: </strong><strong class="hljs-string-slc">"ng build --configuration production"</strong><strong class="hljs-punctuation-slc">,</strong></span>
<span class="code-highlight"><strong class="hljs-punctuation-slc">}</strong></span>
</code></pre>
      
    <p class="normal">By default, Angular will build your code in production mode. However, this behavior can be changed in <code class="inlineCode">angular.json</code>. For this reason, I prefer to explicitly request a production build for code that’s intended to be shipped, to avoid mistakes.</p>
    <div class="packt_tip">
      <p class="normal">These settings are continually tweaked to adapt to the ever-evolving landscape of extensions, plug-ins, Angular, and VS Code. Alternatively, you can use the Angular Evergreen extension for VS Code to run the configuration commands with one click.</p>
    </div>
    <div class="note">
      <p class="normal">Note that if the preceding configuration scripts fail to execute, the following <code class="inlineCode">npm</code> scripts will also fail. In this case, you have two options: revert your changes and ignore these scripts, or manually implement these scripts as covered in earlier chapters (or as demonstrated on GitHub).</p>
    </div></li>
    </ol>





    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Execute <code class="inlineCode">npm run style:fix</code>.</li>
      <li class="numberedList">Execute <code class="inlineCode">npm run lint:fix</code>.</li>
      <li class="numberedList">Execute <code class="inlineCode">npm start</code>.</li>
    </ol>
    <p class="normal">Refer to <em class="chapterRef">Appendix A</em>, <em class="italic">Setting Up Your Development Environment</em>, for further configuration details.</p>
    <p class="normal">For more information <a id="_idIndexMarker349"/>on the <code class="inlineCode">mrm</code> tasks, refer to:</p>
    <ul>
      <li class="bulletList"><a href="https://github.com/expertly-simple/mrm-task-angular-vscode"><span class="url">https://github.com/expertly-simple/mrm-task-angular-vscode</span></a></li>
      <li class="bulletList"><a href="https://github.com/expertly-simple/mrm-task-npm-docker"><span class="url">https://github.com/expertly-simple/mrm-task-npm-docker</span></a></li>
      <li class="bulletList"><a href="https://github.com/expertly-simple/mrm-task-npm-aws"><span class="url">https://github.com/expertly-simple/mrm-task-npm-aws</span></a></li>
    </ul>
    <h2 id="_idParaDest-129" class="heading-2">Configuring Angular Material and styles</h2>
    <p class="normal">Several years ago, it was a necessary <a id="_idIndexMarker350"/>practice to apply a reset or normalize CSS stylesheet to themed projects to account for discrepancies in how browsers handled layout or spacing. However, current browsers are more faithful to the CSS specification, so a legacy reset stylesheet can be overkill. Below, I implement <code class="inlineCode">styles.scss</code> with reset parameters like <code class="inlineCode">body { margin: 0 }</code> and <code class="inlineCode">html, body { height: 100% }</code>.</p>
    <div class="note">
      <p class="normal">If you want to check out a modern version of a normalize stylesheet, I recommend <a href="https://github.com/sindresorhus/modern-normalize"><span class="url">https://github.com/sindresorhus/modern-normalize</span></a>. It’s easy to set up and works seamlessly when imported in <code class="inlineCode">styles.scss</code>.</p>
    </div>
    <p class="normal">We will also need to set up Angular Material and configure a theme to use:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Install Angular Material:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng add @angular/material
(select Custom, No to global typography, Yes to browser animations)
<span class="hljs-con-meta">$</span> npm i @ngbracket/ngx-layout 
</code></pre>
     
    <div class="packt_tip">
      <p class="normal">Note that since this is a standalone project, we will need to import the required Material modules and <code class="inlineCode">FlexModule</code> on each individual component that requires it. When the <code class="inlineCode">@ngbracket/ngx-layout</code> package implements a root-level provider, adding <code class="inlineCode">FlexModule</code> manually won’t be needed anymore.</p>
    </div> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Append common CSS to <code class="inlineCode">styles.scss</code> as shown in the following code:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-attribute-slc">src</strong><strong class="hljs-slc">/styles</strong><strong class="hljs-selector-class-slc">.scss</strong></span>
…
<span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>; }
<span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">font-family</span>: Roboto, <span class="hljs-string">'Helvetica Neue'</span>,
  sans-serif; }
<span class="hljs-selector-class">.top-pad</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">16px</span>; }
<span class="hljs-selector-class">.h-pad</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>; }
<span class="hljs-selector-class">.v-pad</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">16px</span> <span class="hljs-number">0</span>; }
<span class="hljs-selector-class">.left-pad</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">8px</span>; }
<span class="hljs-selector-class">.flex-spacer</span> { <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span> <span class="hljs-number">1</span> auto; } 
</code></pre>
      </li>
      <li class="numberedList">Update your application’s title in <code class="inlineCode">index.html</code>.</li>
    </ol>
    <p class="normal">We will apply custom <a id="_idIndexMarker351"/>branding to the app later in this chapter. Next, let’s start designing our line-of-business application.</p>
    <h2 id="_idParaDest-130" class="heading-2">Designing LemonMart</h2>
    <p class="normal">It is important to build a<a id="_idIndexMarker352"/> rudimentary roadmap to follow, from the database to the frontend, while also avoiding over-engineering. This initial design phase is critical to the long-term health and success of your project, where any existing silos between teams must be broken down and an overall technical vision must be well understood by all members of the team. This is easier said than done, and there are volumes of books written on the topic.</p>
    <p class="normal">In engineering, there’s no right answer to a problem, so it is important to remember that no person can ever have all the answers or a crystal-clear vision. It is important that technical and non-technical leaders create a safe space with opportunities for open discussion and experimentation as part of the culture. The humility and empathy that come along with being able to court such uncertainty as a team is as important as any single team member’s technical capability. Every team member must be comfortable leaving their egos at the door because our collective goal will be to grow and evolve an application to ever-changing requirements during the development cycle. You will know that you have succeeded if individual parts of the software you created are easily replaceable by anyone.</p>
    <p class="normal">So, let’s start by developing a roadmap and identifying the scope of our application. For this, we will be defining user roles and then building a site map to create a vision of how our app might <a id="_idIndexMarker353"/>work.</p>
    <h3 id="_idParaDest-131" class="heading-3">Identifying user roles</h3>
    <p class="normal">The first step of our <a id="_idIndexMarker354"/>design will be to think about who is using the application and why.</p>
    <p class="normal">We envision four user states, or roles, for LemonMart:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Authenticated</strong>: any authenticated user would have access to their profile</li>
      <li class="bulletList"><strong class="keyWord">Cashier</strong>, whose sole role is to check out customers</li>
      <li class="bulletList"><strong class="keyWord">Clerk</strong>, whose sole role is to<a id="_idIndexMarker355"/> perform inventory-related functions</li>
      <li class="bulletList"><strong class="keyWord">Manager</strong>, who can perform all actions a cashier and a clerk can perform but also has access to administrative functions</li>
    </ul>
    <p class="normal">With this in mind, we can start to create a high-level design for our app.</p>
    <h3 id="_idParaDest-132" class="heading-3">Identifying high-level modules with a site map</h3>
    <p class="normal">Develop a high-level site <a id="_idIndexMarker356"/>map of your application, as shown in the following image:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_01.png" alt="A screenshot of a login page  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.1: Landing pages for users</p>
    <div class="packt_tip">
      <p class="normal">I used MockFlow.com’s SiteMap tool to create the site map shown: <a href="https://sitemap.mockflow.com"><span class="url">https://sitemap.mockflow.com</span></a>.</p>
    </div>
    <p class="normal">Upon first examination, three high-level modules emerge as lazy-loading candidates:</p>
    <ul>
      <li class="bulletList"><strong class="screenText">Point of Sale</strong><strong class="keyWord"> </strong>(<strong class="screenText">POS</strong>)</li>
      <li class="bulletList"><strong class="screenText">Inventory</strong></li>
      <li class="bulletList"><strong class="screenText">Manager</strong></li>
    </ul>
    <p class="normal">The cashier will only have access to the <strong class="keyWord">POS</strong> module and component. The clerk will only have access to the <strong class="screenText">Inventory</strong> module, which<a id="_idIndexMarker357"/> will include additional screens for the <strong class="screenText">Stock Entry</strong>, <strong class="screenText">Products</strong>, and <strong class="screenText">Categories</strong> management components:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_02.png" alt="A picture containing text, screenshot, line  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 4.2: Inventory pages</p>
    <p class="normal">Finally, the <strong class="screenText">Manager</strong> will be able to access all three modules with the <strong class="screenText">Manager</strong> module, including user management and receipt lookup components:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_03.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.3: Manager pages</p>
    <p class="normal">There will be great benefits from enabling lazy loading for all three modules; since Cashiers and Clerks will never use components belonging to other user roles, there’s no reason to send those bytes down to their devices. As the <strong class="screenText">Manager</strong> module gains more advanced reporting features or new roles are added to the application, the <strong class="screenText">POS</strong> module will be unaffected by the<a id="_idIndexMarker358"/> bandwidth and memory impact of an otherwise growing application.</p>
    <p class="normal">This means fewer support calls and consistent performance on the same hardware for much longer.</p>
    <h1 id="_idParaDest-133" class="heading-1">Generating router-enabled modules</h1>
    <p class="normal">Now that we have our high-level components defined as <strong class="screenText">Manager</strong>, <strong class="screenText">Inventory</strong>, and <strong class="screenText">POS</strong>, we can define them <a id="_idIndexMarker359"/>as modules. These modules will be different from the ones you’ve created for routing and Angular Material. We can create the user profile as a component on the app module; however, note that the user profile will only ever be used for already-authenticated users, so it makes sense to define a fourth module only meant for authenticated users in general. This way, you will ensure that your app’s first payload remains as minimal as possible. In addition, we will create a <code class="inlineCode">home</code> component to contain the landing experience for our app so that we can keep implementation details out of <code class="inlineCode">app.component</code>:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Generate <code class="inlineCode">manager</code>, <code class="inlineCode">inventory</code>, <code class="inlineCode">pos</code>, and <code class="inlineCode">user</code> feature modules by specifying their names and routing capabilities:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng g m manager --routing
<span class="hljs-con-meta">$</span> npx ng g m inventory --routing
<span class="hljs-con-meta">$</span> npx ng g m pos --routing
<span class="hljs-con-meta">$</span> npx ng g m user --routing
</code></pre>
     
    <div class="packt_tip">
      <p class="normal">Note the abbreviated command structure, where <code class="inlineCode">ng generate module manager</code> becomes <code class="inlineCode">ng g m manager</code>, and similarly, <code class="inlineCode">--module</code> becomes <code class="inlineCode">-m</code>.</p>
    </div> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Verify that you don’t have CLI errors.
    <div class="packt_tip">
      <p class="normal">Note that using <code class="inlineCode">npx</code> on Windows may throw an error such as <code class="inlineCode">Path must be a string. Received undefined</code>. This error doesn’t seem to affect the successful operation of the command, which is why it is critical always to inspect what the CLI tool generates.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Verify that the folder and the files are created:
        <pre class="programlisting code"><code class="hljs-code">/src/app
│   app.component.scss
│   app.component.html
│   app.component.spec.ts
│   app.component.ts
│   app.config.ts
│   app.routes.ts
├───inventory
│      inventory-routing.module.ts
│      inventory.module.ts
├───manager
│      manager-routing.module.ts
│      manager.module.ts
├───pos
│      pos-routing.module.ts
│      pos.module.ts
└───user
│      user-routing.module.ts
│      user.module.ts
</code></pre>
      </li>
    </ol>
    <p class="normal">Let’s examine how <code class="inlineCode">ManagerModule</code> has been configured. Remember that a feature module is decorated by the <code class="inlineCode">@NgModule</code> annotation. In Angular apps configured with a root <code class="inlineCode">NgModule</code>, you’ll notice that it implements the <code class="inlineCode">bootstrap</code> property, whereas a feature module does not implement this. See the generated code below:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager.</strong><strong class="hljs-property-slc">module</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">CommonModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">ManagerRoutingModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./manager-routing.module'</span>
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title">CommonModule</span>, <span class="hljs-title">ManagerRoutingModule</span>],
  <span class="hljs-attr">declarations</span>: [],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagerModule</span> {}
</code></pre>
    <p class="normal">Since we specified the <code class="inlineCode">--routing</code> option, a <code class="inlineCode">routing</code> module has been created and imported into <code class="inlineCode">ManagerModule</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager-routing.</strong><strong class="hljs-property-slc">module</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">Routes</span>, <span class="hljs-title">RouterModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = []
<span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title">RouterModule</span>.<span class="hljs-title">forChild</span>(routes)], 
  <span class="hljs-attr">exports</span>: [<span class="hljs-title">RouterModule</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagerRoutingModule</span> {}
</code></pre>
    <p class="normal">Note that <code class="inlineCode">RouterModule</code> is being<a id="_idIndexMarker360"/> configured using <code class="inlineCode">forChild</code>, as opposed to the optional <code class="inlineCode">forRoot</code> method, either configured in an <code class="inlineCode">AppRouting</code> module or a router provider in <code class="inlineCode">ApplicationConfig</code>. By specifying the context, we allow the router to understand the proper relationship between routes defined in different module contexts. For example, all child routes defined in <code class="inlineCode">ManagerRoutingModule</code> will be prepended by the route segment <code class="inlineCode">/manager</code>.</p>
    <p class="normal">Be sure to execute <code class="inlineCode">style</code> and <code class="inlineCode">lint</code> <code class="inlineCode">fix</code> commands before moving on:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npm run style:fix &amp;&amp; npm run lint:fix 
</code></pre>
    <p class="normal">Now, let’s design how the landing page for LemonMart will look and work.</p>
    <h2 id="_idParaDest-134" class="heading-2">Designing the home route</h2>
    <p class="normal">Consider the following<a id="_idIndexMarker361"/> mock-up as the landing <a id="_idIndexMarker362"/>experience for LemonMart:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_04.png" alt="A screenshot of a login box  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 4.4: LemonMart landing experience</p>
    <p class="normal">Unlike the LocalCast Weather app, we don’t want a lot of layout markup in <code class="inlineCode">AppComponent</code>. The <code class="inlineCode">AppComponent</code> is the root element of your entire application; therefore, it should only contain elements that will persistently appear throughout your application. In the following <a id="_idIndexMarker363"/>annotated mock-up, the toolbar marked as <strong class="screenText">1</strong> will be persistent throughout the app.</p>
    <p class="normal">The area marked as <strong class="screenText">2</strong> will house the <code class="inlineCode">home</code> component, which itself will contain a login user control marked as <strong class="screenText">3</strong>:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_05.png" alt="A screenshot of a computer login  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.5: LemonMart layout structure</p>
    <p class="normal">It’s best practice to create your default or landing component as a separate element in Angular. This helps reduce the amount of code that must be loaded and logically executed on every page, but it also results in a more flexible architecture when utilizing the router.</p>
    <p class="normal">Generate the <code class="inlineCode">home</code> component with an inline template and styles:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng g c home --inline-template --inline-style
</code></pre>
    <div class="packt_tip">
      <p class="normal">Note that a<a id="_idIndexMarker364"/> component with an inline template and a<a id="_idIndexMarker365"/> style is also called a <strong class="keyWord">Single File Component</strong> or an <strong class="keyWord">SFC</strong>.</p>
    </div>
    <p class="normal">Now, you are ready to configure the router.</p>
    <h3 id="_idParaDest-135" class="heading-3">Setting up default routes</h3>
    <p class="normal">Let’s get started with setting up a simple route for LemonMart. We need to set up the <code class="inlineCode">/</code> route (also known as the <a id="_idIndexMarker366"/>empty route) and the <code class="inlineCode">/home</code> route<a id="_idIndexMarker367"/> to display the <code class="inlineCode">HomeComponent</code>. We also need a wildcard route to capture all undefined routes and display a <code class="inlineCode">PageNotFoundComponent</code>, which must also be created:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">routes</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">HomeComponent</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'./home/home.component'</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong></span>
<span class="code-highlight"><strong class="hljs-slc">  </strong><strong class="hljs-title-slc">PageNotFoundComponent</strong><strong class="hljs-slc"> </strong></span>
<span class="code-highlight"><strong class="hljs-slc">} </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'./page-not-found/page-not-found.component'</strong><strong class="hljs-slc"> </strong></span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  <span class="code-highlight"><strong class="hljs-slc">{ </strong><strong class="hljs-attr-slc">path</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">''</strong><strong class="hljs-slc">, </strong><strong class="hljs-attr-slc">redirectTo</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">'home'</strong><strong class="hljs-slc">, </strong><strong class="hljs-attr-slc">pathMatch</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">'full'</strong><strong class="hljs-slc"> },</strong></span>
  <span class="code-highlight"><strong class="hljs-slc">{ </strong><strong class="hljs-attr-slc">path</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">'home'</strong><strong class="hljs-slc">, </strong><strong class="hljs-attr-slc">component</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">HomeComponent</strong><strong class="hljs-slc"> },</strong></span>
  <span class="code-highlight"><strong class="hljs-slc">{ </strong><strong class="hljs-attr-slc">path</strong><strong class="hljs-slc">: </strong><strong class="hljs-string-slc">'**'</strong><strong class="hljs-slc">, </strong><strong class="hljs-attr-slc">component</strong><strong class="hljs-slc">: </strong><strong class="hljs-title-slc">PageNotFoundComponent</strong><strong class="hljs-slc"> },</strong></span>
]
...
</code></pre>
    <p class="normal">Let’s put together the route configuration above step by step:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Define a path for <code class="inlineCode">'home'</code> and direct the router to render <code class="inlineCode">HomeComponent</code> by setting the <code class="inlineCode">component</code> property. </li>
      <li class="numberedList">Set the default path of the application <code class="inlineCode">''</code> to be redirected to <code class="inlineCode">'/home'</code>. By setting the <code class="inlineCode">pathMatch</code> property, we always ensure that this specific instance of the <code class="inlineCode">home</code> route will be rendered as the landing experience; otherwise, in its default prefix setting, <code class="inlineCode">pathMatch</code> considers an empty path to be a prefix of all routes, resulting in an endless redirect loop.</li>
      <li class="numberedList">Create a <code class="inlineCode">pageNotFound</code> component with an inline template.</li>
      <li class="numberedList">Configure a wildcard route for <code class="inlineCode">PageNotFoundComponent</code> as the last entry.</li>
    </ol>
    <p class="normal">By configuring the wildcard route as the last entry, we handle any route that is not matched gracefully by<a id="_idIndexMarker368"/> redirecting it to <code class="inlineCode">PageNotFoundComponent</code>. The wildcard path must be the last property in the array; otherwise, routes defined after will not be considered.</p>
    <h3 id="_idParaDest-136" class="heading-3">RouterLink</h3>
    <p class="normal">When a user lands <a id="_idIndexMarker369"/>on the <code class="inlineCode">PageNotFoundComponent</code>, we would like them to be able to get back to the <code class="inlineCode">HomeComponent</code> using the <code class="inlineCode">routerLink</code> directive:</p>
    <p class="normal">On <code class="inlineCode">PageNotFoundComponent</code>, replace the inline template to link back to <code class="inlineCode">home</code> using <code class="inlineCode">routerLink</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/page-not-found/page-not-found.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;p&gt;</strong></span>
      <span class="code-highlight"><strong class="hljs-string-slc">This page doesn't exist. Go back to</strong></span>
      <span class="code-highlight"><strong class="hljs-string-slc">&lt;a routerLink="/home"&gt;home&lt;/a&gt;.</strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;/p&gt;</strong></span>
<span class="hljs-string">  `</span>,
...
</code></pre>
    <div class="note">
      <p class="normal">This navigation can also be done via an <code class="inlineCode">&lt;a href&gt;</code> tag implementation; however, in more dynamic and complicated navigation scenarios, you will lose features such as automatic active link tracking or dynamic link generation.</p>
    </div>
    <p class="normal">The Angular bootstrap process will ensure that <code class="inlineCode">AppComponent</code> is inside the <code class="inlineCode">&lt;app-root&gt;</code> element in <code class="inlineCode">index.html</code>. However, we must manually define where we would like <code class="inlineCode">HomeComponent</code> to render to finalize the router configuration.</p>
    <h3 id="_idParaDest-137" class="heading-3">Router outlet</h3>
    <p class="normal"><code class="inlineCode">AppComponent</code> is considered a root element for the root router defined in <code class="inlineCode">app-routes.ts</code>, which allows us to define outlets within this root element to dynamically load any content we wish <a id="_idIndexMarker370"/>using the <code class="inlineCode">&lt;router-outlet&gt;</code> element:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Configure <code class="inlineCode">AppComponent</code> to use inline templates and styles, deleting any existing content in the <code class="inlineCode">html</code> and <code class="inlineCode">scss</code> file.</li>
      <li class="numberedList">Add the toolbar for your application.</li>
      <li class="numberedList">Add the name of your application as a button link so that it takes the user to the home page when clicked on.</li>
      <li class="numberedList">Import <code class="inlineCode">RouterLink</code>, <code class="inlineCode">RouterOutlet</code>, and <code class="inlineCode">MatToolbarModule</code> in the component.</li>
      <li class="numberedList">Add <code class="inlineCode">&lt;router-outlet&gt;</code> for the content to render:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
<span class="hljs-attr">template</span>: <span class="hljs-string">`</span>
<span class="hljs-string">  &lt;mat-toolbar color="primary"&gt;</span>
<span class="hljs-string">    &lt;a mat-button routerLink="/home"&gt;&lt;h1&gt;LemonMart&lt;/h1&gt;&lt;/a&gt;</span>
<span class="hljs-string">  &lt;/mat-toolbar&gt;</span>
<span class="hljs-string">  &lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
<span class="hljs-string">`</span>,
</code></pre>
      </li>
    </ol>
    <p class="normal">Now, the contents of <code class="inlineCode">home</code> will render inside <code class="inlineCode">&lt;router-outlet&gt;</code>.</p>
    <h1 id="_idParaDest-138" class="heading-1">Branding, customization, and Material icons</h1>
    <p class="normal">To construct an attractive and intuitive toolbar, we must introduce some iconography and branding to the app so that the users can easily navigate through the app with the help of familiar icons.</p>
    <h2 id="_idParaDest-139" class="heading-2">Branding</h2>
    <p class="normal">In terms of <a id="_idIndexMarker371"/>branding, you should ensure that your web app has a custom color palette and integrates with desktop and mobile browser features to bring forward your app’s name and iconography.</p>
    <h2 id="_idParaDest-140" class="heading-2">Color palette</h2>
    <p class="normal">Pick a color palette using<a id="_idIndexMarker372"/> the <strong class="screenText">Material Color</strong> tool, located at <a href="https://m2.material.io/design/color/the-color-system.html#tools-for-picking-colors"><span class="url">https://m2.material.io/design/color/the-color-system.html#tools-for-picking-colors</span></a>. For LemonMart, I picked the following values:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1"><strong class="screenText">Primary Color</strong>- <code class="inlineCode">#2E7D32</code>:
        <pre class="programlisting code"><code class="hljs-code">$lemon-mart-primary: mat.<span class="hljs-built_in">define-palette</span>(mat.$green-palette, 800);
</code></pre>
      </li>
      <li class="numberedList"><strong class="screenText">Secondary Color</strong>- <code class="inlineCode">#C6FF00</code>:
        <pre class="programlisting code"><code class="hljs-code">$lemon-mart-accent: mat.<span class="hljs-built_in">define-palette</span>(mat.$lime-palette, A400);
</code></pre>
     
    <p class="normal">You may either implement your theme in <code class="inlineCode">styles.scss</code> or create a separate theme file. A separate file is useful if you intend to further customize individual components.</p> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Add a file named <code class="inlineCode">lemonmart-theme.scss</code></li>
      <li class="numberedList">Move theme-related CSS from <code class="inlineCode">styles.scss</code> over to the new file. Theme-related content will be above the following line:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">styles</strong><strong class="hljs-selector-class-slc">.scss</strong></span>
...
<span class="hljs-comment">/* You can add global styles to this file and also import other style files */</span>
... 
</code></pre>
      </li>
      <li class="numberedList">Update <code class="inlineCode">styles.scss</code> to include the new theme in the first line of the file:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">styles</strong><strong class="hljs-selector-class-slc">.scss</strong></span>
<span class="hljs-keyword">@use</span> <span class="hljs-string">'lemonmart-theme'</span>;
...
</code></pre>
      </li>
      <li class="numberedList">Configure your custom theme with the chosen color palette.</li>
    </ol>
    <div class="packt_tip">
      <p class="normal">You can also grab LemonMart-related assets from GitHub at <a href="https://github.com/duluca/lemon-mart"><span class="url">https://github.com/duluca/lemon-mart</span></a>.</p>
    </div>
    <p class="normal">For the LocalCast Weather app, we replaced the <code class="inlineCode">favicon.ico</code> file to brand our app in the browser. While this would’ve been enough 10 years ago, today’s devices vary wildly, and each platform can leverage optimized assets better to represent your web app within its operating <a id="_idIndexMarker373"/>system. Next, let’s implement a more robust favicon.</p>
    <h2 id="_idParaDest-141" class="heading-2">Implementing a browser manifest and icons</h2>
    <p class="normal">You must ensure the browser shows the correct title text and icon in a <strong class="screenText">Browser</strong> tab. Further, a manifest file should <a id="_idIndexMarker374"/>be created that implements specific icons for various mobile operating systems so that if a user pins your website, a desirable icon is displayed similarly to other app icons on the phone. This will ensure that if a user favorites or pins your web app on their mobile device’s home screen, they’ll get a native-looking app icon:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create or obtain an SVG version of your website’s logo from a designer or a site like <a href="https://www.flaticon.com"><span class="url">https://www.flaticon.com</span></a>.</li>
      <li class="numberedList">In this case, I will be using the likeness of the Eureka lemon:
    <figure class="mediaobject"><img src="../Images/B20960_04_06.png" alt="A picture containing yellow, banana  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 4.6: LemonMart’s signature logo</p>
    <div class="packt_tip">
      <p class="normal">When using images you find online, pay attention to applicable copyrights. In this case, I have purchased a license to be able to publish this lemon logo, but you may grab your own copy at the following URL, given that you provide the required attribution to the author of the image: <a href="https://www.flaticon.com/free-icon/lemon_605070"><span class="url">https://www.flaticon.com/free-icon/lemon_605070</span></a>.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Generate the <code class="inlineCode">favicon.ico</code> and manifest files using a tool such as <a href="https://realfavicongenerator.net"><span class="url">https://realfavicongenerator.net</span></a>.</li>
      <li class="numberedList">Adjust settings for iOS, Android, Windows, and macOS Safari to your liking.</li>
      <li class="numberedList">In the generator, be sure to set a version number, as favicons can be notorious for caching; a random version number will ensure that users always get the latest version.</li>
      <li class="numberedList">Download and<a id="_idIndexMarker375"/> extract the generated <code class="inlineCode">favicons.zip</code> file into your <code class="inlineCode">src</code> folder.</li>
      <li class="numberedList">Edit the <code class="inlineCode">angular.json</code> file to include the new assets in your app:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">angular.json</strong></span>
<span class="hljs-attr">"apps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
  ...
    <span class="hljs-attr">"assets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"src/assets"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/favicon.ico"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/android-chrome-192x192.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/favicon-16x16.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/mstile-310x150.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/android-chrome-512x512.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/favicon-32x32.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/mstile-310x310.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/apple-touch-icon.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/manifest.json"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"</span><span class="hljs-string">src/mstile-70x70.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/browserconfig.xml"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/mstile-144x144.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/safari-pinned-tab.svg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"src/mstile-150x150.png"</span>
    <span class="hljs-punctuation">]</span>
</code></pre>
      </li>
      <li class="numberedList">Insert the generated code in the <code class="inlineCode">&lt;head&gt;</code> section of <code class="inlineCode">index.html</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/index.html</strong></span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"apple-touch-icon"</span><span class="hljs-tag"> </span><span class="hljs-attr">sizes</span><span class="hljs-tag">=</span><span class="hljs-string">"180x180"</span>
<span class="hljs-string"> </span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"/apple-touch- icon.png?v=rMlKOnvxlK"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"icon"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"image/png"</span><span class="hljs-tag"> </span><span class="hljs-attr">sizes</span><span class="hljs-tag">=</span><span class="hljs-string">"32x32"</span>
<span class="hljs-string"> </span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"/favicon-32x32.png?v=rMlKOnvxlK"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"icon"</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"image/png"</span><span class="hljs-tag"> </span><span class="hljs-attr">sizes</span><span class="hljs-tag">=</span><span class="hljs-string">"16x16"</span>
<span class="hljs-string"> </span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"/favicon-16x16.png?v=rMlKOnvxlK"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"manifest"</span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"/manifest.json?v=rMlKOnvxlK"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"mask-icon"</span>
<span class="hljs-string"> </span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"/safari-pinned-tab.svg?v=rMlKOnvxlK"</span><span class="hljs-tag"> </span><span class="hljs-attr">color</span><span class="hljs-tag">=</span><span class="hljs-string">"#b3ad2d"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"shortcut icon"</span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"/favicon.ico?v=rMlKOnvxlK"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">meta</span><span class="hljs-tag"> </span><span class="hljs-attr">name</span><span class="hljs-tag">=</span><span class="hljs-string">"theme-color"</span><span class="hljs-tag"> </span><span class="hljs-attr">content</span><span class="hljs-tag">=</span><span class="hljs-string">"#ffffff"</span><span class="hljs-tag">&gt;</span>
</code></pre>
     
    <div class="packt_tip">
      <p class="normal">Place the generated code between the favicon declaration and the CSS style imports. The order does matter. Browsers load data top-down. You want your application’s icon to be parsed before the user must wait for CSS files to be downloaded.</p>
    </div> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="9">Ensure that your new favicon displays correctly.</li>
    </ol>
    <p class="normal">Once your basic branding<a id="_idIndexMarker376"/> work has been completed, consider whether you’d like to establish a more unique look and feel with theming.</p>
    <h2 id="_idParaDest-142" class="heading-2">Custom themes</h2>
    <p class="normal">You may further customize Material’s look and feel to achieve a unique experience for your app by <a id="_idIndexMarker377"/>leveraging tools listed at <a href="https://m2.material.io/resources"><span class="url">https://m2.material.io/resources</span></a> and some other tools that I have discovered, which are listed as follows:</p>
    <ul>
      <li class="bulletList">Material Design Theme Palette Generator will generate the necessary code to define your custom color palette to create truly unique themes at <a href="http://mcg.mbitson.com"><span class="url">http://mcg.mbitson.com</span></a></li>
      <li class="bulletList">Color Blender helps with finding midway points between two colors, which is useful when defining in-between colors for the color swatches, located at <a href="https://meyerweb.com/eric/tools/color-blend"><span class="url">https://meyerweb.com/eric/tools/color-blend</span></a>
        <div class="note">
          <p class="normal">In 2021, Google announced <strong class="keyWord">Material 3</strong>, aka Material You, a dynamic theming system that adapts to user preferences<a id="_idIndexMarker378"/> around OS-level color use. In 2023, Angular Material is still based on Material 2. The Angular team transitioned to new <strong class="keyWord">Material Design Components for Web</strong> (<strong class="keyWord">MDC</strong>) style components in Angular 15 and will <a id="_idIndexMarker379"/>deprecate the old styles with Angular 17. The MDC-style components support adjustable density and are more dynamic as a result. After this milestone, the Angular team plans to tackle the implementation of Material You.</p>
          <p class="normal">You can follow this thread for updates: <a href="https://github.com/angular/components/issues/22738"><span class="url">https://github.com/angular/components/issues/22738</span></a>.</p>
        </div>
      </li>
    </ul>
    <p class="normal">There is a wealth of information at <a href="https://material.io"><span class="url">https://material.io</span></a> on the in-depth philosophy behind the Material design, with great sections on things like the color system, <a href="https://material.io/design/color/the-color-system.html"><span class="url">https://material.io/design/color/the-color-system.html</span></a>, which dives deep into selecting the right <a id="_idIndexMarker380"/>color palette for your brand and other topics, such as creating a dark theme for your app.</p>
    <p class="normal">It is very important to distinguish your brand from other apps or your competitors. Creating a high-quality custom theme will be a time-consuming process; however, the benefits of creating a great first impression with your users are considerable.</p>
    <p class="normal">Next, we will show you how to add custom icons to your Angular apps.</p>
    <h2 id="_idParaDest-143" class="heading-2">Custom icons</h2>
    <p class="normal">Now, let’s add your custom branding to your Angular app. You will need the <code class="inlineCode">svg</code> icon you used to create <a id="_idIndexMarker381"/>your favicon:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Place the image under <code class="inlineCode">src/assets/img/icons</code>, named <code class="inlineCode">lemon.svg</code>.</li>
      <li class="numberedList">In <code class="inlineCode">app.config.ts</code>, add <code class="inlineCode">provideHttpClient()</code> as a provider so that the <code class="inlineCode">.svg</code> file can be requested over HTTP.</li>
      <li class="numberedList">Update <code class="inlineCode">AppComponent</code> to register the new .<code class="inlineCode">svg</code> file as an icon:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">MatIconRegistry</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'@angular/material/icon'</strong></span>
<span class="code-highlight"><strong class="hljs-keyword-slc">import</strong><strong class="hljs-slc"> { </strong><strong class="hljs-title-slc">DomSanitizer</strong><strong class="hljs-slc"> } </strong><strong class="hljs-keyword-slc">from</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">'@angular/platform-browser'</strong></span>
...
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> {
  <span class="code-highlight"><strong class="hljs-title-slc">constructor</strong><strong class="hljs-slc">(</strong><strong class="hljs-params-slc"> </strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc">iconRegistry</strong><strong class="hljs-params-slc">: </strong><strong class="hljs-title-slc">MatIconRegistry</strong><strong class="hljs-params-slc">, </strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc">sanitizer</strong><strong class="hljs-params-slc">: </strong><strong class="hljs-title-slc">DomSanitizer</strong></span>
  <span class="code-highlight"><strong class="hljs-slc">) { </strong></span>
    <span class="code-highlight"><strong class="hljs-slc">iconRegistry.</strong><strong class="hljs-title-slc">addSvgIcon</strong><strong class="hljs-slc">(</strong></span>
      <span class="code-highlight"><strong class="hljs-string-slc">'lemon'</strong><strong class="hljs-slc">,</strong></span>
      <span class="code-highlight"><strong class="hljs-slc">sanitizer.</strong><strong class="hljs-title-slc">bypassSecurityTrustResourceUrl</strong><strong class="hljs-slc">(</strong></span>
        <span class="code-highlight"><strong class="hljs-string-slc">'assets/img/icons/lemon.svg'</strong></span>
      <span class="code-highlight"><strong class="hljs-slc">) </strong></span>
    <span class="code-highlight"><strong class="hljs-slc">)</strong></span>
  } 
}
</code></pre>
     
    <div class="packt_tip">
      <p class="normal"> Beware that adding an <code class="inlineCode">svg</code> icon from a URL resource doesn’t work in a <strong class="keyWord">Server-Side Rendering</strong> (<strong class="keyWord">SSR</strong>) configuration. Instead, you <a id="_idIndexMarker382"/>can add your <code class="inlineCode">svg</code> icon as a <code class="inlineCode">const</code> string in a TypeScript file import and register it as shown below:</p>
      <pre class="programlisting code"><code class="hljs-code">import { LEMON_ICON } from './svg.icons'iconRegistry.
addSvgIconLiteral('lemon', sanitizer. bypassSecurityTrustHtml(LEMON_ICON))
</code></pre>
    </div> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Import <code class="inlineCode">MatIconModule</code>.</li>
      <li class="numberedList">Following the pattern<a id="_idIndexMarker383"/> in the documentation for <code class="inlineCode">MatToolbar</code>, found at <a href="https://material.angular.io/components/toolbar"><span class="url">https://material.angular.io/components/toolbar</span></a>, add the icon to the toolbar:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-attr">template</span>: <span class="hljs-string">` </span>
<span class="hljs-string">  &lt;mat-toolbar color="primary"&gt; </span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;mat-icon svgIcon="lemon"&gt;&lt;/mat-icon&gt; </strong></span>
<span class="hljs-string">    &lt;a mat-button routerLink="/home"&gt;&lt;h1&gt;LemonMart&lt;/h1&gt;&lt;/a&gt; </span>
<span class="hljs-string">  &lt;/mat-toolbar&gt; </span>
<span class="hljs-string">  &lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
<span class="hljs-string">`</span>, 
</code></pre>
      </li>
    </ol>
    <p class="normal">Now, let’s add the remaining icons for the menu, user profile, and logout.</p>
    <h2 id="_idParaDest-144" class="heading-2">Material icons</h2>
    <p class="normal">Angular Material works out of<a id="_idIndexMarker384"/> the box with the Material Design icon font, automatically imported into your app as a web font in <code class="inlineCode">index.html</code>. It is possible to self-host the font; however, if you go down that path, you don’t get the benefit if the user’s browser has already cached the font from when they visited another website, which <a id="_idIndexMarker385"/>could save the speed and latency of downloading a 42-56 KB file in the process. The<a id="_idIndexMarker386"/> complete list of icons can be found at <a href="https://fonts.google.com/icons"><span class="url">https://fonts.google.com/icons</span></a>.</p>
    <p class="normal">Now let’s update the toolbar with some icons and set up the home page with a minimal template for a fake login button:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Ensure that the Material icons <code class="inlineCode">&lt;link&gt;</code> tag has been added to <code class="inlineCode">index.html</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/index.html</strong></span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>
  ...
  <span class="hljs-tag">&lt;</span><span class="hljs-name">link</span><span class="hljs-tag"> </span><span class="hljs-attr">href</span><span class="hljs-tag">=</span><span class="hljs-string">"https://fonts.googleapis.com icon?family=Material+Icons"</span>
<span class="hljs-tag">    </span><span class="hljs-attr">rel</span><span class="hljs-tag">=</span><span class="hljs-string">"stylesheet"</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">head</span><span class="hljs-tag">&gt;</span>
</code></pre>
      
    <div class="packt_tip">
      <p class="normal">Instructions on self-hosting can be found under the <strong class="screenText">Self Hosting</strong> section at <a href="http://google.github.io/material-design-icons/#getting-icons"><span class="url">http://google.github.io/material-design-icons/#getting-icons</span></a>.</p>
    </div>
    <p class="normal">Once configured, working with Material icons is easy.</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">On <code class="inlineCode">AppComponent</code>, update the toolbar to place a <strong class="screenText">Menu</strong> button to the left of the title.</li>
      <li class="numberedList">Add the <code class="inlineCode">fxFlex</code> directive <a id="_idIndexMarker387"/>so that the remaining icons are right-aligned.</li>
      <li class="numberedList">Import <code class="inlineCode">FlexModule</code> and <code class="inlineCode">MatButtonModule</code>.</li>
      <li class="numberedList">Add user profile and logout icons:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-attr">template</span>: <span class="hljs-string">`</span>
<span class="hljs-string">  &lt;mat-toolbar color="primary"&gt;</span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;button mat-icon-button&gt;</strong></span>
      <span class="code-highlight"><strong class="hljs-string-slc">&lt;mat-icon&gt;menu&lt;/mat-icon&gt;</strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;/button&gt;</strong></span>
<span class="hljs-string">    &lt;mat-icon svgIcon="lemon"&gt;&lt;/mat-icon&gt;</span>
<span class="hljs-string">    &lt;a mat-button routerLink="/home"&gt;&lt;h1&gt;LemonMart&lt;/h1&gt;&lt;/a&gt;</span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;span class="flex-spacer"&gt;&lt;/span&gt;</strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;button mat-icon-button&gt;</strong></span>
      <span class="code-highlight"><strong class="hljs-string-slc">&lt;mat-icon&gt;account_circle&lt;/mat-icon&gt;</strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;/button&gt;</strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;button mat-icon-button&gt;</strong></span>
      <span class="code-highlight"><strong class="hljs-string-slc">&lt;mat-icon&gt;lock_open&lt;/mat-icon&gt;</strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;/button&gt;</strong></span>
<span class="hljs-string">  &lt;/mat-toolbar&gt;</span>
<span class="hljs-string">  &lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
<span class="hljs-string">`</span>,
</code></pre>
      </li>
      <li class="numberedList">On <code class="inlineCode">HomeComponent</code>, add a minimal template for a login experience, replacing any existing content. Don’t forget to import <code class="inlineCode">FlexModule</code> and <code class="inlineCode">MatButtonModule</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/home/home.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
  <span class="hljs-attr">styles</span>: [<span class="hljs-string">`</span>
<span class="hljs-string">    div[fxLayout] {margin-top: 32px;}</span>
<span class="hljs-string">  `</span>],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span>
<span class="hljs-string">    &lt;div fxLayout="column" fxLayoutAlign="center center"&gt;</span>
<span class="hljs-string">      &lt;span class="mat-display-2"&gt;Hello, Limoncu!&lt;/span&gt;</span>
<span class="hljs-string">      &lt;button mat-raised-button color="primary"&gt;Login&lt;/button&gt;</span>
<span class="hljs-string">    &lt;/div&gt;</span>
<span class="hljs-string">  `</span>
</code></pre>
      </li>
    </ol>
    <p class="normal">Your app should look similar <a id="_idIndexMarker388"/>to this screenshot:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_07.png" alt="A screenshot of a computer  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 4.7: LemonMart with minimal login</p>
    <p class="normal">There’s still some work to be done in terms of implementing and showing/hiding the menu, profile, and logout icons, given the user’s authentication status. We will cover this functionality in <em class="chapterRef">Chapter 7</em>, <em class="italic">Working with REST and GraphQL APIs</em>.</p>
    <div class="packt_tip">
      <p class="normal">To debug the router, get a visualization of your routes, and tightly integrate Angular with Chrome debugging features, use Angular DevTools, available from Chrome Web Store (also <a id="_idIndexMarker389"/>compatible with Microsoft Edge) or Firefox add-ons at <a href="https://angular.dev/tools/devtools"><span class="url">https://angular.dev/tools/devtools</span></a>.</p>
    </div>
    <p class="normal">Now that you’ve set up basic routing for your app, we can move on to setting up lazily loaded modules with<a id="_idIndexMarker390"/> subcomponents. If you’re unfamiliar with troubleshooting and debugging Angular, please refer to <a href="https://angular.dev/tools/devtools"><span class="url">https://angular.dev/tools/devtools</span></a> before moving forward.</p>
    <h1 id="_idParaDest-145" class="heading-1">Feature modules with lazy loading</h1>
    <p class="normal">There are two ways resources are loaded: eagerly or lazily. When the browser loads up <code class="inlineCode">index.html</code> for your app, it starts processing it from top to bottom. First, the <code class="inlineCode">&lt;head&gt;</code> element is processed, then <code class="inlineCode">&lt;body&gt;</code>. For example, the CSS resources we defined in <code class="inlineCode">&lt;head&gt;</code> of our app will be downloaded <a id="_idIndexMarker391"/>before our app is rendered because our Angular app is defined as <code class="inlineCode">&lt;script&gt;</code> in <code class="inlineCode">&lt;body&gt;</code> of the HTML file.</p>
    <p class="normal">When you use the <code class="inlineCode">ng build</code> command, Angular leverages the webpack module bundler to combine all the JavaScript, HTML, and CSS into minified and optimized JavaScript bundles.</p>
    <p class="normal">If you don’t leverage lazy loading in Angular, the entire contents of your app will be eagerly loaded. The user won’t see the first screen of your app until all screens are downloaded and loaded.</p>
    <p class="normal">Lazy loading allows the Angular build process, working in tandem with webpack, to separate your web application into different <a id="_idIndexMarker392"/>JavaScript files called chunks. We can enable this chunking by separating out portions of the application into feature modules. Feature modules and their dependencies can be bundled into separate chunks. Remember that the root module and its dependencies will always be in the first downloaded chunk. So, by chunking our application’s JavaScript bundle size, we keep the size of the initial chunk at a minimum. With a minimal first chunk, no matter how big your application grows, the time to First Meaningful Paint remains constant. Otherwise, your app would take longer and longer to download and render as you add more features and functionality to it. Lazy loading is critical to achieving a scalable application architecture.</p>
    <p class="normal">Consider the following graphic to determine which routes are eagerly loaded and which ones are lazily loaded:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_08.png" alt="A diagram of a system  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 4.8: Angular router eager vs lazy loading</p>
    <p class="normal">The black triangles are standalone components, and the black circles are components that depend on a module. <code class="inlineCode">rootRouter</code> defines three routes: <code class="inlineCode">a</code>, <code class="inlineCode">b</code>, and <code class="inlineCode">c</code>. <code class="inlineCode">/master</code> and <code class="inlineCode">/detail</code> represent named<a id="_idIndexMarker393"/> router outlets, which are covered in <em class="chapterRef">Chapter 9</em>, <em class="italic">Recipes – Master/Detail, Data Tables, and NgRx</em>. Route <code class="inlineCode">a</code> is the default route for the app. Routes <code class="inlineCode">a</code> and <code class="inlineCode">c</code> are connected to <code class="inlineCode">rootRouter</code> with a solid line, whereas route <code class="inlineCode">b</code> is connected using a dashed line. In this context, route <code class="inlineCode">b</code> is configured as a lazy-loaded route. This means route <code class="inlineCode">b</code> will dynamically load a feature module, <code class="inlineCode">BModule</code>, containing <code class="inlineCode">childRouter</code>. <code class="inlineCode">childRouter</code> can define any number of components, even reusing route names that were reused elsewhere. In this case, <code class="inlineCode">b</code> defines two additional routes: <code class="inlineCode">/b/a</code> and <code class="inlineCode">/b/b</code>.</p>
    <p class="normal">Consider the example router definition for <code class="inlineCode">rootRouter</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">rootRouter example</strong></span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: <span class="hljs-string">'</span><span class="hljs-string">/a'</span>, <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'full'</span> },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'a'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title">AComponent</span>,
    <span class="hljs-attr">children</span>: [
      { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">MasterComponent</span>, <span class="hljs-attr">outlet</span>: <span class="hljs-string">'master'</span> },
      { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">DetailComponent</span>, <span class="hljs-attr">outlet</span>: <span class="hljs-string">'detail'</span> },
    ],
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'b'</span>,
    <span class="hljs-attr">loadChildren</span>: 
      <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./b/b.module'</span>)
        .<span class="hljs-title">then</span>(<span class="hljs-function">(</span><span class="hljs-variable">module</span><span class="hljs-function">) =&gt;</span> <span class="hljs-variable">module</span>.<span class="hljs-property">BModule</span>), 
    <span class="hljs-attr">canLoad</span>: [<span class="hljs-title">AuthGuard</span>],
  },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'c'</span>, <span class="hljs-attr">loadChildren</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./c/routes'</span>).<span class="hljs-title">then</span>(<span class="hljs-params">mod</span><span class="hljs-function"> =&gt;</span> mod.<span class="hljs-property">C_ROUTES</span>)},},
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'**'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">PageNotFoundComponent</span> },
]
</code></pre>
    <p class="normal">Note that the definitions for routes <code class="inlineCode">/b/a</code>, <code class="inlineCode">/b/b</code>, <code class="inlineCode">/c/a</code>, and <code class="inlineCode">/c/b</code> do not exist in <code class="inlineCode">rootRouter</code>. See the example<a id="_idIndexMarker394"/> router definition for <code class="inlineCode">childRouter</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">/b childRouter example</strong></span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: <span class="hljs-string">'/b/a'</span>, <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'full'</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'a'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">BAComponent</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'b'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">BBComponent</span> },
]
<span class="code-highlight"><strong class="hljs-slc">/c route config example</strong></span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: <span class="hljs-string">'/c/a'</span>, <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'full'</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'a'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">CAComponent</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'b'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">CBComponent</span> },
]
</code></pre>
    <p class="normal">As you can see, the routes defined in <code class="inlineCode">childRouter</code> are independent of the ones defined in <code class="inlineCode">rootRouter</code>. Child routes exist in a hierarchy, where <code class="inlineCode">/b</code> is the parent path. To navigate to <code class="inlineCode">BAComponent</code>, you must use the path <code class="inlineCode">/b/a</code>, and to navigate to <code class="inlineCode">CAComponent</code>, you use <code class="inlineCode">/c/a</code>.</p>
    <p class="normal">Given this example configuration, every component defined in <code class="inlineCode">rootRouter</code> and their dependencies would be in the first chunk of our app and thus eagerly loaded. The first chunk would include the components <code class="inlineCode">A</code>, <code class="inlineCode">Master</code>, <code class="inlineCode">Detail</code>, and <code class="inlineCode">PageNotFound</code>. The second chunk would contain the components <code class="inlineCode">BA</code> and <code class="inlineCode">BB</code>. This second chunk would not be downloaded or loaded until the user<a id="_idIndexMarker395"/> navigated to a path starting with <code class="inlineCode">/b</code>; thus, it’s lazily loaded. In a standalone configuration, this chunking can be granular at the component level.</p>
    <div class="packt_tip">
      <p class="normal">I cover lazy loading standalone components in <em class="chapterRef">Chapter 8</em>, <em class="italic">Recipes – Reusability, Forms, and Caching</em>, when we add shared components used across different modules.</p>
      <p class="normal">You can read about it more in detail at <a href="https://angular.io/guide/standalone-components#lazy-loading-a-standalone-component"><span class="url">https://angular.io/guide/standalone-components#lazy-loading-a-standalone-component</span></a>.</p>
    </div>
    <p class="normal">We will now go over how to set up a feature module with components and routes. We will also use Angular DevTools to observe the effects of our various router configurations.</p>
    <h2 id="_idParaDest-146" class="heading-2">Configuring feature modules with components and routes</h2>
    <p class="normal">The manager module needs<a id="_idIndexMarker396"/> a landing page, as shown in this mock-up:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_09.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.9: Manager’s dashboard</p>
    <p class="normal">Let’s start by creating the<a id="_idIndexMarker397"/> home screen for <code class="inlineCode">ManagerModule</code>:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create the <code class="inlineCode">ManagerHome</code> component:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng g c manager/managerHome manager -s -t
</code></pre>
     
    <div class="packt_tip">
      <p class="normal">To create the new component under the <code class="inlineCode">manager</code> folder, we must prefix <code class="inlineCode">manager/</code>before the component name. Since this is another landing page, it is unlikely to be complicated enough to require separate HTML and CSS files. You can use <code class="inlineCode">--inline-style</code> (alias <code class="inlineCode">-s</code>) and/or <code class="inlineCode">--inline-template</code> (alias <code class="inlineCode">-t</code>) to avoid creating additional files.</p>
    </div> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Verify that your folder structure looks as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">/src</strong></span>
<span class="code-highlight"><strong class="hljs-slc">├───app</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ ├───manager</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │ │ manager-routing.module.ts</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │ │ manager.module.ts</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │ │</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │ └───manager-home</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │ │ │ manager-home.component.spec.ts</strong></span>
<span class="code-highlight"><strong class="hljs-slc">│ │ │ │ manager-home.component.ts</strong></span>
</code></pre>
      </li>
      <li class="numberedList">Configure the <code class="inlineCode">ManagerHome</code> component’s route in <code class="inlineCode">manager-routing.module.ts</code>, similar to how we configured the <code class="inlineCode">Home</code> <code class="inlineCode">component</code> in <code class="inlineCode">app.route.ts</code>:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager-routing.</strong><strong class="hljs-property-slc">module</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title">ManagerHomeComponent</span> 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'./manager-home/manager-home.component'</span> 
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [ 
  { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: 'home', <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'</span><span class="hljs-string">full'</span> }, 
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ManagerHomeComponent</span> }, 
] 
</code></pre>
      </li>
    </ol>
    <p class="normal">Note that <code class="inlineCode">http://localhost:4200/manager</code> doesn’t resolve to a component yet, because our Angular app isn’t aware that <code class="inlineCode">ManagerModule</code> exists. Eager-loading modules in a standalone project simply don’t make sense; we will only consider the lazy loading of a feature module.</p>
    <p class="normal">Next, let’s implement lazy loading for <code class="inlineCode">ManagerModule</code>, so Angular can navigate to it.</p>
    <h2 id="_idParaDest-147" class="heading-2">Lazy loading</h2>
    <p class="normal">Lazy loading code may<a id="_idIndexMarker398"/> seem like black magic (aka misunderstood) code. To load routes <a id="_idIndexMarker399"/>from a different module, we know we can’t simply import them; otherwise, they will be eagerly loaded. The <a id="_idIndexMarker400"/>answer lies in configuring a route using the <code class="inlineCode">loadChildren</code> attribute with an inline <code class="inlineCode">import</code> statement informing the router how to load a feature module in <code class="inlineCode">app.routes.ts</code>:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">In <code class="inlineCode">app.routes.ts</code>, implement or update the <code class="inlineCode">'manager'</code> path with the <code class="inlineCode">loadChildren</code> attribute:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">routes</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">HomeComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./home/home.component'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">PageNotFoundComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./page-not-found/page-not-found.component'</span>
 
  <span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [ 
    ... 
    { 
      <span class="hljs-attr">path</span>: <span class="hljs-string">'manager'</span>, 
      <span class="hljs-attr">loadChildren</span>: 
        <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./manager/manager.module'</span>)
          . <span class="hljs-title">then</span>(<span class="hljs-params">m</span><span class="hljs-function">=&gt;</span> m.<span class="hljs-property">ManagerModule</span>), 
    },
    ... 
  ] 
... 
</code></pre>
     
    <p class="normal">Lazy loading is achieved via a clever trick that avoids using an <code class="inlineCode">import</code> statement at the file level. A function delegate is set to the <code class="inlineCode">loadChildren</code> property, which contains<a id="_idIndexMarker401"/> an inline <code class="inlineCode">import</code> statement defining the location of the feature module file, such as <code class="inlineCode">./manager/manager.module</code>, allowing us to refer to <code class="inlineCode">ManagerModule</code> in a type-safe manner without fully loading it. The inline <code class="inlineCode">import</code> statement can <a id="_idIndexMarker402"/>be interpreted during the build process to create a separate JavaScript chunk that can be downloaded only when needed. <code class="inlineCode">ManagerModule</code> is self-sufficient as a feature module; it manages all its child dependencies and routes.</p> </li>
    </ol>


    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Update the <code class="inlineCode">manager-routing.module.ts</code> routes, considering that <code class="inlineCode">manager</code> is now their root route:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager-routing.module.ts</strong></span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'full'</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ManagerHomeComponent</span> },
]
</code></pre>
     
    <p class="normal">We can now update the route for <code class="inlineCode">ManagerHomeComponent</code> to a more meaningful <code class="inlineCode">'home'</code> path. This path won’t clash with the one found in <code class="inlineCode">app.routes.ts</code> because, in this context, <code class="inlineCode">'home'</code> resolves to <code class="inlineCode">'manager/home'</code> and, similarly, where <code class="inlineCode">path</code> is empty, the URL will look like <code class="inlineCode">http://localhost:4200/manager</code>.</p> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Restart your <code class="inlineCode">ng serve</code> or <code class="inlineCode">npm start</code> command, so Angular can chunk the app properly.</li>
      <li class="numberedList">Navigate to <code class="inlineCode">http://localhost:4200/manager</code>.</li>
      <li class="numberedList">Confirm that lazy loading is working by observing the CLI output contains a new <strong class="screenText">Lazy Chunk Files</strong> section:
        <pre class="programlisting con"><code class="hljs-con">Lazy Chunk Files            | Names          |  Raw Size |
src_app_manager_module_ts.js| manager-module | 358.75 kB |
</code></pre>
      </li>
    </ol>
    <p class="normal">We have successfully set up a <a id="_idIndexMarker403"/>feature module with lazy loading. Next, let’s implement the walking skeleton for<a id="_idIndexMarker404"/> LemonMart.</p>
    <h1 id="_idParaDest-148" class="heading-1">Creating the walking skeleton</h1>
    <p class="normal">Using the site map<a id="_idIndexMarker405"/> we created for LemonMart earlier in the chapter, we need to create the walking skeleton navigation experience for the app. To create this experience, we must create some buttons to link all modules and components together. We will go at this module by module.</p>
    <p class="normal">Before we start, update the <code class="inlineCode">Login</code> button on <code class="inlineCode">HomeComponent</code> to navigate to the <code class="inlineCode">'manager'</code> path using the <code class="inlineCode">routerLink</code> attribute and rename the button:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/home/home.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
  ...
  &lt;button mat-raised-button color=<span class="hljs-string">"primary"</span> routerLink=<span class="hljs-string">"/manager"</span>&gt;
    <span class="hljs-title">Login</span> <span class="hljs-keyword">as</span> <span class="hljs-title">Manager</span>
  &lt;/button&gt;
  ...
</code></pre>
    <p class="normal">Now, we can navigate to the <code class="inlineCode">ManagerHome</code> component by clicking on the <strong class="screenText">Login</strong> button.</p>
    <h2 id="_idParaDest-149" class="heading-2">The manager module</h2>
    <p class="normal">Since we already<a id="_idIndexMarker406"/> enabled lazy loading for <code class="inlineCode">ManagerModule</code>, let’s go ahead and complete the rest of the navigational elements for it.</p>
    <p class="normal">In the current setup, <code class="inlineCode">ManagerHomeComponent</code> renders in <code class="inlineCode">&lt;router-outlet&gt;</code> defined in <code class="inlineCode">AppComponent</code>'s template, so when the<a id="_idIndexMarker407"/> user navigates from <code class="inlineCode">HomeComponent</code> to <code class="inlineCode">ManagerHomeComponent</code>, the toolbar implemented in <code class="inlineCode">AppComponent</code> remains in place. See the following mock-up for <strong class="screenText">Manager’s Dashboard</strong>:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_10.png" alt="A close-up of a login form  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 4.10: App-wide and feature module toolbars</p>
    <p class="normal">The app-wide toolbar remains in place no matter where we navigate to. Imagine that we can implement a similar<a id="_idIndexMarker408"/> toolbar for the feature module that persists throughout <code class="inlineCode">ManagerModule</code>. So, the navigational <strong class="screenText">User Management</strong> and <strong class="screenText">Receipt Look-up</strong> buttons would always be visible. This allows us to create a consistent UX for navigating subpages across modules.</p>
    <p class="normal">To implement a secondary toolbar, we need to replicate the parent-child relationship between <code class="inlineCode">AppComponent</code> and <code class="inlineCode">HomeComponent</code>, where the parent implements the toolbar and <code class="inlineCode">&lt;router-outlet&gt;</code> so that <a id="_idIndexMarker409"/>child elements can be rendered in there:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Start by creating the base <code class="inlineCode">manager</code> component:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng g c manager/manager --flat -s -t
</code></pre>
      
    <div class="packt_tip">
      <p class="normal">The <code class="inlineCode">--flat</code> option skips directory creation and places the component directly under the <code class="inlineCode">manager</code> folder, just like <code class="inlineCode">AppComponent</code> residing directly under the <code class="inlineCode">app</code> folder.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">In <code class="inlineCode">ManagerComponent</code>, implement a navigational toolbar with <code class="inlineCode">activeLink</code> tracking:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-attr">styles</span>: <span class="hljs-string">`</span>
<span class="hljs-string">  div[fxLayout] {</span>
<span class="hljs-string">    margin-top: 32px;</span>
<span class="hljs-string">  }</span>
<span class="hljs-string">  .active-link {</span>
<span class="hljs-string">    font-weight: bold;</span>
<span class="hljs-string">    border-bottom: 2px solid #005005;</span>
<span class="hljs-string">  }</span>
<span class="hljs-string">`</span>,
<span class="hljs-attr">  template: `</span>
<span class="hljs-string">    &lt;mat-toolbar color="accent" fxLayoutGap="8px"&gt;</span>
<span class="hljs-string">      </span><span class="hljs-string">&lt;a mat-button routerLink="home" routerLinkActive="active-link"&gt;</span>
<span class="hljs-string">        Manager's Dashboard</span>
<span class="hljs-string">      &lt;/a&gt;</span>
<span class="hljs-string">      </span><span class="hljs-string">&lt;a mat-button routerLink="users" routerLinkActive="active-link"&gt;</span>
<span class="hljs-string">        User Management</span>
<span class="hljs-string">      &lt;/a&gt;</span>
<span class="hljs-string">      </span><span class="hljs-string">&lt;a mat-button routerLink="receipts"</span>
<span class="hljs-string">        routerLinkActive="active- link"&gt;</span>
<span class="hljs-string">        Receipt Lookup</span>
<span class="hljs-string">      &lt;/a&gt;</span>
<span class="hljs-string">    &lt;/mat-toolbar&gt;</span>
<span class="hljs-string">    &lt;router-outlet&gt;&lt;/router-outlet&gt; </span>
<span class="hljs-string">  `,</span>
</code></pre>
     
    <div class="note">
      <p class="normal">In a standalone project, every new component is created as a standalone component. This means that every component must import its own dependencies. Don’t forget<a id="_idIndexMarker410"/> to granularly import every feature used in the template.</p>
    </div> </li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">Create <a id="_idIndexMarker411"/>components for the subpages:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng g c manager/userManagement
<span class="hljs-con-meta">$</span> npx ng g c manager/receiptLookup
</code></pre>
      </li>
      <li class="numberedList">Create the parent-children routing. We know that we need the following routes to be able to navigate to our subpages, as follows:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">example</strong></span>
{ <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'full'</span> },
{ <span class="hljs-attr">path</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ManagerHomeComponent</span> },
{ <span class="hljs-attr">path</span>: <span class="hljs-string">'users'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">UserManagementComponent</span> },
{ <span class="hljs-attr">path</span>: <span class="hljs-string">'receipts'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ReceiptLookupComponent</span> },
</code></pre>
      </li>
    </ol>
    <p class="normal">To target <code class="inlineCode">&lt;router-outlet&gt;</code> defined in <code class="inlineCode">ManagerComponent</code>, we<a id="_idIndexMarker412"/> need to create a parent route first and then specify <a id="_idIndexMarker413"/>routes for the subpages:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager-routing.</strong><strong class="hljs-property-slc">module</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
<span class="hljs-keyword">import</span> { <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">RouterModule</span>, <span class="hljs-title">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">ManagerHomeComponent</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'./manager-home/manager-home.component'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">ManagerComponent</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'./manager.component'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">ReceiptLookupComponent</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'./receipt-lookup/receipt-lookup.component'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">UserManagementComponent</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'./user-management/user-management.component'</span> 
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, 
    <span class="hljs-attr">component</span>: <span class="hljs-title">ManagerComponent</span>, 
    <span class="hljs-attr">children</span>: [
      { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">redirectTo</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">pathMatch</span>: <span class="hljs-string">'full'</span> },
      { <span class="hljs-attr">path</span>: <span class="hljs-string">'home'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ManagerHomeComponent</span> },
      { <span class="hljs-attr">path</span>: <span class="hljs-string">'users'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">UserManagementComponent</span> },
      { <span class="hljs-attr">path</span>: <span class="hljs-string">'receipts'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ReceiptLookupComponent</span> },
    ],
  },
]
</code></pre>
    <p class="normal">You should now be able to navigate through the app. When you click on the <strong class="screenText">Login as Manager</strong> button, you will be taken to the page shown here. The clickable targets are highlighted:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_11.png" alt="A screenshot of a computer  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 4.11: Manager’s Dashboard with all router links highlighted</p>
    <p class="normal">If you click on <strong class="screenText">LemonMart</strong>, you<a id="_idIndexMarker414"/> will be taken to the home page. If you click on <strong class="screenText">Manager’s Dashboard</strong>, <strong class="screenText">User Management</strong>, or <strong class="screenText">Receipt Lookup</strong>, you will be navigated to<a id="_idIndexMarker415"/> the corresponding subpage, while the active link will be bold and underlined on the toolbar.</p>
    <h2 id="_idParaDest-150" class="heading-2">User module</h2>
    <p class="normal">Upon login, users can access their <a id="_idIndexMarker416"/>profiles and view a list of actions they can access in the LemonMart app<a id="_idIndexMarker417"/> through a side navigation menu. In <em class="chapterRef">Chapter 6</em>, <em class="italic">Implementing Role-Based Navigation</em>, when we implement authentication and authorization, we will be receiving the role of the user from the server. Based on the user’s role, we can automatically navigate or limit the options users can see. We will implement these components in this module so that they will only be loaded once a user is logged in. To complete the walking skeleton, we will ignore authentication-related concerns:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create the necessary components:
        <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$</span> npx ng g c user/profile
<span class="hljs-con-meta">$</span> npx ng g c user/logout -t -s
<span class="hljs-con-meta">$</span> npx ng g c user/navigationMenu -t -s
</code></pre>
      </li>
      <li class="numberedList">Implement routing.
    <p class="normal">Start with implementing the lazy loading in <code class="inlineCode">app.routes.ts</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">routes</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
... 
{ 
  <span class="hljs-attr">path</span>: <span class="hljs-string">'user'</span>, 
  <span class="hljs-attr">loadChildren</span>: 
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./user/user.module'</span>)
      .<span class="hljs-title">then</span>(<span class="hljs-params">m</span><span class="hljs-function"> =&gt;</span> m.<span class="hljs-property">UserModule</span>), 
},  
</code></pre>
    <div class="packt_tip">
      <p class="normal">As explained earlier, ensure that the <code class="inlineCode">PageNotFoundComponent</code> route is always the last route in <code class="inlineCode">app.routes.ts</code> – because it has a wildcard matcher, it will overwrite routes defined after it.</p>
    </div>
    <p class="normal">Now<a id="_idIndexMarker418"/> implement the <a id="_idIndexMarker419"/>child routes in <code class="inlineCode">user-routing.module.ts</code>:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/user/user-routing.</strong><strong class="hljs-property-slc">module</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
<span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>: <span class="hljs-title">Routes</span> = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'profile'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">ProfileComponent</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'logout'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title">LogoutComponent</span> },
]
</code></pre>
    <div class="note">
      <p class="normal">We are implementing routing for <code class="inlineCode">NavigationMenuComponent</code> because it’ll be directly used as an HTML element. In addition, since <code class="inlineCode">UserModule</code> doesn’t have a landing page, there’s no default path defined.</p>
    </div>
</li>
    </ol>


    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="3">In <code class="inlineCode">AppComponent</code>, wire up the <code class="inlineCode">user</code> and <code class="inlineCode">logout</code> icons:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
... 
&lt;mat-toolbar&gt; 
  ... 
  &lt;button 
    <span class="code-highlight"><strong class="hljs-slc">mat-mini-fab routerLink=</strong><strong class="hljs-string-slc">"/user/profile"</strong><strong class="hljs-slc"> </strong></span>
    <span class="code-highlight"><strong class="hljs-slc">matTooltip=</strong><strong class="hljs-string-slc">"Profile"</strong><strong class="hljs-slc"> aria-label=</strong><strong class="hljs-string-slc">"User Profile"</strong></span>
  &gt; 
    <span class="hljs-tag">&lt;</span><span class="hljs-name">mat-icon</span><span class="hljs-tag">&gt;</span>account_circle<span class="hljs-tag">&lt;/</span><span class="hljs-name">mat-icon</span><span class="hljs-tag">&gt;</span> 
  &lt;/button&gt;
  &lt;button
     <span class="code-highlight"><strong class="hljs-slc">mat-mini-fab routerLink=</strong><strong class="hljs-string-slc">"/user/logout" </strong></span>
     <span class="code-highlight"><strong class="hljs-slc">matTooltip=</strong><strong class="hljs-string-slc">"Logout" </strong><strong class="hljs-slc">aria-label=</strong><strong class="hljs-string-slc">"Logout"</strong></span>
<span class="hljs-string">  </span>&gt;<span class="hljs-string"> </span>
    &lt;mat-icon&gt;lock_open&lt;/mat-icon&gt; 
  &lt;/button&gt; 
&lt;/mat-toolbar&gt;<span class="hljs-string"> </span>
</code></pre>
      
    <div class="note">
      <p class="normal">Icon buttons can be cryptic, so it’s a good idea to add tooltips. For tooltips to work, switch from the <code class="inlineCode">mat-icon-button</code> directive to the <code class="inlineCode">mat-mini-fab</code> directive and ensure you import <code class="inlineCode">MatTooltipModule</code> as required. In addition, ensure that you add <code class="inlineCode">aria-label</code> for icon-only buttons so that users with disabilities relying on screen readers can still navigate your web application.</p>
    </div></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="4">Ensure that the app works.
    <p class="normal">You’ll note that<a id="_idIndexMarker420"/> the two buttons are too close to each other, as <a id="_idIndexMarker421"/>follows:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_12.png" alt="A green and white flag  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 4.12: Toolbar with icons</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="5">You can fix the icon layout issue by adding <code class="inlineCode">fxLayoutGap="8px"</code> to <code class="inlineCode">&lt;mat-toolbar&gt;</code>; however, now the lemon logo is too far apart from the app name, as shown:
    <figure class="mediaobject"><img src="../Images/B20960_04_13.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 4.13: Toolbar with padded icons</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="6">The logo layout issue can be fixed by merging the icon and the button:
        <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
&lt;mat-toolbar&gt;
  ...
  &lt;a mat-icon-button routerLink=<span class="hljs-string">"/home"</span>&gt;
    <span class="hljs-tag">&lt;</span><span class="hljs-name">mat-icon</span><span class="hljs-tag"> </span><span class="hljs-attr">svgIcon</span><span class="hljs-tag">=</span><span class="hljs-string">"lemon"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">mat-icon</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-title">LemonMart</span>
  &lt;/a&gt;
  ...
&lt;/mat-toolbar&gt;
</code></pre>
      
    <p class="normal">As shown in the following <a id="_idIndexMarker422"/>screenshot, the grouping fixes the layout issue:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_14.png" alt="" role="presentation"/></figure>
    <p class="packt_figref">Figure 4.14: Toolbar with grouped and padded elements</p></li>
    </ol>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="7">Another alternative is to wrap the text around <code class="inlineCode">&lt;span&gt;</code>; however, in that case, you need to add some padding to maintain the look:
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">span</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"left-pad"</span><span class="hljs-tag"> </span><span class="hljs-attr">data-testid</span><span class="hljs-tag">=</span><span class="hljs-string">"title"</span><span class="hljs-tag">&gt;</span>LemonMart<span class="hljs-tag">&lt;/</span><span class="hljs-name">span</span><span class="hljs-tag">&gt;</span>
</code></pre>
      </li>
    </ol>
    <p class="normal">This is more desirable from a<a id="_idIndexMarker423"/> UX perspective; now, users can return to the home page by clicking on the lemon.</p>
    <h2 id="_idParaDest-151" class="heading-2">POS and inventory modules</h2>
    <p class="normal">Our walking skeleton presumes the role of the manager. To be able to access all the components we are about to <a id="_idIndexMarker424"/>create, we need to enable the manager to be able to <a id="_idIndexMarker425"/>access the POS and inventory modules.</p>
    <p class="normal">Update <code class="inlineCode">ManagerComponent</code> with two new buttons:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/manager/manager.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
&lt;mat-toolbar color=<span class="hljs-string">"accent"</span> <span class="code-highlight"><strong class="hljs-slc">fxLayoutGap=</strong><strong class="hljs-string-slc">"8px"</strong></span>&gt; 
  ... 
  <span class="code-highlight"><strong class="hljs-slc">&lt;span </strong><strong class="hljs-keyword-slc">class</strong><strong class="hljs-slc">=</strong><strong class="hljs-string-slc">"flex-spacer"</strong><strong class="hljs-slc">&gt;&lt;</strong><strong class="hljs-regexp-slc">/span&gt; </strong></span>
  <span class="code-highlight"><strong class="hljs-regexp-slc">&lt;button </strong></span>
    <span class="code-highlight"><strong class="hljs-regexp-slc">mat-mini-fab routerLink="/i</strong><strong class="hljs-slc">nventory</strong><strong class="hljs-string-slc">" </strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">matTooltip="</strong><strong class="hljs-title-slc">Inventory</strong><strong class="hljs-string-slc">" aria-label="</strong><strong class="hljs-title-slc">Inventory</strong><strong class="hljs-string-slc">"</strong></span>
  <span class="code-highlight"><strong class="hljs-string-slc">&gt; </strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;mat-icon&gt;list&lt;/mat-icon&gt; </strong></span>
  <span class="code-highlight"><strong class="hljs-string-slc">&lt;/button&gt; </strong></span>
  <span class="code-highlight"><strong class="hljs-string-slc">&lt;button </strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">mat-mini-fab routerLink="</strong><strong class="hljs-slc">/pos</strong><strong class="hljs-string-slc">" </strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">matTooltip="</strong><strong class="hljs-variable-slc">POS</strong><strong class="hljs-string-slc">" aria-label="</strong><strong class="hljs-variable-slc">POS</strong><strong class="hljs-string-slc">"</strong></span>
  <span class="code-highlight"><strong class="hljs-string-slc">&gt; </strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc">&lt;mat-icon&gt;shopping_cart&lt;/mat-icon&gt; </strong></span>
  <span class="code-highlight"><strong class="hljs-string-slc">&lt;/button&gt; </strong></span>
<span class="hljs-string">&lt;/mat-toolbar&gt; </span>
</code></pre>
    <p class="normal">Note that these router links will navigate us out of the realm of <code class="inlineCode">ManagerModule</code>, so it is normal for the manager-specific secondary toolbar to disappear.</p>
    <p class="normal">Now, it’ll be up to you to implement the last two remaining modules. For the two new modules, I provide high-level<a id="_idIndexMarker426"/> steps and refer you to a previous module<a id="_idIndexMarker427"/> on which you can model the new one. If you get stuck, refer to the <code class="inlineCode">projects/stage7</code> folder on the GitHub project at <a href="https://github.com/duluca/lemon-mart"><span class="url">https://github.com/duluca/lemon-mart</span></a>.</p>
    <h3 id="_idParaDest-152" class="heading-3">PosModule</h3>
    <p class="normal"><code class="inlineCode">PosModule</code> is very similar<a id="_idIndexMarker428"/> to <code class="inlineCode">UserModule</code>, except that <code class="inlineCode">PosModule</code> was a default path. <code class="inlineCode">PosComponent</code> will be<a id="_idIndexMarker429"/> the default component. This has the potential to be a complicated component with some subcomponents, so don’t use inline templates or styles:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create <code class="inlineCode">PosComponent</code>.</li>
      <li class="numberedList">Register <code class="inlineCode">PosComponent</code> as the default path.</li>
      <li class="numberedList">Configure lazy loading for <code class="inlineCode">PosModule</code>.</li>
      <li class="numberedList">Ensure that the app works.</li>
    </ol>
    <p class="normal">Now let’s implement <code class="inlineCode">InventoryModule</code>.</p>
    <h3 id="_idParaDest-153" class="heading-3">InventoryModule</h3>
    <p class="normal"><code class="inlineCode">InventoryModule</code> is very<a id="_idIndexMarker430"/> similar to <code class="inlineCode">ManagerModule</code>, as <a id="_idIndexMarker431"/>shown:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_15.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.15: Inventory Dashboard mock-up</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create a base <code class="inlineCode">Inventory</code> component.</li>
      <li class="numberedList">Register <code class="inlineCode">MaterialModule</code>.</li>
      <li class="numberedList">Create <strong class="keyWord">Inventory Home</strong>, <strong class="keyWord">Stock Entry</strong>, <strong class="keyWord">Products</strong>, and <strong class="keyWord">Categories</strong> components.</li>
      <li class="numberedList">Configure<a id="_idIndexMarker432"/> parent-children<a id="_idIndexMarker433"/> routes in <code class="inlineCode">inventory-routing.module.ts</code>.</li>
      <li class="numberedList">Configure lazy loading for <code class="inlineCode">InventoryModule</code>.</li>
      <li class="numberedList">Implement a secondary <a id="_idIndexMarker434"/>toolbar for internal <code class="inlineCode">InventoryModule</code> navigation in <code class="inlineCode">InventoryComponent</code>.</li>
      <li class="numberedList">Ensure that the app works, as shown:</li>
    </ol>
    <figure class="mediaobject"><img src="../Images/B20960_04_16.png" alt="A screenshot of a computer  Description automatically generated with low confidence"/></figure>
    <p class="packt_figref">Figure 4.16: LemonMart Inventory Dashboard</p>
    <p class="normal">Now that the walking skeleton of the app is completed, it is important to inspect the CLI output to ensure that all expected modules or components are being lazy loaded.</p>
    <p class="normal">Be sure to resolve any testing<a id="_idIndexMarker435"/> errors before moving on. Ensure that <code class="inlineCode">npm test</code> and <code class="inlineCode">npm run e2e</code> execute<a id="_idIndexMarker436"/> without errors.</p>
    <h1 id="_idParaDest-154" class="heading-1">Common testing module</h1>
    <p class="normal">Now that we have a lot of modules to deal with, it becomes tedious to configure the imports and providers for each <code class="inlineCode">spec</code> file<a id="_idIndexMarker437"/> individually. For this purpose, create a common testing module to contain a generic configuration that you can reuse across the board.</p>
    <p class="normal">First, start by creating a new .<code class="inlineCode">ts</code> file:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Create <code class="inlineCode">common/common.testing.ts</code>.</li>
      <li class="numberedList">Populate it with common testing providers, fakes, and modules.</li>
    </ol>
    <p class="normal">I have provided a <code class="inlineCode">commonTestingModules</code> array:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/common/common.</strong><strong class="hljs-property-slc">testing</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">HttpClientTestingModule</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common/http/testing'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">ReactiveFormsModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">NoopAnimationsModule</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser/animations'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title">RouterTestingModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router/testing'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title">MatIconTestingModule</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'</span><span class="hljs-string">@angular/material/icon/testing'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> commonTestingProviders = [
  <span class="hljs-comment">// Intentionally left blank! Used in later chapters.</span>
]
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> commonTestingModules = [
  <span class="hljs-title">ReactiveFormsModule</span>,
  <span class="hljs-title">NoopAnimationsModule</span>,
  <span class="hljs-title">HttpClientTestingModule</span>,
  <span class="hljs-title">RouterTestingModule</span>,
  <span class="hljs-title">MatIconTestingModule</span>,
] <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span>[]
</code></pre>
    <p class="normal">Now let’s see a sample use of this shared configuration file:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">src/app/app.</strong><strong class="hljs-property-slc">component</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">spec</strong><strong class="hljs-slc">.</strong><strong class="hljs-property-slc">ts</strong></span>
...
<span class="hljs-title">describe</span>(<span class="hljs-string">'AppComponent'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title">beforeEach</span>(<span class="hljs-title">waitForAsync</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title">TestBed</span>.<span class="hljs-title">configureTestingModule</span>({
      <span class="hljs-attr">imports</span>: [...commonTestingModules, <span class="hljs-title">AppComponent</span>],
      <span class="hljs-attr">providers</span>: [],
    }).<span class="hljs-title">compileComponents</span>()
  }))
...
</code></pre>
    <div class="note">
      <p class="normal">While <code class="inlineCode">commonTestingModules</code> is convenient, as your application grows, it’ll start slowing down test runs by importing unnecessary modules. Standalone components go a long way to mitigate this issue since they bring their own imports with them. Be mindful not to overload this convenience module.</p>
    </div>
    <div class="packt_tip">
      <p class="normal">Stop! Did you ensure all your unit tests are passing? To ensure your tests are always passing, implement a CI pipeline in CircleCI, as demonstrated in <em class="chapterRef">Chapter 10</em>, <em class="italic">Releasing to Production with CI/CD</em>.</p>
    </div>
    <p class="normal">With your tests up and running, the <a id="_idIndexMarker438"/>walking skeleton for LemonMart is completed. Now, let’s look ahead and start thinking about what kinds of data entities we might be working with.</p>
    <h1 id="_idParaDest-155" class="heading-1">Designing around major data entities</h1>
    <p class="normal">The fourth step in router-first <a id="_idIndexMarker439"/>architecture is achieving a stateless, data-driven design. To achieve this, it helps a lot to organize your APIs around major data components. This will roughly match how you consume data in various components in your Angular application. We<a id="_idIndexMarker440"/> will start off by defining our major data components by creating a rough data <strong class="keyWord">Entity Relationship Diagram</strong> (<strong class="keyWord">ERD</strong>). In <em class="chapterRef">Chapter 5</em>, <em class="italic">Designing Authentication and Authorization</em>, we will review the design and implementation of an API for the user data entity using Swagger.io and Express.js for REST and Apollo for GraphQL.</p>
    <h2 id="_idParaDest-156" class="heading-2">Defining entities</h2>
    <p class="normal">Let’s start by looking at what kind of entities you would like to store and how these entities might relate to one <a id="_idIndexMarker441"/>another.</p>
    <p class="normal">Here’s a sample design for LemonMart, created using <a href="http://draw.io"><span class="url">draw.io</span></a>:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_17.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.17: ERD for LemonMart</p>
    <div class="note">
      <p class="normal">Currently, whether your entities are stored in a SQL or NoSQL database is inconsequential. My suggestion is to stick to what you know, but if you’re starting from scratch, a NoSQL database like MongoDB will offer the most flexibility as your implementation and requirements evolve.</p>
    </div>
    <p class="normal">Generally, you will need CRUD APIs for each entity. Considering these data elements, we can also imagine user interfaces around these CRUD APIs. Let’s do that next.</p>
    <h1 id="_idParaDest-157" class="heading-1">High-level UX design</h1>
    <p class="normal">Mock-ups are important in determining what kind of components and user controls we will need throughout the app. Any user control or <a id="_idIndexMarker442"/>component that will be used across components must be defined at the root level, and others must be scoped with their own modules.</p>
    <p class="normal">Earlier in this chapter, we identified the sub modules and designed landing pages for them to complete the walking skeleton. Now that we have defined the major data components, we can complete mock-ups for the rest of the app. When designing screens at a high level, keep<a id="_idIndexMarker443"/> several things in mind:</p>
    <ul>
      <li class="bulletList">Can a user complete common tasks required for their role with as little navigation as possible?</li>
      <li class="bulletList">Can users readily access all information and functionality of the app through visible elements on the screen?</li>
      <li class="bulletList">Can a user search for the data they need easily?</li>
      <li class="bulletList">Once a user finds a record of interest, can they drill down into detailed records or view related records with ease?</li>
      <li class="bulletList">Is that pop-up alert necessary? You know users won’t read it, right?</li>
    </ul>
    <p class="normal">Remember that there’s no one right way to design any UX, which is why when designing screens, you should always keep modularity and reusability in mind.</p>
    <h2 id="_idParaDest-158" class="heading-2">Creating an artifacts wiki</h2>
    <p class="normal">As mentioned earlier in the chapter, it is important to document every artifact you create. Wikis offer a way to <a id="_idIndexMarker444"/>create living documentation that can be collaboratively updated or edited. While Slack, Teams, email, and whiteboards offer good collaboration opportunities, their ephemeral nature leaves much to be desired.</p>
    <p class="normal">So, as you generate various design artifacts, such as mock-ups or design decisions, take care to post them on a wiki reachable by all team members:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">On GitHub, switch over to the <strong class="screenText">Wiki</strong> tab.</li>
    </ol>
    <p class="normal">You may check out my sample wiki at <a href="https://github.com/duluca/lemon-mart/wiki"><span class="url">https://github.com/duluca/lemon-mart/wiki</span></a>, as shown:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_18.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.18: GitHub.com LemonMart wiki</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">When creating a wiki page, ensure that you cross-link between any other documentation available, such as <strong class="screenText">Readme</strong>.</li>
      <li class="numberedList">Note that GitHub<a id="_idIndexMarker445"/> shows subpages on the wiki under <strong class="screenText">Pages</strong>.</li>
      <li class="numberedList">However, an additional summary is helpful, such as the <strong class="screenText">Design Artifacts</strong> section, since some people may miss the navigational element on the right.</li>
      <li class="numberedList">As you complete mock-ups, post them on the wiki.</li>
    </ol>
    <p class="normal">You can see a summary view of the wiki here:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_19.png" alt="A screenshot of a computer  Description automatically generated with medium confidence"/></figure>
    <p class="packt_figref">Figure 4.19: Summary view of LemonMart mock-ups</p>
    <p class="normal">Now that your artifacts are in a centralized place, it is accessible to all team members. They can add, edit, update, or <a id="_idIndexMarker446"/>groom the content. This way, your wiki becomes useful, living documentation of the information that your team needs, as opposed to a piece of documentation you feel like you’re being forced to create. Raise your hand if you’ve ever found yourself in that situation!</p>
    <p class="normal">Next, integrate your mock-ups into your app, so you can collect early feedback from your stakeholders and test out the flow of your application.</p>
    <h2 id="_idParaDest-159" class="heading-2">Leveraging mock-ups in your app</h2>
    <p class="normal">Place the mock-ups in the <a id="_idIndexMarker447"/>walking skeleton app so that testers can better envision the functionality that is yet to be developed. See an example of this idea in action here:</p>
    <figure class="mediaobject"><img src="../Images/B20960_04_20.png" alt="A screenshot of a computer  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 4.20: Using mock-ups in the UI to verify the flow of the app</p>
    <p class="normal">This will also be helpful when designing and implementing your authentication and authorization workflow. With<a id="_idIndexMarker448"/> the mock-ups completed, we need to implement a backend in <em class="chapterRef">Chapter 5</em>, <em class="italic">Designing Authentication and Authorization</em>, before we can continue the implementation of LemonMart’s authentication and authorization workflow in <em class="italic">Chapter 6</em>, <em class="italic">Implementing Role-Based Navigation</em>.</p>
    <h1 id="_idParaDest-160" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, you mastered effectively using the Angular CLI to create major Angular components and scaffolding. You created the branding of your app, leveraging custom and built-in Material iconography. </p>
    <p class="normal">You learned how to debug complicated router configurations with Angular DevTools. Finally, you began building router-first apps, defining user roles early on, designing with lazy loading in mind, and nailing down a walking-skeleton navigation experience early on. We went over designing around major data entities. We also covered the importance of completing and documenting the high-level UX design of our entire app so that we can properly design a great conditional navigation experience.</p>
    <p class="normal">To recap, to pull off a router-first implementation, you need to do this:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Develop a roadmap and scope.</li>
      <li class="numberedList">Design with lazy loading in mind.</li>
      <li class="numberedList">Implement a walking-skeleton navigation experience.</li>
      <li class="numberedList">Achieve a stateless, data-driven design.</li>
      <li class="numberedList">Enforce a decoupled component architecture.</li>
      <li class="numberedList">Differentiate between user controls and components.</li>
      <li class="numberedList">Maximize code reuse with TypeScript and ES6.</li>
    </ol>
    <p class="normal">In this chapter, you executed steps 1-3; in the following chapters, you will execute steps 4-7. In <em class="chapterRef">Chapter 5</em>, <em class="italic">Designing Authentication and Authorization</em>, you will see a concrete full-stack implementation using the minimal MEAN stack. In <em class="chapterRef">Chapter 6</em>, <em class="italic">Implementing Role-Based Navigation, </em>and <em class="chapterRef">Chapter 7</em>, <em class="italic">Working with REST and GraphQL APIs</em>, we will tap into OOP design and inheritance and abstraction, along with a deep dive into security considerations and designing a conditional navigation experience. <em class="chapterRef">Chapter 8</em>, <em class="italic">Recipes – Reusability, Forms, and Caching</em>, and <em class="chapterRef">Chapter 9</em>, <em class="italic">Recipes – Master/Detail, Data Tables, and NgRx</em>, will tie everything together by sticking to a decoupled component architecture, smartly choosing between creating user controls and components, and maximizing code reuse with various TypeScript, RxJS, and Angular coding techniques.</p>
    <h1 id="_idParaDest-161" class="heading-1">Exercise</h1>
    <p class="normal">So far, we haven’t implemented a lazy loading component. As a challenge, following the documentation at <a href="https://angular.io/guide/standalone-components"><span class="url">https://angular.io/guide/standalone-components</span></a>, update <code class="inlineCode">app.route.ts</code> so that <code class="inlineCode">PageNotFoundComponent</code> is lazy loaded. After you complete your update, verify that the CLI output correctly shows the new chunked file, and also open up the <strong class="screenText">Network</strong> tab in DevTools to watch the chunks being downloaded as you navigate the app.</p>
    <h1 id="_idParaDest-162" class="heading-1">Further reading</h1>
    <ul>
      <li class="bulletList">DevTools overview: <a href="https://angular.io/guide/devtools"><span class="url">https://angular.io/guide/devtools</span></a></li>
      <li class="bulletList">Material Design: <a href="https://m3.material.io"><span class="url">https://m3.material.io</span></a></li>
      <li class="bulletList"><em class="italic">Getting Started with Standalone Components</em>, Google, August 30, 2023: <a href="https://angular.io/guide/standalone-components"><span class="url">https://angular.io/guide/standalone-components</span></a></li>
      <li class="bulletList">Webpack module bundler: <a href="https://webpack.js.org/"><span class="url">https://webpack.js.org/</span></a></li>
    </ul>
    <h1 id="_idParaDest-163" class="heading-1">Questions</h1>
    <p class="normal">Answer the following questions as best as possible to ensure you’ve understood the key concepts from this chapter without googling anything. Do you know if you got all the answers right? Visit <a href="https://angularforenterprise.com/self-assessment"><span class="url">https://angularforenterprise.com/self-assessment</span></a> for more:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">What is the difference between the root module and a feature module?</li>
      <li class="numberedList">What are the benefits of lazy loading?</li>
      <li class="numberedList">How’s a standalone component different from a module?</li>
      <li class="numberedList">Why do we create a walking skeleton of our application?</li>
      <li class="numberedList">What’s the benefit of designing around major data entities?</li>
      <li class="numberedList">Why should we create wikis for our projects? </li>
    </ol>
  
  </div>
</body></html>