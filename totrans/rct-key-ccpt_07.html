<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer127">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     7
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-136">
    <span class="koboSpan" id="kobo.2.1">
     Portals and Refs
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Use direct DOM element access to interact with elements
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.6.1">
       Expose the functions and data of your components to other components
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.7.1">
       Control the position of rendered JSX elements in the DOM
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-137">
    <span class="koboSpan" id="kobo.8.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.9.1">
     React.js is all about building user interfaces, and, in the context of this book, it’s specifically about building web user interfaces.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.10.1">
     Web user interfaces are ultimately all about
    </span>
    <a id="_idIndexMarker287">
    </a>
    <span class="koboSpan" id="kobo.11.1">
     the
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.12.1">
      Document Object Model
     </span>
    </strong>
    <span class="koboSpan" id="kobo.13.1">
     (
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.14.1">
      DOM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.15.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.15.2">
     You can use JavaScript to read or manipulate the DOM.
    </span>
    <span class="koboSpan" id="kobo.15.3">
     This is what allows you to build interactive websites: you can add, remove, or edit DOM elements after a page has been loaded.
    </span>
    <span class="koboSpan" id="kobo.15.4">
     This can be used to add or remove overlay windows or to read values entered into input fields.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.16.1">
     This was discussed in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.17.1">
      Chapter 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.18.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.19.1">
      React – What and Why
     </span>
    </em>
    <span class="koboSpan" id="kobo.20.1">
     , and, as you learned there, React is used to simplify this process.
    </span>
    <span class="koboSpan" id="kobo.20.2">
     Instead of manipulating the DOM or reading values from DOM elements manually, you can use React to describe the desired state.
    </span>
    <span class="koboSpan" id="kobo.20.3">
     React then takes care of the steps needed to achieve this desired state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.21.1">
     However, there are scenarios and use cases wherein, despite using React, you still want to be able to directly reach out to specific DOM elements—for example, to read a value entered by a user into an input field, or if you’re not happy with the position of a newly inserted element in the DOM that was chosen by React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.22.1">
     React provides certain functionalities that help you in exactly these kinds of situations:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.23.1">
      Portals
     </span>
    </strong>
    <span class="koboSpan" id="kobo.24.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.25.1">
      Refs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.26.1">
     .
    </span>
    <span class="koboSpan" id="kobo.26.2">
     Even though directly manipulating the DOM will still not be a great idea, these tools, as you will learn throughout this chapter, can help with reading DOM element values or with changing the DOM structure without working against React.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-138">
    <span class="koboSpan" id="kobo.27.1">
     A World without Refs
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.28.1">
     Consider the following
    </span>
    <a id="_idIndexMarker288">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     example: you have a website that renders an input field, requesting a user’s email address.
    </span>
    <span class="koboSpan" id="kobo.29.2">
     It could look something like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.30.1">
     <img alt="A white box with a rectangle and a purple rectangle  Description automatically generated" src="image/B31339_07_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.31.1">
     Figure 7.1: An example form with an email input field
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.32.1">
     The code for the component that’s responsible for rendering the form and handling the entered email address value might look like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.33.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.34.1">EmailForm</span></span><span class="koboSpan" id="kobo.35.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.36.1">const</span></span><span class="koboSpan" id="kobo.37.1"> [enteredEmail, setEnteredEmail] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.38.1">useState</span></span><span class="koboSpan" id="kobo.39.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.40.1">''</span></span><span class="koboSpan" id="kobo.41.1">);
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.42.1">console</span></span><span class="koboSpan" id="kobo.43.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.44.1">log</span></span><span class="koboSpan" id="kobo.45.1">(enteredEmail);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.46.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.47.1">handleUpdateEmail</span></span><span class="koboSpan" id="kobo.48.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.49.1">event</span></span><span class="koboSpan" id="kobo.50.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.51.1">setEnteredEmail</span></span><span class="koboSpan" id="kobo.52.1">(event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.53.1">target</span></span><span class="koboSpan" id="kobo.54.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.55.1">value</span></span><span class="koboSpan" id="kobo.56.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.57.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.58.1">handleSubmitForm</span></span><span class="koboSpan" id="kobo.59.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.60.1">event</span></span><span class="koboSpan" id="kobo.61.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.62.1">preventDefault</span></span><span class="koboSpan" id="kobo.63.1">();
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.64.1">// could send enteredEmail to a backend server</span></span><span class="koboSpan" id="kobo.65.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.66.1">return</span></span><span class="koboSpan" id="kobo.67.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.68.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.69.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.70.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.71.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.72.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.73.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.74.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.75.1">{handleSubmitForm}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.76.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.77.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.78.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.79.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.80.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.81.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.82.1">email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.83.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.84.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.85.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.86.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.87.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.88.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.89.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.90.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.91.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.92.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.93.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.94.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.95.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.96.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.97.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.98.1">{handleUpdateEmail}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.99.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.100.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.101.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.102.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.103.1">Save</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.104.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.105.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.106.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.107.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.108.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.109.1">&gt;</span></span><span class="koboSpan" id="kobo.110.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.111.1">
     As you can see, this example uses the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.112.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.113.1">
     Hook, combined with the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.114.1">
      change
     </span>
    </code>
    <span class="koboSpan" id="kobo.115.1">
     event, to register keystrokes in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.116.1">
      email
     </span>
    </code>
    <span class="koboSpan" id="kobo.117.1">
     input field and store the entered value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.118.1">
     This code works fine, and there is nothing wrong with having this kind of code in your application.
    </span>
    <span class="koboSpan" id="kobo.118.2">
     But adding the extra event listener and state, as well as adding the function to update the state whenever the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.119.1">
      change
     </span>
    </code>
    <span class="koboSpan" id="kobo.120.1">
     event is triggered, is quite a bit of boilerplate code for one simple task: getting the entered email address.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.121.1">
     The preceding code snippet does nothing else with the email address other than submit it.
    </span>
    <span class="koboSpan" id="kobo.121.2">
     In other words, the only reason for using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.122.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.123.1">
     state in the example is to read the entered value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.124.1">
     Even though the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.125.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.126.1">
     is only required in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.127.1">
      handleSubmitForm()
     </span>
    </code>
    <span class="koboSpan" id="kobo.128.1">
     function, React will re-execute the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.129.1">
      EmailForm
     </span>
    </code>
    <span class="koboSpan" id="kobo.130.1">
     component function for every
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.131.1">
      enteredEmail
     </span>
    </code>
    <span class="koboSpan" id="kobo.132.1">
     state updated, i.e., for
    </span>
    <a id="_idIndexMarker289">
    </a>
    <span class="koboSpan" id="kobo.133.1">
     every keystroke in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.134.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.135.1">
     field.
    </span>
    <span class="koboSpan" id="kobo.135.2">
     This is also not ideal since it leads to lots of unnecessary code execution and hence potential performance issues.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.136.1">
     In scenarios such as this, quite a bit of code (and maybe performance) could be saved if you fell back to some vanilla JavaScript logic:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.137.1">const</span></span><span class="koboSpan" id="kobo.138.1"> emailInputEl = </span><span class="hljs-variable"><span class="koboSpan" id="kobo.139.1">document</span></span><span class="koboSpan" id="kobo.140.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.141.1">getElementById</span></span><span class="koboSpan" id="kobo.142.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.143.1">'email'</span></span><span class="koboSpan" id="kobo.144.1">);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.145.1">const</span></span><span class="koboSpan" id="kobo.146.1"> enteredEmailVal = emailInputEl.</span><span class="hljs-property"><span class="koboSpan" id="kobo.147.1">value</span></span><span class="koboSpan" id="kobo.148.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.149.1">
     These two lines of code (which could be merged into one line theoretically) allow you to get hold of a DOM element and read the currently stored value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.150.1">
     The problem with this kind of code is that it does not use React.
    </span>
    <span class="koboSpan" id="kobo.150.2">
     And if you’re building a React app, you should really stick to React when working with the DOM.
    </span>
    <span class="koboSpan" id="kobo.150.3">
     Don’t start blending your own vanilla JavaScript code
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.151.1">
      that accesses the DOM
     </span>
    </em>
    <span class="koboSpan" id="kobo.152.1">
     into the React code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.153.1">
     This can lead to unintended behaviors or bugs, especially if you start manipulating the DOM.
    </span>
    <span class="koboSpan" id="kobo.153.2">
     It could lead to bugs because React would not be aware of your changes in that case; the actual rendered UI would not be in sync with React’s assumed UI.
    </span>
    <span class="koboSpan" id="kobo.153.3">
     Even if you’re just reading from the DOM, it’s a good habit to not even start merging vanilla JavaScript DOM access methods with your React code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.154.1">
     To still allow you to get hold of DOM elements and read values, as shown above, React gives you a special concept that you can use:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.155.1">
      Refs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.156.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.157.1">
     Ref stands for reference, and it’s a feature that allows you to store references to values—for example, to DOM elements from inside a React component.
    </span>
    <span class="koboSpan" id="kobo.157.2">
     The preceding vanilla JavaScript code would do the same (it also gives you access to a rendered element), but when
    </span>
    <a id="_idIndexMarker290">
    </a>
    <span class="koboSpan" id="kobo.158.1">
     using Refs, you can get access without mixing vanilla JavaScript code into your React code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.159.1">
     Refs can be created using a special React Hook called the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.160.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.161.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.162.1">
     This Hook can be executed to generate a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.163.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.164.1">
     object:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.165.1">import</span></span><span class="koboSpan" id="kobo.166.1"> { useRef } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.167.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.168.1">'react'</span></span><span class="koboSpan" id="kobo.169.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.170.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.171.1">EmailForm</span></span><span class="koboSpan" id="kobo.172.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.173.1">const</span></span><span class="koboSpan" id="kobo.174.1"> emailRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.175.1">useRef</span></span><span class="koboSpan" id="kobo.176.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.177.1">null</span></span><span class="koboSpan" id="kobo.178.1">);
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.179.1">// other code ...</span></span><span class="koboSpan" id="kobo.180.1">
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.181.1">
     This generated Ref object,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.182.1">
      emailRef
     </span>
    </code>
    <span class="koboSpan" id="kobo.183.1">
     in the preceding example, is initially set to null but can then be assigned to any JSX element.
    </span>
    <span class="koboSpan" id="kobo.183.2">
     This assignment is done via a special prop (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.184.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.185.1">
     prop) that is automatically supported by every JSX element:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.186.1">return</span></span><span class="koboSpan" id="kobo.187.1"> (
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.188.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.189.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.190.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.191.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.192.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.193.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.194.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.195.1">{handleSubmitForm}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.196.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.197.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.198.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.199.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.200.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.201.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.202.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.203.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.204.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.205.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.206.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.207.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.208.1">input</span></span>
<span class="hljs-tag">      </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.209.1">ref</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.210.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.211.1">{emailRef}</span></strong></span>
<span class="hljs-tag">      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.212.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.213.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.214.1">"email"</span></span>
<span class="hljs-tag">      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.215.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.216.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.217.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.218.1">email"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.219.1">    /&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.220.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.221.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.222.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.223.1">Save</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.224.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.225.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.226.1">&gt;</span></span>
<span class="language-xml">  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.227.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.228.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.229.1">&gt;</span></span><span class="koboSpan" id="kobo.230.1">
);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.231.1">
     Just like the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.232.1">
      key
     </span>
    </code>
    <span class="koboSpan" id="kobo.233.1">
     prop introduced in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.234.1">
      Chapter 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.235.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.236.1">
      Rendering Lists and Conditional Content
     </span>
    </em>
    <span class="koboSpan" id="kobo.237.1">
     , the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.238.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.239.1">
     prop is provided by React.
    </span>
    <span class="koboSpan" id="kobo.239.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.240.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.241.1">
     prop wants a Ref object, i.e., one that was created via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.242.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.243.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.244.1">
     In this example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.245.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.246.1">
     receives
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.247.1">
      null
     </span>
    </code>
    <span class="koboSpan" id="kobo.248.1">
     as an initial value since it’s technically not yet assigned to the DOM element when the component function executes for the first time.
    </span>
    <span class="koboSpan" id="kobo.248.2">
     It’s only after that initial component render cycle that the connection will be established.
    </span>
    <span class="koboSpan" id="kobo.248.3">
     Therefore, after this first component function execution, the value stored in the Ref will be the underlying DOM object of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.249.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.250.1">
     element in this example.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.251.1">
     With that Ref object created and assigned, you can then use it to get access to the connected JSX element (to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.252.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.253.1">
     element in this example).
    </span>
    <span class="koboSpan" id="kobo.253.2">
     There’s just one important thing to note: to get hold of the connected element, you must access a special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.254.1">
      current
     </span>
    </code>
    <span class="koboSpan" id="kobo.255.1">
     prop on the created Ref object.
    </span>
    <span class="koboSpan" id="kobo.255.2">
     This is required because React stores the value assigned to
    </span>
    <a id="_idIndexMarker291">
    </a>
    <span class="koboSpan" id="kobo.256.1">
     the Ref object in a nested object, accessible via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.257.1">
      current
     </span>
    </code>
    <span class="koboSpan" id="kobo.258.1">
     property, as shown here:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.259.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.260.1">handleSubmitForm</span></span><span class="koboSpan" id="kobo.261.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.262.1">event</span></span><span class="koboSpan" id="kobo.263.1">) {
  event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.264.1">preventDefault</span></span><span class="koboSpan" id="kobo.265.1">();
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.266.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.267.1"> enteredEmail = emailRef.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.268.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.269.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.270.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.271.1">;</span></strong></span> <span class="hljs-comment"><span class="koboSpan" id="kobo.272.1">// .current is mandatory!</span></span>
  <span class="hljs-comment"><span class="koboSpan" id="kobo.273.1">// could send enteredEmail to a backend server</span></span><span class="koboSpan" id="kobo.274.1">
};
</span></code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.275.1">
      emailRef.current
     </span>
    </code>
    <span class="koboSpan" id="kobo.276.1">
     yields the underlying DOM object that was rendered for the connected JSX element.
    </span>
    <span class="koboSpan" id="kobo.276.2">
     In this case, it therefore allows access to the input element DOM object.
    </span>
    <span class="koboSpan" id="kobo.276.3">
     Since that DOM object has a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.277.1">
      value
     </span>
    </code>
    <span class="koboSpan" id="kobo.278.1">
     property, this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.279.1">
      value
     </span>
    </code>
    <span class="koboSpan" id="kobo.280.1">
     property can be accessed without issue.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.281.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.282.1">
      For further information on this topic, see
     </span>
     <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attributes">
      <span class="url">
       <span class="koboSpan" id="kobo.283.1">
        https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attributes
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.284.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.285.1">
     With this kind of code, you can read the value from the DOM element without having to use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.286.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.287.1">
     and an event listener.
    </span>
    <span class="koboSpan" id="kobo.287.2">
     The final component code therefore becomes quite a bit leaner:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.288.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.289.1">EmailForm</span></span><span class="koboSpan" id="kobo.290.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.291.1">const</span></span><span class="koboSpan" id="kobo.292.1"> emailRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.293.1">useRef</span></span><span class="koboSpan" id="kobo.294.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.295.1">null</span></span><span class="koboSpan" id="kobo.296.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.297.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.298.1">handleSubmitForm</span></span><span class="koboSpan" id="kobo.299.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.300.1">event</span></span><span class="koboSpan" id="kobo.301.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.302.1">preventDefault</span></span><span class="koboSpan" id="kobo.303.1">();
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.304.1">const</span></span><span class="koboSpan" id="kobo.305.1"> enteredEmail = emailRef.</span><span class="hljs-property"><span class="koboSpan" id="kobo.306.1">current</span></span><span class="koboSpan" id="kobo.307.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.308.1">value</span></span><span class="koboSpan" id="kobo.309.1">;
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.310.1">// could send enteredEmail to a backend server</span></span><span class="koboSpan" id="kobo.311.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.312.1">return</span></span><span class="koboSpan" id="kobo.313.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.314.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.315.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.316.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.317.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.318.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.319.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.320.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.321.1">{handleSubmitForm}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.322.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.323.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.324.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.325.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.326.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.327.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.328.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.329.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.330.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.331.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.332.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.333.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.334.1">input</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.335.1">ref</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.336.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.337.1">{emailRef}</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.338.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.339.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.340.1">"email"</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.341.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.342.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.343.1">"email"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.344.1">      /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.345.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.346.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.347.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.348.1">Save</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.349.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.350.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.351.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.352.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.353.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.354.1">&gt;</span></span><span class="koboSpan" id="kobo.355.1">
  );
}
</span></code></pre>
   <h1 class="heading-1" id="_idParaDest-139">
    <span class="koboSpan" id="kobo.356.1">
     Refs versus State
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.357.1">
     Since Refs can
    </span>
    <a id="_idIndexMarker292">
    </a>
    <span class="koboSpan" id="kobo.358.1">
     be used to get quick and easy access to DOM elements, the question that might come up is whether you should always use Refs instead of state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.359.1">
     The clear answer to this question is “no.”
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.360.1">
     Refs can be a very good alternative in use cases like the one shown above, when you need read access to an element.
    </span>
    <span class="koboSpan" id="kobo.360.2">
     This is very often the case when dealing with user input.
    </span>
    <span class="koboSpan" id="kobo.360.3">
     In general, Refs can replace state if you’re just accessing some value to read it when some function (a form submit handler function, for example) is executed.
    </span>
    <span class="koboSpan" id="kobo.360.4">
     As soon as you need to change values and those changes must be reflected in the UI (for example, by rendering some conditional content), Refs are out of the game.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.361.1">
     In the example above, if, besides getting the entered value, you’d also like to reset (i.e., clear) the email input after the form was submitted, you should use state again.
    </span>
    <span class="koboSpan" id="kobo.361.2">
     While you could reset the input with the help of a Ref, you should not do that.
    </span>
    <span class="koboSpan" id="kobo.361.3">
     You would start manipulating the DOM, and only React should do that—with its own, internal methods, based on the declarative code you provide to React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.362.1">
     You should avoid resetting the email input like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.363.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.364.1">EmailForm</span></span><span class="koboSpan" id="kobo.365.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.366.1">const</span></span><span class="koboSpan" id="kobo.367.1"> emailRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.368.1">useRef</span></span><span class="koboSpan" id="kobo.369.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.370.1">null</span></span><span class="koboSpan" id="kobo.371.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.372.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.373.1">handleSubmitForm</span></span><span class="koboSpan" id="kobo.374.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.375.1">event</span></span><span class="koboSpan" id="kobo.376.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.377.1">preventDefault</span></span><span class="koboSpan" id="kobo.378.1">();
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.379.1">const</span></span><span class="koboSpan" id="kobo.380.1"> enteredEmail = emailRef.</span><span class="hljs-property"><span class="koboSpan" id="kobo.381.1">current</span></span><span class="koboSpan" id="kobo.382.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.383.1">value</span></span><span class="koboSpan" id="kobo.384.1">;
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.385.1">// could send enteredEmail to a backend server</span></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.386.1">emailRef.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.387.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.388.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.389.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.390.1"> = </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.391.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.392.1">; </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.393.1">// resetting the input value</span></strong></span><span class="koboSpan" id="kobo.394.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.395.1">return</span></span><span class="koboSpan" id="kobo.396.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.397.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.398.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.399.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.400.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.401.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.402.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.403.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.404.1">{handleSubmitForm}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.405.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.406.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.407.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.408.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.409.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.410.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.411.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.412.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.413.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.414.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.415.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.416.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.417.1">input</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.418.1">ref</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.419.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.420.1">{emailRef}</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.421.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.422.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.423.1">"email"</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.424.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.425.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.426.1">"email"</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.427.1">      /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.428.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.429.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.430.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.431.1">Save</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.432.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.433.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.434.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.435.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.436.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.437.1">&gt;</span></span><span class="koboSpan" id="kobo.438.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.439.1">
     Instead, you should
    </span>
    <a id="_idIndexMarker293">
    </a>
    <span class="koboSpan" id="kobo.440.1">
     reset it by using React’s state concept and by following the declarative approach embraced by React:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.441.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.442.1">EmailForm</span></span><span class="koboSpan" id="kobo.443.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.444.1">const</span></span><span class="koboSpan" id="kobo.445.1"> [enteredEmail, setEnteredEmail] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.446.1">useState</span></span><span class="koboSpan" id="kobo.447.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.448.1">''</span></span><span class="koboSpan" id="kobo.449.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.450.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.451.1">handleUpdateEmail</span></span><span class="koboSpan" id="kobo.452.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.453.1">event</span></span><span class="koboSpan" id="kobo.454.1">) {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.455.1">setEnteredEmail</span></span><span class="koboSpan" id="kobo.456.1">(event.</span><span class="hljs-property"><span class="koboSpan" id="kobo.457.1">target</span></span><span class="koboSpan" id="kobo.458.1">.</span><span class="hljs-property"><span class="koboSpan" id="kobo.459.1">value</span></span><span class="koboSpan" id="kobo.460.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.461.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.462.1">handleSubmitForm</span></span><span class="koboSpan" id="kobo.463.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.464.1">event</span></span><span class="koboSpan" id="kobo.465.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.466.1">preventDefault</span></span><span class="koboSpan" id="kobo.467.1">();
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.468.1">// could send enteredEmail to a backend server</span></span>
    <span class="hljs-comment"><span class="koboSpan" id="kobo.469.1">// reset by setting the state + using the value prop below</span></span>
    <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.470.1">setEnteredEmail</span></strong></span><span class="koboSpan" id="kobo.471.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.472.1">''</span></span><span class="koboSpan" id="kobo.473.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.474.1">return</span></span><span class="koboSpan" id="kobo.475.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.476.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.477.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.478.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.479.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.480.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.481.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.482.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.483.1">{handleSubmitForm}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.484.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.485.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.486.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.487.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.488.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.489.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.490.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.491.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.492.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.493.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.494.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.495.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.496.1">input</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.497.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.498.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.499.1">"email"</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.500.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.501.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.502.1">"email"</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.503.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.504.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.505.1">{handleUpdateEmail}</span></span>
<span class="hljs-tag">        </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.506.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.507.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.508.1">{enteredEmail}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.509.1">      /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.510.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.511.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.512.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.513.1">Save</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.514.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.515.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.516.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.517.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.518.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.519.1">&gt;</span></span><span class="koboSpan" id="kobo.520.1">
  );
}
</span></code></pre>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.521.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.522.1">
      As a rule, you should simply try to avoid writing imperative code in React projects.
     </span>
     <span class="koboSpan" id="kobo.522.2">
      Instead, tell React how the final UI should look and let React figure out how to get there.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.523.1">
      Reading values via Refs is an acceptable exception, and manipulating DOM elements (with or without Refs, e.g., by directly selecting DOM nodes via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.524.1">
       document.getElementById()
      </span>
     </code>
     <span class="koboSpan" id="kobo.525.1">
      or similar) should be avoided.
     </span>
     <span class="koboSpan" id="kobo.525.2">
      A rare exception is a scenario such as calling
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.526.1">
       focus()
      </span>
     </code>
     <span class="koboSpan" id="kobo.527.1">
      on an input element DOM object because methods
     </span>
     <a id="_idIndexMarker294">
     </a>
     <span class="koboSpan" id="kobo.528.1">
      like
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.529.1">
       focus()
      </span>
     </code>
     <span class="koboSpan" id="kobo.530.1">
      don’t typically cause any DOM changes that could break the React app.
     </span>
    </p>
   </div>
   <h1 class="heading-1" id="_idParaDest-140">
    <span class="koboSpan" id="kobo.531.1">
     Using Refs for More than DOM Access
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.532.1">
     Accessing DOM
    </span>
    <a id="_idIndexMarker295">
    </a>
    <span class="koboSpan" id="kobo.533.1">
     elements (for reading values) is one
    </span>
    <a id="_idIndexMarker296">
    </a>
    <span class="koboSpan" id="kobo.534.1">
     of the most common use cases for using Refs.
    </span>
    <span class="koboSpan" id="kobo.534.2">
     As shown above, it can help you reduce code in certain situations.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.535.1">
     But Refs are more than just “element connection bridges;” they are objects that can be used to store all kinds of values—not just pointers at DOM objects.
    </span>
    <span class="koboSpan" id="kobo.535.2">
     You can, for example, also store strings or numbers or any other kind of value in a Ref:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.536.1">const</span></span><span class="koboSpan" id="kobo.537.1"> passwordRetries = </span><span class="hljs-title"><span class="koboSpan" id="kobo.538.1">useRef</span></span><span class="koboSpan" id="kobo.539.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.540.1">0</span></span><span class="koboSpan" id="kobo.541.1">);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.542.1">
     You can pass an initial value to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.543.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.544.1">
     (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.545.1">
      0
     </span>
    </code>
    <span class="koboSpan" id="kobo.546.1">
     in this example) and then access or change that value at any point in time inside the component to which the Ref belongs:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.547.1">passwordRetries.</span><span class="hljs-property"><span class="koboSpan" id="kobo.548.1">current</span></span><span class="koboSpan" id="kobo.549.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.550.1">1</span></span><span class="koboSpan" id="kobo.551.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.552.1">
     However, you still have to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.553.1">
      current
     </span>
    </code>
    <span class="koboSpan" id="kobo.554.1">
     property to read and change the stored value, because, as mentioned above, this is where React will store the actual value that belongs to the Ref.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.555.1">
     This can be useful for storing data that should “survive” component re-evaluations.
    </span>
    <span class="koboSpan" id="kobo.555.2">
     As you learned in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.556.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.557.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.558.1">
      Working with Events and State
     </span>
    </em>
    <span class="koboSpan" id="kobo.559.1">
     , React will execute component functions every time the state of a component changes.
    </span>
    <span class="koboSpan" id="kobo.559.2">
     Since the function is executed again, any data stored
    </span>
    <a id="_idIndexMarker297">
    </a>
    <span class="koboSpan" id="kobo.560.1">
     in function-scoped variables
    </span>
    <a id="_idIndexMarker298">
    </a>
    <span class="koboSpan" id="kobo.561.1">
     would be lost.
    </span>
    <span class="koboSpan" id="kobo.561.2">
     Consider the following example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.562.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.563.1">Counters</span></span><span class="koboSpan" id="kobo.564.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.565.1">const</span></span><span class="koboSpan" id="kobo.566.1"> [counter1, setCounter1] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.567.1">useState</span></span><span class="koboSpan" id="kobo.568.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.569.1">0</span></span><span class="koboSpan" id="kobo.570.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.571.1">const</span></span><span class="koboSpan" id="kobo.572.1"> counterRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.573.1">useRef</span></span><span class="koboSpan" id="kobo.574.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.575.1">0</span></span><span class="koboSpan" id="kobo.576.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.577.1">let</span></span><span class="koboSpan" id="kobo.578.1"> counter2 = </span><span class="hljs-number"><span class="koboSpan" id="kobo.579.1">0</span></span><span class="koboSpan" id="kobo.580.1">;
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.581.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.582.1">handleChangeCounters</span></span><span class="koboSpan" id="kobo.583.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.584.1">setCounter1</span></span><span class="koboSpan" id="kobo.585.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.586.1">1</span></span><span class="koboSpan" id="kobo.587.1">);
    counter2 = </span><span class="hljs-number"><span class="koboSpan" id="kobo.588.1">1</span></span><span class="koboSpan" id="kobo.589.1">;
    counterRef.</span><span class="hljs-property"><span class="koboSpan" id="kobo.590.1">current</span></span><span class="koboSpan" id="kobo.591.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.592.1">1</span></span><span class="koboSpan" id="kobo.593.1">;
  };
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.594.1">return</span></span><span class="koboSpan" id="kobo.595.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.596.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.597.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.598.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.599.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.600.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.601.1">{handleChangeCounters}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.602.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.603.1">Change Counters</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.604.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.605.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.606.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.607.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.608.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.609.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.610.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.611.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.612.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.613.1">Counter 1: {counter1}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.614.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.615.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.616.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.617.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.618.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.619.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.620.1">Counter 2: {counter2}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.621.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.622.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.623.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.624.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.625.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.626.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.627.1">Counter 3: {counterRef.current}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.628.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.629.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.630.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.631.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.632.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.633.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.634.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.635.1">
  );
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.636.1">
     In this example, counters 1 and 3 would change to 1 once the button is clicked.
    </span>
    <span class="koboSpan" id="kobo.636.2">
     However, counter 2 would remain zero, even though the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.637.1">
      counter2
     </span>
    </code>
    <span class="koboSpan" id="kobo.638.1">
     variable gets changed to a value of 1 in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.639.1">
      handleChangeCounters
     </span>
    </code>
    <span class="koboSpan" id="kobo.640.1">
     as well:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.641.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_07_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.642.1">
     Figure 7.2: Only two of the three counter values changed
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.643.1">
     In this example, it should be expected that the state value changes and the new value is reflected in the updated user interface.
    </span>
    <span class="koboSpan" id="kobo.643.2">
     That is the whole idea behind state, after all.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.644.1">
     The Ref (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.645.1">
      counterRef
     </span>
    </code>
    <span class="koboSpan" id="kobo.646.1">
     ) also keeps its updated value across component re-evaluations, though.
    </span>
    <span class="koboSpan" id="kobo.646.2">
     That’s the behavior described above: Refs are not reset or cleared when the surrounding component function is executed again.
    </span>
    <span class="koboSpan" id="kobo.646.3">
     The vanilla JavaScript variable (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.647.1">
      counter2
     </span>
    </code>
    <span class="koboSpan" id="kobo.648.1">
     ) does not keep its value.
    </span>
    <span class="koboSpan" id="kobo.648.2">
     Even though it is changed in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.649.1">
      handleChangeCounters
     </span>
    </code>
    <span class="koboSpan" id="kobo.650.1">
     , a new variable is initialized when the component function is executed again; thus the updated value (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.651.1">
      1
     </span>
    </code>
    <span class="koboSpan" id="kobo.652.1">
     ) is lost.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.653.1">
     In this example, it might again look like Refs can replace state, but the example actually shows very well why that is
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.654.1">
      not
     </span>
    </strong>
    <span class="koboSpan" id="kobo.655.1">
     the case.
    </span>
    <span class="koboSpan" id="kobo.655.2">
     Try replacing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.656.1">
      counter1
     </span>
    </code>
    <span class="koboSpan" id="kobo.657.1">
     with another Ref (so that there is
    </span>
    <a id="_idIndexMarker299">
    </a>
    <span class="koboSpan" id="kobo.658.1">
     no
    </span>
    <a id="_idIndexMarker300">
    </a>
    <span class="koboSpan" id="kobo.659.1">
     state value left in the component) and clicking the button:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.660.1">import</span></span><span class="koboSpan" id="kobo.661.1"> { useRef } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.662.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.663.1">'react'</span></span><span class="koboSpan" id="kobo.664.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.665.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.666.1">Counters</span></span><span class="koboSpan" id="kobo.667.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.668.1">const</span></span><span class="koboSpan" id="kobo.669.1"> counterRef1 = </span><span class="hljs-title"><span class="koboSpan" id="kobo.670.1">useRef</span></span><span class="koboSpan" id="kobo.671.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.672.1">0</span></span><span class="koboSpan" id="kobo.673.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.674.1">const</span></span><span class="koboSpan" id="kobo.675.1"> counterRef2 = </span><span class="hljs-title"><span class="koboSpan" id="kobo.676.1">useRef</span></span><span class="koboSpan" id="kobo.677.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.678.1">0</span></span><span class="koboSpan" id="kobo.679.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.680.1">let</span></span><span class="koboSpan" id="kobo.681.1"> counter2 = </span><span class="hljs-number"><span class="koboSpan" id="kobo.682.1">0</span></span><span class="koboSpan" id="kobo.683.1">;
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.684.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.685.1">handleChangeCounters</span></span><span class="koboSpan" id="kobo.686.1">() {
    counterRef1.</span><span class="hljs-property"><span class="koboSpan" id="kobo.687.1">current</span></span><span class="koboSpan" id="kobo.688.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.689.1">1</span></span><span class="koboSpan" id="kobo.690.1">;
    counter2 = </span><span class="hljs-number"><span class="koboSpan" id="kobo.691.1">1</span></span><span class="koboSpan" id="kobo.692.1">;
    counterRef2.</span><span class="hljs-property"><span class="koboSpan" id="kobo.693.1">current</span></span><span class="koboSpan" id="kobo.694.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.695.1">1</span></span><span class="koboSpan" id="kobo.696.1">;
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.697.1">return</span></span><span class="koboSpan" id="kobo.698.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.699.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.700.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.701.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.702.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.703.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.704.1">{handleChangeCounters}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.705.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.706.1">Change Counters</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.707.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.708.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.709.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.710.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.711.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.712.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.713.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.714.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.715.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.716.1">Counter 1: {counterRef1.current}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.717.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.718.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.719.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.720.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.721.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.722.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.723.1">Counter 2: {counter2}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.724.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.725.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.726.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.727.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.728.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.729.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.730.1">Counter 3: {counterRef2.current}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.731.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.732.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.733.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.734.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.735.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.736.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.737.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.738.1">
  }
);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.739.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.740.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.741.1">Counters</span></span><span class="koboSpan" id="kobo.742.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.743.1">
     Nothing will change on the page because, while the button click is registered and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.744.1">
      handleChangeCounters
     </span>
    </code>
    <span class="koboSpan" id="kobo.745.1">
     function is executed, no state change is initiated, and state changes (initiated via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.746.1">
      setXYZ
     </span>
    </code>
    <span class="koboSpan" id="kobo.747.1">
     state updating function calls) are the triggers that cause React to re-evaluate a component.
    </span>
    <span class="koboSpan" id="kobo.747.2">
     Changes to Ref values do
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.748.1">
      not
     </span>
    </strong>
    <span class="koboSpan" id="kobo.749.1">
     do that.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.750.1">
     <img alt="A comparison of numbers and numbers  Description automatically generated with medium confidence" src="image/B31339_07_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.751.1">
     Figure 7.3: The counter values don’t change
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.752.1">
     As you can tell, changing
    </span>
    <a id="_idIndexMarker301">
    </a>
    <span class="koboSpan" id="kobo.753.1">
     Ref values does not trigger component functions to be executed again—state, on the other hand, does.
    </span>
    <span class="koboSpan" id="kobo.753.2">
     However, if a component function runs again (due to a state change), Ref values are kept around and not dropped.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.754.1">
     Therefore, if you have data that should survive component re-evaluations but should not be managed as state (because changes to that data should not cause the component to be re-evaluated when changed), you could use a Ref:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.755.1">const</span></span><span class="koboSpan" id="kobo.756.1"> passwordRetries = </span><span class="hljs-title"><span class="koboSpan" id="kobo.757.1">useRef</span></span><span class="koboSpan" id="kobo.758.1">(</span><span class="hljs-number"><span class="koboSpan" id="kobo.759.1">0</span></span><span class="koboSpan" id="kobo.760.1">);
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.761.1">// later in the component ...</span></span><span class="koboSpan" id="kobo.762.1">
passwordRetries.</span><span class="hljs-property"><span class="koboSpan" id="kobo.763.1">current</span></span><span class="koboSpan" id="kobo.764.1"> = </span><span class="hljs-number"><span class="koboSpan" id="kobo.765.1">1</span></span><span class="koboSpan" id="kobo.766.1">; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.767.1">// changed from 0 to 1</span></span>
<span class="hljs-comment"><span class="koboSpan" id="kobo.768.1">// later ...</span></span>
<span class="hljs-variable"><span class="koboSpan" id="kobo.769.1">console</span></span><span class="koboSpan" id="kobo.770.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.771.1">log</span></span><span class="koboSpan" id="kobo.772.1">(passwordRetries.</span><span class="hljs-property"><span class="koboSpan" id="kobo.773.1">current</span></span><span class="koboSpan" id="kobo.774.1">); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.775.1">// prints 1, even if the component changed</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.776.1">
     This is not a
    </span>
    <a id="_idIndexMarker302">
    </a>
    <span class="koboSpan" id="kobo.777.1">
     feature that’s used frequently, but it
    </span>
    <a id="_idIndexMarker303">
    </a>
    <span class="koboSpan" id="kobo.778.1">
     can be helpful from time to time.
    </span>
    <span class="koboSpan" id="kobo.778.2">
     In all other cases, use normal state values.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-141">
    <span class="koboSpan" id="kobo.779.1">
     Refs in Custom Components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.780.1">
     Refs cannot just be
    </span>
    <a id="_idIndexMarker304">
    </a>
    <span class="koboSpan" id="kobo.781.1">
     used to access DOM elements.
    </span>
    <span class="koboSpan" id="kobo.781.2">
     You can also
    </span>
    <a id="_idIndexMarker305">
    </a>
    <span class="koboSpan" id="kobo.782.1">
     use them to access React components—including your own components.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.783.1">
     This can sometimes be useful.
    </span>
    <span class="koboSpan" id="kobo.783.2">
     Consider this example: you have a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.784.1">
      &lt;Form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.785.1">
     component that contains a nested
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.786.1">
      &lt;Preferences&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.787.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.787.2">
     The latter component is responsible for displaying two checkboxes, asking the user for their newsletter preferences:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.788.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_07_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.789.1">
     Figure 7.4: A newsletter sign-up form that shows two checkboxes to set newsletter preferences
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.790.1">
     The code
    </span>
    <a id="_idIndexMarker306">
    </a>
    <span class="koboSpan" id="kobo.791.1">
     of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.792.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.793.1">
     component
    </span>
    <a id="_idIndexMarker307">
    </a>
    <span class="koboSpan" id="kobo.794.1">
     could look like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.795.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.796.1">Preferences</span></span><span class="koboSpan" id="kobo.797.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.798.1">const</span></span><span class="koboSpan" id="kobo.799.1"> [wantsNewProdInfo, setWantsNewProdInfo] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.800.1">useState</span></span><span class="koboSpan" id="kobo.801.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.802.1">false</span></span><span class="koboSpan" id="kobo.803.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.804.1">const</span></span><span class="koboSpan" id="kobo.805.1"> [wantsProdUpdateInfo, setWantsProdUpdateInfo] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.806.1">useState</span></span><span class="koboSpan" id="kobo.807.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.808.1">false</span></span><span class="koboSpan" id="kobo.809.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.810.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.811.1">handleChangeNewProdPref</span></span><span class="koboSpan" id="kobo.812.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.813.1">setWantsNewProdInfo</span></span><span class="koboSpan" id="kobo.814.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.815.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.816.1">prevPref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.817.1">) =&gt;</span></span><span class="koboSpan" id="kobo.818.1"> !prevPref);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.819.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.820.1">handleChangeUpdateProdPref</span></span><span class="koboSpan" id="kobo.821.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.822.1">setWantsProdUpdateInfo</span></span><span class="koboSpan" id="kobo.823.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.824.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.825.1">prevPref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.826.1">) =&gt;</span></span><span class="koboSpan" id="kobo.827.1"> !prevPref);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.828.1">return</span></span><span class="koboSpan" id="kobo.829.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.830.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.831.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.832.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.833.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.834.1">{classes.preferences}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.835.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.836.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.837.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.838.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.839.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.840.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.841.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.842.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.843.1">"checkbox"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.844.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.845.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.846.1">"pref-new"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.847.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.848.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.849.1">{wantsNewProdInfo}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.850.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.851.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.852.1">{handleChangeNewProdPref}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.853.1">        /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.854.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.855.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.856.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.857.1">New Products</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.858.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.859.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.860.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.861.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.862.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.863.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.864.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.865.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.866.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.867.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.868.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.869.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.870.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.871.1">"checkbox"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.872.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.873.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.874.1">"pref-updates"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.875.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.876.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.877.1">{wantsProdUpdateInfo}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.878.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.879.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.880.1">{handleChangeUpdateProdPref}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.881.1">        /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.882.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.883.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.884.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.885.1">Product Updates</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.886.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.887.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.888.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.889.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.890.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.891.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.892.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.893.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.894.1">&gt;</span></span><span class="koboSpan" id="kobo.895.1">
  );
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.896.1">
     As you can see, it’s a
    </span>
    <a id="_idIndexMarker308">
    </a>
    <span class="koboSpan" id="kobo.897.1">
     basic
    </span>
    <a id="_idIndexMarker309">
    </a>
    <span class="koboSpan" id="kobo.898.1">
     component that essentially outputs the two checkboxes, adds some styling, and keeps track of the selected checkbox via state.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.899.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.900.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.901.1">
     component code could look like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.902.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.903.1">Form</span></span><span class="koboSpan" id="kobo.904.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.905.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.906.1">handleSubmit</span></span><span class="koboSpan" id="kobo.907.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.908.1">event</span></span><span class="koboSpan" id="kobo.909.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.910.1">preventDefault</span></span><span class="koboSpan" id="kobo.911.1">();
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.912.1">return</span></span><span class="koboSpan" id="kobo.913.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.914.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.915.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.916.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.917.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.918.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.919.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.920.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.921.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.922.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.923.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.924.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.925.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.926.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.927.1">{classes.formControl}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.928.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.929.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.930.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.931.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.932.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.933.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.934.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.935.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.936.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.937.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.938.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.939.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.940.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.941.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.942.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.943.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.944.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.945.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.946.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.947.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.948.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.949.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.950.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.951.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.952.1">Preferences</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.953.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.954.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.955.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.956.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.957.1">Submit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.958.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.959.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.960.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.961.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.962.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.963.1">&gt;</span></span><span class="koboSpan" id="kobo.964.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.965.1">
     Now imagine that upon form submission (inside of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.966.1">
      handleSubmit
     </span>
    </code>
    <span class="koboSpan" id="kobo.967.1">
     function), the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.968.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.969.1">
     should be reset (i.e., no checkbox is selected anymore).
    </span>
    <span class="koboSpan" id="kobo.969.2">
     In addition, prior to resetting, the selected values should be read and used in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.970.1">
      handleSubmit
     </span>
    </code>
    <span class="koboSpan" id="kobo.971.1">
     function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.972.1">
     This would be straightforward if the checkboxes were not put into a separate component.
    </span>
    <span class="koboSpan" id="kobo.972.2">
     If the entire code and JSX markup reside in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.973.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.974.1">
     component, state could be used in that component to read and change the values.
    </span>
    <span class="koboSpan" id="kobo.974.2">
     But this is not the case in this example, and rewriting the code just because of this problem sounds like an unnecessary restriction.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.975.1">
     Fortunately, Refs can help in this situation.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.976.1">
     You can expose features (for example, functions or state values) of a component to other components via Refs.
    </span>
    <span class="koboSpan" id="kobo.976.2">
     Refs can essentially be used as a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.977.1">
      communication device
     </span>
    </em>
    <span class="koboSpan" id="kobo.978.1">
     between two components, just as they were used as a
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.979.1">
      communication device
     </span>
    </em>
    <span class="koboSpan" id="kobo.980.1">
     with a DOM element in
    </span>
    <a id="_idIndexMarker310">
    </a>
    <span class="koboSpan" id="kobo.981.1">
     the
    </span>
    <a id="_idIndexMarker311">
    </a>
    <span class="koboSpan" id="kobo.982.1">
     previous sections.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.983.1">
     Conveniently, your custom components can receive a ref as a regular prop:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.984.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.985.1">Preferences</span></span><span class="koboSpan" id="kobo.986.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.987.1">props</span></span><span class="koboSpan" id="kobo.988.1">) { </span><span class="hljs-comment"><span class="koboSpan" id="kobo.989.1">// or function Preferences({ ref }) {}</span></span>
  <span class="hljs-comment"><span class="koboSpan" id="kobo.990.1">// can use props.ref in here</span></span>
  <span class="hljs-comment"><span class="koboSpan" id="kobo.991.1">// component code ...</span></span><span class="koboSpan" id="kobo.992.1">
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.993.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.994.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.995.1">Preferences</span></span><span class="koboSpan" id="kobo.996.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.997.1">
     You could therefore use this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.998.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.999.1">
     component and pass a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1000.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1001.1">
     to it:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1002.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1003.1">Form</span></span><span class="koboSpan" id="kobo.1004.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1005.1">const</span></span><span class="koboSpan" id="kobo.1006.1"> preferencesRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1007.1">useRef</span></span><span class="koboSpan" id="kobo.1008.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1009.1">null</span></span><span class="koboSpan" id="kobo.1010.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1011.1">return</span></span> <span class="hljs-tag"><span class="koboSpan" id="kobo.1012.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1013.1">Preferences</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1014.1">ref</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1015.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1016.1">{preferencesRef}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1017.1"> /&gt;</span></span><span class="koboSpan" id="kobo.1018.1">;
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1019.1">
     It’s important to note that this code only works when using React 19 or higher.
    </span>
    <span class="koboSpan" id="kobo.1019.2">
     When working with an older React version, passing Refs as regular props to components is unfortunately not supported.
    </span>
    <span class="koboSpan" id="kobo.1019.3">
     In such projects, you would have to wrap the component function that should receive a Ref with a special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1020.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1021.1">
     function that’s provided by React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1022.1">
     Therefore, in React projects using React 18 or older, to receive and use Refs, you must wrap the receiving component (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1023.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1024.1">
     , in this example) with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1025.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1026.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1027.1">
     This can be done like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1028.1">const</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1029.1">Preferences</span></span><span class="koboSpan" id="kobo.1030.1"> = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1031.1">forwardRef</span></span><span class="koboSpan" id="kobo.1032.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1033.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1034.1">props, ref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1035.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1036.1"> {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1037.1">// component code ...</span></span><span class="koboSpan" id="kobo.1038.1">
});
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1039.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1040.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1041.1">Preferences</span></span><span class="koboSpan" id="kobo.1042.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1043.1">
     This looks slightly different than all the other components in this book because an arrow function is used instead of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1044.1">
      function
     </span>
    </code>
    <span class="koboSpan" id="kobo.1045.1">
     keyword.
    </span>
    <span class="koboSpan" id="kobo.1045.2">
     You can always use arrow functions instead of “normal functions”, but here it’s helpful to switch as it makes wrapping the function with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1046.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1047.1">
     very easy.
    </span>
    <span class="koboSpan" id="kobo.1047.2">
     Alternatively, you could stick to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1048.1">
      function
     </span>
    </code>
    <span class="koboSpan" id="kobo.1049.1">
     keyword and wrap the function like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1050.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1051.1">Preferences</span></span><span class="koboSpan" id="kobo.1052.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1053.1">props, ref</span></span><span class="koboSpan" id="kobo.1054.1">) {
 </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1055.1">// component code ...</span></span><span class="koboSpan" id="kobo.1056.1">
};
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1057.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1058.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1059.1">forwardRef</span></span><span class="koboSpan" id="kobo.1060.1">(</span><span class="hljs-title"><span class="koboSpan" id="kobo.1061.1">Preferences</span></span><span class="koboSpan" id="kobo.1062.1">);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1063.1">
     It is up to you which
    </span>
    <a id="_idIndexMarker312">
    </a>
    <span class="koboSpan" id="kobo.1064.1">
     syntax
    </span>
    <a id="_idIndexMarker313">
    </a>
    <span class="koboSpan" id="kobo.1065.1">
     you prefer.
    </span>
    <span class="koboSpan" id="kobo.1065.2">
     Both work and both are commonly used in React projects.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1066.1">
     The interesting part about this code is that the component function now receives
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1067.1">
      two
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1068.1">
     parameters instead of one.
    </span>
    <span class="koboSpan" id="kobo.1068.2">
     Besides receiving
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1069.1">
      props
     </span>
    </code>
    <span class="koboSpan" id="kobo.1070.1">
     , which component functions always do, it now also receives a special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1071.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1072.1">
     parameter.
    </span>
    <span class="koboSpan" id="kobo.1072.2">
     And this parameter is only received because the component function is wrapped with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1073.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1074.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1075.1">
     This
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1076.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1077.1">
     parameter will contain any
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1078.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1079.1">
     value set by the component using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1080.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1081.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.1081.2">
     For example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1082.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1083.1">
     component could set a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1084.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1085.1">
     parameter on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1086.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1087.1">
     like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1088.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1089.1">Form</span></span><span class="koboSpan" id="kobo.1090.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1091.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1092.1"> preferencesRef = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1093.1">useRef</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1094.1">({});</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1095.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1096.1">handleSubmit</span></span><span class="koboSpan" id="kobo.1097.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1098.1">event</span></span><span class="koboSpan" id="kobo.1099.1">) {
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1100.1">// other code ...</span></span><span class="koboSpan" id="kobo.1101.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1102.1">return</span></span><span class="koboSpan" id="kobo.1103.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1104.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1105.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1106.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1107.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1108.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1109.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1110.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1111.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1112.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1113.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1114.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1115.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1116.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1117.1">{classes.formControl}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1118.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1119.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1120.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1121.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1122.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1123.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1124.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1125.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1126.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1127.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1128.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1129.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1130.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1131.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1132.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1133.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1134.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1135.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1136.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1137.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1138.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1139.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1140.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1141.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1142.1">Preferences</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1143.1">ref</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1144.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1145.1">{preferencesRef</span></strong></span><span class="hljs-string"><span class="koboSpan" id="kobo.1146.1">}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1147.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1148.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1149.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1150.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1151.1">Submit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1152.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1153.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1154.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1155.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1156.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1157.1">&gt;</span></span><span class="koboSpan" id="kobo.1158.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1159.1">
     Again,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1160.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1161.1">
     is used to create a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1162.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1163.1">
     object (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1164.1">
      preferencesRef
     </span>
    </code>
    <span class="koboSpan" id="kobo.1165.1">
     ), and that object is then passed via the special
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1166.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1167.1">
     prop to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1168.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1169.1">
     component.
    </span>
    <span class="koboSpan" id="kobo.1169.2">
     The created Ref receives a default value of an empty object (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1170.1">
      {}
     </span>
    </code>
    <span class="koboSpan" id="kobo.1171.1">
     ); it’s this object that can then be accessed via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1172.1">
      ref.current
     </span>
    </code>
    <span class="koboSpan" id="kobo.1173.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1173.2">
     In the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1174.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1175.1">
     component, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1176.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1177.1">
     value can either be received and extracted like a regular prop (React &gt;= 19) or must be accessed with the help of React’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1178.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1179.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.1179.2">
     In that case, it’s received via this second
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1180.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1181.1">
     parameter, which exists because of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1182.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1183.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1184.1">
     But what’s the benefit of that?
    </span>
    <span class="koboSpan" id="kobo.1184.2">
     How can this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1185.1">
      preferencesRef
     </span>
    </code>
    <span class="koboSpan" id="kobo.1186.1">
     object now be used inside
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1187.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1188.1">
     to enable cross-component interaction?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1189.1">
     Since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1190.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1191.1">
     is an object that
    </span>
    <a id="_idIndexMarker314">
    </a>
    <span class="koboSpan" id="kobo.1192.1">
     is
    </span>
    <a id="_idIndexMarker315">
    </a>
    <span class="koboSpan" id="kobo.1193.1">
     never replaced, even if the component in which it was created via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1194.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1195.1">
     is re-evaluated (see previous sections above), the receiving component can assign properties and methods to that object and the creating component can then use these methods and properties.
    </span>
    <span class="koboSpan" id="kobo.1195.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1196.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1197.1">
     object is therefore used as a communication vehicle.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1198.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1199.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1200.1">
     component could be changed like this to use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1201.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1202.1">
     object:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1203.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1204.1">Preferences</span></span><span class="koboSpan" id="kobo.1205.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1206.1">props</span></span><span class="koboSpan" id="kobo.1207.1">) { </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1208.1">// wrap with forwardRef() for React &lt; 19</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1209.1">const</span></span><span class="koboSpan" id="kobo.1210.1"> { ref } = props; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1211.1">// Extracting ref prop</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1212.1">const</span></span><span class="koboSpan" id="kobo.1213.1"> [wantsNewProdInfo, setWantsNewProdInfo] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1214.1">useState</span></span><span class="koboSpan" id="kobo.1215.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1216.1">false</span></span><span class="koboSpan" id="kobo.1217.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1218.1">const</span></span><span class="koboSpan" id="kobo.1219.1"> [wantsProdUpdateInfo, setWantsProdUpdateInfo] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1220.1">useState</span></span><span class="koboSpan" id="kobo.1221.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1222.1">false</span></span><span class="koboSpan" id="kobo.1223.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1224.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1225.1">handleChangeNewProdPref</span></span><span class="koboSpan" id="kobo.1226.1"> () {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1227.1">setWantsNewProdInfo</span></span><span class="koboSpan" id="kobo.1228.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1229.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1230.1">prevPref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1231.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1232.1"> !prevPref);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1233.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1234.1">handleChangeUpdateProdPref</span></span><span class="koboSpan" id="kobo.1235.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1236.1">setWantsProdUpdateInfo</span></span><span class="koboSpan" id="kobo.1237.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1238.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1239.1">prevPref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1240.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1241.1"> !prevPref);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1242.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1243.1">reset</span></span><span class="koboSpan" id="kobo.1244.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1245.1">setWantsNewProdInfo</span></span><span class="koboSpan" id="kobo.1246.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1247.1">false</span></span><span class="koboSpan" id="kobo.1248.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1249.1">setWantsProdUpdateInfo</span></span><span class="koboSpan" id="kobo.1250.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1251.1">false</span></span><span class="koboSpan" id="kobo.1252.1">);
  }
  </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1253.1">ref.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1254.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1255.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1256.1">reset</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1257.1"> = reset;</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1258.1">ref.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1259.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1260.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1261.1">selectedPreferences</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1262.1"> = {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1263.1">newProductInfo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1264.1">: wantsNewProdInfo,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1265.1">productUpdateInfo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1266.1">: wantsProdUpdateInfo</span></strong></span><span class="koboSpan" id="kobo.1267.1">,
  };
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1268.1">// also return JSX code (has not changed) ...</span></span><span class="koboSpan" id="kobo.1269.1">
});
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1270.1">
     In
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1271.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1272.1">
     , both the state values and a pointer at a newly added
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1273.1">
      reset
     </span>
    </code>
    <span class="koboSpan" id="kobo.1274.1">
     function are stored in the received
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1275.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1276.1">
     object.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1277.1">
      ref.current
     </span>
    </code>
    <span class="koboSpan" id="kobo.1278.1">
     is used since the object created by React (when using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1279.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1280.1">
     ) always has such a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1281.1">
      current
     </span>
    </code>
    <span class="koboSpan" id="kobo.1282.1">
     property, and that property should be used to store the actual values in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1283.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1284.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1285.1">
     Since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1286.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1287.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1288.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1289.1">
     operate on the same object that’s stored in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1290.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.1291.1">
     object, the properties
    </span>
    <a id="_idIndexMarker316">
    </a>
    <span class="koboSpan" id="kobo.1292.1">
     and
    </span>
    <a id="_idIndexMarker317">
    </a>
    <span class="koboSpan" id="kobo.1293.1">
     methods assigned to the object in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1294.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1295.1">
     can also be used in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1296.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1297.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1298.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1299.1">Form</span></span><span class="koboSpan" id="kobo.1300.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1301.1">const</span></span><span class="koboSpan" id="kobo.1302.1"> preferencesRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1303.1">useRef</span></span><span class="koboSpan" id="kobo.1304.1">({});
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1305.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1306.1">handleSubmit</span></span><span class="koboSpan" id="kobo.1307.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1308.1">event</span></span><span class="koboSpan" id="kobo.1309.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1310.1">preventDefault</span></span><span class="koboSpan" id="kobo.1311.1">();
    </span><span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1312.1">console</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1313.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1314.1">log</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1315.1">(preferencesRef.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1316.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1317.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1318.1">selectedPreferences</span></strong></span><span class="koboSpan" id="kobo.1319.1">); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1320.1">// reading a value</span></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1321.1">preferencesRef.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.1322.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1323.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1324.1">reset</span></strong></span><span class="koboSpan" id="kobo.1325.1">(); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1326.1">// executing a function stored in Preferences</span></span><span class="koboSpan" id="kobo.1327.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1328.1">return</span></span><span class="koboSpan" id="kobo.1329.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1330.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1331.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1332.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1333.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1334.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1335.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1336.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1337.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1338.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1339.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1340.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1341.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1342.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1343.1">{classes.formControl}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1344.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1345.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1346.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1347.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1348.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1349.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1350.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1351.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1352.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1353.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1354.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1355.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1356.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1357.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1358.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1359.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1360.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1361.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1362.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1363.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1364.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1365.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1366.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1367.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1368.1">Preferences</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1369.1">ref</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1370.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1371.1">{preferencesRef}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1372.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1373.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1374.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1375.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1376.1">Submit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1377.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1378.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1379.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1380.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1381.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1382.1">&gt;</span></span><span class="koboSpan" id="kobo.1383.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1384.1">
     By using Refs like this, a parent component (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1385.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1386.1">
     , in this case) is able to interact with some child component (for instance,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1387.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1388.1">
     ) in an imperative way—meaning properties can be accessed and methods called to manipulate the child component (or, to be precise, to
    </span>
    <a id="_idIndexMarker318">
    </a>
    <span class="koboSpan" id="kobo.1389.1">
     trigger
    </span>
    <a id="_idIndexMarker319">
    </a>
    <span class="koboSpan" id="kobo.1390.1">
     some internal functions and behavior inside the child component).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1391.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1392.1">
      React also provides an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1393.1">
       useImperativeHandle()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1394.1">
      Hook that may be used to expose data or functions from custom components.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1395.1">
      Technically, you don’t need to use this Hook, as the above examples prove.
     </span>
     <span class="koboSpan" id="kobo.1395.2">
      You can communicate between components via Refs without any extra Hooks.
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1396.1">
      But you might want to consider using
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1397.1">
       useImperativeHandle()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1398.1">
      since it will handle scenarios like missing
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1399.1">
       ref
      </span>
     </code>
     <span class="koboSpan" id="kobo.1400.1">
      values (i.e., if no
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1401.1">
       ref
      </span>
     </code>
     <span class="koboSpan" id="kobo.1402.1">
      value is provided).
     </span>
     <span class="koboSpan" id="kobo.1402.2">
      You can learn more about the usage of this (arguably niche) Hook in the official documentation:
     </span>
     <a href="https://react.dev/reference/react/useImperativeHandle">
      <span class="url">
       <span class="koboSpan" id="kobo.1403.1">
        https://react.dev/reference/react/useImperativeHandle
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1404.1">
      .
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-142">
    <span class="koboSpan" id="kobo.1405.1">
     Controlled versus Uncontrolled Components
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1406.1">
     Passing Refs to
    </span>
    <a id="_idIndexMarker320">
    </a>
    <span class="koboSpan" id="kobo.1407.1">
     custom
    </span>
    <a id="_idIndexMarker321">
    </a>
    <span class="koboSpan" id="kobo.1408.1">
     components (via props or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1409.1">
      forwardRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1410.1">
     ) is
    </span>
    <a id="_idIndexMarker322">
    </a>
    <span class="koboSpan" id="kobo.1411.1">
     a method that can be used to allow the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1412.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1413.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1414.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1415.1">
     components to work together.
    </span>
    <span class="koboSpan" id="kobo.1415.2">
     But even though it might look like an elegant solution at first, it should typically not be your default solution for this kind of problem.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1416.1">
     Using Refs, as shown in the example above, leads to more imperative code in the end.
    </span>
    <span class="koboSpan" id="kobo.1416.2">
     It’s imperative code because instead of defining the desired user interface state via JSX (which would be declarative), individual step-by-step instructions are added in JavaScript.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1417.1">
     If you revisit
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1418.1">
      Chapter 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1419.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1420.1">
      React – What and Why
     </span>
    </em>
    <span class="koboSpan" id="kobo.1421.1">
     (the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1422.1">
      The Problem with Vanilla JavaScript
     </span>
    </em>
    <span class="koboSpan" id="kobo.1423.1">
     section), you’ll see that code such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1424.1">
      preferencesRef.current.reset()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1425.1">
     (from the example above) looks quite similar to instructions such as
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1426.1">
      buttonElement.addEventListener(…)
     </span>
    </code>
    <span class="koboSpan" id="kobo.1427.1">
     (example from
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1428.1">
      Chapter 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1429.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.1429.2">
     Both examples use imperative code and should be avoided for the reasons mentioned in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1430.1">
      Chapter 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.1431.1">
     (writing step-by-step instructions leads to inefficient micro-management and often unnecessarily complex code).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1432.1">
     Inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1433.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1434.1">
     component, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1435.1">
      reset()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1436.1">
     function of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1437.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1438.1">
     is invoked.
    </span>
    <span class="koboSpan" id="kobo.1438.2">
     Hence, the code describes the desired action that should be performed (instead of the expected outcome).
    </span>
    <span class="koboSpan" id="kobo.1438.3">
     Typically, when working with React you should strive to describe the desired (UI) state instead.
    </span>
    <span class="koboSpan" id="kobo.1438.4">
     Remember, when working with React, that you should write declarative, rather than imperative, code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1439.1">
     When using Refs to read or manipulate data as shown in the previous sections of this chapter, you are building so-called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1440.1">
      uncontrolled components
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1441.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1441.2">
     The components are considered “uncontrolled” because React is not directly controlling the UI state.
    </span>
    <span class="koboSpan" id="kobo.1441.3">
     Instead, values are read from other components or the DOM.
    </span>
    <span class="koboSpan" id="kobo.1441.4">
     It’s therefore the DOM that controls the state (e.g., a state such as the value entered by a user into an input field).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1442.1">
     As a React developer, you should try to minimize the use of uncontrolled components.
    </span>
    <span class="koboSpan" id="kobo.1442.2">
     It’s absolutely fine
    </span>
    <a id="_idIndexMarker323">
    </a>
    <span class="koboSpan" id="kobo.1443.1">
     to use Refs to
    </span>
    <a id="_idIndexMarker324">
    </a>
    <span class="koboSpan" id="kobo.1444.1">
     save
    </span>
    <a id="_idIndexMarker325">
    </a>
    <span class="koboSpan" id="kobo.1445.1">
     some code if you only need to gather some entered values.
    </span>
    <span class="koboSpan" id="kobo.1445.2">
     But as soon as your UI logic becomes more complex (for example, if you also want to clear user input), you should go for
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1446.1">
      controlled components
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1447.1">
     instead.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1448.1">
     Doing so is quite straightforward: a component becomes controlled as soon as React manages the state.
    </span>
    <span class="koboSpan" id="kobo.1448.2">
     In the case of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1449.1">
      EmailForm
     </span>
    </code>
    <span class="koboSpan" id="kobo.1450.1">
     component from the beginning of this chapter, the controlled component approach was shown before Refs were introduced.
    </span>
    <span class="koboSpan" id="kobo.1450.2">
     Using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1451.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1452.1">
     to store the user’s input (and update the state with every keystroke) meant that React was in full control of the entered value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1453.1">
     For the previous example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1454.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1455.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1456.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1457.1">
     components, switching to a controlled component approach could look like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1458.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1459.1">Preferences</span></span><span class="koboSpan" id="kobo.1460.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1461.1">{newProdInfo, prodUpdateInfo, onUpdateInfo}</span></span><span class="koboSpan" id="kobo.1462.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1463.1">return</span></span><span class="koboSpan" id="kobo.1464.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1465.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1466.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1467.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1468.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1469.1">{classes.preferences}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1470.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1471.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1472.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1473.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1474.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1475.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1476.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1477.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1478.1">"checkbox"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1479.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1480.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1481.1">"pref-new"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1482.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1483.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1484.1">{newProdInfo}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1485.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1486.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1487.1">{onUpdateInfo.bind(null,</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1488.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1489.1">pref-new</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1490.1">')}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1491.1">        /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1492.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1493.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1494.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1495.1">New Products</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1496.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1497.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1498.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1499.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1500.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1501.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1502.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1503.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1504.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1505.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1506.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1507.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1508.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1509.1">"checkbox"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1510.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1511.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1512.1">"pref-updates"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1513.1">checked</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1514.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1515.1">{prodUpdateInfo}</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1516.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1517.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1518.1">{onUpdateInfo.bind(null,</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1519.1"> '</span></span><span class="hljs-attr"><span class="koboSpan" id="kobo.1520.1">pref-updates</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1521.1">')}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1522.1">        /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1523.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1524.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1525.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1526.1">Product Updates</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1527.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1528.1">span</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1529.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1530.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1531.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1532.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1533.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1534.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1535.1">&gt;</span></span><span class="koboSpan" id="kobo.1536.1">
  );
};
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1537.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1538.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1539.1">
     component stops managing the checkbox state and instead receives props from its parent component (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1540.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1541.1">
     component).
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1542.1">
      bind()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1543.1">
     is used on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1544.1">
      onUpdateInfo
     </span>
    </code>
    <span class="koboSpan" id="kobo.1545.1">
     prop (which will receive a function as a value) to
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1546.1">
      pre-configure
     </span>
    </em>
    <span class="koboSpan" id="kobo.1547.1">
     the
    </span>
    <a id="_idIndexMarker326">
    </a>
    <span class="koboSpan" id="kobo.1548.1">
     function for
    </span>
    <a id="_idIndexMarker327">
    </a>
    <span class="koboSpan" id="kobo.1549.1">
     future
    </span>
    <a id="_idIndexMarker328">
    </a>
    <span class="koboSpan" id="kobo.1550.1">
     execution.
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1551.1">
      bind()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1552.1">
     is a default JavaScript method that can be called on any JavaScript function to control which arguments will be passed to that function once it’s invoked in the future.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1553.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1554.1">
      You can learn more about this JavaScript feature at
     </span>
     <a href="https://academind.com/tutorials/function-bind-event-execution">
      <span class="url">
       <span class="koboSpan" id="kobo.1555.1">
        https://academind.com/tutorials/function-bind-event-execution
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1556.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1557.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1558.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1559.1">
     component now manages the checkbox states, even though it doesn’t directly contain the checkbox elements.
    </span>
    <span class="koboSpan" id="kobo.1559.2">
     But it now begins to control the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1560.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1561.1">
     component and its internal state, hence turning
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1562.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1563.1">
     into a controlled component instead of an uncontrolled one:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1564.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1565.1">Form</span></span><span class="koboSpan" id="kobo.1566.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1567.1">const</span></span><span class="koboSpan" id="kobo.1568.1"> [wantsNewProdInfo, setWantsNewProdInfo] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1569.1">useState</span></span><span class="koboSpan" id="kobo.1570.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1571.1">false</span></span><span class="koboSpan" id="kobo.1572.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1573.1">const</span></span><span class="koboSpan" id="kobo.1574.1"> [wantsProdUpdateInfo, setWantsProdUpdateInfo] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1575.1">useState</span></span><span class="koboSpan" id="kobo.1576.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1577.1">false</span></span><span class="koboSpan" id="kobo.1578.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1579.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1580.1">handleUpdateProdInfo</span></span><span class="koboSpan" id="kobo.1581.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1582.1">selection</span></span><span class="koboSpan" id="kobo.1583.1">) {
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1584.1">// using one shared update handler function is optional</span></span>
    <span class="hljs-comment"><span class="koboSpan" id="kobo.1585.1">// you could also use two separate functions (passed to Preferences) as props</span></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1586.1">if</span></span><span class="koboSpan" id="kobo.1587.1"> (selection === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1588.1">'pref-new'</span></span><span class="koboSpan" id="kobo.1589.1">) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1590.1">setWantsNewProdInfo</span></span><span class="koboSpan" id="kobo.1591.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1592.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1593.1">prevPref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1594.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1595.1"> !prevPref);
    } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1596.1">else</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1597.1">if</span></span><span class="koboSpan" id="kobo.1598.1"> (selection === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1599.1">'pref-updates'</span></span><span class="koboSpan" id="kobo.1600.1">) {
      </span><span class="hljs-title"><span class="koboSpan" id="kobo.1601.1">setWantsProdUpdateInfo</span></span><span class="koboSpan" id="kobo.1602.1">(</span><span class="hljs-function"><span class="koboSpan" id="kobo.1603.1">(</span></span><span class="hljs-params"><span class="koboSpan" id="kobo.1604.1">prevPref</span></span><span class="hljs-function"><span class="koboSpan" id="kobo.1605.1">) =&gt;</span></span><span class="koboSpan" id="kobo.1606.1"> !prevPref);
    }
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1607.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1608.1">reset</span></span><span class="koboSpan" id="kobo.1609.1">() {
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1610.1">setWantsNewProdInfo</span></span><span class="koboSpan" id="kobo.1611.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1612.1">false</span></span><span class="koboSpan" id="kobo.1613.1">);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.1614.1">setWantsProdUpdateInfo</span></span><span class="koboSpan" id="kobo.1615.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1616.1">false</span></span><span class="koboSpan" id="kobo.1617.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1618.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1619.1">handleSubmit</span></span><span class="koboSpan" id="kobo.1620.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1621.1">event</span></span><span class="koboSpan" id="kobo.1622.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1623.1">preventDefault</span></span><span class="koboSpan" id="kobo.1624.1">();
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1625.1">// state values can be used here</span></span>
    <span class="hljs-title"><span class="koboSpan" id="kobo.1626.1">reset</span></span><span class="koboSpan" id="kobo.1627.1">();
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1628.1">return</span></span><span class="koboSpan" id="kobo.1629.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1630.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1631.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1632.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1633.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1634.1">{classes.form}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1635.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1636.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1637.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1638.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1639.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1640.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1641.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1642.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1643.1">{classes.formControl}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1644.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1645.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1646.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1647.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1648.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1649.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1650.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1651.1">Your email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1652.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1653.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1654.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1655.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1656.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1657.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1658.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1659.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1660.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1661.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1662.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1663.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1664.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1665.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1666.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1667.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1668.1">Preferences</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1669.1">newProdInfo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1670.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1671.1">{wantsNewProdInfo}</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1672.1">prodUpdateInfo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1673.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1674.1">{wantsProdUpdateInfo}</span></span>
<span class="hljs-tag">        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1675.1">onUpdateInfo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1676.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1677.1">{handleUpdateProdInfo}</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1678.1">      /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1679.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1680.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1681.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1682.1">Submit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1683.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1684.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1685.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1686.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1687.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1688.1">&gt;</span></span><span class="koboSpan" id="kobo.1689.1">
  );
}
</span></code></pre>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1690.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1691.1">
     manages the
    </span>
    <a id="_idIndexMarker329">
    </a>
    <span class="koboSpan" id="kobo.1692.1">
     checkbox selection state, including resetting the state via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1693.1">
      reset()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1694.1">
     function, and passes the managed state values (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1695.1">
      wantsNewProdInfo
     </span>
    </code>
    <span class="koboSpan" id="kobo.1696.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1697.1">
      wantsProdUpdateInfo
     </span>
    </code>
    <span class="koboSpan" id="kobo.1698.1">
     ) as well as the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1699.1">
      handleUpdateProdInfo
     </span>
    </code>
    <span class="koboSpan" id="kobo.1700.1">
     function, which updates the state values, to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1701.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1702.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1702.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1703.1">
      Form
     </span>
    </code>
    <span class="koboSpan" id="kobo.1704.1">
     component now controls the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1705.1">
      Preferences
     </span>
    </code>
    <span class="koboSpan" id="kobo.1706.1">
     component.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1707.1">
     If you go through the two code snippets above, you’ll notice that the final code is once again purely declarative.
    </span>
    <span class="koboSpan" id="kobo.1707.2">
     Across all components, state is managed and used to declare the expected user interface.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1708.1">
     It is considered a good practice to go for controlled components in most cases.
    </span>
    <span class="koboSpan" id="kobo.1708.2">
     If you are only extracting
    </span>
    <a id="_idIndexMarker330">
    </a>
    <span class="koboSpan" id="kobo.1709.1">
     some entered
    </span>
    <a id="_idIndexMarker331">
    </a>
    <span class="koboSpan" id="kobo.1710.1">
     user
    </span>
    <a id="_idIndexMarker332">
    </a>
    <span class="koboSpan" id="kobo.1711.1">
     input values, however, then using Refs and creating an uncontrolled component is absolutely fine.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-143">
    <span class="koboSpan" id="kobo.1712.1">
     React and Where Things End up in the DOM
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1713.1">
     Leaving the topic of
    </span>
    <a id="_idIndexMarker333">
    </a>
    <span class="koboSpan" id="kobo.1714.1">
     Refs, there is one other important React feature that can
    </span>
    <a id="_idIndexMarker334">
    </a>
    <span class="koboSpan" id="kobo.1715.1">
     help with influencing (indirect) DOM interaction:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1716.1">
      Portals
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1717.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1718.1">
     When building user interfaces, you sometimes need to display elements and content conditionally.
    </span>
    <span class="koboSpan" id="kobo.1718.2">
     This was already covered in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1719.1">
      Chapter 5
     </span>
    </em>
    <span class="koboSpan" id="kobo.1720.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1721.1">
      Rendering Lists and Conditional Content
     </span>
    </em>
    <span class="koboSpan" id="kobo.1722.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1722.2">
     When rendering conditional content, React will inject that content into the place in the DOM where the overall component (in which the conditional content is defined) is located.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1723.1">
     For example, when showing a conditional error message below an input field, that error message is right below the input in the DOM:
    </span>
   </p>
   <figure class="mediaobject">
    <em class="italic">
     <span class="koboSpan" id="kobo.1724.1">
      <img alt="A screen shot of a computer  Description automatically generated" src="image/B31339_07_05.png"/>
     </span>
    </em>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1725.1">
     Figure 7.5: The error message DOM element sits right below the &lt;input&gt; it belongs to
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1726.1">
     This behavior makes sense.
    </span>
    <span class="koboSpan" id="kobo.1726.2">
     Indeed, it would be pretty irritating if React were to start inserting DOM elements in random places.
    </span>
    <span class="koboSpan" id="kobo.1726.3">
     But in some scenarios, you may prefer a (conditional) DOM element to be inserted in a different place in the DOM—for example, when working with overlay elements such as error dialogs.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1727.1">
     In the
    </span>
    <a id="_idIndexMarker335">
    </a>
    <span class="koboSpan" id="kobo.1728.1">
     preceding
    </span>
    <a id="_idIndexMarker336">
    </a>
    <span class="koboSpan" id="kobo.1729.1">
     example, you could add logic to ensure that an error dialog is presented to the user if the form is submitted with an invalid email address.
    </span>
    <span class="koboSpan" id="kobo.1729.2">
     This could be implemented with logic similar to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1730.1">
      "Invalid email address!"
     </span>
    </code>
    <span class="koboSpan" id="kobo.1731.1">
     error message, and therefore the dialog element would, of course, also be injected dynamically into the DOM:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1732.1">
     <img alt="A screenshot of a computer screen  Description automatically generated" src="image/B31339_07_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1733.1">
     Figure 7.6: The error dialog and its backdrop are injected into the DOM
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1734.1">
     In this screenshot, the error dialog is opened as an overlay above a backdrop element, which is itself added so that it acts as an overlay to the rest of the user interface.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1735.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1736.1">
      The appearance is handled entirely by CSS, and you can take a look at the complete project (including the styling) here:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/examples/05-portals-problem">
      <span class="url">
       <span class="koboSpan" id="kobo.1737.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/examples/05-portals-problem
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1738.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.1739.1">
     This example works and looks fine.
    </span>
    <span class="koboSpan" id="kobo.1739.2">
     However, there is room for improvement.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1740.1">
     Semantically, it doesn’t entirely make sense to have the overlay elements injected somewhere nested into the DOM next to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1741.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1742.1">
     element.
    </span>
    <span class="koboSpan" id="kobo.1742.2">
     It would make more sense for
    </span>
    <a id="_idIndexMarker337">
    </a>
    <span class="koboSpan" id="kobo.1743.1">
     overlay
    </span>
    <a id="_idIndexMarker338">
    </a>
    <span class="koboSpan" id="kobo.1744.1">
     elements to be closer to the root of the DOM (in other words, to be direct child elements of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1745.1">
      &lt;div id="root"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1746.1">
     or even
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1747.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1748.1">
     ), instead of being children of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1749.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1750.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1750.2">
     And it’s not just a semantic problem.
    </span>
    <span class="koboSpan" id="kobo.1750.3">
     If the example app contains other overlay elements, those elements might clash with each other, like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1751.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_07_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1752.1">
     Figure 7.7: The &lt;footer&gt; element at the bottom is visible above the backdrop
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1753.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1754.1">
      &lt;footer&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1755.1">
     element at the bottom (“An example project”) is not hidden or grayed out by the backdrop that belongs to the error dialog.
    </span>
    <span class="koboSpan" id="kobo.1755.2">
     The reason for that is that the footer also has some CSS styling attached that turns it into a de facto overlay (because of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1756.1">
      position: fixed
     </span>
    </code>
    <span class="koboSpan" id="kobo.1757.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1758.1">
      left
     </span>
    </code>
    <span class="koboSpan" id="kobo.1759.1">
     +
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1760.1">
      bottom
     </span>
    </code>
    <span class="koboSpan" id="kobo.1761.1">
     being used in its CSS styles).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1762.1">
     As a solution to this problem, you could tweak some CSS styles and, for example, use the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1763.1">
      z-index
     </span>
    </code>
    <span class="koboSpan" id="kobo.1764.1">
     CSS property to control overlay levels.
    </span>
    <span class="koboSpan" id="kobo.1764.2">
     However, it would be a cleaner solution if the overlay elements (i.e., the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1765.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1766.1">
     backdrop and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1767.1">
      &lt;dialog&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1768.1">
     error elements) were
    </span>
    <a id="_idIndexMarker339">
    </a>
    <span class="koboSpan" id="kobo.1769.1">
     inserted
    </span>
    <a id="_idIndexMarker340">
    </a>
    <span class="koboSpan" id="kobo.1770.1">
     into the DOM in a different place—for example, at the very end of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1771.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1772.1">
     element (but as direct children to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1773.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1774.1">
     ).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1775.1">
     And that’s exactly the kind of problem React
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1776.1">
      Portals
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1777.1">
     help you solve.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-144">
    <span class="koboSpan" id="kobo.1778.1">
     Portals to the Rescue
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1779.1">
     A
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1780.1">
      Portal
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1781.1">
     , in React’s world, is a
    </span>
    <a id="_idIndexMarker341">
    </a>
    <span class="koboSpan" id="kobo.1782.1">
     feature that allows you to instruct React to insert a DOM element in a different place than where it would normally be inserted.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1783.1">
     Considering the example shown above, this portal feature can be used to
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1784.1">
      tell
     </span>
    </em>
    <span class="koboSpan" id="kobo.1785.1">
     React to not insert the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1786.1">
      &lt;dialog&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1787.1">
     error and the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1788.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1789.1">
     backdrop that belongs to the dialog inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1790.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1791.1">
     element, but to instead insert those elements at the end of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1792.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1793.1">
     element.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1794.1">
     To use this portal feature, you first must define a place wherein elements can be inserted (an “injection hook”).
    </span>
    <span class="koboSpan" id="kobo.1794.2">
     This can be done in the HTML file that belongs to the React app (i.e.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1795.1">
      index.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.1796.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.1796.2">
     There, you can add a new element (for example, a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1797.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1798.1">
     element) somewhere in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1799.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1800.1">
     element:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag"><span class="koboSpan" id="kobo.1801.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1802.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1803.1">&gt;</span></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1804.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1805.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1806.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1807.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1808.1">"root"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1809.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1810.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1811.1">&gt;</span></span>
  <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1812.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1813.1">div</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1814.1">id</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1815.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1816.1">"dialogs"</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1817.1">&gt;&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1818.1">div</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1819.1">&gt;</span></strong></span>
  <span class="hljs-tag"><span class="koboSpan" id="kobo.1820.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1821.1">script</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1822.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1823.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1824.1">"module"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1825.1">src</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1826.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1827.1">"/src/main.jsx"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1828.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1829.1">script</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1830.1">&gt;</span></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.1831.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1832.1">body</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1833.1">&gt;</span></span>
</code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1834.1">
     In this case, a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1835.1">
      &lt;div id="dialogs"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1836.1">
     element is added in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1837.1">
      &lt;body&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1838.1">
     section, after the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1839.1">
      &lt;div id="root"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1840.1">
     element to make sure that any components (and their styles) inserted in that element are evaluated last.
    </span>
    <span class="koboSpan" id="kobo.1840.2">
     This will ensure that their styles take a higher priority and overlay elements inserted into
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1841.1">
      &lt;div id="dialogs"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1842.1">
     would not be overlaid by other content coming earlier in the DOM.
    </span>
    <span class="koboSpan" id="kobo.1842.2">
     Adding and using multiple hooks would be possible, but for this example, only one
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1843.1">
      injection point
     </span>
    </em>
    <span class="koboSpan" id="kobo.1844.1">
     is needed.
    </span>
    <span class="koboSpan" id="kobo.1844.2">
     You can also use HTML elements other than
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1845.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1846.1">
     elements.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1847.1">
     With the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1848.1">
      index.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.1849.1">
     file adjusted, React can be instructed to render certain JSX elements (i.e., components) in a specified
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1850.1">
      injection point
     </span>
    </em>
    <span class="koboSpan" id="kobo.1851.1">
     via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1852.1">
      createPortal()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1853.1">
     function of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1854.1">
      react-dom
     </span>
    </code>
    <span class="koboSpan" id="kobo.1855.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1856.1">import</span></span><span class="koboSpan" id="kobo.1857.1"> { createPortal } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1858.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1859.1">'react-dom'</span></span><span class="koboSpan" id="kobo.1860.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1861.1">import</span></span><span class="koboSpan" id="kobo.1862.1"> classes </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1863.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1864.1">'./ErrorDialog.module.css'</span></span><span class="koboSpan" id="kobo.1865.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1866.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1867.1">ErrorDialog</span></span><span class="koboSpan" id="kobo.1868.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1869.1">{ onClose }</span></span><span class="koboSpan" id="kobo.1870.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1871.1">return</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1872.1">createPortal</span></span><span class="koboSpan" id="kobo.1873.1">(
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1874.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1875.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1876.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1877.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1878.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1879.1">{classes.backdrop}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1880.1">&gt;&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1881.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1882.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1883.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1884.1">dialog</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1885.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1886.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1887.1">{classes.dialog}</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1888.1">open</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1889.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1890.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1891.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1892.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1893.1">          This form contains invalid values. </span><span class="koboSpan" id="kobo.1893.2">Please fix those errors before</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1894.1">          submitting the form again!</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1895.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1896.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1897.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1898.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1899.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1900.1">onClick</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1901.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1902.1">{onClose}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1903.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1904.1">Okay</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1905.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1906.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1907.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1908.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1909.1">dialog</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1910.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1911.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1912.1">,
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1913.1">document</span></span><span class="koboSpan" id="kobo.1914.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1915.1">getElementById</span></span><span class="koboSpan" id="kobo.1916.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1917.1">'dialogs'</span></span><span class="koboSpan" id="kobo.1918.1">)
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1919.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1920.1">default</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1921.1">ErrorDialog</span></span><span class="koboSpan" id="kobo.1922.1">;
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1923.1">
     Inside this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1924.1">
      ErrorDialog
     </span>
    </code>
    <span class="koboSpan" id="kobo.1925.1">
     component, which
    </span>
    <a id="_idIndexMarker342">
    </a>
    <span class="koboSpan" id="kobo.1926.1">
     is rendered conditionally by another component (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1927.1">
      EmailForm
     </span>
    </code>
    <span class="koboSpan" id="kobo.1928.1">
     component, the example code for which is available on GitHub), the returned JSX code is wrapped by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1929.1">
      createPortal()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1930.1">
     .
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1931.1">
      createPortal()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1932.1">
     takes two arguments: the JSX code that should be rendered in the DOM and a pointer at the element in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1933.1">
      index.html
     </span>
    </code>
    <span class="koboSpan" id="kobo.1934.1">
     where the content should be injected.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1935.1">
     In this example, the newly added
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1936.1">
      &lt;div id="dialogs"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1937.1">
     is selected via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1938.1">
      document.getElementById('dialogs')
     </span>
    </code>
    <span class="koboSpan" id="kobo.1939.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1939.2">
     Therefore,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1940.1">
      createPortal()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1941.1">
     ensures that the JSX code generated by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1942.1">
      ErrorDialog
     </span>
    </code>
    <span class="koboSpan" id="kobo.1943.1">
     is rendered in that place in the HTML document:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1944.1">
     <img alt="img" src="image/B31339_07_08.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1945.1">
     Figure 7.8: The overlay elements are inserted into &lt;div id=”dialogs”&gt;
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1946.1">
     In this screenshot, you can see that the overlay elements (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1947.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1948.1">
     backdrop and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1949.1">
      &lt;dialog&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1950.1">
     error) are indeed inserted into the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1951.1">
      &lt;div id="dialogs"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1952.1">
     element, instead of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1953.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1954.1">
     element (as they were before).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1955.1">
     As a result of this change,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1956.1">
      &lt;footer&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1957.1">
     no longer overlays the error dialog backdrop without any CSS code changes.
    </span>
    <span class="koboSpan" id="kobo.1957.2">
     Semantically, the final DOM structure also makes more sense since you would typically expect overlay elements to be closer to the root DOM node.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1958.1">
     Still, using this portal
    </span>
    <a id="_idIndexMarker343">
    </a>
    <span class="koboSpan" id="kobo.1959.1">
     feature is optional.
    </span>
    <span class="koboSpan" id="kobo.1959.2">
     The same visual result (though not the DOM structure) could have been achieved by changing some CSS styles.
    </span>
    <span class="koboSpan" id="kobo.1959.3">
     Nonetheless, aiming for a clean DOM structure is a worthwhile pursuit, and avoiding unnecessarily complex CSS code is also not a bad thing.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-145">
    <span class="koboSpan" id="kobo.1960.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1961.1">
      Refs can be used to gain direct access to DOM elements or to store values that won’t be reset or changed when the surrounding component is re-evaluated.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1962.1">
      Only use this direct access to read values, not to manipulate DOM elements (let React do this instead).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1963.1">
      Components that gain DOM access via Refs, instead of state and other React features, are considered uncontrolled components (because React is not in direct control).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1964.1">
      Prefer controlled components (using state and a strictly declarative approach) over uncontrolled components unless you’re performing very simple tasks such as reading an entered input value.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1965.1">
      Using Refs, you can also expose features of your own components so that they may be used imperatively.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1966.1">
      You can set and use a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1967.1">
       ref
      </span>
     </code>
     <span class="koboSpan" id="kobo.1968.1">
      prop on custom components when working with React 19 or higher.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1969.1">
      When using React &lt; 19, React’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1970.1">
       forwardRef()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1971.1">
      function must be used to receive Refs on custom components.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1972.1">
      Portals can be used to instruct React to render JSX elements in a different place in the DOM than they normally would.
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-146">
    <span class="koboSpan" id="kobo.1973.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1974.1">
     At this point in the book, you’ve encountered many key tools and concepts that can be used to build interactive and engaging user interfaces.
    </span>
    <span class="koboSpan" id="kobo.1974.2">
     Thanks to Refs, you can read DOM values without using state (hence avoiding unnecessary component re-evaluations) or manage values that persist across component updates.
    </span>
    <span class="koboSpan" id="kobo.1974.3">
     Thanks to Portals, you’re able to control where exactly component markup is inserted into the DOM.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1975.1">
     As a result, you get some new tools that can be used to fine-tune your React app.
    </span>
    <span class="koboSpan" id="kobo.1975.2">
     You may be able to improve performance (by avoiding component re-evaluations) or improve the structure and semantics of your DOM elements.
    </span>
    <span class="koboSpan" id="kobo.1975.3">
     Ultimately, it’s the combination of all these tools that allows you to build engaging, interactive, and also performant web applications with React.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1976.1">
     But, as you will learn in the next chapter, React has even more helpful core concepts to offer: for example, a way of handling
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1977.1">
      side effects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1978.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1979.1">
     The next chapter will explore what exactly
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1980.1">
      side effects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1981.1">
     are, why they need special handling, and how React helps you with that.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-147">
    <span class="koboSpan" id="kobo.1982.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1983.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.1983.2">
     You can then compare your answers with examples that can be found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/07-portals-refs/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.1984.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/07-portals-refs/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.1985.1">
     .
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1986.1">
      How can Refs help with handling user input in forms?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1987.1">
      What is an uncontrolled component?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1988.1">
      What is a controlled component?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1989.1">
      When should you
     </span>
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1990.1">
       not
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1991.1">
      use Refs?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1992.1">
      What’s the main idea behind portals?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-148">
    <span class="koboSpan" id="kobo.1993.1">
     Apply What You Have Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1994.1">
     With this newly gained knowledge about Refs and Portals, it’s again time to practice what you have learned.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1995.1">
     Below, you’ll find two activities that allow you to practice working with Refs and Portals.
    </span>
    <span class="koboSpan" id="kobo.1995.2">
     As always, you will, of course, also need some of the concepts covered in earlier chapters (e.g., working with state).
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-149">
    <span class="koboSpan" id="kobo.1996.1">
     Activity 7.1: Extract User Input Values
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1997.1">
     In this activity, you have to add logic to an existing React component to extract values from a form.
    </span>
    <span class="koboSpan" id="kobo.1997.2">
     The form contains an input field and a drop-down menu and you should make sure that, upon form submission, both values are read and, for the purpose of this dummy app, output to the browser console.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1998.1">
     Use your knowledge about Refs and uncontrolled components to implement a solution without using React state.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1999.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2000.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-1-start">
      <span class="url">
       <span class="koboSpan" id="kobo.2001.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-1-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2002.1">
      .
     </span>
     <span class="koboSpan" id="kobo.2002.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.2002.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2003.1">
       activities/practice-1-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.2004.1">
      in this case) to use the right code snapshot.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2005.1">
     After downloading the code and running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2006.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.2007.1">
     in the project folder (to install all the required dependencies), the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2008.1">
      Create two Refs, one for each input element that should be read (input field and drop-down menu).
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2009.1">
      Connect the Refs to the input elements.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2010.1">
      In the submit handler function, access the connected DOM elements via the Refs and read the currently entered or selected values.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2011.1">
      Output the values to the browser console.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2012.1">
     <img alt="img" src="image/1.png"/>
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2013.1">
     The expected result (user interface) should look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2014.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_07_09.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2015.1">
     Figure 7.9: The browser developer tools console outputs the selected values
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.2016.1">
      ￼
     </span>
     <strong>
      <span class="koboSpan" id="kobo.2017.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2018.1">
      You will find all code files used for this activity, as well as the solution, at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.2019.1">
        ttps://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2020.1">
      .
     </span>
    </p>
   </div>
   <h2 class="heading-2" id="_idParaDest-150">
    <span class="koboSpan" id="kobo.2021.1">
     Activity 7.2: Add a Side Drawer
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2022.1">
     In this activity, you will connect an already existing
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2023.1">
      SideDrawer
     </span>
    </code>
    <span class="koboSpan" id="kobo.2024.1">
     component with a button in the main navigation bar to open the side drawer (i.e., display it) whenever the button is clicked.
    </span>
    <span class="koboSpan" id="kobo.2024.2">
     After the side drawer opens, a click on the backdrop should close the drawer again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2025.1">
     In addition to implementing the general logic described above, your goal will be to ensure proper positioning in the final DOM so that no other elements are overlaid on top of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2026.1">
      SideDrawer
     </span>
    </code>
    <span class="koboSpan" id="kobo.2027.1">
     (without editing any CSS code).
    </span>
    <span class="koboSpan" id="kobo.2027.2">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2028.1">
      SideDrawer
     </span>
    </code>
    <span class="koboSpan" id="kobo.2029.1">
     should also not be nested in any other components or JSX elements.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2030.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2031.1">
      This activity comes with some starting code, which can be found here:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-2-start">
      <span class="url">
       <span class="koboSpan" id="kobo.2032.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-2-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2033.1">
      .
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2034.1">
     After downloading the code and running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2035.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.2036.1">
     to install all the required dependencies, the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2037.1">
      Add logic to conditionally show or hide the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2038.1">
       SideDrawer
      </span>
     </code>
     <span class="koboSpan" id="kobo.2039.1">
      component in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2040.1">
       MainNavigation
      </span>
     </code>
     <span class="koboSpan" id="kobo.2041.1">
      component.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2042.1">
      Add an
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.2043.1">
       injection hook
      </span>
     </em>
     <span class="koboSpan" id="kobo.2044.1">
      for the side drawer in the HTML document.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2045.1">
      Use React’s portal feature to render the JSX elements of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2046.1">
       SideDrawer
      </span>
     </code>
     <span class="koboSpan" id="kobo.2047.1">
      in the newly added hook.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2048.1">
     The final user interface should look and behave like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2049.1">
     <img alt="img" src="image/B31339_07_10.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2050.1">
     Figure 7.10: A click on the menu button opens the side drawer
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2051.1">
     Upon clicking on the menu button, the side drawer opens.
    </span>
    <span class="koboSpan" id="kobo.2051.2">
     If the backdrop behind the side drawer is clicked, it should close again.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2052.1">
     The final DOM structure (with the side drawer opened) should look like this:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2053.1">
     <img alt="img" src="image/B31339_07_11.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2054.1">
     Figure 7.11: The drawer-related elements are inserted in a separate place in the DOM
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2055.1">
     The side drawer-related DOM elements (the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2056.1">
      &lt;div&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2057.1">
     backdrop and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2058.1">
      &lt;aside&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2059.1">
     ) are inserted into a separate DOM node (
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2060.1">
      &lt;div id="drawer"&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.2061.1">
     ).
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2062.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2063.1">
      You will find all code files used for this activity, as well as the solution, at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-2">
      <span class="url">
       <span class="koboSpan" id="kobo.2064.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/07-portals-refs/activities/practice-2
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2065.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>