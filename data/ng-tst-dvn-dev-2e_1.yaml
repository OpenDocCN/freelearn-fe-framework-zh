- en: Chapter 1. Introduction to Test-Driven Development
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章. 测试驱动开发简介
- en: Angular is at the forefront of client-side JavaScript testing. Every Angular
    tutorial includes an accompanying test, and event test modules are a part of the
    core Angular package. The Angular team is focused on making testing fundamental
    to web development.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Angular在客户端JavaScript测试方面处于前沿。每个Angular教程都包括一个相应的测试，事件测试模块是Angular核心包的一部分。Angular团队专注于使测试成为网络开发的基础。
- en: 'This chapter introduces you to the fundamentals of **test-driven development**
    (**TDD**) with Angular, including the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将向您介绍使用Angular的**测试驱动开发**（**TDD**）的基础，包括以下主题：
- en: An overview of TDD
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TDD概述
- en: 'The TDD life cycle: test first, make it run, and make it better'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TDD生命周期：先测试，然后运行，最后改进
- en: Common testing techniques
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常见测试技术
- en: An overview of TDD
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: TDD概述
- en: TDD is an evolutionary approach to development, where you write a test before
    you write just enough production code to fulfill that test and its refactoring.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: TDD是一种进化式开发方法，在你编写足够的生产代码以满足测试及其重构之前，你先编写一个测试。
- en: This section will explore the fundamentals of TDD. Let's take a tailor as an
    example and see how he would apply TDD to his own process.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将探讨TDD的基础。让我们以裁缝为例，看看他是如何将TDD应用到自己的过程中的。
- en: Fundamentals of TDD
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: TDD基础
- en: Get an idea of what to write in your code before you start writing it. This
    may sound cliched, but this is essentially what TDD gives you. TDD begins by defining
    expectations, then makes you meet the expectations, and finally forces you to
    refine the changes after the expectations are met.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始编写代码之前，先了解一下要写什么。这听起来可能有些陈词滥调，但这正是TDD给你的。TDD从定义期望开始，然后让你满足期望，最后在期望满足后迫使你细化更改。
- en: 'Some of the clear benefits of practicing TDD are as follows:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 实践TDD（测试驱动开发）的一些明显好处如下：
- en: '**No change is small**: Small changes can cause a lot of breaking issues in
    the entire project. Practicing TDD is the only way that can help, as the test
    suite will catch the breaking points and save the project after any change, and
    will thus save lives of developers.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**没有变化是小的**：小的更改可能会在整个项目中引起很多破坏性问题。实践TDD是唯一可以帮助的方法，因为测试套件会捕捉到破坏点，并在任何更改后拯救项目，从而拯救开发者的生命。'
- en: '**Specifically identify the tasks**: A test suite specifically provides a clear
    vision of the tasks and the step-by-step workflow in order to be successful. Setting
    up the tests first allows you to focus on only the components that have been defined
    in the tests.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**具体识别任务**：测试套件专门提供对任务和逐步工作流程的清晰视野，以便成功。首先设置测试可以让你只关注在测试中定义的组件。'
- en: '**Confidence in refactoring**: Refactoring involves moving, fixing, and changing
    a project. Tests protect the core logic from refactoring by ensuring that the
    logic behaves independently of the code structure.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重构的信心**：重构涉及移动、修复和更改项目。测试通过确保逻辑独立于代码结构来保护核心逻辑不受重构的影响。'
- en: '**Upfront investment, benefits in the future**: Initially, it looks like testing
    takes extra time, but it actually pays off later when the project becomes bigger,
    it gives us confidence to extend the features as just running the test will identify
    the breaking issues, if any.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**前期投资，未来收益**：最初，测试看起来会花费额外的时间，但实际上，当项目变得更大时，它会带来回报，因为它让我们有信心扩展功能，因为只需运行测试就能识别出任何破坏性问题。'
- en: '**QA resources might be limited**: In most cases, there are some limitations
    on QA resources as it always takes extra time for everything to be manually checked
    by the QA team, but writing some test cases and running them successfully will
    definitely save some QA time.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**QA资源可能有限**：在大多数情况下，QA资源有一些限制，因为QA团队总是需要额外的时间来手动检查所有内容，但编写一些测试用例并成功运行它们肯定会节省一些QA时间。'
- en: '**Documentation**: Tests define the expectations that a particular object or
    function must meet. An expectation acts as a contract and can be used to see how
    a method should or can be used. This makes the code readable and easier to understand.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文档**：测试定义了特定对象或函数必须满足的期望。期望充当合同，可以用来查看方法应该如何或可以如何使用。这使得代码可读性更强，更容易理解。'
- en: Measuring the success with different eyes
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用不同的眼光衡量成功
- en: TDD is not just a software development practice--its fundamental principles
    are shared by other craftsmen as well. One of these craftsmen is a tailor, whose
    success depends on precise measurements and careful planning.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: TDD不仅仅是一种软件开发实践——其基本原理也与其他工匠共享。其中一位工匠是裁缝，他的成功依赖于精确的测量和周密的计划。
- en: Breaking down the steps
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分解步骤
- en: 'Here are the high-level steps that a tailor performs to make a suit:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是裁缝制作西装的高级别步骤：
- en: '**Testing first**:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**先测试**：'
- en: Determining the measurements for the suit
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定西装的尺寸
- en: Having the customer determine the style and material they want for their suit
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让客户确定他们想要的西装风格和材料
- en: Measuring the customer's arms, shoulders, torso, waist, and legs
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量客户的胳膊、肩膀、躯干、腰部和腿部
- en: '**Making the cuts**:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**裁剪**：'
- en: Selecting the fabric based on the desired style
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据期望的风格选择布料
- en: Measuring the fabric based on the customer's body shape
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据客户的身体形状测量布料
- en: Cutting the fabric based on the measurements
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据测量结果裁剪布料
- en: '**Refactoring**:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**重构**：'
- en: Comparing the cut and look to the customer's desired style
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将裁剪和外观与客户期望的风格进行比较
- en: Making adjustments to meet the desired style
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行调整以达到期望的风格
- en: '**Repeating**:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**重复**：'
- en: '**Test first**: Determining the measurements for the suit'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**先测试**：确定西装的尺寸'
- en: '**Make the cuts**: Measuring the fabric and making the cuts'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**裁剪**：测量布料并进行裁剪'
- en: '**Refactor**: Making changes based on the reviews'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重构**：根据评审进行更改'
- en: The preceding steps are an example of a TDD approach. The measurements must
    be taken before the tailor can start cutting the raw material. For a moment, imagine
    that the tailor didn't use a test-driven approach and didn't use a measuring tape
    (testing tool). It would be ridiculous if the tailor started cutting before measuring.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的步骤是TDD方法的一个例子。在裁缝开始切割原材料之前，必须先进行测量。想象一下，如果裁缝没有使用测试驱动的方法，也没有使用卷尺（测试工具），那么在测量之前就开始切割将是荒谬的。
- en: As a developer, do you "cut before measuring"? Would you trust a tailor without
    a measuring tape? How would you feel about a developer who doesn't test?
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名开发者，你是否“先裁后量”？你会信任没有卷尺的裁缝吗？你会对不进行测试的开发者有何感想？
- en: Measure twice, cut once
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 量两次，裁一次
- en: The tailor always starts with measurements. What would happen if the tailor
    made cuts before measuring? What would happen if the fabric was cut too short?
    How much extra time would go into the tailoring? Thus, measure twice, cut once.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 裁缝总是从测量开始。如果裁缝在测量之前就开始裁剪会发生什么？如果布料裁剪得太短会发生什么？裁剪会花费多少额外的时间？因此，量两次，裁一次。
- en: Software developers can choose from an endless amount of approaches to use before
    starting development. One common approach is to work off a specification. A documented
    approach may help in defining what needs to be built; however, without tangible
    criteria for how to meet a specification, the actual application that gets developed
    may be completely different from the specification. With a TDD approach, every
    stage of the process verifies that the result meets the specification. Think about
    how a tailor continues to use a measuring tape to verify the suit throughout the
    process.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 软件开发者在开始开发之前可以选择无数的方法。一种常见的方法是按照规范工作。记录的方法可能有助于定义需要构建的内容；然而，如果没有满足规范的具体标准，实际开发的应用程序可能与规范完全不同。使用TDD方法，过程的每个阶段都会验证结果是否符合规范。想想裁缝如何在整个过程中继续使用卷尺来验证西装。
- en: TDD embodies a test-first methodology. TDD gives developers the ability to start
    with a clear goal and write code that will directly meet a specification, so you
    can develop like a professional and follow the practices that will help you write
    quality software.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: TDD体现了一种先测试的方法。TDD为开发者提供了从明确目标开始，编写直接满足规范代码的能力，因此你可以像专业人士一样开发，并遵循有助于你编写高质量软件的实践。
- en: Practical TDD with JavaScript
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用JavaScript的实用TDD
- en: Let's dive into practical TDD in the context of JavaScript. This walk through
    will take us through the process of adding the multiplication functionality to
    a calculator.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入探讨JavaScript环境下的实用TDD。这次讲解将带我们通过向计算器添加乘法功能的过程。
- en: 'Just keep the TDD life cycle, as follows, in mind:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 只需记住以下TDD生命周期：
- en: Test first
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 先测试
- en: Make it run
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让它运行
- en: Make it better
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让它变得更好
- en: Point out the development to-do list
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 指出开发待办事项
- en: A development to-do list helps organize and focus on tasks individually. It
    also helps provide a platform to list down ideas during the development process,
    which could be a single feature later on.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 开发待办事项列表有助于组织和专注于单个任务。它还帮助在开发过程中列出想法，这些想法可能最终成为单个功能。
- en: 'Let''s add the first feature in the development to-do list--the add multiplication
    functionality:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在开发待办事项列表中添加第一个功能--添加乘法功能：
- en: '*3 * 3 = 9*'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '*3 * 3 = 9*'
- en: The preceding list describes what needs to be done. It also provides a clear
    example of how to verify the multiplication *3 * 3 = 9.*
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 上述列表描述了需要完成的工作。它还提供了一个如何验证乘法 *3 * 3 = 9* 的清晰示例。
- en: Setting up the test suite
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置测试套件
- en: 'To set up the test, let''s create the initial calculator in a file called `calculator.js`.
    It is initialized as an object as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置测试，让我们在名为 `calculator.js` 的文件中创建初始计算器。它被初始化为一个对象，如下所示：
- en: '[PRE0]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The test will be run through a web browser as a simple HTML page. So for that,
    let's create an HTML page and import `calculator.js` to test it and save the page
    as `testRunner.html`.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 测试将通过一个简单的 HTML 页面作为网页浏览器运行。因此，让我们创建一个 HTML 页面，并将 `calculator.js` 导入以测试它，并将页面保存为
    `testRunner.html`。
- en: To run the test, let's open the `testRunner.html` file in your web browser.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行测试，让我们在您的网页浏览器中打开 `testRunner.html` 文件。
- en: 'The `testRunner.html` file will look like this:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '`testRunner.html` 文件将看起来像这样：'
- en: '[PRE1]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The test suite is ready for the project and the development to-do list for the
    features is ready as well. The next step is to dive into the TDD life cycle based
    on the feature list one by one.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 测试套件已准备好用于项目，并且功能开发待办事项列表也已准备好。下一步是根据功能列表逐个进入 TDD 生命周期。
- en: Test first
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 先测试
- en: Though it's easy to write a multiplication function and it will work as its
    a pretty simple feature, as a part of practicing TDD, it's time to follow the
    TDD life cycle. The first phase of the life cycle is to write a test based on
    the development to-do list.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然编写乘法函数很简单，并且它将作为一个相当简单的功能正常工作，但作为练习 TDD 的一部分，现在是时候遵循 TDD 生命周期。生命周期的第一阶段是根据开发待办事项列表编写测试。
- en: 'Here are the steps for the first test:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是第一次测试的步骤：
- en: Open `calculator.js`.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 `calculator.js`。
- en: 'Create a new function `multipleTest1` to test multiplying *3 * 3, *after that `calculator.js` file
    will look as follows:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的函数 `multipleTest1` 来测试乘法 *3 * 3，之后 `calculator.js` 文件将如下所示：
- en: '[PRE2]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The test calls a `multiply` function, which still needs to be defined. It then
    asserts that the results are as expected by displaying a pass or fail message.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 测试调用一个 `multiply` 函数，该函数仍需要定义。然后它通过显示通过或失败消息来断言结果是否符合预期。
- en: Note
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Keep in mind that in TDD, you are looking at the use of the method and explicitly
    writing how it should be used. This allows you to define the interface based on
    a use case, as opposed to only looking at the limited scope of the function being
    developed.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，在 TDD 中，你正在查看方法的使用，并明确地编写它应该如何使用。这允许你根据用例定义接口，而不是只关注正在开发的功能的有限范围。
- en: The next step in the TDD life cycle is focused on making the test run.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: TDD 生命周期的下一步是专注于使测试运行。
- en: Make the test run
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 让测试运行
- en: In this step, we will run the test, just as the tailor did with the suite. The
    measurements were taken in the test step, and now the application can be molded
    to fit the measurements.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，我们将运行测试，就像裁缝对套件所做的那样。测试步骤中进行了测量，现在应用程序可以塑形以适应这些测量。
- en: 'The following are the steps to run the test:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是要运行测试的步骤：
- en: Open `testRunner.html` on a web browser.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在网页浏览器中打开 `testRunner.html`。
- en: Open the JavaScript developer **Console** window in the browser.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在浏览器中打开 JavaScript 开发者 **控制台** 窗口。
- en: 'The test will throw an error, which will be visible in the browser''s developer
    console, as shown in the following screenshot:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 测试将抛出一个错误，这将在浏览器开发者控制台中可见，如下面的截图所示：
- en: '![Make the test run](img/5405_01_01.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![让测试运行](img/5405_01_01.jpg)'
- en: The error thrown is expected as the calculator application calls a function
    that hasn't been created yet--`calculator.multiply`.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 抛出的错误是预期的，因为计算器应用程序调用了一个尚未创建的函数--`calculator.multiply`。
- en: In TDD, the focus is on adding the easiest change to get a test to pass. There
    is no need to actually implement the multiplication logic. This may seem unintuitive.
    The point is that once a passing test exists, it should always pass. When a method
    contains fairly complex logic, it is easier to run a passing test against it to
    ensure that it meets the expectations.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在TDD中，重点是添加最简单的更改以使测试通过。实际上不需要实现乘法逻辑。这看起来可能不太直观。重点是，一旦存在通过测试，它应该始终通过。当一个方法包含相当复杂的逻辑时，运行通过测试以确保它符合预期更容易。
- en: What is the easiest change that can be made to make the test pass? By returning
    the expected value of `9`, the test should pass. Although this won't add the multiply
    feature, it will confirm the application wiring. In addition, after we have passed
    the test, making future changes will be easy as we have to simply keep the test
    passing!
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 什么是最容易的改变，可以使测试通过？通过返回预期的`9`值，测试应该通过。尽管这不会添加乘法功能，但它将确认应用程序的连接。此外，在通过测试后，未来的更改将变得容易，因为我们只需确保测试通过即可！
- en: 'Now, add the `multiply` function and have it return the required value of `9`,
    as illustrated:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，添加`multiply`函数并使其返回所需的`9`值，如下所示：
- en: '[PRE3]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now, let''s refresh the page to rerun the test and look at the JavaScript console.
    The result should be as shown in the following screenshot:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们刷新页面重新运行测试并查看JavaScript控制台。结果应该如下面的截图所示：
- en: '![Make the test run](img/image_01_002-1.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![使测试运行](img/image_01_002-1.jpg)'
- en: Yes! No more errors. There's a message showing that test has been passed.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 是的！没有更多错误。显示测试已通过的消息。
- en: Now that there is a passing test, the next step will be to remove the hard coded
    value from   the `multiply` function.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 现在通过了测试，下一步将是将`multiply`函数中的硬编码值移除。
- en: Make the project better
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 让项目变得更好
- en: The refactoring step needs to remove the hard coded `return` value from the
    `multiply` function, which we added as the easiest solution to pass the test,
    and add the required logic to get the expected result.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 重构步骤需要从`multiply`函数中移除硬编码的`return`值，这是我们为了通过测试而添加的最简单解决方案，并添加所需的逻辑以获得预期的结果。
- en: 'The required logic is as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 所需的逻辑如下：
- en: '[PRE4]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now, let's refresh the browser to rerun the tests; It will pass the test as
    it did earlier. Excellent! Now the `multiply` function is complete.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们刷新浏览器重新运行测试；它将像之前一样通过测试。太棒了！现在`multiply`函数已经完成。
- en: 'The full code of the `calculator.js` file for the `calculator` object with
    its test will look as follows:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '`calculator.js`文件的完整代码，包括`calculator`对象的测试如下所示：'
- en: '[PRE5]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Mechanism of testing
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试机制
- en: To be a proper TDD-following developer, it is important to understand some fundamental
    mechanisms of testing techniques and approaches to testing. In this section, we
    will walk through a couple of examples of testing techniques and mechanisms that
    will be leveraged in this book.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 要成为一个遵循TDD的开发者，了解一些基本的测试技术和测试方法非常重要。在本节中，我们将通过几个示例介绍本书中将利用的测试技术和机制。
- en: 'This will mostly include the following points:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这将主要包含以下要点：
- en: Testing doubles with **Jasmine** spies
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用**Jasmine**间谍进行测试双
- en: Refactoring the existing tests
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构现有测试
- en: Building patterns
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建模式
- en: 'Here are the additional terms that will be used:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这里将使用以下附加术语：
- en: '**Function under test**: This is the function that is being tested. It is also
    referred to as system under test, object under test, and so on.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**待测试函数**：这是正在被测试的函数。它也被称为系统测试对象、测试对象等。'
- en: '**The 3 As (Arrange, Act, and Assert)**: This is a technique used to set up
    tests, first described by Bill Wake ([http://xp123.com/articles/3a-arrange-act-assert/](http://xp123.com/articles/3a-arrange-act-assert/)).
    The 3 As will be discussed further in [Chapter 2](ch02.html "Chapter 2. Details
    of JavaScript Testing"), *Details of JavaScript Testing*.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**3A（准备、行动、断言）**：这是一种设置测试的技术，最初由Bill Wake描述（[http://xp123.com/articles/3a-arrange-act-assert/](http://xp123.com/articles/3a-arrange-act-assert/))。3A将在[第2章](ch02.html
    "第2章。JavaScript测试的细节")*JavaScript测试的细节*中进一步讨论。'
- en: Testing with a framework
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用框架进行测试
- en: We have already seen a quick and simple way to perform tests on the calculator
    application, where we have set the test for the `multiply` method. But in real
    life, it will be more complex and a way larger application, where the earlier
    technique will be too complex to manage and perform. In that case, it will be
    handy and easier to use a testing framework. A testing framework provides methods
    and structures to test. This includes a standard structure to create and run tests,
    the ability to create assertions/expectations, the ability to use test doubles,
    and a lot more. This book uses Jasmine as the test framework. Jasmine is a behavior-driven
    testing framework. It is highly compatible with testing Angular applications.
    In [Chapter 2](ch02.html "Chapter 2. Details of JavaScript Testing"), *Details
    of JavaScript Testing*, we will take an in-depth look at Jasmine.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到了对计算器应用程序进行测试的快速简单方法，其中我们设置了`multiply`方法的测试。但在现实生活中，它将更加复杂，并且是一个更大型的应用程序，其中早期技术将过于复杂而难以管理。在这种情况下，使用测试框架将非常方便且易于使用。测试框架提供方法和结构来进行测试。这包括创建和运行测试的标准结构，创建断言/期望的能力，使用测试替身的能力，以及更多。本书使用Jasmine作为测试框架。Jasmine是一个行为驱动测试框架。它与测试Angular应用程序高度兼容。在[第2章](ch02.html
    "第2章。JavaScript测试的细节")《JavaScript测试的细节》中，我们将深入探讨Jasmine。
- en: The following example code is not exactly how it runs with the Jasmine test/spec
    runner, it's just about the idea of how the doubles work or how these doubles
    return the expected result. In [Chapter 2](ch02.html "Chapter 2. Details of JavaScript
    Testing"), *Details of JavaScript Testing,* we will demonstrate exactly how this
    double should be used with the Jasmine spec runner.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例代码并不是Jasmine测试/规范运行器实际运行的方式，它只是关于双倍工作原理或这些双倍如何返回预期结果的想法。在[第2章](ch02.html
    "第2章。JavaScript测试的细节")《JavaScript测试的细节》中，我们将展示如何使用Jasmine规范运行器正确使用这个双倍。
- en: Testing doubles with Jasmine spies
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Jasmine间谍进行测试替身
- en: A test double is an object that acts as and is used in place of another object.
    Jasmine has a test double function which is known as `spies`. A Jasmine spy is
    used with the `spyOn()` method.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 测试替身是一个充当并用于替代另一个对象的对象。Jasmine有一个称为`spies`的测试替身函数。Jasmine间谍与`spyOn()`方法一起使用。
- en: Let's take a look at the following `testableObject` object that needs to be
    tested. Using a test double, we can determine the number of times `testableFunction`
    gets called.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看以下需要测试的`testableObject`对象。使用测试替身，我们可以确定`testableFunction`被调用的次数。
- en: 'The following is an example of a test double:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个测试替身的示例：
- en: '[PRE6]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The preceding code creates a test double using a Jasmine spy (`jasmine.spyOn`).
    The following are some of the features that a Jasmine test double offers:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码使用Jasmine间谍(`jasmine.spyOn`)创建了一个测试替身。以下是一些Jasmine测试替身提供的功能：
- en: The count of calls on a function
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 函数调用次数
- en: The ability to specify a return value (stub a return value)
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指定返回值（模拟返回值）的能力
- en: The ability to pass a call to the underlying function (pass through)
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将调用传递给底层函数（传递）的能力
- en: Throughout this book, we will gain further experience in the use of test doubles.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在整本书中，我们将进一步获得使用测试替身（test doubles）的经验。
- en: Stubbing a return value
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模拟返回值
- en: The great thing about using a test double is that the underlying code of a method
    does not have to be called. With a test double, we can specify exactly what a
    method should return for a given test.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 使用测试替身的优点在于，不需要调用方法的基本代码。使用测试替身，我们可以指定方法在给定测试中应该返回的确切值。
- en: 'Consider the following example of an object and a function, where the function
    returns a string:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下对象和函数的示例，其中函数返回一个字符串：
- en: '[PRE7]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The preceding object, `testableObject`, has a function, `testableFunction`,
    that needs to be stubbed.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的对象`testableObject`有一个需要模拟的函数`testableFunction`。
- en: So, to stub the single return value, it will need to chain the `and.returnValue`
    method and will pass the expected value as `param`.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，为了模拟单个返回值，需要链式调用`and.returnValue`方法，并将预期值作为`param`传递。
- en: 'Here is how to spy chain the single return value to stub it:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这是如何将单个返回值间谍链式调用以进行模拟的方法：
- en: '[PRE8]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Now, when `testableObject.testableFunction` is called, `stubbed value` will
    be returned.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当调用`testableObject.testableFunction`时，将返回`stubbed value`。
- en: 'Consider the following example of the preceding single `stubbed value`:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下关于先前单个`stubbed value`的示例：
- en: '[PRE9]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Similarly, we can pass multiple returned values as in the preceding example.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，我们可以像前面的示例一样传递多个返回值。
- en: 'Here is how to spy chain the multiple return values to stub them one by one:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是如何将多个返回值链式调用以逐个存根的示例：
- en: '[PRE10]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: So, for every call of `testableObject.testableFunction`, it will return the
    stubbed value in order until it reaches the end of the return value list.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，对于`testableObject.testableFunction`的每次调用，它将按顺序返回存根值，直到达到返回值列表的末尾。
- en: 'Consider the example of the preceding multiple stubbed values:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑前述多个存根值的示例：
- en: '[PRE11]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Testing arguments
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试参数
- en: 'A test double provides insights into how a method is used in an application.
    As an example, a test might want to assert what arguments a method was called
    with or the number of times a method was called. Here is an example function:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 测试替身可以揭示方法在应用程序中的使用方式。例如，一个测试可能想要断言方法被调用时的参数或方法被调用的次数。下面是一个示例函数：
- en: '[PRE12]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The following are the steps to test the arguments with which the preceding
    function is called:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是测试前述函数调用参数的步骤：
- en: 'Create a spy so that the arguments called can be captured:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个间谍，以便捕获被调用的参数：
- en: '[PRE13]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Then, to access the arguments, run the following:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，为了访问参数，运行以下命令：
- en: '[PRE14]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Here is how the arguments can be displayed using `console.log`:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是如何使用`console.log`显示参数的示例：
- en: '[PRE15]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Refactoring
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 重构
- en: Refactoring is the act of restructuring, rewriting, renaming, and removing code
    in order to improve the design, readability, maintainability, and overall aesthetics
    of a piece of code. The TDD life cycle step of *making the project   better* is
    primarily concerned with refactoring. This section will walk us through a refactoring
    example.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 重构是指对代码进行重构、重写、重命名和删除，以提高代码的设计、可读性、可维护性和整体美观。TDD 生命周期步骤中的“使项目更好”主要关注重构。本节将带我们通过一个重构示例。
- en: 'Take a look at the following example of a function that needs to be refactored:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 看一下以下需要重构的函数示例：
- en: '[PRE16]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: This function works fine and does not contain any syntactical or logical issues.
    The problem is that the function is difficult to read and understand. Refactoring
    this function will improve its naming, structure, and definition. The exercise
    will remove the masquerading complexity and reveal the function's true meaning
    and intention.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这个函数运行良好，不包含任何语法或逻辑问题。问题是这个函数难以阅读和理解。重构这个函数将改进其命名、结构和定义。练习将消除伪装的复杂性，揭示函数的真实含义和意图。
- en: 'Here are the steps:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是步骤：
- en: 'Rename the function and variable names to be more meaningful, that is, rename
    `x` and `z` so that they make sense:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将函数和变量名重命名为更有意义，即重命名`x`和`z`，使它们有意义：
- en: '[PRE17]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Now, the function can easily be read and the naming makes sense.
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，函数可以很容易地阅读，命名也更有意义。
- en: 'Remove any unnecessary complexity. In this case, the `if` conditional statement
    can be removed completely, as follows:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移除任何不必要的复杂性。在这种情况下，可以完全删除`if`条件语句，如下所示：
- en: '[PRE18]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Reflect on the result.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 反思结果。
- en: 'At this point, the refactoring is complete, and the function''s purpose should
    jump out at you. The next question that should be asked is: "Why does this method
    exist in the first place?".'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，重构已完成，函数的目的应该很明显。接下来应该问的问题是：“这个方法最初为什么存在？”。
- en: This example only provided a brief walk-through of the steps that can be taken
    to identify the issues in code and how to improve them. Other examples will be
    given throughout this book.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子只提供了一个简要的步骤概述，说明了如何识别代码中的问题以及如何改进它们。本书中还将给出其他示例。
- en: Building with a builder
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用建造者构建
- en: These days, the design pattern is kind of a common practice, and we follow the
    design patterns to make life easier. For the same reason, the builder pattern
    will be followed here.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 这些天，设计模式已经变成了一种常见的实践，我们遵循设计模式来使生活变得更简单。出于同样的原因，这里也将遵循建造者模式。
- en: The builder pattern uses a `builder` object to create another object. Imagine
    an object with 10 properties. How will test data be created for every property?
    Will the object have to be recreated in every test?
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 建造者模式使用`builder`对象来创建另一个对象。想象一个有10个属性的对象。如何为每个属性创建测试数据？是否需要在每个测试中重新创建对象？
- en: 'A `builder` object defines an object to be reused across multiple tests. The
    following code snippet provides an example of the use of this pattern. This example
    will use the `builder` object in the `validate` method:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '`builder`对象定义了一个可以在多个测试中重用的对象。以下代码片段提供了一个使用此模式的示例。此示例将在`validate`方法中使用`builder`对象：'
- en: '[PRE19]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The `book` object has three properties: `id`, `author`, and `dateTime`. From
    a testing perspective, we would want the ability to create a valid object, that
    is, one that has all the fields defined. We may also want to create an invalid
    object with missing properties, or we may want to set certain values in the object
    to test the validation logic. Like here `dateTime` is an actual date time, which
    should assign by builder object.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '`book`对象有三个属性：`id`、`author`和`dateTime`。从测试的角度来看，我们希望有创建一个有效对象的能力，即所有字段都已定义的对象。我们可能还想创建一个缺少属性的无效对象，或者我们可能想设置对象中的某些值来测试验证逻辑。就像这里的`dateTime`是一个实际的日期时间，应该由构建器对象分配。'
- en: 'Here are the steps to create a builder for the `bookBuilder` object:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 创建`bookBuilder`对象的构建器的步骤如下：
- en: 'Create a builder function, as shown here:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个构建器函数，如下所示：
- en: '[PRE20]'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Create a valid object within the builder, as follows:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在构建器内创建一个有效的对象，如下所示：
- en: '[PRE21]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Create a function to return the built object:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个函数来返回构建的对象：
- en: '[PRE22]'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'As illustrated, create another function to set the `_resultBook` author field:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如上图所示，创建另一个函数来设置`_resultBook`的作者字段：
- en: '[PRE23]'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Change the function definition so that calls can be chained:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将函数定义修改为可以链式调用：
- en: '[PRE24]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'A setter function will also be created for `dateTime`, as shown here:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 还将创建一个用于`dateTime`的设置函数，如下所示：
- en: '[PRE25]'
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Now, `bookBuilder` can be used to create a new book, as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，可以使用`bookBuilder`创建一个新的书籍，如下所示：
- en: '[PRE26]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The preceding builder can now be used throughout our tests to create a single
    consistent object.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 之前的构建器现在可以在我们的测试中用来创建一个单一的一致对象。
- en: 'Here is the complete builder for reference:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是完整的构建器，供参考：
- en: '[PRE27]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Let''s create the `validate` method to validate the created book object from
    the builder:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个`validate`方法来验证从构建器创建的书籍对象：
- en: '[PRE28]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Let''s start by creating a valid book object with the builder by passing all
    the required information, and if this is passed via the `validate` object, this
    should show a valid message:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先通过传递所有必要的信息使用构建器创建一个有效的书籍对象，如果通过`validate`对象传递，则应该显示有效消息：
- en: '[PRE29]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'In the same way, let''s create an invalid book object via the builder by passing
    some null value in the required information. And by passing the object to the
    `validate` method, it should show the message explaining why it''s invalid:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，让我们通过在必要信息中传递一些null值来通过构建器创建一个无效的书籍对象。通过将对象传递给`validate`方法，它应该显示解释为什么它是无效的消息：
- en: '[PRE30]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Tip
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Downloading the example code**'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '**下载示例代码**'
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books that you have purchased. If you have purchased
    this book from elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.packtpub.com](http://www.packtpub.com)下载您购买的所有Packt出版物的示例代码文件。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。
- en: Self-test questions
  id: totrans-191
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自我测试问题
- en: Q1\. A test double is another name for a duplicate test.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: Q1. 测试替身是重复测试的另一个名称。
- en: 'True'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'True'
- en: 'False'
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'False'
- en: Q2\. TDD stands for test-driven development.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: Q2. TDD代表测试驱动开发。
- en: 'True'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'True'
- en: 'False'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'False'
- en: Q3\. The purpose of refactoring is to improve code quality.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: Q3. 重构的目的是提高代码质量。
- en: 'True'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'True'
- en: 'False'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'False'
- en: Q4\. A test object builder consolidates the creation of objects for testing.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: Q4. 测试对象构建器用于整合测试对象的创建。
- en: 'True'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'True'
- en: 'False'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'False'
- en: Q5\. The 3 As are a sports team.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: Q5. 三个A代表一个运动队。
- en: 'True'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'True'
- en: 'False'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'False'
- en: Summary
  id: totrans-207
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter provided an introduction to TDD. It discussed the TDD life cycle
    (test first, make it run, and make it better) and these steps can be used by anybody
    for TDD approach similar to how we have saw being used by a tailor. Finally, it
    looked over some of the testing techniques that will be discussed throughout this
    book, including test doubles, refactoring, and building patterns.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了TDD（测试驱动开发）。它讨论了TDD的生命周期（先测试，然后运行，最后改进），任何人都可以使用这些步骤进行TDD方法，就像我们看到的裁缝使用的方法一样。最后，它概述了本书将讨论的一些测试技术，包括测试替身、重构和构建模式。
- en: Although TDD is a huge topic, this book is solely focused on the TDD principles
    and practices to be used with Angular.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然TDD是一个很大的主题，但本书仅关注与Angular一起使用的TDD原则和实践。
- en: In the next chapter, we will know details about JavaScript testing.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将了解有关JavaScript测试的详细信息。
