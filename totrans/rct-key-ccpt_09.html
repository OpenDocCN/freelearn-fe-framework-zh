<html><head></head><body>
  <div class="Basic-Text-Frame" id="_idContainer160">
   <h1 class="chapterNumber">
    <span class="koboSpan" id="kobo.1.1">
     9
    </span>
   </h1>
   <h1 class="chapterTitle" id="_idParaDest-171">
    <span class="koboSpan" id="kobo.2.1">
     Handling User Input &amp; Forms with Form Actions
    </span>
   </h1>
   <div class="note">
    <p class="normal">
     <span class="koboSpan" id="kobo.3.1">
      Learning Objectives
     </span>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.4.1">
      By the end of this chapter, you will be able to do the following:
     </span>
    </p>
    <ul>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.5.1">
       Describe the purpose of React form actions
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.6.1">
       Build and use custom form actions to handle form submissions
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.7.1">
       Use the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.8.1">
        useActionState()
       </span>
      </code>
      <span class="koboSpan" id="kobo.9.1">
       Hook to manage form-dependent state
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.10.1">
       Render a pending UI during submission via the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.11.1">
        useFormStatus()
       </span>
      </code>
      <span class="koboSpan" id="kobo.12.1">
       Hook
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.13.1">
       Perform optimistic state updates with the
      </span>
      <code class="inlineCode">
       <span class="koboSpan" id="kobo.14.1">
        useOptimistic()
       </span>
      </code>
      <span class="koboSpan" id="kobo.15.1">
       Hook
      </span>
     </li>
     <li class="bulletList">
      <span class="koboSpan" id="kobo.16.1">
       Implement both synchronous and asynchronous actions
      </span>
     </li>
    </ul>
   </div>
   <h1 class="heading-1" id="_idParaDest-172">
    <span class="koboSpan" id="kobo.17.1">
     Introduction
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.18.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.19.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.20.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.21.1">
      Working with Events and State
     </span>
    </em>
    <span class="koboSpan" id="kobo.22.1">
     , you learned how to handle form submissions in React applications.
    </span>
    <span class="koboSpan" id="kobo.22.2">
     And while there is absolutely nothing wrong with the approach shown there—indeed, it’s arguably the approach you’ll find in the majority of React projects—React provides an alternative way of handling form submissions when working in projects that use React version 19 or later.
    </span>
    <span class="koboSpan" id="kobo.22.3">
     React 19 introduced a new feature
    </span>
    <a id="_idIndexMarker396">
    </a>
    <span class="koboSpan" id="kobo.23.1">
     called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.24.1">
      actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.25.1">
     (also
    </span>
    <a id="_idIndexMarker397">
    </a>
    <span class="koboSpan" id="kobo.26.1">
     referred to as
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.27.1">
      form
     </span>
    </strong>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.28.1">
      actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.29.1">
     throughout this chapter) that can simplify the process of handling form submissions, extracting user input, and providing validation feedback.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.30.1">
     This chapter will first revisit form submissions as introduced in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.31.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.32.1">
     and explore how user input can be extracted and validated.
    </span>
    <span class="koboSpan" id="kobo.32.2">
     Thereafter, this chapter will introduce form actions and explain how to perform the same steps (handle submission, extract values, and validate values) using that feature.
    </span>
    <span class="koboSpan" id="kobo.32.3">
     You will also learn about action-related React Hooks like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.33.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.34.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-173">
    <span class="koboSpan" id="kobo.35.1">
     Handling Form Submissions without Actions
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.36.1">
     As you learned in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.37.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.38.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.39.1">
      Working with Events and State
     </span>
    </em>
    <span class="koboSpan" id="kobo.40.1">
     , when not using actions, you can handle form submissions by
    </span>
    <a id="_idIndexMarker398">
    </a>
    <span class="koboSpan" id="kobo.41.1">
     listening to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.42.1">
      submit
     </span>
    </code>
    <span class="koboSpan" id="kobo.43.1">
     event via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.44.1">
      onSubmit
     </span>
    </code>
    <span class="koboSpan" id="kobo.45.1">
     prop on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.46.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.47.1">
     element.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.48.1">
     Consider the following example code snippet:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.49.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.50.1">App</span></span><span class="koboSpan" id="kobo.51.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.52.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.53.1">handleSubmit</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.54.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.55.1">event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.56.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.57.1">event.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.58.1">preventDefault</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.59.1">();</span></strong></span>
    <span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.60.1">console</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.61.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.62.1">log</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.63.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.64.1">'Submitted!'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.65.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.66.1">}</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.67.1">return</span></span><span class="koboSpan" id="kobo.68.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.69.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.70.1">form</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.71.1">onSubmit</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.72.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.73.1">{handleSubmit}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.74.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.75.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.76.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.77.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.78.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.79.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.80.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.81.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.82.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.83.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.84.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.85.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.86.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.87.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.88.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.89.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.90.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.91.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.92.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.93.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.94.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.95.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.96.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.97.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.98.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.99.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.100.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.101.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.102.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.103.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.104.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.105.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.106.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.107.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.108.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.109.1">Password</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.110.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.111.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.112.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.113.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.114.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.115.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.116.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.117.1">"password"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.118.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.119.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.120.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.121.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.122.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.123.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.124.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.125.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.126.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.127.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.128.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.129.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.130.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.131.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.132.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.133.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.134.1">Login</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.135.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.136.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.137.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.138.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.139.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.140.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.141.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.142.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.143.1">&gt;</span></span><span class="koboSpan" id="kobo.144.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.145.1">
     You find the full working example on GitHub:
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/examples/01-form-submission-without-actions">
     <span class="url">
      <span class="koboSpan" id="kobo.146.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/examples/01-form-submission-without-actions
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.147.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.148.1">
     This code displays a form and handles its submission via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.149.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.150.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.150.2">
     This function automatically receives an
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.151.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.152.1">
     object, which is used to prevent the browser’s default behavior of sending an HTTP request to the server hosting the website.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.153.1">
     But, of
    </span>
    <a id="_idIndexMarker399">
    </a>
    <span class="koboSpan" id="kobo.154.1">
     course, just handling the submission isn’t too useful.
    </span>
    <span class="koboSpan" id="kobo.154.2">
     Typically, you also want to extract and use values entered by the website user.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-174">
    <span class="koboSpan" id="kobo.155.1">
     Extracting User Input
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.156.1">
     When it
    </span>
    <a id="_idIndexMarker400">
    </a>
    <span class="koboSpan" id="kobo.157.1">
     comes to extracting values entered
    </span>
    <a id="_idIndexMarker401">
    </a>
    <span class="koboSpan" id="kobo.158.1">
     into a form, you have a couple of options:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.159.1">
      Track the values via state (i.e., by using
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.160.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.161.1">
      ), as described in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.162.1">
       Chapter 4
      </span>
     </em>
     <span class="koboSpan" id="kobo.163.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.164.1">
      Rely on Refs via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.165.1">
       useRef()
      </span>
     </code>
     <span class="koboSpan" id="kobo.166.1">
      , as explained in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.167.1">
       Chapter 7
      </span>
     </em>
     <span class="koboSpan" id="kobo.168.1">
      ,
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.169.1">
       Portals and Refs
      </span>
     </em>
     <span class="koboSpan" id="kobo.170.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.171.1">
      Take advantage of the automatically created
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.172.1">
       event
      </span>
     </code>
     <span class="koboSpan" id="kobo.173.1">
      object.
     </span>
    </li>
   </ul>
   <h3 class="heading-3" id="_idParaDest-175">
    <span class="koboSpan" id="kobo.174.1">
     Tracking State
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.175.1">
     You can
    </span>
    <a id="_idIndexMarker402">
    </a>
    <span class="koboSpan" id="kobo.176.1">
     track the values entered by the user via state managed by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.177.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.178.1">
     , as explained in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.179.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.180.1">
     .
    </span>
    <span class="koboSpan" id="kobo.180.2">
     For example, the form input values from the previous code snippet can be tracked and used in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.181.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.182.1">
     , as shown in the following example:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.183.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.184.1">App</span></span><span class="koboSpan" id="kobo.185.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.186.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.187.1"> [email, setEmail] = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.188.1">useState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.189.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.190.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.191.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.192.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.193.1"> [password, setPassword] = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.194.1">useState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.195.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.196.1">''</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.197.1">);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.198.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.199.1">handleSubmit</span></span><span class="koboSpan" id="kobo.200.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.201.1">event</span></span><span class="koboSpan" id="kobo.202.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.203.1">preventDefault</span></span><span class="koboSpan" id="kobo.204.1">();
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.205.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.206.1"> credentials = { email, password };</span></strong></span>
    <span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.207.1">console</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.208.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.209.1">log</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.210.1">(credentials);</span></strong></span><span class="koboSpan" id="kobo.211.1">
  }
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.212.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.213.1">handleEmailChange</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.214.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.215.1">event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.216.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.217.1">setEmail</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.218.1">(event.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.219.1">target</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.220.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.221.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.222.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.223.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.224.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.225.1">handlePasswordChange</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.226.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.227.1">event</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.228.1">) {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.229.1">setPassword</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.230.1">(event.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.231.1">target</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.232.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.233.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.234.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.235.1">}</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.236.1">return</span></span><span class="koboSpan" id="kobo.237.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.238.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.239.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.240.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.241.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.242.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.243.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.244.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.245.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.246.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.247.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.248.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.249.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.250.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.251.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.252.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.253.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.254.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.255.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.256.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.257.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.258.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.259.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.260.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.261.1">"email"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.262.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.263.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.264.1">"email"</span></span>
          <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.265.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.266.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.267.1">{email}</span></strong></span>
          <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.268.1">onChange</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.269.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.270.1">{handleEmailChange}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.271.1">        /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.272.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.273.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.274.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.275.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.276.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.277.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.278.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.279.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.280.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.281.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.282.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.283.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.284.1">Password</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.285.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.286.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.287.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.288.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.289.1">input</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.290.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.291.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.292.1">"password"</span></span>
<span class="hljs-tag">          </span><span class="hljs-attr"><span class="koboSpan" id="kobo.293.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.294.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.295.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.296.1">password"</span></span>
<span class="hljs-tag">          </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.297.1">value</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.298.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.299.1">{password}</span></strong></span>
          <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.300.1">onChange</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.301.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.302.1">{handlePasswordChange}</span></strong></span>
<span class="hljs-tag"><span class="koboSpan" id="kobo.303.1">        /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.304.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.305.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.306.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.307.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.308.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.309.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.310.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.311.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.312.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.313.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.314.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.315.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.316.1">Login</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.317.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.318.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.319.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.320.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.321.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.322.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.323.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.324.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.325.1">&gt;</span></span><span class="koboSpan" id="kobo.326.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.327.1">
     In this updated example code snippet, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.328.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.329.1">
     Hook is used to manage
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.330.1">
      email
     </span>
    </code>
    <span class="koboSpan" id="kobo.331.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.332.1">
      password
     </span>
    </code>
    <span class="koboSpan" id="kobo.333.1">
     state values.
    </span>
    <span class="koboSpan" id="kobo.333.2">
     The state values are updated with every keystroke on the input fields.
    </span>
    <span class="koboSpan" id="kobo.333.3">
     As a result, the latest entered values are available inside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.334.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.335.1">
     when the form is submitted.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.336.1">
     This approach
    </span>
    <a id="_idIndexMarker403">
    </a>
    <span class="koboSpan" id="kobo.337.1">
     works well and will be found in many React projects.
    </span>
    <span class="koboSpan" id="kobo.337.2">
     However, there are some potential downsides to using state to track input values:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.338.1">
      Since the state is updated on every keystroke, and the component function is re-executed whenever some state value changes, application performance could suffer.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.339.1">
      When working with more complex forms with more input fields, a lot of different state values may need to be managed.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.340.1">
     You can work around these issues by implementing code optimizations, which will be discussed in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.341.1">
      Chapter 10
     </span>
    </em>
    <span class="koboSpan" id="kobo.342.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.343.1">
      Behind the Scenes of React and Optimization Opportunities
     </span>
    </em>
    <span class="koboSpan" id="kobo.344.1">
     , and by managing state as an object, as explained in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.345.1">
      Chapter 11
     </span>
    </em>
    <span class="koboSpan" id="kobo.346.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.347.1">
      Working with Complex State
     </span>
    </em>
    <span class="koboSpan" id="kobo.348.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.349.1">
     But you could also consider using Refs to extract input values.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-176">
    <span class="koboSpan" id="kobo.350.1">
     Relying on Refs
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.351.1">
     If you’re
    </span>
    <a id="_idIndexMarker404">
    </a>
    <span class="koboSpan" id="kobo.352.1">
     building a form where you don’t plan on setting input values, and where you instead only want to read those values upon form submission, using React’s ref feature (introduced in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.353.1">
      Chapter 7
     </span>
    </em>
    <span class="koboSpan" id="kobo.354.1">
     ) might make sense:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.355.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.356.1">App</span></span><span class="koboSpan" id="kobo.357.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.358.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.359.1"> emailRef = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.360.1">useRef</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.361.1">(</span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.362.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.363.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.364.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.365.1"> passwordRef = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.366.1">useRef</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.367.1">(</span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.368.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.369.1">);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.370.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.371.1">handleSubmit</span></span><span class="koboSpan" id="kobo.372.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.373.1">event</span></span><span class="koboSpan" id="kobo.374.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.375.1">preventDefault</span></span><span class="koboSpan" id="kobo.376.1">();
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.377.1">const</span></span><span class="koboSpan" id="kobo.378.1"> credentials = {
      </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.379.1">email</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.380.1">: emailRef.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.381.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.382.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.383.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.384.1">,</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.385.1">password</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.386.1">: passwordRef.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.387.1">current</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.388.1">.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.389.1">value</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.390.1">,</span></strong></span><span class="koboSpan" id="kobo.391.1">
    };
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.392.1">console</span></span><span class="koboSpan" id="kobo.393.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.394.1">log</span></span><span class="koboSpan" id="kobo.395.1">(credentials);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.396.1">return</span></span><span class="koboSpan" id="kobo.397.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.398.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.399.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.400.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.401.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.402.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.403.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.404.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.405.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.406.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.407.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.408.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.409.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.410.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.411.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.412.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.413.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.414.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.415.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.416.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.417.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.418.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.419.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.420.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.421.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.422.1">email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.423.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.424.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.425.1">"email"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.426.1">ref</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.427.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.428.1">{emailRef}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.429.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.430.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.431.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.432.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.433.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.434.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.435.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.436.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.437.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.438.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.439.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.440.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.441.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.442.1">Password</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.443.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.444.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.445.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.446.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.447.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.448.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.449.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.450.1">"password"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.451.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.452.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.453.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.454.1">password"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.455.1">ref</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.456.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.457.1">{passwordRef}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.458.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.459.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.460.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.461.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.462.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.463.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.464.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.465.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.466.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.467.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.468.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.469.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.470.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.471.1">Login</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.472.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.473.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.474.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.475.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.476.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.477.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.478.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.479.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.480.1">&gt;</span></span><span class="koboSpan" id="kobo.481.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.482.1">
     In this code block, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.483.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.484.1">
     Hook is used to create two Refs that are connected to the email and password input fields.
    </span>
    <span class="koboSpan" id="kobo.484.2">
     These Refs are then used to read the entered values inside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.485.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.486.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.487.1">
     When using
    </span>
    <a id="_idIndexMarker405">
    </a>
    <span class="koboSpan" id="kobo.488.1">
     this approach, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.489.1">
      App
     </span>
    </code>
    <span class="koboSpan" id="kobo.490.1">
     component function is not executed with every keystroke anymore.
    </span>
    <span class="koboSpan" id="kobo.490.2">
     But you still have to write the code where the Refs are created via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.491.1">
      useRef()
     </span>
    </code>
    <span class="koboSpan" id="kobo.492.1">
     and where they are connected to the JSX elements via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.493.1">
      ref
     </span>
    </code>
    <span class="koboSpan" id="kobo.494.1">
     prop.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.495.1">
     That’s why you could consider relying on the browser and the automatically created
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.496.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.497.1">
     object (which is received in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.498.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.499.1">
     ), instead of using React features to extract those entered values.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-177">
    <span class="koboSpan" id="kobo.500.1">
     Taking Advantage of the event Object
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.501.1">
     In
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.502.1">
      Chapter 4
     </span>
    </em>
    <span class="koboSpan" id="kobo.503.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.504.1">
      Working with Events and State
     </span>
    </em>
    <span class="koboSpan" id="kobo.505.1">
     , you learned that the browser tries to send an HTTP request when a form is submitted.
    </span>
    <span class="koboSpan" id="kobo.505.2">
     That’s
    </span>
    <a id="_idIndexMarker406">
    </a>
    <span class="koboSpan" id="kobo.506.1">
     why
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.507.1">
      event.preventDefault()
     </span>
    </code>
    <span class="koboSpan" id="kobo.508.1">
     is called inside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.509.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.510.1">
     —this function call ensures that this request is not sent.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.511.1">
     However, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.512.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.513.1">
     object is not just useful for preventing that default.
    </span>
    <span class="koboSpan" id="kobo.513.2">
     It also carries important information about the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.514.1">
      submit
     </span>
    </code>
    <span class="koboSpan" id="kobo.515.1">
     event that occurred.
    </span>
    <span class="koboSpan" id="kobo.515.2">
     For example, you can get access to the underlying form DOM object (i.e., a JavaScript object that describes the rendered
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.516.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.517.1">
     element, its configuration, and its current status) via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.518.1">
      event.currentTarget
     </span>
    </code>
    <span class="koboSpan" id="kobo.519.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.520.1">
     This is very useful because you can pass that form DOM object to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.521.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.522.1">
     constructor function that is provided by the browser.
    </span>
    <span class="koboSpan" id="kobo.522.2">
     This interface can be used to extract a form’s input field values.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.523.1">
     The following example shows the concrete usage of this feature:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.524.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.525.1">App</span></span><span class="koboSpan" id="kobo.526.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.527.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.528.1">handleSubmit</span></span><span class="koboSpan" id="kobo.529.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.530.1">event</span></span><span class="koboSpan" id="kobo.531.1">) {
    event.</span><span class="hljs-title"><span class="koboSpan" id="kobo.532.1">preventDefault</span></span><span class="koboSpan" id="kobo.533.1">();
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.534.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.535.1"> fd = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.536.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.537.1">FormData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.538.1">(event.</span></strong><strong class="hljs-property-slc"><span class="koboSpan" id="kobo.539.1">currentTarget</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.540.1">);</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.541.1">const</span></span><span class="koboSpan" id="kobo.542.1"> credentials = {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.543.1">email</span></span><span class="koboSpan" id="kobo.544.1">: </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.545.1">fd.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.546.1">get</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.547.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.548.1">'email'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.549.1">)</span></strong></span><span class="koboSpan" id="kobo.550.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.551.1">password</span></span><span class="koboSpan" id="kobo.552.1">: </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.553.1">fd.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.554.1">get</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.555.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.556.1">'password'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.557.1">)</span></strong></span><span class="koboSpan" id="kobo.558.1">,
    };
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.559.1">console</span></span><span class="koboSpan" id="kobo.560.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.561.1">log</span></span><span class="koboSpan" id="kobo.562.1">(credentials);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.563.1">return</span></span><span class="koboSpan" id="kobo.564.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.565.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.566.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.567.1">onSubmit</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.568.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.569.1">{handleSubmit}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.570.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.571.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.572.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.573.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.574.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.575.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.576.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.577.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.578.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.579.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.580.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.581.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.582.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.583.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.584.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.585.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.586.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.587.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.588.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.589.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.590.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.591.1">"email"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.592.1">name</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.593.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.594.1">"email"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.595.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.596.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.597.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.598.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.599.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.600.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.601.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.602.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.603.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.604.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.605.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.606.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.607.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.608.1">Password</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.609.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.610.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.611.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.612.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.613.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.614.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.615.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.616.1">"password"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.617.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.618.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.619.1">"password"</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.620.1">name</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.621.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.622.1">"password"</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.623.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.624.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.625.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.626.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.627.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.628.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.629.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.630.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.631.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.632.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.633.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.634.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.635.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.636.1">Login</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.637.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.638.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.639.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.640.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.641.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.642.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.643.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.644.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.645.1">&gt;</span></span><span class="koboSpan" id="kobo.646.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.647.1">
     As you can see in the above code snippet, the form data object
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.648.1">
      fd
     </span>
    </code>
    <span class="koboSpan" id="kobo.649.1">
     is constructed by instantiating
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.650.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.651.1">
     .
    </span>
    <span class="koboSpan" id="kobo.651.2">
     As mentioned, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.652.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.653.1">
     interface is provided by the browser; hence, it doesn’t need to be imported from React or any other library.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.654.1">
     This form
    </span>
    <a id="_idIndexMarker407">
    </a>
    <span class="koboSpan" id="kobo.655.1">
     data object offers various methods that help with accessing form field values—for example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.656.1">
      get()
     </span>
    </code>
    <span class="koboSpan" id="kobo.657.1">
     method to extract the value of a specific input field.
    </span>
    <span class="koboSpan" id="kobo.657.2">
     In order to identify the input field for which you want to get hold of the value, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.658.1">
      get()
     </span>
    </code>
    <span class="koboSpan" id="kobo.659.1">
     method requires the name of the input field as an argument.
    </span>
    <span class="koboSpan" id="kobo.659.2">
     That’s why you must also set the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.660.1">
      name
     </span>
    </code>
    <span class="koboSpan" id="kobo.661.1">
     prop on the form control elements (i.e., on the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.662.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.663.1">
     elements in the above example).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.664.1">
     This approach has the advantage that you need neither state nor Refs; hence, slightly less code must be written.
    </span>
    <span class="koboSpan" id="kobo.664.2">
     In addition, since almost no React features are used, this code will be less prone to break due to possible future React changes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.665.1">
     Consequently, this approach might look like the best way of handling form submissions.
    </span>
    <span class="koboSpan" id="kobo.665.2">
     But is it?
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-178">
    <span class="koboSpan" id="kobo.666.1">
     Which Solution Is Best?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.667.1">
     There is
    </span>
    <a id="_idIndexMarker408">
    </a>
    <span class="koboSpan" id="kobo.668.1">
     no right or wrong way of handling form submissions.
    </span>
    <span class="koboSpan" id="kobo.668.2">
     Besides personal preference, application requirements also might favor one approach over the others.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.669.1">
     For example, if your application needs to change the input values, using only
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.670.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.671.1">
     as shown above would not be ideal, since you would have to write imperative code to update an input field.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.672.1">
     That’s a problem because, as explained in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.673.1">
      Chapter 1
     </span>
    </em>
    <span class="koboSpan" id="kobo.674.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.675.1">
      React – What and Why?
     </span>
    </em>
    <span class="koboSpan" id="kobo.676.1">
     , you should avoid writing code like this in your React apps:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.677.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.678.1">clearInput</span></span><span class="koboSpan" id="kobo.679.1">() {
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.680.1">document</span></span><span class="koboSpan" id="kobo.681.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.682.1">getElementById</span></span><span class="koboSpan" id="kobo.683.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.684.1">'email'</span></span><span class="koboSpan" id="kobo.685.1">).</span><span class="hljs-property"><span class="koboSpan" id="kobo.686.1">value</span></span><span class="koboSpan" id="kobo.687.1"> = </span><span class="hljs-string"><span class="koboSpan" id="kobo.688.1">''</span></span><span class="koboSpan" id="kobo.689.1">; </span><span class="hljs-comment"><span class="koboSpan" id="kobo.690.1">// imperative code :(</span></span><span class="koboSpan" id="kobo.691.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.692.1">
     Thus, if you
    </span>
    <a id="_idIndexMarker409">
    </a>
    <span class="koboSpan" id="kobo.693.1">
     need to edit an input’s value, using state (i.e.,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.694.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.695.1">
     ) is preferable:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.696.1">const</span></span><span class="koboSpan" id="kobo.697.1"> [email, setEmail] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.698.1">useState</span></span><span class="koboSpan" id="kobo.699.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.700.1">''</span></span><span class="koboSpan" id="kobo.701.1">);
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.702.1">// ... </span><span class="koboSpan" id="kobo.702.2">other code</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.703.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.704.1">clearInput</span></span><span class="koboSpan" id="kobo.705.1">() {
  </span><span class="hljs-title"><span class="koboSpan" id="kobo.706.1">setEmail</span></span><span class="koboSpan" id="kobo.707.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.708.1">''</span></span><span class="koboSpan" id="kobo.709.1">);
}
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.710.1">// simplified JSX code below</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.711.1">return</span></span><span class="koboSpan" id="kobo.712.1"> (
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.713.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.714.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.715.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.716.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.717.1">input</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag">      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.718.1">value</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.719.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.720.1">{email}</span></span><span class="hljs-tag"> </span>
<span class="hljs-tag">      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.721.1">onChange</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.722.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.723.1">{event</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.724.1"> =&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.725.1"> setEmail(event.target.value)} /&gt;</span></span>
<span class="language-xml">  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.726.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.727.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.728.1">&gt;</span></span><span class="koboSpan" id="kobo.729.1">
);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.730.1">
     Even if you don’t need to update any input fields, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.731.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.732.1">
     object and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.733.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.734.1">
     alone might not do the trick.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.735.1">
     For example, if you need to access the input fields outside of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.736.1">
      handleSubmit()
     </span>
    </code>
    <span class="koboSpan" id="kobo.737.1">
     , the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.738.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.739.1">
     object is not available.
    </span>
    <span class="koboSpan" id="kobo.739.2">
     As a result, interacting with the form element and its child elements is not possible via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.740.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.741.1">
     object.
    </span>
    <span class="koboSpan" id="kobo.741.2">
     In such scenarios, working with Refs that are directly connected to the individual input elements will likely simplify things.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.742.1">
     The following example uses a ref to call the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.743.1">
      &lt;input&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.744.1">
     element’s built-in
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.745.1">
      focus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.746.1">
     method inside of a function:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.747.1">const</span></span><span class="koboSpan" id="kobo.748.1"> emailRef = </span><span class="hljs-title"><span class="koboSpan" id="kobo.749.1">useRef</span></span><span class="koboSpan" id="kobo.750.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.751.1">null</span></span><span class="koboSpan" id="kobo.752.1">);
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.753.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.754.1">showForm</span></span><span class="koboSpan" id="kobo.755.1">() {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.756.1">// other code ...</span></span><span class="koboSpan" id="kobo.757.1">
  emailRef.</span><span class="hljs-property"><span class="koboSpan" id="kobo.758.1">current</span></span><span class="koboSpan" id="kobo.759.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.760.1">focus</span></span><span class="koboSpan" id="kobo.761.1">(); 
}
</span><span class="hljs-comment"><span class="koboSpan" id="kobo.762.1">// simplified JSX code below</span></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.763.1">return</span></span><span class="koboSpan" id="kobo.764.1"> (
  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.765.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.766.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.767.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.768.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.769.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.770.1">ref</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.771.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.772.1">{emailRef}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.773.1"> /&gt;</span></span>
<span class="language-xml">  </span><span class="hljs-tag"><span class="koboSpan" id="kobo.774.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.775.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.776.1">&gt;</span></span><span class="koboSpan" id="kobo.777.1">
);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.778.1">
     So, as you can see, there is no silver bullet.
    </span>
    <span class="koboSpan" id="kobo.778.2">
     All these React features and different ways of handling
    </span>
    <a id="_idIndexMarker410">
    </a>
    <span class="koboSpan" id="kobo.779.1">
     form submissions exist for good reasons.
    </span>
    <span class="koboSpan" id="kobo.779.2">
     You can mix and match them as needed; therefore, it’s helpful to be aware of these different options.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.780.1">
     But even though there are already a couple of ways of handling form submissions, with React 19, there’s yet another one.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-179">
    <span class="koboSpan" id="kobo.781.1">
     Handling Form Submissions with Actions
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.782.1">
     React 19 introduced the concept of (form) actions—a concept that actually consists of two kinds
    </span>
    <a id="_idIndexMarker411">
    </a>
    <span class="koboSpan" id="kobo.783.1">
     of actions:
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.784.1">
      client actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.785.1">
     and
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.786.1">
      server actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.787.1">
     .
    </span>
    <span class="koboSpan" id="kobo.787.2">
     Both types
    </span>
    <a id="_idIndexMarker412">
    </a>
    <span class="koboSpan" id="kobo.788.1">
     of actions can help with handling form submissions, but for
    </span>
    <a id="_idIndexMarker413">
    </a>
    <span class="koboSpan" id="kobo.789.1">
     the purpose of this chapter, the term
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.790.1">
      form actions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.791.1">
     will be
    </span>
    <a id="_idIndexMarker414">
    </a>
    <span class="koboSpan" id="kobo.792.1">
     used to describe client actions (i.e., form actions that execute in the website user’s browser).
    </span>
    <span class="koboSpan" id="kobo.792.2">
     Server actions will be covered separately in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.793.1">
      Chapter 16
     </span>
    </em>
    <span class="koboSpan" id="kobo.794.1">
     ,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.795.1">
      React Server Components &amp; Server Actions
     </span>
    </em>
    <span class="koboSpan" id="kobo.796.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.797.1">
     Form actions were introduced to simplify the process of handling form submissions and data extraction—especially when building full stack apps with server actions.
    </span>
    <span class="koboSpan" id="kobo.797.2">
     Furthermore, they can also be very useful when combined with some new React Hooks, which will be discussed later in this chapter.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.798.1">
     Here’s how a form submission can be handled via a client form action:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.799.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.800.1">App</span></span><span class="koboSpan" id="kobo.801.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.802.1">function</span></span> <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.803.1">submitAction</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.804.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.805.1">formData</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.806.1">)</span></strong></span><span class="koboSpan" id="kobo.807.1"> {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.808.1">const</span></span><span class="koboSpan" id="kobo.809.1"> credentials = {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.810.1">email</span></span><span class="koboSpan" id="kobo.811.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.812.1">get</span></span><span class="koboSpan" id="kobo.813.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.814.1">'email'</span></span><span class="koboSpan" id="kobo.815.1">),
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.816.1">password</span></span><span class="koboSpan" id="kobo.817.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.818.1">get</span></span><span class="koboSpan" id="kobo.819.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.820.1">'password'</span></span><span class="koboSpan" id="kobo.821.1">),
    };
    </span><span class="hljs-variable"><span class="koboSpan" id="kobo.822.1">console</span></span><span class="koboSpan" id="kobo.823.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.824.1">log</span></span><span class="koboSpan" id="kobo.825.1">(credentials);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.826.1">return</span></span><span class="koboSpan" id="kobo.827.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.828.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.829.1">form</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.830.1">action</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.831.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.832.1">{submitAction}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.833.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.834.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.835.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.836.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.837.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.838.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.839.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.840.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.841.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.842.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.843.1">Email</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.844.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.845.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.846.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.847.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.848.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.849.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.850.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.851.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.852.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.853.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.854.1">"email"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.855.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.856.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.857.1">"email"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.858.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.859.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.860.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.861.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.862.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.863.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.864.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.865.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.866.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.867.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.868.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.869.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.870.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.871.1">Password</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.872.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.873.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.874.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.875.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.876.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.877.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.878.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.879.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.880.1">password"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.881.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.882.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.883.1">"password"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.884.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.885.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.886.1">"password"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.887.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.888.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.889.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.890.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.891.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.892.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.893.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.894.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.895.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.896.1">actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.897.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.898.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.899.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.900.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.901.1">Login</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.902.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.903.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.904.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.905.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.906.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.907.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.908.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.909.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.910.1">&gt;</span></span><span class="koboSpan" id="kobo.911.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.912.1">
     At first
    </span>
    <a id="_idIndexMarker415">
    </a>
    <span class="koboSpan" id="kobo.913.1">
     sight, this example may look very similar to the code snippet where the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.914.1">
      event
     </span>
    </code>
    <span class="koboSpan" id="kobo.915.1">
     object and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.916.1">
      currentTarget
     </span>
    </code>
    <span class="koboSpan" id="kobo.917.1">
     were used to derive the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.918.1">
      FormData
     </span>
    </code>
    <span class="koboSpan" id="kobo.919.1">
     .
    </span>
    <span class="koboSpan" id="kobo.919.2">
     But if you take a closer look, you’ll see that there are some key differences:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.920.1">
       handleSubmit
      </span>
     </code>
     <span class="koboSpan" id="kobo.921.1">
      was renamed
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.922.1">
       submitAction
      </span>
     </code>
     <span class="koboSpan" id="kobo.923.1">
      and accepts a parameter named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.924.1">
       formData
      </span>
     </code>
     <span class="koboSpan" id="kobo.925.1">
      instead of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.926.1">
       event
      </span>
     </code>
     <span class="koboSpan" id="kobo.927.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.928.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.929.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.930.1">
      element no longer has the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.931.1">
       onSubmit
      </span>
     </code>
     <span class="koboSpan" id="kobo.932.1">
      prop—instead, it now has an
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.933.1">
       action
      </span>
     </code>
     <span class="koboSpan" id="kobo.934.1">
      prop that points at the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.935.1">
       submitAction
      </span>
     </code>
     <span class="koboSpan" id="kobo.936.1">
      function.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.937.1">
     The name change of the function is optional; there is no technical requirement to name this function
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.938.1">
      submitAction
     </span>
    </code>
    <span class="koboSpan" id="kobo.939.1">
     or anything like that.
    </span>
    <span class="koboSpan" id="kobo.939.2">
     But changing the name makes sense because the function no longer directly handles the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.940.1">
      submit
     </span>
    </code>
    <span class="koboSpan" id="kobo.941.1">
     event.
    </span>
    <span class="koboSpan" id="kobo.941.2">
     Instead, it’s used as a value for the newly added
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.942.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.943.1">
     prop.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.944.1">
     And that’s precisely what React’s form action feature is all about: setting the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.945.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.946.1">
     prop of a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.947.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.948.1">
     element to a function that React will then invoke on your behalf when the form is submitted.
    </span>
    <span class="koboSpan" id="kobo.948.2">
     However, unlike when using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.949.1">
      onSubmit
     </span>
    </code>
    <span class="koboSpan" id="kobo.950.1">
     prop, React will prevent the browser default and create a form data object for you (and pass that object as an argument to the action function).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.951.1">
     You no longer have to perform these steps manually, and as a result, the form submission can be handled with a minimal amount of code.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.952.1">
     Of course, if you need to set and manage the input values manually, or if you need to interact with the form fields at some point (e.g., to call
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.953.1">
      focus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.954.1">
     ), you’ll still need to work with state
    </span>
    <a id="_idIndexMarker416">
    </a>
    <span class="koboSpan" id="kobo.955.1">
     or Refs.
    </span>
    <span class="koboSpan" id="kobo.955.2">
     But if you’re just trying to handle the submission and get hold of the entered values, using the form actions feature can be very handy.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.956.1">
     But form actions are not just useful because they may require less code.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-180">
    <span class="koboSpan" id="kobo.957.1">
     Synchronous vs Asynchronous Actions
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.958.1">
     Client form actions can be either synchronous or asynchronous, which means you can also
    </span>
    <a id="_idIndexMarker417">
    </a>
    <span class="koboSpan" id="kobo.959.1">
     use and return a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.960.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.961.1">
     in the action function.
    </span>
    <span class="koboSpan" id="kobo.961.2">
     Therefore, you can also use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.962.1">
      async / await
     </span>
    </code>
    <span class="koboSpan" id="kobo.963.1">
     with that function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.964.1">
     For example, if you have a form in an application that aims to store some task data in the
    </span>
    <a id="_idIndexMarker418">
    </a>
    <span class="koboSpan" id="kobo.965.1">
     browser’s storage (via the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.966.1">
      localStorage
     </span>
    </code>
    <span class="koboSpan" id="kobo.967.1">
     API), you
    </span>
    <a id="_idIndexMarker419">
    </a>
    <span class="koboSpan" id="kobo.968.1">
     can do that with a synchronous action (since
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.969.1">
      localStorage
     </span>
    </code>
    <span class="koboSpan" id="kobo.970.1">
     is a synchronous API):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.971.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.972.1">storeTaskAction</span></span><span class="koboSpan" id="kobo.973.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.974.1">formData</span></span><span class="koboSpan" id="kobo.975.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.976.1">const</span></span><span class="koboSpan" id="kobo.977.1"> task = {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.978.1">title</span></span><span class="koboSpan" id="kobo.979.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.980.1">get</span></span><span class="koboSpan" id="kobo.981.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.982.1">'title'</span></span><span class="koboSpan" id="kobo.983.1">),
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.984.1">body</span></span><span class="koboSpan" id="kobo.985.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.986.1">get</span></span><span class="koboSpan" id="kobo.987.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.988.1">'body'</span></span><span class="koboSpan" id="kobo.989.1">),
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.990.1">dueDate</span></span><span class="koboSpan" id="kobo.991.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.992.1">get</span></span><span class="koboSpan" id="kobo.993.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.994.1">'date'</span></span><span class="koboSpan" id="kobo.995.1">)
  };
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.996.1">localStorage</span></span><span class="koboSpan" id="kobo.997.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.998.1">setItem</span></span><span class="koboSpan" id="kobo.999.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1000.1">'daily-task'</span></span><span class="koboSpan" id="kobo.1001.1">, </span><span class="hljs-title"><span class="koboSpan" id="kobo.1002.1">JSON</span></span><span class="koboSpan" id="kobo.1003.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1004.1">stringify</span></span><span class="koboSpan" id="kobo.1005.1">(task));
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1006.1">
     This action function is synchronous, since it doesn’t return a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1007.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.1008.1">
     or use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1009.1">
      async / await
     </span>
    </code>
    <span class="koboSpan" id="kobo.1010.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1010.2">
     Therefore, as you can see, all form action examples thus far have used synchronous actions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1011.1">
     But if you’re working on a project that needs to submit entered data to a backend via an HTTP request, you can take advantage of the support for asynchronous code:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1012.1">async</span></strong></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1013.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1014.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1015.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1016.1">formData</span></span><span class="koboSpan" id="kobo.1017.1">) {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1018.1">const</span></span><span class="koboSpan" id="kobo.1019.1"> todoTitle = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1020.1">get</span></span><span class="koboSpan" id="kobo.1021.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1022.1">'</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1023.1">title'</span></span><span class="koboSpan" id="kobo.1024.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1025.1">const</span></span><span class="koboSpan" id="kobo.1026.1"> response = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1027.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1028.1">fetch</span></span><span class="koboSpan" id="kobo.1029.1">(
    </span><span class="hljs-string"><span class="koboSpan" id="kobo.1030.1">'https://jsonplaceholder.typicode.com/todos'</span></span><span class="koboSpan" id="kobo.1031.1">, 
    {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1032.1">method</span></span><span class="koboSpan" id="kobo.1033.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1034.1">'POST'</span></span><span class="koboSpan" id="kobo.1035.1">,
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1036.1">body</span></span><span class="koboSpan" id="kobo.1037.1">: </span><span class="hljs-title"><span class="koboSpan" id="kobo.1038.1">JSON</span></span><span class="koboSpan" id="kobo.1039.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1040.1">stringify</span></span><span class="koboSpan" id="kobo.1041.1">({ </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1042.1">title</span></span><span class="koboSpan" id="kobo.1043.1">: todoTitle }),
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1044.1">headers</span></span><span class="koboSpan" id="kobo.1045.1">: {
        </span><span class="hljs-string"><span class="koboSpan" id="kobo.1046.1">'Content-type'</span></span><span class="koboSpan" id="kobo.1047.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1048.1">'application/json; charset=UTF-8'</span></span><span class="koboSpan" id="kobo.1049.1">,
      },
    }
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1050.1">const</span></span><span class="koboSpan" id="kobo.1051.1"> todo = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1052.1">await</span></span><span class="koboSpan" id="kobo.1053.1"> response.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1054.1">json</span></span><span class="koboSpan" id="kobo.1055.1">();
  </span><span class="hljs-variable"><span class="koboSpan" id="kobo.1056.1">console</span></span><span class="koboSpan" id="kobo.1057.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1058.1">log</span></span><span class="koboSpan" id="kobo.1059.1">(todo);
} 
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1060.1">
     In this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1061.1">
      async
     </span>
    </code>
    <span class="koboSpan" id="kobo.1062.1">
     keyword is added in front of the function.
    </span>
    <span class="koboSpan" id="kobo.1062.2">
     This converts the function into an asynchronous one that will return a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1063.1">
      Promise
     </span>
    </code>
    <span class="koboSpan" id="kobo.1064.1">
     .
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1065.1">
     This
    </span>
    <a id="_idIndexMarker420">
    </a>
    <span class="koboSpan" id="kobo.1066.1">
     flexibility offered by React’s form actions feature is very useful, since it allows you to
    </span>
    <a id="_idIndexMarker421">
    </a>
    <span class="koboSpan" id="kobo.1067.1">
     perform a broad variety of operations
    </span>
    <a id="_idIndexMarker422">
    </a>
    <span class="koboSpan" id="kobo.1068.1">
     upon form submission.
    </span>
    <span class="koboSpan" id="kobo.1068.2">
     However, it is important to keep in mind that, for now, all these actions always execute on the client side, i.e., in the browser of the website visitor.
    </span>
    <span class="koboSpan" id="kobo.1068.3">
     Server-side actions will be explored in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1069.1">
      Chapter 16
     </span>
    </em>
    <span class="koboSpan" id="kobo.1070.1">
     .
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-181">
    <span class="koboSpan" id="kobo.1071.1">
     Behind the Scenes: Actions Are Transitions
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1072.1">
     Before diving deeper into form actions, it may be helpful to take a brief look under the hood.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1073.1">
     This is because, technically, actions (i.e., both client and server actions) in React are so-called
    </span>
    <strong class="keyWord">
     <span class="koboSpan" id="kobo.1074.1">
      transitions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1075.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1075.2">
     To be
    </span>
    <a id="_idIndexMarker423">
    </a>
    <span class="koboSpan" id="kobo.1076.1">
     precise, they are asynchronous transitions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1077.1">
     Thus, the question is, what’s a transition in React?
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1078.1">
     In a React app, a transition is a concept, where React will ensure that some potentially time-consuming state updates will not block UI updates.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1079.1">
     Form actions can be considered (potentially) time-consuming state updates; hence, under the hood, React handles them such that the remaining UI will stay responsive.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1080.1">
     As a result, any state updating calls you make inside a form action function will only be processed by React once that form action is done.
    </span>
    <span class="koboSpan" id="kobo.1080.2">
     For example, the following code will, probably unexpectedly, only update the UI after three seconds:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1081.1">import</span></span><span class="koboSpan" id="kobo.1082.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1083.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1084.1">'react'</span></span><span class="koboSpan" id="kobo.1085.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1086.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1087.1">App</span></span><span class="koboSpan" id="kobo.1088.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1089.1">const</span></span><span class="koboSpan" id="kobo.1090.1"> [error, setError] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1091.1">useState</span></span><span class="koboSpan" id="kobo.1092.1">(</span><span class="hljs-literal"><span class="koboSpan" id="kobo.1093.1">null</span></span><span class="koboSpan" id="kobo.1094.1">);
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1095.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1096.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1097.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1098.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1099.1">formData</span></span><span class="koboSpan" id="kobo.1100.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1101.1">const</span></span><span class="koboSpan" id="kobo.1102.1"> todoTitle = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1103.1">get</span></span><span class="koboSpan" id="kobo.1104.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1105.1">'title'</span></span><span class="koboSpan" id="kobo.1106.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1107.1">if</span></span><span class="koboSpan" id="kobo.1108.1"> (!todoTitle || todoTitle.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1109.1">trim</span></span><span class="koboSpan" id="kobo.1110.1">() === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1111.1">''</span></span><span class="koboSpan" id="kobo.1112.1">) {
      </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1113.1">setError</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1114.1">(</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1115.1">'Title is required.'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1116.1">); </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1117.1">// state update BEFORE delay</span></strong></span><span class="koboSpan" id="kobo.1118.1">
    }
    </span><span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1119.1">// 3s delay to simulate a slow process</span></strong></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1120.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1121.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1122.1">Promise</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1123.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1124.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1125.1">resolve</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1126.1">) =&gt;</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1127.1">setTimeout</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1128.1">(resolve, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1129.1">3000</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1130.1">));</span></strong></span> 
    <span class="hljs-variable"><span class="koboSpan" id="kobo.1131.1">console</span></span><span class="koboSpan" id="kobo.1132.1">.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1133.1">log</span></span><span class="koboSpan" id="kobo.1134.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1135.1">'Submission done!'</span></span><span class="koboSpan" id="kobo.1136.1">);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1137.1">return</span></span><span class="koboSpan" id="kobo.1138.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1139.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1140.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1141.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1142.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1143.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1144.1">{storeTodoAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1145.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1146.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1147.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1148.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1149.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1150.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1151.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1152.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1153.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1154.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1155.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1156.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1157.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1158.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1159.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1160.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1161.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1162.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1163.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1164.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1165.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1166.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1167.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1168.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1169.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1170.1"> /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1171.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1172.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1173.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1174.1">        {error &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1175.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1176.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1177.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1178.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1179.1">"errors"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1180.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1181.1">{error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1182.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1183.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1184.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1185.1">}</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1186.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1187.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1188.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1189.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1190.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1191.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1192.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1193.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1194.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1195.1">Store Todo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1196.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1197.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1198.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1199.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1200.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1201.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1202.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1203.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1204.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1205.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.1206.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1207.1">
     Even though the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1208.1">
      error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1209.1">
     state is updated before the delay starts, React will not re-execute the
    </span>
    <a id="_idIndexMarker424">
    </a>
    <span class="koboSpan" id="kobo.1210.1">
     component function (and, therefore, update the UI) before the form action as a whole is done.
    </span>
    <span class="koboSpan" id="kobo.1210.2">
     Therefore, the error message only shows up on the screen after three seconds.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1211.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_09_01.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1212.1">
     Figure 9.1: The error message only shows up with a delay
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.1213.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.1214.1">
      You find the complete example code on GitHub:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/examples/08-transition">
      <span class="url">
       <span class="koboSpan" id="kobo.1215.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/examples/08-transition
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1216.1">
      .
     </span>
    </p>
   </div>
   <h1 class="heading-1" id="_idParaDest-182">
    <span class="koboSpan" id="kobo.1217.1">
     Managing State Based on Form Submissions
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1218.1">
     When handling form submissions, it’s quite common that you may also want to update the UI
    </span>
    <a id="_idIndexMarker425">
    </a>
    <span class="koboSpan" id="kobo.1219.1">
     after the submission.
    </span>
    <span class="koboSpan" id="kobo.1219.2">
     For asynchronous actions, where the executed operation may take a couple of seconds (depending on the operation, of course), you might even want to update the UI during the submission, showing some pending state while the submitted form is being processed.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1220.1">
     React aims to help you with both requirements by offering two specific form action-related Hooks:
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1221.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1222.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1223.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1224.1">
     .
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-183">
    <span class="koboSpan" id="kobo.1225.1">
     Updating UI State with useActionState()
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1226.1">
     React provides a Hook called
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1227.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1228.1">
     , which is meant to be used in conjunction
    </span>
    <a id="_idIndexMarker426">
    </a>
    <span class="koboSpan" id="kobo.1229.1">
     with form actions—no matter whether you work with client or server actions.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1230.1">
     The goal
    </span>
    <a id="_idIndexMarker427">
    </a>
    <span class="koboSpan" id="kobo.1231.1">
     of this Hook is to help you update
    </span>
    <a id="_idIndexMarker428">
    </a>
    <span class="koboSpan" id="kobo.1232.1">
     the application’s UI based on the result of a form action.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1233.1">
     This can, for example, be helpful to validate form input values and show an error message if there is invalid input.
    </span>
    <span class="koboSpan" id="kobo.1233.2">
     To perform this task, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1234.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1235.1">
     Hook can be imported from the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1236.1">
      react
     </span>
    </code>
    <span class="koboSpan" id="kobo.1237.1">
     package and used like this:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1238.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1239.1"> { useActionState } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1240.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1241.1">'react'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1242.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1243.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1244.1">App</span></span><span class="koboSpan" id="kobo.1245.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1246.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1247.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1248.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1249.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1250.1">prevState</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.1251.1">, formData</span></span><span class="koboSpan" id="kobo.1252.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1253.1">const</span></span><span class="koboSpan" id="kobo.1254.1"> todoTitle = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1255.1">get</span></span><span class="koboSpan" id="kobo.1256.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1257.1">'title'</span></span><span class="koboSpan" id="kobo.1258.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1259.1">if</span></span><span class="koboSpan" id="kobo.1260.1"> (!todoTitle || todoTitle.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1261.1">trim</span></span><span class="koboSpan" id="kobo.1262.1">() === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1263.1">''</span></span><span class="koboSpan" id="kobo.1264.1">) {
      </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1265.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1266.1"> {</span></strong></span>
        <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1267.1">error</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1268.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1269.1">'Title must not be empty.'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1270.1">,</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1271.1">};</span></strong></span><span class="koboSpan" id="kobo.1272.1">
    }
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1273.1">// sending HTTP request etc...</span></span>
    <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1274.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1275.1"> {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1276.1">error</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1277.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1278.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1279.1">,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1280.1">};</span></strong></span><span class="koboSpan" id="kobo.1281.1">
  }
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1282.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1283.1"> [formState, formAction] = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1284.1">useActionState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1285.1">(storeTodoAction, {</span></strong></span>
    <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1286.1">error</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1287.1">: </span></strong><strong class="hljs-literal-slc"><span class="koboSpan" id="kobo.1288.1">null</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1289.1">,</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1290.1">});</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1291.1">return</span></span><span class="koboSpan" id="kobo.1292.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1293.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1294.1">form</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1295.1">action</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1296.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1297.1">{formAction}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1298.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1299.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1300.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1301.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1302.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1303.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1304.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1305.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1306.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1307.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1308.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1309.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1310.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1311.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1312.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1313.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1314.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1315.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1316.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1317.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1318.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1319.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1320.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1321.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1322.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1323.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1324.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1325.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1326.1">&gt;</span></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1327.1">{formState.error &amp;&amp; </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1328.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1329.1">p</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1330.1">className</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1331.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1332.1">'errors'</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1333.1">&gt;</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1334.1">{formState.error}</span></strong></span>
      <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1335.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1336.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1337.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1338.1">}</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1339.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1340.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1341.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1342.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1343.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1344.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1345.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1346.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1347.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1348.1">Store Todo</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1349.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1350.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1351.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1352.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1353.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1354.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1355.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1356.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1357.1">&gt;</span></span><span class="koboSpan" id="kobo.1358.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1359.1">
     When
    </span>
    <a id="_idIndexMarker429">
    </a>
    <span class="koboSpan" id="kobo.1360.1">
     running this
    </span>
    <a id="_idIndexMarker430">
    </a>
    <span class="koboSpan" id="kobo.1361.1">
     example application, users will see validation
    </span>
    <a id="_idIndexMarker431">
    </a>
    <span class="koboSpan" id="kobo.1362.1">
     error messages if there is invalid input.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1363.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_09_02.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1364.1">
     Figure 9.2: An error message is shown when submitting an empty input field
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1365.1">
     A couple of things are going on in this code example:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1366.1">
      The form action function was changed to accept two parameters instead of just one: a previous state (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1367.1">
       prevState
      </span>
     </code>
     <span class="koboSpan" id="kobo.1368.1">
      ) and the submitted data (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1369.1">
       formData
      </span>
     </code>
     <span class="koboSpan" id="kobo.1370.1">
      ).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1371.1">
      The form action now also returns a value: an object with a key named
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1372.1">
       error
      </span>
     </code>
     <span class="koboSpan" id="kobo.1373.1">
      that contains an error message or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1374.1">
       null
      </span>
     </code>
     <span class="koboSpan" id="kobo.1375.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1376.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1377.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1378.1">
      Hook is imported and used: it receives the form action function (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1379.1">
       storeTodoAction
      </span>
     </code>
     <span class="koboSpan" id="kobo.1380.1">
      ) as a first argument, and some initial state object (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1381.1">
       {error: null}
      </span>
     </code>
     <span class="koboSpan" id="kobo.1382.1">
      in this case) as a second argument.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1383.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1384.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.1385.1">
      Hook also returns a value: an array from which two elements are destructured (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1386.1">
       formState
      </span>
     </code>
     <span class="koboSpan" id="kobo.1387.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1388.1">
       formAction
      </span>
     </code>
     <span class="koboSpan" id="kobo.1389.1">
      ).
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.1390.1">
      The destructured
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1391.1">
       formAction
      </span>
     </code>
     <span class="koboSpan" id="kobo.1392.1">
      replaces
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1393.1">
       storeTodoAction
      </span>
     </code>
     <span class="koboSpan" id="kobo.1394.1">
      as a value for the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1395.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1396.1">
      's
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1397.1">
       action
      </span>
     </code>
     <span class="koboSpan" id="kobo.1398.1">
      prop.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1399.1">
       formState
      </span>
     </code>
     <span class="koboSpan" id="kobo.1400.1">
      is used to conditionally display the value stored in the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1401.1">
       error
      </span>
     </code>
     <span class="koboSpan" id="kobo.1402.1">
      key of
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1403.1">
       formState
      </span>
     </code>
     <span class="koboSpan" id="kobo.1404.1">
      .
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1405.1">
     So, as you can see,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1406.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1407.1">
     is a Hook that expects a form action function (synchronous or asynchronous) as a first argument and an initial state as a second input.
    </span>
    <span class="koboSpan" id="kobo.1407.2">
     That
    </span>
    <a id="_idIndexMarker432">
    </a>
    <span class="koboSpan" id="kobo.1408.1">
     initial state is required
    </span>
    <a id="_idIndexMarker433">
    </a>
    <span class="koboSpan" id="kobo.1409.1">
     to have some state available if the
    </span>
    <a id="_idIndexMarker434">
    </a>
    <span class="koboSpan" id="kobo.1410.1">
     form has not been submitted yet.
    </span>
    <span class="koboSpan" id="kobo.1410.2">
     After form submission, the initial state will be replaced by new state values returned by the form action function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1411.1">
     Since the purpose of
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1412.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1413.1">
     is to provide some state value that can be used to update (parts of) the UI, that derived state is exposed via the value returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1414.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1415.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1416.1">const</span></span><span class="koboSpan" id="kobo.1417.1"> [</span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1418.1">formState</span></strong></span><span class="koboSpan" id="kobo.1419.1">, formAction] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1420.1">useActionState</span></span><span class="koboSpan" id="kobo.1421.1">(storeTodoAction, {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1422.1">error</span></span><span class="koboSpan" id="kobo.1423.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1424.1">null</span></span><span class="koboSpan" id="kobo.1425.1">,
  }
);
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1426.1">
     That returned value is an array with exactly three elements, in the following order:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.1427.1">
      The current state value, which is either the initial state (if the form wasn’t submitted yet) or the state value returned by the form action function.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1428.1">
      An updated form action function, which is essentially your action function, wrapped by React.
     </span>
     <span class="koboSpan" id="kobo.1428.2">
      This is necessary so that React gets access to the value returned by your action function (which is the new state).
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.1429.1">
      A boolean value that indicates whether the form is currently being submitted or not.
     </span>
     <span class="koboSpan" id="kobo.1429.2">
      This third element is not used in the previous code example and will be discussed in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1430.1">
       Managing Pending UI State
      </span>
     </em>
     <span class="koboSpan" id="kobo.1431.1">
      section of this chapter.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.1432.1">
     Therefore, when using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1433.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1434.1">
     , you no longer bind your action function to the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1435.1">
      action
     </span>
    </code>
    <span class="koboSpan" id="kobo.1436.1">
     prop of the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1437.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1438.1">
     element.
    </span>
    <span class="koboSpan" id="kobo.1438.2">
     Instead, you use the action function created by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1439.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1440.1">
     —i.e., you use the action function that wraps your action function.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1441.1">
     When using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1442.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1443.1">
     , you also must adjust your form action function because React will call your function with two arguments instead of just one: the previous state and the submitted form data:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1444.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1445.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1446.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1447.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1448.1">prevState</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.1449.1">, formData</span></span><span class="koboSpan" id="kobo.1450.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1451.1">// ...</span></span><span class="koboSpan" id="kobo.1452.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1453.1">
     The previous form state is passed to your action function so that you can use it to derive your
    </span>
    <a id="_idIndexMarker435">
    </a>
    <span class="koboSpan" id="kobo.1454.1">
     new state from it (in conjunction with the submitted form data).
    </span>
    <span class="koboSpan" id="kobo.1454.2">
     In the above example, this is actually
    </span>
    <a id="_idIndexMarker436">
    </a>
    <span class="koboSpan" id="kobo.1455.1">
     not the case—the previous state
    </span>
    <a id="_idIndexMarker437">
    </a>
    <span class="koboSpan" id="kobo.1456.1">
     parameter is not used there.
    </span>
    <span class="koboSpan" id="kobo.1456.2">
     It must be accepted as a parameter nonetheless.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1457.1">
     However, that’s not the only change made to the form action function.
    </span>
    <span class="koboSpan" id="kobo.1457.2">
     Instead, it should now also return a new state value that will then be exposed to the component function by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1458.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1459.1">
     (via the first element in the array returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1460.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1461.1">
     ):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1462.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1463.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1464.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1465.1">(</span><span class="code-highlight"><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1466.1">prevState</span></strong></span><span class="hljs-params"><span class="koboSpan" id="kobo.1467.1">, formData</span></span><span class="koboSpan" id="kobo.1468.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1469.1">// ...</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1470.1">return</span></span><span class="koboSpan" id="kobo.1471.1"> {
    </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1472.1">error</span></span><span class="koboSpan" id="kobo.1473.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1474.1">'Title must not be empty.'</span></span><span class="koboSpan" id="kobo.1475.1">
  };
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1476.1">
     That state value can be anything—a string, a number, an array, an object, etc.
    </span>
    <span class="koboSpan" id="kobo.1476.2">
     In the previous code example, it’s an object with a key named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1477.1">
      error
     </span>
    </code>
    <span class="koboSpan" id="kobo.1478.1">
     that holds either
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1479.1">
      null
     </span>
    </code>
    <span class="koboSpan" id="kobo.1480.1">
     or a string error message.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1481.1">
     Whenever the form is submitted, and the form action function is therefore executed or returns a value,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1482.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1483.1">
     will trigger React to re-execute the surrounding component function.
    </span>
    <span class="koboSpan" id="kobo.1483.2">
     Hence, the updated state is made available.
    </span>
    <span class="koboSpan" id="kobo.1483.3">
     If that sounds familiar to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1484.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1485.1">
     , you’re right!
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1486.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1487.1">
     is essentially like
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1488.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1489.1">
     , fine-tuned to derive state from actions.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1490.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1491.1">
     is, therefore, definitely an important Hook, although it’s actually not limited to just exposing the values returned by your actions to component functions.
    </span>
   </p>
   <h3 class="heading-3" id="_idParaDest-184">
    <span class="koboSpan" id="kobo.1492.1">
     Managing Pending UI State with useActionState()
    </span>
   </h3>
   <p class="normal">
    <span class="koboSpan" id="kobo.1493.1">
     Consider a scenario where you have a form action that takes a couple of seconds to finish
    </span>
    <a id="_idIndexMarker438">
    </a>
    <span class="koboSpan" id="kobo.1494.1">
     its operation.
    </span>
    <span class="koboSpan" id="kobo.1494.2">
     For example, you could have an action that sends a request to a slow server or via a slow internet
    </span>
    <a id="_idIndexMarker439">
    </a>
    <span class="koboSpan" id="kobo.1495.1">
     connection.
    </span>
    <span class="koboSpan" id="kobo.1495.2">
     In such scenarios, you might want to update the UI during the form submission to show the user that something is happening.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1496.1">
     In the following example, a function named
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1497.1">
      saveTodo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1498.1">
     is called from inside the form action.
    </span>
    <span class="koboSpan" id="kobo.1498.2">
     That function adds a deliberate delay of three seconds to simulate a slow network or server:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1499.1">async</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1500.1">function</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1501.1">saveTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1502.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1503.1">todo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1504.1">) {</span></strong></span>
  <span class="code-highlight"><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1505.1">// dummy function that simulates a slow backend which manages todos</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1506.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1507.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1508.1">Promise</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1509.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1510.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1511.1">resolve</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1512.1">) =&gt;</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1513.1">setTimeout</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1514.1">(resolve, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1515.1">3000</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1516.1">)); </span></strong><strong class="hljs-comment-slc"><span class="koboSpan" id="kobo.1517.1">// delay</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1518.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1519.1"> response = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1520.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1521.1">fetch</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1522.1">(</span></strong></span>
    <span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1523.1">'https://jsonplaceholder.typicode.com/todos'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1524.1">, {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1525.1">method</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1526.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1527.1">'POST'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1528.1">,</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1529.1">body</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1530.1">: </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1531.1">JSON</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1532.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1533.1">stringify</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1534.1">(todo),</span></strong></span>
      <span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1535.1">headers</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1536.1">: {</span></strong></span>
        <span class="code-highlight"><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1537.1">'Content-type'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1538.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1539.1">'application/json; charset=UTF-8'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1540.1">,</span></strong></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1541.1">},</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1542.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1543.1">);</span></strong></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1544.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1545.1"> fetchedTodo = </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1546.1">await</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1547.1"> response.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1548.1">json</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1549.1">();</span></strong></span>
  <span class="code-highlight"><strong class="hljs-variable-slc"><span class="koboSpan" id="kobo.1550.1">console</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1551.1">.</span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1552.1">log</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1553.1">(fetchedTodo);</span></strong></span>
<span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1554.1">}</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1555.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1556.1">App</span></span><span class="koboSpan" id="kobo.1557.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1558.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1559.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1560.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1561.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1562.1">prevState, formData</span></span><span class="koboSpan" id="kobo.1563.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1564.1">const</span></span><span class="koboSpan" id="kobo.1565.1"> todoTitle = formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1566.1">get</span></span><span class="koboSpan" id="kobo.1567.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1568.1">'title'</span></span><span class="koboSpan" id="kobo.1569.1">);
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1570.1">if</span></span><span class="koboSpan" id="kobo.1571.1"> (!todoTitle || todoTitle.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1572.1">trim</span></span><span class="koboSpan" id="kobo.1573.1">() === </span><span class="hljs-string"><span class="koboSpan" id="kobo.1574.1">''</span></span><span class="koboSpan" id="kobo.1575.1">) {
      </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1576.1">return</span></span><span class="koboSpan" id="kobo.1577.1"> {
        </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1578.1">error</span></span><span class="koboSpan" id="kobo.1579.1">: </span><span class="hljs-string"><span class="koboSpan" id="kobo.1580.1">'Title must not be empty.'</span></span><span class="koboSpan" id="kobo.1581.1">,
      };
    }
    </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1582.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1583.1">saveTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1584.1">({ </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1585.1">title</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1586.1">: todoTitle });</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.1587.1">return</span></span><span class="koboSpan" id="kobo.1588.1"> {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1589.1">error</span></span><span class="koboSpan" id="kobo.1590.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1591.1">null</span></span><span class="koboSpan" id="kobo.1592.1">,
    };
  }
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1593.1">// same code as before, hence omitted</span></span><span class="koboSpan" id="kobo.1594.1">
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1595.1">
     When using form actions, like in this example, updating the UI while the form submission
    </span>
    <a id="_idIndexMarker440">
    </a>
    <span class="koboSpan" id="kobo.1596.1">
     is handled is relatively
    </span>
    <a id="_idIndexMarker441">
    </a>
    <span class="koboSpan" id="kobo.1597.1">
     easy because
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1598.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1599.1">
     exposes a third element in its returned array: a boolean that indicates whether the action is currently executing or not.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1600.1">
     The above example can, therefore, be adjusted like this to take advantage of that boolean value:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1601.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1602.1">App</span></span><span class="koboSpan" id="kobo.1603.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1604.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1605.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1606.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1607.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1608.1">prevState, formData</span></span><span class="koboSpan" id="kobo.1609.1">) {
    </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1610.1">// same code as before, hence omitted</span></span><span class="koboSpan" id="kobo.1611.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1612.1">const</span></span><span class="koboSpan" id="kobo.1613.1"> [formState, formAction, </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1614.1">pending</span></strong></span><span class="koboSpan" id="kobo.1615.1">] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.1616.1">useActionState</span></span><span class="koboSpan" id="kobo.1617.1">(
    storeTodoAction, 
    {
      </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1618.1">error</span></span><span class="koboSpan" id="kobo.1619.1">: </span><span class="hljs-literal"><span class="koboSpan" id="kobo.1620.1">null</span></span><span class="koboSpan" id="kobo.1621.1">,
    }
  );
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1622.1">return</span></span><span class="koboSpan" id="kobo.1623.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1624.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1625.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1626.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1627.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1628.1">{formAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1629.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1630.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1631.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1632.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1633.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1634.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1635.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1636.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1637.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1638.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1639.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1640.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1641.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1642.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1643.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1644.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1645.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1646.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1647.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1648.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1649.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1650.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1651.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1652.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1653.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1654.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1655.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1656.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1657.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.1658.1">      {formState.error &amp;&amp; </span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1659.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1660.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1661.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1662.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1663.1">"errors"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1664.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1665.1">{formState.error}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1666.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1667.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1668.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1669.1">}</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1670.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1671.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1672.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1673.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1674.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1675.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1676.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1677.1">button</span></span><span class="hljs-tag"> </span><span class="code-highlight"><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.1678.1">disabled</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1679.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1680.1">{pending}</span></strong></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1681.1">&gt;</span></span>
          <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1682.1">{pending ? </span><span class="koboSpan" id="kobo.1682.2">'Saving' : 'Store'} Todo</span></strong></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1683.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1684.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1685.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1686.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1687.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1688.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1689.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1690.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1691.1">&gt;</span></span><span class="koboSpan" id="kobo.1692.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1693.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1694.1">
      pending
     </span>
    </code>
    <span class="koboSpan" id="kobo.1695.1">
     element is retrieved from the array via destructuring, and then it is used to disable the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1696.1">
      &lt;button&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1697.1">
     and update the button text.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1698.1">
     As a
    </span>
    <a id="_idIndexMarker442">
    </a>
    <span class="koboSpan" id="kobo.1699.1">
     result, the UI changes once
    </span>
    <a id="_idIndexMarker443">
    </a>
    <span class="koboSpan" id="kobo.1700.1">
     the form is submitted—until it’s done after three seconds (in this case, due to the delay added in the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1701.1">
      saveTodo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1702.1">
     function earlier).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.1703.1">
     <img alt="A screenshot of a computer  Description automatically generated" src="image/B31339_09_03.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.1704.1">
     Figure 9.3: The button is disabled and shows Saving Todo fallback text during form submission
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-185">
    <span class="koboSpan" id="kobo.1705.1">
     Handling Pending UI State with useFormStatus()
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.1706.1">
     The
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1707.1">
      pending
     </span>
    </code>
    <span class="koboSpan" id="kobo.1708.1">
     element
    </span>
    <a id="_idIndexMarker444">
    </a>
    <span class="koboSpan" id="kobo.1709.1">
     returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1710.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1711.1">
     is a simple and straightforward, but not the only, way of updating the UI while a form action executes.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1712.1">
     React
    </span>
    <a id="_idIndexMarker445">
    </a>
    <span class="koboSpan" id="kobo.1713.1">
     also offers a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1714.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1715.1">
     Hook that provides information about the current form submission status.
    </span>
    <span class="koboSpan" id="kobo.1715.2">
     To
    </span>
    <a id="_idIndexMarker446">
    </a>
    <span class="koboSpan" id="kobo.1716.1">
     be precise, it’s the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1717.1">
      react-dom
     </span>
    </code>
    <span class="koboSpan" id="kobo.1718.1">
     package (not
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1719.1">
      react
     </span>
    </code>
    <span class="koboSpan" id="kobo.1720.1">
     !) that exports this
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1721.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1722.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1723.1">
     Unlike
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1724.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1725.1">
     ,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1726.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1727.1">
     must be called in some nested component that’s wrapped by the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1728.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1729.1">
     element whose submission status you’re interested in.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1730.1">
     You could, for example, build a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1731.1">
      SubmitButton
     </span>
    </code>
    <span class="koboSpan" id="kobo.1732.1">
     component that’s defined and used as shown in this code snippet:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1733.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1734.1"> { useFormStatus } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1735.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.1736.1">'react-dom'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1737.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.1738.1">import</span></span><span class="koboSpan" id="kobo.1739.1"> { saveTodo } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1740.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1741.1">'./todos.js'</span></span><span class="koboSpan" id="kobo.1742.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1743.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1744.1">SubmitButton</span></span><span class="koboSpan" id="kobo.1745.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1746.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1747.1"> { pending } = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1748.1">useFormStatus</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1749.1">();</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1750.1">return</span></span><span class="koboSpan" id="kobo.1751.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1752.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1753.1">button</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1754.1">disabled</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1755.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1756.1">{pending}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1757.1">&gt;</span></span>
      <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.1758.1">{pending ? </span><span class="koboSpan" id="kobo.1758.2">'Saving' : 'Store'} Todo</span></strong></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1759.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1760.1">button</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1761.1">&gt;</span></span><span class="koboSpan" id="kobo.1762.1">
  );
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1763.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1764.1">App</span></span><span class="koboSpan" id="kobo.1765.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1766.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1767.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1768.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1769.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1770.1">formData</span></span><span class="koboSpan" id="kobo.1771.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1772.1">const</span></span><span class="koboSpan" id="kobo.1773.1"> todo = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1774.1">title</span></span><span class="koboSpan" id="kobo.1775.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1776.1">get</span></span><span class="koboSpan" id="kobo.1777.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1778.1">'title'</span></span><span class="koboSpan" id="kobo.1779.1">) };
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1780.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1781.1">saveTodo</span></span><span class="koboSpan" id="kobo.1782.1">(todo);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1783.1">return</span></span><span class="koboSpan" id="kobo.1784.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1785.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1786.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1787.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1788.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1789.1">{storeTodoAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1790.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1791.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1792.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1793.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1794.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1795.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1796.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1797.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1798.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1799.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.1800.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1801.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1802.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1803.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1804.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1805.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1806.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1807.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1808.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1809.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1810.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1811.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1812.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1813.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1814.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1815.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1816.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1817.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1818.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1819.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1820.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1821.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1822.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.1823.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1824.1">&gt;</span></span>
        <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1825.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.1826.1">SubmitButton</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.1827.1"> /&gt;</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1828.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1829.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1830.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.1831.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.1832.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.1833.1">&gt;</span></span><span class="koboSpan" id="kobo.1834.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.1835.1">
     In this example, the actual code to send the to-do to a backend server is extracted into a separate
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1836.1">
      saveTodo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1837.1">
     function that’s stored in a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1838.1">
      todo.js
     </span>
    </code>
    <span class="koboSpan" id="kobo.1839.1">
     file.
    </span>
    <span class="koboSpan" id="kobo.1839.2">
     That function contains the same
    </span>
    <a id="_idIndexMarker447">
    </a>
    <span class="koboSpan" id="kobo.1840.1">
     code that was shown in earlier examples (i.e., it sends an HTTP request to JSONPlaceholder).
    </span>
    <span class="koboSpan" id="kobo.1840.2">
     In addition,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1841.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1842.1">
     is removed to make the code a bit shorter
    </span>
    <a id="_idIndexMarker448">
    </a>
    <span class="koboSpan" id="kobo.1843.1">
     and simpler again.
    </span>
    <span class="koboSpan" id="kobo.1843.2">
     However, you can absolutely use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1844.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1845.1">
     in conjunction with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1846.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1847.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1847.2">
     For example, you could use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1848.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1849.1">
     to output validation errors
    </span>
    <a id="_idIndexMarker449">
    </a>
    <span class="koboSpan" id="kobo.1850.1">
     while managing the submit button’s
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1851.1">
      disabled
     </span>
    </code>
    <span class="koboSpan" id="kobo.1852.1">
     state via
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1853.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1854.1">
     in a separate, nested component.
    </span>
   </p>
   <p class="normal">
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1855.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1856.1">
     is imported from
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1857.1">
      react-dom
     </span>
    </code>
    <span class="koboSpan" id="kobo.1858.1">
     and called inside the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1859.1">
      SubmitButton
     </span>
    </code>
    <span class="koboSpan" id="kobo.1860.1">
     component function.
    </span>
    <span class="koboSpan" id="kobo.1860.2">
     It returns an object that contains a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1861.1">
      pending
     </span>
    </code>
    <span class="koboSpan" id="kobo.1862.1">
     property yielding a boolean value.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1863.1">
     As mentioned before,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1864.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1865.1">
     can’t be used in the component where the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1866.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1867.1">
     element is rendered.
    </span>
    <span class="koboSpan" id="kobo.1867.2">
     Instead, it must be used in a nested component—that’s why the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1868.1">
      &lt;SubmitButton&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1869.1">
     component is placed between the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1870.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1871.1">
     tags.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1872.1">
     Besides
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1873.1">
      pending
     </span>
    </code>
    <span class="koboSpan" id="kobo.1874.1">
     , the object returned by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1875.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1876.1">
     also holds three other properties:
    </span>
   </p>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1877.1">
       data
      </span>
     </code>
     <span class="koboSpan" id="kobo.1878.1">
      : A
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1879.1">
       FormData
      </span>
     </code>
     <span class="koboSpan" id="kobo.1880.1">
      object that contains the data with which the parent
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1881.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1882.1">
      was submitted (i.e., the same kind of data that the form action function receives).
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1883.1">
       method
      </span>
     </code>
     <span class="koboSpan" id="kobo.1884.1">
      : A string value that’s either
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1885.1">
       'get'
      </span>
     </code>
     <span class="koboSpan" id="kobo.1886.1">
      or
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1887.1">
       'post'
      </span>
     </code>
     <span class="koboSpan" id="kobo.1888.1">
      , reflecting the value to which the method prop on the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1889.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1890.1">
      element was set.
     </span>
     <span class="koboSpan" id="kobo.1890.2">
      By default, it’s
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1891.1">
       'get'
      </span>
     </code>
     <span class="koboSpan" id="kobo.1892.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1893.1">
       action
      </span>
     </code>
     <span class="koboSpan" id="kobo.1894.1">
      : A pointer to the form action function that’s connected to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.1895.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.1896.1">
      .
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.1897.1">
     If you only care about the pending status, you can, of course, either use
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1898.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1899.1">
     or
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1900.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1901.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1901.2">
     Working with
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1902.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1903.1">
     has the advantage that no separate nested component must be built.
    </span>
    <span class="koboSpan" id="kobo.1903.2">
     On the other hand, creating such an extra component and relying on
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1904.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1905.1">
     might be useful if you have multiple forms on the page—you could then, for example, reuse the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1906.1">
      &lt;SubmitButton&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1907.1">
     across all those forms.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-186">
    <span class="koboSpan" id="kobo.1908.1">
     Performing Optimistic Updates
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.1909.1">
     Besides
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1910.1">
      useActionState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1911.1">
     and
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1912.1">
      useFormStatus()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1913.1">
     , React offers one last important Hook related to forms and form actions: the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1914.1">
      useOptimistic()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1915.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1916.1">
     The idea
    </span>
    <a id="_idIndexMarker450">
    </a>
    <span class="koboSpan" id="kobo.1917.1">
     behind this Hook is that you can use it to show some temporary, optimistic UI while an asynchronous form action (which may take a couple of seconds) is underway.
    </span>
    <span class="koboSpan" id="kobo.1917.2">
     “Optimistic” means that you can use this Hook to render a UI that would normally only exist after the form submission is finished (e.g., a list of to-dos that already includes the newly submitted to-do).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.1918.1">
     The following example code manages a to-do list with the help of a
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1919.1">
      &lt;form&gt;
     </span>
    </code>
    <span class="koboSpan" id="kobo.1920.1">
     and form action, but without using
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.1921.1">
      useOptimistic()
     </span>
    </code>
    <span class="koboSpan" id="kobo.1922.1">
     :
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.1923.1">import</span></span><span class="koboSpan" id="kobo.1924.1"> { useFormStatus } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1925.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1926.1">'react-dom'</span></span><span class="koboSpan" id="kobo.1927.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1928.1">import</span></span><span class="koboSpan" id="kobo.1929.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1930.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.1931.1">'react'</span></span><span class="koboSpan" id="kobo.1932.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1933.1">let</span></span><span class="koboSpan" id="kobo.1934.1"> storedTodos = [];
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1935.1">export</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1936.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1937.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1938.1">saveTodo</span></span><span class="koboSpan" id="kobo.1939.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1940.1">todo</span></span><span class="koboSpan" id="kobo.1941.1">) {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1942.1">// dummy function that simulates a slow backend which manages todos</span></span>
  <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1943.1">await</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1944.1">new</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1945.1">Promise</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1946.1">(</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1947.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.1948.1">resolve</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.1949.1">) =&gt;</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-built_in-slc"><span class="koboSpan" id="kobo.1950.1">setTimeout</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1951.1">(resolve, </span></strong><strong class="hljs-number-slc"><span class="koboSpan" id="kobo.1952.1">3000</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1953.1">));</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1954.1">const</span></span><span class="koboSpan" id="kobo.1955.1"> newTodo = { ...todo, </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1956.1">id</span></span><span class="koboSpan" id="kobo.1957.1">: </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1958.1">new</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1959.1">Date</span></span><span class="koboSpan" id="kobo.1960.1">().</span><span class="hljs-title"><span class="koboSpan" id="kobo.1961.1">getTime</span></span><span class="koboSpan" id="kobo.1962.1">() };
  storedTodos = [...storedTodos, newTodo];
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1963.1">return</span></span><span class="koboSpan" id="kobo.1964.1"> storedTodos;
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1965.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1966.1">SubmitButton</span></span><span class="koboSpan" id="kobo.1967.1">() {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1968.1">// same as before, didn't change, hence omitted here</span></span><span class="koboSpan" id="kobo.1969.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1970.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1971.1">App</span></span><span class="koboSpan" id="kobo.1972.1">() {
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.1973.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1974.1"> [todos, setTodos] = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1975.1">useState</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1976.1">(storedTodos);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.1977.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.1978.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1979.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.1980.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.1981.1">formData</span></span><span class="koboSpan" id="kobo.1982.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1983.1">const</span></span><span class="koboSpan" id="kobo.1984.1"> todo = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.1985.1">title</span></span><span class="koboSpan" id="kobo.1986.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.1987.1">get</span></span><span class="koboSpan" id="kobo.1988.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.1989.1">'title'</span></span><span class="koboSpan" id="kobo.1990.1">) };
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1991.1">const</span></span><span class="koboSpan" id="kobo.1992.1"> updatedTodos = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.1993.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.1994.1">saveTodo</span></span><span class="koboSpan" id="kobo.1995.1">(todo); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.1996.1">// takes 3s</span></span>
    <span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.1997.1">setTodos</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.1998.1">(updatedTodos);</span></strong></span><span class="koboSpan" id="kobo.1999.1">
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2000.1">return</span></span><span class="koboSpan" id="kobo.2001.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2002.1">&lt;&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2003.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2004.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2005.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2006.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2007.1">{storeTodoAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2008.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2009.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2010.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2011.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2012.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2013.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2014.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2015.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2016.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2017.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2018.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2019.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2020.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2021.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2022.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2023.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2024.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2025.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2026.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2027.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2028.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2029.1">"</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2030.1">title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2031.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2032.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2033.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2034.1"> /&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2035.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2036.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2037.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2038.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2039.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2040.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2041.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2042.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2043.1">&gt;</span></span>
<span class="language-xml">          </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2044.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2045.1">SubmitButton</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2046.1"> /&gt;</span></span>
<span class="language-xml">       </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2047.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2048.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2049.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2050.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2051.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2052.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2053.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2054.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2055.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2056.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2057.1">"todos"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2058.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2059.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2060.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2061.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2062.1">My Todos</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2063.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2064.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2065.1">&gt;</span></span>
<span class="language-xml">        </span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2066.1">{todos.length === 0 &amp;&amp; </span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2067.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2068.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2069.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2070.1">No todos found.</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2071.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2072.1">p</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2073.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2074.1">}</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2075.1">{todos.length &gt; 0 &amp;&amp; (</span></strong></span>
          <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2076.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2077.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2078.1">&gt;</span></strong></span>
            <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2079.1">{todos.map((todo) =&gt; (</span></strong></span>
              <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2080.1">&lt;</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2081.1">li</span></strong><strong class="hljs-tag-slc"> </strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2082.1">key</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2083.1">=</span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2084.1">{todo.id}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2085.1">&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2086.1">{todo.title}</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2087.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2088.1">li</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2089.1">&gt;</span></strong></span>
            <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2090.1">))}</span></strong></span>
          <span class="code-highlight"><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2091.1">&lt;/</span></strong><strong class="hljs-name-slc"><span class="koboSpan" id="kobo.2092.1">ul</span></strong><strong class="hljs-tag-slc"><span class="koboSpan" id="kobo.2093.1">&gt;</span></strong></span>
        <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2094.1">)}</span></strong></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2095.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2096.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2097.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2098.1">&lt;/&gt;</span></span><span class="koboSpan" id="kobo.2099.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2100.1">
     In this
    </span>
    <a id="_idIndexMarker451">
    </a>
    <span class="koboSpan" id="kobo.2101.1">
     example, since the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2102.1">
      saveTodo()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2103.1">
     function again has a built-in deliberate delay of three seconds, the website user sees the outdated to-do list until the form submission process is completed.
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2104.1">
     <img alt="img" src="image/B31339_09_04.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2105.1">
     Figure 9.4: Without optimistic updating, the UI updates are delayed
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2106.1">
     The user
    </span>
    <a id="_idIndexMarker452">
    </a>
    <span class="koboSpan" id="kobo.2107.1">
     experience can, therefore, be improved by introducing the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2108.1">
      useOptimistic()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2109.1">
     Hook.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2110.1">
     This Hook
    </span>
    <a id="_idIndexMarker453">
    </a>
    <span class="koboSpan" id="kobo.2111.1">
     requires two arguments and returns an array with exactly two elements:
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword"><span class="koboSpan" id="kobo.2112.1">const</span></span><span class="koboSpan" id="kobo.2113.1"> [optimisticState, addOptimistic] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2114.1">useOptimistic</span></span><span class="koboSpan" id="kobo.2115.1">(
  state, updateFunction
);
</span></code></pre>
   <ul>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2116.1">
       state
      </span>
     </code>
     <span class="koboSpan" id="kobo.2117.1">
      (the first argument) is the component state that should be active initially or if no form action is pending.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2118.1">
       updateFunction
      </span>
     </code>
     <span class="koboSpan" id="kobo.2119.1">
      (the second argument) is a function defined by you that controls how the state should be updated optimistically.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2120.1">
       optimisticState
      </span>
     </code>
     <span class="koboSpan" id="kobo.2121.1">
      is the optimistically updated state that will be active during the form action execution.
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2122.1">
       addOptimistic
      </span>
     </code>
     <span class="koboSpan" id="kobo.2123.1">
      triggers
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2124.1">
       updateFunction
      </span>
     </code>
     <span class="koboSpan" id="kobo.2125.1">
      and allows you to pass a value to that function.
     </span>
    </li>
   </ul>
   <p class="normal">
    <span class="koboSpan" id="kobo.2126.1">
     Applied to the above example,
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2127.1">
      useOptimistic()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2128.1">
     can be used to manage an alternative, optimistically updated to-dos array that will be active as long as the form action is executing.
    </span>
    <span class="koboSpan" id="kobo.2128.2">
     Thereafter, the regular state will be active again (and update the UI accordingly):
    </span>
   </p>
   <pre class="programlisting code"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2129.1">import</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2130.1"> { useOptimistic } </span></strong><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2131.1">from</span></strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2132.1">'react'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2133.1">;</span></strong></span>
<span class="hljs-keyword"><span class="koboSpan" id="kobo.2134.1">import</span></span><span class="koboSpan" id="kobo.2135.1"> { saveTodo, getTodos } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2136.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2137.1">'./todos.js'</span></span><span class="koboSpan" id="kobo.2138.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2139.1">import</span></span><span class="koboSpan" id="kobo.2140.1"> { useState } </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2141.1">from</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.2142.1">'react'</span></span><span class="koboSpan" id="kobo.2143.1">;
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2144.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2145.1">SubmitButton</span></span><span class="koboSpan" id="kobo.2146.1">() {
  </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2147.1">// same code as before, hence omitted</span></span><span class="koboSpan" id="kobo.2148.1">
}
</span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2149.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2150.1">App</span></span><span class="koboSpan" id="kobo.2151.1">() {
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2152.1">const</span></span><span class="koboSpan" id="kobo.2153.1"> loadedTodos = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2154.1">getTodos</span></span><span class="koboSpan" id="kobo.2155.1">(); </span><span class="hljs-comment"><span class="koboSpan" id="kobo.2156.1">// initial fetch</span></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2157.1">const</span></span><span class="koboSpan" id="kobo.2158.1"> [todos, setTodos] = </span><span class="hljs-title"><span class="koboSpan" id="kobo.2159.1">useState</span></span><span class="koboSpan" id="kobo.2160.1">(loadedTodos);
  </span><span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2161.1">const</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2162.1"> [optimisticTodos, addOptimisticTodo] = </span></strong><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2163.1">useOptimistic</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2164.1">(</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2165.1">todos,</span></strong></span>
    <span class="code-highlight"><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2166.1">(</span></strong><strong class="hljs-params-slc"><span class="koboSpan" id="kobo.2167.1">currentState, optimisticValue</span></strong><strong class="hljs-function-slc"><span class="koboSpan" id="kobo.2168.1">) =&gt;</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2169.1"> {</span></strong></span>
      <span class="code-highlight"><strong class="hljs-keyword-slc"><span class="koboSpan" id="kobo.2170.1">return</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2171.1"> [...currentState, { ...optimisticValue, </span></strong><strong class="hljs-attr-slc"><span class="koboSpan" id="kobo.2172.1">id</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2173.1">: </span></strong><strong class="hljs-string-slc"><span class="koboSpan" id="kobo.2174.1">'temp'</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2175.1"> }];</span></strong></span>
    <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2176.1">}</span></strong></span>
  <span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2177.1">);</span></strong></span>
  <span class="hljs-keyword"><span class="koboSpan" id="kobo.2178.1">async</span></span> <span class="hljs-keyword"><span class="koboSpan" id="kobo.2179.1">function</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2180.1">storeTodoAction</span></span><span class="koboSpan" id="kobo.2181.1">(</span><span class="hljs-params"><span class="koboSpan" id="kobo.2182.1">formData</span></span><span class="koboSpan" id="kobo.2183.1">) {
    </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2184.1">const</span></span><span class="koboSpan" id="kobo.2185.1"> todo = { </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2186.1">title</span></span><span class="koboSpan" id="kobo.2187.1">: formData.</span><span class="hljs-title"><span class="koboSpan" id="kobo.2188.1">get</span></span><span class="koboSpan" id="kobo.2189.1">(</span><span class="hljs-string"><span class="koboSpan" id="kobo.2190.1">'title'</span></span><span class="koboSpan" id="kobo.2191.1">) };
    </span><span class="code-highlight"><strong class="hljs-title-slc"><span class="koboSpan" id="kobo.2192.1">addOptimisticTodo</span></strong><strong class="hljs-slc"><span class="koboSpan" id="kobo.2193.1">(todo);</span></strong></span>
    <span class="hljs-keyword"><span class="koboSpan" id="kobo.2194.1">const</span></span><span class="koboSpan" id="kobo.2195.1"> updatedTodos = </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2196.1">await</span></span> <span class="hljs-title"><span class="koboSpan" id="kobo.2197.1">saveTodo</span></span><span class="koboSpan" id="kobo.2198.1">(todo);
    </span><span class="hljs-title"><span class="koboSpan" id="kobo.2199.1">setTodos</span></span><span class="koboSpan" id="kobo.2200.1">(updatedTodos);
  }
  </span><span class="hljs-keyword"><span class="koboSpan" id="kobo.2201.1">return</span></span><span class="koboSpan" id="kobo.2202.1"> (
    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2203.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2204.1">form</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2205.1">action</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2206.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2207.1">{storeTodoAction}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2208.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2209.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2210.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2211.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2212.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2213.1">label</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2214.1">htmlFor</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2215.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2216.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2217.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2218.1">Title</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2219.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2220.1">label</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2221.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2222.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2223.1">input</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2224.1">type</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2225.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2226.1">"text"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2227.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2228.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2229.1">"title"</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2230.1">name</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2231.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2232.1">"title"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2233.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2234.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2235.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2236.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2237.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2238.1">p</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2239.1">className</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2240.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2241.1">"actions"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2242.1">&gt;</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2243.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2244.1">SubmitButton</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2245.1"> /&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2246.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2247.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2248.1">&gt;</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2249.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2250.1">form</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2251.1">&gt;</span></span>
    <span class="hljs-tag"><span class="koboSpan" id="kobo.2252.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2253.1">div</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2254.1">id</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2255.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2256.1">"todos"</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2257.1">&gt;</span></span>
<span class="language-xml">      </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2258.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2259.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2260.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2261.1">My Todos</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2262.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2263.1">h2</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2264.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2265.1">      {</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2266.1">optimisticTodos</span></strong></span><span class="language-xml"><span class="koboSpan" id="kobo.2267.1">.length === 0 &amp;&amp; </span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2268.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2269.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2270.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2271.1">No todos found.</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2272.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2273.1">p</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2274.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2275.1">}</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2276.1">      {</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2277.1">optimisticTodos</span></strong></span><span class="language-xml"><span class="koboSpan" id="kobo.2278.1">.length &gt; 0 &amp;&amp; (</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2279.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2280.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2281.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2282.1">          {</span></span><span class="code-highlight"><strong class="hljs-slc"><span class="koboSpan" id="kobo.2283.1">optimisticTodos</span></strong></span><span class="language-xml"><span class="koboSpan" id="kobo.2284.1">.map((todo) =&gt; (</span></span>
<span class="language-xml">            </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2285.1">&lt;</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2286.1">li</span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="koboSpan" id="kobo.2287.1">key</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2288.1">=</span></span><span class="hljs-string"><span class="koboSpan" id="kobo.2289.1">{todo.id}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2290.1">&gt;</span></span><span class="language-xml"><span class="koboSpan" id="kobo.2291.1">{todo.title}</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2292.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2293.1">li</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2294.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2295.1">          ))}</span></span>
<span class="language-xml">        </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2296.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2297.1">ul</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2298.1">&gt;</span></span>
<span class="language-xml"><span class="koboSpan" id="kobo.2299.1">      )}</span></span>
<span class="language-xml">    </span><span class="hljs-tag"><span class="koboSpan" id="kobo.2300.1">&lt;/</span></span><span class="hljs-name"><span class="koboSpan" id="kobo.2301.1">div</span></span><span class="hljs-tag"><span class="koboSpan" id="kobo.2302.1">&gt;</span></span><span class="koboSpan" id="kobo.2303.1">
  );
}
</span></code></pre>
   <p class="normal">
    <span class="koboSpan" id="kobo.2304.1">
     As you can see in this example, the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2305.1">
      optimisticTodos
     </span>
    </code>
    <span class="koboSpan" id="kobo.2306.1">
     state is now used in the JSX code.
    </span>
    <span class="koboSpan" id="kobo.2306.2">
     The value
    </span>
    <a id="_idIndexMarker454">
    </a>
    <span class="koboSpan" id="kobo.2307.1">
     stored in that constant is either the normal
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2308.1">
      todos
     </span>
    </code>
    <span class="koboSpan" id="kobo.2309.1">
     state (managed by
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2310.1">
      useState()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2311.1">
     ), if the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2312.1">
      storeTodoAction()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2313.1">
     form action is not executing, or it’s the array derived by the function passed to
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2314.1">
      useOptimistic()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2315.1">
     (as the second argument).
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2316.1">
     <img alt="img" src="image/B31339_09_05.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2317.1">
     Figure 9.5: With useOptimistic(), the UI updates right away after submission
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2318.1">
     Using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2319.1">
      useOptimistic()
     </span>
    </code>
    <span class="koboSpan" id="kobo.2320.1">
     Hook can, therefore, help with building a great user experience where your application provides instant feedback, even if some slow processes might still be running in the background.
    </span>
    <span class="koboSpan" id="kobo.2320.2">
     Since the temporary optimistic state will always be replaced with the regular state (i.e., the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2321.1">
      todos
     </span>
    </code>
    <span class="koboSpan" id="kobo.2322.1">
     state) once the form submission is done, there also is no risk of displaying an incorrect UI.
    </span>
    <span class="koboSpan" id="kobo.2322.2">
     If an operation fails, React will automatically replace the temporarily incorrect UI with the correct one when it falls back to using the regular state.
    </span>
   </p>
   <h1 class="heading-1" id="_idParaDest-187">
    <span class="koboSpan" id="kobo.2323.1">
     Summary and Key Takeaways
    </span>
   </h1>
   <ul>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2324.1">
      Form submissions can be handled by manually listening to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2325.1">
       submit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2326.1">
      event via the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2327.1">
       onSubmit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2328.1">
      prop.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2329.1">
      Alternatively, form actions can be used—i.e., functions bound to the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2330.1">
       action
      </span>
     </code>
     <span class="koboSpan" id="kobo.2331.1">
      prop of a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2332.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2333.1">
      element.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2334.1">
      When handling form submission manually (via
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2335.1">
       onSubmit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2336.1">
      ), you can extract form field values with the help of state (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2337.1">
       useState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2338.1">
      ), Refs (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2339.1">
       useRef()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2340.1">
      ), or by creating a
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2341.1">
       FormData
      </span>
     </code>
     <span class="koboSpan" id="kobo.2342.1">
      object from
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2343.1">
       event.currentTarget
      </span>
     </code>
     <span class="koboSpan" id="kobo.2344.1">
      .
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2345.1">
      When using form actions, a form data object with the form field input values is automatically passed to the action function as a parameter.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2346.1">
      The
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2347.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2348.1">
      Hook can be utilized to manage form-dependent state (e.g., validation error messages).
     </span>
    </li>
    <li class="bulletList">
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2349.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2350.1">
      also provides a pending boolean value that may be used to update the UI while the form action is processing.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2351.1">
      In nested components (nested within
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2352.1">
       &lt;form&gt;
      </span>
     </code>
     <span class="koboSpan" id="kobo.2353.1">
      ), the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2354.1">
       useFormStatus()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2355.1">
      Hook can be called to get and use information about the parent form submission status.
     </span>
    </li>
    <li class="bulletList">
     <span class="koboSpan" id="kobo.2356.1">
      To provide quick UI updates, even when dealing with slow background processes (e.g., slow HTTP requests), the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2357.1">
       useOptimistic()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2358.1">
      Hook may help.
     </span>
    </li>
   </ul>
   <h2 class="heading-2" id="_idParaDest-188">
    <span class="koboSpan" id="kobo.2359.1">
     What’s Next?
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2360.1">
     Dealing with forms and handling user input is a very common task in most web applications.
    </span>
    <span class="koboSpan" id="kobo.2360.2">
     React apps are, of course, no exception.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2361.1">
     That’s why React offers a broad variety of approaches and possible patterns you can use to handle form submissions and extract user input.
    </span>
    <span class="koboSpan" id="kobo.2361.2">
     This chapter explored and compared the two main ways of doing this: using the
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2362.1">
      onSubmit
     </span>
    </code>
    <span class="koboSpan" id="kobo.2363.1">
     prop or relying on form actions (only available since React 19).
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2364.1">
     As explained and shown throughout this chapter, both approaches are valid and have their use cases.
    </span>
    <span class="koboSpan" id="kobo.2364.2">
     Personal preference as well as application requirements matter and will influence your decision.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2365.1">
     At this point in the book, you know all the key React concepts you need to build feature-rich web applications.
    </span>
    <span class="koboSpan" id="kobo.2365.2">
     The next chapter will look behind the scenes of React and explore how it works internally.
    </span>
    <span class="koboSpan" id="kobo.2365.3">
     You will also learn about some common optimization techniques that can make your apps more performant.
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-189">
    <span class="koboSpan" id="kobo.2366.1">
     Test Your Knowledge!
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2367.1">
     Test your knowledge of the concepts covered in this chapter by answering the following questions.
    </span>
    <span class="koboSpan" id="kobo.2367.2">
     You can then compare your answers to examples that can be found at
    </span>
    <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/09-form-actions/exercises/questions-answers.md">
     <span class="url">
      <span class="koboSpan" id="kobo.2368.1">
       https://github.com/mschwarzmueller/book-react-key-concepts-e2/blob/09-form-actions/exercises/questions-answers.md
      </span>
     </span>
    </a>
    <span class="koboSpan" id="kobo.2369.1">
     :
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2370.1">
      What’s a “form action”?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2371.1">
      How can you access user input inside of a form action?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2372.1">
      What’s the purpose of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2373.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2374.1">
      Hook and how is it used?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2375.1">
      What’s the purpose of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2376.1">
       useFormStatus()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2377.1">
      Hook and how is it used?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2378.1">
      What’s the difference between
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2379.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2380.1">
      and
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2381.1">
       useFormStatus()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2382.1">
      ?
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2383.1">
      What’s the purpose of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2384.1">
       useOptimistic()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2385.1">
      Hook and how is it used?
     </span>
    </li>
   </ol>
   <h1 class="heading-1" id="_idParaDest-190">
    <span class="koboSpan" id="kobo.2386.1">
     Apply What You Learned
    </span>
   </h1>
   <p class="normal">
    <span class="koboSpan" id="kobo.2387.1">
     With form actions in your React toolbelt, you have another powerful way of handling form submissions and extracting user input.
    </span>
   </p>
   <p class="normal">
    <span class="koboSpan" id="kobo.2388.1">
     In the following section, you’ll find an activity that allows you to practice working with form actions and the form-related Hooks provided by React.
    </span>
    <span class="koboSpan" id="kobo.2388.2">
     As always, you will also need to employ some of the concepts covered in earlier chapters (such as working with state or outputting lists).
    </span>
   </p>
   <h2 class="heading-2" id="_idParaDest-191">
    <span class="koboSpan" id="kobo.2389.1">
     Activity 9.1: Managing a Feedback Form
    </span>
   </h2>
   <p class="normal">
    <span class="koboSpan" id="kobo.2390.1">
     In this activity, your job is to build upon an existing, basic feedback form application and handle form submissions, with the help of form actions.
    </span>
    <span class="koboSpan" id="kobo.2390.2">
     As part of this activity, you should validate the submitted title and feedback text and show error messages if empty values are submitted.
    </span>
    <span class="koboSpan" id="kobo.2390.3">
     You should also update the list of submitted feedback items optimistically and disable the submit button while the form action is underway.
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2391.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2392.1">
      You can find the starting code for this activity at
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/activities/practice-1-start">
      <span class="url">
       <span class="koboSpan" id="kobo.2393.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/activities/practice-1-start
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2394.1">
      .
     </span>
     <span class="koboSpan" id="kobo.2394.2">
      When downloading this code, you’ll always download the entire repository.
     </span>
     <span class="koboSpan" id="kobo.2394.3">
      Make sure to then navigate to the subfolder with the starting code (
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2395.1">
       activities/practice-1-start
      </span>
     </code>
     <span class="koboSpan" id="kobo.2396.1">
      , in this case) to use the right code snapshot.
     </span>
    </p>
   </div>
   <p class="normal">
    <span class="koboSpan" id="kobo.2397.1">
     After downloading the code and running
    </span>
    <code class="inlineCode">
     <span class="koboSpan" id="kobo.2398.1">
      npm install
     </span>
    </code>
    <span class="koboSpan" id="kobo.2399.1">
     in the project folder to install all required dependencies, the solution steps are as follows:
    </span>
   </p>
   <ol>
    <li class="numberedList" value="1">
     <span class="koboSpan" id="kobo.2400.1">
      Replace the existing
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2401.1">
       onSubmit
      </span>
     </code>
     <span class="koboSpan" id="kobo.2402.1">
      handler function with a form action—clean up and remove any code that’s not needed anymore thereafter.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2403.1">
      Disable the form submit button while the form action is processing.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2404.1">
      Validate the user input and output any error messages with the help of the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2405.1">
       useActionState()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2406.1">
      Hook.
     </span>
    </li>
    <li class="numberedList">
     <span class="koboSpan" id="kobo.2407.1">
      Update the list of submitted feedback items optimistically by utilizing the
     </span>
     <code class="inlineCode">
      <span class="koboSpan" id="kobo.2408.1">
       useOptimistic()
      </span>
     </code>
     <span class="koboSpan" id="kobo.2409.1">
      Hook.
     </span>
    </li>
   </ol>
   <p class="normal">
    <span class="koboSpan" id="kobo.2410.1">
     The expected result should resemble the following screenshots:
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2411.1">
     <img alt="img" src="image/B31339_09_06.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2412.1">
     Figure 9.6: During form submission, the button is disabled, but the submitted item shows up instantly
    </span>
   </p>
   <figure class="mediaobject">
    <span class="koboSpan" id="kobo.2413.1">
     <img alt="img" src="image/B31339_09_07.png"/>
    </span>
   </figure>
   <p class="packt_figref">
    <span class="koboSpan" id="kobo.2414.1">
     Figure 9.7: When submitting invalid values, appropriate error messages are shown
    </span>
   </p>
   <div class="note">
    <p class="normal">
     <strong class="keyWord">
      <span class="koboSpan" id="kobo.2415.1">
       Note
      </span>
     </strong>
    </p>
    <p class="normal">
     <span class="koboSpan" id="kobo.2416.1">
      You can find a full example solution here:
     </span>
     <a href="https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/activities/practice-1">
      <span class="url">
       <span class="koboSpan" id="kobo.2417.1">
        https://github.com/mschwarzmueller/book-react-key-concepts-e2/tree/09-form-actions/activities/practice-1
       </span>
      </span>
     </a>
     <span class="koboSpan" id="kobo.2418.1">
      .
     </span>
    </p>
   </div>
  </div>
 </body></html>