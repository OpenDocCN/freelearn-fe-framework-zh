<html><head></head><body>
<div id="_idContainer053">
<h1 class="chapter-number" id="_idParaDest-200"><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.1.1">12</span></h1>
<h1 id="_idParaDest-201"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.2.1">Deploying Angular Applications</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In this last chapter, you will deploy the demo application we created to GitHub Pages. </span><span class="koboSpan" id="kobo.3.2">You will learn to lint and build Angular applications and libraries inside your Nx monorepo. </span><span class="koboSpan" id="kobo.3.3">We will explore what Angular and Nx create for you when you build an Angular application and what it is you deploy to your hosting platform. </span><span class="koboSpan" id="kobo.3.4">When you know how to build your Angular applications, we will inspect the application build and analyze the different bundles inside our build to determine where we can make some improvements to reduce the size of our application bundles. </span><span class="koboSpan" id="kobo.3.5">After analyzing the application bundles, we will first host the production build of our application locally. </span><span class="koboSpan" id="kobo.3.6">Next, we will dive into GitHub Pages and GitHub Actions to create an automated deployment process. </span><span class="koboSpan" id="kobo.3.7">GitHub Pages is a static website hosting service that allows you to host your static websites and applications for free. </span><span class="koboSpan" id="kobo.3.8">GitHub actions are used to set up </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">continuous integration and continuous delivery</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">CI/CD</span></strong><span class="koboSpan" id="kobo.7.1">) flows to automate your linting, testing, and deployment process. </span><span class="koboSpan" id="kobo.7.2">The CI/CD process you create will automatically lint, test, and deploy your Angular app inside the Nx monorepo to GitHub Pages when you merge code to your main </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">GitHub branch.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">This chapter will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.11.1">Building and linting Angular applications inside your </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">Nx monorepo</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Analyzing your </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">build output</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Automatically deploying </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">Angular applications</span></span></li>
</ul>
<h1 id="_idParaDest-202"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.17.1">Building and linting Angular applications inside your Nx monorepo</span></h1>
<p><span class="koboSpan" id="kobo.18.1">This section will explore the steps required to build and lint Angular applications within an Nx monorepo. </span><span class="koboSpan" id="kobo.18.2">We start by learning how to</span><a id="_idIndexMarker1123"/><span class="koboSpan" id="kobo.19.1"> lint projects inside your</span><a id="_idIndexMarker1124"/><span class="koboSpan" id="kobo.20.1"> Nx monorepo. </span><span class="koboSpan" id="kobo.20.2">Next, we</span><a id="_idIndexMarker1125"/><span class="koboSpan" id="kobo.21.1"> will explore different configurations for the linting process and how to apply them. </span><span class="koboSpan" id="kobo.21.2">Once you know how and why to lint your projects before you create a build, we will learn about building projects inside the </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">Nx monorepo.</span></span></p>
<p><span class="koboSpan" id="kobo.23.1">Furthermore, we’ll explore how Nx enhances the build process by leveraging advanced caching and parallel task execution to optimize build times. </span><span class="koboSpan" id="kobo.23.2">Nx’s incremental builds significantly reduce the build</span><a id="_idIndexMarker1126"/><span class="koboSpan" id="kobo.24.1"> times for large and complex projects, ensuring that only necessary parts of the application are</span><a id="_idIndexMarker1127"/><span class="koboSpan" id="kobo.25.1"> rebuilt. </span><span class="koboSpan" id="kobo.25.2">The incremental builds and Nx cache will speed up your CI/CD pipelines</span><a id="_idIndexMarker1128"/><span class="koboSpan" id="kobo.26.1"> and the overall deployment process. </span><span class="koboSpan" id="kobo.26.2">Let’s start at the beginning and learn about linting projects inside your </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">Nx monorepo.</span></span></p>
<h2 id="_idParaDest-203"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.28.1">Linting Nx projects</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.29.1">Linting</span></strong><span class="koboSpan" id="kobo.30.1"> is a crucial step in the software</span><a id="_idIndexMarker1129"/><span class="koboSpan" id="kobo.31.1"> development process. </span><span class="koboSpan" id="kobo.31.2">It involves analyzing your code for potential errors, enforcing </span><a id="_idIndexMarker1130"/><span class="koboSpan" id="kobo.32.1">coding standards, and maintaining code quality. </span><span class="koboSpan" id="kobo.32.2">Linting helps catch issues early in the development cycle, reducing the likelihood of bugs and ensuring that your code base adheres to </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">best practices.</span></span></p>
<p><span class="koboSpan" id="kobo.34.1">Linting improves the maintainability and readability of your code and enhances collaboration within your team by </span><a id="_idIndexMarker1131"/><span class="koboSpan" id="kobo.35.1">providing a consistent coding style. </span><span class="koboSpan" id="kobo.35.2">We already talked about linting in </span><a href="B21625_01.xhtml#_idTextAnchor014"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.36.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.37.1">. </span><span class="koboSpan" id="kobo.37.2">Depending on your setup, you will be notified about linting errors during your development process by ESLint. </span><span class="koboSpan" id="kobo.37.3">Still, it’s important to always run the linting process in your CI/CD pipelines before your code is merged or deployed. </span><span class="koboSpan" id="kobo.37.4">Running the linting process inside your CI/CD pipelines ensures code that doesn’t adhere to your configured guidelines is not merged. </span><span class="koboSpan" id="kobo.37.5">By integrating linting into your pipelines, you can ensure that your projects are robust, reliable, and ready for production, leading to more efficient and </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">error-free builds.</span></span></p>
<p><span class="koboSpan" id="kobo.39.1">As with all other tasks such as testing and building, you can perform linting using the Nx console or by running a </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">terminal command.</span></span></p>
<h3><span class="koboSpan" id="kobo.41.1">Linting using the Nx console</span></h3>
<p><span class="koboSpan" id="kobo.42.1">If you want to lint a</span><a id="_idIndexMarker1132"/><span class="koboSpan" id="kobo.43.1"> project using the Nx </span><a id="_idIndexMarker1133"/><span class="koboSpan" id="kobo.44.1">console, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">these </span></span><span class="No-Break"><a id="_idIndexMarker1134"/></span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.47.1">Click on the Nx logo on the left side of </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">VS Code.</span></span></li>
<li><span class="koboSpan" id="kobo.49.1">Locate the project you wish to lint under the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.50.1">PROJECTS</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.51.1"> tab.</span></span></li>
<li><span class="koboSpan" id="kobo.52.1">Hover </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">over </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.54.1">lint</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.56.1">Click the </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">play</span></span><span class="No-Break"><a id="_idIndexMarker1135"/></span><span class="No-Break"><span class="koboSpan" id="kobo.58.1"> button:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer042">
<span class="koboSpan" id="kobo.59.1"><img alt="Figure 12.1: Nx console lint" src="image/B21625_12_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.60.1">Figure 12.1: Nx console lint</span></p>
<p><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.61.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.62.1">.1</span></em><span class="koboSpan" id="kobo.63.1"> shows a visual representation of the Nx console and where to find the </span><strong class="source-inline"><span class="koboSpan" id="kobo.64.1">lint</span></strong><span class="koboSpan" id="kobo.65.1"> task. </span><span class="koboSpan" id="kobo.65.2">When you click the play button for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.66.1">lint</span></strong><span class="koboSpan" id="kobo.67.1"> task, a terminal will open inside VS Code, where you can </span><a id="_idIndexMarker1136"/><span class="koboSpan" id="kobo.68.1">see the result of the linting process. </span><span class="koboSpan" id="kobo.68.2">In the case of the </span><em class="italic"><span class="koboSpan" id="kobo.69.1">finance-expenses-registration application</span></em><span class="koboSpan" id="kobo.70.1">, the linting process will </span><a id="_idIndexMarker1137"/><span class="koboSpan" id="kobo.71.1">pass without any error or warning regarding your linting rules. </span><span class="koboSpan" id="kobo.71.2">There will be a warning for Nx Cloud, but this can be ignored because we aren’t using Nx Cloud. </span><span class="koboSpan" id="kobo.71.3">When using the Nx console, you can only lint your projects individually. </span><span class="koboSpan" id="kobo.71.4">Alternatively, with the Nx console, you can lint your projects using </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">terminal commands.</span></span></p>
<h3><span class="koboSpan" id="kobo.73.1">Linting using the terminal command</span></h3>
<p><span class="koboSpan" id="kobo.74.1">You can lint a single project by running the</span><a id="_idIndexMarker1138"/><span class="koboSpan" id="kobo.75.1"> following terminal </span><a id="_idIndexMarker1139"/><span class="koboSpan" id="kobo.76.1">command at the root of your </span><span class="No-Break"><span class="koboSpan" id="kobo.77.1">Nx monorepo:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.78.1">
nx run &lt;project name&gt;:lint</span></pre> <p><span class="koboSpan" id="kobo.79.1">In the preceding terminal command, you need to replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">&lt;project name&gt;</span></strong><span class="koboSpan" id="kobo.81.1"> with the name of the project you want to lint. </span><span class="koboSpan" id="kobo.81.2">This project name can be found inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">project.json</span></strong><span class="koboSpan" id="kobo.83.1"> file of the project</span><a id="_idIndexMarker1140"/><span class="koboSpan" id="kobo.84.1"> you want to target. </span><span class="koboSpan" id="kobo.84.2">So, to lint the </span><em class="italic"><span class="koboSpan" id="kobo.85.1">finance-expenses-registration application</span></em><span class="koboSpan" id="kobo.86.1">, you run the </span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.88.1">
nx run finance-expenses-registration:lint</span></pre> <p><span class="koboSpan" id="kobo.89.1">Running the linting process for a second time was a lot faster due to the Nx cache. </span><span class="koboSpan" id="kobo.89.2">Inside the terminal, you’ll find Nx read the output from the cache instead of running the command for 1 out of 1 tasks, indicating Nx took the linting output from the cache because it detected nothing changed since we last linted the project. </span><span class="koboSpan" id="kobo.89.3">When running the</span><a id="_idIndexMarker1141"/><span class="koboSpan" id="kobo.90.1"> linting process for multiple projects, the Nx cache can significantly reduce the time needed for your linting to complete, greatly improving your development process </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">and experience.</span></span></p>
<h3><span class="koboSpan" id="kobo.92.1">Linting multiple projects</span></h3>
<p><span class="koboSpan" id="kobo.93.1">In the preceding examples, we’ve seen how to run linting for a single project, but in most cases, especially inside your CI/CD </span><a id="_idIndexMarker1142"/><span class="koboSpan" id="kobo.94.1">pipelines, you want to lint multiple projects. </span><span class="koboSpan" id="kobo.94.2">When you run linting in a CI pipeline (a pipeline you run before each code merge), you commonly wish to lint projects that are affected by the changes you’re about to merge; alternatively, when running a </span><a id="_idIndexMarker1143"/><span class="koboSpan" id="kobo.95.1">CD pipeline that deploys your system, you commonly run linting on all projects inside your monorepo or all projects related to </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">the deployment.</span></span></p>
<p><span class="koboSpan" id="kobo.97.1">To run linting for all projects affected by your changes, you can utilize the </span><strong class="source-inline"><span class="koboSpan" id="kobo.98.1">nx affected</span></strong><span class="koboSpan" id="kobo.99.1"> command. </span><span class="koboSpan" id="kobo.99.2">The terminal command is similar to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">affected</span></strong><span class="koboSpan" id="kobo.101.1"> command we used when running tests for affected projects; you only change the target job from </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">test</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.103.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">lint</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.106.1">
nx affected -t lint –base=main</span></pre> <p><span class="koboSpan" id="kobo.107.1">As you can see in the preceding command, you use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">affected</span></strong><span class="koboSpan" id="kobo.109.1"> keyword, add the    </span><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">-t</span></strong><span class="koboSpan" id="kobo.111.1"> flag, and define the target task you want to run. </span><span class="koboSpan" id="kobo.111.2">In this scenario, it is </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">lint</span></strong><span class="koboSpan" id="kobo.113.1">. </span><span class="koboSpan" id="kobo.113.2">After defining the task, we also need to configure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">–base</span></strong><span class="koboSpan" id="kobo.115.1"> flag and provide it with the base branch to compare the changes with; commonly, this will be your main branch. </span><span class="koboSpan" id="kobo.115.2">Instead of manually defining the </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">–base</span></strong><span class="koboSpan" id="kobo.117.1"> flag, you can also configure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1">defaultBase</span></strong><span class="koboSpan" id="kobo.119.1"> property inside your </span><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">nx.json</span></strong><span class="koboSpan" id="kobo.121.1"> file. </span><span class="koboSpan" id="kobo.121.2">To configure your default base branch, add the following inside the root of your </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">nx.json</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.123.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.124.1">
"affected": {
  "defaultBase": "main"
}</span></pre> <p><span class="koboSpan" id="kobo.125.1">After adding the preceding code, you can run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.126.1">affected</span></strong><span class="koboSpan" id="kobo.127.1"> command without providing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.128.1">–base</span></strong><span class="koboSpan" id="kobo.129.1"> flag. </span><span class="koboSpan" id="kobo.129.2">Currently, if you run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.130.1">affected</span></strong><span class="koboSpan" id="kobo.131.1"> command, you’ll notice all projects inside the monorepo</span><a id="_idIndexMarker1144"/><span class="koboSpan" id="kobo.132.1"> are linted. </span><span class="koboSpan" id="kobo.132.2">All projects are linted because Nx doesn’t have an affected lint cached for your </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1">defaultBase</span></strong><span class="koboSpan" id="kobo.134.1"> property. </span><span class="koboSpan" id="kobo.134.2">Besides</span><a id="_idIndexMarker1145"/><span class="koboSpan" id="kobo.135.1"> all projects being linted, you will also notice that the linting process fails for 4 out of </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">13 projects.</span></span></p>
<h3><span class="koboSpan" id="kobo.137.1">Fixing linting errors</span></h3>
<p><span class="koboSpan" id="kobo.138.1">Before we continue, let’s fix the linting errors so</span><a id="_idIndexMarker1146"/><span class="koboSpan" id="kobo.139.1"> that all linted </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">projects </span></span><span class="No-Break"><a id="_idIndexMarker1147"/></span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">succeed.</span></span></p>
<h4><span class="koboSpan" id="kobo.142.1">The --fix flag</span></h4>
<p><span class="koboSpan" id="kobo.143.1">You can manually go through all the errors</span><a id="_idIndexMarker1148"/><span class="koboSpan" id="kobo.144.1"> in the terminal output and fix them one by one, but most linting errors are easy to fix, and the Nx linting process provides a way to solve all </span><a id="_idIndexMarker1149"/><span class="koboSpan" id="kobo.145.1">easy linting errors for you. </span><span class="koboSpan" id="kobo.145.2">Simply append the </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">–-fix</span></strong><span class="koboSpan" id="kobo.147.1"> flag to your terminal command, and Nx will automatically fix the issues it can fix for you. </span><span class="koboSpan" id="kobo.147.2">To get the best result when using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">--fix</span></strong><span class="koboSpan" id="kobo.149.1"> flag, you need to run the linting process for each project individually. </span><span class="koboSpan" id="kobo.149.2">So, let’s take the projects with linting errors and run them one by one with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">–-fix</span></strong><span class="koboSpan" id="kobo.151.1"> flag appended to </span><span class="No-Break"><span class="koboSpan" id="kobo.152.1">the command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.153.1">
nx run workspace-generators-plugin:lint --fix
nx run shared-ui-common-components:lint --fix
nx run shared-data-access-generic-http:lint --fix
nx run shared-util-custom-decorators:lint --fix</span></pre> <p><span class="koboSpan" id="kobo.154.1">After running the aforementioned commands, all your linting errors are fixed. </span><span class="koboSpan" id="kobo.154.2">You can now rerun the affected </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">lint</span></strong><span class="koboSpan" id="kobo.156.1"> command, and the </span><a id="_idIndexMarker1150"/><span class="koboSpan" id="kobo.157.1">linting for all projects </span><span class="No-Break"><span class="koboSpan" id="kobo.158.1">will </span></span><span class="No-Break"><a id="_idIndexMarker1151"/></span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">succeed.</span></span></p>
<h4><span class="koboSpan" id="kobo.160.1">The fix option</span></h4>
<p><span class="koboSpan" id="kobo.161.1">As you might imagine, running the</span><a id="_idIndexMarker1152"/><span class="koboSpan" id="kobo.162.1"> linting command for each project with linting errors can become cumbersome, especially when your monorepo grows. </span><span class="koboSpan" id="kobo.162.2">Alternatively, you can configure the </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1">fix</span></strong><span class="koboSpan" id="kobo.164.1"> option inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">project.json</span></strong><span class="koboSpan" id="kobo.166.1"> file of individual projects. </span><span class="koboSpan" id="kobo.166.2">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">project.json</span></strong><span class="koboSpan" id="kobo.168.1"> file, you’ll find a </span><strong class="source-inline"><span class="koboSpan" id="kobo.169.1">lint</span></strong><span class="koboSpan" id="kobo.170.1"> section, and inside this section, you can add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">fix</span></strong><span class="koboSpan" id="kobo.172.1"> option </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.174.1">
"lint": {
  ……
  "options": {
    "fix": true
  }
}</span></pre> <p><span class="koboSpan" id="kobo.175.1">After adding the preceding configuration to each project’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">project.json</span></strong><span class="koboSpan" id="kobo.177.1"> file, you can simply run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">lint affected </span></strong><span class="koboSpan" id="kobo.179.1">command, and Nx will fix the linting issues it can for </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">each project.</span></span></p>
<h4><span class="koboSpan" id="kobo.181.1">Other configurations</span></h4>
<p><span class="koboSpan" id="kobo.182.1">Besides the </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">--fix</span></strong><span class="koboSpan" id="kobo.184.1"> flag and configuration, there</span><a id="_idIndexMarker1153"/><span class="koboSpan" id="kobo.185.1"> are other useful configurations, such as allowing a maximum number of warnings before the linting process fails, outputting your lint results to a file, or passing the linting process even if there are linting errors. </span><span class="koboSpan" id="kobo.185.2">You can find all configurations in the official Nx documentation at the following </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">URL: </span></span><a href="https://nx.dev/nx-api/eslint/executors/lint"><span class="No-Break"><span class="koboSpan" id="kobo.187.1">https://nx.dev/nx-api/eslint/executors/lint</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.188.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.189.1">Targeting multiple projects when running a linting command</span></h3>
<p><span class="koboSpan" id="kobo.190.1">After looking into the remaining </span><a id="_idIndexMarker1154"/><span class="koboSpan" id="kobo.191.1">configuration options, I will briefly explain how you can target multiple projects simultaneously </span><a id="_idIndexMarker1155"/><span class="koboSpan" id="kobo.192.1">when running a linting command. </span><span class="koboSpan" id="kobo.192.2">You can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">run-many</span></strong><span class="koboSpan" id="kobo.194.1"> command to do this, similar to what we did in </span><a href="B21625_11.xhtml#_idTextAnchor200"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.195.1">Chapter 11</span></em></span></a><span class="koboSpan" id="kobo.196.1"> when testing multiple projects with a single command. </span><span class="koboSpan" id="kobo.196.2">You use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">run-many</span></strong><span class="koboSpan" id="kobo.198.1"> command combined with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">-p</span></strong><span class="koboSpan" id="kobo.200.1"> flag. </span><span class="koboSpan" id="kobo.200.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">run-many</span></strong><span class="koboSpan" id="kobo.202.1"> command allows you to run tasks for many projects, whereas the </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">-p</span></strong><span class="koboSpan" id="kobo.204.1"> flag will enable you to specify </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">specific projects:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.206.1">
nx run-many -t lint -p project1 project2</span></pre> <p><span class="koboSpan" id="kobo.207.1">In the preceding example, you perform linting for </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">project1</span></strong><span class="koboSpan" id="kobo.209.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">project2</span></strong><span class="koboSpan" id="kobo.211.1">. </span><span class="koboSpan" id="kobo.211.2">Alternatively, you can run</span><a id="_idIndexMarker1156"/><span class="koboSpan" id="kobo.212.1"> the linting process for projects with a specific tag by using the </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.214.1">
nx run-many -t lint --projects=tag:type:ui</span></pre> <p><span class="koboSpan" id="kobo.215.1">As you can see in the preceding command, instead of defining project names, we defined the tag we wanted </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">to </span></span><span class="No-Break"><a id="_idIndexMarker1157"/></span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">target.</span></span></p>
<p><span class="koboSpan" id="kobo.218.1">Now that you know how to lint specific projects and how to configure the linting process, let’s dive into the next topic: building your projects inside the </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">Nx monorepo.</span></span></p>
<h2 id="_idParaDest-204"><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.220.1">Building your Angular libraries and applications</span></h2>
<p><span class="koboSpan" id="kobo.221.1">To deploy your Angular projects, you need to create an application build. </span><span class="koboSpan" id="kobo.221.2">When you create an application build, the build process creates a bundle of code that your runtime can execute and run. </span><span class="koboSpan" id="kobo.221.3">In the case </span><a id="_idIndexMarker1158"/><span class="koboSpan" id="kobo.222.1">of Angular applications, the browser will be the runtime that interprets and runs the application</span><a id="_idIndexMarker1159"/><span class="koboSpan" id="kobo.223.1"> code. </span><span class="koboSpan" id="kobo.223.2">So, to deploy the demo application we created, you first need to make an application build using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">nx </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.226.1"> command.</span></span></p>
<h3><span class="koboSpan" id="kobo.227.1">Behind the scenes of creating an application build</span></h3>
<p><span class="koboSpan" id="kobo.228.1">Before running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">nx build</span></strong><span class="koboSpan" id="kobo.230.1"> command for our </span><em class="italic"><span class="koboSpan" id="kobo.231.1">expenses-registration application</span></em><span class="koboSpan" id="kobo.232.1">, let’s examine in detail what happens when we </span><a id="_idIndexMarker1160"/><span class="koboSpan" id="kobo.233.1">run a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.235.1"> command:</span></span></p>
<ol>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.236.1">Preparation phase</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.237.1">Build configuration</span></strong><span class="koboSpan" id="kobo.238.1">: Nx reads the build configurations from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">project.json</span></strong><span class="koboSpan" id="kobo.240.1"> files of the</span><a id="_idIndexMarker1161"/><span class="koboSpan" id="kobo.241.1"> projects you’re about to build. </span><span class="koboSpan" id="kobo.241.2">This is similar to the standard Angular CLI but with support for multiple projects in a monorepo, and Nx analyzes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">project.json</span></strong><span class="koboSpan" id="kobo.243.1"> files instead of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">angular.json</span></strong><span class="koboSpan" id="kobo.245.1"> file in a regular </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">Angular project.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.247.1">File replacements</span></strong><span class="koboSpan" id="kobo.248.1">: Nx checks if there are file replacements configured inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.249.1">project.json</span></strong><span class="koboSpan" id="kobo.250.1"> file. </span><span class="koboSpan" id="kobo.250.2">If you configured file replacements for the build targets, Nx will replace the files before continuing the </span><span class="No-Break"><span class="koboSpan" id="kobo.251.1">build process.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.252.1">Compilation phase</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.253.1">TypeScript compilation</span></strong><span class="koboSpan" id="kobo.254.1">: Nx uses the Angular Compiler, which is called </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">ngc</span></strong><span class="koboSpan" id="kobo.256.1">, to transpile TypeScript code into</span><a id="_idIndexMarker1162"/><span class="koboSpan" id="kobo.257.1"> JavaScript, handling Angular decorators </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">and templates.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.259.1">Ahead-of-time (AOT) compilation</span></strong><span class="koboSpan" id="kobo.260.1">: As with the Angular CLI, Nx performs AOT compilation for production builds (unless configured differently), converting Angular templates and components into efficient JavaScript code that can be executed by the </span><a id="_idIndexMarker1163"/><span class="koboSpan" id="kobo.261.1">browser without the need to compile the code before it can </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">be rendered.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.263.1">Bundling phase</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.264.1">Module resolution</span></strong><span class="koboSpan" id="kobo.265.1">: Nx uses the configured build tool for module resolution and creating a dependency </span><a id="_idIndexMarker1164"/><span class="koboSpan" id="kobo.266.1">graph, starting from the </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">entry point(s).</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.268.1">Tree shaking</span></strong><span class="koboSpan" id="kobo.269.1">: Nx performs tree shaking to remove unused code, reducing the final </span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">bundle size.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.271.1">Code splitting</span></strong><span class="koboSpan" id="kobo.272.1">: Nx splits different parts of your application into multiple JavaScript bundles that can be lazy loaded by </span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">the browser.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.274.1">Asset optimization</span></strong><span class="koboSpan" id="kobo.275.1">: Nx optimizes CSS, HTML, images, and other assets, similar to the </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">Angular CLI.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.277.1">Minification </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.278.1">and uglification</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.279.1">JavaScript minification</span></strong><span class="koboSpan" id="kobo.280.1">: Nx minifies </span><a id="_idIndexMarker1165"/><span class="koboSpan" id="kobo.281.1">JavaScript code to reduce </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">file size.</span></span></li><li><strong class="bold"><span class="koboSpan" id="kobo.283.1">Uglification</span></strong><span class="koboSpan" id="kobo.284.1">: Nx further obfuscates the </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">JavaScript code.</span></span></li></ul></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.286.1">Hashing and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.287.1">cache busting</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.288.1">File hashing</span></strong><span class="koboSpan" id="kobo.289.1">: Nx appends hashes to</span><a id="_idIndexMarker1166"/><span class="koboSpan" id="kobo.290.1"> filenames of generated bundles and assets for </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">cache busting.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.292.1">Generating HTML</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.293.1">Index HTML generation</span></strong><span class="koboSpan" id="kobo.294.1">: Nx generates</span><a id="_idIndexMarker1167"/><span class="koboSpan" id="kobo.295.1"> or updates the </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">index.html</span></strong><span class="koboSpan" id="kobo.297.1"> file, including references to the hashed JavaScript and </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">CSS bundles.</span></span></li></ul></li>
<li><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.299.1">Deployment artifacts</span></strong></span><ul><li><strong class="bold"><span class="koboSpan" id="kobo.300.1">Output directory</span></strong><span class="koboSpan" id="kobo.301.1">: Nx places the</span><a id="_idIndexMarker1168"/><span class="koboSpan" id="kobo.302.1"> final build artifacts in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">dist</span></strong><span class="koboSpan" id="kobo.304.1"> folder or some other configured </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">output path.</span></span></li></ul></li>
</ol>
<p><span class="koboSpan" id="kobo.306.1">The preceding steps resemble the regular build flow when using the Angular CLI. </span><span class="koboSpan" id="kobo.306.2">Yet, Nx has some additional features such as affected builds, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">run-many</span></strong><span class="koboSpan" id="kobo.308.1"> command, incremental builds, and caching, making it easier to create application builds for multiple projects inside a</span><a id="_idIndexMarker1169"/><span class="koboSpan" id="kobo.309.1"> monorepo and speeding up build times. </span><span class="koboSpan" id="kobo.309.2">Now that you have a better grasp of what is happening when building your projects, let’s create an application build for the expense </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">registration application.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.311.1">Important notice!</span></p>
<p class="callout"><span class="koboSpan" id="kobo.312.1">The </span><em class="italic"><span class="koboSpan" id="kobo.313.1">expenses-registration application</span></em><span class="koboSpan" id="kobo.314.1"> we made is just a simple demo application and not really meant for production purposes. </span><span class="koboSpan" id="kobo.314.2">There</span><a id="_idIndexMarker1170"/><span class="koboSpan" id="kobo.315.1"> are still plenty of improvements to make, pages to add, and code to clean up before you actually deploy the application. </span><span class="koboSpan" id="kobo.315.2">For demonstration purposes, we will be deploying the application to GitHub Pages, but it’s not meant to be used for anything other than </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">demonstration purposes.</span></span></p>
<h3><span class="koboSpan" id="kobo.317.1">Running the build command</span></h3>
<p><span class="koboSpan" id="kobo.318.1">You can run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">build</span></strong><span class="koboSpan" id="kobo.320.1"> command for the </span><em class="italic"><span class="koboSpan" id="kobo.321.1">expenses-registration application</span></em><span class="koboSpan" id="kobo.322.1"> in the terminal or Nx console. </span><span class="koboSpan" id="kobo.322.2">As </span><a id="_idIndexMarker1171"/><span class="koboSpan" id="kobo.323.1">shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.324.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.325.1">.2</span></em><span class="koboSpan" id="kobo.326.1">, you can find the </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">build</span></strong><span class="koboSpan" id="kobo.328.1"> command in the Nx console above the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">lint</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.330.1"> command:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer043">
<span class="koboSpan" id="kobo.331.1"><img alt="Figure 12.2: Nx console build" src="image/B21625_12_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.332.1">Figure 12.2: Nx console build</span></p>
<p><span class="koboSpan" id="kobo.333.1">To run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">build</span></strong><span class="koboSpan" id="kobo.335.1"> command, click the play button next to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">build</span></strong><span class="koboSpan" id="kobo.337.1"> keyword in the Nx console. </span><span class="koboSpan" id="kobo.337.2">Nx configures the production build as your default; if you want to target another build configuration, you can expand </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">build</span></strong><span class="koboSpan" id="kobo.339.1"> inside the Nx console to see all build configurations you have. </span><span class="koboSpan" id="kobo.339.2">You can then run a specific build configuration by clicking on the play button next to the name of the build configuration you want to run. </span><span class="koboSpan" id="kobo.339.3">For each project, Nx creates a</span><a id="_idIndexMarker1172"/><span class="koboSpan" id="kobo.340.1"> production and development build configuration for you inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">project.json</span></strong><span class="koboSpan" id="kobo.342.1"> files. </span><span class="koboSpan" id="kobo.342.2">When needed, you can create additional build configurations; for example, when you have multiple staging environments such as test and acceptance that require a deviation from the production or </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">development build.</span></span></p>
<p><span class="koboSpan" id="kobo.344.1">The Nx console is an extension for your code editor, and as such, it isn’t available inside your CI/CD pipelines. </span><span class="koboSpan" id="kobo.344.2">Because the Nx console isn’t available, you need to use the Nx CLI inside your pipelines to create application builds and perform other tasks such as building and testing your applications. </span><span class="koboSpan" id="kobo.344.3">The syntax for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">nx build</span></strong><span class="koboSpan" id="kobo.346.1"> command is similar to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.347.1">test</span></strong><span class="koboSpan" id="kobo.348.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.349.1">lint</span></strong><span class="koboSpan" id="kobo.350.1"> commands we used earlier; you only change the build target from </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">lint</span></strong><span class="koboSpan" id="kobo.352.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">test</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.354.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.357.1">
nx build finance-expenses-registration</span></pre> <p><span class="koboSpan" id="kobo.358.1">As you can see in the aforementioned command, we type </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">nx</span></strong><span class="koboSpan" id="kobo.360.1"> to target the Nx CLI, followed by the task we want to run, and lastly, add the project name of the project we want to target. </span><span class="koboSpan" id="kobo.360.2">Nx will use the default build configuration, which is production unless you change it. </span><span class="koboSpan" id="kobo.360.3">If you want to target a different build configuration, you can add the        </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">–-configuration</span></strong><span class="koboSpan" id="kobo.362.1"> flag to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.364.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.365.1">
--configuration=development</span></pre> <p><span class="koboSpan" id="kobo.366.1">By adding the preceding flag at the end of your CLI command, you’ll use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">development</span></strong><span class="koboSpan" id="kobo.368.1"> build configuration instead of the production configuration. </span><span class="koboSpan" id="kobo.368.2">Alternatively, you can use the </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">following syntax:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.370.1">
nx run finance-expenses-registration:build:production</span></pre> <p><span class="koboSpan" id="kobo.371.1">The preceding command runs the </span><a id="_idIndexMarker1173"/><span class="koboSpan" id="kobo.372.1">production build for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.374.1"> project. </span><span class="koboSpan" id="kobo.374.2">As we’ve seen with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">lint</span></strong><span class="koboSpan" id="kobo.376.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">test</span></strong><span class="koboSpan" id="kobo.378.1"> commands, you can also use </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">affected</span></strong><span class="koboSpan" id="kobo.380.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">run-many</span></strong><span class="koboSpan" id="kobo.382.1"> to build multiple projects or projects affected by your changes. </span><span class="koboSpan" id="kobo.382.2">Now that you know how to run </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">build</span></strong><span class="koboSpan" id="kobo.384.1"> commands using the Nx console and the Nx CLI, go ahead and run the production build for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">finance-expenses-registration</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.386.1"> project.</span></span></p>
<h3><span class="koboSpan" id="kobo.387.1">Fixing failing builds</span></h3>
<p><span class="koboSpan" id="kobo.388.1">After running the production build for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.389.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.390.1"> project, you’ll notice Nx tries </span><a id="_idIndexMarker1174"/><span class="koboSpan" id="kobo.391.1">to build the </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.393.1"> project and all projects it depends on – in our case, three other libraries (</span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">shared-ui-common-components</span></strong><span class="koboSpan" id="kobo.395.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">finance-data-access-expenses</span></strong><span class="koboSpan" id="kobo.397.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.398.1">shared-util-form-validator</span></strong><span class="koboSpan" id="kobo.399.1">) – in our Nx monorepo. </span><span class="koboSpan" id="kobo.399.2">You’ll also notice that three out of four builds fail. </span><span class="koboSpan" id="kobo.399.3">The three failing builds are the three libraries, and they all have the same error: </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">'updateBuildableProjectDepsInPackageJson' is not found </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">in schema</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.403.1">To fix your builds, you need to remove the following configuration inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.404.1">project.json</span></strong><span class="koboSpan" id="kobo.405.1"> files of </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">your libraries:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.407.1">
"updateBuildableProjectDepsInPackageJson": true</span></pre> <p><span class="koboSpan" id="kobo.408.1">After removing the preceding configuration inside your </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">project.json</span></strong><span class="koboSpan" id="kobo.410.1"> files, you can run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.411.1">build</span></strong><span class="koboSpan" id="kobo.412.1"> command for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.414.1"> project again, and your build process will now succeed. </span><span class="koboSpan" id="kobo.414.2">After the build is finished, you’ll notice a </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">dist</span></strong><span class="koboSpan" id="kobo.416.1"> folder has been created in the root of your Nx monorepo. </span><span class="koboSpan" id="kobo.416.2">The build output for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.418.1"> project and all dependent buildable projects are located inside this </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">dist</span></strong><span class="koboSpan" id="kobo.420.1"> folder. </span><span class="koboSpan" id="kobo.420.2">The build output for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.422.1"> project can be found at this </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">path: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">dist/apps/finance/expenses-registration</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.426.1">When you deploy your application, you upload the output inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">dist/apps/finance/expenses-registration</span></strong><span class="koboSpan" id="kobo.428.1"> to your hosting service. </span><span class="koboSpan" id="kobo.428.2">In the case of an Angular application, you </span><a id="_idIndexMarker1175"/><span class="koboSpan" id="kobo.429.1">can use a static hosting service such as GitHub Pages, Azure Blob Storage, Amazon </span><strong class="bold"><span class="koboSpan" id="kobo.430.1">Simple Storage Service</span></strong><span class="koboSpan" id="kobo.431.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.432.1">S3</span></strong><span class="koboSpan" id="kobo.433.1">), or any other static website hosting service you prefer. </span><span class="koboSpan" id="kobo.433.2">If you are using Angular Universal and </span><strong class="bold"><span class="koboSpan" id="kobo.434.1">server-side rendering</span></strong><span class="koboSpan" id="kobo.435.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.436.1">SSR</span></strong><span class="koboSpan" id="kobo.437.1">), you need a</span><a id="_idIndexMarker1176"/><span class="koboSpan" id="kobo.438.1"> different </span><a id="_idIndexMarker1177"/><span class="koboSpan" id="kobo.439.1">hosting service, such as Azure App Service, but we will not cover that in </span><span class="No-Break"><span class="koboSpan" id="kobo.440.1">this book.</span></span></p>
<p><span class="koboSpan" id="kobo.441.1">In the last section of this chapter, we will use GitHub Actions to automatically deploy and host our demo application on GitHub Pages, but for now, let’s see how we can serve our production build locally on our machine </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">using </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.443.1">http-server</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">.</span></span></p>
<h3><span class="koboSpan" id="kobo.445.1">Locally serving the production build</span></h3>
<p><span class="koboSpan" id="kobo.446.1">To serve our production build, we</span><a id="_idIndexMarker1178"/><span class="koboSpan" id="kobo.447.1"> need a server that can host our static files. </span><span class="koboSpan" id="kobo.447.2">There are many services out there that can do this, but we will be using </span><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">http-server</span></strong><span class="koboSpan" id="kobo.449.1">. </span><span class="koboSpan" id="kobo.449.2">To start, you need to install </span><strong class="source-inline"><span class="koboSpan" id="kobo.450.1">http-server</span></strong><span class="koboSpan" id="kobo.451.1"> on your machine using the </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.453.1">
npm install http-server -g</span></pre> <p><span class="koboSpan" id="kobo.454.1">After installing </span><strong class="source-inline"><span class="koboSpan" id="kobo.455.1">http-server</span></strong><span class="koboSpan" id="kobo.456.1">, you can use it to host the production build of your Angular application locally. </span><span class="koboSpan" id="kobo.456.2">If you don’t have staging environments such as test and acceptance, using something such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">http-server</span></strong><span class="koboSpan" id="kobo.458.1"> allows you to test if your build works as expected before deploying it to your production environment; still, in a professional setting, I would always recommend using a testing and acceptance environment where you can test your application in an environment that mimics the </span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">production environment.</span></span></p>
<p><span class="koboSpan" id="kobo.460.1">To locally host your application using </span><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">http-server</span></strong><span class="koboSpan" id="kobo.462.1">, you need to run the following terminal command at the root of your </span><span class="No-Break"><span class="koboSpan" id="kobo.463.1">Nx monorepo:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.464.1">
http-server dist\apps\finance\expenses-registration</span></pre> <p><span class="koboSpan" id="kobo.465.1">After running the preceding command, a server will be created, hosting the static files inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">dist\apps\finance\expenses-registration</span></strong><span class="koboSpan" id="kobo.467.1"> folder. </span><span class="koboSpan" id="kobo.467.2">Inside the terminal, you’ll find two URLs starting with your private IP addresses and ending with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">8080</span></strong><span class="koboSpan" id="kobo.469.1"> port. </span><span class="koboSpan" id="kobo.469.2">You can visit either of these URLs inside your browser to see your application. </span><span class="koboSpan" id="kobo.469.3">When you visit the application in your browser, you’ll see the requests that are made by your application inside the terminal. </span><span class="koboSpan" id="kobo.469.4">You may notice that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">api/expenses</span></strong><span class="koboSpan" id="kobo.471.1"> request is failing; the reason for the failing API request is that we don’t have a running API, and the mock </span><a id="_idIndexMarker1179"/><span class="koboSpan" id="kobo.472.1">API interceptor is disabled in a </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">production build.</span></span></p>
<p><span class="koboSpan" id="kobo.474.1">Because we disabled the mock data interceptor and we don’t have a running API, you don’t see any data inside the application when you visit it in the browser. </span><span class="koboSpan" id="kobo.474.2">For testing purposes, you can enable the mock interceptor for your production build by removing the following inside the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">mock.interceptor.ts</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.476.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.477.1">
!isDevMode() ||</span></pre> <p><span class="koboSpan" id="kobo.478.1">After removing the preceding code, the mock interceptor will also work for your production build. </span><span class="koboSpan" id="kobo.478.2">Create a new application build, serve the build using </span><strong class="source-inline"><span class="koboSpan" id="kobo.479.1">http-server</span></strong><span class="koboSpan" id="kobo.480.1">, and revisit the application inside your browser (you probably need to remove the browser cache by opening the developer tools, right-clicking on the reload symbol in the browser, and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.481.1">Empty Cache and Hard Reload</span></strong><span class="koboSpan" id="kobo.482.1">). </span><span class="koboSpan" id="kobo.482.2">Now, when you visit the application on the URL listed inside the terminal, you should see the mock data, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.483.1">api/expenses</span></strong><span class="koboSpan" id="kobo.484.1"> request succeeds. </span><span class="koboSpan" id="kobo.484.2">Don’t forget to revert the changes inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.485.1">mock.interceptor.ts</span></strong><span class="koboSpan" id="kobo.486.1"> file, as this is just for testing purposes; in a real production application, you want to use a </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">real API.</span></span></p>
<p><span class="koboSpan" id="kobo.488.1">So, to summarize, you learned how to lint projects inside your Nx monorepo and how you can automatically fix basic lint errors by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">–-fix</span></strong><span class="koboSpan" id="kobo.490.1"> flag. </span><span class="koboSpan" id="kobo.490.2">You learned what happens behind the scenes when you create an application build for your Angular applications. </span><span class="koboSpan" id="kobo.490.3">You also learned how to run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.491.1">build</span></strong><span class="koboSpan" id="kobo.492.1"> command for specific build configurations and where to find the output of your application build. </span><span class="koboSpan" id="kobo.492.2">Lastly, you hosted the build output locally using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">http-server</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.494.1">npm</span></strong><span class="koboSpan" id="kobo.495.1"> package. </span><span class="koboSpan" id="kobo.495.2">In the next section, you will learn how to analyze your application build so that you can easily identify which sections of your build can be worked on to reduce your </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">bundle sizes.</span></span></p>
<h1 id="_idParaDest-205"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.497.1">Analyzing your build output</span></h1>
<p><span class="koboSpan" id="kobo.498.1">Inside your build output, you’ll find different JavaScript files. </span><span class="koboSpan" id="kobo.498.2">Some of these files are your application bundles, which the browser</span><a id="_idIndexMarker1180"/><span class="koboSpan" id="kobo.499.1"> will load to render the application for the end user. </span><span class="koboSpan" id="kobo.499.2">The size of these bundles directly impacts the performance of your application. </span><span class="koboSpan" id="kobo.499.3">JavaScript is slow to load for a browser, so the bigger your bundle size, the longer it takes for the browser to download the files, render something on the screen, and make the web page respond so that the user can interact </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">with it.</span></span></p>
<p><span class="koboSpan" id="kobo.501.1">To reduce your bundle sizes, you need an effective way to analyze your bundles. </span><span class="koboSpan" id="kobo.501.2">If you run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">build</span></strong><span class="koboSpan" id="kobo.503.1"> command for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.505.1"> project, you’ll see a small report inside </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">the terminal</span></span></p>
<p><span class="koboSpan" id="kobo.507.1">The build report inside your terminal includes a list of the created bundles and the size of each bundle. </span><span class="koboSpan" id="kobo.507.2">While this list gives you some indication of the size of your bundles, you don’t see what the bundles are </span><a id="_idIndexMarker1181"/><span class="koboSpan" id="kobo.508.1">made up of and where you can make some improvements to reduce the </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">bundle sizes.</span></span></p>
<p><span class="koboSpan" id="kobo.510.1">There is a tool named </span><strong class="bold"><span class="koboSpan" id="kobo.511.1">Webpack Bundle Analyzer</span></strong><span class="koboSpan" id="kobo.512.1"> that can give you a more detailed overview of your bundles. </span><span class="koboSpan" id="kobo.512.2">To use the </span><a id="_idIndexMarker1182"/><span class="koboSpan" id="kobo.513.1">Webpack bundle analyzer, you start by globally installing </span><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">npm</span></strong><span class="koboSpan" id="kobo.515.1"> packages with the </span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.517.1">
npm i -g webpack-bundle-analyzer</span></pre> <p><span class="koboSpan" id="kobo.518.1">After installing the package globally, you need to install it as a dev dependency inside your Nx monorepo. </span><span class="koboSpan" id="kobo.518.2">You add the Webpack Bundle Analyzer tool as a dev dependency by running the following command in the root of your </span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">Nx monorepo:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.520.1">
npm i webpack-bundle-analyzer -save-dev</span></pre> <p><span class="koboSpan" id="kobo.521.1">After running the preceding </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">npm</span></strong><span class="koboSpan" id="kobo.523.1"> commands, you can start using Webpack Bundle Analyzer. </span><span class="koboSpan" id="kobo.523.2">The first step is creating a new production build for your application and including a </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">–-stats-json</span></strong><span class="koboSpan" id="kobo.525.1"> flag with the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">build</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.527.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.528.1">
nx build finance-expenses-registration --stats-json</span></pre> <p><span class="koboSpan" id="kobo.529.1">By adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">–-stats-json</span></strong><span class="koboSpan" id="kobo.531.1"> flag, Webpack Bundle Analyzer will create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">stats.json</span></strong><span class="koboSpan" id="kobo.533.1"> file inside the build output. </span><span class="koboSpan" id="kobo.533.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">stats.json</span></strong><span class="koboSpan" id="kobo.535.1"> file is located inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">dist\apps\finance\expenses-registration</span></strong><span class="koboSpan" id="kobo.537.1"> folder, next to the rest of your application build. </span><span class="koboSpan" id="kobo.537.2">To inspect the </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">stats.json</span></strong><span class="koboSpan" id="kobo.539.1"> file, you can run the following command at the root of your </span><span class="No-Break"><span class="koboSpan" id="kobo.540.1">Nx monorepo:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.541.1">
webpack-bundle-analyzer dist/apps/finance/expenses-registration/stats.json</span></pre> <p><span class="koboSpan" id="kobo.542.1">Running the preceding command will give you a visual and detailed overview of your application bundles. </span><span class="koboSpan" id="kobo.542.2">The</span><a id="_idIndexMarker1183"/><span class="koboSpan" id="kobo.543.1"> overview is opened in the browser and should look </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">like this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer044">
<span class="koboSpan" id="kobo.545.1"><img alt="Figure 12.3: Webpack Bundle Analyzer" src="image/B21625_12_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.546.1">Figure 12.3: Webpack Bundle Analyzer</span></p>
<p><span class="koboSpan" id="kobo.547.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.548.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.549.1">.3</span></em><span class="koboSpan" id="kobo.550.1">, the Webpack Bundle Analyzer tool gives you a detailed and easy-to-read overview of your bundles and what is in each bundle. </span><span class="koboSpan" id="kobo.550.2">You can easily identify the large parts of each bundle so that you can see where you can make improvements. </span><span class="koboSpan" id="kobo.550.3">Because we have a simple application, there isn’t much to adjust, but you can, for instance, see that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">ngrx-store</span></strong><span class="koboSpan" id="kobo.552.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">transloco</span></strong><span class="koboSpan" id="kobo.554.1"> bundles are one of the largest elements we’ve added to our project. </span><span class="koboSpan" id="kobo.554.2">If your bundle sizes are becoming too large, you can try to find replacements for large </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">npm</span></strong><span class="koboSpan" id="kobo.556.1"> packages you import, only import small sub-modules if they are </span><a id="_idIndexMarker1184"/><span class="koboSpan" id="kobo.557.1">available, or move code and other resources to lazy-loaded modules so that the browser can first render the page and lazy load </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">additional resources.</span></span></p>
<p><span class="koboSpan" id="kobo.559.1">As you can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.560.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.561.1">.3</span></em><span class="koboSpan" id="kobo.562.1">, in the sidebar of Webpack Bundle Analyzer, you can control which bundles you show on the screen; this makes it easier to focus on specific bundles in your build output. </span><span class="koboSpan" id="kobo.562.2">Additionally, you can see the bundle sizes in three different formats – the </span><strong class="bold"><span class="koboSpan" id="kobo.563.1">Stat</span></strong><span class="koboSpan" id="kobo.564.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.565.1">Parsed</span></strong><span class="koboSpan" id="kobo.566.1">, and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.567.1">Gzipped</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.568.1"> formats:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.569.1">Stat</span></strong><span class="koboSpan" id="kobo.570.1"> is the largest; this indicates the raw size of your bundle without any compressions </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">or optimizations.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.572.1">Parsed</span></strong><span class="koboSpan" id="kobo.573.1"> is the same size as shown in the build output report of your terminal. </span><span class="koboSpan" id="kobo.573.2">This is the size of your bundles after some optimizations and compressions </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">are applied.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.575.1">Gzipped</span></strong><span class="koboSpan" id="kobo.576.1"> is the smaller size. </span><span class="koboSpan" id="kobo.576.2">It </span><a id="_idIndexMarker1185"/><span class="koboSpan" id="kobo.577.1">would be best always to aim to Gzip your static build assets. </span><span class="koboSpan" id="kobo.577.2">As you can see, the Gzipped content is almost 69% smaller than that of the parsed assets. </span><span class="koboSpan" id="kobo.577.3">Having bundles that are 69% smaller will significantly improve the load times of your application. </span><span class="koboSpan" id="kobo.577.4">Most static application hosting services automatically Gzip your resources for you and provide the necessary configuration to unwrap Gzipped resources in the browser. </span><span class="koboSpan" id="kobo.577.5">You can check if your hosting service Gzipped your bundles by opening the developer tools in your browser, going to the </span><strong class="bold"><span class="koboSpan" id="kobo.578.1">Network</span></strong><span class="koboSpan" id="kobo.579.1"> tab, and checking the response header on the requests for your bundles. </span><span class="koboSpan" id="kobo.579.2">If you find the </span><strong class="source-inline"><span class="koboSpan" id="kobo.580.1">Content-Encoding: Gzip</span></strong><span class="koboSpan" id="kobo.581.1"> header, you know your hosting service enabled Gzipping for you; if the header is not included, you need to add Gzipping yourself. </span><span class="koboSpan" id="kobo.581.2">How to add Gzipping yourself falls out of the scope of this book. </span><span class="koboSpan" id="kobo.581.3">GitHub Pages will Gzip your Angular application </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">for you.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.583.1">To summarize, you now know </span><a id="_idIndexMarker1186"/><span class="koboSpan" id="kobo.584.1">how to analyze your application bundles effectively using Webpack Bundle Analyzer. </span><span class="koboSpan" id="kobo.584.2">If bundles are too large, you can try to move code to lazy-loaded modules and find replacements for large </span><strong class="source-inline"><span class="koboSpan" id="kobo.585.1">npm</span></strong><span class="koboSpan" id="kobo.586.1"> packages you import. </span><span class="koboSpan" id="kobo.586.2">You also learned that Gzipping your content significantly reduces your bundle sizes and that most modern hosting services handle Gzipping and the necessary configuration for you. </span><span class="koboSpan" id="kobo.586.3">In this book’s next and last section, we will use GitHub Actions to create a CI/CD process that automatically deploys our demo application to </span><span class="No-Break"><span class="koboSpan" id="kobo.587.1">GitHub Pages.</span></span></p>
<h1 id="_idParaDest-206"><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.588.1">Automatically deploying Angular applications</span></h1>
<p><span class="koboSpan" id="kobo.589.1">In this last section, you </span><a id="_idIndexMarker1187"/><span class="koboSpan" id="kobo.590.1">will learn how to automatically deploy Angular applications inside your Nx monorepo to GitHub Pages. </span><span class="koboSpan" id="kobo.590.2">You will set up a CI/CD pipeline using GitHub Actions that deploys the demo application we’ve created whenever you merge code to your main branch on GitHub. </span><span class="koboSpan" id="kobo.590.3">We will create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">.yml</span></strong><span class="koboSpan" id="kobo.592.1"> file containing all the steps necessary for the deployment. </span><span class="koboSpan" id="kobo.592.2">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.593.1">.yml</span></strong><span class="koboSpan" id="kobo.594.1"> file, we will use the YAML language, which is commonly used to create configuration files for various DevOps tools </span><span class="No-Break"><span class="koboSpan" id="kobo.595.1">and programs.</span></span></p>
<h2 id="_idParaDest-207"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.596.1">Creating an access token</span></h2>
<p><span class="koboSpan" id="kobo.597.1">Before you start creating a </span><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">.yml</span></strong><span class="koboSpan" id="kobo.599.1"> file, you need to create an access token inside your GitHub account. </span><span class="koboSpan" id="kobo.599.2">GitHub needs to know </span><a id="_idIndexMarker1188"/><span class="koboSpan" id="kobo.600.1">you’re authenticated to deploy applications to GitHub Pages before it can perform the deployment. </span><span class="koboSpan" id="kobo.600.2">You provide the necessary authentication to GitHub, providing an access token to the </span><a id="_idIndexMarker1189"/><span class="koboSpan" id="kobo.601.1">deployment step inside your </span><strong class="source-inline"><span class="koboSpan" id="kobo.602.1">.yml</span></strong><span class="koboSpan" id="kobo.603.1"> file. </span><span class="koboSpan" id="kobo.603.2">So, the first thing you need to do is create an access token inside your GitHub account. </span><span class="koboSpan" id="kobo.603.3">Follow </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.605.1">Start by clicking on your account icon in GitHub and </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">select </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.607.1">Settings</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.609.1">On the profile settings page, you need to scroll down and select </span><strong class="bold"><span class="koboSpan" id="kobo.610.1">Develop settings</span></strong><span class="koboSpan" id="kobo.611.1"> on the left side of </span><span class="No-Break"><span class="koboSpan" id="kobo.612.1">the screen.</span></span></li>
<li><span class="koboSpan" id="kobo.613.1">Now, again on the left side of the screen, click on </span><strong class="bold"><span class="koboSpan" id="kobo.614.1">Personal access tokens</span></strong><span class="koboSpan" id="kobo.615.1"> and then select </span><strong class="bold"><span class="koboSpan" id="kobo.616.1">Tokens (classic)</span></strong><span class="koboSpan" id="kobo.617.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">drop-down menu.</span></span></li>
<li><span class="koboSpan" id="kobo.619.1">Next, you need to click on the </span><strong class="bold"><span class="koboSpan" id="kobo.620.1">Generate new token</span></strong><span class="koboSpan" id="kobo.621.1"> button, and in the drop-down menu, you select </span><strong class="bold"><span class="koboSpan" id="kobo.622.1">Generate new </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.623.1">token (classic)</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.625.1">After following </span><em class="italic"><span class="koboSpan" id="kobo.626.1">steps 1</span></em><span class="koboSpan" id="kobo.627.1"> to </span><em class="italic"><span class="koboSpan" id="kobo.628.1">4</span></em><span class="koboSpan" id="kobo.629.1">, you </span><a id="_idIndexMarker1190"/><span class="koboSpan" id="kobo.630.1">should land on the page shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.631.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.632.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer045">
<span class="koboSpan" id="kobo.634.1"><img alt="Figure 12.4: GitHub personal access token" src="image/B21625_12_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.635.1">Figure 12.4: GitHub personal access token</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.636.1">Now, on the </span><strong class="bold"><span class="koboSpan" id="kobo.637.1">New personal access token (classic)</span></strong><span class="koboSpan" id="kobo.638.1"> page, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.639.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.640.1">.4</span></em><span class="koboSpan" id="kobo.641.1">, enter </span><strong class="source-inline"><span class="koboSpan" id="kobo.642.1">GH_PAGES</span></strong><span class="koboSpan" id="kobo.643.1"> under the </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">Note</span></strong><span class="koboSpan" id="kobo.645.1"> field. </span><span class="koboSpan" id="kobo.645.2">You can add any name here you want, but to follow along, you should use the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">GH_PAGES</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.647.1"> name.</span></span></li>
<li><span class="koboSpan" id="kobo.648.1">For the </span><strong class="bold"><span class="koboSpan" id="kobo.649.1">Expiration</span></strong><span class="koboSpan" id="kobo.650.1"> field, select </span><strong class="bold"><span class="koboSpan" id="kobo.651.1">No expiration</span></strong><span class="koboSpan" id="kobo.652.1">. </span><span class="koboSpan" id="kobo.652.2">In a real production environment, you might want an expiration date for security reasons, but this means you need to renew your</span><a id="_idIndexMarker1191"/><span class="koboSpan" id="kobo.653.1"> token for the set </span><span class="No-Break"><span class="koboSpan" id="kobo.654.1">expiration interval.</span></span></li>
<li><span class="koboSpan" id="kobo.655.1">Under the </span><strong class="bold"><span class="koboSpan" id="kobo.656.1">Select scopes</span></strong><span class="koboSpan" id="kobo.657.1"> field, check all checkboxes up </span><span class="No-Break"><span class="koboSpan" id="kobo.658.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">gist</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.660.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.661.1">After selecting the checkboxes under </span><strong class="bold"><span class="koboSpan" id="kobo.662.1">Select scopes</span></strong><span class="koboSpan" id="kobo.663.1">, you can scroll down and select </span><strong class="bold"><span class="koboSpan" id="kobo.664.1">Generate token</span></strong><span class="koboSpan" id="kobo.665.1">. </span><span class="koboSpan" id="kobo.665.2">After clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.666.1">Generate token</span></strong><span class="koboSpan" id="kobo.667.1">, you will see the key of your personal access token; it will look similar </span><span class="No-Break"><span class="koboSpan" id="kobo.668.1">to this:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.669.1">
ghp_vnjAH0PRGRcIO6UQGO2GavdOUVUDPJ1Jrv77</span></pre><p class="list-inset"><span class="koboSpan" id="kobo.670.1">Copy the key to your access token and store it safely; you will need it in the next step of your automated </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">deployment configuration.</span></span></p></li> <li><span class="koboSpan" id="kobo.672.1">After copying and saving your key, go to the GitHub repository where you stored the code you created during the course of </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">this book.</span></span></li>
<li><span class="koboSpan" id="kobo.674.1">Next, you need to </span><a id="_idIndexMarker1192"/><span class="koboSpan" id="kobo.675.1">navigate to the repository settings by clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.676.1">Settings</span></strong><span class="koboSpan" id="kobo.677.1"> in your navigation items, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.678.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.679.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.680.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer046">
<span class="koboSpan" id="kobo.681.1"><img alt="Figure 12.5: GitHub repository settings" src="image/B21625_12_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.682.1">Figure 12.5: GitHub repository settings</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.683.1">Now, on the left side of the screen under </span><strong class="bold"><span class="koboSpan" id="kobo.684.1">Security</span></strong><span class="koboSpan" id="kobo.685.1">, click on </span><strong class="bold"><span class="koboSpan" id="kobo.686.1">Secrets and variables</span></strong><span class="koboSpan" id="kobo.687.1">, and in the</span><a id="_idIndexMarker1193"/><span class="koboSpan" id="kobo.688.1"> dropdown, click </span><span class="No-Break"><span class="koboSpan" id="kobo.689.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.690.1">Actions</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.691.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.692.1">This will bring you to the </span><strong class="bold"><span class="koboSpan" id="kobo.693.1">Actions secrets and variables</span></strong><span class="koboSpan" id="kobo.694.1"> page, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.695.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.696.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer047">
<span class="koboSpan" id="kobo.698.1"><img alt="Figure 12.6: Actions secrets and variables" src="image/B21625_12_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.699.1">Figure 12.6: Actions secrets and variables</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.700.1">On the </span><strong class="bold"><span class="koboSpan" id="kobo.701.1">Actions secrets and variables</span></strong><span class="koboSpan" id="kobo.702.1"> page, you need to click on the </span><strong class="bold"><span class="koboSpan" id="kobo.703.1">New repository </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.704.1">secret</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.705.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.706.1">Next, you’ll be asked to provide </span><a id="_idIndexMarker1194"/><span class="koboSpan" id="kobo.707.1">a name and secret. </span><span class="koboSpan" id="kobo.707.2">Inside the </span><strong class="bold"><span class="koboSpan" id="kobo.708.1">Name</span></strong><span class="koboSpan" id="kobo.709.1"> field, provide </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">GH_PAGES</span></strong><span class="koboSpan" id="kobo.711.1"> again, and in the </span><strong class="bold"><span class="koboSpan" id="kobo.712.1">Secret</span></strong><span class="koboSpan" id="kobo.713.1"> field, paste </span><a id="_idIndexMarker1195"/><span class="koboSpan" id="kobo.714.1">the key you saved from the personal </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">access token.</span></span></li>
<li><span class="koboSpan" id="kobo.716.1">After entering the necessary values, click on the </span><strong class="bold"><span class="koboSpan" id="kobo.717.1">Add secret</span></strong><span class="koboSpan" id="kobo.718.1"> button to save your </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">repository secret.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.720.1">If successful, you should now see your </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">GH_PAGES</span></strong><span class="koboSpan" id="kobo.722.1"> secret under the </span><strong class="bold"><span class="koboSpan" id="kobo.723.1">Repository secrets</span></strong><span class="koboSpan" id="kobo.724.1"> section on the </span><strong class="bold"><span class="koboSpan" id="kobo.725.1">Actions secrets and </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.726.1">variables</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.727.1"> page.</span></span></p>
<h2 id="_idParaDest-208"><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.728.1">Creating a .yml file</span></h2>
<p><span class="koboSpan" id="kobo.729.1">Now that you’ve created a personal </span><a id="_idIndexMarker1196"/><span class="koboSpan" id="kobo.730.1">access token and a repository secret, we </span><a id="_idIndexMarker1197"/><span class="koboSpan" id="kobo.731.1">can continue by creating a </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.733.1">yml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.734.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.735.1">To create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.736.1">.yml</span></strong><span class="koboSpan" id="kobo.737.1"> file, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.738.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.739.1">Start by clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.740.1">Actions</span></strong><span class="koboSpan" id="kobo.741.1"> inside your </span><span class="No-Break"><span class="koboSpan" id="kobo.742.1">repository navigation.</span></span></li>
<li><span class="koboSpan" id="kobo.743.1">Next, click on </span><strong class="bold"><span class="koboSpan" id="kobo.744.1">Set up a </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.745.1">workflow yourself</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.746.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.747.1">This will bring you to a page </span><a id="_idIndexMarker1198"/><span class="koboSpan" id="kobo.748.1">as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.749.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.750.1">.7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.751.1">:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer048">
<span class="koboSpan" id="kobo.752.1"><img alt="Figure 12.7: main.yml" src="image/B21625_12_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.753.1">Figure 12.7: main.yml</span></p>
<p><span class="koboSpan" id="kobo.754.1">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.755.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.756.1">.7</span></em><span class="koboSpan" id="kobo.757.1">, GitHub created an empty </span><strong class="source-inline"><span class="koboSpan" id="kobo.758.1">main.yml</span></strong><span class="koboSpan" id="kobo.759.1"> file for you inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.760.1">.github/workflows</span></strong><span class="koboSpan" id="kobo.761.1"> folder. </span><span class="koboSpan" id="kobo.761.2">You can directly edit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.762.1">main.yml</span></strong><span class="koboSpan" id="kobo.763.1"> file in GitHub, alternatively, you can commit the file and edit it inside VS Code. </span><span class="koboSpan" id="kobo.763.2">For now, we will simply edit the file inside GitHub and start to add the necessary steps to deploy our demo application to </span><span class="No-Break"><span class="koboSpan" id="kobo.764.1">GitHub Pages.</span></span></p>
<h3><span class="koboSpan" id="kobo.765.1">Adding a trigger</span></h3>
<p><span class="koboSpan" id="kobo.766.1">You start by adding a trigger to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.767.1">.yml</span></strong><span class="koboSpan" id="kobo.768.1"> file. </span><span class="koboSpan" id="kobo.768.2">In our case, we want our </span><strong class="source-inline"><span class="koboSpan" id="kobo.769.1">.yml</span></strong><span class="koboSpan" id="kobo.770.1"> file to be triggered when we push </span><a id="_idIndexMarker1199"/><span class="koboSpan" id="kobo.771.1">changes to the main branch of our GitHub repository. </span><span class="koboSpan" id="kobo.771.2">You add this trigger by adding the following content to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.773.1">yml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.774.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.775.1">
# Add trigger
name: Build and Deploy Script
on:
  push:
    branches:
      - main</span></pre> <p><span class="koboSpan" id="kobo.776.1">The preceding code snippet starts with a comment; next, we give a name to the step we’re declaring, then we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.777.1">on:</span></strong><span class="koboSpan" id="kobo.778.1"> keyword to indicate we’re defining a trigger, and underneath it, we define the configuration of our trigger – in this case, on push of the main branch. </span><span class="koboSpan" id="kobo.778.2">The</span><a id="_idIndexMarker1200"/><span class="koboSpan" id="kobo.779.1"> indentation in </span><strong class="source-inline"><span class="koboSpan" id="kobo.780.1">.yml</span></strong><span class="koboSpan" id="kobo.781.1"> files is important, so make sure each line has an extra tab compared to the line </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">above it.</span></span></p>
<h3><span class="koboSpan" id="kobo.783.1">Defining jobs to run and the related steps</span></h3>
<p><span class="koboSpan" id="kobo.784.1">After defining the trigger, you </span><a id="_idIndexMarker1201"/><span class="koboSpan" id="kobo.785.1">need to define jobs to run and the steps for the jobs you want </span><span class="No-Break"><span class="koboSpan" id="kobo.786.1">to run.</span></span></p>
<p><span class="koboSpan" id="kobo.787.1">In our case, we only have one job, which is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">build</span></strong><span class="koboSpan" id="kobo.789.1"> job consisting of multiple steps. </span><span class="koboSpan" id="kobo.789.2">Start by defining </span><strong class="source-inline"><span class="koboSpan" id="kobo.790.1">jobs</span></strong><span class="koboSpan" id="kobo.791.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.792.1">build</span></strong><span class="koboSpan" id="kobo.793.1"> keywords, followed by defining the OS for the VM the build job will </span><span class="No-Break"><span class="koboSpan" id="kobo.794.1">run on:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.795.1">
# Jobs to run
jobs:
  build:
    runs-on: ubuntu-latest</span></pre> <p><span class="koboSpan" id="kobo.796.1">Underneath the </span><strong class="source-inline"><span class="koboSpan" id="kobo.797.1">runs-on</span></strong><span class="koboSpan" id="kobo.798.1"> configuration of the build job, we will define the steps needed to perform the build job. </span><span class="koboSpan" id="kobo.798.2">The first step you need to perform is to check out the </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">GitHub repository:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.800.1">
    # Checkout repository
    - name: Checkout Repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0</span></pre> <p><span class="koboSpan" id="kobo.801.1">As you can see in the preceding snippet, the indentation for this step starts at the same place as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">runs-on</span></strong><span class="koboSpan" id="kobo.803.1"> configuration. </span><span class="koboSpan" id="kobo.803.2">We start by defining a comment; next, we define a name for the step and what action the step uses. </span><span class="koboSpan" id="kobo.803.3">Lastly, we provide additional configurations for the step – in this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.804.1">fetch-depth: 0</span></strong><span class="koboSpan" id="kobo.805.1">, which indicates the fetch history of all branches and tags inside your </span><span class="No-Break"><span class="koboSpan" id="kobo.806.1">GitHub repository.</span></span></p>
<p><span class="koboSpan" id="kobo.807.1">After fetching the GitHub</span><a id="_idIndexMarker1202"/><span class="koboSpan" id="kobo.808.1"> repository, you need to install NodeJS on the Ubuntu machine with the </span><span class="No-Break"><span class="koboSpan" id="kobo.809.1">following step:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.810.1">
    # Install NodeJS
    - name: Adding Node.js
      uses: actions/setup-node@v2
      with:
        node-version: 20.1.0</span></pre> <p><span class="koboSpan" id="kobo.811.1">After installing NodeJS, you need to install </span><strong class="source-inline"><span class="koboSpan" id="kobo.812.1">node_modules</span></strong><span class="koboSpan" id="kobo.813.1">. </span><span class="koboSpan" id="kobo.813.2">To speed up the build job, we will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.814.1">pnpm</span></strong><span class="koboSpan" id="kobo.815.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.816.1">npm</span></strong><span class="koboSpan" id="kobo.817.1">. </span><span class="koboSpan" id="kobo.817.2">Simply add the following step to your </span><strong class="source-inline"><span class="koboSpan" id="kobo.818.1">.yml</span></strong><span class="koboSpan" id="kobo.819.1"> file to install </span><strong class="source-inline"><span class="koboSpan" id="kobo.820.1">node_modules</span></strong><span class="koboSpan" id="kobo.821.1"> for your </span><span class="No-Break"><span class="koboSpan" id="kobo.822.1">Nx monorepo:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.823.1">
    # Setup pnpm
    - uses: pnpm/action-setup@v2
      with:
        version: 8.14.1
    - run: pnpm install --frozen-lockfile</span></pre> <p><span class="koboSpan" id="kobo.824.1">The next step in our process will be linting all </span><span class="No-Break"><span class="koboSpan" id="kobo.825.1">affected projects:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.826.1">
    # Lint affected projects
    - name: Lint affected
      run: pnpm nx run-many -t lint --base=main --no-cloud</span></pre> <p><span class="koboSpan" id="kobo.827.1">As you can see, we added a new flag to the command we haven’t seen before. </span><span class="koboSpan" id="kobo.827.2">We’ve added the </span><strong class="source-inline"><span class="koboSpan" id="kobo.828.1">–-no-cloud</span></strong><span class="koboSpan" id="kobo.829.1"> flag to indicate we’re not using Nx Cloud; otherwise, your pipeline will fail by trying to connect with Nx Cloud. </span><span class="koboSpan" id="kobo.829.2">Next, we will add an extra step to unit test </span><span class="No-Break"><span class="koboSpan" id="kobo.830.1">our application:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.831.1">
    # Unit testing finance-expenses-registration
    - name: Unit test finance-expenses-registration
      run: pnpm nx run finance-expenses-registration:test –no-cloud</span></pre> <p><span class="koboSpan" id="kobo.832.1">For simplicity, we will skip </span><strong class="bold"><span class="koboSpan" id="kobo.833.1">end-to-end</span></strong><span class="koboSpan" id="kobo.834.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.835.1">e2e</span></strong><span class="koboSpan" id="kobo.836.1">) tests and</span><a id="_idIndexMarker1203"/><span class="koboSpan" id="kobo.837.1"> only run unit tests for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.838.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.839.1"> project. </span><span class="koboSpan" id="kobo.839.2">If you already fixed all unit tests within the monorepo, you can change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.840.1">.yml</span></strong><span class="koboSpan" id="kobo.841.1"> file to run tests for all affected projects. </span><span class="koboSpan" id="kobo.841.2">After running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.842.1">lint</span></strong><span class="koboSpan" id="kobo.843.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">test</span></strong><span class="koboSpan" id="kobo.845.1"> commands, we will build the </span><strong class="source-inline"><span class="koboSpan" id="kobo.846.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.847.1"> project </span><a id="_idIndexMarker1204"/><span class="koboSpan" id="kobo.848.1">with the </span><span class="No-Break"><span class="koboSpan" id="kobo.849.1">following step:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.850.1">
    # Build finance-expenses-registration application
    - name: Build Angular App
      run: pnpm nx build finance-expenses-registration --no-cloud --base-href /Effective-Angular/</span></pre> <p><span class="koboSpan" id="kobo.851.1">As you may have noticed, we added the </span><strong class="source-inline"><span class="koboSpan" id="kobo.852.1">–-base-href</span></strong><span class="koboSpan" id="kobo.853.1"> flag to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">build</span></strong><span class="koboSpan" id="kobo.855.1"> command. </span><span class="koboSpan" id="kobo.855.2">We need to add a base </span><strong class="source-inline"><span class="koboSpan" id="kobo.856.1">href</span></strong><span class="koboSpan" id="kobo.857.1"> attribute because GitHub will deploy your application to </span><strong class="source-inline"><span class="koboSpan" id="kobo.858.1">&lt;GitHub account name&gt;.github.io/&lt;repository name&gt;</span></strong><span class="koboSpan" id="kobo.859.1">. </span><span class="koboSpan" id="kobo.859.2">If you don’t use </span><strong class="source-inline"><span class="koboSpan" id="kobo.860.1">Effective-Angular</span></strong><span class="koboSpan" id="kobo.861.1"> as your repository name, you need to change the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.862.1">–-base-href</span></strong><span class="koboSpan" id="kobo.863.1"> flag to your own </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">repository name.</span></span></p>
<p><span class="koboSpan" id="kobo.865.1">After building the repository, you need to initialize Git on the VM so that you can deploy it to GitHub Pages. </span><span class="koboSpan" id="kobo.865.2">Simply add the following step to your </span><strong class="source-inline"><span class="koboSpan" id="kobo.866.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.867.1">yml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.868.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.869.1">
    # Setup Git on the VM
    - name: Set up Git
      run: |
        git config --global user.email "youremail@gmail.com"
        git config --global user.name "your-git-username"</span></pre> <p><span class="koboSpan" id="kobo.870.1">After adding the preceding step, we can move to the last step inside our build job, this being the deployment of our application to </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">GitHub Pages.</span></span></p>
<h2 id="_idParaDest-209"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.872.1">Deploying the application to GitHub Pages</span></h2>
<p><span class="koboSpan" id="kobo.873.1">We will be using an </span><strong class="source-inline"><span class="koboSpan" id="kobo.874.1">npm</span></strong><span class="koboSpan" id="kobo.875.1"> package </span><a id="_idIndexMarker1205"/><span class="koboSpan" id="kobo.876.1">named </span><strong class="source-inline"><span class="koboSpan" id="kobo.877.1">angular-cli-ghpages</span></strong><span class="koboSpan" id="kobo.878.1"> to do the deployment of the application. </span><span class="koboSpan" id="kobo.878.2">Add the following step to your </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.880.1">yml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.881.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.882.1">
    # Deploy the finance-expenses-registration to GitHub pages
    - name: Deploy to gh pages
      run: |
        npx angular-cli-ghpages --dir=dist/apps/finance/expenses-registration
      env:
        CI: true
        GH_TOKEN: ${{ secrets.GH_PAGES }}</span></pre> <p><span class="koboSpan" id="kobo.883.1">As you can see in the preceding code, we run a terminal command using </span><strong class="source-inline"><span class="koboSpan" id="kobo.884.1">angular-cli-ghpages</span></strong><span class="koboSpan" id="kobo.885.1"> to deploy the application, and we need to provide the </span><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">GH_PAGES</span></strong><span class="koboSpan" id="kobo.887.1"> token we created earlier so that GitHub knows we have the necessary authorization to do the deployment. </span><span class="koboSpan" id="kobo.887.2">After adding the deployment step, you’ve added all steps needed to automatically deploy your demo application to </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">GitHub Pages.</span></span></p>
<p><span class="koboSpan" id="kobo.889.1">You can now click on the </span><strong class="bold"><span class="koboSpan" id="kobo.890.1">Commit changes…</span></strong><span class="koboSpan" id="kobo.891.1"> button, and in the modal that pops up, click on </span><strong class="bold"><span class="koboSpan" id="kobo.892.1">Commit changes</span></strong><span class="koboSpan" id="kobo.893.1">. </span><span class="koboSpan" id="kobo.893.2">After committing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.894.1">.yml</span></strong><span class="koboSpan" id="kobo.895.1"> file to your main branch, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.896.1">.yml</span></strong><span class="koboSpan" id="kobo.897.1"> file will immediately be triggered. </span><span class="koboSpan" id="kobo.897.2">You can see this by navigating back to the </span><strong class="bold"><span class="koboSpan" id="kobo.898.1">Actions</span></strong><span class="koboSpan" id="kobo.899.1"> tab of your repository, and there you should see your running workflow. </span><span class="koboSpan" id="kobo.899.2">Unfortunately, the workflow </span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">currently fails.</span></span></p>
<h2 id="_idParaDest-210"><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.901.1">Fixing workflow fails</span></h2>
<p><span class="koboSpan" id="kobo.902.1">The GitHub Actions workflow failed </span><a id="_idIndexMarker1206"/><span class="koboSpan" id="kobo.903.1">because of multiple reasons, so let’s fix the problems one by one. </span><span class="koboSpan" id="kobo.903.2">First, you need to install the </span><strong class="source-inline"><span class="koboSpan" id="kobo.904.1">angular-cli-ghpages</span></strong><span class="koboSpan" id="kobo.905.1"> packages inside your Nx monorepo. </span><span class="koboSpan" id="kobo.905.2">Simply run the following command to install the package in </span><span class="No-Break"><span class="koboSpan" id="kobo.906.1">your monorepo:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.907.1">
npm i angular-cli-ghpages</span></pre> <p><span class="koboSpan" id="kobo.908.1">Next, we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.909.1">pnpm</span></strong><span class="koboSpan" id="kobo.910.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">npm</span></strong><span class="koboSpan" id="kobo.912.1"> in our GitHub Actions workflow. </span><span class="koboSpan" id="kobo.912.2">Because of this, we need to commit a </span><strong class="source-inline"><span class="koboSpan" id="kobo.913.1">pnpm-lock.yaml</span></strong><span class="koboSpan" id="kobo.914.1"> file to our GitHub repository. </span><span class="koboSpan" id="kobo.914.2">To generate this </span><strong class="source-inline"><span class="koboSpan" id="kobo.915.1">pnpm-lock.yaml</span></strong><span class="koboSpan" id="kobo.916.1"> file, start by globally installing </span><strong class="source-inline"><span class="koboSpan" id="kobo.917.1">pnpm</span></strong><span class="koboSpan" id="kobo.918.1"> with the following </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.919.1">npm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.920.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.921.1">
npm install -g pnpm</span></pre> <p><span class="koboSpan" id="kobo.922.1">After installing </span><strong class="source-inline"><span class="koboSpan" id="kobo.923.1">pnpm</span></strong><span class="koboSpan" id="kobo.924.1">, you can start using </span><strong class="source-inline"><span class="koboSpan" id="kobo.925.1">pnpm</span></strong><span class="koboSpan" id="kobo.926.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.927.1">npm</span></strong><span class="koboSpan" id="kobo.928.1"> for all </span><strong class="source-inline"><span class="koboSpan" id="kobo.929.1">npm</span></strong><span class="koboSpan" id="kobo.930.1"> commands you normally run. </span><span class="koboSpan" id="kobo.930.2">I would advise using </span><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">pnpm</span></strong><span class="koboSpan" id="kobo.932.1"> as it’s a lot faster compared to </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">npm</span></strong><span class="koboSpan" id="kobo.934.1">. </span><span class="koboSpan" id="kobo.934.2">Now, to generate your </span><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">pnpm-lock.yaml</span></strong><span class="koboSpan" id="kobo.936.1"> file, simply run the </span><span class="No-Break"><span class="koboSpan" id="kobo.937.1">following command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.938.1">
pnpm install</span></pre> <p><span class="koboSpan" id="kobo.939.1">The aforementioned command is similar</span><a id="_idIndexMarker1207"/><span class="koboSpan" id="kobo.940.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">npm install</span></strong><span class="koboSpan" id="kobo.942.1"> command, only using </span><strong class="source-inline"><span class="koboSpan" id="kobo.943.1">pnpm</span></strong><span class="koboSpan" id="kobo.944.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.945.1">npm</span></strong><span class="koboSpan" id="kobo.946.1">. </span><span class="koboSpan" id="kobo.946.2">After running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">pnpm install</span></strong><span class="koboSpan" id="kobo.948.1"> command, you can commit your changes and merge them with your main branch on GitHub to trigger the workflow again. </span><span class="koboSpan" id="kobo.948.2">As shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.949.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.950.1">.8</span></em><span class="koboSpan" id="kobo.951.1">, under the </span><strong class="bold"><span class="koboSpan" id="kobo.952.1">Actions</span></strong><span class="koboSpan" id="kobo.953.1"> tab of your repository, you should now see two workflow runs, and the second run </span><span class="No-Break"><span class="koboSpan" id="kobo.954.1">should succeed:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer049">
<span class="koboSpan" id="kobo.955.1"><img alt="Figure 12.8: GitHub Actions workflow runs" src="image/B21625_12_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.956.1">Figure 12.8: GitHub Actions workflow runs</span></p>
<p><span class="koboSpan" id="kobo.957.1">You now have a successful build, yet you still need to handle the deployment step. </span><span class="koboSpan" id="kobo.957.2">Go to your repository settings, and on the left side, click on </span><strong class="bold"><span class="koboSpan" id="kobo.958.1">Pages</span></strong><span class="koboSpan" id="kobo.959.1"> and add the configuration as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.960.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.961.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.962.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer050">
<span class="koboSpan" id="kobo.963.1"><img alt="Figure 12.9: Build and deployment" src="image/B21625_12_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.964.1">Figure 12.9: Build and deployment</span></p>
<p><span class="koboSpan" id="kobo.965.1">After configuring the branch to </span><strong class="source-inline"><span class="koboSpan" id="kobo.966.1">gh-pages</span></strong><span class="koboSpan" id="kobo.967.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.968.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.969.1">.9</span></em><span class="koboSpan" id="kobo.970.1">, the deployment process will automatically start, and after a couple of minutes, you can find the URL of your application at the top </span><a id="_idIndexMarker1208"/><span class="koboSpan" id="kobo.971.1">of this GitHub page. </span><span class="koboSpan" id="kobo.971.2">Each time your workflow runs successfully, the deployment will now be done automatically. </span><span class="koboSpan" id="kobo.971.3">When you visit the demo application on the deployed URL, you’ll notice nothing but your navbar is shown, because the application is deployed on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.972.1">&lt;GitHub account name&gt;.github.io/&lt;repository name&gt;</span></strong><span class="koboSpan" id="kobo.973.1"> URL, and we need to account for the repository name when fetching the language files inside our application, so there is one last fix to </span><span class="No-Break"><span class="koboSpan" id="kobo.974.1">be made.</span></span></p>
<p><span class="koboSpan" id="kobo.975.1">Go to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.976.1">app.config.ts</span></strong><span class="koboSpan" id="kobo.977.1"> file of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.978.1">finance-expenses-registration</span></strong><span class="koboSpan" id="kobo.979.1"> project, and add the following provider at the top of your </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.980.1">providers</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.981.1"> array:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.982.1">
{ provide: APP_BASE_HREF, useValue: isDevMode() ? </span><span class="koboSpan" id="kobo.982.2">'' : '/Effective-Angular/' },</span></pre> <p><span class="koboSpan" id="kobo.983.1">Next, go to your </span><strong class="source-inline"><span class="koboSpan" id="kobo.984.1">transloco-loader.ts</span></strong><span class="koboSpan" id="kobo.985.1"> file and adjust it to contain the </span><span class="No-Break"><span class="koboSpan" id="kobo.986.1">following content:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.987.1">
@Injectable({ providedIn: 'root' })
export class TranslocoHttpLoader implements TranslocoLoader {
  private http = inject(HttpClient);
  protected readonly baseHref = inject(APP_BASE_HREF);
  getTranslation(lang: 'en' | 'nl') {
    return this.http.get&lt;Translation&gt;(`${this.baseHref}assets/i18n/${lang}.json`);
  }
}</span></pre> <p><span class="koboSpan" id="kobo.988.1">As you can see, we injected the </span><strong class="source-inline"><span class="koboSpan" id="kobo.989.1">APP_BASE_HREF</span></strong><span class="koboSpan" id="kobo.990.1"> injectable into the file and included the </span><strong class="source-inline"><span class="koboSpan" id="kobo.991.1">baseHref</span></strong><span class="koboSpan" id="kobo.992.1"> property into the URL used to fetch the translations. </span><span class="koboSpan" id="kobo.992.2">You can now push the changes and merge them with</span><a id="_idIndexMarker1209"/><span class="koboSpan" id="kobo.993.1"> your main branch to trigger the workflow again. </span><span class="koboSpan" id="kobo.993.2">After your workflow run succeeds, you can click on </span><strong class="bold"><span class="koboSpan" id="kobo.994.1">Deployments</span></strong><span class="koboSpan" id="kobo.995.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.996.1">Figure 12</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.997.1">.10</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.998.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer051">
<span class="koboSpan" id="kobo.999.1"><img alt="Figure 12.10: Deployments" src="image/B21625_12_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1000.1">Figure 12.10: Deployments</span></p>
<p><span class="koboSpan" id="kobo.1001.1">When you click on </span><strong class="bold"><span class="koboSpan" id="kobo.1002.1">Deployments</span></strong><span class="koboSpan" id="kobo.1003.1">, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1004.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1005.1">.10</span></em><span class="koboSpan" id="kobo.1006.1">, you’ll be navigated to a page where you can see all deployments of your application. </span><span class="koboSpan" id="kobo.1006.2">On this same page, you’ll also find the URL of your deployed application and when it was </span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">last updated:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer052">
<span class="koboSpan" id="kobo.1008.1"><img alt="Figure 12.11: Deployments list" src="image/B21625_12_011.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1009.1">Figure 12.11: Deployments list</span></p>
<p><span class="koboSpan" id="kobo.1010.1">When your new deployment is ready, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1011.1">Figure 12</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1012.1">.11</span></em><span class="koboSpan" id="kobo.1013.1">, you can navigate to your deployed application in the browser again, and now you should see a working application, including a table and translated values. </span><span class="koboSpan" id="kobo.1013.2">There is no data inside the table because the mock interceptor is disabled for your production build, and there is no API your application can connect with. </span><span class="koboSpan" id="kobo.1013.3">You now have everything in place, and your application is linted, tested, built, and deployed automatically each time you push changes to your main </span><span class="No-Break"><span class="koboSpan" id="kobo.1014.1">GitHub repository.</span></span></p>
<p><span class="koboSpan" id="kobo.1015.1">As mentioned before, this is</span><a id="_idIndexMarker1210"/><span class="koboSpan" id="kobo.1016.1"> just a demo application, and there are still plenty of improvements to make. </span><span class="koboSpan" id="kobo.1016.2">So, if you want, you can add more pages, create separate library components for the table and other features you want to have, and create and convert the application into something truly suited for production purposes. </span><span class="koboSpan" id="kobo.1016.3">You now have all the building blocks needed to effectively use Nx and the Angular framework to develop robust and </span><span class="No-Break"><span class="koboSpan" id="kobo.1017.1">scalable applications.</span></span></p>
<h1 id="_idParaDest-211"><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.1018.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1019.1">We’ve reached the end of this book, and first of all, I want to thank you for reading the book and congratulate you on finishing it! </span><span class="koboSpan" id="kobo.1019.2">You learned and did a lot during the course of this book. </span><span class="koboSpan" id="kobo.1019.3">You created your own Nx monorepo, ready to scale to hundreds of Angular applications and libraries. </span><span class="koboSpan" id="kobo.1019.4">You know how to configure the Nx monorepo to your personal needs and add the first libraries and applications inside your monorepo. </span><span class="koboSpan" id="kobo.1019.5">After creating the monorepo and adding projects, you learned about built-in and custom Nx generators and how to use them to generate boilerplate code and bring consistency into </span><span class="No-Break"><span class="koboSpan" id="kobo.1020.1">your monorepo.</span></span></p>
<p><span class="koboSpan" id="kobo.1021.1">Next, we moved on to Angular and learned about the latest developments of the framework, as well as how to utilize powerful features such as component communication, Angular routes, and </span><strong class="bold"><span class="koboSpan" id="kobo.1022.1">dependency injection</span></strong><span class="koboSpan" id="kobo.1023.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1024.1">DI</span></strong><span class="koboSpan" id="kobo.1025.1">). </span><span class="koboSpan" id="kobo.1025.2">You learned about pipes, directives, and animation after exploring the framework’s newest and most powerful features. </span><span class="koboSpan" id="kobo.1025.3">You saw how to create custom pipes and directives, learned about directive composition, and created reusable animation to make your application more appealing to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1026.1">end user.</span></span></p>
<p><span class="koboSpan" id="kobo.1027.1">Further, we did a deep dive into the Angular </span><strong class="source-inline"><span class="koboSpan" id="kobo.1028.1">forms</span></strong><span class="koboSpan" id="kobo.1029.1"> module, learning about template-driven, reactive, and dynamic forms. </span><span class="koboSpan" id="kobo.1029.2">Among other things, you learned about form validations, the form builder, error handling and creating dynamic forms, and form fields. </span><span class="koboSpan" id="kobo.1029.3">After finishing with Angular forms, we returned to theoretical knowledge, exploring different best practices, conventions, and design patterns commonly used within Angular applications. </span><span class="koboSpan" id="kobo.1029.4">You learned about some design patterns and best practices, setting you up for the next section of this book, which focused on reactive programming and state management. </span><span class="koboSpan" id="kobo.1029.5">You also learned how to utilize RxJS and Signals to create reactive code. </span><span class="koboSpan" id="kobo.1029.6">You learned about Observable streams, pipeable operators, and handling nested data streams. </span><span class="koboSpan" id="kobo.1029.7">We converted code from RxJS to Signals to demonstrate the difference between the two and explained when to use which tool to reach the desired outcome. </span><span class="koboSpan" id="kobo.1029.8">We also explored combining RxJS and Signals to get the best of both worlds. </span><span class="koboSpan" id="kobo.1029.9">When we finished with the basics of RxJS and Signals, we used both tools to create a custom state management solution and connected it with the component layer of our application using a facade service. </span><span class="koboSpan" id="kobo.1029.10">To finish our state management journey, we converted our custom state management solution to an implementation using NgRx, the Angular ecosystem’s most powerful and popular state </span><span class="No-Break"><span class="koboSpan" id="kobo.1030.1">management solution.</span></span></p>
<p><span class="koboSpan" id="kobo.1031.1">When we finished with reactive programming and state management, we moved on to the last section of this book. </span><span class="koboSpan" id="kobo.1031.2">You learned how to develop applications accessible to people from all over the world and of all abilities. </span><span class="koboSpan" id="kobo.1031.3">You used </span><strong class="source-inline"><span class="koboSpan" id="kobo.1032.1">transloco</span></strong><span class="koboSpan" id="kobo.1033.1"> to add localization and internationalization to your applications so that people of different countries and languages can use your application with their preferred formats and languages. </span><span class="koboSpan" id="kobo.1033.2">Next, you created unit and e2e tests using Jest </span><span class="No-Break"><span class="koboSpan" id="kobo.1034.1">and Cypress.</span></span></p>
<p><span class="koboSpan" id="kobo.1035.1">Lastly, we finished the book by creating an automated deployment process that uses GitHub Actions to deploy your application to GitHub Pages. </span><span class="koboSpan" id="kobo.1035.2">After finishing this book, you will have all the knowledge needed to develop robust and scalable Angular applications using Nx and the latest Angular techniques. </span><span class="koboSpan" id="kobo.1035.3">You can continue with the demo application we created by adding more pages, abstracting the table into its own component, creating a feature component for the expenses registration so that the page only has to declare one component, adding new features such as grouping expenses, planning expenses, uploading receipts, and whatever you seem fit. </span><span class="koboSpan" id="kobo.1035.4">You can also start creating multiple applications within the Nx monorepo or start from scratch with your own project. </span><span class="koboSpan" id="kobo.1035.5">Whatever you want to develop, you now have the tools and knowledge to effectively use Angular for applications of </span><span class="No-Break"><span class="koboSpan" id="kobo.1036.1">any scale.</span></span></p>
</div>
</body></html>